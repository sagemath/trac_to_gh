# Issue 30371: Use pipenv to create venv for development

archive/issues_030134.json:
```json
{
    "body": "We modify `src/setup.py` to support editable installs via pipenv (`pipenv install -e .`, which invokes `pip install --editable`).  Since distribution continues using build/pkgs/sagelib/src/setup.py, the changes to src/setup.py made in this ticket do not affect the existing build process of the Sage library.\n\nWith this ticket, the following code works:\n\n```\n./bootstrap\n./configure --enable-editable\nmake build-local\ncd src\nmkdir .venv\npipenv install --dev --ignore-pipfile\npipenv run pip install -e . --upgrade --exists-action=i --no-build-isolation\npipenv run sage-runtests --all\n```\nInstead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.\nIt generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.\nMoreover, the installation of some packages might fail (depending on your system configuration). In this case one can manually build it using sage and then install the sage-built wheel in the pipenv. For example,\n\n```\nmake fpylll\ncd src && pipenv run pip install <sage>/local/var/lib/sage/venv-python3.8/var/lib/sage/wheels/fpylll-0.5.6-cp38-cp38-linux_x86_64.whl\n```\n\n\nThe output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace\nMost tests are working, but a few are failing. Only a few tests are failing:\n\n```\nsage -t --random-seed=0 sage/misc/sagedoc.py  # 4 doctests failed\nsage -t --random-seed=0 sage/docs/conf.py  # 1 doctest failed\nsage -t --random-seed=0 sage/matrix/matrix_integer_dense.pyx  # 1 doctest failed\nsage -t --random-seed=0 sage/cpython/dict_del_by_value.pyx  # 2 doctests failed\nsage -t --random-seed=0 sage/tests/cmdline.py  # 8 doctests failed\n```\n\nTODO (as followup tickets):\n- Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n- Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is \"always include in version control\", see https://github.com/pypa/pipenv/issues/598.\n- Replace manual definition of build variables (PKG_CONFIG_PATH, LIBRARY_PATH etc) by `sage-env`.\n- Fix failing doctests. \n\n\nPrevious tickets on in-place builds, editable installs:\n- #12659\n- #21535\n\n\n\n\n**CC:**  @tobiasdiez @kiwifb @jhpalmieri @isuruf\n\n**Keywords:** sd111\n\n**Branch:** [public/build/inplace](https://github.com/sagemath/sagetrac-mirror/tree/public/build/inplace)\n\n**Commit:** [c736e0cbccc8ddb9cc8359a48094aa3181b881fa](https://github.com/sagemath/sagetrac-mirror/commit/c736e0cbccc8ddb9cc8359a48094aa3181b881fa)\n\n**Author:** Tobias Diez\n\n**Status:** needs_review\n\n**Dependencies:** #30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362, #31365, #31377\n\nIssue created by migration from https://trac.sagemath.org/ticket/30371\n\n",
    "created_at": "2020-08-15T14:24:53Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Use pipenv to create venv for development",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30371",
    "user": "https://github.com/mkoeppe"
}
```
We modify `src/setup.py` to support editable installs via pipenv (`pipenv install -e .`, which invokes `pip install --editable`).  Since distribution continues using build/pkgs/sagelib/src/setup.py, the changes to src/setup.py made in this ticket do not affect the existing build process of the Sage library.

With this ticket, the following code works:

```
./bootstrap
./configure --enable-editable
make build-local
cd src
mkdir .venv
pipenv install --dev --ignore-pipfile
pipenv run pip install -e . --upgrade --exists-action=i --no-build-isolation
pipenv run sage-runtests --all
```
Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.
It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.
Moreover, the installation of some packages might fail (depending on your system configuration). In this case one can manually build it using sage and then install the sage-built wheel in the pipenv. For example,

```
make fpylll
cd src && pipenv run pip install <sage>/local/var/lib/sage/venv-python3.8/var/lib/sage/wheels/fpylll-0.5.6-cp38-cp38-linux_x86_64.whl
```


The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace
Most tests are working, but a few are failing. Only a few tests are failing:

```
sage -t --random-seed=0 sage/misc/sagedoc.py  # 4 doctests failed
sage -t --random-seed=0 sage/docs/conf.py  # 1 doctest failed
sage -t --random-seed=0 sage/matrix/matrix_integer_dense.pyx  # 1 doctest failed
sage -t --random-seed=0 sage/cpython/dict_del_by_value.pyx  # 2 doctests failed
sage -t --random-seed=0 sage/tests/cmdline.py  # 8 doctests failed
```

TODO (as followup tickets):
- Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
- Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is "always include in version control", see https://github.com/pypa/pipenv/issues/598.
- Replace manual definition of build variables (PKG_CONFIG_PATH, LIBRARY_PATH etc) by `sage-env`.
- Fix failing doctests. 


Previous tickets on in-place builds, editable installs:
- #12659
- #21535




**CC:**  @tobiasdiez @kiwifb @jhpalmieri @isuruf

**Keywords:** sd111

**Branch:** [public/build/inplace](https://github.com/sagemath/sagetrac-mirror/tree/public/build/inplace)

**Commit:** [c736e0cbccc8ddb9cc8359a48094aa3181b881fa](https://github.com/sagemath/sagetrac-mirror/commit/c736e0cbccc8ddb9cc8359a48094aa3181b881fa)

**Author:** Tobias Diez

**Status:** needs_review

**Dependencies:** #30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362, #31365, #31377

Issue created by migration from https://trac.sagemath.org/ticket/30371





---

archive/issue_comments_599212.json:
```json
{
    "body": "<a id='comment:1'></a>\nI've worked a bit on it. The current commit is a semi-working prototype, in the sense that all cython files are successfully compiled to C files if invoked via `python src/setup.py build_ext --inplace`. The second compilation of the c files does not yet work.\n\nI had problems that none of the source cython files were correctly found on my system (wsl) and that a few dependencies in the current build files were not met (`'linbox', 'Singular', 'm4ri', 'zlib', 'cblas'`). For this reason, I started from scratch and only included what was needed so far. Any pointers to how to install these dependencies (I think they are needed for the second compilation).\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc6e2726cb87273de0c92297156dccf4b5107f06\">bc6e272</a></td><td><code>Semi-working prototype for inplace compilation</code></td></tr></table>\n",
    "created_at": "2020-08-17T22:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599212",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>
I've worked a bit on it. The current commit is a semi-working prototype, in the sense that all cython files are successfully compiled to C files if invoked via `python src/setup.py build_ext --inplace`. The second compilation of the c files does not yet work.

I had problems that none of the source cython files were correctly found on my system (wsl) and that a few dependencies in the current build files were not met (`'linbox', 'Singular', 'm4ri', 'zlib', 'cblas'`). For this reason, I started from scratch and only included what was needed so far. Any pointers to how to install these dependencies (I think they are needed for the second compilation).

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc6e2726cb87273de0c92297156dccf4b5107f06">bc6e272</a></td><td><code>Semi-working prototype for inplace compilation</code></td></tr></table>




---

archive/issue_comments_599213.json:
```json
{
    "body": "**Commit:** [bc6e2726cb87273de0c92297156dccf4b5107f06](https://github.com/sagemath/sagetrac-mirror/commit/bc6e2726cb87273de0c92297156dccf4b5107f06)",
    "created_at": "2020-08-17T22:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599213",
    "user": "https://github.com/tobiasdiez"
}
```

**Commit:** [bc6e2726cb87273de0c92297156dccf4b5107f06](https://github.com/sagemath/sagetrac-mirror/commit/bc6e2726cb87273de0c92297156dccf4b5107f06)



---

archive/issue_comments_599214.json:
```json
{
    "body": "**Branch:** [public/build/inplace](https://github.com/sagemath/sagetrac-mirror/tree/public/build/inplace)",
    "created_at": "2020-08-17T22:52:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599214",
    "user": "https://github.com/tobiasdiez"
}
```

**Branch:** [public/build/inplace](https://github.com/sagemath/sagetrac-mirror/tree/public/build/inplace)



---

archive/issue_comments_599215.json:
```json
{
    "body": "<a id='comment:2'></a>\nI don't really have time to look into this before the 9.2 release. But if you are looking for where include directories are determined, take a look at `sage_setup.command.sage_build_cython`",
    "created_at": "2020-08-18T00:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599215",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
I don't really have time to look into this before the 9.2 release. But if you are looking for where include directories are determined, take a look at `sage_setup.command.sage_build_cython`



---

archive/issue_comments_599216.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/58452ce79c2d8863f139e72d75ec7b0c5904a989\">58452ce</a></td><td><code>Make in-place compilation work</code></td></tr></table>\n",
    "created_at": "2020-08-19T16:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599216",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/58452ce79c2d8863f139e72d75ec7b0c5904a989">58452ce</a></td><td><code>Make in-place compilation work</code></td></tr></table>




---

archive/issue_comments_599217.json:
```json
{
    "body": "**Changing commit** from \"[bc6e2726cb87273de0c92297156dccf4b5107f06](https://github.com/sagemath/sagetrac-mirror/commit/bc6e2726cb87273de0c92297156dccf4b5107f06)\" to \"[58452ce79c2d8863f139e72d75ec7b0c5904a989](https://github.com/sagemath/sagetrac-mirror/commit/58452ce79c2d8863f139e72d75ec7b0c5904a989)\".",
    "created_at": "2020-08-19T16:33:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599217",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bc6e2726cb87273de0c92297156dccf4b5107f06](https://github.com/sagemath/sagetrac-mirror/commit/bc6e2726cb87273de0c92297156dccf4b5107f06)" to "[58452ce79c2d8863f139e72d75ec7b0c5904a989](https://github.com/sagemath/sagetrac-mirror/commit/58452ce79c2d8863f139e72d75ec7b0c5904a989)".



---

archive/issue_comments_599218.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe command `./sage src/setup.py build_ext --inplace` runs now fine for me. I had to change quite a few things to make it work, and found it easier to completely start over using `cythonize` instead of using the existing `build_cython` code. The resulting code is a minimal working version. Please let me know which features of the existing `build_cython` file you would like to keep (to be honest, I don't really understand what some of the code there is doing, and why its needed).\n\nThe code definitely needs cleanup, but otherwise is ready for a first round of review.",
    "created_at": "2020-08-19T16:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599218",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>
The command `./sage src/setup.py build_ext --inplace` runs now fine for me. I had to change quite a few things to make it work, and found it easier to completely start over using `cythonize` instead of using the existing `build_cython` code. The resulting code is a minimal working version. Please let me know which features of the existing `build_cython` file you would like to keep (to be honest, I don't really understand what some of the code there is doing, and why its needed).

The code definitely needs cleanup, but otherwise is ready for a first round of review.



---

archive/issue_comments_599219.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-08-19T16:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599219",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_599220.json:
```json
{
    "body": "**Changing commit** from \"[58452ce79c2d8863f139e72d75ec7b0c5904a989](https://github.com/sagemath/sagetrac-mirror/commit/58452ce79c2d8863f139e72d75ec7b0c5904a989)\" to \"[1a99228dafea2b7b676e1754b3d4b43f794ec7a7](https://github.com/sagemath/sagetrac-mirror/commit/1a99228dafea2b7b676e1754b3d4b43f794ec7a7)\".",
    "created_at": "2020-08-19T16:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599220",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[58452ce79c2d8863f139e72d75ec7b0c5904a989](https://github.com/sagemath/sagetrac-mirror/commit/58452ce79c2d8863f139e72d75ec7b0c5904a989)" to "[1a99228dafea2b7b676e1754b3d4b43f794ec7a7](https://github.com/sagemath/sagetrac-mirror/commit/1a99228dafea2b7b676e1754b3d4b43f794ec7a7)".



---

archive/issue_comments_599221.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a99228dafea2b7b676e1754b3d4b43f794ec7a7\">1a99228</a></td><td><code>Update gitignore</code></td></tr></table>\n",
    "created_at": "2020-08-19T16:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599221",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a99228dafea2b7b676e1754b3d4b43f794ec7a7">1a99228</a></td><td><code>Update gitignore</code></td></tr></table>




---

archive/issue_comments_599222.json:
```json
{
    "body": "<a id='comment:7'></a>\n\n```\n--- a/.gitignore\n+++ b/.gitignore\n@@ -99,7 +99,18 @@ gitlab-build-docker.log\n /src/build\n /src/Makefile\n /src/bin/sage-env-config\n-/build/bin/sage-build-env-config\n+/build\n```\nthis is not good. Our `/build/` contains important files of the sage distribution",
    "created_at": "2020-08-19T17:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599222",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>

```
--- a/.gitignore
+++ b/.gitignore
@@ -99,7 +99,18 @@ gitlab-build-docker.log
 /src/build
 /src/Makefile
 /src/bin/sage-env-config
-/build/bin/sage-build-env-config
+/build
```
this is not good. Our `/build/` contains important files of the sage distribution



---

archive/issue_comments_599223.json:
```json
{
    "body": "<a id='comment:8'></a>\nAnd the changes removing old python2 code really need to go on a separate ticket",
    "created_at": "2020-08-19T17:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599223",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
And the changes removing old python2 code really need to go on a separate ticket



---

archive/issue_comments_599224.json:
```json
{
    "body": "**Changing commit** from \"[1a99228dafea2b7b676e1754b3d4b43f794ec7a7](https://github.com/sagemath/sagetrac-mirror/commit/1a99228dafea2b7b676e1754b3d4b43f794ec7a7)\" to \"[22b27a051b7f1a429b7f91f965b33154ee776aea](https://github.com/sagemath/sagetrac-mirror/commit/22b27a051b7f1a429b7f91f965b33154ee776aea)\".",
    "created_at": "2020-08-19T19:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599224",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1a99228dafea2b7b676e1754b3d4b43f794ec7a7](https://github.com/sagemath/sagetrac-mirror/commit/1a99228dafea2b7b676e1754b3d4b43f794ec7a7)" to "[22b27a051b7f1a429b7f91f965b33154ee776aea](https://github.com/sagemath/sagetrac-mirror/commit/22b27a051b7f1a429b7f91f965b33154ee776aea)".



---

archive/issue_comments_599225.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22b27a051b7f1a429b7f91f965b33154ee776aea\">22b27a0</a></td><td><code>Remove global gitignore of build folder</code></td></tr></table>\n",
    "created_at": "2020-08-19T19:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599225",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22b27a051b7f1a429b7f91f965b33154ee776aea">22b27a0</a></td><td><code>Remove global gitignore of build folder</code></td></tr></table>




---

archive/issue_comments_599226.json:
```json
{
    "body": "<a id='comment:10'></a>\nOk, I was under the assumption that the build folder is for build artifacts. If this would be the case, then I suppose it would be better to whitelist those files in the build folder that needs to be checked-in. I've now replaced the global build ignore, by a more fine-grained statement which only ignores the \"temporary\" files.\n\nConcerning the changes about old Python2 code, I've created #30397.",
    "created_at": "2020-08-19T19:51:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599226",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:10'></a>
Ok, I was under the assumption that the build folder is for build artifacts. If this would be the case, then I suppose it would be better to whitelist those files in the build folder that needs to be checked-in. I've now replaced the global build ignore, by a more fine-grained statement which only ignores the "temporary" files.

Concerning the changes about old Python2 code, I've created #30397.



---

archive/issue_comments_599227.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [gh-tobiasdiez](#comment%3A10):\n> I was under the assumption that the build folder is for build artifacts.\n\n\nNo, not at all.",
    "created_at": "2020-08-20T00:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599227",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Replying to [gh-tobiasdiez](#comment%3A10):
> I was under the assumption that the build folder is for build artifacts.


No, not at all.



---

archive/issue_comments_599228.json:
```json
{
    "body": "<a id='comment:12'></a>\nThe changes I see in setup.py don't seem to fit so well into the plan I have regarding modularization of sagelib. See #29705 and #28925 (which needs help).",
    "created_at": "2020-08-20T00:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599228",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
The changes I see in setup.py don't seem to fit so well into the plan I have regarding modularization of sagelib. See #29705 and #28925 (which needs help).



---

archive/issue_comments_599229.json:
```json
{
    "body": "<a id='comment:13'></a>\nI wasn't aware of your changes in #28925. I guess what I'm proposing is a different strategy for the source discovery. The approach in #28925 is to change the source files themselves and enrich them by some form of metadata that decides in which distribution / package they land. Here I was proposing to specify the distribution of the files in the setup.py file. I guess both strategies have pros and cons. The main reason for me was that it seems the responsibility of the setup.py file to construct the distribution; why should the source file need to care about where they are used/included? I.e classical example of separation of concerns. I think, it's also the more flexible approach since it's easy to include a source file into multiple distributions etc. Moreover, you also gain a bit of performance at build time since you don't need to parse the files for some magic comments. What do you think?",
    "created_at": "2020-08-20T06:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599229",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:13'></a>
I wasn't aware of your changes in #28925. I guess what I'm proposing is a different strategy for the source discovery. The approach in #28925 is to change the source files themselves and enrich them by some form of metadata that decides in which distribution / package they land. Here I was proposing to specify the distribution of the files in the setup.py file. I guess both strategies have pros and cons. The main reason for me was that it seems the responsibility of the setup.py file to construct the distribution; why should the source file need to care about where they are used/included? I.e classical example of separation of concerns. I think, it's also the more flexible approach since it's easy to include a source file into multiple distributions etc. Moreover, you also gain a bit of performance at build time since you don't need to parse the files for some magic comments. What do you think?



---

archive/issue_comments_599230.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [gh-tobiasdiez](#comment%3A13):\n> [...] Here I was proposing to specify the distribution of the files in the setup.py file. I guess both strategies have pros and cons. The main reason for me was that it seems the responsibility of the setup.py file to construct the distribution; why should the source file need to care about where they are used/included? I.e classical example of separation of concerns. [...]\n\n\nOne more thing to be aware of is that (1) `setup.py` by itself actually is not able to control what goes into the source distribution. In #29865 (where I prepare some experimental subset distributions), I additionally use `MANIFEST.in` to control that.\n\nSeparation of concerns is, of course, desirable. But so is locality: (2) My plan for splitting up the distribution is driven to a large extent by the dependencies on different sets of C/C++ libraries. And these are already encoded in Cython distutils directives.\n\nAlso I have explored a little bit the packaging options beyond using setuptools (in part motivated because of the shortcoming (1)). See #29854 (flit), #29810 (poetry). Unfortunately currently there does not seem to be a proper mainstream solution for the source layout that we want to keep (a monolithic source tree in `src/sage`). For example, `flit` (and even `pip` out-of-directory installs) do not handle symbolic links well. In the long term, I was hoping to transform `sage_setup` to implement the PEP 517 API directly (see #29845). That's another reason why I would be reluctant to hard-code distribution information in `setup.py`.\n\nIn any case, I am hoping to have a broader discussion about all of this on sage-devel at the beginning of the 9.3 cycle.",
    "created_at": "2020-08-20T13:28:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599230",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Replying to [gh-tobiasdiez](#comment%3A13):
> [...] Here I was proposing to specify the distribution of the files in the setup.py file. I guess both strategies have pros and cons. The main reason for me was that it seems the responsibility of the setup.py file to construct the distribution; why should the source file need to care about where they are used/included? I.e classical example of separation of concerns. [...]


One more thing to be aware of is that (1) `setup.py` by itself actually is not able to control what goes into the source distribution. In #29865 (where I prepare some experimental subset distributions), I additionally use `MANIFEST.in` to control that.

Separation of concerns is, of course, desirable. But so is locality: (2) My plan for splitting up the distribution is driven to a large extent by the dependencies on different sets of C/C++ libraries. And these are already encoded in Cython distutils directives.

Also I have explored a little bit the packaging options beyond using setuptools (in part motivated because of the shortcoming (1)). See #29854 (flit), #29810 (poetry). Unfortunately currently there does not seem to be a proper mainstream solution for the source layout that we want to keep (a monolithic source tree in `src/sage`). For example, `flit` (and even `pip` out-of-directory installs) do not handle symbolic links well. In the long term, I was hoping to transform `sage_setup` to implement the PEP 517 API directly (see #29845). That's another reason why I would be reluctant to hard-code distribution information in `setup.py`.

In any case, I am hoping to have a broader discussion about all of this on sage-devel at the beginning of the 9.3 cycle.



---

archive/issue_comments_599231.json:
```json
{
    "body": "<a id='comment:15'></a>\n> Separation of concerns is, of course, desirable. But so is locality: (2) My plan for splitting up the distribution is driven to a large extent by the dependencies on different sets of C/C++ libraries. And these are already encoded in Cython distutils directives.\n\n\n\nOne could also take this as an argument to remove the distutil dependency directives and put them into the setup.py, giving you locality and separation of concerns. \n\nAnyway, my goal with this PR is not to redesign or modularize the build. I just wanted to have a working inplace build. For this moving the distribution declaration to setup.py was the easiest option, and I quite liked  this also from a conceptual point of view. But if the current way is preferred, I change it back of course.\nAnything else that needs to be changed?",
    "created_at": "2020-08-20T22:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599231",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:15'></a>
> Separation of concerns is, of course, desirable. But so is locality: (2) My plan for splitting up the distribution is driven to a large extent by the dependencies on different sets of C/C++ libraries. And these are already encoded in Cython distutils directives.



One could also take this as an argument to remove the distutil dependency directives and put them into the setup.py, giving you locality and separation of concerns. 

Anyway, my goal with this PR is not to redesign or modularize the build. I just wanted to have a working inplace build. For this moving the distribution declaration to setup.py was the easiest option, and I quite liked  this also from a conceptual point of view. But if the current way is preferred, I change it back of course.
Anything else that needs to be changed?



---

archive/issue_comments_599232.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [gh-tobiasdiez](#comment%3A15):\n> One could also take this as an argument to remove the distutil dependency directives and put them into the setup.py, giving you locality and separation of concerns. \n\n\nHa, no, we just moved them there. Getting rid of the messy file `modules_list.py` was an achievement in the present cycle. See #29706",
    "created_at": "2020-08-20T22:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599232",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Replying to [gh-tobiasdiez](#comment%3A15):
> One could also take this as an argument to remove the distutil dependency directives and put them into the setup.py, giving you locality and separation of concerns. 


Ha, no, we just moved them there. Getting rid of the messy file `modules_list.py` was an achievement in the present cycle. See #29706



---

archive/issue_comments_599233.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [gh-tobiasdiez](#comment%3A15):\n> Anything else that needs to be changed?\n\n\nI haven't really had a chance to look at it in more detail yet, sorry. Soon...",
    "created_at": "2020-08-20T22:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599233",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Replying to [gh-tobiasdiez](#comment%3A15):
> Anything else that needs to be changed?


I haven't really had a chance to look at it in more detail yet, sorry. Soon...



---

archive/issue_comments_599234.json:
```json
{
    "body": "**Changing commit** from \"[22b27a051b7f1a429b7f91f965b33154ee776aea](https://github.com/sagemath/sagetrac-mirror/commit/22b27a051b7f1a429b7f91f965b33154ee776aea)\" to \"[55d00d7f055628848bbdeef9075b8574c44316b2](https://github.com/sagemath/sagetrac-mirror/commit/55d00d7f055628848bbdeef9075b8574c44316b2)\".",
    "created_at": "2020-08-23T18:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599234",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[22b27a051b7f1a429b7f91f965b33154ee776aea](https://github.com/sagemath/sagetrac-mirror/commit/22b27a051b7f1a429b7f91f965b33154ee776aea)" to "[55d00d7f055628848bbdeef9075b8574c44316b2](https://github.com/sagemath/sagetrac-mirror/commit/55d00d7f055628848bbdeef9075b8574c44316b2)".



---

archive/issue_comments_599235.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55d00d7f055628848bbdeef9075b8574c44316b2\">55d00d7</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-08-23T18:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599235",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55d00d7f055628848bbdeef9075b8574c44316b2">55d00d7</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599236.json:
```json
{
    "body": "**Dependencies:** #30397",
    "created_at": "2020-08-23T19:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599236",
    "user": "https://github.com/tobiasdiez"
}
```

**Dependencies:** #30397



---

archive/issue_comments_599237.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8404a5d6264bbd9c00d37ac49da2bebe5f72794f\">8404a5d</a></td><td><code>Remove old python 2 code from cython files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9c06e37c2c9fe1cbb1d29429b24356a3249b892\">e9c06e3</a></td><td><code>Readd constants in build script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/811b78c1e313bbb587aa9c9dcf00824015854f94\">811b78c</a></td><td><code>Remove unused import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32daec5159d9e58323c31706d29e7230df2a2970\">32daec5</a></td><td><code>Merge branch 'public/build/removeOldCode' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40f35033ce241f8a6bf7fe2307a8c8b946c981e1\">40f3503</a></td><td><code>Fix merge problem</code></td></tr></table>\n",
    "created_at": "2020-08-23T20:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8404a5d6264bbd9c00d37ac49da2bebe5f72794f">8404a5d</a></td><td><code>Remove old python 2 code from cython files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9c06e37c2c9fe1cbb1d29429b24356a3249b892">e9c06e3</a></td><td><code>Readd constants in build script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/811b78c1e313bbb587aa9c9dcf00824015854f94">811b78c</a></td><td><code>Remove unused import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32daec5159d9e58323c31706d29e7230df2a2970">32daec5</a></td><td><code>Merge branch 'public/build/removeOldCode' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40f35033ce241f8a6bf7fe2307a8c8b946c981e1">40f3503</a></td><td><code>Fix merge problem</code></td></tr></table>




---

archive/issue_comments_599238.json:
```json
{
    "body": "**Changing commit** from \"[55d00d7f055628848bbdeef9075b8574c44316b2](https://github.com/sagemath/sagetrac-mirror/commit/55d00d7f055628848bbdeef9075b8574c44316b2)\" to \"[40f35033ce241f8a6bf7fe2307a8c8b946c981e1](https://github.com/sagemath/sagetrac-mirror/commit/40f35033ce241f8a6bf7fe2307a8c8b946c981e1)\".",
    "created_at": "2020-08-23T20:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[55d00d7f055628848bbdeef9075b8574c44316b2](https://github.com/sagemath/sagetrac-mirror/commit/55d00d7f055628848bbdeef9075b8574c44316b2)" to "[40f35033ce241f8a6bf7fe2307a8c8b946c981e1](https://github.com/sagemath/sagetrac-mirror/commit/40f35033ce241f8a6bf7fe2307a8c8b946c981e1)".



---

archive/issue_comments_599239.json:
```json
{
    "body": "**Changing commit** from \"[40f35033ce241f8a6bf7fe2307a8c8b946c981e1](https://github.com/sagemath/sagetrac-mirror/commit/40f35033ce241f8a6bf7fe2307a8c8b946c981e1)\" to \"[851c557ccb33c61c78b005a20b908721deaf31a0](https://github.com/sagemath/sagetrac-mirror/commit/851c557ccb33c61c78b005a20b908721deaf31a0)\".",
    "created_at": "2020-08-24T19:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599239",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[40f35033ce241f8a6bf7fe2307a8c8b946c981e1](https://github.com/sagemath/sagetrac-mirror/commit/40f35033ce241f8a6bf7fe2307a8c8b946c981e1)" to "[851c557ccb33c61c78b005a20b908721deaf31a0](https://github.com/sagemath/sagetrac-mirror/commit/851c557ccb33c61c78b005a20b908721deaf31a0)".



---

archive/issue_comments_599240.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/851c557ccb33c61c78b005a20b908721deaf31a0\">851c557</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-08-24T19:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599240",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/851c557ccb33c61c78b005a20b908721deaf31a0">851c557</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599241.json:
```json
{
    "body": "**Changing commit** from \"[851c557ccb33c61c78b005a20b908721deaf31a0](https://github.com/sagemath/sagetrac-mirror/commit/851c557ccb33c61c78b005a20b908721deaf31a0)\" to \"[1899dda1def19c3d7d518a5b4ccce67738415611](https://github.com/sagemath/sagetrac-mirror/commit/1899dda1def19c3d7d518a5b4ccce67738415611)\".",
    "created_at": "2020-08-24T21:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599241",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[851c557ccb33c61c78b005a20b908721deaf31a0](https://github.com/sagemath/sagetrac-mirror/commit/851c557ccb33c61c78b005a20b908721deaf31a0)" to "[1899dda1def19c3d7d518a5b4ccce67738415611](https://github.com/sagemath/sagetrac-mirror/commit/1899dda1def19c3d7d518a5b4ccce67738415611)".



---

archive/issue_comments_599242.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1899dda1def19c3d7d518a5b4ccce67738415611\">1899dda</a></td><td><code>Remove unnessary changes</code></td></tr></table>\n",
    "created_at": "2020-08-24T21:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599242",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1899dda1def19c3d7d518a5b4ccce67738415611">1899dda</a></td><td><code>Remove unnessary changes</code></td></tr></table>




---

archive/issue_comments_599243.json:
```json
{
    "body": "**Changing commit** from \"[1899dda1def19c3d7d518a5b4ccce67738415611](https://github.com/sagemath/sagetrac-mirror/commit/1899dda1def19c3d7d518a5b4ccce67738415611)\" to \"[74c9f7d2a328df4a2f436d3523daa12dddf655a6](https://github.com/sagemath/sagetrac-mirror/commit/74c9f7d2a328df4a2f436d3523daa12dddf655a6)\".",
    "created_at": "2020-08-24T21:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599243",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1899dda1def19c3d7d518a5b4ccce67738415611](https://github.com/sagemath/sagetrac-mirror/commit/1899dda1def19c3d7d518a5b4ccce67738415611)" to "[74c9f7d2a328df4a2f436d3523daa12dddf655a6](https://github.com/sagemath/sagetrac-mirror/commit/74c9f7d2a328df4a2f436d3523daa12dddf655a6)".



---

archive/issue_comments_599244.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74c9f7d2a328df4a2f436d3523daa12dddf655a6\">74c9f7d</a></td><td><code>Cleanup code</code></td></tr></table>\n",
    "created_at": "2020-08-24T21:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74c9f7d2a328df4a2f436d3523daa12dddf655a6">74c9f7d</a></td><td><code>Cleanup code</code></td></tr></table>




---

archive/issue_comments_599245.json:
```json
{
    "body": "<a id='comment:24'></a>\nI've now changed the code to use the `% sage_setup: distribution = xyz` way. Moreover, I've cleanup up the code a bit.\n\nBefore I continue removing the code that is no longer needed, I would like to ask you which features of the current cythonize build script are missing from my new minimalistic implementation and should be reimplemented. (As I've said above, I don't really understand some of the code in `build_cython`.",
    "created_at": "2020-08-24T21:46:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599245",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:24'></a>
I've now changed the code to use the `% sage_setup: distribution = xyz` way. Moreover, I've cleanup up the code a bit.

Before I continue removing the code that is no longer needed, I would like to ask you which features of the current cythonize build script are missing from my new minimalistic implementation and should be reimplemented. (As I've said above, I don't really understand some of the code in `build_cython`.



---

archive/issue_comments_599246.json:
```json
{
    "body": "<a id='comment:25'></a>\nThese changes: \n\n```\n-# distutils: sources = sage/libs/ppl_shim.cc\n+# distutils: sources = src/sage/libs/ppl_shim.cc\n```\nare not good. The root of the sagelib source tree is `src`, and paths are relative to this - this is where `setup.py` lives, after all.\n\nAs a way forward, I would suggest to actually work on #29864 instead of the present ticket. #29864 is a step in the modularization task (#29705), creating two new distributions - `sage-core` and `sage-tdlib`. `sage-core` is like `sagelib` minus `sage-tdlib` and without the fancy incremental installation tricks.",
    "created_at": "2020-09-08T04:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599246",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
These changes: 

```
-# distutils: sources = sage/libs/ppl_shim.cc
+# distutils: sources = src/sage/libs/ppl_shim.cc
```
are not good. The root of the sagelib source tree is `src`, and paths are relative to this - this is where `setup.py` lives, after all.

As a way forward, I would suggest to actually work on #29864 instead of the present ticket. #29864 is a step in the modularization task (#29705), creating two new distributions - `sage-core` and `sage-tdlib`. `sage-core` is like `sagelib` minus `sage-tdlib` and without the fancy incremental installation tricks.



---

archive/issue_comments_599247.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-09-08T04:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599247",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_599248.json:
```json
{
    "body": "<a id='comment:27'></a>\nThanks for the feedback. I'll try to find a way to specify the paths relative to `src`. I think my problem there was that `setup.py` is invoked from the central `sage` script, which sits in the root and not in the src folder.\n\nCan you please explain the connection to #29864 in detail? For my the main point of this ticket is that I can compile the cython files to obtain compiled `so` files in the same folder as the original cython file (e.g. `src/sage/rings`). This is needed so that VS code can pick up these dependencies, resolve the imports, provide intellisense for it etc. My longterm goal would be to have a normal python installation (central or virtual env), point VS towards this runtime, and be able to use the sage code (in /src) without the need to use `make` at any point. How are #29864 and #29705 helping for this?",
    "created_at": "2020-09-08T08:54:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599248",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:27'></a>
Thanks for the feedback. I'll try to find a way to specify the paths relative to `src`. I think my problem there was that `setup.py` is invoked from the central `sage` script, which sits in the root and not in the src folder.

Can you please explain the connection to #29864 in detail? For my the main point of this ticket is that I can compile the cython files to obtain compiled `so` files in the same folder as the original cython file (e.g. `src/sage/rings`). This is needed so that VS code can pick up these dependencies, resolve the imports, provide intellisense for it etc. My longterm goal would be to have a normal python installation (central or virtual env), point VS towards this runtime, and be able to use the sage code (in /src) without the need to use `make` at any point. How are #29864 and #29705 helping for this?



---

archive/issue_comments_599249.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [gh-tobiasdiez](#comment%3A27):\n> Can you please explain the connection to #29864 in detail? \n\n\nPackage `sage-core` created in #29864 will be a version of sagelib with a plain setuptools build system, intended for (modular) deployment of the Sage library on PyPI.  Since setuptools supports `setup.py develop`, this has synergy with your goal. \n\nAnd we will be able to work on the build system of `sage-core`, across several tickets, without having to worry about breaking `sagelib` builds - or what current users/developers are expecting of it.",
    "created_at": "2020-09-08T20:01:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599249",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
Replying to [gh-tobiasdiez](#comment%3A27):
> Can you please explain the connection to #29864 in detail? 


Package `sage-core` created in #29864 will be a version of sagelib with a plain setuptools build system, intended for (modular) deployment of the Sage library on PyPI.  Since setuptools supports `setup.py develop`, this has synergy with your goal. 

And we will be able to work on the build system of `sage-core`, across several tickets, without having to worry about breaking `sagelib` builds - or what current users/developers are expecting of it.



---

archive/issue_comments_599250.json:
```json
{
    "body": "<a id='comment:29'></a>\nThat make sense, thanks for the explanation.\n\nThe only thing that I still don't understand is how the modularization will help with the compilation of cython files. If if everything is modularized, I guess the setup.py will still be used for this. And the point of this ticket is to improve the cyhonization...",
    "created_at": "2020-09-09T07:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599250",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:29'></a>
That make sense, thanks for the explanation.

The only thing that I still don't understand is how the modularization will help with the compilation of cython files. If if everything is modularized, I guess the setup.py will still be used for this. And the point of this ticket is to improve the cyhonization...



---

archive/issue_comments_599251.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [gh-tobiasdiez](#comment%3A29):\n> The only thing that I still don't understand is how the modularization will help with the compilation of cython files. If if everything is modularized, I guess the setup.py will still be used for this.\n\n\nSimply by having a separate `setup.py` in `build/pkgs/sage-core/src`.",
    "created_at": "2020-09-09T15:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599251",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Replying to [gh-tobiasdiez](#comment%3A29):
> The only thing that I still don't understand is how the modularization will help with the compilation of cython files. If if everything is modularized, I guess the setup.py will still be used for this.


Simply by having a separate `setup.py` in `build/pkgs/sage-core/src`.



---

archive/issue_comments_599252.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,84 +1,8 @@\n-After removing the sagelib installation (e.g. using `make sagelib-clean`), one can try to do an editable install (aka `setup.py develop`) to make development more convenient.\n+After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n \n-This currently fails as follows:\n+In this ticket, we create `src/requirements.txt` and modify `src/setup.py` to facilitate this, including editable installs (`pip install --editable`).\n \n-```\n-./sage -pip install --editable src/\n-Obtaining file:///Users/mkoeppe/s/sage/sage-rebasing/src\n-Installing collected packages: sage\n-  Running setup.py develop for sage\n-    ERROR: Command errored out with exit status 1:\n-     command: /Users/mkoeppe/s/sage/sage-rebasing/local/bin/python3 -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py'\"'\"'; __file__='\"'\"'/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' develop --no-deps\n-         cwd: /Users/mkoeppe/s/sage/sage-rebasing/src/\n-    Complete output (426 lines):\n-    Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1\n-    distributions = ['', 'sage-bliss']\n-    Discovering Python/Cython source code....\n-    Discovered Python/Cython sources, time: 0.52 seconds.\n-    running develop\n-    running egg_info\n-    writing sage.egg-info/PKG-INFO\n-    writing dependency_links to sage.egg-info/dependency_links.txt\n-    writing top-level names to sage.egg-info/top_level.txt\n-    writing manifest file 'sage.egg-info/SOURCES.txt'\n-    running build_ext\n-    running build_cython\n-    Enabling Cython debugging support\n-    Updating Cython code....\n-    Compiling sage/misc/parser.pyx because it depends on ./sage/cpython/string.pxd.\n-    Compiling sage/misc/sage_ostools.pyx because it changed.\n-    Compiling sage/misc/derivative.pyx because it depends on ./sage/rings/integer.pxd.\n-    Compiling sage/misc/lazy_attribute.pyx because it changed.\n-...\n-    Compiling sage/interfaces/process.pyx because it changed.\n-    Compiling sage/interfaces/sagespawn.pyx because it changed.\n-    Compiling sage/monoids/free_abelian_monoid_element.pyx because it depends on ./sage/rings/integer.pxd.\n-    /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/setuptools/dist.py:454: UserWarning: Normalizing '9.2.beta8' to '9.2b8'\n-      warnings.warn(tmpl.format(**locals()))\n-    ************************************************************************\n-    Traceback (most recent call last):\n-      File \"<string>\", line 1, in <module>\n-      File \"/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py\", line 175, in <module>\n-        ext_modules = cython_modules)\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/core.py\", line 148, in setup\n-        dist.run_commands()\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py\", line 966, in run_commands\n-        self.run_command(cmd)\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py\", line 985, in run_command\n-        cmd_obj.run()\n-      File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/setuptools/command/develop.py\", line 38, in run\n-        self.install_for_development()\n-      File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/setuptools/command/develop.py\", line 140, in install_for_development\n-        self.run_command('build_ext')\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/cmd.py\", line 313, in run_command\n-        self.distribution.run_command(command)\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py\", line 985, in run_command\n-        cmd_obj.run()\n-      File \"/Users/mkoeppe/s/sage/sage-rebasing/src/sage_setup/command/sage_build_ext.py\", line 16, in run\n-        self.run_command('build_cython')\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/cmd.py\", line 313, in run_command\n-        self.distribution.run_command(command)\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py\", line 985, in run_command\n-        cmd_obj.run()\n-      File \"/Users/mkoeppe/s/sage/sage-rebasing/src/sage_setup/command/sage_build_cython.py\", line 248, in run\n-        cache=False,\n-      File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/Cython/Build/Dependencies.py\", line 1093, in cythonize\n-        result.get(99999)  # seconds\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/pool.py\", line 657, in get\n-        raise self._value\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/pool.py\", line 431, in _handle_tasks\n-        put(task)\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/connection.py\", line 206, in send\n-        self._send_bytes(_ForkingPickler.dumps(obj))\n-      File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/reduction.py\", line 51, in dumps\n-        cls(buf, protocol).dump(obj)\n-    _pickle.PicklingError: Can't pickle <class 'pkg_resources.extern.packaging._structures.Infinity'>: it's not the same object as pkg_resources.extern.packaging._structures.Infinity\n-    ************************************************************************\n-    Error building the Sage library\n-    ************************************************************************\n-    ----------------------------------------\n-ERROR: Command errored out with exit status 1: /Users/mkoeppe/s/sage/sage-rebasing/local/bin/python3 -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py'\"'\"'; __file__='\"'\"'/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' develop --no-deps Check the logs for full command output.\n-```\n+The existing `src/setup.py` will be moved into `sagelib` installation to replace the symlink. In this way, the changes to `src/setup.py` do not affect the existing build process of the Sage library.\n \n \n \n``````\n",
    "created_at": "2020-09-14T20:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599252",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,84 +1,8 @@
-After removing the sagelib installation (e.g. using `make sagelib-clean`), one can try to do an editable install (aka `setup.py develop`) to make development more convenient.
+After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
 
-This currently fails as follows:
+In this ticket, we create `src/requirements.txt` and modify `src/setup.py` to facilitate this, including editable installs (`pip install --editable`).
 
-```
-./sage -pip install --editable src/
-Obtaining file:///Users/mkoeppe/s/sage/sage-rebasing/src
-Installing collected packages: sage
-  Running setup.py develop for sage
-    ERROR: Command errored out with exit status 1:
-     command: /Users/mkoeppe/s/sage/sage-rebasing/local/bin/python3 -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py'"'"'; __file__='"'"'/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' develop --no-deps
-         cwd: /Users/mkoeppe/s/sage/sage-rebasing/src/
-    Complete output (426 lines):
-    Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
-    distributions = ['', 'sage-bliss']
-    Discovering Python/Cython source code....
-    Discovered Python/Cython sources, time: 0.52 seconds.
-    running develop
-    running egg_info
-    writing sage.egg-info/PKG-INFO
-    writing dependency_links to sage.egg-info/dependency_links.txt
-    writing top-level names to sage.egg-info/top_level.txt
-    writing manifest file 'sage.egg-info/SOURCES.txt'
-    running build_ext
-    running build_cython
-    Enabling Cython debugging support
-    Updating Cython code....
-    Compiling sage/misc/parser.pyx because it depends on ./sage/cpython/string.pxd.
-    Compiling sage/misc/sage_ostools.pyx because it changed.
-    Compiling sage/misc/derivative.pyx because it depends on ./sage/rings/integer.pxd.
-    Compiling sage/misc/lazy_attribute.pyx because it changed.
-...
-    Compiling sage/interfaces/process.pyx because it changed.
-    Compiling sage/interfaces/sagespawn.pyx because it changed.
-    Compiling sage/monoids/free_abelian_monoid_element.pyx because it depends on ./sage/rings/integer.pxd.
-    /Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/setuptools/dist.py:454: UserWarning: Normalizing '9.2.beta8' to '9.2b8'
-      warnings.warn(tmpl.format(**locals()))
-    ************************************************************************
-    Traceback (most recent call last):
-      File "<string>", line 1, in <module>
-      File "/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py", line 175, in <module>
-        ext_modules = cython_modules)
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/core.py", line 148, in setup
-        dist.run_commands()
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py", line 966, in run_commands
-        self.run_command(cmd)
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py", line 985, in run_command
-        cmd_obj.run()
-      File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/setuptools/command/develop.py", line 38, in run
-        self.install_for_development()
-      File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/setuptools/command/develop.py", line 140, in install_for_development
-        self.run_command('build_ext')
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/cmd.py", line 313, in run_command
-        self.distribution.run_command(command)
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py", line 985, in run_command
-        cmd_obj.run()
-      File "/Users/mkoeppe/s/sage/sage-rebasing/src/sage_setup/command/sage_build_ext.py", line 16, in run
-        self.run_command('build_cython')
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/cmd.py", line 313, in run_command
-        self.distribution.run_command(command)
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py", line 985, in run_command
-        cmd_obj.run()
-      File "/Users/mkoeppe/s/sage/sage-rebasing/src/sage_setup/command/sage_build_cython.py", line 248, in run
-        cache=False,
-      File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/Cython/Build/Dependencies.py", line 1093, in cythonize
-        result.get(99999)  # seconds
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/pool.py", line 657, in get
-        raise self._value
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/pool.py", line 431, in _handle_tasks
-        put(task)
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/connection.py", line 206, in send
-        self._send_bytes(_ForkingPickler.dumps(obj))
-      File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/multiprocessing/reduction.py", line 51, in dumps
-        cls(buf, protocol).dump(obj)
-    _pickle.PicklingError: Can't pickle <class 'pkg_resources.extern.packaging._structures.Infinity'>: it's not the same object as pkg_resources.extern.packaging._structures.Infinity
-    ************************************************************************
-    Error building the Sage library
-    ************************************************************************
-    ----------------------------------------
-ERROR: Command errored out with exit status 1: /Users/mkoeppe/s/sage/sage-rebasing/local/bin/python3 -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py'"'"'; __file__='"'"'/Users/mkoeppe/s/sage/sage-rebasing/src/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' develop --no-deps Check the logs for full command output.
-```
+The existing `src/setup.py` will be moved into `sagelib` installation to replace the symlink. In this way, the changes to `src/setup.py` do not affect the existing build process of the Sage library.
 
 
 
``````




---

archive/issue_events_088670.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "rename": {
        "from": "In-place installs with \"./sage -pip install --editable src/\"",
        "to": "In-place (editable) installs of sagelib in a venv"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88670"
}
```



---

archive/issue_comments_599253.json:
```json
{
    "body": "**Changing dependencies** from \"#30397\" to \"#29500, #30527\".",
    "created_at": "2020-09-14T20:05:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599253",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#30397" to "#29500, #30527".



---

archive/issue_comments_599254.json:
```json
{
    "body": "<a id='comment:32'></a>\nSlight change of plans, forget about `sage-core`.",
    "created_at": "2020-09-14T20:06:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599254",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
Slight change of plans, forget about `sage-core`.



---

archive/issue_comments_599255.json:
```json
{
    "body": "**Changing commit** from \"[74c9f7d2a328df4a2f436d3523daa12dddf655a6](https://github.com/sagemath/sagetrac-mirror/commit/74c9f7d2a328df4a2f436d3523daa12dddf655a6)\" to \"[5bda3321b88289cbd3f0dfe97308b07dd9dd1459](https://github.com/sagemath/sagetrac-mirror/commit/5bda3321b88289cbd3f0dfe97308b07dd9dd1459)\".",
    "created_at": "2020-09-14T20:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599255",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[74c9f7d2a328df4a2f436d3523daa12dddf655a6](https://github.com/sagemath/sagetrac-mirror/commit/74c9f7d2a328df4a2f436d3523daa12dddf655a6)" to "[5bda3321b88289cbd3f0dfe97308b07dd9dd1459](https://github.com/sagemath/sagetrac-mirror/commit/5bda3321b88289cbd3f0dfe97308b07dd9dd1459)".



---

archive/issue_comments_599256.json:
```json
{
    "body": "<a id='comment:33'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a646747dbf7c823030e1b23419348ff795a0661\">0a64674</a></td><td><code>build/pkgs/gambit/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca586938cbdd91114a10dd3364201c8076412485\">ca58693</a></td><td><code>build/pkgs/pillow/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/207d80f99b8498b9d34e6dd7cee4f0d3d00e53c5\">207d80f</a></td><td><code>build/pkgs/pip2pi: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2555e19712ee6bc2f9b4edf982b5f86d1bb9a6fe\">2555e19</a></td><td><code>build/make/install: At the end, update the repository index</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a747c48eca1be0104c202e4922e5386aa794d08\">5a747c4</a></td><td><code>build/bin/sage-pip-{install,uninstall}: Remove pip2 support</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e66243f23a20a6499b0ad33c5538ae4f36b31764\">e66243f</a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30527/pep-503-simple-repository-for-wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9937126f6c18d3bbf1eeb28d69c610492daeb23f\">9937126</a></td><td><code>Merge branch 't/30527/pep-503-simple-repository-for-wheels' into t/30371/public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a39442df31b764771970b5c8031ba38a6255d0f\">1a39442</a></td><td><code>build/pkgs/sagelib/src/setup.py: Replace symlink to SAGE_SRC/setup.py by a copy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54fe0c7013871165cbabf510e3b377c81edbfedc\">54fe0c7</a></td><td><code>src/tox.ini, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bda3321b88289cbd3f0dfe97308b07dd9dd1459\">5bda332</a></td><td><code>In-place (editable) installs of sagelib (#30371 squashed)</code></td></tr></table>\n",
    "created_at": "2020-09-14T20:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599256",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a646747dbf7c823030e1b23419348ff795a0661">0a64674</a></td><td><code>build/pkgs/gambit/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca586938cbdd91114a10dd3364201c8076412485">ca58693</a></td><td><code>build/pkgs/pillow/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/207d80f99b8498b9d34e6dd7cee4f0d3d00e53c5">207d80f</a></td><td><code>build/pkgs/pip2pi: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2555e19712ee6bc2f9b4edf982b5f86d1bb9a6fe">2555e19</a></td><td><code>build/make/install: At the end, update the repository index</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a747c48eca1be0104c202e4922e5386aa794d08">5a747c4</a></td><td><code>build/bin/sage-pip-{install,uninstall}: Remove pip2 support</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e66243f23a20a6499b0ad33c5538ae4f36b31764">e66243f</a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30527/pep-503-simple-repository-for-wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9937126f6c18d3bbf1eeb28d69c610492daeb23f">9937126</a></td><td><code>Merge branch 't/30527/pep-503-simple-repository-for-wheels' into t/30371/public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a39442df31b764771970b5c8031ba38a6255d0f">1a39442</a></td><td><code>build/pkgs/sagelib/src/setup.py: Replace symlink to SAGE_SRC/setup.py by a copy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54fe0c7013871165cbabf510e3b377c81edbfedc">54fe0c7</a></td><td><code>src/tox.ini, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bda3321b88289cbd3f0dfe97308b07dd9dd1459">5bda332</a></td><td><code>In-place (editable) installs of sagelib (#30371 squashed)</code></td></tr></table>




---

archive/issue_comments_599257.json:
```json
{
    "body": "<a id='comment:34'></a>\nTODO:\n- The changes to `src/sage/cpython/debugimpl.c` need to go on a separate ticket\n- The changes to `src/sage/misc/persist.pyx` need to go on a separate ticket\n- Don't change `find_python_sources` because `build/pkgs/sagelib/src/setup.py` continues to use it",
    "created_at": "2020-09-14T20:40:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599257",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
TODO:
- The changes to `src/sage/cpython/debugimpl.c` need to go on a separate ticket
- The changes to `src/sage/misc/persist.pyx` need to go on a separate ticket
- Don't change `find_python_sources` because `build/pkgs/sagelib/src/setup.py` continues to use it



---

archive/issue_comments_599258.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,9 @@\n \n In this ticket, we create `src/requirements.txt` and modify `src/setup.py` to facilitate this, including editable installs (`pip install --editable`).\n \n-The existing `src/setup.py` will be moved into `sagelib` installation to replace the symlink. In this way, the changes to `src/setup.py` do not affect the existing build process of the Sage library.\n+We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n+\n+The existing `src/setup.py` is moved into `sagelib` installation to replace the symlink. In this way, the changes to `src/setup.py` do not affect the existing build process of the Sage library.\n \n \n \n``````\n",
    "created_at": "2020-09-14T20:56:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599258",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,9 @@
 
 In this ticket, we create `src/requirements.txt` and modify `src/setup.py` to facilitate this, including editable installs (`pip install --editable`).
 
-The existing `src/setup.py` will be moved into `sagelib` installation to replace the symlink. In this way, the changes to `src/setup.py` do not affect the existing build process of the Sage library.
+We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
+
+The existing `src/setup.py` is moved into `sagelib` installation to replace the symlink. In this way, the changes to `src/setup.py` do not affect the existing build process of the Sage library.
 
 
 
``````




---

archive/issue_comments_599259.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n \n We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n-The existing `src/setup.py` is moved into `sagelib` installation to replace the symlink. In this way, the changes to `src/setup.py` do not affect the existing build process of the Sage library.\n+The existing `src/setup.py` is copied into `build/pkgs/sagelib/src`  to replace the symlink. In this way, the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library.\n \n \n \n``````\n",
    "created_at": "2020-09-14T20:57:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599259",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 
 We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 
-The existing `src/setup.py` is moved into `sagelib` installation to replace the symlink. In this way, the changes to `src/setup.py` do not affect the existing build process of the Sage library.
+The existing `src/setup.py` is copied into `build/pkgs/sagelib/src`  to replace the symlink. In this way, the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library.
 
 
 
``````




---

archive/issue_comments_599260.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30527\" to \"#29500, #30527, #22731\".",
    "created_at": "2020-09-14T21:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599260",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29500, #30527" to "#29500, #30527, #22731".



---

archive/issue_comments_599261.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,4 +12,7 @@\n - #12659\n - #21535\n \n+Related:\n+- #28746 Developer's Guide: Add instructions for sagelib development in a conda environment\n+- #28752 Make sagelib pip-installable in a conda environment\n \n``````\n",
    "created_at": "2020-09-14T22:43:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599261",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,4 +12,7 @@
 - #12659
 - #21535
 
+Related:
+- #28746 Developer's Guide: Add instructions for sagelib development in a conda environment
+- #28752 Make sagelib pip-installable in a conda environment
 
``````




---

archive/issue_comments_599262.json:
```json
{
    "body": "**Changing commit** from \"[5bda3321b88289cbd3f0dfe97308b07dd9dd1459](https://github.com/sagemath/sagetrac-mirror/commit/5bda3321b88289cbd3f0dfe97308b07dd9dd1459)\" to \"[274538190984ea38145ffdb4d7d1defc88784124](https://github.com/sagemath/sagetrac-mirror/commit/274538190984ea38145ffdb4d7d1defc88784124)\".",
    "created_at": "2020-09-14T23:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599262",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5bda3321b88289cbd3f0dfe97308b07dd9dd1459](https://github.com/sagemath/sagetrac-mirror/commit/5bda3321b88289cbd3f0dfe97308b07dd9dd1459)" to "[274538190984ea38145ffdb4d7d1defc88784124](https://github.com/sagemath/sagetrac-mirror/commit/274538190984ea38145ffdb4d7d1defc88784124)".



---

archive/issue_comments_599263.json:
```json
{
    "body": "<a id='comment:39'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67c56a6a215f646336b6fe8374aca89fa6d8bb84\">67c56a6</a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/274538190984ea38145ffdb4d7d1defc88784124\">2745381</a></td><td><code>In-place (editable) installs of sagelib (#30371 squashed)</code></td></tr></table>\n",
    "created_at": "2020-09-14T23:04:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599263",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67c56a6a215f646336b6fe8374aca89fa6d8bb84">67c56a6</a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/274538190984ea38145ffdb4d7d1defc88784124">2745381</a></td><td><code>In-place (editable) installs of sagelib (#30371 squashed)</code></td></tr></table>




---

archive/issue_comments_599264.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30527, #22731\" to \"#29500, #30527, #22731, #30578\".",
    "created_at": "2020-09-15T20:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599264",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29500, #30527, #22731" to "#29500, #30527, #22731, #30578".



---

archive/issue_comments_599265.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,18 +1,12 @@\n-After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n+After #30527 and #30578, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n \n-In this ticket, we create `src/requirements.txt` and modify `src/setup.py` to facilitate this, including editable installs (`pip install --editable`).\n+We modify `src/setup.py` to support editable installs (`pip install --editable`).  (After #30578, this is a separate copy, so the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library for sage-the-distribution.)\n \n We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n-\n-The existing `src/setup.py` is copied into `build/pkgs/sagelib/src`  to replace the symlink. In this way, the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library.\n-\n \n \n Previous tickets on in-place builds, editable installs:\n - #12659\n - #21535\n \n-Related:\n-- #28746 Developer's Guide: Add instructions for sagelib development in a conda environment\n-- #28752 Make sagelib pip-installable in a conda environment\n \n``````\n",
    "created_at": "2020-09-15T20:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599265",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,18 +1,12 @@
-After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
+After #30527 and #30578, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
 
-In this ticket, we create `src/requirements.txt` and modify `src/setup.py` to facilitate this, including editable installs (`pip install --editable`).
+We modify `src/setup.py` to support editable installs (`pip install --editable`).  (After #30578, this is a separate copy, so the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library for sage-the-distribution.)
 
 We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
-
-The existing `src/setup.py` is copied into `build/pkgs/sagelib/src`  to replace the symlink. In this way, the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library.
-
 
 
 Previous tickets on in-place builds, editable installs:
 - #12659
 - #21535
 
-Related:
-- #28746 Developer's Guide: Add instructions for sagelib development in a conda environment
-- #28752 Make sagelib pip-installable in a conda environment
 
``````




---

archive/issue_comments_599266.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [mkoeppe](#comment%3A34):\n> TODO:\n> - The changes to `src/sage/cpython/debugimpl.c` need to go on a separate ticket\n\n\nThis is now #30590",
    "created_at": "2020-09-17T19:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599266",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:41'></a>
Replying to [mkoeppe](#comment%3A34):
> TODO:
> - The changes to `src/sage/cpython/debugimpl.c` need to go on a separate ticket


This is now #30590



---

archive/issue_comments_599267.json:
```json
{
    "body": "**Changing commit** from \"[274538190984ea38145ffdb4d7d1defc88784124](https://github.com/sagemath/sagetrac-mirror/commit/274538190984ea38145ffdb4d7d1defc88784124)\" to \"[a493e6e2a972ab5344fdd3a953376278e807cf3b](https://github.com/sagemath/sagetrac-mirror/commit/a493e6e2a972ab5344fdd3a953376278e807cf3b)\".",
    "created_at": "2020-09-25T21:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[274538190984ea38145ffdb4d7d1defc88784124](https://github.com/sagemath/sagetrac-mirror/commit/274538190984ea38145ffdb4d7d1defc88784124)" to "[a493e6e2a972ab5344fdd3a953376278e807cf3b](https://github.com/sagemath/sagetrac-mirror/commit/a493e6e2a972ab5344fdd3a953376278e807cf3b)".



---

archive/issue_comments_599268.json:
```json
{
    "body": "<a id='comment:42'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/851c557ccb33c61c78b005a20b908721deaf31a0\">851c557</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1899dda1def19c3d7d518a5b4ccce67738415611\">1899dda</a></td><td><code>Remove unnessary changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74c9f7d2a328df4a2f436d3523daa12dddf655a6\">74c9f7d</a></td><td><code>Cleanup code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/81fdcf356bd884e88e02431905e86f4909b6df52\">81fdcf3</a></td><td><code>Make distutils relative to src again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/faf6777dbd9f8ee462d2a0fcf32cfba56633d41b\">faf6777</a></td><td><code>Fail gracefully for missing packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8af6e23fbbfbd205a82dcfb63ebd1d5596cdebf7\">8af6e23</a></td><td><code>Add minimal pipfile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/456589c997d367cb93bb43c68abb607622d1cc5c\">456589c</a></td><td><code>Ignore build files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59e8361c95069f8518b52a556fa903ca648187fc\">59e8361</a></td><td><code>Make it compile by ignoring a lot of errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/054fedc5fa7c7b5b68ce0500ff25c80aa0275cd7\">054fedc</a></td><td><code>Add psutil and pexpect</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a493e6e2a972ab5344fdd3a953376278e807cf3b\">a493e6e</a></td><td><code>Merge branch 'public/build/inplace' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-09-25T21:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599268",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/851c557ccb33c61c78b005a20b908721deaf31a0">851c557</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1899dda1def19c3d7d518a5b4ccce67738415611">1899dda</a></td><td><code>Remove unnessary changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74c9f7d2a328df4a2f436d3523daa12dddf655a6">74c9f7d</a></td><td><code>Cleanup code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/81fdcf356bd884e88e02431905e86f4909b6df52">81fdcf3</a></td><td><code>Make distutils relative to src again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/faf6777dbd9f8ee462d2a0fcf32cfba56633d41b">faf6777</a></td><td><code>Fail gracefully for missing packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8af6e23fbbfbd205a82dcfb63ebd1d5596cdebf7">8af6e23</a></td><td><code>Add minimal pipfile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/456589c997d367cb93bb43c68abb607622d1cc5c">456589c</a></td><td><code>Ignore build files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59e8361c95069f8518b52a556fa903ca648187fc">59e8361</a></td><td><code>Make it compile by ignoring a lot of errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/054fedc5fa7c7b5b68ce0500ff25c80aa0275cd7">054fedc</a></td><td><code>Add psutil and pexpect</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a493e6e2a972ab5344fdd3a953376278e807cf3b">a493e6e</a></td><td><code>Merge branch 'public/build/inplace' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599269.json:
```json
{
    "body": "**Changing commit** from \"[a493e6e2a972ab5344fdd3a953376278e807cf3b](https://github.com/sagemath/sagetrac-mirror/commit/a493e6e2a972ab5344fdd3a953376278e807cf3b)\" to \"[c5f3873cc7ddb158646051861fc10c72c6be22f5](https://github.com/sagemath/sagetrac-mirror/commit/c5f3873cc7ddb158646051861fc10c72c6be22f5)\".",
    "created_at": "2020-09-25T21:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599269",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a493e6e2a972ab5344fdd3a953376278e807cf3b](https://github.com/sagemath/sagetrac-mirror/commit/a493e6e2a972ab5344fdd3a953376278e807cf3b)" to "[c5f3873cc7ddb158646051861fc10c72c6be22f5](https://github.com/sagemath/sagetrac-mirror/commit/c5f3873cc7ddb158646051861fc10c72c6be22f5)".



---

archive/issue_comments_599270.json:
```json
{
    "body": "<a id='comment:43'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5f3873cc7ddb158646051861fc10c72c6be22f5\">c5f3873</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-09-25T21:54:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599270",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5f3873cc7ddb158646051861fc10c72c6be22f5">c5f3873</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599271.json:
```json
{
    "body": "<a id='comment:44'></a>\nI have now added a minimal pipfile including sage as an editable install. So running `pipenv install` results in a semi-workable virtual environment. \"Semi\" because not all pyx files could be compiled successfully since  they rely on external dependencies (e.g. singular, giac, ecl, ratpoints, ...).\n\nFor now, I've excluded the relevant pyx files from the compilation. Any ideas how to handle these dependencies are welcome! One approach would be to treat them similar to the the optional packages by putting a \"sage_setup distribution\" tag to the pyx file.\n\nI also tried to run `pipenv install` directly under Windows, but that's not possible at the moment as some of the dependencies cannot be installed on Windows currently:\nhttps://github.com/sagemath/cypari2/issues/19\nhttps://github.com/sagemath/cysignals/pull/104",
    "created_at": "2020-09-25T22:54:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599271",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:44'></a>
I have now added a minimal pipfile including sage as an editable install. So running `pipenv install` results in a semi-workable virtual environment. "Semi" because not all pyx files could be compiled successfully since  they rely on external dependencies (e.g. singular, giac, ecl, ratpoints, ...).

For now, I've excluded the relevant pyx files from the compilation. Any ideas how to handle these dependencies are welcome! One approach would be to treat them similar to the the optional packages by putting a "sage_setup distribution" tag to the pyx file.

I also tried to run `pipenv install` directly under Windows, but that's not possible at the moment as some of the dependencies cannot be installed on Windows currently:
https://github.com/sagemath/cypari2/issues/19
https://github.com/sagemath/cysignals/pull/104



---

archive/issue_comments_599272.json:
```json
{
    "body": "<a id='comment:45'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a7ec880694afbb085df91031ef911a9714be084\">8a7ec88</a></td><td><code>Revert format changes in debug.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba58ffa140cf8baff7b7d8d8029dbd46dbc64128\">ba58ffa</a></td><td><code>Make distutil imports relative to src (again?)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7fb5a9d46d8acb5068cde9a94009adb800d4783\">b7fb5a9</a></td><td><code>Incorporate upstream changes</code></td></tr></table>\n",
    "created_at": "2020-09-25T22:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a7ec880694afbb085df91031ef911a9714be084">8a7ec88</a></td><td><code>Revert format changes in debug.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba58ffa140cf8baff7b7d8d8029dbd46dbc64128">ba58ffa</a></td><td><code>Make distutil imports relative to src (again?)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7fb5a9d46d8acb5068cde9a94009adb800d4783">b7fb5a9</a></td><td><code>Incorporate upstream changes</code></td></tr></table>




---

archive/issue_comments_599273.json:
```json
{
    "body": "**Changing commit** from \"[c5f3873cc7ddb158646051861fc10c72c6be22f5](https://github.com/sagemath/sagetrac-mirror/commit/c5f3873cc7ddb158646051861fc10c72c6be22f5)\" to \"[b7fb5a9d46d8acb5068cde9a94009adb800d4783](https://github.com/sagemath/sagetrac-mirror/commit/b7fb5a9d46d8acb5068cde9a94009adb800d4783)\".",
    "created_at": "2020-09-25T22:54:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599273",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c5f3873cc7ddb158646051861fc10c72c6be22f5](https://github.com/sagemath/sagetrac-mirror/commit/c5f3873cc7ddb158646051861fc10c72c6be22f5)" to "[b7fb5a9d46d8acb5068cde9a94009adb800d4783](https://github.com/sagemath/sagetrac-mirror/commit/b7fb5a9d46d8acb5068cde9a94009adb800d4783)".



---

archive/issue_comments_599274.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [gh-tobiasdiez](#comment%3A44):\n> [...] not all pyx files could be compiled successfully since  they rely on external dependencies (e.g. singular, giac, ecl, ratpoints, ...).\n> One approach would be to treat them similar to the the optional packages by putting a \"sage_setup distribution\" tag to the pyx file.\n\n\nYes, exactly this approach is part of the \"modularization\" that I have in mind. See #29705 under the items titled \"Deploy mildly modularized distributions\", \"Further modularization\" for a sketch of such distributions. Basically, one distribution for each major C/C++ library (such as `sage-ntl`) - but some libraries come in packs that would not make much sense to separate (such as `sage-flint-arb-e_antic`).",
    "created_at": "2020-09-26T00:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599274",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
Replying to [gh-tobiasdiez](#comment%3A44):
> [...] not all pyx files could be compiled successfully since  they rely on external dependencies (e.g. singular, giac, ecl, ratpoints, ...).
> One approach would be to treat them similar to the the optional packages by putting a "sage_setup distribution" tag to the pyx file.


Yes, exactly this approach is part of the "modularization" that I have in mind. See #29705 under the items titled "Deploy mildly modularized distributions", "Further modularization" for a sketch of such distributions. Basically, one distribution for each major C/C++ library (such as `sage-ntl`) - but some libraries come in packs that would not make much sense to separate (such as `sage-flint-arb-e_antic`).



---

archive/issue_comments_599275.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [gh-tobiasdiez](#comment%3A44):\n> I also tried to run `pipenv install` directly under Windows, but that's not possible at the moment as some of the dependencies cannot be installed on Windows currently:\n> https://github.com/sagemath/cypari2/issues/19\n> https://github.com/sagemath/cysignals/pull/104\n\n\nRight, I hope that when modularization is done, a native Windows port of a tiny Sage subset would be an actionable project.",
    "created_at": "2020-09-26T00:36:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599275",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
Replying to [gh-tobiasdiez](#comment%3A44):
> I also tried to run `pipenv install` directly under Windows, but that's not possible at the moment as some of the dependencies cannot be installed on Windows currently:
> https://github.com/sagemath/cypari2/issues/19
> https://github.com/sagemath/cysignals/pull/104


Right, I hope that when modularization is done, a native Windows port of a tiny Sage subset would be an actionable project.



---

archive/issue_comments_599276.json:
```json
{
    "body": "<a id='comment:48'></a>\nAs in #30578 (where I am trying the same with `requirements.txt` and plain `venv`), I would like to get the following to work: \n\n1. Build the sage distribution (actually all prerequisites of sagelib, using `make sagelib-build-deps`)\n\n2. Then within `sage -sh` (where all the libraries installed in `$SAGE_LOCAL` are available) do the in-place install into a new venv created by `pipenv` - using the wheels built in `$SAGE_LOCAL/var/lib/sage/wheels`.",
    "created_at": "2020-09-26T00:49:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599276",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'></a>
As in #30578 (where I am trying the same with `requirements.txt` and plain `venv`), I would like to get the following to work: 

1. Build the sage distribution (actually all prerequisites of sagelib, using `make sagelib-build-deps`)

2. Then within `sage -sh` (where all the libraries installed in `$SAGE_LOCAL` are available) do the in-place install into a new venv created by `pipenv` - using the wheels built in `$SAGE_LOCAL/var/lib/sage/wheels`.



---

archive/issue_comments_599277.json:
```json
{
    "body": "<a id='comment:49'></a>\nThanks for the quick feedback.\n\nI agree the modularization is a good way to approach these problems. Sadly, I feel like this requires too much in-depth knowledge of sage for me to contribute directly. But after skimming the tickets, I suggest you have a look at my changes here to the way distributions are excluded. This seems to be somewhat opposite to say #29864 where this is handled by adding a new setup-tdlib/setup.py. For the in-place installation it is important that the src/setup.py results in a working installation.\n\nWhat do you suggest as the way forward to align this ticket with the modularization effort?\n\nAs for #30578, my motivation here is a bit different: I wanted to have a prototype for sagelib with pipenv that works without ever invoking `sage/make` and directly uses the versions of the dependencies found on pypi instead of (re)building them locally. This seems to work in principle, and might lead to a workable solution for most purposes of development and ci testing, where the advantages of building the dependencies (like optimization) are not that important. That being said, I'm not sure if we really need to have a requirements.txt and a pipfile. I would opt for the more modern version and only keep the pipfile.\n\nAfter installing singular via `apt-get install libsingular4-dev libpynac-dev`, a few more pyx files could be compiled. Should I add this in build\\pkgs\\singular\\distros\\debian ?\n\nOne more thing: Currently sage/rings/number_field/number_field_element_quadratic.pyx relies on the arb lib, but is also (indirectly) imported in sage.all. What's the best way to handle these imports that depend on external C/C++ libs? For now I've uncommented some of these all-imports.",
    "created_at": "2020-09-26T10:27:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599277",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:49'></a>
Thanks for the quick feedback.

I agree the modularization is a good way to approach these problems. Sadly, I feel like this requires too much in-depth knowledge of sage for me to contribute directly. But after skimming the tickets, I suggest you have a look at my changes here to the way distributions are excluded. This seems to be somewhat opposite to say #29864 where this is handled by adding a new setup-tdlib/setup.py. For the in-place installation it is important that the src/setup.py results in a working installation.

What do you suggest as the way forward to align this ticket with the modularization effort?

As for #30578, my motivation here is a bit different: I wanted to have a prototype for sagelib with pipenv that works without ever invoking `sage/make` and directly uses the versions of the dependencies found on pypi instead of (re)building them locally. This seems to work in principle, and might lead to a workable solution for most purposes of development and ci testing, where the advantages of building the dependencies (like optimization) are not that important. That being said, I'm not sure if we really need to have a requirements.txt and a pipfile. I would opt for the more modern version and only keep the pipfile.

After installing singular via `apt-get install libsingular4-dev libpynac-dev`, a few more pyx files could be compiled. Should I add this in build\pkgs\singular\distros\debian ?

One more thing: Currently sage/rings/number_field/number_field_element_quadratic.pyx relies on the arb lib, but is also (indirectly) imported in sage.all. What's the best way to handle these imports that depend on external C/C++ libs? For now I've uncommented some of these all-imports.



---

archive/issue_comments_599278.json:
```json
{
    "body": "<a id='comment:50'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc2d6ff5138198403e64fd85277c8c2cfa09bf63\">cc2d6ff</a></td><td><code>Uncomment non-working all imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d9bf051ace2c23de82729553a54782cf1309525\">9d9bf05</a></td><td><code>Reenable pyx compilation depending on singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12e6d6711ca76bee221336093fa03e162962a896\">12e6d67</a></td><td><code>Fix imports</code></td></tr></table>\n",
    "created_at": "2020-09-26T10:27:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599278",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc2d6ff5138198403e64fd85277c8c2cfa09bf63">cc2d6ff</a></td><td><code>Uncomment non-working all imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d9bf051ace2c23de82729553a54782cf1309525">9d9bf05</a></td><td><code>Reenable pyx compilation depending on singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12e6d6711ca76bee221336093fa03e162962a896">12e6d67</a></td><td><code>Fix imports</code></td></tr></table>




---

archive/issue_comments_599279.json:
```json
{
    "body": "**Changing commit** from \"[b7fb5a9d46d8acb5068cde9a94009adb800d4783](https://github.com/sagemath/sagetrac-mirror/commit/b7fb5a9d46d8acb5068cde9a94009adb800d4783)\" to \"[12e6d6711ca76bee221336093fa03e162962a896](https://github.com/sagemath/sagetrac-mirror/commit/12e6d6711ca76bee221336093fa03e162962a896)\".",
    "created_at": "2020-09-26T10:27:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599279",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b7fb5a9d46d8acb5068cde9a94009adb800d4783](https://github.com/sagemath/sagetrac-mirror/commit/b7fb5a9d46d8acb5068cde9a94009adb800d4783)" to "[12e6d6711ca76bee221336093fa03e162962a896](https://github.com/sagemath/sagetrac-mirror/commit/12e6d6711ca76bee221336093fa03e162962a896)".



---

archive/issue_comments_599280.json:
```json
{
    "body": "<a id='comment:51'></a>\nYet another question: when/how is src/sage/ext/interpreters generated?",
    "created_at": "2020-09-26T11:35:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599280",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:51'></a>
Yet another question: when/how is src/sage/ext/interpreters generated?



---

archive/issue_comments_599281.json:
```json
{
    "body": "**Changing commit** from \"[12e6d6711ca76bee221336093fa03e162962a896](https://github.com/sagemath/sagetrac-mirror/commit/12e6d6711ca76bee221336093fa03e162962a896)\" to \"[7a7e5764d619f0207c9d57d1c24b6198f944b799](https://github.com/sagemath/sagetrac-mirror/commit/7a7e5764d619f0207c9d57d1c24b6198f944b799)\".",
    "created_at": "2020-09-26T12:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[12e6d6711ca76bee221336093fa03e162962a896](https://github.com/sagemath/sagetrac-mirror/commit/12e6d6711ca76bee221336093fa03e162962a896)" to "[7a7e5764d619f0207c9d57d1c24b6198f944b799](https://github.com/sagemath/sagetrac-mirror/commit/7a7e5764d619f0207c9d57d1c24b6198f944b799)".



---

archive/issue_comments_599282.json:
```json
{
    "body": "<a id='comment:52'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a7e5764d619f0207c9d57d1c24b6198f944b799\">7a7e576</a></td><td><code>Make import sage.manifolds.all work</code></td></tr></table>\n",
    "created_at": "2020-09-26T12:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:52'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a7e5764d619f0207c9d57d1c24b6198f944b799">7a7e576</a></td><td><code>Make import sage.manifolds.all work</code></td></tr></table>




---

archive/issue_comments_599283.json:
```json
{
    "body": "<a id='comment:53'></a>\nReplying to [gh-tobiasdiez](#comment%3A49):\n> As for #30578, my motivation here is a bit different: I wanted to have a prototype for sagelib with pipenv that works without ever invoking `sage/make` and directly uses the versions of the dependencies found on pypi instead of (re)building them locally.\n\n\nYes, I agree with this goal. But I would strongly suggest to focus on a smaller scope for this ticket: Make the in-place install work when all the dependencies are available. \nAt the same time, make sure that the normal Sage build process does not get broken (e.g. take care of comment 34 \"Don't change find_python_sources because build/pkgs/sagelib/src/setup.py continues to use it\"). This ensures that the ticket can be merged in Sage, thus, a way forward. This is better than preparing one ticket with huge changes.",
    "created_at": "2020-09-26T14:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599283",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:53'></a>
Replying to [gh-tobiasdiez](#comment%3A49):
> As for #30578, my motivation here is a bit different: I wanted to have a prototype for sagelib with pipenv that works without ever invoking `sage/make` and directly uses the versions of the dependencies found on pypi instead of (re)building them locally.


Yes, I agree with this goal. But I would strongly suggest to focus on a smaller scope for this ticket: Make the in-place install work when all the dependencies are available. 
At the same time, make sure that the normal Sage build process does not get broken (e.g. take care of comment 34 "Don't change find_python_sources because build/pkgs/sagelib/src/setup.py continues to use it"). This ensures that the ticket can be merged in Sage, thus, a way forward. This is better than preparing one ticket with huge changes.



---

archive/issue_comments_599284.json:
```json
{
    "body": "<a id='comment:54'></a>\nReplying to [gh-tobiasdiez](#comment%3A49):\n> I suggest you have a look at my changes here to the way distributions are excluded. This seems to be somewhat opposite to say #29864 where this is handled by adding a new setup-tdlib/setup.py.\n\n\nAs discussed, adding these `sage_setup: distribution` tags to Cython source files is a way forward that aligns with the modularization effort.",
    "created_at": "2020-09-26T14:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599284",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:54'></a>
Replying to [gh-tobiasdiez](#comment%3A49):
> I suggest you have a look at my changes here to the way distributions are excluded. This seems to be somewhat opposite to say #29864 where this is handled by adding a new setup-tdlib/setup.py.


As discussed, adding these `sage_setup: distribution` tags to Cython source files is a way forward that aligns with the modularization effort.



---

archive/issue_comments_599285.json:
```json
{
    "body": "<a id='comment:55'></a>\nReplying to [gh-tobiasdiez](#comment%3A49):\n> Currently sage/rings/number_field/number_field_element_quadratic.pyx relies on the arb lib, but is also (indirectly) imported in sage.all. What's the best way to handle these imports that depend on external C/C++ libs?\n\n\nTry lazy imports with `PythonModule` features, from #30616/#30647.",
    "created_at": "2020-09-26T14:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599285",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
Replying to [gh-tobiasdiez](#comment%3A49):
> Currently sage/rings/number_field/number_field_element_quadratic.pyx relies on the arb lib, but is also (indirectly) imported in sage.all. What's the best way to handle these imports that depend on external C/C++ libs?


Try lazy imports with `PythonModule` features, from #30616/#30647.



---

archive/issue_comments_599286.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [gh-tobiasdiez](#comment%3A49):\n> I suggest you have a look at my changes here to the way distributions are excluded. \n\n\nWell, it's the same as before in sagelib's setup.py, filtering by distributions, plus some hardcoded ones. Except that you have changed the interface of the function that does the filtering (see above - this change is not mergeable because `build/pkgs/sagelib/src/setup.py` needs to keep working!)",
    "created_at": "2020-09-26T14:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599286",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:56'></a>
Replying to [gh-tobiasdiez](#comment%3A49):
> I suggest you have a look at my changes here to the way distributions are excluded. 


Well, it's the same as before in sagelib's setup.py, filtering by distributions, plus some hardcoded ones. Except that you have changed the interface of the function that does the filtering (see above - this change is not mergeable because `build/pkgs/sagelib/src/setup.py` needs to keep working!)



---

archive/issue_comments_599287.json:
```json
{
    "body": "<a id='comment:57'></a>\nReplying to [mkoeppe](#comment%3A54):\n> As discussed, adding these `sage_setup: distribution` tags to Cython source files is a way forward that aligns with the modularization effort.\n\n\nI've opened #30666 for this. (The new distribution names have to be added to `setup.py`, of course, so that the files continue to be built in the Sage distribution.)",
    "created_at": "2020-09-26T14:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599287",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:57'></a>
Replying to [mkoeppe](#comment%3A54):
> As discussed, adding these `sage_setup: distribution` tags to Cython source files is a way forward that aligns with the modularization effort.


I've opened #30666 for this. (The new distribution names have to be added to `setup.py`, of course, so that the files continue to be built in the Sage distribution.)



---

archive/issue_comments_599288.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30527, #22731, #30578\" to \"#29500, #30527, #22731, #30578, #30666\".",
    "created_at": "2020-09-26T17:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599288",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29500, #30527, #22731, #30578" to "#29500, #30527, #22731, #30578, #30666".



---

archive/issue_comments_599289.json:
```json
{
    "body": "<a id='comment:59'></a>\nReplying to [mkoeppe](#comment%3A55):\n> Replying to [gh-tobiasdiez](#comment%3A49):\n> > Currently sage/rings/number_field/number_field_element_quadratic.pyx relies on the arb lib, but is also (indirectly) imported in sage.all. What's the best way to handle these imports that depend on external C/C++ libs?\n\n> \n> Try lazy imports with `PythonModule` features, from #30616/#30647.\n\n\nFor another approach regarding the \".all\" imports, see #29865. Probably we will need a combination of this and lazy imports.",
    "created_at": "2020-09-26T17:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599289",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:59'></a>
Replying to [mkoeppe](#comment%3A55):
> Replying to [gh-tobiasdiez](#comment%3A49):
> > Currently sage/rings/number_field/number_field_element_quadratic.pyx relies on the arb lib, but is also (indirectly) imported in sage.all. What's the best way to handle these imports that depend on external C/C++ libs?

> 
> Try lazy imports with `PythonModule` features, from #30616/#30647.


For another approach regarding the ".all" imports, see #29865. Probably we will need a combination of this and lazy imports.



---

archive/issue_comments_599290.json:
```json
{
    "body": "**Changing commit** from \"[7a7e5764d619f0207c9d57d1c24b6198f944b799](https://github.com/sagemath/sagetrac-mirror/commit/7a7e5764d619f0207c9d57d1c24b6198f944b799)\" to \"[4afd411dd86c37e90ca32c8f77de89a91c57a667](https://github.com/sagemath/sagetrac-mirror/commit/4afd411dd86c37e90ca32c8f77de89a91c57a667)\".",
    "created_at": "2020-09-26T18:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599290",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7a7e5764d619f0207c9d57d1c24b6198f944b799](https://github.com/sagemath/sagetrac-mirror/commit/7a7e5764d619f0207c9d57d1c24b6198f944b799)" to "[4afd411dd86c37e90ca32c8f77de89a91c57a667](https://github.com/sagemath/sagetrac-mirror/commit/4afd411dd86c37e90ca32c8f77de89a91c57a667)".



---

archive/issue_comments_599291.json:
```json
{
    "body": "<a id='comment:60'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4afd411dd86c37e90ca32c8f77de89a91c57a667\">4afd411</a></td><td><code>Readd old find_python_sources</code></td></tr></table>\n",
    "created_at": "2020-09-26T18:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599291",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4afd411dd86c37e90ca32c8f77de89a91c57a667">4afd411</a></td><td><code>Readd old find_python_sources</code></td></tr></table>




---

archive/issue_comments_599292.json:
```json
{
    "body": "<a id='comment:61'></a>\nI've now restored the old find_python_sources method. Is there something else that needs to be done, except waiting for the other tickets to be finished?",
    "created_at": "2020-09-26T19:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599292",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:61'></a>
I've now restored the old find_python_sources method. Is there something else that needs to be done, except waiting for the other tickets to be finished?



---

archive/issue_comments_599293.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,3 +10,8 @@\n - #21535\n \n \n+For later reference (needs to be placed in the dev docs):\n+- Make an empty folder inside `src` and name it `.venv` (this will be the place the virtual environment is installed to)\n+- Install pipenv\n+- Run `pipenv install`\n+\n``````\n",
    "created_at": "2020-09-26T20:47:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599293",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,3 +10,8 @@
 - #21535
 
 
+For later reference (needs to be placed in the dev docs):
+- Make an empty folder inside `src` and name it `.venv` (this will be the place the virtual environment is installed to)
+- Install pipenv
+- Run `pipenv install`
+
``````




---

archive/issue_comments_599294.json:
```json
{
    "body": "<a id='comment:63'></a>\nNothing immediate. This is going in a good direction",
    "created_at": "2020-09-26T20:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599294",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>
Nothing immediate. This is going in a good direction



---

archive/issue_comments_599295.json:
```json
{
    "body": "**Changing commit** from \"[4afd411dd86c37e90ca32c8f77de89a91c57a667](https://github.com/sagemath/sagetrac-mirror/commit/4afd411dd86c37e90ca32c8f77de89a91c57a667)\" to \"[c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866](https://github.com/sagemath/sagetrac-mirror/commit/c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866)\".",
    "created_at": "2020-09-27T09:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4afd411dd86c37e90ca32c8f77de89a91c57a667](https://github.com/sagemath/sagetrac-mirror/commit/4afd411dd86c37e90ca32c8f77de89a91c57a667)" to "[c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866](https://github.com/sagemath/sagetrac-mirror/commit/c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866)".



---

archive/issue_comments_599296.json:
```json
{
    "body": "<a id='comment:64'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/849350c4edd2590f0ad5cbc13a919abea7a86538\">849350c</a></td><td><code>Fix missing ccobject</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee8df9845d2aaa43e22215ff8615ca5258333810\">ee8df98</a></td><td><code>Update gitignore and add vs code config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866\">c82bbd5</a></td><td><code>Add pycodestyle dep</code></td></tr></table>\n",
    "created_at": "2020-09-27T09:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599296",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/849350c4edd2590f0ad5cbc13a919abea7a86538">849350c</a></td><td><code>Fix missing ccobject</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee8df9845d2aaa43e22215ff8615ca5258333810">ee8df98</a></td><td><code>Update gitignore and add vs code config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866">c82bbd5</a></td><td><code>Add pycodestyle dep</code></td></tr></table>




---

archive/issue_comments_599297.json:
```json
{
    "body": "<a id='comment:65'></a>\nReplying to [git](#comment%3A64):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                      |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n> |[849350c](https://github.com/sagemath/sagetrac-mirror/commit/849350c4edd2590f0ad5cbc13a919abea7a86538)|`Fix missing ccobject`|\n\n\nCreated #30672 (Remove `sage/ext` from `sage_include_directories`) for this",
    "created_at": "2020-09-27T16:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599297",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>
Replying to [git](#comment%3A64):
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                      |
> |-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
> |[849350c](https://github.com/sagemath/sagetrac-mirror/commit/849350c4edd2590f0ad5cbc13a919abea7a86538)|`Fix missing ccobject`|


Created #30672 (Remove `sage/ext` from `sage_include_directories`) for this



---

archive/issue_comments_599298.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30527, #22731, #30578, #30666\" to \"#29500, #30527, #22731, #30578, #30666, #30672\".",
    "created_at": "2020-09-27T18:08:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599298",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29500, #30527, #22731, #30578, #30666" to "#29500, #30527, #22731, #30578, #30666, #30672".



---

archive/issue_comments_599299.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30527, #22731, #30578, #30666, #30672\" to \"#29500, #30527, #22731, #30578, #30666, #30672, #30673\".",
    "created_at": "2020-09-28T09:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599299",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#29500, #30527, #22731, #30578, #30666, #30672" to "#29500, #30527, #22731, #30578, #30666, #30672, #30673".



---

archive/issue_comments_599300.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,6 +4,10 @@\n \n We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n+TODO:\n+- Move package dependencies from pipfile to install_requires in setup.py. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n+- Add further development dependencies (tests, tox)\n+- Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n \n Previous tickets on in-place builds, editable installs:\n - #12659\n@@ -14,4 +18,4 @@\n - Make an empty folder inside `src` and name it `.venv` (this will be the place the virtual environment is installed to)\n - Install pipenv\n - Run `pipenv install`\n-\n+- Explain inplace/editable install as in https://stackoverflow.com/a/53378506/873661\n``````\n",
    "created_at": "2020-09-28T10:39:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599300",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,6 +4,10 @@
 
 We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 
+TODO:
+- Move package dependencies from pipfile to install_requires in setup.py. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
+- Add further development dependencies (tests, tox)
+- Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
 
 Previous tickets on in-place builds, editable installs:
 - #12659
@@ -14,4 +18,4 @@
 - Make an empty folder inside `src` and name it `.venv` (this will be the place the virtual environment is installed to)
 - Install pipenv
 - Run `pipenv install`
-
+- Explain inplace/editable install as in https://stackoverflow.com/a/53378506/873661
``````




---

archive/issue_comments_599301.json:
```json
{
    "body": "<a id='comment:69'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62930ee7ada36664e0fc2264e5395f8b8337b650\">62930ee</a></td><td><code>Add ipykernel and tox as dev packages</code></td></tr></table>\n",
    "created_at": "2020-09-28T18:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599301",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:69'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62930ee7ada36664e0fc2264e5395f8b8337b650">62930ee</a></td><td><code>Add ipykernel and tox as dev packages</code></td></tr></table>




---

archive/issue_comments_599302.json:
```json
{
    "body": "**Changing commit** from \"[c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866](https://github.com/sagemath/sagetrac-mirror/commit/c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866)\" to \"[62930ee7ada36664e0fc2264e5395f8b8337b650](https://github.com/sagemath/sagetrac-mirror/commit/62930ee7ada36664e0fc2264e5395f8b8337b650)\".",
    "created_at": "2020-09-28T18:56:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599302",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866](https://github.com/sagemath/sagetrac-mirror/commit/c82bbd56e5ab828b73dfe09ad1c32c9b7d96f866)" to "[62930ee7ada36664e0fc2264e5395f8b8337b650](https://github.com/sagemath/sagetrac-mirror/commit/62930ee7ada36664e0fc2264e5395f8b8337b650)".



---

archive/issue_comments_599303.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,9 +4,8 @@\n \n We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n-TODO:\n+TODO (as followup tickets):\n - Move package dependencies from pipfile to install_requires in setup.py. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n-- Add further development dependencies (tests, tox)\n - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n \n Previous tickets on in-place builds, editable installs:\n``````\n",
    "created_at": "2020-09-28T18:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599303",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,9 +4,8 @@
 
 We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 
-TODO:
+TODO (as followup tickets):
 - Move package dependencies from pipfile to install_requires in setup.py. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
-- Add further development dependencies (tests, tox)
 - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
 
 Previous tickets on in-place builds, editable installs:
``````




---

archive/issue_comments_599304.json:
```json
{
    "body": "<a id='comment:70'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62930ee7ada36664e0fc2264e5395f8b8337b650\">62930ee</a></td><td><code>Add ipykernel and tox as dev packages</code></td></tr></table>\n",
    "created_at": "2020-09-28T18:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599304",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:70'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62930ee7ada36664e0fc2264e5395f8b8337b650">62930ee</a></td><td><code>Add ipykernel and tox as dev packages</code></td></tr></table>




---

archive/issue_comments_599305.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30527, #22731, #30578, #30666, #30672, #30673\" to \"#29500, #30527, #22731, #30578, #30672, #30673\".",
    "created_at": "2020-09-30T17:01:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599305",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#29500, #30527, #22731, #30578, #30666, #30672, #30673" to "#29500, #30527, #22731, #30578, #30672, #30673".



---

archive/issue_comments_599306.json:
```json
{
    "body": "**Changing commit** from \"[62930ee7ada36664e0fc2264e5395f8b8337b650](https://github.com/sagemath/sagetrac-mirror/commit/62930ee7ada36664e0fc2264e5395f8b8337b650)\" to \"[cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5](https://github.com/sagemath/sagetrac-mirror/commit/cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5)\".",
    "created_at": "2020-10-01T15:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599306",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[62930ee7ada36664e0fc2264e5395f8b8337b650](https://github.com/sagemath/sagetrac-mirror/commit/62930ee7ada36664e0fc2264e5395f8b8337b650)" to "[cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5](https://github.com/sagemath/sagetrac-mirror/commit/cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5)".



---

archive/issue_comments_599307.json:
```json
{
    "body": "<a id='comment:72'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cbb457209c0005fac0dfa9b4d3fc848b1858a47\">3cbb457</a></td><td><code>Reenable compilation of most files relying on external libs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8174e1a2d42d46dd7149b041de7bd77c511cc17e\">8174e1a</a></td><td><code>Reenable imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/724223f6a11cc2674fcbc0d567db20da4160c0ed\">724223f</a></td><td><code>Disable non-working imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5\">cd196a0</a></td><td><code>Disable things in ecl integration (probably because of too old ecl lib)</code></td></tr></table>\n",
    "created_at": "2020-10-01T15:32:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599307",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:72'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cbb457209c0005fac0dfa9b4d3fc848b1858a47">3cbb457</a></td><td><code>Reenable compilation of most files relying on external libs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8174e1a2d42d46dd7149b041de7bd77c511cc17e">8174e1a</a></td><td><code>Reenable imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/724223f6a11cc2674fcbc0d567db20da4160c0ed">724223f</a></td><td><code>Disable non-working imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5">cd196a0</a></td><td><code>Disable things in ecl integration (probably because of too old ecl lib)</code></td></tr></table>




---

archive/issue_comments_599308.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,3 +18,20 @@\n - Install pipenv\n - Run `pipenv install`\n - Explain inplace/editable install as in https://stackoverflow.com/a/53378506/873661\n+\n+In order to compile the cython files only using system-wide installed libraries the following has to be done (on Ubunutu 20.04, under WSL):\n+- Install dependencies:\n+  `apt-get install liblinbox-dev libflint-arb-dev libhomfly-dev libgiac-dev libratpoints-dev libzn-poly-dev libbrial-dev libbrial-groebner-dev libatlas-base-dev`\n+\n+- Install `GAP`:\n+  This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`\n+- Fix installation of `ecl`:\n+  After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.\n+- Install magma:\n+  `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`\n+\n+- cysigs is broken, see https://github.com/sagemath/cysignals/issues/111. \n+  To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).\n+\n+\n+\n``````\n",
    "created_at": "2020-10-01T15:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599308",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,3 +18,20 @@
 - Install pipenv
 - Run `pipenv install`
 - Explain inplace/editable install as in https://stackoverflow.com/a/53378506/873661
+
+In order to compile the cython files only using system-wide installed libraries the following has to be done (on Ubunutu 20.04, under WSL):
+- Install dependencies:
+  `apt-get install liblinbox-dev libflint-arb-dev libhomfly-dev libgiac-dev libratpoints-dev libzn-poly-dev libbrial-dev libbrial-groebner-dev libatlas-base-dev`
+
+- Install `GAP`:
+  This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`
+- Fix installation of `ecl`:
+  After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.
+- Install magma:
+  `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`
+
+- cysigs is broken, see https://github.com/sagemath/cysignals/issues/111. 
+  To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).
+
+
+
``````




---

archive/issue_comments_599309.json:
```json
{
    "body": "<a id='comment:74'></a>\nThis ticket is way too big. I really strong recommend to get a working in-place installation of sagelib in the situation when its dependencies have been built using the Sage distribution.",
    "created_at": "2020-10-01T15:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599309",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:74'></a>
This ticket is way too big. I really strong recommend to get a working in-place installation of sagelib in the situation when its dependencies have been built using the Sage distribution.



---

archive/issue_comments_599310.json:
```json
{
    "body": "<a id='comment:75'></a>\nI've now followed your advice, and tried to have a prototype that works if all library dependencies are fulfilled (instead of adding exceptions / distribution annotations everywhere). And I was successful indeed, `import sage.all` works without error and I can do basic calculations with the manifold package. This required tinkering with a lot of system-installed packages (instructions added in the ticket).\n\nThe following is not yet working, and I would like to get input on how to resolve this:\n- `sage/ext/interpreters` is empty. Where is the code generated? Can this easily be extracted to a script that can be invoked separately?\n- The code relying on the arb library still doesn't compile although I've `libflint-arb-dev` installed. The compilation fails with `ld larb` was not found. Why is this, and what's the best way to solve it?\n- The `sage.doctest` package conflicted with the `sympy` (I believe), i.e. sympy tried to load classes from `sage.doctest` for some reason, and couldn't locate them. I've fixed this by renaming `src/sage/doctest` to `sage-doctest`. Is the `doctest` package really required under the `sage` folder, or could it be e.g moved up to `src/doctest`?\n\n\nI agree the ticket is too big at the moment. Once I found a solution to the above points, I'll clean the code. I sadly cannot work with the dependencies created by the sage distribution, as the build process fails due to compilation errors in the pip library...",
    "created_at": "2020-10-01T15:55:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599310",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:75'></a>
I've now followed your advice, and tried to have a prototype that works if all library dependencies are fulfilled (instead of adding exceptions / distribution annotations everywhere). And I was successful indeed, `import sage.all` works without error and I can do basic calculations with the manifold package. This required tinkering with a lot of system-installed packages (instructions added in the ticket).

The following is not yet working, and I would like to get input on how to resolve this:
- `sage/ext/interpreters` is empty. Where is the code generated? Can this easily be extracted to a script that can be invoked separately?
- The code relying on the arb library still doesn't compile although I've `libflint-arb-dev` installed. The compilation fails with `ld larb` was not found. Why is this, and what's the best way to solve it?
- The `sage.doctest` package conflicted with the `sympy` (I believe), i.e. sympy tried to load classes from `sage.doctest` for some reason, and couldn't locate them. I've fixed this by renaming `src/sage/doctest` to `sage-doctest`. Is the `doctest` package really required under the `sage` folder, or could it be e.g moved up to `src/doctest`?


I agree the ticket is too big at the moment. Once I found a solution to the above points, I'll clean the code. I sadly cannot work with the dependencies created by the sage distribution, as the build process fails due to compilation errors in the pip library...



---

archive/issue_comments_599311.json:
```json
{
    "body": "<a id='comment:76'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1422cf461178919c2ccf1a30b6a82e1ac5dee396\">1422cf4</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-10-01T15:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599311",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:76'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1422cf461178919c2ccf1a30b6a82e1ac5dee396">1422cf4</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599312.json:
```json
{
    "body": "**Changing commit** from \"[cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5](https://github.com/sagemath/sagetrac-mirror/commit/cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5)\" to \"[1422cf461178919c2ccf1a30b6a82e1ac5dee396](https://github.com/sagemath/sagetrac-mirror/commit/1422cf461178919c2ccf1a30b6a82e1ac5dee396)\".",
    "created_at": "2020-10-01T15:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599312",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5](https://github.com/sagemath/sagetrac-mirror/commit/cd196a0773e36e7e6c1fbe21962ef5b1b1485cf5)" to "[1422cf461178919c2ccf1a30b6a82e1ac5dee396](https://github.com/sagemath/sagetrac-mirror/commit/1422cf461178919c2ccf1a30b6a82e1ac5dee396)".



---

archive/issue_comments_599313.json:
```json
{
    "body": "<a id='comment:77'></a>\nReplying to [gh-tobiasdiez](#comment%3A75):\n> I've now followed your advice, and tried to have a prototype that works if all library dependencies are fulfilled (instead of adding exceptions / distribution annotations everywhere). And I was successful indeed, `import sage.all` works without error and I can do basic calculations with the manifold package. This required tinkering with a lot of system-installed packages (instructions added in the ticket).\n\n\nGreat.\n\n> The following is not yet working, and I would like to get input on how to resolve this:\n> - `sage/ext/interpreters` is empty. Where is the code generated? Can this easily be extracted to a script that can be invoked separately?\n\n\n`sage_setup.command.sage_build`\n\n> - The code relying on the arb library still doesn't compile although I've `libflint-arb-dev` installed. The compilation fails with `ld larb` was not found. Why is this, and what's the best way to solve it?\n\n\nUse `sage.env.cython_aliases`. In particular `ARB_LIBRARY` gives you the name. (The Debian installation uses a different name from upstream.)\n\n> - The `sage.doctest` package conflicted with the `sympy` (I believe), i.e. sympy tried to load classes from `sage.doctest` for some reason, and couldn't locate them. I've fixed this by renaming `src/sage/doctest` to `sage-doctest`. Is the `doctest` package really required under the `sage` folder, or could it be e.g moved up to `src/doctest`?\n\n\nSounds like a bad PYTHONPATH. `src/sage` should not be in it.\n\n> I agree the ticket is too big at the moment. Once I found a solution to the above points, I'll clean the code. I sadly cannot work with the dependencies created by the sage distribution, as the build process fails due to compilation errors in the pip library...\n\n\nHm, that's still happening? Sorry I lost track of this since various other things seemed to break on WSL. Have you tried with downgrading/upgrading the pip package?",
    "created_at": "2020-10-01T16:05:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599313",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:77'></a>
Replying to [gh-tobiasdiez](#comment%3A75):
> I've now followed your advice, and tried to have a prototype that works if all library dependencies are fulfilled (instead of adding exceptions / distribution annotations everywhere). And I was successful indeed, `import sage.all` works without error and I can do basic calculations with the manifold package. This required tinkering with a lot of system-installed packages (instructions added in the ticket).


Great.

> The following is not yet working, and I would like to get input on how to resolve this:
> - `sage/ext/interpreters` is empty. Where is the code generated? Can this easily be extracted to a script that can be invoked separately?


`sage_setup.command.sage_build`

> - The code relying on the arb library still doesn't compile although I've `libflint-arb-dev` installed. The compilation fails with `ld larb` was not found. Why is this, and what's the best way to solve it?


Use `sage.env.cython_aliases`. In particular `ARB_LIBRARY` gives you the name. (The Debian installation uses a different name from upstream.)

> - The `sage.doctest` package conflicted with the `sympy` (I believe), i.e. sympy tried to load classes from `sage.doctest` for some reason, and couldn't locate them. I've fixed this by renaming `src/sage/doctest` to `sage-doctest`. Is the `doctest` package really required under the `sage` folder, or could it be e.g moved up to `src/doctest`?


Sounds like a bad PYTHONPATH. `src/sage` should not be in it.

> I agree the ticket is too big at the moment. Once I found a solution to the above points, I'll clean the code. I sadly cannot work with the dependencies created by the sage distribution, as the build process fails due to compilation errors in the pip library...


Hm, that's still happening? Sorry I lost track of this since various other things seemed to break on WSL. Have you tried with downgrading/upgrading the pip package?



---

archive/issue_comments_599314.json:
```json
{
    "body": "**Changing commit** from \"[1422cf461178919c2ccf1a30b6a82e1ac5dee396](https://github.com/sagemath/sagetrac-mirror/commit/1422cf461178919c2ccf1a30b6a82e1ac5dee396)\" to \"[05713b87fff7948a68562358a5d32a29701bfa2f](https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f)\".",
    "created_at": "2020-10-01T16:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599314",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1422cf461178919c2ccf1a30b6a82e1ac5dee396](https://github.com/sagemath/sagetrac-mirror/commit/1422cf461178919c2ccf1a30b6a82e1ac5dee396)" to "[05713b87fff7948a68562358a5d32a29701bfa2f](https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f)".



---

archive/issue_comments_599315.json:
```json
{
    "body": "<a id='comment:78'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f\">05713b8</a></td><td><code>Remove dependency on #30527</code></td></tr></table>\n",
    "created_at": "2020-10-01T16:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599315",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:78'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f">05713b8</a></td><td><code>Remove dependency on #30527</code></td></tr></table>




---

archive/issue_comments_599316.json:
```json
{
    "body": "<a id='comment:79'></a>\nBy the way, for dev purposes until the WSL issues are resolved, you could try running Sage in Docker instead (bind-mount the source tree into it)",
    "created_at": "2020-10-01T16:07:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599316",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:79'></a>
By the way, for dev purposes until the WSL issues are resolved, you could try running Sage in Docker instead (bind-mount the source tree into it)



---

archive/issue_comments_599317.json:
```json
{
    "body": "<a id='comment:80'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f\">05713b8</a></td><td><code>Remove dependency on #30527</code></td></tr></table>\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f\">05713b8</a></td><td><code>Remove dependency on #30527</code></td></tr></table>\n",
    "created_at": "2020-10-01T16:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599317",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:80'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f">05713b8</a></td><td><code>Remove dependency on #30527</code></td></tr></table>

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f">05713b8</a></td><td><code>Remove dependency on #30527</code></td></tr></table>




---

archive/issue_comments_599318.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30527, #22731, #30578, #30672, #30673\" to \"#29500, #22731, #30672, #30673\".",
    "created_at": "2020-10-01T16:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599318",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#29500, #30527, #22731, #30578, #30672, #30673" to "#29500, #22731, #30672, #30673".



---

archive/issue_comments_599319.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #22731, #30672, #30673\" to \"#29500, #30672, #30673\".",
    "created_at": "2020-10-01T16:13:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599319",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#29500, #22731, #30672, #30673" to "#29500, #30672, #30673".



---

archive/issue_comments_599320.json:
```json
{
    "body": "**Changing commit** from \"[05713b87fff7948a68562358a5d32a29701bfa2f](https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f)\" to \"[ac07cc0d005de5e067e29c22f154521537f5906d](https://github.com/sagemath/sagetrac-mirror/commit/ac07cc0d005de5e067e29c22f154521537f5906d)\".",
    "created_at": "2020-10-01T16:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599320",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[05713b87fff7948a68562358a5d32a29701bfa2f](https://github.com/sagemath/sagetrac-mirror/commit/05713b87fff7948a68562358a5d32a29701bfa2f)" to "[ac07cc0d005de5e067e29c22f154521537f5906d](https://github.com/sagemath/sagetrac-mirror/commit/ac07cc0d005de5e067e29c22f154521537f5906d)".



---

archive/issue_comments_599321.json:
```json
{
    "body": "<a id='comment:82'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac07cc0d005de5e067e29c22f154521537f5906d\">ac07cc0</a></td><td><code>Move requirements file back</code></td></tr></table>\n",
    "created_at": "2020-10-01T16:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599321",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:82'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac07cc0d005de5e067e29c22f154521537f5906d">ac07cc0</a></td><td><code>Move requirements file back</code></td></tr></table>




---

archive/issue_comments_599322.json:
```json
{
    "body": "> > - Fix installation of `ecl`:\n \n>   After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.\n\nCould you try the related #30629 on WSL please?",
    "created_at": "2020-10-01T16:46:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599322",
    "user": "https://github.com/mkoeppe"
}
```

> > - Fix installation of `ecl`:
 
>   After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.

Could you try the related #30629 on WSL please?



---

archive/issue_comments_599323.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,6 +22,7 @@\n In order to compile the cython files only using system-wide installed libraries the following has to be done (on Ubunutu 20.04, under WSL):\n - Install dependencies:\n   `apt-get install liblinbox-dev libflint-arb-dev libhomfly-dev libgiac-dev libratpoints-dev libzn-poly-dev libbrial-dev libbrial-groebner-dev libatlas-base-dev`\n+- Configure ARB by setting env variable `ARB_LIBRARY` to `flint-arb`.\n \n - Install `GAP`:\n   This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`\n``````\n",
    "created_at": "2020-10-01T21:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599323",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,6 +22,7 @@
 In order to compile the cython files only using system-wide installed libraries the following has to be done (on Ubunutu 20.04, under WSL):
 - Install dependencies:
   `apt-get install liblinbox-dev libflint-arb-dev libhomfly-dev libgiac-dev libratpoints-dev libzn-poly-dev libbrial-dev libbrial-groebner-dev libatlas-base-dev`
+- Configure ARB by setting env variable `ARB_LIBRARY` to `flint-arb`.
 
 - Install `GAP`:
   This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`
``````




---

archive/issue_comments_599324.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30672, #30673\" to \"#29500, #30672, #30673, #30590\".",
    "created_at": "2020-10-01T21:40:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599324",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#29500, #30672, #30673" to "#29500, #30672, #30673, #30590".



---

archive/issue_comments_599325.json:
```json
{
    "body": "**Changing commit** from \"[ac07cc0d005de5e067e29c22f154521537f5906d](https://github.com/sagemath/sagetrac-mirror/commit/ac07cc0d005de5e067e29c22f154521537f5906d)\" to \"[3023260e2c36e80113daf0af69e95d6091de461e](https://github.com/sagemath/sagetrac-mirror/commit/3023260e2c36e80113daf0af69e95d6091de461e)\".",
    "created_at": "2020-10-02T13:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599325",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ac07cc0d005de5e067e29c22f154521537f5906d](https://github.com/sagemath/sagetrac-mirror/commit/ac07cc0d005de5e067e29c22f154521537f5906d)" to "[3023260e2c36e80113daf0af69e95d6091de461e](https://github.com/sagemath/sagetrac-mirror/commit/3023260e2c36e80113daf0af69e95d6091de461e)".



---

archive/issue_comments_599326.json:
```json
{
    "body": "<a id='comment:85'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9141ae9ab878413d3ec667e2d241463581d07864\">9141ae9</a></td><td><code>Reenable doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb5019781d6100f8001e379764b16cfa39af6fd8\">cb50197</a></td><td><code>Fix compilation of interpreters</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3023260e2c36e80113daf0af69e95d6091de461e\">3023260</a></td><td><code>Renable all imports</code></td></tr></table>\n",
    "created_at": "2020-10-02T13:16:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599326",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:85'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9141ae9ab878413d3ec667e2d241463581d07864">9141ae9</a></td><td><code>Reenable doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb5019781d6100f8001e379764b16cfa39af6fd8">cb50197</a></td><td><code>Fix compilation of interpreters</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3023260e2c36e80113daf0af69e95d6091de461e">3023260</a></td><td><code>Renable all imports</code></td></tr></table>




---

archive/issue_comments_599327.json:
```json
{
    "body": "**Changing commit** from \"[3023260e2c36e80113daf0af69e95d6091de461e](https://github.com/sagemath/sagetrac-mirror/commit/3023260e2c36e80113daf0af69e95d6091de461e)\" to \"[5b12a924507cf85a2eca749993835927b9398668](https://github.com/sagemath/sagetrac-mirror/commit/5b12a924507cf85a2eca749993835927b9398668)\".",
    "created_at": "2020-10-02T13:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3023260e2c36e80113daf0af69e95d6091de461e](https://github.com/sagemath/sagetrac-mirror/commit/3023260e2c36e80113daf0af69e95d6091de461e)" to "[5b12a924507cf85a2eca749993835927b9398668](https://github.com/sagemath/sagetrac-mirror/commit/5b12a924507cf85a2eca749993835927b9398668)".



---

archive/issue_comments_599328.json:
```json
{
    "body": "<a id='comment:86'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e620323701d91f0668de61fe757d03c30e908679\">e620323</a></td><td><code>Remove unnessary files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/650249567b51a820853ed3554a58574be5a23516\">6502495</a></td><td><code>Reenable ppl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b12a924507cf85a2eca749993835927b9398668\">5b12a92</a></td><td><code>Cleanup setup script</code></td></tr></table>\n",
    "created_at": "2020-10-02T13:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:86'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e620323701d91f0668de61fe757d03c30e908679">e620323</a></td><td><code>Remove unnessary files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/650249567b51a820853ed3554a58574be5a23516">6502495</a></td><td><code>Reenable ppl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b12a924507cf85a2eca749993835927b9398668">5b12a92</a></td><td><code>Cleanup setup script</code></td></tr></table>




---

archive/issue_comments_599329.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-10-02T13:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599329",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_599330.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,11 +1,24 @@\n-After #30527 and #30578, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n+We modify `src/setup.py` to support editable installs via pipenv (`pipenv install -e .`, which invokes `pip install --editable`).  The existing src/setup.py is copied into build/pkgs/sagelib/src to replace the symlink. In this way, the changes to src/setup.py made in this ticket do not affect the existing build process of the Sage library.\n \n-We modify `src/setup.py` to support editable installs (`pip install --editable`).  (After #30578, this is a separate copy, so the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library for sage-the-distribution.)\n+With this ticket, the following code works:\n \n-We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n+```\n+cd src\n+pipenv install\n+pipenv shell\n+python\n+import sage.all\n+```\n+It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.\n+Note: This probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL).\n \n TODO (as followup tickets):\n-- Move package dependencies from pipfile to install_requires in setup.py. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n+- Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.\n+- Automatically generate the `apt-get install` command with the necessary libraries (add them as `distros/debian.txt`?)\n+- Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`\n+- Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.\n+- Automatically generate code in sage/ext/interpreters in `src/setup.py`. \n+- Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n \n Previous tickets on in-place builds, editable installs:\n@@ -33,6 +46,16 @@\n \n - cysigs is broken, see https://github.com/sagemath/cysignals/issues/111. \n   To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).\n+- Generate `sage/ext/interpreters`: pipenv shell > python\n+\n+```\n+> import sage_setup.autogen\n+> sage_setup.autogen.autogen_all()\n+```\n \n \n \n+\n+\n+\n+\n``````\n",
    "created_at": "2020-10-02T13:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599330",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,11 +1,24 @@
-After #30527 and #30578, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
+We modify `src/setup.py` to support editable installs via pipenv (`pipenv install -e .`, which invokes `pip install --editable`).  The existing src/setup.py is copied into build/pkgs/sagelib/src to replace the symlink. In this way, the changes to src/setup.py made in this ticket do not affect the existing build process of the Sage library.
 
-We modify `src/setup.py` to support editable installs (`pip install --editable`).  (After #30578, this is a separate copy, so the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library for sage-the-distribution.)
+With this ticket, the following code works:
 
-We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
+```
+cd src
+pipenv install
+pipenv shell
+python
+import sage.all
+```
+It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.
+Note: This probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL).
 
 TODO (as followup tickets):
-- Move package dependencies from pipfile to install_requires in setup.py. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
+- Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.
+- Automatically generate the `apt-get install` command with the necessary libraries (add them as `distros/debian.txt`?)
+- Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`
+- Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.
+- Automatically generate code in sage/ext/interpreters in `src/setup.py`. 
+- Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
 - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
 
 Previous tickets on in-place builds, editable installs:
@@ -33,6 +46,16 @@
 
 - cysigs is broken, see https://github.com/sagemath/cysignals/issues/111. 
   To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).
+- Generate `sage/ext/interpreters`: pipenv shell > python
+
+```
+> import sage_setup.autogen
+> sage_setup.autogen.autogen_all()
+```
 
 
 
+
+
+
+
``````




---

archive/issue_comments_599331.json:
```json
{
    "body": "<a id='comment:88'></a>\nPerfect, thanks a lot Matthias! I got now a working installation of all libraries, and could import `sage.all` without the need to uncomment any imports. Yeaaaah!\n\nI've also cleaned the code and extended the ticket description, so this ticket is now ready for review.",
    "created_at": "2020-10-02T13:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599331",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:88'></a>
Perfect, thanks a lot Matthias! I got now a working installation of all libraries, and could import `sage.all` without the need to uncomment any imports. Yeaaaah!

I've also cleaned the code and extended the ticket description, so this ticket is now ready for review.



---

archive/issue_comments_599332.json:
```json
{
    "body": "<a id='comment:89'></a>\nCould you put the changes to `sage_setup/autogen/interpreters/` on a separate ticket please?",
    "created_at": "2020-10-02T17:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599332",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:89'></a>
Could you put the changes to `sage_setup/autogen/interpreters/` on a separate ticket please?



---

archive/issue_comments_599333.json:
```json
{
    "body": "<a id='comment:90'></a>\nThe changes regarding imports (mostly around `sage.rings`) should also be on a separate ticket.",
    "created_at": "2020-10-02T18:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599333",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:90'></a>
The changes regarding imports (mostly around `sage.rings`) should also be on a separate ticket.



---

archive/issue_comments_599334.json:
```json
{
    "body": "<a id='comment:91'></a>\nAlso for the changes to `src/sage/libs/eclsig.h` -- which will certainly need discussion",
    "created_at": "2020-10-02T18:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599334",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:91'></a>
Also for the changes to `src/sage/libs/eclsig.h` -- which will certainly need discussion



---

archive/issue_comments_599335.json:
```json
{
    "body": "<a id='comment:92'></a>\n\n```\n+compile_time_env = dict(\n+    PY_PLATFORM=sys.platform\n+)\n+cython_directives = dict(\n+    language_level=\"3str\",\n+    cdivision=True,\n+)\n```\n\nThis duplicates settings defined in `sage_setup.command.sage_build_cython`. \nCould you refactor this so that these directives are defined in a reusable way?\nPerhaps in a new module `sage_setup.cython_options`",
    "created_at": "2020-10-02T18:17:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599335",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:92'></a>

```
+compile_time_env = dict(
+    PY_PLATFORM=sys.platform
+)
+cython_directives = dict(
+    language_level="3str",
+    cdivision=True,
+)
```

This duplicates settings defined in `sage_setup.command.sage_build_cython`. 
Could you refactor this so that these directives are defined in a reusable way?
Perhaps in a new module `sage_setup.cython_options`



---

archive/issue_comments_599336.json:
```json
{
    "body": "**Author:** Tobias Diez",
    "created_at": "2020-10-02T18:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599336",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Tobias Diez



---

archive/issue_comments_599337.json:
```json
{
    "body": "<a id='comment:94'></a>\nReplying to [mkoeppe](#comment%3A92):\n> Could you refactor this so that these directives are defined in a reusable way?\n> Perhaps in a new module `sage_setup.cython_options` \n\n\n... in a separate ticket of course.",
    "created_at": "2020-10-02T18:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599337",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:94'></a>
Replying to [mkoeppe](#comment%3A92):
> Could you refactor this so that these directives are defined in a reusable way?
> Perhaps in a new module `sage_setup.cython_options` 


... in a separate ticket of course.



---

archive/issue_comments_599338.json:
```json
{
    "body": "<a id='comment:95'></a>\nWill do so. For the cython options, they are actually only a small subset of the ones in `sage_build_cython`. Should I still refactor? (Feels a bit strange as there are more differences than similarities.) But I'm also not sure if the other cython options are needed...",
    "created_at": "2020-10-02T18:47:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599338",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:95'></a>
Will do so. For the cython options, they are actually only a small subset of the ones in `sage_build_cython`. Should I still refactor? (Feels a bit strange as there are more differences than similarities.) But I'm also not sure if the other cython options are needed...



---

archive/issue_comments_599339.json:
```json
{
    "body": "<a id='comment:96'></a>\nReplying to [gh-tobiasdiez](#comment%3A95):\n> Will do so. For the cython options, they are actually only a small subset of the ones in `sage_build_cython`. Should I still refactor? (Feels a bit strange as there are more differences than similarities.) But I'm also not sure if the other cython options are needed...\n\nWell, the idea would be to see whether you can just build with the options that Sage uses instead of using your own set of options.",
    "created_at": "2020-10-02T18:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599339",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:96'></a>
Replying to [gh-tobiasdiez](#comment%3A95):
> Will do so. For the cython options, they are actually only a small subset of the ones in `sage_build_cython`. Should I still refactor? (Feels a bit strange as there are more differences than similarities.) But I'm also not sure if the other cython options are needed...

Well, the idea would be to see whether you can just build with the options that Sage uses instead of using your own set of options.



---

archive/issue_comments_599340.json:
```json
{
    "body": "<a id='comment:97'></a>\nWhether other Cython build options can/should be used - should be orthogonal to whether an in-place or regular build is done. So it should not be done on this ticket.",
    "created_at": "2020-10-02T18:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599340",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:97'></a>
Whether other Cython build options can/should be used - should be orthogonal to whether an in-place or regular build is done. So it should not be done on this ticket.



---

archive/issue_comments_599341.json:
```json
{
    "body": "Some comments on items in the ticket description:\n> TODO (as followup tickets):\n> - Automatically generate the `apt-get install` command with the necessary libraries (add them as `distros/debian.txt`?)\n\n\n`./configure` takes care of all of this. Do you plan to do system interface configuration and system package advice without using `./configure` (or, more generally, Unix shell scripts)?  \n\nA way forward is to reimplement (cleaner version of) some of the simple shell code for system package advice as Python code in `sage_bootstrap`. See #29146.\n\n> - Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`\n\n\nMy suggestion:  Instead of discussing to remove this variable (or other configuration variables that are set by `./configure`), rather discuss different ways of generating the `sage_conf` module / or providing different implementations of the interface defined by the `sage_conf` module for different use cases (such as supporting a platform that does not have a Unix shell).\n\n> - Move package dependencies from pipfile to install_requires in `src/setup.py`. \n\n\nBest to put them in `src/setup.cfg` instead of `src/setup.py` (see #30578)",
    "created_at": "2020-10-02T19:31:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599341",
    "user": "https://github.com/mkoeppe"
}
```

Some comments on items in the ticket description:
> TODO (as followup tickets):
> - Automatically generate the `apt-get install` command with the necessary libraries (add them as `distros/debian.txt`?)


`./configure` takes care of all of this. Do you plan to do system interface configuration and system package advice without using `./configure` (or, more generally, Unix shell scripts)?  

A way forward is to reimplement (cleaner version of) some of the simple shell code for system package advice as Python code in `sage_bootstrap`. See #29146.

> - Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`


My suggestion:  Instead of discussing to remove this variable (or other configuration variables that are set by `./configure`), rather discuss different ways of generating the `sage_conf` module / or providing different implementations of the interface defined by the `sage_conf` module for different use cases (such as supporting a platform that does not have a Unix shell).

> - Move package dependencies from pipfile to install_requires in `src/setup.py`. 


Best to put them in `src/setup.cfg` instead of `src/setup.py` (see #30578)



---

archive/issue_comments_599342.json:
```json
{
    "body": "<a id='comment:99'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82e8b7d1b63b284d8689d93538d0cd369464e642\">82e8b7d</a></td><td><code>Narrow down to essenital changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6\">8abab5d</a></td><td><code>Add copy of setup.py</code></td></tr></table>\n",
    "created_at": "2020-10-03T12:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599342",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:99'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82e8b7d1b63b284d8689d93538d0cd369464e642">82e8b7d</a></td><td><code>Narrow down to essenital changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6">8abab5d</a></td><td><code>Add copy of setup.py</code></td></tr></table>




---

archive/issue_comments_599343.json:
```json
{
    "body": "**Changing commit** from \"[5b12a924507cf85a2eca749993835927b9398668](https://github.com/sagemath/sagetrac-mirror/commit/5b12a924507cf85a2eca749993835927b9398668)\" to \"[8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6](https://github.com/sagemath/sagetrac-mirror/commit/8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6)\".",
    "created_at": "2020-10-03T12:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5b12a924507cf85a2eca749993835927b9398668](https://github.com/sagemath/sagetrac-mirror/commit/5b12a924507cf85a2eca749993835927b9398668)" to "[8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6](https://github.com/sagemath/sagetrac-mirror/commit/8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6)".



---

archive/issue_comments_599344.json:
```json
{
    "body": "<a id='comment:0'></a>\nThanks for preparing this cleaned up branch.\n\nTrying to test it, I seem to be running into something that looks like https://discuss.python.org/t/pip-19-1-and-installing-in-editable-mode-with-pyproject-toml/1553 : \nSomething is generating a `pyproject.toml` in `src/` and then it dies with \n\n```\nWriting supplied requirement line to temporary file: '-e .'\nInstalling 'e1839a8'\n$ ['/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/bin/pip', 'install', '--verbose', '--upgrade', '--no-use-pep517', '--no-deps', '--exists-action=i', '-r', '/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pipenv-_yopr9l3-requirements/pipenv-7uv8tb0m-requirement.txt', '-i', 'https://pypi.org/simple']\nUsing source directory: '/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/src'\nUsing pip 20.2.1 from /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip (python 3.8)\nNon-user install by explicit request\n...\n  File \"/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_internal/distributions/sdist.py\", line 33, in prepare_distribution_metadata\n    self.req.load_pyproject_toml()\n  File \"/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_internal/req/req_install.py\", line 503, in load_pyproject_toml\n    pyproject_toml_data = load_pyproject_toml(\n  File \"/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_internal/pyproject.py\", line 95, in load_pyproject_toml\n    raise InstallationError(\npip._internal.exceptions.InstallationError: Disabling PEP 517 processing is invalid: project specifies a build backend of setuptools.build_meta in pyproject.toml\nRemoved file:///Users/mkoeppe/s/sage/sage-rebasing/src (from -r /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pipenv-_yopr9l3-requirements/pipenv-7uv8tb0m-requirement.txt (line 1)) from build tracker '/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-tracker-lxrv7bcd'\nRemoved build tracker: '/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-tracker-lxrv7bcd'\n```",
    "created_at": "2020-10-03T17:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599344",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Thanks for preparing this cleaned up branch.

Trying to test it, I seem to be running into something that looks like https://discuss.python.org/t/pip-19-1-and-installing-in-editable-mode-with-pyproject-toml/1553 : 
Something is generating a `pyproject.toml` in `src/` and then it dies with 

```
Writing supplied requirement line to temporary file: '-e .'
Installing 'e1839a8'
$ ['/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/bin/pip', 'install', '--verbose', '--upgrade', '--no-use-pep517', '--no-deps', '--exists-action=i', '-r', '/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pipenv-_yopr9l3-requirements/pipenv-7uv8tb0m-requirement.txt', '-i', 'https://pypi.org/simple']
Using source directory: '/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/src'
Using pip 20.2.1 from /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip (python 3.8)
Non-user install by explicit request
...
  File "/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_internal/distributions/sdist.py", line 33, in prepare_distribution_metadata
    self.req.load_pyproject_toml()
  File "/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_internal/req/req_install.py", line 503, in load_pyproject_toml
    pyproject_toml_data = load_pyproject_toml(
  File "/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_internal/pyproject.py", line 95, in load_pyproject_toml
    raise InstallationError(
pip._internal.exceptions.InstallationError: Disabling PEP 517 processing is invalid: project specifies a build backend of setuptools.build_meta in pyproject.toml
Removed file:///Users/mkoeppe/s/sage/sage-rebasing/src (from -r /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pipenv-_yopr9l3-requirements/pipenv-7uv8tb0m-requirement.txt (line 1)) from build tracker '/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-tracker-lxrv7bcd'
Removed build tracker: '/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-tracker-lxrv7bcd'
```



---

archive/issue_comments_599345.json:
```json
{
    "body": "<a id='comment:1'></a>\nStrange. For some reason, for you pip is invoked with `--no-use-pep517`. For me it is not:\n\n```\n$ \"/mnt/d/Programming/Projects/sage/src/.venv/bin/pip\" install   --verbose  --no-deps  -e \".\" -i https://pypi.org/simple --exists-action w...\n```\nWhat version of pipenv do you use? For me: pipenv 11.9.0 (and the pip in the virtual env also differs: pip 20.0.2)",
    "created_at": "2020-10-03T18:49:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599345",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>
Strange. For some reason, for you pip is invoked with `--no-use-pep517`. For me it is not:

```
$ "/mnt/d/Programming/Projects/sage/src/.venv/bin/pip" install   --verbose  --no-deps  -e "." -i https://pypi.org/simple --exists-action w...
```
What version of pipenv do you use? For me: pipenv 11.9.0 (and the pip in the virtual env also differs: pip 20.0.2)



---

archive/issue_comments_599346.json:
```json
{
    "body": "<a id='comment:2'></a>\nI'm using pipenv from homebrew, which is version 2020.8.13",
    "created_at": "2020-10-03T18:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599346",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
I'm using pipenv from homebrew, which is version 2020.8.13



---

archive/issue_comments_599347.json:
```json
{
    "body": "<a id='comment:3'></a>\nI will try to update my pipenv later. For now you can have a look if setting the environment variable PIP_USE_PEP517 to true resolves the issue.",
    "created_at": "2020-10-03T19:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599347",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:3'></a>
I will try to update my pipenv later. For now you can have a look if setting the environment variable PIP_USE_PEP517 to true resolves the issue.



---

archive/issue_comments_599348.json:
```json
{
    "body": "<a id='comment:4'></a>\nI'll try, but I think editable installs are not compatible with PEP517",
    "created_at": "2020-10-03T19:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599348",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
I'll try, but I think editable installs are not compatible with PEP517



---

archive/issue_comments_599349.json:
```json
{
    "body": "<a id='comment:5'></a>\nNo change after setting this environment variable",
    "created_at": "2020-10-03T19:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599349",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
No change after setting this environment variable



---

archive/issue_comments_599350.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30672, #30673, #30590\" to \"#29500, #30672, #30673, #30590, #30709\".",
    "created_at": "2020-10-03T20:07:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599350",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#29500, #30672, #30673, #30590" to "#29500, #30672, #30673, #30590, #30709".



---

archive/issue_comments_599351.json:
```json
{
    "body": "<a id='comment:7'></a>\nI had a closer look at this, and it turns out that the first time pip is correctly called without any `--no-use-pep517` argument, only on the retry this argument is used. Thus, the error actually shadows another error that occurs during the initial `pip install`.\n\nCan you thus run the following `pipenv run pip install -e . --no-build-isolation` after `pipenv install`. This should point to the real issue why the editable install fails. \n\nI've created a github workflow because I don't have a mac. https://github.com/tobiasdiez/sage/blob/public/build/inplace/.github/workflows/ci-pipenv.yml It shows the same problem, the `pipenv install` fails apparently due to a pep517 issue, but the editable install actually fails due to missing interpreters and other dependencies (which requires manual installations as in the ticket description).",
    "created_at": "2020-10-04T13:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599351",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>
I had a closer look at this, and it turns out that the first time pip is correctly called without any `--no-use-pep517` argument, only on the retry this argument is used. Thus, the error actually shadows another error that occurs during the initial `pip install`.

Can you thus run the following `pipenv run pip install -e . --no-build-isolation` after `pipenv install`. This should point to the real issue why the editable install fails. 

I've created a github workflow because I don't have a mac. https://github.com/tobiasdiez/sage/blob/public/build/inplace/.github/workflows/ci-pipenv.yml It shows the same problem, the `pipenv install` fails apparently due to a pep517 issue, but the editable install actually fails due to missing interpreters and other dependencies (which requires manual installations as in the ticket description).



---

archive/issue_comments_599352.json:
```json
{
    "body": "<a id='comment:8'></a>\nHm...\n\n```\n(sage-sh) mkoeppe@egret:src$ pipenv run pip install -e . --no-build-isolation\nObtaining file:///Users/mkoeppe/s/sage/sage-rebasing/src\n    Preparing wheel metadata ... error\n    ERROR: Command errored out with exit status 1:\n     command: /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/bin/python /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/tmpvt150u93\n         cwd: /Users/mkoeppe/s/sage/sage-rebasing/src\n    Complete output (14 lines):\n    Traceback (most recent call last):\n      File \"/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 280, in <module>\n        main()\n      File \"/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 263, in main\n        json_out['return_val'] = hook(**hook_input['kwargs'])\n      File \"/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py\", line 133, in prepare_metadata_for_build_wheel\n        return hook(metadata_directory, config_settings)\n      File \"/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/setuptools/build_meta.py\", line 161, in prepare_metadata_for_build_wheel\n        self.run_setup()\n      File \"/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/setuptools/build_meta.py\", line 145, in run_setup\n        exec(compile(code, __file__, 'exec'), locals())\n      File \"setup.py\", line 23, in <module>\n        import sage.env\n    ModuleNotFoundError: No module named 'sage'\n    ----------------------------------------\nERROR: Command errored out with exit status 1: /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/bin/python /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/tmpvt150u93 Check the logs for full command output.\n```",
    "created_at": "2020-10-04T15:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599352",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Hm...

```
(sage-sh) mkoeppe@egret:src$ pipenv run pip install -e . --no-build-isolation
Obtaining file:///Users/mkoeppe/s/sage/sage-rebasing/src
    Preparing wheel metadata ... error
    ERROR: Command errored out with exit status 1:
     command: /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/bin/python /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/tmpvt150u93
         cwd: /Users/mkoeppe/s/sage/sage-rebasing/src
    Complete output (14 lines):
    Traceback (most recent call last):
      File "/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py", line 280, in <module>
        main()
      File "/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py", line 263, in main
        json_out['return_val'] = hook(**hook_input['kwargs'])
      File "/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py", line 133, in prepare_metadata_for_build_wheel
        return hook(metadata_directory, config_settings)
      File "/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/setuptools/build_meta.py", line 161, in prepare_metadata_for_build_wheel
        self.run_setup()
      File "/Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/setuptools/build_meta.py", line 145, in run_setup
        exec(compile(code, __file__, 'exec'), locals())
      File "setup.py", line 23, in <module>
        import sage.env
    ModuleNotFoundError: No module named 'sage'
    ----------------------------------------
ERROR: Command errored out with exit status 1: /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/bin/python /Users/mkoeppe/.local/share/virtualenvs/src-BXov0SKG/lib/python3.8/site-packages/pip/_vendor/pep517/_in_process.py prepare_metadata_for_build_wheel /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/tmpvt150u93 Check the logs for full command output.
```



---

archive/issue_comments_599353.json:
```json
{
    "body": "<a id='comment:9'></a>\nNo idea....for the github action this is not a problem: https://github.com/tobiasdiez/sage/runs/1205452529?check_suite_focus=true. Maybe `pipenv run pip install -e . --verbose --upgrade --exists-action=i --no-build-isolation` works, or you need to clean the venv first (pipenv -rm).",
    "created_at": "2020-10-04T17:01:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599353",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
No idea....for the github action this is not a problem: https://github.com/tobiasdiez/sage/runs/1205452529?check_suite_focus=true. Maybe `pipenv run pip install -e . --verbose --upgrade --exists-action=i --no-build-isolation` works, or you need to clean the venv first (pipenv -rm).



---

archive/issue_comments_599354.json:
```json
{
    "body": "<a id='comment:0'></a>\nSure, I'll play with it more in the next days.",
    "created_at": "2020-10-04T17:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599354",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Sure, I'll play with it more in the next days.



---

archive/issue_comments_599355.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -41,6 +41,7 @@\n   This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`\n - Fix installation of `ecl`:\n   After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.\n+  Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version).\n - Install magma:\n   `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`\n \n``````\n",
    "created_at": "2020-10-07T10:54:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599355",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -41,6 +41,7 @@
   This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`
 - Fix installation of `ecl`:
   After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.
+  Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version).
 - Install magma:
   `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`
 
``````




---

archive/issue_comments_599356.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edde293052d7e4660df11ce13513f08edf44c5e5\">edde293</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-10-07T16:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599356",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edde293052d7e4660df11ce13513f08edf44c5e5">edde293</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599357.json:
```json
{
    "body": "**Changing commit** from \"[8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6](https://github.com/sagemath/sagetrac-mirror/commit/8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6)\" to \"[edde293052d7e4660df11ce13513f08edf44c5e5](https://github.com/sagemath/sagetrac-mirror/commit/edde293052d7e4660df11ce13513f08edf44c5e5)\".",
    "created_at": "2020-10-07T16:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599357",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6](https://github.com/sagemath/sagetrac-mirror/commit/8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6)" to "[edde293052d7e4660df11ce13513f08edf44c5e5](https://github.com/sagemath/sagetrac-mirror/commit/edde293052d7e4660df11ce13513f08edf44c5e5)".



---

archive/issue_comments_599358.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74ecddbe6a71f133458cdb018f45e36ba0aaf818\">74ecddb</a></td><td><code>Update dependencies</code></td></tr></table>\n",
    "created_at": "2020-10-07T16:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599358",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74ecddbe6a71f133458cdb018f45e36ba0aaf818">74ecddb</a></td><td><code>Update dependencies</code></td></tr></table>




---

archive/issue_comments_599359.json:
```json
{
    "body": "**Changing commit** from \"[edde293052d7e4660df11ce13513f08edf44c5e5](https://github.com/sagemath/sagetrac-mirror/commit/edde293052d7e4660df11ce13513f08edf44c5e5)\" to \"[74ecddbe6a71f133458cdb018f45e36ba0aaf818](https://github.com/sagemath/sagetrac-mirror/commit/74ecddbe6a71f133458cdb018f45e36ba0aaf818)\".",
    "created_at": "2020-10-07T16:28:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599359",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[edde293052d7e4660df11ce13513f08edf44c5e5](https://github.com/sagemath/sagetrac-mirror/commit/edde293052d7e4660df11ce13513f08edf44c5e5)" to "[74ecddbe6a71f133458cdb018f45e36ba0aaf818](https://github.com/sagemath/sagetrac-mirror/commit/74ecddbe6a71f133458cdb018f45e36ba0aaf818)".



---

archive/issue_comments_599360.json:
```json
{
    "body": "**Changing commit** from \"[74ecddbe6a71f133458cdb018f45e36ba0aaf818](https://github.com/sagemath/sagetrac-mirror/commit/74ecddbe6a71f133458cdb018f45e36ba0aaf818)\" to \"[7110841f2c816001c14205c1426088fb873499b3](https://github.com/sagemath/sagetrac-mirror/commit/7110841f2c816001c14205c1426088fb873499b3)\".",
    "created_at": "2020-10-16T22:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599360",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[74ecddbe6a71f133458cdb018f45e36ba0aaf818](https://github.com/sagemath/sagetrac-mirror/commit/74ecddbe6a71f133458cdb018f45e36ba0aaf818)" to "[7110841f2c816001c14205c1426088fb873499b3](https://github.com/sagemath/sagetrac-mirror/commit/7110841f2c816001c14205c1426088fb873499b3)".



---

archive/issue_comments_599361.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f565179d1e87d3cd14b0e76c508fd9d7bbfc5a8\">4f56517</a></td><td><code>Duplicate src/setup.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18a091b31ee5f0d5b767395d3738a208360962f5\">18a091b</a></td><td><code>Narrow down to essenital changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7110841f2c816001c14205c1426088fb873499b3\">7110841</a></td><td><code>Update dependencies</code></td></tr></table>\n",
    "created_at": "2020-10-16T22:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599361",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f565179d1e87d3cd14b0e76c508fd9d7bbfc5a8">4f56517</a></td><td><code>Duplicate src/setup.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18a091b31ee5f0d5b767395d3738a208360962f5">18a091b</a></td><td><code>Narrow down to essenital changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7110841f2c816001c14205c1426088fb873499b3">7110841</a></td><td><code>Update dependencies</code></td></tr></table>




---

archive/issue_comments_599362.json:
```json
{
    "body": "**Changing dependencies** from \"#29500, #30672, #30673, #30590, #30709\" to \"#30779, #30672, #30673, #30709\".",
    "created_at": "2020-10-16T22:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599362",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29500, #30672, #30673, #30590, #30709" to "#30779, #30672, #30673, #30709".



---

archive/issue_comments_599363.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52e2107ef58dc234174bf39fd1de5ccdf608369a\">52e2107</a></td><td><code>sage_include_directories: Remove sage/ext</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6ccce6b494d9e0bd0b2dbbbeb3e9f1138255fd5e\">6ccce6b</a></td><td><code>Fix missing ccobject</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14021292f40c2af4073be4e641144b76ae433a2e\">1402129</a></td><td><code>Merge branch 'u/mkoeppe/remove__sage_ext__from__sage_include_directories_' of git://trac.sagemath.org/sage into t/30371/public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eb38459c81ec8ffecc161476c88945b5c1f84d9\">6eb3845</a></td><td><code>Extend gitignore and add VS code config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bbe73ee1fa92df2c21138bd9e6d3169feda7dc51\">bbe73ee</a></td><td><code>Remove VS code settings, and add exceptions for already checked-in files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22b7caca768322b3a15be5fc994e5f93ac7ef715\">22b7cac</a></td><td><code>Merge branch 'public/build/enhancegitignore' of git://trac.sagemath.org/sage into t/30371/public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1aef37625ee4af3da61b6f7493a3ac14a0b17fde\">1aef376</a></td><td><code>Extract cython options to new module</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68ab47b4f86d83b4c4e769c17860a53a1b5e99d3\">68ab47b</a></td><td><code>Merge branch 'public/build/cythonConfig' of git://trac.sagemath.org/sage into t/30371/public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1b1288c66074c18fdda27dffc806b785edb760a\">d1b1288</a></td><td><code>Narrow down to essenital changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b5403699f9472f102b4781e3fd9ebae80e6bb8a\">0b54036</a></td><td><code>Update dependencies</code></td></tr></table>\n",
    "created_at": "2020-10-16T22:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599363",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52e2107ef58dc234174bf39fd1de5ccdf608369a">52e2107</a></td><td><code>sage_include_directories: Remove sage/ext</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6ccce6b494d9e0bd0b2dbbbeb3e9f1138255fd5e">6ccce6b</a></td><td><code>Fix missing ccobject</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14021292f40c2af4073be4e641144b76ae433a2e">1402129</a></td><td><code>Merge branch 'u/mkoeppe/remove__sage_ext__from__sage_include_directories_' of git://trac.sagemath.org/sage into t/30371/public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eb38459c81ec8ffecc161476c88945b5c1f84d9">6eb3845</a></td><td><code>Extend gitignore and add VS code config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bbe73ee1fa92df2c21138bd9e6d3169feda7dc51">bbe73ee</a></td><td><code>Remove VS code settings, and add exceptions for already checked-in files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22b7caca768322b3a15be5fc994e5f93ac7ef715">22b7cac</a></td><td><code>Merge branch 'public/build/enhancegitignore' of git://trac.sagemath.org/sage into t/30371/public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1aef37625ee4af3da61b6f7493a3ac14a0b17fde">1aef376</a></td><td><code>Extract cython options to new module</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68ab47b4f86d83b4c4e769c17860a53a1b5e99d3">68ab47b</a></td><td><code>Merge branch 'public/build/cythonConfig' of git://trac.sagemath.org/sage into t/30371/public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1b1288c66074c18fdda27dffc806b785edb760a">d1b1288</a></td><td><code>Narrow down to essenital changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b5403699f9472f102b4781e3fd9ebae80e6bb8a">0b54036</a></td><td><code>Update dependencies</code></td></tr></table>




---

archive/issue_comments_599364.json:
```json
{
    "body": "**Changing commit** from \"[7110841f2c816001c14205c1426088fb873499b3](https://github.com/sagemath/sagetrac-mirror/commit/7110841f2c816001c14205c1426088fb873499b3)\" to \"[0b5403699f9472f102b4781e3fd9ebae80e6bb8a](https://github.com/sagemath/sagetrac-mirror/commit/0b5403699f9472f102b4781e3fd9ebae80e6bb8a)\".",
    "created_at": "2020-10-16T22:27:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599364",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7110841f2c816001c14205c1426088fb873499b3](https://github.com/sagemath/sagetrac-mirror/commit/7110841f2c816001c14205c1426088fb873499b3)" to "[0b5403699f9472f102b4781e3fd9ebae80e6bb8a](https://github.com/sagemath/sagetrac-mirror/commit/0b5403699f9472f102b4781e3fd9ebae80e6bb8a)".



---

archive/issue_comments_599365.json:
```json
{
    "body": "<a id='comment:7'></a>\nRebased on top of the dependencies",
    "created_at": "2020-10-16T22:27:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599365",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Rebased on top of the dependencies



---

archive/issue_comments_599366.json:
```json
{
    "body": "**Work_Issues:** Use the cython options",
    "created_at": "2020-10-16T22:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599366",
    "user": "https://github.com/mkoeppe"
}
```

**Work_Issues:** Use the cython options



---

archive/issue_comments_599367.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-10-16T22:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599367",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_599368.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82e8b7d1b63b284d8689d93538d0cd369464e642\">82e8b7d</a></td><td><code>Narrow down to essenital changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6\">8abab5d</a></td><td><code>Add copy of setup.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edde293052d7e4660df11ce13513f08edf44c5e5\">edde293</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74ecddbe6a71f133458cdb018f45e36ba0aaf818\">74ecddb</a></td><td><code>Update dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1286fcba256977cd92b0bc6ab46a5072f9caddcb\">1286fcb</a></td><td><code>Merge branch 'public/build/inplace' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/946737eb3b350638cb6f6919df20a4e4ca53a0c2\">946737e</a></td><td><code>Use new cython option modules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55930254f941314d9996bfc6a9a4d5f9767c2e6d\">5593025</a></td><td><code>Update dependencies</code></td></tr></table>\n",
    "created_at": "2020-10-17T19:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599368",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82e8b7d1b63b284d8689d93538d0cd369464e642">82e8b7d</a></td><td><code>Narrow down to essenital changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8abab5dfb588a3b6e6fe0c1d32525656ddc13cf6">8abab5d</a></td><td><code>Add copy of setup.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edde293052d7e4660df11ce13513f08edf44c5e5">edde293</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74ecddbe6a71f133458cdb018f45e36ba0aaf818">74ecddb</a></td><td><code>Update dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1286fcba256977cd92b0bc6ab46a5072f9caddcb">1286fcb</a></td><td><code>Merge branch 'public/build/inplace' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/946737eb3b350638cb6f6919df20a4e4ca53a0c2">946737e</a></td><td><code>Use new cython option modules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55930254f941314d9996bfc6a9a4d5f9767c2e6d">5593025</a></td><td><code>Update dependencies</code></td></tr></table>




---

archive/issue_comments_599369.json:
```json
{
    "body": "**Changing commit** from \"[0b5403699f9472f102b4781e3fd9ebae80e6bb8a](https://github.com/sagemath/sagetrac-mirror/commit/0b5403699f9472f102b4781e3fd9ebae80e6bb8a)\" to \"[55930254f941314d9996bfc6a9a4d5f9767c2e6d](https://github.com/sagemath/sagetrac-mirror/commit/55930254f941314d9996bfc6a9a4d5f9767c2e6d)\".",
    "created_at": "2020-10-17T19:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599369",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0b5403699f9472f102b4781e3fd9ebae80e6bb8a](https://github.com/sagemath/sagetrac-mirror/commit/0b5403699f9472f102b4781e3fd9ebae80e6bb8a)" to "[55930254f941314d9996bfc6a9a4d5f9767c2e6d](https://github.com/sagemath/sagetrac-mirror/commit/55930254f941314d9996bfc6a9a4d5f9767c2e6d)".



---

archive/issue_comments_599370.json:
```json
{
    "body": "<a id='comment:0'></a>\nThanks for the rebase. Next time please try to not force-push to a branch that others have checked out because it messes up their git history.\n\nI've updated the code to use the new cython options module.",
    "created_at": "2020-10-17T19:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599370",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:0'></a>
Thanks for the rebase. Next time please try to not force-push to a branch that others have checked out because it messes up their git history.

I've updated the code to use the new cython options module.



---

archive/issue_comments_599371.json:
```json
{
    "body": "**Changing work_issues** from \"Use the cython options\" to \"\".",
    "created_at": "2020-10-17T19:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599371",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing work_issues** from "Use the cython options" to "".



---

archive/issue_comments_599372.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-10-17T19:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599372",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_599373.json:
```json
{
    "body": "<a id='comment:1'></a>\nSorry if the push made it harder for you to continue on this branch. But rebasing it on top of the branches of the dependency tickets was a necessary cleanup",
    "created_at": "2020-10-17T19:41:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599373",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Sorry if the push made it harder for you to continue on this branch. But rebasing it on top of the branches of the dependency tickets was a necessary cleanup



---

archive/issue_comments_599374.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -41,7 +41,7 @@\n   This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`\n - Fix installation of `ecl`:\n   After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.\n-  Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version).\n+  Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version). I also had the problem that `ECL_WITH_LISP_FPE_BEGIN` was not defined (probably because the version of ecl that I used was too old so that https://gitlab.com/embeddable-common-lisp/ecl/-/merge_requests/154 was not included.)\n - Install magma:\n   `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`\n \n``````\n",
    "created_at": "2020-10-18T21:41:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599374",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -41,7 +41,7 @@
   This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`
 - Fix installation of `ecl`:
   After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.
-  Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version).
+  Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version). I also had the problem that `ECL_WITH_LISP_FPE_BEGIN` was not defined (probably because the version of ecl that I used was too old so that https://gitlab.com/embeddable-common-lisp/ecl/-/merge_requests/154 was not included.)
 - Install magma:
   `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`
 
``````




---

archive/issue_comments_599375.json:
```json
{
    "body": "<a id='comment:3'></a>\nWhat's the status of this branch? Does it work for you? Can you run doctests in the in-place installation and does it pass them?",
    "created_at": "2020-10-19T23:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599375",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
What's the status of this branch? Does it work for you? Can you run doctests in the in-place installation and does it pass them?



---

archive/issue_comments_599376.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt's working for me. `pipenv install -dev` gives a fully functional virtual environment (so the cython compilation works). Moreover, `import sage.all` works as well, and one can then use it to run sage-code. So far, I've tested it with some code from the manifolds package. Not yet tried doctests, as I've no idea how to run them from the virtual environment.",
    "created_at": "2020-10-20T08:11:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599376",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>
It's working for me. `pipenv install -dev` gives a fully functional virtual environment (so the cython compilation works). Moreover, `import sage.all` works as well, and one can then use it to run sage-code. So far, I've tested it with some code from the manifolds package. Not yet tried doctests, as I've no idea how to run them from the virtual environment.



---

archive/issue_comments_599377.json:
```json
{
    "body": "<a id='comment:125'></a>\nReplying to [gh-tobiasdiez](#comment%3A124):\n> Not yet tried doctests, as I've no idea how to run them from the virtual environment.\n\n\nWell, the virtual environment has a `bin/sage` script, so `sage -t` \"should\" work. If it does not, this needs to be fixed. Likely some work in the direction of #22731 is necessary.",
    "created_at": "2020-10-20T16:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599377",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:125'></a>
Replying to [gh-tobiasdiez](#comment%3A124):
> Not yet tried doctests, as I've no idea how to run them from the virtual environment.


Well, the virtual environment has a `bin/sage` script, so `sage -t` "should" work. If it does not, this needs to be fixed. Likely some work in the direction of #22731 is necessary.



---

archive/issue_comments_599378.json:
```json
{
    "body": "<a id='comment:6'></a>\nYeah, `sage -t` still uses the python in `sage/local`. So this does not work, and a mechanism is needed to use the python of the activated virtual env (without changing env variables which is too inflexible in my opinion).\n\nDirectly running `bin/sage-runtests --all` also leads to errors:\n\n```\nno stored timings available\nRunning doctests with ID 2020-10-20-21-18-29-b0a05b3d.\nUsing --optional=dochtml,memlimit,sage,sage_spkg\nDoctesting entire Sage library.\nTraceback (most recent call last):\n  File \"bin/sage-runtests\", line 182, in <module>\n    err = DC.run()\n  File \"/mnt/d/Programming/Projects/sage/src/sage/doctest/control.py\", line 1234, in run\n    self.expand_files_into_sources()\n  File \"/mnt/d/Programming/Projects/sage/src/sage/doctest/control.py\", line 817, in expand_files_into_sources\n    self.sources = [FileDocTestSource(path, self.options) for path in expand()]\n  File \"/mnt/d/Programming/Projects/sage/src/sage/doctest/control.py\", line 817, in <listcomp>\n    self.sources = [FileDocTestSource(path, self.options) for path in expand()]\n  File \"/mnt/d/Programming/Projects/sage/src/sage/doctest/sources.py\", line 528, in __init__\n    raise ValueError(\"unknown file extension %r\"%ext)\nValueError: unknown file extension ''\n```\n\n(I guess some files are not found.)\n\n\nAnyway, that's probably a topic for another ticket.",
    "created_at": "2020-10-20T19:30:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599378",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:6'></a>
Yeah, `sage -t` still uses the python in `sage/local`. So this does not work, and a mechanism is needed to use the python of the activated virtual env (without changing env variables which is too inflexible in my opinion).

Directly running `bin/sage-runtests --all` also leads to errors:

```
no stored timings available
Running doctests with ID 2020-10-20-21-18-29-b0a05b3d.
Using --optional=dochtml,memlimit,sage,sage_spkg
Doctesting entire Sage library.
Traceback (most recent call last):
  File "bin/sage-runtests", line 182, in <module>
    err = DC.run()
  File "/mnt/d/Programming/Projects/sage/src/sage/doctest/control.py", line 1234, in run
    self.expand_files_into_sources()
  File "/mnt/d/Programming/Projects/sage/src/sage/doctest/control.py", line 817, in expand_files_into_sources
    self.sources = [FileDocTestSource(path, self.options) for path in expand()]
  File "/mnt/d/Programming/Projects/sage/src/sage/doctest/control.py", line 817, in <listcomp>
    self.sources = [FileDocTestSource(path, self.options) for path in expand()]
  File "/mnt/d/Programming/Projects/sage/src/sage/doctest/sources.py", line 528, in __init__
    raise ValueError("unknown file extension %r"%ext)
ValueError: unknown file extension ''
```

(I guess some files are not found.)


Anyway, that's probably a topic for another ticket.



---

archive/issue_comments_599379.json:
```json
{
    "body": "<a id='comment:127'></a>\nReplying to [gh-tobiasdiez](#comment%3A126):\n> Yeah, `sage -t` still uses the python in `sage/local`. So this does not work, and a mechanism is needed to use the python of the activated virtual env (without changing env variables which is too inflexible in my opinion).\n\n\nYes, this is precisely #22731",
    "created_at": "2020-10-20T20:05:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599379",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:127'></a>
Replying to [gh-tobiasdiez](#comment%3A126):
> Yeah, `sage -t` still uses the python in `sage/local`. So this does not work, and a mechanism is needed to use the python of the activated virtual env (without changing env variables which is too inflexible in my opinion).


Yes, this is precisely #22731



---

archive/issue_comments_599380.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9dc8a2b0bcd6ff1cada426c60184b322312618e4\">9dc8a2b</a></td><td><code>Generate code automatically</code></td></tr></table>\n",
    "created_at": "2020-10-21T06:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599380",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9dc8a2b0bcd6ff1cada426c60184b322312618e4">9dc8a2b</a></td><td><code>Generate code automatically</code></td></tr></table>




---

archive/issue_comments_599381.json:
```json
{
    "body": "**Changing commit** from \"[55930254f941314d9996bfc6a9a4d5f9767c2e6d](https://github.com/sagemath/sagetrac-mirror/commit/55930254f941314d9996bfc6a9a4d5f9767c2e6d)\" to \"[9dc8a2b0bcd6ff1cada426c60184b322312618e4](https://github.com/sagemath/sagetrac-mirror/commit/9dc8a2b0bcd6ff1cada426c60184b322312618e4)\".",
    "created_at": "2020-10-21T06:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599381",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[55930254f941314d9996bfc6a9a4d5f9767c2e6d](https://github.com/sagemath/sagetrac-mirror/commit/55930254f941314d9996bfc6a9a4d5f9767c2e6d)" to "[9dc8a2b0bcd6ff1cada426c60184b322312618e4](https://github.com/sagemath/sagetrac-mirror/commit/9dc8a2b0bcd6ff1cada426c60184b322312618e4)".



---

archive/issue_comments_599382.json:
```json
{
    "body": "**Changing commit** from \"[9dc8a2b0bcd6ff1cada426c60184b322312618e4](https://github.com/sagemath/sagetrac-mirror/commit/9dc8a2b0bcd6ff1cada426c60184b322312618e4)\" to \"[19482048d4fffe52e94fcd94b81fa8ef59000558](https://github.com/sagemath/sagetrac-mirror/commit/19482048d4fffe52e94fcd94b81fa8ef59000558)\".",
    "created_at": "2020-10-21T06:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599382",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9dc8a2b0bcd6ff1cada426c60184b322312618e4](https://github.com/sagemath/sagetrac-mirror/commit/9dc8a2b0bcd6ff1cada426c60184b322312618e4)" to "[19482048d4fffe52e94fcd94b81fa8ef59000558](https://github.com/sagemath/sagetrac-mirror/commit/19482048d4fffe52e94fcd94b81fa8ef59000558)".



---

archive/issue_comments_599383.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcef2b604df8a3832d466358ffc0379cba5d8e96\">fcef2b6</a></td><td><code>Use pip to install pipenv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4160c9fe293bedb191704e207012d043df3a2af7\">4160c9f</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0e01f2128c2a07fb6e1f599ed5465ca013aacad\">d0e01f2</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/711a2a61d4fc4eb5fe7bc5ec127dffc4d30200d5\">711a2a6</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/341be728e2cfa550910b4e74ee9d52668068c8b0\">341be72</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/918e1a59cb357c405f002d70c0945c13e506f039\">918e1a5</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/573ec517bbc1f9ee3aa8a5a9516ebd988ec732dd\">573ec51</a></td><td><code>Try with only one python</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/961abc39779522ed6310058df9f8eb2157c7072c\">961abc3</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a9b803512d6fc335bf4c81c11d1a5766c168dbd\">5a9b803</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19482048d4fffe52e94fcd94b81fa8ef59000558\">1948204</a></td><td><code>Merge branch 'public/build/inplace' of https://github.com/tobiasdiez/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-10-21T06:30:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599383",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcef2b604df8a3832d466358ffc0379cba5d8e96">fcef2b6</a></td><td><code>Use pip to install pipenv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4160c9fe293bedb191704e207012d043df3a2af7">4160c9f</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0e01f2128c2a07fb6e1f599ed5465ca013aacad">d0e01f2</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/711a2a61d4fc4eb5fe7bc5ec127dffc4d30200d5">711a2a6</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/341be728e2cfa550910b4e74ee9d52668068c8b0">341be72</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/918e1a59cb357c405f002d70c0945c13e506f039">918e1a5</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/573ec517bbc1f9ee3aa8a5a9516ebd988ec732dd">573ec51</a></td><td><code>Try with only one python</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/961abc39779522ed6310058df9f8eb2157c7072c">961abc3</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a9b803512d6fc335bf4c81c11d1a5766c168dbd">5a9b803</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19482048d4fffe52e94fcd94b81fa8ef59000558">1948204</a></td><td><code>Merge branch 'public/build/inplace' of https://github.com/tobiasdiez/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599384.json:
```json
{
    "body": "**Changing commit** from \"[19482048d4fffe52e94fcd94b81fa8ef59000558](https://github.com/sagemath/sagetrac-mirror/commit/19482048d4fffe52e94fcd94b81fa8ef59000558)\" to \"[fffea7a7a50dd8c79827a07d6ef4eb3568fc1817](https://github.com/sagemath/sagetrac-mirror/commit/fffea7a7a50dd8c79827a07d6ef4eb3568fc1817)\".",
    "created_at": "2020-10-21T07:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599384",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[19482048d4fffe52e94fcd94b81fa8ef59000558](https://github.com/sagemath/sagetrac-mirror/commit/19482048d4fffe52e94fcd94b81fa8ef59000558)" to "[fffea7a7a50dd8c79827a07d6ef4eb3568fc1817](https://github.com/sagemath/sagetrac-mirror/commit/fffea7a7a50dd8c79827a07d6ef4eb3568fc1817)".



---

archive/issue_comments_599385.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/001653810a3414bec154ef54fda8056a76a880e1\">0016538</a></td><td><code>Merge branch 'public/build/inplace' of https://github.com/tobiasdiez/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d65d85e53898a5d1e39fa28494e898e85b3fe2ab\">d65d85e</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1b8aef563802d60c82683ddb88b193b148ccb36\">c1b8aef</a></td><td><code>Merge branch 'public/build/inplace' of https://github.com/tobiasdiez/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23d17ad3f89536404bce4cb25c20ff0fde2b193b\">23d17ad</a></td><td><code>Rename cblas to blas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cfe1c92ef838e8be27794355c05769f0fd1c8b4\">3cfe1c9</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/cblas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea4a44cefcbc6a82efab8a8b7809f40e28bf0773\">ea4a44c</a></td><td><code>Support different blas libraries</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75966fc0c32ffc918ff7a0cad60b7381f9b3fef5\">75966fc</a></td><td><code>Put cblas first</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/273bb93bd81c1165cd7206762c91073f47186bca\">273bb93</a></td><td><code>Make cblas pc module search configurable via sage_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6ff9ba9d929bb5aef409fdb5dafa321a33481dd\">e6ff9ba</a></td><td><code>Merge branch 'public/build/cblas' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fffea7a7a50dd8c79827a07d6ef4eb3568fc1817\">fffea7a</a></td><td><code>Install more dependencies</code></td></tr></table>\n",
    "created_at": "2020-10-21T07:01:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599385",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/001653810a3414bec154ef54fda8056a76a880e1">0016538</a></td><td><code>Merge branch 'public/build/inplace' of https://github.com/tobiasdiez/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d65d85e53898a5d1e39fa28494e898e85b3fe2ab">d65d85e</a></td><td><code>Update ci-pipenv.yml</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1b8aef563802d60c82683ddb88b193b148ccb36">c1b8aef</a></td><td><code>Merge branch 'public/build/inplace' of https://github.com/tobiasdiez/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23d17ad3f89536404bce4cb25c20ff0fde2b193b">23d17ad</a></td><td><code>Rename cblas to blas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cfe1c92ef838e8be27794355c05769f0fd1c8b4">3cfe1c9</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/cblas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea4a44cefcbc6a82efab8a8b7809f40e28bf0773">ea4a44c</a></td><td><code>Support different blas libraries</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75966fc0c32ffc918ff7a0cad60b7381f9b3fef5">75966fc</a></td><td><code>Put cblas first</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/273bb93bd81c1165cd7206762c91073f47186bca">273bb93</a></td><td><code>Make cblas pc module search configurable via sage_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6ff9ba9d929bb5aef409fdb5dafa321a33481dd">e6ff9ba</a></td><td><code>Merge branch 'public/build/cblas' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fffea7a7a50dd8c79827a07d6ef4eb3568fc1817">fffea7a</a></td><td><code>Install more dependencies</code></td></tr></table>




---

archive/issue_comments_599386.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709\" to \"#30779, #30672, #30673, #30709, #30706\".",
    "created_at": "2020-10-21T07:01:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599386",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709" to "#30779, #30672, #30673, #30709, #30706".



---

archive/issue_comments_599387.json:
```json
{
    "body": "**Changing commit** from \"[fffea7a7a50dd8c79827a07d6ef4eb3568fc1817](https://github.com/sagemath/sagetrac-mirror/commit/fffea7a7a50dd8c79827a07d6ef4eb3568fc1817)\" to \"[062746cad45c3c3edc9f0d905de8312df1c020ac](https://github.com/sagemath/sagetrac-mirror/commit/062746cad45c3c3edc9f0d905de8312df1c020ac)\".",
    "created_at": "2020-10-21T15:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599387",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fffea7a7a50dd8c79827a07d6ef4eb3568fc1817](https://github.com/sagemath/sagetrac-mirror/commit/fffea7a7a50dd8c79827a07d6ef4eb3568fc1817)" to "[062746cad45c3c3edc9f0d905de8312df1c020ac](https://github.com/sagemath/sagetrac-mirror/commit/062746cad45c3c3edc9f0d905de8312df1c020ac)".



---

archive/issue_comments_599388.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed74c46fdf5db6f3af63f183b7bcdb8e2250e3b5\">ed74c46</a></td><td><code>Fix powershell script</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88f452916945653168d58c11c4eb85edf7d52b86\">88f4529</a></td><td><code>Make powershell run</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4171062debcc8aa85d3a9e57d6384fef38a05156\">4171062</a></td><td><code>Cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfdc1c059dd9fa1f7273fb246962150fc04dedec\">bfdc1c0</a></td><td><code>Fix problem with libhomfly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bda21e36f695812db374154bef7f8c2d3b35547\">3bda21e</a></td><td><code>Fix arb lib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d476d5f115511fb9deb751b14fd40d8375aaec9\">3d476d5</a></td><td><code>Install more deps for macos (as recommended by configure)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4302ac956c8bcaae9dedb24169496cbb1fff5e3a\">4302ac9</a></td><td><code>Also install ecl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e34a6afbd0f071eb890fabb045b6ba3470d972f5\">e34a6af</a></td><td><code>Also install pynac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8679770f3b977eb5d30d4bf65f2a5f4167baa846\">8679770</a></td><td><code>Disable copying of sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/062746cad45c3c3edc9f0d905de8312df1c020ac\">062746c</a></td><td><code>Try with hard-coded version</code></td></tr></table>\n",
    "created_at": "2020-10-21T15:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599388",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed74c46fdf5db6f3af63f183b7bcdb8e2250e3b5">ed74c46</a></td><td><code>Fix powershell script</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88f452916945653168d58c11c4eb85edf7d52b86">88f4529</a></td><td><code>Make powershell run</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4171062debcc8aa85d3a9e57d6384fef38a05156">4171062</a></td><td><code>Cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfdc1c059dd9fa1f7273fb246962150fc04dedec">bfdc1c0</a></td><td><code>Fix problem with libhomfly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bda21e36f695812db374154bef7f8c2d3b35547">3bda21e</a></td><td><code>Fix arb lib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d476d5f115511fb9deb751b14fd40d8375aaec9">3d476d5</a></td><td><code>Install more deps for macos (as recommended by configure)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4302ac956c8bcaae9dedb24169496cbb1fff5e3a">4302ac9</a></td><td><code>Also install ecl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e34a6afbd0f071eb890fabb045b6ba3470d972f5">e34a6af</a></td><td><code>Also install pynac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8679770f3b977eb5d30d4bf65f2a5f4167baa846">8679770</a></td><td><code>Disable copying of sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/062746cad45c3c3edc9f0d905de8312df1c020ac">062746c</a></td><td><code>Try with hard-coded version</code></td></tr></table>




---

archive/issue_comments_599389.json:
```json
{
    "body": "<a id='comment:3'></a>\nI've now added github actions to have a reproducible test in a clean environment. The compilation is working now (under linux), but the singular library cannot be found during runtime. https://github.com/tobiasdiez/sage/runs/1287237342?check_suite_focus=true\n\nThe problem appears to be that sage is looking for singular in `sysconfig.get_config_var('LIBDIR')` (e.g. `/usr/local/lib`) but it is installed as `/usr/lib/x86_64-linux-gnu/libsingular-Singular.so`. Is there a reason why `LIBDIR` is used in `env.py` instead of the approach using `pkgconfig` as during compilation time?",
    "created_at": "2020-10-21T15:37:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599389",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:3'></a>
I've now added github actions to have a reproducible test in a clean environment. The compilation is working now (under linux), but the singular library cannot be found during runtime. https://github.com/tobiasdiez/sage/runs/1287237342?check_suite_focus=true

The problem appears to be that sage is looking for singular in `sysconfig.get_config_var('LIBDIR')` (e.g. `/usr/local/lib`) but it is installed as `/usr/lib/x86_64-linux-gnu/libsingular-Singular.so`. Is there a reason why `LIBDIR` is used in `env.py` instead of the approach using `pkgconfig` as during compilation time?



---

archive/issue_comments_599390.json:
```json
{
    "body": "<a id='comment:4'></a>\n`_get_shared_lib_filename` actually also looks in `MULTILIB` and is supposed to find this Debian-specific install location via this mechanism. But it is possible that this is broken because we currently actually do not use system `singular` (nor `gap`) at all (see #29644, #29024, meta-ticket #27330). This needs more investigation.",
    "created_at": "2020-10-21T18:40:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599390",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
`_get_shared_lib_filename` actually also looks in `MULTILIB` and is supposed to find this Debian-specific install location via this mechanism. But it is possible that this is broken because we currently actually do not use system `singular` (nor `gap`) at all (see #29644, #29024, meta-ticket #27330). This needs more investigation.



---

archive/issue_comments_599391.json:
```json
{
    "body": "<a id='comment:135'></a>\nReplying to [gh-tobiasdiez](#comment%3A133):\n> Is there a reason why `LIBDIR` is used in `env.py` instead of the approach using `pkgconfig` as during compilation time?\n\n\npkgconfig does not really reveal the libname directly, so one would need to parse `pkgconfig --libs`. \n\nAnother reason is that the .pc files are usually only available in \"dev\" packages. So the runtime of Sage should not depend on it. \n\n#29024 intends to make the location configurable (at build time!) via `sage_conf`.",
    "created_at": "2020-10-21T18:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599391",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:135'></a>
Replying to [gh-tobiasdiez](#comment%3A133):
> Is there a reason why `LIBDIR` is used in `env.py` instead of the approach using `pkgconfig` as during compilation time?


pkgconfig does not really reveal the libname directly, so one would need to parse `pkgconfig --libs`. 

Another reason is that the .pc files are usually only available in "dev" packages. So the runtime of Sage should not depend on it. 

#29024 intends to make the location configurable (at build time!) via `sage_conf`.



---

archive/issue_comments_599392.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38acc875ba6f723f109deca7603bed87b08ca4e2\">38acc87</a></td><td><code>Fix _get_shared_lib_filename to find singular</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94787d1d676cfa280c4743579af9e5db9eb5b2f7\">94787d1</a></td><td><code>Try to run without build-isolation (manual)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8afec5ad2682e200f1ef33fba4b1bc946d4418ff\">8afec5a</a></td><td><code>Try to set PIP_NO_BUILD_ISOLATION:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a321431e87b91b772f5d698b10826600ae3032dd\">a321431</a></td><td><code>Strange convention for PIP_NO variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7523baa68b46732cc381387e58ea1a9559c11e96\">7523baa</a></td><td><code>Cleanup</code></td></tr></table>\n",
    "created_at": "2020-10-25T09:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38acc875ba6f723f109deca7603bed87b08ca4e2">38acc87</a></td><td><code>Fix _get_shared_lib_filename to find singular</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94787d1d676cfa280c4743579af9e5db9eb5b2f7">94787d1</a></td><td><code>Try to run without build-isolation (manual)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8afec5ad2682e200f1ef33fba4b1bc946d4418ff">8afec5a</a></td><td><code>Try to set PIP_NO_BUILD_ISOLATION:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a321431e87b91b772f5d698b10826600ae3032dd">a321431</a></td><td><code>Strange convention for PIP_NO variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7523baa68b46732cc381387e58ea1a9559c11e96">7523baa</a></td><td><code>Cleanup</code></td></tr></table>




---

archive/issue_comments_599393.json:
```json
{
    "body": "**Changing commit** from \"[062746cad45c3c3edc9f0d905de8312df1c020ac](https://github.com/sagemath/sagetrac-mirror/commit/062746cad45c3c3edc9f0d905de8312df1c020ac)\" to \"[7523baa68b46732cc381387e58ea1a9559c11e96](https://github.com/sagemath/sagetrac-mirror/commit/7523baa68b46732cc381387e58ea1a9559c11e96)\".",
    "created_at": "2020-10-25T09:46:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[062746cad45c3c3edc9f0d905de8312df1c020ac](https://github.com/sagemath/sagetrac-mirror/commit/062746cad45c3c3edc9f0d905de8312df1c020ac)" to "[7523baa68b46732cc381387e58ea1a9559c11e96](https://github.com/sagemath/sagetrac-mirror/commit/7523baa68b46732cc381387e58ea1a9559c11e96)".



---

archive/issue_comments_599394.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks for the input. I had a closer look at `_get_shared_lib_filename` and the problem was that `libsingular-Singular.so` is in the subfolder `/usr/lib/x86_64-linux-gnu/` while `_get_shared_lib_filename` only searched the top folder `/usr/lib`. I've now changed it to also look in subfolders. That should be reasonable fix until #29024 is implemented.\n\nWith these changes, the github action workflow passes successful on linux: https://github.com/tobiasdiez/sage/runs/1303324520?check_suite_focus=true\nIt's nice to see that it only takes about 1 hour to have a fully workable sage environment.\n\nThis is now really ready for review.\n\nTODOs (for further tickets):\n- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.)\n- Run doctests in the github action as soon as they no longer rely on `SAGE_LOCAL` (#22731)",
    "created_at": "2020-10-25T10:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599394",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>
Thanks for the input. I had a closer look at `_get_shared_lib_filename` and the problem was that `libsingular-Singular.so` is in the subfolder `/usr/lib/x86_64-linux-gnu/` while `_get_shared_lib_filename` only searched the top folder `/usr/lib`. I've now changed it to also look in subfolders. That should be reasonable fix until #29024 is implemented.

With these changes, the github action workflow passes successful on linux: https://github.com/tobiasdiez/sage/runs/1303324520?check_suite_focus=true
It's nice to see that it only takes about 1 hour to have a fully workable sage environment.

This is now really ready for review.

TODOs (for further tickets):
- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.)
- Run doctests in the github action as soon as they no longer rely on `SAGE_LOCAL` (#22731)



---

archive/issue_comments_599395.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,16 +10,18 @@\n import sage.all\n ```\n It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.\n-Note: This probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL).\n+Note: This code probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL, and the github action for ubuntu 20.10).\n \n TODO (as followup tickets):\n - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.\n-- Automatically generate the `apt-get install` command with the necessary libraries (add them as `distros/debian.txt`?)\n+- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev.\n - Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`\n - Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.\n-- Automatically generate code in sage/ext/interpreters in `src/setup.py`. \n - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n+- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.)\n+- Run doctests in the github action as soon as they no longer rely on `SAGE_LOCAL` (#22731)\n+- Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/\n \n Previous tickets on in-place builds, editable installs:\n - #12659\n@@ -47,12 +49,6 @@\n \n - cysigs is broken, see https://github.com/sagemath/cysignals/issues/111. \n   To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).\n-- Generate `sage/ext/interpreters`: pipenv shell > python\n-\n-```\n-> import sage_setup.autogen\n-> sage_setup.autogen.autogen_all()\n-```\n \n \n \n``````\n",
    "created_at": "2020-10-25T10:14:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599395",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,16 +10,18 @@
 import sage.all
 ```
 It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.
-Note: This probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL).
+Note: This code probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL, and the github action for ubuntu 20.10).
 
 TODO (as followup tickets):
 - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.
-- Automatically generate the `apt-get install` command with the necessary libraries (add them as `distros/debian.txt`?)
+- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev.
 - Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`
 - Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.
-- Automatically generate code in sage/ext/interpreters in `src/setup.py`. 
 - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
 - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
+- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.)
+- Run doctests in the github action as soon as they no longer rely on `SAGE_LOCAL` (#22731)
+- Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/
 
 Previous tickets on in-place builds, editable installs:
 - #12659
@@ -47,12 +49,6 @@
 
 - cysigs is broken, see https://github.com/sagemath/cysignals/issues/111. 
   To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).
-- Generate `sage/ext/interpreters`: pipenv shell > python
-
-```
-> import sage_setup.autogen
-> sage_setup.autogen.autogen_all()
-```
 
 
 
``````




---

archive/issue_comments_599396.json:
```json
{
    "body": "<a id='comment:139'></a>\nReplying to [gh-tobiasdiez](#comment%3A137):\n> Thanks for the input. I had a closer look at `_get_shared_lib_filename` and the problem was that `libsingular-Singular.so` is in the subfolder `/usr/lib/x86_64-linux-gnu/` while `_get_shared_lib_filename` only searched the top folder `/usr/lib`. I've now changed it to also look in subfolders. \n\n\nThis should have been taking care of by `MULTILIB`. Is this not configured in your system?",
    "created_at": "2020-10-25T15:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599396",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:139'></a>
Replying to [gh-tobiasdiez](#comment%3A137):
> Thanks for the input. I had a closer look at `_get_shared_lib_filename` and the problem was that `libsingular-Singular.so` is in the subfolder `/usr/lib/x86_64-linux-gnu/` while `_get_shared_lib_filename` only searched the top folder `/usr/lib`. I've now changed it to also look in subfolders. 


This should have been taking care of by `MULTILIB`. Is this not configured in your system?



---

archive/issue_comments_599397.json:
```json
{
    "body": "<a id='comment:0'></a>\n`MULTILIB` is empty on my system (WSL Ubuntu 20.04), nor was it working for the github actions (Ubuntu 20.10).",
    "created_at": "2020-10-25T16:37:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599397",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:0'></a>
`MULTILIB` is empty on my system (WSL Ubuntu 20.04), nor was it working for the github actions (Ubuntu 20.10).



---

archive/issue_comments_599398.json:
```json
{
    "body": "<a id='comment:1'></a>\nCan you show the full output of `python3 -m sysconfig` on this system?",
    "created_at": "2020-10-25T17:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599398",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Can you show the full output of `python3 -m sysconfig` on this system?



---

archive/issue_comments_599399.json:
```json
{
    "body": "<a id='comment:2'></a>\n\n```\nPlatform: \"linux-x86_64\"\nPython version: \"3.8\"\nCurrent installation scheme: \"posix_prefix\"\n\nPaths: \n        data = \"/mnt/d/Programming/Projects/sage/src/.venv\"\n        include = \"/usr/include/python3.8\"\n        platinclude = \"/usr/include/python3.8\"\n        platlib = \"/mnt/d/Programming/Projects/sage/src/.venv/lib/python3.8/site-packages\"\n        platstdlib = \"/mnt/d/Programming/Projects/sage/src/.venv/lib/python3.8\"\n        purelib = \"/mnt/d/Programming/Projects/sage/src/.venv/lib/python3.8/site-packages\"\n        scripts = \"/mnt/d/Programming/Projects/sage/src/.venv/bin\"\n        stdlib = \"/usr/lib/python3.8\"\n\nVariables: \n        ABIFLAGS = \"\"\n        AC_APPLE_UNIVERSAL_BUILD = \"0\"\n        AIX_GENUINE_CPLUSPLUS = \"0\"\n        ALT_SOABI = \"0\"\n        ANDROID_API_LEVEL = \"0\"\n        AR = \"x86_64-linux-gnu-gcc-ar\"\n        ARFLAGS = \"rcs\"\n        BASECFLAGS = \"-Wno-unused-result -Wsign-compare\"\n        BASECPPFLAGS = \"-IObjects -IInclude -IPython\"\n        BASEMODLIBS = \"\"\n        BINDIR = \"/usr/bin\"\n        BINLIBDEST = \"/usr/lib/python3.8\"\n        BLDLIBRARY = \"-lpython3.8\"\n        BLDSHARED = \"x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   \"\n        BUILDEXE = \"\"\n        BUILDPYTHON = \"python\"\n        BUILD_GNU_TYPE = \"x86_64-pc-linux-gnu\"\n        BYTESTR_DEPS = \"\\\"\n        CC = \"x86_64-linux-gnu-gcc -pthread\"\n        CCSHARED = \"-fPIC\"\n        CFLAGS = \"-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2   \"\n        CFLAGSFORSHARED = \"-fPIC\"\n        CFLAGS_ALIASING = \"\"\n        CFLAGS_NODIST = \"\"\n        CONFIGFILES = \"configure configure.ac acconfig.h pyconfig.h.in Makefile.pre.in\"\n        CONFIGURE_CFLAGS = \"-g   -fstack-protector-strong -Wformat -Werror=format-security\"\n        CONFIGURE_CFLAGS_NODIST = \"-std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration\"\n        CONFIGURE_CPPFLAGS = \"-Wdate-time -D_FORTIFY_SOURCE=2\"\n        CONFIGURE_LDFLAGS = \"-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   \"\n        CONFIGURE_LDFLAGS_NODIST = \"\"\n        CONFIG_ARGS = \"'--enable-shared' '--prefix=/usr' '--enable-ipv6' '--enable-loadable-sqlite-extensions' '--with-dbmliborder=bdb:gdbm' '--with-computed-gotos' '--without-ensurepip' '--with-system-expat' '--with-system-libmpdec' '--with-dtrace' '--with-system-ffi' 'CC=x86_64-linux-gnu-gcc' 'CFLAGS=-g   -fstack-protector-strong -Wformat -Werror=format-security ' 'LDFLAGS=-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   ' 'CPPFLAGS=-Wdate-time -D_FORTIFY_SOURCE=2'\"\n        CONFINCLUDEDIR = \"/usr/include\"\n        CONFINCLUDEPY = \"/usr/include/python3.8\"\n        COREPYTHONPATH = \"\"\n        COVERAGE_INFO = \"/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared/coverage.info\"\n        COVERAGE_REPORT = \"/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared/lcov-report\"\n        COVERAGE_REPORT_OPTIONS = \"--no-branch-coverage --title \"CPython lcov report\"\"\n        CPPFLAGS = \"-IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2\"\n        CXX = \"x86_64-linux-gnu-g++ -pthread\"\n        DESTDIRS = \"/usr /usr/lib /usr/lib/python3.8 /usr/lib/python3.8/lib-dynload\"\n        DESTLIB = \"/usr/lib/python3.8\"\n        DESTPATH = \"\"\n        DESTSHARED = \"/usr/lib/python3.8/lib-dynload\"\n        DFLAGS = \"\"\n        DIRMODE = \"755\"\n        DIST = \"README.rst ChangeLog configure configure.ac acconfig.h pyconfig.h.in Makefile.pre.in Include Lib Misc Ext-dummy\"\n        DISTDIRS = \"Include Lib Misc Ext-dummy\"\n        DISTFILES = \"README.rst ChangeLog configure configure.ac acconfig.h pyconfig.h.in Makefile.pre.in\"\n        DLINCLDIR = \".\"\n        DLLLIBRARY = \"\"\n        DOUBLE_IS_ARM_MIXED_ENDIAN_IEEE754 = \"0\"\n        DOUBLE_IS_BIG_ENDIAN_IEEE754 = \"0\"\n        DOUBLE_IS_LITTLE_ENDIAN_IEEE754 = \"1\"\n        DTRACE = \"/usr/bin/dtrace\"\n        DTRACE_DEPS = \"\\\"\n        DTRACE_HEADERS = \"Include/pydtrace_probes.h\"\n        DTRACE_OBJS = \"Python/pydtrace.o\"\n        DYNLOADFILE = \"dynload_shlib.o\"\n        ENABLE_IPV6 = \"1\"\n        ENSUREPIP = \"no\"\n        EXE = \"\"\n        EXEMODE = \"755\"\n        EXTRATESTOPTS = \"\"\n        EXT_SUFFIX = \".cpython-38-x86_64-linux-gnu.so\"\n        FILEMODE = \"644\"\n        FLOAT_WORDS_BIGENDIAN = \"0\"\n        FLOCK_NEEDS_LIBBSD = \"0\"\n        GETPGRP_HAVE_ARG = \"0\"\n        GETTIMEOFDAY_NO_TZ = \"0\"\n        GITBRANCH = \"\"\n        GITTAG = \"\"\n        GITVERSION = \"\"\n        GNULD = \"yes\"\n        HAVE_ACCEPT4 = \"1\"\n        HAVE_ACOSH = \"1\"\n        HAVE_ADDRINFO = \"1\"\n        HAVE_ALARM = \"1\"\n        HAVE_ALIGNED_REQUIRED = \"0\"\n        HAVE_ALLOCA_H = \"1\"\n        HAVE_ALTZONE = \"0\"\n        HAVE_ASINH = \"1\"\n        HAVE_ASM_TYPES_H = \"1\"\n        HAVE_ATANH = \"1\"\n        HAVE_BIND_TEXTDOMAIN_CODESET = \"1\"\n        HAVE_BLUETOOTH_BLUETOOTH_H = \"1\"\n        HAVE_BLUETOOTH_H = \"0\"\n        HAVE_BROKEN_MBSTOWCS = \"0\"\n        HAVE_BROKEN_NICE = \"0\"\n        HAVE_BROKEN_PIPE_BUF = \"0\"\n        HAVE_BROKEN_POLL = \"0\"\n        HAVE_BROKEN_POSIX_SEMAPHORES = \"0\"\n        HAVE_BROKEN_PTHREAD_SIGMASK = \"0\"\n        HAVE_BROKEN_SEM_GETVALUE = \"0\"\n        HAVE_BROKEN_UNSETENV = \"0\"\n        HAVE_BUILTIN_ATOMIC = \"1\"\n        HAVE_CHFLAGS = \"0\"\n        HAVE_CHOWN = \"1\"\n        HAVE_CHROOT = \"1\"\n        HAVE_CLOCK = \"1\"\n        HAVE_CLOCK_GETRES = \"1\"\n        HAVE_CLOCK_GETTIME = \"1\"\n        HAVE_CLOCK_SETTIME = \"1\"\n        HAVE_COMPUTED_GOTOS = \"1\"\n        HAVE_CONFSTR = \"1\"\n        HAVE_CONIO_H = \"0\"\n        HAVE_COPYSIGN = \"1\"\n        HAVE_COPY_FILE_RANGE = \"1\"\n        HAVE_CRYPT_H = \"1\"\n        HAVE_CRYPT_R = \"1\"\n        HAVE_CTERMID = \"1\"\n        HAVE_CTERMID_R = \"0\"\n        HAVE_CURSES_FILTER = \"1\"\n        HAVE_CURSES_H = \"1\"\n        HAVE_CURSES_HAS_KEY = \"1\"\n        HAVE_CURSES_IMMEDOK = \"1\"\n        HAVE_CURSES_IS_PAD = \"1\"\n        HAVE_CURSES_IS_TERM_RESIZED = \"1\"\n        HAVE_CURSES_RESIZETERM = \"1\"\n        HAVE_CURSES_RESIZE_TERM = \"1\"\n        HAVE_CURSES_SYNCOK = \"1\"\n        HAVE_CURSES_TYPEAHEAD = \"1\"\n        HAVE_CURSES_USE_ENV = \"1\"\n        HAVE_CURSES_WCHGAT = \"1\"\n        HAVE_DECL_ISFINITE = \"1\"\n        HAVE_DECL_ISINF = \"1\"\n        HAVE_DECL_ISNAN = \"1\"\n        HAVE_DECL_RTLD_DEEPBIND = \"1\"\n        HAVE_DECL_RTLD_GLOBAL = \"1\"\n        HAVE_DECL_RTLD_LAZY = \"1\"\n        HAVE_DECL_RTLD_LOCAL = \"1\"\n        HAVE_DECL_RTLD_MEMBER = \"0\"\n        HAVE_DECL_RTLD_NODELETE = \"1\"\n        HAVE_DECL_RTLD_NOLOAD = \"1\"\n        HAVE_DECL_RTLD_NOW = \"1\"\n        HAVE_DECL_TZNAME = \"0\"\n        HAVE_DEVICE_MACROS = \"1\"\n        HAVE_DEV_PTC = \"0\"\n        HAVE_DEV_PTMX = \"1\"\n        HAVE_DIRECT_H = \"0\"\n        HAVE_DIRENT_D_TYPE = \"1\"\n        HAVE_DIRENT_H = \"1\"\n        HAVE_DIRFD = \"1\"\n        HAVE_DLFCN_H = \"1\"\n        HAVE_DLOPEN = \"1\"\n        HAVE_DUP2 = \"1\"\n        HAVE_DUP3 = \"1\"\n        HAVE_DYNAMIC_LOADING = \"1\"\n        HAVE_ENDIAN_H = \"1\"\n        HAVE_EPOLL = \"1\"\n        HAVE_EPOLL_CREATE1 = \"1\"\n        HAVE_ERF = \"1\"\n        HAVE_ERFC = \"1\"\n        HAVE_ERRNO_H = \"1\"\n        HAVE_EXECV = \"1\"\n        HAVE_EXPLICIT_BZERO = \"1\"\n        HAVE_EXPLICIT_MEMSET = \"0\"\n        HAVE_EXPM1 = \"1\"\n        HAVE_FACCESSAT = \"1\"\n        HAVE_FCHDIR = \"1\"\n        HAVE_FCHMOD = \"1\"\n        HAVE_FCHMODAT = \"1\"\n        HAVE_FCHOWN = \"1\"\n        HAVE_FCHOWNAT = \"1\"\n        HAVE_FCNTL_H = \"1\"\n        HAVE_FDATASYNC = \"1\"\n        HAVE_FDOPENDIR = \"1\"\n        HAVE_FDWALK = \"0\"\n        HAVE_FEXECVE = \"1\"\n        HAVE_FINITE = \"1\"\n        HAVE_FLOCK = \"1\"\n        HAVE_FORK = \"1\"\n        HAVE_FORKPTY = \"1\"\n        HAVE_FPATHCONF = \"1\"\n        HAVE_FSEEK64 = \"0\"\n        HAVE_FSEEKO = \"1\"\n        HAVE_FSTATAT = \"1\"\n        HAVE_FSTATVFS = \"1\"\n        HAVE_FSYNC = \"1\"\n        HAVE_FTELL64 = \"0\"\n        HAVE_FTELLO = \"1\"\n        HAVE_FTIME = \"1\"\n        HAVE_FTRUNCATE = \"1\"\n        HAVE_FUTIMENS = \"1\"\n        HAVE_FUTIMES = \"1\"\n        HAVE_FUTIMESAT = \"1\"\n        HAVE_GAI_STRERROR = \"1\"\n        HAVE_GAMMA = \"1\"\n        HAVE_GCC_ASM_FOR_MC68881 = \"0\"\n        HAVE_GCC_ASM_FOR_X64 = \"1\"\n        HAVE_GCC_ASM_FOR_X87 = \"1\"\n        HAVE_GCC_UINT128_T = \"1\"\n        HAVE_GETADDRINFO = \"1\"\n        HAVE_GETC_UNLOCKED = \"1\"\n        HAVE_GETENTROPY = \"1\"\n        HAVE_GETGRGID_R = \"1\"\n        HAVE_GETGRNAM_R = \"1\"\n        HAVE_GETGROUPLIST = \"1\"\n        HAVE_GETGROUPS = \"1\"\n        HAVE_GETHOSTBYNAME = \"0\"\n        HAVE_GETHOSTBYNAME_R = \"1\"\n        HAVE_GETHOSTBYNAME_R_3_ARG = \"0\"\n        HAVE_GETHOSTBYNAME_R_5_ARG = \"0\"\n        HAVE_GETHOSTBYNAME_R_6_ARG = \"1\"\n        HAVE_GETITIMER = \"1\"\n        HAVE_GETLOADAVG = \"1\"\n        HAVE_GETLOGIN = \"1\"\n        HAVE_GETNAMEINFO = \"1\"\n        HAVE_GETPAGESIZE = \"1\"\n        HAVE_GETPEERNAME = \"1\"\n        HAVE_GETPGID = \"1\"\n        HAVE_GETPGRP = \"1\"\n        HAVE_GETPID = \"1\"\n        HAVE_GETPRIORITY = \"1\"\n        HAVE_GETPWENT = \"1\"\n        HAVE_GETPWNAM_R = \"1\"\n        HAVE_GETPWUID_R = \"1\"\n        HAVE_GETRANDOM = \"1\"\n        HAVE_GETRANDOM_SYSCALL = \"1\"\n        HAVE_GETRESGID = \"1\"\n        HAVE_GETRESUID = \"1\"\n        HAVE_GETSID = \"1\"\n        HAVE_GETSPENT = \"1\"\n        HAVE_GETSPNAM = \"1\"\n        HAVE_GETTIMEOFDAY = \"1\"\n        HAVE_GETWD = \"1\"\n        HAVE_GLIBC_MEMMOVE_BUG = \"0\"\n        HAVE_GRP_H = \"1\"\n        HAVE_HSTRERROR = \"1\"\n        HAVE_HTOLE64 = \"1\"\n        HAVE_HYPOT = \"1\"\n        HAVE_IEEEFP_H = \"0\"\n        HAVE_IF_NAMEINDEX = \"1\"\n        HAVE_INET_ATON = \"1\"\n        HAVE_INET_PTON = \"1\"\n        HAVE_INITGROUPS = \"1\"\n        HAVE_INTTYPES_H = \"1\"\n        HAVE_IO_H = \"0\"\n        HAVE_IPA_PURE_CONST_BUG = \"0\"\n        HAVE_KILL = \"1\"\n        HAVE_KILLPG = \"1\"\n        HAVE_KQUEUE = \"0\"\n        HAVE_LANGINFO_H = \"1\"\n        HAVE_LARGEFILE_SUPPORT = \"0\"\n        HAVE_LCHFLAGS = \"0\"\n        HAVE_LCHMOD = \"0\"\n        HAVE_LCHOWN = \"1\"\n        HAVE_LGAMMA = \"1\"\n        HAVE_LIBDL = \"1\"\n        HAVE_LIBDLD = \"0\"\n        HAVE_LIBIEEE = \"0\"\n        HAVE_LIBINTL_H = \"1\"\n        HAVE_LIBREADLINE = \"1\"\n        HAVE_LIBRESOLV = \"0\"\n        HAVE_LIBSENDFILE = \"0\"\n        HAVE_LIBUTIL_H = \"0\"\n        HAVE_LINK = \"1\"\n        HAVE_LINKAT = \"1\"\n        HAVE_LINUX_CAN_BCM_H = \"1\"\n        HAVE_LINUX_CAN_H = \"1\"\n        HAVE_LINUX_CAN_RAW_FD_FRAMES = \"1\"\n        HAVE_LINUX_CAN_RAW_H = \"1\"\n        HAVE_LINUX_MEMFD_H = \"1\"\n        HAVE_LINUX_NETLINK_H = \"1\"\n        HAVE_LINUX_QRTR_H = \"1\"\n        HAVE_LINUX_RANDOM_H = \"1\"\n        HAVE_LINUX_TIPC_H = \"1\"\n        HAVE_LINUX_VM_SOCKETS_H = \"1\"\n        HAVE_LOCKF = \"1\"\n        HAVE_LOG1P = \"1\"\n        HAVE_LOG2 = \"1\"\n        HAVE_LONG_DOUBLE = \"1\"\n        HAVE_LSTAT = \"1\"\n        HAVE_LUTIMES = \"1\"\n        HAVE_MADVISE = \"1\"\n        HAVE_MAKEDEV = \"1\"\n        HAVE_MBRTOWC = \"1\"\n        HAVE_MEMFD_CREATE = \"1\"\n        HAVE_MEMORY_H = \"1\"\n        HAVE_MEMRCHR = \"1\"\n        HAVE_MKDIRAT = \"1\"\n        HAVE_MKFIFO = \"1\"\n        HAVE_MKFIFOAT = \"1\"\n        HAVE_MKNOD = \"1\"\n        HAVE_MKNODAT = \"1\"\n        HAVE_MKTIME = \"1\"\n        HAVE_MMAP = \"1\"\n        HAVE_MREMAP = \"1\"\n        HAVE_NCURSES_H = \"1\"\n        HAVE_NDIR_H = \"0\"\n        HAVE_NETPACKET_PACKET_H = \"1\"\n        HAVE_NET_IF_H = \"1\"\n        HAVE_NICE = \"1\"\n        HAVE_OPENAT = \"1\"\n        HAVE_OPENPTY = \"1\"\n        HAVE_PATHCONF = \"1\"\n        HAVE_PAUSE = \"1\"\n        HAVE_PIPE2 = \"1\"\n        HAVE_PLOCK = \"0\"\n        HAVE_POLL = \"1\"\n        HAVE_POLL_H = \"1\"\n        HAVE_POSIX_FADVISE = \"1\"\n        HAVE_POSIX_FALLOCATE = \"1\"\n        HAVE_POSIX_SPAWN = \"1\"\n        HAVE_POSIX_SPAWNP = \"1\"\n        HAVE_PREAD = \"1\"\n        HAVE_PREADV = \"1\"\n        HAVE_PREADV2 = \"1\"\n        HAVE_PRLIMIT = \"1\"\n        HAVE_PROCESS_H = \"0\"\n        HAVE_PROTOTYPES = \"1\"\n        HAVE_PTHREAD_CONDATTR_SETCLOCK = \"1\"\n        HAVE_PTHREAD_DESTRUCTOR = \"0\"\n        HAVE_PTHREAD_GETCPUCLOCKID = \"1\"\n        HAVE_PTHREAD_H = \"1\"\n        HAVE_PTHREAD_INIT = \"0\"\n        HAVE_PTHREAD_KILL = \"1\"\n        HAVE_PTHREAD_SIGMASK = \"1\"\n        HAVE_PTY_H = \"1\"\n        HAVE_PUTENV = \"1\"\n        HAVE_PWRITE = \"1\"\n        HAVE_PWRITEV = \"1\"\n        HAVE_PWRITEV2 = \"1\"\n        HAVE_READLINK = \"1\"\n        HAVE_READLINKAT = \"1\"\n        HAVE_READV = \"1\"\n        HAVE_REALPATH = \"1\"\n        HAVE_RENAMEAT = \"1\"\n        HAVE_RL_APPEND_HISTORY = \"1\"\n        HAVE_RL_CATCH_SIGNAL = \"1\"\n        HAVE_RL_COMPLETION_APPEND_CHARACTER = \"1\"\n        HAVE_RL_COMPLETION_DISPLAY_MATCHES_HOOK = \"1\"\n        HAVE_RL_COMPLETION_MATCHES = \"1\"\n        HAVE_RL_COMPLETION_SUPPRESS_APPEND = \"1\"\n        HAVE_RL_PRE_INPUT_HOOK = \"1\"\n        HAVE_RL_RESIZE_TERMINAL = \"1\"\n        HAVE_ROUND = \"1\"\n        HAVE_RTPSPAWN = \"0\"\n        HAVE_SCHED_GET_PRIORITY_MAX = \"1\"\n        HAVE_SCHED_H = \"1\"\n        HAVE_SCHED_RR_GET_INTERVAL = \"1\"\n        HAVE_SCHED_SETAFFINITY = \"1\"\n        HAVE_SCHED_SETPARAM = \"1\"\n        HAVE_SCHED_SETSCHEDULER = \"1\"\n        HAVE_SEM_GETVALUE = \"1\"\n        HAVE_SEM_OPEN = \"1\"\n        HAVE_SEM_TIMEDWAIT = \"1\"\n        HAVE_SEM_UNLINK = \"1\"\n        HAVE_SENDFILE = \"1\"\n        HAVE_SETEGID = \"1\"\n        HAVE_SETEUID = \"1\"\n        HAVE_SETGID = \"1\"\n        HAVE_SETGROUPS = \"1\"\n        HAVE_SETHOSTNAME = \"1\"\n        HAVE_SETITIMER = \"1\"\n        HAVE_SETLOCALE = \"1\"\n        HAVE_SETPGID = \"1\"\n        HAVE_SETPGRP = \"1\"\n        HAVE_SETPRIORITY = \"1\"\n        HAVE_SETREGID = \"1\"\n        HAVE_SETRESGID = \"1\"\n        HAVE_SETRESUID = \"1\"\n        HAVE_SETREUID = \"1\"\n        HAVE_SETSID = \"1\"\n        HAVE_SETUID = \"1\"\n        HAVE_SETVBUF = \"1\"\n        HAVE_SHADOW_H = \"1\"\n        HAVE_SHM_OPEN = \"1\"\n        HAVE_SHM_UNLINK = \"1\"\n        HAVE_SIGACTION = \"1\"\n        HAVE_SIGALTSTACK = \"1\"\n        HAVE_SIGFILLSET = \"1\"\n        HAVE_SIGINFO_T_SI_BAND = \"1\"\n        HAVE_SIGINTERRUPT = \"1\"\n        HAVE_SIGNAL_H = \"1\"\n        HAVE_SIGPENDING = \"1\"\n        HAVE_SIGRELSE = \"1\"\n        HAVE_SIGTIMEDWAIT = \"1\"\n        HAVE_SIGWAIT = \"1\"\n        HAVE_SIGWAITINFO = \"1\"\n        HAVE_SNPRINTF = \"1\"\n        HAVE_SOCKADDR_ALG = \"1\"\n        HAVE_SOCKADDR_SA_LEN = \"0\"\n        HAVE_SOCKADDR_STORAGE = \"1\"\n        HAVE_SOCKETPAIR = \"1\"\n        HAVE_SPAWN_H = \"1\"\n        HAVE_SSIZE_T = \"1\"\n        HAVE_STATVFS = \"1\"\n        HAVE_STAT_TV_NSEC = \"1\"\n        HAVE_STAT_TV_NSEC2 = \"0\"\n        HAVE_STDARG_PROTOTYPES = \"1\"\n        HAVE_STDINT_H = \"1\"\n        HAVE_STDLIB_H = \"1\"\n        HAVE_STD_ATOMIC = \"1\"\n        HAVE_STRDUP = \"1\"\n        HAVE_STRFTIME = \"1\"\n        HAVE_STRINGS_H = \"1\"\n        HAVE_STRING_H = \"1\"\n        HAVE_STRLCPY = \"0\"\n        HAVE_STROPTS_H = \"0\"\n        HAVE_STRSIGNAL = \"1\"\n        HAVE_STRUCT_PASSWD_PW_GECOS = \"1\"\n        HAVE_STRUCT_PASSWD_PW_PASSWD = \"1\"\n        HAVE_STRUCT_STAT_ST_BIRTHTIME = \"0\"\n        HAVE_STRUCT_STAT_ST_BLKSIZE = \"1\"\n        HAVE_STRUCT_STAT_ST_BLOCKS = \"1\"\n        HAVE_STRUCT_STAT_ST_FLAGS = \"0\"\n        HAVE_STRUCT_STAT_ST_GEN = \"0\"\n        HAVE_STRUCT_STAT_ST_RDEV = \"1\"\n        HAVE_STRUCT_TM_TM_ZONE = \"1\"\n        HAVE_SYMLINK = \"1\"\n        HAVE_SYMLINKAT = \"1\"\n        HAVE_SYNC = \"1\"\n        HAVE_SYSCONF = \"1\"\n        HAVE_SYSEXITS_H = \"1\"\n        HAVE_SYS_AUDIOIO_H = \"0\"\n        HAVE_SYS_BSDTTY_H = \"0\"\n        HAVE_SYS_DEVPOLL_H = \"0\"\n        HAVE_SYS_DIR_H = \"0\"\n        HAVE_SYS_ENDIAN_H = \"0\"\n        HAVE_SYS_EPOLL_H = \"1\"\n        HAVE_SYS_EVENT_H = \"0\"\n        HAVE_SYS_FILE_H = \"1\"\n        HAVE_SYS_IOCTL_H = \"1\"\n        HAVE_SYS_KERN_CONTROL_H = \"0\"\n        HAVE_SYS_LOADAVG_H = \"0\"\n        HAVE_SYS_LOCK_H = \"0\"\n        HAVE_SYS_MEMFD_H = \"0\"\n        HAVE_SYS_MKDEV_H = \"0\"\n        HAVE_SYS_MMAN_H = \"1\"\n        HAVE_SYS_MODEM_H = \"0\"\n        HAVE_SYS_NDIR_H = \"0\"\n        HAVE_SYS_PARAM_H = \"1\"\n        HAVE_SYS_POLL_H = \"1\"\n        HAVE_SYS_RANDOM_H = \"1\"\n        HAVE_SYS_RESOURCE_H = \"1\"\n        HAVE_SYS_SELECT_H = \"1\"\n        HAVE_SYS_SENDFILE_H = \"1\"\n        HAVE_SYS_SOCKET_H = \"1\"\n        HAVE_SYS_STATVFS_H = \"1\"\n        HAVE_SYS_STAT_H = \"1\"\n        HAVE_SYS_SYSCALL_H = \"1\"\n        HAVE_SYS_SYSMACROS_H = \"1\"\n        HAVE_SYS_SYS_DOMAIN_H = \"0\"\n        HAVE_SYS_TERMIO_H = \"0\"\n        HAVE_SYS_TIMES_H = \"1\"\n        HAVE_SYS_TIME_H = \"1\"\n        HAVE_SYS_TYPES_H = \"1\"\n        HAVE_SYS_UIO_H = \"1\"\n        HAVE_SYS_UN_H = \"1\"\n        HAVE_SYS_UTSNAME_H = \"1\"\n        HAVE_SYS_WAIT_H = \"1\"\n        HAVE_SYS_XATTR_H = \"1\"\n        HAVE_TCGETPGRP = \"1\"\n        HAVE_TCSETPGRP = \"1\"\n        HAVE_TEMPNAM = \"1\"\n        HAVE_TERMIOS_H = \"1\"\n        HAVE_TERM_H = \"1\"\n        HAVE_TGAMMA = \"1\"\n        HAVE_TIMEGM = \"1\"\n        HAVE_TIMES = \"1\"\n        HAVE_TMPFILE = \"1\"\n        HAVE_TMPNAM = \"1\"\n        HAVE_TMPNAM_R = \"1\"\n        HAVE_TM_ZONE = \"1\"\n        HAVE_TRUNCATE = \"1\"\n        HAVE_TZNAME = \"0\"\n        HAVE_UCS4_TCL = \"0\"\n        HAVE_UNAME = \"1\"\n        HAVE_UNISTD_H = \"1\"\n        HAVE_UNLINKAT = \"1\"\n        HAVE_UNSETENV = \"1\"\n        HAVE_USABLE_WCHAR_T = \"0\"\n        HAVE_UTIL_H = \"0\"\n        HAVE_UTIMENSAT = \"1\"\n        HAVE_UTIMES = \"1\"\n        HAVE_UTIME_H = \"1\"\n        HAVE_UUID_CREATE = \"0\"\n        HAVE_UUID_ENC_BE = \"0\"\n        HAVE_UUID_GENERATE_TIME_SAFE = \"1\"\n        HAVE_UUID_H = \"0\"\n        HAVE_UUID_UUID_H = \"1\"\n        HAVE_WAIT3 = \"1\"\n        HAVE_WAIT4 = \"1\"\n        HAVE_WAITID = \"1\"\n        HAVE_WAITPID = \"1\"\n        HAVE_WCHAR_H = \"1\"\n        HAVE_WCSCOLL = \"1\"\n        HAVE_WCSFTIME = \"1\"\n        HAVE_WCSXFRM = \"1\"\n        HAVE_WMEMCMP = \"1\"\n        HAVE_WORKING_TZSET = \"1\"\n        HAVE_WRITEV = \"1\"\n        HAVE_X509_VERIFY_PARAM_SET1_HOST = \"1\"\n        HAVE_ZLIB_COPY = \"1\"\n        HAVE__GETPTY = \"0\"\n        HOST_GNU_TYPE = \"x86_64-pc-linux-gnu\"\n        INCLDIRSTOMAKE = \"/usr/include /usr/include /usr/include/python3.8 /usr/include/python3.8\"\n        INCLUDEDIR = \"/usr/include\"\n        INCLUDEPY = \"/usr/include/python3.8\"\n        INSTALL = \"/usr/bin/install -c\"\n        INSTALL_DATA = \"/usr/bin/install -c -m 644\"\n        INSTALL_PROGRAM = \"/usr/bin/install -c\"\n        INSTALL_SCRIPT = \"/usr/bin/install -c\"\n        INSTALL_SHARED = \"/usr/bin/install -c -m 755\"\n        INSTSONAME = \"libpython3.8.so.1.0\"\n        IO_H = \"Modules/_io/_iomodule.h\"\n        IO_OBJS = \"\\\"\n        LDCXXSHARED = \"x86_64-linux-gnu-g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions\"\n        LDFLAGS = \"-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   \"\n        LDFLAGS_NODIST = \"\"\n        LDLIBRARY = \"libpython3.8.so\"\n        LDLIBRARYDIR = \"\"\n        LDSHARED = \"x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   \"\n        LDVERSION = \"3.8\"\n        LIBC = \"\"\n        LIBDEST = \"/usr/lib/python3.8\"\n        LIBDIR = \"/usr/lib\"\n        LIBFFI_INCLUDEDIR = \"\"\n        LIBM = \"-lm\"\n        LIBOBJDIR = \"Python/\"\n        LIBOBJS = \"\"\n        LIBPC = \"/usr/lib/x86_64-linux-gnu/pkgconfig\"\n        LIBPL = \"/usr/lib/python3.8/config-3.8-x86_64-linux-gnu\"\n        LIBPYTHON = \"\"\n        LIBRARY = \"libpython3.8.a\"\n        LIBRARY_OBJS = \"\\\"\n        LIBRARY_OBJS_OMIT_FROZEN = \"\\\"\n        LIBS = \"-lcrypt -lpthread -ldl  -lutil -lm\"\n        LIBSUBDIRS = \"tkinter tkinter/test tkinter/test/test_tkinter \\\"\n        LINKCC = \"x86_64-linux-gnu-gcc -pthread\"\n        LINKFORSHARED = \"-Xlinker -export-dynamic -Wl,-O1 -Wl,-Bsymbolic-functions\"\n        LIPO_32BIT_FLAGS = \"\"\n        LLVM_PROF_ERR = \"no\"\n        LLVM_PROF_FILE = \"\"\n        LLVM_PROF_MERGER = \"true\"\n        LN = \"ln\"\n        LOCALMODLIBS = \"-lexpat                       -L/usr/lib -lz                       -lexpat\"\n        MACHDEP = \"linux\"\n        MACHDEP_OBJS = \"\"\n        MACHDESTLIB = \"/usr/lib/python3.8\"\n        MACOSX_DEPLOYMENT_TARGET = \"\"\n        MAINCC = \"x86_64-linux-gnu-gcc -pthread\"\n        MAJOR_IN_MKDEV = \"0\"\n        MAJOR_IN_SYSMACROS = \"1\"\n        MAKESETUP = \"../Modules/makesetup\"\n        MANDIR = \"/usr/share/man\"\n        MKDIR_P = \"/bin/mkdir -p\"\n        MODBUILT_NAMES = \"array  cmath  math  _struct  _random  _elementtree  _pickle  _datetime  _bisect  _heapq  _statistics  unicodedata  fcntl  spwd  grp  select  _csv  _socket  _posixsubprocess  _md5  _sha1  _sha256  _sha512  _sha3  _blake2  syslog  binascii  zlib  posix  errno  pwd  _sre  _codecs  _weakref  _functools  _operator  _collections  _abc  itertools  atexit  _signal  _stat  time  _thread  _locale  _io  faulthandler  _tracemalloc  _symtable  pyexpat  xxsubtype\"\n        MODDISABLED_NAMES = \"\"\n        MODLIBS = \"-lexpat                       -L/usr/lib -lz                       -lexpat\"\n        MODOBJS = \"$(sort   Modules/arraymodule.o  Modules/cmathmodule.o Modules/_math.o  Modules/mathmodule.o Modules/_math.o  Modules/_struct.o  Modules/_randommodule.o  Modules/_elementtree.o  Modules/_pickle.o  Modules/_datetimemodule.o  Modules/_bisectmodule.o  Modules/_heapqmodule.o  Modules/_statisticsmodule.o  Modules/unicodedata.o  Modules/fcntlmodule.o  Modules/spwdmodule.o  Modules/grpmodule.o  Modules/selectmodule.o  Modules/_csv.o  Modules/socketmodule.o  Modules/_posixsubprocess.o  Modules/md5module.o  Modules/sha1module.o  Modules/sha256module.o  Modules/sha512module.o  Modules/sha3module.o  Modules/blake2module.o Modules/blake2b_impl.o Modules/blake2s_impl.o  Modules/syslogmodule.o  Modules/binascii.o  Modules/zlibmodule.o  Modules/posixmodule.o  Modules/errnomodule.o  Modules/pwdmodule.o  Modules/_sre.o  Modules/_codecsmodule.o  Modules/_weakref.o  Modules/_functoolsmodule.o  Modules/_operator.o  Modules/_collectionsmodule.o  Modules/_abc.o  Modules/itertoolsmodule.o  Modules/atexitmodule.o  Modules/signalmodule.o  Modules/_stat.o  Modules/timemodule.o  Modules/_threadmodule.o  Modules/_localemodule.o  Modules/_iomodule.o Modules/iobase.o Modules/fileio.o Modules/bytesio.o Modules/bufferedio.o Modules/textio.o Modules/stringio.o  Modules/faulthandler.o  Modules/_tracemalloc.o Modules/hashtable.o  Modules/symtablemodule.o  Modules/pyexpat.o  Modules/xxsubtype.o)\"\n        MODULE_OBJS = \"\\\"\n        MULTIARCH = \"x86_64-linux-gnu\"\n        MULTIARCH_CPPFLAGS = \"-DMULTIARCH=\\\"x86_64-linux-gnu\\\"\"\n        MVWDELCH_IS_EXPRESSION = \"1\"\n        NO_AS_NEEDED = \"-Wl,--no-as-needed\"\n        OBJECT_OBJS = \"\\\"\n        OPENSSL_INCLUDES = \"\"\n        OPENSSL_LDFLAGS = \"\"\n        OPENSSL_LIBS = \"-lssl -lcrypto\"\n        OPT = \"-DNDEBUG -g -fwrapv -O2 -Wall\"\n        OTHER_LIBTOOL_OPT = \"\"\n        PACKAGE_BUGREPORT = \"0\"\n        PACKAGE_NAME = \"0\"\n        PACKAGE_STRING = \"0\"\n        PACKAGE_TARNAME = \"0\"\n        PACKAGE_URL = \"0\"\n        PACKAGE_VERSION = \"0\"\n        PARSER_HEADERS = \"\\\"\n        PARSER_OBJS = \"\\ Parser/myreadline.o Parser/parsetok.o Parser/tokenizer.o\"\n        PGO_PROF_GEN_FLAG = \"-fprofile-generate\"\n        PGO_PROF_USE_FLAG = \"\"\n        POBJS = \"\\\"\n        POSIX_SEMAPHORES_NOT_ENABLED = \"0\"\n        PROFILE_TASK = \"-m test --pgo\"\n        PTHREAD_KEY_T_IS_COMPATIBLE_WITH_INT = \"1\"\n        PTHREAD_SYSTEM_SCHED_SUPPORTED = \"1\"\n        PURIFY = \"\"\n        PY3LIBRARY = \"libpython3.so\"\n        PYLONG_BITS_IN_DIGIT = \"0\"\n        PYTHON = \"python\"\n        PYTHONFRAMEWORK = \"\"\n        PYTHONFRAMEWORKDIR = \"no-framework\"\n        PYTHONFRAMEWORKINSTALLDIR = \"\"\n        PYTHONFRAMEWORKPREFIX = \"\"\n        PYTHONPATH = \"\"\n        PYTHON_FOR_BUILD = \"./python -E\"\n        PYTHON_FOR_REGEN = \"python3.8\"\n        PYTHON_HEADERS = \"\\\"\n        PYTHON_OBJS = \"\\\"\n        PY_BUILTIN_MODULE_CFLAGS = \"-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2    -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I../Include/internal -IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DPy_BUILD_CORE_BUILTIN\"\n        PY_CFLAGS = \"-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2   \"\n        PY_CFLAGS_NODIST = \"-std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I../Include/internal\"\n        PY_COERCE_C_LOCALE = \"1\"\n        PY_CORE_CFLAGS = \"-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2    -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I../Include/internal -IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DPy_BUILD_CORE\"\n        PY_CORE_LDFLAGS = \"-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   \"\n        PY_CPPFLAGS = \"-IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2\"\n        PY_FORMAT_SIZE_T = \"\"z\"\"\n        PY_LDFLAGS = \"-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   \"\n        PY_LDFLAGS_NODIST = \"\"\n        PY_SSL_DEFAULT_CIPHERS = \"1\"\n        PY_SSL_DEFAULT_CIPHER_STRING = \"0\"\n        PY_STDMODULE_CFLAGS = \"-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2    -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I../Include/internal -IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC\"\n        Py_DEBUG = \"0\"\n        Py_ENABLE_SHARED = \"1\"\n        Py_HASH_ALGORITHM = \"0\"\n        Py_TRACE_REFS = \"0\"\n        QUICKTESTOPTS = \"-x test_subprocess test_io test_lib2to3 \\\"\n        READELF = \"readelf\"\n        RESSRCDIR = \"Mac/Resources/framework\"\n        RETSIGTYPE = \"void\"\n        RUNSHARED = \"LD_LIBRARY_PATH=/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared\"\n        SCRIPTDIR = \"/usr/lib\"\n        SETPGRP_HAVE_ARG = \"0\"\n        SGI_ABI = \"@SGI_ABI@\"\n        SHELL = \"/bin/sh\"\n        SHLIBS = \"-lcrypt -lpthread -ldl  -lutil -lm\"\n        SHLIB_SUFFIX = \".so\"\n        SHM_NEEDS_LIBRT = \"1\"\n        SIGNED_RIGHT_SHIFT_ZERO_FILLS = \"0\"\n        SITEPATH = \"\"\n        SIZEOF_DOUBLE = \"8\"\n        SIZEOF_FLOAT = \"4\"\n        SIZEOF_FPOS_T = \"16\"\n        SIZEOF_INT = \"4\"\n        SIZEOF_LONG = \"8\"\n        SIZEOF_LONG_DOUBLE = \"16\"\n        SIZEOF_LONG_LONG = \"8\"\n        SIZEOF_OFF_T = \"8\"\n        SIZEOF_PID_T = \"4\"\n        SIZEOF_PTHREAD_KEY_T = \"4\"\n        SIZEOF_PTHREAD_T = \"8\"\n        SIZEOF_SHORT = \"2\"\n        SIZEOF_SIZE_T = \"8\"\n        SIZEOF_TIME_T = \"8\"\n        SIZEOF_UINTPTR_T = \"8\"\n        SIZEOF_VOID_P = \"8\"\n        SIZEOF_WCHAR_T = \"4\"\n        SIZEOF__BOOL = \"1\"\n        SO = \".cpython-38-x86_64-linux-gnu.so\"\n        SOABI = \"cpython-38-x86_64-linux-gnu\"\n        SRCDIRS = \"Parser Objects Python Modules Modules/_io Programs\"\n        SRC_GDB_HOOKS = \"../Tools/gdb/libpython.py\"\n        STDC_HEADERS = \"1\"\n        STRICT_SYSV_CURSES = \"/* Don't use ncurses extensions */\"\n        STRIPFLAG = \"-s\"\n        SUBDIRS = \"\"\n        SUBDIRSTOO = \"Include Lib Misc\"\n        SYSLIBS = \"-lm\"\n        SYS_SELECT_WITH_SYS_TIME = \"1\"\n        TCLTK_INCLUDES = \"\"\n        TCLTK_LIBS = \"\"\n        TESTOPTS = \"\"\n        TESTPATH = \"\"\n        TESTPYTHON = \"LD_LIBRARY_PATH=/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared ./python\"\n        TESTPYTHONOPTS = \"\"\n        TESTRUNNER = \"LD_LIBRARY_PATH=/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared ./python ../Tools/scripts/run_tests.py\"\n        TESTTIMEOUT = \"1200\"\n        TIMEMODULE_LIB = \"0\"\n        TIME_WITH_SYS_TIME = \"1\"\n        TM_IN_SYS_TIME = \"0\"\n        UNICODE_DEPS = \"\\\"\n        UNIVERSALSDK = \"\"\n        UPDATE_FILE = \"python3.8 ../Tools/scripts/update_file.py\"\n        USE_COMPUTED_GOTOS = \"1\"\n        VERSION = \"3.8\"\n        VPATH = \"..\"\n        WINDOW_HAS_FLAGS = \"1\"\n        WITH_DOC_STRINGS = \"1\"\n        WITH_DTRACE = \"1\"\n        WITH_DYLD = \"0\"\n        WITH_LIBINTL = \"0\"\n        WITH_NEXT_FRAMEWORK = \"0\"\n        WITH_PYMALLOC = \"1\"\n        WITH_VALGRIND = \"0\"\n        X87_DOUBLE_ROUNDING = \"0\"\n        XMLLIBSUBDIRS = \"xml xml/dom xml/etree xml/parsers xml/sax\"\n        abiflags = \"\"\n        abs_builddir = \"/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared\"\n        abs_srcdir = \"/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared/..\"\n        base = \"/mnt/d/Programming/Projects/sage/src/.venv\"\n        datarootdir = \"/usr/share\"\n        exec_prefix = \"/usr\"\n        installed_base = \"/usr\"\n        installed_platbase = \"/usr\"\n        multiarchsubdir = \"/x86_64-linux-gnu\"\n        platbase = \"/mnt/d/Programming/Projects/sage/src/.venv\"\n        prefix = \"/usr\"\n        projectbase = \"/usr/bin\"\n        py_version = \"3.8.2\"\n        py_version_nodot = \"38\"\n        py_version_short = \"3.8\"\n        srcdir = \"/usr/lib/python3.8/config-3.8-x86_64-linux-gnu\"\n        userbase = \"/home/tobias/.local\"\n```",
    "created_at": "2020-10-25T18:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599399",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:2'></a>

```
Platform: "linux-x86_64"
Python version: "3.8"
Current installation scheme: "posix_prefix"

Paths: 
        data = "/mnt/d/Programming/Projects/sage/src/.venv"
        include = "/usr/include/python3.8"
        platinclude = "/usr/include/python3.8"
        platlib = "/mnt/d/Programming/Projects/sage/src/.venv/lib/python3.8/site-packages"
        platstdlib = "/mnt/d/Programming/Projects/sage/src/.venv/lib/python3.8"
        purelib = "/mnt/d/Programming/Projects/sage/src/.venv/lib/python3.8/site-packages"
        scripts = "/mnt/d/Programming/Projects/sage/src/.venv/bin"
        stdlib = "/usr/lib/python3.8"

Variables: 
        ABIFLAGS = ""
        AC_APPLE_UNIVERSAL_BUILD = "0"
        AIX_GENUINE_CPLUSPLUS = "0"
        ALT_SOABI = "0"
        ANDROID_API_LEVEL = "0"
        AR = "x86_64-linux-gnu-gcc-ar"
        ARFLAGS = "rcs"
        BASECFLAGS = "-Wno-unused-result -Wsign-compare"
        BASECPPFLAGS = "-IObjects -IInclude -IPython"
        BASEMODLIBS = ""
        BINDIR = "/usr/bin"
        BINLIBDEST = "/usr/lib/python3.8"
        BLDLIBRARY = "-lpython3.8"
        BLDSHARED = "x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   "
        BUILDEXE = ""
        BUILDPYTHON = "python"
        BUILD_GNU_TYPE = "x86_64-pc-linux-gnu"
        BYTESTR_DEPS = "\"
        CC = "x86_64-linux-gnu-gcc -pthread"
        CCSHARED = "-fPIC"
        CFLAGS = "-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2   "
        CFLAGSFORSHARED = "-fPIC"
        CFLAGS_ALIASING = ""
        CFLAGS_NODIST = ""
        CONFIGFILES = "configure configure.ac acconfig.h pyconfig.h.in Makefile.pre.in"
        CONFIGURE_CFLAGS = "-g   -fstack-protector-strong -Wformat -Werror=format-security"
        CONFIGURE_CFLAGS_NODIST = "-std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration"
        CONFIGURE_CPPFLAGS = "-Wdate-time -D_FORTIFY_SOURCE=2"
        CONFIGURE_LDFLAGS = "-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   "
        CONFIGURE_LDFLAGS_NODIST = ""
        CONFIG_ARGS = "'--enable-shared' '--prefix=/usr' '--enable-ipv6' '--enable-loadable-sqlite-extensions' '--with-dbmliborder=bdb:gdbm' '--with-computed-gotos' '--without-ensurepip' '--with-system-expat' '--with-system-libmpdec' '--with-dtrace' '--with-system-ffi' 'CC=x86_64-linux-gnu-gcc' 'CFLAGS=-g   -fstack-protector-strong -Wformat -Werror=format-security ' 'LDFLAGS=-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   ' 'CPPFLAGS=-Wdate-time -D_FORTIFY_SOURCE=2'"
        CONFINCLUDEDIR = "/usr/include"
        CONFINCLUDEPY = "/usr/include/python3.8"
        COREPYTHONPATH = ""
        COVERAGE_INFO = "/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared/coverage.info"
        COVERAGE_REPORT = "/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared/lcov-report"
        COVERAGE_REPORT_OPTIONS = "--no-branch-coverage --title "CPython lcov report""
        CPPFLAGS = "-IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2"
        CXX = "x86_64-linux-gnu-g++ -pthread"
        DESTDIRS = "/usr /usr/lib /usr/lib/python3.8 /usr/lib/python3.8/lib-dynload"
        DESTLIB = "/usr/lib/python3.8"
        DESTPATH = ""
        DESTSHARED = "/usr/lib/python3.8/lib-dynload"
        DFLAGS = ""
        DIRMODE = "755"
        DIST = "README.rst ChangeLog configure configure.ac acconfig.h pyconfig.h.in Makefile.pre.in Include Lib Misc Ext-dummy"
        DISTDIRS = "Include Lib Misc Ext-dummy"
        DISTFILES = "README.rst ChangeLog configure configure.ac acconfig.h pyconfig.h.in Makefile.pre.in"
        DLINCLDIR = "."
        DLLLIBRARY = ""
        DOUBLE_IS_ARM_MIXED_ENDIAN_IEEE754 = "0"
        DOUBLE_IS_BIG_ENDIAN_IEEE754 = "0"
        DOUBLE_IS_LITTLE_ENDIAN_IEEE754 = "1"
        DTRACE = "/usr/bin/dtrace"
        DTRACE_DEPS = "\"
        DTRACE_HEADERS = "Include/pydtrace_probes.h"
        DTRACE_OBJS = "Python/pydtrace.o"
        DYNLOADFILE = "dynload_shlib.o"
        ENABLE_IPV6 = "1"
        ENSUREPIP = "no"
        EXE = ""
        EXEMODE = "755"
        EXTRATESTOPTS = ""
        EXT_SUFFIX = ".cpython-38-x86_64-linux-gnu.so"
        FILEMODE = "644"
        FLOAT_WORDS_BIGENDIAN = "0"
        FLOCK_NEEDS_LIBBSD = "0"
        GETPGRP_HAVE_ARG = "0"
        GETTIMEOFDAY_NO_TZ = "0"
        GITBRANCH = ""
        GITTAG = ""
        GITVERSION = ""
        GNULD = "yes"
        HAVE_ACCEPT4 = "1"
        HAVE_ACOSH = "1"
        HAVE_ADDRINFO = "1"
        HAVE_ALARM = "1"
        HAVE_ALIGNED_REQUIRED = "0"
        HAVE_ALLOCA_H = "1"
        HAVE_ALTZONE = "0"
        HAVE_ASINH = "1"
        HAVE_ASM_TYPES_H = "1"
        HAVE_ATANH = "1"
        HAVE_BIND_TEXTDOMAIN_CODESET = "1"
        HAVE_BLUETOOTH_BLUETOOTH_H = "1"
        HAVE_BLUETOOTH_H = "0"
        HAVE_BROKEN_MBSTOWCS = "0"
        HAVE_BROKEN_NICE = "0"
        HAVE_BROKEN_PIPE_BUF = "0"
        HAVE_BROKEN_POLL = "0"
        HAVE_BROKEN_POSIX_SEMAPHORES = "0"
        HAVE_BROKEN_PTHREAD_SIGMASK = "0"
        HAVE_BROKEN_SEM_GETVALUE = "0"
        HAVE_BROKEN_UNSETENV = "0"
        HAVE_BUILTIN_ATOMIC = "1"
        HAVE_CHFLAGS = "0"
        HAVE_CHOWN = "1"
        HAVE_CHROOT = "1"
        HAVE_CLOCK = "1"
        HAVE_CLOCK_GETRES = "1"
        HAVE_CLOCK_GETTIME = "1"
        HAVE_CLOCK_SETTIME = "1"
        HAVE_COMPUTED_GOTOS = "1"
        HAVE_CONFSTR = "1"
        HAVE_CONIO_H = "0"
        HAVE_COPYSIGN = "1"
        HAVE_COPY_FILE_RANGE = "1"
        HAVE_CRYPT_H = "1"
        HAVE_CRYPT_R = "1"
        HAVE_CTERMID = "1"
        HAVE_CTERMID_R = "0"
        HAVE_CURSES_FILTER = "1"
        HAVE_CURSES_H = "1"
        HAVE_CURSES_HAS_KEY = "1"
        HAVE_CURSES_IMMEDOK = "1"
        HAVE_CURSES_IS_PAD = "1"
        HAVE_CURSES_IS_TERM_RESIZED = "1"
        HAVE_CURSES_RESIZETERM = "1"
        HAVE_CURSES_RESIZE_TERM = "1"
        HAVE_CURSES_SYNCOK = "1"
        HAVE_CURSES_TYPEAHEAD = "1"
        HAVE_CURSES_USE_ENV = "1"
        HAVE_CURSES_WCHGAT = "1"
        HAVE_DECL_ISFINITE = "1"
        HAVE_DECL_ISINF = "1"
        HAVE_DECL_ISNAN = "1"
        HAVE_DECL_RTLD_DEEPBIND = "1"
        HAVE_DECL_RTLD_GLOBAL = "1"
        HAVE_DECL_RTLD_LAZY = "1"
        HAVE_DECL_RTLD_LOCAL = "1"
        HAVE_DECL_RTLD_MEMBER = "0"
        HAVE_DECL_RTLD_NODELETE = "1"
        HAVE_DECL_RTLD_NOLOAD = "1"
        HAVE_DECL_RTLD_NOW = "1"
        HAVE_DECL_TZNAME = "0"
        HAVE_DEVICE_MACROS = "1"
        HAVE_DEV_PTC = "0"
        HAVE_DEV_PTMX = "1"
        HAVE_DIRECT_H = "0"
        HAVE_DIRENT_D_TYPE = "1"
        HAVE_DIRENT_H = "1"
        HAVE_DIRFD = "1"
        HAVE_DLFCN_H = "1"
        HAVE_DLOPEN = "1"
        HAVE_DUP2 = "1"
        HAVE_DUP3 = "1"
        HAVE_DYNAMIC_LOADING = "1"
        HAVE_ENDIAN_H = "1"
        HAVE_EPOLL = "1"
        HAVE_EPOLL_CREATE1 = "1"
        HAVE_ERF = "1"
        HAVE_ERFC = "1"
        HAVE_ERRNO_H = "1"
        HAVE_EXECV = "1"
        HAVE_EXPLICIT_BZERO = "1"
        HAVE_EXPLICIT_MEMSET = "0"
        HAVE_EXPM1 = "1"
        HAVE_FACCESSAT = "1"
        HAVE_FCHDIR = "1"
        HAVE_FCHMOD = "1"
        HAVE_FCHMODAT = "1"
        HAVE_FCHOWN = "1"
        HAVE_FCHOWNAT = "1"
        HAVE_FCNTL_H = "1"
        HAVE_FDATASYNC = "1"
        HAVE_FDOPENDIR = "1"
        HAVE_FDWALK = "0"
        HAVE_FEXECVE = "1"
        HAVE_FINITE = "1"
        HAVE_FLOCK = "1"
        HAVE_FORK = "1"
        HAVE_FORKPTY = "1"
        HAVE_FPATHCONF = "1"
        HAVE_FSEEK64 = "0"
        HAVE_FSEEKO = "1"
        HAVE_FSTATAT = "1"
        HAVE_FSTATVFS = "1"
        HAVE_FSYNC = "1"
        HAVE_FTELL64 = "0"
        HAVE_FTELLO = "1"
        HAVE_FTIME = "1"
        HAVE_FTRUNCATE = "1"
        HAVE_FUTIMENS = "1"
        HAVE_FUTIMES = "1"
        HAVE_FUTIMESAT = "1"
        HAVE_GAI_STRERROR = "1"
        HAVE_GAMMA = "1"
        HAVE_GCC_ASM_FOR_MC68881 = "0"
        HAVE_GCC_ASM_FOR_X64 = "1"
        HAVE_GCC_ASM_FOR_X87 = "1"
        HAVE_GCC_UINT128_T = "1"
        HAVE_GETADDRINFO = "1"
        HAVE_GETC_UNLOCKED = "1"
        HAVE_GETENTROPY = "1"
        HAVE_GETGRGID_R = "1"
        HAVE_GETGRNAM_R = "1"
        HAVE_GETGROUPLIST = "1"
        HAVE_GETGROUPS = "1"
        HAVE_GETHOSTBYNAME = "0"
        HAVE_GETHOSTBYNAME_R = "1"
        HAVE_GETHOSTBYNAME_R_3_ARG = "0"
        HAVE_GETHOSTBYNAME_R_5_ARG = "0"
        HAVE_GETHOSTBYNAME_R_6_ARG = "1"
        HAVE_GETITIMER = "1"
        HAVE_GETLOADAVG = "1"
        HAVE_GETLOGIN = "1"
        HAVE_GETNAMEINFO = "1"
        HAVE_GETPAGESIZE = "1"
        HAVE_GETPEERNAME = "1"
        HAVE_GETPGID = "1"
        HAVE_GETPGRP = "1"
        HAVE_GETPID = "1"
        HAVE_GETPRIORITY = "1"
        HAVE_GETPWENT = "1"
        HAVE_GETPWNAM_R = "1"
        HAVE_GETPWUID_R = "1"
        HAVE_GETRANDOM = "1"
        HAVE_GETRANDOM_SYSCALL = "1"
        HAVE_GETRESGID = "1"
        HAVE_GETRESUID = "1"
        HAVE_GETSID = "1"
        HAVE_GETSPENT = "1"
        HAVE_GETSPNAM = "1"
        HAVE_GETTIMEOFDAY = "1"
        HAVE_GETWD = "1"
        HAVE_GLIBC_MEMMOVE_BUG = "0"
        HAVE_GRP_H = "1"
        HAVE_HSTRERROR = "1"
        HAVE_HTOLE64 = "1"
        HAVE_HYPOT = "1"
        HAVE_IEEEFP_H = "0"
        HAVE_IF_NAMEINDEX = "1"
        HAVE_INET_ATON = "1"
        HAVE_INET_PTON = "1"
        HAVE_INITGROUPS = "1"
        HAVE_INTTYPES_H = "1"
        HAVE_IO_H = "0"
        HAVE_IPA_PURE_CONST_BUG = "0"
        HAVE_KILL = "1"
        HAVE_KILLPG = "1"
        HAVE_KQUEUE = "0"
        HAVE_LANGINFO_H = "1"
        HAVE_LARGEFILE_SUPPORT = "0"
        HAVE_LCHFLAGS = "0"
        HAVE_LCHMOD = "0"
        HAVE_LCHOWN = "1"
        HAVE_LGAMMA = "1"
        HAVE_LIBDL = "1"
        HAVE_LIBDLD = "0"
        HAVE_LIBIEEE = "0"
        HAVE_LIBINTL_H = "1"
        HAVE_LIBREADLINE = "1"
        HAVE_LIBRESOLV = "0"
        HAVE_LIBSENDFILE = "0"
        HAVE_LIBUTIL_H = "0"
        HAVE_LINK = "1"
        HAVE_LINKAT = "1"
        HAVE_LINUX_CAN_BCM_H = "1"
        HAVE_LINUX_CAN_H = "1"
        HAVE_LINUX_CAN_RAW_FD_FRAMES = "1"
        HAVE_LINUX_CAN_RAW_H = "1"
        HAVE_LINUX_MEMFD_H = "1"
        HAVE_LINUX_NETLINK_H = "1"
        HAVE_LINUX_QRTR_H = "1"
        HAVE_LINUX_RANDOM_H = "1"
        HAVE_LINUX_TIPC_H = "1"
        HAVE_LINUX_VM_SOCKETS_H = "1"
        HAVE_LOCKF = "1"
        HAVE_LOG1P = "1"
        HAVE_LOG2 = "1"
        HAVE_LONG_DOUBLE = "1"
        HAVE_LSTAT = "1"
        HAVE_LUTIMES = "1"
        HAVE_MADVISE = "1"
        HAVE_MAKEDEV = "1"
        HAVE_MBRTOWC = "1"
        HAVE_MEMFD_CREATE = "1"
        HAVE_MEMORY_H = "1"
        HAVE_MEMRCHR = "1"
        HAVE_MKDIRAT = "1"
        HAVE_MKFIFO = "1"
        HAVE_MKFIFOAT = "1"
        HAVE_MKNOD = "1"
        HAVE_MKNODAT = "1"
        HAVE_MKTIME = "1"
        HAVE_MMAP = "1"
        HAVE_MREMAP = "1"
        HAVE_NCURSES_H = "1"
        HAVE_NDIR_H = "0"
        HAVE_NETPACKET_PACKET_H = "1"
        HAVE_NET_IF_H = "1"
        HAVE_NICE = "1"
        HAVE_OPENAT = "1"
        HAVE_OPENPTY = "1"
        HAVE_PATHCONF = "1"
        HAVE_PAUSE = "1"
        HAVE_PIPE2 = "1"
        HAVE_PLOCK = "0"
        HAVE_POLL = "1"
        HAVE_POLL_H = "1"
        HAVE_POSIX_FADVISE = "1"
        HAVE_POSIX_FALLOCATE = "1"
        HAVE_POSIX_SPAWN = "1"
        HAVE_POSIX_SPAWNP = "1"
        HAVE_PREAD = "1"
        HAVE_PREADV = "1"
        HAVE_PREADV2 = "1"
        HAVE_PRLIMIT = "1"
        HAVE_PROCESS_H = "0"
        HAVE_PROTOTYPES = "1"
        HAVE_PTHREAD_CONDATTR_SETCLOCK = "1"
        HAVE_PTHREAD_DESTRUCTOR = "0"
        HAVE_PTHREAD_GETCPUCLOCKID = "1"
        HAVE_PTHREAD_H = "1"
        HAVE_PTHREAD_INIT = "0"
        HAVE_PTHREAD_KILL = "1"
        HAVE_PTHREAD_SIGMASK = "1"
        HAVE_PTY_H = "1"
        HAVE_PUTENV = "1"
        HAVE_PWRITE = "1"
        HAVE_PWRITEV = "1"
        HAVE_PWRITEV2 = "1"
        HAVE_READLINK = "1"
        HAVE_READLINKAT = "1"
        HAVE_READV = "1"
        HAVE_REALPATH = "1"
        HAVE_RENAMEAT = "1"
        HAVE_RL_APPEND_HISTORY = "1"
        HAVE_RL_CATCH_SIGNAL = "1"
        HAVE_RL_COMPLETION_APPEND_CHARACTER = "1"
        HAVE_RL_COMPLETION_DISPLAY_MATCHES_HOOK = "1"
        HAVE_RL_COMPLETION_MATCHES = "1"
        HAVE_RL_COMPLETION_SUPPRESS_APPEND = "1"
        HAVE_RL_PRE_INPUT_HOOK = "1"
        HAVE_RL_RESIZE_TERMINAL = "1"
        HAVE_ROUND = "1"
        HAVE_RTPSPAWN = "0"
        HAVE_SCHED_GET_PRIORITY_MAX = "1"
        HAVE_SCHED_H = "1"
        HAVE_SCHED_RR_GET_INTERVAL = "1"
        HAVE_SCHED_SETAFFINITY = "1"
        HAVE_SCHED_SETPARAM = "1"
        HAVE_SCHED_SETSCHEDULER = "1"
        HAVE_SEM_GETVALUE = "1"
        HAVE_SEM_OPEN = "1"
        HAVE_SEM_TIMEDWAIT = "1"
        HAVE_SEM_UNLINK = "1"
        HAVE_SENDFILE = "1"
        HAVE_SETEGID = "1"
        HAVE_SETEUID = "1"
        HAVE_SETGID = "1"
        HAVE_SETGROUPS = "1"
        HAVE_SETHOSTNAME = "1"
        HAVE_SETITIMER = "1"
        HAVE_SETLOCALE = "1"
        HAVE_SETPGID = "1"
        HAVE_SETPGRP = "1"
        HAVE_SETPRIORITY = "1"
        HAVE_SETREGID = "1"
        HAVE_SETRESGID = "1"
        HAVE_SETRESUID = "1"
        HAVE_SETREUID = "1"
        HAVE_SETSID = "1"
        HAVE_SETUID = "1"
        HAVE_SETVBUF = "1"
        HAVE_SHADOW_H = "1"
        HAVE_SHM_OPEN = "1"
        HAVE_SHM_UNLINK = "1"
        HAVE_SIGACTION = "1"
        HAVE_SIGALTSTACK = "1"
        HAVE_SIGFILLSET = "1"
        HAVE_SIGINFO_T_SI_BAND = "1"
        HAVE_SIGINTERRUPT = "1"
        HAVE_SIGNAL_H = "1"
        HAVE_SIGPENDING = "1"
        HAVE_SIGRELSE = "1"
        HAVE_SIGTIMEDWAIT = "1"
        HAVE_SIGWAIT = "1"
        HAVE_SIGWAITINFO = "1"
        HAVE_SNPRINTF = "1"
        HAVE_SOCKADDR_ALG = "1"
        HAVE_SOCKADDR_SA_LEN = "0"
        HAVE_SOCKADDR_STORAGE = "1"
        HAVE_SOCKETPAIR = "1"
        HAVE_SPAWN_H = "1"
        HAVE_SSIZE_T = "1"
        HAVE_STATVFS = "1"
        HAVE_STAT_TV_NSEC = "1"
        HAVE_STAT_TV_NSEC2 = "0"
        HAVE_STDARG_PROTOTYPES = "1"
        HAVE_STDINT_H = "1"
        HAVE_STDLIB_H = "1"
        HAVE_STD_ATOMIC = "1"
        HAVE_STRDUP = "1"
        HAVE_STRFTIME = "1"
        HAVE_STRINGS_H = "1"
        HAVE_STRING_H = "1"
        HAVE_STRLCPY = "0"
        HAVE_STROPTS_H = "0"
        HAVE_STRSIGNAL = "1"
        HAVE_STRUCT_PASSWD_PW_GECOS = "1"
        HAVE_STRUCT_PASSWD_PW_PASSWD = "1"
        HAVE_STRUCT_STAT_ST_BIRTHTIME = "0"
        HAVE_STRUCT_STAT_ST_BLKSIZE = "1"
        HAVE_STRUCT_STAT_ST_BLOCKS = "1"
        HAVE_STRUCT_STAT_ST_FLAGS = "0"
        HAVE_STRUCT_STAT_ST_GEN = "0"
        HAVE_STRUCT_STAT_ST_RDEV = "1"
        HAVE_STRUCT_TM_TM_ZONE = "1"
        HAVE_SYMLINK = "1"
        HAVE_SYMLINKAT = "1"
        HAVE_SYNC = "1"
        HAVE_SYSCONF = "1"
        HAVE_SYSEXITS_H = "1"
        HAVE_SYS_AUDIOIO_H = "0"
        HAVE_SYS_BSDTTY_H = "0"
        HAVE_SYS_DEVPOLL_H = "0"
        HAVE_SYS_DIR_H = "0"
        HAVE_SYS_ENDIAN_H = "0"
        HAVE_SYS_EPOLL_H = "1"
        HAVE_SYS_EVENT_H = "0"
        HAVE_SYS_FILE_H = "1"
        HAVE_SYS_IOCTL_H = "1"
        HAVE_SYS_KERN_CONTROL_H = "0"
        HAVE_SYS_LOADAVG_H = "0"
        HAVE_SYS_LOCK_H = "0"
        HAVE_SYS_MEMFD_H = "0"
        HAVE_SYS_MKDEV_H = "0"
        HAVE_SYS_MMAN_H = "1"
        HAVE_SYS_MODEM_H = "0"
        HAVE_SYS_NDIR_H = "0"
        HAVE_SYS_PARAM_H = "1"
        HAVE_SYS_POLL_H = "1"
        HAVE_SYS_RANDOM_H = "1"
        HAVE_SYS_RESOURCE_H = "1"
        HAVE_SYS_SELECT_H = "1"
        HAVE_SYS_SENDFILE_H = "1"
        HAVE_SYS_SOCKET_H = "1"
        HAVE_SYS_STATVFS_H = "1"
        HAVE_SYS_STAT_H = "1"
        HAVE_SYS_SYSCALL_H = "1"
        HAVE_SYS_SYSMACROS_H = "1"
        HAVE_SYS_SYS_DOMAIN_H = "0"
        HAVE_SYS_TERMIO_H = "0"
        HAVE_SYS_TIMES_H = "1"
        HAVE_SYS_TIME_H = "1"
        HAVE_SYS_TYPES_H = "1"
        HAVE_SYS_UIO_H = "1"
        HAVE_SYS_UN_H = "1"
        HAVE_SYS_UTSNAME_H = "1"
        HAVE_SYS_WAIT_H = "1"
        HAVE_SYS_XATTR_H = "1"
        HAVE_TCGETPGRP = "1"
        HAVE_TCSETPGRP = "1"
        HAVE_TEMPNAM = "1"
        HAVE_TERMIOS_H = "1"
        HAVE_TERM_H = "1"
        HAVE_TGAMMA = "1"
        HAVE_TIMEGM = "1"
        HAVE_TIMES = "1"
        HAVE_TMPFILE = "1"
        HAVE_TMPNAM = "1"
        HAVE_TMPNAM_R = "1"
        HAVE_TM_ZONE = "1"
        HAVE_TRUNCATE = "1"
        HAVE_TZNAME = "0"
        HAVE_UCS4_TCL = "0"
        HAVE_UNAME = "1"
        HAVE_UNISTD_H = "1"
        HAVE_UNLINKAT = "1"
        HAVE_UNSETENV = "1"
        HAVE_USABLE_WCHAR_T = "0"
        HAVE_UTIL_H = "0"
        HAVE_UTIMENSAT = "1"
        HAVE_UTIMES = "1"
        HAVE_UTIME_H = "1"
        HAVE_UUID_CREATE = "0"
        HAVE_UUID_ENC_BE = "0"
        HAVE_UUID_GENERATE_TIME_SAFE = "1"
        HAVE_UUID_H = "0"
        HAVE_UUID_UUID_H = "1"
        HAVE_WAIT3 = "1"
        HAVE_WAIT4 = "1"
        HAVE_WAITID = "1"
        HAVE_WAITPID = "1"
        HAVE_WCHAR_H = "1"
        HAVE_WCSCOLL = "1"
        HAVE_WCSFTIME = "1"
        HAVE_WCSXFRM = "1"
        HAVE_WMEMCMP = "1"
        HAVE_WORKING_TZSET = "1"
        HAVE_WRITEV = "1"
        HAVE_X509_VERIFY_PARAM_SET1_HOST = "1"
        HAVE_ZLIB_COPY = "1"
        HAVE__GETPTY = "0"
        HOST_GNU_TYPE = "x86_64-pc-linux-gnu"
        INCLDIRSTOMAKE = "/usr/include /usr/include /usr/include/python3.8 /usr/include/python3.8"
        INCLUDEDIR = "/usr/include"
        INCLUDEPY = "/usr/include/python3.8"
        INSTALL = "/usr/bin/install -c"
        INSTALL_DATA = "/usr/bin/install -c -m 644"
        INSTALL_PROGRAM = "/usr/bin/install -c"
        INSTALL_SCRIPT = "/usr/bin/install -c"
        INSTALL_SHARED = "/usr/bin/install -c -m 755"
        INSTSONAME = "libpython3.8.so.1.0"
        IO_H = "Modules/_io/_iomodule.h"
        IO_OBJS = "\"
        LDCXXSHARED = "x86_64-linux-gnu-g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions"
        LDFLAGS = "-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   "
        LDFLAGS_NODIST = ""
        LDLIBRARY = "libpython3.8.so"
        LDLIBRARYDIR = ""
        LDSHARED = "x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   "
        LDVERSION = "3.8"
        LIBC = ""
        LIBDEST = "/usr/lib/python3.8"
        LIBDIR = "/usr/lib"
        LIBFFI_INCLUDEDIR = ""
        LIBM = "-lm"
        LIBOBJDIR = "Python/"
        LIBOBJS = ""
        LIBPC = "/usr/lib/x86_64-linux-gnu/pkgconfig"
        LIBPL = "/usr/lib/python3.8/config-3.8-x86_64-linux-gnu"
        LIBPYTHON = ""
        LIBRARY = "libpython3.8.a"
        LIBRARY_OBJS = "\"
        LIBRARY_OBJS_OMIT_FROZEN = "\"
        LIBS = "-lcrypt -lpthread -ldl  -lutil -lm"
        LIBSUBDIRS = "tkinter tkinter/test tkinter/test/test_tkinter \"
        LINKCC = "x86_64-linux-gnu-gcc -pthread"
        LINKFORSHARED = "-Xlinker -export-dynamic -Wl,-O1 -Wl,-Bsymbolic-functions"
        LIPO_32BIT_FLAGS = ""
        LLVM_PROF_ERR = "no"
        LLVM_PROF_FILE = ""
        LLVM_PROF_MERGER = "true"
        LN = "ln"
        LOCALMODLIBS = "-lexpat                       -L/usr/lib -lz                       -lexpat"
        MACHDEP = "linux"
        MACHDEP_OBJS = ""
        MACHDESTLIB = "/usr/lib/python3.8"
        MACOSX_DEPLOYMENT_TARGET = ""
        MAINCC = "x86_64-linux-gnu-gcc -pthread"
        MAJOR_IN_MKDEV = "0"
        MAJOR_IN_SYSMACROS = "1"
        MAKESETUP = "../Modules/makesetup"
        MANDIR = "/usr/share/man"
        MKDIR_P = "/bin/mkdir -p"
        MODBUILT_NAMES = "array  cmath  math  _struct  _random  _elementtree  _pickle  _datetime  _bisect  _heapq  _statistics  unicodedata  fcntl  spwd  grp  select  _csv  _socket  _posixsubprocess  _md5  _sha1  _sha256  _sha512  _sha3  _blake2  syslog  binascii  zlib  posix  errno  pwd  _sre  _codecs  _weakref  _functools  _operator  _collections  _abc  itertools  atexit  _signal  _stat  time  _thread  _locale  _io  faulthandler  _tracemalloc  _symtable  pyexpat  xxsubtype"
        MODDISABLED_NAMES = ""
        MODLIBS = "-lexpat                       -L/usr/lib -lz                       -lexpat"
        MODOBJS = "$(sort   Modules/arraymodule.o  Modules/cmathmodule.o Modules/_math.o  Modules/mathmodule.o Modules/_math.o  Modules/_struct.o  Modules/_randommodule.o  Modules/_elementtree.o  Modules/_pickle.o  Modules/_datetimemodule.o  Modules/_bisectmodule.o  Modules/_heapqmodule.o  Modules/_statisticsmodule.o  Modules/unicodedata.o  Modules/fcntlmodule.o  Modules/spwdmodule.o  Modules/grpmodule.o  Modules/selectmodule.o  Modules/_csv.o  Modules/socketmodule.o  Modules/_posixsubprocess.o  Modules/md5module.o  Modules/sha1module.o  Modules/sha256module.o  Modules/sha512module.o  Modules/sha3module.o  Modules/blake2module.o Modules/blake2b_impl.o Modules/blake2s_impl.o  Modules/syslogmodule.o  Modules/binascii.o  Modules/zlibmodule.o  Modules/posixmodule.o  Modules/errnomodule.o  Modules/pwdmodule.o  Modules/_sre.o  Modules/_codecsmodule.o  Modules/_weakref.o  Modules/_functoolsmodule.o  Modules/_operator.o  Modules/_collectionsmodule.o  Modules/_abc.o  Modules/itertoolsmodule.o  Modules/atexitmodule.o  Modules/signalmodule.o  Modules/_stat.o  Modules/timemodule.o  Modules/_threadmodule.o  Modules/_localemodule.o  Modules/_iomodule.o Modules/iobase.o Modules/fileio.o Modules/bytesio.o Modules/bufferedio.o Modules/textio.o Modules/stringio.o  Modules/faulthandler.o  Modules/_tracemalloc.o Modules/hashtable.o  Modules/symtablemodule.o  Modules/pyexpat.o  Modules/xxsubtype.o)"
        MODULE_OBJS = "\"
        MULTIARCH = "x86_64-linux-gnu"
        MULTIARCH_CPPFLAGS = "-DMULTIARCH=\"x86_64-linux-gnu\""
        MVWDELCH_IS_EXPRESSION = "1"
        NO_AS_NEEDED = "-Wl,--no-as-needed"
        OBJECT_OBJS = "\"
        OPENSSL_INCLUDES = ""
        OPENSSL_LDFLAGS = ""
        OPENSSL_LIBS = "-lssl -lcrypto"
        OPT = "-DNDEBUG -g -fwrapv -O2 -Wall"
        OTHER_LIBTOOL_OPT = ""
        PACKAGE_BUGREPORT = "0"
        PACKAGE_NAME = "0"
        PACKAGE_STRING = "0"
        PACKAGE_TARNAME = "0"
        PACKAGE_URL = "0"
        PACKAGE_VERSION = "0"
        PARSER_HEADERS = "\"
        PARSER_OBJS = "\ Parser/myreadline.o Parser/parsetok.o Parser/tokenizer.o"
        PGO_PROF_GEN_FLAG = "-fprofile-generate"
        PGO_PROF_USE_FLAG = ""
        POBJS = "\"
        POSIX_SEMAPHORES_NOT_ENABLED = "0"
        PROFILE_TASK = "-m test --pgo"
        PTHREAD_KEY_T_IS_COMPATIBLE_WITH_INT = "1"
        PTHREAD_SYSTEM_SCHED_SUPPORTED = "1"
        PURIFY = ""
        PY3LIBRARY = "libpython3.so"
        PYLONG_BITS_IN_DIGIT = "0"
        PYTHON = "python"
        PYTHONFRAMEWORK = ""
        PYTHONFRAMEWORKDIR = "no-framework"
        PYTHONFRAMEWORKINSTALLDIR = ""
        PYTHONFRAMEWORKPREFIX = ""
        PYTHONPATH = ""
        PYTHON_FOR_BUILD = "./python -E"
        PYTHON_FOR_REGEN = "python3.8"
        PYTHON_HEADERS = "\"
        PYTHON_OBJS = "\"
        PY_BUILTIN_MODULE_CFLAGS = "-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2    -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I../Include/internal -IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DPy_BUILD_CORE_BUILTIN"
        PY_CFLAGS = "-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2   "
        PY_CFLAGS_NODIST = "-std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I../Include/internal"
        PY_COERCE_C_LOCALE = "1"
        PY_CORE_CFLAGS = "-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2    -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I../Include/internal -IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC -DPy_BUILD_CORE"
        PY_CORE_LDFLAGS = "-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   "
        PY_CPPFLAGS = "-IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2"
        PY_FORMAT_SIZE_T = ""z""
        PY_LDFLAGS = "-Wl,-Bsymbolic-functions  -Wl,-z,relro -g -fwrapv -O2   "
        PY_LDFLAGS_NODIST = ""
        PY_SSL_DEFAULT_CIPHERS = "1"
        PY_SSL_DEFAULT_CIPHER_STRING = "0"
        PY_STDMODULE_CFLAGS = "-Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O2 -Wall -g   -fstack-protector-strong -Wformat -Werror=format-security  -g -fwrapv -O2    -std=c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror=implicit-function-declaration  -I../Include/internal -IObjects -IInclude -IPython -I. -I../Include -Wdate-time -D_FORTIFY_SOURCE=2 -fPIC"
        Py_DEBUG = "0"
        Py_ENABLE_SHARED = "1"
        Py_HASH_ALGORITHM = "0"
        Py_TRACE_REFS = "0"
        QUICKTESTOPTS = "-x test_subprocess test_io test_lib2to3 \"
        READELF = "readelf"
        RESSRCDIR = "Mac/Resources/framework"
        RETSIGTYPE = "void"
        RUNSHARED = "LD_LIBRARY_PATH=/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared"
        SCRIPTDIR = "/usr/lib"
        SETPGRP_HAVE_ARG = "0"
        SGI_ABI = "@SGI_ABI@"
        SHELL = "/bin/sh"
        SHLIBS = "-lcrypt -lpthread -ldl  -lutil -lm"
        SHLIB_SUFFIX = ".so"
        SHM_NEEDS_LIBRT = "1"
        SIGNED_RIGHT_SHIFT_ZERO_FILLS = "0"
        SITEPATH = ""
        SIZEOF_DOUBLE = "8"
        SIZEOF_FLOAT = "4"
        SIZEOF_FPOS_T = "16"
        SIZEOF_INT = "4"
        SIZEOF_LONG = "8"
        SIZEOF_LONG_DOUBLE = "16"
        SIZEOF_LONG_LONG = "8"
        SIZEOF_OFF_T = "8"
        SIZEOF_PID_T = "4"
        SIZEOF_PTHREAD_KEY_T = "4"
        SIZEOF_PTHREAD_T = "8"
        SIZEOF_SHORT = "2"
        SIZEOF_SIZE_T = "8"
        SIZEOF_TIME_T = "8"
        SIZEOF_UINTPTR_T = "8"
        SIZEOF_VOID_P = "8"
        SIZEOF_WCHAR_T = "4"
        SIZEOF__BOOL = "1"
        SO = ".cpython-38-x86_64-linux-gnu.so"
        SOABI = "cpython-38-x86_64-linux-gnu"
        SRCDIRS = "Parser Objects Python Modules Modules/_io Programs"
        SRC_GDB_HOOKS = "../Tools/gdb/libpython.py"
        STDC_HEADERS = "1"
        STRICT_SYSV_CURSES = "/* Don't use ncurses extensions */"
        STRIPFLAG = "-s"
        SUBDIRS = ""
        SUBDIRSTOO = "Include Lib Misc"
        SYSLIBS = "-lm"
        SYS_SELECT_WITH_SYS_TIME = "1"
        TCLTK_INCLUDES = ""
        TCLTK_LIBS = ""
        TESTOPTS = ""
        TESTPATH = ""
        TESTPYTHON = "LD_LIBRARY_PATH=/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared ./python"
        TESTPYTHONOPTS = ""
        TESTRUNNER = "LD_LIBRARY_PATH=/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared ./python ../Tools/scripts/run_tests.py"
        TESTTIMEOUT = "1200"
        TIMEMODULE_LIB = "0"
        TIME_WITH_SYS_TIME = "1"
        TM_IN_SYS_TIME = "0"
        UNICODE_DEPS = "\"
        UNIVERSALSDK = ""
        UPDATE_FILE = "python3.8 ../Tools/scripts/update_file.py"
        USE_COMPUTED_GOTOS = "1"
        VERSION = "3.8"
        VPATH = ".."
        WINDOW_HAS_FLAGS = "1"
        WITH_DOC_STRINGS = "1"
        WITH_DTRACE = "1"
        WITH_DYLD = "0"
        WITH_LIBINTL = "0"
        WITH_NEXT_FRAMEWORK = "0"
        WITH_PYMALLOC = "1"
        WITH_VALGRIND = "0"
        X87_DOUBLE_ROUNDING = "0"
        XMLLIBSUBDIRS = "xml xml/dom xml/etree xml/parsers xml/sax"
        abiflags = ""
        abs_builddir = "/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared"
        abs_srcdir = "/build/python3.8-6QL2k7/python3.8-3.8.2/build-shared/.."
        base = "/mnt/d/Programming/Projects/sage/src/.venv"
        datarootdir = "/usr/share"
        exec_prefix = "/usr"
        installed_base = "/usr"
        installed_platbase = "/usr"
        multiarchsubdir = "/x86_64-linux-gnu"
        platbase = "/mnt/d/Programming/Projects/sage/src/.venv"
        prefix = "/usr"
        projectbase = "/usr/bin"
        py_version = "3.8.2"
        py_version_nodot = "38"
        py_version_short = "3.8"
        srcdir = "/usr/lib/python3.8/config-3.8-x86_64-linux-gnu"
        userbase = "/home/tobias/.local"
```



---

archive/issue_comments_599400.json:
```json
{
    "body": "<a id='comment:3'></a>\nI see `MULTIARCH = \"x86_64-linux-gnu\"` and `multiarchsubdir = \"/x86_64-linux-gnu\"`.",
    "created_at": "2020-10-25T18:46:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599400",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
I see `MULTIARCH = "x86_64-linux-gnu"` and `multiarchsubdir = "/x86_64-linux-gnu"`.



---

archive/issue_comments_599401.json:
```json
{
    "body": "<a id='comment:4'></a>\nOne of these variables should be used in `_get_shared_lib_filename`. Why it is instead looking for `MULTILIB`, which indeed does not exist, should be investigated...",
    "created_at": "2020-10-25T18:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599401",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
One of these variables should be used in `_get_shared_lib_filename`. Why it is instead looking for `MULTILIB`, which indeed does not exist, should be investigated...



---

archive/issue_comments_599402.json:
```json
{
    "body": "<a id='comment:5'></a>\nLet's make this a separate ticket please",
    "created_at": "2020-10-25T18:51:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599402",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Let's make this a separate ticket please



---

archive/issue_comments_599403.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis is now #30833",
    "created_at": "2020-10-26T20:16:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599403",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
This is now #30833



---

archive/issue_comments_599404.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706\" to \"#30779, #30672, #30673, #30709, #30706, #30833\".",
    "created_at": "2020-10-27T14:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599404",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706" to "#30779, #30672, #30673, #30709, #30706, #30833".



---

archive/issue_comments_599405.json:
```json
{
    "body": "**Changing commit** from \"[7523baa68b46732cc381387e58ea1a9559c11e96](https://github.com/sagemath/sagetrac-mirror/commit/7523baa68b46732cc381387e58ea1a9559c11e96)\" to \"[443424cf878ac7fa9c57a1bad313f1b4d84ed031](https://github.com/sagemath/sagetrac-mirror/commit/443424cf878ac7fa9c57a1bad313f1b4d84ed031)\".",
    "created_at": "2020-10-27T14:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7523baa68b46732cc381387e58ea1a9559c11e96](https://github.com/sagemath/sagetrac-mirror/commit/7523baa68b46732cc381387e58ea1a9559c11e96)" to "[443424cf878ac7fa9c57a1bad313f1b4d84ed031](https://github.com/sagemath/sagetrac-mirror/commit/443424cf878ac7fa9c57a1bad313f1b4d84ed031)".



---

archive/issue_comments_599406.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/289c3ef47a6439a6019ba66d6479855d58129214\">289c3ef</a></td><td><code>Improve _get_shared_lib_filename</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/443424cf878ac7fa9c57a1bad313f1b4d84ed031\">443424c</a></td><td><code>Cleanup code</code></td></tr></table>\n",
    "created_at": "2020-10-27T14:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599406",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/289c3ef47a6439a6019ba66d6479855d58129214">289c3ef</a></td><td><code>Improve _get_shared_lib_filename</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/443424cf878ac7fa9c57a1bad313f1b4d84ed031">443424c</a></td><td><code>Cleanup code</code></td></tr></table>




---

archive/issue_comments_599407.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30833\" to \"#30779, #30672, #30673, #30709, #30706, #30833, #30748\".",
    "created_at": "2020-11-02T16:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599407",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30833" to "#30779, #30672, #30673, #30709, #30706, #30833, #30748".



---

archive/issue_comments_599408.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2351ae31ddc5abbc80cb71e08e18f7bd3a2baac2\">2351ae3</a></td><td><code>Update, extend and reorder dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99ae00c2ecb1ffcb8895697f34861f05dea840e6\">99ae00c</a></td><td><code>Replace startup exception by warning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11882e531bc80f6397f00d6a5a095b97a9e93804\">11882e5</a></td><td><code>Use context manager</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d858e466f3acb7e1fee5ee6cec358485f9f3d20f\">d858e46</a></td><td><code>Merge branch 'public/build/startupWarning' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/46ac365710c84554d2ad8e8e11ac0b996f2190eb\">46ac365</a></td><td><code>Update numpy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fcd71f8f28f638a5c5b418164003db395aa147a\">3fcd71f</a></td><td><code>Merge tag '9.3.beta0' into t/30709/public/build/cythonConfig</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a646a24fde493cc942671e166314628827a0d9ac\">a646a24</a></td><td><code>src/sage_setup/cython_options.py: Restore auto_pickle=False</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8eae4bc5ab6c3adc8f29da5166005efe71ad89c3\">8eae4bc</a></td><td><code>Merge branch 'public/build/cythonConfig' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ac3a2952ec50f65a7766e4c9a2571b357681862\">5ac3a29</a></td><td><code>Add matlibplot library</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3045684c751317f252ff61f59ab53782df76177\">b304568</a></td><td><code>Run doctests in github action</code></td></tr></table>\n",
    "created_at": "2020-11-02T18:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599408",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2351ae31ddc5abbc80cb71e08e18f7bd3a2baac2">2351ae3</a></td><td><code>Update, extend and reorder dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99ae00c2ecb1ffcb8895697f34861f05dea840e6">99ae00c</a></td><td><code>Replace startup exception by warning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11882e531bc80f6397f00d6a5a095b97a9e93804">11882e5</a></td><td><code>Use context manager</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d858e466f3acb7e1fee5ee6cec358485f9f3d20f">d858e46</a></td><td><code>Merge branch 'public/build/startupWarning' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/46ac365710c84554d2ad8e8e11ac0b996f2190eb">46ac365</a></td><td><code>Update numpy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fcd71f8f28f638a5c5b418164003db395aa147a">3fcd71f</a></td><td><code>Merge tag '9.3.beta0' into t/30709/public/build/cythonConfig</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a646a24fde493cc942671e166314628827a0d9ac">a646a24</a></td><td><code>src/sage_setup/cython_options.py: Restore auto_pickle=False</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8eae4bc5ab6c3adc8f29da5166005efe71ad89c3">8eae4bc</a></td><td><code>Merge branch 'public/build/cythonConfig' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ac3a2952ec50f65a7766e4c9a2571b357681862">5ac3a29</a></td><td><code>Add matlibplot library</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3045684c751317f252ff61f59ab53782df76177">b304568</a></td><td><code>Run doctests in github action</code></td></tr></table>




---

archive/issue_comments_599409.json:
```json
{
    "body": "**Changing commit** from \"[443424cf878ac7fa9c57a1bad313f1b4d84ed031](https://github.com/sagemath/sagetrac-mirror/commit/443424cf878ac7fa9c57a1bad313f1b4d84ed031)\" to \"[b3045684c751317f252ff61f59ab53782df76177](https://github.com/sagemath/sagetrac-mirror/commit/b3045684c751317f252ff61f59ab53782df76177)\".",
    "created_at": "2020-11-02T18:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599409",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[443424cf878ac7fa9c57a1bad313f1b4d84ed031](https://github.com/sagemath/sagetrac-mirror/commit/443424cf878ac7fa9c57a1bad313f1b4d84ed031)" to "[b3045684c751317f252ff61f59ab53782df76177](https://github.com/sagemath/sagetrac-mirror/commit/b3045684c751317f252ff61f59ab53782df76177)".



---

archive/issue_comments_599410.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a94a29bc1c6179282dbd94a7afd19247884e525\">9a94a29</a></td><td><code>Don't install texlive-generic-extra</code></td></tr></table>\n",
    "created_at": "2020-11-02T18:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599410",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a94a29bc1c6179282dbd94a7afd19247884e525">9a94a29</a></td><td><code>Don't install texlive-generic-extra</code></td></tr></table>




---

archive/issue_comments_599411.json:
```json
{
    "body": "**Changing commit** from \"[b3045684c751317f252ff61f59ab53782df76177](https://github.com/sagemath/sagetrac-mirror/commit/b3045684c751317f252ff61f59ab53782df76177)\" to \"[9a94a29bc1c6179282dbd94a7afd19247884e525](https://github.com/sagemath/sagetrac-mirror/commit/9a94a29bc1c6179282dbd94a7afd19247884e525)\".",
    "created_at": "2020-11-02T18:36:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599411",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b3045684c751317f252ff61f59ab53782df76177](https://github.com/sagemath/sagetrac-mirror/commit/b3045684c751317f252ff61f59ab53782df76177)" to "[9a94a29bc1c6179282dbd94a7afd19247884e525](https://github.com/sagemath/sagetrac-mirror/commit/9a94a29bc1c6179282dbd94a7afd19247884e525)".



---

archive/issue_comments_599412.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/16674ba8da9daa53709c9ad4bfc6fca6bdba13ee\">16674ba</a></td><td><code>Remove lazy import finish startup</code></td></tr></table>\n",
    "created_at": "2020-11-02T19:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599412",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/16674ba8da9daa53709c9ad4bfc6fca6bdba13ee">16674ba</a></td><td><code>Remove lazy import finish startup</code></td></tr></table>




---

archive/issue_comments_599413.json:
```json
{
    "body": "**Changing commit** from \"[9a94a29bc1c6179282dbd94a7afd19247884e525](https://github.com/sagemath/sagetrac-mirror/commit/9a94a29bc1c6179282dbd94a7afd19247884e525)\" to \"[16674ba8da9daa53709c9ad4bfc6fca6bdba13ee](https://github.com/sagemath/sagetrac-mirror/commit/16674ba8da9daa53709c9ad4bfc6fca6bdba13ee)\".",
    "created_at": "2020-11-02T19:49:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599413",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9a94a29bc1c6179282dbd94a7afd19247884e525](https://github.com/sagemath/sagetrac-mirror/commit/9a94a29bc1c6179282dbd94a7afd19247884e525)" to "[16674ba8da9daa53709c9ad4bfc6fca6bdba13ee](https://github.com/sagemath/sagetrac-mirror/commit/16674ba8da9daa53709c9ad4bfc6fca6bdba13ee)".



---

archive/issue_comments_599414.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f078aa0b841bb26a371027110ec8085a0f6f4553\">f078aa0</a></td><td><code>Speedup a bit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3eac0affb4e9c248c67755a4298539e6d664d1f5\">3eac0af</a></td><td><code>Refactor</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dba18d0ff59fca2ad34866c17f00fce148fa747d\">dba18d0</a></td><td><code>Add none check for IPython</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/511775ec71b3d2efef8f6e9ca2ea95f234c566ad\">511775e</a></td><td><code>Add caching</code></td></tr></table>\n",
    "created_at": "2020-11-03T00:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599414",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f078aa0b841bb26a371027110ec8085a0f6f4553">f078aa0</a></td><td><code>Speedup a bit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3eac0affb4e9c248c67755a4298539e6d664d1f5">3eac0af</a></td><td><code>Refactor</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dba18d0ff59fca2ad34866c17f00fce148fa747d">dba18d0</a></td><td><code>Add none check for IPython</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/511775ec71b3d2efef8f6e9ca2ea95f234c566ad">511775e</a></td><td><code>Add caching</code></td></tr></table>




---

archive/issue_comments_599415.json:
```json
{
    "body": "**Changing commit** from \"[16674ba8da9daa53709c9ad4bfc6fca6bdba13ee](https://github.com/sagemath/sagetrac-mirror/commit/16674ba8da9daa53709c9ad4bfc6fca6bdba13ee)\" to \"[511775ec71b3d2efef8f6e9ca2ea95f234c566ad](https://github.com/sagemath/sagetrac-mirror/commit/511775ec71b3d2efef8f6e9ca2ea95f234c566ad)\".",
    "created_at": "2020-11-03T00:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599415",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[16674ba8da9daa53709c9ad4bfc6fca6bdba13ee](https://github.com/sagemath/sagetrac-mirror/commit/16674ba8da9daa53709c9ad4bfc6fca6bdba13ee)" to "[511775ec71b3d2efef8f6e9ca2ea95f234c566ad](https://github.com/sagemath/sagetrac-mirror/commit/511775ec71b3d2efef8f6e9ca2ea95f234c566ad)".



---

archive/issue_comments_599416.json:
```json
{
    "body": "<a id='comment:4'></a>\nI've now added the doctest run to the github workflow. It works in principle although there are quite a lot of failing tests (mainly because some of the system-installed libs are not discovered). In order to keep the focus of this ticket narrow, fixing this should better be done in follow-up tickets.",
    "created_at": "2020-11-03T00:24:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599416",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>
I've now added the doctest run to the github workflow. It works in principle although there are quite a lot of failing tests (mainly because some of the system-installed libs are not discovered). In order to keep the focus of this ticket narrow, fixing this should better be done in follow-up tickets.



---

archive/issue_comments_599417.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,8 +20,10 @@\n - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n - Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.)\n-- Run doctests in the github action as soon as they no longer rely on `SAGE_LOCAL` (#22731)\n+- Fix MacOS github action\n+- Run doctests in the github action via `sage -t` as soon as this no longer rely on `SAGE_LOCAL` (#22731)\n - Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/\n+- Fix doctests (as reported by the github action)\n \n Previous tickets on in-place builds, editable installs:\n - #12659\n``````\n",
    "created_at": "2020-11-03T00:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599417",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,8 +20,10 @@
 - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
 - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
 - Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.)
-- Run doctests in the github action as soon as they no longer rely on `SAGE_LOCAL` (#22731)
+- Fix MacOS github action
+- Run doctests in the github action via `sage -t` as soon as this no longer rely on `SAGE_LOCAL` (#22731)
 - Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/
+- Fix doctests (as reported by the github action)
 
 Previous tickets on in-place builds, editable installs:
 - #12659
``````




---

archive/issue_comments_599418.json:
```json
{
    "body": "<a id='comment:6'></a>\nIt has been reported that the current `src/setup.py` (in Sage 9.2) is able to install a working sagelib on top of conda (see #28745). \n\nI'll create a test for this in #30845, and then we can test the present ticket to make sure it does not break anything.",
    "created_at": "2020-11-03T01:11:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599418",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
It has been reported that the current `src/setup.py` (in Sage 9.2) is able to install a working sagelib on top of conda (see #28745). 

I'll create a test for this in #30845, and then we can test the present ticket to make sure it does not break anything.



---

archive/issue_comments_599419.json:
```json
{
    "body": "**Changing commit** from \"[511775ec71b3d2efef8f6e9ca2ea95f234c566ad](https://github.com/sagemath/sagetrac-mirror/commit/511775ec71b3d2efef8f6e9ca2ea95f234c566ad)\" to \"[373d1c12e77647541fa7fc8b315aae98ee0298cd](https://github.com/sagemath/sagetrac-mirror/commit/373d1c12e77647541fa7fc8b315aae98ee0298cd)\".",
    "created_at": "2020-11-03T12:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[511775ec71b3d2efef8f6e9ca2ea95f234c566ad](https://github.com/sagemath/sagetrac-mirror/commit/511775ec71b3d2efef8f6e9ca2ea95f234c566ad)" to "[373d1c12e77647541fa7fc8b315aae98ee0298cd](https://github.com/sagemath/sagetrac-mirror/commit/373d1c12e77647541fa7fc8b315aae98ee0298cd)".



---

archive/issue_comments_599420.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/373d1c12e77647541fa7fc8b315aae98ee0298cd\">373d1c1</a></td><td><code>Add rope as dev dependency</code></td></tr></table>\n",
    "created_at": "2020-11-03T12:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599420",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/373d1c12e77647541fa7fc8b315aae98ee0298cd">373d1c1</a></td><td><code>Add rope as dev dependency</code></td></tr></table>




---

archive/issue_comments_599421.json:
```json
{
    "body": "Replying to [ticket:30371 mkoeppe]:\n> - A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev.\n\n\nYes, let's add them in #30859. \n\nSome of the information that you put in the ticket description above could go as comments into the debian.txt files.",
    "created_at": "2020-11-03T19:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599421",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [ticket:30371 mkoeppe]:
> - A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev.


Yes, let's add them in #30859. 

Some of the information that you put in the ticket description above could go as comments into the debian.txt files.



---

archive/issue_comments_599422.json:
```json
{
    "body": "<a id='comment:9'></a>\nThanks for opening a new ticket for this!\n\nConcerning the conda integration, this ticket here might actually help with this. You can use pipenv on top of conda, see https://pipenv.pypa.io/en/latest/advanced/#pipenv-and-other-python-distributions.",
    "created_at": "2020-11-03T19:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599422",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
Thanks for opening a new ticket for this!

Concerning the conda integration, this ticket here might actually help with this. You can use pipenv on top of conda, see https://pipenv.pypa.io/en/latest/advanced/#pipenv-and-other-python-distributions.



---

archive/issue_comments_599423.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,7 +14,7 @@\n \n TODO (as followup tickets):\n - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.\n-- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev.\n+- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev. Tracked at #30859.\n - Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`\n - Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.\n - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n``````\n",
    "created_at": "2020-11-03T20:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599423",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,7 +14,7 @@
 
 TODO (as followup tickets):
 - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.
-- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev.
+- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev. Tracked at #30859.
 - Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`
 - Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.
 - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
``````




---

archive/issue_comments_599424.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/096df15a1253e6cb0fa75c92e29458f29d5ad77d\">096df15</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-11-07T19:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599424",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/096df15a1253e6cb0fa75c92e29458f29d5ad77d">096df15</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599425.json:
```json
{
    "body": "**Changing commit** from \"[373d1c12e77647541fa7fc8b315aae98ee0298cd](https://github.com/sagemath/sagetrac-mirror/commit/373d1c12e77647541fa7fc8b315aae98ee0298cd)\" to \"[096df15a1253e6cb0fa75c92e29458f29d5ad77d](https://github.com/sagemath/sagetrac-mirror/commit/096df15a1253e6cb0fa75c92e29458f29d5ad77d)\".",
    "created_at": "2020-11-07T19:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599425",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[373d1c12e77647541fa7fc8b315aae98ee0298cd](https://github.com/sagemath/sagetrac-mirror/commit/373d1c12e77647541fa7fc8b315aae98ee0298cd)" to "[096df15a1253e6cb0fa75c92e29458f29d5ad77d](https://github.com/sagemath/sagetrac-mirror/commit/096df15a1253e6cb0fa75c92e29458f29d5ad77d)".



---

archive/issue_comments_599426.json:
```json
{
    "body": "**Changing commit** from \"[096df15a1253e6cb0fa75c92e29458f29d5ad77d](https://github.com/sagemath/sagetrac-mirror/commit/096df15a1253e6cb0fa75c92e29458f29d5ad77d)\" to \"[8eb2f8ec11943c8f7175ce4d8a293673ab18b774](https://github.com/sagemath/sagetrac-mirror/commit/8eb2f8ec11943c8f7175ce4d8a293673ab18b774)\".",
    "created_at": "2020-11-07T19:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599426",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[096df15a1253e6cb0fa75c92e29458f29d5ad77d](https://github.com/sagemath/sagetrac-mirror/commit/096df15a1253e6cb0fa75c92e29458f29d5ad77d)" to "[8eb2f8ec11943c8f7175ce4d8a293673ab18b774](https://github.com/sagemath/sagetrac-mirror/commit/8eb2f8ec11943c8f7175ce4d8a293673ab18b774)".



---

archive/issue_comments_599427.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8eb2f8ec11943c8f7175ce4d8a293673ab18b774\">8eb2f8e</a></td><td><code>Remove homfly workaround</code></td></tr></table>\n",
    "created_at": "2020-11-07T19:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599427",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8eb2f8ec11943c8f7175ce4d8a293673ab18b774">8eb2f8e</a></td><td><code>Remove homfly workaround</code></td></tr></table>




---

archive/issue_comments_599428.json:
```json
{
    "body": "**Changing commit** from \"[8eb2f8ec11943c8f7175ce4d8a293673ab18b774](https://github.com/sagemath/sagetrac-mirror/commit/8eb2f8ec11943c8f7175ce4d8a293673ab18b774)\" to \"[17f367eebf0e329275773e0c048f3009b2de19ed](https://github.com/sagemath/sagetrac-mirror/commit/17f367eebf0e329275773e0c048f3009b2de19ed)\".",
    "created_at": "2020-11-08T18:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599428",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8eb2f8ec11943c8f7175ce4d8a293673ab18b774](https://github.com/sagemath/sagetrac-mirror/commit/8eb2f8ec11943c8f7175ce4d8a293673ab18b774)" to "[17f367eebf0e329275773e0c048f3009b2de19ed](https://github.com/sagemath/sagetrac-mirror/commit/17f367eebf0e329275773e0c048f3009b2de19ed)".



---

archive/issue_comments_599429.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17f367eebf0e329275773e0c048f3009b2de19ed\">17f367e</a></td><td><code>Refactor shared library discovery</code></td></tr></table>\n",
    "created_at": "2020-11-08T18:04:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599429",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17f367eebf0e329275773e0c048f3009b2de19ed">17f367e</a></td><td><code>Refactor shared library discovery</code></td></tr></table>




---

archive/issue_comments_599430.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30833, #30748\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #30748\".",
    "created_at": "2020-11-12T10:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599430",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30833, #30748" to "#30779, #30672, #30673, #30709, #30706, #30901, #30748".



---

archive/issue_comments_599431.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c47c4bf7352b13764a0ec1aa497a6f24f3913ad9\">c47c4bf</a></td><td><code>Correct indent</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23b6336c41b459300bf4ddb6d7435a92226537a3\">23b6336</a></td><td><code>Merge branch 'public/build/multiarchsimple' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a52fbf72d83b2488845f4caeb15798ed5a217e7\">6a52fbf</a></td><td><code>Remove lazy import finish startup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f96025e08caeb0b747a391243860c562ebd515a1\">f96025e</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/startupWarning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b952bb5661206b5614dfe6117c27021627b19616\">b952bb5</a></td><td><code>Fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6857ddffa15533845133867febbad1b7f854d4d\">c6857dd</a></td><td><code>Hopefully fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23da14b03ee782934119597465f8ab1f9db5318f\">23da14b</a></td><td><code>Wrap each sage.all import in startup guard</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f4055e37bea3705a2ab165da42c32363801ddae\">2f4055e</a></td><td><code>Specify that exit was succesful</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4d94a8dec4d876517974bc94de3b83ede14061f\">d4d94a8</a></td><td><code>Indeed replace exception by print statement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/680f85d72cf88ae96e0bc4bf7b422e694f353437\">680f85d</a></td><td><code>Merge branch 'public/build/startupWarning' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-11-13T11:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599431",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c47c4bf7352b13764a0ec1aa497a6f24f3913ad9">c47c4bf</a></td><td><code>Correct indent</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23b6336c41b459300bf4ddb6d7435a92226537a3">23b6336</a></td><td><code>Merge branch 'public/build/multiarchsimple' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a52fbf72d83b2488845f4caeb15798ed5a217e7">6a52fbf</a></td><td><code>Remove lazy import finish startup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f96025e08caeb0b747a391243860c562ebd515a1">f96025e</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/startupWarning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b952bb5661206b5614dfe6117c27021627b19616">b952bb5</a></td><td><code>Fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6857ddffa15533845133867febbad1b7f854d4d">c6857dd</a></td><td><code>Hopefully fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23da14b03ee782934119597465f8ab1f9db5318f">23da14b</a></td><td><code>Wrap each sage.all import in startup guard</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f4055e37bea3705a2ab165da42c32363801ddae">2f4055e</a></td><td><code>Specify that exit was succesful</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4d94a8dec4d876517974bc94de3b83ede14061f">d4d94a8</a></td><td><code>Indeed replace exception by print statement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/680f85d72cf88ae96e0bc4bf7b422e694f353437">680f85d</a></td><td><code>Merge branch 'public/build/startupWarning' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599432.json:
```json
{
    "body": "**Changing commit** from \"[17f367eebf0e329275773e0c048f3009b2de19ed](https://github.com/sagemath/sagetrac-mirror/commit/17f367eebf0e329275773e0c048f3009b2de19ed)\" to \"[680f85d72cf88ae96e0bc4bf7b422e694f353437](https://github.com/sagemath/sagetrac-mirror/commit/680f85d72cf88ae96e0bc4bf7b422e694f353437)\".",
    "created_at": "2020-11-13T11:25:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599432",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[17f367eebf0e329275773e0c048f3009b2de19ed](https://github.com/sagemath/sagetrac-mirror/commit/17f367eebf0e329275773e0c048f3009b2de19ed)" to "[680f85d72cf88ae96e0bc4bf7b422e694f353437](https://github.com/sagemath/sagetrac-mirror/commit/680f85d72cf88ae96e0bc4bf7b422e694f353437)".



---

archive/issue_comments_599433.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddcf2e3ba09cb3731042c1372b93e4db84f93b13\">ddcf2e3</a></td><td><code>Cleanup code</code></td></tr></table>\n",
    "created_at": "2020-11-13T17:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddcf2e3ba09cb3731042c1372b93e4db84f93b13">ddcf2e3</a></td><td><code>Cleanup code</code></td></tr></table>




---

archive/issue_comments_599434.json:
```json
{
    "body": "**Changing commit** from \"[680f85d72cf88ae96e0bc4bf7b422e694f353437](https://github.com/sagemath/sagetrac-mirror/commit/680f85d72cf88ae96e0bc4bf7b422e694f353437)\" to \"[ddcf2e3ba09cb3731042c1372b93e4db84f93b13](https://github.com/sagemath/sagetrac-mirror/commit/ddcf2e3ba09cb3731042c1372b93e4db84f93b13)\".",
    "created_at": "2020-11-13T17:38:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[680f85d72cf88ae96e0bc4bf7b422e694f353437](https://github.com/sagemath/sagetrac-mirror/commit/680f85d72cf88ae96e0bc4bf7b422e694f353437)" to "[ddcf2e3ba09cb3731042c1372b93e4db84f93b13](https://github.com/sagemath/sagetrac-mirror/commit/ddcf2e3ba09cb3731042c1372b93e4db84f93b13)".



---

archive/issue_comments_599435.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2088ffd24b7a29947148a90c78d01b2ac82b9228\">2088ffd</a></td><td><code>Upgrade to dotnet 5.0 rc2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b1750d0cd630fc76485527abbb894651fcc9c00\">1b1750d</a></td><td><code>Upgrade to dotnet 5.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/638ecbecb30bf48a99b5192848501d3ab60d9960\">638ecbe</a></td><td><code>Install wget before using it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/772baf208259ff75edebdbf6f340c700be0681ab\">772baf2</a></td><td><code>Install tzdata earlier</code></td></tr></table>\n",
    "created_at": "2020-11-13T19:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599435",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2088ffd24b7a29947148a90c78d01b2ac82b9228">2088ffd</a></td><td><code>Upgrade to dotnet 5.0 rc2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b1750d0cd630fc76485527abbb894651fcc9c00">1b1750d</a></td><td><code>Upgrade to dotnet 5.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/638ecbecb30bf48a99b5192848501d3ab60d9960">638ecbe</a></td><td><code>Install wget before using it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/772baf208259ff75edebdbf6f340c700be0681ab">772baf2</a></td><td><code>Install tzdata earlier</code></td></tr></table>




---

archive/issue_comments_599436.json:
```json
{
    "body": "**Changing commit** from \"[ddcf2e3ba09cb3731042c1372b93e4db84f93b13](https://github.com/sagemath/sagetrac-mirror/commit/ddcf2e3ba09cb3731042c1372b93e4db84f93b13)\" to \"[772baf208259ff75edebdbf6f340c700be0681ab](https://github.com/sagemath/sagetrac-mirror/commit/772baf208259ff75edebdbf6f340c700be0681ab)\".",
    "created_at": "2020-11-13T19:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599436",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ddcf2e3ba09cb3731042c1372b93e4db84f93b13](https://github.com/sagemath/sagetrac-mirror/commit/ddcf2e3ba09cb3731042c1372b93e4db84f93b13)" to "[772baf208259ff75edebdbf6f340c700be0681ab](https://github.com/sagemath/sagetrac-mirror/commit/772baf208259ff75edebdbf6f340c700be0681ab)".



---

archive/issue_comments_599437.json:
```json
{
    "body": "<a id='comment:8'></a>\nI've now merged the latest version of the dependencies, and cleaned the code.\n\nMatthias (and others, of course), it would be nice if you could review the code (and its dependencies). I have a hard time working on other tickets as long as this ticket is not merged. So I would be grateful if that happens as soon as possible. Thanks!",
    "created_at": "2020-11-13T19:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599437",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>
I've now merged the latest version of the dependencies, and cleaned the code.

Matthias (and others, of course), it would be nice if you could review the code (and its dependencies). I have a hard time working on other tickets as long as this ticket is not merged. So I would be grateful if that happens as soon as possible. Thanks!



---

archive/issue_comments_599438.json:
```json
{
    "body": "<a id='comment:9'></a>\nSee if you can get doctesting to work on this branch - by merging #30578.",
    "created_at": "2020-11-13T20:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599438",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
See if you can get doctesting to work on this branch - by merging #30578.



---

archive/issue_comments_599439.json:
```json
{
    "body": "<a id='comment:0'></a>\nAlso removing `sage-env-config` from the list of installed scripts is not good. Instead please review and merge #29850 - which reassigns this script to the `sage_conf` package.",
    "created_at": "2020-11-14T00:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599439",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Also removing `sage-env-config` from the list of installed scripts is not good. Instead please review and merge #29850 - which reassigns this script to the `sage_conf` package.



---

archive/issue_comments_599440.json:
```json
{
    "body": "<a id='comment:171'></a>\nReplying to [mkoeppe](#comment%3A169):\n> See if you can get doctesting to work on this branch - by merging #30578.\n\nIn #30578 I had to add a few more packages to `requirements.txt` that you don't have in `Pipfile` yet, so that more doctests pass.",
    "created_at": "2020-11-14T02:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599440",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:171'></a>
Replying to [mkoeppe](#comment%3A169):
> See if you can get doctesting to work on this branch - by merging #30578.

In #30578 I had to add a few more packages to `requirements.txt` that you don't have in `Pipfile` yet, so that more doctests pass.



---

archive/issue_comments_599441.json:
```json
{
    "body": "<a id='comment:172'></a>\nReplying to [mkoeppe](#comment%3A170):\n> Also removing `sage-env-config` from the list of installed scripts is not good. Instead please review and merge #29850 - which reassigns this script to the `sage_conf` package.\n\n\nI agree #29850 is a better solution. I had a look at that ticket, but don't really feel comfortable enough with the code to review it. Sorry! However, I've now added it as a dependency of this branch, and will merge as soon as it is reviewed.",
    "created_at": "2020-11-14T13:19:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599441",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:172'></a>
Replying to [mkoeppe](#comment%3A170):
> Also removing `sage-env-config` from the list of installed scripts is not good. Instead please review and merge #29850 - which reassigns this script to the `sage_conf` package.


I agree #29850 is a better solution. I had a look at that ticket, but don't really feel comfortable enough with the code to review it. Sorry! However, I've now added it as a dependency of this branch, and will merge as soon as it is reviewed.



---

archive/issue_comments_599442.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #30748\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850\".",
    "created_at": "2020-11-14T13:19:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599442",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #30748" to "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850".



---

archive/issue_comments_599443.json:
```json
{
    "body": "<a id='comment:174'></a>\nReplying to [mkoeppe](#comment%3A171):\n> Replying to [mkoeppe](#comment%3A169):\n> > See if you can get doctesting to work on this branch - by merging #30578.\n\n> In #30578 I had to add a few more packages to `requirements.txt` that you don't have in `Pipfile` yet, so that more doctests pass.\n\nThanks for the pointer! I've now added these packages also to the pipfile. However, it is way beyond the scope of this ticket to make the doctest pass in the GH pipenv workflow. There are just so many things that need to be changed in order for the doctests to find the correct dependencies. For example, here are a few relevant error messages:\n\n```\nFileNotFoundError: [Errno 2] No such file or directory: '/mnt/d/Programming/Projects/sage/src/.venv/bin/gap'\n\nRuntimeError: unable to start singular because the command 'Singular -t --ticks-per-sec 1000 --cntrlc=a' failed: The command was not found or was not executable: Singular.\n\nRuntimeError: In order to initialize the database, /__w/sage/sage/src/.venv/share/conway_polynomials/conway_polynomials.p must exist.\n```\n\nI know that some of these errors would disappear if one use your recent progress towards installation of sage-build wheels.\n\nAnyway, the aim of this ticket is to create a mostly-working editable install of sagelib. Making the doctests pass relative to this editable install in a venv should be subject of a follow-up ticket.",
    "created_at": "2020-11-14T13:52:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599443",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:174'></a>
Replying to [mkoeppe](#comment%3A171):
> Replying to [mkoeppe](#comment%3A169):
> > See if you can get doctesting to work on this branch - by merging #30578.

> In #30578 I had to add a few more packages to `requirements.txt` that you don't have in `Pipfile` yet, so that more doctests pass.

Thanks for the pointer! I've now added these packages also to the pipfile. However, it is way beyond the scope of this ticket to make the doctest pass in the GH pipenv workflow. There are just so many things that need to be changed in order for the doctests to find the correct dependencies. For example, here are a few relevant error messages:

```
FileNotFoundError: [Errno 2] No such file or directory: '/mnt/d/Programming/Projects/sage/src/.venv/bin/gap'

RuntimeError: unable to start singular because the command 'Singular -t --ticks-per-sec 1000 --cntrlc=a' failed: The command was not found or was not executable: Singular.

RuntimeError: In order to initialize the database, /__w/sage/sage/src/.venv/share/conway_polynomials/conway_polynomials.p must exist.
```

I know that some of these errors would disappear if one use your recent progress towards installation of sage-build wheels.

Anyway, the aim of this ticket is to create a mostly-working editable install of sagelib. Making the doctests pass relative to this editable install in a venv should be subject of a follow-up ticket.



---

archive/issue_comments_599444.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3174ff90687c6cc5e58ad6c14a2f2c34cb18d10\">d3174ff</a></td><td><code>Fix merge problems</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e926c7eb443cdf73a79e83608dc7b7b573d27e1\">7e926c7</a></td><td><code>Run compilation in parallel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/488e6dc29261a8912ae7524547b753646268c861\">488e6dc</a></td><td><code>Update and extend dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68c98d35125c36ba4703c09588df276dbadcb976\">68c98d3</a></td><td><code>Fix merge error for gap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f1b1f0113df58d2fdd740f289773b17fe22eb036\">f1b1f01</a></td><td><code>Install singular package as well</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad0f33cd4c67d2eb31cbf864e8112caeb8958990\">ad0f33c</a></td><td><code>Remove parallelization again (doesn't work)</code></td></tr></table>\n",
    "created_at": "2020-11-14T13:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3174ff90687c6cc5e58ad6c14a2f2c34cb18d10">d3174ff</a></td><td><code>Fix merge problems</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e926c7eb443cdf73a79e83608dc7b7b573d27e1">7e926c7</a></td><td><code>Run compilation in parallel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/488e6dc29261a8912ae7524547b753646268c861">488e6dc</a></td><td><code>Update and extend dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68c98d35125c36ba4703c09588df276dbadcb976">68c98d3</a></td><td><code>Fix merge error for gap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f1b1f0113df58d2fdd740f289773b17fe22eb036">f1b1f01</a></td><td><code>Install singular package as well</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad0f33cd4c67d2eb31cbf864e8112caeb8958990">ad0f33c</a></td><td><code>Remove parallelization again (doesn't work)</code></td></tr></table>




---

archive/issue_comments_599445.json:
```json
{
    "body": "**Changing commit** from \"[772baf208259ff75edebdbf6f340c700be0681ab](https://github.com/sagemath/sagetrac-mirror/commit/772baf208259ff75edebdbf6f340c700be0681ab)\" to \"[ad0f33cd4c67d2eb31cbf864e8112caeb8958990](https://github.com/sagemath/sagetrac-mirror/commit/ad0f33cd4c67d2eb31cbf864e8112caeb8958990)\".",
    "created_at": "2020-11-14T13:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[772baf208259ff75edebdbf6f340c700be0681ab](https://github.com/sagemath/sagetrac-mirror/commit/772baf208259ff75edebdbf6f340c700be0681ab)" to "[ad0f33cd4c67d2eb31cbf864e8112caeb8958990](https://github.com/sagemath/sagetrac-mirror/commit/ad0f33cd4c67d2eb31cbf864e8112caeb8958990)".



---

archive/issue_comments_599446.json:
```json
{
    "body": "**Changing commit** from \"[ad0f33cd4c67d2eb31cbf864e8112caeb8958990](https://github.com/sagemath/sagetrac-mirror/commit/ad0f33cd4c67d2eb31cbf864e8112caeb8958990)\" to \"[77e1af16bcfce183bfe072cfb7324e82ee95a478](https://github.com/sagemath/sagetrac-mirror/commit/77e1af16bcfce183bfe072cfb7324e82ee95a478)\".",
    "created_at": "2020-11-14T16:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ad0f33cd4c67d2eb31cbf864e8112caeb8958990](https://github.com/sagemath/sagetrac-mirror/commit/ad0f33cd4c67d2eb31cbf864e8112caeb8958990)" to "[77e1af16bcfce183bfe072cfb7324e82ee95a478](https://github.com/sagemath/sagetrac-mirror/commit/77e1af16bcfce183bfe072cfb7324e82ee95a478)".



---

archive/issue_comments_599447.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20885b6963e952cdb7cfff6b1ac4626057e00119\">20885b6</a></td><td><code>MacOS: Find openblas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f1146607fa46c3e05fc0369e474b92fad0c476d\">7f11466</a></td><td><code>Correctly specify arb dependency not flint</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/223c2e4d7e98ae2be884e7abd3acf2d1f3ef26e9\">223c2e4</a></td><td><code>Mac: add flint as dependency</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77e1af16bcfce183bfe072cfb7324e82ee95a478\">77e1af1</a></td><td><code>Mac: Add arb</code></td></tr></table>\n",
    "created_at": "2020-11-14T16:10:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20885b6963e952cdb7cfff6b1ac4626057e00119">20885b6</a></td><td><code>MacOS: Find openblas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f1146607fa46c3e05fc0369e474b92fad0c476d">7f11466</a></td><td><code>Correctly specify arb dependency not flint</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/223c2e4d7e98ae2be884e7abd3acf2d1f3ef26e9">223c2e4</a></td><td><code>Mac: add flint as dependency</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77e1af16bcfce183bfe072cfb7324e82ee95a478">77e1af1</a></td><td><code>Mac: Add arb</code></td></tr></table>




---

archive/issue_comments_599448.json:
```json
{
    "body": "<a id='comment:177'></a>\nReplying to [gh-tobiasdiez](#comment%3A174):\n> Anyway, the aim of this ticket is to create a mostly-working editable install of sagelib. \n\n\nMost of the changes that you are doing in this ticket have really nothing to do with this goal. As I have pointed out previously, you are trying to solve the orthogonal problem of making sagelib work outside of the Sage distribution, i.e., without SAGE_LOCAL.",
    "created_at": "2020-11-14T20:06:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599448",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:177'></a>
Replying to [gh-tobiasdiez](#comment%3A174):
> Anyway, the aim of this ticket is to create a mostly-working editable install of sagelib. 


Most of the changes that you are doing in this ticket have really nothing to do with this goal. As I have pointed out previously, you are trying to solve the orthogonal problem of making sagelib work outside of the Sage distribution, i.e., without SAGE_LOCAL.



---

archive/issue_comments_599449.json:
```json
{
    "body": "<a id='comment:8'></a>\nI agree. The thing is that it is currently my only way to work with sage, and thus test the editable install. But it's good that you are pushing from the other side and work on the editable install based on a working sage distribution.\n\nSo, is there something that I can still do here? I see that verifying and testing that the editable install works is important. It's just not very realistic to have a fully functional doctest without SAGE_LOCAL at the moment. However, I can also not very actively contribute to the editable install with SAGE_LOCAL.",
    "created_at": "2020-11-14T22:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599449",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>
I agree. The thing is that it is currently my only way to work with sage, and thus test the editable install. But it's good that you are pushing from the other side and work on the editable install based on a working sage distribution.

So, is there something that I can still do here? I see that verifying and testing that the editable install works is important. It's just not very realistic to have a fully functional doctest without SAGE_LOCAL at the moment. However, I can also not very actively contribute to the editable install with SAGE_LOCAL.



---

archive/issue_comments_599450.json:
```json
{
    "body": "<a id='comment:179'></a>\nReplying to [gh-tobiasdiez](#comment%3A178):\n> I agree. The thing is that it is currently my only way to work with sage, and thus test the editable install. \n\nIs the WSL build of the Sage distribution still failing for you? Have you tried a different Linux distribution?\nSo far the WSL runs on GH Actions have not been very conclusive - they have failed for unrelated reasons - you could work on #30910 to improve it",
    "created_at": "2020-11-14T23:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599450",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:179'></a>
Replying to [gh-tobiasdiez](#comment%3A178):
> I agree. The thing is that it is currently my only way to work with sage, and thus test the editable install. 

Is the WSL build of the Sage distribution still failing for you? Have you tried a different Linux distribution?
So far the WSL runs on GH Actions have not been very conclusive - they have failed for unrelated reasons - you could work on #30910 to improve it



---

archive/issue_comments_599451.json:
```json
{
    "body": "<a id='comment:0'></a>\nAlso, I am interested in a GH Actions workflow for the various new installations (venv based on requirements on top of SAGE_LOCAL, venv based on Pipfile on top of SAGE_LOCAL, conda without SAGE_LOCAL, etc.) This ticket adds something like this, but I don't like that it does Ubuntu-specific things again. We have a better way of doing such things already so that everything can be tested on all supported distributions, not just some Ubuntu. I would hope that we can add such workflows in #30845. #30859 will help with this. The powershell bits to work with system packages could also be valuable - see #30865.",
    "created_at": "2020-11-14T23:43:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599451",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Also, I am interested in a GH Actions workflow for the various new installations (venv based on requirements on top of SAGE_LOCAL, venv based on Pipfile on top of SAGE_LOCAL, conda without SAGE_LOCAL, etc.) This ticket adds something like this, but I don't like that it does Ubuntu-specific things again. We have a better way of doing such things already so that everything can be tested on all supported distributions, not just some Ubuntu. I would hope that we can add such workflows in #30845. #30859 will help with this. The powershell bits to work with system packages could also be valuable - see #30865.



---

archive/issue_comments_599452.json:
```json
{
    "body": "<a id='comment:181'></a>\nReplying to [mkoeppe](#comment%3A179):\n> Is the WSL build of the Sage distribution still failing for you? Have you tried a different Linux distribution?\n\n\nYes, it's still not working. In a few weeks I'll get a new PC and then will try again afresh using WSL 2.0.",
    "created_at": "2020-11-15T12:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599452",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:181'></a>
Replying to [mkoeppe](#comment%3A179):
> Is the WSL build of the Sage distribution still failing for you? Have you tried a different Linux distribution?


Yes, it's still not working. In a few weeks I'll get a new PC and then will try again afresh using WSL 2.0.



---

archive/issue_comments_599453.json:
```json
{
    "body": "<a id='comment:182'></a>\nReplying to [mkoeppe](#comment%3A180):\n> This ticket adds something like this, but I don't like that it does Ubuntu-specific things again. We have a better way of doing such things already so that everything can be tested on all supported distributions, not just some Ubuntu.\n\n\nYes and no. Since the whole workflow only takes about 2 hours, my hope was that one can use it in the longterm to run it on each push to each branch, replacing/complementing the patchbot. But of course it could also serve as the blueprint for a complete matrix integration test suite.\nAnyway, for the moment it serves as a record of the things I did locally on my system, and proofs that the editable install without SAGE_LOCAL works to a large degree.",
    "created_at": "2020-11-15T12:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599453",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:182'></a>
Replying to [mkoeppe](#comment%3A180):
> This ticket adds something like this, but I don't like that it does Ubuntu-specific things again. We have a better way of doing such things already so that everything can be tested on all supported distributions, not just some Ubuntu.


Yes and no. Since the whole workflow only takes about 2 hours, my hope was that one can use it in the longterm to run it on each push to each branch, replacing/complementing the patchbot. But of course it could also serve as the blueprint for a complete matrix integration test suite.
Anyway, for the moment it serves as a record of the things I did locally on my system, and proofs that the editable install without SAGE_LOCAL works to a large degree.



---

archive/issue_comments_599454.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314\".",
    "created_at": "2020-11-17T21:39:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599454",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850" to "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314".



---

archive/issue_comments_599455.json:
```json
{
    "body": "<a id='comment:3'></a>\nAfter playing around with it further I was able to make most of the tests pass. There are still a few hundreds that fail (see below for details), most of which are related to issues with maxima (TypeError: unable to start maxima: End Of File (EOF). Exception style platform.) or fpylll (blocked due to https://github.com/fplll/fpylll/issues/185). Since most test pass and there are many subpackages for which all tests pass, I'd say that's enough \"proof of concept\" for this ticket and would leave the rest for follow-up tickets.\n\n```\n2020-11-17T19:31:00.7800025Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interacts/debugger.py  # 2 doctests failed\n2020-11-17T19:31:00.7801032Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/singular.py  # 5 doctests failed\n2020-11-17T19:31:00.7802028Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/maxima_lib.py  # 1 doctest failed\n2020-11-17T19:31:00.7803005Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/quit.py  # 6 doctests failed\n2020-11-17T19:31:00.7803974Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/maxima.py  # 144 doctests failed\n2020-11-17T19:31:00.7804998Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/maxima_abstract.py  # 168 doctests failed\n2020-11-17T19:31:00.7806039Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/interface.py  # 90 doctests failed\n2020-11-17T19:31:00.7807034Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/expect.py  # 6 doctests failed\n2020-11-17T19:31:00.7808001Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/tests.py  # 3 doctests failed\n2020-11-17T19:31:00.7809010Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/gap_workspace.py  # 2 doctests failed\n2020-11-17T19:31:00.7810009Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/rational.pyx  # 2 doctests failed\n2020-11-17T19:31:00.7810921Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/ring.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7811830Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/infinity.py  # 1 doctest failed\n2020-11-17T19:31:00.7812754Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/real_mpfr.pyx  # 9 doctests failed\n2020-11-17T19:31:00.7813669Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/real_mpfi.pyx  # 3 doctests failed\n2020-11-17T19:31:00.7814600Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/complex_mpfr.pyx  # 2 doctests failed\n2020-11-17T19:31:00.7815569Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/localization.py  # 1 doctest failed\n2020-11-17T19:31:00.7816785Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/tests.py  # 2 doctests failed\n2020-11-17T19:31:00.7817714Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/integer_ring.pyx  # 5 doctests failed\n2020-11-17T19:31:00.7818771Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_zmod_flint.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7819934Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_quotient_ring.py  # 1 doctest failed\n2020-11-17T19:31:00.7821093Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_modn_dense_ntl.pyx  # 6 doctests failed\n2020-11-17T19:31:00.7822245Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_element.pyx  # 13 doctests failed\n2020-11-17T19:31:00.7823414Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_number_field.pyx  # 19 doctests failed\n2020-11-17T19:31:00.7824560Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/multi_polynomial_ring.py  # 2 doctests failed\n2020-11-17T19:31:00.7825670Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/finite_rings/residue_field.pyx  # 14 doctests failed\n2020-11-17T19:31:00.7826727Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/S_unit_solver.py  # 18 doctests failed\n2020-11-17T19:31:00.7827787Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field_base.pyx  # 15 doctests failed\n2020-11-17T19:31:00.7828969Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/class_group.py  # 2 doctests failed\n2020-11-17T19:31:00.7830020Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field_ideal.py  # 1 doctest failed\n2020-11-17T19:31:00.7831068Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/galois_group.py  # 58 doctests failed\n2020-11-17T19:31:00.7832134Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/splitting_field.py  # 28 doctests failed\n2020-11-17T19:31:00.7833172Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/order.py  # 6 doctests failed\n2020-11-17T19:31:00.7834186Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field.py  # 33 doctests failed\n2020-11-17T19:31:00.7835200Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/unit_group.py  # 1 doctest failed\n2020-11-17T19:31:00.7836234Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field_rel.py  # 11 doctests failed\n2020-11-17T19:31:00.7837488Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field_element.pyx  # 27 doctests failed\n2020-11-17T19:31:00.7838576Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/bdd_height.py  # 2 doctests failed\n2020-11-17T19:31:00.7839663Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/valuation/inductive_valuation.py  # 4 doctests failed\n2020-11-17T19:31:00.7840725Z sage -t --random-seed=0 /__w/sage/sage/src/sage/cpython/dict_del_by_value.pyx  # 2 doctests failed\n2020-11-17T19:31:00.7841710Z sage -t --random-seed=0 /__w/sage/sage/src/sage/databases/cremona.py  # 2 doctests failed\n2020-11-17T19:31:00.7842673Z sage -t --random-seed=0 /__w/sage/sage/src/sage/groups/cubic_braid.py  # 6 doctests failed\n2020-11-17T19:31:00.7843635Z sage -t --random-seed=0 /__w/sage/sage/src/sage/sandpiles/sandpile.py  # 5 doctests failed\n2020-11-17T19:31:00.7844616Z sage -t --random-seed=0 /__w/sage/sage/src/sage/coding/gabidulin_code.py  # 1 doctest failed\n2020-11-17T19:31:00.7845566Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/cmdline.py  # 59 doctests failed\n2020-11-17T19:31:00.7846502Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/benchmark.py  # 4 doctests failed\n2020-11-17T19:31:00.7847448Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/gap_packages.py  # 1 doctest failed\n2020-11-17T19:31:00.7848644Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/judson-abstract-algebra/galois-sage.py  # 9 doctests failed\n2020-11-17T19:31:00.7850157Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/judson-abstract-algebra/fields-sage.py  # 17 doctests failed\n2020-11-17T19:31:00.7851577Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/judson-abstract-algebra/domains-sage.py  # 5 doctests failed\n2020-11-17T19:31:00.7853321Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/polynomes_doctest.py  # 1 doctest failed\n2020-11-17T19:31:00.7855341Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/domaines_doctest.py  # 3 doctests failed\n2020-11-17T19:31:00.7857340Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/combinat_doctest.py  # 1 doctest failed\n2020-11-17T19:31:00.7859360Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py  # 1 doctest failed\n2020-11-17T19:31:00.7861360Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/mpoly_doctest.py  # 2 doctests failed\n2020-11-17T19:31:00.7863355Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/calculus_doctest.py  # 3 doctests failed\n2020-11-17T19:31:00.7865352Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/sol/mpoly_doctest.py  # 2 doctests failed\n2020-11-17T19:31:00.7867492Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/sol/graphique_doctest.py  # 8 doctests failed\n2020-11-17T19:31:00.7868993Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/configuration.py  # 1 doctest failed\n2020-11-17T19:31:00.7869942Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/image.py  # 4 doctests failed\n2020-11-17T19:31:00.7870875Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/interpreter.py  # 7 doctests failed\n2020-11-17T19:31:00.7871818Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/preparse.py  # 1 doctest failed\n2020-11-17T19:31:00.7872750Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/ipython_tests.py  # 1 doctest failed\n2020-11-17T19:31:00.7873726Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/rich_output/pretty_print.py  # 3 doctests failed\n2020-11-17T19:31:00.7874739Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/ipython_kernel/install.py  # 1 doctest failed\n2020-11-17T19:31:00.7875703Z sage -t --random-seed=0 /__w/sage/sage/src/sage/doctest/forker.py  # 1 doctest failed\n2020-11-17T19:31:00.7876633Z sage -t --random-seed=0 /__w/sage/sage/src/sage/doctest/control.py  # 2 doctests failed\n2020-11-17T19:31:00.7883133Z sage -t --random-seed=0 /__w/sage/sage/src/sage/doctest/test.py  # 3 doctests failed\n2020-11-17T19:31:00.7884402Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/singular/function.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7885406Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/pari/convert_sage.pyx  # 10 doctests failed\n2020-11-17T19:31:00.7886362Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/pari/__init__.py  # 12 doctests failed\n2020-11-17T19:31:00.7887265Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/pari/tests.py  # 9 doctests failed\n2020-11-17T19:31:00.7888179Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/pynac/pynac.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7889240Z sage -t --random-seed=0 /__w/sage/sage/src/sage/dynamics/arithmetic_dynamics/generic_ds.py  # 10 doctests failed\n2020-11-17T19:31:00.7890445Z sage -t --random-seed=0 /__w/sage/sage/src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # 25 doctests failed\n2020-11-17T19:31:00.7891469Z sage -t --random-seed=0 /__w/sage/sage/src/sage/arith/misc.py  # 20 doctests failed\n2020-11-17T19:31:00.7892598Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py  # 3 doctests failed\n2020-11-17T19:31:00.7893789Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/product_projective/space.py  # 1 doctest failed\n2020-11-17T19:31:00.7895096Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/product_projective/rational_point.py  # 1 doctest failed\n2020-11-17T19:31:00.7896170Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/affine/affine_space.py  # 1 doctest failed\n2020-11-17T19:31:00.7897209Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/generic/algebraic_scheme.py  # 1 doctest failed\n2020-11-17T19:31:00.7898340Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/riemann_surfaces/riemann_surface.py  # 31 doctests failed\n2020-11-17T19:31:00.7899522Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/projective/projective_rational_point.py  # 4 doctests failed\n2020-11-17T19:31:00.7900680Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/projective/projective_space.py  # 1 doctest failed\n2020-11-17T19:31:00.7901771Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/toric_subscheme.py  # 11 doctests failed\n2020-11-17T19:31:00.7902793Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/divisor.py  # 2 doctests failed\n2020-11-17T19:31:00.7903768Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/points.py  # 1 doctest failed\n2020-11-17T19:31:00.7904739Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/variety.py  # 4 doctests failed\n2020-11-17T19:31:00.7905707Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/ideal.py  # 43 doctests failed\n2020-11-17T19:31:00.7906825Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/heegner.py  # 33 doctests failed\n2020-11-17T19:31:00.7907884Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/kraus.py  # 4 doctests failed\n2020-11-17T19:31:00.7908978Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/constructor.py  # 4 doctests failed\n2020-11-17T19:31:00.7910128Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/gal_reps_number_field.py  # 2 doctests failed\n2020-11-17T19:31:00.7911278Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_rational_field.py  # 14 doctests failed\n2020-11-17T19:31:00.7912397Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/isogeny_class.py  # 2 doctests failed\n2020-11-17T19:31:00.7913509Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_number_field.py  # 26 doctests failed\n2020-11-17T19:31:00.7914601Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/gal_reps.py  # 2 doctests failed\n2020-11-17T19:31:00.7915708Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/isogeny_small_degree.py  # 1 doctest failed\n2020-11-17T19:31:00.7916803Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_egros.py  # 4 doctests failed\n2020-11-17T19:31:00.7918998Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py  # 1 doctest failed\n2020-11-17T19:31:00.7920093Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_field.py  # 2 doctests failed\n2020-11-17T19:31:00.7921146Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/plane_conics/con_field.py  # 7 doctests failed\n2020-11-17T19:31:00.7922203Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/plane_conics/con_number_field.py  # 3 doctests failed\n2020-11-17T19:31:00.7923188Z sage -t --random-seed=0 /__w/sage/sage/src/sage/features/__init__.py  # 1 doctest failed\n2020-11-17T19:31:00.7924137Z sage -t --random-seed=0 /__w/sage/sage/src/sage/calculus/desolvers.py  # 8 doctests failed\n2020-11-17T19:31:00.7925128Z sage -t --random-seed=0 /__w/sage/sage/src/sage/calculus/calculus.py  # 25 doctests failed\n2020-11-17T19:31:00.7926071Z sage -t --random-seed=0 /__w/sage/sage/src/sage/crypto/lattice.py  # 1 doctest failed\n2020-11-17T19:31:00.7927011Z sage -t --random-seed=0 /__w/sage/sage/src/sage/combinat/tutorial.py  # 1 doctest failed\n2020-11-17T19:31:00.7927975Z sage -t --random-seed=0 /__w/sage/sage/src/sage/combinat/combinat.py  # 5 doctests failed\n2020-11-17T19:31:00.7929092Z sage -t --random-seed=0 /__w/sage/sage/src/sage/combinat/degree_sequences.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7930148Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/algebra_functor.py  # 5 doctests failed\n2020-11-17T19:31:00.7931175Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/number_fields.py  # 1 doctest failed\n2020-11-17T19:31:00.7932168Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/rings.py  # 12 doctests failed\n2020-11-17T19:31:00.7933122Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/primer.py  # 1 doctest failed\n2020-11-17T19:31:00.7934130Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/quotient_fields.py  # 7 doctests failed\n2020-11-17T19:31:00.7935102Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modular/cusps_nf.py  # 1 doctest failed\n2020-11-17T19:31:00.7936063Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modular/etaproducts.py  # 10 doctests failed\n2020-11-17T19:31:00.7937057Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modular/modsym/p1list_nf.py  # 1 doctest failed\n2020-11-17T19:31:00.7938011Z sage -t --random-seed=0 /__w/sage/sage/src/sage/structure/formal_sum.py  # 1 doctest failed\n2020-11-17T19:31:00.7938985Z sage -t --random-seed=0 /__w/sage/sage/src/sage/structure/element.pyx  # 5 doctests failed\n2020-11-17T19:31:00.7940062Z sage -t --random-seed=0 /__w/sage/sage/src/sage/structure/dynamic_class.py  # 1 doctest failed\n2020-11-17T19:31:00.7941022Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/nested_class.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7941915Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/trace.py  # 3 doctests failed\n2020-11-17T19:31:00.7942828Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/sage_ostools.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7943764Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/functional.py  # 1 doctest failed\n2020-11-17T19:31:00.7944692Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/edit_module.py  # 1 doctest failed\n2020-11-17T19:31:00.7945625Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/temporary_file.py  # 1 doctest failed\n2020-11-17T19:31:00.7946578Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/lazy_attribute.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7947551Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/sageinspect.py  # 13 doctests failed\n2020-11-17T19:31:00.7948497Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/sagedoc.py  # 3 doctests failed\n2020-11-17T19:31:00.7949390Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/compat.py  # 1 doctest failed\n2020-11-17T19:31:00.7950304Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/sphinxify.py  # 4 doctests failed\n2020-11-17T19:31:00.7951326Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/hypergeometric.py  # 7 doctests failed\n2020-11-17T19:31:00.7952357Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/bessel.py  # 7 doctests failed\n2020-11-17T19:31:00.7953305Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/gamma.py  # 2 doctests failed\n2020-11-17T19:31:00.7954306Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/special.py  # 1 doctest failed\n2020-11-17T19:31:00.7955238Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/trig.py  # 1 doctest failed\n2020-11-17T19:31:00.7956168Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/error.py  # 7 doctests failed\n2020-11-17T19:31:00.7957101Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/log.py  # 6 doctests failed\n2020-11-17T19:31:00.7958207Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/other.py  # 15 doctests failed\n2020-11-17T19:31:00.7959216Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/orthogonal_polys.py  # 11 doctests failed\n2020-11-17T19:31:00.7960272Z sage -t --random-seed=0 /__w/sage/sage/src/sage/geometry/polyhedron/parent.py  # 2 doctests failed\n2020-11-17T19:31:00.7961352Z sage -t --random-seed=0 /__w/sage/sage/src/sage/geometry/polyhedron/palp_database.py  # 1 doctest failed\n2020-11-17T19:31:00.7962568Z sage -t --random-seed=0 /__w/sage/sage/src/sage/algebras/quaternion_algebra_element.py  # 4 doctests failed\n2020-11-17T19:31:00.7963697Z sage -t --random-seed=0 /__w/sage/sage/src/sage/algebras/quatalg/quaternion_algebra.py  # 6 doctests failed\n2020-11-17T19:31:00.7964873Z sage -t --random-seed=0 /__w/sage/sage/src/sage/algebras/quatalg/quaternion_algebra_element.pyx  # 38 doctests failed\n2020-11-17T19:31:00.7965949Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/free_module.py  # 5 doctests failed\n2020-11-17T19:31:00.7966956Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/free_module_morphism.py  # 3 doctests failed\n2020-11-17T19:31:00.7967988Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/free_module_integer.py  # 57 doctests failed\n2020-11-17T19:31:00.7969027Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/vector_space_morphism.py  # 3 doctests failed\n2020-11-17T19:31:00.7970041Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/fg_pid/fgp_module.py  # 3 doctests failed\n2020-11-17T19:31:00.7971051Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/expression.pyx  # 17 doctests failed\n2020-11-17T19:31:00.7972071Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/assumptions.py  # 3 doctests failed\n2020-11-17T19:31:00.7973064Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/constants_c.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7974140Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/maxima_wrapper.py  # 2 doctests failed\n2020-11-17T19:31:00.7975123Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/relation.py  # 4 doctests failed\n2020-11-17T19:31:00.7976102Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/constants.py  # 17 doctests failed\n2020-11-17T19:31:00.7977173Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/expression_conversions.py  # 10 doctests failed\n2020-11-17T19:31:00.7978261Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/comparability.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7979313Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/digraph_generators.py  # 8 doctests failed\n2020-11-17T19:31:00.7980236Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/graph.py  # Timed out\n2020-11-17T19:31:00.7981184Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/connectivity.pyx  # 2 doctests failed\n2020-11-17T19:31:00.7982192Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/graph_generators.py  # Timed out\n2020-11-17T19:31:00.7983217Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/hypergraph_generators.py  # 9 doctests failed\n2020-11-17T19:31:00.7984259Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/graph_coloring.pyx  # 2 doctests failed\n2020-11-17T19:31:00.7985206Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/genus.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7986147Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/generic_graph_pyx.pyx  # 2 doctests failed\n2020-11-17T19:31:00.7987202Z sage -t --random-seed=0 /__w/sage/sage/src/sage/sets/set_from_iterator.py  # Timed out (and interrupt failed)\n2020-11-17T19:31:00.7988200Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix1.pyx  # 3 doctests failed\n2020-11-17T19:31:00.7989131Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix2.pyx  # 3 doctests failed\n2020-11-17T19:31:00.7990123Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix_rational_dense.pyx  # 1 doctest failed\n2020-11-17T19:31:00.7991189Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix_integer_dense.pyx  # 14 doctests failed\n2020-11-17T19:31:00.7992217Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix_symbolic_dense.pyx  # 1 doctest failed\n```\nhttps://github.com/tobiasdiez/sage/runs/1413136300?check_suite_focus=true",
    "created_at": "2020-11-17T21:39:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599455",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:3'></a>
After playing around with it further I was able to make most of the tests pass. There are still a few hundreds that fail (see below for details), most of which are related to issues with maxima (TypeError: unable to start maxima: End Of File (EOF). Exception style platform.) or fpylll (blocked due to https://github.com/fplll/fpylll/issues/185). Since most test pass and there are many subpackages for which all tests pass, I'd say that's enough "proof of concept" for this ticket and would leave the rest for follow-up tickets.

```
2020-11-17T19:31:00.7800025Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interacts/debugger.py  # 2 doctests failed
2020-11-17T19:31:00.7801032Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/singular.py  # 5 doctests failed
2020-11-17T19:31:00.7802028Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/maxima_lib.py  # 1 doctest failed
2020-11-17T19:31:00.7803005Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/quit.py  # 6 doctests failed
2020-11-17T19:31:00.7803974Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/maxima.py  # 144 doctests failed
2020-11-17T19:31:00.7804998Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/maxima_abstract.py  # 168 doctests failed
2020-11-17T19:31:00.7806039Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/interface.py  # 90 doctests failed
2020-11-17T19:31:00.7807034Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/expect.py  # 6 doctests failed
2020-11-17T19:31:00.7808001Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/tests.py  # 3 doctests failed
2020-11-17T19:31:00.7809010Z sage -t --random-seed=0 /__w/sage/sage/src/sage/interfaces/gap_workspace.py  # 2 doctests failed
2020-11-17T19:31:00.7810009Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/rational.pyx  # 2 doctests failed
2020-11-17T19:31:00.7810921Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/ring.pyx  # 1 doctest failed
2020-11-17T19:31:00.7811830Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/infinity.py  # 1 doctest failed
2020-11-17T19:31:00.7812754Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/real_mpfr.pyx  # 9 doctests failed
2020-11-17T19:31:00.7813669Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/real_mpfi.pyx  # 3 doctests failed
2020-11-17T19:31:00.7814600Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/complex_mpfr.pyx  # 2 doctests failed
2020-11-17T19:31:00.7815569Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/localization.py  # 1 doctest failed
2020-11-17T19:31:00.7816785Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/tests.py  # 2 doctests failed
2020-11-17T19:31:00.7817714Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/integer_ring.pyx  # 5 doctests failed
2020-11-17T19:31:00.7818771Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_zmod_flint.pyx  # 1 doctest failed
2020-11-17T19:31:00.7819934Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_quotient_ring.py  # 1 doctest failed
2020-11-17T19:31:00.7821093Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_modn_dense_ntl.pyx  # 6 doctests failed
2020-11-17T19:31:00.7822245Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_element.pyx  # 13 doctests failed
2020-11-17T19:31:00.7823414Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/polynomial_number_field.pyx  # 19 doctests failed
2020-11-17T19:31:00.7824560Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/polynomial/multi_polynomial_ring.py  # 2 doctests failed
2020-11-17T19:31:00.7825670Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/finite_rings/residue_field.pyx  # 14 doctests failed
2020-11-17T19:31:00.7826727Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/S_unit_solver.py  # 18 doctests failed
2020-11-17T19:31:00.7827787Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field_base.pyx  # 15 doctests failed
2020-11-17T19:31:00.7828969Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/class_group.py  # 2 doctests failed
2020-11-17T19:31:00.7830020Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field_ideal.py  # 1 doctest failed
2020-11-17T19:31:00.7831068Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/galois_group.py  # 58 doctests failed
2020-11-17T19:31:00.7832134Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/splitting_field.py  # 28 doctests failed
2020-11-17T19:31:00.7833172Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/order.py  # 6 doctests failed
2020-11-17T19:31:00.7834186Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field.py  # 33 doctests failed
2020-11-17T19:31:00.7835200Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/unit_group.py  # 1 doctest failed
2020-11-17T19:31:00.7836234Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field_rel.py  # 11 doctests failed
2020-11-17T19:31:00.7837488Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/number_field_element.pyx  # 27 doctests failed
2020-11-17T19:31:00.7838576Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/number_field/bdd_height.py  # 2 doctests failed
2020-11-17T19:31:00.7839663Z sage -t --random-seed=0 /__w/sage/sage/src/sage/rings/valuation/inductive_valuation.py  # 4 doctests failed
2020-11-17T19:31:00.7840725Z sage -t --random-seed=0 /__w/sage/sage/src/sage/cpython/dict_del_by_value.pyx  # 2 doctests failed
2020-11-17T19:31:00.7841710Z sage -t --random-seed=0 /__w/sage/sage/src/sage/databases/cremona.py  # 2 doctests failed
2020-11-17T19:31:00.7842673Z sage -t --random-seed=0 /__w/sage/sage/src/sage/groups/cubic_braid.py  # 6 doctests failed
2020-11-17T19:31:00.7843635Z sage -t --random-seed=0 /__w/sage/sage/src/sage/sandpiles/sandpile.py  # 5 doctests failed
2020-11-17T19:31:00.7844616Z sage -t --random-seed=0 /__w/sage/sage/src/sage/coding/gabidulin_code.py  # 1 doctest failed
2020-11-17T19:31:00.7845566Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/cmdline.py  # 59 doctests failed
2020-11-17T19:31:00.7846502Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/benchmark.py  # 4 doctests failed
2020-11-17T19:31:00.7847448Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/gap_packages.py  # 1 doctest failed
2020-11-17T19:31:00.7848644Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/judson-abstract-algebra/galois-sage.py  # 9 doctests failed
2020-11-17T19:31:00.7850157Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/judson-abstract-algebra/fields-sage.py  # 17 doctests failed
2020-11-17T19:31:00.7851577Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/judson-abstract-algebra/domains-sage.py  # 5 doctests failed
2020-11-17T19:31:00.7853321Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/polynomes_doctest.py  # 1 doctest failed
2020-11-17T19:31:00.7855341Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/domaines_doctest.py  # 3 doctests failed
2020-11-17T19:31:00.7857340Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/combinat_doctest.py  # 1 doctest failed
2020-11-17T19:31:00.7859360Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/integration_doctest.py  # 1 doctest failed
2020-11-17T19:31:00.7861360Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/mpoly_doctest.py  # 2 doctests failed
2020-11-17T19:31:00.7863355Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/calculus_doctest.py  # 3 doctests failed
2020-11-17T19:31:00.7865352Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/sol/mpoly_doctest.py  # 2 doctests failed
2020-11-17T19:31:00.7867492Z sage -t --random-seed=0 /__w/sage/sage/src/sage/tests/books/computational-mathematics-with-sagemath/sol/graphique_doctest.py  # 8 doctests failed
2020-11-17T19:31:00.7868993Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/configuration.py  # 1 doctest failed
2020-11-17T19:31:00.7869942Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/image.py  # 4 doctests failed
2020-11-17T19:31:00.7870875Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/interpreter.py  # 7 doctests failed
2020-11-17T19:31:00.7871818Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/preparse.py  # 1 doctest failed
2020-11-17T19:31:00.7872750Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/ipython_tests.py  # 1 doctest failed
2020-11-17T19:31:00.7873726Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/rich_output/pretty_print.py  # 3 doctests failed
2020-11-17T19:31:00.7874739Z sage -t --random-seed=0 /__w/sage/sage/src/sage/repl/ipython_kernel/install.py  # 1 doctest failed
2020-11-17T19:31:00.7875703Z sage -t --random-seed=0 /__w/sage/sage/src/sage/doctest/forker.py  # 1 doctest failed
2020-11-17T19:31:00.7876633Z sage -t --random-seed=0 /__w/sage/sage/src/sage/doctest/control.py  # 2 doctests failed
2020-11-17T19:31:00.7883133Z sage -t --random-seed=0 /__w/sage/sage/src/sage/doctest/test.py  # 3 doctests failed
2020-11-17T19:31:00.7884402Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/singular/function.pyx  # 1 doctest failed
2020-11-17T19:31:00.7885406Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/pari/convert_sage.pyx  # 10 doctests failed
2020-11-17T19:31:00.7886362Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/pari/__init__.py  # 12 doctests failed
2020-11-17T19:31:00.7887265Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/pari/tests.py  # 9 doctests failed
2020-11-17T19:31:00.7888179Z sage -t --random-seed=0 /__w/sage/sage/src/sage/libs/pynac/pynac.pyx  # 1 doctest failed
2020-11-17T19:31:00.7889240Z sage -t --random-seed=0 /__w/sage/sage/src/sage/dynamics/arithmetic_dynamics/generic_ds.py  # 10 doctests failed
2020-11-17T19:31:00.7890445Z sage -t --random-seed=0 /__w/sage/sage/src/sage/dynamics/arithmetic_dynamics/projective_ds.py  # 25 doctests failed
2020-11-17T19:31:00.7891469Z sage -t --random-seed=0 /__w/sage/sage/src/sage/arith/misc.py  # 20 doctests failed
2020-11-17T19:31:00.7892598Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/hyperelliptic_curves/hyperelliptic_generic.py  # 3 doctests failed
2020-11-17T19:31:00.7893789Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/product_projective/space.py  # 1 doctest failed
2020-11-17T19:31:00.7895096Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/product_projective/rational_point.py  # 1 doctest failed
2020-11-17T19:31:00.7896170Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/affine/affine_space.py  # 1 doctest failed
2020-11-17T19:31:00.7897209Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/generic/algebraic_scheme.py  # 1 doctest failed
2020-11-17T19:31:00.7898340Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/riemann_surfaces/riemann_surface.py  # 31 doctests failed
2020-11-17T19:31:00.7899522Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/projective/projective_rational_point.py  # 4 doctests failed
2020-11-17T19:31:00.7900680Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/projective/projective_space.py  # 1 doctest failed
2020-11-17T19:31:00.7901771Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/toric_subscheme.py  # 11 doctests failed
2020-11-17T19:31:00.7902793Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/divisor.py  # 2 doctests failed
2020-11-17T19:31:00.7903768Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/points.py  # 1 doctest failed
2020-11-17T19:31:00.7904739Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/variety.py  # 4 doctests failed
2020-11-17T19:31:00.7905707Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/toric/ideal.py  # 43 doctests failed
2020-11-17T19:31:00.7906825Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/heegner.py  # 33 doctests failed
2020-11-17T19:31:00.7907884Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/kraus.py  # 4 doctests failed
2020-11-17T19:31:00.7908978Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/constructor.py  # 4 doctests failed
2020-11-17T19:31:00.7910128Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/gal_reps_number_field.py  # 2 doctests failed
2020-11-17T19:31:00.7911278Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_rational_field.py  # 14 doctests failed
2020-11-17T19:31:00.7912397Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/isogeny_class.py  # 2 doctests failed
2020-11-17T19:31:00.7913509Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_number_field.py  # 26 doctests failed
2020-11-17T19:31:00.7914601Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/gal_reps.py  # 2 doctests failed
2020-11-17T19:31:00.7915708Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/isogeny_small_degree.py  # 1 doctest failed
2020-11-17T19:31:00.7916803Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_egros.py  # 4 doctests failed
2020-11-17T19:31:00.7918998Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_curve_isogeny.py  # 1 doctest failed
2020-11-17T19:31:00.7920093Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/elliptic_curves/ell_field.py  # 2 doctests failed
2020-11-17T19:31:00.7921146Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/plane_conics/con_field.py  # 7 doctests failed
2020-11-17T19:31:00.7922203Z sage -t --random-seed=0 /__w/sage/sage/src/sage/schemes/plane_conics/con_number_field.py  # 3 doctests failed
2020-11-17T19:31:00.7923188Z sage -t --random-seed=0 /__w/sage/sage/src/sage/features/__init__.py  # 1 doctest failed
2020-11-17T19:31:00.7924137Z sage -t --random-seed=0 /__w/sage/sage/src/sage/calculus/desolvers.py  # 8 doctests failed
2020-11-17T19:31:00.7925128Z sage -t --random-seed=0 /__w/sage/sage/src/sage/calculus/calculus.py  # 25 doctests failed
2020-11-17T19:31:00.7926071Z sage -t --random-seed=0 /__w/sage/sage/src/sage/crypto/lattice.py  # 1 doctest failed
2020-11-17T19:31:00.7927011Z sage -t --random-seed=0 /__w/sage/sage/src/sage/combinat/tutorial.py  # 1 doctest failed
2020-11-17T19:31:00.7927975Z sage -t --random-seed=0 /__w/sage/sage/src/sage/combinat/combinat.py  # 5 doctests failed
2020-11-17T19:31:00.7929092Z sage -t --random-seed=0 /__w/sage/sage/src/sage/combinat/degree_sequences.pyx  # 1 doctest failed
2020-11-17T19:31:00.7930148Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/algebra_functor.py  # 5 doctests failed
2020-11-17T19:31:00.7931175Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/number_fields.py  # 1 doctest failed
2020-11-17T19:31:00.7932168Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/rings.py  # 12 doctests failed
2020-11-17T19:31:00.7933122Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/primer.py  # 1 doctest failed
2020-11-17T19:31:00.7934130Z sage -t --random-seed=0 /__w/sage/sage/src/sage/categories/quotient_fields.py  # 7 doctests failed
2020-11-17T19:31:00.7935102Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modular/cusps_nf.py  # 1 doctest failed
2020-11-17T19:31:00.7936063Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modular/etaproducts.py  # 10 doctests failed
2020-11-17T19:31:00.7937057Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modular/modsym/p1list_nf.py  # 1 doctest failed
2020-11-17T19:31:00.7938011Z sage -t --random-seed=0 /__w/sage/sage/src/sage/structure/formal_sum.py  # 1 doctest failed
2020-11-17T19:31:00.7938985Z sage -t --random-seed=0 /__w/sage/sage/src/sage/structure/element.pyx  # 5 doctests failed
2020-11-17T19:31:00.7940062Z sage -t --random-seed=0 /__w/sage/sage/src/sage/structure/dynamic_class.py  # 1 doctest failed
2020-11-17T19:31:00.7941022Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/nested_class.pyx  # 1 doctest failed
2020-11-17T19:31:00.7941915Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/trace.py  # 3 doctests failed
2020-11-17T19:31:00.7942828Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/sage_ostools.pyx  # 1 doctest failed
2020-11-17T19:31:00.7943764Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/functional.py  # 1 doctest failed
2020-11-17T19:31:00.7944692Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/edit_module.py  # 1 doctest failed
2020-11-17T19:31:00.7945625Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/temporary_file.py  # 1 doctest failed
2020-11-17T19:31:00.7946578Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/lazy_attribute.pyx  # 1 doctest failed
2020-11-17T19:31:00.7947551Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/sageinspect.py  # 13 doctests failed
2020-11-17T19:31:00.7948497Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/sagedoc.py  # 3 doctests failed
2020-11-17T19:31:00.7949390Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/compat.py  # 1 doctest failed
2020-11-17T19:31:00.7950304Z sage -t --random-seed=0 /__w/sage/sage/src/sage/misc/sphinxify.py  # 4 doctests failed
2020-11-17T19:31:00.7951326Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/hypergeometric.py  # 7 doctests failed
2020-11-17T19:31:00.7952357Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/bessel.py  # 7 doctests failed
2020-11-17T19:31:00.7953305Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/gamma.py  # 2 doctests failed
2020-11-17T19:31:00.7954306Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/special.py  # 1 doctest failed
2020-11-17T19:31:00.7955238Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/trig.py  # 1 doctest failed
2020-11-17T19:31:00.7956168Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/error.py  # 7 doctests failed
2020-11-17T19:31:00.7957101Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/log.py  # 6 doctests failed
2020-11-17T19:31:00.7958207Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/other.py  # 15 doctests failed
2020-11-17T19:31:00.7959216Z sage -t --random-seed=0 /__w/sage/sage/src/sage/functions/orthogonal_polys.py  # 11 doctests failed
2020-11-17T19:31:00.7960272Z sage -t --random-seed=0 /__w/sage/sage/src/sage/geometry/polyhedron/parent.py  # 2 doctests failed
2020-11-17T19:31:00.7961352Z sage -t --random-seed=0 /__w/sage/sage/src/sage/geometry/polyhedron/palp_database.py  # 1 doctest failed
2020-11-17T19:31:00.7962568Z sage -t --random-seed=0 /__w/sage/sage/src/sage/algebras/quaternion_algebra_element.py  # 4 doctests failed
2020-11-17T19:31:00.7963697Z sage -t --random-seed=0 /__w/sage/sage/src/sage/algebras/quatalg/quaternion_algebra.py  # 6 doctests failed
2020-11-17T19:31:00.7964873Z sage -t --random-seed=0 /__w/sage/sage/src/sage/algebras/quatalg/quaternion_algebra_element.pyx  # 38 doctests failed
2020-11-17T19:31:00.7965949Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/free_module.py  # 5 doctests failed
2020-11-17T19:31:00.7966956Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/free_module_morphism.py  # 3 doctests failed
2020-11-17T19:31:00.7967988Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/free_module_integer.py  # 57 doctests failed
2020-11-17T19:31:00.7969027Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/vector_space_morphism.py  # 3 doctests failed
2020-11-17T19:31:00.7970041Z sage -t --random-seed=0 /__w/sage/sage/src/sage/modules/fg_pid/fgp_module.py  # 3 doctests failed
2020-11-17T19:31:00.7971051Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/expression.pyx  # 17 doctests failed
2020-11-17T19:31:00.7972071Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/assumptions.py  # 3 doctests failed
2020-11-17T19:31:00.7973064Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/constants_c.pyx  # 1 doctest failed
2020-11-17T19:31:00.7974140Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/maxima_wrapper.py  # 2 doctests failed
2020-11-17T19:31:00.7975123Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/relation.py  # 4 doctests failed
2020-11-17T19:31:00.7976102Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/constants.py  # 17 doctests failed
2020-11-17T19:31:00.7977173Z sage -t --random-seed=0 /__w/sage/sage/src/sage/symbolic/expression_conversions.py  # 10 doctests failed
2020-11-17T19:31:00.7978261Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/comparability.pyx  # 1 doctest failed
2020-11-17T19:31:00.7979313Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/digraph_generators.py  # 8 doctests failed
2020-11-17T19:31:00.7980236Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/graph.py  # Timed out
2020-11-17T19:31:00.7981184Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/connectivity.pyx  # 2 doctests failed
2020-11-17T19:31:00.7982192Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/graph_generators.py  # Timed out
2020-11-17T19:31:00.7983217Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/hypergraph_generators.py  # 9 doctests failed
2020-11-17T19:31:00.7984259Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/graph_coloring.pyx  # 2 doctests failed
2020-11-17T19:31:00.7985206Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/genus.pyx  # 1 doctest failed
2020-11-17T19:31:00.7986147Z sage -t --random-seed=0 /__w/sage/sage/src/sage/graphs/generic_graph_pyx.pyx  # 2 doctests failed
2020-11-17T19:31:00.7987202Z sage -t --random-seed=0 /__w/sage/sage/src/sage/sets/set_from_iterator.py  # Timed out (and interrupt failed)
2020-11-17T19:31:00.7988200Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix1.pyx  # 3 doctests failed
2020-11-17T19:31:00.7989131Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix2.pyx  # 3 doctests failed
2020-11-17T19:31:00.7990123Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix_rational_dense.pyx  # 1 doctest failed
2020-11-17T19:31:00.7991189Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix_integer_dense.pyx  # 14 doctests failed
2020-11-17T19:31:00.7992217Z sage -t --random-seed=0 /__w/sage/sage/src/sage/matrix/matrix_symbolic_dense.pyx  # 1 doctest failed
```
https://github.com/tobiasdiez/sage/runs/1413136300?check_suite_focus=true



---

archive/issue_comments_599456.json:
```json
{
    "body": "**Changing commit** from \"[77e1af16bcfce183bfe072cfb7324e82ee95a478](https://github.com/sagemath/sagetrac-mirror/commit/77e1af16bcfce183bfe072cfb7324e82ee95a478)\" to \"[d1341b0ab3b8bbc47a25beea2a8392632c981bfb](https://github.com/sagemath/sagetrac-mirror/commit/d1341b0ab3b8bbc47a25beea2a8392632c981bfb)\".",
    "created_at": "2020-11-18T09:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599456",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[77e1af16bcfce183bfe072cfb7324e82ee95a478](https://github.com/sagemath/sagetrac-mirror/commit/77e1af16bcfce183bfe072cfb7324e82ee95a478)" to "[d1341b0ab3b8bbc47a25beea2a8392632c981bfb](https://github.com/sagemath/sagetrac-mirror/commit/d1341b0ab3b8bbc47a25beea2a8392632c981bfb)".



---

archive/issue_comments_599457.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a5a145e843829930cf849549ba2d7e2eee1617e\">9a5a145</a></td><td><code>version bump</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4c44535d6b107499f5e31e288caa8c5bdd556b5\">d4c4453</a></td><td><code>remove old workaround from #22626</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ebe9780c9c3c9d6b30df7bb6d2129d811ac7614f\">ebe9780</a></td><td><code>this file should exist - leave just comments there</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a507fb91fa77c3b70dae21e3c479e2cb2205ebf2\">a507fb9</a></td><td><code>trac 29314: fix version numbers in patches for gap_packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9836f794b7bf90f9c3b6c1b2928f032f4a7bd093\">9836f79</a></td><td><code>move GAP's PackageManager to gap from gap_packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/435d82ff7d55fff4b1980918a9e588a5b96d512f\">435d82f</a></td><td><code>Merge branch 'u/dimpase/packages/gap411' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fc8bf568d7ec757c7743e7cb7b02a9de9d4e344\">2fc8bf5</a></td><td><code>Hangs with maxima, so remove again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6c1d87f73726c2808312fb9848cb05b3128a025\">f6c1d87</a></td><td><code>Try to install maxima again</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13e96adbcfd6654532a257a7d6ffb1b30cda6e27\">13e96ad</a></td><td><code>Fix workflow syntax</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1341b0ab3b8bbc47a25beea2a8392632c981bfb\">d1341b0</a></td><td><code>Can we now activate cysignals again?</code></td></tr></table>\n",
    "created_at": "2020-11-18T09:56:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a5a145e843829930cf849549ba2d7e2eee1617e">9a5a145</a></td><td><code>version bump</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4c44535d6b107499f5e31e288caa8c5bdd556b5">d4c4453</a></td><td><code>remove old workaround from #22626</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ebe9780c9c3c9d6b30df7bb6d2129d811ac7614f">ebe9780</a></td><td><code>this file should exist - leave just comments there</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a507fb91fa77c3b70dae21e3c479e2cb2205ebf2">a507fb9</a></td><td><code>trac 29314: fix version numbers in patches for gap_packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9836f794b7bf90f9c3b6c1b2928f032f4a7bd093">9836f79</a></td><td><code>move GAP's PackageManager to gap from gap_packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/435d82ff7d55fff4b1980918a9e588a5b96d512f">435d82f</a></td><td><code>Merge branch 'u/dimpase/packages/gap411' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fc8bf568d7ec757c7743e7cb7b02a9de9d4e344">2fc8bf5</a></td><td><code>Hangs with maxima, so remove again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6c1d87f73726c2808312fb9848cb05b3128a025">f6c1d87</a></td><td><code>Try to install maxima again</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13e96adbcfd6654532a257a7d6ffb1b30cda6e27">13e96ad</a></td><td><code>Fix workflow syntax</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1341b0ab3b8bbc47a25beea2a8392632c981bfb">d1341b0</a></td><td><code>Can we now activate cysignals again?</code></td></tr></table>




---

archive/issue_comments_599458.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934\".",
    "created_at": "2020-11-18T10:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599458",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314" to "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934".



---

archive/issue_comments_599459.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934, #30859, #30923, #30910\".",
    "created_at": "2020-11-22T17:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599459",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934" to "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934, #30859, #30923, #30910".



---

archive/issue_comments_599460.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,8 +14,8 @@\n \n TODO (as followup tickets):\n - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.\n-- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev. Tracked at #30859.\n-- Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`\n+- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev. Done in #30859.\n+- Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`, done in #30936.\n - Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.\n - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n``````\n",
    "created_at": "2020-11-22T17:41:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599460",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,8 +14,8 @@
 
 TODO (as followup tickets):
 - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.
-- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev. Tracked at #30859.
-- Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`
+- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev. Done in #30859.
+- Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`, done in #30936.
 - Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.
 - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
 - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
``````




---

archive/issue_comments_599461.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934, #30859, #30923, #30910\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934, #30859, #30923, #30910, #30944\".",
    "created_at": "2020-11-22T17:54:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599461",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934, #30859, #30923, #30910" to "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934, #30859, #30923, #30910, #30944".



---

archive/issue_comments_599462.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934, #30859, #30923, #30910, #30944\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30731 , #30859, #30923, #30910, #30944\".",
    "created_at": "2020-11-25T19:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599462",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30934, #30859, #30923, #30910, #30944" to "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30731 , #30859, #30923, #30910, #30944".



---

archive/issue_comments_599463.json:
```json
{
    "body": "<a id='comment:0'></a>\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599463",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_599464.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599464",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd111".



---

archive/issue_comments_599465.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-12-09T02:16:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599465",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_599466.json:
```json
{
    "body": "**Changing commit** from \"[d1341b0ab3b8bbc47a25beea2a8392632c981bfb](https://github.com/sagemath/sagetrac-mirror/commit/d1341b0ab3b8bbc47a25beea2a8392632c981bfb)\" to \"[17e06daef346efc2f83f7b5304fc598c181079de](https://github.com/sagemath/sagetrac-mirror/commit/17e06daef346efc2f83f7b5304fc598c181079de)\".",
    "created_at": "2020-12-09T09:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599466",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d1341b0ab3b8bbc47a25beea2a8392632c981bfb](https://github.com/sagemath/sagetrac-mirror/commit/d1341b0ab3b8bbc47a25beea2a8392632c981bfb)" to "[17e06daef346efc2f83f7b5304fc598c181079de](https://github.com/sagemath/sagetrac-mirror/commit/17e06daef346efc2f83f7b5304fc598c181079de)".



---

archive/issue_comments_599467.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/439380122ef4634bcb6ecf144ee6a7eb01bab086\">4393801</a></td><td><code>Build all of sage deps</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2027ebb47c7ef10a3c6d6447d4bbc0ca4943d6fa\">2027ebb</a></td><td><code>Run make in parallel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/405e8d2da326ae8169e0479f9bce953919c85cc7\">405e8d2</a></td><td><code>Install dependencies on mac with tox as well</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/894b9d583dca5ba664f226adeb3c5a09c7a1a8f2\">894b9d5</a></td><td><code>Fix indent</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cefc89d4bd48f0ce29d19094ee3d0bd44b662a5\">4cefc89</a></td><td><code>Always run manually to see what's going on</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee6aaebe48181f833a51d69d4be36b35a491aef7\">ee6aaeb</a></td><td><code>Don't require spkg-configure.m4 file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cc37e760d0871edba163811be2d65f5ac032468\">8cc37e7</a></td><td><code>Cleanup mac workflow</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c571a07e7960b6662646f8c62cff4a2ce7843634\">c571a07</a></td><td><code>Fix maxima install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ee33f21031875f9494d94fc810cfa62234d035e\">8ee33f2</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17e06daef346efc2f83f7b5304fc598c181079de\">17e06da</a></td><td><code>Upgrade packages</code></td></tr></table>\n",
    "created_at": "2020-12-09T09:41:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599467",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/439380122ef4634bcb6ecf144ee6a7eb01bab086">4393801</a></td><td><code>Build all of sage deps</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2027ebb47c7ef10a3c6d6447d4bbc0ca4943d6fa">2027ebb</a></td><td><code>Run make in parallel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/405e8d2da326ae8169e0479f9bce953919c85cc7">405e8d2</a></td><td><code>Install dependencies on mac with tox as well</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/894b9d583dca5ba664f226adeb3c5a09c7a1a8f2">894b9d5</a></td><td><code>Fix indent</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cefc89d4bd48f0ce29d19094ee3d0bd44b662a5">4cefc89</a></td><td><code>Always run manually to see what's going on</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee6aaebe48181f833a51d69d4be36b35a491aef7">ee6aaeb</a></td><td><code>Don't require spkg-configure.m4 file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cc37e760d0871edba163811be2d65f5ac032468">8cc37e7</a></td><td><code>Cleanup mac workflow</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c571a07e7960b6662646f8c62cff4a2ce7843634">c571a07</a></td><td><code>Fix maxima install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ee33f21031875f9494d94fc810cfa62234d035e">8ee33f2</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17e06daef346efc2f83f7b5304fc598c181079de">17e06da</a></td><td><code>Upgrade packages</code></td></tr></table>




---

archive/issue_comments_599468.json:
```json
{
    "body": "<a id='comment:3'></a>\nFrom my side, this is actually ready for review. I've been using it now constantly the last few weeks and it is working. Or do you have something that I should be improving/working on?",
    "created_at": "2020-12-09T09:42:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599468",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:3'></a>
From my side, this is actually ready for review. I've been using it now constantly the last few weeks and it is working. Or do you have something that I should be improving/working on?



---

archive/issue_comments_599469.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -46,10 +46,10 @@\n - Fix installation of `ecl`:\n   After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.\n   Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version). I also had the problem that `ECL_WITH_LISP_FPE_BEGIN` was not defined (probably because the version of ecl that I used was too old so that https://gitlab.com/embeddable-common-lisp/ecl/-/merge_requests/154 was not included.)\n-- Install magma:\n+- Install maxima:\n   `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`\n \n-- cysigs is broken, see https://github.com/sagemath/cysignals/issues/111. \n+- cysignals is broken, see https://github.com/sagemath/cysignals/issues/111. \n   To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).\n \n \n``````\n",
    "created_at": "2020-12-12T08:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599469",
    "user": "https://github.com/dimpase"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -46,10 +46,10 @@
 - Fix installation of `ecl`:
   After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.
   Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version). I also had the problem that `ECL_WITH_LISP_FPE_BEGIN` was not defined (probably because the version of ecl that I used was too old so that https://gitlab.com/embeddable-common-lisp/ecl/-/merge_requests/154 was not included.)
-- Install magma:
+- Install maxima:
   `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`
 
-- cysigs is broken, see https://github.com/sagemath/cysignals/issues/111. 
+- cysignals is broken, see https://github.com/sagemath/cysignals/issues/111. 
   To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).
 
 
``````




---

archive/issue_comments_599470.json:
```json
{
    "body": "**Changing commit** from \"[17e06daef346efc2f83f7b5304fc598c181079de](https://github.com/sagemath/sagetrac-mirror/commit/17e06daef346efc2f83f7b5304fc598c181079de)\" to \"[5c719fe14a0fa6a0aa966031786cf6f3c437b239](https://github.com/sagemath/sagetrac-mirror/commit/5c719fe14a0fa6a0aa966031786cf6f3c437b239)\".",
    "created_at": "2020-12-20T22:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[17e06daef346efc2f83f7b5304fc598c181079de](https://github.com/sagemath/sagetrac-mirror/commit/17e06daef346efc2f83f7b5304fc598c181079de)" to "[5c719fe14a0fa6a0aa966031786cf6f3c437b239](https://github.com/sagemath/sagetrac-mirror/commit/5c719fe14a0fa6a0aa966031786cf6f3c437b239)".



---

archive/issue_comments_599471.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fcaf5f4408c946f5423d42facb5bb666635db35\">3fcaf5f</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/multiarchsimple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/090e6f10f1135062d1f65a1f1fa7a366e51ac388\">090e6f1</a></td><td><code>Simplify code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa4556ac2815bffa2d7866d94b3e061ba787d816\">fa4556a</a></td><td><code>Remove _get_sage_local</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cc200591a654fdd3493b222e9ce72fcd7b483cb\">7cc2005</a></td><td><code>Merge branch 'public/build/multiarchsimple' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5909245d3513d6cf3022c3efd120e2000b15aea\">a590924</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/afa05188e01448be72117ab8d5960faabb421951\">afa0518</a></td><td><code>Make autogen more stable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c719fe14a0fa6a0aa966031786cf6f3c437b239\">5c719fe</a></td><td><code>Fix functional.py:56: DeprecationWarning: invalid escape sequence \\d</code></td></tr></table>\n",
    "created_at": "2020-12-20T22:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fcaf5f4408c946f5423d42facb5bb666635db35">3fcaf5f</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/multiarchsimple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/090e6f10f1135062d1f65a1f1fa7a366e51ac388">090e6f1</a></td><td><code>Simplify code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa4556ac2815bffa2d7866d94b3e061ba787d816">fa4556a</a></td><td><code>Remove _get_sage_local</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cc200591a654fdd3493b222e9ce72fcd7b483cb">7cc2005</a></td><td><code>Merge branch 'public/build/multiarchsimple' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5909245d3513d6cf3022c3efd120e2000b15aea">a590924</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/afa05188e01448be72117ab8d5960faabb421951">afa0518</a></td><td><code>Make autogen more stable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c719fe14a0fa6a0aa966031786cf6f3c437b239">5c719fe</a></td><td><code>Fix functional.py:56: DeprecationWarning: invalid escape sequence \d</code></td></tr></table>




---

archive/issue_comments_599472.json:
```json
{
    "body": "<a id='comment:6'></a>\nMerged the latest develop branch.",
    "created_at": "2020-12-20T22:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599472",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:6'></a>
Merged the latest develop branch.



---

archive/issue_comments_599473.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-12-20T22:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599473",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_599474.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We modify `src/setup.py` to support editable installs via pipenv (`pipenv install -e .`, which invokes `pip install --editable`).  The existing src/setup.py is copied into build/pkgs/sagelib/src to replace the symlink. In this way, the changes to src/setup.py made in this ticket do not affect the existing build process of the Sage library.\n+We modify `src/setup.py` to support editable installs via pipenv (`pipenv install -e .`, which invokes `pip install --editable`).  Since distribution continues using build/pkgs/sagelib/src/setup.py, the changes to src/setup.py made in this ticket do not affect the existing build process of the Sage library.\n \n With this ticket, the following code works:\n \n@@ -14,8 +14,6 @@\n \n TODO (as followup tickets):\n - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.\n-- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev. Done in #30859.\n-- Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`, done in #30936.\n - Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.\n - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n@@ -23,7 +21,7 @@\n - Fix MacOS github action\n - Run doctests in the github action via `sage -t` as soon as this no longer rely on `SAGE_LOCAL` (#22731)\n - Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/\n-- Fix doctests (as reported by the github action)\n+- Fix doctests in the virtual environment (as reported by the github action)\n \n Previous tickets on in-place builds, editable installs:\n - #12659\n``````\n",
    "created_at": "2020-12-20T22:39:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599474",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We modify `src/setup.py` to support editable installs via pipenv (`pipenv install -e .`, which invokes `pip install --editable`).  The existing src/setup.py is copied into build/pkgs/sagelib/src to replace the symlink. In this way, the changes to src/setup.py made in this ticket do not affect the existing build process of the Sage library.
+We modify `src/setup.py` to support editable installs via pipenv (`pipenv install -e .`, which invokes `pip install --editable`).  Since distribution continues using build/pkgs/sagelib/src/setup.py, the changes to src/setup.py made in this ticket do not affect the existing build process of the Sage library.
 
 With this ticket, the following code works:
 
@@ -14,8 +14,6 @@
 
 TODO (as followup tickets):
 - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.
-- A few libraries are not contained in `distros/debian.txt` files. Should they be added? In particular, this concerns libsingular4-dev, liblinbox-dev, libratpoints-dev, libgap-dev, ecl, libpynac-dev. Done in #30859.
-- Remove `ARB_LIBRARY` env variable, and move check from `arb/config.m4` to `env.py`, done in #30936.
 - Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.
 - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
 - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
@@ -23,7 +21,7 @@
 - Fix MacOS github action
 - Run doctests in the github action via `sage -t` as soon as this no longer rely on `SAGE_LOCAL` (#22731)
 - Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/
-- Fix doctests (as reported by the github action)
+- Fix doctests in the virtual environment (as reported by the github action)
 
 Previous tickets on in-place builds, editable installs:
 - #12659
``````




---

archive/issue_comments_599475.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e4f60703562247638eadb772dbc84414699ad98\">5e4f607</a></td><td><code>Change import exception to print message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5eb21d17a051b45193d33ca797bde2ffbc5fde1\">a5eb21d</a></td><td><code>Fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f0335de97d12b1bd5e6cc56879ab47f7423665a\">7f0335d</a></td><td><code>Merge branch 'public/build/startupWarningMinimal' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-12-20T23:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599475",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e4f60703562247638eadb772dbc84414699ad98">5e4f607</a></td><td><code>Change import exception to print message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5eb21d17a051b45193d33ca797bde2ffbc5fde1">a5eb21d</a></td><td><code>Fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f0335de97d12b1bd5e6cc56879ab47f7423665a">7f0335d</a></td><td><code>Merge branch 'public/build/startupWarningMinimal' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599476.json:
```json
{
    "body": "**Changing commit** from \"[5c719fe14a0fa6a0aa966031786cf6f3c437b239](https://github.com/sagemath/sagetrac-mirror/commit/5c719fe14a0fa6a0aa966031786cf6f3c437b239)\" to \"[7f0335de97d12b1bd5e6cc56879ab47f7423665a](https://github.com/sagemath/sagetrac-mirror/commit/7f0335de97d12b1bd5e6cc56879ab47f7423665a)\".",
    "created_at": "2020-12-20T23:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599476",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c719fe14a0fa6a0aa966031786cf6f3c437b239](https://github.com/sagemath/sagetrac-mirror/commit/5c719fe14a0fa6a0aa966031786cf6f3c437b239)" to "[7f0335de97d12b1bd5e6cc56879ab47f7423665a](https://github.com/sagemath/sagetrac-mirror/commit/7f0335de97d12b1bd5e6cc56879ab47f7423665a)".



---

archive/issue_comments_599477.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30731 , #30859, #30923, #30910, #30944\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30936, #30935, #30731 , #30859, #30923, #30910, #30944\".",
    "created_at": "2020-12-20T23:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599477",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #30748, #29850, #29314, #30937, #30936, #30935, #30731 , #30859, #30923, #30910, #30944" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30936, #30935, #30731 , #30859, #30923, #30910, #30944".



---

archive/issue_comments_599478.json:
```json
{
    "body": "<a id='comment:9'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e4f60703562247638eadb772dbc84414699ad98\">5e4f607</a></td><td><code>Change import exception to print message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5eb21d17a051b45193d33ca797bde2ffbc5fde1\">a5eb21d</a></td><td><code>Fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f0335de97d12b1bd5e6cc56879ab47f7423665a\">7f0335d</a></td><td><code>Merge branch 'public/build/startupWarningMinimal' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2020-12-20T23:08:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599478",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e4f60703562247638eadb772dbc84414699ad98">5e4f607</a></td><td><code>Change import exception to print message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5eb21d17a051b45193d33ca797bde2ffbc5fde1">a5eb21d</a></td><td><code>Fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f0335de97d12b1bd5e6cc56879ab47f7423665a">7f0335d</a></td><td><code>Merge branch 'public/build/startupWarningMinimal' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599479.json:
```json
{
    "body": "<a id='comment:200'></a>\nReplying to [mkoeppe](#comment%3A156):\n> It has been reported that the current `src/setup.py` (in Sage 9.2) is able to install a working sagelib on top of conda (see #28745). \n> \n> I'll create a test for this in #30845, and then we can test the present ticket to make sure it does not break anything.\n\n\nEnsuring that the feature of installing sagelib on top of conda is not broken is a prerequisite for merging this ticket.\n\nTo move this ticket forward, could you help me with this GH Actions test?  (This should be on top of #30944, which still needs review)\n\nI think there should be one new workflow for all tests that do not build the Sage distribution (no `build/pkgs`).",
    "created_at": "2020-12-21T18:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599479",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:200'></a>
Replying to [mkoeppe](#comment%3A156):
> It has been reported that the current `src/setup.py` (in Sage 9.2) is able to install a working sagelib on top of conda (see #28745). 
> 
> I'll create a test for this in #30845, and then we can test the present ticket to make sure it does not break anything.


Ensuring that the feature of installing sagelib on top of conda is not broken is a prerequisite for merging this ticket.

To move this ticket forward, could you help me with this GH Actions test?  (This should be on top of #30944, which still needs review)

I think there should be one new workflow for all tests that do not build the Sage distribution (no `build/pkgs`).



---

archive/issue_comments_599480.json:
```json
{
    "body": "<a id='comment:1'></a>\nSure, I will have a look at this. Could you by extending #30845 to include in more detail how the manual workflow with conda looks like (I've no experience with conda) and why #30944 is needed.\n\nMaybe it's a good idea to review how the GH workflows are structured and revise this if necessary. For example, focus more on the purpose vs how it done, e.g. \"test that building packages in build/pgks\" works, \"test that sagelib installed on top of various setups works\". For the latter, my hope with pipenv was actually that one can easily run it on every push on every branch as a gateway in addition to the patchbot (since the time it takes is very minimal, time of setup of < 1h, + time for doctests).",
    "created_at": "2020-12-21T20:17:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599480",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>
Sure, I will have a look at this. Could you by extending #30845 to include in more detail how the manual workflow with conda looks like (I've no experience with conda) and why #30944 is needed.

Maybe it's a good idea to review how the GH workflows are structured and revise this if necessary. For example, focus more on the purpose vs how it done, e.g. "test that building packages in build/pgks" works, "test that sagelib installed on top of various setups works". For the latter, my hope with pipenv was actually that one can easily run it on every push on every branch as a gateway in addition to the patchbot (since the time it takes is very minimal, time of setup of < 1h, + time for doctests).



---

archive/issue_comments_599481.json:
```json
{
    "body": "<a id='comment:202'></a>\nReplying to [gh-tobiasdiez](#comment%3A201):\n> Sure, I will have a look at this. Could you by extending #30845 to include in more detail how the manual workflow with conda looks like (I've no experience with conda) and\n\n\nDone.\n\n>  why #30944 is needed.\n\n\nWell, it will be testing something that currently happens to work but is not automatically tested.\n\n> Maybe it's a good idea to review how the GH workflows are structured and revise this if necessary. \n\n\nSure, I'll be happy about more eyes on the workflows.\n\n> For example, focus more on the purpose vs how it done\n\n\nAll workflows test from-scratch builds of the Sage distribution. \nTwo workflows separately test optional / experimental packages. That's really all.",
    "created_at": "2020-12-21T23:25:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599481",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:202'></a>
Replying to [gh-tobiasdiez](#comment%3A201):
> Sure, I will have a look at this. Could you by extending #30845 to include in more detail how the manual workflow with conda looks like (I've no experience with conda) and


Done.

>  why #30944 is needed.


Well, it will be testing something that currently happens to work but is not automatically tested.

> Maybe it's a good idea to review how the GH workflows are structured and revise this if necessary. 


Sure, I'll be happy about more eyes on the workflows.

> For example, focus more on the purpose vs how it done


All workflows test from-scratch builds of the Sage distribution. 
Two workflows separately test optional / experimental packages. That's really all.



---

archive/issue_comments_599482.json:
```json
{
    "body": "<a id='comment:203'></a>\nReplying to [gh-tobiasdiez](#comment%3A201):\n> \"test that sagelib installed on top of various setups works\". For the latter, my hope with pipenv was actually that one can easily run it on every push on every branch as a gateway in addition to the patchbot (since the time it takes is very minimal, time of setup of < 1h, + time for doctests).\n\n\nAn incremental build setup based on Docker has already been developed, which drives the current [GitLab](GitLab) workflow. I'd recommend to start from there (it needs attention) instead of developing another thing from scratch... Take a look at #29536",
    "created_at": "2020-12-21T23:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599482",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:203'></a>
Replying to [gh-tobiasdiez](#comment%3A201):
> "test that sagelib installed on top of various setups works". For the latter, my hope with pipenv was actually that one can easily run it on every push on every branch as a gateway in addition to the patchbot (since the time it takes is very minimal, time of setup of < 1h, + time for doctests).


An incremental build setup based on Docker has already been developed, which drives the current [GitLab](GitLab) workflow. I'd recommend to start from there (it needs attention) instead of developing another thing from scratch... Take a look at #29536



---

archive/issue_comments_599483.json:
```json
{
    "body": "**Changing commit** from \"[7f0335de97d12b1bd5e6cc56879ab47f7423665a](https://github.com/sagemath/sagetrac-mirror/commit/7f0335de97d12b1bd5e6cc56879ab47f7423665a)\" to \"[f96b923fd5c342c5401f4e8f993546b523fe2cc0](https://github.com/sagemath/sagetrac-mirror/commit/f96b923fd5c342c5401f4e8f993546b523fe2cc0)\".",
    "created_at": "2020-12-23T13:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7f0335de97d12b1bd5e6cc56879ab47f7423665a](https://github.com/sagemath/sagetrac-mirror/commit/7f0335de97d12b1bd5e6cc56879ab47f7423665a)" to "[f96b923fd5c342c5401f4e8f993546b523fe2cc0](https://github.com/sagemath/sagetrac-mirror/commit/f96b923fd5c342c5401f4e8f993546b523fe2cc0)".



---

archive/issue_comments_599484.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f96b923fd5c342c5401f4e8f993546b523fe2cc0\">f96b923</a></td><td><code>Use sage_conf</code></td></tr></table>\n",
    "created_at": "2020-12-23T13:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f96b923fd5c342c5401f4e8f993546b523fe2cc0">f96b923</a></td><td><code>Use sage_conf</code></td></tr></table>




---

archive/issue_comments_599485.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30936, #30935, #30731 , #30859, #30923, #30910, #30944\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944\".",
    "created_at": "2020-12-23T13:06:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599485",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30936, #30935, #30731 , #30859, #30923, #30910, #30944" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944".



---

archive/issue_comments_599486.json:
```json
{
    "body": "**Changing commit** from \"[f96b923fd5c342c5401f4e8f993546b523fe2cc0](https://github.com/sagemath/sagetrac-mirror/commit/f96b923fd5c342c5401f4e8f993546b523fe2cc0)\" to \"[8c97e7c9290c067af0e0bd974f60f4b3966a516c](https://github.com/sagemath/sagetrac-mirror/commit/8c97e7c9290c067af0e0bd974f60f4b3966a516c)\".",
    "created_at": "2020-12-23T13:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599486",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f96b923fd5c342c5401f4e8f993546b523fe2cc0](https://github.com/sagemath/sagetrac-mirror/commit/f96b923fd5c342c5401f4e8f993546b523fe2cc0)" to "[8c97e7c9290c067af0e0bd974f60f4b3966a516c](https://github.com/sagemath/sagetrac-mirror/commit/8c97e7c9290c067af0e0bd974f60f4b3966a516c)".



---

archive/issue_comments_599487.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c97e7c9290c067af0e0bd974f60f4b3966a516c\">8c97e7c</a></td><td><code>Cleanup code</code></td></tr></table>\n",
    "created_at": "2020-12-23T13:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c97e7c9290c067af0e0bd974f60f4b3966a516c">8c97e7c</a></td><td><code>Cleanup code</code></td></tr></table>




---

archive/issue_comments_599488.json:
```json
{
    "body": "<a id='comment:7'></a>\nSince now most dependencies are merged in the develop branch, this ticket is now definitely ready for review.",
    "created_at": "2021-01-06T12:11:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599488",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>
Since now most dependencies are merged in the develop branch, this ticket is now definitely ready for review.



---

archive/issue_comments_599489.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71b4c062c7ded4dd1da5bc27fdd2e06d767d78bf\">71b4c06</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f871fc77be3b6ec719dc3f64a033ca78e6deea67\">f871fc7</a></td><td><code>Add rstcheck</code></td></tr></table>\n",
    "created_at": "2021-01-09T14:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599489",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71b4c062c7ded4dd1da5bc27fdd2e06d767d78bf">71b4c06</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f871fc77be3b6ec719dc3f64a033ca78e6deea67">f871fc7</a></td><td><code>Add rstcheck</code></td></tr></table>




---

archive/issue_comments_599490.json:
```json
{
    "body": "**Changing commit** from \"[8c97e7c9290c067af0e0bd974f60f4b3966a516c](https://github.com/sagemath/sagetrac-mirror/commit/8c97e7c9290c067af0e0bd974f60f4b3966a516c)\" to \"[f871fc77be3b6ec719dc3f64a033ca78e6deea67](https://github.com/sagemath/sagetrac-mirror/commit/f871fc77be3b6ec719dc3f64a033ca78e6deea67)\".",
    "created_at": "2021-01-09T14:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599490",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8c97e7c9290c067af0e0bd974f60f4b3966a516c](https://github.com/sagemath/sagetrac-mirror/commit/8c97e7c9290c067af0e0bd974f60f4b3966a516c)" to "[f871fc77be3b6ec719dc3f64a033ca78e6deea67](https://github.com/sagemath/sagetrac-mirror/commit/f871fc77be3b6ec719dc3f64a033ca78e6deea67)".



---

archive/issue_comments_599491.json:
```json
{
    "body": "<a id='comment:9'></a>\nMatthias, I have a question: the current code works very well for system-installed packages. However, there are a few packages that are required but for which system-installed versions are not currently not supported (e.g. ecl). How could I use the sage-built versions of these packages for the built process of sagelib, i.e. for `pip install -e .`?\n\nTake for example the import `cdef extern from \"ecl/ecl.h\"` in `libs/ecl.pxd`. \nI guess one needs to pass the path of `local/include/ecl` as argument to the C++ compiler. How is currently done?",
    "created_at": "2021-01-09T15:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599491",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
Matthias, I have a question: the current code works very well for system-installed packages. However, there are a few packages that are required but for which system-installed versions are not currently not supported (e.g. ecl). How could I use the sage-built versions of these packages for the built process of sagelib, i.e. for `pip install -e .`?

Take for example the import `cdef extern from "ecl/ecl.h"` in `libs/ecl.pxd`. 
I guess one needs to pass the path of `local/include/ecl` as argument to the C++ compiler. How is currently done?



---

archive/issue_comments_599492.json:
```json
{
    "body": "<a id='comment:210'></a>\nReplying to [gh-tobiasdiez](#comment%3A209):\n> Take for example the import `cdef extern from \"ecl/ecl.h\"` in `libs/ecl.pxd`. \n> I guess one needs to pass the path of `local/include/ecl` as argument to the C++ compiler. How is currently done? \n\n\nWe install all packages that are not accepted from the system into $SAGE_LOCAL, and scripts such as `sage-env` and `sage-build-env` set up environment variables such as `LIBRARY_PATH` and `CPATH` so that compilers find stuff.  Configuration for Cython is somewhat separate - you are already familiar with the `cython_aliases` function.\n\nFor ECL, there's ticket #30770 to make this configuration more flexible.",
    "created_at": "2021-01-10T00:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599492",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:210'></a>
Replying to [gh-tobiasdiez](#comment%3A209):
> Take for example the import `cdef extern from "ecl/ecl.h"` in `libs/ecl.pxd`. 
> I guess one needs to pass the path of `local/include/ecl` as argument to the C++ compiler. How is currently done? 


We install all packages that are not accepted from the system into $SAGE_LOCAL, and scripts such as `sage-env` and `sage-build-env` set up environment variables such as `LIBRARY_PATH` and `CPATH` so that compilers find stuff.  Configuration for Cython is somewhat separate - you are already familiar with the `cython_aliases` function.

For ECL, there's ticket #30770 to make this configuration more flexible.



---

archive/issue_comments_599493.json:
```json
{
    "body": "<a id='comment:1'></a>\nAlso, if you are able to use system packages for which we do not have system package detection yet (`spkg-configure.m4`), you can join the effort in #27330.",
    "created_at": "2021-01-10T00:41:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599493",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Also, if you are able to use system packages for which we do not have system package detection yet (`spkg-configure.m4`), you can join the effort in #27330.



---

archive/issue_comments_599494.json:
```json
{
    "body": "<a id='comment:212'></a>\nReplying to [gh-tobiasdiez](#comment%3A209):\n>  How could I use the sage-built versions of these packages for the built process of sagelib, i.e. for `pip install -e .`?\n\n\nOne part of the answer to this involves the `sage_conf` package: Installing it into your virtual environment provides `sage-env-config` and the `sage_conf` module. So you may want to add it to `Pipfile`. (See also #30913).",
    "created_at": "2021-01-10T00:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599494",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:212'></a>
Replying to [gh-tobiasdiez](#comment%3A209):
>  How could I use the sage-built versions of these packages for the built process of sagelib, i.e. for `pip install -e .`?


One part of the answer to this involves the `sage_conf` package: Installing it into your virtual environment provides `sage-env-config` and the `sage_conf` module. So you may want to add it to `Pipfile`. (See also #30913).



---

archive/issue_comments_599495.json:
```json
{
    "body": "<a id='comment:213'></a>\nReplying to [mkoeppe](#comment%3A210):\n> For ECL, there's ticket #30770 to make this configuration more flexible.\n\n\nThanks! I'll see if I can make progress towards this.",
    "created_at": "2021-01-10T12:48:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599495",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:213'></a>
Replying to [mkoeppe](#comment%3A210):
> For ECL, there's ticket #30770 to make this configuration more flexible.


Thanks! I'll see if I can make progress towards this.



---

archive/issue_comments_599496.json:
```json
{
    "body": "<a id='comment:214'></a>\nReplying to [mkoeppe](#comment%3A212):\n> One part of the answer to this involves the `sage_conf` package: Installing it into your virtual environment provides `sage-env-config` and the `sage_conf` module. So you may want to add it to `Pipfile`. (See also #30913).\n\n\nThat's already done:\n\n```\n+[dev-packages.8c46424]\n+path = \"./../build/pkgs/sage_conf/src\"\n+editable = true\n```",
    "created_at": "2021-01-10T12:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599496",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:214'></a>
Replying to [mkoeppe](#comment%3A212):
> One part of the answer to this involves the `sage_conf` package: Installing it into your virtual environment provides `sage-env-config` and the `sage_conf` module. So you may want to add it to `Pipfile`. (See also #30913).


That's already done:

```
+[dev-packages.8c46424]
+path = "./../build/pkgs/sage_conf/src"
+editable = true
```



---

archive/issue_comments_599497.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770\".",
    "created_at": "2021-01-11T14:57:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599497",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770".



---

archive/issue_comments_599498.json:
```json
{
    "body": "**Changing commit** from \"[f871fc77be3b6ec719dc3f64a033ca78e6deea67](https://github.com/sagemath/sagetrac-mirror/commit/f871fc77be3b6ec719dc3f64a033ca78e6deea67)\" to \"[deeeb75c316c0e06c40e36ec65f472d4d3b90972](https://github.com/sagemath/sagetrac-mirror/commit/deeeb75c316c0e06c40e36ec65f472d4d3b90972)\".",
    "created_at": "2021-01-11T14:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599498",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f871fc77be3b6ec719dc3f64a033ca78e6deea67](https://github.com/sagemath/sagetrac-mirror/commit/f871fc77be3b6ec719dc3f64a033ca78e6deea67)" to "[deeeb75c316c0e06c40e36ec65f472d4d3b90972](https://github.com/sagemath/sagetrac-mirror/commit/deeeb75c316c0e06c40e36ec65f472d4d3b90972)".



---

archive/issue_comments_599499.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8920ad5921c10aea8bbbb0ffd06a05748bf3131a\">8920ad5</a></td><td><code>Update dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3049e53618902318c8247e277d28f50c1f59f545\">3049e53</a></td><td><code>Use ecl-config to determine compiler/linker flags for ecl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/deeeb75c316c0e06c40e36ec65f472d4d3b90972\">deeeb75</a></td><td><code>Merge branch 'public/build/ecl-config' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-01-11T14:59:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599499",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8920ad5921c10aea8bbbb0ffd06a05748bf3131a">8920ad5</a></td><td><code>Update dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3049e53618902318c8247e277d28f50c1f59f545">3049e53</a></td><td><code>Use ecl-config to determine compiler/linker flags for ecl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/deeeb75c316c0e06c40e36ec65f472d4d3b90972">deeeb75</a></td><td><code>Merge branch 'public/build/ecl-config' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599500.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,6 +11,9 @@\n ```\n It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.\n Note: This code probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL, and the github action for ubuntu 20.10).\n+\n+\n+The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace\n \n TODO (as followup tickets):\n - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.\n``````\n",
    "created_at": "2021-01-11T15:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599500",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,6 +11,9 @@
 ```
 It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.
 Note: This code probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL, and the github action for ubuntu 20.10).
+
+
+The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace
 
 TODO (as followup tickets):
 - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.
``````




---

archive/issue_comments_599501.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9988c5fab43adc6f5784a124248887637475d67c\">9988c5f</a></td><td><code>ci-cygwin*.yml: Adjust to new script packages _bootstrap, _prereq</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05\">ab19133</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6ad06e880513185a02604fef6e2763a50a46d30\">c6ad06e</a></td><td><code>Merge branch 't/30944/tox__improve_local_sudo_ubuntu_standard' into t/31216/tox_ini__local___add_environment_variables_to_skip_system_package_installs__mechanism_for_a_local_interactive_shell</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13f58fc7445bca7f54cc80efea51c1082a615542\">13f58fc</a></td><td><code>tox.ini (local): Run an interactive shell if posargs are bash</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ace4ef6674eaf29ff6a590ce0bcc5943f36c342c\">ace4ef6</a></td><td><code>tox.ini (local): Add option SKIP_SYSTEM_PKG_INSTALL=1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ddc4f0b63ae13eee632663d7cb57c2b6d8207eb8\">ddc4f0b</a></td><td><code>tox.ini (local): Handle environment variables SKIP_BOOTSTRAP, SKIP_CONFIGURE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb6aec4cd442939b43b19a6c33d203abdbcaee33\">bb6aec4</a></td><td><code>src/doc/en/developer/portability_testing.rst: Updates</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6253bd822f2dd515979875d3aea4beaf8de0d0ec\">6253bd8</a></td><td><code>src/doc/en/developer/portability_testing.rst: New section on SKIP_... environment variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a52e899327a996b2fe533039cc5340e7e9d09441\">a52e899</a></td><td><code>Merge branch 'u/mkoeppe/tox_ini__local___add_environment_variables_to_skip_system_package_installs__mechanism_for_a_local_interactive_shell' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f\">2ea4935</a></td><td><code>Split workflow in install and build</code></td></tr></table>\n",
    "created_at": "2021-01-12T12:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599501",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9988c5fab43adc6f5784a124248887637475d67c">9988c5f</a></td><td><code>ci-cygwin*.yml: Adjust to new script packages _bootstrap, _prereq</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05">ab19133</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6ad06e880513185a02604fef6e2763a50a46d30">c6ad06e</a></td><td><code>Merge branch 't/30944/tox__improve_local_sudo_ubuntu_standard' into t/31216/tox_ini__local___add_environment_variables_to_skip_system_package_installs__mechanism_for_a_local_interactive_shell</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13f58fc7445bca7f54cc80efea51c1082a615542">13f58fc</a></td><td><code>tox.ini (local): Run an interactive shell if posargs are bash</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ace4ef6674eaf29ff6a590ce0bcc5943f36c342c">ace4ef6</a></td><td><code>tox.ini (local): Add option SKIP_SYSTEM_PKG_INSTALL=1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ddc4f0b63ae13eee632663d7cb57c2b6d8207eb8">ddc4f0b</a></td><td><code>tox.ini (local): Handle environment variables SKIP_BOOTSTRAP, SKIP_CONFIGURE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb6aec4cd442939b43b19a6c33d203abdbcaee33">bb6aec4</a></td><td><code>src/doc/en/developer/portability_testing.rst: Updates</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6253bd822f2dd515979875d3aea4beaf8de0d0ec">6253bd8</a></td><td><code>src/doc/en/developer/portability_testing.rst: New section on SKIP_... environment variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a52e899327a996b2fe533039cc5340e7e9d09441">a52e899</a></td><td><code>Merge branch 'u/mkoeppe/tox_ini__local___add_environment_variables_to_skip_system_package_installs__mechanism_for_a_local_interactive_shell' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f">2ea4935</a></td><td><code>Split workflow in install and build</code></td></tr></table>




---

archive/issue_comments_599502.json:
```json
{
    "body": "**Changing commit** from \"[deeeb75c316c0e06c40e36ec65f472d4d3b90972](https://github.com/sagemath/sagetrac-mirror/commit/deeeb75c316c0e06c40e36ec65f472d4d3b90972)\" to \"[2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f](https://github.com/sagemath/sagetrac-mirror/commit/2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f)\".",
    "created_at": "2021-01-12T12:42:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599502",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[deeeb75c316c0e06c40e36ec65f472d4d3b90972](https://github.com/sagemath/sagetrac-mirror/commit/deeeb75c316c0e06c40e36ec65f472d4d3b90972)" to "[2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f](https://github.com/sagemath/sagetrac-mirror/commit/2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f)".



---

archive/issue_comments_599503.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216\".",
    "created_at": "2021-01-12T12:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599503",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216".



---

archive/issue_comments_599504.json:
```json
{
    "body": "**Changing commit** from \"[2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f](https://github.com/sagemath/sagetrac-mirror/commit/2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f)\" to \"[6bcc5c34991dc4b81362b2427ff8d38b50f32c7e](https://github.com/sagemath/sagetrac-mirror/commit/6bcc5c34991dc4b81362b2427ff8d38b50f32c7e)\".",
    "created_at": "2021-01-12T12:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599504",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f](https://github.com/sagemath/sagetrac-mirror/commit/2ea4935dbae81bf1f2c9f9dc4e29f2feeb1a733f)" to "[6bcc5c34991dc4b81362b2427ff8d38b50f32c7e](https://github.com/sagemath/sagetrac-mirror/commit/6bcc5c34991dc4b81362b2427ff8d38b50f32c7e)".



---

archive/issue_comments_599505.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6bcc5c34991dc4b81362b2427ff8d38b50f32c7e\">6bcc5c3</a></td><td><code>Add esac</code></td></tr></table>\n",
    "created_at": "2021-01-12T12:54:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6bcc5c34991dc4b81362b2427ff8d38b50f32c7e">6bcc5c3</a></td><td><code>Add esac</code></td></tr></table>




---

archive/issue_comments_599506.json:
```json
{
    "body": "**Changing commit** from \"[6bcc5c34991dc4b81362b2427ff8d38b50f32c7e](https://github.com/sagemath/sagetrac-mirror/commit/6bcc5c34991dc4b81362b2427ff8d38b50f32c7e)\" to \"[d32b22b7091051522180ea58ea861b022e16e4d7](https://github.com/sagemath/sagetrac-mirror/commit/d32b22b7091051522180ea58ea861b022e16e4d7)\".",
    "created_at": "2021-01-12T13:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599506",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6bcc5c34991dc4b81362b2427ff8d38b50f32c7e](https://github.com/sagemath/sagetrac-mirror/commit/6bcc5c34991dc4b81362b2427ff8d38b50f32c7e)" to "[d32b22b7091051522180ea58ea861b022e16e4d7](https://github.com/sagemath/sagetrac-mirror/commit/d32b22b7091051522180ea58ea861b022e16e4d7)".



---

archive/issue_comments_599507.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d32b22b7091051522180ea58ea861b022e16e4d7\">d32b22b</a></td><td><code>Try with config</code></td></tr></table>\n",
    "created_at": "2021-01-12T13:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599507",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d32b22b7091051522180ea58ea861b022e16e4d7">d32b22b</a></td><td><code>Try with config</code></td></tr></table>




---

archive/issue_comments_599508.json:
```json
{
    "body": "**Changing commit** from \"[d32b22b7091051522180ea58ea861b022e16e4d7](https://github.com/sagemath/sagetrac-mirror/commit/d32b22b7091051522180ea58ea861b022e16e4d7)\" to \"[73c99f3b7f797a7ab61507392c40268bb50e0a00](https://github.com/sagemath/sagetrac-mirror/commit/73c99f3b7f797a7ab61507392c40268bb50e0a00)\".",
    "created_at": "2021-01-12T13:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599508",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d32b22b7091051522180ea58ea861b022e16e4d7](https://github.com/sagemath/sagetrac-mirror/commit/d32b22b7091051522180ea58ea861b022e16e4d7)" to "[73c99f3b7f797a7ab61507392c40268bb50e0a00](https://github.com/sagemath/sagetrac-mirror/commit/73c99f3b7f797a7ab61507392c40268bb50e0a00)".



---

archive/issue_comments_599509.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/73c99f3b7f797a7ab61507392c40268bb50e0a00\">73c99f3</a></td><td><code>Ignore errors for now</code></td></tr></table>\n",
    "created_at": "2021-01-12T13:08:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599509",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/73c99f3b7f797a7ab61507392c40268bb50e0a00">73c99f3</a></td><td><code>Ignore errors for now</code></td></tr></table>




---

archive/issue_comments_599510.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5cb58cf579b41780791b9bf0cb46563713efd1e5\">5cb58cf</a></td><td><code>Enable build as root</code></td></tr></table>\n",
    "created_at": "2021-01-12T13:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5cb58cf579b41780791b9bf0cb46563713efd1e5">5cb58cf</a></td><td><code>Enable build as root</code></td></tr></table>




---

archive/issue_comments_599511.json:
```json
{
    "body": "**Changing commit** from \"[73c99f3b7f797a7ab61507392c40268bb50e0a00](https://github.com/sagemath/sagetrac-mirror/commit/73c99f3b7f797a7ab61507392c40268bb50e0a00)\" to \"[5cb58cf579b41780791b9bf0cb46563713efd1e5](https://github.com/sagemath/sagetrac-mirror/commit/5cb58cf579b41780791b9bf0cb46563713efd1e5)\".",
    "created_at": "2021-01-12T13:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599511",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[73c99f3b7f797a7ab61507392c40268bb50e0a00](https://github.com/sagemath/sagetrac-mirror/commit/73c99f3b7f797a7ab61507392c40268bb50e0a00)" to "[5cb58cf579b41780791b9bf0cb46563713efd1e5](https://github.com/sagemath/sagetrac-mirror/commit/5cb58cf579b41780791b9bf0cb46563713efd1e5)".



---

archive/issue_comments_599512.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02542220efcfc3989a682ed082092c7f6e9a1c30\">0254222</a></td><td><code>Cleanup github workflow</code></td></tr></table>\n",
    "created_at": "2021-01-12T13:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599512",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02542220efcfc3989a682ed082092c7f6e9a1c30">0254222</a></td><td><code>Cleanup github workflow</code></td></tr></table>




---

archive/issue_comments_599513.json:
```json
{
    "body": "**Changing commit** from \"[5cb58cf579b41780791b9bf0cb46563713efd1e5](https://github.com/sagemath/sagetrac-mirror/commit/5cb58cf579b41780791b9bf0cb46563713efd1e5)\" to \"[02542220efcfc3989a682ed082092c7f6e9a1c30](https://github.com/sagemath/sagetrac-mirror/commit/02542220efcfc3989a682ed082092c7f6e9a1c30)\".",
    "created_at": "2021-01-12T13:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5cb58cf579b41780791b9bf0cb46563713efd1e5](https://github.com/sagemath/sagetrac-mirror/commit/5cb58cf579b41780791b9bf0cb46563713efd1e5)" to "[02542220efcfc3989a682ed082092c7f6e9a1c30](https://github.com/sagemath/sagetrac-mirror/commit/02542220efcfc3989a682ed082092c7f6e9a1c30)".



---

archive/issue_comments_599514.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dcd083615e7eb7218b595c61fd9b9a4754222cb\">4dcd083</a></td><td><code>Use --all for the tests</code></td></tr></table>\n",
    "created_at": "2021-01-12T17:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599514",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dcd083615e7eb7218b595c61fd9b9a4754222cb">4dcd083</a></td><td><code>Use --all for the tests</code></td></tr></table>




---

archive/issue_comments_599515.json:
```json
{
    "body": "**Changing commit** from \"[02542220efcfc3989a682ed082092c7f6e9a1c30](https://github.com/sagemath/sagetrac-mirror/commit/02542220efcfc3989a682ed082092c7f6e9a1c30)\" to \"[4dcd083615e7eb7218b595c61fd9b9a4754222cb](https://github.com/sagemath/sagetrac-mirror/commit/4dcd083615e7eb7218b595c61fd9b9a4754222cb)\".",
    "created_at": "2021-01-12T17:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599515",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[02542220efcfc3989a682ed082092c7f6e9a1c30](https://github.com/sagemath/sagetrac-mirror/commit/02542220efcfc3989a682ed082092c7f6e9a1c30)" to "[4dcd083615e7eb7218b595c61fd9b9a4754222cb](https://github.com/sagemath/sagetrac-mirror/commit/4dcd083615e7eb7218b595c61fd9b9a4754222cb)".



---

archive/issue_comments_599516.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d30fda0a1bd9682d624feed871c3c94fa53921df\">d30fda0</a></td><td><code>Also install maxima</code></td></tr></table>\n",
    "created_at": "2021-01-12T17:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599516",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d30fda0a1bd9682d624feed871c3c94fa53921df">d30fda0</a></td><td><code>Also install maxima</code></td></tr></table>




---

archive/issue_comments_599517.json:
```json
{
    "body": "**Changing commit** from \"[4dcd083615e7eb7218b595c61fd9b9a4754222cb](https://github.com/sagemath/sagetrac-mirror/commit/4dcd083615e7eb7218b595c61fd9b9a4754222cb)\" to \"[d30fda0a1bd9682d624feed871c3c94fa53921df](https://github.com/sagemath/sagetrac-mirror/commit/d30fda0a1bd9682d624feed871c3c94fa53921df)\".",
    "created_at": "2021-01-12T17:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599517",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4dcd083615e7eb7218b595c61fd9b9a4754222cb](https://github.com/sagemath/sagetrac-mirror/commit/4dcd083615e7eb7218b595c61fd9b9a4754222cb)" to "[d30fda0a1bd9682d624feed871c3c94fa53921df](https://github.com/sagemath/sagetrac-mirror/commit/d30fda0a1bd9682d624feed871c3c94fa53921df)".



---

archive/issue_comments_599518.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b17e6faef915267735b95135e326ffc74fd558b6\">b17e6fa</a></td><td><code>Use configure.ac as make target</code></td></tr></table>\n",
    "created_at": "2021-01-12T19:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599518",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b17e6faef915267735b95135e326ffc74fd558b6">b17e6fa</a></td><td><code>Use configure.ac as make target</code></td></tr></table>




---

archive/issue_comments_599519.json:
```json
{
    "body": "**Changing commit** from \"[d30fda0a1bd9682d624feed871c3c94fa53921df](https://github.com/sagemath/sagetrac-mirror/commit/d30fda0a1bd9682d624feed871c3c94fa53921df)\" to \"[b17e6faef915267735b95135e326ffc74fd558b6](https://github.com/sagemath/sagetrac-mirror/commit/b17e6faef915267735b95135e326ffc74fd558b6)\".",
    "created_at": "2021-01-12T19:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599519",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d30fda0a1bd9682d624feed871c3c94fa53921df](https://github.com/sagemath/sagetrac-mirror/commit/d30fda0a1bd9682d624feed871c3c94fa53921df)" to "[b17e6faef915267735b95135e326ffc74fd558b6](https://github.com/sagemath/sagetrac-mirror/commit/b17e6faef915267735b95135e326ffc74fd558b6)".



---

archive/issue_comments_599520.json:
```json
{
    "body": "<a id='comment:228'></a>\nReplying to [mkoeppe](#comment%3A210):\n> For ECL, there's ticket #30770 to make this configuration more flexible.\n\n\nThis seems to work now. Thanks for you help!\n\nTwo follow-up questions:\n1. Is there a make target similar to sagelib-build-deps that doesn't install pythonic packages such as cython.\n2. Why doesn't sagelib-build-deps install maxima?",
    "created_at": "2021-01-12T20:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599520",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:228'></a>
Replying to [mkoeppe](#comment%3A210):
> For ECL, there's ticket #30770 to make this configuration more flexible.


This seems to work now. Thanks for you help!

Two follow-up questions:
1. Is there a make target similar to sagelib-build-deps that doesn't install pythonic packages such as cython.
2. Why doesn't sagelib-build-deps install maxima?



---

archive/issue_comments_599521.json:
```json
{
    "body": "**Changing commit** from \"[b17e6faef915267735b95135e326ffc74fd558b6](https://github.com/sagemath/sagetrac-mirror/commit/b17e6faef915267735b95135e326ffc74fd558b6)\" to \"[5d64c5a44b44e36c260eca75c60e179093f0b67f](https://github.com/sagemath/sagetrac-mirror/commit/5d64c5a44b44e36c260eca75c60e179093f0b67f)\".",
    "created_at": "2021-01-12T21:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599521",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b17e6faef915267735b95135e326ffc74fd558b6](https://github.com/sagemath/sagetrac-mirror/commit/b17e6faef915267735b95135e326ffc74fd558b6)" to "[5d64c5a44b44e36c260eca75c60e179093f0b67f](https://github.com/sagemath/sagetrac-mirror/commit/5d64c5a44b44e36c260eca75c60e179093f0b67f)".



---

archive/issue_comments_599522.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d64c5a44b44e36c260eca75c60e179093f0b67f\">5d64c5a</a></td><td><code>Install/fix other packages</code></td></tr></table>\n",
    "created_at": "2021-01-12T21:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599522",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d64c5a44b44e36c260eca75c60e179093f0b67f">5d64c5a</a></td><td><code>Install/fix other packages</code></td></tr></table>




---

archive/issue_comments_599523.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b\">dbf2df2</a></td><td><code>Install more dependencies manually</code></td></tr></table>\n",
    "created_at": "2021-01-12T22:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599523",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b">dbf2df2</a></td><td><code>Install more dependencies manually</code></td></tr></table>




---

archive/issue_comments_599524.json:
```json
{
    "body": "**Changing commit** from \"[5d64c5a44b44e36c260eca75c60e179093f0b67f](https://github.com/sagemath/sagetrac-mirror/commit/5d64c5a44b44e36c260eca75c60e179093f0b67f)\" to \"[dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b](https://github.com/sagemath/sagetrac-mirror/commit/dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b)\".",
    "created_at": "2021-01-12T22:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599524",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5d64c5a44b44e36c260eca75c60e179093f0b67f](https://github.com/sagemath/sagetrac-mirror/commit/5d64c5a44b44e36c260eca75c60e179093f0b67f)" to "[dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b](https://github.com/sagemath/sagetrac-mirror/commit/dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b)".



---

archive/issue_comments_599525.json:
```json
{
    "body": "<a id='comment:231'></a>\nReplying to [gh-tobiasdiez](#comment%3A228):\n> 1. Is there a make target similar to sagelib-build-deps that doesn't install pythonic packages such as cython.\n\n\nNot yet. #30896 will go into this direction\n\n> 2. Why doesn't sagelib-build-deps install maxima?\n\n\nmaxima is only needed at runtime of Sage, not while installing sagelib.",
    "created_at": "2021-01-12T23:10:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599525",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:231'></a>
Replying to [gh-tobiasdiez](#comment%3A228):
> 1. Is there a make target similar to sagelib-build-deps that doesn't install pythonic packages such as cython.


Not yet. #30896 will go into this direction

> 2. Why doesn't sagelib-build-deps install maxima?


maxima is only needed at runtime of Sage, not while installing sagelib.



---

archive/issue_comments_599526.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b66df86359a2ee8be8ab481d0aea20b8960d0ef9\">b66df86</a></td><td><code>Run tests in parallel</code></td></tr></table>\n",
    "created_at": "2021-01-13T01:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599526",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b66df86359a2ee8be8ab481d0aea20b8960d0ef9">b66df86</a></td><td><code>Run tests in parallel</code></td></tr></table>




---

archive/issue_comments_599527.json:
```json
{
    "body": "**Changing commit** from \"[dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b](https://github.com/sagemath/sagetrac-mirror/commit/dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b)\" to \"[b66df86359a2ee8be8ab481d0aea20b8960d0ef9](https://github.com/sagemath/sagetrac-mirror/commit/b66df86359a2ee8be8ab481d0aea20b8960d0ef9)\".",
    "created_at": "2021-01-13T01:11:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599527",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b](https://github.com/sagemath/sagetrac-mirror/commit/dbf2df2f53f7b1b7e7760f0fd578f86a44c9df4b)" to "[b66df86359a2ee8be8ab481d0aea20b8960d0ef9](https://github.com/sagemath/sagetrac-mirror/commit/b66df86359a2ee8be8ab481d0aea20b8960d0ef9)".



---

archive/issue_comments_599528.json:
```json
{
    "body": "**Changing commit** from \"[b66df86359a2ee8be8ab481d0aea20b8960d0ef9](https://github.com/sagemath/sagetrac-mirror/commit/b66df86359a2ee8be8ab481d0aea20b8960d0ef9)\" to \"[1fdfe680752f2878c76234733dc34780e3107715](https://github.com/sagemath/sagetrac-mirror/commit/1fdfe680752f2878c76234733dc34780e3107715)\".",
    "created_at": "2021-01-13T10:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599528",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b66df86359a2ee8be8ab481d0aea20b8960d0ef9](https://github.com/sagemath/sagetrac-mirror/commit/b66df86359a2ee8be8ab481d0aea20b8960d0ef9)" to "[1fdfe680752f2878c76234733dc34780e3107715](https://github.com/sagemath/sagetrac-mirror/commit/1fdfe680752f2878c76234733dc34780e3107715)".



---

archive/issue_comments_599529.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54587761d2e3e1dae418fba24120a10c754e5eed\">5458776</a></td><td><code>Disable timeout in tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fdfe680752f2878c76234733dc34780e3107715\">1fdfe68</a></td><td><code>Install fpylll</code></td></tr></table>\n",
    "created_at": "2021-01-13T10:42:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599529",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54587761d2e3e1dae418fba24120a10c754e5eed">5458776</a></td><td><code>Disable timeout in tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fdfe680752f2878c76234733dc34780e3107715">1fdfe68</a></td><td><code>Install fpylll</code></td></tr></table>




---

archive/issue_comments_599530.json:
```json
{
    "body": "**Changing commit** from \"[1fdfe680752f2878c76234733dc34780e3107715](https://github.com/sagemath/sagetrac-mirror/commit/1fdfe680752f2878c76234733dc34780e3107715)\" to \"[f0bd45cf7ff1ac240bfd10af8844df187c1f97f4](https://github.com/sagemath/sagetrac-mirror/commit/f0bd45cf7ff1ac240bfd10af8844df187c1f97f4)\".",
    "created_at": "2021-01-13T12:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599530",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1fdfe680752f2878c76234733dc34780e3107715](https://github.com/sagemath/sagetrac-mirror/commit/1fdfe680752f2878c76234733dc34780e3107715)" to "[f0bd45cf7ff1ac240bfd10af8844df187c1f97f4](https://github.com/sagemath/sagetrac-mirror/commit/f0bd45cf7ff1ac240bfd10af8844df187c1f97f4)".



---

archive/issue_comments_599531.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0bd45cf7ff1ac240bfd10af8844df187c1f97f4\">f0bd45c</a></td><td><code>Install singular-data to find gftables?</code></td></tr></table>\n",
    "created_at": "2021-01-13T12:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599531",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0bd45cf7ff1ac240bfd10af8844df187c1f97f4">f0bd45c</a></td><td><code>Install singular-data to find gftables?</code></td></tr></table>




---

archive/issue_comments_599532.json:
```json
{
    "body": "**Changing commit** from \"[f0bd45cf7ff1ac240bfd10af8844df187c1f97f4](https://github.com/sagemath/sagetrac-mirror/commit/f0bd45cf7ff1ac240bfd10af8844df187c1f97f4)\" to \"[8a401efbb30b1049b05af3b4e756087d64968505](https://github.com/sagemath/sagetrac-mirror/commit/8a401efbb30b1049b05af3b4e756087d64968505)\".",
    "created_at": "2021-01-13T13:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599532",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f0bd45cf7ff1ac240bfd10af8844df187c1f97f4](https://github.com/sagemath/sagetrac-mirror/commit/f0bd45cf7ff1ac240bfd10af8844df187c1f97f4)" to "[8a401efbb30b1049b05af3b4e756087d64968505](https://github.com/sagemath/sagetrac-mirror/commit/8a401efbb30b1049b05af3b4e756087d64968505)".



---

archive/issue_comments_599533.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b18fd0d27f9332a84502879aa8fc4a79cecd7fe\">0b18fd0</a></td><td><code>31029: upgrade cypari2 to 2.1.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0\">b9aadfd</a></td><td><code>31029: adapt sage library code to cypari2 version 2.1.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a401efbb30b1049b05af3b4e756087d64968505\">8a401ef</a></td><td><code>Merge branch 'u/vdelecroix/31029' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-01-13T13:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599533",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b18fd0d27f9332a84502879aa8fc4a79cecd7fe">0b18fd0</a></td><td><code>31029: upgrade cypari2 to 2.1.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9aadfd08e81d74ca7c229bb80eb853b592887d0">b9aadfd</a></td><td><code>31029: adapt sage library code to cypari2 version 2.1.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a401efbb30b1049b05af3b4e756087d64968505">8a401ef</a></td><td><code>Merge branch 'u/vdelecroix/31029' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599534.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6c32850cea836acbfdf58b6ea85d7b088482450\">f6c3285</a></td><td><code>Workflow cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22e8fe7c5ab241996824216396b9025997c939be\">22e8fe7</a></td><td><code>Set high timeout</code></td></tr></table>\n",
    "created_at": "2021-01-13T15:53:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599534",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6c32850cea836acbfdf58b6ea85d7b088482450">f6c3285</a></td><td><code>Workflow cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22e8fe7c5ab241996824216396b9025997c939be">22e8fe7</a></td><td><code>Set high timeout</code></td></tr></table>




---

archive/issue_comments_599535.json:
```json
{
    "body": "**Changing commit** from \"[8a401efbb30b1049b05af3b4e756087d64968505](https://github.com/sagemath/sagetrac-mirror/commit/8a401efbb30b1049b05af3b4e756087d64968505)\" to \"[22e8fe7c5ab241996824216396b9025997c939be](https://github.com/sagemath/sagetrac-mirror/commit/22e8fe7c5ab241996824216396b9025997c939be)\".",
    "created_at": "2021-01-13T15:53:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599535",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8a401efbb30b1049b05af3b4e756087d64968505](https://github.com/sagemath/sagetrac-mirror/commit/8a401efbb30b1049b05af3b4e756087d64968505)" to "[22e8fe7c5ab241996824216396b9025997c939be](https://github.com/sagemath/sagetrac-mirror/commit/22e8fe7c5ab241996824216396b9025997c939be)".



---

archive/issue_comments_599536.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks for the help! I've now improved the github workflow and the doctest pass now (except a handful). So I would appreciate if this ticket could be review!\n\nhttps://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22",
    "created_at": "2021-01-13T15:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599536",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>
Thanks for the help! I've now improved the github workflow and the doctest pass now (except a handful). So I would appreciate if this ticket could be review!

https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22



---

archive/issue_comments_599537.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029\".",
    "created_at": "2021-01-13T15:56:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599537",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029".



---

archive/issue_comments_599538.json:
```json
{
    "body": "**Changing commit** from \"[22e8fe7c5ab241996824216396b9025997c939be](https://github.com/sagemath/sagetrac-mirror/commit/22e8fe7c5ab241996824216396b9025997c939be)\" to \"[3d071819a98f2d8f8e50935223d38042e04923e1](https://github.com/sagemath/sagetrac-mirror/commit/3d071819a98f2d8f8e50935223d38042e04923e1)\".",
    "created_at": "2021-01-14T08:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599538",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[22e8fe7c5ab241996824216396b9025997c939be](https://github.com/sagemath/sagetrac-mirror/commit/22e8fe7c5ab241996824216396b9025997c939be)" to "[3d071819a98f2d8f8e50935223d38042e04923e1](https://github.com/sagemath/sagetrac-mirror/commit/3d071819a98f2d8f8e50935223d38042e04923e1)".



---

archive/issue_comments_599539.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d071819a98f2d8f8e50935223d38042e04923e1\">3d07181</a></td><td><code>Run tests in serial again</code></td></tr></table>\n",
    "created_at": "2021-01-14T08:27:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599539",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d071819a98f2d8f8e50935223d38042e04923e1">3d07181</a></td><td><code>Run tests in serial again</code></td></tr></table>




---

archive/issue_comments_599540.json:
```json
{
    "body": "**Changing commit** from \"[3d071819a98f2d8f8e50935223d38042e04923e1](https://github.com/sagemath/sagetrac-mirror/commit/3d071819a98f2d8f8e50935223d38042e04923e1)\" to \"[cd38e05d1b88d4879bd65aa32eb1614356569802](https://github.com/sagemath/sagetrac-mirror/commit/cd38e05d1b88d4879bd65aa32eb1614356569802)\".",
    "created_at": "2021-01-14T10:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599540",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3d071819a98f2d8f8e50935223d38042e04923e1](https://github.com/sagemath/sagetrac-mirror/commit/3d071819a98f2d8f8e50935223d38042e04923e1)" to "[cd38e05d1b88d4879bd65aa32eb1614356569802](https://github.com/sagemath/sagetrac-mirror/commit/cd38e05d1b88d4879bd65aa32eb1614356569802)".



---

archive/issue_comments_599541.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd38e05d1b88d4879bd65aa32eb1614356569802\">cd38e05</a></td><td><code>Don't set SAGE_LOCAL in workflow</code></td></tr></table>\n",
    "created_at": "2021-01-14T10:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599541",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd38e05d1b88d4879bd65aa32eb1614356569802">cd38e05</a></td><td><code>Don't set SAGE_LOCAL in workflow</code></td></tr></table>




---

archive/issue_comments_599542.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e42e1249042e31381f40889cef835e5947add799\">e42e124</a></td><td><code>Update deps</code></td></tr></table>\n",
    "created_at": "2021-01-14T12:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599542",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e42e1249042e31381f40889cef835e5947add799">e42e124</a></td><td><code>Update deps</code></td></tr></table>




---

archive/issue_comments_599543.json:
```json
{
    "body": "**Changing commit** from \"[cd38e05d1b88d4879bd65aa32eb1614356569802](https://github.com/sagemath/sagetrac-mirror/commit/cd38e05d1b88d4879bd65aa32eb1614356569802)\" to \"[e42e1249042e31381f40889cef835e5947add799](https://github.com/sagemath/sagetrac-mirror/commit/e42e1249042e31381f40889cef835e5947add799)\".",
    "created_at": "2021-01-14T12:14:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599543",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cd38e05d1b88d4879bd65aa32eb1614356569802](https://github.com/sagemath/sagetrac-mirror/commit/cd38e05d1b88d4879bd65aa32eb1614356569802)" to "[e42e1249042e31381f40889cef835e5947add799](https://github.com/sagemath/sagetrac-mirror/commit/e42e1249042e31381f40889cef835e5947add799)".



---

archive/issue_comments_599544.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d84b5ab5ac0741e872fb5a15539c2bbf935fe86\">2d84b5a</a></td><td><code>tox.ini: Add missing esac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3fd16f437348278ae7859e9e9f017b356e1ed07c\">3fd16f4</a></td><td><code>Merge branch 'u/mkoeppe/tox_ini__local___add_environment_variables_to_skip_system_package_installs__mechanism_for_a_local_interactive_shell' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1079de570eb56f0031153286ed3ff79e273986c\">d1079de</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-01-19T15:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599544",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d84b5ab5ac0741e872fb5a15539c2bbf935fe86">2d84b5a</a></td><td><code>tox.ini: Add missing esac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3fd16f437348278ae7859e9e9f017b356e1ed07c">3fd16f4</a></td><td><code>Merge branch 'u/mkoeppe/tox_ini__local___add_environment_variables_to_skip_system_package_installs__mechanism_for_a_local_interactive_shell' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1079de570eb56f0031153286ed3ff79e273986c">d1079de</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599545.json:
```json
{
    "body": "**Changing commit** from \"[e42e1249042e31381f40889cef835e5947add799](https://github.com/sagemath/sagetrac-mirror/commit/e42e1249042e31381f40889cef835e5947add799)\" to \"[d1079de570eb56f0031153286ed3ff79e273986c](https://github.com/sagemath/sagetrac-mirror/commit/d1079de570eb56f0031153286ed3ff79e273986c)\".",
    "created_at": "2021-01-19T15:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599545",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e42e1249042e31381f40889cef835e5947add799](https://github.com/sagemath/sagetrac-mirror/commit/e42e1249042e31381f40889cef835e5947add799)" to "[d1079de570eb56f0031153286ed3ff79e273986c](https://github.com/sagemath/sagetrac-mirror/commit/d1079de570eb56f0031153286ed3ff79e273986c)".



---

archive/issue_comments_599546.json:
```json
{
    "body": "<a id='comment:2'></a>\nInstead of introducing a new environment variable `SAGE_NUM_BUILD_JOBS`, probably best to use `SAGE_NUM_THREADS`, which is used already in the same source tree.",
    "created_at": "2021-01-21T01:40:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599546",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Instead of introducing a new environment variable `SAGE_NUM_BUILD_JOBS`, probably best to use `SAGE_NUM_THREADS`, which is used already in the same source tree.



---

archive/issue_comments_599547.json:
```json
{
    "body": "<a id='comment:243'></a>\nReplying to [mkoeppe](#comment%3A242):\n> Instead of introducing a new environment variable `SAGE_NUM_BUILD_JOBS`, probably best to use `SAGE_NUM_THREADS`, which is used already in the same source tree.\n\n\nOk, done!",
    "created_at": "2021-01-21T11:17:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599547",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:243'></a>
Replying to [mkoeppe](#comment%3A242):
> Instead of introducing a new environment variable `SAGE_NUM_BUILD_JOBS`, probably best to use `SAGE_NUM_THREADS`, which is used already in the same source tree.


Ok, done!



---

archive/issue_comments_599548.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54ec54903fba3cfeef2fc3c0c190b7b71c3ac2d9\">54ec549</a></td><td><code>Reuse SAGE_NUM_THREADS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d798925a1bb48a96087c3db03950e90059c9c37b\">d798925</a></td><td><code>Update dependencies</code></td></tr></table>\n",
    "created_at": "2021-01-21T11:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599548",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54ec54903fba3cfeef2fc3c0c190b7b71c3ac2d9">54ec549</a></td><td><code>Reuse SAGE_NUM_THREADS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d798925a1bb48a96087c3db03950e90059c9c37b">d798925</a></td><td><code>Update dependencies</code></td></tr></table>




---

archive/issue_comments_599549.json:
```json
{
    "body": "**Changing commit** from \"[d1079de570eb56f0031153286ed3ff79e273986c](https://github.com/sagemath/sagetrac-mirror/commit/d1079de570eb56f0031153286ed3ff79e273986c)\" to \"[d798925a1bb48a96087c3db03950e90059c9c37b](https://github.com/sagemath/sagetrac-mirror/commit/d798925a1bb48a96087c3db03950e90059c9c37b)\".",
    "created_at": "2021-01-21T11:28:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599549",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d1079de570eb56f0031153286ed3ff79e273986c](https://github.com/sagemath/sagetrac-mirror/commit/d1079de570eb56f0031153286ed3ff79e273986c)" to "[d798925a1bb48a96087c3db03950e90059c9c37b](https://github.com/sagemath/sagetrac-mirror/commit/d798925a1bb48a96087c3db03950e90059c9c37b)".



---

archive/issue_comments_599550.json:
```json
{
    "body": "**Changing commit** from \"[d798925a1bb48a96087c3db03950e90059c9c37b](https://github.com/sagemath/sagetrac-mirror/commit/d798925a1bb48a96087c3db03950e90059c9c37b)\" to \"[cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5](https://github.com/sagemath/sagetrac-mirror/commit/cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5)\".",
    "created_at": "2021-01-21T13:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599550",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d798925a1bb48a96087c3db03950e90059c9c37b](https://github.com/sagemath/sagetrac-mirror/commit/d798925a1bb48a96087c3db03950e90059c9c37b)" to "[cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5](https://github.com/sagemath/sagetrac-mirror/commit/cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5)".



---

archive/issue_comments_599551.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5\">cd8a8d1</a></td><td><code>Move pgkconfig to normal package</code></td></tr></table>\n",
    "created_at": "2021-01-21T13:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599551",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5">cd8a8d1</a></td><td><code>Move pgkconfig to normal package</code></td></tr></table>




---

archive/issue_comments_599552.json:
```json
{
    "body": "**Changing commit** from \"[cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5](https://github.com/sagemath/sagetrac-mirror/commit/cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5)\" to \"[63c7997e078bb7b3a1ab39ef1a2c29d210376f71](https://github.com/sagemath/sagetrac-mirror/commit/63c7997e078bb7b3a1ab39ef1a2c29d210376f71)\".",
    "created_at": "2021-01-21T16:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599552",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5](https://github.com/sagemath/sagetrac-mirror/commit/cd8a8d19ea80b99357c465b4e1ff3f285a8b26b5)" to "[63c7997e078bb7b3a1ab39ef1a2c29d210376f71](https://github.com/sagemath/sagetrac-mirror/commit/63c7997e078bb7b3a1ab39ef1a2c29d210376f71)".



---

archive/issue_comments_599553.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63c7997e078bb7b3a1ab39ef1a2c29d210376f71\">63c7997</a></td><td><code>Make cython and sage_conf also normal packages</code></td></tr></table>\n",
    "created_at": "2021-01-21T16:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599553",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63c7997e078bb7b3a1ab39ef1a2c29d210376f71">63c7997</a></td><td><code>Make cython and sage_conf also normal packages</code></td></tr></table>




---

archive/issue_comments_599554.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87e29924089d2e8150662a4a68a7a1fa1348a114\">87e2992</a></td><td><code>Move ipywidgets to normal package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a18b3c59eff2940159fdb930eea4af04b444e828\">a18b3c5</a></td><td><code>Install dev packages as well on ci</code></td></tr></table>\n",
    "created_at": "2021-01-22T10:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599554",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87e29924089d2e8150662a4a68a7a1fa1348a114">87e2992</a></td><td><code>Move ipywidgets to normal package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a18b3c59eff2940159fdb930eea4af04b444e828">a18b3c5</a></td><td><code>Install dev packages as well on ci</code></td></tr></table>




---

archive/issue_comments_599555.json:
```json
{
    "body": "**Changing commit** from \"[63c7997e078bb7b3a1ab39ef1a2c29d210376f71](https://github.com/sagemath/sagetrac-mirror/commit/63c7997e078bb7b3a1ab39ef1a2c29d210376f71)\" to \"[a18b3c59eff2940159fdb930eea4af04b444e828](https://github.com/sagemath/sagetrac-mirror/commit/a18b3c59eff2940159fdb930eea4af04b444e828)\".",
    "created_at": "2021-01-22T10:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599555",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[63c7997e078bb7b3a1ab39ef1a2c29d210376f71](https://github.com/sagemath/sagetrac-mirror/commit/63c7997e078bb7b3a1ab39ef1a2c29d210376f71)" to "[a18b3c59eff2940159fdb930eea4af04b444e828](https://github.com/sagemath/sagetrac-mirror/commit/a18b3c59eff2940159fdb930eea4af04b444e828)".



---

archive/issue_comments_599556.json:
```json
{
    "body": "**Changing commit** from \"[a18b3c59eff2940159fdb930eea4af04b444e828](https://github.com/sagemath/sagetrac-mirror/commit/a18b3c59eff2940159fdb930eea4af04b444e828)\" to \"[f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb](https://github.com/sagemath/sagetrac-mirror/commit/f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb)\".",
    "created_at": "2021-01-22T12:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599556",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a18b3c59eff2940159fdb930eea4af04b444e828](https://github.com/sagemath/sagetrac-mirror/commit/a18b3c59eff2940159fdb930eea4af04b444e828)" to "[f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb](https://github.com/sagemath/sagetrac-mirror/commit/f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb)".



---

archive/issue_comments_599557.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb\">f88cfc6</a></td><td><code>Set SAGE_LOCAL in workflow for gap</code></td></tr></table>\n",
    "created_at": "2021-01-22T12:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599557",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb">f88cfc6</a></td><td><code>Set SAGE_LOCAL in workflow for gap</code></td></tr></table>




---

archive/issue_comments_599558.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29\">d42fbfc</a></td><td><code>See if error comes from  memory problems</code></td></tr></table>\n",
    "created_at": "2021-01-22T20:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599558",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29">d42fbfc</a></td><td><code>See if error comes from  memory problems</code></td></tr></table>




---

archive/issue_comments_599559.json:
```json
{
    "body": "**Changing commit** from \"[f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb](https://github.com/sagemath/sagetrac-mirror/commit/f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb)\" to \"[d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29](https://github.com/sagemath/sagetrac-mirror/commit/d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29)\".",
    "created_at": "2021-01-22T20:53:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599559",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb](https://github.com/sagemath/sagetrac-mirror/commit/f88cfc6a6382cf5cf35a602f83b7bedc06fc67eb)" to "[d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29](https://github.com/sagemath/sagetrac-mirror/commit/d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29)".



---

archive/issue_comments_599560.json:
```json
{
    "body": "**Changing commit** from \"[d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29](https://github.com/sagemath/sagetrac-mirror/commit/d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29)\" to \"[8580789c62f04a49ea893c53bf28d20a80a1aa73](https://github.com/sagemath/sagetrac-mirror/commit/8580789c62f04a49ea893c53bf28d20a80a1aa73)\".",
    "created_at": "2021-01-22T21:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599560",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29](https://github.com/sagemath/sagetrac-mirror/commit/d42fbfc8fe52e06a7c6a54cf6c0a7ea94c6e3a29)" to "[8580789c62f04a49ea893c53bf28d20a80a1aa73](https://github.com/sagemath/sagetrac-mirror/commit/8580789c62f04a49ea893c53bf28d20a80a1aa73)".



---

archive/issue_comments_599561.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8580789c62f04a49ea893c53bf28d20a80a1aa73\">8580789</a></td><td><code>Fix indent</code></td></tr></table>\n",
    "created_at": "2021-01-22T21:06:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599561",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8580789c62f04a49ea893c53bf28d20a80a1aa73">8580789</a></td><td><code>Fix indent</code></td></tr></table>




---

archive/issue_comments_599562.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1145360fdc51ee246c27715ce298c6005fd4b281\">1145360</a></td><td><code>Fix paths to memory usage</code></td></tr></table>\n",
    "created_at": "2021-01-23T10:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599562",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1145360fdc51ee246c27715ce298c6005fd4b281">1145360</a></td><td><code>Fix paths to memory usage</code></td></tr></table>




---

archive/issue_comments_599563.json:
```json
{
    "body": "**Changing commit** from \"[8580789c62f04a49ea893c53bf28d20a80a1aa73](https://github.com/sagemath/sagetrac-mirror/commit/8580789c62f04a49ea893c53bf28d20a80a1aa73)\" to \"[1145360fdc51ee246c27715ce298c6005fd4b281](https://github.com/sagemath/sagetrac-mirror/commit/1145360fdc51ee246c27715ce298c6005fd4b281)\".",
    "created_at": "2021-01-23T10:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599563",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8580789c62f04a49ea893c53bf28d20a80a1aa73](https://github.com/sagemath/sagetrac-mirror/commit/8580789c62f04a49ea893c53bf28d20a80a1aa73)" to "[1145360fdc51ee246c27715ce298c6005fd4b281](https://github.com/sagemath/sagetrac-mirror/commit/1145360fdc51ee246c27715ce298c6005fd4b281)".



---

archive/issue_comments_599564.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bdfef1b21da9f376cfd3c096cb9932fe5334e4e\">4bdfef1</a></td><td><code>Try with sudo</code></td></tr></table>\n",
    "created_at": "2021-01-23T14:49:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bdfef1b21da9f376cfd3c096cb9932fe5334e4e">4bdfef1</a></td><td><code>Try with sudo</code></td></tr></table>




---

archive/issue_comments_599565.json:
```json
{
    "body": "**Changing commit** from \"[1145360fdc51ee246c27715ce298c6005fd4b281](https://github.com/sagemath/sagetrac-mirror/commit/1145360fdc51ee246c27715ce298c6005fd4b281)\" to \"[4bdfef1b21da9f376cfd3c096cb9932fe5334e4e](https://github.com/sagemath/sagetrac-mirror/commit/4bdfef1b21da9f376cfd3c096cb9932fe5334e4e)\".",
    "created_at": "2021-01-23T14:49:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1145360fdc51ee246c27715ce298c6005fd4b281](https://github.com/sagemath/sagetrac-mirror/commit/1145360fdc51ee246c27715ce298c6005fd4b281)" to "[4bdfef1b21da9f376cfd3c096cb9932fe5334e4e](https://github.com/sagemath/sagetrac-mirror/commit/4bdfef1b21da9f376cfd3c096cb9932fe5334e4e)".



---

archive/issue_comments_599566.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,10 +4,9 @@\n \n ```\n cd src\n+mkdir .venv\n pipenv install\n-pipenv shell\n-python\n-import sage.all\n+pipenv run sage-runtests --all\n ```\n It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.\n Note: This code probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL, and the github action for ubuntu 20.10).\n@@ -17,14 +16,11 @@\n \n TODO (as followup tickets):\n - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.\n-- Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.\n - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n-- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.)\n-- Fix MacOS github action\n-- Run doctests in the github action via `sage -t` as soon as this no longer rely on `SAGE_LOCAL` (#22731)\n+- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.) Then fix MacOS github action.\n - Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/\n-- Fix doctests in the virtual environment (as reported by the github action)\n+- Fix doctests that currently fail when run from the virtual environment (as reported by the github action)\n \n Previous tickets on in-place builds, editable installs:\n - #12659\n``````\n",
    "created_at": "2021-01-24T12:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599566",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,10 +4,9 @@
 
 ```
 cd src
+mkdir .venv
 pipenv install
-pipenv shell
-python
-import sage.all
+pipenv run sage-runtests --all
 ```
 It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.
 Note: This code probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL, and the github action for ubuntu 20.10).
@@ -17,14 +16,11 @@
 
 TODO (as followup tickets):
 - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.
-- Fix cysignals, see https://github.com/sagemath/cysignals/issues/111.
 - Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
 - Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
-- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.)
-- Fix MacOS github action
-- Run doctests in the github action via `sage -t` as soon as this no longer rely on `SAGE_LOCAL` (#22731)
+- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.) Then fix MacOS github action.
 - Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/
-- Fix doctests in the virtual environment (as reported by the github action)
+- Fix doctests that currently fail when run from the virtual environment (as reported by the github action)
 
 Previous tickets on in-place builds, editable installs:
 - #12659
``````




---

archive/issue_comments_599567.json:
```json
{
    "body": "<a id='comment:4'></a>\nI think it should be done on top of #30913",
    "created_at": "2021-02-02T17:55:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599567",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
I think it should be done on top of #30913



---

archive/issue_comments_599568.json:
```json
{
    "body": "<a id='comment:5'></a>\nSince the pipfile in this ticket is more uptodate and is welltested (manually and through the added github action), I would actually argue that #30913 should be on top of this ticket.\n\nMoreover, #30770 is the only open dependency of this ticket, so I guess its also more realistic to get this in first.",
    "created_at": "2021-02-02T19:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599568",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
Since the pipfile in this ticket is more uptodate and is welltested (manually and through the added github action), I would actually argue that #30913 should be on top of this ticket.

Moreover, #30770 is the only open dependency of this ticket, so I guess its also more realistic to get this in first.



---

archive/issue_comments_599569.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis approach would also work. But I am skeptical about checking in the `Pipfile.lock`. Stuff for nightmare merge conflicts for everyone. I think it would be better if this was an ignored file.",
    "created_at": "2021-02-02T21:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599569",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
This approach would also work. But I am skeptical about checking in the `Pipfile.lock`. Stuff for nightmare merge conflicts for everyone. I think it would be better if this was an ignored file.



---

archive/issue_comments_599570.json:
```json
{
    "body": "<a id='comment:8'></a>\nWhen the next beta comes out (hopefully soon), let's rebase it on top of it (and #30770). The commit history is a bit too wild",
    "created_at": "2021-02-02T21:08:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599570",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
When the next beta comes out (hopefully soon), let's rebase it on top of it (and #30770). The commit history is a bit too wild



---

archive/issue_comments_599571.json:
```json
{
    "body": "<a id='comment:9'></a>\nAlso, could you please:\n- clean up the ticket description \n- move documentation items from there to the manuals (installation and/or developer's manual) \n- move the remaining issues to new or existing tickets",
    "created_at": "2021-02-02T21:11:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599571",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Also, could you please:
- clean up the ticket description 
- move documentation items from there to the manuals (installation and/or developer's manual) 
- move the remaining issues to new or existing tickets



---

archive/issue_events_088671.json:
```json
{
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88671"
}
```



---

archive/issue_comments_599572.json:
```json
{
    "body": "<a id='comment:260'></a>\nReplying to [mkoeppe](#comment%3A256):\n> But I am skeptical about checking in the `Pipfile.lock`. Stuff for nightmare merge conflicts for everyone. I think it would be better if this was an ignored file.\n\n\nWithout the lock file you wouldn't get a reproducible virtual environment, since pipenv would always use the latest versions (that are compatible with each other). Moreover, the lock file is normally not changed, except if you call `pipenv update`. \nThe workflow to update Python packages would then look as follows:\n- Run `pipenv update`\n- Test\n- If everything is fine, create ticket updating pipfile.lock and create a ticket for each updated dependency that is also listed in sage's build/pgks folder.\n\nWill have a look at the other todo's you mention.",
    "created_at": "2021-02-03T13:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599572",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:260'></a>
Replying to [mkoeppe](#comment%3A256):
> But I am skeptical about checking in the `Pipfile.lock`. Stuff for nightmare merge conflicts for everyone. I think it would be better if this was an ignored file.


Without the lock file you wouldn't get a reproducible virtual environment, since pipenv would always use the latest versions (that are compatible with each other). Moreover, the lock file is normally not changed, except if you call `pipenv update`. 
The workflow to update Python packages would then look as follows:
- Run `pipenv update`
- Test
- If everything is fine, create ticket updating pipfile.lock and create a ticket for each updated dependency that is also listed in sage's build/pgks folder.

Will have a look at the other todo's you mention.



---

archive/issue_comments_599573.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,29 +9,22 @@\n pipenv run sage-runtests --all\n ```\n It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.\n-Note: This code probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL, and the github action for ubuntu 20.10).\n-\n+Note: This procedure might not work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for Ubuntu 20.04 in WSL, and the github action for Ubuntu 20.10).\n \n The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace\n+Most tests are working, but for some reason after more or less exactly 2.5h of execution time the doctest run out of memory. This still needs investigation. #31341\n \n TODO (as followup tickets):\n-- Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.\n-- Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and \"Problem: Hiding broken setup.py defined dependencies\" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py\n-- Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597\n+- Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n+- Consider moving package dependencies from pipfile to install_requires in `src/setup.py`. Let's discuss this as part of #30913.\n+- Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is \"always include in version control\", see https://github.com/pypa/pipenv/issues/598.\n - Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.) Then fix MacOS github action.\n-- Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/\n-- Fix doctests that currently fail when run from the virtual environment (as reported by the github action)\n+\n \n Previous tickets on in-place builds, editable installs:\n - #12659\n - #21535\n \n-\n-For later reference (needs to be placed in the dev docs):\n-- Make an empty folder inside `src` and name it `.venv` (this will be the place the virtual environment is installed to)\n-- Install pipenv\n-- Run `pipenv install`\n-- Explain inplace/editable install as in https://stackoverflow.com/a/53378506/873661\n \n In order to compile the cython files only using system-wide installed libraries the following has to be done (on Ubunutu 20.04, under WSL):\n - Install dependencies:\n``````\n",
    "created_at": "2021-02-04T22:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599573",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,29 +9,22 @@
 pipenv run sage-runtests --all
 ```
 It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.
-Note: This code probably doesn't work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for WSL, and the github action for ubuntu 20.10).
-
+Note: This procedure might not work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for Ubuntu 20.04 in WSL, and the github action for Ubuntu 20.10).
 
 The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace
+Most tests are working, but for some reason after more or less exactly 2.5h of execution time the doctest run out of memory. This still needs investigation. #31341
 
 TODO (as followup tickets):
-- Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. Below are a few pointers on how to do this, but they are overly complicated at the moment and we should work on the following issues to make the process smoother.
-- Move package dependencies from pipfile to install_requires in `src/setup.py`. See https://github.com/psf/requests/blob/967a05bfffcb68f97296eda197b062221c2ebc0d/Pipfile#L25 and "Problem: Hiding broken setup.py defined dependencies" in https://github.com/pypa/pipenv/issues/1911. Alternative sync: https://github.com/Madoshakalaka/pipenv-setup. See also discussion in https://github.com/pypa/pipenv/issues/1263 and https://pipenv-fork.readthedocs.io/en/latest/advanced.html#pipfile-vs-setup-py
-- Do not commit pipfile.lock, but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597
+- Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
+- Consider moving package dependencies from pipfile to install_requires in `src/setup.py`. Let's discuss this as part of #30913.
+- Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is "always include in version control", see https://github.com/pypa/pipenv/issues/598.
 - Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.) Then fix MacOS github action.
-- Correctly provide all necessary build dependencies that are needed to install sage with build isolation, i.e. https://www.python.org/dev/peps/pep-0518/
-- Fix doctests that currently fail when run from the virtual environment (as reported by the github action)
+
 
 Previous tickets on in-place builds, editable installs:
 - #12659
 - #21535
 
-
-For later reference (needs to be placed in the dev docs):
-- Make an empty folder inside `src` and name it `.venv` (this will be the place the virtual environment is installed to)
-- Install pipenv
-- Run `pipenv install`
-- Explain inplace/editable install as in https://stackoverflow.com/a/53378506/873661
 
 In order to compile the cython files only using system-wide installed libraries the following has to be done (on Ubunutu 20.04, under WSL):
 - Install dependencies:
``````




---

archive/issue_comments_599574.json:
```json
{
    "body": "<a id='comment:2'></a>\nCleaned up the ticket description and added a bit of documentation. Since this is still somewhat experimental, I've only put it in the coding basics of the development doc. I guess with the recent changes and support of virtual environments, it might soon be time to update the recommended way of setting up a development platform.",
    "created_at": "2021-02-04T22:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599574",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:2'></a>
Cleaned up the ticket description and added a bit of documentation. Since this is still somewhat experimental, I've only put it in the coding basics of the development doc. I guess with the recent changes and support of virtual environments, it might soon be time to update the recommended way of setting up a development platform.



---

archive/issue_comments_599575.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/543b6d4e55879dee44f0e3d482b1ca1ebeda1d04\">543b6d4</a></td><td><code>Add basic documentation</code></td></tr></table>\n",
    "created_at": "2021-02-04T22:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/543b6d4e55879dee44f0e3d482b1ca1ebeda1d04">543b6d4</a></td><td><code>Add basic documentation</code></td></tr></table>




---

archive/issue_comments_599576.json:
```json
{
    "body": "**Changing commit** from \"[4bdfef1b21da9f376cfd3c096cb9932fe5334e4e](https://github.com/sagemath/sagetrac-mirror/commit/4bdfef1b21da9f376cfd3c096cb9932fe5334e4e)\" to \"[543b6d4e55879dee44f0e3d482b1ca1ebeda1d04](https://github.com/sagemath/sagetrac-mirror/commit/543b6d4e55879dee44f0e3d482b1ca1ebeda1d04)\".",
    "created_at": "2021-02-04T22:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599576",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4bdfef1b21da9f376cfd3c096cb9932fe5334e4e](https://github.com/sagemath/sagetrac-mirror/commit/4bdfef1b21da9f376cfd3c096cb9932fe5334e4e)" to "[543b6d4e55879dee44f0e3d482b1ca1ebeda1d04](https://github.com/sagemath/sagetrac-mirror/commit/543b6d4e55879dee44f0e3d482b1ca1ebeda1d04)".



---

archive/issue_comments_599577.json:
```json
{
    "body": "<a id='comment:264'></a>\nReplying to [gh-tobiasdiez](#comment%3A260):\n> The workflow to update Python packages would then look as follows [...]\n\n\nI would say it's not a good idea to try to change the developer workflow regarding package upgrades as part of this ticket.",
    "created_at": "2021-02-05T04:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599577",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:264'></a>
Replying to [gh-tobiasdiez](#comment%3A260):
> The workflow to update Python packages would then look as follows [...]


I would say it's not a good idea to try to change the developer workflow regarding package upgrades as part of this ticket.



---

archive/issue_comments_599578.json:
```json
{
    "body": "<a id='comment:5'></a>\nI agree, that was more meant to illustrate possible applications of the new pipenv environment (and the lockfile for that purpose).",
    "created_at": "2021-02-05T13:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599578",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
I agree, that was more meant to illustrate possible applications of the new pipenv environment (and the lockfile for that purpose).



---

archive/issue_comments_599579.json:
```json
{
    "body": "<a id='comment:6'></a>\nOK. I have created #31346 as a place for this.",
    "created_at": "2021-02-05T19:37:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599579",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
OK. I have created #31346 as a place for this.



---

archive/issue_comments_599580.json:
```json
{
    "body": "<a id='comment:7'></a>\nRegarding the documentation: \"After following the normal procedure of setting up your local development environment\" -- I think we should be explicit about requiring the full Sage distribution to be built first.  We cannot support experimental workflows as you (still) describe them in the ticket description.",
    "created_at": "2021-02-05T20:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599580",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Regarding the documentation: "After following the normal procedure of setting up your local development environment" -- I think we should be explicit about requiring the full Sage distribution to be built first.  We cannot support experimental workflows as you (still) describe them in the ticket description.



---

archive/issue_comments_599581.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/510a3bb5344b544e70b12cd53dd7c48e19701963\">510a3bb</a></td><td><code>Clarify point in the docs</code></td></tr></table>\n",
    "created_at": "2021-02-05T21:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599581",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/510a3bb5344b544e70b12cd53dd7c48e19701963">510a3bb</a></td><td><code>Clarify point in the docs</code></td></tr></table>




---

archive/issue_comments_599582.json:
```json
{
    "body": "**Changing commit** from \"[543b6d4e55879dee44f0e3d482b1ca1ebeda1d04](https://github.com/sagemath/sagetrac-mirror/commit/543b6d4e55879dee44f0e3d482b1ca1ebeda1d04)\" to \"[510a3bb5344b544e70b12cd53dd7c48e19701963](https://github.com/sagemath/sagetrac-mirror/commit/510a3bb5344b544e70b12cd53dd7c48e19701963)\".",
    "created_at": "2021-02-05T21:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[543b6d4e55879dee44f0e3d482b1ca1ebeda1d04](https://github.com/sagemath/sagetrac-mirror/commit/543b6d4e55879dee44f0e3d482b1ca1ebeda1d04)" to "[510a3bb5344b544e70b12cd53dd7c48e19701963](https://github.com/sagemath/sagetrac-mirror/commit/510a3bb5344b544e70b12cd53dd7c48e19701963)".



---

archive/issue_comments_599583.json:
```json
{
    "body": "<a id='comment:9'></a>\nSure!",
    "created_at": "2021-02-05T21:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599583",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
Sure!



---

archive/issue_comments_599584.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c21cc76386b75dbf07f01ae822c120ef9f29c9e9\">c21cc76</a></td><td><code>Update deps</code></td></tr></table>\n",
    "created_at": "2021-02-05T23:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599584",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c21cc76386b75dbf07f01ae822c120ef9f29c9e9">c21cc76</a></td><td><code>Update deps</code></td></tr></table>




---

archive/issue_comments_599585.json:
```json
{
    "body": "**Changing commit** from \"[510a3bb5344b544e70b12cd53dd7c48e19701963](https://github.com/sagemath/sagetrac-mirror/commit/510a3bb5344b544e70b12cd53dd7c48e19701963)\" to \"[c21cc76386b75dbf07f01ae822c120ef9f29c9e9](https://github.com/sagemath/sagetrac-mirror/commit/c21cc76386b75dbf07f01ae822c120ef9f29c9e9)\".",
    "created_at": "2021-02-05T23:51:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599585",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[510a3bb5344b544e70b12cd53dd7c48e19701963](https://github.com/sagemath/sagetrac-mirror/commit/510a3bb5344b544e70b12cd53dd7c48e19701963)" to "[c21cc76386b75dbf07f01ae822c120ef9f29c9e9](https://github.com/sagemath/sagetrac-mirror/commit/c21cc76386b75dbf07f01ae822c120ef9f29c9e9)".



---

archive/issue_comments_599586.json:
```json
{
    "body": "<a id='comment:1'></a>\nI've moved the part of the ticket description describing the experimental workflow on bare ubuntu to #31347.",
    "created_at": "2021-02-06T00:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599586",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
I've moved the part of the ticket description describing the experimental workflow on bare ubuntu to #31347.



---

archive/issue_comments_599587.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,25 +26,4 @@\n - #21535\n \n \n-In order to compile the cython files only using system-wide installed libraries the following has to be done (on Ubunutu 20.04, under WSL):\n-- Install dependencies:\n-  `apt-get install liblinbox-dev libflint-arb-dev libhomfly-dev libgiac-dev libratpoints-dev libzn-poly-dev libbrial-dev libbrial-groebner-dev libatlas-base-dev`\n-- Configure ARB by setting env variable `ARB_LIBRARY` to `flint-arb`.\n \n-- Install `GAP`:\n-  This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`\n-- Fix installation of `ecl`:\n-  After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.\n-  Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version). I also had the problem that `ECL_WITH_LISP_FPE_BEGIN` was not defined (probably because the version of ecl that I used was too old so that https://gitlab.com/embeddable-common-lisp/ecl/-/merge_requests/154 was not included.)\n-- Install maxima:\n-  `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`\n-\n-- cysignals is broken, see https://github.com/sagemath/cysignals/issues/111. \n-  To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).\n-\n-\n-\n-\n-\n-\n-\n``````\n",
    "created_at": "2021-02-06T00:27:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599587",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,25 +26,4 @@
 - #21535
 
 
-In order to compile the cython files only using system-wide installed libraries the following has to be done (on Ubunutu 20.04, under WSL):
-- Install dependencies:
-  `apt-get install liblinbox-dev libflint-arb-dev libhomfly-dev libgiac-dev libratpoints-dev libzn-poly-dev libbrial-dev libbrial-groebner-dev libatlas-base-dev`
-- Configure ARB by setting env variable `ARB_LIBRARY` to `flint-arb`.
 
-- Install `GAP`:
-  This would be `apt-get install libgap-dev`, but this requires Ubuntu 20.10: https://packages.ubuntu.com/groovy/libgap-dev and the old gap-dev didn't worked for me. So download libgap-dev, libgap7 and gap-libs manually from https://packages.ubuntu.com/groovy, and install them using `sudo dpkg -i ./gap-libs_4.11.0-4_all.deb` etc and `sudo apt install -f`
-- Fix installation of `ecl`:
-  After `apt-get install ecl` ecl is broken under WSL. To fix this, first run `apt-get install libtool autoconf`, then follow https://github.com/rdp/ffmpeg-windows-build-helpers/issues/452#issuecomment-638639182.
-  Maybe it would also work to build `ecl` directly from code: https://common-lisp.net/project/ecl/static/manual/Building-ECL.html#Building-ECL (which is also a newer version). I also had the problem that `ECL_WITH_LISP_FPE_BEGIN` was not defined (probably because the version of ecl that I used was too old so that https://gitlab.com/embeddable-common-lisp/ecl/-/merge_requests/154 was not included.)
-- Install maxima:
-  `apt-get install maxima-sage` and register with ecl using `sudo cp -f /usr/lib/ecl/maxima.fas /usr/lib/x86_64-linux-gnu/ecl-16.1.3/maxima.fas`
-
-- cysignals is broken, see https://github.com/sagemath/cysignals/issues/111. 
-  To fix this, remove all method bodies in `python3.8/site-packages/cysignals/macros.h` (relative to the venv).
-
-
-
-
-
-
-
``````




---

archive/issue_comments_599588.json:
```json
{
    "body": "<a id='comment:2'></a>\n9.3.beta7 is out, time for rebasing",
    "created_at": "2021-02-07T20:49:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599588",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
9.3.beta7 is out, time for rebasing



---

archive/issue_comments_599589.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a\">cf068df</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-02-07T22:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599589",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a">cf068df</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599590.json:
```json
{
    "body": "**Changing commit** from \"[c21cc76386b75dbf07f01ae822c120ef9f29c9e9](https://github.com/sagemath/sagetrac-mirror/commit/c21cc76386b75dbf07f01ae822c120ef9f29c9e9)\" to \"[cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a](https://github.com/sagemath/sagetrac-mirror/commit/cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a)\".",
    "created_at": "2021-02-07T22:09:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599590",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c21cc76386b75dbf07f01ae822c120ef9f29c9e9](https://github.com/sagemath/sagetrac-mirror/commit/c21cc76386b75dbf07f01ae822c120ef9f29c9e9)" to "[cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a](https://github.com/sagemath/sagetrac-mirror/commit/cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a)".



---

archive/issue_comments_599591.json:
```json
{
    "body": "<a id='comment:4'></a>\nNice, thanks for letting me know. I've merged the latest develop branch. The history of this branch still needs to be cleanup up, but let's do this after positive review.",
    "created_at": "2021-02-07T22:17:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599591",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>
Nice, thanks for letting me know. I've merged the latest develop branch. The history of this branch still needs to be cleanup up, but let's do this after positive review.



---

archive/issue_comments_599592.json:
```json
{
    "body": "<a id='comment:5'></a>\nCould you:\n- remove the change to `tox.ini` please?\n- Rename `sage_build_ext` and move it to a new module of `sage_setup.command` (and document what is different to the existing `sage_build_ext`)",
    "created_at": "2021-02-07T22:43:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599592",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Could you:
- remove the change to `tox.ini` please?
- Rename `sage_build_ext` and move it to a new module of `sage_setup.command` (and document what is different to the existing `sage_build_ext`)



---

archive/issue_comments_599593.json:
```json
{
    "body": "<a id='comment:6'></a>\nIn the new CI workflows:\n- For mac: I do not understand the line: `brew install pari`\n- For mac: Instead of setting `PKG_CONFIG_PATH` manually, perhaps use `.homebrew-build-env` because this is what `configure` suggests users to use\n- For linux: Why `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` (it is not done in the mac workflow). Should we create a `make` target that corresponds to what is needed?\n- For linux: Could you elaborate on \"# Set SAGE_LOCAL (required for gap)\"\n\nCould you review and add comments to the file please?",
    "created_at": "2021-02-07T23:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599593",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
In the new CI workflows:
- For mac: I do not understand the line: `brew install pari`
- For mac: Instead of setting `PKG_CONFIG_PATH` manually, perhaps use `.homebrew-build-env` because this is what `configure` suggests users to use
- For linux: Why `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` (it is not done in the mac workflow). Should we create a `make` target that corresponds to what is needed?
- For linux: Could you elaborate on "# Set SAGE_LOCAL (required for gap)"

Could you review and add comments to the file please?



---

archive/issue_comments_599594.json:
```json
{
    "body": "<a id='comment:7'></a>\nAlso, as #30589 has been merged, probably best to switch from python 3.8 to 3.9 here too",
    "created_at": "2021-02-07T23:15:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599594",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Also, as #30589 has been merged, probably best to switch from python 3.8 to 3.9 here too



---

archive/issue_comments_599595.json:
```json
{
    "body": "<a id='comment:8'></a>\nAlso #30912 will bring merge conflicts that are best to resolve now",
    "created_at": "2021-02-07T23:21:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599595",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Also #30912 will bring merge conflicts that are best to resolve now



---

archive/issue_comments_599596.json:
```json
{
    "body": "<a id='comment:9'></a>\nAnother conflict from the current version of #30770.",
    "created_at": "2021-02-08T01:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599596",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Another conflict from the current version of #30770.



---

archive/issue_comments_599597.json:
```json
{
    "body": "<a id='comment:0'></a>\nAlso `create_extension` duplicates some of the code in `sage_build_cython.create_extension`. In particular, it should not use `numpy.get_include()` directly but rather use `sage.env.sage_include_directories` (note #31333 for a related change).",
    "created_at": "2021-02-08T01:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599597",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Also `create_extension` duplicates some of the code in `sage_build_cython.create_extension`. In particular, it should not use `numpy.get_include()` directly but rather use `sage.env.sage_include_directories` (note #31333 for a related change).



---

archive/issue_comments_599598.json:
```json
{
    "body": "<a id='comment:1'></a>\nI have tested this ticket (on top of #31335, which fixes macOS-specific problems, and resolving the mentioned merge conflicts); following the instructions from the added documentation, `pipenv install` leads to `ERROR: Couldn't install package: cypari2`.\n\nThe first error leading to this is:\n\n```\n  [1/7] Cythonizing cypari2/closure.pyx\n\n  Error compiling Cython file:\n  ------------------------------------------------------------\n  ...\n  #                  http://www.gnu.org/licenses/\n  #*****************************************************************************\n\n  from __future__ import absolute_import, division, print_function\n\n  from cysignals.signals cimport sig_on, sig_off, sig_block, sig_unblock, sig_error\n  ^\n  ------------------------------------------------------------\n\n  cypari2/closure.pyx:36:0: 'cysignals/signals.pxd' not found\n\n```",
    "created_at": "2021-02-08T02:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599598",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
I have tested this ticket (on top of #31335, which fixes macOS-specific problems, and resolving the mentioned merge conflicts); following the instructions from the added documentation, `pipenv install` leads to `ERROR: Couldn't install package: cypari2`.

The first error leading to this is:

```
  [1/7] Cythonizing cypari2/closure.pyx

  Error compiling Cython file:
  ------------------------------------------------------------
  ...
  #                  http://www.gnu.org/licenses/
  #*****************************************************************************

  from __future__ import absolute_import, division, print_function

  from cysignals.signals cimport sig_on, sig_off, sig_block, sig_unblock, sig_error
  ^
  ------------------------------------------------------------

  cypari2/closure.pyx:36:0: 'cysignals/signals.pxd' not found

```



---

archive/issue_comments_599599.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe specific issue in `cypari2` is probably https://github.com/sagemath/cypari2/issues/93 (tracked in #30922).\n\nBut overall I think it is unrealistic for these instructions to work. \nLet's use more restrictive instructions, in which `pipenv` is used from within `sage --sh`. Then one can at least assume that all libraries are available.",
    "created_at": "2021-02-08T02:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599599",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
The specific issue in `cypari2` is probably https://github.com/sagemath/cypari2/issues/93 (tracked in #30922).

But overall I think it is unrealistic for these instructions to work. 
Let's use more restrictive instructions, in which `pipenv` is used from within `sage --sh`. Then one can at least assume that all libraries are available.



---

archive/issue_comments_599600.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-02-08T02:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599600",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_599601.json:
```json
{
    "body": "<a id='comment:4'></a>\n(Something like `../sage -sh -c 'PIP_FIND_LINKS=file://$(cd .. && pwd)/local/var/lib/sage/wheels pipenv install -v -v'` similar to what I am testing in #30913.)",
    "created_at": "2021-02-08T02:43:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599601",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
(Something like `../sage -sh -c 'PIP_FIND_LINKS=file://$(cd .. && pwd)/local/var/lib/sage/wheels pipenv install -v -v'` similar to what I am testing in #30913.)



---

archive/issue_comments_599602.json:
```json
{
    "body": "<a id='comment:285'></a>\nThanks for the review!\nWill address most of your points later.\n\nReplying to [mkoeppe](#comment%3A276):\n>  - For linux: Could you elaborate on \"# Set SAGE_LOCAL (required for gap)\"\n\n\nWithout this line one gets the following error:\n\n```\nTraceback (most recent call last):\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py\", line 1468, in __init__\n        self._name = parent._create(value, name=name)\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/interface.py\", line 500, in _create\n        self.set(name, value)\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py\", line 1421, in set\n        self._eval_line(cmd, allow_use_file=True)\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py\", line 790, in _eval_line\n        self._start()\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py\", line 1254, in _start\n        gap_reset_workspace(verbose=False)\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py\", line 1587, in gap_reset_workspace\n        g.eval('SetUserPreference(\"HistoryMaxLines\", 30)')\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py\", line 587, in eval\n        result = Expect.eval(self, input_line, **kwds)\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py\", line 1381, in eval\n        return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py\", line 1381, in <listcomp>\n        return '\\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py\", line 790, in _eval_line\n        self._start()\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py\", line 1259, in _start\n        Expect._start(self, \"Failed to start GAP.\")\n      File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py\", line 520, in _start\n        raise RuntimeError(\"unable to start %s: %s\" % (self.name(), msg))\n    RuntimeError: unable to start gap: End Of File (EOF). Exception style platform.\n    Gap finished running /__w/sagetrac-mirror/sagetrac-mirror/.tox/local-sudo-standard/local/bin/gap -r -b -p -T -E -o 401m -s 401m -m 64m /__w/sagetrac-mirror/sagetrac-mirror/src/sage/ext_data/gap/sage.g\n    command: /__w/sagetrac-mirror/sagetrac-mirror/.tox/local-sudo-standard/local/bin/gap\n    args: ['/__w/sagetrac-mirror/sagetrac-mirror/.tox/local-sudo-standard/local/bin/gap', '-r', '-b', '-p', '-T', '-E', '-o', '401m', '-s', '401m', '-m', '64m', '/__w/sagetrac-mirror/sagetrac-mirror/src/sage/ext_data/gap/sage.g']\n    buffer (last 100 chars): b''\n    before (last 100 chars): b'Set the environment variable SAGE_LOCAL.\\r\\n'\n    after: <class 'pexpect.exceptions.EOF'>\n    match: None\n    match_index: None\n    exitstatus: 1\n    flag_eof: True\n    pid: 3124\n    child_fd: 26\n    closed: False\n    timeout: None\n    delimiter: <class 'pexpect.exceptions.EOF'>\n    logfile: None\n    logfile_read: None\n    logfile_send: None\n    maxread: 4194304\n    ignorecase: False\n    searchwindowsize: None\n    delaybeforesend: None\n    delayafterclose: 0.1\n    delayafterterminate: 0.1\n    searcher: searcher_re:\n        0: re.compile(b'gap> ')\n```\nI guess the current github workflows don't see this as everything is invoked in one tox command and not in multiple steps (and enviroment variables are only active in each step).",
    "created_at": "2021-02-08T12:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599602",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:285'></a>
Thanks for the review!
Will address most of your points later.

Replying to [mkoeppe](#comment%3A276):
>  - For linux: Could you elaborate on "# Set SAGE_LOCAL (required for gap)"


Without this line one gets the following error:

```
Traceback (most recent call last):
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py", line 1468, in __init__
        self._name = parent._create(value, name=name)
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/interface.py", line 500, in _create
        self.set(name, value)
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py", line 1421, in set
        self._eval_line(cmd, allow_use_file=True)
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py", line 790, in _eval_line
        self._start()
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py", line 1254, in _start
        gap_reset_workspace(verbose=False)
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py", line 1587, in gap_reset_workspace
        g.eval('SetUserPreference("HistoryMaxLines", 30)')
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py", line 587, in eval
        result = Expect.eval(self, input_line, **kwds)
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py", line 1381, in eval
        return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py", line 1381, in <listcomp>
        return '\n'.join([self._eval_line(L, allow_use_file=allow_use_file, **kwds)
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py", line 790, in _eval_line
        self._start()
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/gap.py", line 1259, in _start
        Expect._start(self, "Failed to start GAP.")
      File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py", line 520, in _start
        raise RuntimeError("unable to start %s: %s" % (self.name(), msg))
    RuntimeError: unable to start gap: End Of File (EOF). Exception style platform.
    Gap finished running /__w/sagetrac-mirror/sagetrac-mirror/.tox/local-sudo-standard/local/bin/gap -r -b -p -T -E -o 401m -s 401m -m 64m /__w/sagetrac-mirror/sagetrac-mirror/src/sage/ext_data/gap/sage.g
    command: /__w/sagetrac-mirror/sagetrac-mirror/.tox/local-sudo-standard/local/bin/gap
    args: ['/__w/sagetrac-mirror/sagetrac-mirror/.tox/local-sudo-standard/local/bin/gap', '-r', '-b', '-p', '-T', '-E', '-o', '401m', '-s', '401m', '-m', '64m', '/__w/sagetrac-mirror/sagetrac-mirror/src/sage/ext_data/gap/sage.g']
    buffer (last 100 chars): b''
    before (last 100 chars): b'Set the environment variable SAGE_LOCAL.\r\n'
    after: <class 'pexpect.exceptions.EOF'>
    match: None
    match_index: None
    exitstatus: 1
    flag_eof: True
    pid: 3124
    child_fd: 26
    closed: False
    timeout: None
    delimiter: <class 'pexpect.exceptions.EOF'>
    logfile: None
    logfile_read: None
    logfile_send: None
    maxread: 4194304
    ignorecase: False
    searchwindowsize: None
    delaybeforesend: None
    delayafterclose: 0.1
    delayafterterminate: 0.1
    searcher: searcher_re:
        0: re.compile(b'gap> ')
```
I guess the current github workflows don't see this as everything is invoked in one tox command and not in multiple steps (and enviroment variables are only active in each step).



---

archive/issue_comments_599603.json:
```json
{
    "body": "<a id='comment:6'></a>\nConcerning the cypari error, I have no clue what is needed for it to compile on mac. It's also strange that it works on the github action (for mac as well as linux) but not on your system. cysignals is actually declared in the pipenv file, so it should be installed.\nThe simplest solution would be if cypari would publish wheels on pypi.\n\n> But overall I think it is unrealistic for these instructions to work. \n\n\nIt's not unrealistic, it is working very well for Linux.",
    "created_at": "2021-02-08T12:45:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599603",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:6'></a>
Concerning the cypari error, I have no clue what is needed for it to compile on mac. It's also strange that it works on the github action (for mac as well as linux) but not on your system. cysignals is actually declared in the pipenv file, so it should be installed.
The simplest solution would be if cypari would publish wheels on pypi.

> But overall I think it is unrealistic for these instructions to work. 


It's not unrealistic, it is working very well for Linux.



---

archive/issue_comments_599604.json:
```json
{
    "body": "<a id='comment:287'></a>\nReplying to [mkoeppe](#comment%3A276):\n>  - For linux: Why `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` (it is not done in the mac workflow). Should we create a `make` target that corresponds to what is needed?\n\n\nThat's the only way I found to install these packages into `SAGE_SHARE`. Will add it also to the mac workflow. I cannot judge if it would make sense to add a special make target for it, especially since you are working on making these packages normal python packages.",
    "created_at": "2021-02-08T12:59:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599604",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:287'></a>
Replying to [mkoeppe](#comment%3A276):
>  - For linux: Why `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` (it is not done in the mac workflow). Should we create a `make` target that corresponds to what is needed?


That's the only way I found to install these packages into `SAGE_SHARE`. Will add it also to the mac workflow. I cannot judge if it would make sense to add a special make target for it, especially since you are working on making these packages normal python packages.



---

archive/issue_comments_599605.json:
```json
{
    "body": "<a id='comment:288'></a>\nReplying to [gh-tobiasdiez](#comment%3A285):\n> Replying to [mkoeppe](#comment%3A276):\n> >  - For linux: Could you elaborate on \"# Set SAGE_LOCAL (required for gap)\"\n \n> \n> Without this line one gets the following error:\n> \n> \n> ```\n> ...\n>         Expect._start(self, \"Failed to start GAP.\")\n>       File \"/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py\", line 520, in _start\n> ...\n> ```\n> I guess the current github workflows don't see this as everything is invoked in one tox command and not in multiple steps (and enviroment variables are only active in each step).\n\n\nOK, I see. \n\nThere are two ways to fix this:\n\n- as described in #30818 (\"Set environment for subprocesses invoked by Sage\").  Currently subprocesses (such as the gap process invoked by the pexpect-based gap interface) rely on `sage-env` being sourced\n- using `pipenv run sage -t` instead of `pipenv run sage-runtests`, which uses `sage-env`.",
    "created_at": "2021-02-08T17:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599605",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:288'></a>
Replying to [gh-tobiasdiez](#comment%3A285):
> Replying to [mkoeppe](#comment%3A276):
> >  - For linux: Could you elaborate on "# Set SAGE_LOCAL (required for gap)"
 
> 
> Without this line one gets the following error:
> 
> 
> ```
> ...
>         Expect._start(self, "Failed to start GAP.")
>       File "/__w/sagetrac-mirror/sagetrac-mirror/src/sage/interfaces/expect.py", line 520, in _start
> ...
> ```
> I guess the current github workflows don't see this as everything is invoked in one tox command and not in multiple steps (and enviroment variables are only active in each step).


OK, I see. 

There are two ways to fix this:

- as described in #30818 ("Set environment for subprocesses invoked by Sage").  Currently subprocesses (such as the gap process invoked by the pexpect-based gap interface) rely on `sage-env` being sourced
- using `pipenv run sage -t` instead of `pipenv run sage-runtests`, which uses `sage-env`.



---

archive/issue_comments_599606.json:
```json
{
    "body": "<a id='comment:9'></a>\nI've added it to #29644 (which is part of #30818).",
    "created_at": "2021-02-08T18:09:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599606",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>
I've added it to #29644 (which is part of #30818).



---

archive/issue_comments_599607.json:
```json
{
    "body": "<a id='comment:290'></a>\nReplying to [gh-tobiasdiez](#comment%3A287):\n> Replying to [mkoeppe](#comment%3A276):\n> >  - For linux: Why `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` (it is not done in the mac workflow). Should we create a `make` target that corresponds to what is needed?\n \n> \n> That's the only way I found to install these packages into `SAGE_SHARE`. Will add it also to the mac workflow. I cannot judge if it would make sense to add a special make target for it, especially since you are working on making these packages normal python packages.\n\n\nI've opened #31362 for this - which will add `make all-sage-local`.",
    "created_at": "2021-02-08T18:21:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599607",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:290'></a>
Replying to [gh-tobiasdiez](#comment%3A287):
> Replying to [mkoeppe](#comment%3A276):
> >  - For linux: Why `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` (it is not done in the mac workflow). Should we create a `make` target that corresponds to what is needed?
 
> 
> That's the only way I found to install these packages into `SAGE_SHARE`. Will add it also to the mac workflow. I cannot judge if it would make sense to add a special make target for it, especially since you are working on making these packages normal python packages.


I've opened #31362 for this - which will add `make all-sage-local`.



---

archive/issue_comments_599608.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks!\nConcerning the above cysignals problem, you can try to run `pipenv run pip install cysignals` and then `pipenv install` again. Similarly, `pipenv run pip install gmpy2==2.1.0b5` might be necessary if you have problems with the installation of pplpy. Let me know if this helps and I will add it to the documentation.",
    "created_at": "2021-02-08T20:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599608",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>
Thanks!
Concerning the above cysignals problem, you can try to run `pipenv run pip install cysignals` and then `pipenv install` again. Similarly, `pipenv run pip install gmpy2==2.1.0b5` might be necessary if you have problems with the installation of pplpy. Let me know if this helps and I will add it to the documentation.



---

archive/issue_comments_599609.json:
```json
{
    "body": "**Changing commit** from \"[cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a](https://github.com/sagemath/sagetrac-mirror/commit/cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a)\" to \"[398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba](https://github.com/sagemath/sagetrac-mirror/commit/398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba)\".",
    "created_at": "2021-02-08T21:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599609",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a](https://github.com/sagemath/sagetrac-mirror/commit/cf068dfaf42a32f6bbd1ebd55376006e56fb6d8a)" to "[398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba](https://github.com/sagemath/sagetrac-mirror/commit/398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba)".



---

archive/issue_comments_599610.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f1dddc2474af25357347c70edfa15604db9352c\">1f1dddc</a></td><td><code>Revert change to tox.ini</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c3f517e60962af75db83e07c85d364252da00cc\">0c3f517</a></td><td><code>Move sage_build_ext</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d06c84d8cd578192df8bd4c30adce30d80af868b\">d06c84d</a></td><td><code>Run workflow for Python 3.9 as well</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fee372ebe8807ab3f15bbcc1112ce731e0998a5\">7fee372</a></td><td><code>Doc: Also install dev packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a506c1fb2cce9258f1354f31e30c974452168ea1\">a506c1f</a></td><td><code>Use sage_build command for generating sources</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba\">398e6dd</a></td><td><code>Narrow down imports to reduce install requires deps</code></td></tr></table>\n",
    "created_at": "2021-02-08T21:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f1dddc2474af25357347c70edfa15604db9352c">1f1dddc</a></td><td><code>Revert change to tox.ini</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c3f517e60962af75db83e07c85d364252da00cc">0c3f517</a></td><td><code>Move sage_build_ext</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d06c84d8cd578192df8bd4c30adce30d80af868b">d06c84d</a></td><td><code>Run workflow for Python 3.9 as well</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fee372ebe8807ab3f15bbcc1112ce731e0998a5">7fee372</a></td><td><code>Doc: Also install dev packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a506c1fb2cce9258f1354f31e30c974452168ea1">a506c1f</a></td><td><code>Use sage_build command for generating sources</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba">398e6dd</a></td><td><code>Narrow down imports to reduce install requires deps</code></td></tr></table>




---

archive/issue_comments_599611.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5\">12c0a2e</a></td><td><code>Mac: remove pari install</code></td></tr></table>\n",
    "created_at": "2021-02-08T21:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5">12c0a2e</a></td><td><code>Mac: remove pari install</code></td></tr></table>




---

archive/issue_comments_599612.json:
```json
{
    "body": "**Changing commit** from \"[398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba](https://github.com/sagemath/sagetrac-mirror/commit/398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba)\" to \"[12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5](https://github.com/sagemath/sagetrac-mirror/commit/12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5)\".",
    "created_at": "2021-02-08T21:12:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599612",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba](https://github.com/sagemath/sagetrac-mirror/commit/398e6dd59ac7b8e3c49dc7917295e4fe4a9bcaba)" to "[12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5](https://github.com/sagemath/sagetrac-mirror/commit/12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5)".



---

archive/issue_comments_599613.json:
```json
{
    "body": "**Changing commit** from \"[12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5](https://github.com/sagemath/sagetrac-mirror/commit/12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5)\" to \"[0157a4eac42646f49b9448afd120d07c4848750b](https://github.com/sagemath/sagetrac-mirror/commit/0157a4eac42646f49b9448afd120d07c4848750b)\".",
    "created_at": "2021-02-08T21:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599613",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5](https://github.com/sagemath/sagetrac-mirror/commit/12c0a2ed96e5608f8f6c54aef0d81e8d76cdcff5)" to "[0157a4eac42646f49b9448afd120d07c4848750b](https://github.com/sagemath/sagetrac-mirror/commit/0157a4eac42646f49b9448afd120d07c4848750b)".



---

archive/issue_comments_599614.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1041128342253f609a9c3b8f8efe4495bc314a2e\">1041128</a></td><td><code>Rename ecl config variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd05a972b62b0014995887f1372e7934866fdf24\">fd05a97</a></td><td><code>Add fallback</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ac4cc8aeea651adeaf05632d798025e6ec530df\">2ac4cc8</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/ecl-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6370c345114d50095e84a9b2e7917dd8cae3bfe6\">6370c34</a></td><td><code>src/sage/env.py: Do not use capture_output, which requires python 3.7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31f1bbba244263160e887613b34111bc3a20d4f4\">31f1bbb</a></td><td><code>Also use universal_newlines instead of text, for python 3.6 compatibility</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11ad40ae805a29feb59f0db4816cc21cd5be9f4f\">11ad40a</a></td><td><code>Merge branch 'public/build/ecl-config' of git://trac.sagemath.org/sage into public/build/ecl-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a8e2e4e9209ee7dd1960e10e8ed3f717001765d\">1a8e2e4</a></td><td><code>Merge branch 'public/build/ecl-config' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0157a4eac42646f49b9448afd120d07c4848750b\">0157a4e</a></td><td><code>Reuse sage_include_directories</code></td></tr></table>\n",
    "created_at": "2021-02-08T21:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599614",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1041128342253f609a9c3b8f8efe4495bc314a2e">1041128</a></td><td><code>Rename ecl config variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd05a972b62b0014995887f1372e7934866fdf24">fd05a97</a></td><td><code>Add fallback</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ac4cc8aeea651adeaf05632d798025e6ec530df">2ac4cc8</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/ecl-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6370c345114d50095e84a9b2e7917dd8cae3bfe6">6370c34</a></td><td><code>src/sage/env.py: Do not use capture_output, which requires python 3.7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31f1bbba244263160e887613b34111bc3a20d4f4">31f1bbb</a></td><td><code>Also use universal_newlines instead of text, for python 3.6 compatibility</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11ad40ae805a29feb59f0db4816cc21cd5be9f4f">11ad40a</a></td><td><code>Merge branch 'public/build/ecl-config' of git://trac.sagemath.org/sage into public/build/ecl-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a8e2e4e9209ee7dd1960e10e8ed3f717001765d">1a8e2e4</a></td><td><code>Merge branch 'public/build/ecl-config' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0157a4eac42646f49b9448afd120d07c4848750b">0157a4e</a></td><td><code>Reuse sage_include_directories</code></td></tr></table>




---

archive/issue_comments_599615.json:
```json
{
    "body": "**Changing commit** from \"[0157a4eac42646f49b9448afd120d07c4848750b](https://github.com/sagemath/sagetrac-mirror/commit/0157a4eac42646f49b9448afd120d07c4848750b)\" to \"[a3806c58709c3b5c828668f823b37619bf1d1551](https://github.com/sagemath/sagetrac-mirror/commit/a3806c58709c3b5c828668f823b37619bf1d1551)\".",
    "created_at": "2021-02-08T21:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0157a4eac42646f49b9448afd120d07c4848750b](https://github.com/sagemath/sagetrac-mirror/commit/0157a4eac42646f49b9448afd120d07c4848750b)" to "[a3806c58709c3b5c828668f823b37619bf1d1551](https://github.com/sagemath/sagetrac-mirror/commit/a3806c58709c3b5c828668f823b37619bf1d1551)".



---

archive/issue_comments_599616.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18d8557166ba8b253411dad3522a5541621dac70\">18d8557</a></td><td><code>Pretty print job names</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3806c58709c3b5c828668f823b37619bf1d1551\">a3806c5</a></td><td><code>Update Macos workflow</code></td></tr></table>\n",
    "created_at": "2021-02-08T21:28:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599616",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18d8557166ba8b253411dad3522a5541621dac70">18d8557</a></td><td><code>Pretty print job names</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3806c58709c3b5c828668f823b37619bf1d1551">a3806c5</a></td><td><code>Update Macos workflow</code></td></tr></table>




---

archive/issue_comments_599617.json:
```json
{
    "body": "**Changing commit** from \"[a3806c58709c3b5c828668f823b37619bf1d1551](https://github.com/sagemath/sagetrac-mirror/commit/a3806c58709c3b5c828668f823b37619bf1d1551)\" to \"[f5551673591c836942a4b7d50f971ad7c910763e](https://github.com/sagemath/sagetrac-mirror/commit/f5551673591c836942a4b7d50f971ad7c910763e)\".",
    "created_at": "2021-02-08T21:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599617",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a3806c58709c3b5c828668f823b37619bf1d1551](https://github.com/sagemath/sagetrac-mirror/commit/a3806c58709c3b5c828668f823b37619bf1d1551)" to "[f5551673591c836942a4b7d50f971ad7c910763e](https://github.com/sagemath/sagetrac-mirror/commit/f5551673591c836942a4b7d50f971ad7c910763e)".



---

archive/issue_comments_599618.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5551673591c836942a4b7d50f971ad7c910763e\">f555167</a></td><td><code>Fix workflow syntax</code></td></tr></table>\n",
    "created_at": "2021-02-08T21:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5551673591c836942a4b7d50f971ad7c910763e">f555167</a></td><td><code>Fix workflow syntax</code></td></tr></table>




---

archive/issue_comments_599619.json:
```json
{
    "body": "**Changing commit** from \"[f5551673591c836942a4b7d50f971ad7c910763e](https://github.com/sagemath/sagetrac-mirror/commit/f5551673591c836942a4b7d50f971ad7c910763e)\" to \"[bb90f76abc82987e7ff1cbfd2653dfa908fefc7b](https://github.com/sagemath/sagetrac-mirror/commit/bb90f76abc82987e7ff1cbfd2653dfa908fefc7b)\".",
    "created_at": "2021-02-08T21:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f5551673591c836942a4b7d50f971ad7c910763e](https://github.com/sagemath/sagetrac-mirror/commit/f5551673591c836942a4b7d50f971ad7c910763e)" to "[bb90f76abc82987e7ff1cbfd2653dfa908fefc7b](https://github.com/sagemath/sagetrac-mirror/commit/bb90f76abc82987e7ff1cbfd2653dfa908fefc7b)".



---

archive/issue_comments_599620.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb90f76abc82987e7ff1cbfd2653dfa908fefc7b\">bb90f76</a></td><td><code>Well...maybe now</code></td></tr></table>\n",
    "created_at": "2021-02-08T21:52:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599620",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb90f76abc82987e7ff1cbfd2653dfa908fefc7b">bb90f76</a></td><td><code>Well...maybe now</code></td></tr></table>




---

archive/issue_comments_599621.json:
```json
{
    "body": "**Changing commit** from \"[bb90f76abc82987e7ff1cbfd2653dfa908fefc7b](https://github.com/sagemath/sagetrac-mirror/commit/bb90f76abc82987e7ff1cbfd2653dfa908fefc7b)\" to \"[d1c2a0a00f8c675ad218b502516dca12d161933d](https://github.com/sagemath/sagetrac-mirror/commit/d1c2a0a00f8c675ad218b502516dca12d161933d)\".",
    "created_at": "2021-02-08T22:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599621",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bb90f76abc82987e7ff1cbfd2653dfa908fefc7b](https://github.com/sagemath/sagetrac-mirror/commit/bb90f76abc82987e7ff1cbfd2653dfa908fefc7b)" to "[d1c2a0a00f8c675ad218b502516dca12d161933d](https://github.com/sagemath/sagetrac-mirror/commit/d1c2a0a00f8c675ad218b502516dca12d161933d)".



---

archive/issue_comments_599622.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1c2a0a00f8c675ad218b502516dca12d161933d\">d1c2a0a</a></td><td><code>Try with latest version of pip</code></td></tr></table>\n",
    "created_at": "2021-02-08T22:02:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1c2a0a00f8c675ad218b502516dca12d161933d">d1c2a0a</a></td><td><code>Try with latest version of pip</code></td></tr></table>




---

archive/issue_comments_599623.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99\">f859961</a></td><td><code>Run everything versus the correct python</code></td></tr></table>\n",
    "created_at": "2021-02-08T22:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599623",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99">f859961</a></td><td><code>Run everything versus the correct python</code></td></tr></table>




---

archive/issue_comments_599624.json:
```json
{
    "body": "**Changing commit** from \"[d1c2a0a00f8c675ad218b502516dca12d161933d](https://github.com/sagemath/sagetrac-mirror/commit/d1c2a0a00f8c675ad218b502516dca12d161933d)\" to \"[f8599611360fcf04a54d28830c266183cd99ff99](https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99)\".",
    "created_at": "2021-02-08T22:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599624",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d1c2a0a00f8c675ad218b502516dca12d161933d](https://github.com/sagemath/sagetrac-mirror/commit/d1c2a0a00f8c675ad218b502516dca12d161933d)" to "[f8599611360fcf04a54d28830c266183cd99ff99](https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99)".



---

archive/issue_comments_599625.json:
```json
{
    "body": "**Changing commit** from \"[f8599611360fcf04a54d28830c266183cd99ff99](https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99)\" to \"[606966b86e35ae679edc08dd1c5fa156cff667e8](https://github.com/sagemath/sagetrac-mirror/commit/606966b86e35ae679edc08dd1c5fa156cff667e8)\".",
    "created_at": "2021-02-08T22:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599625",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f8599611360fcf04a54d28830c266183cd99ff99](https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99)" to "[606966b86e35ae679edc08dd1c5fa156cff667e8](https://github.com/sagemath/sagetrac-mirror/commit/606966b86e35ae679edc08dd1c5fa156cff667e8)".



---

archive/issue_comments_599626.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/606966b86e35ae679edc08dd1c5fa156cff667e8\">606966b</a></td><td><code>Try to trigger macos workflow</code></td></tr></table>\n",
    "created_at": "2021-02-08T22:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/606966b86e35ae679edc08dd1c5fa156cff667e8">606966b</a></td><td><code>Try to trigger macos workflow</code></td></tr></table>




---

archive/issue_comments_599627.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/541f7143df6f00116a3048fd34242e90a50ac40e\">541f714</a></td><td><code>Remove empty line?</code></td></tr></table>\n",
    "created_at": "2021-02-08T22:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599627",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/541f7143df6f00116a3048fd34242e90a50ac40e">541f714</a></td><td><code>Remove empty line?</code></td></tr></table>




---

archive/issue_comments_599628.json:
```json
{
    "body": "**Changing commit** from \"[606966b86e35ae679edc08dd1c5fa156cff667e8](https://github.com/sagemath/sagetrac-mirror/commit/606966b86e35ae679edc08dd1c5fa156cff667e8)\" to \"[541f7143df6f00116a3048fd34242e90a50ac40e](https://github.com/sagemath/sagetrac-mirror/commit/541f7143df6f00116a3048fd34242e90a50ac40e)\".",
    "created_at": "2021-02-08T22:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599628",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[606966b86e35ae679edc08dd1c5fa156cff667e8](https://github.com/sagemath/sagetrac-mirror/commit/606966b86e35ae679edc08dd1c5fa156cff667e8)" to "[541f7143df6f00116a3048fd34242e90a50ac40e](https://github.com/sagemath/sagetrac-mirror/commit/541f7143df6f00116a3048fd34242e90a50ac40e)".



---

archive/issue_comments_599629.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42d25a14c00a68e58bcb904783483a5514eecb5f\">42d25a1</a></td><td><code>Still not?</code></td></tr></table>\n",
    "created_at": "2021-02-08T22:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599629",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42d25a14c00a68e58bcb904783483a5514eecb5f">42d25a1</a></td><td><code>Still not?</code></td></tr></table>




---

archive/issue_comments_599630.json:
```json
{
    "body": "**Changing commit** from \"[541f7143df6f00116a3048fd34242e90a50ac40e](https://github.com/sagemath/sagetrac-mirror/commit/541f7143df6f00116a3048fd34242e90a50ac40e)\" to \"[42d25a14c00a68e58bcb904783483a5514eecb5f](https://github.com/sagemath/sagetrac-mirror/commit/42d25a14c00a68e58bcb904783483a5514eecb5f)\".",
    "created_at": "2021-02-08T22:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599630",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[541f7143df6f00116a3048fd34242e90a50ac40e](https://github.com/sagemath/sagetrac-mirror/commit/541f7143df6f00116a3048fd34242e90a50ac40e)" to "[42d25a14c00a68e58bcb904783483a5514eecb5f](https://github.com/sagemath/sagetrac-mirror/commit/42d25a14c00a68e58bcb904783483a5514eecb5f)".



---

archive/issue_comments_599631.json:
```json
{
    "body": "**Changing commit** from \"[42d25a14c00a68e58bcb904783483a5514eecb5f](https://github.com/sagemath/sagetrac-mirror/commit/42d25a14c00a68e58bcb904783483a5514eecb5f)\" to \"[f8599611360fcf04a54d28830c266183cd99ff99](https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99)\".",
    "created_at": "2021-02-08T22:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599631",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[42d25a14c00a68e58bcb904783483a5514eecb5f](https://github.com/sagemath/sagetrac-mirror/commit/42d25a14c00a68e58bcb904783483a5514eecb5f)" to "[f8599611360fcf04a54d28830c266183cd99ff99](https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99)".



---

archive/issue_comments_599632.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** New commits:",
    "created_at": "2021-02-08T22:42:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599632",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** New commits:



---

archive/issue_comments_599633.json:
```json
{
    "body": "**Changing commit** from \"[f8599611360fcf04a54d28830c266183cd99ff99](https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99)\" to \"[f312a35f92ef30fa4a38ab54560686e2ef1bd5d6](https://github.com/sagemath/sagetrac-mirror/commit/f312a35f92ef30fa4a38ab54560686e2ef1bd5d6)\".",
    "created_at": "2021-02-08T22:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599633",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f8599611360fcf04a54d28830c266183cd99ff99](https://github.com/sagemath/sagetrac-mirror/commit/f8599611360fcf04a54d28830c266183cd99ff99)" to "[f312a35f92ef30fa4a38ab54560686e2ef1bd5d6](https://github.com/sagemath/sagetrac-mirror/commit/f312a35f92ef30fa4a38ab54560686e2ef1bd5d6)".



---

archive/issue_comments_599634.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f312a35f92ef30fa4a38ab54560686e2ef1bd5d6\">f312a35</a></td><td><code>Try to remove python3-pip again</code></td></tr></table>\n",
    "created_at": "2021-02-08T22:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599634",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f312a35f92ef30fa4a38ab54560686e2ef1bd5d6">f312a35</a></td><td><code>Try to remove python3-pip again</code></td></tr></table>




---

archive/issue_comments_599635.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b01c4c98a6c590ec7526d2f87dba7a839ebee9df\">b01c4c9</a></td><td><code>Install tox via pip</code></td></tr></table>\n",
    "created_at": "2021-02-08T23:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599635",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b01c4c98a6c590ec7526d2f87dba7a839ebee9df">b01c4c9</a></td><td><code>Install tox via pip</code></td></tr></table>




---

archive/issue_comments_599636.json:
```json
{
    "body": "**Changing commit** from \"[f312a35f92ef30fa4a38ab54560686e2ef1bd5d6](https://github.com/sagemath/sagetrac-mirror/commit/f312a35f92ef30fa4a38ab54560686e2ef1bd5d6)\" to \"[b01c4c98a6c590ec7526d2f87dba7a839ebee9df](https://github.com/sagemath/sagetrac-mirror/commit/b01c4c98a6c590ec7526d2f87dba7a839ebee9df)\".",
    "created_at": "2021-02-08T23:07:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599636",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f312a35f92ef30fa4a38ab54560686e2ef1bd5d6](https://github.com/sagemath/sagetrac-mirror/commit/f312a35f92ef30fa4a38ab54560686e2ef1bd5d6)" to "[b01c4c98a6c590ec7526d2f87dba7a839ebee9df](https://github.com/sagemath/sagetrac-mirror/commit/b01c4c98a6c590ec7526d2f87dba7a839ebee9df)".



---

archive/issue_comments_599637.json:
```json
{
    "body": "**Changing commit** from \"[b01c4c98a6c590ec7526d2f87dba7a839ebee9df](https://github.com/sagemath/sagetrac-mirror/commit/b01c4c98a6c590ec7526d2f87dba7a839ebee9df)\" to \"[a1d989c3efd08d5f64612865f428102b328744da](https://github.com/sagemath/sagetrac-mirror/commit/a1d989c3efd08d5f64612865f428102b328744da)\".",
    "created_at": "2021-02-08T23:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599637",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b01c4c98a6c590ec7526d2f87dba7a839ebee9df](https://github.com/sagemath/sagetrac-mirror/commit/b01c4c98a6c590ec7526d2f87dba7a839ebee9df)" to "[a1d989c3efd08d5f64612865f428102b328744da](https://github.com/sagemath/sagetrac-mirror/commit/a1d989c3efd08d5f64612865f428102b328744da)".



---

archive/issue_comments_599638.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1d989c3efd08d5f64612865f428102b328744da\">a1d989c</a></td><td><code>Install pip as wel of course</code></td></tr></table>\n",
    "created_at": "2021-02-08T23:22:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599638",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1d989c3efd08d5f64612865f428102b328744da">a1d989c</a></td><td><code>Install pip as wel of course</code></td></tr></table>




---

archive/issue_comments_599639.json:
```json
{
    "body": "**Changing commit** from \"[a1d989c3efd08d5f64612865f428102b328744da](https://github.com/sagemath/sagetrac-mirror/commit/a1d989c3efd08d5f64612865f428102b328744da)\" to \"[442596137f517ff3cb3e365e1b8f79b41744aec2](https://github.com/sagemath/sagetrac-mirror/commit/442596137f517ff3cb3e365e1b8f79b41744aec2)\".",
    "created_at": "2021-02-08T23:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599639",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a1d989c3efd08d5f64612865f428102b328744da](https://github.com/sagemath/sagetrac-mirror/commit/a1d989c3efd08d5f64612865f428102b328744da)" to "[442596137f517ff3cb3e365e1b8f79b41744aec2](https://github.com/sagemath/sagetrac-mirror/commit/442596137f517ff3cb3e365e1b8f79b41744aec2)".



---

archive/issue_comments_599640.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/442596137f517ff3cb3e365e1b8f79b41744aec2\">4425961</a></td><td><code>Strange...</code></td></tr></table>\n",
    "created_at": "2021-02-08T23:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/442596137f517ff3cb3e365e1b8f79b41744aec2">4425961</a></td><td><code>Strange...</code></td></tr></table>




---

archive/issue_comments_599641.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2e436c459bad755685c6ca42a3d401b1fd29ed9\">f2e436c</a></td><td><code>Fix path of tox venv under mac</code></td></tr></table>\n",
    "created_at": "2021-02-08T23:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599641",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2e436c459bad755685c6ca42a3d401b1fd29ed9">f2e436c</a></td><td><code>Fix path of tox venv under mac</code></td></tr></table>




---

archive/issue_comments_599642.json:
```json
{
    "body": "**Changing commit** from \"[442596137f517ff3cb3e365e1b8f79b41744aec2](https://github.com/sagemath/sagetrac-mirror/commit/442596137f517ff3cb3e365e1b8f79b41744aec2)\" to \"[f2e436c459bad755685c6ca42a3d401b1fd29ed9](https://github.com/sagemath/sagetrac-mirror/commit/f2e436c459bad755685c6ca42a3d401b1fd29ed9)\".",
    "created_at": "2021-02-08T23:38:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599642",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[442596137f517ff3cb3e365e1b8f79b41744aec2](https://github.com/sagemath/sagetrac-mirror/commit/442596137f517ff3cb3e365e1b8f79b41744aec2)" to "[f2e436c459bad755685c6ca42a3d401b1fd29ed9](https://github.com/sagemath/sagetrac-mirror/commit/f2e436c459bad755685c6ca42a3d401b1fd29ed9)".



---

archive/issue_comments_599643.json:
```json
{
    "body": "<a id='comment:309'></a>\nReplying to [mkoeppe](#comment%3A290):\n> Replying to [gh-tobiasdiez](#comment%3A287):\n> > Replying to [mkoeppe](#comment%3A276):\n> > >  - For linux: Why `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` (it is not done in the mac workflow). Should we create a `make` target that corresponds to what is needed?\n \n> > \n> > That's the only way I found to install these packages into `SAGE_SHARE`. Will add it also to the mac workflow. I cannot judge if it would make sense to add a special make target for it, especially since you are working on making these packages normal python packages.\n\n> \n> I've opened #31362 for this - which will add `make all-sage-local`.\n\n\nOK, the top-level target is now `make build-local`.",
    "created_at": "2021-02-09T01:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599643",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:309'></a>
Replying to [mkoeppe](#comment%3A290):
> Replying to [gh-tobiasdiez](#comment%3A287):
> > Replying to [mkoeppe](#comment%3A276):
> > >  - For linux: Why `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` (it is not done in the mac workflow). Should we create a `make` target that corresponds to what is needed?
 
> > 
> > That's the only way I found to install these packages into `SAGE_SHARE`. Will add it also to the mac workflow. I cannot judge if it would make sense to add a special make target for it, especially since you are working on making these packages normal python packages.

> 
> I've opened #31362 for this - which will add `make all-sage-local`.


OK, the top-level target is now `make build-local`.



---

archive/issue_comments_599644.json:
```json
{
    "body": "<a id='comment:310'></a>\nReplying to [gh-tobiasdiez](#comment%3A289):\n> I've added it to #29644 (which is part of #30818).\nThanks. Do you plan to work on it? Otherwise a quick fix is to use `pipenv run sage -t` instead of `pipenv run sage-runtests` as I wrote above.",
    "created_at": "2021-02-09T01:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599644",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:310'></a>
Replying to [gh-tobiasdiez](#comment%3A289):
> I've added it to #29644 (which is part of #30818).
Thanks. Do you plan to work on it? Otherwise a quick fix is to use `pipenv run sage -t` instead of `pipenv run sage-runtests` as I wrote above.



---

archive/issue_comments_599645.json:
```json
{
    "body": "<a id='comment:311'></a>\nReplying to [gh-tobiasdiez](#comment%3A286):\n> Concerning the cypari error, I have no clue what is needed for it to compile on mac. \n\n\nWell it certainly needs the PARI library! When running `pipenv` outside of the environment set using `sage --sh`, it depends on everything already installed in the system. \n\nThat's why I am saying the instructions to the users should run `pipenv` within that shell.",
    "created_at": "2021-02-09T06:57:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599645",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:311'></a>
Replying to [gh-tobiasdiez](#comment%3A286):
> Concerning the cypari error, I have no clue what is needed for it to compile on mac. 


Well it certainly needs the PARI library! When running `pipenv` outside of the environment set using `sage --sh`, it depends on everything already installed in the system. 

That's why I am saying the instructions to the users should run `pipenv` within that shell.



---

archive/issue_comments_599646.json:
```json
{
    "body": "**Changing commit** from \"[f2e436c459bad755685c6ca42a3d401b1fd29ed9](https://github.com/sagemath/sagetrac-mirror/commit/f2e436c459bad755685c6ca42a3d401b1fd29ed9)\" to \"[a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff](https://github.com/sagemath/sagetrac-mirror/commit/a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff)\".",
    "created_at": "2021-02-09T10:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f2e436c459bad755685c6ca42a3d401b1fd29ed9](https://github.com/sagemath/sagetrac-mirror/commit/f2e436c459bad755685c6ca42a3d401b1fd29ed9)" to "[a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff](https://github.com/sagemath/sagetrac-mirror/commit/a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff)".



---

archive/issue_comments_599647.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b86b74047f740158dc6dac37944ccb8ea9f6bec8\">b86b740</a></td><td><code>Don't install dev packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff\">a6e5780</a></td><td><code>Install fplll on mac</code></td></tr></table>\n",
    "created_at": "2021-02-09T10:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b86b74047f740158dc6dac37944ccb8ea9f6bec8">b86b740</a></td><td><code>Don't install dev packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff">a6e5780</a></td><td><code>Install fplll on mac</code></td></tr></table>




---

archive/issue_comments_599648.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85de00c2d4103d0edbcd2a41a2efcee52ea5c26e\">85de00c</a></td><td><code>Also install libffi8ubuntu1</code></td></tr></table>\n",
    "created_at": "2021-02-09T10:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599648",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85de00c2d4103d0edbcd2a41a2efcee52ea5c26e">85de00c</a></td><td><code>Also install libffi8ubuntu1</code></td></tr></table>




---

archive/issue_comments_599649.json:
```json
{
    "body": "**Changing commit** from \"[a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff](https://github.com/sagemath/sagetrac-mirror/commit/a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff)\" to \"[85de00c2d4103d0edbcd2a41a2efcee52ea5c26e](https://github.com/sagemath/sagetrac-mirror/commit/85de00c2d4103d0edbcd2a41a2efcee52ea5c26e)\".",
    "created_at": "2021-02-09T10:16:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599649",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff](https://github.com/sagemath/sagetrac-mirror/commit/a6e57808dcabbb60d9c7fdefb88ed7ca4be7caff)" to "[85de00c2d4103d0edbcd2a41a2efcee52ea5c26e](https://github.com/sagemath/sagetrac-mirror/commit/85de00c2d4103d0edbcd2a41a2efcee52ea5c26e)".



---

archive/issue_comments_599650.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1760cf741ff4d392e7662075637350fe8e7894bb\">1760cf7</a></td><td><code>Or try to install libffi7</code></td></tr></table>\n",
    "created_at": "2021-02-09T10:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599650",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1760cf741ff4d392e7662075637350fe8e7894bb">1760cf7</a></td><td><code>Or try to install libffi7</code></td></tr></table>




---

archive/issue_comments_599651.json:
```json
{
    "body": "**Changing commit** from \"[85de00c2d4103d0edbcd2a41a2efcee52ea5c26e](https://github.com/sagemath/sagetrac-mirror/commit/85de00c2d4103d0edbcd2a41a2efcee52ea5c26e)\" to \"[1760cf741ff4d392e7662075637350fe8e7894bb](https://github.com/sagemath/sagetrac-mirror/commit/1760cf741ff4d392e7662075637350fe8e7894bb)\".",
    "created_at": "2021-02-09T10:19:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599651",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[85de00c2d4103d0edbcd2a41a2efcee52ea5c26e](https://github.com/sagemath/sagetrac-mirror/commit/85de00c2d4103d0edbcd2a41a2efcee52ea5c26e)" to "[1760cf741ff4d392e7662075637350fe8e7894bb](https://github.com/sagemath/sagetrac-mirror/commit/1760cf741ff4d392e7662075637350fe8e7894bb)".



---

archive/issue_comments_599652.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efea01f09fb253083afc5c04ffa5824bdd4d731c\">efea01f</a></td><td><code>Install wget as well</code></td></tr></table>\n",
    "created_at": "2021-02-09T10:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599652",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efea01f09fb253083afc5c04ffa5824bdd4d731c">efea01f</a></td><td><code>Install wget as well</code></td></tr></table>




---

archive/issue_comments_599653.json:
```json
{
    "body": "**Changing commit** from \"[1760cf741ff4d392e7662075637350fe8e7894bb](https://github.com/sagemath/sagetrac-mirror/commit/1760cf741ff4d392e7662075637350fe8e7894bb)\" to \"[efea01f09fb253083afc5c04ffa5824bdd4d731c](https://github.com/sagemath/sagetrac-mirror/commit/efea01f09fb253083afc5c04ffa5824bdd4d731c)\".",
    "created_at": "2021-02-09T10:21:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599653",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1760cf741ff4d392e7662075637350fe8e7894bb](https://github.com/sagemath/sagetrac-mirror/commit/1760cf741ff4d392e7662075637350fe8e7894bb)" to "[efea01f09fb253083afc5c04ffa5824bdd4d731c](https://github.com/sagemath/sagetrac-mirror/commit/efea01f09fb253083afc5c04ffa5824bdd4d731c)".



---

archive/issue_comments_599654.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec5629cef5f805a124316ca7b285b70fef1ca0d4\">ec5629c</a></td><td><code>Clarify that we need all system packgaes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a2cc305cf50e561d400a42d3e568cee7ea082a1\">5a2cc30</a></td><td><code>Try with libffi6</code></td></tr></table>\n",
    "created_at": "2021-02-09T11:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599654",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec5629cef5f805a124316ca7b285b70fef1ca0d4">ec5629c</a></td><td><code>Clarify that we need all system packgaes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a2cc305cf50e561d400a42d3e568cee7ea082a1">5a2cc30</a></td><td><code>Try with libffi6</code></td></tr></table>




---

archive/issue_comments_599655.json:
```json
{
    "body": "**Changing commit** from \"[efea01f09fb253083afc5c04ffa5824bdd4d731c](https://github.com/sagemath/sagetrac-mirror/commit/efea01f09fb253083afc5c04ffa5824bdd4d731c)\" to \"[5a2cc305cf50e561d400a42d3e568cee7ea082a1](https://github.com/sagemath/sagetrac-mirror/commit/5a2cc305cf50e561d400a42d3e568cee7ea082a1)\".",
    "created_at": "2021-02-09T11:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599655",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[efea01f09fb253083afc5c04ffa5824bdd4d731c](https://github.com/sagemath/sagetrac-mirror/commit/efea01f09fb253083afc5c04ffa5824bdd4d731c)" to "[5a2cc305cf50e561d400a42d3e568cee7ea082a1](https://github.com/sagemath/sagetrac-mirror/commit/5a2cc305cf50e561d400a42d3e568cee7ea082a1)".



---

archive/issue_comments_599656.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ae43976cfacb331ae82426f25528213987225dd\">2ae4397</a></td><td><code>Mac: install pari as well</code></td></tr></table>\n",
    "created_at": "2021-02-09T11:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599656",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ae43976cfacb331ae82426f25528213987225dd">2ae4397</a></td><td><code>Mac: install pari as well</code></td></tr></table>




---

archive/issue_comments_599657.json:
```json
{
    "body": "**Changing commit** from \"[5a2cc305cf50e561d400a42d3e568cee7ea082a1](https://github.com/sagemath/sagetrac-mirror/commit/5a2cc305cf50e561d400a42d3e568cee7ea082a1)\" to \"[2ae43976cfacb331ae82426f25528213987225dd](https://github.com/sagemath/sagetrac-mirror/commit/2ae43976cfacb331ae82426f25528213987225dd)\".",
    "created_at": "2021-02-09T11:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599657",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5a2cc305cf50e561d400a42d3e568cee7ea082a1](https://github.com/sagemath/sagetrac-mirror/commit/5a2cc305cf50e561d400a42d3e568cee7ea082a1)" to "[2ae43976cfacb331ae82426f25528213987225dd](https://github.com/sagemath/sagetrac-mirror/commit/2ae43976cfacb331ae82426f25528213987225dd)".



---

archive/issue_comments_599658.json:
```json
{
    "body": "<a id='comment:8'></a>\nIs it actually desired that tox local-homebrew installs a fresh homebrew in the tox folder (if I'm not misreading the logs). Is there a way to use the system's homebrew?",
    "created_at": "2021-02-09T11:58:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599658",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>
Is it actually desired that tox local-homebrew installs a fresh homebrew in the tox folder (if I'm not misreading the logs). Is there a way to use the system's homebrew?



---

archive/issue_comments_599659.json:
```json
{
    "body": "**Changing commit** from \"[2ae43976cfacb331ae82426f25528213987225dd](https://github.com/sagemath/sagetrac-mirror/commit/2ae43976cfacb331ae82426f25528213987225dd)\" to \"[88dabfa498cc3e12116d6f5f26e945ce4abd1429](https://github.com/sagemath/sagetrac-mirror/commit/88dabfa498cc3e12116d6f5f26e945ce4abd1429)\".",
    "created_at": "2021-02-09T13:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599659",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2ae43976cfacb331ae82426f25528213987225dd](https://github.com/sagemath/sagetrac-mirror/commit/2ae43976cfacb331ae82426f25528213987225dd)" to "[88dabfa498cc3e12116d6f5f26e945ce4abd1429](https://github.com/sagemath/sagetrac-mirror/commit/88dabfa498cc3e12116d6f5f26e945ce4abd1429)".



---

archive/issue_comments_599660.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9b1ef144d9e78c475a2cb77e6b551814c6af059\">b9b1ef1</a></td><td><code>Use homebrew-build-env</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/88dabfa498cc3e12116d6f5f26e945ce4abd1429\">88dabfa</a></td><td><code>Cleanup setup.py</code></td></tr></table>\n",
    "created_at": "2021-02-09T13:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599660",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9b1ef144d9e78c475a2cb77e6b551814c6af059">b9b1ef1</a></td><td><code>Use homebrew-build-env</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/88dabfa498cc3e12116d6f5f26e945ce4abd1429">88dabfa</a></td><td><code>Cleanup setup.py</code></td></tr></table>




---

archive/issue_comments_599661.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b1fd3e9ecf7e4bff097cd3b71a7c3911ff4076d4\">b1fd3e9</a></td><td><code>Run macos without local prefix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d660e0754d73fca6b6d4dcf629b4073dbd6e75f\">7d660e0</a></td><td><code>Tox: Fix homebrew env variable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3457e5f4aed5cf0dc62519e0ee6db9537bccd0c\">c3457e5</a></td><td><code>Use local-homebrew-macos-usrlocal</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3d72cb6e8f0effb7ac3b06924bcf4203385af32\">d3d72cb</a></td><td><code>Revert changes to tox.ini</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d5e37b6ab241cb2f98462de9b536937724ed977\">8d5e37b</a></td><td><code>Fix compile errors</code></td></tr></table>\n",
    "created_at": "2021-02-09T14:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599661",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b1fd3e9ecf7e4bff097cd3b71a7c3911ff4076d4">b1fd3e9</a></td><td><code>Run macos without local prefix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d660e0754d73fca6b6d4dcf629b4073dbd6e75f">7d660e0</a></td><td><code>Tox: Fix homebrew env variable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3457e5f4aed5cf0dc62519e0ee6db9537bccd0c">c3457e5</a></td><td><code>Use local-homebrew-macos-usrlocal</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3d72cb6e8f0effb7ac3b06924bcf4203385af32">d3d72cb</a></td><td><code>Revert changes to tox.ini</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d5e37b6ab241cb2f98462de9b536937724ed977">8d5e37b</a></td><td><code>Fix compile errors</code></td></tr></table>




---

archive/issue_comments_599662.json:
```json
{
    "body": "**Changing commit** from \"[88dabfa498cc3e12116d6f5f26e945ce4abd1429](https://github.com/sagemath/sagetrac-mirror/commit/88dabfa498cc3e12116d6f5f26e945ce4abd1429)\" to \"[8d5e37b6ab241cb2f98462de9b536937724ed977](https://github.com/sagemath/sagetrac-mirror/commit/8d5e37b6ab241cb2f98462de9b536937724ed977)\".",
    "created_at": "2021-02-09T14:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[88dabfa498cc3e12116d6f5f26e945ce4abd1429](https://github.com/sagemath/sagetrac-mirror/commit/88dabfa498cc3e12116d6f5f26e945ce4abd1429)" to "[8d5e37b6ab241cb2f98462de9b536937724ed977](https://github.com/sagemath/sagetrac-mirror/commit/8d5e37b6ab241cb2f98462de9b536937724ed977)".



---

archive/issue_comments_599663.json:
```json
{
    "body": "**Changing commit** from \"[8d5e37b6ab241cb2f98462de9b536937724ed977](https://github.com/sagemath/sagetrac-mirror/commit/8d5e37b6ab241cb2f98462de9b536937724ed977)\" to \"[d9ac8df40f4eb4702795e544649a9e1830f25874](https://github.com/sagemath/sagetrac-mirror/commit/d9ac8df40f4eb4702795e544649a9e1830f25874)\".",
    "created_at": "2021-02-09T16:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8d5e37b6ab241cb2f98462de9b536937724ed977](https://github.com/sagemath/sagetrac-mirror/commit/8d5e37b6ab241cb2f98462de9b536937724ed977)" to "[d9ac8df40f4eb4702795e544649a9e1830f25874](https://github.com/sagemath/sagetrac-mirror/commit/d9ac8df40f4eb4702795e544649a9e1830f25874)".



---

archive/issue_comments_599664.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9ac8df40f4eb4702795e544649a9e1830f25874\">d9ac8df</a></td><td><code>Revert changes to sage.env import</code></td></tr></table>\n",
    "created_at": "2021-02-09T16:07:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599664",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9ac8df40f4eb4702795e544649a9e1830f25874">d9ac8df</a></td><td><code>Revert changes to sage.env import</code></td></tr></table>




---

archive/issue_comments_599665.json:
```json
{
    "body": "<a id='comment:322'></a>\nReplying to [gh-tobiasdiez](#comment%3A318):\n> Is it actually desired that tox local-homebrew installs a fresh homebrew in the tox folder\n\n\nYes, that's by design\n\n> Is there a way to use the system's homebrew?\n\n\nFrom tox.ini comments:\n\n```\n    # The variant \"local-homebrew-macos-usrlocal\" uses the global installation in /usr/local\n    # instead.  It may install packages or update packages.  It will not remove packages.\n    # Use at your own risk.\n```",
    "created_at": "2021-02-09T17:11:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599665",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:322'></a>
Replying to [gh-tobiasdiez](#comment%3A318):
> Is it actually desired that tox local-homebrew installs a fresh homebrew in the tox folder


Yes, that's by design

> Is there a way to use the system's homebrew?


From tox.ini comments:

```
    # The variant "local-homebrew-macos-usrlocal" uses the global installation in /usr/local
    # instead.  It may install packages or update packages.  It will not remove packages.
    # Use at your own risk.
```



---

archive/issue_comments_599666.json:
```json
{
    "body": "<a id='comment:3'></a>\nThanks! That is working nicely.\n\nI think I've now addressed all your comments and suggestions.\n\nThe only thing is that since merging the latest develop branch the sage packages (installed via tox) are no longer found when running `pipenv install`. At the commit https://github.com/sagemath/sagetrac-mirror/commit/4bdfef1b21da9f376cfd3c096cb9932fe5334e4e this was working, but stopped after I've merged the develop branch. Now packages such as linbox, singular and gap are still compiled by sage's make, but pkgconfig (in sage.env) cannot find them any longer and thus the c++ compilation stopped working. I don't have these problems locally, where I don't use tox. Do you have an idea which recent changes are the origin of this issue?\n\nI've also tried your suggestion with `sage -sh pipenv` but run into several issues. I guess the problem is that pipenv is trying to reuse sages virtual environment.",
    "created_at": "2021-02-09T17:57:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599666",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:3'></a>
Thanks! That is working nicely.

I think I've now addressed all your comments and suggestions.

The only thing is that since merging the latest develop branch the sage packages (installed via tox) are no longer found when running `pipenv install`. At the commit https://github.com/sagemath/sagetrac-mirror/commit/4bdfef1b21da9f376cfd3c096cb9932fe5334e4e this was working, but stopped after I've merged the develop branch. Now packages such as linbox, singular and gap are still compiled by sage's make, but pkgconfig (in sage.env) cannot find them any longer and thus the c++ compilation stopped working. I don't have these problems locally, where I don't use tox. Do you have an idea which recent changes are the origin of this issue?

I've also tried your suggestion with `sage -sh pipenv` but run into several issues. I guess the problem is that pipenv is trying to reuse sages virtual environment.



---

archive/issue_comments_599667.json:
```json
{
    "body": "**Changing commit** from \"[d9ac8df40f4eb4702795e544649a9e1830f25874](https://github.com/sagemath/sagetrac-mirror/commit/d9ac8df40f4eb4702795e544649a9e1830f25874)\" to \"[245d40fe531570a2bd3cc71e13d851a25e1ff858](https://github.com/sagemath/sagetrac-mirror/commit/245d40fe531570a2bd3cc71e13d851a25e1ff858)\".",
    "created_at": "2021-02-09T17:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d9ac8df40f4eb4702795e544649a9e1830f25874](https://github.com/sagemath/sagetrac-mirror/commit/d9ac8df40f4eb4702795e544649a9e1830f25874)" to "[245d40fe531570a2bd3cc71e13d851a25e1ff858](https://github.com/sagemath/sagetrac-mirror/commit/245d40fe531570a2bd3cc71e13d851a25e1ff858)".



---

archive/issue_comments_599668.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/245d40fe531570a2bd3cc71e13d851a25e1ff858\">245d40f</a></td><td><code>Use correct version of fpylll for mac</code></td></tr></table>\n",
    "created_at": "2021-02-09T17:58:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/245d40fe531570a2bd3cc71e13d851a25e1ff858">245d40f</a></td><td><code>Use correct version of fpylll for mac</code></td></tr></table>




---

archive/issue_comments_599669.json:
```json
{
    "body": "**Changing commit** from \"[245d40fe531570a2bd3cc71e13d851a25e1ff858](https://github.com/sagemath/sagetrac-mirror/commit/245d40fe531570a2bd3cc71e13d851a25e1ff858)\" to \"[4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7](https://github.com/sagemath/sagetrac-mirror/commit/4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7)\".",
    "created_at": "2021-02-09T18:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599669",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[245d40fe531570a2bd3cc71e13d851a25e1ff858](https://github.com/sagemath/sagetrac-mirror/commit/245d40fe531570a2bd3cc71e13d851a25e1ff858)" to "[4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7](https://github.com/sagemath/sagetrac-mirror/commit/4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7)".



---

archive/issue_comments_599670.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7\">4b3c76f</a></td><td><code>Try to fix PKG_CONFIG_PATH and  LD_LIBRARY_PATH</code></td></tr></table>\n",
    "created_at": "2021-02-09T18:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599670",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7">4b3c76f</a></td><td><code>Try to fix PKG_CONFIG_PATH and  LD_LIBRARY_PATH</code></td></tr></table>




---

archive/issue_comments_599671.json:
```json
{
    "body": "<a id='comment:6'></a>\n...never touch LD_LIBRARY_PATH... it's always wrong",
    "created_at": "2021-02-09T18:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599671",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
...never touch LD_LIBRARY_PATH... it's always wrong



---

archive/issue_comments_599672.json:
```json
{
    "body": "<a id='comment:7'></a>\nCould you please take a look at #31362 - it provides `make build-local`, which I think is what you need",
    "created_at": "2021-02-09T19:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599672",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Could you please take a look at #31362 - it provides `make build-local`, which I think is what you need



---

archive/issue_comments_599673.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks for making all the changes. \n\nRight now it's hard for me to test anything from this ticket because the homebrew changes in #31335 conflict.\n\nI would propose to do the following: \n- Rebasing/squashing this branch on top of #31362, current #30770, and #30912.\n- Merging the rebase back into the current branch -- by this trick you won't get merge conflicts in your other branches that depend on this ticket (if any)",
    "created_at": "2021-02-09T19:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599673",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Thanks for making all the changes. 

Right now it's hard for me to test anything from this ticket because the homebrew changes in #31335 conflict.

I would propose to do the following: 
- Rebasing/squashing this branch on top of #31362, current #30770, and #30912.
- Merging the rebase back into the current branch -- by this trick you won't get merge conflicts in your other branches that depend on this ticket (if any)



---

archive/issue_comments_599674.json:
```json
{
    "body": "<a id='comment:329'></a>\nReplying to [gh-tobiasdiez](#comment%3A323):\n> I've also tried your suggestion with `sage -sh pipenv` but run into several issues. I guess the problem is that pipenv is trying to reuse sages virtual environment.\n\n\nSee if you can work around this by having `pipenv` use the base python that is shown in `$SAGE_LOCAL/pyvenv.cfg`.",
    "created_at": "2021-02-09T19:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599674",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:329'></a>
Replying to [gh-tobiasdiez](#comment%3A323):
> I've also tried your suggestion with `sage -sh pipenv` but run into several issues. I guess the problem is that pipenv is trying to reuse sages virtual environment.


See if you can work around this by having `pipenv` use the base python that is shown in `$SAGE_LOCAL/pyvenv.cfg`.



---

archive/issue_comments_599675.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c89641c4f2eed5e7cac24776e5079c346d575de\">7c89641</a></td><td><code>Update lock file</code></td></tr></table>\n",
    "created_at": "2021-02-09T22:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c89641c4f2eed5e7cac24776e5079c346d575de">7c89641</a></td><td><code>Update lock file</code></td></tr></table>




---

archive/issue_comments_599676.json:
```json
{
    "body": "**Changing commit** from \"[4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7](https://github.com/sagemath/sagetrac-mirror/commit/4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7)\" to \"[7c89641c4f2eed5e7cac24776e5079c346d575de](https://github.com/sagemath/sagetrac-mirror/commit/7c89641c4f2eed5e7cac24776e5079c346d575de)\".",
    "created_at": "2021-02-09T22:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599676",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7](https://github.com/sagemath/sagetrac-mirror/commit/4b3c76f9fbe11c202c8de6aa7fe661bcfc7aeca7)" to "[7c89641c4f2eed5e7cac24776e5079c346d575de](https://github.com/sagemath/sagetrac-mirror/commit/7c89641c4f2eed5e7cac24776e5079c346d575de)".



---

archive/issue_comments_599677.json:
```json
{
    "body": "<a id='comment:331'></a>\nReplying to [mkoeppe](#comment%3A326):\n> ...never touch LD_LIBRARY_PATH... it's always wrong\n\n\nOk, but what's then the correct way to do this?",
    "created_at": "2021-02-09T22:13:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599677",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:331'></a>
Replying to [mkoeppe](#comment%3A326):
> ...never touch LD_LIBRARY_PATH... it's always wrong


Ok, but what's then the correct way to do this?



---

archive/issue_comments_599678.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912\".",
    "created_at": "2021-02-09T22:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599678",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912".



---

archive/issue_comments_599679.json:
```json
{
    "body": "<a id='comment:333'></a>\nReplying to [gh-tobiasdiez](#comment%3A331):\n> Replying to [mkoeppe](#comment%3A326):\n> > ...never touch LD_LIBRARY_PATH... it's always wrong\n\n> \n> Ok, but what's then the correct way to do this?\n\n\nBuilding all libraries with rpath - see LDFLAGS setting in `src/bin/sage-env`",
    "created_at": "2021-02-09T22:17:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599679",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:333'></a>
Replying to [gh-tobiasdiez](#comment%3A331):
> Replying to [mkoeppe](#comment%3A326):
> > ...never touch LD_LIBRARY_PATH... it's always wrong

> 
> Ok, but what's then the correct way to do this?


Building all libraries with rpath - see LDFLAGS setting in `src/bin/sage-env`



---

archive/issue_comments_599680.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4\">2c40179</a></td><td><code>build/pkgs/sagelib/src: Update metadata</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998\">2a91862</a></td><td><code>build/pkgs/sagelib/src/README.rst: Add some text</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6432727a4fb106206dd0aae3d8e62715cd6725b3\">6432727</a></td><td><code>Merge tag '9.3.beta2' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a693f22c6044c8baa80f744519855371e3c4aae\">4a693f2</a></td><td><code>Move build/pkgs/sagelib/src/setup.cfg to SAGE_ROOT/src, replace by symlink</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66\">ea182d7</a></td><td><code>Copy changes from build/pkgs/sagelib/src to src</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147\">a1a10b9</a></td><td><code>src/VERSION.txt: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5697335ed14c929adb01a3fafe95f82b79248918\">5697335</a></td><td><code>src/setup.cfg: Add license_file=LICENSE.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247\">deb9eb3</a></td><td><code>Merge tag '9.3.beta3' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918\">7ad4c0e</a></td><td><code>Merge tag '9.3.beta4' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b68ce04b04b2d2104c6643700fa0f8cbe81f9f74\">b68ce04</a></td><td><code>Merge branch 'u/mkoeppe/sagelib__update_metadata_for_pypi_deployment' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-02-09T22:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599680",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4">2c40179</a></td><td><code>build/pkgs/sagelib/src: Update metadata</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998">2a91862</a></td><td><code>build/pkgs/sagelib/src/README.rst: Add some text</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6432727a4fb106206dd0aae3d8e62715cd6725b3">6432727</a></td><td><code>Merge tag '9.3.beta2' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a693f22c6044c8baa80f744519855371e3c4aae">4a693f2</a></td><td><code>Move build/pkgs/sagelib/src/setup.cfg to SAGE_ROOT/src, replace by symlink</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66">ea182d7</a></td><td><code>Copy changes from build/pkgs/sagelib/src to src</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147">a1a10b9</a></td><td><code>src/VERSION.txt: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5697335ed14c929adb01a3fafe95f82b79248918">5697335</a></td><td><code>src/setup.cfg: Add license_file=LICENSE.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247">deb9eb3</a></td><td><code>Merge tag '9.3.beta3' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918">7ad4c0e</a></td><td><code>Merge tag '9.3.beta4' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b68ce04b04b2d2104c6643700fa0f8cbe81f9f74">b68ce04</a></td><td><code>Merge branch 'u/mkoeppe/sagelib__update_metadata_for_pypi_deployment' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599681.json:
```json
{
    "body": "**Changing commit** from \"[7c89641c4f2eed5e7cac24776e5079c346d575de](https://github.com/sagemath/sagetrac-mirror/commit/7c89641c4f2eed5e7cac24776e5079c346d575de)\" to \"[b68ce04b04b2d2104c6643700fa0f8cbe81f9f74](https://github.com/sagemath/sagetrac-mirror/commit/b68ce04b04b2d2104c6643700fa0f8cbe81f9f74)\".",
    "created_at": "2021-02-09T22:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599681",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7c89641c4f2eed5e7cac24776e5079c346d575de](https://github.com/sagemath/sagetrac-mirror/commit/7c89641c4f2eed5e7cac24776e5079c346d575de)" to "[b68ce04b04b2d2104c6643700fa0f8cbe81f9f74](https://github.com/sagemath/sagetrac-mirror/commit/b68ce04b04b2d2104c6643700fa0f8cbe81f9f74)".



---

archive/issue_comments_599682.json:
```json
{
    "body": "<a id='comment:335'></a>\nReplying to [mkoeppe](#comment%3A328):\n> - Rebasing/squashing this branch on top of #31362, current #30770, and #30912.\n\n\n \nI've merged the current versions of #30770 and #30912. Not sure what's the purpose of #31362. That would make the line `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` obsolete right? If it's just for this somewhat cosmetic improvement, I would suggest to turn around the tables and let #31362 depend on this ticket (and make the changes in the workflow there as well). Reason: I had to play a lot around with the different targets until everything works, so I'm a bit hesitant to change things again (and since unmerging a branch is not so easy, one cannot simply revert the experiment).",
    "created_at": "2021-02-09T22:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599682",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:335'></a>
Replying to [mkoeppe](#comment%3A328):
> - Rebasing/squashing this branch on top of #31362, current #30770, and #30912.


 
I've merged the current versions of #30770 and #30912. Not sure what's the purpose of #31362. That would make the line `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` obsolete right? If it's just for this somewhat cosmetic improvement, I would suggest to turn around the tables and let #31362 depend on this ticket (and make the changes in the workflow there as well). Reason: I had to play a lot around with the different targets until everything works, so I'm a bit hesitant to change things again (and since unmerging a branch is not so easy, one cannot simply revert the experiment).



---

archive/issue_comments_599683.json:
```json
{
    "body": "<a id='comment:336'></a>\nReplying to [gh-tobiasdiez](#comment%3A335):\n> I've merged the current versions of #30770 and #30912. \n\n\nThanks.\n\n> Not sure what's the purpose of #31362. That would make the line `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` obsolete right? If it's just for this somewhat cosmetic improvement\n\n\nYes, it's for making all standard non-Python packages available in `SAGE_LOCAL`.\n\n> Reason: I had to play a lot around with the different targets until everything works, so I'm a bit hesitant to change things again\n\n\nThis does not sound good. If installing additional packages from the distribution in `SAGE_LOCAL` breaks the proposed setup, then this ticket is definitely not ready.",
    "created_at": "2021-02-09T22:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599683",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:336'></a>
Replying to [gh-tobiasdiez](#comment%3A335):
> I've merged the current versions of #30770 and #30912. 


Thanks.

> Not sure what's the purpose of #31362. That would make the line `make maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` obsolete right? If it's just for this somewhat cosmetic improvement


Yes, it's for making all standard non-Python packages available in `SAGE_LOCAL`.

> Reason: I had to play a lot around with the different targets until everything works, so I'm a bit hesitant to change things again


This does not sound good. If installing additional packages from the distribution in `SAGE_LOCAL` breaks the proposed setup, then this ticket is definitely not ready.



---

archive/issue_comments_599684.json:
```json
{
    "body": "<a id='comment:7'></a>\nNote also that #31362 does not change anything other than add two new make targets. So even if you find that these targets do not do what you need, there will be no need for unmerging it.",
    "created_at": "2021-02-09T22:54:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599684",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Note also that #31362 does not change anything other than add two new make targets. So even if you find that these targets do not do what you need, there will be no need for unmerging it.



---

archive/issue_comments_599685.json:
```json
{
    "body": "<a id='comment:338'></a>\nReplying to [mkoeppe](#comment%3A336):\n> > Reason: I had to play a lot around with the different targets until everything works, so I'm a bit hesitant to change things again\n\n> \n> This does not sound good. If installing additional packages from the distribution in `SAGE_LOCAL` breaks the proposed setup, then this ticket is definitely not ready.\n\n\nMore in the sense, that it was a bit of try-and-error to find the minimal set of make targets that make the build pass. You could have course build every package in the sage distribution, but the point is that with pipenv only a couple of them are actually needed.\n\nSo `build-local = sagelib-build-deps + maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` ?",
    "created_at": "2021-02-09T22:59:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599685",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:338'></a>
Replying to [mkoeppe](#comment%3A336):
> > Reason: I had to play a lot around with the different targets until everything works, so I'm a bit hesitant to change things again

> 
> This does not sound good. If installing additional packages from the distribution in `SAGE_LOCAL` breaks the proposed setup, then this ticket is definitely not ready.


More in the sense, that it was a bit of try-and-error to find the minimal set of make targets that make the build pass. You could have course build every package in the sage distribution, but the point is that with pipenv only a couple of them are actually needed.

So `build-local = sagelib-build-deps + maxima conway_polynomials jmol conway_polynomials elliptic_curves combinatorial_designs polytopes_db graphs threejs` ?



---

archive/issue_comments_599686.json:
```json
{
    "body": "<a id='comment:9'></a>\n... minus the Python packages of sagelib-build-deps",
    "created_at": "2021-02-09T23:01:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599686",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
... minus the Python packages of sagelib-build-deps



---

archive/issue_comments_599687.json:
```json
{
    "body": "<a id='comment:0'></a>\nFor example, it would not build `numpy`.",
    "created_at": "2021-02-09T23:01:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599687",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
For example, it would not build `numpy`.



---

archive/issue_comments_599688.json:
```json
{
    "body": "<a id='comment:1'></a>\nOf course, there may be a number of non-Python libraries that are not needed IF you are able to pull in a wheel of the Python packages that somehow ship a bundled version of the non-Python library. For example, the `numpy` wheels may come with their own BLAS -- but it won't help because some of our own packages also need BLAS.",
    "created_at": "2021-02-09T23:04:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599688",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Of course, there may be a number of non-Python libraries that are not needed IF you are able to pull in a wheel of the Python packages that somehow ship a bundled version of the non-Python library. For example, the `numpy` wheels may come with their own BLAS -- but it won't help because some of our own packages also need BLAS.



---

archive/issue_comments_599689.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdb223715da2bb4394becd5f3a105f9cd88baed8\">bdb2237</a></td><td><code>Merge branch 't/30912/sagelib__update_metadata_for_pypi_deployment' into t/31357/fixup_src_version_txt_added_in__30912</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c16651c760dfcb6a2af23fdcde582b4e62bfeba6\">c16651c</a></td><td><code>src/VERSION.txt: Use same format as build/pkgs/sagelib/src/VERSION.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2154a5b9f8f56ccc83bb45aa9bd10d659b015649\">2154a5b</a></td><td><code>Merge branch 'u/mkoeppe/fixup_src_version_txt_added_in__30912' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-02-09T23:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdb223715da2bb4394becd5f3a105f9cd88baed8">bdb2237</a></td><td><code>Merge branch 't/30912/sagelib__update_metadata_for_pypi_deployment' into t/31357/fixup_src_version_txt_added_in__30912</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c16651c760dfcb6a2af23fdcde582b4e62bfeba6">c16651c</a></td><td><code>src/VERSION.txt: Use same format as build/pkgs/sagelib/src/VERSION.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2154a5b9f8f56ccc83bb45aa9bd10d659b015649">2154a5b</a></td><td><code>Merge branch 'u/mkoeppe/fixup_src_version_txt_added_in__30912' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599690.json:
```json
{
    "body": "**Changing commit** from \"[b68ce04b04b2d2104c6643700fa0f8cbe81f9f74](https://github.com/sagemath/sagetrac-mirror/commit/b68ce04b04b2d2104c6643700fa0f8cbe81f9f74)\" to \"[2154a5b9f8f56ccc83bb45aa9bd10d659b015649](https://github.com/sagemath/sagetrac-mirror/commit/2154a5b9f8f56ccc83bb45aa9bd10d659b015649)\".",
    "created_at": "2021-02-09T23:06:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b68ce04b04b2d2104c6643700fa0f8cbe81f9f74](https://github.com/sagemath/sagetrac-mirror/commit/b68ce04b04b2d2104c6643700fa0f8cbe81f9f74)" to "[2154a5b9f8f56ccc83bb45aa9bd10d659b015649](https://github.com/sagemath/sagetrac-mirror/commit/2154a5b9f8f56ccc83bb45aa9bd10d659b015649)".



---

archive/issue_comments_599691.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357\".",
    "created_at": "2021-02-09T23:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599691",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357".



---

archive/issue_comments_599692.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55bc2aaf1f539e1d3355d8e1a6c8aa944eb3f254\">55bc2aa</a></td><td><code>m4/sage_spkg_collect.m4: Generate install tree information for build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7dc9a213894fbd12fa4991995b6f1244e5f3401\">d7dc9a2</a></td><td><code>build/make/Makefile.in: New targets all-sage-local, all-sage-venv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27b589baa864533f8a51ff8b46ae10735d09d62f\">27b589b</a></td><td><code>Merge branch 't/30912/sagelib__update_metadata_for_pypi_deployment' into t/31362/make_all_sage_local__make_all_sage_venv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8796008d4852679266b786d63fef2933f0619fa1\">8796008</a></td><td><code>Put pynac into SAGE_LOCAL, sagelib into SAGE_VENV</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6831b1b9657035e91afe6c8b47b32358f24497c\">d6831b1</a></td><td><code>build/make/Makefile.in: Add all-build-local, all-build-venv, which include dependency on toolchain</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/61f6ba6ba917bc48a535470a5c781ccf57d94b06\">61f6ba6</a></td><td><code>Makefile: Add top-level targets build-local, build-venv</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e354672173e53a69f9e5581e0af40be6e69a3719\">e354672</a></td><td><code>Merge branch 'u/mkoeppe/make_all_sage_local__make_all_sage_venv' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2773e6fd9c1868346d194227287dffd6c3642a5e\">2773e6f</a></td><td><code>Use build-local target</code></td></tr></table>\n",
    "created_at": "2021-02-09T23:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599692",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55bc2aaf1f539e1d3355d8e1a6c8aa944eb3f254">55bc2aa</a></td><td><code>m4/sage_spkg_collect.m4: Generate install tree information for build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7dc9a213894fbd12fa4991995b6f1244e5f3401">d7dc9a2</a></td><td><code>build/make/Makefile.in: New targets all-sage-local, all-sage-venv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27b589baa864533f8a51ff8b46ae10735d09d62f">27b589b</a></td><td><code>Merge branch 't/30912/sagelib__update_metadata_for_pypi_deployment' into t/31362/make_all_sage_local__make_all_sage_venv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8796008d4852679266b786d63fef2933f0619fa1">8796008</a></td><td><code>Put pynac into SAGE_LOCAL, sagelib into SAGE_VENV</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6831b1b9657035e91afe6c8b47b32358f24497c">d6831b1</a></td><td><code>build/make/Makefile.in: Add all-build-local, all-build-venv, which include dependency on toolchain</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/61f6ba6ba917bc48a535470a5c781ccf57d94b06">61f6ba6</a></td><td><code>Makefile: Add top-level targets build-local, build-venv</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e354672173e53a69f9e5581e0af40be6e69a3719">e354672</a></td><td><code>Merge branch 'u/mkoeppe/make_all_sage_local__make_all_sage_venv' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2773e6fd9c1868346d194227287dffd6c3642a5e">2773e6f</a></td><td><code>Use build-local target</code></td></tr></table>




---

archive/issue_comments_599693.json:
```json
{
    "body": "**Changing commit** from \"[2154a5b9f8f56ccc83bb45aa9bd10d659b015649](https://github.com/sagemath/sagetrac-mirror/commit/2154a5b9f8f56ccc83bb45aa9bd10d659b015649)\" to \"[2773e6fd9c1868346d194227287dffd6c3642a5e](https://github.com/sagemath/sagetrac-mirror/commit/2773e6fd9c1868346d194227287dffd6c3642a5e)\".",
    "created_at": "2021-02-09T23:09:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2154a5b9f8f56ccc83bb45aa9bd10d659b015649](https://github.com/sagemath/sagetrac-mirror/commit/2154a5b9f8f56ccc83bb45aa9bd10d659b015649)" to "[2773e6fd9c1868346d194227287dffd6c3642a5e](https://github.com/sagemath/sagetrac-mirror/commit/2773e6fd9c1868346d194227287dffd6c3642a5e)".



---

archive/issue_comments_599694.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362\".",
    "created_at": "2021-02-09T23:09:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599694",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362".



---

archive/issue_comments_599695.json:
```json
{
    "body": "<a id='comment:6'></a>\nok, let's see if that works",
    "created_at": "2021-02-09T23:10:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599695",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:6'></a>
ok, let's see if that works



---

archive/issue_comments_599696.json:
```json
{
    "body": "<a id='comment:7'></a>\nIn any case thanks to merging these tickets, I am able to merge the tickets that fix homebrew - so I'll be able to test later today.",
    "created_at": "2021-02-09T23:11:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599696",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
In any case thanks to merging these tickets, I am able to merge the tickets that fix homebrew - so I'll be able to test later today.



---

archive/issue_comments_599697.json:
```json
{
    "body": "<a id='comment:8'></a>\n`../sage -sh -c 'ARCHFLAGS= PIP_NO_BUILD_ISOLATION=1 pipenv install  -v -v'` got me a bit farther. (Setting `ARCHFLAGS` to the empty string helps on macOS; `PIP_NO_BUILD_ISOLATION=1` helps with some of the Python packages that declare their build dependencies incorrectly (see #30922). Now it fails with this:\n\n```\n    raise MetadataInconsistent(self._ireq, \"name\", dist.project_name)\npip._internal.exceptions.MetadataInconsistent: Requested fpylll from https://files.pythonhosted.org/packages/ad/c5/f30f354dcce03b928702414fdbdd916d60915c6b144360c88707784385bb/fpylll-0.5.4.tar.gz#egg=fpylll-recent (from -r /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pipenv-7zg7bw1s-requirements/pipenv-b8jmkho7-requirement.txt (line 1)) has different name in metadata: 'fpylll'\nRemoved build tracker: '/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-tracker-z5q5pu09'\n...\n    raise exceptions.InstallError(c.dep.name, extra=err_lines)\npipenv.exceptions.InstallError: ERROR: Couldn't install package: fpylll-recent\n Package installation failed...\n```",
    "created_at": "2021-02-10T03:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599697",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
`../sage -sh -c 'ARCHFLAGS= PIP_NO_BUILD_ISOLATION=1 pipenv install  -v -v'` got me a bit farther. (Setting `ARCHFLAGS` to the empty string helps on macOS; `PIP_NO_BUILD_ISOLATION=1` helps with some of the Python packages that declare their build dependencies incorrectly (see #30922). Now it fails with this:

```
    raise MetadataInconsistent(self._ireq, "name", dist.project_name)
pip._internal.exceptions.MetadataInconsistent: Requested fpylll from https://files.pythonhosted.org/packages/ad/c5/f30f354dcce03b928702414fdbdd916d60915c6b144360c88707784385bb/fpylll-0.5.4.tar.gz#egg=fpylll-recent (from -r /var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pipenv-7zg7bw1s-requirements/pipenv-b8jmkho7-requirement.txt (line 1)) has different name in metadata: 'fpylll'
Removed build tracker: '/private/var/folders/38/wnh4gf1552g_crsjnv2vmmww0000gp/T/pip-req-tracker-z5q5pu09'
...
    raise exceptions.InstallError(c.dep.name, extra=err_lines)
pipenv.exceptions.InstallError: ERROR: Couldn't install package: fpylll-recent
 Package installation failed...
```



---

archive/issue_comments_599698.json:
```json
{
    "body": "**Changing commit** from \"[2773e6fd9c1868346d194227287dffd6c3642a5e](https://github.com/sagemath/sagetrac-mirror/commit/2773e6fd9c1868346d194227287dffd6c3642a5e)\" to \"[e70f22ba61f2d4c1e0de5a254a15844129df7cab](https://github.com/sagemath/sagetrac-mirror/commit/e70f22ba61f2d4c1e0de5a254a15844129df7cab)\".",
    "created_at": "2021-02-10T10:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2773e6fd9c1868346d194227287dffd6c3642a5e](https://github.com/sagemath/sagetrac-mirror/commit/2773e6fd9c1868346d194227287dffd6c3642a5e)" to "[e70f22ba61f2d4c1e0de5a254a15844129df7cab](https://github.com/sagemath/sagetrac-mirror/commit/e70f22ba61f2d4c1e0de5a254a15844129df7cab)".



---

archive/issue_comments_599699.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/627e79deffa974e01c0d8bbf096d8c69edd3bb18\">627e79d</a></td><td><code>Fix cpath as well</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e70f22ba61f2d4c1e0de5a254a15844129df7cab\">e70f22b</a></td><td><code>Try to set name of fpylll-recent</code></td></tr></table>\n",
    "created_at": "2021-02-10T10:05:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/627e79deffa974e01c0d8bbf096d8c69edd3bb18">627e79d</a></td><td><code>Fix cpath as well</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e70f22ba61f2d4c1e0de5a254a15844129df7cab">e70f22b</a></td><td><code>Try to set name of fpylll-recent</code></td></tr></table>




---

archive/issue_comments_599700.json:
```json
{
    "body": "<a id='comment:0'></a>\nThis error also occurred on the github workflow. I tried to fix it by setting the name in the pipfile. If this doesn't work can you please remove the fpylll-recent in the pipfile and invoke `pipenv install https://files.pythonhosted.org/packages/ad/c5/f30f354dcce03b928702414fdbdd916d60915c6b144360c88707784385bb/fpylll-0.5.4.tar.gz`\nThis should work. Could you then please post what pipenv writes to the pipfile, thanks!\n\n`build-local` seems to work, except that it installs some python related tools/packages (pip, setuptools_scm, wheel) and doesn't install maxima.",
    "created_at": "2021-02-10T10:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599700",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:0'></a>
This error also occurred on the github workflow. I tried to fix it by setting the name in the pipfile. If this doesn't work can you please remove the fpylll-recent in the pipfile and invoke `pipenv install https://files.pythonhosted.org/packages/ad/c5/f30f354dcce03b928702414fdbdd916d60915c6b144360c88707784385bb/fpylll-0.5.4.tar.gz`
This should work. Could you then please post what pipenv writes to the pipfile, thanks!

`build-local` seems to work, except that it installs some python related tools/packages (pip, setuptools_scm, wheel) and doesn't install maxima.



---

archive/issue_comments_599701.json:
```json
{
    "body": "**Changing commit** from \"[e70f22ba61f2d4c1e0de5a254a15844129df7cab](https://github.com/sagemath/sagetrac-mirror/commit/e70f22ba61f2d4c1e0de5a254a15844129df7cab)\" to \"[8c22f9ec046cb8253531056e0a7aff7118ca778e](https://github.com/sagemath/sagetrac-mirror/commit/8c22f9ec046cb8253531056e0a7aff7118ca778e)\".",
    "created_at": "2021-02-10T11:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e70f22ba61f2d4c1e0de5a254a15844129df7cab](https://github.com/sagemath/sagetrac-mirror/commit/e70f22ba61f2d4c1e0de5a254a15844129df7cab)" to "[8c22f9ec046cb8253531056e0a7aff7118ca778e](https://github.com/sagemath/sagetrac-mirror/commit/8c22f9ec046cb8253531056e0a7aff7118ca778e)".



---

archive/issue_comments_599702.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c22f9ec046cb8253531056e0a7aff7118ca778e\">8c22f9e</a></td><td><code>Set LIBRARY_PATH</code></td></tr></table>\n",
    "created_at": "2021-02-10T11:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599702",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c22f9ec046cb8253531056e0a7aff7118ca778e">8c22f9e</a></td><td><code>Set LIBRARY_PATH</code></td></tr></table>




---

archive/issue_comments_599703.json:
```json
{
    "body": "**Changing commit** from \"[8c22f9ec046cb8253531056e0a7aff7118ca778e](https://github.com/sagemath/sagetrac-mirror/commit/8c22f9ec046cb8253531056e0a7aff7118ca778e)\" to \"[e17019c5528c867367988d7fa99bcef76f320949](https://github.com/sagemath/sagetrac-mirror/commit/e17019c5528c867367988d7fa99bcef76f320949)\".",
    "created_at": "2021-02-10T20:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8c22f9ec046cb8253531056e0a7aff7118ca778e](https://github.com/sagemath/sagetrac-mirror/commit/8c22f9ec046cb8253531056e0a7aff7118ca778e)" to "[e17019c5528c867367988d7fa99bcef76f320949](https://github.com/sagemath/sagetrac-mirror/commit/e17019c5528c867367988d7fa99bcef76f320949)".



---

archive/issue_comments_599704.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e17019c5528c867367988d7fa99bcef76f320949\">e17019c</a></td><td><code>Install old readline as well</code></td></tr></table>\n",
    "created_at": "2021-02-10T20:08:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e17019c5528c867367988d7fa99bcef76f320949">e17019c</a></td><td><code>Install old readline as well</code></td></tr></table>




---

archive/issue_comments_599705.json:
```json
{
    "body": "<a id='comment:353'></a>\nReplying to [gh-tobiasdiez](#comment%3A350):\n> `build-local` seems to work, except that it installs some python related tools/packages (pip, setuptools_scm, wheel) and doesn't install maxima. \n\n\nwheel (which pulls in the python toolchain) is fixed in #31321.\n\nmaxima - could you double check?",
    "created_at": "2021-02-10T20:16:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599705",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:353'></a>
Replying to [gh-tobiasdiez](#comment%3A350):
> `build-local` seems to work, except that it installs some python related tools/packages (pip, setuptools_scm, wheel) and doesn't install maxima. 


wheel (which pulls in the python toolchain) is fixed in #31321.

maxima - could you double check?



---

archive/issue_comments_599706.json:
```json
{
    "body": "<a id='comment:4'></a>\nOk good. And false alarm, maxima is installed (the output is just condensed to one line in contrast to the pages of text for `make maxima` which has thrown me off).\n\nThe latest commit should hopefully fix the fpylll error.",
    "created_at": "2021-02-10T20:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599706",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>
Ok good. And false alarm, maxima is installed (the output is just condensed to one line in contrast to the pages of text for `make maxima` which has thrown me off).

The latest commit should hopefully fix the fpylll error.



---

archive/issue_comments_599707.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2ed97f2ba3af909838802c95f4151282090c7d7\">e2ed97f</a></td><td><code>Fix fpylll</code></td></tr></table>\n",
    "created_at": "2021-02-10T20:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2ed97f2ba3af909838802c95f4151282090c7d7">e2ed97f</a></td><td><code>Fix fpylll</code></td></tr></table>




---

archive/issue_comments_599708.json:
```json
{
    "body": "**Changing commit** from \"[e17019c5528c867367988d7fa99bcef76f320949](https://github.com/sagemath/sagetrac-mirror/commit/e17019c5528c867367988d7fa99bcef76f320949)\" to \"[e2ed97f2ba3af909838802c95f4151282090c7d7](https://github.com/sagemath/sagetrac-mirror/commit/e2ed97f2ba3af909838802c95f4151282090c7d7)\".",
    "created_at": "2021-02-10T20:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e17019c5528c867367988d7fa99bcef76f320949](https://github.com/sagemath/sagetrac-mirror/commit/e17019c5528c867367988d7fa99bcef76f320949)" to "[e2ed97f2ba3af909838802c95f4151282090c7d7](https://github.com/sagemath/sagetrac-mirror/commit/e2ed97f2ba3af909838802c95f4151282090c7d7)".



---

archive/issue_comments_599709.json:
```json
{
    "body": "<a id='comment:6'></a>\nI will put a rebased/squashed version of the `setup.py`/`sage_setup` changes on #31377, because this part seems ready and I hope we can get it into 9.3 to get developers used to the in-place install idea.",
    "created_at": "2021-02-10T20:37:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599709",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
I will put a rebased/squashed version of the `setup.py`/`sage_setup` changes on #31377, because this part seems ready and I hope we can get it into 9.3 to get developers used to the in-place install idea.



---

archive/issue_comments_599710.json:
```json
{
    "body": "<a id='comment:7'></a>\n(It looks to me like the venv aspects of this ticket will take more time; in particular since they seem to involve getting an uncooperative random set of wheels from PyPI to cooperate with the system.)",
    "created_at": "2021-02-10T20:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599710",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
(It looks to me like the venv aspects of this ticket will take more time; in particular since they seem to involve getting an uncooperative random set of wheels from PyPI to cooperate with the system.)



---

archive/issue_comments_599711.json:
```json
{
    "body": "<a id='comment:8'></a>\nIt's quite the opposite: since some of the python packages (fyplll, cypari2) don't provide wheels, system packages need to be installed which is quite hard to coordinate across different systems.",
    "created_at": "2021-02-10T21:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599711",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>
It's quite the opposite: since some of the python packages (fyplll, cypari2) don't provide wheels, system packages need to be installed which is quite hard to coordinate across different systems.



---

archive/issue_comments_599712.json:
```json
{
    "body": "<a id='comment:9'></a>\nBut the Sage distribution has already solved this problem. Just build within a sage-sh.",
    "created_at": "2021-02-10T21:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599712",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
But the Sage distribution has already solved this problem. Just build within a sage-sh.



---

archive/issue_comments_599713.json:
```json
{
    "body": "<a id='comment:0'></a>\nPlease take a look if #31377 looks agreeable to you.",
    "created_at": "2021-02-10T21:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599713",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Please take a look if #31377 looks agreeable to you.



---

archive/issue_comments_599714.json:
```json
{
    "body": "<a id='comment:361'></a>\nReplying to [mkoeppe](#comment%3A280):\n> Also `create_extension` duplicates some of the code in `sage_build_cython.create_extension`.\n\n\nAlso as I just wrote in #31377, some of the code setting flags is missing, which is causing errors. Could you look into unifying this please when you have a chance?",
    "created_at": "2021-02-10T23:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599714",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:361'></a>
Replying to [mkoeppe](#comment%3A280):
> Also `create_extension` duplicates some of the code in `sage_build_cython.create_extension`.


Also as I just wrote in #31377, some of the code setting flags is missing, which is causing errors. Could you look into unifying this please when you have a chance?



---

archive/issue_comments_599715.json:
```json
{
    "body": "<a id='comment:362'></a>\nReplying to [mkoeppe](#comment%3A357):\n> (It looks to me like the venv aspects of this ticket will take more time; in particular since they seem to involve getting an uncooperative random set of wheels from PyPI to cooperate with the system.)\n\n\nOn this topic, see also the discussion at https://github.com/sagemath/cypari2/issues/105.\n\nI think it is a desirable feature to be able to edit the source code in an inplace install of sage (ie what `pip -e` provides). This would greatly benefit all Sage developers. However, I have hard time to understand the benefit of the venv. On the other hand, I do not understand how wheels could solve the libraries/softwares dependencies. More precisely, here is a scenario (which happens to be happening in Sage)\n- [SageMath](SageMath) depends on `pylib1` and `pylib2` that uses the same `libfoo` C library. Both of these libraries provide wheels that bundle `libfoo` to make some of their users happy.\n- [SageMath](SageMath) also depends on `pylib3` that depends on both `pylib1` and `pylib2` and uses custom Cython code that uses functions from `libfoo`. `pylib3` does not provide wheel yet. How should it be implemented?",
    "created_at": "2021-02-11T17:29:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599715",
    "user": "https://github.com/videlec"
}
```

<a id='comment:362'></a>
Replying to [mkoeppe](#comment%3A357):
> (It looks to me like the venv aspects of this ticket will take more time; in particular since they seem to involve getting an uncooperative random set of wheels from PyPI to cooperate with the system.)


On this topic, see also the discussion at https://github.com/sagemath/cypari2/issues/105.

I think it is a desirable feature to be able to edit the source code in an inplace install of sage (ie what `pip -e` provides). This would greatly benefit all Sage developers. However, I have hard time to understand the benefit of the venv. On the other hand, I do not understand how wheels could solve the libraries/softwares dependencies. More precisely, here is a scenario (which happens to be happening in Sage)
- [SageMath](SageMath) depends on `pylib1` and `pylib2` that uses the same `libfoo` C library. Both of these libraries provide wheels that bundle `libfoo` to make some of their users happy.
- [SageMath](SageMath) also depends on `pylib3` that depends on both `pylib1` and `pylib2` and uses custom Cython code that uses functions from `libfoo`. `pylib3` does not provide wheel yet. How should it be implemented?



---

archive/issue_comments_599716.json:
```json
{
    "body": "<a id='comment:3'></a>\nHi Vincent, thanks for joining the discussion.\n\nFor a discussion of possible distribution strategies using wheels, let's use #31251 (Meta-ticket: Distribution as wheels), which also has a link to a recent post by Gommers on packaging. I agree with you that it is a hard problem.\n\nFor Sage 9.3, I have a much more modest goal regarding wheels that is already fully implemented and is only waiting for review (see ticket list in #29705 for tickets by milestone). Since #29500 (already in Sage 9.2), we generate wheels in `$SAGE_LOCAL/var/lib/sage/wheels`. These wheels are not distributable as they do not bundle their shared library dependencies but rather rpath into `$SAGE_LOCAL`. Users can make their own venvs for development purposes where they install the prebuilt wheels from this directory. #31045 and #31279 add some missing wheels. #30913 generates dependency metadata that makes it easier to set up the venv; and adds tests using `tox`.\n\nFor editable install of sagelib as part of the normal build system (no extra venv) using Tobias' new `setup.py` from this ticket, see #31377.",
    "created_at": "2021-02-11T18:08:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599716",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Hi Vincent, thanks for joining the discussion.

For a discussion of possible distribution strategies using wheels, let's use #31251 (Meta-ticket: Distribution as wheels), which also has a link to a recent post by Gommers on packaging. I agree with you that it is a hard problem.

For Sage 9.3, I have a much more modest goal regarding wheels that is already fully implemented and is only waiting for review (see ticket list in #29705 for tickets by milestone). Since #29500 (already in Sage 9.2), we generate wheels in `$SAGE_LOCAL/var/lib/sage/wheels`. These wheels are not distributable as they do not bundle their shared library dependencies but rather rpath into `$SAGE_LOCAL`. Users can make their own venvs for development purposes where they install the prebuilt wheels from this directory. #31045 and #31279 add some missing wheels. #30913 generates dependency metadata that makes it easier to set up the venv; and adds tests using `tox`.

For editable install of sagelib as part of the normal build system (no extra venv) using Tobias' new `setup.py` from this ticket, see #31377.



---

archive/issue_comments_599717.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362, #31365\".",
    "created_at": "2021-02-11T21:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599717",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362, #31365".



---

archive/issue_comments_599718.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/804ebd7689fe8423e901e8ecf38dd62a7a9b8789\">804ebd7</a></td><td><code>sage_setup.dpcbuild.AllBuilder: Restrict workaround to macOS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4ceee5dae4caa7dac7a6fe7ca29538aca2d381a\">b4ceee5</a></td><td><code>sage_setup.docbuild: In the workaround, do not go through build_many to build serially</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7369a3e90d96862388dc32153e8644a82ebcccde\">7369a3e</a></td><td><code>Merge branch 't/31344/homebrew__docbuild_crashes__libtcl_atforkprepare' into t/31365/add_ntl_to_cython_aliases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce03e6b8a93777820c94d83eeb42d8b70c222a73\">ce03e6b</a></td><td><code>src/sage/schemes/hyperelliptic_curves/hypellfrob.pyx: Merge distutils directives</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32576b43a0415a9e15d1cbe6beac2dd4c300a745\">32576b4</a></td><td><code>sage.misc.cython: Add NTL aliases, cache result of cython_aliases</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e30e3ac2d891a16fdd1ad89506db767d4edb9e5\">6e30e3a</a></td><td><code>Use variables NTL_INCDIR, NTL_LIBDIR in sage_conf, separate from NTL_PREFIX used in sage-build-env-config; set -std=c++11 in NTL_CFLAGS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b1e27b96e143d6d44b448692ba266050e667399\">7b1e27b</a></td><td><code>Merge distutils directives for Cython files using ntl</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4d2828df69cd02e128a43a53b32e67cb63caacb9\">4d2828d</a></td><td><code>Switch Cython files that use NTL to language = c++</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/993c35c931f9c9f2b459e66619cac7d587a4a08f\">993c35c</a></td><td><code>build/pkgs/ntl/spkg-configure.m4: Fix up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e60c00b3cb16ae500584baf484017b922ac3988\">3e60c00</a></td><td><code>Merge branch 'u/mkoeppe/add_ntl_to_cython_aliases' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-02-11T21:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/804ebd7689fe8423e901e8ecf38dd62a7a9b8789">804ebd7</a></td><td><code>sage_setup.dpcbuild.AllBuilder: Restrict workaround to macOS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4ceee5dae4caa7dac7a6fe7ca29538aca2d381a">b4ceee5</a></td><td><code>sage_setup.docbuild: In the workaround, do not go through build_many to build serially</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7369a3e90d96862388dc32153e8644a82ebcccde">7369a3e</a></td><td><code>Merge branch 't/31344/homebrew__docbuild_crashes__libtcl_atforkprepare' into t/31365/add_ntl_to_cython_aliases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce03e6b8a93777820c94d83eeb42d8b70c222a73">ce03e6b</a></td><td><code>src/sage/schemes/hyperelliptic_curves/hypellfrob.pyx: Merge distutils directives</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32576b43a0415a9e15d1cbe6beac2dd4c300a745">32576b4</a></td><td><code>sage.misc.cython: Add NTL aliases, cache result of cython_aliases</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e30e3ac2d891a16fdd1ad89506db767d4edb9e5">6e30e3a</a></td><td><code>Use variables NTL_INCDIR, NTL_LIBDIR in sage_conf, separate from NTL_PREFIX used in sage-build-env-config; set -std=c++11 in NTL_CFLAGS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b1e27b96e143d6d44b448692ba266050e667399">7b1e27b</a></td><td><code>Merge distutils directives for Cython files using ntl</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4d2828df69cd02e128a43a53b32e67cb63caacb9">4d2828d</a></td><td><code>Switch Cython files that use NTL to language = c++</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/993c35c931f9c9f2b459e66619cac7d587a4a08f">993c35c</a></td><td><code>build/pkgs/ntl/spkg-configure.m4: Fix up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e60c00b3cb16ae500584baf484017b922ac3988">3e60c00</a></td><td><code>Merge branch 'u/mkoeppe/add_ntl_to_cython_aliases' of git://trac.sagemath.org/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599719.json:
```json
{
    "body": "**Changing commit** from \"[e2ed97f2ba3af909838802c95f4151282090c7d7](https://github.com/sagemath/sagetrac-mirror/commit/e2ed97f2ba3af909838802c95f4151282090c7d7)\" to \"[3e60c00b3cb16ae500584baf484017b922ac3988](https://github.com/sagemath/sagetrac-mirror/commit/3e60c00b3cb16ae500584baf484017b922ac3988)\".",
    "created_at": "2021-02-11T21:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e2ed97f2ba3af909838802c95f4151282090c7d7](https://github.com/sagemath/sagetrac-mirror/commit/e2ed97f2ba3af909838802c95f4151282090c7d7)" to "[3e60c00b3cb16ae500584baf484017b922ac3988](https://github.com/sagemath/sagetrac-mirror/commit/3e60c00b3cb16ae500584baf484017b922ac3988)".



---

archive/issue_comments_599720.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-02-11T21:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599720",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_599721.json:
```json
{
    "body": "<a id='comment:6'></a>\nSo, I think, I've found a solution to the fpylll problems. In fact, the github workflow should now also work for macos (at least the last run installed everything fine except sage, which failed due to an NTL error that is fixed with #31365). Since macos runs on the sage repo run currently really slow, you can find the latest run at https://github.com/tobiasdiez/sage/actions.",
    "created_at": "2021-02-11T21:31:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599721",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:6'></a>
So, I think, I've found a solution to the fpylll problems. In fact, the github workflow should now also work for macos (at least the last run installed everything fine except sage, which failed due to an NTL error that is fixed with #31365). Since macos runs on the sage repo run currently really slow, you can find the latest run at https://github.com/tobiasdiez/sage/actions.



---

archive/issue_comments_599722.json:
```json
{
    "body": "<a id='comment:7'></a>\nI've split out another ticket from here: #31384",
    "created_at": "2021-02-11T22:20:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599722",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
I've split out another ticket from here: #31384



---

archive/issue_events_088672.json:
```json
{
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88672"
}
```



---

archive/issue_comments_599723.json:
```json
{
    "body": "**Work_Issues:** rebase on dependencies + #31384, #31377",
    "created_at": "2021-02-12T16:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599723",
    "user": "https://github.com/mkoeppe"
}
```

**Work_Issues:** rebase on dependencies + #31384, #31377



---

archive/issue_comments_599724.json:
```json
{
    "body": "**Changing work_issues** from \"rebase on dependencies + #31384, #31377\" to \"\".",
    "created_at": "2021-02-13T09:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599724",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing work_issues** from "rebase on dependencies + #31384, #31377" to "".



---

archive/issue_comments_599725.json:
```json
{
    "body": "**Changing dependencies** from \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362, #31365\" to \"#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362, #31365, #31377\".",
    "created_at": "2021-02-13T09:24:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599725",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing dependencies** from "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362, #31365" to "#30779, #30672, #30673, #30709, #30706, #30901, #31080, #29850, #29314, #30937, #30935, #30731 , #30859, #30923, #30910, #30944, #30770, #31216, #31029, #30912, #31357, #31362, #31365, #31377".



---

archive/issue_comments_599726.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/217c675f18a85ef0e9c206f7a354a30b51d91c65\">217c675</a></td><td><code>Try to fix gmp issue on mac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25df925abe4ac9e51bccc517a9e371c7ef14b532\">25df925</a></td><td><code>For mac not linux...</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90a51040d1cacc952b3ed32499efada2b3cb4f5f\">90a5104</a></td><td><code>Cleanup workflow</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c4ba624a41285287a49e4727a98858f77acfd38\">0c4ba62</a></td><td><code>Try to only specify gmp includes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9784588545802671b4b32536ebd775a0824b149\">a978458</a></td><td><code>Fix a few more errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1ce8785cf5ba1c46a1cdcdeee77af6a0c1fa4a9\">c1ce878</a></td><td><code>Also for the manual install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13d90ee00e330ff759d0f8fc0b4e3868a477248c\">13d90ee</a></td><td><code>Remove a few unnecessary changes</code></td></tr></table>\n",
    "created_at": "2021-02-13T09:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/217c675f18a85ef0e9c206f7a354a30b51d91c65">217c675</a></td><td><code>Try to fix gmp issue on mac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25df925abe4ac9e51bccc517a9e371c7ef14b532">25df925</a></td><td><code>For mac not linux...</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90a51040d1cacc952b3ed32499efada2b3cb4f5f">90a5104</a></td><td><code>Cleanup workflow</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c4ba624a41285287a49e4727a98858f77acfd38">0c4ba62</a></td><td><code>Try to only specify gmp includes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9784588545802671b4b32536ebd775a0824b149">a978458</a></td><td><code>Fix a few more errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1ce8785cf5ba1c46a1cdcdeee77af6a0c1fa4a9">c1ce878</a></td><td><code>Also for the manual install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13d90ee00e330ff759d0f8fc0b4e3868a477248c">13d90ee</a></td><td><code>Remove a few unnecessary changes</code></td></tr></table>




---

archive/issue_comments_599727.json:
```json
{
    "body": "**Changing commit** from \"[3e60c00b3cb16ae500584baf484017b922ac3988](https://github.com/sagemath/sagetrac-mirror/commit/3e60c00b3cb16ae500584baf484017b922ac3988)\" to \"[13d90ee00e330ff759d0f8fc0b4e3868a477248c](https://github.com/sagemath/sagetrac-mirror/commit/13d90ee00e330ff759d0f8fc0b4e3868a477248c)\".",
    "created_at": "2021-02-13T09:25:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3e60c00b3cb16ae500584baf484017b922ac3988](https://github.com/sagemath/sagetrac-mirror/commit/3e60c00b3cb16ae500584baf484017b922ac3988)" to "[13d90ee00e330ff759d0f8fc0b4e3868a477248c](https://github.com/sagemath/sagetrac-mirror/commit/13d90ee00e330ff759d0f8fc0b4e3868a477248c)".



---

archive/issue_comments_599728.json:
```json
{
    "body": "**Changing commit** from \"[13d90ee00e330ff759d0f8fc0b4e3868a477248c](https://github.com/sagemath/sagetrac-mirror/commit/13d90ee00e330ff759d0f8fc0b4e3868a477248c)\" to \"[08fef7dd62544dfb13327d4ad38fca5ab6691190](https://github.com/sagemath/sagetrac-mirror/commit/08fef7dd62544dfb13327d4ad38fca5ab6691190)\".",
    "created_at": "2021-02-13T13:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[13d90ee00e330ff759d0f8fc0b4e3868a477248c](https://github.com/sagemath/sagetrac-mirror/commit/13d90ee00e330ff759d0f8fc0b4e3868a477248c)" to "[08fef7dd62544dfb13327d4ad38fca5ab6691190](https://github.com/sagemath/sagetrac-mirror/commit/08fef7dd62544dfb13327d4ad38fca5ab6691190)".



---

archive/issue_comments_599729.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8b5ef3f2091d81dd73d79fd93a91b57fd268734\">f8b5ef3</a></td><td><code>Mark a few cython files as c++</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/08fef7dd62544dfb13327d4ad38fca5ab6691190\">08fef7d</a></td><td><code>Only catch import errors</code></td></tr></table>\n",
    "created_at": "2021-02-13T13:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599729",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8b5ef3f2091d81dd73d79fd93a91b57fd268734">f8b5ef3</a></td><td><code>Mark a few cython files as c++</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/08fef7dd62544dfb13327d4ad38fca5ab6691190">08fef7d</a></td><td><code>Only catch import errors</code></td></tr></table>




---

archive/issue_comments_599730.json:
```json
{
    "body": "**Changing commit** from \"[08fef7dd62544dfb13327d4ad38fca5ab6691190](https://github.com/sagemath/sagetrac-mirror/commit/08fef7dd62544dfb13327d4ad38fca5ab6691190)\" to \"[8f8b61533287f67be77a4920f7ffceb5ebc39b0d](https://github.com/sagemath/sagetrac-mirror/commit/8f8b61533287f67be77a4920f7ffceb5ebc39b0d)\".",
    "created_at": "2021-02-13T19:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599730",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[08fef7dd62544dfb13327d4ad38fca5ab6691190](https://github.com/sagemath/sagetrac-mirror/commit/08fef7dd62544dfb13327d4ad38fca5ab6691190)" to "[8f8b61533287f67be77a4920f7ffceb5ebc39b0d](https://github.com/sagemath/sagetrac-mirror/commit/8f8b61533287f67be77a4920f7ffceb5ebc39b0d)".



---

archive/issue_comments_599731.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/18df2dc7c27d8e583d5ccdc6acfa39c955b8fa51\">18df2dc</a></td><td><code>Merge branch 't/31365/add_ntl_to_cython_aliases' into t/31377/__configure___enable_editable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19ca17aa08c610e1ed900b39662fb2ba1ec8455e\">19ca17a</a></td><td><code>src/sage/graphs/graph_decompositions/tdlib/sage_tdlib.cpp: Move one directory level higher</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f02963b28d939a7f409914a246d74dce7bfc41d4\">f02963b</a></td><td><code>Merge branch 't/31389/remove_clash_of_tdlib__with_tdlib_pyx_in__src_sage_graphs_graph_decompositions' into t/31377/__configure___enable_editable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b293f889f827ec5769ad6ca601294284d9a1f24\">2b293f8</a></td><td><code>src/setup.py: Install the jupyter kernel using sage_install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b05e4ba3e981959a0ce39ff39e56d5d5e0b16971\">b05e4ba</a></td><td><code>build/make/Makefile.in (sagelib-clean): Remove generated .c and .cpp files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/271d42733078659c963550e07970440101a73ab7\">271d427</a></td><td><code>src/setup.py: Fix sage.misc.sageinspect by setting Cython.Compiler.Options.embed_pos_in_docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6b2fc4f0f461b2f18aedf49ba238db7a7fdc8b3\">f6b2fc4</a></td><td><code>src/sage/repl/interpreter.py: Fix a doctest for editable installs of sagelib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a0731aa00a6eace3b4c779b3399df898286d112\">9a0731a</a></td><td><code>sage.interacs.debugger: Remove deprecated module</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5d47ce731d44f099d635172b34654481eb7e13b\">e5d47ce</a></td><td><code>Merge branch 't/31390/remove_deprecated_sage_interacts_debugger' into t/31377/__configure___enable_editable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f8b61533287f67be77a4920f7ffceb5ebc39b0d\">8f8b615</a></td><td><code>Merge branch 't/31377/__configure___enable_editable' into t/30371/public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-02-13T19:23:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599731",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/18df2dc7c27d8e583d5ccdc6acfa39c955b8fa51">18df2dc</a></td><td><code>Merge branch 't/31365/add_ntl_to_cython_aliases' into t/31377/__configure___enable_editable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19ca17aa08c610e1ed900b39662fb2ba1ec8455e">19ca17a</a></td><td><code>src/sage/graphs/graph_decompositions/tdlib/sage_tdlib.cpp: Move one directory level higher</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f02963b28d939a7f409914a246d74dce7bfc41d4">f02963b</a></td><td><code>Merge branch 't/31389/remove_clash_of_tdlib__with_tdlib_pyx_in__src_sage_graphs_graph_decompositions' into t/31377/__configure___enable_editable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b293f889f827ec5769ad6ca601294284d9a1f24">2b293f8</a></td><td><code>src/setup.py: Install the jupyter kernel using sage_install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b05e4ba3e981959a0ce39ff39e56d5d5e0b16971">b05e4ba</a></td><td><code>build/make/Makefile.in (sagelib-clean): Remove generated .c and .cpp files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/271d42733078659c963550e07970440101a73ab7">271d427</a></td><td><code>src/setup.py: Fix sage.misc.sageinspect by setting Cython.Compiler.Options.embed_pos_in_docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6b2fc4f0f461b2f18aedf49ba238db7a7fdc8b3">f6b2fc4</a></td><td><code>src/sage/repl/interpreter.py: Fix a doctest for editable installs of sagelib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a0731aa00a6eace3b4c779b3399df898286d112">9a0731a</a></td><td><code>sage.interacs.debugger: Remove deprecated module</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5d47ce731d44f099d635172b34654481eb7e13b">e5d47ce</a></td><td><code>Merge branch 't/31390/remove_deprecated_sage_interacts_debugger' into t/31377/__configure___enable_editable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f8b61533287f67be77a4920f7ffceb5ebc39b0d">8f8b615</a></td><td><code>Merge branch 't/31377/__configure___enable_editable' into t/30371/public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599732.json:
```json
{
    "body": "<a id='comment:3'></a>\nMerged #31377, resolving edit conflicts.",
    "created_at": "2021-02-13T19:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599732",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Merged #31377, resolving edit conflicts.



---

archive/issue_comments_599733.json:
```json
{
    "body": "<a id='comment:4'></a>\nI don't know which problem you are trying to solve with the big try/except. I don't think reducing `ImportError` is the correct solution.\n\nIf you are trying to make `setup.py sdist` work when libs are missing, consider using the code from `build/pkgs/sagelib/src/setup.py` line 61",
    "created_at": "2021-02-13T19:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599733",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
I don't know which problem you are trying to solve with the big try/except. I don't think reducing `ImportError` is the correct solution.

If you are trying to make `setup.py sdist` work when libs are missing, consider using the code from `build/pkgs/sagelib/src/setup.py` line 61



---

archive/issue_comments_599734.json:
```json
{
    "body": "<a id='comment:375'></a>\nReplying to [mkoeppe](#comment%3A373):\n> Merged #31377, resolving edit conflicts.\n\n\nThanks, but this did revert some of my changes (in particular to setup.py)....",
    "created_at": "2021-02-13T19:29:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599734",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:375'></a>
Replying to [mkoeppe](#comment%3A373):
> Merged #31377, resolving edit conflicts.


Thanks, but this did revert some of my changes (in particular to setup.py)....



---

archive/issue_comments_599735.json:
```json
{
    "body": "<a id='comment:376'></a>\nReplying to [mkoeppe](#comment%3A374):\n> I don't know which problem you are trying to solve with the big try/except. I don't think reducing `ImportError` is the correct solution.\n> \n> If you are trying to make `setup.py sdist` work when libs are missing, consider using the code from `build/pkgs/sagelib/src/setup.py` line 61\n\n\nYes, that was my goal. Creating the virtual environment otherwise fails as Cython is not yet installed into it. The file you refer to doesn't seem to exist.",
    "created_at": "2021-02-13T19:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599735",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:376'></a>
Replying to [mkoeppe](#comment%3A374):
> I don't know which problem you are trying to solve with the big try/except. I don't think reducing `ImportError` is the correct solution.
> 
> If you are trying to make `setup.py sdist` work when libs are missing, consider using the code from `build/pkgs/sagelib/src/setup.py` line 61


Yes, that was my goal. Creating the virtual environment otherwise fails as Cython is not yet installed into it. The file you refer to doesn't seem to exist.



---

archive/issue_comments_599736.json:
```json
{
    "body": "**Changing commit** from \"[8f8b61533287f67be77a4920f7ffceb5ebc39b0d](https://github.com/sagemath/sagetrac-mirror/commit/8f8b61533287f67be77a4920f7ffceb5ebc39b0d)\" to \"[fec55234a00e46d023ad583f8c6284b970141ab0](https://github.com/sagemath/sagetrac-mirror/commit/fec55234a00e46d023ad583f8c6284b970141ab0)\".",
    "created_at": "2021-02-13T21:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599736",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8f8b61533287f67be77a4920f7ffceb5ebc39b0d](https://github.com/sagemath/sagetrac-mirror/commit/8f8b61533287f67be77a4920f7ffceb5ebc39b0d)" to "[fec55234a00e46d023ad583f8c6284b970141ab0](https://github.com/sagemath/sagetrac-mirror/commit/fec55234a00e46d023ad583f8c6284b970141ab0)".



---

archive/issue_comments_599737.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fec55234a00e46d023ad583f8c6284b970141ab0\">fec5523</a></td><td><code>Merge branch 't/31377/__configure___enable_editable' into t/30371/public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-02-13T21:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599737",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fec55234a00e46d023ad583f8c6284b970141ab0">fec5523</a></td><td><code>Merge branch 't/31377/__configure___enable_editable' into t/30371/public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599738.json:
```json
{
    "body": "<a id='comment:378'></a>\nReplying to [gh-tobiasdiez](#comment%3A375):\n> Replying to [mkoeppe](#comment%3A373):\n> > Merged #31377, resolving edit conflicts.\n\n> \n> Thanks, but this did revert some of my changes (in particular to setup.py)....\n\n\nSorry, my mistake. I've redone the merge now. Please take a look.",
    "created_at": "2021-02-13T21:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599738",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:378'></a>
Replying to [gh-tobiasdiez](#comment%3A375):
> Replying to [mkoeppe](#comment%3A373):
> > Merged #31377, resolving edit conflicts.

> 
> Thanks, but this did revert some of my changes (in particular to setup.py)....


Sorry, my mistake. I've redone the merge now. Please take a look.



---

archive/issue_comments_599739.json:
```json
{
    "body": "<a id='comment:379'></a>\nReplying to [gh-tobiasdiez](#comment%3A376):\n> Replying to [mkoeppe](#comment%3A374):\n> > I don't know which problem you are trying to solve with the big try/except. I don't think reducing `ImportError` is the correct solution.\n> > \n> > If you are trying to make `setup.py sdist` work when libs are missing, consider using the code from `build/pkgs/sagelib/src/setup.py` line 61\n\n> \n> Yes, that was my goal. Creating the virtual environment otherwise fails as Cython is not yet installed into it. The file you refer to doesn't seem to exist.\n\n\nThis file: https://git.sagemath.org/sage.git/tree/build/pkgs/sagelib/src/setup.py?id=fec55234a00e46d023ad583f8c6284b970141ab0",
    "created_at": "2021-02-13T21:09:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599739",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:379'></a>
Replying to [gh-tobiasdiez](#comment%3A376):
> Replying to [mkoeppe](#comment%3A374):
> > I don't know which problem you are trying to solve with the big try/except. I don't think reducing `ImportError` is the correct solution.
> > 
> > If you are trying to make `setup.py sdist` work when libs are missing, consider using the code from `build/pkgs/sagelib/src/setup.py` line 61

> 
> Yes, that was my goal. Creating the virtual environment otherwise fails as Cython is not yet installed into it. The file you refer to doesn't seem to exist.


This file: https://git.sagemath.org/sage.git/tree/build/pkgs/sagelib/src/setup.py?id=fec55234a00e46d023ad583f8c6284b970141ab0



---

archive/issue_comments_599740.json:
```json
{
    "body": "<a id='comment:0'></a>\ncomment 374?",
    "created_at": "2021-02-18T16:37:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599740",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
comment 374?



---

archive/issue_comments_599741.json:
```json
{
    "body": "<a id='comment:1'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599741",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_088673.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88673"
}
```



---

archive/issue_comments_599742.json:
```json
{
    "body": "<a id='comment:2'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599742",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_088674.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88674"
}
```



---

archive/issue_events_088675.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88675"
}
```



---

archive/issue_comments_599743.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2021-08-28T01:31:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599743",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_events_088676.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-28T01:31:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88676"
}
```



---

archive/issue_events_088677.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-28T01:31:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88677"
}
```



---

archive/issue_comments_599744.json:
```json
{
    "body": "**Changing commit** from \"[fec55234a00e46d023ad583f8c6284b970141ab0](https://github.com/sagemath/sagetrac-mirror/commit/fec55234a00e46d023ad583f8c6284b970141ab0)\" to \"[84b2dd396eb3cad818c3fb7893d38fcf8eec5031](https://github.com/sagemath/sagetrac-mirror/commit/84b2dd396eb3cad818c3fb7893d38fcf8eec5031)\".",
    "created_at": "2021-10-10T21:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599744",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fec55234a00e46d023ad583f8c6284b970141ab0](https://github.com/sagemath/sagetrac-mirror/commit/fec55234a00e46d023ad583f8c6284b970141ab0)" to "[84b2dd396eb3cad818c3fb7893d38fcf8eec5031](https://github.com/sagemath/sagetrac-mirror/commit/84b2dd396eb3cad818c3fb7893d38fcf8eec5031)".



---

archive/issue_comments_599745.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/84b2dd396eb3cad818c3fb7893d38fcf8eec5031\">84b2dd3</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-10-10T21:29:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599745",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/84b2dd396eb3cad818c3fb7893d38fcf8eec5031">84b2dd3</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599746.json:
```json
{
    "body": "**Changing commit** from \"[84b2dd396eb3cad818c3fb7893d38fcf8eec5031](https://github.com/sagemath/sagetrac-mirror/commit/84b2dd396eb3cad818c3fb7893d38fcf8eec5031)\" to \"[531811aebb493bce59dcfc09d250e317c2bf42bf](https://github.com/sagemath/sagetrac-mirror/commit/531811aebb493bce59dcfc09d250e317c2bf42bf)\".",
    "created_at": "2021-10-10T23:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[84b2dd396eb3cad818c3fb7893d38fcf8eec5031](https://github.com/sagemath/sagetrac-mirror/commit/84b2dd396eb3cad818c3fb7893d38fcf8eec5031)" to "[531811aebb493bce59dcfc09d250e317c2bf42bf](https://github.com/sagemath/sagetrac-mirror/commit/531811aebb493bce59dcfc09d250e317c2bf42bf)".



---

archive/issue_comments_599747.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f99a3b502608cf990a54c43362a8fb5a45c91fc\">8f99a3b</a></td><td><code>Code cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/531811aebb493bce59dcfc09d250e317c2bf42bf\">531811a</a></td><td><code>Detect sdist and egg_info, and don't require cython in this case</code></td></tr></table>\n",
    "created_at": "2021-10-10T23:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f99a3b502608cf990a54c43362a8fb5a45c91fc">8f99a3b</a></td><td><code>Code cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/531811aebb493bce59dcfc09d250e317c2bf42bf">531811a</a></td><td><code>Detect sdist and egg_info, and don't require cython in this case</code></td></tr></table>




---

archive/issue_comments_599748.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c56ab1698fe158dc741b6ec4cef7cc883836d835\">c56ab16</a></td><td><code>Install Cython manually</code></td></tr></table>\n",
    "created_at": "2021-10-11T00:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599748",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c56ab1698fe158dc741b6ec4cef7cc883836d835">c56ab16</a></td><td><code>Install Cython manually</code></td></tr></table>




---

archive/issue_comments_599749.json:
```json
{
    "body": "**Changing commit** from \"[531811aebb493bce59dcfc09d250e317c2bf42bf](https://github.com/sagemath/sagetrac-mirror/commit/531811aebb493bce59dcfc09d250e317c2bf42bf)\" to \"[c56ab1698fe158dc741b6ec4cef7cc883836d835](https://github.com/sagemath/sagetrac-mirror/commit/c56ab1698fe158dc741b6ec4cef7cc883836d835)\".",
    "created_at": "2021-10-11T00:10:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599749",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[531811aebb493bce59dcfc09d250e317c2bf42bf](https://github.com/sagemath/sagetrac-mirror/commit/531811aebb493bce59dcfc09d250e317c2bf42bf)" to "[c56ab1698fe158dc741b6ec4cef7cc883836d835](https://github.com/sagemath/sagetrac-mirror/commit/c56ab1698fe158dc741b6ec4cef7cc883836d835)".



---

archive/issue_comments_599750.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,6 +3,7 @@\n With this ticket, the following code works:\n \n ```\n+make build-local\n cd src\n mkdir .venv\n pipenv install\n``````\n",
    "created_at": "2021-10-11T08:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599750",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,6 +3,7 @@
 With this ticket, the following code works:
 
 ```
+make build-local
 cd src
 mkdir .venv
 pipenv install
``````




---

archive/issue_comments_599751.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,6 +3,7 @@\n With this ticket, the following code works:\n \n ```\n+./configure --enable-editable\n make build-local\n cd src\n mkdir .venv\n``````\n",
    "created_at": "2021-10-11T08:49:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599751",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,6 +3,7 @@
 With this ticket, the following code works:
 
 ```
+./configure --enable-editable
 make build-local
 cd src
 mkdir .venv
``````




---

archive/issue_comments_599752.json:
```json
{
    "body": "**Changing commit** from \"[c56ab1698fe158dc741b6ec4cef7cc883836d835](https://github.com/sagemath/sagetrac-mirror/commit/c56ab1698fe158dc741b6ec4cef7cc883836d835)\" to \"[29f5780478afe6612de6e50ff8371cc29403f94d](https://github.com/sagemath/sagetrac-mirror/commit/29f5780478afe6612de6e50ff8371cc29403f94d)\".",
    "created_at": "2021-10-11T10:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599752",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c56ab1698fe158dc741b6ec4cef7cc883836d835](https://github.com/sagemath/sagetrac-mirror/commit/c56ab1698fe158dc741b6ec4cef7cc883836d835)" to "[29f5780478afe6612de6e50ff8371cc29403f94d](https://github.com/sagemath/sagetrac-mirror/commit/29f5780478afe6612de6e50ff8371cc29403f94d)".



---

archive/issue_comments_599753.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c5ceae4c21d025adc54889c1001e01c180452d2\">6c5ceae</a></td><td><code>Also install cython for mac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29f5780478afe6612de6e50ff8371cc29403f94d\">29f5780</a></td><td><code>Update lock file</code></td></tr></table>\n",
    "created_at": "2021-10-11T10:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599753",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c5ceae4c21d025adc54889c1001e01c180452d2">6c5ceae</a></td><td><code>Also install cython for mac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29f5780478afe6612de6e50ff8371cc29403f94d">29f5780</a></td><td><code>Update lock file</code></td></tr></table>




---

archive/issue_comments_599754.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e07292b8111df3e724b56b021eb263a21b351886\">e07292b</a></td><td><code>Improve handling of fpylll</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/536fa27c5b54ecaa9884be03079dda75027a645f\">536fa27</a></td><td><code>Install dependencies from lock file</code></td></tr></table>\n",
    "created_at": "2021-10-11T11:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599754",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e07292b8111df3e724b56b021eb263a21b351886">e07292b</a></td><td><code>Improve handling of fpylll</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/536fa27c5b54ecaa9884be03079dda75027a645f">536fa27</a></td><td><code>Install dependencies from lock file</code></td></tr></table>




---

archive/issue_comments_599755.json:
```json
{
    "body": "**Changing commit** from \"[29f5780478afe6612de6e50ff8371cc29403f94d](https://github.com/sagemath/sagetrac-mirror/commit/29f5780478afe6612de6e50ff8371cc29403f94d)\" to \"[536fa27c5b54ecaa9884be03079dda75027a645f](https://github.com/sagemath/sagetrac-mirror/commit/536fa27c5b54ecaa9884be03079dda75027a645f)\".",
    "created_at": "2021-10-11T11:45:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599755",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[29f5780478afe6612de6e50ff8371cc29403f94d](https://github.com/sagemath/sagetrac-mirror/commit/29f5780478afe6612de6e50ff8371cc29403f94d)" to "[536fa27c5b54ecaa9884be03079dda75027a645f](https://github.com/sagemath/sagetrac-mirror/commit/536fa27c5b54ecaa9884be03079dda75027a645f)".



---

archive/issue_comments_599756.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,11 +3,13 @@\n With this ticket, the following code works:\n \n ```\n+./bootstrap\n ./configure --enable-editable\n make build-local\n cd src\n mkdir .venv\n-pipenv install\n+pipenv install --ignore-pipfile\n+pipenv run pip install fpylll==0.5.2dev --upgrade # The installation of the most recent version of fpylll might have failed above, so install it manually (the version to be installed depends on the version of fplll)\n pipenv run sage-runtests --all\n ```\n It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.\n``````\n",
    "created_at": "2021-10-11T11:49:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599756",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,11 +3,13 @@
 With this ticket, the following code works:
 
 ```
+./bootstrap
 ./configure --enable-editable
 make build-local
 cd src
 mkdir .venv
-pipenv install
+pipenv install --ignore-pipfile
+pipenv run pip install fpylll==0.5.2dev --upgrade # The installation of the most recent version of fpylll might have failed above, so install it manually (the version to be installed depends on the version of fplll)
 pipenv run sage-runtests --all
 ```
 It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.
``````




---

archive/issue_comments_599757.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -12,6 +12,7 @@\n pipenv run pip install fpylll==0.5.2dev --upgrade # The installation of the most recent version of fpylll might have failed above, so install it manually (the version to be installed depends on the version of fplll)\n pipenv run sage-runtests --all\n ```\n+Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.\n It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.\n Note: This procedure might not work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for Ubuntu 20.04 in WSL, and the github action for Ubuntu 20.10).\n \n``````\n",
    "created_at": "2021-10-11T12:13:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599757",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -12,6 +12,7 @@
 pipenv run pip install fpylll==0.5.2dev --upgrade # The installation of the most recent version of fpylll might have failed above, so install it manually (the version to be installed depends on the version of fplll)
 pipenv run sage-runtests --all
 ```
+Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.
 It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.
 Note: This procedure might not work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for Ubuntu 20.04 in WSL, and the github action for Ubuntu 20.10).
 
``````




---

archive/issue_comments_599758.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec89909cf8078eca0052eb07ac408f0cf87f4115\">ec89909</a></td><td><code>Use automatically generated pipfile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b88cba4dd65e2a7d398b0822adf2c074049f9910\">b88cba4</a></td><td><code>git-ignore generated files</code></td></tr></table>\n",
    "created_at": "2021-10-11T14:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599758",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec89909cf8078eca0052eb07ac408f0cf87f4115">ec89909</a></td><td><code>Use automatically generated pipfile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b88cba4dd65e2a7d398b0822adf2c074049f9910">b88cba4</a></td><td><code>git-ignore generated files</code></td></tr></table>




---

archive/issue_comments_599759.json:
```json
{
    "body": "**Changing commit** from \"[536fa27c5b54ecaa9884be03079dda75027a645f](https://github.com/sagemath/sagetrac-mirror/commit/536fa27c5b54ecaa9884be03079dda75027a645f)\" to \"[b88cba4dd65e2a7d398b0822adf2c074049f9910](https://github.com/sagemath/sagetrac-mirror/commit/b88cba4dd65e2a7d398b0822adf2c074049f9910)\".",
    "created_at": "2021-10-11T14:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599759",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[536fa27c5b54ecaa9884be03079dda75027a645f](https://github.com/sagemath/sagetrac-mirror/commit/536fa27c5b54ecaa9884be03079dda75027a645f)" to "[b88cba4dd65e2a7d398b0822adf2c074049f9910](https://github.com/sagemath/sagetrac-mirror/commit/b88cba4dd65e2a7d398b0822adf2c074049f9910)".



---

archive/issue_comments_599760.json:
```json
{
    "body": "**Changing commit** from \"[b88cba4dd65e2a7d398b0822adf2c074049f9910](https://github.com/sagemath/sagetrac-mirror/commit/b88cba4dd65e2a7d398b0822adf2c074049f9910)\" to \"[3e796c31b13425f16a71216ce8c299b8eda4ddad](https://github.com/sagemath/sagetrac-mirror/commit/3e796c31b13425f16a71216ce8c299b8eda4ddad)\".",
    "created_at": "2021-10-11T15:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599760",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b88cba4dd65e2a7d398b0822adf2c074049f9910](https://github.com/sagemath/sagetrac-mirror/commit/b88cba4dd65e2a7d398b0822adf2c074049f9910)" to "[3e796c31b13425f16a71216ce8c299b8eda4ddad](https://github.com/sagemath/sagetrac-mirror/commit/3e796c31b13425f16a71216ce8c299b8eda4ddad)".



---

archive/issue_comments_599761.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e796c31b13425f16a71216ce8c299b8eda4ddad\">3e796c3</a></td><td><code>Require new memory-allocator package</code></td></tr></table>\n",
    "created_at": "2021-10-11T15:11:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599761",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e796c31b13425f16a71216ce8c299b8eda4ddad">3e796c3</a></td><td><code>Require new memory-allocator package</code></td></tr></table>




---

archive/issue_comments_599762.json:
```json
{
    "body": "**Changing commit** from \"[3e796c31b13425f16a71216ce8c299b8eda4ddad](https://github.com/sagemath/sagetrac-mirror/commit/3e796c31b13425f16a71216ce8c299b8eda4ddad)\" to \"[e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89](https://github.com/sagemath/sagetrac-mirror/commit/e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89)\".",
    "created_at": "2021-10-11T17:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599762",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3e796c31b13425f16a71216ce8c299b8eda4ddad](https://github.com/sagemath/sagetrac-mirror/commit/3e796c31b13425f16a71216ce8c299b8eda4ddad)" to "[e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89](https://github.com/sagemath/sagetrac-mirror/commit/e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89)".



---

archive/issue_comments_599763.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38593f4201867106d3d87b6ff302871f8c11346a\">38593f4</a></td><td><code>Clarify wording in github action workflow</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89\">e9ac3ee</a></td><td><code>Remove unnecessary special treatment of fpylll and cython</code></td></tr></table>\n",
    "created_at": "2021-10-11T17:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599763",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38593f4201867106d3d87b6ff302871f8c11346a">38593f4</a></td><td><code>Clarify wording in github action workflow</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89">e9ac3ee</a></td><td><code>Remove unnecessary special treatment of fpylll and cython</code></td></tr></table>




---

archive/issue_events_088678.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-10-11T17:12:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88678"
}
```



---

archive/issue_events_088679.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2021-10-11T17:12:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88679"
}
```



---

archive/issue_comments_599764.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-10-11T17:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599764",
    "user": "https://github.com/tobiasdiez"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_599765.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,21 +9,18 @@\n cd src\n mkdir .venv\n pipenv install --ignore-pipfile\n-pipenv run pip install fpylll==0.5.2dev --upgrade # The installation of the most recent version of fpylll might have failed above, so install it manually (the version to be installed depends on the version of fplll)\n pipenv run sage-runtests --all\n ```\n Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.\n-It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.\n-Note: This procedure might not work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for Ubuntu 20.04 in WSL, and the github action for Ubuntu 20.10).\n+It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.\n \n The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace\n-Most tests are working, but for some reason after more or less exactly 2.5h of execution time the doctest run out of memory. This still needs investigation. #31341\n+Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution). Moreover, for some reason after more or less exactly 2.5h of execution time the doctest run out of memory. This still needs investigation. #31341\n \n TODO (as followup tickets):\n - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n - Consider moving package dependencies from pipfile to install_requires in `src/setup.py`. Let's discuss this as part of #30913.\n - Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is \"always include in version control\", see https://github.com/pypa/pipenv/issues/598.\n-- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.) Then fix MacOS github action.\n \n \n Previous tickets on in-place builds, editable installs:\n``````\n",
    "created_at": "2021-10-11T17:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599765",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,21 +9,18 @@
 cd src
 mkdir .venv
 pipenv install --ignore-pipfile
-pipenv run pip install fpylll==0.5.2dev --upgrade # The installation of the most recent version of fpylll might have failed above, so install it manually (the version to be installed depends on the version of fplll)
 pipenv run sage-runtests --all
 ```
 Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.
-It generates a virtual env in `src/.venv` that contains all necessary libraries, and an editable install of sage.
-Note: This procedure might not work out of the box, and a few manual steps are necessary to install the required libraries (see below for instructions for Ubuntu 20.04 in WSL, and the github action for Ubuntu 20.10).
+It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.
 
 The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace
-Most tests are working, but for some reason after more or less exactly 2.5h of execution time the doctest run out of memory. This still needs investigation. #31341
+Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution). Moreover, for some reason after more or less exactly 2.5h of execution time the doctest run out of memory. This still needs investigation. #31341
 
 TODO (as followup tickets):
 - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
 - Consider moving package dependencies from pipfile to install_requires in `src/setup.py`. Let's discuss this as part of #30913.
 - Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is "always include in version control", see https://github.com/pypa/pipenv/issues/598.
-- Investigate what needs to be installed on macOS to have a successful build, and add these steps to the github action. (I don't have a mac, so I'll not work on this.) Then fix MacOS github action.
 
 
 Previous tickets on in-place builds, editable installs:
``````




---

archive/issue_comments_599766.json:
```json
{
    "body": "<a id='comment:6'></a>\nI've finally found the time to merge the most recent version. Since most changes (in the build pipline and adding the pipfile etc) have been done already in previous tickets, this ticket now essentially amounts to adding a github action verifying that the setup works indeed. So ready for review again.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38593f4201867106d3d87b6ff302871f8c11346a\">38593f4</a></td><td><code>Clarify wording in github action workflow</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89\">e9ac3ee</a></td><td><code>Remove unnecessary special treatment of fpylll and cython</code></td></tr></table>\n",
    "created_at": "2021-10-11T17:12:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599766",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:6'></a>
I've finally found the time to merge the most recent version. Since most changes (in the build pipline and adding the pipfile etc) have been done already in previous tickets, this ticket now essentially amounts to adding a github action verifying that the setup works indeed. So ready for review again.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38593f4201867106d3d87b6ff302871f8c11346a">38593f4</a></td><td><code>Clarify wording in github action workflow</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89">e9ac3ee</a></td><td><code>Remove unnecessary special treatment of fpylll and cython</code></td></tr></table>




---

archive/issue_comments_599767.json:
```json
{
    "body": "**Changing commit** from \"[e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89](https://github.com/sagemath/sagetrac-mirror/commit/e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89)\" to \"[4b7eaa4adc898e8f9b2bfd727e31232f89e99783](https://github.com/sagemath/sagetrac-mirror/commit/4b7eaa4adc898e8f9b2bfd727e31232f89e99783)\".",
    "created_at": "2021-10-11T17:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599767",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89](https://github.com/sagemath/sagetrac-mirror/commit/e9ac3ee9a49c71f6cf03cd6e8823d9c79ca51d89)" to "[4b7eaa4adc898e8f9b2bfd727e31232f89e99783](https://github.com/sagemath/sagetrac-mirror/commit/4b7eaa4adc898e8f9b2bfd727e31232f89e99783)".



---

archive/issue_comments_599768.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b7eaa4adc898e8f9b2bfd727e31232f89e99783\">4b7eaa4</a></td><td><code>Improve workflow step name</code></td></tr></table>\n",
    "created_at": "2021-10-11T17:15:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599768",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b7eaa4adc898e8f9b2bfd727e31232f89e99783">4b7eaa4</a></td><td><code>Improve workflow step name</code></td></tr></table>




---

archive/issue_comments_599769.json:
```json
{
    "body": "<a id='comment:8'></a>\nThe `memory_allocator` dep has been added in #32608",
    "created_at": "2021-10-11T17:20:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599769",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
The `memory_allocator` dep has been added in #32608



---

archive/issue_comments_599770.json:
```json
{
    "body": "<a id='comment:9'></a>\nSeparate tickets please for:\n- the language=c++ changes\n- the setup.py change",
    "created_at": "2021-10-11T17:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599770",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Separate tickets please for:
- the language=c++ changes
- the setup.py change



---

archive/issue_comments_599771.json:
```json
{
    "body": "<a id='comment:400'></a>\nReplying to [mkoeppe](#comment%3A399):\n> Separate tickets please for:\n> - the language=c++ changes\n\n\n(... if these changes are actually needed)",
    "created_at": "2021-10-11T22:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599771",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:400'></a>
Replying to [mkoeppe](#comment%3A399):
> Separate tickets please for:
> - the language=c++ changes


(... if these changes are actually needed)



---

archive/issue_comments_599772.json:
```json
{
    "body": "<a id='comment:401'></a>\nReplying to [mkoeppe](#comment%3A399):\n> Separate tickets please for:\n> - the setup.py change\n \ncould go into #32672",
    "created_at": "2021-10-12T06:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599772",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:401'></a>
Replying to [mkoeppe](#comment%3A399):
> Separate tickets please for:
> - the setup.py change
 
could go into #32672



---

archive/issue_comments_599773.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n make build-local\n cd src\n mkdir .venv\n-pipenv install --ignore-pipfile\n+pipenv install --dev --ignore-pipfile\n pipenv run sage-runtests --all\n ```\n Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.\n``````\n",
    "created_at": "2021-10-12T10:21:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599773",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 make build-local
 cd src
 mkdir .venv
-pipenv install --ignore-pipfile
+pipenv install --dev --ignore-pipfile
 pipenv run sage-runtests --all
 ```
 Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.
``````




---

archive/issue_comments_599774.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.\n \n The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace\n-Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution). Moreover, for some reason after more or less exactly 2.5h of execution time the doctest run out of memory. This still needs investigation. #31341\n+Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution).\n \n TODO (as followup tickets):\n - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n``````\n",
    "created_at": "2021-10-12T10:32:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599774",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.
 
 The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace
-Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution). Moreover, for some reason after more or less exactly 2.5h of execution time the doctest run out of memory. This still needs investigation. #31341
+Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution).
 
 TODO (as followup tickets):
 - Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
``````




---

archive/issue_comments_599775.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,7 +18,7 @@\n Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution).\n \n TODO (as followup tickets):\n-- Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n+- Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n - Consider moving package dependencies from pipfile to install_requires in `src/setup.py`. Let's discuss this as part of #30913.\n - Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is \"always include in version control\", see https://github.com/pypa/pipenv/issues/598.\n \n``````\n",
    "created_at": "2021-10-12T10:35:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599775",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,7 +18,7 @@
 Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution).
 
 TODO (as followup tickets):
-- Add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
+- Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
 - Consider moving package dependencies from pipfile to install_requires in `src/setup.py`. Let's discuss this as part of #30913.
 - Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is "always include in version control", see https://github.com/pypa/pipenv/issues/598.
 
``````




---

archive/issue_comments_599776.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb0646078dfb44ab71cf530b306c427c9f4540ff\">cb06460</a></td><td><code>Try to fix python version on mac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d39970b71a49ba150a22916e62aa49d9750c5b2\">2d39970</a></td><td><code>Remove memory print as this is fixed now</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/380eec8f2284f01786c3ff9dd07f8525b031a14d\">380eec8</a></td><td><code>Improve documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5afbd6246894665473d9b5c85c8b7f2ba9144f54\">5afbd62</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e183209eebd9d141b9a3a91af467e06f54711754\">e183209</a></td><td><code>Remove memory_allocator from pipfile (no longer needed)</code></td></tr></table>\n",
    "created_at": "2021-10-12T10:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599776",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb0646078dfb44ab71cf530b306c427c9f4540ff">cb06460</a></td><td><code>Try to fix python version on mac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d39970b71a49ba150a22916e62aa49d9750c5b2">2d39970</a></td><td><code>Remove memory print as this is fixed now</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/380eec8f2284f01786c3ff9dd07f8525b031a14d">380eec8</a></td><td><code>Improve documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5afbd6246894665473d9b5c85c8b7f2ba9144f54">5afbd62</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e183209eebd9d141b9a3a91af467e06f54711754">e183209</a></td><td><code>Remove memory_allocator from pipfile (no longer needed)</code></td></tr></table>




---

archive/issue_comments_599777.json:
```json
{
    "body": "**Changing commit** from \"[4b7eaa4adc898e8f9b2bfd727e31232f89e99783](https://github.com/sagemath/sagetrac-mirror/commit/4b7eaa4adc898e8f9b2bfd727e31232f89e99783)\" to \"[e183209eebd9d141b9a3a91af467e06f54711754](https://github.com/sagemath/sagetrac-mirror/commit/e183209eebd9d141b9a3a91af467e06f54711754)\".",
    "created_at": "2021-10-12T10:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599777",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4b7eaa4adc898e8f9b2bfd727e31232f89e99783](https://github.com/sagemath/sagetrac-mirror/commit/4b7eaa4adc898e8f9b2bfd727e31232f89e99783)" to "[e183209eebd9d141b9a3a91af467e06f54711754](https://github.com/sagemath/sagetrac-mirror/commit/e183209eebd9d141b9a3a91af467e06f54711754)".



---

archive/issue_comments_599778.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb5a7cf25938e8ff5ff3c78cad6c81e225e4f58c\">fb5a7cf</a></td><td><code>Remove lang=c++ (which might no longer be needed)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6fde5eef8edc893643513d5f99a29a2b720556c\">c6fde5e</a></td><td><code>Add docs on how to update the editable install after changes to cython files.</code></td></tr></table>\n",
    "created_at": "2021-10-12T10:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb5a7cf25938e8ff5ff3c78cad6c81e225e4f58c">fb5a7cf</a></td><td><code>Remove lang=c++ (which might no longer be needed)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6fde5eef8edc893643513d5f99a29a2b720556c">c6fde5e</a></td><td><code>Add docs on how to update the editable install after changes to cython files.</code></td></tr></table>




---

archive/issue_comments_599779.json:
```json
{
    "body": "**Changing commit** from \"[e183209eebd9d141b9a3a91af467e06f54711754](https://github.com/sagemath/sagetrac-mirror/commit/e183209eebd9d141b9a3a91af467e06f54711754)\" to \"[c6fde5eef8edc893643513d5f99a29a2b720556c](https://github.com/sagemath/sagetrac-mirror/commit/c6fde5eef8edc893643513d5f99a29a2b720556c)\".",
    "created_at": "2021-10-12T10:55:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599779",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e183209eebd9d141b9a3a91af467e06f54711754](https://github.com/sagemath/sagetrac-mirror/commit/e183209eebd9d141b9a3a91af467e06f54711754)" to "[c6fde5eef8edc893643513d5f99a29a2b720556c](https://github.com/sagemath/sagetrac-mirror/commit/c6fde5eef8edc893643513d5f99a29a2b720556c)".



---

archive/issue_comments_599780.json:
```json
{
    "body": "<a id='comment:407'></a>\nReplying to [mkoeppe](#comment%3A399):\n> Separate tickets please for:\n> - the language=c++ changes\n> - the setup.py change\n\n\nOkay, I've removed the c++ changes as they seem to be no longer needed and opened #32673 for the changes to setup.py.",
    "created_at": "2021-10-12T11:03:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599780",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:407'></a>
Replying to [mkoeppe](#comment%3A399):
> Separate tickets please for:
> - the language=c++ changes
> - the setup.py change


Okay, I've removed the c++ changes as they seem to be no longer needed and opened #32673 for the changes to setup.py.



---

archive/issue_comments_599781.json:
```json
{
    "body": "<a id='comment:8'></a>\n\n```\n+        # Fix path to R, since otherwise sage's r is used\n+        R_HOME: /usr/local/Cellar/r/4.0.3_2/lib/R\n```\nIs this needed, and if so, do we need this something like for a normal build too?",
    "created_at": "2021-10-12T23:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599781",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>

```
+        # Fix path to R, since otherwise sage's r is used
+        R_HOME: /usr/local/Cellar/r/4.0.3_2/lib/R
```
Is this needed, and if so, do we need this something like for a normal build too?



---

archive/issue_comments_599782.json:
```json
{
    "body": "<a id='comment:9'></a>\n\n```\n+        export SAGE_SHARE=$GITHUB_WORKSPACE/.tox/local-homebrew-macos-usrlocal/local/share\n```\nThis line (in both workflow scripts) shouldn't be needed.\n\nI also don't understand the other environment exports in the workflow script - why not invoke the `sage-env` script that sets up the correct environment?",
    "created_at": "2021-10-12T23:38:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599782",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>

```
+        export SAGE_SHARE=$GITHUB_WORKSPACE/.tox/local-homebrew-macos-usrlocal/local/share
```
This line (in both workflow scripts) shouldn't be needed.

I also don't understand the other environment exports in the workflow script - why not invoke the `sage-env` script that sets up the correct environment?



---

archive/issue_comments_599783.json:
```json
{
    "body": "<a id='comment:0'></a>\nAlso the documentation on Pipenv added in `src/doc/en/developer/coding_basics.rst` is not sufficiently specific about the steps needed before pipenv is installed and used.",
    "created_at": "2021-10-12T23:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599783",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:0'></a>
Also the documentation on Pipenv added in `src/doc/en/developer/coding_basics.rst` is not sufficiently specific about the steps needed before pipenv is installed and used.



---

archive/issue_comments_599784.json:
```json
{
    "body": "<a id='comment:1'></a>\nAnd finally, checking in the `Pipfile.lock` really does not fit into the Sage development workflow -- it will always be out of date and will lead to merge conflicts. We really should make do with just a `Pipfile` (generated from `Pipfile.m4`) from the versions declared in `build/pkgs`.",
    "created_at": "2021-10-12T23:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599784",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
And finally, checking in the `Pipfile.lock` really does not fit into the Sage development workflow -- it will always be out of date and will lead to merge conflicts. We really should make do with just a `Pipfile` (generated from `Pipfile.m4`) from the versions declared in `build/pkgs`.



---

archive/issue_comments_599785.json:
```json
{
    "body": "<a id='comment:412'></a>\nReplying to [mkoeppe](#comment%3A408):\n> \n> ```\n> +        # Fix path to R, since otherwise sage's r is used\n> +        R_HOME: /usr/local/Cellar/r/4.0.3_2/lib/R\n> ```\n> Is this needed, and if so, do we need this something like for a normal build too?\n\n\nOtherwise the pip-install of rpy2 fails with\n\n```\nCollecting rpy2<3.4,>=3.3\n  Downloading rpy2-3.3.6.tar.gz (179 kB)\n    Running command python setup.py egg_info\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pip-install-m6wdy35r/rpy2_0c800ed9b8e34449aeee849f526a409b/setup.py\", line 115, in <module>\n        c_extension_status = get_r_c_extension_status()\n      File \"/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pip-install-m6wdy35r/rpy2_0c800ed9b8e34449aeee849f526a409b/setup.py\", line 99, in get_r_c_extension_status\n        *situation.get_r_flags(r_home, '--ldflags')\n      File \"/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pip-install-m6wdy35r/rpy2_0c800ed9b8e34449aeee849f526a409b/rpy2/situation.py\", line 209, in get_r_flags\n        _get_r_cmd_config(r_home, flags,\n      File \"/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pip-install-m6wdy35r/rpy2_0c800ed9b8e34449aeee849f526a409b/rpy2/situation.py\", line 177, in _get_r_cmd_config\n        output = subprocess.check_output(\n      File \"/Users/runner/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/subprocess.py\", line 415, in check_output\n        return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\n      File \"/Users/runner/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/subprocess.py\", line 493, in run\n        with Popen(*popenargs, **kwargs) as process:\n      File \"/Users/runner/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/subprocess.py\", line 858, in __init__\n        self._execute_child(args, executable, preexec_fn, close_fds,\n      File \"/Users/runner/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/subprocess.py\", line 1704, in _execute_child\n        raise child_exception_type(errno_num, err_msg, err_filename)\n    FileNotFoundError: [Errno 2] No such file or directory: '/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-usrlocal/local/var/tmp/sage/build/r-3.6.3/src/bin/R'\n```",
    "created_at": "2021-10-13T08:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599785",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:412'></a>
Replying to [mkoeppe](#comment%3A408):
> 
> ```
> +        # Fix path to R, since otherwise sage's r is used
> +        R_HOME: /usr/local/Cellar/r/4.0.3_2/lib/R
> ```
> Is this needed, and if so, do we need this something like for a normal build too?


Otherwise the pip-install of rpy2 fails with

```
Collecting rpy2<3.4,>=3.3
  Downloading rpy2-3.3.6.tar.gz (179 kB)
    Running command python setup.py egg_info
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pip-install-m6wdy35r/rpy2_0c800ed9b8e34449aeee849f526a409b/setup.py", line 115, in <module>
        c_extension_status = get_r_c_extension_status()
      File "/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pip-install-m6wdy35r/rpy2_0c800ed9b8e34449aeee849f526a409b/setup.py", line 99, in get_r_c_extension_status
        *situation.get_r_flags(r_home, '--ldflags')
      File "/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pip-install-m6wdy35r/rpy2_0c800ed9b8e34449aeee849f526a409b/rpy2/situation.py", line 209, in get_r_flags
        _get_r_cmd_config(r_home, flags,
      File "/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pip-install-m6wdy35r/rpy2_0c800ed9b8e34449aeee849f526a409b/rpy2/situation.py", line 177, in _get_r_cmd_config
        output = subprocess.check_output(
      File "/Users/runner/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/subprocess.py", line 415, in check_output
        return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
      File "/Users/runner/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/subprocess.py", line 493, in run
        with Popen(*popenargs, **kwargs) as process:
      File "/Users/runner/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/subprocess.py", line 858, in __init__
        self._execute_child(args, executable, preexec_fn, close_fds,
      File "/Users/runner/hostedtoolcache/Python/3.8.12/x64/lib/python3.8/subprocess.py", line 1704, in _execute_child
        raise child_exception_type(errno_num, err_msg, err_filename)
    FileNotFoundError: [Errno 2] No such file or directory: '/Users/runner/work/sagetrac-mirror/sagetrac-mirror/.tox/local-homebrew-macos-usrlocal/local/var/tmp/sage/build/r-3.6.3/src/bin/R'
```



---

archive/issue_comments_599786.json:
```json
{
    "body": "<a id='comment:413'></a>\nReplying to [mkoeppe](#comment%3A409):\n> I also don't understand the other environment exports in the workflow script - why not invoke the `sage-env` script that sets up the correct environment?\n\n\nI was not aware of the sage-env script. How does one uses it to set the environment for the following steps and replace the manual exports I've added? I couldn't find any documentation about that script.",
    "created_at": "2021-10-13T08:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599786",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:413'></a>
Replying to [mkoeppe](#comment%3A409):
> I also don't understand the other environment exports in the workflow script - why not invoke the `sage-env` script that sets up the correct environment?


I was not aware of the sage-env script. How does one uses it to set the environment for the following steps and replace the manual exports I've added? I couldn't find any documentation about that script.



---

archive/issue_comments_599787.json:
```json
{
    "body": "<a id='comment:414'></a>\nReplying to [mkoeppe](#comment%3A410):\n> Also the documentation on Pipenv added in `src/doc/en/developer/coding_basics.rst` is not sufficiently specific about the steps needed before pipenv is installed and used.\n\n\nWhat do you mean concretely? Please also note that the documentation about venv should be improved in general, see #31342.",
    "created_at": "2021-10-13T08:45:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599787",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:414'></a>
Replying to [mkoeppe](#comment%3A410):
> Also the documentation on Pipenv added in `src/doc/en/developer/coding_basics.rst` is not sufficiently specific about the steps needed before pipenv is installed and used.


What do you mean concretely? Please also note that the documentation about venv should be improved in general, see #31342.



---

archive/issue_comments_599788.json:
```json
{
    "body": "<a id='comment:415'></a>\nReplying to [mkoeppe](#comment%3A411):\n> And finally, checking in the `Pipfile.lock` really does not fit into the Sage development workflow -- it will always be out of date and will lead to merge conflicts. We really should make do with just a `Pipfile` (generated from `Pipfile.m4`) from the versions declared in `build/pkgs`.\n\n\nI agree that it's somewhat suboptimal to have the version information of some packages specified in the sage distribution and in the pipenv lock file. However, the idea behind using pipenv is to provide an alternative way to quickly create a python environment for the development (and maybe at some point distribution) of sage. Thus such a duplication is needed to some degree for now. The point of the lock file is also to ensure that the python environment is the same for everyone (which makes it easier to reproduce issues and test failures etc) and more importantly that the builds in the github action are deterministic. Finally, in can be easily updated by running `pipenv lock` so it's not a lot of overhead. Please also note that it doesn't need to be updated every time a sage dependency is updated since pipenv uses the `install_requires` information to determine the admissible versions. I would suggest to run `pipenv lock` after every release for now and see how this goes.\n\nMoreover, the lock file is required for now as some of the packages (pplpy for example) need cython and other packages installed already on sdist and egg_info. This makes setting up the pipenv from scratch rather hard, since you first need to create a new virtual environment, then install those dependencies and only then run pipenv install. These problems don't occur if you use the lock file (and subsequently `pipenv lock`).\n\nAnyway, because there are pros and cons for each approach I would suggest to see how it goes with the lock file committed (as strongly recommended by pipenv). If it turns out that the disadvantages overweight we can always remove it later again.",
    "created_at": "2021-10-13T09:08:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599788",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:415'></a>
Replying to [mkoeppe](#comment%3A411):
> And finally, checking in the `Pipfile.lock` really does not fit into the Sage development workflow -- it will always be out of date and will lead to merge conflicts. We really should make do with just a `Pipfile` (generated from `Pipfile.m4`) from the versions declared in `build/pkgs`.


I agree that it's somewhat suboptimal to have the version information of some packages specified in the sage distribution and in the pipenv lock file. However, the idea behind using pipenv is to provide an alternative way to quickly create a python environment for the development (and maybe at some point distribution) of sage. Thus such a duplication is needed to some degree for now. The point of the lock file is also to ensure that the python environment is the same for everyone (which makes it easier to reproduce issues and test failures etc) and more importantly that the builds in the github action are deterministic. Finally, in can be easily updated by running `pipenv lock` so it's not a lot of overhead. Please also note that it doesn't need to be updated every time a sage dependency is updated since pipenv uses the `install_requires` information to determine the admissible versions. I would suggest to run `pipenv lock` after every release for now and see how this goes.

Moreover, the lock file is required for now as some of the packages (pplpy for example) need cython and other packages installed already on sdist and egg_info. This makes setting up the pipenv from scratch rather hard, since you first need to create a new virtual environment, then install those dependencies and only then run pipenv install. These problems don't occur if you use the lock file (and subsequently `pipenv lock`).

Anyway, because there are pros and cons for each approach I would suggest to see how it goes with the lock file committed (as strongly recommended by pipenv). If it turns out that the disadvantages overweight we can always remove it later again.



---

archive/issue_comments_599789.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6601db6bec2b9a54c20532e8530475a37d7aabab\">6601db6</a></td><td><code>Fix path to R</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f40976c9a3d18bd2601366ae48cd42ebf257e750\">f40976c</a></td><td><code>Don't need to generate pipfile since it's static anyway</code></td></tr></table>\n",
    "created_at": "2021-10-13T09:15:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599789",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6601db6bec2b9a54c20532e8530475a37d7aabab">6601db6</a></td><td><code>Fix path to R</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f40976c9a3d18bd2601366ae48cd42ebf257e750">f40976c</a></td><td><code>Don't need to generate pipfile since it's static anyway</code></td></tr></table>




---

archive/issue_comments_599790.json:
```json
{
    "body": "**Changing commit** from \"[c6fde5eef8edc893643513d5f99a29a2b720556c](https://github.com/sagemath/sagetrac-mirror/commit/c6fde5eef8edc893643513d5f99a29a2b720556c)\" to \"[f40976c9a3d18bd2601366ae48cd42ebf257e750](https://github.com/sagemath/sagetrac-mirror/commit/f40976c9a3d18bd2601366ae48cd42ebf257e750)\".",
    "created_at": "2021-10-13T09:15:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599790",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c6fde5eef8edc893643513d5f99a29a2b720556c](https://github.com/sagemath/sagetrac-mirror/commit/c6fde5eef8edc893643513d5f99a29a2b720556c)" to "[f40976c9a3d18bd2601366ae48cd42ebf257e750](https://github.com/sagemath/sagetrac-mirror/commit/f40976c9a3d18bd2601366ae48cd42ebf257e750)".



---

archive/issue_events_088680.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "rename": {
        "from": "In-place (editable) installs of sagelib in a venv",
        "to": "Use pipenv to create venv for development"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88680"
}
```



---

archive/issue_comments_599791.json:
```json
{
    "body": "<a id='comment:7'></a>\nRename because the ticket is now more about pipenv than editable installs.",
    "created_at": "2021-10-13T09:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599791",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>
Rename because the ticket is now more about pipenv than editable installs.



---

archive/issue_comments_599792.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -19,7 +19,6 @@\n \n TODO (as followup tickets):\n - Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n-- Consider moving package dependencies from pipfile to install_requires in `src/setup.py`. Let's discuss this as part of #30913.\n - Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is \"always include in version control\", see https://github.com/pypa/pipenv/issues/598.\n \n \n``````\n",
    "created_at": "2021-10-13T09:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599792",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -19,7 +19,6 @@
 
 TODO (as followup tickets):
 - Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
-- Consider moving package dependencies from pipfile to install_requires in `src/setup.py`. Let's discuss this as part of #30913.
 - Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is "always include in version control", see https://github.com/pypa/pipenv/issues/598.
 
 
``````




---

archive/issue_comments_599793.json:
```json
{
    "body": "<a id='comment:418'></a>\nReplying to [gh-tobiasdiez](#comment%3A414):\n> Replying to [mkoeppe](#comment%3A410):\n> > Also the documentation on Pipenv added in `src/doc/en/developer/coding_basics.rst` is not sufficiently specific about the steps needed before pipenv is installed and used.\n\n> \n> What do you mean concretely? \n\n\nI'd say start by integrating the ticket description (which has some step by step instructions) into this section of the documentation. (Perhaps best to shorten the ticket description, referring to the added documentation.)\n\n> Please also note that the documentation about venv should be improved in general, see #31342. \n\nYes, that's true",
    "created_at": "2021-10-13T16:36:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599793",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:418'></a>
Replying to [gh-tobiasdiez](#comment%3A414):
> Replying to [mkoeppe](#comment%3A410):
> > Also the documentation on Pipenv added in `src/doc/en/developer/coding_basics.rst` is not sufficiently specific about the steps needed before pipenv is installed and used.

> 
> What do you mean concretely? 


I'd say start by integrating the ticket description (which has some step by step instructions) into this section of the documentation. (Perhaps best to shorten the ticket description, referring to the added documentation.)

> Please also note that the documentation about venv should be improved in general, see #31342. 

Yes, that's true



---

archive/issue_comments_599794.json:
```json
{
    "body": "<a id='comment:419'></a>\nReplying to [gh-tobiasdiez](#comment%3A415):\n> ... can be easily updated by running `pipenv lock` so it's not a lot of overhead. Please also note that it doesn't need to be updated every time a sage dependency is updated since pipenv uses the `install_requires` information to determine the admissible versions. I would suggest to run `pipenv lock` after every release for now and see how this goes.\n\n\nCould you add the precise process to the documentation please? This would be a task for the release manager, who would need to be briefed about this in detail",
    "created_at": "2021-10-13T16:38:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599794",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:419'></a>
Replying to [gh-tobiasdiez](#comment%3A415):
> ... can be easily updated by running `pipenv lock` so it's not a lot of overhead. Please also note that it doesn't need to be updated every time a sage dependency is updated since pipenv uses the `install_requires` information to determine the admissible versions. I would suggest to run `pipenv lock` after every release for now and see how this goes.


Could you add the precise process to the documentation please? This would be a task for the release manager, who would need to be briefed about this in detail



---

archive/issue_comments_599795.json:
```json
{
    "body": "<a id='comment:420'></a>\nReplying to [gh-tobiasdiez](#comment%3A413):\n> Replying to [mkoeppe](#comment%3A409):\n> > I also don't understand the other environment exports in the workflow script - why not invoke the `sage-env` script that sets up the correct environment?\n\n> \n> I was not aware of the sage-env script. How does one uses it to set the environment for the following steps and replace the manual exports I've added? I couldn't find any documentation about that script.\n\n\nThe top of the file (`src/bin/sage-env`) explains how to use it",
    "created_at": "2021-10-13T16:40:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599795",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:420'></a>
Replying to [gh-tobiasdiez](#comment%3A413):
> Replying to [mkoeppe](#comment%3A409):
> > I also don't understand the other environment exports in the workflow script - why not invoke the `sage-env` script that sets up the correct environment?

> 
> I was not aware of the sage-env script. How does one uses it to set the environment for the following steps and replace the manual exports I've added? I couldn't find any documentation about that script.


The top of the file (`src/bin/sage-env`) explains how to use it



---

archive/issue_comments_599796.json:
```json
{
    "body": "<a id='comment:421'></a>\nReplying to [mkoeppe](#comment%3A418):\n> I'd say start by integrating the ticket description (which has some step by step instructions) into this section of the documentation. (Perhaps best to shorten the ticket description, referring to the added documentation.)\n\n\n(However, the `tox -e local-sudo-standard build-local` shouldn't go into the documentation because we do not want to advertise this as a build/provisioning tool; it is strictly meant for portability testing.)",
    "created_at": "2021-10-13T16:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599796",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:421'></a>
Replying to [mkoeppe](#comment%3A418):
> I'd say start by integrating the ticket description (which has some step by step instructions) into this section of the documentation. (Perhaps best to shorten the ticket description, referring to the added documentation.)


(However, the `tox -e local-sudo-standard build-local` shouldn't go into the documentation because we do not want to advertise this as a build/provisioning tool; it is strictly meant for portability testing.)



---

archive/issue_comments_599797.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d\">cf832ca</a></td><td><code>Try to find out why r doesn't work on mac</code></td></tr></table>\n",
    "created_at": "2021-10-14T00:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599797",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d">cf832ca</a></td><td><code>Try to find out why r doesn't work on mac</code></td></tr></table>




---

archive/issue_comments_599798.json:
```json
{
    "body": "**Changing commit** from \"[f40976c9a3d18bd2601366ae48cd42ebf257e750](https://github.com/sagemath/sagetrac-mirror/commit/f40976c9a3d18bd2601366ae48cd42ebf257e750)\" to \"[cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d](https://github.com/sagemath/sagetrac-mirror/commit/cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d)\".",
    "created_at": "2021-10-14T00:01:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599798",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f40976c9a3d18bd2601366ae48cd42ebf257e750](https://github.com/sagemath/sagetrac-mirror/commit/f40976c9a3d18bd2601366ae48cd42ebf257e750)" to "[cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d](https://github.com/sagemath/sagetrac-mirror/commit/cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d)".



---

archive/issue_comments_599799.json:
```json
{
    "body": "**Changing commit** from \"[cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d](https://github.com/sagemath/sagetrac-mirror/commit/cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d)\" to \"[605311ed1b3603b204b71c96cdd5cf8f81b54904](https://github.com/sagemath/sagetrac-mirror/commit/605311ed1b3603b204b71c96cdd5cf8f81b54904)\".",
    "created_at": "2021-10-14T08:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d](https://github.com/sagemath/sagetrac-mirror/commit/cf832ca3f0132f2b87bf4c4d1c49ccd17a3dc80d)" to "[605311ed1b3603b204b71c96cdd5cf8f81b54904](https://github.com/sagemath/sagetrac-mirror/commit/605311ed1b3603b204b71c96cdd5cf8f81b54904)".



---

archive/issue_comments_599800.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/605311ed1b3603b204b71c96cdd5cf8f81b54904\">605311e</a></td><td><code>Try to fix r again</code></td></tr></table>\n",
    "created_at": "2021-10-14T08:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599800",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/605311ed1b3603b204b71c96cdd5cf8f81b54904">605311e</a></td><td><code>Try to fix r again</code></td></tr></table>




---

archive/issue_comments_599801.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ca719c03038c3c41e5f3b45de6ad396737f3934\">4ca719c</a></td><td><code>Try to fix some doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae26a5f3549413bdc877ac325b52f4faee31b12f\">ae26a5f</a></td><td><code>Remove r testing code</code></td></tr></table>\n",
    "created_at": "2021-10-14T10:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599801",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ca719c03038c3c41e5f3b45de6ad396737f3934">4ca719c</a></td><td><code>Try to fix some doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae26a5f3549413bdc877ac325b52f4faee31b12f">ae26a5f</a></td><td><code>Remove r testing code</code></td></tr></table>




---

archive/issue_comments_599802.json:
```json
{
    "body": "**Changing commit** from \"[605311ed1b3603b204b71c96cdd5cf8f81b54904](https://github.com/sagemath/sagetrac-mirror/commit/605311ed1b3603b204b71c96cdd5cf8f81b54904)\" to \"[ae26a5f3549413bdc877ac325b52f4faee31b12f](https://github.com/sagemath/sagetrac-mirror/commit/ae26a5f3549413bdc877ac325b52f4faee31b12f)\".",
    "created_at": "2021-10-14T10:30:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599802",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[605311ed1b3603b204b71c96cdd5cf8f81b54904](https://github.com/sagemath/sagetrac-mirror/commit/605311ed1b3603b204b71c96cdd5cf8f81b54904)" to "[ae26a5f3549413bdc877ac325b52f4faee31b12f](https://github.com/sagemath/sagetrac-mirror/commit/ae26a5f3549413bdc877ac325b52f4faee31b12f)".



---

archive/issue_comments_599803.json:
```json
{
    "body": "**Changing commit** from \"[ae26a5f3549413bdc877ac325b52f4faee31b12f](https://github.com/sagemath/sagetrac-mirror/commit/ae26a5f3549413bdc877ac325b52f4faee31b12f)\" to \"[4b7ca86998ec6cf2122101e9050861865ee7da26](https://github.com/sagemath/sagetrac-mirror/commit/4b7ca86998ec6cf2122101e9050861865ee7da26)\".",
    "created_at": "2021-10-14T10:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599803",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ae26a5f3549413bdc877ac325b52f4faee31b12f](https://github.com/sagemath/sagetrac-mirror/commit/ae26a5f3549413bdc877ac325b52f4faee31b12f)" to "[4b7ca86998ec6cf2122101e9050861865ee7da26](https://github.com/sagemath/sagetrac-mirror/commit/4b7ca86998ec6cf2122101e9050861865ee7da26)".



---

archive/issue_comments_599804.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b7ca86998ec6cf2122101e9050861865ee7da26\">4b7ca86</a></td><td><code>Remove sage share export</code></td></tr></table>\n",
    "created_at": "2021-10-14T10:37:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599804",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b7ca86998ec6cf2122101e9050861865ee7da26">4b7ca86</a></td><td><code>Remove sage share export</code></td></tr></table>




---

archive/issue_comments_599805.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c2c2c92c1457418a722198e7eff5a93a2c8d321\">6c2c2c9</a></td><td><code>Add sphinx-autobuild as dev package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/853ee59214497b4173de2b13050026676bf85279\">853ee59</a></td><td><code>Expand documentation</code></td></tr></table>\n",
    "created_at": "2021-10-14T11:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599805",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c2c2c92c1457418a722198e7eff5a93a2c8d321">6c2c2c9</a></td><td><code>Add sphinx-autobuild as dev package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/853ee59214497b4173de2b13050026676bf85279">853ee59</a></td><td><code>Expand documentation</code></td></tr></table>




---

archive/issue_comments_599806.json:
```json
{
    "body": "**Changing commit** from \"[4b7ca86998ec6cf2122101e9050861865ee7da26](https://github.com/sagemath/sagetrac-mirror/commit/4b7ca86998ec6cf2122101e9050861865ee7da26)\" to \"[853ee59214497b4173de2b13050026676bf85279](https://github.com/sagemath/sagetrac-mirror/commit/853ee59214497b4173de2b13050026676bf85279)\".",
    "created_at": "2021-10-14T11:16:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4b7ca86998ec6cf2122101e9050861865ee7da26](https://github.com/sagemath/sagetrac-mirror/commit/4b7ca86998ec6cf2122101e9050861865ee7da26)" to "[853ee59214497b4173de2b13050026676bf85279](https://github.com/sagemath/sagetrac-mirror/commit/853ee59214497b4173de2b13050026676bf85279)".



---

archive/issue_comments_599807.json:
```json
{
    "body": "<a id='comment:7'></a>\nThanks for your comments. I think I've addressed all of them now.\n\nOnly `. bin/sage-env` doesn't work for me. Afterwards, the `pipenv` command throws the error that the pipenv module cannot be found. I guess the reason is that pipenv is not installed in the sage python environment. Since this would also only replace the `export xyz` commands in the github workflow, I propose we do this in a follow-up ticket.",
    "created_at": "2021-10-14T11:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599807",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>
Thanks for your comments. I think I've addressed all of them now.

Only `. bin/sage-env` doesn't work for me. Afterwards, the `pipenv` command throws the error that the pipenv module cannot be found. I guess the reason is that pipenv is not installed in the sage python environment. Since this would also only replace the `export xyz` commands in the github workflow, I propose we do this in a follow-up ticket.



---

archive/issue_comments_599808.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2ce6a0fcd9cdb38d2202263dc22e0924549596e\">f2ce6a0</a></td><td><code>Lets ask R about its home</code></td></tr></table>\n",
    "created_at": "2021-10-14T13:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599808",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2ce6a0fcd9cdb38d2202263dc22e0924549596e">f2ce6a0</a></td><td><code>Lets ask R about its home</code></td></tr></table>




---

archive/issue_comments_599809.json:
```json
{
    "body": "**Changing commit** from \"[853ee59214497b4173de2b13050026676bf85279](https://github.com/sagemath/sagetrac-mirror/commit/853ee59214497b4173de2b13050026676bf85279)\" to \"[f2ce6a0fcd9cdb38d2202263dc22e0924549596e](https://github.com/sagemath/sagetrac-mirror/commit/f2ce6a0fcd9cdb38d2202263dc22e0924549596e)\".",
    "created_at": "2021-10-14T13:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599809",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[853ee59214497b4173de2b13050026676bf85279](https://github.com/sagemath/sagetrac-mirror/commit/853ee59214497b4173de2b13050026676bf85279)" to "[f2ce6a0fcd9cdb38d2202263dc22e0924549596e](https://github.com/sagemath/sagetrac-mirror/commit/f2ce6a0fcd9cdb38d2202263dc22e0924549596e)".



---

archive/issue_comments_599810.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,7 +15,15 @@\n It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.\n \n The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace\n-Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution).\n+Most tests are working, but a few are failing. Only a few tests are failing:\n+\n+```\n+sage -t --random-seed=0 sage/misc/sagedoc.py  # 4 doctests failed\n+sage -t --random-seed=0 sage/docs/conf.py  # 1 doctest failed\n+sage -t --random-seed=0 sage/matrix/matrix_integer_dense.pyx  # 1 doctest failed\n+sage -t --random-seed=0 sage/cpython/dict_del_by_value.pyx  # 2 doctests failed\n+sage -t --random-seed=0 sage/tests/cmdline.py  # 8 doctests failed\n+```\n \n TODO (as followup tickets):\n - Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n``````\n",
    "created_at": "2021-10-14T13:53:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599810",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,7 +15,15 @@
 It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.
 
 The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace
-Most tests are working, but a few are failing. The failures seem to go back to a mismatch in the versions of the dependencies (the pipenv environment uses more recent versions compared to sagemath the distribution).
+Most tests are working, but a few are failing. Only a few tests are failing:
+
+```
+sage -t --random-seed=0 sage/misc/sagedoc.py  # 4 doctests failed
+sage -t --random-seed=0 sage/docs/conf.py  # 1 doctest failed
+sage -t --random-seed=0 sage/matrix/matrix_integer_dense.pyx  # 1 doctest failed
+sage -t --random-seed=0 sage/cpython/dict_del_by_value.pyx  # 2 doctests failed
+sage -t --random-seed=0 sage/tests/cmdline.py  # 8 doctests failed
+```
 
 TODO (as followup tickets):
 - Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
``````




---

archive/issue_comments_599811.json:
```json
{
    "body": "<a id='comment:430'></a>\nReplying to [mkoeppe](#comment%3A409):\n> \n> ```\n> +        export SAGE_SHARE=$GITHUB_WORKSPACE/.tox/local-homebrew-macos-usrlocal/local/share\n> ```\n> This line (in both workflow scripts) shouldn't be needed.\n> \n\nWithout it a lot of tests fail, for example because Cremona cannot be found. See https://github.com/sagemath/sagetrac-mirror/runs/3893523414?check_suite_focus=true. I've thus readded the sage share export.",
    "created_at": "2021-10-14T13:57:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599811",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:430'></a>
Replying to [mkoeppe](#comment%3A409):
> 
> ```
> +        export SAGE_SHARE=$GITHUB_WORKSPACE/.tox/local-homebrew-macos-usrlocal/local/share
> ```
> This line (in both workflow scripts) shouldn't be needed.
> 

Without it a lot of tests fail, for example because Cremona cannot be found. See https://github.com/sagemath/sagetrac-mirror/runs/3893523414?check_suite_focus=true. I've thus readded the sage share export.



---

archive/issue_comments_599812.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae3eae7f5764227f1ffffb0105839cb8d562ac63\">ae3eae7</a></td><td><code>Readd sage_share export</code></td></tr></table>\n",
    "created_at": "2021-10-14T13:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599812",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae3eae7f5764227f1ffffb0105839cb8d562ac63">ae3eae7</a></td><td><code>Readd sage_share export</code></td></tr></table>




---

archive/issue_comments_599813.json:
```json
{
    "body": "**Changing commit** from \"[f2ce6a0fcd9cdb38d2202263dc22e0924549596e](https://github.com/sagemath/sagetrac-mirror/commit/f2ce6a0fcd9cdb38d2202263dc22e0924549596e)\" to \"[ae3eae7f5764227f1ffffb0105839cb8d562ac63](https://github.com/sagemath/sagetrac-mirror/commit/ae3eae7f5764227f1ffffb0105839cb8d562ac63)\".",
    "created_at": "2021-10-14T13:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599813",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[f2ce6a0fcd9cdb38d2202263dc22e0924549596e](https://github.com/sagemath/sagetrac-mirror/commit/f2ce6a0fcd9cdb38d2202263dc22e0924549596e)" to "[ae3eae7f5764227f1ffffb0105839cb8d562ac63](https://github.com/sagemath/sagetrac-mirror/commit/ae3eae7f5764227f1ffffb0105839cb8d562ac63)".



---

archive/issue_comments_599814.json:
```json
{
    "body": "<a id='comment:2'></a>\nDoesn't your `sage-conf` provide the Cremona install paths?",
    "created_at": "2021-10-14T19:05:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599814",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
Doesn't your `sage-conf` provide the Cremona install paths?



---

archive/issue_comments_599815.json:
```json
{
    "body": "<a id='comment:3'></a>\nMight this be that in the github action the installed sage-conf doesn't refer to the tox environment but to the one in `/local` ?",
    "created_at": "2021-10-14T19:13:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599815",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:3'></a>
Might this be that in the github action the installed sage-conf doesn't refer to the tox environment but to the one in `/local` ?



---

archive/issue_comments_599816.json:
```json
{
    "body": "<a id='comment:4'></a>\nI don't know, but the idea of `sage-conf` is that you install a version that provides the correct setting of `SAGE_LOCAL`",
    "created_at": "2021-10-14T19:16:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599816",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
I don't know, but the idea of `sage-conf` is that you install a version that provides the correct setting of `SAGE_LOCAL`



---

archive/issue_comments_599817.json:
```json
{
    "body": "<a id='comment:5'></a>\nProblem is that the path of sage-conf needs to be specified in the pipfile and thus has to be known before. Maybe in the future one can add a symlink (defaulting to pkgs/sage-conf) that can be changed to point to a tox environment? But I guess this would be more or less equivalent to changing SAGE_SHARE.",
    "created_at": "2021-10-14T19:28:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599817",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
Problem is that the path of sage-conf needs to be specified in the pipfile and thus has to be known before. Maybe in the future one can add a symlink (defaulting to pkgs/sage-conf) that can be changed to point to a tox environment? But I guess this would be more or less equivalent to changing SAGE_SHARE.



---

archive/issue_comments_599818.json:
```json
{
    "body": "<a id='comment:6'></a>\nThe path in the source tree is always `pkgs/sage-conf/`",
    "created_at": "2021-10-14T20:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599818",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
The path in the source tree is always `pkgs/sage-conf/`



---

archive/issue_comments_599819.json:
```json
{
    "body": "<a id='comment:7'></a>\n(The `local` .tox builds do not make a copy of SAGE_ROOT. They only use a separate SAGE_LOCAL.)",
    "created_at": "2021-10-14T20:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599819",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
(The `local` .tox builds do not make a copy of SAGE_ROOT. They only use a separate SAGE_LOCAL.)



---

archive/issue_comments_599820.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e41d022821baf31c99bfdb3aaff60a89eafe6c07\">e41d022</a></td><td><code>Found R's home, so lets go there tonight</code></td></tr></table>\n",
    "created_at": "2021-10-14T22:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599820",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e41d022821baf31c99bfdb3aaff60a89eafe6c07">e41d022</a></td><td><code>Found R's home, so lets go there tonight</code></td></tr></table>




---

archive/issue_comments_599821.json:
```json
{
    "body": "**Changing commit** from \"[ae3eae7f5764227f1ffffb0105839cb8d562ac63](https://github.com/sagemath/sagetrac-mirror/commit/ae3eae7f5764227f1ffffb0105839cb8d562ac63)\" to \"[e41d022821baf31c99bfdb3aaff60a89eafe6c07](https://github.com/sagemath/sagetrac-mirror/commit/e41d022821baf31c99bfdb3aaff60a89eafe6c07)\".",
    "created_at": "2021-10-14T22:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599821",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ae3eae7f5764227f1ffffb0105839cb8d562ac63](https://github.com/sagemath/sagetrac-mirror/commit/ae3eae7f5764227f1ffffb0105839cb8d562ac63)" to "[e41d022821baf31c99bfdb3aaff60a89eafe6c07](https://github.com/sagemath/sagetrac-mirror/commit/e41d022821baf31c99bfdb3aaff60a89eafe6c07)".



---

archive/issue_comments_599822.json:
```json
{
    "body": "<a id='comment:439'></a>\nReplying to [mkoeppe](#comment%3A436):\n> The path in the source tree is always `pkgs/sage-conf/`\n\n\nOkay, then I don't know what the problem is. I would propose to keep the explicit SAGE_SHARE for now and then afterwards create a new ticket in which it is removed. The github workflow right now is anyway a big compromise of \"how it should work\" vs \"what is actually needed to make it work\". There are quite a few special tweaks and workarounds that ideally shouldn't be needed.",
    "created_at": "2021-10-15T10:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599822",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:439'></a>
Replying to [mkoeppe](#comment%3A436):
> The path in the source tree is always `pkgs/sage-conf/`


Okay, then I don't know what the problem is. I would propose to keep the explicit SAGE_SHARE for now and then afterwards create a new ticket in which it is removed. The github workflow right now is anyway a big compromise of "how it should work" vs "what is actually needed to make it work". There are quite a few special tweaks and workarounds that ideally shouldn't be needed.



---

archive/issue_comments_599823.json:
```json
{
    "body": "**Changing commit** from \"[e41d022821baf31c99bfdb3aaff60a89eafe6c07](https://github.com/sagemath/sagetrac-mirror/commit/e41d022821baf31c99bfdb3aaff60a89eafe6c07)\" to \"[80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b](https://github.com/sagemath/sagetrac-mirror/commit/80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b)\".",
    "created_at": "2021-10-15T10:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599823",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e41d022821baf31c99bfdb3aaff60a89eafe6c07](https://github.com/sagemath/sagetrac-mirror/commit/e41d022821baf31c99bfdb3aaff60a89eafe6c07)" to "[80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b](https://github.com/sagemath/sagetrac-mirror/commit/80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b)".



---

archive/issue_comments_599824.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b03c1208e73683bc52394718a654c3c37649e256\">b03c120</a></td><td><code>Fix mapmath also on mac</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b\">80aa6bb</a></td><td><code>Sligtly increase parallelism for make</code></td></tr></table>\n",
    "created_at": "2021-10-15T10:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599824",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b03c1208e73683bc52394718a654c3c37649e256">b03c120</a></td><td><code>Fix mapmath also on mac</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b">80aa6bb</a></td><td><code>Sligtly increase parallelism for make</code></td></tr></table>




---

archive/issue_comments_599825.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0fcb85665cee14abd3492ba02c4b53b246d40b2c\">0fcb856</a></td><td><code>Try to fix path to gmp (and boost) on macos</code></td></tr></table>\n",
    "created_at": "2021-10-15T15:06:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0fcb85665cee14abd3492ba02c4b53b246d40b2c">0fcb856</a></td><td><code>Try to fix path to gmp (and boost) on macos</code></td></tr></table>




---

archive/issue_comments_599826.json:
```json
{
    "body": "**Changing commit** from \"[80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b](https://github.com/sagemath/sagetrac-mirror/commit/80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b)\" to \"[0fcb85665cee14abd3492ba02c4b53b246d40b2c](https://github.com/sagemath/sagetrac-mirror/commit/0fcb85665cee14abd3492ba02c4b53b246d40b2c)\".",
    "created_at": "2021-10-15T15:06:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599826",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b](https://github.com/sagemath/sagetrac-mirror/commit/80aa6bb1ad4d71f63ad6bc33644e0eb5c2d2e25b)" to "[0fcb85665cee14abd3492ba02c4b53b246d40b2c](https://github.com/sagemath/sagetrac-mirror/commit/0fcb85665cee14abd3492ba02c4b53b246d40b2c)".



---

archive/issue_comments_599827.json:
```json
{
    "body": "<a id='comment:442'></a>\nReplying to [gh-tobiasdiez](#comment%3A439):\n> Replying to [mkoeppe](#comment%3A436):\n> > The path in the source tree is always `pkgs/sage-conf/`\n\n> \n> Okay, then I don't know what the problem is. \n\n\nTo debug this, in the activated venv you could ask `sage-config` to print the configuration",
    "created_at": "2021-10-15T16:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599827",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:442'></a>
Replying to [gh-tobiasdiez](#comment%3A439):
> Replying to [mkoeppe](#comment%3A436):
> > The path in the source tree is always `pkgs/sage-conf/`

> 
> Okay, then I don't know what the problem is. 


To debug this, in the activated venv you could ask `sage-config` to print the configuration



---

archive/issue_comments_599828.json:
```json
{
    "body": "<a id='comment:443'></a>\nReplying to [gh-tobiasdiez](#comment%3A427):\n> Only `. bin/sage-env` doesn't work for me. \n\n\nTake a look at what `bin/sage` does. It first sources config files on which `sage-env` relies.",
    "created_at": "2021-10-15T16:27:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599828",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:443'></a>
Replying to [gh-tobiasdiez](#comment%3A427):
> Only `. bin/sage-env` doesn't work for me. 


Take a look at what `bin/sage` does. It first sources config files on which `sage-env` relies.



---

archive/issue_comments_599829.json:
```json
{
    "body": "<a id='comment:444'></a>\nReplying to [gh-tobiasdiez](#comment%3A415):\n> some of the packages (pplpy for example) need cython and other packages installed already on sdist and egg_info. \n\n\nThis should be fixed. Could you open issues please with these packages? We also have meta-ticket #30922 for keeping track of these issues.",
    "created_at": "2021-10-15T16:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599829",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:444'></a>
Replying to [gh-tobiasdiez](#comment%3A415):
> some of the packages (pplpy for example) need cython and other packages installed already on sdist and egg_info. 


This should be fixed. Could you open issues please with these packages? We also have meta-ticket #30922 for keeping track of these issues.



---

archive/issue_comments_599830.json:
```json
{
    "body": "<a id='comment:445'></a>\nReplying to [gh-tobiasdiez](#comment%3A415):\n> The point of the lock file is also to ensure that the python environment is the same for everyone (which makes it easier to reproduce issues and test failures etc)\n\n\nI understand that for general Python projects it has the benefit that you describe (although the benefit over plain `requirements.txt` is still not clear to me, but let's not elaborate on this now).\n\nThe problem is that in our case, adding the lock file locks versions that (1) are *not the same* as the ones in the Sage distribution, (2) it will be out of date next week because we have no established process to update it. So it reduces clarity for users and creates a maintenance burden for Sage development.\n\nI think it would be a good idea to work on a process (= script/documentation) based on pipenv that actually helps Sage developers to make Python package upgrades. Currently this is a manual process based on guesswork and testing. So this could be a key added value that Pipenv provides.",
    "created_at": "2021-10-15T16:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599830",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:445'></a>
Replying to [gh-tobiasdiez](#comment%3A415):
> The point of the lock file is also to ensure that the python environment is the same for everyone (which makes it easier to reproduce issues and test failures etc)


I understand that for general Python projects it has the benefit that you describe (although the benefit over plain `requirements.txt` is still not clear to me, but let's not elaborate on this now).

The problem is that in our case, adding the lock file locks versions that (1) are *not the same* as the ones in the Sage distribution, (2) it will be out of date next week because we have no established process to update it. So it reduces clarity for users and creates a maintenance burden for Sage development.

I think it would be a good idea to work on a process (= script/documentation) based on pipenv that actually helps Sage developers to make Python package upgrades. Currently this is a manual process based on guesswork and testing. So this could be a key added value that Pipenv provides.



---

archive/issue_comments_599831.json:
```json
{
    "body": "<a id='comment:446'></a>\nReplying to [gh-tobiasdiez](#comment%3A415):\n> Moreover, the lock file is required for now as some of the packages (pplpy for example) need cython and other packages installed already on sdist and egg_info. \n\n\nActually pplpy declares these build dependencies correctly in https://gitlab.com/videlec/pplpy/-/blob/master/pyproject.toml",
    "created_at": "2021-10-15T16:51:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599831",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:446'></a>
Replying to [gh-tobiasdiez](#comment%3A415):
> Moreover, the lock file is required for now as some of the packages (pplpy for example) need cython and other packages installed already on sdist and egg_info. 


Actually pplpy declares these build dependencies correctly in https://gitlab.com/videlec/pplpy/-/blob/master/pyproject.toml



---

archive/issue_comments_599832.json:
```json
{
    "body": "**Changing commit** from \"[0fcb85665cee14abd3492ba02c4b53b246d40b2c](https://github.com/sagemath/sagetrac-mirror/commit/0fcb85665cee14abd3492ba02c4b53b246d40b2c)\" to \"[5e60fc2ef9c0ab3db0e3431519dd551dc49b6321](https://github.com/sagemath/sagetrac-mirror/commit/5e60fc2ef9c0ab3db0e3431519dd551dc49b6321)\".",
    "created_at": "2021-10-15T19:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0fcb85665cee14abd3492ba02c4b53b246d40b2c](https://github.com/sagemath/sagetrac-mirror/commit/0fcb85665cee14abd3492ba02c4b53b246d40b2c)" to "[5e60fc2ef9c0ab3db0e3431519dd551dc49b6321](https://github.com/sagemath/sagetrac-mirror/commit/5e60fc2ef9c0ab3db0e3431519dd551dc49b6321)".



---

archive/issue_comments_599833.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e60fc2ef9c0ab3db0e3431519dd551dc49b6321\">5e60fc2</a></td><td><code>Lets try sage-env</code></td></tr></table>\n",
    "created_at": "2021-10-15T19:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e60fc2ef9c0ab3db0e3431519dd551dc49b6321">5e60fc2</a></td><td><code>Lets try sage-env</code></td></tr></table>




---

archive/issue_comments_599834.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe3940955e017f7445a7aae866d750841dca5db7\">fe39409</a></td><td><code>sage-env thinks its time for 127, we don't agree</code></td></tr></table>\n",
    "created_at": "2021-10-15T21:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe3940955e017f7445a7aae866d750841dca5db7">fe39409</a></td><td><code>sage-env thinks its time for 127, we don't agree</code></td></tr></table>




---

archive/issue_comments_599835.json:
```json
{
    "body": "**Changing commit** from \"[5e60fc2ef9c0ab3db0e3431519dd551dc49b6321](https://github.com/sagemath/sagetrac-mirror/commit/5e60fc2ef9c0ab3db0e3431519dd551dc49b6321)\" to \"[fe3940955e017f7445a7aae866d750841dca5db7](https://github.com/sagemath/sagetrac-mirror/commit/fe3940955e017f7445a7aae866d750841dca5db7)\".",
    "created_at": "2021-10-15T21:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599835",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5e60fc2ef9c0ab3db0e3431519dd551dc49b6321](https://github.com/sagemath/sagetrac-mirror/commit/5e60fc2ef9c0ab3db0e3431519dd551dc49b6321)" to "[fe3940955e017f7445a7aae866d750841dca5db7](https://github.com/sagemath/sagetrac-mirror/commit/fe3940955e017f7445a7aae866d750841dca5db7)".



---

archive/issue_comments_599836.json:
```json
{
    "body": "<a id='comment:9'></a>\ncomment:443 applies",
    "created_at": "2021-10-15T21:35:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599836",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
comment:443 applies



---

archive/issue_comments_599837.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91310ce568a590edb59b20251107e67e21981b3a\">91310ce</a></td><td><code>Force success exit code...strange</code></td></tr></table>\n",
    "created_at": "2021-10-15T22:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91310ce568a590edb59b20251107e67e21981b3a">91310ce</a></td><td><code>Force success exit code...strange</code></td></tr></table>




---

archive/issue_comments_599838.json:
```json
{
    "body": "**Changing commit** from \"[fe3940955e017f7445a7aae866d750841dca5db7](https://github.com/sagemath/sagetrac-mirror/commit/fe3940955e017f7445a7aae866d750841dca5db7)\" to \"[91310ce568a590edb59b20251107e67e21981b3a](https://github.com/sagemath/sagetrac-mirror/commit/91310ce568a590edb59b20251107e67e21981b3a)\".",
    "created_at": "2021-10-15T22:27:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fe3940955e017f7445a7aae866d750841dca5db7](https://github.com/sagemath/sagetrac-mirror/commit/fe3940955e017f7445a7aae866d750841dca5db7)" to "[91310ce568a590edb59b20251107e67e21981b3a](https://github.com/sagemath/sagetrac-mirror/commit/91310ce568a590edb59b20251107e67e21981b3a)".



---

archive/issue_comments_599839.json:
```json
{
    "body": "**Changing commit** from \"[91310ce568a590edb59b20251107e67e21981b3a](https://github.com/sagemath/sagetrac-mirror/commit/91310ce568a590edb59b20251107e67e21981b3a)\" to \"[28faabd70ec932d4b7f2b92681b2f202cb2e9f29](https://github.com/sagemath/sagetrac-mirror/commit/28faabd70ec932d4b7f2b92681b2f202cb2e9f29)\".",
    "created_at": "2021-10-15T23:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599839",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[91310ce568a590edb59b20251107e67e21981b3a](https://github.com/sagemath/sagetrac-mirror/commit/91310ce568a590edb59b20251107e67e21981b3a)" to "[28faabd70ec932d4b7f2b92681b2f202cb2e9f29](https://github.com/sagemath/sagetrac-mirror/commit/28faabd70ec932d4b7f2b92681b2f202cb2e9f29)".



---

archive/issue_comments_599840.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28faabd70ec932d4b7f2b92681b2f202cb2e9f29\">28faabd</a></td><td><code>Lets try code from sage script</code></td></tr></table>\n",
    "created_at": "2021-10-15T23:36:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28faabd70ec932d4b7f2b92681b2f202cb2e9f29">28faabd</a></td><td><code>Lets try code from sage script</code></td></tr></table>




---

archive/issue_comments_599841.json:
```json
{
    "body": "<a id='comment:452'></a>\nReplying to [mkoeppe](#comment%3A443):\n> Replying to [gh-tobiasdiez](#comment%3A427):\n> > Only `. bin/sage-env` doesn't work for me. \n\n> \n> Take a look at what `bin/sage` does. It first sources config files on which `sage-env` relies.\n\n\nI was not able to make it work locally nor on github (where it fails with exit code 127 without giving any details). That's mostly because of my missing experience with bash and linux things. Also sage-env does a lot of things that are not needed at this point (e.g. overwriting the python location, which breaks pipenv). Anyway, lets make this a follow-up ticket.",
    "created_at": "2021-10-16T08:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599841",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:452'></a>
Replying to [mkoeppe](#comment%3A443):
> Replying to [gh-tobiasdiez](#comment%3A427):
> > Only `. bin/sage-env` doesn't work for me. 

> 
> Take a look at what `bin/sage` does. It first sources config files on which `sage-env` relies.


I was not able to make it work locally nor on github (where it fails with exit code 127 without giving any details). That's mostly because of my missing experience with bash and linux things. Also sage-env does a lot of things that are not needed at this point (e.g. overwriting the python location, which breaks pipenv). Anyway, lets make this a follow-up ticket.



---

archive/issue_comments_599842.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -28,6 +28,8 @@\n TODO (as followup tickets):\n - Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.\n - Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is \"always include in version control\", see https://github.com/pypa/pipenv/issues/598.\n+- Replace manual definition of build variables (PKG_CONFIG_PATH, LIBRARY_PATH etc) by `sage-env`.\n+- Fix failing doctests. \n \n \n Previous tickets on in-place builds, editable installs:\n``````\n",
    "created_at": "2021-10-16T08:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599842",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -28,6 +28,8 @@
 TODO (as followup tickets):
 - Expand on the added documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`. This is #31342.
 - Consider not commit pipfile.lock but instead generate it as build artifact on ci (so that build errors can be easily reproduced by downloading the lock file, and re-creating the exact venv locally): https://github.com/pypa/pipenv/issues/1911#issuecomment-378989597. However, normally you want to put the lock file under version control for the reasons described in https://trac.sagemath.org/timeline?from=2021-02-03T13%3A15%3A22Z. The official statement is "always include in version control", see https://github.com/pypa/pipenv/issues/598.
+- Replace manual definition of build variables (PKG_CONFIG_PATH, LIBRARY_PATH etc) by `sage-env`.
+- Fix failing doctests. 
 
 
 Previous tickets on in-place builds, editable installs:
``````




---

archive/issue_comments_599843.json:
```json
{
    "body": "**Changing commit** from \"[28faabd70ec932d4b7f2b92681b2f202cb2e9f29](https://github.com/sagemath/sagetrac-mirror/commit/28faabd70ec932d4b7f2b92681b2f202cb2e9f29)\" to \"[d4d8236d91cf864744d7a7dee4710732b10a2b72](https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72)\".",
    "created_at": "2021-10-16T08:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[28faabd70ec932d4b7f2b92681b2f202cb2e9f29](https://github.com/sagemath/sagetrac-mirror/commit/28faabd70ec932d4b7f2b92681b2f202cb2e9f29)" to "[d4d8236d91cf864744d7a7dee4710732b10a2b72](https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72)".



---

archive/issue_comments_599844.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72\">d4d8236</a></td><td><code>I give up on sage-env...</code></td></tr></table>\n",
    "created_at": "2021-10-16T08:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72">d4d8236</a></td><td><code>I give up on sage-env...</code></td></tr></table>




---

archive/issue_comments_599845.json:
```json
{
    "body": "<a id='comment:455'></a>\nReplying to [mkoeppe](#comment%3A444):\n> Replying to [gh-tobiasdiez](#comment%3A415):\n> > some of the packages (pplpy for example) need cython and other packages installed already on sdist and egg_info. \n\n> \n> This should be fixed. Could you open issues please with these packages? We also have meta-ticket #30922 for keeping track of these issues.\n\n\nDone: https://gitlab.com/videlec/pplpy/-/issues/27",
    "created_at": "2021-10-16T08:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599845",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:455'></a>
Replying to [mkoeppe](#comment%3A444):
> Replying to [gh-tobiasdiez](#comment%3A415):
> > some of the packages (pplpy for example) need cython and other packages installed already on sdist and egg_info. 

> 
> This should be fixed. Could you open issues please with these packages? We also have meta-ticket #30922 for keeping track of these issues.


Done: https://gitlab.com/videlec/pplpy/-/issues/27



---

archive/issue_comments_599846.json:
```json
{
    "body": "<a id='comment:456'></a>\nReplying to [mkoeppe](#comment%3A445):\n> The problem is that in our case, adding the lock file locks versions that (1) are *not the same* as the ones in the Sage distribution, \n\n\nMaybe a shift in viewpoint might be helpful to see how pipenv helps. Sagelib (things in `src`) declares its dependencies in form of `install_requires`. Currently, sage-the-distrubition is one way to provide a certain set of packages that satisfy the version constraints. The newly added pipfile.lock specifies another set of packages that also satisfy the constraints. If sagelib is indeed configured correctly, then it should work with both sets. So you can see the added github workflow as a test that the install_requires constraints are correct.\n\n> (2) it will be out of date next week because we have no established process to update it. So it reduces clarity for users and creates a maintenance burden for Sage development.\n\n\ndependabot or rennovate are the modern approaches to not worry about manually updating dependencies. But they don't support trac...\nBut updating the pipfile lock manually is easy, automated and only needs to be done rarely. Its definitively more convenient then updating the versions in sage-the-distro.\n \n> I think it would be a good idea to work on a process (= script/documentation) based on pipenv that actually helps Sage developers to make Python package upgrades. Currently this is a manual process based on guesswork and testing. So this could be a key added value that Pipenv provides. \n\n\nI agree. First of all, my idea with pipenv was to completely replace sages python packages and use it also for distribution. But also in the short term, pipenv can be helpful. For example, the following are the versions determined by pipenv:\n\n```\nalabaster                     0.7.12\nargon2-cffi                   21.1.0\nattrs                         21.2.0\nBabel                         2.9.1\nbackcall                      0.2.0\nbackports.zoneinfo            0.2.1\nbleach                        4.1.0\ncertifi                       2021.10.8\ncffi                          1.15.0\ncharset-normalizer            2.0.7\ncycler                        0.10.0\ncypari2                       2.1.2\ncysignals                     1.10.3\nCython                        0.29.24\ndebugpy                       1.5.0\ndecorator                     5.1.0\ndefusedxml                    0.7.1\ndocutils                      0.17.1\nentrypoints                   0.3\nfpylll                        0.5.6\ngmpy2                         2.1.0b5\nidna                          3.3\nimagesize                     1.2.0\niniconfig                     1.1.1\nipykernel                     6.4.1\nipython                       7.28.0\nipython-genutils              0.2.0\nipywidgets                    7.6.5\njedi                          0.18.0\nJinja2                        3.0.2\njsonschema                    4.1.0\njupyter-client                7.0.6\njupyter-core                  4.8.1\njupyterlab-pygments           0.1.2\njupyterlab-widgets            1.0.2\nkiwisolver                    1.3.2\nMarkupSafe                    2.0.1\nmatplotlib                    3.4.3\nmatplotlib-inline             0.1.3\nmemory-allocator              0.1.1\nmistune                       0.8.4\nmpmath                        1.2.1\nnbclient                      0.5.4\nnbconvert                     6.2.0\nnbformat                      5.1.3\nnest-asyncio                  1.5.1\nnetworkx                      2.6.3\nnotebook                      6.4.4\nnumpy                         1.21.2\npackaging                     21.0\npandocfilters                 1.5.0\nparso                         0.8.2\npexpect                       4.8.0\npickleshare                   0.7.5\nPillow                        8.3.2\npip                           21.2.4\npkgconfig                     1.5.5\npluggy                        1.0.0\npplpy                         0.8.7\nprometheus-client             0.11.0\nprompt-toolkit                3.0.20\npsutil                        5.8.0\nptyprocess                    0.7.0\npy                            1.10.0\npycparser                     2.20\nPygments                      2.10.0\npyparsing                     2.4.7\npyrsistent                    0.18.0\npytest                        6.2.5\npython-dateutil               2.8.2\npytz                          2021.3\npyzmq                         22.3.0\nrequests                      2.26.0\nrpy2                          3.3.6\nsage-conf                     9.5b3     /__w/sagetrac-mirror/sagetrac-mirror/pkgs/sage-conf\nsagemath-standard             9.5b3     /__w/sagetrac-mirror/sagetrac-mirror/src\nscipy                         1.7.1\nSend2Trash                    1.8.0\nsetuptools                    58.1.0\nsix                           1.16.0\nsnowballstemmer               2.1.0\nSphinx                        4.1.2\nsphinxcontrib-applehelp       1.0.2\nsphinxcontrib-devhelp         1.0.2\nsphinxcontrib-htmlhelp        2.0.0\nsphinxcontrib-jsmath          1.0.1\nsphinxcontrib-qthelp          1.0.3\nsphinxcontrib-serializinghtml 1.1.5\nsympy                         1.9\nterminado                     0.12.1\ntestpath                      0.5.0\ntoml                          0.10.2\ntornado                       6.1\ntraitlets                     5.1.0\ntzlocal                       3.0\nurllib3                       1.26.7\nwcwidth                       0.2.5\nwebencodings                  0.5.1\nwheel                         0.37.0\nwidgetsnbextension            3.5.1\n```\nNow you can use those versions as the package version of sage-the-distro. Lets discuss this further in #31346.",
    "created_at": "2021-10-16T09:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599846",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:456'></a>
Replying to [mkoeppe](#comment%3A445):
> The problem is that in our case, adding the lock file locks versions that (1) are *not the same* as the ones in the Sage distribution, 


Maybe a shift in viewpoint might be helpful to see how pipenv helps. Sagelib (things in `src`) declares its dependencies in form of `install_requires`. Currently, sage-the-distrubition is one way to provide a certain set of packages that satisfy the version constraints. The newly added pipfile.lock specifies another set of packages that also satisfy the constraints. If sagelib is indeed configured correctly, then it should work with both sets. So you can see the added github workflow as a test that the install_requires constraints are correct.

> (2) it will be out of date next week because we have no established process to update it. So it reduces clarity for users and creates a maintenance burden for Sage development.


dependabot or rennovate are the modern approaches to not worry about manually updating dependencies. But they don't support trac...
But updating the pipfile lock manually is easy, automated and only needs to be done rarely. Its definitively more convenient then updating the versions in sage-the-distro.
 
> I think it would be a good idea to work on a process (= script/documentation) based on pipenv that actually helps Sage developers to make Python package upgrades. Currently this is a manual process based on guesswork and testing. So this could be a key added value that Pipenv provides. 


I agree. First of all, my idea with pipenv was to completely replace sages python packages and use it also for distribution. But also in the short term, pipenv can be helpful. For example, the following are the versions determined by pipenv:

```
alabaster                     0.7.12
argon2-cffi                   21.1.0
attrs                         21.2.0
Babel                         2.9.1
backcall                      0.2.0
backports.zoneinfo            0.2.1
bleach                        4.1.0
certifi                       2021.10.8
cffi                          1.15.0
charset-normalizer            2.0.7
cycler                        0.10.0
cypari2                       2.1.2
cysignals                     1.10.3
Cython                        0.29.24
debugpy                       1.5.0
decorator                     5.1.0
defusedxml                    0.7.1
docutils                      0.17.1
entrypoints                   0.3
fpylll                        0.5.6
gmpy2                         2.1.0b5
idna                          3.3
imagesize                     1.2.0
iniconfig                     1.1.1
ipykernel                     6.4.1
ipython                       7.28.0
ipython-genutils              0.2.0
ipywidgets                    7.6.5
jedi                          0.18.0
Jinja2                        3.0.2
jsonschema                    4.1.0
jupyter-client                7.0.6
jupyter-core                  4.8.1
jupyterlab-pygments           0.1.2
jupyterlab-widgets            1.0.2
kiwisolver                    1.3.2
MarkupSafe                    2.0.1
matplotlib                    3.4.3
matplotlib-inline             0.1.3
memory-allocator              0.1.1
mistune                       0.8.4
mpmath                        1.2.1
nbclient                      0.5.4
nbconvert                     6.2.0
nbformat                      5.1.3
nest-asyncio                  1.5.1
networkx                      2.6.3
notebook                      6.4.4
numpy                         1.21.2
packaging                     21.0
pandocfilters                 1.5.0
parso                         0.8.2
pexpect                       4.8.0
pickleshare                   0.7.5
Pillow                        8.3.2
pip                           21.2.4
pkgconfig                     1.5.5
pluggy                        1.0.0
pplpy                         0.8.7
prometheus-client             0.11.0
prompt-toolkit                3.0.20
psutil                        5.8.0
ptyprocess                    0.7.0
py                            1.10.0
pycparser                     2.20
Pygments                      2.10.0
pyparsing                     2.4.7
pyrsistent                    0.18.0
pytest                        6.2.5
python-dateutil               2.8.2
pytz                          2021.3
pyzmq                         22.3.0
requests                      2.26.0
rpy2                          3.3.6
sage-conf                     9.5b3     /__w/sagetrac-mirror/sagetrac-mirror/pkgs/sage-conf
sagemath-standard             9.5b3     /__w/sagetrac-mirror/sagetrac-mirror/src
scipy                         1.7.1
Send2Trash                    1.8.0
setuptools                    58.1.0
six                           1.16.0
snowballstemmer               2.1.0
Sphinx                        4.1.2
sphinxcontrib-applehelp       1.0.2
sphinxcontrib-devhelp         1.0.2
sphinxcontrib-htmlhelp        2.0.0
sphinxcontrib-jsmath          1.0.1
sphinxcontrib-qthelp          1.0.3
sphinxcontrib-serializinghtml 1.1.5
sympy                         1.9
terminado                     0.12.1
testpath                      0.5.0
toml                          0.10.2
tornado                       6.1
traitlets                     5.1.0
tzlocal                       3.0
urllib3                       1.26.7
wcwidth                       0.2.5
webencodings                  0.5.1
wheel                         0.37.0
widgetsnbextension            3.5.1
```
Now you can use those versions as the package version of sage-the-distro. Lets discuss this further in #31346.



---

archive/issue_comments_599847.json:
```json
{
    "body": "<a id='comment:457'></a>\nReplying to [git](#comment%3A454):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                          |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n> |[d4d8236](https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72)|`I give up on sage-env...`|\n\n\nYou forgot to use sage-env-config etc. as per[comment:443](#comment%3A443)",
    "created_at": "2021-10-16T17:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599847",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:457'></a>
Replying to [git](#comment%3A454):
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                          |
> |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
> |[d4d8236](https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72)|`I give up on sage-env...`|


You forgot to use sage-env-config etc. as per[comment:443](#comment%3A443)



---

archive/issue_comments_599848.json:
```json
{
    "body": "<a id='comment:458'></a>\nReplying to [gh-tobiasdiez](#comment%3A456):\n> Replying to [mkoeppe](#comment%3A445):\n> > The problem is that in our case, adding the lock file locks versions that (1) are *not the same* as the ones in the Sage distribution, \n\n> \n> Maybe a shift in viewpoint might be helpful to see how pipenv helps. Sagelib (things in `src`) declares its dependencies in form of `install_requires`. Currently, sage-the-distrubition is one way to provide a certain set of packages that satisfy the version constraints. The newly added pipfile.lock specifies another set of packages that also satisfy the constraints. If sagelib is indeed configured correctly, then it should work with both sets. So you can see the added github workflow as a test that the install_requires constraints are correct.\n\n\nI don't find this convincing. A checked-in `Pipfile.lock` is just the result of resolving the declared version constraints (as of some point in the past) against what was available on the index at some some point in the past.\n\nWhen the workflow fails, it will mean just one thing: Constraints were updated and Pipfile.lock was not updated (-> maintenance burden).\n\nIt's more valuable to test on GH Actions whether the declared version constraints resolve *at the current time* to a set of versions that work correctly. If this fails, it is clear that the constraints declared in `install_requires` are not correct.",
    "created_at": "2021-10-16T17:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599848",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:458'></a>
Replying to [gh-tobiasdiez](#comment%3A456):
> Replying to [mkoeppe](#comment%3A445):
> > The problem is that in our case, adding the lock file locks versions that (1) are *not the same* as the ones in the Sage distribution, 

> 
> Maybe a shift in viewpoint might be helpful to see how pipenv helps. Sagelib (things in `src`) declares its dependencies in form of `install_requires`. Currently, sage-the-distrubition is one way to provide a certain set of packages that satisfy the version constraints. The newly added pipfile.lock specifies another set of packages that also satisfy the constraints. If sagelib is indeed configured correctly, then it should work with both sets. So you can see the added github workflow as a test that the install_requires constraints are correct.


I don't find this convincing. A checked-in `Pipfile.lock` is just the result of resolving the declared version constraints (as of some point in the past) against what was available on the index at some some point in the past.

When the workflow fails, it will mean just one thing: Constraints were updated and Pipfile.lock was not updated (-> maintenance burden).

It's more valuable to test on GH Actions whether the declared version constraints resolve *at the current time* to a set of versions that work correctly. If this fails, it is clear that the constraints declared in `install_requires` are not correct.



---

archive/issue_comments_599849.json:
```json
{
    "body": "<a id='comment:9'></a>\nBy the way, see `SAGE_ROOT/pkgs/sagemath-standard/tox.ini` for test environments for several ways to provision a venv. Looking at it, I am also reminded that we actually have two sets of Pipenv",
    "created_at": "2021-10-16T17:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599849",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
By the way, see `SAGE_ROOT/pkgs/sagemath-standard/tox.ini` for test environments for several ways to provision a venv. Looking at it, I am also reminded that we actually have two sets of Pipenv



---

archive/issue_comments_599850.json:
```json
{
    "body": "<a id='comment:460'></a>\nReplying to [mkoeppe](#comment%3A457):\n> Replying to [git](#comment%3A454):\n> > Branch pushed to git repo; I updated commit sha1. New commits:\n> > |                                                                                                                                           |                          |\n> > |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n> > |[d4d8236](https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72)|`I give up on sage-env...`|\n\n> \n> You forgot to use sage-env-config etc. as per[comment:443](#comment%3A443)\n\n\nI tried it locally and couldn't determine which other scripts are needed to run first. To be honest, I'm tired of the try and error play (especially since it only replace a couple of very easy to understand export statements).",
    "created_at": "2021-10-16T19:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599850",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:460'></a>
Replying to [mkoeppe](#comment%3A457):
> Replying to [git](#comment%3A454):
> > Branch pushed to git repo; I updated commit sha1. New commits:
> > |                                                                                                                                           |                          |
> > |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
> > |[d4d8236](https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72)|`I give up on sage-env...`|

> 
> You forgot to use sage-env-config etc. as per[comment:443](#comment%3A443)


I tried it locally and couldn't determine which other scripts are needed to run first. To be honest, I'm tired of the try and error play (especially since it only replace a couple of very easy to understand export statements).



---

archive/issue_comments_599851.json:
```json
{
    "body": "<a id='comment:1'></a>\nYou can also just use `sage -sh` to run something in the environment, like it's explained in the instructions of `SAGE_ROOT/pkgs/sagemath-standard/tox.ini`",
    "created_at": "2021-10-16T20:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599851",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
You can also just use `sage -sh` to run something in the environment, like it's explained in the instructions of `SAGE_ROOT/pkgs/sagemath-standard/tox.ini`



---

archive/issue_comments_599852.json:
```json
{
    "body": "<a id='comment:462'></a>\nReplying to [mkoeppe](#comment%3A458):\n> When the workflow fails, it will mean just one thing: Constraints were updated and Pipfile.lock was not updated (-> maintenance burden).\n> It's more valuable to test on GH Actions whether the declared version constraints resolve *at the current time* to a set of versions that work correctly. If this fails, it is clear that the constraints declared in `install_requires` are not correct.\n\n\nI guess it depends on what you want to test (and when you want to run the workflow):\n- Test that the changes in the actual code (`src`) don't break the doctests (i.e run on push). In this case, you want to keep the environment fixed (since otherwise the workflow may fail due to newly released versions on pypi). \n- Test that sage works with the newest versions of packages compatible with the install_require constraints. In this case, you probably want to run the workflow manually, before release or in certain interval. Of course, in this case one should ignore the committed pipfile.lock.\n\nMy initial motivation was the first use case (as an alternative/replacement for the patchbots), but you are right the second case is important as well. For this reason, I've now added the possibility to run the workflow in manually in \"update\" mode in which case the pipfile.lock is ignored. Note that the latter still needs a committed pipfile lock at the moment due to the problems described above (https://trac.sagemath.org/ticket/30922).",
    "created_at": "2021-10-16T20:17:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599852",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:462'></a>
Replying to [mkoeppe](#comment%3A458):
> When the workflow fails, it will mean just one thing: Constraints were updated and Pipfile.lock was not updated (-> maintenance burden).
> It's more valuable to test on GH Actions whether the declared version constraints resolve *at the current time* to a set of versions that work correctly. If this fails, it is clear that the constraints declared in `install_requires` are not correct.


I guess it depends on what you want to test (and when you want to run the workflow):
- Test that the changes in the actual code (`src`) don't break the doctests (i.e run on push). In this case, you want to keep the environment fixed (since otherwise the workflow may fail due to newly released versions on pypi). 
- Test that sage works with the newest versions of packages compatible with the install_require constraints. In this case, you probably want to run the workflow manually, before release or in certain interval. Of course, in this case one should ignore the committed pipfile.lock.

My initial motivation was the first use case (as an alternative/replacement for the patchbots), but you are right the second case is important as well. For this reason, I've now added the possibility to run the workflow in manually in "update" mode in which case the pipfile.lock is ignored. Note that the latter still needs a committed pipfile lock at the moment due to the problems described above (https://trac.sagemath.org/ticket/30922).



---

archive/issue_comments_599853.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5b81335989d09a0c814bc58760b9a15174f23df\">c5b8133</a></td><td><code>Add update mode</code></td></tr></table>\n",
    "created_at": "2021-10-16T20:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599853",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5b81335989d09a0c814bc58760b9a15174f23df">c5b8133</a></td><td><code>Add update mode</code></td></tr></table>




---

archive/issue_comments_599854.json:
```json
{
    "body": "**Changing commit** from \"[d4d8236d91cf864744d7a7dee4710732b10a2b72](https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72)\" to \"[c5b81335989d09a0c814bc58760b9a15174f23df](https://github.com/sagemath/sagetrac-mirror/commit/c5b81335989d09a0c814bc58760b9a15174f23df)\".",
    "created_at": "2021-10-16T20:17:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599854",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d4d8236d91cf864744d7a7dee4710732b10a2b72](https://github.com/sagemath/sagetrac-mirror/commit/d4d8236d91cf864744d7a7dee4710732b10a2b72)" to "[c5b81335989d09a0c814bc58760b9a15174f23df](https://github.com/sagemath/sagetrac-mirror/commit/c5b81335989d09a0c814bc58760b9a15174f23df)".



---

archive/issue_comments_599855.json:
```json
{
    "body": "<a id='comment:464'></a>\nReplying to [mkoeppe](#comment%3A461):\n> You can also just use `sage -sh` to run something in the environment, like it's explained in the instructions of `SAGE_ROOT/pkgs/sagemath-standard/tox.ini`\n\n\nI tried this as well, but then other things get messed up (e.g. PATH, which Python is used etc). What I would like to have and what is needed here is a `sage-build-env` in which only the build-related environment variables are changed.",
    "created_at": "2021-10-16T20:19:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599855",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:464'></a>
Replying to [mkoeppe](#comment%3A461):
> You can also just use `sage -sh` to run something in the environment, like it's explained in the instructions of `SAGE_ROOT/pkgs/sagemath-standard/tox.ini`


I tried this as well, but then other things get messed up (e.g. PATH, which Python is used etc). What I would like to have and what is needed here is a `sage-build-env` in which only the build-related environment variables are changed.



---

archive/issue_comments_599856.json:
```json
{
    "body": "<a id='comment:5'></a>\nBy the way, the \"update\" mode is only available after this ticket is merged due to a security constraint by github (\"To trigger the workflow_dispatch event, your workflow must be in the default branch.\").",
    "created_at": "2021-10-16T20:22:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599856",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
By the way, the "update" mode is only available after this ticket is merged due to a security constraint by github ("To trigger the workflow_dispatch event, your workflow must be in the default branch.").



---

archive/issue_comments_599857.json:
```json
{
    "body": "<a id='comment:6'></a>\nI think all the troubles that you are having with the environment are the result of using tox to build the SAGE_LOCAL but then not activating the tox environment.\nA way out of this is to go through #31535",
    "created_at": "2021-10-16T21:10:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599857",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
I think all the troubles that you are having with the environment are the result of using tox to build the SAGE_LOCAL but then not activating the tox environment.
A way out of this is to go through #31535



---

archive/issue_comments_599858.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fe104855e2f23825b22b43027eeae33a6c9e593\">8fe1048</a></td><td><code>Run in update mode (to check if its works)</code></td></tr></table>\n",
    "created_at": "2021-10-17T09:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599858",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fe104855e2f23825b22b43027eeae33a6c9e593">8fe1048</a></td><td><code>Run in update mode (to check if its works)</code></td></tr></table>




---

archive/issue_comments_599859.json:
```json
{
    "body": "**Changing commit** from \"[c5b81335989d09a0c814bc58760b9a15174f23df](https://github.com/sagemath/sagetrac-mirror/commit/c5b81335989d09a0c814bc58760b9a15174f23df)\" to \"[8fe104855e2f23825b22b43027eeae33a6c9e593](https://github.com/sagemath/sagetrac-mirror/commit/8fe104855e2f23825b22b43027eeae33a6c9e593)\".",
    "created_at": "2021-10-17T09:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599859",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c5b81335989d09a0c814bc58760b9a15174f23df](https://github.com/sagemath/sagetrac-mirror/commit/c5b81335989d09a0c814bc58760b9a15174f23df)" to "[8fe104855e2f23825b22b43027eeae33a6c9e593](https://github.com/sagemath/sagetrac-mirror/commit/8fe104855e2f23825b22b43027eeae33a6c9e593)".



---

archive/issue_comments_599860.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/821919d2abd6309441dd4b86b752c205baa13971\">821919d</a></td><td><code>Use same env variables for update as for initial install</code></td></tr></table>\n",
    "created_at": "2021-10-17T17:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599860",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/821919d2abd6309441dd4b86b752c205baa13971">821919d</a></td><td><code>Use same env variables for update as for initial install</code></td></tr></table>




---

archive/issue_comments_599861.json:
```json
{
    "body": "**Changing commit** from \"[8fe104855e2f23825b22b43027eeae33a6c9e593](https://github.com/sagemath/sagetrac-mirror/commit/8fe104855e2f23825b22b43027eeae33a6c9e593)\" to \"[821919d2abd6309441dd4b86b752c205baa13971](https://github.com/sagemath/sagetrac-mirror/commit/821919d2abd6309441dd4b86b752c205baa13971)\".",
    "created_at": "2021-10-17T17:45:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599861",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8fe104855e2f23825b22b43027eeae33a6c9e593](https://github.com/sagemath/sagetrac-mirror/commit/8fe104855e2f23825b22b43027eeae33a6c9e593)" to "[821919d2abd6309441dd4b86b752c205baa13971](https://github.com/sagemath/sagetrac-mirror/commit/821919d2abd6309441dd4b86b752c205baa13971)".



---

archive/issue_comments_599862.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/198c6d8f88bb9e5c0fce83746b4d858b9e48bd51\">198c6d8</a></td><td><code>One last try with sage-env</code></td></tr></table>\n",
    "created_at": "2021-10-17T18:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599862",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/198c6d8f88bb9e5c0fce83746b4d858b9e48bd51">198c6d8</a></td><td><code>One last try with sage-env</code></td></tr></table>




---

archive/issue_comments_599863.json:
```json
{
    "body": "**Changing commit** from \"[821919d2abd6309441dd4b86b752c205baa13971](https://github.com/sagemath/sagetrac-mirror/commit/821919d2abd6309441dd4b86b752c205baa13971)\" to \"[198c6d8f88bb9e5c0fce83746b4d858b9e48bd51](https://github.com/sagemath/sagetrac-mirror/commit/198c6d8f88bb9e5c0fce83746b4d858b9e48bd51)\".",
    "created_at": "2021-10-17T18:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599863",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[821919d2abd6309441dd4b86b752c205baa13971](https://github.com/sagemath/sagetrac-mirror/commit/821919d2abd6309441dd4b86b752c205baa13971)" to "[198c6d8f88bb9e5c0fce83746b4d858b9e48bd51](https://github.com/sagemath/sagetrac-mirror/commit/198c6d8f88bb9e5c0fce83746b4d858b9e48bd51)".



---

archive/issue_comments_599864.json:
```json
{
    "body": "**Changing commit** from \"[198c6d8f88bb9e5c0fce83746b4d858b9e48bd51](https://github.com/sagemath/sagetrac-mirror/commit/198c6d8f88bb9e5c0fce83746b4d858b9e48bd51)\" to \"[14023b10709ce26c17ecfda0361677e63b249ff6](https://github.com/sagemath/sagetrac-mirror/commit/14023b10709ce26c17ecfda0361677e63b249ff6)\".",
    "created_at": "2021-10-17T20:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599864",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[198c6d8f88bb9e5c0fce83746b4d858b9e48bd51](https://github.com/sagemath/sagetrac-mirror/commit/198c6d8f88bb9e5c0fce83746b4d858b9e48bd51)" to "[14023b10709ce26c17ecfda0361677e63b249ff6](https://github.com/sagemath/sagetrac-mirror/commit/14023b10709ce26c17ecfda0361677e63b249ff6)".



---

archive/issue_comments_599865.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c04ea499cbb6babaa00c0b4db02bb67601e9afb\">3c04ea4</a></td><td><code>Fix LD_LIBRARY_PATH</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14023b10709ce26c17ecfda0361677e63b249ff6\">14023b1</a></td><td><code>Improve update step</code></td></tr></table>\n",
    "created_at": "2021-10-17T20:53:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599865",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c04ea499cbb6babaa00c0b4db02bb67601e9afb">3c04ea4</a></td><td><code>Fix LD_LIBRARY_PATH</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14023b10709ce26c17ecfda0361677e63b249ff6">14023b1</a></td><td><code>Improve update step</code></td></tr></table>




---

archive/issue_comments_599866.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fbb8a9848f2d2f133522077663e8661c4c2eaab\">4fbb8a9</a></td><td><code>Install git as well</code></td></tr></table>\n",
    "created_at": "2021-10-18T09:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fbb8a9848f2d2f133522077663e8661c4c2eaab">4fbb8a9</a></td><td><code>Install git as well</code></td></tr></table>




---

archive/issue_comments_599867.json:
```json
{
    "body": "**Changing commit** from \"[14023b10709ce26c17ecfda0361677e63b249ff6](https://github.com/sagemath/sagetrac-mirror/commit/14023b10709ce26c17ecfda0361677e63b249ff6)\" to \"[4fbb8a9848f2d2f133522077663e8661c4c2eaab](https://github.com/sagemath/sagetrac-mirror/commit/4fbb8a9848f2d2f133522077663e8661c4c2eaab)\".",
    "created_at": "2021-10-18T09:38:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599867",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[14023b10709ce26c17ecfda0361677e63b249ff6](https://github.com/sagemath/sagetrac-mirror/commit/14023b10709ce26c17ecfda0361677e63b249ff6)" to "[4fbb8a9848f2d2f133522077663e8661c4c2eaab](https://github.com/sagemath/sagetrac-mirror/commit/4fbb8a9848f2d2f133522077663e8661c4c2eaab)".



---

archive/issue_comments_599868.json:
```json
{
    "body": "**Changing commit** from \"[4fbb8a9848f2d2f133522077663e8661c4c2eaab](https://github.com/sagemath/sagetrac-mirror/commit/4fbb8a9848f2d2f133522077663e8661c4c2eaab)\" to \"[bd4684abf0709c5f19054bae3d50ef7d3cf40f29](https://github.com/sagemath/sagetrac-mirror/commit/bd4684abf0709c5f19054bae3d50ef7d3cf40f29)\".",
    "created_at": "2021-10-18T11:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4fbb8a9848f2d2f133522077663e8661c4c2eaab](https://github.com/sagemath/sagetrac-mirror/commit/4fbb8a9848f2d2f133522077663e8661c4c2eaab)" to "[bd4684abf0709c5f19054bae3d50ef7d3cf40f29](https://github.com/sagemath/sagetrac-mirror/commit/bd4684abf0709c5f19054bae3d50ef7d3cf40f29)".



---

archive/issue_comments_599869.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a3628b949fb275a77cd75df1e6fae8d5a28d980\">9a3628b</a></td><td><code>Try to fix strange git error</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd009e77906bd831f3cc73666afcbe15d9bc990d\">dd009e7</a></td><td><code>Small cleanup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd4684abf0709c5f19054bae3d50ef7d3cf40f29\">bd4684a</a></td><td><code>Try with ubuntu hirsute (should speed up things a bit)</code></td></tr></table>\n",
    "created_at": "2021-10-18T11:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599869",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a3628b949fb275a77cd75df1e6fae8d5a28d980">9a3628b</a></td><td><code>Try to fix strange git error</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd009e77906bd831f3cc73666afcbe15d9bc990d">dd009e7</a></td><td><code>Small cleanup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd4684abf0709c5f19054bae3d50ef7d3cf40f29">bd4684a</a></td><td><code>Try with ubuntu hirsute (should speed up things a bit)</code></td></tr></table>




---

archive/issue_comments_599870.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b74bd621de62b289bca94cdd65bb17e48bde858\">9b74bd6</a></td><td><code>Use deadsnakes action to setup python on linux</code></td></tr></table>\n",
    "created_at": "2021-10-18T12:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599870",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b74bd621de62b289bca94cdd65bb17e48bde858">9b74bd6</a></td><td><code>Use deadsnakes action to setup python on linux</code></td></tr></table>




---

archive/issue_comments_599871.json:
```json
{
    "body": "**Changing commit** from \"[bd4684abf0709c5f19054bae3d50ef7d3cf40f29](https://github.com/sagemath/sagetrac-mirror/commit/bd4684abf0709c5f19054bae3d50ef7d3cf40f29)\" to \"[9b74bd621de62b289bca94cdd65bb17e48bde858](https://github.com/sagemath/sagetrac-mirror/commit/9b74bd621de62b289bca94cdd65bb17e48bde858)\".",
    "created_at": "2021-10-18T12:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599871",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bd4684abf0709c5f19054bae3d50ef7d3cf40f29](https://github.com/sagemath/sagetrac-mirror/commit/bd4684abf0709c5f19054bae3d50ef7d3cf40f29)" to "[9b74bd621de62b289bca94cdd65bb17e48bde858](https://github.com/sagemath/sagetrac-mirror/commit/9b74bd621de62b289bca94cdd65bb17e48bde858)".



---

archive/issue_comments_599872.json:
```json
{
    "body": "**Changing commit** from \"[9b74bd621de62b289bca94cdd65bb17e48bde858](https://github.com/sagemath/sagetrac-mirror/commit/9b74bd621de62b289bca94cdd65bb17e48bde858)\" to \"[dd009e77906bd831f3cc73666afcbe15d9bc990d](https://github.com/sagemath/sagetrac-mirror/commit/dd009e77906bd831f3cc73666afcbe15d9bc990d)\".",
    "created_at": "2021-10-18T12:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599872",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9b74bd621de62b289bca94cdd65bb17e48bde858](https://github.com/sagemath/sagetrac-mirror/commit/9b74bd621de62b289bca94cdd65bb17e48bde858)" to "[dd009e77906bd831f3cc73666afcbe15d9bc990d](https://github.com/sagemath/sagetrac-mirror/commit/dd009e77906bd831f3cc73666afcbe15d9bc990d)".



---

archive/issue_comments_599873.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** New commits:",
    "created_at": "2021-10-18T12:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599873",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** New commits:



---

archive/issue_comments_599874.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4adc4afa6d19187699414b364748a047775f00d8\">4adc4af</a></td><td><code>Disable update mode again</code></td></tr></table>\n",
    "created_at": "2021-10-18T23:20:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599874",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4adc4afa6d19187699414b364748a047775f00d8">4adc4af</a></td><td><code>Disable update mode again</code></td></tr></table>




---

archive/issue_comments_599875.json:
```json
{
    "body": "**Changing commit** from \"[dd009e77906bd831f3cc73666afcbe15d9bc990d](https://github.com/sagemath/sagetrac-mirror/commit/dd009e77906bd831f3cc73666afcbe15d9bc990d)\" to \"[4adc4afa6d19187699414b364748a047775f00d8](https://github.com/sagemath/sagetrac-mirror/commit/4adc4afa6d19187699414b364748a047775f00d8)\".",
    "created_at": "2021-10-18T23:20:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599875",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dd009e77906bd831f3cc73666afcbe15d9bc990d](https://github.com/sagemath/sagetrac-mirror/commit/dd009e77906bd831f3cc73666afcbe15d9bc990d)" to "[4adc4afa6d19187699414b364748a047775f00d8](https://github.com/sagemath/sagetrac-mirror/commit/4adc4afa6d19187699414b364748a047775f00d8)".



---

archive/issue_comments_599876.json:
```json
{
    "body": "<a id='comment:476'></a>\nReplying to [mkoeppe](#comment%3A466):\n> I think all the troubles that you are having with the environment are the result of using tox to build the SAGE_LOCAL but then not activating the tox environment.\n> A way out of this is to go through #31535\n> \n\n\nIt was actually something strange going on on my system. After make distclean I could run sage-env locally and then also in the github action. Sorry for the confusion and thanks for your help.\n\nThe update mode was a bit more work than I'd liked but its running now. See https://github.com/sagemath/sagetrac-mirror/runs/3926515272?check_suite_focus=true for an example output. It can be activated by running the workflow manually from the github interface (after it is merged into the default branch).",
    "created_at": "2021-10-18T23:26:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599876",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:476'></a>
Replying to [mkoeppe](#comment%3A466):
> I think all the troubles that you are having with the environment are the result of using tox to build the SAGE_LOCAL but then not activating the tox environment.
> A way out of this is to go through #31535
> 


It was actually something strange going on on my system. After make distclean I could run sage-env locally and then also in the github action. Sorry for the confusion and thanks for your help.

The update mode was a bit more work than I'd liked but its running now. See https://github.com/sagemath/sagetrac-mirror/runs/3926515272?check_suite_focus=true for an example output. It can be activated by running the workflow manually from the github interface (after it is merged into the default branch).



---

archive/issue_comments_599877.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef\">50bd3ce</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-10-21T07:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599877",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef">50bd3ce</a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599878.json:
```json
{
    "body": "**Changing commit** from \"[4adc4afa6d19187699414b364748a047775f00d8](https://github.com/sagemath/sagetrac-mirror/commit/4adc4afa6d19187699414b364748a047775f00d8)\" to \"[50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef](https://github.com/sagemath/sagetrac-mirror/commit/50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef)\".",
    "created_at": "2021-10-21T07:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599878",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4adc4afa6d19187699414b364748a047775f00d8](https://github.com/sagemath/sagetrac-mirror/commit/4adc4afa6d19187699414b364748a047775f00d8)" to "[50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef](https://github.com/sagemath/sagetrac-mirror/commit/50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef)".



---

archive/issue_comments_599879.json:
```json
{
    "body": "<a id='comment:8'></a>\nAnything left to do here or is it good to go?",
    "created_at": "2021-11-18T12:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599879",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>
Anything left to do here or is it good to go?



---

archive/issue_comments_599880.json:
```json
{
    "body": "<a id='comment:9'></a>\nI tried following the instructions in the ticket description, and in particular the block of commands\n\n```\n./bootstrap\n./configure --enable-editable\nmake build-local\ncd src\nmkdir .venv\npipenv install --dev --ignore-pipfile\npipenv run sage-runtests --all\n```\nThe last command fails with\n\n```\nError: the command sage-runtests could not be found within PATH or Pipfile's [scripts].\n```",
    "created_at": "2021-11-18T19:33:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599880",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>
I tried following the instructions in the ticket description, and in particular the block of commands

```
./bootstrap
./configure --enable-editable
make build-local
cd src
mkdir .venv
pipenv install --dev --ignore-pipfile
pipenv run sage-runtests --all
```
The last command fails with

```
Error: the command sage-runtests could not be found within PATH or Pipfile's [scripts].
```



---

archive/issue_comments_599881.json:
```json
{
    "body": "<a id='comment:0'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/148cc729c93cd164b7155a4404ec09c60d5154a6\">148cc72</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-11-18T22:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:0'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/148cc729c93cd164b7155a4404ec09c60d5154a6">148cc72</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599882.json:
```json
{
    "body": "**Changing commit** from \"[50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef](https://github.com/sagemath/sagetrac-mirror/commit/50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef)\" to \"[148cc729c93cd164b7155a4404ec09c60d5154a6](https://github.com/sagemath/sagetrac-mirror/commit/148cc729c93cd164b7155a4404ec09c60d5154a6)\".",
    "created_at": "2021-11-18T22:34:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef](https://github.com/sagemath/sagetrac-mirror/commit/50bd3ce3eadc344b8c8067a2bf3e7e659c39d1ef)" to "[148cc729c93cd164b7155a4404ec09c60d5154a6](https://github.com/sagemath/sagetrac-mirror/commit/148cc729c93cd164b7155a4404ec09c60d5154a6)".



---

archive/issue_comments_599883.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/148cc729c93cd164b7155a4404ec09c60d5154a6\">148cc72</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2021-11-19T12:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599883",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/148cc729c93cd164b7155a4404ec09c60d5154a6">148cc72</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_comments_599884.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -9,10 +9,18 @@\n cd src\n mkdir .venv\n pipenv install --dev --ignore-pipfile\n+pipenv run pip install -e . --upgrade --exists-action=i --no-build-isolation\n pipenv run sage-runtests --all\n ```\n Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.\n It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.\n+Moreover, the installation of some packages might fail (depending on your system configuration). In this case one can manually build it using sage and then install the sage-built wheel in the pipenv. For example,\n+\n+```\n+make fpylll\n+cd src && pipenv run pip install <sage>/local/var/lib/sage/venv-python3.8/var/lib/sage/wheels/fpylll-0.5.6-cp38-cp38-linux_x86_64.whl\n+```\n+\n \n The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace\n Most tests are working, but a few are failing. Only a few tests are failing:\n``````\n",
    "created_at": "2021-11-19T12:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599884",
    "user": "https://github.com/tobiasdiez"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -9,10 +9,18 @@
 cd src
 mkdir .venv
 pipenv install --dev --ignore-pipfile
+pipenv run pip install -e . --upgrade --exists-action=i --no-build-isolation
 pipenv run sage-runtests --all
 ```
 Instead of the first three commands, one can of course also use `tox -e local-sudo-standard build-local`.
 It generates a virtual env in `src/.venv` that contains all necessary Python packages, and an editable install of sage.
+Moreover, the installation of some packages might fail (depending on your system configuration). In this case one can manually build it using sage and then install the sage-built wheel in the pipenv. For example,
+
+```
+make fpylll
+cd src && pipenv run pip install <sage>/local/var/lib/sage/venv-python3.8/var/lib/sage/wheels/fpylll-0.5.6-cp38-cp38-linux_x86_64.whl
+```
+
 
 The output of the added GH workflow is available here: https://github.com/sagemath/sagetrac-mirror/actions?query=workflow%3A%22Build+%26+Test+using+pipenv%22+branch%3Apublic%2Fbuild%2Finplace
 Most tests are working, but a few are failing. Only a few tests are failing:
``````




---

archive/issue_comments_599885.json:
```json
{
    "body": "<a id='comment:2'></a>\nSorry for not testing it after my last merge of the develop branch.\n\nIt turned out there is a problem (only reported by pipenv using the `--verbose` flag) during the installation of sage in the virtual environment. In fact, it turns out that this is not related at all to pipenv but a general issue with the installation using build isolution, so I've opened #32904 for this.\n\nFor pipenv this can be fixed by running \n\n```\npipenv run pip install -e . --upgrade --exists-action=i --no-build-isolation\n``` \nafter the initial build of the venv. I've changed the ticket description accordingly.",
    "created_at": "2021-11-19T12:50:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599885",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:2'></a>
Sorry for not testing it after my last merge of the develop branch.

It turned out there is a problem (only reported by pipenv using the `--verbose` flag) during the installation of sage in the virtual environment. In fact, it turns out that this is not related at all to pipenv but a general issue with the installation using build isolution, so I've opened #32904 for this.

For pipenv this can be fixed by running 

```
pipenv run pip install -e . --upgrade --exists-action=i --no-build-isolation
``` 
after the initial build of the venv. I've changed the ticket description accordingly.



---

archive/issue_comments_599886.json:
```json
{
    "body": "**Changing commit** from \"[148cc729c93cd164b7155a4404ec09c60d5154a6](https://github.com/sagemath/sagetrac-mirror/commit/148cc729c93cd164b7155a4404ec09c60d5154a6)\" to \"[0b0437fc7a2df0bb34873e6d0d881a775e1ebb09](https://github.com/sagemath/sagetrac-mirror/commit/0b0437fc7a2df0bb34873e6d0d881a775e1ebb09)\".",
    "created_at": "2021-11-19T12:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[148cc729c93cd164b7155a4404ec09c60d5154a6](https://github.com/sagemath/sagetrac-mirror/commit/148cc729c93cd164b7155a4404ec09c60d5154a6)" to "[0b0437fc7a2df0bb34873e6d0d881a775e1ebb09](https://github.com/sagemath/sagetrac-mirror/commit/0b0437fc7a2df0bb34873e6d0d881a775e1ebb09)".



---

archive/issue_comments_599887.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b0437fc7a2df0bb34873e6d0d881a775e1ebb09\">0b0437f</a></td><td><code>Add sage-setup as editable install, update lock</code></td></tr></table>\n",
    "created_at": "2021-11-19T12:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b0437fc7a2df0bb34873e6d0d881a775e1ebb09">0b0437f</a></td><td><code>Add sage-setup as editable install, update lock</code></td></tr></table>




---

archive/issue_comments_599888.json:
```json
{
    "body": "<a id='comment:4'></a>\nI don't have any opinion about the code, so I am not the right person to review this, but I did get a lot of doctest failures when following the directions in the ticket:\n\n```\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/env.py  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/superseded.py  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/cython.py  # 21 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/inline_fortran.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/cachefunc.pyx  # 54 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/session.pyx  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/randstate.pyx  # 25 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/inherit_comparison.pyx  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/sagedoc.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/nested_class.pyx  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/lazy_attribute.pyx  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/sageinspect.py  # 35 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/sage_eval.py  # 7 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/persist.pyx  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/elliptic_curves/ell_rational_field.py  # 21 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/elliptic_curves/lseries_ell.py  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/generic/algebraic_scheme.py  # 13 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/generic/homset.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/fano_variety.py  # 137 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/divisor_class.pyx  # 50 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/points.py  # 108 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/library.py  # 74 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/toric_subscheme.py  # 104 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/variety.py  # 229 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/divisor.py  # 234 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/weierstrass.py  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/weierstrass_covering.py  # 9 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/chow_group.py  # 159 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/homset.py  # 72 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/morphism.py  # 194 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/sheaf/klyachko.py  # 101 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/sheaf/constructor.py  # 29 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/crypto/classical.py  # 16 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/parallel/decorate.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/graphics.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/contour_plot.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/line.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/arrow.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/tachyon.py  # 24 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/index_face_set.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/platonic.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/base.pyx  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/implicit_surface.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/implicit_plot3d.py  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/parametric_plot3d.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/parametric_surface.pyx  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/manifolds/differentiable/vectorfield.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/manifolds/differentiable/tangent_vector.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/constellation.py  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/tutorial.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/quickref.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/permutation.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/designs/ext_rep.py  # Killed due to abort\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/posets/posets.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/root_system/weyl_group.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/matrices/latin.py  # 45 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/lfunctions/zero_sums.pyx  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/lfunctions/lcalc.py  # 7 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/lfunctions/sympow.py  # 10 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/ext/memory_allocator.pxd  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/ext/memory_allocator.pyx  # 7 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/doctest/control.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/doctest/forker.py  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/features/__init__.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/benchmark.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/cmdline.py  # 8 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/gap_packages.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/judson-abstract-algebra/groups-sage.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/judson-abstract-algebra/cyclic-sage.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/judson-abstract-algebra/homomorph-sage.py  # 11 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/judson-abstract-algebra/sylow-sage.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/computational-mathematics-with-sagemath/combinat_doctest.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/algebras/orlik_terao.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/algebras/orlik_solomon.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/repl/interpreter.py  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/repl/interface_magic.py  # 7 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/repl/ipython_extension.py  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/repl/load.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/galois_group.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/class_function.py  # 137 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/generic.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/symgp_conjugacy_class.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/permgroup_morphism.py  # 13 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/permgroup.py  # 44 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/cubegroup.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/constructor.py  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/permgroup_element.pyx  # 10 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/partn_ref/data_structures.pyx  # 9 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/abelian_gps/dual_abelian_group_element.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/abelian_gps/abelian_group_morphism.py  # 15 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/abelian_gps/abelian_group.py  # 64 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/docs/instancedoc.pyx  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/arith/misc.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/arith/long.pxd  # 14 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/libs/gap/element.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/libs/gap/libgap.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/dict_del_by_value.pyx  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/wrapperdescr.pxd  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/string.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/cython_metaclass.pyx  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/getattr.pyx  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/abvar/abvar.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/arithgroup/congroup_gamma0.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/arithgroup/congroup_gammaH.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/arithgroup/arithgroup_perm.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/modform/constructor.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/hecke/submodule.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/functions/other.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/functions/exp_integral.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/functions/generalized.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/functions/piecewise.py  # 13 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/binary_code.pyx  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/databases.py  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/linear_code.py  # 22 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/golay_code.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/kasami_codes.pyx  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/two_weight_db.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/code_constructions.py  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/linear_code_no_metric.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/goppa_code.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/integer_ring.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/integer.pyx  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/infinity.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/integer_fake.pxd  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/tate_algebra_ideal.pyx  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/rational_field.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/number_field/galois_group.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/number_field/number_field.py  # 26 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/number_field/number_field_element.pyx  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/number_field/totallyreal_rel.py  # 7 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/polynomial_ring.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/polynomial_element.pyx  # 8 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/ore_polynomial_element.pyx  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/multi_polynomial.pyx  # 8 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/multi_polynomial_ring_base.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/groebner_fan.py  # 118 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/galois_group.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/element_pari_ffelt.pyx  # 11 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/element_givaro.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/integer_mod_ring.py  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/integer_mod.pyx  # 4 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/finite_field_givaro.py  # 7 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/graphs/connectivity.pyx  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/graphs/generic_graph.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/graphs/graph_decompositions/fast_digraph.pyx  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/expression.pyx  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/constants.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/pynac.pxi  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/integration/integral.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/integration/external.py  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/cone_catalog.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/fan_morphism.py  # 92 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/fan.py  # 85 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/toric_plotter.py  # 12 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/lattice_polytope.py  # 196 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/cone.py  # 17 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/fan_isomorphism.py  # 13 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/ppl_lattice_polytope.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/base_ZZ.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/backend_normaliz.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/palp_database.py  # 23 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/base.py  # 7 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/triangulation/element.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/calculus/calculus.py  # 13 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modules/free_module_element.pyx  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modules/filtered_vector_space.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modules/with_basis/invariant.py  # 74 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modules/with_basis/representation.py  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/parent_old.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/element.pyx  # 37 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/factory.pyx  # 8 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/element.pxd  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/parent.pyx  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/categories/primer.py  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/categories/finite_dimensional_modules_with_basis.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/categories/pushout.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/categories/modules_with_basis.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/matrix/matrix1.pyx  # 13 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/tachyon.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/expect.py  # 49 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/mwrank.py  # 9 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/ecm.py  # 12 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/qsieve.py  # 7 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/interface.py  # 31 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/gap3.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/gap.py  # 143 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/tests.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/giac.py  # 140 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage_setup/find.py  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage_docbuild/__init__.py  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ja/tutorial/tour_groups.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ja/tutorial/tour_advanced.rst  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ja/tutorial/interfaces.rst  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ru/tutorial/tour_groups.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ru/tutorial/tour_advanced.rst  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ru/tutorial/interfaces.rst  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/pt/tutorial/tour_groups.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/pt/tutorial/tour_advanced.rst  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/pt/tutorial/interfaces.rst  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/de/tutorial/tour_groups.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/de/tutorial/tour_advanced.rst  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/de/tutorial/interfaces.rst  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/fr/tutorial/tour_groups.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/fr/tutorial/tour_advanced.rst  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/fr/tutorial/interfaces.rst  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/es/tutorial/tour_groups.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/developer/coding_in_other.rst  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/tutorial/tour_groups.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/tutorial/tour_advanced.rst  # 2 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/tutorial/interfaces.rst  # 5 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/rep_theory.rst  # 18 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/polynomials.rst  # 13 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/rings.rst  # 6 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/linear_algebra.rst  # 3 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/groups.rst  # 18 doctests failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/thematic_tutorials/coding_theory.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/thematic_tutorials/explicit_methods_in_number_theory/elliptic_curves.rst  # 1 doctest failed\nsage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/thematic_tutorials/lie/weyl_groups.rst  # 1 doctest failed\n```\nSome come from\n\n```\npkgconfig.pkgconfig.PackageNotFoundError: fflas-ffpack not found\n```\nand I also see some instances of errors like\n\n```\nFile \"doc/es/tutorial/tour_groups.rst\", line 29, in doc.es.tutorial.tour_groups\nFailed example:\n    G.random_element()           # random output (resultado aleatorio)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/gap.py\", line 1155, in _start\n        raise OSError(\"GAP workspace too old\")\n    OSError: GAP workspace too old\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/expect.py\", line 492, in _start\n        self._expect = SageSpawn(cmd,\n      File \"sage/interfaces/sagespawn.pyx\", line 65, in sage.interfaces.sagespawn.SageSpawn.__init__\n        with ContainChildren(silent=True):\n      File \"sage/interfaces/sagespawn.pyx\", line 66, in sage.interfaces.sagespawn.SageSpawn.__init__\n        spawn.__init__(self, *args, **kwds)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/.venv/lib/python3.9/site-packages/pexpect/pty_spawn.py\", line 205, in __init__\n        self._spawn(command, args, preexec_fn, dimensions)\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/.venv/lib/python3.9/site-packages/pexpect/pty_spawn.py\", line 276, in _spawn\n        raise ExceptionPexpect('The command was not found or was not ' +\n    pexpect.exceptions.ExceptionPexpect: The command was not found or was not executable: gap.\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/gap.py\", line 654, in _eval_line\n        self._start()\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/gap.py\", line 1166, in _start\n        Expect._start(self, \"Failed to start GAP.\")\n      File \"/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/expect.py\", line 503, in _start\n        raise RuntimeError(\"unable to start %s because the command %r failed: %s\\n%s\" %\n    RuntimeError: unable to start gap because the command 'gap -r -b -p -T -E -m 64m  /Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/ext_data/gap/sage.g' failed: The command was not found or was not executable: gap.\n```\nI haven't looked at all of the failures to see what else is there.",
    "created_at": "2021-11-19T22:43:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599888",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
I don't have any opinion about the code, so I am not the right person to review this, but I did get a lot of doctest failures when following the directions in the ticket:

```
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/env.py  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/superseded.py  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/cython.py  # 21 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/inline_fortran.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/cachefunc.pyx  # 54 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/session.pyx  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/randstate.pyx  # 25 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/inherit_comparison.pyx  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/sagedoc.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/nested_class.pyx  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/lazy_attribute.pyx  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/sageinspect.py  # 35 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/sage_eval.py  # 7 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/misc/persist.pyx  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/elliptic_curves/ell_rational_field.py  # 21 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/elliptic_curves/lseries_ell.py  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/generic/algebraic_scheme.py  # 13 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/generic/homset.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/fano_variety.py  # 137 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/divisor_class.pyx  # 50 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/points.py  # 108 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/library.py  # 74 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/toric_subscheme.py  # 104 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/variety.py  # 229 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/divisor.py  # 234 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/weierstrass.py  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/weierstrass_covering.py  # 9 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/chow_group.py  # 159 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/homset.py  # 72 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/morphism.py  # 194 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/sheaf/klyachko.py  # 101 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/schemes/toric/sheaf/constructor.py  # 29 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/crypto/classical.py  # 16 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/parallel/decorate.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/graphics.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/contour_plot.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/line.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/arrow.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/tachyon.py  # 24 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/index_face_set.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/platonic.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/base.pyx  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/implicit_surface.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/implicit_plot3d.py  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/parametric_plot3d.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/plot/plot3d/parametric_surface.pyx  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/manifolds/differentiable/vectorfield.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/manifolds/differentiable/tangent_vector.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/constellation.py  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/tutorial.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/quickref.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/permutation.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/designs/ext_rep.py  # Killed due to abort
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/posets/posets.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/root_system/weyl_group.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/combinat/matrices/latin.py  # 45 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/lfunctions/zero_sums.pyx  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/lfunctions/lcalc.py  # 7 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/lfunctions/sympow.py  # 10 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/ext/memory_allocator.pxd  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/ext/memory_allocator.pyx  # 7 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/doctest/control.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/doctest/forker.py  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/features/__init__.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/benchmark.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/cmdline.py  # 8 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/gap_packages.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/judson-abstract-algebra/groups-sage.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/judson-abstract-algebra/cyclic-sage.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/judson-abstract-algebra/homomorph-sage.py  # 11 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/judson-abstract-algebra/sylow-sage.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/tests/books/computational-mathematics-with-sagemath/combinat_doctest.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/algebras/orlik_terao.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/algebras/orlik_solomon.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/repl/interpreter.py  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/repl/interface_magic.py  # 7 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/repl/ipython_extension.py  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/repl/load.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/galois_group.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/class_function.py  # 137 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/generic.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/symgp_conjugacy_class.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/permgroup_morphism.py  # 13 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/permgroup.py  # 44 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/cubegroup.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/constructor.py  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/permgroup_element.pyx  # 10 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/perm_gps/partn_ref/data_structures.pyx  # 9 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/abelian_gps/dual_abelian_group_element.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/abelian_gps/abelian_group_morphism.py  # 15 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/groups/abelian_gps/abelian_group.py  # 64 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/docs/instancedoc.pyx  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/arith/misc.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/arith/long.pxd  # 14 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/libs/gap/element.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/libs/gap/libgap.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/dict_del_by_value.pyx  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/wrapperdescr.pxd  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/string.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/cython_metaclass.pyx  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/cpython/getattr.pyx  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/abvar/abvar.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/arithgroup/congroup_gamma0.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/arithgroup/congroup_gammaH.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/arithgroup/arithgroup_perm.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/modform/constructor.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modular/hecke/submodule.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/functions/other.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/functions/exp_integral.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/functions/generalized.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/functions/piecewise.py  # 13 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/binary_code.pyx  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/databases.py  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/linear_code.py  # 22 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/golay_code.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/kasami_codes.pyx  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/two_weight_db.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/code_constructions.py  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/linear_code_no_metric.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/coding/goppa_code.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/integer_ring.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/integer.pyx  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/infinity.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/integer_fake.pxd  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/tate_algebra_ideal.pyx  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/rational_field.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/number_field/galois_group.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/number_field/number_field.py  # 26 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/number_field/number_field_element.pyx  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/number_field/totallyreal_rel.py  # 7 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/polynomial_ring.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/polynomial_element.pyx  # 8 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/ore_polynomial_element.pyx  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/multi_polynomial.pyx  # 8 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/multi_polynomial_ring_base.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/multi_polynomial_ideal.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/polynomial/groebner_fan.py  # 118 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/galois_group.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/element_pari_ffelt.pyx  # 11 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/element_givaro.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/integer_mod_ring.py  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/integer_mod.pyx  # 4 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/rings/finite_rings/finite_field_givaro.py  # 7 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/graphs/connectivity.pyx  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/graphs/generic_graph.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/graphs/graph_decompositions/fast_digraph.pyx  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/expression.pyx  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/constants.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/pynac.pxi  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/integration/integral.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/symbolic/integration/external.py  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/cone_catalog.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/fan_morphism.py  # 92 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/fan.py  # 85 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/toric_plotter.py  # 12 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/lattice_polytope.py  # 196 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/cone.py  # 17 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/fan_isomorphism.py  # 13 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/ppl_lattice_polytope.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/base_ZZ.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/backend_normaliz.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/palp_database.py  # 23 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/polyhedron/base.py  # 7 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/geometry/triangulation/element.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/calculus/calculus.py  # 13 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modules/free_module_element.pyx  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modules/filtered_vector_space.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modules/with_basis/invariant.py  # 74 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/modules/with_basis/representation.py  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/parent_old.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/element.pyx  # 37 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/factory.pyx  # 8 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/element.pxd  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/structure/parent.pyx  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/categories/primer.py  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/categories/finite_dimensional_modules_with_basis.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/categories/pushout.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/categories/modules_with_basis.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/matrix/matrix1.pyx  # 13 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/tachyon.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/expect.py  # 49 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/mwrank.py  # 9 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/ecm.py  # 12 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/qsieve.py  # 7 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/interface.py  # 31 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/gap3.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/gap.py  # 143 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/tests.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage/interfaces/giac.py  # 140 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage_setup/find.py  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 sage_docbuild/__init__.py  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ja/tutorial/tour_groups.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ja/tutorial/tour_advanced.rst  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ja/tutorial/interfaces.rst  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ru/tutorial/tour_groups.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ru/tutorial/tour_advanced.rst  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/ru/tutorial/interfaces.rst  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/pt/tutorial/tour_groups.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/pt/tutorial/tour_advanced.rst  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/pt/tutorial/interfaces.rst  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/de/tutorial/tour_groups.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/de/tutorial/tour_advanced.rst  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/de/tutorial/interfaces.rst  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/fr/tutorial/tour_groups.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/fr/tutorial/tour_advanced.rst  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/fr/tutorial/interfaces.rst  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/es/tutorial/tour_groups.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/developer/coding_in_other.rst  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/tutorial/tour_groups.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/tutorial/tour_advanced.rst  # 2 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/tutorial/interfaces.rst  # 5 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/rep_theory.rst  # 18 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/polynomials.rst  # 13 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/rings.rst  # 6 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/linear_algebra.rst  # 3 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/constructions/groups.rst  # 18 doctests failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/thematic_tutorials/coding_theory.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/thematic_tutorials/explicit_methods_in_number_theory/elliptic_curves.rst  # 1 doctest failed
sage -t --warn-long 64.4 --random-seed=60140155690716510157027757823734981182 doc/en/thematic_tutorials/lie/weyl_groups.rst  # 1 doctest failed
```
Some come from

```
pkgconfig.pkgconfig.PackageNotFoundError: fflas-ffpack not found
```
and I also see some instances of errors like

```
File "doc/es/tutorial/tour_groups.rst", line 29, in doc.es.tutorial.tour_groups
Failed example:
    G.random_element()           # random output (resultado aleatorio)
Exception raised:
    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/gap.py", line 1155, in _start
        raise OSError("GAP workspace too old")
    OSError: GAP workspace too old

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/expect.py", line 492, in _start
        self._expect = SageSpawn(cmd,
      File "sage/interfaces/sagespawn.pyx", line 65, in sage.interfaces.sagespawn.SageSpawn.__init__
        with ContainChildren(silent=True):
      File "sage/interfaces/sagespawn.pyx", line 66, in sage.interfaces.sagespawn.SageSpawn.__init__
        spawn.__init__(self, *args, **kwds)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/.venv/lib/python3.9/site-packages/pexpect/pty_spawn.py", line 205, in __init__
        self._spawn(command, args, preexec_fn, dimensions)
      File "/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/.venv/lib/python3.9/site-packages/pexpect/pty_spawn.py", line 276, in _spawn
        raise ExceptionPexpect('The command was not found or was not ' +
    pexpect.exceptions.ExceptionPexpect: The command was not found or was not executable: gap.

    During handling of the above exception, another exception occurred:

    Traceback (most recent call last):
      File "/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/gap.py", line 654, in _eval_line
        self._start()
      File "/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/gap.py", line 1166, in _start
        Expect._start(self, "Failed to start GAP.")
      File "/Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/interfaces/expect.py", line 503, in _start
        raise RuntimeError("unable to start %s because the command %r failed: %s\n%s" %
    RuntimeError: unable to start gap because the command 'gap -r -b -p -T -E -m 64m  /Users/jpalmier/Desktop/Sage/sage_builds/TESTING/sage-9.5.beta6/src/sage/ext_data/gap/sage.g' failed: The command was not found or was not executable: gap.
```
I haven't looked at all of the failures to see what else is there.



---

archive/issue_comments_599889.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks for testing!\n\nSome failing tests are to be expected since pipenv is rather different to the existing way to use sage (as part of sage-the-distribution). But I think for the modularization effort this ticket gives a helpful testcase how sage performs in a \"pip-installable\" environment.\n\nI also had problems with gap (for the github action) and fixed it by manually setting the SAEG_LOCAL env variable. I guess there is potential for improvement as follow-up tickets but I'm not the right person to work on this as I'm not familiar with these parts of sage.",
    "created_at": "2021-11-20T12:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599889",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>
Thanks for testing!

Some failing tests are to be expected since pipenv is rather different to the existing way to use sage (as part of sage-the-distribution). But I think for the modularization effort this ticket gives a helpful testcase how sage performs in a "pip-installable" environment.

I also had problems with gap (for the github action) and fixed it by manually setting the SAEG_LOCAL env variable. I guess there is potential for improvement as follow-up tickets but I'm not the right person to work on this as I'm not familiar with these parts of sage.



---

archive/issue_events_088681.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88681"
}
```



---

archive/issue_events_088682.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:53:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88682"
}
```



---

archive/issue_comments_599890.json:
```json
{
    "body": "<a id='comment:6'></a>\nStalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.",
    "created_at": "2021-12-18T19:53:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599890",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Stalled in `needs_review` or `needs_info`; likely won't make it into Sage 9.5.



---

archive/issue_comments_599891.json:
```json
{
    "body": "**Changing commit** from \"[0b0437fc7a2df0bb34873e6d0d881a775e1ebb09](https://github.com/sagemath/sagetrac-mirror/commit/0b0437fc7a2df0bb34873e6d0d881a775e1ebb09)\" to \"[c736e0cbccc8ddb9cc8359a48094aa3181b881fa](https://github.com/sagemath/sagetrac-mirror/commit/c736e0cbccc8ddb9cc8359a48094aa3181b881fa)\".",
    "created_at": "2022-01-03T12:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0b0437fc7a2df0bb34873e6d0d881a775e1ebb09](https://github.com/sagemath/sagetrac-mirror/commit/0b0437fc7a2df0bb34873e6d0d881a775e1ebb09)" to "[c736e0cbccc8ddb9cc8359a48094aa3181b881fa](https://github.com/sagemath/sagetrac-mirror/commit/c736e0cbccc8ddb9cc8359a48094aa3181b881fa)".



---

archive/issue_comments_599892.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c736e0cbccc8ddb9cc8359a48094aa3181b881fa\">c736e0c</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>\n",
    "created_at": "2022-01-03T12:21:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c736e0cbccc8ddb9cc8359a48094aa3181b881fa">c736e0c</a></td><td><code>Merge branch 'develop' of https://github.com/sagemath/sage into public/build/inplace</code></td></tr></table>




---

archive/issue_events_088683.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88683"
}
```



---

archive/issue_events_088684.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T17:54:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88684"
}
```



---

archive/issue_events_088685.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88685"
}
```



---

archive/issue_events_088686.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30371#event-88686"
}
```



---

archive/issue_comments_599893.json:
```json
{
    "body": "<a id='comment:0'></a>\nneeds a rebase",
    "created_at": "2022-12-04T17:52:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30371",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30371#issuecomment-599893",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:0'></a>
needs a rebase
