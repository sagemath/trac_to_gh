# Issue 30244: Use _matmul_ operator (@) for matrix multiplication, map composition, tensor contraction

archive/issues_030007.json:
```json
{
    "body": "#22760 added support for `__matmul__` in the coercion model.\n\nWe should start using it.\n\nFirst step: Review the semantics of this operator in major Python software for matrix and tensor computation (NumPy, Numba, TensorFlow, PyTorch, ...) so that we do not paint ourselves into a corner.\n\nFollow-up tickets:\n- #32212 `sage.geometry.hyperbolic_space`\n\n\n\nCC:  @tscrim @egourgoulhon\n\nAuthor: Matthias Koeppe\n\nBranch: u/mkoeppe/use__matmul__operator____\n\nStatus: needs_work\n\nCommit: da5104cc5c3b00d2ccc68b76b65c2d1c2c56fa98\n\nIssue created by migration from https://trac.sagemath.org/ticket/30244\n\n",
    "created_at": "2020-07-29T01:15:51Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Use _matmul_ operator (@) for matrix multiplication, map composition, tensor contraction",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30244",
    "user": "https://github.com/mkoeppe"
}
```
#22760 added support for `__matmul__` in the coercion model.

We should start using it.

First step: Review the semantics of this operator in major Python software for matrix and tensor computation (NumPy, Numba, TensorFlow, PyTorch, ...) so that we do not paint ourselves into a corner.

Follow-up tickets:
- #32212 `sage.geometry.hyperbolic_space`



CC:  @tscrim @egourgoulhon

Author: Matthias Koeppe

Branch: u/mkoeppe/use__matmul__operator____

Status: needs_work

Commit: da5104cc5c3b00d2ccc68b76b65c2d1c2c56fa98

Issue created by migration from https://trac.sagemath.org/ticket/30244





---

archive/issue_comments_454759.json:
```json
{
    "body": "<a id='comment:1'></a>I think in most cases we *don't* need it. In a matrix algebra, it's pretty clear that multiplication means matrix multiplication; not Hadamard product.\n\nThe first place I'd see a possible application is for self-maps of a ring, where one may want to consider both composition and point-wise products.",
    "created_at": "2020-07-30T07:29:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454759",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:1'></a>I think in most cases we *don't* need it. In a matrix algebra, it's pretty clear that multiplication means matrix multiplication; not Hadamard product.

The first place I'd see a possible application is for self-maps of a ring, where one may want to consider both composition and point-wise products.



---

archive/issue_comments_454760.json:
```json
{
    "body": "<a id='comment:2'></a>Replying to [comment:1 nbruin]:\n> The first place I'd see a possible application is for self-maps of a ring, where one may want to consider both composition and point-wise products.\n\n\n+1. Wondering now if we need a category of `@`-itive semigroups.",
    "created_at": "2020-07-30T10:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454760",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Replying to [comment:1 nbruin]:
> The first place I'd see a possible application is for self-maps of a ring, where one may want to consider both composition and point-wise products.


+1. Wondering now if we need a category of `@`-itive semigroups.



---

archive/issue_comments_454761.json:
```json
{
    "body": "<a id='comment:3'></a>I think using ``@`` for tensor products would be nicer than `tensor([M1,M2,M3])`. Aside from the fact that it's shorter, Sage's current implementation is a bit of a mess. For example, I can never remember that it should be `tensor([M1, M2, M3])`, not `tensor(M1, M2, M3)`, or you could use `M1.tensor(M2, M3)` but not `M1.tensor([M2, M3])`.",
    "created_at": "2020-07-30T17:03:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454761",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>I think using ``@`` for tensor products would be nicer than `tensor([M1,M2,M3])`. Aside from the fact that it's shorter, Sage's current implementation is a bit of a mess. For example, I can never remember that it should be `tensor([M1, M2, M3])`, not `tensor(M1, M2, M3)`, or you could use `M1.tensor(M2, M3)` but not `M1.tensor([M2, M3])`.



---

archive/issue_comments_454762.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 jhpalmieri]:\n> I think using ``@`` for tensor products would be nicer than `tensor([M1,M2,M3])`. Aside from the fact that it's shorter, Sage's current implementation is a bit of a mess. For example, I can never remember that it should be `tensor([M1, M2, M3])`, not `tensor(M1, M2, M3)`, or you could use `M1.tensor(M2, M3)` but not `M1.tensor([M2, M3])`.\n\n\n+1 for this. This would be a good place to start providing an implementation.",
    "created_at": "2020-07-30T23:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454762",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>Replying to [comment:3 jhpalmieri]:
> I think using ``@`` for tensor products would be nicer than `tensor([M1,M2,M3])`. Aside from the fact that it's shorter, Sage's current implementation is a bit of a mess. For example, I can never remember that it should be `tensor([M1, M2, M3])`, not `tensor(M1, M2, M3)`, or you could use `M1.tensor(M2, M3)` but not `M1.tensor([M2, M3])`.


+1 for this. This would be a good place to start providing an implementation.



---

archive/issue_comments_454763.json:
```json
{
    "body": "<a id='comment:6'></a>I think '`@`' for tensor products would be very confusing for other uses in python. While it was introduced non-prescriptively as another binary operator, the implementation name `__matmul__` suggests otherwise, and the numpy reason for requesting it was very solidly for matrix multiplication, i.e., map composition.\n\nIt would seem to me that the place where having operator notation for tensor products might be interesting is for Kronecker products of matrices. That's exactly the place where it directly clashes with numpy notation!! I also think it's very inefficient for multivariate Kronecker products, because the infix notation necessitates the construction of intermediate results.\n\nFor modules, I would expect tensor products and homs to be equally prevalent, so keeping a symmetry in their notation seems like a desirable thing to have.\n\nSo, I think \"`@`\" is a poor fit for tensor product.",
    "created_at": "2020-08-03T20:21:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454763",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:6'></a>I think '`@`' for tensor products would be very confusing for other uses in python. While it was introduced non-prescriptively as another binary operator, the implementation name `__matmul__` suggests otherwise, and the numpy reason for requesting it was very solidly for matrix multiplication, i.e., map composition.

It would seem to me that the place where having operator notation for tensor products might be interesting is for Kronecker products of matrices. That's exactly the place where it directly clashes with numpy notation!! I also think it's very inefficient for multivariate Kronecker products, because the infix notation necessitates the construction of intermediate results.

For modules, I would expect tensor products and homs to be equally prevalent, so keeping a symmetry in their notation seems like a desirable thing to have.

So, I think "`@`" is a poor fit for tensor product.



---

archive/issue_comments_454764.json:
```json
{
    "body": "<a id='comment:7'></a>+1 on giving the \"map composition\" priority for this operator.\n\nIn the realm of tensors, matrix multiplication would generalize to tensor contraction, not tensor product.",
    "created_at": "2020-08-03T20:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454764",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>+1 on giving the "map composition" priority for this operator.

In the realm of tensors, matrix multiplication would generalize to tensor contraction, not tensor product.



---

archive/issue_comments_454765.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:2 mkoeppe]:\n> Wondering now if we need a category of `@`-itive semigroups.\n\n\nAny thoughts on this? Do we need a category `SemigroupsWithRespectToMatmul`?",
    "created_at": "2020-08-03T20:29:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454765",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Replying to [comment:2 mkoeppe]:
> Wondering now if we need a category of `@`-itive semigroups.


Any thoughts on this? Do we need a category `SemigroupsWithRespectToMatmul`?



---

archive/issue_comments_454766.json:
```json
{
    "body": "<a id='comment:9'></a>I'd say no, for the same reason why we don't have this for \"|\", \"&\", \"<<\", \">>\", and other binary operators that python provides. I think we first need a convincing use-case before we start building infrastructure. Code is a burden, not an asset :-).",
    "created_at": "2020-08-03T22:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454766",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:9'></a>I'd say no, for the same reason why we don't have this for "|", "&", "<<", ">>", and other binary operators that python provides. I think we first need a convincing use-case before we start building infrastructure. Code is a burden, not an asset :-).



---

archive/issue_comments_454767.json:
```json
{
    "body": "<a id='comment:10'></a>Note that these other binary operators do not actually participate in the coercion framework...\n\nBut great point, of course, that we should start with something concrete first.",
    "created_at": "2020-08-03T23:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454767",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Note that these other binary operators do not actually participate in the coercion framework...

But great point, of course, that we should start with something concrete first.



---

archive/issue_comments_454768.json:
```json
{
    "body": "<a id='comment:12'></a>I think you may want to reconsider #22760 in the light of possible usage scenarios. The coercion framework is particularly designed to figure out common parents into which the operands can be coerced so that the operation can be applied. This does not apply to all cases; for instance, for actions there is no appropriate *common* parent. For actions, other procedures are followed (and generally, less powerful ones; which is appropriate).\n\nIf ``@`` is going to be composition, it's going to be mostly a partial operation if regarded as, say, an operation on homomorphisms between modules over a field. Alternatively, it's an operation that combines objects in DIFFERENT parents (e.g., a pairing $\\mathrm{Hom}(A,B) \\times \\mathrm{Hom}(B,C) \\to \\mathrm{Hom(}A,C)$) in which case the coercion framework probably doesn't have an appropriate setting yet. I think you really want to know what the coercion framework is supposed to accomplish for you before you try and hook ``@`` into it. If the only scenarios where things work are the cases where `_matmul_` already knows what to do, then there's no benefit from an extra indirection layer: you could just put the login into `__matmul__` directly.\n\n---\nNew commits:",
    "created_at": "2020-08-04T04:14:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454768",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:12'></a>I think you may want to reconsider #22760 in the light of possible usage scenarios. The coercion framework is particularly designed to figure out common parents into which the operands can be coerced so that the operation can be applied. This does not apply to all cases; for instance, for actions there is no appropriate *common* parent. For actions, other procedures are followed (and generally, less powerful ones; which is appropriate).

If ``@`` is going to be composition, it's going to be mostly a partial operation if regarded as, say, an operation on homomorphisms between modules over a field. Alternatively, it's an operation that combines objects in DIFFERENT parents (e.g., a pairing $\mathrm{Hom}(A,B) \times \mathrm{Hom}(B,C) \to \mathrm{Hom(}A,C)$) in which case the coercion framework probably doesn't have an appropriate setting yet. I think you really want to know what the coercion framework is supposed to accomplish for you before you try and hook ``@`` into it. If the only scenarios where things work are the cases where `_matmul_` already knows what to do, then there's no benefit from an extra indirection layer: you could just put the login into `__matmul__` directly.

---
New commits:



---

archive/issue_comments_454769.json:
```json
{
    "body": "<a id='comment:13'></a>This is a great point. \n\nOn this branch, as you perhaps saw, I am already overriding the (double-underscore) `__matmul__` operator, so the coercion framework is not actually involved at all when it comes to the ``@`` operation between two `Map`s. So in this case, I don't think there is actually any overhead/indirection.",
    "created_at": "2020-08-04T05:06:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454769",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>This is a great point. 

On this branch, as you perhaps saw, I am already overriding the (double-underscore) `__matmul__` operator, so the coercion framework is not actually involved at all when it comes to the ``@`` operation between two `Map`s. So in this case, I don't think there is actually any overhead/indirection.



---

archive/issue_comments_454770.json:
```json
{
    "body": "<a id='comment:14'></a>But a concern is that by overriding it, it is disabling coerce actions...",
    "created_at": "2020-08-04T05:15:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454770",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>But a concern is that by overriding it, it is disabling coerce actions...



---

archive/issue_comments_454771.json:
```json
{
    "body": "<a id='comment:15'></a>I don't think there is any harm in #22760 by adding the hook for it. However, I thought the coercion framework was designed to also handle actions. For example, you need coercion for `z * A` when `z` is an integer but `A` only has a `QQ`-action. I also thought the coercion framework was what called the different actions to see what was appropriate too.\n\nThat being said, I see your point about `_matmul_` potentially not being so useful by itself. However, we might as well include it in case someone does have a use case for it.",
    "created_at": "2020-08-04T05:39:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454771",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>I don't think there is any harm in #22760 by adding the hook for it. However, I thought the coercion framework was designed to also handle actions. For example, you need coercion for `z * A` when `z` is an integer but `A` only has a `QQ`-action. I also thought the coercion framework was what called the different actions to see what was appropriate too.

That being said, I see your point about `_matmul_` potentially not being so useful by itself. However, we might as well include it in case someone does have a use case for it.



---

archive/issue_comments_454772.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:7 mkoeppe]:\n> \n> In the realm of tensors, matrix multiplication would generalize to tensor contraction, not tensor product.\n\n\n+1",
    "created_at": "2020-08-04T06:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454772",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:16'></a>Replying to [comment:7 mkoeppe]:
> 
> In the realm of tensors, matrix multiplication would generalize to tensor contraction, not tensor product.


+1



---

archive/issue_comments_454773.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 tscrim]:\n> I don't think there is any harm in #22760 by adding the hook for it. However, I thought the coercion framework was designed to also handle actions. For example, you need coercion for `z * A` when `z` is an integer but `A` only has a `QQ`-action. I also thought the coercion framework was what called the different actions to see what was appropriate too.\n\n\nIndeed, some coercion steps are possible for actions, but not nearly as much as for operations internal to structures. For instance, for addition between `ZZ[x,y]` and `QQ[z]`, the coercion system will construct a common covering structure `QQ[x,y,z]` by combining a sequence of \"construction functors\" according to certain (heuristic!) rules. I don't think the rules for actions are nearly as advanced -- probably no coercions on the acted-upon set are tried at all; and probably shouldn't.\n\nI'd hope there are better tools available for exploring what coercion to take than to query and see \"what works\". If that's actually what happens, then applying it to partial operators such as composition is definitely inappropriate.\n\nIn general, I'm not so sure coercion will help for ``@`` if it goes the composition route, and then having the hook in the system is going to be counterproductive, because people will stumble on it and do unhelpful things with it. So I disagree with the idea that putting hooks just in case someone finds a use for it is harmless. Not making a design decision on it now can also mean not making a design mistake now. Avoiding mistakes has benefits.",
    "created_at": "2020-08-04T20:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454773",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:17'></a>Replying to [comment:15 tscrim]:
> I don't think there is any harm in #22760 by adding the hook for it. However, I thought the coercion framework was designed to also handle actions. For example, you need coercion for `z * A` when `z` is an integer but `A` only has a `QQ`-action. I also thought the coercion framework was what called the different actions to see what was appropriate too.


Indeed, some coercion steps are possible for actions, but not nearly as much as for operations internal to structures. For instance, for addition between `ZZ[x,y]` and `QQ[z]`, the coercion system will construct a common covering structure `QQ[x,y,z]` by combining a sequence of "construction functors" according to certain (heuristic!) rules. I don't think the rules for actions are nearly as advanced -- probably no coercions on the acted-upon set are tried at all; and probably shouldn't.

I'd hope there are better tools available for exploring what coercion to take than to query and see "what works". If that's actually what happens, then applying it to partial operators such as composition is definitely inappropriate.

In general, I'm not so sure coercion will help for ``@`` if it goes the composition route, and then having the hook in the system is going to be counterproductive, because people will stumble on it and do unhelpful things with it. So I disagree with the idea that putting hooks just in case someone finds a use for it is harmless. Not making a design decision on it now can also mean not making a design mistake now. Avoiding mistakes has benefits.



---

archive/issue_comments_454774.json:
```json
{
    "body": "<a id='comment:18'></a>I think I will try out an alternative implementation of composition as a coerce-action (keeping the inherited `__mul__` operator). Then we can experiment with this a little to gather more insights.",
    "created_at": "2020-08-04T21:40:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454774",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>I think I will try out an alternative implementation of composition as a coerce-action (keeping the inherited `__mul__` operator). Then we can experiment with this a little to gather more insights.



---

archive/issue_comments_454775.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:3 jhpalmieri]:\n> I think using ``@`` for tensor products would be nicer than `tensor([M1,M2,M3])`. Aside from the fact that it's shorter, Sage's current implementation is a bit of a mess. For example, I can never remember that it should be `tensor([M1, M2, M3])`, not `tensor(M1, M2, M3)`, or you could use `M1.tensor(M2, M3)` but not `M1.tensor([M2, M3])`.\n\n\nAs notation for tensor products, perhaps we can use a different operator ... how about the bitwise-and operator `&`?",
    "created_at": "2020-08-05T14:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454775",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Replying to [comment:3 jhpalmieri]:
> I think using ``@`` for tensor products would be nicer than `tensor([M1,M2,M3])`. Aside from the fact that it's shorter, Sage's current implementation is a bit of a mess. For example, I can never remember that it should be `tensor([M1, M2, M3])`, not `tensor(M1, M2, M3)`, or you could use `M1.tensor(M2, M3)` but not `M1.tensor([M2, M3])`.


As notation for tensor products, perhaps we can use a different operator ... how about the bitwise-and operator `&`?



---

archive/issue_events_078200.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78200"
}
```



---

archive/issue_comments_454776.json:
```json
{
    "body": "<a id='comment:22'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454776",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_078201.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78201"
}
```



---

archive/issue_events_078202.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78202"
}
```



---

archive/issue_comments_454777.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-07-14T22:51:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454777",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_454778.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-07-16T01:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454778",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_454779.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T02:16:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454779",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454780.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-07-16T02:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454780",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_454781.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T02:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454781",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454782.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-07-16T18:06:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_454783.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T18:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454783",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454784.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-16T23:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454784",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_454785.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -3,6 +3,11 @@\n We should start using it.\n \n First step: Review the semantics of this operator in major Python software for matrix and tensor computation (NumPy, Numba, TensorFlow, PyTorch, ...) so that we do not paint ourselves into a corner.\n+\n+Follow-up tickets:\n+- #32212 `sage.geometry.hyperbolic_space`\n+\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2021-07-16T23:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454785",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -3,6 +3,11 @@
 We should start using it.
 
 First step: Review the semantics of this operator in major Python software for matrix and tensor computation (NumPy, Numba, TensorFlow, PyTorch, ...) so that we do not paint ourselves into a corner.
+
+Follow-up tickets:
+- #32212 `sage.geometry.hyperbolic_space`
+
+
 
 Comment: 1
 
```




---

archive/issue_comments_454786.json:
```json
{
    "body": "<a id='comment:32'></a>Not sure if `@` should also be used for matrix-vector multiplication. The current code on the branch does not do this; but scipy seems to think so (see for example https://docs.scipy.org/doc/scipy/reference/optimize.linprog-highs.html)",
    "created_at": "2021-07-26T18:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454786",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Not sure if `@` should also be used for matrix-vector multiplication. The current code on the branch does not do this; but scipy seems to think so (see for example https://docs.scipy.org/doc/scipy/reference/optimize.linprog-highs.html)



---

archive/issue_events_078203.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78203"
}
```



---

archive/issue_events_078204.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78204"
}
```



---

archive/issue_comments_454787.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-09-14T00:52:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30244#issuecomment-454787",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_events_078205.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78205"
}
```



---

archive/issue_events_078206.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78206"
}
```



---

archive/issue_events_078207.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78207"
}
```



---

archive/issue_events_078208.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78208"
}
```



---

archive/issue_events_078209.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78209"
}
```



---

archive/issue_events_078210.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30244",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30244#event-78210"
}
```
