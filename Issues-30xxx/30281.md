# Issue 30281: remove __reduce__ method from Mutability

archive/issues_030044.json:
```json
{
    "body": "The class `Mutability` used to be a mixin class for mutable objects. However, not every class inheriting from it uses pickling and even then it must be overloaded manually in most cases anyway.\n\nWe suggest to remove that method from `Mutability`.\n\nCC:  @tscrim @mkoeppe @egourgoulhon\n\nBranch/Commit: f0230f0bccfb3ca11db0e77633530ced20ba0ba8\n\nReviewer: Travis Scrimshaw, Matthias Koeppe\n\nAuthor: Michael Jung\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30281\n\n",
    "closed_at": "2020-08-20T22:23:03Z",
    "created_at": "2020-08-03T16:48:28Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "remove __reduce__ method from Mutability",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30281",
    "user": "https://github.com/mjungmath"
}
```
The class `Mutability` used to be a mixin class for mutable objects. However, not every class inheriting from it uses pickling and even then it must be overloaded manually in most cases anyway.

We suggest to remove that method from `Mutability`.

CC:  @tscrim @mkoeppe @egourgoulhon

Branch/Commit: f0230f0bccfb3ca11db0e77633530ced20ba0ba8

Reviewer: Travis Scrimshaw, Matthias Koeppe

Author: Michael Jung

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30281





---

archive/issue_comments_455345.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n+The class \\`Mutability\\` used to be a mixin class for mutable objects. However, not every class inheriting from it uses pickling and must be overloaded manually in most cases anyway.\n \n+We suggest to remove that method from \\`Mutability\\`.\n \n Type: PLEASE CHANGE\n \n```\n",
    "created_at": "2020-08-03T16:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455345",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
+The class \`Mutability\` used to be a mixin class for mutable objects. However, not every class inheriting from it uses pickling and must be overloaded manually in most cases anyway.
 
+We suggest to remove that method from \`Mutability\`.
 
 Type: PLEASE CHANGE
 
```




---

archive/issue_comments_455346.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2020-08-03T16:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455346",
    "user": "https://github.com/mjungmath"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_455347.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to misc.",
    "created_at": "2020-08-03T16:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455347",
    "user": "https://github.com/mjungmath"
}
```

Changing component from PLEASE CHANGE to misc.



---

archive/issue_comments_455348.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n+The class \\`Mutability\\` used to be a mixin class for mutable objects. However, not every class inheriting from it uses pickling and even then it must be overloaded manually in most cases anyway.\n \n+We suggest to remove that method from \\`Mutability\\`.\n \n Type: PLEASE CHANGE\n \n```\n",
    "created_at": "2020-08-03T16:54:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455348",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,6 @@
+The class \`Mutability\` used to be a mixin class for mutable objects. However, not every class inheriting from it uses pickling and even then it must be overloaded manually in most cases anyway.
 
+We suggest to remove that method from \`Mutability\`.
 
 Type: PLEASE CHANGE
 
```




---

archive/issue_comments_455349.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2020-08-03T16:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455349",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_455350.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-03T16:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455350",
    "user": "https://github.com/mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_455351.json:
```json
{
    "body": "<a id='comment:5'></a>Is this for a ticket where the existence of this method is a creating a problem?",
    "created_at": "2020-08-03T17:14:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455351",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Is this for a ticket where the existence of this method is a creating a problem?



---

archive/issue_comments_455352.json:
```json
{
    "body": "<a id='comment:6'></a>Yes. See [comment:10](https://trac.sagemath.org/ticket/30261#comment:10) in #30261 and all the following by Travis.",
    "created_at": "2020-08-03T17:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455352",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:6'></a>Yes. See [comment:10](https://trac.sagemath.org/ticket/30261#comment:10) in #30261 and all the following by Travis.



---

archive/issue_comments_455353.json:
```json
{
    "body": "<a id='comment:7'></a>It seems that inheriting from `Mutability` causes a pickling test. Probably that is the reason why it is endowed with this method.",
    "created_at": "2020-08-03T18:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455353",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:7'></a>It seems that inheriting from `Mutability` causes a pickling test. Probably that is the reason why it is endowed with this method.



---

archive/issue_comments_455354.json:
```json
{
    "body": "<a id='comment:8'></a>Yes. When there is a `__reduce__` method, then it is tested. \nThe correct fix is to implement pickling for your class in #30261.",
    "created_at": "2020-08-03T18:57:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455354",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Yes. When there is a `__reduce__` method, then it is tested. 
The correct fix is to implement pickling for your class in #30261.



---

archive/issue_comments_455355.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 mkoeppe]:\n> Yes. When there is a `__reduce__` method, then it is tested. \n> The correct fix is to implement pickling for your class in #30261.\n\n\nThis is exactly the reason why we remove `__reduce__` from `Mutability`. But even then, pickling is tested (see #30280).",
    "created_at": "2020-08-03T19:01:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455355",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:9'></a>Replying to [comment:8 mkoeppe]:
> Yes. When there is a `__reduce__` method, then it is tested. 
> The correct fix is to implement pickling for your class in #30261.


This is exactly the reason why we remove `__reduce__` from `Mutability`. But even then, pickling is tested (see #30280).



---

archive/issue_comments_455356.json:
```json
{
    "body": "<a id='comment:10'></a>This `__reduce__` method is bad because it it tries to unpickle anything as a `Mutability` object. So a Python class that inherits from this must then contend with this, which puts more of burden on the implementer. Perhaps there is a better way to do this, but it is not immediate to me how to do this...",
    "created_at": "2020-08-04T00:06:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455356",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>This `__reduce__` method is bad because it it tries to unpickle anything as a `Mutability` object. So a Python class that inherits from this must then contend with this, which puts more of burden on the implementer. Perhaps there is a better way to do this, but it is not immediate to me how to do this...



---

archive/issue_comments_455357.json:
```json
{
    "body": "<a id='comment:11'></a>I really think this should be removed. However, we need to make sure that when we pickle and unpickle an immutable object `X` it remains immutable.",
    "created_at": "2020-08-07T22:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455357",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>I really think this should be removed. However, we need to make sure that when we pickle and unpickle an immutable object `X` it remains immutable.



---

archive/issue_comments_455358.json:
```json
{
    "body": "<a id='comment:12'></a>Fine with me too",
    "created_at": "2020-08-07T22:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455358",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Fine with me too



---

archive/issue_comments_455359.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-18T15:55:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455359",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_455360.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-20T22:23:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30281#issuecomment-455360",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_078350.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-20T22:23:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30281",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30281#event-78350"
}
```
