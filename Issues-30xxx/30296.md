# Issue 30296: System package information and spkg-configure for mathjax

archive/issues_030059.json:
```json
{
    "assignees": [],
    "body": "After #31035, our `mathjax` spkg is only used in our sphinx documentation.  We currently ship a \"stripped\" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.\n\nWe add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/` using https://repology.org/projects/?search=mathjax\n\n---\n\nRandom references:\n\npy-mathjax/pypi/py-mathjax at master \u00b7 kiwi0fruit/py-mathjax\nhttps://github.com/kiwi0fruit/py-mathjax/tree/master/pypi/py-mathjax\n\nDebian JavaScript Maintainers / mathjax \u00b7 GitLab\nhttps://salsa.debian.org/js-team/mathjax\n\nsphinx/setup.py at 3.x \u00b7 sphinx-doc/sphinx\nhttps://github.com/sphinx-doc/sphinx/blob/3.x/setup.py\n\nMath support for HTML outputs in Sphinx \u2014 Sphinx 4.0.0+ documentation\nhttps://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax\n\nsphinx-ext-mathjax - Google Search\nhttps://www.google.com/search?safe=off&sxsrf=ALeKk03spVlQ9ALPLJJCbNfF9EIdC_LYuQ%3A1596929073175&ei=MTQvX8mUCuKU0PEPu-yOiAE&q=sphinx-ext-mathjax&oq=sphinx-ext-mathjax&gs_lcp=CgZwc3ktYWIQAzIFCAAQzQIyBQgAEM0CMggIABDNAhCLAzIICAAQzQIQiwMyCAgAEM0CEIsDOgQIABBHOgcIIxCwAhAnOgcIIRAKEKABOgUIIRCgAToFCCEQqwJQmyhY4UVgtFBoAHABeACAAWqIAeUHkgEDOS4ymAEAoAEBqgEHZ3dzLXdpergBA8ABAQ&sclient=psy-ab&ved=0ahUKEwiJ8Yyx4IzrAhViCjQIHTu2AxEQ4dUDCAw&uact=5\n\nMath support for HTML outputs in Sphinx \u2014 Sphinx 4.0.0+ documentation\nhttps://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax\n\nsphinx/mathjax.py at 3.x \u00b7 sphinx-doc/sphinx\nhttps://github.com/sphinx-doc/sphinx/blob/3.x/sphinx/ext/mathjax.py\n\n\nCC:  @jcamp0x2a @paulmasson @slel @egourgoulhon @orlitzky @kwankyu @jhpalmieri @nthiery @enriqueartal @kiwifb @antonio-rojas @tobihan @etn40ff @tobiasdiez\n\nKeywords: **spkg-configure, mathjax, sd111**\n\nBranch/Commit: **[public/30296](https://github.com/sagemath/sagetrac-mirror/tree/public/30296) @ [`5c624ab`](https://github.com/sagemath/sagetrac-mirror/commit/5c624abfd948829125163f91f4bd4b24d0ecb797)**\n\nAuthor: **Samuel Leli\u00e8vre, ...**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30296_\n\n",
    "created_at": "2020-08-05T20:02:12Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "System package information and spkg-configure for mathjax",
    "type": "issue",
    "updated_at": "2022-11-24T10:49:57Z",
    "url": "https://github.com/sagemath/sage/issues/30296",
    "user": "https://github.com/mkoeppe"
}
```
After #31035, our `mathjax` spkg is only used in our sphinx documentation.  We currently ship a "stripped" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.

We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/` using https://repology.org/projects/?search=mathjax

---

Random references:

py-mathjax/pypi/py-mathjax at master · kiwi0fruit/py-mathjax
https://github.com/kiwi0fruit/py-mathjax/tree/master/pypi/py-mathjax

Debian JavaScript Maintainers / mathjax · GitLab
https://salsa.debian.org/js-team/mathjax

sphinx/setup.py at 3.x · sphinx-doc/sphinx
https://github.com/sphinx-doc/sphinx/blob/3.x/setup.py

Math support for HTML outputs in Sphinx — Sphinx 4.0.0+ documentation
https://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax

sphinx-ext-mathjax - Google Search
https://www.google.com/search?safe=off&sxsrf=ALeKk03spVlQ9ALPLJJCbNfF9EIdC_LYuQ%3A1596929073175&ei=MTQvX8mUCuKU0PEPu-yOiAE&q=sphinx-ext-mathjax&oq=sphinx-ext-mathjax&gs_lcp=CgZwc3ktYWIQAzIFCAAQzQIyBQgAEM0CMggIABDNAhCLAzIICAAQzQIQiwMyCAgAEM0CEIsDOgQIABBHOgcIIxCwAhAnOgcIIRAKEKABOgUIIRCgAToFCCEQqwJQmyhY4UVgtFBoAHABeACAAWqIAeUHkgEDOS4ymAEAoAEBqgEHZ3dzLXdpergBA8ABAQ&sclient=psy-ab&ved=0ahUKEwiJ8Yyx4IzrAhViCjQIHTu2AxEQ4dUDCAw&uact=5

Math support for HTML outputs in Sphinx — Sphinx 4.0.0+ documentation
https://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax

sphinx/mathjax.py at 3.x · sphinx-doc/sphinx
https://github.com/sphinx-doc/sphinx/blob/3.x/sphinx/ext/mathjax.py


CC:  @jcamp0x2a @paulmasson @slel @egourgoulhon @orlitzky @kwankyu @jhpalmieri @nthiery @enriqueartal @kiwifb @antonio-rojas @tobihan @etn40ff @tobiasdiez

Keywords: **spkg-configure, mathjax, sd111**

Branch/Commit: **[public/30296](https://github.com/sagemath/sagetrac-mirror/tree/public/30296) @ [`5c624ab`](https://github.com/sagemath/sagetrac-mirror/commit/5c624abfd948829125163f91f4bd4b24d0ecb797)**

Author: **Samuel Lelièvre, ...**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/30296_





---

archive/issue_events_417318.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-05T20:02:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417318"
}
```



---

archive/issue_events_417319.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-05T20:02:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417319"
}
```



---

archive/issue_events_417320.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-05T20:02:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417320"
}
```



---

archive/issue_events_417321.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-05T20:02:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417321"
}
```



---

archive/issue_comments_480657.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThere are numerous unresolved tickets regarding mathjax...\n\n#30296 (System package information and spkg-configure for mathjax) \u2013 Sage\nhttps://trac.sagemath.org/ticket/30296#modify\n\n#30226 (Allow LaTeX in text3d) \u2013 Sage\nhttps://trac.sagemath.org/ticket/30226\n\n#30030 (Prevent JSmol from phoning home) \u2013 Sage\nhttps://trac.sagemath.org/ticket/30030\n\n#29993 (Enable MathJax in the TOC of Sage reference manual) \u2013 Sage\n[#29993 comment:9](https://github.com/sagemath/sage/issues/29993#comment:9)\n\n#28547 (Remove hardcoded mathjax path in docs/conf.py) \u2013 Sage\nhttps://trac.sagemath.org/ticket/28547\n\n#28257 (MathJax causing unusual hanging in large notebooks) \u2013 Sage\nhttps://trac.sagemath.org/ticket/28257\n\n#26612 (Remove bad mathjax symlink and bad mathjax directories) \u2013 Sage\nhttps://trac.sagemath.org/ticket/26612\n\n#25833 (Upgrade to MathJax 3) \u2013 Sage\nhttps://trac.sagemath.org/ticket/25833\n\n#24024 (Meta-ticket: Update other packages to using the sage-dist-helpers functions + DESTDIR where applicable) \u2013 Sage\nhttps://trac.sagemath.org/ticket/24024\n\n#24367 (Confusing documentation on MathJax in light of use in Jupyter notebook) \u2013 Sage\nhttps://trac.sagemath.org/ticket/24367\n\n#25015 (Improve introspection capabilities of Sage Jupyter Kernel) \u2013 Sage\nhttps://trac.sagemath.org/ticket/25015\n\n#25111 (In the built documentation, replace duplicate files by symlinks) \u2013 Sage\nhttps://trac.sagemath.org/ticket/25111\n\n#22394 (MathJax javascript loaded more than once) \u2013 Sage\nhttps://trac.sagemath.org/ticket/22394\n\n#18596 (Don't strip MathJax fonts) \u2013 Sage\nhttps://trac.sagemath.org/ticket/18596",
    "created_at": "2020-08-05T20:07:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480657",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

There are numerous unresolved tickets regarding mathjax...

#30296 (System package information and spkg-configure for mathjax) – Sage
https://trac.sagemath.org/ticket/30296#modify

#30226 (Allow LaTeX in text3d) – Sage
https://trac.sagemath.org/ticket/30226

#30030 (Prevent JSmol from phoning home) – Sage
https://trac.sagemath.org/ticket/30030

#29993 (Enable MathJax in the TOC of Sage reference manual) – Sage
[#29993 comment:9](https://github.com/sagemath/sage/issues/29993#comment:9)

#28547 (Remove hardcoded mathjax path in docs/conf.py) – Sage
https://trac.sagemath.org/ticket/28547

#28257 (MathJax causing unusual hanging in large notebooks) – Sage
https://trac.sagemath.org/ticket/28257

#26612 (Remove bad mathjax symlink and bad mathjax directories) – Sage
https://trac.sagemath.org/ticket/26612

#25833 (Upgrade to MathJax 3) – Sage
https://trac.sagemath.org/ticket/25833

#24024 (Meta-ticket: Update other packages to using the sage-dist-helpers functions + DESTDIR where applicable) – Sage
https://trac.sagemath.org/ticket/24024

#24367 (Confusing documentation on MathJax in light of use in Jupyter notebook) – Sage
https://trac.sagemath.org/ticket/24367

#25015 (Improve introspection capabilities of Sage Jupyter Kernel) – Sage
https://trac.sagemath.org/ticket/25015

#25111 (In the built documentation, replace duplicate files by symlinks) – Sage
https://trac.sagemath.org/ticket/25111

#22394 (MathJax javascript loaded more than once) – Sage
https://trac.sagemath.org/ticket/22394

#18596 (Don't strip MathJax fonts) – Sage
https://trac.sagemath.org/ticket/18596



---

archive/issue_events_417322.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-05T20:08:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417322"
}
```



---

archive/issue_events_417323.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-05T20:08:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417323"
}
```



---

archive/issue_comments_480658.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nFor availability of mathjax in distributions, see https://repology.org/project/mathjax/versions",
    "created_at": "2020-08-05T20:09:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480658",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:4" align="right">comment:4</div>

For availability of mathjax in distributions, see https://repology.org/project/mathjax/versions



---

archive/issue_comments_480659.json:
```json
{
    "body": "Branch: **[u/mkoeppe/system_package_information_and_spkg_configure_for_mathjax](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information_and_spkg_configure_for_mathjax)**",
    "created_at": "2020-08-05T20:12:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480659",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/system_package_information_and_spkg_configure_for_mathjax](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information_and_spkg_configure_for_mathjax)**



---

archive/issue_comments_480660.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThe commit only indicates where the system directory should be inserted.\n\nI don't plan to work on this ticket. \n\n\nHoping that people knowledgeable about the Jupyter notebook and/or documentation building will be interesting in working on it.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68a0dda07f50a127891eee45cb0dbe5852788210\"><code>68a0dda</code></a></td><td><code>build/pkgs/sage_conf/src/sage_conf.py.in: Add MATHJAX_DIR</code></td></tr></table>\n",
    "created_at": "2020-08-05T20:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480660",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

The commit only indicates where the system directory should be inserted.

I don't plan to work on this ticket. 


Hoping that people knowledgeable about the Jupyter notebook and/or documentation building will be interesting in working on it.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68a0dda07f50a127891eee45cb0dbe5852788210"><code>68a0dda</code></a></td><td><code>build/pkgs/sage_conf/src/sage_conf.py.in: Add MATHJAX_DIR</code></td></tr></table>




---

archive/issue_comments_480661.json:
```json
{
    "body": "Commit: **[`68a0dda`](https://github.com/sagemath/sagetrac-mirror/commit/68a0dda07f50a127891eee45cb0dbe5852788210)**",
    "created_at": "2020-08-05T20:28:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480661",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`68a0dda`](https://github.com/sagemath/sagetrac-mirror/commit/68a0dda07f50a127891eee45cb0dbe5852788210)**



---

archive/issue_comments_480662.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThere is also a pip-installable package https://pypi.org/project/py-mathjax/, but I think using it has not benefits for us.",
    "created_at": "2020-08-06T02:29:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480662",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

There is also a pip-installable package https://pypi.org/project/py-mathjax/, but I think using it has not benefits for us.



---

archive/issue_comments_480663.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAlso `notebook` bundles mathjax ... why do we install another copy?",
    "created_at": "2020-08-08T06:48:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480663",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Also `notebook` bundles mathjax ... why do we install another copy?



---

archive/issue_events_417324.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-08T06:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417324"
}
```



---

archive/issue_comments_480664.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@mkoeppe](#comment:8):\n> Also `notebook` bundles mathjax ... why do we install another copy?\n\nThe change\n\n```diff\ndiff --git a/build/make/Makefile.in b/build/make/Makefile.in\nindex ed5294cc4e..3d65767bf7 100644\n--- a/build/make/Makefile.in\n+++ b/build/make/Makefile.in\n@@ -289,7 +289,7 @@ base: $(inst_patch) $(inst_pkgconf)\n # produce plots.\n DOC_DEPENDENCIES = sagelib $(inst_sphinx) \\\n        | $(SAGERUNTIME) $(inst_maxima) $(inst_networkx) $(inst_scipy) $(inst_sympy) \\\n-       $(inst_matplotlib) $(inst_pillow) $(inst_mathjax) $(inst_mpmath) \\\n+       $(inst_matplotlib) $(inst_pillow) $(inst_mpmath) \\\n        $(inst_ipykernel) $(inst_jupyter_client) $(inst_conway_polynomials) \\\n        $(inst_tachyon) $(inst_jmol) $(inst_thebe) $(inst_ipywidgets)\n \ndiff --git a/build/pkgs/mathjax/type b/build/pkgs/mathjax/type\nindex a6a7b9cd72..134d9bc32d 100644\n--- a/build/pkgs/mathjax/type\n+++ b/build/pkgs/mathjax/type\n@@ -1 +1 @@\n-standard\n+optional\n```\navoids building mathjax, but then Sphinx doesn't find it when building the documentation. So if we want to use the version bundled with `notebook`, we need to make sure that Sphinx knows where to find it.",
    "created_at": "2020-08-08T22:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480664",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@mkoeppe](#comment:8):
> Also `notebook` bundles mathjax ... why do we install another copy?

The change

```diff
diff --git a/build/make/Makefile.in b/build/make/Makefile.in
index ed5294cc4e..3d65767bf7 100644
--- a/build/make/Makefile.in
+++ b/build/make/Makefile.in
@@ -289,7 +289,7 @@ base: $(inst_patch) $(inst_pkgconf)
 # produce plots.
 DOC_DEPENDENCIES = sagelib $(inst_sphinx) \
        | $(SAGERUNTIME) $(inst_maxima) $(inst_networkx) $(inst_scipy) $(inst_sympy) \
-       $(inst_matplotlib) $(inst_pillow) $(inst_mathjax) $(inst_mpmath) \
+       $(inst_matplotlib) $(inst_pillow) $(inst_mpmath) \
        $(inst_ipykernel) $(inst_jupyter_client) $(inst_conway_polynomials) \
        $(inst_tachyon) $(inst_jmol) $(inst_thebe) $(inst_ipywidgets)
 
diff --git a/build/pkgs/mathjax/type b/build/pkgs/mathjax/type
index a6a7b9cd72..134d9bc32d 100644
--- a/build/pkgs/mathjax/type
+++ b/build/pkgs/mathjax/type
@@ -1 +1 @@
-standard
+optional
```
avoids building mathjax, but then Sphinx doesn't find it when building the documentation. So if we want to use the version bundled with `notebook`, we need to make sure that Sphinx knows where to find it.



---

archive/issue_comments_480665.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\n`src/sage/docs/conf.py` expects `sage.env.MATHJAX_DIR` to be set to the location. This is what we'd have to configure if we take mathjax either from a system installation, or some other source.",
    "created_at": "2020-08-08T23:41:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480665",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

`src/sage/docs/conf.py` expects `sage.env.MATHJAX_DIR` to be set to the location. This is what we'd have to configure if we take mathjax either from a system installation, or some other source.



---

archive/issue_comments_480666.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,29 @@\n We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`\n \n \n+\n+\n+---\n+\n+Random references:\n+\n+py-mathjax/pypi/py-mathjax at master \u00b7 kiwi0fruit/py-mathjax\n+https://github.com/kiwi0fruit/py-mathjax/tree/master/pypi/py-mathjax\n+\n+Debian JavaScript Maintainers / mathjax \u00b7 [GitLab](../wiki/GitLab)\n+https://salsa.debian.org/js-team/mathjax\n+\n+sphinx/setup.py at 3.x \u00b7 sphinx-doc/sphinx\n+https://github.com/sphinx-doc/sphinx/blob/3.x/setup.py\n+\n+Math support for HTML outputs in Sphinx \u2014 Sphinx 4.0.0+ documentation\n+https://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax\n+\n+sphinx-ext-mathjax - Google Search\n+https://www.google.com/search?safe=off&sxsrf=ALeKk03spVlQ9ALPLJJCbNfF9EIdC_LYuQ%3A1596929073175&ei=MTQvX8mUCuKU0PEPu-yOiAE&q=sphinx-ext-mathjax&oq=sphinx-ext-mathjax&gs_lcp=CgZwc3ktYWIQAzIFCAAQzQIyBQgAEM0CMggIABDNAhCLAzIICAAQzQIQiwMyCAgAEM0CEIsDOgQIABBHOgcIIxCwAhAnOgcIIRAKEKABOgUIIRCgAToFCCEQqwJQmyhY4UVgtFBoAHABeACAAWqIAeUHkgEDOS4ymAEAoAEBqgEHZ3dzLXdpergBA8ABAQ&sclient=psy-ab&ved=0ahUKEwiJ8Yyx4IzrAhViCjQIHTu2AxEQ4dUDCAw&uact=5\n+\n+Math support for HTML outputs in Sphinx \u2014 Sphinx 4.0.0+ documentation\n+https://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax\n+\n+sphinx/mathjax.py at 3.x \u00b7 sphinx-doc/sphinx\n+https://github.com/sphinx-doc/sphinx/blob/3.x/sphinx/ext/mathjax.py\n``````\n",
    "created_at": "2020-08-11T05:17:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480666",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,29 @@
 We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`
 
 
+
+
+---
+
+Random references:
+
+py-mathjax/pypi/py-mathjax at master · kiwi0fruit/py-mathjax
+https://github.com/kiwi0fruit/py-mathjax/tree/master/pypi/py-mathjax
+
+Debian JavaScript Maintainers / mathjax · [GitLab](../wiki/GitLab)
+https://salsa.debian.org/js-team/mathjax
+
+sphinx/setup.py at 3.x · sphinx-doc/sphinx
+https://github.com/sphinx-doc/sphinx/blob/3.x/setup.py
+
+Math support for HTML outputs in Sphinx — Sphinx 4.0.0+ documentation
+https://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax
+
+sphinx-ext-mathjax - Google Search
+https://www.google.com/search?safe=off&sxsrf=ALeKk03spVlQ9ALPLJJCbNfF9EIdC_LYuQ%3A1596929073175&ei=MTQvX8mUCuKU0PEPu-yOiAE&q=sphinx-ext-mathjax&oq=sphinx-ext-mathjax&gs_lcp=CgZwc3ktYWIQAzIFCAAQzQIyBQgAEM0CMggIABDNAhCLAzIICAAQzQIQiwMyCAgAEM0CEIsDOgQIABBHOgcIIxCwAhAnOgcIIRAKEKABOgUIIRCgAToFCCEQqwJQmyhY4UVgtFBoAHABeACAAWqIAeUHkgEDOS4ymAEAoAEBqgEHZ3dzLXdpergBA8ABAQ&sclient=psy-ab&ved=0ahUKEwiJ8Yyx4IzrAhViCjQIHTu2AxEQ4dUDCAw&uact=5
+
+Math support for HTML outputs in Sphinx — Sphinx 4.0.0+ documentation
+https://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax
+
+sphinx/mathjax.py at 3.x · sphinx-doc/sphinx
+https://github.com/sphinx-doc/sphinx/blob/3.x/sphinx/ext/mathjax.py
``````




---

archive/issue_comments_480667.json:
```json
{
    "body": "Changed commit from **[`68a0dda`](https://github.com/sagemath/sagetrac-mirror/commit/68a0dda07f50a127891eee45cb0dbe5852788210)** to none",
    "created_at": "2020-08-11T05:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480667",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`68a0dda`](https://github.com/sagemath/sagetrac-mirror/commit/68a0dda07f50a127891eee45cb0dbe5852788210)** to none



---

archive/issue_comments_480668.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/system_package_information_and_spkg_configure_for_mathjax](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information_and_spkg_configure_for_mathjax)** to none",
    "created_at": "2020-08-11T05:19:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480668",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mkoeppe/system_package_information_and_spkg_configure_for_mathjax](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/system_package_information_and_spkg_configure_for_mathjax)** to none



---

archive/issue_comments_480669.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,4 @@\n We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`\n-\n-\n-\n \n ---\n \n@@ -10,7 +7,7 @@\n py-mathjax/pypi/py-mathjax at master \u00b7 kiwi0fruit/py-mathjax\n https://github.com/kiwi0fruit/py-mathjax/tree/master/pypi/py-mathjax\n \n-Debian JavaScript Maintainers / mathjax \u00b7 [GitLab](../wiki/GitLab)\n+Debian JavaScript Maintainers / mathjax \u00b7 GitLab\n https://salsa.debian.org/js-team/mathjax\n \n sphinx/setup.py at 3.x \u00b7 sphinx-doc/sphinx\n@@ -27,3 +24,4 @@\n \n sphinx/mathjax.py at 3.x \u00b7 sphinx-doc/sphinx\n https://github.com/sphinx-doc/sphinx/blob/3.x/sphinx/ext/mathjax.py\n+\n``````\n",
    "created_at": "2020-08-20T01:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480669",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,4 @@
 We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`
-
-
-
 
 ---
 
@@ -10,7 +7,7 @@
 py-mathjax/pypi/py-mathjax at master · kiwi0fruit/py-mathjax
 https://github.com/kiwi0fruit/py-mathjax/tree/master/pypi/py-mathjax
 
-Debian JavaScript Maintainers / mathjax · [GitLab](../wiki/GitLab)
+Debian JavaScript Maintainers / mathjax · GitLab
 https://salsa.debian.org/js-team/mathjax
 
 sphinx/setup.py at 3.x · sphinx-doc/sphinx
@@ -27,3 +24,4 @@
 
 sphinx/mathjax.py at 3.x · sphinx-doc/sphinx
 https://github.com/sphinx-doc/sphinx/blob/3.x/sphinx/ext/mathjax.py
+
``````




---

archive/issue_comments_480670.json:
```json
{
    "body": "Changed keywords from none to **spkg-configure, mathjax**",
    "created_at": "2020-08-20T01:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480670",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **spkg-configure, mathjax**



---

archive/issue_events_417325.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T03:02:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417325"
}
```



---

archive/issue_events_417326.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T03:02:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417326"
}
```



---

archive/issue_events_417327.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T03:02:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417327"
}
```



---

archive/issue_events_417328.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-03T03:02:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417328"
}
```



---

archive/issue_comments_480671.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@mkoeppe](#comment:8):\n> Also `notebook` bundles mathjax ... why do we install another copy?\n\nSee\n\n- [Stack Overflow question 28909747: How do I configure mathjax for iPython notebooks?](https://stackoverflow.com/q/28909747)\n\nand the various answers there, including\n\n- [StackOverflow answer 58866858](https://stackoverflow.com/a/58866858)\n\nwhich states\n\n> Jupyter ships with its own (smaller) version of MathJax.\n> This is why it is not able to find the (Computer Modern)\n> 'TeX' font -- there only is the STIX font.\n\nSo it's possible that the smaller version of MathJax\nshipped by Jupyter Notebook is not enough for our Sphinx use.\n\nConfiguring Jupyter Notebook to use Sage's fuller MathJax\nmight have benefits (ability to typeset more math?)\nand/or drawbacks (performance?).",
    "created_at": "2020-09-05T10:05:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480671",
    "user": "https://github.com/slel"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@mkoeppe](#comment:8):
> Also `notebook` bundles mathjax ... why do we install another copy?

See

- [Stack Overflow question 28909747: How do I configure mathjax for iPython notebooks?](https://stackoverflow.com/q/28909747)

and the various answers there, including

- [StackOverflow answer 58866858](https://stackoverflow.com/a/58866858)

which states

> Jupyter ships with its own (smaller) version of MathJax.
> This is why it is not able to find the (Computer Modern)
> 'TeX' font -- there only is the STIX font.

So it's possible that the smaller version of MathJax
shipped by Jupyter Notebook is not enough for our Sphinx use.

Configuring Jupyter Notebook to use Sage's fuller MathJax
might have benefits (ability to typeset more math?)
and/or drawbacks (performance?).



---

archive/issue_comments_480672.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@slel](#comment:16):\n> Configuring Jupyter Notebook to use Sage's fuller MathJax\n> might have benefits (ability to typeset more math?)\n\nThis should be investigated.",
    "created_at": "2020-11-29T07:29:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480672",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@slel](#comment:16):
> Configuring Jupyter Notebook to use Sage's fuller MathJax
> might have benefits (ability to typeset more math?)

This should be investigated.



---

archive/issue_comments_480673.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,15 @@\n+mathjax is used in our sphinx documentation and in the Jupyter notebook.  We currently ship a \"stripped\" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.\n+\n We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`\n+\n+Open questions:\n+\n+- Is there any difference in font rendering between the mathjax that comes with Jupyter notebook and our copy of mathjax? Does Jupyter notebook rely on online resources for any font rendering? \n+\n+  (This should be apparent in comparing Sage running in system Jupyter notebook vs. the Sage distributions's Jupyter notebook - which uses the configuration in `build/pkgs/notebook/jupyter_notebook_config.py`)\n+\n+- If no, we can remove this configuration item from our notebook configuration; and this ticket will reduce to sphinx docbuild questions only.\n+\n \n ---\n \n``````\n",
    "created_at": "2020-11-29T20:00:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480673",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,15 @@
+mathjax is used in our sphinx documentation and in the Jupyter notebook.  We currently ship a "stripped" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.
+
 We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`
+
+Open questions:
+
+- Is there any difference in font rendering between the mathjax that comes with Jupyter notebook and our copy of mathjax? Does Jupyter notebook rely on online resources for any font rendering? 
+
+  (This should be apparent in comparing Sage running in system Jupyter notebook vs. the Sage distributions's Jupyter notebook - which uses the configuration in `build/pkgs/notebook/jupyter_notebook_config.py`)
+
+- If no, we can remove this configuration item from our notebook configuration; and this ticket will reduce to sphinx docbuild questions only.
+
 
 ---
 
``````




---

archive/issue_comments_480674.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480674",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_480675.json:
```json
{
    "body": "Changed keywords from **spkg-configure, mathjax** to **spkg-configure, mathjax, sd111**",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480675",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from **spkg-configure, mathjax** to **spkg-configure, mathjax, sd111**



---

archive/issue_comments_480676.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nFWIW: On Arch we're unbundling mathjax from Jupyter and using the system one:\n\nhttps://github.com/archlinux/svntogit-community/blob/packages/jupyter-notebook/trunk/PKGBUILD#L40\n\nEverything works fine, even without the /usr/share/jupyter/nbextensions/mathjax symlink installed by sage.",
    "created_at": "2020-12-10T07:31:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480676",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:22" align="right">comment:22</div>

FWIW: On Arch we're unbundling mathjax from Jupyter and using the system one:

https://github.com/archlinux/svntogit-community/blob/packages/jupyter-notebook/trunk/PKGBUILD#L40

Everything works fine, even without the /usr/share/jupyter/nbextensions/mathjax symlink installed by sage.



---

archive/issue_comments_480677.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks. I have created #31035 (Remove mathjax configuration/symlink from jupyter notebook), as it seems what Sage is doing is simply not necessary any more after various updates of Jupyter.",
    "created_at": "2020-12-10T18:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480677",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks. I have created #31035 (Remove mathjax configuration/symlink from jupyter notebook), as it seems what Sage is doing is simply not necessary any more after various updates of Jupyter.



---

archive/issue_comments_480678.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n \n   (This should be apparent in comparing Sage running in system Jupyter notebook vs. the Sage distributions's Jupyter notebook - which uses the configuration in `build/pkgs/notebook/jupyter_notebook_config.py`)\n \n-- If no, we can remove this configuration item from our notebook configuration; and this ticket will reduce to sphinx docbuild questions only.\n+- If no, we can remove this configuration item from our notebook configuration; and this ticket will reduce to sphinx docbuild questions only. (Done in #31035)\n \n \n ---\n``````\n",
    "created_at": "2020-12-10T18:52:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480678",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 
   (This should be apparent in comparing Sage running in system Jupyter notebook vs. the Sage distributions's Jupyter notebook - which uses the configuration in `build/pkgs/notebook/jupyter_notebook_config.py`)
 
-- If no, we can remove this configuration item from our notebook configuration; and this ticket will reduce to sphinx docbuild questions only.
+- If no, we can remove this configuration item from our notebook configuration; and this ticket will reduce to sphinx docbuild questions only. (Done in #31035)
 
 
 ---
``````




---

archive/issue_events_417329.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-10T19:42:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417329"
}
```



---

archive/issue_events_417330.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-10T19:42:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417330"
}
```



---

archive/issue_comments_480679.json:
```json
{
    "body": "Dependencies: **#31035**",
    "created_at": "2020-12-10T19:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480679",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31035**



---

archive/issue_comments_480680.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,15 +1,6 @@\n-mathjax is used in our sphinx documentation and in the Jupyter notebook.  We currently ship a \"stripped\" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.\n+After #31035, our `mathjax` spkg is only used in our sphinx documentation.  We currently ship a \"stripped\" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.\n \n We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`\n-\n-Open questions:\n-\n-- Is there any difference in font rendering between the mathjax that comes with Jupyter notebook and our copy of mathjax? Does Jupyter notebook rely on online resources for any font rendering? \n-\n-  (This should be apparent in comparing Sage running in system Jupyter notebook vs. the Sage distributions's Jupyter notebook - which uses the configuration in `build/pkgs/notebook/jupyter_notebook_config.py`)\n-\n-- If no, we can remove this configuration item from our notebook configuration; and this ticket will reduce to sphinx docbuild questions only. (Done in #31035)\n-\n \n ---\n \n``````\n",
    "created_at": "2020-12-10T19:46:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480680",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,15 +1,6 @@
-mathjax is used in our sphinx documentation and in the Jupyter notebook.  We currently ship a "stripped" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.
+After #31035, our `mathjax` spkg is only used in our sphinx documentation.  We currently ship a "stripped" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.
 
 We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`
-
-Open questions:
-
-- Is there any difference in font rendering between the mathjax that comes with Jupyter notebook and our copy of mathjax? Does Jupyter notebook rely on online resources for any font rendering? 
-
-  (This should be apparent in comparing Sage running in system Jupyter notebook vs. the Sage distributions's Jupyter notebook - which uses the configuration in `build/pkgs/notebook/jupyter_notebook_config.py`)
-
-- If no, we can remove this configuration item from our notebook configuration; and this ticket will reduce to sphinx docbuild questions only. (Done in #31035)
-
 
 ---
 
``````




---

archive/issue_comments_480681.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n After #31035, our `mathjax` spkg is only used in our sphinx documentation.  We currently ship a \"stripped\" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.\n \n-We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`\n+We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/` using https://repology.org/projects/?search=mathjax\n \n ---\n \n``````\n",
    "created_at": "2020-12-10T19:47:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480681",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 After #31035, our `mathjax` spkg is only used in our sphinx documentation.  We currently ship a "stripped" version of mathjax 2.7.4 (see `build/pkgs/mathjax/spkg-src`; #25032, #18596); #25833 proposes an upgrade to 3.x.
 
-We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/`
+We add an `spkg-configure.m4` script for the standard package `mathjax`, as well as corresponding system package information in `build/pkgs/mathjax/distros/` using https://repology.org/projects/?search=mathjax
 
 ---
 
``````




---

archive/issue_comments_480682.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480682",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">comment:28</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_417331.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417331"
}
```



---

archive/issue_events_417332.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417332"
}
```



---

archive/issue_comments_480683.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nHere is distro info to hopefully restart things here.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c624abfd948829125163f91f4bd4b24d0ecb797\"><code>5c624ab</code></a></td><td><code>30296: Add distro info for mathjax</code></td></tr></table>\n",
    "created_at": "2021-03-22T01:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480683",
    "user": "https://github.com/slel"
}
```

<div id="comment:29" align="right">comment:29</div>

Here is distro info to hopefully restart things here.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c624abfd948829125163f91f4bd4b24d0ecb797"><code>5c624ab</code></a></td><td><code>30296: Add distro info for mathjax</code></td></tr></table>




---

archive/issue_comments_480684.json:
```json
{
    "body": "Branch: **[public/30296](https://github.com/sagemath/sagetrac-mirror/tree/public/30296)**",
    "created_at": "2021-03-22T01:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480684",
    "user": "https://github.com/slel"
}
```

Branch: **[public/30296](https://github.com/sagemath/sagetrac-mirror/tree/public/30296)**



---

archive/issue_comments_480685.json:
```json
{
    "body": "Commit: **[`5c624ab`](https://github.com/sagemath/sagetrac-mirror/commit/5c624abfd948829125163f91f4bd4b24d0ecb797)**",
    "created_at": "2021-03-22T01:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480685",
    "user": "https://github.com/slel"
}
```

Commit: **[`5c624ab`](https://github.com/sagemath/sagetrac-mirror/commit/5c624abfd948829125163f91f4bd4b24d0ecb797)**



---

archive/issue_comments_480686.json:
```json
{
    "body": "Author: **Samuel Leli\u00e8vre, ...**",
    "created_at": "2021-03-22T01:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480686",
    "user": "https://github.com/slel"
}
```

Author: **Samuel Lelièvre, ...**



---

archive/issue_comments_480687.json:
```json
{
    "body": "Changed dependencies from **#31035** to none",
    "created_at": "2021-03-22T01:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480687",
    "user": "https://github.com/slel"
}
```

Changed dependencies from **#31035** to none



---

archive/issue_events_417333.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417333"
}
```



---

archive/issue_events_417334.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417334"
}
```



---

archive/issue_comments_480688.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480688",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_417335.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417335"
}
```



---

archive/issue_events_417336.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417336"
}
```



---

archive/issue_comments_480689.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nSee also #33600: Configure mathjax in sphinx config and upgrade to Mathjax v3",
    "created_at": "2022-03-30T16:31:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480689",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:33" align="right">comment:33</div>

See also #33600: Configure mathjax in sphinx config and upgrade to Mathjax v3



---

archive/issue_events_417337.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417337"
}
```



---

archive/issue_events_417338.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-07T00:07:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417338"
}
```



---

archive/issue_comments_480690.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nStill no `spkg-configure.m4`?\n\nThis script just needs to rewrite `sage.env.MATHJAX_DIR` to the system mathjax2 directory (`/usr/share/mathjax`?) if found in the system.\n\nPerhaps it also needs to decide if it is really mathjax2 or mathjax3...\n\nI am ready to duplicate it to #25833.",
    "created_at": "2022-04-08T06:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480690",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:35" align="right">comment:35</div>

Still no `spkg-configure.m4`?

This script just needs to rewrite `sage.env.MATHJAX_DIR` to the system mathjax2 directory (`/usr/share/mathjax`?) if found in the system.

Perhaps it also needs to decide if it is really mathjax2 or mathjax3...

I am ready to duplicate it to #25833.



---

archive/issue_comments_480691.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@kwankyu](#comment:35):\n> This script just needs to rewrite `sage.env.MATHJAX_DIR` to the system mathjax2 directory (`/usr/share/mathjax`?) if found in the system.\n\nThis may not be true since the system mathjax2 would have all fonts and be too large to use for sage documentation. Sphinx will copy the whole to each `_static` directory of every documentation (reference, tutorial, ...).\n\nThen the conclusion would be that we should not try to use the system mathjax???",
    "created_at": "2022-04-08T07:03:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480691",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@kwankyu](#comment:35):
> This script just needs to rewrite `sage.env.MATHJAX_DIR` to the system mathjax2 directory (`/usr/share/mathjax`?) if found in the system.

This may not be true since the system mathjax2 would have all fonts and be too large to use for sage documentation. Sphinx will copy the whole to each `_static` directory of every documentation (reference, tutorial, ...).

Then the conclusion would be that we should not try to use the system mathjax???



---

archive/issue_comments_480692.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@kwankyu](#comment:36):\n> This may not be true since the system mathjax2 would have all fonts and be too large to use for sage documentation. Sphinx will copy the whole to each `_static` directory of every documentation (reference, tutorial, ...).\n> \n> Then the conclusion would be that we should not try to use the system mathjax??? \n\nOn Arch (and Gentoo, which is where I got the idea from) distro packages we replace all `_static` copies with a symlink to the one in `html/en/_static` post-installation. Perhaps that sould be done on install by default?",
    "created_at": "2022-04-08T07:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480692",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@kwankyu](#comment:36):
> This may not be true since the system mathjax2 would have all fonts and be too large to use for sage documentation. Sphinx will copy the whole to each `_static` directory of every documentation (reference, tutorial, ...).
> 
> Then the conclusion would be that we should not try to use the system mathjax??? 

On Arch (and Gentoo, which is where I got the idea from) distro packages we replace all `_static` copies with a symlink to the one in `html/en/_static` post-installation. Perhaps that sould be done on install by default?



---

archive/issue_comments_480693.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@antonio-rojas](#comment:37):\n> On Arch (and Gentoo, which is where I got the idea from) distro packages we replace all `_static` copies with a symlink to the one in `html/en/_static` post-installation. Perhaps that should be done on install by default?\n\nI guess that could be done for sage, independent of this ticket. Then it would reduce the number of times to copy `$SAGE_SHARE/mathjax` to `_static/`.\n\nNonetheless, `spkg-configure.m4` needs to copy the reduced set of files from the system mathjax to `$SAGE_SHARE/mathjax`.",
    "created_at": "2022-04-08T07:28:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480693",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@antonio-rojas](#comment:37):
> On Arch (and Gentoo, which is where I got the idea from) distro packages we replace all `_static` copies with a symlink to the one in `html/en/_static` post-installation. Perhaps that should be done on install by default?

I guess that could be done for sage, independent of this ticket. Then it would reduce the number of times to copy `$SAGE_SHARE/mathjax` to `_static/`.

Nonetheless, `spkg-configure.m4` needs to copy the reduced set of files from the system mathjax to `$SAGE_SHARE/mathjax`.



---

archive/issue_comments_480694.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@kwankyu](#comment:38):\n> Replying to [@antonio-rojas](#comment:37):\n> > On Arch (and Gentoo, which is where I got the idea from) distro packages we replace all `_static` copies with a symlink to the one in `html/en/_static` post-installation. Perhaps that should be done on install by default?\n\n> \n> I guess that could be done for sage, independent of this ticket. Then it would reduce the number of times to copy `$SAGE_SHARE/mathjax` to `_static/`.\n> \n> Nonetheless, `spkg-configure.m4` needs to copy the reduced set of files from the system mathjax to `$SAGE_SHARE/mathjax`.\n\nWell, my point is that once there is just one copy of `_static`, then maybe it's not *that* bad to just copy over the entire contents of the system mathjax dir.",
    "created_at": "2022-04-08T12:19:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480694",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@kwankyu](#comment:38):
> Replying to [@antonio-rojas](#comment:37):
> > On Arch (and Gentoo, which is where I got the idea from) distro packages we replace all `_static` copies with a symlink to the one in `html/en/_static` post-installation. Perhaps that should be done on install by default?

> 
> I guess that could be done for sage, independent of this ticket. Then it would reduce the number of times to copy `$SAGE_SHARE/mathjax` to `_static/`.
> 
> Nonetheless, `spkg-configure.m4` needs to copy the reduced set of files from the system mathjax to `$SAGE_SHARE/mathjax`.

Well, my point is that once there is just one copy of `_static`, then maybe it's not *that* bad to just copy over the entire contents of the system mathjax dir.



---

archive/issue_comments_480695.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@antonio-rojas](#comment:39):\n> Well, my point is that once there is just one copy of `_static`, then maybe it's not *that* bad to just copy over the entire contents of the system mathjax dir.\n\nIt would not be just one copy, because you have `_static` directory for each of languages.",
    "created_at": "2022-04-08T12:53:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480695",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@antonio-rojas](#comment:39):
> Well, my point is that once there is just one copy of `_static`, then maybe it's not *that* bad to just copy over the entire contents of the system mathjax dir.

It would not be just one copy, because you have `_static` directory for each of languages.



---

archive/issue_comments_480696.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@antonio-rojas](#comment:39):\n> Well, my point is that once there is just one copy of `_static`, then maybe it's not *that* bad to just copy over the entire contents of the system mathjax dir.\n\nOne copy to `html/_static` might suffice. \n\nOther question: the location of the system mathjax is `/usr/share/mathjax` on all linux platforms? Or does it vary?",
    "created_at": "2022-04-08T14:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480696",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@antonio-rojas](#comment:39):
> Well, my point is that once there is just one copy of `_static`, then maybe it's not *that* bad to just copy over the entire contents of the system mathjax dir.

One copy to `html/_static` might suffice. 

Other question: the location of the system mathjax is `/usr/share/mathjax` on all linux platforms? Or does it vary?



---

archive/issue_comments_480697.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThe mathjax3 tarball is around 5Mb. I think this is not so big. Then is it worth while to detect the system mathjax and copy it instead of downloading the tarball?",
    "created_at": "2022-04-08T14:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480697",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:42" align="right">comment:42</div>

The mathjax3 tarball is around 5Mb. I think this is not so big. Then is it worth while to detect the system mathjax and copy it instead of downloading the tarball?



---

archive/issue_comments_480698.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@kwankyu](#comment:41):\n> Other question: the location of the system mathjax is `/usr/share/mathjax` on all linux platforms? Or does it vary?\n\nmathjax doesn't provide an install script, so unfortunately there's no standard location and it's up to each distro to decide where to install it. On Arch we use `/usr/share/mathjax`, other distros may use `mathjax3` instead if they also ship v2. (But, according to https://repology.org/project/mathjax/versions, no other distro is shipping mathjax 3 yet)",
    "created_at": "2022-04-08T14:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480698",
    "user": "https://github.com/antonio-rojas"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@kwankyu](#comment:41):
> Other question: the location of the system mathjax is `/usr/share/mathjax` on all linux platforms? Or does it vary?

mathjax doesn't provide an install script, so unfortunately there's no standard location and it's up to each distro to decide where to install it. On Arch we use `/usr/share/mathjax`, other distros may use `mathjax3` instead if they also ship v2. (But, according to https://repology.org/project/mathjax/versions, no other distro is shipping mathjax 3 yet)



---

archive/issue_comments_480699.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@antonio-rojas](#comment:43):\n> Replying to [@kwankyu](#comment:41):\n> > Other question: the location of the system mathjax is `/usr/share/mathjax` on all linux platforms? Or does it vary?\n\n> \n> mathjax doesn't provide an install script, so unfortunately there's no standard location and it's up to each distro to decide where to install it. \n\nmathjax is a javascript library, and perhaps unique in that among sage spkgs. I doubt if `spkg-configure.m4` script is relevant with mathjax. \n\n`@`matthias: would you comment?",
    "created_at": "2022-04-08T15:11:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480699",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@antonio-rojas](#comment:43):
> Replying to [@kwankyu](#comment:41):
> > Other question: the location of the system mathjax is `/usr/share/mathjax` on all linux platforms? Or does it vary?

> 
> mathjax doesn't provide an install script, so unfortunately there's no standard location and it's up to each distro to decide where to install it. 

mathjax is a javascript library, and perhaps unique in that among sage spkgs. I doubt if `spkg-configure.m4` script is relevant with mathjax. 

`@`matthias: would you comment?



---

archive/issue_comments_480700.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nGiven that the spread of mathjax 3 in distributions is so low, I don't think that there is a need to support system packages providing it. If this changes in the future, `spkg-configure.m4` would be the correct mechanism though.",
    "created_at": "2022-04-08T16:05:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480700",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Given that the spread of mathjax 3 in distributions is so low, I don't think that there is a need to support system packages providing it. If this changes in the future, `spkg-configure.m4` would be the correct mechanism though.



---

archive/issue_comments_480701.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@kwankyu](#comment:44):\n> \n> mathjax is a javascript library, and perhaps unique in that among sage spkgs. I doubt if `spkg-configure.m4` script is relevant with mathjax. \n> \n\nIt is kind of an awkward fit, since there's no reliable way of detecting via `spkg-configure.m4` where the the html/js files might live. But we can at the very least check a list of known locations. The gp2c package does that for lack of a better strategy.",
    "created_at": "2022-04-10T20:56:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480701",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@kwankyu](#comment:44):
> 
> mathjax is a javascript library, and perhaps unique in that among sage spkgs. I doubt if `spkg-configure.m4` script is relevant with mathjax. 
> 

It is kind of an awkward fit, since there's no reliable way of detecting via `spkg-configure.m4` where the the html/js files might live. But we can at the very least check a list of known locations. The gp2c package does that for lack of a better strategy.



---

archive/issue_comments_480702.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nOne would probably only want to search for the system library when also system `node` is installed, which would give discoverability.",
    "created_at": "2022-04-10T21:26:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480702",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

One would probably only want to search for the system library when also system `node` is installed, which would give discoverability.



---

archive/issue_comments_480703.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@orlitzky](#comment:46):\n> Replying to [@kwankyu](#comment:44):\n> > \n> > mathjax is a javascript library, and perhaps unique in that among sage spkgs. I doubt if `spkg-configure.m4` script is relevant with mathjax. \n> > \n\n> \n> It is kind of an awkward fit, since there's no reliable way of detecting via `spkg-configure.m4` where the the html/js files might live. But we can at the very least check a list of known locations. The gp2c package does that for lack of a better strategy.\n\nI agree. Still as this mathjax package is not big and does not take time to install, I doubt if it would ever be worth while to put necessary efforts for this package.\n\nHence I suggest closing this ticket as \"won't fix\".",
    "created_at": "2022-04-11T00:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480703",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@orlitzky](#comment:46):
> Replying to [@kwankyu](#comment:44):
> > 
> > mathjax is a javascript library, and perhaps unique in that among sage spkgs. I doubt if `spkg-configure.m4` script is relevant with mathjax. 
> > 

> 
> It is kind of an awkward fit, since there's no reliable way of detecting via `spkg-configure.m4` where the the html/js files might live. But we can at the very least check a list of known locations. The gp2c package does that for lack of a better strategy.

I agree. Still as this mathjax package is not big and does not take time to install, I doubt if it would ever be worth while to put necessary efforts for this package.

Hence I suggest closing this ticket as "won't fix".



---

archive/issue_comments_480704.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@kwankyu](#comment:48):\n>\n> Hence I suggest closing this ticket as \"won't fix\". \n> \n\nSage's mathjax has \"never\" worked for me. This is probably due to font stripping ([#18596 comment:4](https://github.com/sagemath/sage/issues/18596#comment:4)), but undoing that would make the package larger.\n\nSo I'd quite like the ability to use the unbroken copy my distro provides, regardless of any time/bandwidth savings. Ultimately I can write the spkg-configure if no one else does it. I'll probably wait until the mathjax-3.x upgrade is done though.",
    "created_at": "2022-04-12T21:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480704",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@kwankyu](#comment:48):
>
> Hence I suggest closing this ticket as "won't fix". 
> 

Sage's mathjax has "never" worked for me. This is probably due to font stripping ([#18596 comment:4](https://github.com/sagemath/sage/issues/18596#comment:4)), but undoing that would make the package larger.

So I'd quite like the ability to use the unbroken copy my distro provides, regardless of any time/bandwidth savings. Ultimately I can write the spkg-configure if no one else does it. I'll probably wait until the mathjax-3.x upgrade is done though.



---

archive/issue_comments_480705.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@orlitzky](#comment:49):\n> Replying to [@kwankyu](#comment:48):\n> >\n> > Hence I suggest closing this ticket as \"won't fix\". \n> > \n\n> \n> Sage's mathjax has \"never\" worked for me. This is probably due to font stripping ([#18596 comment:4](https://github.com/sagemath/sage/issues/18596#comment:4)), but undoing that would make the package larger.\n> \n> So I'd quite like the ability to use the unbroken copy my distro provides, regardless of any time/bandwidth savings. Ultimately I can write the spkg-configure if no one else does it. I'll probably wait until the mathjax-3.x upgrade is done though.\n\nOkay. Thanks. Does mathjax3 (#25833) work for you?",
    "created_at": "2022-04-12T23:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480705",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@orlitzky](#comment:49):
> Replying to [@kwankyu](#comment:48):
> >
> > Hence I suggest closing this ticket as "won't fix". 
> > 

> 
> Sage's mathjax has "never" worked for me. This is probably due to font stripping ([#18596 comment:4](https://github.com/sagemath/sage/issues/18596#comment:4)), but undoing that would make the package larger.
> 
> So I'd quite like the ability to use the unbroken copy my distro provides, regardless of any time/bandwidth savings. Ultimately I can write the spkg-configure if no one else does it. I'll probably wait until the mathjax-3.x upgrade is done though.

Okay. Thanks. Does mathjax3 (#25833) work for you?



---

archive/issue_comments_480706.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@kwankyu](#comment:50):\n> \n> Okay. Thanks. Does mathjax3 (#25833) work for you? \n\nYes, thanks, replied there.",
    "created_at": "2022-04-13T20:11:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480706",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@kwankyu](#comment:50):
> 
> Okay. Thanks. Does mathjax3 (#25833) work for you? 

Yes, thanks, replied there.



---

archive/issue_events_417339.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417339"
}
```



---

archive/issue_events_417340.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30296#event-417340"
}
```



---

archive/issue_comments_480707.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nReplying to [Michael Orlitzky](#comment:49):\n> Ultimately I can write the spkg-configure if no one else does it. I'll probably wait until the mathjax-3.x upgrade is done though.\n\nNow that mathjax3 is well in place, would you do the work? \n\nFrom Matthias: `src/sage/docs/conf.py` expects sage.env.MATHJAX_DIR to be set to the location. This is what we'd have to configure if we take mathjax either from a system installation, or some other source.",
    "created_at": "2022-11-24T05:14:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480707",
    "user": "https://github.com/kwankyu"
}
```

<div id="comment:53" align="right">comment:53</div>

Replying to [Michael Orlitzky](#comment:49):
> Ultimately I can write the spkg-configure if no one else does it. I'll probably wait until the mathjax-3.x upgrade is done though.

Now that mathjax3 is well in place, would you do the work? 

From Matthias: `src/sage/docs/conf.py` expects sage.env.MATHJAX_DIR to be set to the location. This is what we'd have to configure if we take mathjax either from a system installation, or some other source.



---

archive/issue_comments_480708.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nReplying to [Kwankyu Lee](#comment:53):\n> Replying to [Michael Orlitzky](#comment:49):\n> > Ultimately I can write the spkg-configure if no one else does it. I'll probably wait until the mathjax-3.x upgrade is done though.\n\n> \n> Now that mathjax3 is well in place, would you do the work?\n\nNow I'm waiting for my distro package to be upgraded (https://bugs.gentoo.org/837722), but yes, I'll get to it eventually.",
    "created_at": "2022-11-24T10:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30296",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30296#issuecomment-480708",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:54" align="right">comment:54</div>

Replying to [Kwankyu Lee](#comment:53):
> Replying to [Michael Orlitzky](#comment:49):
> > Ultimately I can write the spkg-configure if no one else does it. I'll probably wait until the mathjax-3.x upgrade is done though.

> 
> Now that mathjax3 is well in place, would you do the work?

Now I'm waiting for my distro package to be upgraded (https://bugs.gentoo.org/837722), but yes, I'll get to it eventually.
