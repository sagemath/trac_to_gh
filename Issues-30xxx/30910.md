# Issue 30910: GH Actions: Fixes for WSL workflow

archive/issues_030673.json:
```json
{
    "body": "Like the other workflows, it now runs only on tags and pushes to branch having \"wsl\" in the name (to ease testing if the workflow has to be changed).\n\nCurrently it dies if a system package does not exist - even for optional packages.\nThis is fixed with this ticket.\nhttps://github.com/tobiasdiez/sage/runs/1405834030?check_suite_focus=true\n\n\n\n\nCC:  @tobiasdiez\n\nBranch/Commit: 3ccae0258309b682d6429cafbc656e90894d6ebe\n\nReviewer: Matthias Koeppe\n\nAuthor: Tobias Diez\n\nDependencies: #30923\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30910\n\n",
    "closed_at": "2020-11-29T11:58:03Z",
    "created_at": "2020-11-13T21:15:12Z",
    "labels": [
        "component: porting",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "GH Actions: Fixes for WSL workflow",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30910",
    "user": "https://github.com/mkoeppe"
}
```
Like the other workflows, it now runs only on tags and pushes to branch having "wsl" in the name (to ease testing if the workflow has to be changed).

Currently it dies if a system package does not exist - even for optional packages.
This is fixed with this ticket.
https://github.com/tobiasdiez/sage/runs/1405834030?check_suite_focus=true




CC:  @tobiasdiez

Branch/Commit: 3ccae0258309b682d6429cafbc656e90894d6ebe

Reviewer: Matthias Koeppe

Author: Tobias Diez

Dependencies: #30923

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30910





---

archive/issue_comments_613034.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-11-16T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613034",
    "user": "https://github.com/tobiasdiez"
}
```

Changing priority from major to critical.



---

archive/issue_comments_613035.json:
```json
{
    "body": "<a id='comment:1'></a>\nLast 10 new commits:\n|                                                                                                                                          |                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------|\n|[942149e](https://git.sagemath.org/sage.git/commit?id=942149ee76a97628046042b7255a2d31630e7721)|`Add confirmation`|\n|[75ecd11](https://git.sagemath.org/sage.git/commit?id=75ecd11e878e34a4c508d2f983b6d7527e689f94)|`tox.ini (local-sudo): Also use ...-bootstrap.txt`|\n|[0dc79eb](https://git.sagemath.org/sage.git/commit?id=0dc79eb4b542a11aa8c226ca8cf9f0e2306698eb)|`build/bin/sage-print-system-package-command: Handle --no-install-recommends, --yes for systems for which write-dockerfile.sh knows these flags`|\n|[050dcb8](https://git.sagemath.org/sage.git/commit?id=050dcb8275b3a7e0db4c7ae3503428107bb5bf17)|`tox.ini (local-sudo): Use --yes --no-install-recommends`|\n|[c8fbe0b](https://git.sagemath.org/sage.git/commit?id=c8fbe0beaec3a404d330aaebdf37186e9c6becec)|`tox.ini (local-sudo): Ignore errors when IGNORE_MISSING_SYSTEM_PACKAGES=yes`|\n|[ff34897](https://git.sagemath.org/sage.git/commit?id=ff34897cac35061afd348cc08a6559f95f406f14)|`tox.ini (local): Guess the package system if it is not provided as a factor`|\n|[e27ff19](https://git.sagemath.org/sage.git/commit?id=e27ff19a5969919ceb43fe910fc8d43cfb0c7bf0)|`Merge branch 'u/mkoeppe/tox_ini__add_environments_local_sudo_ubuntu_standard__etc_' of git://trac.sagemath.org/sage into public/build/fixwsl`|\n|[6ff45c4](https://git.sagemath.org/sage.git/commit?id=6ff45c41ce97531cc845456941a982c9b583d5f7)|`Cleanup workflow`|\n|[5348144](https://git.sagemath.org/sage.git/commit?id=53481440a24a3914430dcbf1cf4e19e4aab5267c)|`Replace texlive-generic-extra`|\n|[0fd029f](https://git.sagemath.org/sage.git/commit?id=0fd029f1e2b1e8384d14995c361f90e331b784b9)|`Narrow down events that trigger the workflow`|",
    "created_at": "2020-11-16T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613035",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>
Last 10 new commits:
|                                                                                                                                          |                  |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------|
|[942149e](https://git.sagemath.org/sage.git/commit?id=942149ee76a97628046042b7255a2d31630e7721)|`Add confirmation`|
|[75ecd11](https://git.sagemath.org/sage.git/commit?id=75ecd11e878e34a4c508d2f983b6d7527e689f94)|`tox.ini (local-sudo): Also use ...-bootstrap.txt`|
|[0dc79eb](https://git.sagemath.org/sage.git/commit?id=0dc79eb4b542a11aa8c226ca8cf9f0e2306698eb)|`build/bin/sage-print-system-package-command: Handle --no-install-recommends, --yes for systems for which write-dockerfile.sh knows these flags`|
|[050dcb8](https://git.sagemath.org/sage.git/commit?id=050dcb8275b3a7e0db4c7ae3503428107bb5bf17)|`tox.ini (local-sudo): Use --yes --no-install-recommends`|
|[c8fbe0b](https://git.sagemath.org/sage.git/commit?id=c8fbe0beaec3a404d330aaebdf37186e9c6becec)|`tox.ini (local-sudo): Ignore errors when IGNORE_MISSING_SYSTEM_PACKAGES=yes`|
|[ff34897](https://git.sagemath.org/sage.git/commit?id=ff34897cac35061afd348cc08a6559f95f406f14)|`tox.ini (local): Guess the package system if it is not provided as a factor`|
|[e27ff19](https://git.sagemath.org/sage.git/commit?id=e27ff19a5969919ceb43fe910fc8d43cfb0c7bf0)|`Merge branch 'u/mkoeppe/tox_ini__add_environments_local_sudo_ubuntu_standard__etc_' of git://trac.sagemath.org/sage into public/build/fixwsl`|
|[6ff45c4](https://git.sagemath.org/sage.git/commit?id=6ff45c41ce97531cc845456941a982c9b583d5f7)|`Cleanup workflow`|
|[5348144](https://git.sagemath.org/sage.git/commit?id=53481440a24a3914430dcbf1cf4e19e4aab5267c)|`Replace texlive-generic-extra`|
|[0fd029f](https://git.sagemath.org/sage.git/commit?id=0fd029f1e2b1e8384d14995c361f90e331b784b9)|`Narrow down events that trigger the workflow`|



---

archive/issue_comments_613036.json:
```json
{
    "body": "Changing commit from \"\" to \"0fd029f1e2b1e8384d14995c361f90e331b784b9\"",
    "created_at": "2020-11-16T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613036",
    "user": "https://github.com/tobiasdiez"
}
```

Changing commit from "" to "0fd029f1e2b1e8384d14995c361f90e331b784b9"



---

archive/issue_comments_613037.json:
```json
{
    "body": "Changing branch from \"\" to \"public/build/fixwsl\"",
    "created_at": "2020-11-16T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613037",
    "user": "https://github.com/tobiasdiez"
}
```

Changing branch from "" to "public/build/fixwsl"



---

archive/issue_comments_613038.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,8 @@\n-It should only run on tags, like the other workflows\n+Like the other workflows, it now runs only on tags and pushes to branch having \"wsl\" in the name (to ease testing if the workflow has to be changed).\n \n-Currently it dies if a system package does not exist - even for optional packages - https://github.com/sagemath/sage/runs/1368397973?check_suite_focus=true\n+Currently it dies if a system package does not exist - even for optional packages.\n+This is fixed with this ticket.\n+https://github.com/tobiasdiez/sage/runs/1405834030?check_suite_focus=true\n \n \n \n-\n``````\n",
    "created_at": "2020-11-16T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613038",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,8 @@
-It should only run on tags, like the other workflows
+Like the other workflows, it now runs only on tags and pushes to branch having "wsl" in the name (to ease testing if the workflow has to be changed).
 
-Currently it dies if a system package does not exist - even for optional packages - https://github.com/sagemath/sage/runs/1368397973?check_suite_focus=true
+Currently it dies if a system package does not exist - even for optional packages.
+This is fixed with this ticket.
+https://github.com/tobiasdiez/sage/runs/1405834030?check_suite_focus=true
 
 
 
-
``````




---

archive/issue_comments_613039.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30923\"",
    "created_at": "2020-11-16T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613039",
    "user": "https://github.com/tobiasdiez"
}
```

Changing dependencies from "" to "#30923"



---

archive/issue_comments_613040.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-16T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613040",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_613041.json:
```json
{
    "body": "Changing author from \"\" to \"Tobias Diez\"",
    "created_at": "2020-11-16T10:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613041",
    "user": "https://github.com/tobiasdiez"
}
```

Changing author from "" to "Tobias Diez"



---

archive/issue_comments_613042.json:
```json
{
    "body": "<a id='comment:2'></a>\nI don't think `texlive-plain-generic` is the right package. We use latex, not plain tex",
    "created_at": "2020-11-16T20:06:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613042",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
I don't think `texlive-plain-generic` is the right package. We use latex, not plain tex



---

archive/issue_comments_613043.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-11-16T20:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613043",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_613044.json:
```json
{
    "body": "<a id='comment:4'></a>\nI'm also not sure, but looking at https://packages.ubuntu.com/bionic/texlive-generic-extra it looks like `texlive-generic-extra` is a (deprecated) wrapper around `texlive-plain-generic`.\n\n(The dependency might actually be there not for the pdf/latex docs but for the html docs, which requires bibtex to generate the aux.)",
    "created_at": "2020-11-16T20:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613044",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>
I'm also not sure, but looking at https://packages.ubuntu.com/bionic/texlive-generic-extra it looks like `texlive-generic-extra` is a (deprecated) wrapper around `texlive-plain-generic`.

(The dependency might actually be there not for the pdf/latex docs but for the html docs, which requires bibtex to generate the aux.)



---

archive/issue_comments_613045.json:
```json
{
    "body": "<a id='comment:5'></a>\nI think I would go for `texlive-latex-extra` - https://packages.ubuntu.com/groovy/texlive-latex-extra",
    "created_at": "2020-11-16T20:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613045",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
I think I would go for `texlive-latex-extra` - https://packages.ubuntu.com/groovy/texlive-latex-extra



---

archive/issue_comments_613046.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|\n|[3ccae02](https://git.sagemath.org/sage.git/commit/?id=3ccae0258309b682d6429cafbc656e90894d6ebe)|`build/pkgs/_recommended/distros/debian.txt: Update latex package`|",
    "created_at": "2020-11-17T02:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613046",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------|
|[3ccae02](https://git.sagemath.org/sage.git/commit/?id=3ccae0258309b682d6429cafbc656e90894d6ebe)|`build/pkgs/_recommended/distros/debian.txt: Update latex package`|



---

archive/issue_comments_613047.json:
```json
{
    "body": "Changing commit from \"0fd029f1e2b1e8384d14995c361f90e331b784b9\" to \"3ccae0258309b682d6429cafbc656e90894d6ebe\"",
    "created_at": "2020-11-17T02:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613047",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0fd029f1e2b1e8384d14995c361f90e331b784b9" to "3ccae0258309b682d6429cafbc656e90894d6ebe"



---

archive/issue_comments_613048.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-17T02:31:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613048",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_613049.json:
```json
{
    "body": "<a id='comment:8'></a>\nThanks!",
    "created_at": "2020-11-20T19:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613049",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:8'></a>
Thanks!



---

archive/issue_events_080696.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-29T11:58:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30910#event-80696"
}
```



---

archive/issue_comments_613050.json:
```json
{
    "body": "Changing branch from \"public/build/fixwsl\" to \"3ccae0258309b682d6429cafbc656e90894d6ebe\"",
    "created_at": "2020-11-29T11:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613050",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/build/fixwsl" to "3ccae0258309b682d6429cafbc656e90894d6ebe"



---

archive/issue_comments_613051.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-29T11:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30910",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30910#issuecomment-613051",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
