# Issue 30360: Fix multiplication of number field element * ZZ-vector by handling latex names of number field generators

archive/issues_030123.json:
```json
{
    "body": "```\nsage: 1/2*vector([1,2,3])\n(1/2, 1, 3/2)\n```\n\n```\nsage: AA(2).sqrt()*vector([1,2,3])                                                                                                                                                                                                                                                                                                                                         \n(1.414213562373095?, 2.828427124746190?, 4.242640687119285?)\n```\n\n```\nsage: K.<sqrt5> = QuadraticField(5, embedding=AA(5).sqrt())                                                                                                                                                                                                                                                                                                                \nsage: sqrt5*vector([1,2])                                                                                                                                                                                                                                                                                                                                                  \n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-65-1ac790b433d6> in <module>\n----> 1 sqrt5*vector([Integer(1),Integer(2)])\n\n~/Applications/sage/local/lib/python3.7/site-packages/sage/structure/element.pyx in sage.structure.element.Element.__mul__ (build/cythonized/sage/structure/element.c:12196)()\n   1513             return (<Element>left)._mul_(right)\n   1514         if BOTH_ARE_ELEMENT(cl):\n-> 1515             return coercion_model.bin_op(left, right, mul)\n   1516 \n   1517         cdef long value\n\n~/Applications/sage/local/lib/python3.7/site-packages/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel.bin_op (build/cythonized/sage/structure/coerce.c:11304)()\n   1246         # We should really include the underlying error.\n   1247         # This causes so much headache.\n-> 1248         raise bin_op_exception(op, x, y)\n   1249 \n   1250     cpdef canonical_coercion(self, x, y):\n\nTypeError: unsupported operand parent(s) for *: 'Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?' and 'Ambient free module of rank 2 over the principal ideal domain Integer Ring'\n```\n\nIt doesn't matter whether you specify the embedding or not.\n\nCC:  @videlec @tscrim\n\nKeywords: action, scalar, number field, free module\n\nBranch/Commit: a3c790f6fb38fca37c37dae86e568a5acdedb1c0\n\nReviewer: Travis Scrimshaw\n\nAuthor: Matthias Koeppe, Francis Clarke\n\nDependencies: #30372\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30360\n\n",
    "closed_at": "2020-09-01T22:59:36Z",
    "created_at": "2020-08-14T20:21:18Z",
    "labels": [
        "component: coercion",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Fix multiplication of number field element * ZZ-vector by handling latex names of number field generators",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30360",
    "user": "https://github.com/kliem"
}
```
```
sage: 1/2*vector([1,2,3])
(1/2, 1, 3/2)
```

```
sage: AA(2).sqrt()*vector([1,2,3])                                                                                                                                                                                                                                                                                                                                         
(1.414213562373095?, 2.828427124746190?, 4.242640687119285?)
```

```
sage: K.<sqrt5> = QuadraticField(5, embedding=AA(5).sqrt())                                                                                                                                                                                                                                                                                                                
sage: sqrt5*vector([1,2])                                                                                                                                                                                                                                                                                                                                                  
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-65-1ac790b433d6> in <module>
----> 1 sqrt5*vector([Integer(1),Integer(2)])

~/Applications/sage/local/lib/python3.7/site-packages/sage/structure/element.pyx in sage.structure.element.Element.__mul__ (build/cythonized/sage/structure/element.c:12196)()
   1513             return (<Element>left)._mul_(right)
   1514         if BOTH_ARE_ELEMENT(cl):
-> 1515             return coercion_model.bin_op(left, right, mul)
   1516 
   1517         cdef long value

~/Applications/sage/local/lib/python3.7/site-packages/sage/structure/coerce.pyx in sage.structure.coerce.CoercionModel.bin_op (build/cythonized/sage/structure/coerce.c:11304)()
   1246         # We should really include the underlying error.
   1247         # This causes so much headache.
-> 1248         raise bin_op_exception(op, x, y)
   1249 
   1250     cpdef canonical_coercion(self, x, y):

TypeError: unsupported operand parent(s) for *: 'Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?' and 'Ambient free module of rank 2 over the principal ideal domain Integer Ring'
```

It doesn't matter whether you specify the embedding or not.

CC:  @videlec @tscrim

Keywords: action, scalar, number field, free module

Branch/Commit: a3c790f6fb38fca37c37dae86e568a5acdedb1c0

Reviewer: Travis Scrimshaw

Author: Matthias Koeppe, Francis Clarke

Dependencies: #30372

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30360





---

archive/issue_comments_597991.json:
```json
{
    "body": "<a id='comment:2'></a>It's not really the pushout that's failing here:\n\n```\nsage: from sage.categories.pushout import pushout\nsage: pushout(sqrt5.parent(), vector([1,2]).parent())\nVector space of dimension 2 over Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?\n```",
    "created_at": "2020-08-14T23:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597991",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>It's not really the pushout that's failing here:

```
sage: from sage.categories.pushout import pushout
sage: pushout(sqrt5.parent(), vector([1,2]).parent())
Vector space of dimension 2 over Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?
```



---

archive/issue_comments_597992.json:
```json
{
    "body": "<a id='comment:3'></a>I think the methods `_lmul_` and `_rmul_` of `NumberFieldElement_quadratic` are in the way. I think they may just need to be removed (haven't tried)",
    "created_at": "2020-08-14T23:53:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597992",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>I think the methods `_lmul_` and `_rmul_` of `NumberFieldElement_quadratic` are in the way. I think they may just need to be removed (haven't tried)



---

archive/issue_comments_597993.json:
```json
{
    "body": "Changing keywords from \"pushout, number field, free module\" to \"action, scalar, number field, free module\".",
    "created_at": "2020-08-15T11:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597993",
    "user": "https://github.com/kliem"
}
```

Changing keywords from "pushout, number field, free module" to "action, scalar, number field, free module".



---

archive/issue_comments_597994.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/action_of_number_field_on_free_module_over_zz_not_discovered\"",
    "created_at": "2020-08-15T16:21:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597994",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/action_of_number_field_on_free_module_over_zz_not_discovered"



---

archive/issue_comments_597995.json:
```json
{
    "body": "Changing commit from \"\" to \"8a9c2aa05454dc3695a1f8eceb4b657047fda489\"",
    "created_at": "2020-08-15T16:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597995",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "8a9c2aa05454dc3695a1f8eceb4b657047fda489"



---

archive/issue_comments_597996.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:3 mkoeppe]:\n> I think the methods `_lmul_` and `_rmul_` of `NumberFieldElement_quadratic` are in the way. I think they may just need to be removed (haven't tried)\n\n\nBy itself this does not fix it... (see branch)\n\n---\nNew commits:",
    "created_at": "2020-08-15T16:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597996",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Replying to [comment:3 mkoeppe]:
> I think the methods `_lmul_` and `_rmul_` of `NumberFieldElement_quadratic` are in the way. I think they may just need to be removed (haven't tried)


By itself this does not fix it... (see branch)

---
New commits:



---

archive/issue_comments_597997.json:
```json
{
    "body": "<a id='comment:8'></a>You are right, the action is missing.\n\n```\nsage: cm.explain(AA, vector([1,2]).parent(), operator.mul)                                                                                                          \nAction discovered.\n    Left scalar multiplication by Algebraic Real Field on Ambient free module of rank 2 over the principal ideal domain Integer Ring\nResult lives in Vector space of dimension 2 over Algebraic Real Field\nVector space of dimension 2 over Algebraic Real Field\nsage: cm.explain(K, vector([1,2]).parent(), operator.mul)                                                                                                           \n\nUnknown result parent.\n```",
    "created_at": "2020-08-15T16:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597997",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>You are right, the action is missing.

```
sage: cm.explain(AA, vector([1,2]).parent(), operator.mul)                                                                                                          
Action discovered.
    Left scalar multiplication by Algebraic Real Field on Ambient free module of rank 2 over the principal ideal domain Integer Ring
Result lives in Vector space of dimension 2 over Algebraic Real Field
Vector space of dimension 2 over Algebraic Real Field
sage: cm.explain(K, vector([1,2]).parent(), operator.mul)                                                                                                           

Unknown result parent.
```



---

archive/issue_comments_597998.json:
```json
{
    "body": "<a id='comment:9'></a>It looks like this is because of a unique representation / equality bug for number fields",
    "created_at": "2020-08-15T16:54:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597998",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>It looks like this is because of a unique representation / equality bug for number fields



---

archive/issue_comments_597999.json:
```json
{
    "body": "<a id='comment:10'></a>\n```\nsage: K.<sqrt5> = QuadraticField(5, embedding=AA(5).sqrt())\nsage: V = vector([1, 2]).parent()\nsage: from sage.structure.coerce_actions import LeftModuleAction                                                                                                    \nsage: LeftModuleAction(AA, V)\nLeft scalar multiplication by Algebraic Real Field on Ambient free module of rank 2 over the principal ideal domain Integer Ring\nsage: LeftModuleAction(K, V)                                                                                                                               \nCoercionException: Actor must be coercible into base.\n```\n\nLooking at `LeftModuleAction.__init__`, this boils down to:\n\n```\nsage: from sage.categories.pushout import pushout                                                         \nsage: K                                                                                                   \nNumber Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?\nsage: pushout(K, ZZ) is K                                                                                 \nTrue\nsage: K2 = pushout(K, V).base(); K2                                                                       \nNumber Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?\nsage: K2 is K                                                                                             \nFalse\nsage: K2 == K                                                                                             \nFalse\n```",
    "created_at": "2020-08-15T17:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-597999",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
```
sage: K.<sqrt5> = QuadraticField(5, embedding=AA(5).sqrt())
sage: V = vector([1, 2]).parent()
sage: from sage.structure.coerce_actions import LeftModuleAction                                                                                                    
sage: LeftModuleAction(AA, V)
Left scalar multiplication by Algebraic Real Field on Ambient free module of rank 2 over the principal ideal domain Integer Ring
sage: LeftModuleAction(K, V)                                                                                                                               
CoercionException: Actor must be coercible into base.
```

Looking at `LeftModuleAction.__init__`, this boils down to:

```
sage: from sage.categories.pushout import pushout                                                         
sage: K                                                                                                   
Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?
sage: pushout(K, ZZ) is K                                                                                 
True
sage: K2 = pushout(K, V).base(); K2                                                                       
Number Field in sqrt5 with defining polynomial x^2 - 5 with sqrt5 = 2.236067977499790?
sage: K2 is K                                                                                             
False
sage: K2 == K                                                                                             
False
```



---

archive/issue_comments_598000.json:
```json
{
    "body": "<a id='comment:11'></a>This bug seems specific to quadratic fields:\n\n```\nsage: K = QuadraticField(5)                                                                               \nsage: pushout(K, ZZ^2).base() is K                                                                        \nFalse\nsage: K.<a> = NumberField(x^3 + 2/3*x + 1)                                                                \nsage: pushout(K, ZZ^2).base() is K                                                                        \nTrue\nsage: K.<a> = NumberField(x^3 + 2/3*x + 1, embedding=AA(1))                                               \nsage: pushout(K, ZZ^2).base() is K                                                                        \nTrue\n```",
    "created_at": "2020-08-15T17:06:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598000",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>This bug seems specific to quadratic fields:

```
sage: K = QuadraticField(5)                                                                               
sage: pushout(K, ZZ^2).base() is K                                                                        
False
sage: K.<a> = NumberField(x^3 + 2/3*x + 1)                                                                
sage: pushout(K, ZZ^2).base() is K                                                                        
True
sage: K.<a> = NumberField(x^3 + 2/3*x + 1, embedding=AA(1))                                               
sage: pushout(K, ZZ^2).base() is K                                                                        
True
```



---

archive/issue_comments_598001.json:
```json
{
    "body": "<a id='comment:12'></a>\n```\nsage: QuadraticField(5).latex_variable_name()                                                                                       \n'\\\\sqrt{5}'\nsage: pushout(QuadraticField(5), ZZ^2).base().latex_variable_name()                                                                 \n'a'\n```\nThat's why they're not equal...",
    "created_at": "2020-08-15T17:27:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598001",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
```
sage: QuadraticField(5).latex_variable_name()                                                                                       
'\\sqrt{5}'
sage: pushout(QuadraticField(5), ZZ^2).base().latex_variable_name()                                                                 
'a'
```
That's why they're not equal...



---

archive/issue_comments_598002.json:
```json
{
    "body": "<a id='comment:13'></a>\n```\nsage: K = QuadraticField(5, latex_name=None)                                                                                        \nsage: pushout(K, ZZ^2).base() is K                                                                                                  \nTrue\nsage: K.<sqrt5> = QuadraticField(5, embedding=AA(5).sqrt(), latex_name=None)                                                                                                                                                                                                                                                                                                                \nsage: sqrt5*vector([1,2])  \n(sqrt5, 2*sqrt5)\n```",
    "created_at": "2020-08-15T17:32:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598002",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>
```
sage: K = QuadraticField(5, latex_name=None)                                                                                        
sage: pushout(K, ZZ^2).base() is K                                                                                                  
True
sage: K.<sqrt5> = QuadraticField(5, embedding=AA(5).sqrt(), latex_name=None)                                                                                                                                                                                                                                                                                                                
sage: sqrt5*vector([1,2])  
(sqrt5, 2*sqrt5)
```



---

archive/issue_comments_598003.json:
```json
{
    "body": "<a id='comment:14'></a>Also\n\n```\nsage: K.<a> = NumberField(x^3 + 2/3*x + 1, latex_name='mangrove') \nsage: pushout(K, ZZ^2).base() is K                                                                                            \nFalse\n```",
    "created_at": "2020-08-15T17:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598003",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Also

```
sage: K.<a> = NumberField(x^3 + 2/3*x + 1, latex_name='mangrove') 
sage: pushout(K, ZZ^2).base() is K                                                                                            
False
```



---

archive/issue_comments_598004.json:
```json
{
    "body": "<a id='comment:15'></a>Looks like `NumberField_generic.construction` needs to handle `latex_variable_names`.",
    "created_at": "2020-08-15T17:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598004",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Looks like `NumberField_generic.construction` needs to handle `latex_variable_names`.



---

archive/issue_comments_598005.json:
```json
{
    "body": "<a id='comment:16'></a>One more broken thing:\n\n```\nsage: K3.<a> = NumberField(x^3+x^2+1, latex_name=['alpha'])                                                                         \nsage: K3.latex_variable_names()                                                                                                     \n['a']\nsage: K3.latex_variable_name()                                                                                                      \n'alpha'\n```",
    "created_at": "2020-08-15T18:49:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598005",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>One more broken thing:

```
sage: K3.<a> = NumberField(x^3+x^2+1, latex_name=['alpha'])                                                                         
sage: K3.latex_variable_names()                                                                                                     
['a']
sage: K3.latex_variable_name()                                                                                                      
'alpha'
```



---

archive/issue_comments_598006.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30372\"",
    "created_at": "2020-08-15T19:06:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598006",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#30372"



---

archive/issue_comments_598007.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-08-15T19:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598007",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_598008.json:
```json
{
    "body": "Changing commit from \"8a9c2aa05454dc3695a1f8eceb4b657047fda489\" to \"7a88492013d4b4147c35d0ceb2124e38bc393aae\"",
    "created_at": "2020-08-15T19:12:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8a9c2aa05454dc3695a1f8eceb4b657047fda489" to "7a88492013d4b4147c35d0ceb2124e38bc393aae"



---

archive/issue_comments_598009.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-08-15T19:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598009",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_598010.json:
```json
{
    "body": "Changing commit from \"7a88492013d4b4147c35d0ceb2124e38bc393aae\" to \"20ce24899b75292cec183f6c6f8c4af8c13fbcfc\"",
    "created_at": "2020-08-15T20:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598010",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7a88492013d4b4147c35d0ceb2124e38bc393aae" to "20ce24899b75292cec183f6c6f8c4af8c13fbcfc"



---

archive/issue_comments_598011.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-15T20:28:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598011",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_598012.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-15T20:28:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598012",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_598013.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-16T00:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598013",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_598014.json:
```json
{
    "body": "Changing commit from \"20ce24899b75292cec183f6c6f8c4af8c13fbcfc\" to \"6d293911c4be27878476d9c057d70d5aa59f3305\"",
    "created_at": "2020-08-16T00:35:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598014",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "20ce24899b75292cec183f6c6f8c4af8c13fbcfc" to "6d293911c4be27878476d9c057d70d5aa59f3305"



---

archive/issue_comments_598015.json:
```json
{
    "body": "<a id='comment:23'></a>The test failure reported by the patchbot seems unrelated. Ready for review",
    "created_at": "2020-08-16T13:31:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598015",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>The test failure reported by the patchbot seems unrelated. Ready for review



---

archive/issue_comments_598016.json:
```json
{
    "body": "<a id='comment:24'></a>The test failure is subject of #29989, which is now closed.",
    "created_at": "2020-08-17T05:26:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598016",
    "user": "https://github.com/kliem"
}
```

<a id='comment:24'></a>The test failure is subject of #29989, which is now closed.



---

archive/issue_comments_598017.json:
```json
{
    "body": "<a id='comment:25'></a>It is a little strange that `extension()` has the parameters `name` and `names` but only `latex_name`. Although this isn't a dealbreaker, I think it would be good to have this consistent.",
    "created_at": "2020-08-17T06:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598017",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>It is a little strange that `extension()` has the parameters `name` and `names` but only `latex_name`. Although this isn't a dealbreaker, I think it would be good to have this consistent.



---

archive/issue_comments_598018.json:
```json
{
    "body": "<a id='comment:26'></a>Thanks. Note that this is a comment for the dependency #30372. I have just found an old ticket with a similar goal, #19657. I am going to make the improvement regarding `latex_name`, `latex_names` on that ticket, reworking it on top of #30372.",
    "created_at": "2020-08-17T06:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598018",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Thanks. Note that this is a comment for the dependency #30372. I have just found an old ticket with a similar goal, #19657. I am going to make the improvement regarding `latex_name`, `latex_names` on that ticket, reworking it on top of #30372.



---

archive/issue_comments_598019.json:
```json
{
    "body": "<a id='comment:27'></a>Sorry, I was confused.",
    "created_at": "2020-08-17T06:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598019",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Sorry, I was confused.



---

archive/issue_comments_598020.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-17T06:23:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598020",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_598021.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-17T22:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598021",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_598022.json:
```json
{
    "body": "Changing commit from \"6d293911c4be27878476d9c057d70d5aa59f3305\" to \"c598fbbd9730a35ec17cb0c72b3f8f1608fcadf2\"",
    "created_at": "2020-08-17T22:41:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598022",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6d293911c4be27878476d9c057d70d5aa59f3305" to "c598fbbd9730a35ec17cb0c72b3f8f1608fcadf2"



---

archive/issue_comments_598023.json:
```json
{
    "body": "<a id='comment:30'></a>Cherry-picked some more latex-name changes from #19657.",
    "created_at": "2020-08-17T22:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598023",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>Cherry-picked some more latex-name changes from #19657.



---

archive/issue_comments_598024.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-17T22:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598024",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_598025.json:
```json
{
    "body": "Changing author from \"Matthias Koeppe\" to \"Matthias Koeppe, Francis Clarke\"",
    "created_at": "2020-08-17T22:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598025",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "Matthias Koeppe" to "Matthias Koeppe, Francis Clarke"



---

archive/issue_comments_598026.json:
```json
{
    "body": "<a id='comment:32'></a>I am not sure about this:\n\n```python\n        if latex_name is None and latex_names is not None:\n            latex_name = latex_names\n```\nI would expect `latex_names` to be a tuple, so I would think the correct thing to do would be `latex_name = latex_names[0]`.",
    "created_at": "2020-08-18T00:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598026",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:32'></a>I am not sure about this:

```python
        if latex_name is None and latex_names is not None:
            latex_name = latex_names
```
I would expect `latex_names` to be a tuple, so I would think the correct thing to do would be `latex_name = latex_names[0]`.



---

archive/issue_comments_598027.json:
```json
{
    "body": "<a id='comment:33'></a>This is passed on to the `extension` method, which handles both singular and plural.",
    "created_at": "2020-08-18T00:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598027",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>This is passed on to the `extension` method, which handles both singular and plural.



---

archive/issue_comments_598028.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-08-18T00:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598028",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_598029.json:
```json
{
    "body": "<a id='comment:34'></a>Okay, good. Then let's wait for the patchbot, but if that is green, then positive review.",
    "created_at": "2020-08-18T00:22:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598029",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:34'></a>Okay, good. Then let's wait for the patchbot, but if that is green, then positive review.



---

archive/issue_comments_598030.json:
```json
{
    "body": "<a id='comment:35'></a>Thanks!",
    "created_at": "2020-08-18T02:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598030",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Thanks!



---

archive/issue_comments_598031.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-18T02:00:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598031",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_598032.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-24T22:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598032",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_598033.json:
```json
{
    "body": "<a id='comment:36'></a>PDF docs don't build",
    "created_at": "2020-08-24T22:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598033",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>PDF docs don't build



---

archive/issue_comments_598034.json:
```json
{
    "body": "<a id='comment:37'></a>`@`vbraun: Can you be more precice? Is this on a test branch on top of other tickets?\n\nThe patchbot exceeds disk quota due to `ccache`, so I don't think this has anything to do with this ticket.\n\nFor me, documentation builds just fine.",
    "created_at": "2020-08-25T05:51:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598034",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>`@`vbraun: Can you be more precice? Is this on a test branch on top of other tickets?

The patchbot exceeds disk quota due to `ccache`, so I don't think this has anything to do with this ticket.

For me, documentation builds just fine.



---

archive/issue_comments_598035.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-26T15:30:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598035",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_598036.json:
```json
{
    "body": "<a id='comment:39'></a>PDF docs don't build (non-pdf is ok)",
    "created_at": "2020-08-26T22:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598036",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:39'></a>PDF docs don't build (non-pdf is ok)



---

archive/issue_comments_598037.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-26T22:54:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598037",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_598038.json:
```json
{
    "body": "<a id='comment:40'></a>\n```\n[docpdf] \n[docpdf] ! Package inputenc Error: Unicode character ^^G (U+0007)\n[docpdf] (inputenc)                not set up for use with LaTeX.\n[docpdf] \n[docpdf] See the inputenc package documentation for explanation.\n[docpdf] Type  H <return>  for immediate help.\n[docpdf]  ...                                              \n[docpdf]                                                   \n[docpdf] l.1012 ...G{l+s+s1}{\\PYGZsq{}}\\PYG{p}{]}\\PYG{p}{)}\n[docpdf]                                                   \n[docpdf] ? \n[docpdf] ! Emergency stop.\n```",
    "created_at": "2020-08-26T22:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598038",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:40'></a>
```
[docpdf] 
[docpdf] ! Package inputenc Error: Unicode character ^^G (U+0007)
[docpdf] (inputenc)                not set up for use with LaTeX.
[docpdf] 
[docpdf] See the inputenc package documentation for explanation.
[docpdf] Type  H <return>  for immediate help.
[docpdf]  ...                                              
[docpdf]                                                   
[docpdf] l.1012 ...G{l+s+s1}{\PYGZsq{}}\PYG{p}{]}\PYG{p}{)}
[docpdf]                                                   
[docpdf] ? 
[docpdf] ! Emergency stop.
```



---

archive/issue_comments_598039.json:
```json
{
    "body": "<a id='comment:41'></a>I think the problem is in `NumberFieldTower`, the string is not a `r\"\"\"`. Let me see if that fixes it.",
    "created_at": "2020-08-27T00:02:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598039",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:41'></a>I think the problem is in `NumberFieldTower`, the string is not a `r"""`. Let me see if that fixes it.



---

archive/issue_comments_598040.json:
```json
{
    "body": "Changing commit from \"c598fbbd9730a35ec17cb0c72b3f8f1608fcadf2\" to \"a3c790f6fb38fca37c37dae86e568a5acdedb1c0\"",
    "created_at": "2020-08-27T00:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598040",
    "user": "https://github.com/tscrim"
}
```

Changing commit from "c598fbbd9730a35ec17cb0c72b3f8f1608fcadf2" to "a3c790f6fb38fca37c37dae86e568a5acdedb1c0"



---

archive/issue_comments_598041.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/action_of_number_field_on_free_module_over_zz_not_discovered\" to \"public/coercion/latex_names-30360\"",
    "created_at": "2020-08-27T00:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598041",
    "user": "https://github.com/tscrim"
}
```

Changing branch from "u/mkoeppe/action_of_number_field_on_free_module_over_zz_not_discovered" to "public/coercion/latex_names-30360"



---

archive/issue_comments_598042.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-27T00:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598042",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_598043.json:
```json
{
    "body": "<a id='comment:42'></a>Replying to [comment:41 tscrim]:\n> I think the problem is in `NumberFieldTower`, the string is not a `r\"\"\"`. Let me see if that fixes it.\n\n\nI think that fixes it. Please double-check. What a cryptic error message through...\n\n---\nNew commits:",
    "created_at": "2020-08-27T00:43:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598043",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:42'></a>Replying to [comment:41 tscrim]:
> I think the problem is in `NumberFieldTower`, the string is not a `r"""`. Let me see if that fixes it.


I think that fixes it. Please double-check. What a cryptic error message through...

---
New commits:



---

archive/issue_comments_598044.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-27T00:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598044",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_598045.json:
```json
{
    "body": "<a id='comment:43'></a>Thanks, this did the job.",
    "created_at": "2020-08-27T00:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598045",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Thanks, this did the job.



---

archive/issue_comments_598046.json:
```json
{
    "body": "Changing branch from \"public/coercion/latex_names-30360\" to \"a3c790f6fb38fca37c37dae86e568a5acdedb1c0\"",
    "created_at": "2020-09-01T22:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598046",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/coercion/latex_names-30360" to "a3c790f6fb38fca37c37dae86e568a5acdedb1c0"



---

archive/issue_events_078640.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-01T22:59:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30360#event-78640"
}
```



---

archive/issue_comments_598047.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-01T22:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30360",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30360#issuecomment-598047",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
