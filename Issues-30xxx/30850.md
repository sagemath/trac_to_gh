# Issue 30850: No Future

archive/issues_030613.json:
```json
{
    "assignees": [],
    "body": "The `__future__` import statements were part of the Python2-to-Python3 migration scaffolding. Since it is unlikely we will move back to supporting Python 2, we should remove those.\n\nThis ticket only deals with files within `SAGE_ROOT/src/sage`.\n\nDescription of commits:\n- the first commit is a raw removal of the `__future__` import statements\n- the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion\n- the third commit fixes a doctest\n- the fourth commit removes the automatic addition of `__future__` complieflags from the doctest framework\n\nAfter applying the branch, you might have to rebuild `psutil` and `sympy`.\n\n\n\nCC:  @fchapoton @mkoeppe @slel\n\nComponent: **python3**\n\nAuthor: **Thierry Monteil**\n\nBranch/Commit: **[`7e71898`](https://github.com/sagemath/sagetrac-mirror/commit/7e718983175210bf34394508a97042b7c7fdff6c)**\n\nReviewer: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30850_\n\n",
    "closed_at": "2020-12-05T22:13:16Z",
    "created_at": "2020-11-02T10:30:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "No Future",
    "type": "issue",
    "updated_at": "2020-12-05T22:13:16Z",
    "url": "https://github.com/sagemath/sage/issues/30850",
    "user": "https://github.com/sagetrac-tmonteil"
}
```
The `__future__` import statements were part of the Python2-to-Python3 migration scaffolding. Since it is unlikely we will move back to supporting Python 2, we should remove those.

This ticket only deals with files within `SAGE_ROOT/src/sage`.

Description of commits:
- the first commit is a raw removal of the `__future__` import statements
- the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion
- the third commit fixes a doctest
- the fourth commit removes the automatic addition of `__future__` complieflags from the doctest framework

After applying the branch, you might have to rebuild `psutil` and `sympy`.



CC:  @fchapoton @mkoeppe @slel

Component: **python3**

Author: **Thierry Monteil**

Branch/Commit: **[`7e71898`](https://github.com/sagemath/sagetrac-mirror/commit/7e718983175210bf34394508a97042b7c7fdff6c)**

Reviewer: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/30850_





---

archive/issue_events_422390.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-02T10:30:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422390"
}
```



---

archive/issue_events_422391.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-02T10:30:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422391"
}
```



---

archive/issue_events_422392.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-02T10:30:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422392"
}
```



---

archive/issue_events_422393.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-02T10:30:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422393"
}
```



---

archive/issue_comments_493913.json:
```json
{
    "body": "Branch: **[u/tmonteil/no_future](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/no_future)**",
    "created_at": "2020-11-02T12:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493913",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Branch: **[u/tmonteil/no_future](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/no_future)**



---

archive/issue_comments_493914.json:
```json
{
    "body": "Commit: **[`5dcb9de`](https://github.com/sagemath/sagetrac-mirror/commit/5dcb9de900e538feb6c16849057a84bac5608342)**",
    "created_at": "2020-11-02T12:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493914",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Commit: **[`5dcb9de`](https://github.com/sagemath/sagetrac-mirror/commit/5dcb9de900e538feb6c16849057a84bac5608342)**



---

archive/issue_comments_493915.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,11 @@\n \n In order not to interfere with #30627, the `__future__` import statements of `SAGE_ROOT/build/` are not removed.\n \n+Desctiption of commits:\n+- the first commit is a raw removal of the `__future__` import statements.\n+- the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion\n+- the third commit is about preparsing (reverts #27719)\n+- the fourth commit fixes a doctest\n+\n+After applying the branch, you might have to rebuild `psutil` and `sympy`.\n+\n``````\n",
    "created_at": "2020-11-02T12:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493915",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,11 @@
 
 In order not to interfere with #30627, the `__future__` import statements of `SAGE_ROOT/build/` are not removed.
 
+Desctiption of commits:
+- the first commit is a raw removal of the `__future__` import statements.
+- the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion
+- the third commit is about preparsing (reverts #27719)
+- the fourth commit fixes a doctest
+
+After applying the branch, you might have to rebuild `psutil` and `sympy`.
+
``````




---

archive/issue_comments_493916.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4df63e35d4144e7c96e99b69a82e2cfa8f2c8d25\"><code>4df63e3</code></a></td><td><code>#30850: remove `__future__` import statements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7255b5318eb2a140cfced14d27d870488c31783b\"><code>7255b53</code></a></td><td><code>#30850: remove deletion of absolute_import from the tab-completion</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99e26f3b9fe0fe57d58976b19452d7385bc0810b\"><code>99e26f3</code></a></td><td><code>#30850: remove `__future__` imports preparsing (revert #27719)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dcb9de900e538feb6c16849057a84bac5608342\"><code>5dcb9de</code></a></td><td><code>#30850: fix doctests for src/sage/misc/abstract_method.py and src/sage/misc/lazy_attribute.pyx</code></td></tr></table>\n",
    "created_at": "2020-11-02T12:26:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493916",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4df63e35d4144e7c96e99b69a82e2cfa8f2c8d25"><code>4df63e3</code></a></td><td><code>#30850: remove `__future__` import statements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7255b5318eb2a140cfced14d27d870488c31783b"><code>7255b53</code></a></td><td><code>#30850: remove deletion of absolute_import from the tab-completion</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99e26f3b9fe0fe57d58976b19452d7385bc0810b"><code>99e26f3</code></a></td><td><code>#30850: remove `__future__` imports preparsing (revert #27719)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dcb9de900e538feb6c16849057a84bac5608342"><code>5dcb9de</code></a></td><td><code>#30850: fix doctests for src/sage/misc/abstract_method.py and src/sage/misc/lazy_attribute.pyx</code></td></tr></table>




---

archive/issue_comments_493917.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nDoctests pass on my computer, let us see if patchbots can handle it without rebuilding `psutil` and `sympy`.",
    "created_at": "2020-11-02T15:34:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493917",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:3" align="right">comment:3</div>

Doctests pass on my computer, let us see if patchbots can handle it without rebuilding `psutil` and `sympy`.



---

archive/issue_events_422394.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-02T15:34:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422394"
}
```



---

archive/issue_comments_493918.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\npatchbot will not run, because this is \"unsafe\" (changes outside of src/sage)",
    "created_at": "2020-11-02T17:07:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493918",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:4" align="right">comment:4</div>

patchbot will not run, because this is "unsafe" (changes outside of src/sage)



---

archive/issue_comments_493919.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,5 @@\n \n After applying the branch, you might have to rebuild `psutil` and `sympy`.\n \n+Reviewers have to run the doctests by themselves since the patchbot will not.\n+\n``````\n",
    "created_at": "2020-11-02T17:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493919",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,5 @@
 
 After applying the branch, you might have to rebuild `psutil` and `sympy`.
 
+Reviewers have to run the doctests by themselves since the patchbot will not.
+
``````




---

archive/issue_comments_493920.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nOK i see.",
    "created_at": "2020-11-02T17:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493920",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:5" align="right">comment:5</div>

OK i see.



---

archive/issue_comments_493921.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nmaybe there is a way to use github actions to test this ticket ?",
    "created_at": "2020-11-02T18:57:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493921",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

maybe there is a way to use github actions to test this ticket ?



---

archive/issue_comments_493922.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYes, you set a tag and push the tag to a [GitHub](../wiki/GitHub) repository.",
    "created_at": "2020-11-02T19:10:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493922",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Yes, you set a tag and push the tag to a [GitHub](../wiki/GitHub) repository.



---

archive/issue_comments_493923.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAll tests pass for me on OS X 10.15.7, using a system installation of Python 3.8.6.",
    "created_at": "2020-11-02T21:06:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493923",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

All tests pass for me on OS X 10.15.7, using a system installation of Python 3.8.6.



---

archive/issue_events_422395.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-10T14:25:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422395"
}
```



---

archive/issue_events_422396.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-10T14:25:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422396"
}
```



---

archive/issue_comments_493924.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\ndoes not apply on the latest beta => needs work",
    "created_at": "2020-11-10T14:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493924",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:9" align="right">comment:9</div>

does not apply on the latest beta => needs work



---

archive/issue_comments_493925.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67cf0b5fe10a1b82ba87347f2826550c6b7290a7\"><code>67cf0b5</code></a></td><td><code>#30850 : merge with develop.9.3.beta1</code></td></tr></table>\n",
    "created_at": "2020-11-10T15:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493925",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67cf0b5fe10a1b82ba87347f2826550c6b7290a7"><code>67cf0b5</code></a></td><td><code>#30850 : merge with develop.9.3.beta1</code></td></tr></table>




---

archive/issue_comments_493926.json:
```json
{
    "body": "Changed commit from **[`5dcb9de`](https://github.com/sagemath/sagetrac-mirror/commit/5dcb9de900e538feb6c16849057a84bac5608342)** to **[`67cf0b5`](https://github.com/sagemath/sagetrac-mirror/commit/67cf0b5fe10a1b82ba87347f2826550c6b7290a7)**",
    "created_at": "2020-11-10T15:11:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493926",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5dcb9de`](https://github.com/sagemath/sagetrac-mirror/commit/5dcb9de900e538feb6c16849057a84bac5608342)** to **[`67cf0b5`](https://github.com/sagemath/sagetrac-mirror/commit/67cf0b5fe10a1b82ba87347f2826550c6b7290a7)**



---

archive/issue_events_422397.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-10T15:12:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422397"
}
```



---

archive/issue_events_422398.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-10T15:12:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422398"
}
```



---

archive/issue_comments_493927.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nMerge done.",
    "created_at": "2020-11-10T15:12:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493927",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:11" align="right">comment:11</div>

Merge done.



---

archive/issue_comments_493928.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI would suggest to make here only the changes in src/sage/ and keep the rest for another ticket. This would allow the patchbots to run.",
    "created_at": "2020-11-10T15:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493928",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:12" align="right">comment:12</div>

I would suggest to make here only the changes in src/sage/ and keep the rest for another ticket. This would allow the patchbots to run.



---

archive/issue_comments_493929.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,8 +2,8 @@\n \n In order not to interfere with #30627, the `__future__` import statements of `SAGE_ROOT/build/` are not removed.\n \n-Desctiption of commits:\n-- the first commit is a raw removal of the `__future__` import statements.\n+Description of commits:\n+- the first commit is a raw removal of the `__future__` import statements\n - the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion\n - the third commit is about preparsing (reverts #27719)\n - the fourth commit fixes a doctest\n``````\n",
    "created_at": "2020-11-11T15:16:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493929",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,8 +2,8 @@
 
 In order not to interfere with #30627, the `__future__` import statements of `SAGE_ROOT/build/` are not removed.
 
-Desctiption of commits:
-- the first commit is a raw removal of the `__future__` import statements.
+Description of commits:
+- the first commit is a raw removal of the `__future__` import statements
 - the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion
 - the third commit is about preparsing (reverts #27719)
 - the fourth commit fixes a doctest
``````




---

archive/issue_comments_493930.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nRunning all the doctests with `-p 4` takes less than an hour on a laptop. I just did it.",
    "created_at": "2020-11-11T15:38:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493930",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:14" align="right">comment:14</div>

Running all the doctests with `-p 4` takes less than an hour on a laptop. I just did it.



---

archive/issue_comments_493931.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.",
    "created_at": "2020-11-12T00:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493931",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:15" align="right">comment:15</div>

I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.



---

archive/issue_comments_493932.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n#29355 removes `src/bin/sage-pypkg-location` and #30867 removes `src/mac-app`. By merging now you can avoid later merge conflicts",
    "created_at": "2020-11-12T00:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493932",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

#29355 removes `src/bin/sage-pypkg-location` and #30867 removes `src/mac-app`. By merging now you can avoid later merge conflicts



---

archive/issue_comments_493933.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nLikewise, #30846 moves `src/bin/sage-list-packages`",
    "created_at": "2020-11-12T00:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493933",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Likewise, #30846 moves `src/bin/sage-list-packages`



---

archive/issue_events_422399.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-17T19:22:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422399"
}
```



---

archive/issue_events_422400.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-17T19:22:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422400"
}
```



---

archive/issue_comments_493934.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jhpalmieri](#comment%3A15):\n> I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.\n\nIndeed, and moreover also the 3.x series is introducing more `__future__` features, for example `from `__future__` import annotations`: https://docs.python.org/3/library/__future__.html",
    "created_at": "2020-11-17T19:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493934",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jhpalmieri](#comment%3A15):
> I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.

Indeed, and moreover also the 3.x series is introducing more `__future__` features, for example `from `__future__` import annotations`: https://docs.python.org/3/library/__future__.html



---

archive/issue_comments_493935.json:
```json
{
    "body": "Changed commit from **[`67cf0b5`](https://github.com/sagemath/sagetrac-mirror/commit/67cf0b5fe10a1b82ba87347f2826550c6b7290a7)** to **[`a0691cc`](https://github.com/sagemath/sagetrac-mirror/commit/a0691cc3a1d904ab0a72710b5fa5f9fc026e13ef)**",
    "created_at": "2020-11-20T12:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493935",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`67cf0b5`](https://github.com/sagemath/sagetrac-mirror/commit/67cf0b5fe10a1b82ba87347f2826550c6b7290a7)** to **[`a0691cc`](https://github.com/sagemath/sagetrac-mirror/commit/a0691cc3a1d904ab0a72710b5fa5f9fc026e13ef)**



---

archive/issue_comments_493936.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2ab97999f73aee514af3a484642f55d377ebd63\"><code>d2ab979</code></a></td><td><code>#30850: remove `__future__` import statements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e8cbe612efceb12103b04a8a3bbd5fb85b44e82\"><code>9e8cbe6</code></a></td><td><code>#30850: remove deletion of absolute_import from the tab-completion</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fa7e4f582dc2431f3c60bc39d99a5bd8f6e2118\"><code>7fa7e4f</code></a></td><td><code>#30850: fix doctests for src/sage/misc/abstract_method.py and src/sage/misc/lazy_attribute.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0691cc3a1d904ab0a72710b5fa5f9fc026e13ef\"><code>a0691cc</code></a></td><td><code>#30850: do not add `__future__` compileflags when doctesting</code></td></tr></table>\n",
    "created_at": "2020-11-20T12:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493936",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2ab97999f73aee514af3a484642f55d377ebd63"><code>d2ab979</code></a></td><td><code>#30850: remove `__future__` import statements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e8cbe612efceb12103b04a8a3bbd5fb85b44e82"><code>9e8cbe6</code></a></td><td><code>#30850: remove deletion of absolute_import from the tab-completion</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fa7e4f582dc2431f3c60bc39d99a5bd8f6e2118"><code>7fa7e4f</code></a></td><td><code>#30850: fix doctests for src/sage/misc/abstract_method.py and src/sage/misc/lazy_attribute.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0691cc3a1d904ab0a72710b5fa5f9fc026e13ef"><code>a0691cc</code></a></td><td><code>#30850: do not add `__future__` compileflags when doctesting</code></td></tr></table>




---

archive/issue_comments_493937.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThe current branch only touches files within `SAGE_ROOT/src/sage/`.",
    "created_at": "2020-11-20T12:09:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493937",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:20" align="right">comment:20</div>

The current branch only touches files within `SAGE_ROOT/src/sage/`.



---

archive/issue_events_422401.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-20T12:09:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422401"
}
```



---

archive/issue_events_422402.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2020-11-20T12:09:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422402"
}
```



---

archive/issue_comments_493938.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,14 +1,13 @@\n The `__future__` import statements were part of the Python2-to-Python3 migration scaffolding. Since it is unlikely we will move back to supporting Python 2, we should remove those.\n \n-In order not to interfere with #30627, the `__future__` import statements of `SAGE_ROOT/build/` are not removed.\n+This ticket only deals with files within `SAGE_ROOT/src/sage`.\n \n Description of commits:\n - the first commit is a raw removal of the `__future__` import statements\n - the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion\n-- the third commit is about preparsing (reverts #27719)\n-- the fourth commit fixes a doctest\n+- the third commit fixes a doctest\n+- the fourth commit removes the automatic addition of `__future__` complieflags from the doctest framework\n \n After applying the branch, you might have to rebuild `psutil` and `sympy`.\n \n-Reviewers have to run the doctests by themselves since the patchbot will not.\n \n``````\n",
    "created_at": "2020-11-20T12:15:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493938",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,14 +1,13 @@
 The `__future__` import statements were part of the Python2-to-Python3 migration scaffolding. Since it is unlikely we will move back to supporting Python 2, we should remove those.
 
-In order not to interfere with #30627, the `__future__` import statements of `SAGE_ROOT/build/` are not removed.
+This ticket only deals with files within `SAGE_ROOT/src/sage`.
 
 Description of commits:
 - the first commit is a raw removal of the `__future__` import statements
 - the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion
-- the third commit is about preparsing (reverts #27719)
-- the fourth commit fixes a doctest
+- the third commit fixes a doctest
+- the fourth commit removes the automatic addition of `__future__` complieflags from the doctest framework
 
 After applying the branch, you might have to rebuild `psutil` and `sympy`.
 
-Reviewers have to run the doctests by themselves since the patchbot will not.
 
``````




---

archive/issue_comments_493939.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2020-11-20T18:12:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493939",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_422403.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-20T18:12:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422403"
}
```



---

archive/issue_events_422404.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-20T18:12:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422404"
}
```



---

archive/issue_comments_493940.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nMerge conflict",
    "created_at": "2020-11-24T23:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493940",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:23" align="right">comment:23</div>

Merge conflict



---

archive/issue_events_422405.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-24T23:13:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422405"
}
```



---

archive/issue_events_422406.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-24T23:13:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422406"
}
```



---

archive/issue_comments_493941.json:
```json
{
    "body": "Changed branch from **[u/tmonteil/no_future](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/no_future)** to **[u/mkoeppe/no_future](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/no_future)**",
    "created_at": "2020-11-24T23:45:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493941",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/tmonteil/no_future](https://github.com/sagemath/sagetrac-mirror/tree/u/tmonteil/no_future)** to **[u/mkoeppe/no_future](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/no_future)**



---

archive/issue_comments_493942.json:
```json
{
    "body": "Changed commit from **[`a0691cc`](https://github.com/sagemath/sagetrac-mirror/commit/a0691cc3a1d904ab0a72710b5fa5f9fc026e13ef)** to **[`7e71898`](https://github.com/sagemath/sagetrac-mirror/commit/7e718983175210bf34394508a97042b7c7fdff6c)**",
    "created_at": "2020-11-24T23:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493942",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`a0691cc`](https://github.com/sagemath/sagetrac-mirror/commit/a0691cc3a1d904ab0a72710b5fa5f9fc026e13ef)** to **[`7e71898`](https://github.com/sagemath/sagetrac-mirror/commit/7e718983175210bf34394508a97042b7c7fdff6c)**



---

archive/issue_comments_493943.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e718983175210bf34394508a97042b7c7fdff6c\"><code>7e71898</code></a></td><td><code>Merge tag '9.3.beta2' into t/30850/no_future</code></td></tr></table>\n",
    "created_at": "2020-11-24T23:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493943",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e718983175210bf34394508a97042b7c7fdff6c"><code>7e71898</code></a></td><td><code>Merge tag '9.3.beta2' into t/30850/no_future</code></td></tr></table>




---

archive/issue_events_422407.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-24T23:45:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422407"
}
```



---

archive/issue_events_422408.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-24T23:45:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422408"
}
```



---

archive/issue_comments_493944.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/no_future](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/no_future)** to **[`7e71898`](https://github.com/sagemath/sagetrac-mirror/commit/7e718983175210bf34394508a97042b7c7fdff6c)**",
    "created_at": "2020-12-05T22:13:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30850#issuecomment-493944",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/no_future](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/no_future)** to **[`7e71898`](https://github.com/sagemath/sagetrac-mirror/commit/7e718983175210bf34394508a97042b7c7fdff6c)**



---

archive/issue_events_422409.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-05T22:13:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422409"
}
```



---

archive/issue_events_422410.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d7b71743c27fb4b11c6ecda4ae5e4b3f9191aa39",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-05T22:13:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30850",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30850#event-422410"
}
```
