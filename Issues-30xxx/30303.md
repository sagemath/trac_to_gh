# Issue 30303: Graphs: two families of distance-regular graphs

archive/issues_030066.json:
```json
{
    "body": "We introduce two families of distance-regular graphs related to dual polar spaces.\n\nCC:  @dimpase\n\nKeywords: drg, dual_polar_spaces\n\nBranch/Commit: d7453fa0517deeeb16511216f5a91b08b04409d4\n\nReviewer: Dima Pasechnik\n\nAuthor: Ivo Maffei\n\nDependencies: #30286\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30303\n\n",
    "closed_at": "2020-08-14T22:23:26Z",
    "created_at": "2020-08-06T13:03:25Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Graphs: two families of distance-regular graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30303",
    "user": "https://github.com/Ivo-Maffei"
}
```
We introduce two families of distance-regular graphs related to dual polar spaces.

CC:  @dimpase

Keywords: drg, dual_polar_spaces

Branch/Commit: d7453fa0517deeeb16511216f5a91b08b04409d4

Reviewer: Dima Pasechnik

Author: Ivo Maffei

Dependencies: #30286

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30303





---

archive/issue_comments_426863.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-06T13:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426863",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_426864.json:
```json
{
    "body": "<a id='comment:1'></a>Last 10 new commits:",
    "created_at": "2020-08-06T13:05:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426864",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:1'></a>Last 10 new commits:



---

archive/issue_comments_426865.json:
```json
{
    "body": "<a id='comment:3'></a>Why are you using `const int m` ? any particular reason ?\n\nyou must add tests to check the validity of input parameters.\n\nInstead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,\nAnd instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.\n\na few pep8 issues like\n- `(2*m-2,q)` -> `(2 * m - 2, q)`\n- `({m},{q})` -> `({m}, {q})`\n- `(%d,%d,%d)\"%(e,m,q)` -> `(%d, %d, %d)\"%(e, m, q)`",
    "created_at": "2020-08-07T08:58:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426865",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>Why are you using `const int m` ? any particular reason ?

you must add tests to check the validity of input parameters.

Instead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,
And instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.

a few pep8 issues like
- `(2*m-2,q)` -> `(2 * m - 2, q)`
- `({m},{q})` -> `({m}, {q})`
- `(%d,%d,%d)"%(e,m,q)` -> `(%d, %d, %d)"%(e, m, q)`



---

archive/issue_comments_426866.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-07T12:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426866",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426867.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 dcoudert]:\n> Why are you using `const int m` ? any particular reason ?\n\nThe idea is that Cython is faster when static typing is used. Not sure how much of a gain is in these python-full functions.\nHowever, I believe that types are great as they give the reader useful info.\n\n> you must add tests to check the validity of input parameters.\n\nDo you mean doctests or checks inside the functions?\nFor the latter there shouldn't be any need as errors will get raised from the functions used inside.\n\n> Instead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,\n> And instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.\n\nThese are good things to know and I updated the code. Is there any benefit in using them?\n\n\n> a few pep8 issues\n\nI think I got them all fixed now.",
    "created_at": "2020-08-07T12:43:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426867",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:5'></a>Replying to [comment:3 dcoudert]:
> Why are you using `const int m` ? any particular reason ?

The idea is that Cython is faster when static typing is used. Not sure how much of a gain is in these python-full functions.
However, I believe that types are great as they give the reader useful info.

> you must add tests to check the validity of input parameters.

Do you mean doctests or checks inside the functions?
For the latter there shouldn't be any need as errors will get raised from the functions used inside.

> Instead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,
> And instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.

These are good things to know and I updated the code. Is there any benefit in using them?


> a few pep8 issues

I think I got them all fixed now.



---

archive/issue_comments_426868.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-07T12:47:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426868",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426869.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 gh-Ivo-Maffei]:\n> Replying to [comment:3 dcoudert]:\n> > Why are you using `const int m` ? any particular reason ?\n\n> The idea is that Cython is faster when static typing is used. Not sure how much of a gain is in these python-full functions.\n> However, I believe that types are great as they give the reader useful info.\n\n\nI agree that this way the type of input is checked, but I don't think you can expect any speed up here.\n \n \n> > you must add tests to check the validity of input parameters.\n\n> Do you mean doctests or checks inside the functions?\n> For the latter there shouldn't be any need as errors will get raised from the functions used inside.\n\n\nI mean in the function, but if your are sure that functions called inside this method will raise errors in all cases, then it should be ok.\n \n \n> > Instead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,\n> > And instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.\n\n> These are good things to know and I updated the code. Is there any benefit in using them?\n\n`for v in G` is equivalent to `for v in G.vertex_iterator()`. So it iterates over the vertices without assumption on the order of the vertices.\nSo far, `G.vertices()` returns a (sorted) list of vertices. So when you call `for v in G.vertices(sort=False):`, you first build the list of vertices and then iterate over it. It's equivalent to `for v in list(G)` or `for v in list(G.vertex_iterator())`. Building this list is a waste of space and time here.\n\nThis is different for edges as now `G.edges()` returns an object of type `EdgesView` enabling to iterate over the edges without building the list. So `for e in G.edges(sort=False)` and `for e in G.edge_iterator()` are now similar. In the future, `G.edge_iterator()` will certainly also return a `EdgesView`.\n\n \nI don't have gap installed on my laptop yet, so I let Dima check that every think is ok :P",
    "created_at": "2020-08-07T14:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426869",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:7'></a>Replying to [comment:5 gh-Ivo-Maffei]:
> Replying to [comment:3 dcoudert]:
> > Why are you using `const int m` ? any particular reason ?

> The idea is that Cython is faster when static typing is used. Not sure how much of a gain is in these python-full functions.
> However, I believe that types are great as they give the reader useful info.


I agree that this way the type of input is checked, but I don't think you can expect any speed up here.
 
 
> > you must add tests to check the validity of input parameters.

> Do you mean doctests or checks inside the functions?
> For the latter there shouldn't be any need as errors will get raised from the functions used inside.


I mean in the function, but if your are sure that functions called inside this method will raise errors in all cases, then it should be ok.
 
 
> > Instead of `for v in G.vertices(sort=False)`, you can simply do `for v in G` which iterates over the unsorted vertices.,
> > And instead of `G.neighbors(v), you can use `G.neighbor_iterator(v)`.

> These are good things to know and I updated the code. Is there any benefit in using them?

`for v in G` is equivalent to `for v in G.vertex_iterator()`. So it iterates over the vertices without assumption on the order of the vertices.
So far, `G.vertices()` returns a (sorted) list of vertices. So when you call `for v in G.vertices(sort=False):`, you first build the list of vertices and then iterate over it. It's equivalent to `for v in list(G)` or `for v in list(G.vertex_iterator())`. Building this list is a waste of space and time here.

This is different for edges as now `G.edges()` returns an object of type `EdgesView` enabling to iterate over the edges without building the list. So `for e in G.edges(sort=False)` and `for e in G.edge_iterator()` are now similar. In the future, `G.edge_iterator()` will certainly also return a `EdgesView`.

 
I don't have gap installed on my laptop yet, so I let Dima check that every think is ok :P



---

archive/issue_comments_426870.json:
```json
{
    "body": "<a id='comment:8'></a>Can we have naming scheme and location of DualPolarOrthogonalGraph (to be renamed OrthogonalDualPolarGraph) consistent with UnitaryDualPolarGraph and SymplecticDualPolarGraph,\nwhich are in `sage/graphs/generators/classical_geometries.py` ?",
    "created_at": "2020-08-11T08:41:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426870",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>Can we have naming scheme and location of DualPolarOrthogonalGraph (to be renamed OrthogonalDualPolarGraph) consistent with UnitaryDualPolarGraph and SymplecticDualPolarGraph,
which are in `sage/graphs/generators/classical_geometries.py` ?



---

archive/issue_comments_426871.json:
```json
{
    "body": "<a id='comment:9'></a>Should I move also the `UstimenkoGraph` since is the distance 1-or-2 graph of the SymplecticDualPolarGraph?",
    "created_at": "2020-08-11T09:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426871",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:9'></a>Should I move also the `UstimenkoGraph` since is the distance 1-or-2 graph of the SymplecticDualPolarGraph?



---

archive/issue_comments_426872.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-11T10:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426872",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_426873.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:9 gh-Ivo-Maffei]:\n> Should I move also the `UstimenkoGraph` since is the distance 1-or-2 graph of the SymplecticDualPolarGraph?\n\n\nNo, I  think it's OK with UstimenkoGraph as it is now.",
    "created_at": "2020-08-11T10:28:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426873",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>Replying to [comment:9 gh-Ivo-Maffei]:
> Should I move also the `UstimenkoGraph` since is the distance 1-or-2 graph of the SymplecticDualPolarGraph?


No, I  think it's OK with UstimenkoGraph as it is now.



---

archive/issue_comments_426874.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-11T12:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426874",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_426875.json:
```json
{
    "body": "<a id='comment:12'></a>looks good, thanks.",
    "created_at": "2020-08-11T12:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426875",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>looks good, thanks.



---

archive/issue_comments_426876.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-14T22:23:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30303#issuecomment-426876",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_078446.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-14T22:23:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30303",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30303#event-78446"
}
```
