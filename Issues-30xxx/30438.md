# Issue 30438: Improve face iterator for almost simple/simplicial polytopes

archive/issues_030201.json:
```json
{
    "body": "#30040 improved the face iterator for simple/simplicial polytopes.\n\nActually, the same trick can be applied for simple faces. (Note that the iterator treats simplicial polytopes dually).\n\nIf a face is simple, then any intersections of it's facets is one of it's ridges or empty.\n\nAs this helps only sporadically, we cannot afford to compute for each face if it is simple. However, a cheap certificate of a face being simple is that it only contains \"simple vertices\" (with vertex figure a simplex).\n\nNow, at initialization the face iterator computes those \"simple vertices\" and checks inclusion of each face to determine if it is simple (if not at least 10 percent of the vertices we skip this check). If a face is simple, we can skip the costly inclusion checks.\n\nBefore this ticket:\n\n```\nsage: P = polytopes.permutahedron(7)                                                                                                                                                                                                                                                                                                                                       \nsage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              \nsage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      \nsage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   \nCPU times: user 257 ms, sys: 7 \u00b5s, total: 257 ms\nWall time: 257 ms\n(1, 5041, 16251, 19761, 11144, 2860, 267, 1)\n\nsage: P = polytopes.associahedron(['A',7])                                                                                                                                                                                                                                                                                                                                 \nsage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              \nsage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      \nsage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   \nCPU times: user 13.5 ms, sys: 0 ns, total: 13.5 ms\nWall time: 13.4 ms\n(1, 1431, 5977, 10177, 9040, 4440, 1163, 134, 1)\nsage: P = polytopes.hypercube(12)                                                                                                                                                                                                                                                                                                                                          \nsage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              \nsage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      \nsage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   \nCPU times: user 419 ms, sys: 17 \u00b5s, total: 419 ms\nWall time: 419 ms\n(1, 4097, 28669, 92125, 180037, 238755, 226776, 158466, 82170, 31350, 8525, 1529, 145, 1)\n\n```\n\n```\nsage: P = polytopes.permutahedron(7)                                                                                                                                                                                                                                                                                                                                       \nsage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              \nsage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      \nsage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   \nCPU times: user 79.5 ms, sys: 0 ns, total: 79.5 ms\nWall time: 79.3 ms\n(1, 5041, 16251, 19761, 11144, 2860, 267, 1)\n\nsage: P = polytopes.associahedron(['A',7])                                                                                                                                                                                                                                                                                                                                 \nsage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              \nsage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      \nsage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   \nCPU times: user 9.85 ms, sys: 0 ns, total: 9.85 ms\nWall time: 9.72 ms\n(1, 1431, 5977, 10177, 9040, 4440, 1163, 134, 1)\n\nsage: P = polytopes.hypercube(12)                                                                                                                                                                                                                                                                                                                                          \nsage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              \nsage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      \nsage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   \nCPU times: user 391 ms, sys: 0 ns, total: 391 ms\nWall time: 391 ms\n(1, 4097, 28669, 92125, 180037, 238755, 226776, 158466, 82170, 31350, 8525, 1529, 145, 1)\n```\n\nNote that for the last instance, there isn't a significant amount of simple vertices so the old approach is chosen.\n\n**CC:**  @jplab @laisrast @tscrim\n\n**Keywords:** simple, simplicial, face iterator, polytope\n\n**Branch:** [u/gh-kliem/face_iterator_simple_face_2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/face_iterator_simple_face_2)\n\n**Commit:** [d3c9384363f49e54f8a3d1bb84e626d58a277cee](https://github.com/sagemath/sagetrac-mirror/commit/d3c9384363f49e54f8a3d1bb84e626d58a277cee)\n\n**Author:** Jonathan Kliem\n\n**Status:** needs_work\n\n**Dependencies:** #30040, #30435\n\nIssue created by migration from https://trac.sagemath.org/ticket/30438\n\n",
    "created_at": "2020-08-25T11:45:16Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Improve face iterator for almost simple/simplicial polytopes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30438",
    "user": "https://github.com/kliem"
}
```
#30040 improved the face iterator for simple/simplicial polytopes.

Actually, the same trick can be applied for simple faces. (Note that the iterator treats simplicial polytopes dually).

If a face is simple, then any intersections of it's facets is one of it's ridges or empty.

As this helps only sporadically, we cannot afford to compute for each face if it is simple. However, a cheap certificate of a face being simple is that it only contains "simple vertices" (with vertex figure a simplex).

Now, at initialization the face iterator computes those "simple vertices" and checks inclusion of each face to determine if it is simple (if not at least 10 percent of the vertices we skip this check). If a face is simple, we can skip the costly inclusion checks.

Before this ticket:

```
sage: P = polytopes.permutahedron(7)                                                                                                                                                                                                                                                                                                                                       
sage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              
sage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      
sage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   
CPU times: user 257 ms, sys: 7 µs, total: 257 ms
Wall time: 257 ms
(1, 5041, 16251, 19761, 11144, 2860, 267, 1)

sage: P = polytopes.associahedron(['A',7])                                                                                                                                                                                                                                                                                                                                 
sage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              
sage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      
sage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   
CPU times: user 13.5 ms, sys: 0 ns, total: 13.5 ms
Wall time: 13.4 ms
(1, 1431, 5977, 10177, 9040, 4440, 1163, 134, 1)
sage: P = polytopes.hypercube(12)                                                                                                                                                                                                                                                                                                                                          
sage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              
sage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      
sage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   
CPU times: user 419 ms, sys: 17 µs, total: 419 ms
Wall time: 419 ms
(1, 4097, 28669, 92125, 180037, 238755, 226776, 158466, 82170, 31350, 8525, 1529, 145, 1)

```

```
sage: P = polytopes.permutahedron(7)                                                                                                                                                                                                                                                                                                                                       
sage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              
sage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      
sage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   
CPU times: user 79.5 ms, sys: 0 ns, total: 79.5 ms
Wall time: 79.3 ms
(1, 5041, 16251, 19761, 11144, 2860, 267, 1)

sage: P = polytopes.associahedron(['A',7])                                                                                                                                                                                                                                                                                                                                 
sage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              
sage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      
sage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   
CPU times: user 9.85 ms, sys: 0 ns, total: 9.85 ms
Wall time: 9.72 ms
(1, 1431, 5977, 10177, 9040, 4440, 1163, 134, 1)

sage: P = polytopes.hypercube(12)                                                                                                                                                                                                                                                                                                                                          
sage: P1 = P.stack(next(P.face_generator(1)))                                                                                                                                                                                                                                                                                                                              
sage: C = CombinatorialPolyhedron(P1)                                                                                                                                                                                                                                                                                                                                      
sage: %time C.f_vector()                                                                                                                                                                                                                                                                                                                                                   
CPU times: user 391 ms, sys: 0 ns, total: 391 ms
Wall time: 391 ms
(1, 4097, 28669, 92125, 180037, 238755, 226776, 158466, 82170, 31350, 8525, 1529, 145, 1)
```

Note that for the last instance, there isn't a significant amount of simple vertices so the old approach is chosen.

**CC:**  @jplab @laisrast @tscrim

**Keywords:** simple, simplicial, face iterator, polytope

**Branch:** [u/gh-kliem/face_iterator_simple_face_2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/face_iterator_simple_face_2)

**Commit:** [d3c9384363f49e54f8a3d1bb84e626d58a277cee](https://github.com/sagemath/sagetrac-mirror/commit/d3c9384363f49e54f8a3d1bb84e626d58a277cee)

**Author:** Jonathan Kliem

**Status:** needs_work

**Dependencies:** #30040, #30435

Issue created by migration from https://trac.sagemath.org/ticket/30438





---

archive/issue_comments_601657.json:
```json
{
    "body": "**Commit:** [e0d117a0b2d2dcdefe311dca5a328db9382dcb1e](https://github.com/sagemath/sagetrac-mirror/commit/e0d117a0b2d2dcdefe311dca5a328db9382dcb1e)",
    "created_at": "2020-08-25T12:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601657",
    "user": "https://github.com/kliem"
}
```

**Commit:** [e0d117a0b2d2dcdefe311dca5a328db9382dcb1e](https://github.com/sagemath/sagetrac-mirror/commit/e0d117a0b2d2dcdefe311dca5a328db9382dcb1e)



---

archive/issue_comments_601658.json:
```json
{
    "body": "**Branch:** [u/gh-kliem/face_iterator_simple_face](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/face_iterator_simple_face)",
    "created_at": "2020-08-25T12:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601658",
    "user": "https://github.com/kliem"
}
```

**Branch:** [u/gh-kliem/face_iterator_simple_face](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/face_iterator_simple_face)



---

archive/issue_comments_601659.json:
```json
{
    "body": "<a id='comment:1'></a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0297853a04eb342308b7fa0a1259197f6884dfbe\">0297853</a></td><td><code>improvements in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ffac00417d0143aafefec4c21e3ad59a45cac06\">7ffac00</a></td><td><code>changes in 30429</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01b4154149fcc31347e8591874aa1668907aa315\">01b4154</a></td><td><code>typo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34a74b8d96b7049908e64c06f50baeea9fb8291f\">34a74b8</a></td><td><code>simpler algorithm for many simple faces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9165b08cd6d938f63ea9ba08f47ece78b772655\">c9165b0</a></td><td><code>sort the faces according to being simple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b9dc7e18da86179aa442a524779b52b6169a4a53\">b9dc7e1</a></td><td><code>small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dbe710dea3dc0b1931269de28222586fec9d100\">5dbe710</a></td><td><code>improved count atoms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e88c28cf2c19dcd00c66af2f236da2e216d1cf80\">e88c28c</a></td><td><code>small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a50be396e9e50dd2569ff4013fcaabcb2a62859b\">a50be39</a></td><td><code>compile warning in doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0d117a0b2d2dcdefe311dca5a328db9382dcb1e\">e0d117a</a></td><td><code>two bugs</code></td></tr></table>\n",
    "created_at": "2020-08-25T12:01:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601659",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0297853a04eb342308b7fa0a1259197f6884dfbe">0297853</a></td><td><code>improvements in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ffac00417d0143aafefec4c21e3ad59a45cac06">7ffac00</a></td><td><code>changes in 30429</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01b4154149fcc31347e8591874aa1668907aa315">01b4154</a></td><td><code>typo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34a74b8d96b7049908e64c06f50baeea9fb8291f">34a74b8</a></td><td><code>simpler algorithm for many simple faces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9165b08cd6d938f63ea9ba08f47ece78b772655">c9165b0</a></td><td><code>sort the faces according to being simple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b9dc7e18da86179aa442a524779b52b6169a4a53">b9dc7e1</a></td><td><code>small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dbe710dea3dc0b1931269de28222586fec9d100">5dbe710</a></td><td><code>improved count atoms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e88c28cf2c19dcd00c66af2f236da2e216d1cf80">e88c28c</a></td><td><code>small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a50be396e9e50dd2569ff4013fcaabcb2a62859b">a50be39</a></td><td><code>compile warning in doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0d117a0b2d2dcdefe311dca5a328db9382dcb1e">e0d117a</a></td><td><code>two bugs</code></td></tr></table>




---

archive/issue_comments_601660.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -2,7 +2,7 @@\n \n Actually, the same trick can be applied for simple faces. (Note that the iterator treats simplicial polytopes dually).\n \n-If a face is simple then any intersections of it's facets is one of it's ridges or empty.\n+If a face is simple, then any intersections of it's facets is one of it's ridges or empty.\n \n As this helps only sporadically, we cannot afford to compute for each face if it is simple. However, a cheap certificate of a face being simple is that it only contains \"simple vertices\" (with vertex figure a simplex).\n \n``````\n",
    "created_at": "2020-08-25T12:02:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601660",
    "user": "https://github.com/kliem"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -2,7 +2,7 @@
 
 Actually, the same trick can be applied for simple faces. (Note that the iterator treats simplicial polytopes dually).
 
-If a face is simple then any intersections of it's facets is one of it's ridges or empty.
+If a face is simple, then any intersections of it's facets is one of it's ridges or empty.
 
 As this helps only sporadically, we cannot afford to compute for each face if it is simple. However, a cheap certificate of a face being simple is that it only contains "simple vertices" (with vertex figure a simplex).
 
``````




---

archive/issue_comments_601661.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n As this helps only sporadically, we cannot afford to compute for each face if it is simple. However, a cheap certificate of a face being simple is that it only contains \"simple vertices\" (with vertex figure a simplex).\n \n-Now, at initialization the face iterator computes those \"simple vertices\" and checks inclusion of each face to determine if it is simple (if at least 10 percent of the vertices are simple). If a face is simple, we can skip the costly inclusion checks.\n+Now, at initialization the face iterator computes those \"simple vertices\" and checks inclusion of each face to determine if it is simple (if not at least 10 percent of the vertices we skip this check). If a face is simple, we can skip the costly inclusion checks.\n \n Before this ticket:\n \n``````\n",
    "created_at": "2020-08-25T12:03:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601661",
    "user": "https://github.com/kliem"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 As this helps only sporadically, we cannot afford to compute for each face if it is simple. However, a cheap certificate of a face being simple is that it only contains "simple vertices" (with vertex figure a simplex).
 
-Now, at initialization the face iterator computes those "simple vertices" and checks inclusion of each face to determine if it is simple (if at least 10 percent of the vertices are simple). If a face is simple, we can skip the costly inclusion checks.
+Now, at initialization the face iterator computes those "simple vertices" and checks inclusion of each face to determine if it is simple (if not at least 10 percent of the vertices we skip this check). If a face is simple, we can skip the costly inclusion checks.
 
 Before this ticket:
 
``````




---

archive/issue_comments_601662.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59f6a1268eaae0ba02241d606d06ee3bd95e7e1f\">59f6a12</a></td><td><code>improved documentation</code></td></tr></table>\n",
    "created_at": "2020-08-25T12:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601662",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59f6a1268eaae0ba02241d606d06ee3bd95e7e1f">59f6a12</a></td><td><code>improved documentation</code></td></tr></table>




---

archive/issue_comments_601663.json:
```json
{
    "body": "**Changing commit** from \"[e0d117a0b2d2dcdefe311dca5a328db9382dcb1e](https://github.com/sagemath/sagetrac-mirror/commit/e0d117a0b2d2dcdefe311dca5a328db9382dcb1e)\" to \"[59f6a1268eaae0ba02241d606d06ee3bd95e7e1f](https://github.com/sagemath/sagetrac-mirror/commit/59f6a1268eaae0ba02241d606d06ee3bd95e7e1f)\".",
    "created_at": "2020-08-25T12:08:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601663",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e0d117a0b2d2dcdefe311dca5a328db9382dcb1e](https://github.com/sagemath/sagetrac-mirror/commit/e0d117a0b2d2dcdefe311dca5a328db9382dcb1e)" to "[59f6a1268eaae0ba02241d606d06ee3bd95e7e1f](https://github.com/sagemath/sagetrac-mirror/commit/59f6a1268eaae0ba02241d606d06ee3bd95e7e1f)".



---

archive/issue_comments_601664.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-08-25T12:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601664",
    "user": "https://github.com/kliem"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_601665.json:
```json
{
    "body": "**Changing dependencies** from \"#30040, #30045\" to \"#30040, #30435\".",
    "created_at": "2020-08-25T12:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601665",
    "user": "https://github.com/kliem"
}
```

**Changing dependencies** from "#30040, #30045" to "#30040, #30435".



---

archive/issue_comments_601666.json:
```json
{
    "body": "<a id='comment:7'></a>\nA remark to cythonizing and compiling:\n\n- Current version:\n\n```diff\n+            foo = self.atoms.data\n+            atoms_face_length = self.atoms.face_length\n+\n+            counter = 0\n+            for j in range(self.atoms.n_faces):\n+                if count_atoms(foo[j], atoms_face_length) == self.structure.dimension:\n+                    counter += 1\n+                    self.structure.simple_vertices[j//64] |= vertex_to_bit_dictionary(j % 64)\n```\n- Much slower:\n\n```diff\n+            counter = 0\n+            for j in range(self.atoms.n_faces):\n+                if count_atoms(self.atoms.data[j], self.atoms.face_length) == self.structure.dimension:\n+                    counter += 1\n+                    self.structure.simple_vertices[j//64] |= vertex_to_bit_dictionary(j % 64)\n```\n- As fast as the current version:\n\n```diff\n+            counter = 0\n+            for j in range(self.atoms.n_faces):\n+                if count_atoms(self.atoms.data[j], self.atoms.face_length) == self.structure.dimension:\n+                    counter += 1\n+                    self.structure.simple_vertices[j//64] |= vertex_to_bit_dictionary(j % 64)\n+\n+            for j in range(self.atoms.n_faces):\n+                if count_atoms(self.atoms.data[j], self.atoms.face_length) == self.structure.dimension:\n+                    self.structure.simple_vertices[j//64] |= vertex_to_bit_dictionary(j % 64)\n```\n\nI guess looking up `self.atoms` takes significant amount of time. What is suprising is that when you add a useless loop, things speed up. Either by cythonizing or compiling (I didn't check) it is figured, that we need the properties of `self.atoms` more often and this is optimized then.\n\nPerhaps even more suprising. When you add\n\n```\n# cython: profile=True\n# cython: linetrace=True\n# distutils: define_macros=CYTHON_TRACE_NOGIL=1\n# distutils: define_macros=CYTHON_TRACE=1\n```\nto the beginning of `base.pyx` the second version is just as fast. Makes it hard to profile where the difference in performance is, when it goes away when profiling.",
    "created_at": "2020-08-25T12:23:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601666",
    "user": "https://github.com/kliem"
}
```

<a id='comment:7'></a>
A remark to cythonizing and compiling:

- Current version:

```diff
+            foo = self.atoms.data
+            atoms_face_length = self.atoms.face_length
+
+            counter = 0
+            for j in range(self.atoms.n_faces):
+                if count_atoms(foo[j], atoms_face_length) == self.structure.dimension:
+                    counter += 1
+                    self.structure.simple_vertices[j//64] |= vertex_to_bit_dictionary(j % 64)
```
- Much slower:

```diff
+            counter = 0
+            for j in range(self.atoms.n_faces):
+                if count_atoms(self.atoms.data[j], self.atoms.face_length) == self.structure.dimension:
+                    counter += 1
+                    self.structure.simple_vertices[j//64] |= vertex_to_bit_dictionary(j % 64)
```
- As fast as the current version:

```diff
+            counter = 0
+            for j in range(self.atoms.n_faces):
+                if count_atoms(self.atoms.data[j], self.atoms.face_length) == self.structure.dimension:
+                    counter += 1
+                    self.structure.simple_vertices[j//64] |= vertex_to_bit_dictionary(j % 64)
+
+            for j in range(self.atoms.n_faces):
+                if count_atoms(self.atoms.data[j], self.atoms.face_length) == self.structure.dimension:
+                    self.structure.simple_vertices[j//64] |= vertex_to_bit_dictionary(j % 64)
```

I guess looking up `self.atoms` takes significant amount of time. What is suprising is that when you add a useless loop, things speed up. Either by cythonizing or compiling (I didn't check) it is figured, that we need the properties of `self.atoms` more often and this is optimized then.

Perhaps even more suprising. When you add

```
# cython: profile=True
# cython: linetrace=True
# distutils: define_macros=CYTHON_TRACE_NOGIL=1
# distutils: define_macros=CYTHON_TRACE=1
```
to the beginning of `base.pyx` the second version is just as fast. Makes it hard to profile where the difference in performance is, when it goes away when profiling.



---

archive/issue_comments_601667.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[20a39b6](https://github.com/sagemath/sagetrac-mirror/commit/20a39b679f660e6b59ba7db4f7c302ab454fe28b)|`outsource inclusion maximal`|\n|[b672fca](https://github.com/sagemath/sagetrac-mirror/commit/b672fcaf65e2219644166a6ed5d8e29c13b4d67d)|`removed redundant function`|\n|[f62e770](https://github.com/sagemath/sagetrac-mirror/commit/f62e7706c109174e0a41259578102ad2a626c01a)|`merge in #30458`|\n|[accea52](https://github.com/sagemath/sagetrac-mirror/commit/accea52802a9bcf8f3aea69bd4489ecdcaad94e8)|`missing `}|\n|[56ba0e0](https://github.com/sagemath/sagetrac-mirror/commit/56ba0e085fa841b9158e488392b05925a84e3a4b)|`merge in #30040`|",
    "created_at": "2020-08-28T14:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601667",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[20a39b6](https://github.com/sagemath/sagetrac-mirror/commit/20a39b679f660e6b59ba7db4f7c302ab454fe28b)|`outsource inclusion maximal`|
|[b672fca](https://github.com/sagemath/sagetrac-mirror/commit/b672fcaf65e2219644166a6ed5d8e29c13b4d67d)|`removed redundant function`|
|[f62e770](https://github.com/sagemath/sagetrac-mirror/commit/f62e7706c109174e0a41259578102ad2a626c01a)|`merge in #30458`|
|[accea52](https://github.com/sagemath/sagetrac-mirror/commit/accea52802a9bcf8f3aea69bd4489ecdcaad94e8)|`missing `}|
|[56ba0e0](https://github.com/sagemath/sagetrac-mirror/commit/56ba0e085fa841b9158e488392b05925a84e3a4b)|`merge in #30040`|



---

archive/issue_comments_601668.json:
```json
{
    "body": "**Changing commit** from \"[59f6a1268eaae0ba02241d606d06ee3bd95e7e1f](https://github.com/sagemath/sagetrac-mirror/commit/59f6a1268eaae0ba02241d606d06ee3bd95e7e1f)\" to \"[56ba0e085fa841b9158e488392b05925a84e3a4b](https://github.com/sagemath/sagetrac-mirror/commit/56ba0e085fa841b9158e488392b05925a84e3a4b)\".",
    "created_at": "2020-08-28T14:44:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601668",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[59f6a1268eaae0ba02241d606d06ee3bd95e7e1f](https://github.com/sagemath/sagetrac-mirror/commit/59f6a1268eaae0ba02241d606d06ee3bd95e7e1f)" to "[56ba0e085fa841b9158e488392b05925a84e3a4b](https://github.com/sagemath/sagetrac-mirror/commit/56ba0e085fa841b9158e488392b05925a84e3a4b)".



---

archive/issue_comments_601669.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-kliem/face_iterator_simple_face](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/face_iterator_simple_face)\" to \"[u/gh-kliem/face_iterator_simple_face_2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/face_iterator_simple_face_2)\".",
    "created_at": "2020-08-30T08:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601669",
    "user": "https://github.com/kliem"
}
```

**Changing branch** from "[u/gh-kliem/face_iterator_simple_face](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/face_iterator_simple_face)" to "[u/gh-kliem/face_iterator_simple_face_2](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/face_iterator_simple_face_2)".



---

archive/issue_comments_601670.json:
```json
{
    "body": "**Changing commit** from \"[56ba0e085fa841b9158e488392b05925a84e3a4b](https://github.com/sagemath/sagetrac-mirror/commit/56ba0e085fa841b9158e488392b05925a84e3a4b)\" to \"[79a866639e5b312608416cec5e0340f242c82fee](https://github.com/sagemath/sagetrac-mirror/commit/79a866639e5b312608416cec5e0340f242c82fee)\".",
    "created_at": "2020-08-30T08:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601670",
    "user": "https://github.com/kliem"
}
```

**Changing commit** from "[56ba0e085fa841b9158e488392b05925a84e3a4b](https://github.com/sagemath/sagetrac-mirror/commit/56ba0e085fa841b9158e488392b05925a84e3a4b)" to "[79a866639e5b312608416cec5e0340f242c82fee](https://github.com/sagemath/sagetrac-mirror/commit/79a866639e5b312608416cec5e0340f242c82fee)".



---

archive/issue_comments_601671.json:
```json
{
    "body": "<a id='comment:9'></a>\nChanges from #30040.\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed6e966209266875d61895cf8112672675b17960\">ed6e966</a></td><td><code>improvements in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf91483e0aea5b5ad8904162124223f29450e687\">bf91483</a></td><td><code>improved count atoms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bab4901c78a8c1d58b78d5cdebea1a712ee55a7\">7bab490</a></td><td><code>Merge branch 'u/gh-kliem/improved_count_atoms' of git://trac.sagemath.org/sage into u/gh-kliem/face_iterator_simple_face_2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9aca3b04bd4b5a54f729770629eefbfe0495783\">d9aca3b</a></td><td><code>simpler algorithm for many simple faces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3550857715bf2222a4c936994eaa4c6e22daabd1\">3550857</a></td><td><code>sort the faces according to being simple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19b293c89875c1eca79d62b72be53048d53f1790\">19b293c</a></td><td><code>small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6e465957c623c3faba41bbcaee86d78d49811fc\">b6e4659</a></td><td><code>small improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4a9fd2905e5397a6e6a4723660d8b1865613cf7\">d4a9fd2</a></td><td><code>compile warning in doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de36d26232081966b4bd44f4d082fc4ef75c81c6\">de36d26</a></td><td><code>two bugs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79a866639e5b312608416cec5e0340f242c82fee\">79a8666</a></td><td><code>improved documentation</code></td></tr></table>\n",
    "created_at": "2020-08-30T08:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601671",
    "user": "https://github.com/kliem"
}
```

<a id='comment:9'></a>
Changes from #30040.

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed6e966209266875d61895cf8112672675b17960">ed6e966</a></td><td><code>improvements in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf91483e0aea5b5ad8904162124223f29450e687">bf91483</a></td><td><code>improved count atoms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bab4901c78a8c1d58b78d5cdebea1a712ee55a7">7bab490</a></td><td><code>Merge branch 'u/gh-kliem/improved_count_atoms' of git://trac.sagemath.org/sage into u/gh-kliem/face_iterator_simple_face_2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9aca3b04bd4b5a54f729770629eefbfe0495783">d9aca3b</a></td><td><code>simpler algorithm for many simple faces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3550857715bf2222a4c936994eaa4c6e22daabd1">3550857</a></td><td><code>sort the faces according to being simple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19b293c89875c1eca79d62b72be53048d53f1790">19b293c</a></td><td><code>small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6e465957c623c3faba41bbcaee86d78d49811fc">b6e4659</a></td><td><code>small improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4a9fd2905e5397a6e6a4723660d8b1865613cf7">d4a9fd2</a></td><td><code>compile warning in doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de36d26232081966b4bd44f4d082fc4ef75c81c6">de36d26</a></td><td><code>two bugs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79a866639e5b312608416cec5e0340f242c82fee">79a8666</a></td><td><code>improved documentation</code></td></tr></table>




---

archive/issue_comments_601672.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-09-02T01:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601672",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_601673.json:
```json
{
    "body": "<a id='comment:10'></a>\nneeds rebase",
    "created_at": "2020-09-02T01:38:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601673",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
needs rebase



---

archive/issue_comments_601674.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3c9384363f49e54f8a3d1bb84e626d58a277cee\">d3c9384</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into u/gh-kliem/face_iterator_simple_face_2</code></td></tr></table>\n",
    "created_at": "2020-09-02T07:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601674",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3c9384363f49e54f8a3d1bb84e626d58a277cee">d3c9384</a></td><td><code>Merge branch 'develop' of git://trac.sagemath.org/sage into u/gh-kliem/face_iterator_simple_face_2</code></td></tr></table>




---

archive/issue_comments_601675.json:
```json
{
    "body": "**Changing commit** from \"[79a866639e5b312608416cec5e0340f242c82fee](https://github.com/sagemath/sagetrac-mirror/commit/79a866639e5b312608416cec5e0340f242c82fee)\" to \"[d3c9384363f49e54f8a3d1bb84e626d58a277cee](https://github.com/sagemath/sagetrac-mirror/commit/d3c9384363f49e54f8a3d1bb84e626d58a277cee)\".",
    "created_at": "2020-09-02T07:04:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601675",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[79a866639e5b312608416cec5e0340f242c82fee](https://github.com/sagemath/sagetrac-mirror/commit/79a866639e5b312608416cec5e0340f242c82fee)" to "[d3c9384363f49e54f8a3d1bb84e626d58a277cee](https://github.com/sagemath/sagetrac-mirror/commit/d3c9384363f49e54f8a3d1bb84e626d58a277cee)".



---

archive/issue_comments_601676.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-09-02T07:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601676",
    "user": "https://github.com/kliem"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_601677.json:
```json
{
    "body": "<a id='comment:13'></a>\nI want to redesign some of the setup before making everything more complicated.\n\nMore precisely, creating strucutures `face_struct` and `faces_list_struct` that take care of the details. Then this overly long argument list of `get_next_level` will just reduce to three arguments or so. This would also make future changes easier including the transition to `bitsets.pxi`.",
    "created_at": "2020-09-07T17:28:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601677",
    "user": "https://github.com/kliem"
}
```

<a id='comment:13'></a>
I want to redesign some of the setup before making everything more complicated.

More precisely, creating strucutures `face_struct` and `faces_list_struct` that take care of the details. Then this overly long argument list of `get_next_level` will just reduce to three arguments or so. This would also make future changes easier including the transition to `bitsets.pxi`.



---

archive/issue_comments_601678.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-09-07T17:28:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601678",
    "user": "https://github.com/kliem"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_events_089013.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89013"
}
```



---

archive/issue_events_089014.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89014"
}
```



---

archive/issue_events_089015.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89015"
}
```



---

archive/issue_comments_601679.json:
```json
{
    "body": "<a id='comment:15'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601679",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_089016.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89016"
}
```



---

archive/issue_events_089017.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89017"
}
```



---

archive/issue_comments_601680.json:
```json
{
    "body": "<a id='comment:16'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30438#issuecomment-601680",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_089018.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89018"
}
```



---

archive/issue_events_089019.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89019"
}
```



---

archive/issue_events_089020.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89020"
}
```



---

archive/issue_events_089021.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89021"
}
```



---

archive/issue_events_089022.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89022"
}
```



---

archive/issue_events_089023.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30438",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30438#event-89023"
}
```
