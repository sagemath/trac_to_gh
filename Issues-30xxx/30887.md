# Issue 30887: Add spkg-configure.m4 for 4ti2, remove direct use of SAGE_LOCAL

archive/issues_030650.json:
```json
{
    "body": "Part of #27330.\n\nIn addition to adjustments to `src/sage/interfaces/four_ti_2.py`, also the following needs changing:\n\n```\nsrc/sage/sandpiles/sandpile.py:path_to_zsolve = os.path.join(SAGE_LOCAL, 'bin', 'zsolve')\n```\n\nhttps://repology.org/project/4ti2/versions\n\n\n**CC:**  @dimpase @orlitzky @slel @antonio-rojas @kiwifb @jengelh @kwankyu @seblabbe\n\n**Keywords:** 4ti2, spkg-configure.m4\n\n**Branch/Commit:** [646e182e65fc247d0d2da9aabcad5f892a471a89](https://github.com/sagemath/sagetrac-mirror/commit/646e182e65fc247d0d2da9aabcad5f892a471a89)\n\n**Reviewer:** Dima Pasechnik, Antonio Rojas\n\n**Author:** Samuel Leli\u00e8vre, Matthias Koeppe\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30887\n\n",
    "closed_at": "2021-10-10T10:17:14Z",
    "created_at": "2020-11-11T01:24:52Z",
    "labels": [
        "component: packages: optional"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Add spkg-configure.m4 for 4ti2, remove direct use of SAGE_LOCAL",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30887",
    "user": "https://github.com/mkoeppe"
}
```
Part of #27330.

In addition to adjustments to `src/sage/interfaces/four_ti_2.py`, also the following needs changing:

```
src/sage/sandpiles/sandpile.py:path_to_zsolve = os.path.join(SAGE_LOCAL, 'bin', 'zsolve')
```

https://repology.org/project/4ti2/versions


**CC:**  @dimpase @orlitzky @slel @antonio-rojas @kiwifb @jengelh @kwankyu @seblabbe

**Keywords:** 4ti2, spkg-configure.m4

**Branch/Commit:** [646e182e65fc247d0d2da9aabcad5f892a471a89](https://github.com/sagemath/sagetrac-mirror/commit/646e182e65fc247d0d2da9aabcad5f892a471a89)

**Reviewer:** Dima Pasechnik, Antonio Rojas

**Author:** Samuel Lelièvre, Matthias Koeppe

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/30887





---

archive/issue_comments_613033.json:
```json
{
    "body": "**Commit:** [d79e1c15b832bb3f28fc37c0fcb8fa312feb1136](https://github.com/sagemath/sagetrac-mirror/commit/d79e1c15b832bb3f28fc37c0fcb8fa312feb1136)",
    "created_at": "2021-03-22T01:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613033",
    "user": "https://github.com/slel"
}
```

**Commit:** [d79e1c15b832bb3f28fc37c0fcb8fa312feb1136](https://github.com/sagemath/sagetrac-mirror/commit/d79e1c15b832bb3f28fc37c0fcb8fa312feb1136)



---

archive/issue_comments_613034.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"4ti2, spkg-configure.m4\".",
    "created_at": "2021-03-22T01:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613034",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "4ti2, spkg-configure.m4".



---

archive/issue_comments_613035.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n+Part of #27330.\n+\n In addition to adjustments to `src/sage/interfaces/four_ti_2.py`, also the following needs changing:\n \n ```\n``````\n",
    "created_at": "2021-03-22T01:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613035",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
+Part of #27330.
+
 In addition to adjustments to `src/sage/interfaces/four_ti_2.py`, also the following needs changing:
 
 ```
``````




---

archive/issue_events_090842.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "rename": {
        "from": "spkg-configure.m4 for 4ti2",
        "to": "Add spkg-configure.m4 for 4ti2"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30887#event-90842"
}
```



---

archive/issue_comments_613036.json:
```json
{
    "body": "**Author:** Samuel Leli\u00e8vre, ...",
    "created_at": "2021-03-22T01:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613036",
    "user": "https://github.com/slel"
}
```

**Author:** Samuel Lelièvre, ...



---

archive/issue_comments_613037.json:
```json
{
    "body": "**Branch:** [public/30887](https://github.com/sagemath/sagetrac-mirror/tree/public/30887)",
    "created_at": "2021-03-22T01:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613037",
    "user": "https://github.com/slel"
}
```

**Branch:** [public/30887](https://github.com/sagemath/sagetrac-mirror/tree/public/30887)



---

archive/issue_comments_613038.json:
```json
{
    "body": "<a id='comment:1'></a>\nHere is distro information to get things started.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d79e1c15b832bb3f28fc37c0fcb8fa312feb1136\">d79e1c1</a></td><td><code>30887: Add distro info for 4ti2</code></td></tr></table>\n",
    "created_at": "2021-03-22T01:42:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613038",
    "user": "https://github.com/slel"
}
```

<a id='comment:1'></a>
Here is distro information to get things started.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d79e1c15b832bb3f28fc37c0fcb8fa312feb1136">d79e1c1</a></td><td><code>30887: Add distro info for 4ti2</code></td></tr></table>




---

archive/issue_comments_613039.json:
```json
{
    "body": "<a id='comment:2'></a>\n`latte_int` uses `4ti2` as a library. The test is here: https://github.com/latte-int/latte/blob/master/m4/4ti2-check.m4#L48",
    "created_at": "2021-03-23T19:09:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613039",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
`latte_int` uses `4ti2` as a library. The test is here: https://github.com/latte-int/latte/blob/master/m4/4ti2-check.m4#L48



---

archive/issue_comments_613040.json:
```json
{
    "body": "<a id='comment:3'></a>\nAlso `Py4ti2` (to be added in #31363) uses `4ti2` as a library - https://github.com/alfsan/Py4ti2/blob/master/setup.py",
    "created_at": "2021-03-23T19:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613040",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Also `Py4ti2` (to be added in #31363) uses `4ti2` as a library - https://github.com/alfsan/Py4ti2/blob/master/setup.py



---

archive/issue_comments_613041.json:
```json
{
    "body": "<a id='comment:4'></a>\n`singular` is able to use `4ti2` via the command-line interface. Checks are done in https://github.com/Singular/Singular/blob/spielwiese/configure.ac#L352\n\n```\nconfigure.ac:AC_CHECK_PROGS([FOURTITWO_HILBERT], [hilbert 4ti2-hilbert])\nconfigure.ac:AC_CHECK_PROGS([FOURTITWO_MARKOV], [markov 4ti2-markov])\nconfigure.ac:AC_CHECK_PROGS([FOURTITWO_GRAVER], [graver 4ti2-graver])\n```",
    "created_at": "2021-03-23T19:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613041",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>
`singular` is able to use `4ti2` via the command-line interface. Checks are done in https://github.com/Singular/Singular/blob/spielwiese/configure.ac#L352

```
configure.ac:AC_CHECK_PROGS([FOURTITWO_HILBERT], [hilbert 4ti2-hilbert])
configure.ac:AC_CHECK_PROGS([FOURTITWO_MARKOV], [markov 4ti2-markov])
configure.ac:AC_CHECK_PROGS([FOURTITWO_GRAVER], [graver 4ti2-graver])
```



---

archive/issue_comments_613042.json:
```json
{
    "body": "<a id='comment:5'></a>\n`src/sage/interfaces/four_ti_2.py` calls the executables \n\n```\n$ grep call src/sage/interfaces/four_ti_2.py\n    def call(self, command, project, verbose=True):\n            sage: four_ti_2.call(\"groebner\", \"test_file\", False) # optional - 4ti2\n        subprocess.call(cmd, shell=True, cwd=self.directory())\n        self.call('zsolve -q', project)\n        self.call('qsolve -q -parbitrary', project)\n        self.call('rays -q -parbitrary', project)\n        self.call('hilbert -q', project)\n        self.call('graver -q', project)\n        self.call('ppi 2> /dev/null', n)\n        self.call('circuits -q -parbitrary', project)\n        self.call('groebner -q -parbitrary', project)\n```\nand does not know that Debian installs them with an executable prefix.",
    "created_at": "2021-03-23T19:19:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613042",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
`src/sage/interfaces/four_ti_2.py` calls the executables 

```
$ grep call src/sage/interfaces/four_ti_2.py
    def call(self, command, project, verbose=True):
            sage: four_ti_2.call("groebner", "test_file", False) # optional - 4ti2
        subprocess.call(cmd, shell=True, cwd=self.directory())
        self.call('zsolve -q', project)
        self.call('qsolve -q -parbitrary', project)
        self.call('rays -q -parbitrary', project)
        self.call('hilbert -q', project)
        self.call('graver -q', project)
        self.call('ppi 2> /dev/null', n)
        self.call('circuits -q -parbitrary', project)
        self.call('groebner -q -parbitrary', project)
```
and does not know that Debian installs them with an executable prefix.



---

archive/issue_comments_613043.json:
```json
{
    "body": "<a id='comment:6'></a>\n`polymake` calls the executables `groebner`, `zsolve`, `circuits`, which are configurable (https://github.com/polymake/polymake/blob/c2a326f240b11a06e1b1d5fd1c2ca7278bbe60a2/apps/polytope/rules/_4ti2.rules) but it does not know that Debian installs them with an executable prefix",
    "created_at": "2021-03-23T20:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613043",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
`polymake` calls the executables `groebner`, `zsolve`, `circuits`, which are configurable (https://github.com/polymake/polymake/blob/c2a326f240b11a06e1b1d5fd1c2ca7278bbe60a2/apps/polytope/rules/_4ti2.rules) but it does not know that Debian installs them with an executable prefix



---

archive/issue_comments_613044.json:
```json
{
    "body": "**Dependencies:** #31534",
    "created_at": "2021-03-23T22:11:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613044",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #31534



---

archive/issue_comments_613045.json:
```json
{
    "body": "**Changing commit** from \"[d79e1c15b832bb3f28fc37c0fcb8fa312feb1136](https://github.com/sagemath/sagetrac-mirror/commit/d79e1c15b832bb3f28fc37c0fcb8fa312feb1136)\" to \"[602ffb02fed3dd90118f53fc4aa2ceb44d9e4690](https://github.com/sagemath/sagetrac-mirror/commit/602ffb02fed3dd90118f53fc4aa2ceb44d9e4690)\".",
    "created_at": "2021-03-23T23:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d79e1c15b832bb3f28fc37c0fcb8fa312feb1136](https://github.com/sagemath/sagetrac-mirror/commit/d79e1c15b832bb3f28fc37c0fcb8fa312feb1136)" to "[602ffb02fed3dd90118f53fc4aa2ceb44d9e4690](https://github.com/sagemath/sagetrac-mirror/commit/602ffb02fed3dd90118f53fc4aa2ceb44d9e4690)".



---

archive/issue_comments_613046.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7c272ec96ca8a3bea2ff1ac457a210d2d83832a2\">7c272ec</a></td><td><code>Add MacPorts package info</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c9f53cc58830fd476c01fbc015e71c1cb98b001\">8c9f53c</a></td><td><code>30504: Add _recommended package info for MacPorts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf0a4d2a944e8ba8199bd3200f28dcf70afac9eb\">bf0a4d2</a></td><td><code>30504: Use zmq-devel in MacPorts for zeromq</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4244893ba5f8e421bc5c244992a8e14e258b9e8\">e424489</a></td><td><code>30504: Fix gcc gfortran openblas info for MacPorts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8b709267c1c582cf9f2b4d276752bbf6ae8df57\">b8b7092</a></td><td><code>build/pkgs/{gcc,gfortran}/distros/macports.txt: Fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4acfc5c8bed0227762a73ff23204bdce2e88e5cf\">4acfc5c</a></td><td><code>Merge #30504</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/857b7d5e1bc8dd7fa7e31148d7018d38216b4b37\">857b7d5</a></td><td><code>tox.ini: In -maximal environments, use IGNORE_MISSING_SYSTEM_PACKAGES=yes for all non-current distributions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e561ac6b891f2b2f71bd239aa11f9c755454321\">4e561ac</a></td><td><code>tox.ini: Use IGNORE_MISSING_SYSTEM_PACKAGES=no for rolling distributions, but IGNORE_MISSING_SYSTEM_PACKAGES=yes for unstable distributions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30d0e8ade2288a5865018f4a3d758401ba1e6bde\">30d0e8a</a></td><td><code>Merge #31534</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/602ffb02fed3dd90118f53fc4aa2ceb44d9e4690\">602ffb0</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: New</code></td></tr></table>\n",
    "created_at": "2021-03-23T23:52:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613046",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7c272ec96ca8a3bea2ff1ac457a210d2d83832a2">7c272ec</a></td><td><code>Add MacPorts package info</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c9f53cc58830fd476c01fbc015e71c1cb98b001">8c9f53c</a></td><td><code>30504: Add _recommended package info for MacPorts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf0a4d2a944e8ba8199bd3200f28dcf70afac9eb">bf0a4d2</a></td><td><code>30504: Use zmq-devel in MacPorts for zeromq</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4244893ba5f8e421bc5c244992a8e14e258b9e8">e424489</a></td><td><code>30504: Fix gcc gfortran openblas info for MacPorts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8b709267c1c582cf9f2b4d276752bbf6ae8df57">b8b7092</a></td><td><code>build/pkgs/{gcc,gfortran}/distros/macports.txt: Fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4acfc5c8bed0227762a73ff23204bdce2e88e5cf">4acfc5c</a></td><td><code>Merge #30504</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/857b7d5e1bc8dd7fa7e31148d7018d38216b4b37">857b7d5</a></td><td><code>tox.ini: In -maximal environments, use IGNORE_MISSING_SYSTEM_PACKAGES=yes for all non-current distributions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e561ac6b891f2b2f71bd239aa11f9c755454321">4e561ac</a></td><td><code>tox.ini: Use IGNORE_MISSING_SYSTEM_PACKAGES=no for rolling distributions, but IGNORE_MISSING_SYSTEM_PACKAGES=yes for unstable distributions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30d0e8ade2288a5865018f4a3d758401ba1e6bde">30d0e8a</a></td><td><code>Merge #31534</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/602ffb02fed3dd90118f53fc4aa2ceb44d9e4690">602ffb0</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: New</code></td></tr></table>




---

archive/issue_comments_613047.json:
```json
{
    "body": "**Changing commit** from \"[602ffb02fed3dd90118f53fc4aa2ceb44d9e4690](https://github.com/sagemath/sagetrac-mirror/commit/602ffb02fed3dd90118f53fc4aa2ceb44d9e4690)\" to \"[ff25e8fabac0115d37c218b8a92f721a649d9789](https://github.com/sagemath/sagetrac-mirror/commit/ff25e8fabac0115d37c218b8a92f721a649d9789)\".",
    "created_at": "2021-03-24T02:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613047",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[602ffb02fed3dd90118f53fc4aa2ceb44d9e4690](https://github.com/sagemath/sagetrac-mirror/commit/602ffb02fed3dd90118f53fc4aa2ceb44d9e4690)" to "[ff25e8fabac0115d37c218b8a92f721a649d9789](https://github.com/sagemath/sagetrac-mirror/commit/ff25e8fabac0115d37c218b8a92f721a649d9789)".



---

archive/issue_comments_613048.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff25e8fabac0115d37c218b8a92f721a649d9789\">ff25e8f</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Fix quoting</code></td></tr></table>\n",
    "created_at": "2021-03-24T02:20:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613048",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff25e8fabac0115d37c218b8a92f721a649d9789">ff25e8f</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Fix quoting</code></td></tr></table>




---

archive/issue_events_090843.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-28T02:13:59Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30887#event-90843"
}
```



---

archive/issue_comments_613049.json:
```json
{
    "body": "**Changing commit** from \"[ff25e8fabac0115d37c218b8a92f721a649d9789](https://github.com/sagemath/sagetrac-mirror/commit/ff25e8fabac0115d37c218b8a92f721a649d9789)\" to \"[dd364a566b4d3381436cc2bc3d230d551ddfb35a](https://github.com/sagemath/sagetrac-mirror/commit/dd364a566b4d3381436cc2bc3d230d551ddfb35a)\".",
    "created_at": "2021-06-23T23:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ff25e8fabac0115d37c218b8a92f721a649d9789](https://github.com/sagemath/sagetrac-mirror/commit/ff25e8fabac0115d37c218b8a92f721a649d9789)" to "[dd364a566b4d3381436cc2bc3d230d551ddfb35a](https://github.com/sagemath/sagetrac-mirror/commit/dd364a566b4d3381436cc2bc3d230d551ddfb35a)".



---

archive/issue_comments_613050.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f131737c1736474f5614d1f55e714a8708a167b\">0f13173</a></td><td><code>30887: Add distro info for 4ti2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c1c1c8036a10feefa425a45b006ccb40f2dc89a\">1c1c1c8</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd364a566b4d3381436cc2bc3d230d551ddfb35a\">dd364a5</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Fix quoting</code></td></tr></table>\n",
    "created_at": "2021-06-23T23:40:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613050",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f131737c1736474f5614d1f55e714a8708a167b">0f13173</a></td><td><code>30887: Add distro info for 4ti2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c1c1c8036a10feefa425a45b006ccb40f2dc89a">1c1c1c8</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd364a566b4d3381436cc2bc3d230d551ddfb35a">dd364a5</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Fix quoting</code></td></tr></table>




---

archive/issue_comments_613051.json:
```json
{
    "body": "**Changing dependencies** from \"#31534\" to \"\".",
    "created_at": "2021-06-23T23:41:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613051",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#31534" to "".



---

archive/issue_comments_613052.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45f8e593928a54a0a87476909b2e20998b9c1101\">45f8e59</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Check for executables with prefix '4ti2-' too</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/390c0d2984b40db48b9b0021e78d6e7e04893455\">390c0d2</a></td><td><code>build/pkgs/sage_conf/src/sage_conf.py.in, src/sage/env.py: Add FOURTITWO... variables</code></td></tr></table>\n",
    "created_at": "2021-06-23T23:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613052",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45f8e593928a54a0a87476909b2e20998b9c1101">45f8e59</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Check for executables with prefix '4ti2-' too</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/390c0d2984b40db48b9b0021e78d6e7e04893455">390c0d2</a></td><td><code>build/pkgs/sage_conf/src/sage_conf.py.in, src/sage/env.py: Add FOURTITWO... variables</code></td></tr></table>




---

archive/issue_comments_613053.json:
```json
{
    "body": "**Changing commit** from \"[dd364a566b4d3381436cc2bc3d230d551ddfb35a](https://github.com/sagemath/sagetrac-mirror/commit/dd364a566b4d3381436cc2bc3d230d551ddfb35a)\" to \"[390c0d2984b40db48b9b0021e78d6e7e04893455](https://github.com/sagemath/sagetrac-mirror/commit/390c0d2984b40db48b9b0021e78d6e7e04893455)\".",
    "created_at": "2021-06-23T23:57:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[dd364a566b4d3381436cc2bc3d230d551ddfb35a](https://github.com/sagemath/sagetrac-mirror/commit/dd364a566b4d3381436cc2bc3d230d551ddfb35a)" to "[390c0d2984b40db48b9b0021e78d6e7e04893455](https://github.com/sagemath/sagetrac-mirror/commit/390c0d2984b40db48b9b0021e78d6e7e04893455)".



---

archive/issue_comments_613054.json:
```json
{
    "body": "<a id='comment:14'></a>\nOn `ubuntu-focal-maximal`:\n\n```\nChecking whether SageMath should install SPKG 4ti2...\nchecking whether any of gmp mpir glpk zlib is installed as or will be installed as SPKG... no\nchecking for hilbert... no\nchecking for 4ti2-hilbert... 4ti2-hilbert\nchecking for markov... no\nchecking for 4ti2-markov... 4ti2-markov\nchecking for graver... no\nchecking for 4ti2-graver... 4ti2-graver\nchecking for zsolve... no\nchecking for 4ti2-zsolve... 4ti2-zsolve\nchecking for qsolve... no\nchecking for 4ti2-qsolve... 4ti2-qsolve\nchecking for rays... no\nchecking for 4ti2-rays... 4ti2-rays\nchecking for ppi... no\nchecking for 4ti2-ppi... 4ti2-ppi\nchecking for circuits... no\nchecking for 4ti2-circuits... 4ti2-circuits\nchecking for groebner... no\nchecking for 4ti2-groebner... 4ti2-groebner\nchecking for library 4ti2gmp... no\nconfigure: no suitable system package found for SPKG 4ti2\n```",
    "created_at": "2021-06-23T23:58:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613054",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
On `ubuntu-focal-maximal`:

```
Checking whether SageMath should install SPKG 4ti2...
checking whether any of gmp mpir glpk zlib is installed as or will be installed as SPKG... no
checking for hilbert... no
checking for 4ti2-hilbert... 4ti2-hilbert
checking for markov... no
checking for 4ti2-markov... 4ti2-markov
checking for graver... no
checking for 4ti2-graver... 4ti2-graver
checking for zsolve... no
checking for 4ti2-zsolve... 4ti2-zsolve
checking for qsolve... no
checking for 4ti2-qsolve... 4ti2-qsolve
checking for rays... no
checking for 4ti2-rays... 4ti2-rays
checking for ppi... no
checking for 4ti2-ppi... 4ti2-ppi
checking for circuits... no
checking for 4ti2-circuits... 4ti2-circuits
checking for groebner... no
checking for 4ti2-groebner... 4ti2-groebner
checking for library 4ti2gmp... no
configure: no suitable system package found for SPKG 4ti2
```



---

archive/issue_comments_613055.json:
```json
{
    "body": "<a id='comment:15'></a>\nUbuntu packaging does not have the headers and has the shared libs in a nonstandard place - can't use",
    "created_at": "2021-06-24T00:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613055",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Ubuntu packaging does not have the headers and has the shared libs in a nonstandard place - can't use



---

archive/issue_comments_613056.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2d97bf2ab466ec1711f9b4446b5eb439e4bf967\">f2d97bf</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Add AC_SUBST</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5a4aa317931c5d7fc72adcd1f8c5be2b610d56b\">b5a4aa3</a></td><td><code>src/sage/env.py: No fallbacks for FOURTITWO... here</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd029453d6c58c17b627159d8ec6d97bc76cc487\">fd02945</a></td><td><code>sage.features.four_ti_2: New, use it in sage.interfaces.four_ti_2, sage.sandpiles</code></td></tr></table>\n",
    "created_at": "2021-06-24T01:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613056",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2d97bf2ab466ec1711f9b4446b5eb439e4bf967">f2d97bf</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Add AC_SUBST</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5a4aa317931c5d7fc72adcd1f8c5be2b610d56b">b5a4aa3</a></td><td><code>src/sage/env.py: No fallbacks for FOURTITWO... here</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd029453d6c58c17b627159d8ec6d97bc76cc487">fd02945</a></td><td><code>sage.features.four_ti_2: New, use it in sage.interfaces.four_ti_2, sage.sandpiles</code></td></tr></table>




---

archive/issue_comments_613057.json:
```json
{
    "body": "**Changing commit** from \"[390c0d2984b40db48b9b0021e78d6e7e04893455](https://github.com/sagemath/sagetrac-mirror/commit/390c0d2984b40db48b9b0021e78d6e7e04893455)\" to \"[fd029453d6c58c17b627159d8ec6d97bc76cc487](https://github.com/sagemath/sagetrac-mirror/commit/fd029453d6c58c17b627159d8ec6d97bc76cc487)\".",
    "created_at": "2021-06-24T01:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613057",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[390c0d2984b40db48b9b0021e78d6e7e04893455](https://github.com/sagemath/sagetrac-mirror/commit/390c0d2984b40db48b9b0021e78d6e7e04893455)" to "[fd029453d6c58c17b627159d8ec6d97bc76cc487](https://github.com/sagemath/sagetrac-mirror/commit/fd029453d6c58c17b627159d8ec6d97bc76cc487)".



---

archive/issue_comments_613058.json:
```json
{
    "body": "**Changing author** from \"Samuel Leli\u00e8vre, ...\" to \"Samuel Leli\u00e8vre, Matthias Koeppe\".",
    "created_at": "2021-06-24T01:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613058",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Samuel Lelièvre, ..." to "Samuel Lelièvre, Matthias Koeppe".



---

archive/issue_comments_613059.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2021-06-24T01:38:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613059",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_events_090844.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "rename": {
        "from": "Add spkg-configure.m4 for 4ti2",
        "to": "Add spkg-configure.m4 for 4ti2, remove direct use of SAGE_LOCAL"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30887#event-90844"
}
```



---

archive/issue_comments_613060.json:
```json
{
    "body": "<a id='comment:19'></a>\nI didn't realize that `zsolve` is a part of `4ti2`. Gentoo isn't following debian naming (for now). It all look OK from a Gentoo point of view. I'll give it a proper run through later tonight.",
    "created_at": "2021-06-24T01:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613060",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:19'></a>
I didn't realize that `zsolve` is a part of `4ti2`. Gentoo isn't following debian naming (for now). It all look OK from a Gentoo point of view. I'll give it a proper run through later tonight.



---

archive/issue_comments_613061.json:
```json
{
    "body": "<a id='comment:20'></a>\nWorks and doctest with system 4ti2 on Gentoo.",
    "created_at": "2021-06-25T01:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613061",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:20'></a>
Works and doctest with system 4ti2 on Gentoo.



---

archive/issue_comments_613062.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe 4ti2 binaries in openSUSE, since the package's inception in 2012 (so way before the Debian package by the looks of it), are available as e.g. /usr/bin/4ti2_zsolve, i.e. with a underscore rather than a dash. Alternatively, one can extend $PATH to include /usr/libexec/4ti2 and get them by their original name that way.",
    "created_at": "2021-07-01T21:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613062",
    "user": "https://github.com/jengelh"
}
```

<a id='comment:22'></a>
The 4ti2 binaries in openSUSE, since the package's inception in 2012 (so way before the Debian package by the looks of it), are available as e.g. /usr/bin/4ti2_zsolve, i.e. with a underscore rather than a dash. Alternatively, one can extend $PATH to include /usr/libexec/4ti2 and get them by their original name that way.



---

archive/issue_comments_613063.json:
```json
{
    "body": "<a id='comment:23'></a>\nOK, we can check for the prefix `4ti2_` here too",
    "created_at": "2021-07-01T21:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613063",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
OK, we can check for the prefix `4ti2_` here too



---

archive/issue_comments_613064.json:
```json
{
    "body": "<a id='comment:24'></a>\nYou may want to send a pull request to Singular and Polymake so that these packages accept system 4ti2 on SuSE",
    "created_at": "2021-07-01T21:21:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613064",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
You may want to send a pull request to Singular and Polymake so that these packages accept system 4ti2 on SuSE



---

archive/issue_comments_613065.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d74ad641624e1c24a4e8695529b4416f4dd0678\">7d74ad6</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Check for executable's with prefix 4ti2_ too</code></td></tr></table>\n",
    "created_at": "2021-07-01T21:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613065",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d74ad641624e1c24a4e8695529b4416f4dd0678">7d74ad6</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Check for executable's with prefix 4ti2_ too</code></td></tr></table>




---

archive/issue_comments_613066.json:
```json
{
    "body": "**Changing commit** from \"[fd029453d6c58c17b627159d8ec6d97bc76cc487](https://github.com/sagemath/sagetrac-mirror/commit/fd029453d6c58c17b627159d8ec6d97bc76cc487)\" to \"[7d74ad641624e1c24a4e8695529b4416f4dd0678](https://github.com/sagemath/sagetrac-mirror/commit/7d74ad641624e1c24a4e8695529b4416f4dd0678)\".",
    "created_at": "2021-07-01T21:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613066",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fd029453d6c58c17b627159d8ec6d97bc76cc487](https://github.com/sagemath/sagetrac-mirror/commit/fd029453d6c58c17b627159d8ec6d97bc76cc487)" to "[7d74ad641624e1c24a4e8695529b4416f4dd0678](https://github.com/sagemath/sagetrac-mirror/commit/7d74ad641624e1c24a4e8695529b4416f4dd0678)".



---

archive/issue_comments_613067.json:
```json
{
    "body": "<a id='comment:26'></a>\nLet's get this in please",
    "created_at": "2021-07-06T18:35:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613067",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Let's get this in please



---

archive/issue_comments_613068.json:
```json
{
    "body": "<a id='comment:27'></a>\n`AC_TRY_LINK` is obsolete. We spent some time removing these in #30668. `autoupdate` produces\n\n```diff\ndiff --git a/build/pkgs/4ti2/spkg-configure.m4 b/build/pkgs/4ti2/spkg-configure.m4\nindex e01562c50d..a16da8fc4b 100644\n--- a/build/pkgs/4ti2/spkg-configure.m4\n+++ b/build/pkgs/4ti2/spkg-configure.m4\n@@ -17,13 +17,12 @@ SAGE_SPKG_CONFIGURE([4ti2], [\n         FORTYTWO_LIBS=\"-l4ti2gmp -lzsolve\"\n         CXXFLAGS=\"${BACKUP_CXXFLAGS} ${FORTYTWO_CXXFLAGS} ${GMP_CFLAGS}\"\n         LIBS=\"${BACKUP_LIBS} ${FORTYTWO_LIBS} ${GMP_LIBS}\"\n-        AC_TRY_LINK([\n+        AC_LINK_IFELSE([AC_LANG_PROGRAM([[\n #include \"4ti2/4ti2.h\"\n-],\n-[ _4ti2_rays_create_state(_4ti2_PREC_INT_ARB);\n-], [\n+]], [[ _4ti2_rays_create_state(_4ti2_PREC_INT_ARB);\n+]])],[\n         AC_MSG_RESULT([yes])\n-], [\n+],[\n         AC_MSG_RESULT([no])\n         sage_spkg_install_4ti2=yes\n ])\n```\nand it appears to work.",
    "created_at": "2021-07-07T09:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613068",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>
`AC_TRY_LINK` is obsolete. We spent some time removing these in #30668. `autoupdate` produces

```diff
diff --git a/build/pkgs/4ti2/spkg-configure.m4 b/build/pkgs/4ti2/spkg-configure.m4
index e01562c50d..a16da8fc4b 100644
--- a/build/pkgs/4ti2/spkg-configure.m4
+++ b/build/pkgs/4ti2/spkg-configure.m4
@@ -17,13 +17,12 @@ SAGE_SPKG_CONFIGURE([4ti2], [
         FORTYTWO_LIBS="-l4ti2gmp -lzsolve"
         CXXFLAGS="${BACKUP_CXXFLAGS} ${FORTYTWO_CXXFLAGS} ${GMP_CFLAGS}"
         LIBS="${BACKUP_LIBS} ${FORTYTWO_LIBS} ${GMP_LIBS}"
-        AC_TRY_LINK([
+        AC_LINK_IFELSE([AC_LANG_PROGRAM([[
 #include "4ti2/4ti2.h"
-],
-[ _4ti2_rays_create_state(_4ti2_PREC_INT_ARB);
-], [
+]], [[ _4ti2_rays_create_state(_4ti2_PREC_INT_ARB);
+]])],[
         AC_MSG_RESULT([yes])
-], [
+],[
         AC_MSG_RESULT([no])
         sage_spkg_install_4ti2=yes
 ])
```
and it appears to work.



---

archive/issue_comments_613069.json:
```json
{
    "body": "<a id='comment:28'></a>\nby the way, with system `4ti2`, I have not found a way to tell Sage it is \"installed\" (./configure does pick it up all right); I tried `./configure --with-system-4ti2=force --enable-4ti2=yes`\nand still `4ti2` does not appear in the list of optional packages while doing `./sage -t ...`.\n\nSurely I can add it explicitly to `--optional`, but this is very suboptimal.",
    "created_at": "2021-07-07T09:36:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613069",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>
by the way, with system `4ti2`, I have not found a way to tell Sage it is "installed" (./configure does pick it up all right); I tried `./configure --with-system-4ti2=force --enable-4ti2=yes`
and still `4ti2` does not appear in the list of optional packages while doing `./sage -t ...`.

Surely I can add it explicitly to `--optional`, but this is very suboptimal.



---

archive/issue_comments_613070.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [dimpase](#comment%3A27):\n> `AC_TRY_LINK` is obsolete. We spent some time removing these in #30668. `autoupdate` produces\n\n\nCan you push this to the ticket please?",
    "created_at": "2021-07-07T19:50:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613070",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Replying to [dimpase](#comment%3A27):
> `AC_TRY_LINK` is obsolete. We spent some time removing these in #30668. `autoupdate` produces


Can you push this to the ticket please?



---

archive/issue_comments_613071.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [dimpase](#comment%3A28):\n> by the way, with system `4ti2`, I have not found a way to tell Sage it is \"installed\" (./configure does pick it up all right); I tried `./configure --with-system-4ti2=force --enable-4ti2=yes`\n> and still `4ti2` does not appear in the list of optional packages while doing `./sage -t ...`.\n> \n> Surely I can add it explicitly to `--optional`, but this is very suboptimal.\n\n\nRight, that's an important point. For optional packages with `spkg-configure.m4` we don't have a mechanism yet to put them on the default \"optional\" list. I ran into this trap also recently on the lrslib ticket. That's basically #30746 (`sage.doctest.control`: Replace use of `sage.misc.package.list_packages`)",
    "created_at": "2021-07-07T19:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613071",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Replying to [dimpase](#comment%3A28):
> by the way, with system `4ti2`, I have not found a way to tell Sage it is "installed" (./configure does pick it up all right); I tried `./configure --with-system-4ti2=force --enable-4ti2=yes`
> and still `4ti2` does not appear in the list of optional packages while doing `./sage -t ...`.
> 
> Surely I can add it explicitly to `--optional`, but this is very suboptimal.


Right, that's an important point. For optional packages with `spkg-configure.m4` we don't have a mechanism yet to put them on the default "optional" list. I ran into this trap also recently on the lrslib ticket. That's basically #30746 (`sage.doctest.control`: Replace use of `sage.misc.package.list_packages`)



---

archive/issue_comments_613072.json:
```json
{
    "body": "**Changing commit** from \"[7d74ad641624e1c24a4e8695529b4416f4dd0678](https://github.com/sagemath/sagetrac-mirror/commit/7d74ad641624e1c24a4e8695529b4416f4dd0678)\" to \"[6c54d00610d16fdc46edad67cfe43d50a3198c87](https://github.com/sagemath/sagetrac-mirror/commit/6c54d00610d16fdc46edad67cfe43d50a3198c87)\".",
    "created_at": "2021-07-07T21:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613072",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7d74ad641624e1c24a4e8695529b4416f4dd0678](https://github.com/sagemath/sagetrac-mirror/commit/7d74ad641624e1c24a4e8695529b4416f4dd0678)" to "[6c54d00610d16fdc46edad67cfe43d50a3198c87](https://github.com/sagemath/sagetrac-mirror/commit/6c54d00610d16fdc46edad67cfe43d50a3198c87)".



---

archive/issue_comments_613073.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c54d00610d16fdc46edad67cfe43d50a3198c87\">6c54d00</a></td><td><code>use AC_LINK_IFELSE instead of obsolete AC_TRY_LINK</code></td></tr></table>\n",
    "created_at": "2021-07-07T21:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613073",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c54d00610d16fdc46edad67cfe43d50a3198c87">6c54d00</a></td><td><code>use AC_LINK_IFELSE instead of obsolete AC_TRY_LINK</code></td></tr></table>




---

archive/issue_comments_613074.json:
```json
{
    "body": "**Changing commit** from \"[6c54d00610d16fdc46edad67cfe43d50a3198c87](https://github.com/sagemath/sagetrac-mirror/commit/6c54d00610d16fdc46edad67cfe43d50a3198c87)\" to \"[709ab878f2a24594d71481c91d5d7d5eb02300eb](https://github.com/sagemath/sagetrac-mirror/commit/709ab878f2a24594d71481c91d5d7d5eb02300eb)\".",
    "created_at": "2021-07-08T17:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613074",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6c54d00610d16fdc46edad67cfe43d50a3198c87](https://github.com/sagemath/sagetrac-mirror/commit/6c54d00610d16fdc46edad67cfe43d50a3198c87)" to "[709ab878f2a24594d71481c91d5d7d5eb02300eb](https://github.com/sagemath/sagetrac-mirror/commit/709ab878f2a24594d71481c91d5d7d5eb02300eb)".



---

archive/issue_comments_613075.json:
```json
{
    "body": "<a id='comment:32'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/709ab878f2a24594d71481c91d5d7d5eb02300eb\">709ab87</a></td><td><code>sage.feature.join_feature: New, factored out from LatteFeature; use it to implement FourTi2Feature</code></td></tr></table>\n",
    "created_at": "2021-07-08T17:57:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613075",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/709ab878f2a24594d71481c91d5d7d5eb02300eb">709ab87</a></td><td><code>sage.feature.join_feature: New, factored out from LatteFeature; use it to implement FourTi2Feature</code></td></tr></table>




---

archive/issue_comments_613076.json:
```json
{
    "body": "<a id='comment:33'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dcbbea21053ad86f3a25709c41530afeaba774e1\">dcbbea2</a></td><td><code>DocTestReporter: Fix 'sage -t --optional=all'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2e3c2100f641d2a4e556528848fc34c81aeaca29\">2e3c210</a></td><td><code>sage.doctest.external: Add 4ti2</code></td></tr></table>\n",
    "created_at": "2021-07-08T18:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613076",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dcbbea21053ad86f3a25709c41530afeaba774e1">dcbbea2</a></td><td><code>DocTestReporter: Fix 'sage -t --optional=all'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2e3c2100f641d2a4e556528848fc34c81aeaca29">2e3c210</a></td><td><code>sage.doctest.external: Add 4ti2</code></td></tr></table>




---

archive/issue_comments_613077.json:
```json
{
    "body": "**Changing commit** from \"[709ab878f2a24594d71481c91d5d7d5eb02300eb](https://github.com/sagemath/sagetrac-mirror/commit/709ab878f2a24594d71481c91d5d7d5eb02300eb)\" to \"[2e3c2100f641d2a4e556528848fc34c81aeaca29](https://github.com/sagemath/sagetrac-mirror/commit/2e3c2100f641d2a4e556528848fc34c81aeaca29)\".",
    "created_at": "2021-07-08T18:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613077",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[709ab878f2a24594d71481c91d5d7d5eb02300eb](https://github.com/sagemath/sagetrac-mirror/commit/709ab878f2a24594d71481c91d5d7d5eb02300eb)" to "[2e3c2100f641d2a4e556528848fc34c81aeaca29](https://github.com/sagemath/sagetrac-mirror/commit/2e3c2100f641d2a4e556528848fc34c81aeaca29)".



---

archive/issue_comments_613078.json:
```json
{
    "body": "<a id='comment:34'></a>\nI have now added a `has_4ti2` to `sage.doctest.external`, so that the 4ti2 tests are at least run if `./sage -t --optional=sage,external` is used. \n\nI get that `internet` shouldn't be probed without an additional option, but I think that at least for some \"safe\" features such as `imagemagick`, `rubiks`, `4ti2`, `pandoc`, it really shouldn't require the use of `external` to check for these.",
    "created_at": "2021-07-08T19:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613078",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
I have now added a `has_4ti2` to `sage.doctest.external`, so that the 4ti2 tests are at least run if `./sage -t --optional=sage,external` is used. 

I get that `internet` shouldn't be probed without an additional option, but I think that at least for some "safe" features such as `imagemagick`, `rubiks`, `4ti2`, `pandoc`, it really shouldn't require the use of `external` to check for these.



---

archive/issue_comments_613079.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [mkoeppe](#comment%3A34):\n> I get that `internet` shouldn't be probed without an additional option, but I think that at least for some \"safe\" features such as `imagemagick`, `rubiks`, `4ti2`, `pandoc`, it really shouldn't require the use of `external` to check for these. \n\n\n(that's for another ticket.)",
    "created_at": "2021-07-08T20:25:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613079",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Replying to [mkoeppe](#comment%3A34):
> I get that `internet` shouldn't be probed without an additional option, but I think that at least for some "safe" features such as `imagemagick`, `rubiks`, `4ti2`, `pandoc`, it really shouldn't require the use of `external` to check for these. 


(that's for another ticket.)



---

archive/issue_comments_613080.json:
```json
{
    "body": "<a id='comment:36'></a>\nThis is now #32174 (doctests: Detect \"safe\" external features even if `--optional=external` is not used).",
    "created_at": "2021-07-10T18:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613080",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
This is now #32174 (doctests: Detect "safe" external features even if `--optional=external` is not used).



---

archive/issue_comments_613081.json:
```json
{
    "body": "<a id='comment:37'></a>\nneeds a rebase",
    "created_at": "2021-07-19T14:26:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613081",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>
needs a rebase



---

archive/issue_comments_613082.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c49201ddfd8ee4950dfd74a91f550ca4a80f088\">8c49201</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Check for executables with prefix '4ti2-' too</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/641f6876d3e0323d2b3570408433ce276b60e48c\">641f687</a></td><td><code>build/pkgs/sage_conf/src/sage_conf.py.in, src/sage/env.py: Add FOURTITWO... variables</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fccb97323d0b1cfc0a6d536d8fbc7aea3b01800f\">fccb973</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Add AC_SUBST</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c32540acb8ee1f1cceb3279c7def02ea3b185e8\">3c32540</a></td><td><code>src/sage/env.py: No fallbacks for FOURTITWO... here</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea548d7db98083c0cb8c516d9777e031656b693f\">ea548d7</a></td><td><code>sage.features.four_ti_2: New, use it in sage.interfaces.four_ti_2, sage.sandpiles</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f826ded5eaf52bd863c250cadfddd0a56b98f938\">f826ded</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Check for executable's with prefix 4ti2_ too</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/56016cee03601c3788407eded608138c1f676403\">56016ce</a></td><td><code>use AC_LINK_IFELSE instead of obsolete AC_TRY_LINK</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b45b77946483b06e853506c9013dfeae5d07902\">2b45b77</a></td><td><code>sage.feature.join_feature: New, factored out from LatteFeature; use it to implement FourTi2Feature</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c23cc9dfb4d124bc588c3763bf26a2b87ba7cc6\">5c23cc9</a></td><td><code>DocTestReporter: Fix 'sage -t --optional=all'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b8634de22051a749b8e54f3684dc2930a713f39\">1b8634d</a></td><td><code>sage.doctest.external: Add 4ti2</code></td></tr></table>\n",
    "created_at": "2021-07-19T14:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613082",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c49201ddfd8ee4950dfd74a91f550ca4a80f088">8c49201</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Check for executables with prefix '4ti2-' too</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/641f6876d3e0323d2b3570408433ce276b60e48c">641f687</a></td><td><code>build/pkgs/sage_conf/src/sage_conf.py.in, src/sage/env.py: Add FOURTITWO... variables</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fccb97323d0b1cfc0a6d536d8fbc7aea3b01800f">fccb973</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Add AC_SUBST</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c32540acb8ee1f1cceb3279c7def02ea3b185e8">3c32540</a></td><td><code>src/sage/env.py: No fallbacks for FOURTITWO... here</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea548d7db98083c0cb8c516d9777e031656b693f">ea548d7</a></td><td><code>sage.features.four_ti_2: New, use it in sage.interfaces.four_ti_2, sage.sandpiles</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f826ded5eaf52bd863c250cadfddd0a56b98f938">f826ded</a></td><td><code>build/pkgs/4ti2/spkg-configure.m4: Check for executable's with prefix 4ti2_ too</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/56016cee03601c3788407eded608138c1f676403">56016ce</a></td><td><code>use AC_LINK_IFELSE instead of obsolete AC_TRY_LINK</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b45b77946483b06e853506c9013dfeae5d07902">2b45b77</a></td><td><code>sage.feature.join_feature: New, factored out from LatteFeature; use it to implement FourTi2Feature</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c23cc9dfb4d124bc588c3763bf26a2b87ba7cc6">5c23cc9</a></td><td><code>DocTestReporter: Fix 'sage -t --optional=all'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b8634de22051a749b8e54f3684dc2930a713f39">1b8634d</a></td><td><code>sage.doctest.external: Add 4ti2</code></td></tr></table>




---

archive/issue_comments_613083.json:
```json
{
    "body": "**Changing commit** from \"[2e3c2100f641d2a4e556528848fc34c81aeaca29](https://github.com/sagemath/sagetrac-mirror/commit/2e3c2100f641d2a4e556528848fc34c81aeaca29)\" to \"[1b8634de22051a749b8e54f3684dc2930a713f39](https://github.com/sagemath/sagetrac-mirror/commit/1b8634de22051a749b8e54f3684dc2930a713f39)\".",
    "created_at": "2021-07-19T14:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613083",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2e3c2100f641d2a4e556528848fc34c81aeaca29](https://github.com/sagemath/sagetrac-mirror/commit/2e3c2100f641d2a4e556528848fc34c81aeaca29)" to "[1b8634de22051a749b8e54f3684dc2930a713f39](https://github.com/sagemath/sagetrac-mirror/commit/1b8634de22051a749b8e54f3684dc2930a713f39)".



---

archive/issue_comments_613084.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2021-07-19T18:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613084",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_613085.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-07-19T18:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613085",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_613086.json:
```json
{
    "body": "<a id='comment:39'></a>\nlgtm",
    "created_at": "2021-07-19T18:14:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613086",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>
lgtm



---

archive/issue_comments_613087.json:
```json
{
    "body": "<a id='comment:40'></a>\nThanks!",
    "created_at": "2021-07-19T18:30:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613087",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
Thanks!



---

archive/issue_comments_613088.json:
```json
{
    "body": "<a id='comment:41'></a>\nTests fail",
    "created_at": "2021-07-21T20:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613088",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:41'></a>
Tests fail



---

archive/issue_comments_613089.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2021-07-21T20:19:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613089",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_613090.json:
```json
{
    "body": "<a id='comment:42'></a>\nVolker, there are dozens of different ways external packages, vendored or not, with dependencies, may fail. More info please.",
    "created_at": "2021-07-21T22:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613090",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>
Volker, there are dozens of different ways external packages, vendored or not, with dependencies, may fail. More info please.



---

archive/issue_comments_613091.json:
```json
{
    "body": "**Changing commit** from \"[1b8634de22051a749b8e54f3684dc2930a713f39](https://github.com/sagemath/sagetrac-mirror/commit/1b8634de22051a749b8e54f3684dc2930a713f39)\" to \"[d9d4f999789bcc5477cde60bb26af45dd6b31585](https://github.com/sagemath/sagetrac-mirror/commit/d9d4f999789bcc5477cde60bb26af45dd6b31585)\".",
    "created_at": "2021-07-25T05:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613091",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1b8634de22051a749b8e54f3684dc2930a713f39](https://github.com/sagemath/sagetrac-mirror/commit/1b8634de22051a749b8e54f3684dc2930a713f39)" to "[d9d4f999789bcc5477cde60bb26af45dd6b31585](https://github.com/sagemath/sagetrac-mirror/commit/d9d4f999789bcc5477cde60bb26af45dd6b31585)".



---

archive/issue_comments_613092.json:
```json
{
    "body": "<a id='comment:43'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9d4f999789bcc5477cde60bb26af45dd6b31585\">d9d4f99</a></td><td><code>Merge tag '9.4.beta6' into t/30887/public/30887</code></td></tr></table>\n",
    "created_at": "2021-07-25T05:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613092",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9d4f999789bcc5477cde60bb26af45dd6b31585">d9d4f99</a></td><td><code>Merge tag '9.4.beta6' into t/30887/public/30887</code></td></tr></table>




---

archive/issue_comments_613093.json:
```json
{
    "body": "<a id='comment:44'></a>\nWorks fine with and without 4ti2 installed. If there is a failure on some machine, we obviously need more information than \"tests fail\".",
    "created_at": "2021-07-25T05:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613093",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>
Works fine with and without 4ti2 installed. If there is a failure on some machine, we obviously need more information than "tests fail".



---

archive/issue_comments_613094.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2021-07-25T05:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613094",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_613095.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2021-07-25T20:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613095",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_613096.json:
```json
{
    "body": "<a id='comment:45'></a>\n\n```\nsage -t --long --warn-long 43.6 --random-seed=0 src/sage/misc/dev_tools.py\n**********************************************************************\nFile \"src/sage/misc/dev_tools.py\", line 487, in sage.misc.dev_tools.import_statements\nFailed example:\n    import_statements('SAGE_ENV')\nExpected:\n    from sage.env import SAGE_ENV\nGot:\n    # ** Warning **: several modules for the object {'UNAME': 'Linux', 'HOSTNAME': 'zen', 'LOCAL_IDENTIFIER': 'zen.1421426', 'SAGE_VERSION': '9.4.beta6', 'SAGE_DATE': '2021-07-24', 'SAGE_VERSION_BANNER': 'SageMath version 9.4.beta6, Release Date: 2021-07-24', 'SAGE_VENV': '/home/release/Sage/local', 'SAGE_LIB': '/home/release/Sage/local/lib64/python3.9/site-packages', 'SAGE_EXTCODE': '/home/release/Sage/local/lib64/python3.9/site-packages/sage/ext_data', 'SAGE_VENV_SPKG_INST': '/home/release/Sage/local/var/lib/sage/installed', 'SAGE_LOCAL': '/home/release/Sage/local', 'SAGE_SHARE': '/home/release/Sage/local/share', 'SAGE_DOC': '/home/release/Sage/local/share/doc/sage', 'SAGE_SPKG_INST': '/home/release/Sage/local/var/lib/sage/installed', 'SAGE_ROOT': '/home/release/Sage', 'SAGE_SRC': '/home/release/Sage/src', 'SAGE_DOC_SRC': '/home/release/Sage/src/doc', 'SAGE_PKGS': '/home/release/Sage/build/pkgs', 'SAGE_ROOT_GIT': '/home/release/Sage/.git', 'DOT_SAGE': '/home/release/.sage/', 'SAGE_STARTUP_FILE': '/home/release/.sage/init-doctests.sage', 'SAGE_ARCHFLAGS': 'unset', 'SAGE_PKG_CONFIG_PATH': '/home/release/Sage/local/lib/pkgconfig', 'CONWAY_POLYNOMIALS_DATA_DIR': '/home/release/Sage/local/share/conway_polynomials', 'GRAPHS_DATA_DIR': '/home/release/Sage/local/share/graphs', 'ELLCURVE_DATA_DIR': '/home/release/Sage/local/share/ellcurves', 'POLYTOPE_DATA_DIR': '/home/release/Sage/local/share/reflexive_polytopes', 'GAP_ROOT_DIR': '/home/release/Sage/local/share/gap', 'THEBE_DIR': '/home/release/Sage/local/share/thebe', 'COMBINATORIAL_DESIGN_DATA_DIR': '/home/release/Sage/local/share/combinatorial_designs', 'CREMONA_MINI_DATA_DIR': '/home/release/Sage/local/share/cremona', 'CREMONA_LARGE_DATA_DIR': '/home/release/Sage/local/share/cremona', 'JMOL_DIR': '/home/release/Sage/local/share/jmol', 'MATHJAX_DIR': '/home/release/Sage/local/share/mathjax', 'MTXLIB': '/home/release/Sage/local/share/meataxe', 'THREEJS_DIR': '/home/release/Sage/local/share/threejs-sage', 'PPLPY_DOCS': '/home/release/Sage/local/share/doc/pplpy', 'MAXIMA': '/home/release/Sage/local/bin/maxima', 'MAXIMA_FAS': '/home/release/Sage/local/lib/ecl/maxima.fas', 'KENZO_FAS': '/home/release/Sage/local/lib/ecl/kenzo.fas', 'SAGE_NAUTY_BINS_PREFIX': '', 'FOURTITWO_HILBERT': '', 'FOURTITWO_MARKOV': '', 'FOURTITWO_GRAVER': '', 'FOURTITWO_ZSOLVE': '', 'FOURTITWO_QSOLVE': '', 'FOURTITWO_RAYS': '', 'FOURTITWO_PPI': '', 'FOURTITWO_CIRCUITS': '', 'FOURTITWO_GROEBNER': '', 'ARB_LIBRARY': 'arb', 'CBLAS_PC_MODULES': 'cblas', 'ECL_CONFIG': '/home/release/Sage/local/bin/ecl-config', 'NTL_INCDIR': '', 'NTL_LIBDIR': '', 'LIE_INFO_DIR': '/home/release/Sage/local/lib/LiE', 'OPENMP_CFLAGS': '-fopenmp', 'OPENMP_CXXFLAGS': '-fopenmp', 'SAGE_BANNER': '', 'SAGE_IMPORTALL': 'yes', 'SINGULAR_SO': '/home/release/Sage/local/lib/libSingular-4.2.0.so', 'GAP_SO': '/home/release/Sage/local/lib/libgap.so.0.0.0'}: sage.all, sage.all_cmdline, sage.env, sage.features.four_ti_2, sage.repl.ipython_kernel.all_jupyter\n    from sage.env import SAGE_ENV\n**********************************************************************\n1 item had failures:\n   1 of  37 in sage.misc.dev_tools.import_statements\n    [60 tests, 1 failure, 0.22 s]\n----------------------------------------------------------------------\nsage -t --long --warn-long 43.6 --random-seed=0 src/sage/misc/dev_tools.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2021-07-25T20:26:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613096",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:45'></a>

```
sage -t --long --warn-long 43.6 --random-seed=0 src/sage/misc/dev_tools.py
**********************************************************************
File "src/sage/misc/dev_tools.py", line 487, in sage.misc.dev_tools.import_statements
Failed example:
    import_statements('SAGE_ENV')
Expected:
    from sage.env import SAGE_ENV
Got:
    # ** Warning **: several modules for the object {'UNAME': 'Linux', 'HOSTNAME': 'zen', 'LOCAL_IDENTIFIER': 'zen.1421426', 'SAGE_VERSION': '9.4.beta6', 'SAGE_DATE': '2021-07-24', 'SAGE_VERSION_BANNER': 'SageMath version 9.4.beta6, Release Date: 2021-07-24', 'SAGE_VENV': '/home/release/Sage/local', 'SAGE_LIB': '/home/release/Sage/local/lib64/python3.9/site-packages', 'SAGE_EXTCODE': '/home/release/Sage/local/lib64/python3.9/site-packages/sage/ext_data', 'SAGE_VENV_SPKG_INST': '/home/release/Sage/local/var/lib/sage/installed', 'SAGE_LOCAL': '/home/release/Sage/local', 'SAGE_SHARE': '/home/release/Sage/local/share', 'SAGE_DOC': '/home/release/Sage/local/share/doc/sage', 'SAGE_SPKG_INST': '/home/release/Sage/local/var/lib/sage/installed', 'SAGE_ROOT': '/home/release/Sage', 'SAGE_SRC': '/home/release/Sage/src', 'SAGE_DOC_SRC': '/home/release/Sage/src/doc', 'SAGE_PKGS': '/home/release/Sage/build/pkgs', 'SAGE_ROOT_GIT': '/home/release/Sage/.git', 'DOT_SAGE': '/home/release/.sage/', 'SAGE_STARTUP_FILE': '/home/release/.sage/init-doctests.sage', 'SAGE_ARCHFLAGS': 'unset', 'SAGE_PKG_CONFIG_PATH': '/home/release/Sage/local/lib/pkgconfig', 'CONWAY_POLYNOMIALS_DATA_DIR': '/home/release/Sage/local/share/conway_polynomials', 'GRAPHS_DATA_DIR': '/home/release/Sage/local/share/graphs', 'ELLCURVE_DATA_DIR': '/home/release/Sage/local/share/ellcurves', 'POLYTOPE_DATA_DIR': '/home/release/Sage/local/share/reflexive_polytopes', 'GAP_ROOT_DIR': '/home/release/Sage/local/share/gap', 'THEBE_DIR': '/home/release/Sage/local/share/thebe', 'COMBINATORIAL_DESIGN_DATA_DIR': '/home/release/Sage/local/share/combinatorial_designs', 'CREMONA_MINI_DATA_DIR': '/home/release/Sage/local/share/cremona', 'CREMONA_LARGE_DATA_DIR': '/home/release/Sage/local/share/cremona', 'JMOL_DIR': '/home/release/Sage/local/share/jmol', 'MATHJAX_DIR': '/home/release/Sage/local/share/mathjax', 'MTXLIB': '/home/release/Sage/local/share/meataxe', 'THREEJS_DIR': '/home/release/Sage/local/share/threejs-sage', 'PPLPY_DOCS': '/home/release/Sage/local/share/doc/pplpy', 'MAXIMA': '/home/release/Sage/local/bin/maxima', 'MAXIMA_FAS': '/home/release/Sage/local/lib/ecl/maxima.fas', 'KENZO_FAS': '/home/release/Sage/local/lib/ecl/kenzo.fas', 'SAGE_NAUTY_BINS_PREFIX': '', 'FOURTITWO_HILBERT': '', 'FOURTITWO_MARKOV': '', 'FOURTITWO_GRAVER': '', 'FOURTITWO_ZSOLVE': '', 'FOURTITWO_QSOLVE': '', 'FOURTITWO_RAYS': '', 'FOURTITWO_PPI': '', 'FOURTITWO_CIRCUITS': '', 'FOURTITWO_GROEBNER': '', 'ARB_LIBRARY': 'arb', 'CBLAS_PC_MODULES': 'cblas', 'ECL_CONFIG': '/home/release/Sage/local/bin/ecl-config', 'NTL_INCDIR': '', 'NTL_LIBDIR': '', 'LIE_INFO_DIR': '/home/release/Sage/local/lib/LiE', 'OPENMP_CFLAGS': '-fopenmp', 'OPENMP_CXXFLAGS': '-fopenmp', 'SAGE_BANNER': '', 'SAGE_IMPORTALL': 'yes', 'SINGULAR_SO': '/home/release/Sage/local/lib/libSingular-4.2.0.so', 'GAP_SO': '/home/release/Sage/local/lib/libgap.so.0.0.0'}: sage.all, sage.all_cmdline, sage.env, sage.features.four_ti_2, sage.repl.ipython_kernel.all_jupyter
    from sage.env import SAGE_ENV
**********************************************************************
1 item had failures:
   1 of  37 in sage.misc.dev_tools.import_statements
    [60 tests, 1 failure, 0.22 s]
----------------------------------------------------------------------
sage -t --long --warn-long 43.6 --random-seed=0 src/sage/misc/dev_tools.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_613097.json:
```json
{
    "body": "<a id='comment:46'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/646e182e65fc247d0d2da9aabcad5f892a471a89\">646e182</a></td><td><code>src/sage/features/four_ti_2.py: Move import of SAGE_ENV inside the __init__ method, to remove confusion of sage.misc.dev_tools</code></td></tr></table>\n",
    "created_at": "2021-07-25T20:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613097",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:46'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/646e182e65fc247d0d2da9aabcad5f892a471a89">646e182</a></td><td><code>src/sage/features/four_ti_2.py: Move import of SAGE_ENV inside the __init__ method, to remove confusion of sage.misc.dev_tools</code></td></tr></table>




---

archive/issue_comments_613098.json:
```json
{
    "body": "**Changing commit** from \"[d9d4f999789bcc5477cde60bb26af45dd6b31585](https://github.com/sagemath/sagetrac-mirror/commit/d9d4f999789bcc5477cde60bb26af45dd6b31585)\" to \"[646e182e65fc247d0d2da9aabcad5f892a471a89](https://github.com/sagemath/sagetrac-mirror/commit/646e182e65fc247d0d2da9aabcad5f892a471a89)\".",
    "created_at": "2021-07-25T20:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613098",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d9d4f999789bcc5477cde60bb26af45dd6b31585](https://github.com/sagemath/sagetrac-mirror/commit/d9d4f999789bcc5477cde60bb26af45dd6b31585)" to "[646e182e65fc247d0d2da9aabcad5f892a471a89](https://github.com/sagemath/sagetrac-mirror/commit/646e182e65fc247d0d2da9aabcad5f892a471a89)".



---

archive/issue_comments_613099.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2021-07-25T20:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613099",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_613100.json:
```json
{
    "body": "<a id='comment:47'></a>\nThanks, fixed.",
    "created_at": "2021-07-25T20:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613100",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>
Thanks, fixed.



---

archive/issue_events_090845.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30887#event-90845"
}
```



---

archive/issue_events_090846.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:07:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30887#event-90846"
}
```



---

archive/issue_comments_613101.json:
```json
{
    "body": "<a id='comment:49'></a>\nLet's get this in please.",
    "created_at": "2021-10-03T21:49:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613101",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>
Let's get this in please.



---

archive/issue_comments_613102.json:
```json
{
    "body": "<a id='comment:50'></a>\nAll good here with both distro packaging and building from source against system 4ti2",
    "created_at": "2021-10-04T20:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613102",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:50'></a>
All good here with both distro packaging and building from source against system 4ti2



---

archive/issue_comments_613103.json:
```json
{
    "body": "**Changing reviewer** from \"Dima Pasechnik\" to \"Dima Pasechnik, Antonio Rojas\".",
    "created_at": "2021-10-04T20:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613103",
    "user": "https://github.com/antonio-rojas"
}
```

**Changing reviewer** from "Dima Pasechnik" to "Dima Pasechnik, Antonio Rojas".



---

archive/issue_comments_613104.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-10-04T20:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613104",
    "user": "https://github.com/antonio-rojas"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_613105.json:
```json
{
    "body": "<a id='comment:51'></a>\nThank you!",
    "created_at": "2021-10-04T20:51:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613105",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>
Thank you!



---

archive/issue_comments_613106.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2021-10-10T10:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613106",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_090847.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-10T10:17:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30887#event-90847"
}
```



---

archive/issue_comments_613107.json:
```json
{
    "body": "**Changing branch** from \"[public/30887](https://github.com/sagemath/sagetrac-mirror/tree/public/30887)\" to \"[646e182e65fc247d0d2da9aabcad5f892a471a89](https://github.com/sagemath/sagetrac-mirror/commit/646e182e65fc247d0d2da9aabcad5f892a471a89)\".",
    "created_at": "2021-10-10T10:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30887",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30887#issuecomment-613107",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/30887](https://github.com/sagemath/sagetrac-mirror/tree/public/30887)" to "[646e182e65fc247d0d2da9aabcad5f892a471a89](https://github.com/sagemath/sagetrac-mirror/commit/646e182e65fc247d0d2da9aabcad5f892a471a89)".
