# Issue 30383: Add "configure --disable-notebook"; show descriptions of optional packages in "configure --help"

archive/issues_030146.json:
```json
{
    "body": "We refactor the code in `sage_spkg_enable.m4` and `sage_spkg_collect.m4` so that it becomes possible to add `configure --disable-SPKG` options to disable standard packages. This also simplifies `build/make/Makefile.in` slightly because it no longer has to make a distinction between standard and optional packages.\n\nWe demonstrate this by adding one such option, `configure --disable-notebook`, which disables building the Jupyter `notebook` package ... and all of its exclusive dependencies.  This is useful for people who want to use the system Jupyter notebook -- the Jupyter kernel is still built and can be installed there.\n\nThe new option appears before the `--enable...` options for optional packages.\n\nWe also make the configure help a bit more informative (by including the 1-line descriptions of the optional packages) and prettier.\n\n\n```\n$ ./configure --help\n...\nOptional Features:\n  --disable-option-checking  ignore unrecognized --enable/--with options\n  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n...\n  --enable-experimental-packages\n                          allow installing experimental packages (default: no\n                          = ask for user confirmation for each package)\n  --enable-download-from-upstream-url\n                          allow downloading packages from their upstream URL\n                          if they cannot be found on the Sage mirrors\n  --disable-notebook      disable build of the Jupyter notebook and related\n                          packages\n  --enable-4ti2={no|if_installed (default)|yes}\n                          enable build and use of the optional package 4ti2: Algebraic, geometric\n                          and combinatorial problems on linear spaces\n                          * package info: ./sage -info 4ti2\n  --disable-4ti2          disable build and uninstall if previously installed by Sage in PREFIX;\n                          same as --enable-4ti2=no\n  --enable-atlas={no|if_installed (default)|yes}\n                          enable build and use of the optional package atlas: Automatically Tuned\n                          Linear Algebra Software (BLAS implementation)\n                          * package info: ./sage -info atlas\n  --disable-atlas         disable build and uninstall if previously installed by Sage in PREFIX;\n                          same as --enable-atlas=no\n  --enable-awali={no|if_installed (default)|yes}\n                          enable build and use of the experimental package awali: Computation of/with\n                          finite state machines\n                          * package info: ./sage -info awali\n  --disable-awali         disable build and uninstall if previously installed by Sage in PREFIX;\n                          same as --enable-awali=no\n```\n\n\nThis is also preparation for #30556 (packages that will not work without openssl), and for testing modularized installs (#30778, #29864).\n\n\nCC:  @jhpalmieri @orlitzky @slel @seblabbe @dimpase @embray @kliem\n\nKeywords: sd111\n\nBranch/Commit: 4916415408a58e4b715143e5c607972822055790\n\nReviewer: John Palmieri, Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30383\n\n",
    "closed_at": "2021-03-20T15:27:50Z",
    "created_at": "2020-08-17T18:17:19Z",
    "labels": [
        "component: build",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Add \"configure --disable-notebook\"; show descriptions of optional packages in \"configure --help\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30383",
    "user": "https://github.com/mkoeppe"
}
```
We refactor the code in `sage_spkg_enable.m4` and `sage_spkg_collect.m4` so that it becomes possible to add `configure --disable-SPKG` options to disable standard packages. This also simplifies `build/make/Makefile.in` slightly because it no longer has to make a distinction between standard and optional packages.

We demonstrate this by adding one such option, `configure --disable-notebook`, which disables building the Jupyter `notebook` package ... and all of its exclusive dependencies.  This is useful for people who want to use the system Jupyter notebook -- the Jupyter kernel is still built and can be installed there.

The new option appears before the `--enable...` options for optional packages.

We also make the configure help a bit more informative (by including the 1-line descriptions of the optional packages) and prettier.


```
$ ./configure --help
...
Optional Features:
  --disable-option-checking  ignore unrecognized --enable/--with options
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
...
  --enable-experimental-packages
                          allow installing experimental packages (default: no
                          = ask for user confirmation for each package)
  --enable-download-from-upstream-url
                          allow downloading packages from their upstream URL
                          if they cannot be found on the Sage mirrors
  --disable-notebook      disable build of the Jupyter notebook and related
                          packages
  --enable-4ti2={no|if_installed (default)|yes}
                          enable build and use of the optional package 4ti2: Algebraic, geometric
                          and combinatorial problems on linear spaces
                          * package info: ./sage -info 4ti2
  --disable-4ti2          disable build and uninstall if previously installed by Sage in PREFIX;
                          same as --enable-4ti2=no
  --enable-atlas={no|if_installed (default)|yes}
                          enable build and use of the optional package atlas: Automatically Tuned
                          Linear Algebra Software (BLAS implementation)
                          * package info: ./sage -info atlas
  --disable-atlas         disable build and uninstall if previously installed by Sage in PREFIX;
                          same as --enable-atlas=no
  --enable-awali={no|if_installed (default)|yes}
                          enable build and use of the experimental package awali: Computation of/with
                          finite state machines
                          * package info: ./sage -info awali
  --disable-awali         disable build and uninstall if previously installed by Sage in PREFIX;
                          same as --enable-awali=no
```


This is also preparation for #30556 (packages that will not work without openssl), and for testing modularized installs (#30778, #29864).


CC:  @jhpalmieri @orlitzky @slel @seblabbe @dimpase @embray @kliem

Keywords: sd111

Branch/Commit: 4916415408a58e4b715143e5c607972822055790

Reviewer: John Palmieri, Dima Pasechnik

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30383





---

archive/issue_comments_458016.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -3,6 +3,10 @@\n Like \"standard\" packages, they would be included in the distribution built by `make dist`.\n \n Users can use `configure --disable-SPKG` to disable them.\n+\n+\n+\n+Needed for #30556\n \n Comment: 1\n \n```\n",
    "created_at": "2020-09-13T19:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458016",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -3,6 +3,10 @@
 Like "standard" packages, they would be included in the distribution built by `make dist`.
 
 Users can use `configure --disable-SPKG` to disable them.
+
+
+
+Needed for #30556
 
 Comment: 1
 
```




---

archive/issue_comments_458017.json:
```json
{
    "body": "<a id='comment:3'></a>Suggestions for a better name for this new package type are welcome",
    "created_at": "2020-09-13T19:59:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458017",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Suggestions for a better name for this new package type are welcome



---

archive/issue_comments_458018.json:
```json
{
    "body": "<a id='comment:4'></a>Alternatively, we could also make it possible to disable any standard package.",
    "created_at": "2020-09-14T23:09:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458018",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>Alternatively, we could also make it possible to disable any standard package.



---

archive/issue_comments_458019.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n+We add `configure --disable-SPKG` options to disable standard packages.  (They will still be installed if they appear as dependencies.)\n \n+\n+Needed for #30556\n \n Comment: 1\n \n```\n",
    "created_at": "2020-09-15T00:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458019",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,7 @@
+We add `configure --disable-SPKG` options to disable standard packages.  (They will still be installed if they appear as dependencies.)
 
+
+Needed for #30556
 
 Comment: 1
 
```




---

archive/issue_comments_458020.json:
```json
{
    "body": "<a id='comment:8'></a>New commits:",
    "created_at": "2020-09-15T00:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458020",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>New commits:



---

archive/issue_comments_458021.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-15T01:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458021",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_458022.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,47 @@\n+We add `configure --disable-SPKG` options to disable standard packages.  (They will still be installed if they appear as dependencies.)\n \n+`./configure --help` shows these options before the `--enable` options for optional/experimental packages; and the help string is deliberately brief.\n+\n+```\n+$ ./configure --help\n+...\n+Optional Features:\n+  --disable-option-checking  ignore unrecognized --enable/--with options\n+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n+  --enable-experimental-packages\n+                          allow installing experimental packages (default: no\n+                          = ask for user confirmation for each package)\n+  --enable-download-from-upstream-url\n+                          allow downloading packages from their upstream URL\n+                          if they cannot be found on the Sage mirrors\n+  --disable-alabaster     disable standard package alabaster\n+  --disable-appnope       disable standard package appnope\n+  --disable-arb           disable standard package arb\n+  --disable-attrs         disable standard package attrs\n+  --disable-babel         disable standard package babel\n+  --disable-backcall      disable standard package backcall\n+  ...\n+  --disable-zeromq        disable standard package zeromq\n+  --disable-zipp          disable standard package zipp\n+  --disable-zlib          disable standard package zlib\n+  --disable-zn_poly       disable standard package zn_poly\n+  --disable-zope_interface\n+                          disable standard package zope_interface\n+  --enable-4ti2={no|if_installed|yes}\n+                          enable build and use of the optional package 4ti2\n+                          (default: \"if_installed\")\n+                          package information: ./sage -info 4ti2\n+  --disable-4ti2          disable build and uninstall if previously installed\n+                          by Sage in PREFIX; same as --enable-4ti2=no\n+  --enable-atlas={no|if_installed|yes}\n+                          enable build and use of the optional package atlas\n+                          (default: \"if_installed\")\n+                          package information: ./sage -info atlas\n+```\n+\n+\n+Needed for #30556 (packages that will not work without openssl), and probably will be helpful for testing modularized installs (#29864)\n \n Comment: 1\n \n```\n",
    "created_at": "2020-09-15T21:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458022",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,47 @@
+We add `configure --disable-SPKG` options to disable standard packages.  (They will still be installed if they appear as dependencies.)
 
+`./configure --help` shows these options before the `--enable` options for optional/experimental packages; and the help string is deliberately brief.
+
+```
+$ ./configure --help
+...
+Optional Features:
+  --disable-option-checking  ignore unrecognized --enable/--with options
+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+  --enable-experimental-packages
+                          allow installing experimental packages (default: no
+                          = ask for user confirmation for each package)
+  --enable-download-from-upstream-url
+                          allow downloading packages from their upstream URL
+                          if they cannot be found on the Sage mirrors
+  --disable-alabaster     disable standard package alabaster
+  --disable-appnope       disable standard package appnope
+  --disable-arb           disable standard package arb
+  --disable-attrs         disable standard package attrs
+  --disable-babel         disable standard package babel
+  --disable-backcall      disable standard package backcall
+  ...
+  --disable-zeromq        disable standard package zeromq
+  --disable-zipp          disable standard package zipp
+  --disable-zlib          disable standard package zlib
+  --disable-zn_poly       disable standard package zn_poly
+  --disable-zope_interface
+                          disable standard package zope_interface
+  --enable-4ti2={no|if_installed|yes}
+                          enable build and use of the optional package 4ti2
+                          (default: "if_installed")
+                          package information: ./sage -info 4ti2
+  --disable-4ti2          disable build and uninstall if previously installed
+                          by Sage in PREFIX; same as --enable-4ti2=no
+  --enable-atlas={no|if_installed|yes}
+                          enable build and use of the optional package atlas
+                          (default: "if_installed")
+                          package information: ./sage -info atlas
+```
+
+
+Needed for #30556 (packages that will not work without openssl), and probably will be helpful for testing modularized installs (#29864)
 
 Comment: 1
 
```




---

archive/issue_comments_458023.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,48 @@\n+We add `configure --disable-SPKG` options to disable standard packages.  (They will still be installed if they appear as dependencies.)\n \n+`./configure --help` shows these options before the `--enable` options for optional/experimental packages; and the help string is deliberately brief.\n+\n+```\n+$ ./configure --help\n+...\n+Optional Features:\n+  --disable-option-checking  ignore unrecognized --enable/--with options\n+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n+...\n+  --enable-experimental-packages\n+                          allow installing experimental packages (default: no\n+                          = ask for user confirmation for each package)\n+  --enable-download-from-upstream-url\n+                          allow downloading packages from their upstream URL\n+                          if they cannot be found on the Sage mirrors\n+  --disable-alabaster     disable standard package alabaster\n+  --disable-appnope       disable standard package appnope\n+  --disable-arb           disable standard package arb\n+  --disable-attrs         disable standard package attrs\n+  --disable-babel         disable standard package babel\n+  --disable-backcall      disable standard package backcall\n+...\n+  --disable-zeromq        disable standard package zeromq\n+  --disable-zipp          disable standard package zipp\n+  --disable-zlib          disable standard package zlib\n+  --disable-zn_poly       disable standard package zn_poly\n+  --disable-zope_interface\n+                          disable standard package zope_interface\n+  --enable-4ti2={no|if_installed|yes}\n+                          enable build and use of the optional package 4ti2\n+                          (default: \"if_installed\")\n+                          package information: ./sage -info 4ti2\n+  --disable-4ti2          disable build and uninstall if previously installed\n+                          by Sage in PREFIX; same as --enable-4ti2=no\n+  --enable-atlas={no|if_installed|yes}\n+                          enable build and use of the optional package atlas\n+                          (default: \"if_installed\")\n+                          package information: ./sage -info atlas\n+```\n+\n+\n+Needed for #30556 (packages that will not work without openssl), and probably will be helpful for testing modularized installs (#29864)\n \n Comment: 1\n \n```\n",
    "created_at": "2020-09-15T21:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458023",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,48 @@
+We add `configure --disable-SPKG` options to disable standard packages.  (They will still be installed if they appear as dependencies.)
 
+`./configure --help` shows these options before the `--enable` options for optional/experimental packages; and the help string is deliberately brief.
+
+```
+$ ./configure --help
+...
+Optional Features:
+  --disable-option-checking  ignore unrecognized --enable/--with options
+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+...
+  --enable-experimental-packages
+                          allow installing experimental packages (default: no
+                          = ask for user confirmation for each package)
+  --enable-download-from-upstream-url
+                          allow downloading packages from their upstream URL
+                          if they cannot be found on the Sage mirrors
+  --disable-alabaster     disable standard package alabaster
+  --disable-appnope       disable standard package appnope
+  --disable-arb           disable standard package arb
+  --disable-attrs         disable standard package attrs
+  --disable-babel         disable standard package babel
+  --disable-backcall      disable standard package backcall
+...
+  --disable-zeromq        disable standard package zeromq
+  --disable-zipp          disable standard package zipp
+  --disable-zlib          disable standard package zlib
+  --disable-zn_poly       disable standard package zn_poly
+  --disable-zope_interface
+                          disable standard package zope_interface
+  --enable-4ti2={no|if_installed|yes}
+                          enable build and use of the optional package 4ti2
+                          (default: "if_installed")
+                          package information: ./sage -info 4ti2
+  --disable-4ti2          disable build and uninstall if previously installed
+                          by Sage in PREFIX; same as --enable-4ti2=no
+  --enable-atlas={no|if_installed|yes}
+                          enable build and use of the optional package atlas
+                          (default: "if_installed")
+                          package information: ./sage -info atlas
+```
+
+
+Needed for #30556 (packages that will not work without openssl), and probably will be helpful for testing modularized installs (#29864)
 
 Comment: 1
 
```




---

archive/issue_comments_458024.json:
```json
{
    "body": "<a id='comment:12'></a>Doesn't this create a bajillion ./configure options that basically do nothing (because the packages are dependencies), and another bajillion that cause sage to function improperly (test suite failures, etc.)?\n\nI think the original approach was more on-track, although I wouldn't have created a separate package type for it (we don't need to proliferate a new package type throughout the build system every time we tweak a bit of metadata). Instead I would have added an \"enabled by default\" (default: no) feature somewhere to the optional packages. Long-term, a way to control (and depend on) optional features is needed, but that's a much larger undertaking akin to USE flags in Gentoo.",
    "created_at": "2020-09-16T00:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458024",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:12'></a>Doesn't this create a bajillion ./configure options that basically do nothing (because the packages are dependencies), and another bajillion that cause sage to function improperly (test suite failures, etc.)?

I think the original approach was more on-track, although I wouldn't have created a separate package type for it (we don't need to proliferate a new package type throughout the build system every time we tweak a bit of metadata). Instead I would have added an "enabled by default" (default: no) feature somewhere to the optional packages. Long-term, a way to control (and depend on) optional features is needed, but that's a much larger undertaking akin to USE flags in Gentoo.



---

archive/issue_comments_458025.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 mjo]:\n> Doesn't this create a bajillion ./configure options that basically do nothing (because the packages are dependencies), and another bajillion that cause sage to function improperly (test suite failures, etc.)?\n\n\nYes, a gazillion of \"advanced options\"",
    "created_at": "2020-09-16T00:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458025",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Replying to [comment:12 mjo]:
> Doesn't this create a bajillion ./configure options that basically do nothing (because the packages are dependencies), and another bajillion that cause sage to function improperly (test suite failures, etc.)?


Yes, a gazillion of "advanced options"



---

archive/issue_comments_458026.json:
```json
{
    "body": "<a id='comment:14'></a>Most \"standard\" packages are not really required in any strict sense other than passing doctests that test particular features. Making it possible to disable them gives users a remedy when the build fails on a system",
    "created_at": "2020-09-16T00:59:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458026",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Most "standard" packages are not really required in any strict sense other than passing doctests that test particular features. Making it possible to disable them gives users a remedy when the build fails on a system



---

archive/issue_comments_458027.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458027",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_458028.json:
```json
{
    "body": "<a id='comment:15'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458028",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_458029.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-15T01:15:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458029",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458030.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-03-04T23:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458030",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_458031.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-04T23:09:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458031",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_458032.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-05T00:34:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458032",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458033.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-05T03:35:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458033",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458034.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-03-07T21:02:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458034",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_458035.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-03-08T18:47:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458035",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_458036.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,50 @@\n+We refactor the code in `sage_spkg_enable.m4` and `sage_spkg_collect.m4` so that it becomes possible to add `configure --disable-SPKG` options to disable standard packages. This also simplifies `build/make/Makefile.in` slightly because it no longer has to make a distinction between standard and optional packages.\n+\n+We demonstrate this by adding one such option, `configure --disable-notebook`, which disables building the Jupyter `notebook` package ... and all of its exclusive dependencies.  This is useful for people who want to use the system Jupyter notebook -- the Jupyter kernel is still built and can be installed there.\n+\n+The new option appears before the `--enable...` options for optional packages.\n+\n+We also make the configure help a bit more informative and prettier.\n+\n+\n+```\n+$ ./configure --help\n+...\n+Optional Features:\n+  --disable-option-checking  ignore unrecognized --enable/--with options\n+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n+...\n+  --enable-experimental-packages\n+                          allow installing experimental packages (default: no\n+                          = ask for user confirmation for each package)\n+  --enable-download-from-upstream-url\n+                          allow downloading packages from their upstream URL\n+                          if they cannot be found on the Sage mirrors\n+  --disable-notebook      disable build of the Jupyter notebook and related\n+                          packages\n+  --enable-4ti2={no|if_installed\u207d\u1d48\u1d49\u1da0\u1d43\u1d58\u02e1\u1d57\u207e|yes}\n+                          enable build and use of the optional package 4ti2: Algebraic, geometric\n+                          and combinatorial problems on linear spaces\n+                          * package info: ./sage -info 4ti2\n+  --disable-4ti2          disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-4ti2=no\n+  --enable-atlas={no|if_installed\u207d\u1d48\u1d49\u1da0\u1d43\u1d58\u02e1\u1d57\u207e|yes}\n+                          enable build and use of the optional package atlas: Automatically Tuned\n+                          Linear Algebra Software (BLAS implementation)\n+                          * package info: ./sage -info atlas\n+  --disable-atlas         disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-atlas=no\n+  --enable-awali={no|if_installed\u207d\u1d48\u1d49\u1da0\u1d43\u1d58\u02e1\u1d57\u207e|yes}\n+                          enable build and use of the experimental package awali: Computation of/with\n+                          finite state machines\n+                          * package info: ./sage -info awali\n+  --disable-awali         disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-awali=no\n+```\n+\n+\n+This is also preparation for #30556 (packages that will not work without openssl), and for testing modularized installs (#30778, #29864).\n \n \n Comment: 1\n```\n",
    "created_at": "2021-03-08T19:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458036",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,50 @@
+We refactor the code in `sage_spkg_enable.m4` and `sage_spkg_collect.m4` so that it becomes possible to add `configure --disable-SPKG` options to disable standard packages. This also simplifies `build/make/Makefile.in` slightly because it no longer has to make a distinction between standard and optional packages.
+
+We demonstrate this by adding one such option, `configure --disable-notebook`, which disables building the Jupyter `notebook` package ... and all of its exclusive dependencies.  This is useful for people who want to use the system Jupyter notebook -- the Jupyter kernel is still built and can be installed there.
+
+The new option appears before the `--enable...` options for optional packages.
+
+We also make the configure help a bit more informative and prettier.
+
+
+```
+$ ./configure --help
+...
+Optional Features:
+  --disable-option-checking  ignore unrecognized --enable/--with options
+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+...
+  --enable-experimental-packages
+                          allow installing experimental packages (default: no
+                          = ask for user confirmation for each package)
+  --enable-download-from-upstream-url
+                          allow downloading packages from their upstream URL
+                          if they cannot be found on the Sage mirrors
+  --disable-notebook      disable build of the Jupyter notebook and related
+                          packages
+  --enable-4ti2={no|if_installed⁽ᵈᵉᶠᵃᵘˡᵗ⁾|yes}
+                          enable build and use of the optional package 4ti2: Algebraic, geometric
+                          and combinatorial problems on linear spaces
+                          * package info: ./sage -info 4ti2
+  --disable-4ti2          disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-4ti2=no
+  --enable-atlas={no|if_installed⁽ᵈᵉᶠᵃᵘˡᵗ⁾|yes}
+                          enable build and use of the optional package atlas: Automatically Tuned
+                          Linear Algebra Software (BLAS implementation)
+                          * package info: ./sage -info atlas
+  --disable-atlas         disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-atlas=no
+  --enable-awali={no|if_installed⁽ᵈᵉᶠᵃᵘˡᵗ⁾|yes}
+                          enable build and use of the experimental package awali: Computation of/with
+                          finite state machines
+                          * package info: ./sage -info awali
+  --disable-awali         disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-awali=no
+```
+
+
+This is also preparation for #30556 (packages that will not work without openssl), and for testing modularized installs (#30778, #29864).
 
 
 Comment: 1
```




---

archive/issue_comments_458037.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-08T19:10:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458037",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_458038.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-08T19:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458038",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458039.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-08T19:13:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458039",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_458040.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-08T19:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458040",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458041.json:
```json
{
    "body": "<a id='comment:29'></a>This version of the ticket no longer offers `--disable...` options for all standard packages, which was criticized previously.",
    "created_at": "2021-03-08T19:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458041",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>This version of the ticket no longer offers `--disable...` options for all standard packages, which was criticized previously.



---

archive/issue_comments_458042.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-08T19:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458042",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_458043.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,50 @@\n+We refactor the code in `sage_spkg_enable.m4` and `sage_spkg_collect.m4` so that it becomes possible to add `configure --disable-SPKG` options to disable standard packages. This also simplifies `build/make/Makefile.in` slightly because it no longer has to make a distinction between standard and optional packages.\n+\n+We demonstrate this by adding one such option, `configure --disable-notebook`, which disables building the Jupyter `notebook` package ... and all of its exclusive dependencies.  This is useful for people who want to use the system Jupyter notebook -- the Jupyter kernel is still built and can be installed there.\n+\n+The new option appears before the `--enable...` options for optional packages.\n+\n+We also make the configure help a bit more informative (by including the 1-line descriptions of the optional packages) and prettier.\n+\n+\n+```\n+$ ./configure --help\n+...\n+Optional Features:\n+  --disable-option-checking  ignore unrecognized --enable/--with options\n+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n+...\n+  --enable-experimental-packages\n+                          allow installing experimental packages (default: no\n+                          = ask for user confirmation for each package)\n+  --enable-download-from-upstream-url\n+                          allow downloading packages from their upstream URL\n+                          if they cannot be found on the Sage mirrors\n+  --disable-notebook      disable build of the Jupyter notebook and related\n+                          packages\n+  --enable-4ti2={no|if_installed\u207d\u1d48\u1d49\u1da0\u1d43\u1d58\u02e1\u1d57\u207e|yes}\n+                          enable build and use of the optional package 4ti2: Algebraic, geometric\n+                          and combinatorial problems on linear spaces\n+                          * package info: ./sage -info 4ti2\n+  --disable-4ti2          disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-4ti2=no\n+  --enable-atlas={no|if_installed\u207d\u1d48\u1d49\u1da0\u1d43\u1d58\u02e1\u1d57\u207e|yes}\n+                          enable build and use of the optional package atlas: Automatically Tuned\n+                          Linear Algebra Software (BLAS implementation)\n+                          * package info: ./sage -info atlas\n+  --disable-atlas         disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-atlas=no\n+  --enable-awali={no|if_installed\u207d\u1d48\u1d49\u1da0\u1d43\u1d58\u02e1\u1d57\u207e|yes}\n+                          enable build and use of the experimental package awali: Computation of/with\n+                          finite state machines\n+                          * package info: ./sage -info awali\n+  --disable-awali         disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-awali=no\n+```\n+\n+\n+This is also preparation for #30556 (packages that will not work without openssl), and for testing modularized installs (#30778, #29864).\n \n \n Comment: 1\n```\n",
    "created_at": "2021-03-08T19:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458043",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,50 @@
+We refactor the code in `sage_spkg_enable.m4` and `sage_spkg_collect.m4` so that it becomes possible to add `configure --disable-SPKG` options to disable standard packages. This also simplifies `build/make/Makefile.in` slightly because it no longer has to make a distinction between standard and optional packages.
+
+We demonstrate this by adding one such option, `configure --disable-notebook`, which disables building the Jupyter `notebook` package ... and all of its exclusive dependencies.  This is useful for people who want to use the system Jupyter notebook -- the Jupyter kernel is still built and can be installed there.
+
+The new option appears before the `--enable...` options for optional packages.
+
+We also make the configure help a bit more informative (by including the 1-line descriptions of the optional packages) and prettier.
+
+
+```
+$ ./configure --help
+...
+Optional Features:
+  --disable-option-checking  ignore unrecognized --enable/--with options
+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+...
+  --enable-experimental-packages
+                          allow installing experimental packages (default: no
+                          = ask for user confirmation for each package)
+  --enable-download-from-upstream-url
+                          allow downloading packages from their upstream URL
+                          if they cannot be found on the Sage mirrors
+  --disable-notebook      disable build of the Jupyter notebook and related
+                          packages
+  --enable-4ti2={no|if_installed⁽ᵈᵉᶠᵃᵘˡᵗ⁾|yes}
+                          enable build and use of the optional package 4ti2: Algebraic, geometric
+                          and combinatorial problems on linear spaces
+                          * package info: ./sage -info 4ti2
+  --disable-4ti2          disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-4ti2=no
+  --enable-atlas={no|if_installed⁽ᵈᵉᶠᵃᵘˡᵗ⁾|yes}
+                          enable build and use of the optional package atlas: Automatically Tuned
+                          Linear Algebra Software (BLAS implementation)
+                          * package info: ./sage -info atlas
+  --disable-atlas         disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-atlas=no
+  --enable-awali={no|if_installed⁽ᵈᵉᶠᵃᵘˡᵗ⁾|yes}
+                          enable build and use of the experimental package awali: Computation of/with
+                          finite state machines
+                          * package info: ./sage -info awali
+  --disable-awali         disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-awali=no
+```
+
+
+This is also preparation for #30556 (packages that will not work without openssl), and for testing modularized installs (#30778, #29864).
 
 
 Comment: 1
```




---

archive/issue_comments_458044.json:
```json
{
    "body": "<a id='comment:31'></a>Why the change to `matplotlib` dependencies? Also the change in line 66 of `m4/sage_spkg_configure.m4` renders very strangely (strange font for \"default\") when I click  on the branch [here for example](https://git.sagemath.org/sage.git/diff/m4/sage_spkg_configure.m4?id=4542f019b39fc0c582c88dd1d89bb46a0b199a84) or view the diff on my computer. Any ideas what that's about?",
    "created_at": "2021-03-10T21:28:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458044",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'></a>Why the change to `matplotlib` dependencies? Also the change in line 66 of `m4/sage_spkg_configure.m4` renders very strangely (strange font for "default") when I click  on the branch [here for example](https://git.sagemath.org/sage.git/diff/m4/sage_spkg_configure.m4?id=4542f019b39fc0c582c88dd1d89bb46a0b199a84) or view the diff on my computer. Any ideas what that's about?



---

archive/issue_comments_458045.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-10T21:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458046.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:31 jhpalmieri]:\n> Why the change to `matplotlib` dependencies? \n\n\nThanks for catching this - I had thought I could get rid of `tornado` at some point but `jupyterlab_widgets` also needs it as a dependency, so that wouldn't help.",
    "created_at": "2021-03-10T21:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458046",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>Replying to [comment:31 jhpalmieri]:
> Why the change to `matplotlib` dependencies? 


Thanks for catching this - I had thought I could get rid of `tornado` at some point but `jupyterlab_widgets` also needs it as a dependency, so that wouldn't help.



---

archive/issue_comments_458047.json:
```json
{
    "body": "<a id='comment:34'></a>Replying to [comment:31 jhpalmieri]:\n> the change in line 66 of `m4/sage_spkg_configure.m4` renders very strangely (strange font for \"default\") when I click  on the branch [here for example](https://git.sagemath.org/sage.git/diff/m4/sage_spkg_configure.m4?id=4542f019b39fc0c582c88dd1d89bb46a0b199a84) or view the diff on my computer. Any ideas what that's about?\n\n\nSorry, I was playing with Unicode superscripts. If it does not render nice, I can just go back to using ascii",
    "created_at": "2021-03-10T21:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458047",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Replying to [comment:31 jhpalmieri]:
> the change in line 66 of `m4/sage_spkg_configure.m4` renders very strangely (strange font for "default") when I click  on the branch [here for example](https://git.sagemath.org/sage.git/diff/m4/sage_spkg_configure.m4?id=4542f019b39fc0c582c88dd1d89bb46a0b199a84) or view the diff on my computer. Any ideas what that's about?


Sorry, I was playing with Unicode superscripts. If it does not render nice, I can just go back to using ascii



---

archive/issue_comments_458048.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-10T21:50:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458048",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458049.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,50 @@\n+We refactor the code in `sage_spkg_enable.m4` and `sage_spkg_collect.m4` so that it becomes possible to add `configure --disable-SPKG` options to disable standard packages. This also simplifies `build/make/Makefile.in` slightly because it no longer has to make a distinction between standard and optional packages.\n+\n+We demonstrate this by adding one such option, `configure --disable-notebook`, which disables building the Jupyter `notebook` package ... and all of its exclusive dependencies.  This is useful for people who want to use the system Jupyter notebook -- the Jupyter kernel is still built and can be installed there.\n+\n+The new option appears before the `--enable...` options for optional packages.\n+\n+We also make the configure help a bit more informative (by including the 1-line descriptions of the optional packages) and prettier.\n+\n+\n+```\n+$ ./configure --help\n+...\n+Optional Features:\n+  --disable-option-checking  ignore unrecognized --enable/--with options\n+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n+...\n+  --enable-experimental-packages\n+                          allow installing experimental packages (default: no\n+                          = ask for user confirmation for each package)\n+  --enable-download-from-upstream-url\n+                          allow downloading packages from their upstream URL\n+                          if they cannot be found on the Sage mirrors\n+  --disable-notebook      disable build of the Jupyter notebook and related\n+                          packages\n+  --enable-4ti2={no|if_installed (default)|yes}\n+                          enable build and use of the optional package 4ti2: Algebraic, geometric\n+                          and combinatorial problems on linear spaces\n+                          * package info: ./sage -info 4ti2\n+  --disable-4ti2          disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-4ti2=no\n+  --enable-atlas={no|if_installed (default)|yes}\n+                          enable build and use of the optional package atlas: Automatically Tuned\n+                          Linear Algebra Software (BLAS implementation)\n+                          * package info: ./sage -info atlas\n+  --disable-atlas         disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-atlas=no\n+  --enable-awali={no|if_installed (default)|yes}\n+                          enable build and use of the experimental package awali: Computation of/with\n+                          finite state machines\n+                          * package info: ./sage -info awali\n+  --disable-awali         disable build and uninstall if previously installed by Sage in PREFIX;\n+                          same as --enable-awali=no\n+```\n+\n+\n+This is also preparation for #30556 (packages that will not work without openssl), and for testing modularized installs (#30778, #29864).\n \n \n Comment: 1\n```\n",
    "created_at": "2021-03-10T21:51:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458049",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,50 @@
+We refactor the code in `sage_spkg_enable.m4` and `sage_spkg_collect.m4` so that it becomes possible to add `configure --disable-SPKG` options to disable standard packages. This also simplifies `build/make/Makefile.in` slightly because it no longer has to make a distinction between standard and optional packages.
+
+We demonstrate this by adding one such option, `configure --disable-notebook`, which disables building the Jupyter `notebook` package ... and all of its exclusive dependencies.  This is useful for people who want to use the system Jupyter notebook -- the Jupyter kernel is still built and can be installed there.
+
+The new option appears before the `--enable...` options for optional packages.
+
+We also make the configure help a bit more informative (by including the 1-line descriptions of the optional packages) and prettier.
+
+
+```
+$ ./configure --help
+...
+Optional Features:
+  --disable-option-checking  ignore unrecognized --enable/--with options
+  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
+  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
+...
+  --enable-experimental-packages
+                          allow installing experimental packages (default: no
+                          = ask for user confirmation for each package)
+  --enable-download-from-upstream-url
+                          allow downloading packages from their upstream URL
+                          if they cannot be found on the Sage mirrors
+  --disable-notebook      disable build of the Jupyter notebook and related
+                          packages
+  --enable-4ti2={no|if_installed (default)|yes}
+                          enable build and use of the optional package 4ti2: Algebraic, geometric
+                          and combinatorial problems on linear spaces
+                          * package info: ./sage -info 4ti2
+  --disable-4ti2          disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-4ti2=no
+  --enable-atlas={no|if_installed (default)|yes}
+                          enable build and use of the optional package atlas: Automatically Tuned
+                          Linear Algebra Software (BLAS implementation)
+                          * package info: ./sage -info atlas
+  --disable-atlas         disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-atlas=no
+  --enable-awali={no|if_installed (default)|yes}
+                          enable build and use of the experimental package awali: Computation of/with
+                          finite state machines
+                          * package info: ./sage -info awali
+  --disable-awali         disable build and uninstall if previously installed by Sage in PREFIX;
+                          same as --enable-awali=no
+```
+
+
+This is also preparation for #30556 (packages that will not work without openssl), and for testing modularized installs (#30778, #29864).
 
 
 Comment: 1
```




---

archive/issue_comments_458050.json:
```json
{
    "body": "<a id='comment:37'></a>Typo in the comments? In `m4/sage_spkg_collect.m4`, the descriptions for `SAGE_OPTIONAL_INSTALLED_PACKAGES` and `SAGE_OPTIONAL_CLEANED_PACKAGES` are the same. Should `installed` be changed to `uninstalled` as the last word in the description for the `CLEANED` version?\n\nConfiguring with `--disable-notebook` does indeed disable the notebook, as advertised. Sage builds, and so does the documentation. I was a little surprised that all doctests passed, too.\n\nI don't know the syntax well enough to be able to thoroughly review this, unfortunately. Anyone else?",
    "created_at": "2021-03-11T22:25:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458050",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:37'></a>Typo in the comments? In `m4/sage_spkg_collect.m4`, the descriptions for `SAGE_OPTIONAL_INSTALLED_PACKAGES` and `SAGE_OPTIONAL_CLEANED_PACKAGES` are the same. Should `installed` be changed to `uninstalled` as the last word in the description for the `CLEANED` version?

Configuring with `--disable-notebook` does indeed disable the notebook, as advertised. Sage builds, and so does the documentation. I was a little surprised that all doctests passed, too.

I don't know the syntax well enough to be able to thoroughly review this, unfortunately. Anyone else?



---

archive/issue_comments_458051.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-11T22:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458051",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458052.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:37 jhpalmieri]:\n> Configuring with `--disable-notebook` does indeed disable the notebook, as advertised. Sage builds, and so does the documentation. I was a little surprised that all doctests passed, too.\n\n\nThis is, in fact, a weakness in our doctest coverage. We have nothing at all that tests whether the Jupyter notebook works.",
    "created_at": "2021-03-11T22:29:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458052",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>Replying to [comment:37 jhpalmieri]:
> Configuring with `--disable-notebook` does indeed disable the notebook, as advertised. Sage builds, and so does the documentation. I was a little surprised that all doctests passed, too.


This is, in fact, a weakness in our doctest coverage. We have nothing at all that tests whether the Jupyter notebook works.



---

archive/issue_comments_458053.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-11T22:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458053",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458054.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-15T00:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458054",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_458055.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2021-03-15T00:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458055",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_458056.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:39 mkoeppe]:\n> Replying to [comment:37 jhpalmieri]:\n> > Configuring with `--disable-notebook` does indeed disable the notebook, as advertised. Sage builds, and so does the documentation. I was a little surprised that all doctests passed, too.\n\n> \n> This is, in fact, a weakness in our doctest coverage. We have nothing at all that tests whether the Jupyter notebook works. \n\n\nMaybe related to the fact that you can't start the notebook once you are running Sage from the command line? With SageNB you could run `notebook()` from within Sage, but this is not possible any more, or at least not in an obvious way, or maybe it just hasn't been implemented by us.",
    "created_at": "2021-03-17T03:39:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458056",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:46'></a>Replying to [comment:39 mkoeppe]:
> Replying to [comment:37 jhpalmieri]:
> > Configuring with `--disable-notebook` does indeed disable the notebook, as advertised. Sage builds, and so does the documentation. I was a little surprised that all doctests passed, too.

> 
> This is, in fact, a weakness in our doctest coverage. We have nothing at all that tests whether the Jupyter notebook works. 


Maybe related to the fact that you can't start the notebook once you are running Sage from the command line? With SageNB you could run `notebook()` from within Sage, but this is not possible any more, or at least not in an obvious way, or maybe it just hasn't been implemented by us.



---

archive/issue_comments_458057.json:
```json
{
    "body": "<a id='comment:47'></a>I think it's just that nobody has worked on writing such tests. I guess there must be technologies for automatically testing web apps but I don't know about them or if Jupyter already uses them.",
    "created_at": "2021-03-17T04:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458057",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:47'></a>I think it's just that nobody has worked on writing such tests. I guess there must be technologies for automatically testing web apps but I don't know about them or if Jupyter already uses them.



---

archive/issue_comments_458058.json:
```json
{
    "body": "<a id='comment:48'></a>Replying to [comment:46 jhpalmieri]:\n> With SageNB you could run `notebook()` from within Sage, but this is not possible any more, or at least not in an obvious way\n\n\nThis is certainly a feature that I certainly could have used if it was available. Transforming an existing Python process to a Jupyter kernel just amounts to running `sage.repl.ipython_kernel.__main__`, I think.  But to my understanding no feature in the Jupyter notebook allows to connect to an existing running kernel.  I found some discussions in this direction, for example https://github.com/jupyter/help/issues/298, https://github.com/ipython/ipython/issues/4066",
    "created_at": "2021-03-17T04:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458058",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:48'></a>Replying to [comment:46 jhpalmieri]:
> With SageNB you could run `notebook()` from within Sage, but this is not possible any more, or at least not in an obvious way


This is certainly a feature that I certainly could have used if it was available. Transforming an existing Python process to a Jupyter kernel just amounts to running `sage.repl.ipython_kernel.__main__`, I think.  But to my understanding no feature in the Jupyter notebook allows to connect to an existing running kernel.  I found some discussions in this direction, for example https://github.com/jupyter/help/issues/298, https://github.com/ipython/ipython/issues/4066



---

archive/issue_comments_458059.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-03-17T10:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458059",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_458060.json:
```json
{
    "body": "<a id='comment:49'></a>this looks good to go.",
    "created_at": "2021-03-17T10:26:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458060",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:49'></a>this looks good to go.



---

archive/issue_comments_458061.json:
```json
{
    "body": "<a id='comment:50'></a>Thanks!",
    "created_at": "2021-03-17T14:37:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458061",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:50'></a>Thanks!



---

archive/issue_comments_458062.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-03-20T15:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30383#issuecomment-458062",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_078745.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-20T15:27:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30383",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30383#event-78745"
}
```
