# Issue 30010: Split sage_setup.docbuild out to a separate distribution sage_docbuild

archive/issues_029773.json:
```json
{
    "body": "`sage_setup.docbuild`, created in #19127, has very different dependencies compared to `sage_setup`:\n\nIt depends on `sagelib` and `sphinx`, \nwhereas the rest of `sage_setup` is for building `sagelib`.\n\nWe remove the nesting within `sage_setup`, creating a new top-level package `sage_docbuild`.\n\nWe split it out as a separate pip-installable distribution package `sage_docbuild`.  \n\nUsing the `spkg-src` script, a pip-installable tarball can be generated, which could be uploaded to PyPI -- for the use by external packages that want to build documentation.\n\nThis is preparation for #29868 (pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf)\n\n\n\nDepends on #31344\n\nDepends on #31353\n\n**CC:**  @kiwifb @jhpalmieri @isuruf @mwageringel @haraldschilly @mezzarobba\n\n**Keywords:** sd111\n\n**Branch/Commit:** [aaab1d3713d1bd2afb922466a086f8e85849a02d](https://github.com/sagemath/sagetrac-mirror/commit/aaab1d3713d1bd2afb922466a086f8e85849a02d)\n\n**Reviewer:** John Palmieri\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/30010\n\n",
    "closed_at": "2021-03-09T00:00:35Z",
    "created_at": "2020-06-28T16:16:39Z",
    "labels": [
        "component: refactoring",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "title": "Split sage_setup.docbuild out to a separate distribution sage_docbuild",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/30010",
    "user": "https://github.com/mkoeppe"
}
```
`sage_setup.docbuild`, created in #19127, has very different dependencies compared to `sage_setup`:

It depends on `sagelib` and `sphinx`, 
whereas the rest of `sage_setup` is for building `sagelib`.

We remove the nesting within `sage_setup`, creating a new top-level package `sage_docbuild`.

We split it out as a separate pip-installable distribution package `sage_docbuild`.  

Using the `spkg-src` script, a pip-installable tarball can be generated, which could be uploaded to PyPI -- for the use by external packages that want to build documentation.

This is preparation for #29868 (pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf)



Depends on #31344

Depends on #31353

**CC:**  @kiwifb @jhpalmieri @isuruf @mwageringel @haraldschilly @mezzarobba

**Keywords:** sd111

**Branch/Commit:** [aaab1d3713d1bd2afb922466a086f8e85849a02d](https://github.com/sagemath/sagetrac-mirror/commit/aaab1d3713d1bd2afb922466a086f8e85849a02d)

**Reviewer:** John Palmieri

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/30010





---

archive/issue_comments_477678.json:
```json
{
    "body": "**Dependencies:** #29847",
    "created_at": "2020-06-28T16:24:34Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477678",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #29847



---

archive/issue_comments_477679.json:
```json
{
    "body": "**Changing dependencies** from \"#29847\" to \"\".",
    "created_at": "2020-07-13T19:42:22Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477679",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29847" to "".



---

archive/issue_comments_477680.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,5 +3,7 @@\n It depends on `sagelib` and `sphinx`, \n whereas the rest of `sage_setup` is for building `sagelib`.\n \n-We split it out.\n+We split it out as a separate distutils package `sage_setup-docbuild`.\n \n+Because some external packages use `sage_setup.docbuild` to build their own documentation, we do not change the package hierarchy. Instead we turn `sage_setup` into a native namespace package.\n+\n``````\n",
    "created_at": "2020-07-13T19:51:01Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477680",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,5 +3,7 @@
 It depends on `sagelib` and `sphinx`, 
 whereas the rest of `sage_setup` is for building `sagelib`.
 
-We split it out.
+We split it out as a separate distutils package `sage_setup-docbuild`.
 
+Because some external packages use `sage_setup.docbuild` to build their own documentation, we do not change the package hierarchy. Instead we turn `sage_setup` into a native namespace package.
+
``````




---

archive/issue_events_267992.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-13T19:51:01Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "rename": {
        "from": "Split sage_setup.docbuild out to a separate package",
        "to": "Split sage_setup.docbuild out to a separate distribution (distutils package)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-267992"
}
```



---

archive/issue_comments_477681.json:
```json
{
    "body": "**Dependencies:** #29950",
    "created_at": "2020-07-13T19:53:14Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477681",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #29950



---

archive/issue_comments_477682.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n It depends on `sagelib` and `sphinx`, \n whereas the rest of `sage_setup` is for building `sagelib`.\n \n-We split it out as a separate distutils package `sage_setup-docbuild`.\n+We split it out as a separate distutils package `sage_setup.docbuild`.\n \n Because some external packages use `sage_setup.docbuild` to build their own documentation, we do not change the package hierarchy. Instead we turn `sage_setup` into a native namespace package.\n \n``````\n",
    "created_at": "2020-07-13T20:40:40Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477682",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 It depends on `sagelib` and `sphinx`, 
 whereas the rest of `sage_setup` is for building `sagelib`.
 
-We split it out as a separate distutils package `sage_setup-docbuild`.
+We split it out as a separate distutils package `sage_setup.docbuild`.
 
 Because some external packages use `sage_setup.docbuild` to build their own documentation, we do not change the package hierarchy. Instead we turn `sage_setup` into a native namespace package.
 
``````




---

archive/issue_comments_477683.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)",
    "created_at": "2020-07-13T21:32:16Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477683",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)



---

archive/issue_comments_477684.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b8e366ec56a9d3527c81df9d8d4206afc2562be4\">b8e366e</a></td><td><code>build/pkgs/sagelib/spkg-src: chmod +x</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0473ef3670f0a39c7d0141c09b9e9fc738d3d0b2\">0473ef3</a></td><td><code>Merge branch 't/21559/change-src-bin-installation' into t/29950/build_sagelib_using_installed_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9\">06a3609</a></td><td><code>sage_setup.find.find_python_sources: Add benchmark doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/174626c7f81e7b9417bbad49fd110144a07165a6\">174626c</a></td><td><code>Merge branch 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825\">034a7f7</a></td><td><code>Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8\">d3c608b</a></td><td><code>Merge tag '9.2.beta3' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72443711047daa51d1ba92b087ec9022b2eeef06\">7244371</a></td><td><code>Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4344f8940fc44d959da5d20dbea43b64181b961f\">4344f89</a></td><td><code>Merge branch 't/21559/change-src-bin-installation' into t/29950/build_sagelib_using_installed_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72c50400438e4ef24c483245830f44067829805e\">72c5040</a></td><td><code>Merge branch 't/29950/build_sagelib_using_installed_sage_setup' into t/30010/split_sage_setup_docbuild_out_to_a_separate_package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce799549f0335c64a159d273136fc0233cd53e04\">ce79954</a></td><td><code>build/pkgs/sage_setup_docbuild: New</code></td></tr></table>\n",
    "created_at": "2020-07-13T21:33:46Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477684",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b8e366ec56a9d3527c81df9d8d4206afc2562be4">b8e366e</a></td><td><code>build/pkgs/sagelib/spkg-src: chmod +x</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0473ef3670f0a39c7d0141c09b9e9fc738d3d0b2">0473ef3</a></td><td><code>Merge branch 't/21559/change-src-bin-installation' into t/29950/build_sagelib_using_installed_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06a360974cc56699a85f291494a493fed041dbc9">06a3609</a></td><td><code>sage_setup.find.find_python_sources: Add benchmark doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/174626c7f81e7b9417bbad49fd110144a07165a6">174626c</a></td><td><code>Merge branch 't/29786/move_extension_options_from_src_module_list_py_to__distutils___directives_in_the_individual_files__part_4__sage_rings_' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/034a7f71a52fffc9a6566bda3e63abccdb5d6825">034a7f7</a></td><td><code>Merge branch 'public/move_all_code_from_src_setup_py__src_fpickle_setup_py_to_sage_setup' of git://trac.sagemath.org/sage into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3c608b0d59077ef2ec58d32a5da0dccdbcddfd8">d3c608b</a></td><td><code>Merge tag '9.2.beta3' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72443711047daa51d1ba92b087ec9022b2eeef06">7244371</a></td><td><code>Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4344f8940fc44d959da5d20dbea43b64181b961f">4344f89</a></td><td><code>Merge branch 't/21559/change-src-bin-installation' into t/29950/build_sagelib_using_installed_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72c50400438e4ef24c483245830f44067829805e">72c5040</a></td><td><code>Merge branch 't/29950/build_sagelib_using_installed_sage_setup' into t/30010/split_sage_setup_docbuild_out_to_a_separate_package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce799549f0335c64a159d273136fc0233cd53e04">ce79954</a></td><td><code>build/pkgs/sage_setup_docbuild: New</code></td></tr></table>




---

archive/issue_comments_477685.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-07-13T21:33:46Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477685",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_477686.json:
```json
{
    "body": "**Commit:** [ce799549f0335c64a159d273136fc0233cd53e04](https://github.com/sagemath/sagetrac-mirror/commit/ce799549f0335c64a159d273136fc0233cd53e04)",
    "created_at": "2020-07-13T21:33:46Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477686",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [ce799549f0335c64a159d273136fc0233cd53e04](https://github.com/sagemath/sagetrac-mirror/commit/ce799549f0335c64a159d273136fc0233cd53e04)



---

archive/issue_events_267993.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-14T00:06:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-267993"
}
```



---

archive/issue_comments_477687.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,7 +3,10 @@\n It depends on `sagelib` and `sphinx`, \n whereas the rest of `sage_setup` is for building `sagelib`.\n \n-We split it out as a separate distutils package `sage_setup.docbuild`.\n+We split it out as a separate distutils package `sage_setup.docbuild`.  \n \n Because some external packages use `sage_setup.docbuild` to build their own documentation, we do not change the package hierarchy. Instead we turn `sage_setup` into a native namespace package.\n \n+\n+Using the `spkg-src` script, a pip-installable tarball can be generated, which could be uploaded to PyPI -- for the use by external packages that want to build documentation.\n+\n``````\n",
    "created_at": "2020-07-14T02:01:47Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477687",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,7 +3,10 @@
 It depends on `sagelib` and `sphinx`, 
 whereas the rest of `sage_setup` is for building `sagelib`.
 
-We split it out as a separate distutils package `sage_setup.docbuild`.
+We split it out as a separate distutils package `sage_setup.docbuild`.  
 
 Because some external packages use `sage_setup.docbuild` to build their own documentation, we do not change the package hierarchy. Instead we turn `sage_setup` into a native namespace package.
 
+
+Using the `spkg-src` script, a pip-installable tarball can be generated, which could be uploaded to PyPI -- for the use by external packages that want to build documentation.
+
``````




---

archive/issue_comments_477688.json:
```json
{
    "body": "**Changing commit** from \"[ce799549f0335c64a159d273136fc0233cd53e04](https://github.com/sagemath/sagetrac-mirror/commit/ce799549f0335c64a159d273136fc0233cd53e04)\" to \"[e6b5f7563bf65a38281dc58eaa27b1ba70303d36](https://github.com/sagemath/sagetrac-mirror/commit/e6b5f7563bf65a38281dc58eaa27b1ba70303d36)\".",
    "created_at": "2020-07-15T18:55:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477688",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ce799549f0335c64a159d273136fc0233cd53e04](https://github.com/sagemath/sagetrac-mirror/commit/ce799549f0335c64a159d273136fc0233cd53e04)" to "[e6b5f7563bf65a38281dc58eaa27b1ba70303d36](https://github.com/sagemath/sagetrac-mirror/commit/e6b5f7563bf65a38281dc58eaa27b1ba70303d36)".



---

archive/issue_comments_477689.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6b5f7563bf65a38281dc58eaa27b1ba70303d36\">e6b5f75</a></td><td><code>build/pkgs/sagelib/src/MANIFEST.in: Prune sage_setup/docbuild</code></td></tr></table>\n",
    "created_at": "2020-07-15T18:55:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477689",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6b5f7563bf65a38281dc58eaa27b1ba70303d36">e6b5f75</a></td><td><code>build/pkgs/sagelib/src/MANIFEST.in: Prune sage_setup/docbuild</code></td></tr></table>




---

archive/issue_comments_477690.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbfe485a49b26aa10d1539781b38028c61bad116\">cbfe485</a></td><td><code>build/pkgs/sage_setup_docbuild: Set version</code></td></tr></table>\n",
    "created_at": "2020-07-15T19:25:37Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477690",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbfe485a49b26aa10d1539781b38028c61bad116">cbfe485</a></td><td><code>build/pkgs/sage_setup_docbuild: Set version</code></td></tr></table>




---

archive/issue_comments_477691.json:
```json
{
    "body": "**Changing commit** from \"[e6b5f7563bf65a38281dc58eaa27b1ba70303d36](https://github.com/sagemath/sagetrac-mirror/commit/e6b5f7563bf65a38281dc58eaa27b1ba70303d36)\" to \"[cbfe485a49b26aa10d1539781b38028c61bad116](https://github.com/sagemath/sagetrac-mirror/commit/cbfe485a49b26aa10d1539781b38028c61bad116)\".",
    "created_at": "2020-07-15T19:25:37Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477691",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e6b5f7563bf65a38281dc58eaa27b1ba70303d36](https://github.com/sagemath/sagetrac-mirror/commit/e6b5f7563bf65a38281dc58eaa27b1ba70303d36)" to "[cbfe485a49b26aa10d1539781b38028c61bad116](https://github.com/sagemath/sagetrac-mirror/commit/cbfe485a49b26aa10d1539781b38028c61bad116)".



---

archive/issue_comments_477692.json:
```json
{
    "body": "<a id='comment:13'></a>\nIn the new `spkg-install` file, why\n\n```\n. sage-dist-helpers\n```\nWhy do this at all, and if you're going to do it, why not use `source` instead of `.`, to be consistent with how `sage-spkg` does things?",
    "created_at": "2020-07-20T22:34:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477692",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>
In the new `spkg-install` file, why

```
. sage-dist-helpers
```
Why do this at all, and if you're going to do it, why not use `source` instead of `.`, to be consistent with how `sage-spkg` does things?



---

archive/issue_comments_477693.json:
```json
{
    "body": "**Changing commit** from \"[cbfe485a49b26aa10d1539781b38028c61bad116](https://github.com/sagemath/sagetrac-mirror/commit/cbfe485a49b26aa10d1539781b38028c61bad116)\" to \"[39781d1dc5c13e46d6e302deaac9b9500894347d](https://github.com/sagemath/sagetrac-mirror/commit/39781d1dc5c13e46d6e302deaac9b9500894347d)\".",
    "created_at": "2020-07-20T22:37:43Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[cbfe485a49b26aa10d1539781b38028c61bad116](https://github.com/sagemath/sagetrac-mirror/commit/cbfe485a49b26aa10d1539781b38028c61bad116)" to "[39781d1dc5c13e46d6e302deaac9b9500894347d](https://github.com/sagemath/sagetrac-mirror/commit/39781d1dc5c13e46d6e302deaac9b9500894347d)".



---

archive/issue_comments_477694.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39781d1dc5c13e46d6e302deaac9b9500894347d\">39781d1</a></td><td><code>build/pkgs/sage_setup_docbuild/spkg-install: Remove useless use of sage-dist-helpers</code></td></tr></table>\n",
    "created_at": "2020-07-20T22:37:43Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477694",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39781d1dc5c13e46d6e302deaac9b9500894347d">39781d1</a></td><td><code>build/pkgs/sage_setup_docbuild/spkg-install: Remove useless use of sage-dist-helpers</code></td></tr></table>




---

archive/issue_comments_477695.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks. This was a leftover from when I was using `sdh_pip_install`.",
    "created_at": "2020-07-20T22:38:11Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477695",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Thanks. This was a leftover from when I was using `sdh_pip_install`.



---

archive/issue_comments_477696.json:
```json
{
    "body": "<a id='comment:16'></a>\nCan you please add `sage_setup_docbuild` to `DOC_DEPENDENCIES` in `build/make/Makefile.in`?\n\nEdit: No, sorry, it's already there. I just built Sage and it build `sage_setup_docbuild` at the end, after the documentation. I don't know why.",
    "created_at": "2020-07-21T00:03:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477696",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:16'></a>
Can you please add `sage_setup_docbuild` to `DOC_DEPENDENCIES` in `build/make/Makefile.in`?

Edit: No, sorry, it's already there. I just built Sage and it build `sage_setup_docbuild` at the end, after the documentation. I don't know why.



---

archive/issue_comments_477697.json:
```json
{
    "body": "<a id='comment:17'></a>\nHm... it's possible that it is always built because its dependency sagelib is always built...",
    "created_at": "2020-07-21T00:46:19Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477697",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Hm... it's possible that it is always built because its dependency sagelib is always built...



---

archive/issue_comments_477698.json:
```json
{
    "body": "**Changing commit** from \"[39781d1dc5c13e46d6e302deaac9b9500894347d](https://github.com/sagemath/sagetrac-mirror/commit/39781d1dc5c13e46d6e302deaac9b9500894347d)\" to \"[0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1](https://github.com/sagemath/sagetrac-mirror/commit/0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1)\".",
    "created_at": "2020-08-10T01:19:13Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[39781d1dc5c13e46d6e302deaac9b9500894347d](https://github.com/sagemath/sagetrac-mirror/commit/39781d1dc5c13e46d6e302deaac9b9500894347d)" to "[0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1](https://github.com/sagemath/sagetrac-mirror/commit/0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1)".



---

archive/issue_comments_477699.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcad5184daba6a9d1d347950b3908fc98ec856ce\">fcad518</a></td><td><code>Merge tag '9.2.beta7' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e\">55c3fbc</a></td><td><code>src/sage_setup/clean.py: Fix doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01b96b0f44f4ff7407fd2f3ce83de1cc74259d58\">01b96b0</a></td><td><code>Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a19fe2a9bf4ed64a48ac3110cccbbdff97684ca\">8a19fe2</a></td><td><code>build/make/Makefile.in (sagelib-clean): Clean the new build location</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ccc67b0356373330164dd75060f574c184142473\">ccc67b0</a></td><td><code>src/sage_setup: Update cythonized_dir in doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1\">0237faa</a></td><td><code>Merge branch 't/29950/build_sagelib_using_installed_sage_setup' into t/30010/split_sage_setup_docbuild_out_to_a_separate_package</code></td></tr></table>\n",
    "created_at": "2020-08-10T01:19:13Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcad5184daba6a9d1d347950b3908fc98ec856ce">fcad518</a></td><td><code>Merge tag '9.2.beta7' into t/29701/replace_use_of_module_list_optionalextension</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55c3fbc565fd7884f3df9555de83dd326ace276e">55c3fbc</a></td><td><code>src/sage_setup/clean.py: Fix doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01b96b0f44f4ff7407fd2f3ce83de1cc74259d58">01b96b0</a></td><td><code>Merge branch 't/29701/replace_use_of_module_list_optionalextension' into t/29950/build_sagelib_using_installed_sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a19fe2a9bf4ed64a48ac3110cccbbdff97684ca">8a19fe2</a></td><td><code>build/make/Makefile.in (sagelib-clean): Clean the new build location</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ccc67b0356373330164dd75060f574c184142473">ccc67b0</a></td><td><code>src/sage_setup: Update cythonized_dir in doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1">0237faa</a></td><td><code>Merge branch 't/29950/build_sagelib_using_installed_sage_setup' into t/30010/split_sage_setup_docbuild_out_to_a_separate_package</code></td></tr></table>




---

archive/issue_comments_477700.json:
```json
{
    "body": "<a id='comment:19'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d1af540838048f4b60318b93e4f8801547730c1\">7d1af54</a></td><td><code>build/pkgs/sage_setup_docbuild: Make sagelib an order-only dep</code></td></tr></table>\n",
    "created_at": "2020-08-10T01:21:39Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d1af540838048f4b60318b93e4f8801547730c1">7d1af54</a></td><td><code>build/pkgs/sage_setup_docbuild: Make sagelib an order-only dep</code></td></tr></table>




---

archive/issue_comments_477701.json:
```json
{
    "body": "**Changing commit** from \"[0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1](https://github.com/sagemath/sagetrac-mirror/commit/0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1)\" to \"[7d1af540838048f4b60318b93e4f8801547730c1](https://github.com/sagemath/sagetrac-mirror/commit/7d1af540838048f4b60318b93e4f8801547730c1)\".",
    "created_at": "2020-08-10T01:21:39Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1](https://github.com/sagemath/sagetrac-mirror/commit/0237faaac34ea8a6c70907d73ec4b3b7ce3ee7d1)" to "[7d1af540838048f4b60318b93e4f8801547730c1](https://github.com/sagemath/sagetrac-mirror/commit/7d1af540838048f4b60318b93e4f8801547730c1)".



---

archive/issue_events_267994.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-267994"
}
```



---

archive/issue_events_267995.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-267995"
}
```



---

archive/issue_comments_477702.json:
```json
{
    "body": "**Changing dependencies** from \"#29950\" to \"#29500\".",
    "created_at": "2020-09-08T22:42:51Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477702",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29950" to "#29500".



---

archive/issue_comments_477703.json:
```json
{
    "body": "**Changing commit** from \"[7d1af540838048f4b60318b93e4f8801547730c1](https://github.com/sagemath/sagetrac-mirror/commit/7d1af540838048f4b60318b93e4f8801547730c1)\" to \"[14ab446a58821df23bcb2d5c4f441fe4fa876ed5](https://github.com/sagemath/sagetrac-mirror/commit/14ab446a58821df23bcb2d5c4f441fe4fa876ed5)\".",
    "created_at": "2020-09-08T22:56:18Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7d1af540838048f4b60318b93e4f8801547730c1](https://github.com/sagemath/sagetrac-mirror/commit/7d1af540838048f4b60318b93e4f8801547730c1)" to "[14ab446a58821df23bcb2d5c4f441fe4fa876ed5](https://github.com/sagemath/sagetrac-mirror/commit/14ab446a58821df23bcb2d5c4f441fe4fa876ed5)".



---

archive/issue_comments_477704.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8aa6fd96607c207a0f9563c583978cd50ddc52a7\">8aa6fd9</a></td><td><code>build/bin/sage-dist-helpers (sdh_pip_install): Build a wheel, store it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d369aabcda2feff14b4f1d14fe824e591d8c5c36\">d369aab</a></td><td><code>build/bin/sage-dist-helpers (sdh_store_and_pip_install_wheel): New, factored out from sdh_pip_install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d435ab90d74d86264d681371034700a8214e6d3\">2d435ab</a></td><td><code>build/pkgs/numpy/spkg-install.in: Install via setup.py bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55993b6e25560af5e582aed7fcfbb56d317b92fe\">55993b6</a></td><td><code>build/bin/sage-dist-helpers: Fixup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a646747dbf7c823030e1b23419348ff795a0661\">0a64674</a></td><td><code>build/pkgs/gambit/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca586938cbdd91114a10dd3364201c8076412485\">ca58693</a></td><td><code>build/pkgs/pillow/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65773f7b632e0c93b073fdce0e2a0eed14ef495c\">65773f7</a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30010/split_sage_setup_docbuild_out_to_a_separate_package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14ab446a58821df23bcb2d5c4f441fe4fa876ed5\">14ab446</a></td><td><code>build/pkgs/sage_setup_docbuild/spkg-install: Install via setup.py bdist_wheel</code></td></tr></table>\n",
    "created_at": "2020-09-08T22:56:18Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8aa6fd96607c207a0f9563c583978cd50ddc52a7">8aa6fd9</a></td><td><code>build/bin/sage-dist-helpers (sdh_pip_install): Build a wheel, store it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d369aabcda2feff14b4f1d14fe824e591d8c5c36">d369aab</a></td><td><code>build/bin/sage-dist-helpers (sdh_store_and_pip_install_wheel): New, factored out from sdh_pip_install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d435ab90d74d86264d681371034700a8214e6d3">2d435ab</a></td><td><code>build/pkgs/numpy/spkg-install.in: Install via setup.py bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55993b6e25560af5e582aed7fcfbb56d317b92fe">55993b6</a></td><td><code>build/bin/sage-dist-helpers: Fixup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a646747dbf7c823030e1b23419348ff795a0661">0a64674</a></td><td><code>build/pkgs/gambit/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca586938cbdd91114a10dd3364201c8076412485">ca58693</a></td><td><code>build/pkgs/pillow/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65773f7b632e0c93b073fdce0e2a0eed14ef495c">65773f7</a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30010/split_sage_setup_docbuild_out_to_a_separate_package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14ab446a58821df23bcb2d5c4f441fe4fa876ed5">14ab446</a></td><td><code>build/pkgs/sage_setup_docbuild/spkg-install: Install via setup.py bdist_wheel</code></td></tr></table>




---

archive/issue_comments_477705.json:
```json
{
    "body": "<a id='comment:23'></a>\nI wrote these comments before the most recent change, but I think they are still relevant:\n\nI propose the following change:\n\n```diff\ndiff --git a/build/pkgs/sage_setup_docbuild/dependencies b/build/pkgs/sage_setup_docbuild/dependencies\nindex 20f527f0f1..b21990c270 100644\n--- a/build/pkgs/sage_setup_docbuild/dependencies\n+++ b/build/pkgs/sage_setup_docbuild/dependencies\n@@ -1 +1 @@\n-$(PYTHON) sphinx six | $(PYTHON_TOOLCHAIN) sagelib\n+$(PYTHON) sphinx | $(PYTHON_TOOLCHAIN) sagelib\ndiff --git a/build/pkgs/sage_setup_docbuild/src/requirements.txt b/build/pkgs/sage_setup_docbuild/src/requirements.txt\nindex 2dedc630e9..4e5dd84d0e 100644\n--- a/build/pkgs/sage_setup_docbuild/src/requirements.txt\n+++ b/build/pkgs/sage_setup_docbuild/src/requirements.txt\n@@ -1,3 +1,2 @@\n #sage\n sphinx\n-six\ndiff --git a/src/sage_setup/docbuild/ext/sage_autodoc.py b/src/sage_setup/docbuild/ext/sage_autodoc.py\nindex 032365d6bd..92d19b883e 100644\n--- a/src/sage_setup/docbuild/ext/sage_autodoc.py\n+++ b/src/sage_setup/docbuild/ext/sage_autodoc.py\n@@ -26,8 +26,6 @@ AUTHORS:\n - Kwankyu Lee (2018-12-26): rebase on the latest sphinx.ext.autodoc\n \n \"\"\"\n-from six import PY2, itervalues, text_type, class_types, string_types\n-\n import inspect\n import re\n import sys\n@@ -1176,27 +1174,19 @@ class ClassDocumenter(DocstringSignatureMixin, ModuleLevelDocumenter):\n         if ret:\n             module = getattr(self.object, '__module__', False)\n             name = getattr(self.object, '__name__', False)\n-            if PY2:\n-                if name and module:\n-                    cls = getattr(sys.modules[module], name, None)\n-                    self.doc_as_attr = (self.objpath != name.split('.') and\n-                                        self.object is cls)\n-                else:\n-                    self.doc_as_attr = True\n+            qualname = getattr(self.object, '__qualname__', name)\n+            if qualname and module:\n+                # walk the standard attribute lookup path for this object\n+                qualname_parts = qualname.split('.')\n+                cls = getattr(sys.modules[module], qualname_parts[0], None)\n+                for part in qualname_parts[1:]:\n+                    if cls is None:\n+                        break\n+                    cls = getattr(cls, part, None)\n+                self.doc_as_attr = (self.objpath != qualname_parts and\n+                                    self.object is cls)\n             else:\n-                qualname = getattr(self.object, '__qualname__', name)\n-                if qualname and module:\n-                    # walk the standard attribute lookup path for this object\n-                    qualname_parts = qualname.split('.')\n-                    cls = getattr(sys.modules[module], qualname_parts[0], None)\n-                    for part in qualname_parts[1:]:\n-                        if cls is None:\n-                            break\n-                        cls = getattr(cls, part, None)\n-                    self.doc_as_attr = (self.objpath != qualname_parts and\n-                                        self.object is cls)\n-                else:\n-                    self.doc_as_attr = True\n+                self.doc_as_attr = True\n         return ret\n \n     def format_args(self):\n\n```\n\n- Also, I don't understand the \"tarball\" aspects of this. There is no tarball, is there? So why have `spkg-src`?\n\n- Is it built in `build/pkgs/sage_setup_docbuild/src/`? After building, I see new directories `build` and `sage_setup.docbuild.egg-info` there.\n\n- The installation log file says `package init file 'sage_setup/__init__.py' not found (or not a regular file)`. I assume this is not a big issue, since everything worked after installation.",
    "created_at": "2020-09-08T23:09:58Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477705",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>
I wrote these comments before the most recent change, but I think they are still relevant:

I propose the following change:

```diff
diff --git a/build/pkgs/sage_setup_docbuild/dependencies b/build/pkgs/sage_setup_docbuild/dependencies
index 20f527f0f1..b21990c270 100644
--- a/build/pkgs/sage_setup_docbuild/dependencies
+++ b/build/pkgs/sage_setup_docbuild/dependencies
@@ -1 +1 @@
-$(PYTHON) sphinx six | $(PYTHON_TOOLCHAIN) sagelib
+$(PYTHON) sphinx | $(PYTHON_TOOLCHAIN) sagelib
diff --git a/build/pkgs/sage_setup_docbuild/src/requirements.txt b/build/pkgs/sage_setup_docbuild/src/requirements.txt
index 2dedc630e9..4e5dd84d0e 100644
--- a/build/pkgs/sage_setup_docbuild/src/requirements.txt
+++ b/build/pkgs/sage_setup_docbuild/src/requirements.txt
@@ -1,3 +1,2 @@
 #sage
 sphinx
-six
diff --git a/src/sage_setup/docbuild/ext/sage_autodoc.py b/src/sage_setup/docbuild/ext/sage_autodoc.py
index 032365d6bd..92d19b883e 100644
--- a/src/sage_setup/docbuild/ext/sage_autodoc.py
+++ b/src/sage_setup/docbuild/ext/sage_autodoc.py
@@ -26,8 +26,6 @@ AUTHORS:
 - Kwankyu Lee (2018-12-26): rebase on the latest sphinx.ext.autodoc
 
 """
-from six import PY2, itervalues, text_type, class_types, string_types
-
 import inspect
 import re
 import sys
@@ -1176,27 +1174,19 @@ class ClassDocumenter(DocstringSignatureMixin, ModuleLevelDocumenter):
         if ret:
             module = getattr(self.object, '__module__', False)
             name = getattr(self.object, '__name__', False)
-            if PY2:
-                if name and module:
-                    cls = getattr(sys.modules[module], name, None)
-                    self.doc_as_attr = (self.objpath != name.split('.') and
-                                        self.object is cls)
-                else:
-                    self.doc_as_attr = True
+            qualname = getattr(self.object, '__qualname__', name)
+            if qualname and module:
+                # walk the standard attribute lookup path for this object
+                qualname_parts = qualname.split('.')
+                cls = getattr(sys.modules[module], qualname_parts[0], None)
+                for part in qualname_parts[1:]:
+                    if cls is None:
+                        break
+                    cls = getattr(cls, part, None)
+                self.doc_as_attr = (self.objpath != qualname_parts and
+                                    self.object is cls)
             else:
-                qualname = getattr(self.object, '__qualname__', name)
-                if qualname and module:
-                    # walk the standard attribute lookup path for this object
-                    qualname_parts = qualname.split('.')
-                    cls = getattr(sys.modules[module], qualname_parts[0], None)
-                    for part in qualname_parts[1:]:
-                        if cls is None:
-                            break
-                        cls = getattr(cls, part, None)
-                    self.doc_as_attr = (self.objpath != qualname_parts and
-                                        self.object is cls)
-                else:
-                    self.doc_as_attr = True
+                self.doc_as_attr = True
         return ret
 
     def format_args(self):

```

- Also, I don't understand the "tarball" aspects of this. There is no tarball, is there? So why have `spkg-src`?

- Is it built in `build/pkgs/sage_setup_docbuild/src/`? After building, I see new directories `build` and `sage_setup.docbuild.egg-info` there.

- The installation log file says `package init file 'sage_setup/__init__.py' not found (or not a regular file)`. I assume this is not a big issue, since everything worked after installation.



---

archive/issue_comments_477706.json:
```json
{
    "body": "<a id='comment:24'></a>\nI agree with these changes; could you push them to the branch please?",
    "created_at": "2020-09-09T00:31:18Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477706",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
I agree with these changes; could you push them to the branch please?



---

archive/issue_comments_477707.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [jhpalmieri](#comment%3A23):\n> - Also, I don't understand the \"tarball\" aspects of this. There is no tarball, is there? So why have `spkg-src`?\n\n\nThe spkg-src script can build a tarball for the purpose of uploading a source distribution to PyPI.\n\n> - Is it built in `build/pkgs/sage_setup_docbuild/src/`? After building, I see new directories `build` and `sage_setup.docbuild.egg-info` there.\n\n\nThat's right. \n\nI should probably add a `sage_setup_docbuild-clean` target that deletes them.\n\n> - The installation log file says `package init file 'sage_setup/__init__.py' not found (or not a regular file)`. I assume this is not a big issue, since everything worked after installation.\n\n\nThis is not an error. `sage_setup` is now a native namespace package - these do not have `__init__.py` files.",
    "created_at": "2020-09-09T00:37:07Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477707",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>
Replying to [jhpalmieri](#comment%3A23):
> - Also, I don't understand the "tarball" aspects of this. There is no tarball, is there? So why have `spkg-src`?


The spkg-src script can build a tarball for the purpose of uploading a source distribution to PyPI.

> - Is it built in `build/pkgs/sage_setup_docbuild/src/`? After building, I see new directories `build` and `sage_setup.docbuild.egg-info` there.


That's right. 

I should probably add a `sage_setup_docbuild-clean` target that deletes them.

> - The installation log file says `package init file 'sage_setup/__init__.py' not found (or not a regular file)`. I assume this is not a big issue, since everything worked after installation.


This is not an error. `sage_setup` is now a native namespace package - these do not have `__init__.py` files.



---

archive/issue_comments_477708.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)\" to \"[u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package)\".",
    "created_at": "2020-09-09T02:32:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477708",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing branch** from "[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)" to "[u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package)".



---

archive/issue_comments_477709.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2020-09-09T02:34:42Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477709",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_events_267996.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-09-09T02:34:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-267996"
}
```



---

archive/issue_events_267997.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2020-09-09T02:34:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-267997"
}
```



---

archive/issue_comments_477710.json:
```json
{
    "body": "<a id='comment:27'></a>\nAdding a `sage_setup_docbuild-clean` would be nice, and/or an `spkg-postinst` script \u2014\u00a0can happen either here or on another ticket.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881\">4ad7d7e</a></td><td><code>trac 30010: remove six as a dependency of sage_setup_docbuild</code></td></tr></table>\n",
    "created_at": "2020-09-09T02:34:42Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477710",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:27'></a>
Adding a `sage_setup_docbuild-clean` would be nice, and/or an `spkg-postinst` script — can happen either here or on another ticket.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881">4ad7d7e</a></td><td><code>trac 30010: remove six as a dependency of sage_setup_docbuild</code></td></tr></table>




---

archive/issue_comments_477711.json:
```json
{
    "body": "**Changing commit** from \"[14ab446a58821df23bcb2d5c4f441fe4fa876ed5](https://github.com/sagemath/sagetrac-mirror/commit/14ab446a58821df23bcb2d5c4f441fe4fa876ed5)\" to \"[4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881](https://github.com/sagemath/sagetrac-mirror/commit/4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881)\".",
    "created_at": "2020-09-09T02:34:42Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477711",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[14ab446a58821df23bcb2d5c4f441fe4fa876ed5](https://github.com/sagemath/sagetrac-mirror/commit/14ab446a58821df23bcb2d5c4f441fe4fa876ed5)" to "[4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881](https://github.com/sagemath/sagetrac-mirror/commit/4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881)".



---

archive/issue_comments_477712.json:
```json
{
    "body": "<a id='comment:28'></a>\nThank you. I think I'll be doing the cleaning via #29386.",
    "created_at": "2020-09-09T03:51:13Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477712",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
Thank you. I think I'll be doing the cleaning via #29386.



---

archive/issue_comments_477713.json:
```json
{
    "body": "<a id='comment:29'></a>\nI'm getting lots of \n\n```\nsage -t --long --warn-long 44.0 --random-seed=0 src/sage_setup/find.py\n**********************************************************************\nFile \"src/sage_setup/find.py\", line 38, in sage_setup.find.read_distribution\nFailed example:\n    from sage_setup.find import read_distribution\nException raised:\n    Traceback (most recent call last):\n      File \"/home/release/Sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/release/Sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.find.read_distribution[1]>\", line 1, in <module>\n        from sage_setup.find import read_distribution\n    ModuleNotFoundError: No module named 'sage_setup.find'\n**********************************************************************\n```\nAre incremental builds supported?",
    "created_at": "2020-09-27T18:00:25Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477713",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>
I'm getting lots of 

```
sage -t --long --warn-long 44.0 --random-seed=0 src/sage_setup/find.py
**********************************************************************
File "src/sage_setup/find.py", line 38, in sage_setup.find.read_distribution
Failed example:
    from sage_setup.find import read_distribution
Exception raised:
    Traceback (most recent call last):
      File "/home/release/Sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/release/Sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.find.read_distribution[1]>", line 1, in <module>
        from sage_setup.find import read_distribution
    ModuleNotFoundError: No module named 'sage_setup.find'
**********************************************************************
```
Are incremental builds supported?



---

archive/issue_events_267998.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-27T18:00:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-267998"
}
```



---

archive/issue_events_267999.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-27T18:00:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-267999"
}
```



---

archive/issue_comments_477714.json:
```json
{
    "body": "<a id='comment:30'></a>\nI'll revisit this ticket at the start of the 9.3 series",
    "created_at": "2020-09-27T18:11:49Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477714",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
I'll revisit this ticket at the start of the 9.3 series



---

archive/issue_events_268000.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T06:39:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268000"
}
```



---

archive/issue_events_268001.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T06:39:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268001"
}
```



---

archive/issue_comments_477715.json:
```json
{
    "body": "**Changing dependencies** from \"#29500\" to \"#28925\".",
    "created_at": "2020-11-14T06:39:22Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477715",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#29500" to "#28925".



---

archive/issue_comments_477716.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd111\".",
    "created_at": "2020-12-06T17:46:30Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477716",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd111".



---

archive/issue_comments_477717.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,12 +1,12 @@\n-`sage_setup.docbuild` has very different dependencies:\n+`sage_setup.docbuild` has very different dependencies compared to `sage_setup`:\n \n It depends on `sagelib` and `sphinx`, \n whereas the rest of `sage_setup` is for building `sagelib`.\n \n-We split it out as a separate distutils package `sage_setup.docbuild`.  \n-\n-Because some external packages use `sage_setup.docbuild` to build their own documentation, we do not change the package hierarchy. Instead we turn `sage_setup` into a native namespace package.\n-\n+We split it out as a separate distutils package `sage_docbuild`.  \n \n Using the `spkg-src` script, a pip-installable tarball can be generated, which could be uploaded to PyPI -- for the use by external packages that want to build documentation.\n \n+This is preparation for #29868 (pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf)\n+\n+\n``````\n",
    "created_at": "2021-02-21T18:46:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477717",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,12 +1,12 @@
-`sage_setup.docbuild` has very different dependencies:
+`sage_setup.docbuild` has very different dependencies compared to `sage_setup`:
 
 It depends on `sagelib` and `sphinx`, 
 whereas the rest of `sage_setup` is for building `sagelib`.
 
-We split it out as a separate distutils package `sage_setup.docbuild`.  
-
-Because some external packages use `sage_setup.docbuild` to build their own documentation, we do not change the package hierarchy. Instead we turn `sage_setup` into a native namespace package.
-
+We split it out as a separate distutils package `sage_docbuild`.  
 
 Using the `spkg-src` script, a pip-installable tarball can be generated, which could be uploaded to PyPI -- for the use by external packages that want to build documentation.
 
+This is preparation for #29868 (pip-installable packages sagemath-doc-src, sagemath-doc-inventory, sagemath-doc-html, sagemath-doc-pdf)
+
+
``````




---

archive/issue_comments_477718.json:
```json
{
    "body": "**Changing dependencies** from \"#28925\" to \"\".",
    "created_at": "2021-02-21T18:46:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477718",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#28925" to "".



---

archive/issue_events_268002.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-21T18:46:53Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "rename": {
        "from": "Split sage_setup.docbuild out to a separate distribution (distutils package)",
        "to": "Split sage_setup.docbuild out to a separate distribution sage_docbuild"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268002"
}
```



---

archive/issue_comments_477719.json:
```json
{
    "body": "**Dependencies:** #31344, #31353",
    "created_at": "2021-02-21T18:52:00Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477719",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #31344, #31353



---

archive/issue_comments_477720.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package)\" to \"[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)\".",
    "created_at": "2021-02-21T19:08:15Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477720",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package)" to "[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)".



---

archive/issue_comments_477721.json:
```json
{
    "body": "**Changing commit** from \"[4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881](https://github.com/sagemath/sagetrac-mirror/commit/4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881)\" to \"[c76fea5430f83e40c1b3218395829031fb509e7b](https://github.com/sagemath/sagetrac-mirror/commit/c76fea5430f83e40c1b3218395829031fb509e7b)\".",
    "created_at": "2021-02-21T19:22:48Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881](https://github.com/sagemath/sagetrac-mirror/commit/4ad7d7e15c9d4ff92213e2b52ad4ed8c2fc32881)" to "[c76fea5430f83e40c1b3218395829031fb509e7b](https://github.com/sagemath/sagetrac-mirror/commit/c76fea5430f83e40c1b3218395829031fb509e7b)".



---

archive/issue_comments_477722.json:
```json
{
    "body": "<a id='comment:36'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c76fea5430f83e40c1b3218395829031fb509e7b\">c76fea5</a></td><td><code>src/sage/doctest/control.py: When adding sage_setup, add sage_doctest too</code></td></tr></table>\n",
    "created_at": "2021-02-21T19:22:48Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c76fea5430f83e40c1b3218395829031fb509e7b">c76fea5</a></td><td><code>src/sage/doctest/control.py: When adding sage_setup, add sage_doctest too</code></td></tr></table>




---

archive/issue_comments_477723.json:
```json
{
    "body": "**Changing commit** from \"[c76fea5430f83e40c1b3218395829031fb509e7b](https://github.com/sagemath/sagetrac-mirror/commit/c76fea5430f83e40c1b3218395829031fb509e7b)\" to \"[c262e44786dd4b7d4f5147cd81d510873e76c86b](https://github.com/sagemath/sagetrac-mirror/commit/c262e44786dd4b7d4f5147cd81d510873e76c86b)\".",
    "created_at": "2021-02-21T19:31:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c76fea5430f83e40c1b3218395829031fb509e7b](https://github.com/sagemath/sagetrac-mirror/commit/c76fea5430f83e40c1b3218395829031fb509e7b)" to "[c262e44786dd4b7d4f5147cd81d510873e76c86b](https://github.com/sagemath/sagetrac-mirror/commit/c262e44786dd4b7d4f5147cd81d510873e76c86b)".



---

archive/issue_comments_477724.json:
```json
{
    "body": "<a id='comment:37'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c262e44786dd4b7d4f5147cd81d510873e76c86b\">c262e44</a></td><td><code>build/pkgs/sage_docbuild/src: Update metadata</code></td></tr></table>\n",
    "created_at": "2021-02-21T19:31:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477724",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c262e44786dd4b7d4f5147cd81d510873e76c86b">c262e44</a></td><td><code>build/pkgs/sage_docbuild/src: Update metadata</code></td></tr></table>




---

archive/issue_events_268003.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-21T19:33:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268003"
}
```



---

archive/issue_events_268004.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-21T19:33:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268004"
}
```



---

archive/issue_events_268005.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-21T19:33:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268005"
}
```



---

archive/issue_events_268006.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-21T19:33:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268006"
}
```



---

archive/issue_comments_477725.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,7 +3,9 @@\n It depends on `sagelib` and `sphinx`, \n whereas the rest of `sage_setup` is for building `sagelib`.\n \n-We split it out as a separate distutils package `sage_docbuild`.  \n+We remove the nesting within `sage_setup`, creating a new top-level package `sage_docbuild`.\n+\n+We split it out as a separate pip-installable distribution package `sage_docbuild`.  \n \n Using the `spkg-src` script, a pip-installable tarball can be generated, which could be uploaded to PyPI -- for the use by external packages that want to build documentation.\n \n``````\n",
    "created_at": "2021-02-21T19:35:18Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477725",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,7 +3,9 @@
 It depends on `sagelib` and `sphinx`, 
 whereas the rest of `sage_setup` is for building `sagelib`.
 
-We split it out as a separate distutils package `sage_docbuild`.  
+We remove the nesting within `sage_setup`, creating a new top-level package `sage_docbuild`.
+
+We split it out as a separate pip-installable distribution package `sage_docbuild`.  
 
 Using the `spkg-src` script, a pip-installable tarball can be generated, which could be uploaded to PyPI -- for the use by external packages that want to build documentation.
 
``````




---

archive/issue_comments_477726.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52778c3bf8035a174a296dfc92f7145c96447492\">52778c3</a></td><td><code>build/pkgs/sage_docbuild/spkg-install: Use sdh_setup_bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6abe5e15d30a729d24730607ba47331406f244c\">b6abe5e</a></td><td><code>src/sage/docs/conf.py: Use absolute module names for sage_docbuild extensions</code></td></tr></table>\n",
    "created_at": "2021-02-21T19:47:09Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477726",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52778c3bf8035a174a296dfc92f7145c96447492">52778c3</a></td><td><code>build/pkgs/sage_docbuild/spkg-install: Use sdh_setup_bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6abe5e15d30a729d24730607ba47331406f244c">b6abe5e</a></td><td><code>src/sage/docs/conf.py: Use absolute module names for sage_docbuild extensions</code></td></tr></table>




---

archive/issue_comments_477727.json:
```json
{
    "body": "**Changing commit** from \"[c262e44786dd4b7d4f5147cd81d510873e76c86b](https://github.com/sagemath/sagetrac-mirror/commit/c262e44786dd4b7d4f5147cd81d510873e76c86b)\" to \"[b6abe5e15d30a729d24730607ba47331406f244c](https://github.com/sagemath/sagetrac-mirror/commit/b6abe5e15d30a729d24730607ba47331406f244c)\".",
    "created_at": "2021-02-21T19:47:09Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477727",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c262e44786dd4b7d4f5147cd81d510873e76c86b](https://github.com/sagemath/sagetrac-mirror/commit/c262e44786dd4b7d4f5147cd81d510873e76c86b)" to "[b6abe5e15d30a729d24730607ba47331406f244c](https://github.com/sagemath/sagetrac-mirror/commit/b6abe5e15d30a729d24730607ba47331406f244c)".



---

archive/issue_comments_477728.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-`sage_setup.docbuild` has very different dependencies compared to `sage_setup`:\n+`sage_setup.docbuild`, created in #19127, has very different dependencies compared to `sage_setup`:\n \n It depends on `sagelib` and `sphinx`, \n whereas the rest of `sage_setup` is for building `sagelib`.\n``````\n",
    "created_at": "2021-02-21T23:32:25Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477728",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-`sage_setup.docbuild` has very different dependencies compared to `sage_setup`:
+`sage_setup.docbuild`, created in #19127, has very different dependencies compared to `sage_setup`:
 
 It depends on `sagelib` and `sphinx`, 
 whereas the rest of `sage_setup` is for building `sagelib`.
``````




---

archive/issue_comments_477729.json:
```json
{
    "body": "<a id='comment:43'></a>\nDoctesting fails for me:\n\n```\n./sage -t -p --all --long --logfile=logs/ptestlong.log\nRunning doctests with ID 2021-02-23-09-29-26-45521505.\nGit branch: t/30010/split_sage_setup_docbuild_out_to_a_separate_package\nUsing --optional=build,dochtml,homebrew,pip,sage,sage_spkg\nDoctesting entire Sage library.\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/src/bin/sage-runtests\", line 182, in <module>\n    err = DC.run()\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 1206, in run\n    self.expand_files_into_sources()\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 790, in expand_files_into_sources\n    self.sources = [FileDocTestSource(path, self.options) for path in expand()]\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/control.py\", line 790, in <listcomp>\n    self.sources = [FileDocTestSource(path, self.options) for path in expand()]\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/sources.py\", line 527, in __init__\n    raise ValueError(\"unknown file extension %r\"%ext)\nValueError: unknown file extension ''\nmake: *** [ptestlong] Error 1\n```",
    "created_at": "2021-02-23T19:02:11Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477729",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:43'></a>
Doctesting fails for me:

```
./sage -t -p --all --long --logfile=logs/ptestlong.log
Running doctests with ID 2021-02-23-09-29-26-45521505.
Git branch: t/30010/split_sage_setup_docbuild_out_to_a_separate_package
Using --optional=build,dochtml,homebrew,pip,sage,sage_spkg
Doctesting entire Sage library.
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/src/bin/sage-runtests", line 182, in <module>
    err = DC.run()
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/control.py", line 1206, in run
    self.expand_files_into_sources()
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/control.py", line 790, in expand_files_into_sources
    self.sources = [FileDocTestSource(path, self.options) for path in expand()]
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/control.py", line 790, in <listcomp>
    self.sources = [FileDocTestSource(path, self.options) for path in expand()]
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/sources.py", line 527, in __init__
    raise ValueError("unknown file extension %r"%ext)
ValueError: unknown file extension ''
make: *** [ptestlong] Error 1
```



---

archive/issue_comments_477730.json:
```json
{
    "body": "<a id='comment:44'></a>\nI think the problem is this:\n\n```diff\ndiff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py\nindex 7d2b84b9c3..eafcf924de 100644\n--- a/src/sage/doctest/control.py\n+++ b/src/sage/doctest/control.py\n@@ -697,6 +697,7 @@ class DocTestController(SageObject):\n             # don't make sense to run outside a build environment\n             if have_git:\n                 self.files.append(opj(SAGE_SRC, 'sage_setup'))\n+                self.files.append(opj(SAGE_SRC, 'sage_doctest'))\n             self.files.append(SAGE_DOC_SRC)\n \n         if self.options.all or (self.options.new and not have_git):\n```\nShould `sage_doctest` be `sage_docbuild` instead?",
    "created_at": "2021-02-23T19:31:00Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477730",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:44'></a>
I think the problem is this:

```diff
diff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py
index 7d2b84b9c3..eafcf924de 100644
--- a/src/sage/doctest/control.py
+++ b/src/sage/doctest/control.py
@@ -697,6 +697,7 @@ class DocTestController(SageObject):
             # don't make sense to run outside a build environment
             if have_git:
                 self.files.append(opj(SAGE_SRC, 'sage_setup'))
+                self.files.append(opj(SAGE_SRC, 'sage_doctest'))
             self.files.append(SAGE_DOC_SRC)
 
         if self.options.all or (self.options.new and not have_git):
```
Should `sage_doctest` be `sage_docbuild` instead?



---

archive/issue_comments_477731.json:
```json
{
    "body": "<a id='comment:45'></a>\nYes, thanks for catching this! Please push it to the ticket",
    "created_at": "2021-02-23T19:37:46Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477731",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>
Yes, thanks for catching this! Please push it to the ticket



---

archive/issue_comments_477732.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)\" to \"[u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package)\".",
    "created_at": "2021-02-23T19:50:58Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477732",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing branch** from "[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)" to "[u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package)".



---

archive/issue_comments_477733.json:
```json
{
    "body": "**Changing commit** from \"[b6abe5e15d30a729d24730607ba47331406f244c](https://github.com/sagemath/sagetrac-mirror/commit/b6abe5e15d30a729d24730607ba47331406f244c)\" to \"[b42920b7fed686280aed51c9bf8392565297c239](https://github.com/sagemath/sagetrac-mirror/commit/b42920b7fed686280aed51c9bf8392565297c239)\".",
    "created_at": "2021-02-23T21:10:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477733",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[b6abe5e15d30a729d24730607ba47331406f244c](https://github.com/sagemath/sagetrac-mirror/commit/b6abe5e15d30a729d24730607ba47331406f244c)" to "[b42920b7fed686280aed51c9bf8392565297c239](https://github.com/sagemath/sagetrac-mirror/commit/b42920b7fed686280aed51c9bf8392565297c239)".



---

archive/issue_comments_477734.json:
```json
{
    "body": "<a id='comment:47'></a>\nThe directory structure looks very strange: inside `SAGE_ROOT/build/pkgs/sage_docbuild/src/` I see\n\n```\nbuild\n  lib\n     build\n        lib\n           build\n              lib\n                 build\n                    lib\n                       sage_docbuild\n                 sage_docbuild\n           sage_docbuild\n     sage_docbuild\n```\nwhere indentations indicate levels of subdirectories. For example, I see `SAGE_ROOT/build/pkgs/sage_docbuild/src/build/lib/build/lib/build/lib/build/lib/sage_docbuild`. All of the `sage_docbuild` directories look identical.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b42920b7fed686280aed51c9bf8392565297c239\">b42920b</a></td><td><code>trac 30010: (typo) change sage_doctest -> sage_docbuild</code></td></tr></table>\n",
    "created_at": "2021-02-23T21:10:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477734",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:47'></a>
The directory structure looks very strange: inside `SAGE_ROOT/build/pkgs/sage_docbuild/src/` I see

```
build
  lib
     build
        lib
           build
              lib
                 build
                    lib
                       sage_docbuild
                 sage_docbuild
           sage_docbuild
     sage_docbuild
```
where indentations indicate levels of subdirectories. For example, I see `SAGE_ROOT/build/pkgs/sage_docbuild/src/build/lib/build/lib/build/lib/build/lib/sage_docbuild`. All of the `sage_docbuild` directories look identical.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b42920b7fed686280aed51c9bf8392565297c239">b42920b</a></td><td><code>trac 30010: (typo) change sage_doctest -> sage_docbuild</code></td></tr></table>




---

archive/issue_comments_477735.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package)\" to \"[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)\".",
    "created_at": "2021-02-23T21:18:30Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477735",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/split_sage_setup_docbuild_out_to_a_separate_package)" to "[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)".



---

archive/issue_comments_477736.json:
```json
{
    "body": "<a id='comment:49'></a>\nThanks for catching this! This commit should fix it\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a472f20758eb2b6e277cdcf59b8db6a58b585b4\">0a472f2</a></td><td><code>build/pkgs/sage_docbuild/src/setup.py: Restrict find_namespace_packages to sage_docbuild</code></td></tr></table>\n",
    "created_at": "2021-02-23T21:19:48Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477736",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>
Thanks for catching this! This commit should fix it

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a472f20758eb2b6e277cdcf59b8db6a58b585b4">0a472f2</a></td><td><code>build/pkgs/sage_docbuild/src/setup.py: Restrict find_namespace_packages to sage_docbuild</code></td></tr></table>




---

archive/issue_comments_477737.json:
```json
{
    "body": "**Changing commit** from \"[b42920b7fed686280aed51c9bf8392565297c239](https://github.com/sagemath/sagetrac-mirror/commit/b42920b7fed686280aed51c9bf8392565297c239)\" to \"[0a472f20758eb2b6e277cdcf59b8db6a58b585b4](https://github.com/sagemath/sagetrac-mirror/commit/0a472f20758eb2b6e277cdcf59b8db6a58b585b4)\".",
    "created_at": "2021-02-23T21:19:48Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477737",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[b42920b7fed686280aed51c9bf8392565297c239](https://github.com/sagemath/sagetrac-mirror/commit/b42920b7fed686280aed51c9bf8392565297c239)" to "[0a472f20758eb2b6e277cdcf59b8db6a58b585b4](https://github.com/sagemath/sagetrac-mirror/commit/0a472f20758eb2b6e277cdcf59b8db6a58b585b4)".



---

archive/issue_comments_477738.json:
```json
{
    "body": "<a id='comment:50'></a>\nPerhaps for another ticket, but shouldn't `make distclean` clean up build artifacts like those subdirectories of `build/pkgs/PKG/src/`? To test the most recent change, I had to delete the extraneous stuff by hand, or alternatively start with a fresh tarball. Since I'm testing with various branches combined (to allow docbuilding to succeed on my Mac, for example), I would rather not use a fresh tarball in these situations.",
    "created_at": "2021-02-23T22:15:31Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477738",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:50'></a>
Perhaps for another ticket, but shouldn't `make distclean` clean up build artifacts like those subdirectories of `build/pkgs/PKG/src/`? To test the most recent change, I had to delete the extraneous stuff by hand, or alternatively start with a fresh tarball. Since I'm testing with various branches combined (to allow docbuilding to succeed on my Mac, for example), I would rather not use a fresh tarball in these situations.



---

archive/issue_comments_477739.json:
```json
{
    "body": "<a id='comment:51'></a>\nYes, a target `sage_docbuild-clean` is definitely missing, I'll add one.",
    "created_at": "2021-02-23T23:29:10Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477739",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:51'></a>
Yes, a target `sage_docbuild-clean` is definitely missing, I'll add one.



---

archive/issue_comments_477740.json:
```json
{
    "body": "<a id='comment:52'></a>\nReplying to [jhpalmieri](#comment%3A50):\n> I would rather not use a fresh tarball in these situations.\n\n\nWhat works really well for me is `git worktree` - easy to create a new \"distclean\" copy of the branch with this",
    "created_at": "2021-02-23T23:31:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477740",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>
Replying to [jhpalmieri](#comment%3A50):
> I would rather not use a fresh tarball in these situations.


What works really well for me is `git worktree` - easy to create a new "distclean" copy of the branch with this



---

archive/issue_comments_477741.json:
```json
{
    "body": "<a id='comment:53'></a>\nI get this at the start of doctesting:\n\n```\n    ModuleNotFoundError in doctesting framework\n**********************************************************************\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2508, in __call__\n    doctests, extras = self._run(runner, options, results)\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 2551, in _run\n    doctests, extras = self.source.create_doctests(sage_namespace)\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/sources.py\", line 733, in create_doctests\n    load(filename, namespace) # errors raised here will be caught in DocTestTask\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/repl/load.py\", line 252, in load\n    exec(code, globals)\n  File \"./clean.py\", line 18, in <module>\nModuleNotFoundError: No module named 'sage_setup.find'\n```\nleading to\n\n```\nsage -t --long --random-seed=0 src/sage_setup/clean.py  # ModuleNotFoundError in doctesting framework\n```\nand then I get other doctest failures:\n\n```\nsage -t --long --random-seed=0 src/sage_setup/find.py  # 6 doctests failed\nsage -t --long --random-seed=0 src/sage_setup/util.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage_setup/optional_extension.py  # 2 doctests failed\n```\nThese all have a similar form:\n\n```\n**********************************************************************\nFile \"src/sage_setup/find.py\", line 38, in sage_setup.find.read_distribution\nFailed example:\n    from sage_setup.find import read_distribution\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.find.read_distribution[1]>\", line 1, in <module>\n        from sage_setup.find import read_distribution\n    ModuleNotFoundError: No module named 'sage_setup.find'\n**********************************************************************\nFile \"src/sage_setup/find.py\", line 92, in sage_setup.find.find_python_sources\nFailed example:\n    from sage_setup.find import find_python_sources\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage_setup.find.find_python_sources[1]>\", line 1, in <module>\n        from sage_setup.find import find_python_sources\n    ModuleNotFoundError: No module named 'sage_setup.find'\n```",
    "created_at": "2021-02-23T23:52:40Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477741",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:53'></a>
I get this at the start of doctesting:

```
    ModuleNotFoundError in doctesting framework
**********************************************************************
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2508, in __call__
    doctests, extras = self._run(runner, options, results)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 2551, in _run
    doctests, extras = self.source.create_doctests(sage_namespace)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/sources.py", line 733, in create_doctests
    load(filename, namespace) # errors raised here will be caught in DocTestTask
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/repl/load.py", line 252, in load
    exec(code, globals)
  File "./clean.py", line 18, in <module>
ModuleNotFoundError: No module named 'sage_setup.find'
```
leading to

```
sage -t --long --random-seed=0 src/sage_setup/clean.py  # ModuleNotFoundError in doctesting framework
```
and then I get other doctest failures:

```
sage -t --long --random-seed=0 src/sage_setup/find.py  # 6 doctests failed
sage -t --long --random-seed=0 src/sage_setup/util.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage_setup/optional_extension.py  # 2 doctests failed
```
These all have a similar form:

```
**********************************************************************
File "src/sage_setup/find.py", line 38, in sage_setup.find.read_distribution
Failed example:
    from sage_setup.find import read_distribution
Exception raised:
    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.find.read_distribution[1]>", line 1, in <module>
        from sage_setup.find import read_distribution
    ModuleNotFoundError: No module named 'sage_setup.find'
**********************************************************************
File "src/sage_setup/find.py", line 92, in sage_setup.find.find_python_sources
Failed example:
    from sage_setup.find import find_python_sources
Exception raised:
    Traceback (most recent call last):
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/lib/python3.9/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage_setup.find.find_python_sources[1]>", line 1, in <module>
        from sage_setup.find import find_python_sources
    ModuleNotFoundError: No module named 'sage_setup.find'
```



---

archive/issue_comments_477742.json:
```json
{
    "body": "**Changing commit** from \"[0a472f20758eb2b6e277cdcf59b8db6a58b585b4](https://github.com/sagemath/sagetrac-mirror/commit/0a472f20758eb2b6e277cdcf59b8db6a58b585b4)\" to \"[1dfeb84b5e99dbff354f993b3a762b2218ce23d4](https://github.com/sagemath/sagetrac-mirror/commit/1dfeb84b5e99dbff354f993b3a762b2218ce23d4)\".",
    "created_at": "2021-02-24T01:46:29Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477742",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0a472f20758eb2b6e277cdcf59b8db6a58b585b4](https://github.com/sagemath/sagetrac-mirror/commit/0a472f20758eb2b6e277cdcf59b8db6a58b585b4)" to "[1dfeb84b5e99dbff354f993b3a762b2218ce23d4](https://github.com/sagemath/sagetrac-mirror/commit/1dfeb84b5e99dbff354f993b3a762b2218ce23d4)".



---

archive/issue_comments_477743.json:
```json
{
    "body": "<a id='comment:54'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1dfeb84b5e99dbff354f993b3a762b2218ce23d4\">1dfeb84</a></td><td><code>build/make/Makefile.in (sage_docbuild-clean): New, run it from build-clean</code></td></tr></table>\n",
    "created_at": "2021-02-24T01:46:29Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477743",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1dfeb84b5e99dbff354f993b3a762b2218ce23d4">1dfeb84</a></td><td><code>build/make/Makefile.in (sage_docbuild-clean): New, run it from build-clean</code></td></tr></table>




---

archive/issue_comments_477744.json:
```json
{
    "body": "<a id='comment:55'></a>\nI don't know how to reproduce the `ModuleNotFoundError`... could you run `make sagelib-clean sagelib` and test again?",
    "created_at": "2021-02-24T01:58:18Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477744",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:55'></a>
I don't know how to reproduce the `ModuleNotFoundError`... could you run `make sagelib-clean sagelib` and test again?



---

archive/issue_comments_477745.json:
```json
{
    "body": "<a id='comment:56'></a>\nReplying to [mkoeppe](#comment%3A55):\n> I don't know how to reproduce the `ModuleNotFoundError`... could you run `make sagelib-clean sagelib` and test again?\n\n\nI did that and got the same failures. This was with Sage's own Python and #18272. Then I switched to just this branch and used homebrew's Python and got the same errors.",
    "created_at": "2021-02-24T05:01:44Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477745",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:56'></a>
Replying to [mkoeppe](#comment%3A55):
> I don't know how to reproduce the `ModuleNotFoundError`... could you run `make sagelib-clean sagelib` and test again?


I did that and got the same failures. This was with Sage's own Python and #18272. Then I switched to just this branch and used homebrew's Python and got the same errors.



---

archive/issue_comments_477746.json:
```json
{
    "body": "**Changing commit** from \"[1dfeb84b5e99dbff354f993b3a762b2218ce23d4](https://github.com/sagemath/sagetrac-mirror/commit/1dfeb84b5e99dbff354f993b3a762b2218ce23d4)\" to \"[881c4af5246e462c3e5cb8253a13a79209a885cd](https://github.com/sagemath/sagetrac-mirror/commit/881c4af5246e462c3e5cb8253a13a79209a885cd)\".",
    "created_at": "2021-02-24T06:08:09Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1dfeb84b5e99dbff354f993b3a762b2218ce23d4](https://github.com/sagemath/sagetrac-mirror/commit/1dfeb84b5e99dbff354f993b3a762b2218ce23d4)" to "[881c4af5246e462c3e5cb8253a13a79209a885cd](https://github.com/sagemath/sagetrac-mirror/commit/881c4af5246e462c3e5cb8253a13a79209a885cd)".



---

archive/issue_comments_477747.json:
```json
{
    "body": "<a id='comment:57'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/881c4af5246e462c3e5cb8253a13a79209a885cd\">881c4af</a></td><td><code>src/sage_setup/__init__.py: Restore</code></td></tr></table>\n",
    "created_at": "2021-02-24T06:08:09Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/881c4af5246e462c3e5cb8253a13a79209a885cd">881c4af</a></td><td><code>src/sage_setup/__init__.py: Restore</code></td></tr></table>




---

archive/issue_comments_477748.json:
```json
{
    "body": "<a id='comment:58'></a>\nThanks for testing - I've found the problem now. As a leftover from the previous version of the branch, `sage_setup` had lost its `__init__.py` file, causing an incomplete installation of it in `site-packages`",
    "created_at": "2021-02-24T06:10:34Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477748",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:58'></a>
Thanks for testing - I've found the problem now. As a leftover from the previous version of the branch, `sage_setup` had lost its `__init__.py` file, causing an incomplete installation of it in `site-packages`



---

archive/issue_comments_477749.json:
```json
{
    "body": "<a id='comment:59'></a>\nNow the `ext` directory is missing from `build/pkgs/sage_docbuild/src/build/lib/sage_docbuild` and similarly for `local/lib/python3.9/site-packages/sage_docbuild`, so the documentation fails to build. It thinks it succeeds \u2014 no error \u2014 but the log file says things like\n\n```\nBuilding ja/a_tour_of_sage.\n\n[a_tour_of] Extension error:\n[a_tour_of] Could not import extension sage_docbuild.ext.inventory_builder (exception: No module named 'sage_docbuild.ext')\nBuild finished. The built documents can be found in /Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/share/doc/sage/html/ja/a_tour_of_sage\n```",
    "created_at": "2021-02-24T18:21:58Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477749",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:59'></a>
Now the `ext` directory is missing from `build/pkgs/sage_docbuild/src/build/lib/sage_docbuild` and similarly for `local/lib/python3.9/site-packages/sage_docbuild`, so the documentation fails to build. It thinks it succeeds — no error — but the log file says things like

```
Building ja/a_tour_of_sage.

[a_tour_of] Extension error:
[a_tour_of] Could not import extension sage_docbuild.ext.inventory_builder (exception: No module named 'sage_docbuild.ext')
Build finished. The built documents can be found in /Users/palmieri/Desktop/Sage/sage_builds/TESTING/sage-9.3.beta7/local/share/doc/sage/html/ja/a_tour_of_sage
```



---

archive/issue_comments_477750.json:
```json
{
    "body": "**Changing commit** from \"[881c4af5246e462c3e5cb8253a13a79209a885cd](https://github.com/sagemath/sagetrac-mirror/commit/881c4af5246e462c3e5cb8253a13a79209a885cd)\" to \"[aaab1d3713d1bd2afb922466a086f8e85849a02d](https://github.com/sagemath/sagetrac-mirror/commit/aaab1d3713d1bd2afb922466a086f8e85849a02d)\".",
    "created_at": "2021-02-24T18:58:07Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[881c4af5246e462c3e5cb8253a13a79209a885cd](https://github.com/sagemath/sagetrac-mirror/commit/881c4af5246e462c3e5cb8253a13a79209a885cd)" to "[aaab1d3713d1bd2afb922466a086f8e85849a02d](https://github.com/sagemath/sagetrac-mirror/commit/aaab1d3713d1bd2afb922466a086f8e85849a02d)".



---

archive/issue_comments_477751.json:
```json
{
    "body": "<a id='comment:60'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4eca937ccecf113fb05563af09f753e461effa95\">4eca937</a></td><td><code>build/pkgs/sage_docbuild/src/setup.{cfg,py}: Use an explicit list of packages, add install_requires</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aaab1d3713d1bd2afb922466a086f8e85849a02d\">aaab1d3</a></td><td><code>build/pkgs/sage_docbuild/dependencies: Add dependencies on .py files</code></td></tr></table>\n",
    "created_at": "2021-02-24T18:58:07Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477751",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:60'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4eca937ccecf113fb05563af09f753e461effa95">4eca937</a></td><td><code>build/pkgs/sage_docbuild/src/setup.{cfg,py}: Use an explicit list of packages, add install_requires</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aaab1d3713d1bd2afb922466a086f8e85849a02d">aaab1d3</a></td><td><code>build/pkgs/sage_docbuild/dependencies: Add dependencies on .py files</code></td></tr></table>




---

archive/issue_comments_477752.json:
```json
{
    "body": "<a id='comment:61'></a>\nSorry, thanks for your patience with this. I was using `find_namespace_packages` wrong, now I have just replaced it with an explicit list of packages.",
    "created_at": "2021-02-24T18:59:29Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477752",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>
Sorry, thanks for your patience with this. I was using `find_namespace_packages` wrong, now I have just replaced it with an explicit list of packages.



---

archive/issue_comments_477753.json:
```json
{
    "body": "<a id='comment:62'></a>\nCan you explain the `dependencies` file? \n\n```\n$(PYTHON) sphinx ../pkgs/sage_docbuild/src/sage_docbuild/*.py ../pkgs/sage_docbuild/src/sage_docbuild/ext/*.py | $(PYTHON_TOOLCHAIN) sagelib\n```\nI don't know what `.../*.py` is supposed to accomplish: how does `make` know what py files are supposed to be there or what to do with those targets?",
    "created_at": "2021-02-25T00:59:10Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477753",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:62'></a>
Can you explain the `dependencies` file? 

```
$(PYTHON) sphinx ../pkgs/sage_docbuild/src/sage_docbuild/*.py ../pkgs/sage_docbuild/src/sage_docbuild/ext/*.py | $(PYTHON_TOOLCHAIN) sagelib
```
I don't know what `.../*.py` is supposed to accomplish: how does `make` know what py files are supposed to be there or what to do with those targets?



---

archive/issue_comments_477754.json:
```json
{
    "body": "<a id='comment:63'></a>\nThese dependencies point to `$SAGE_SRC/docbuild` (going through the symbolic link at `$SAGE_ROOT/build/pkgs/sage_docbuild/src`). `make` expands the wildcard pattern to the source file names there. When they are newer than the timestamp file `$SAGE_LOCAL/var/lib/sage/installed/sage_docbuild-9.3.beta7`, this triggers a rebuild/reinstallation of the package `sage_docbuild`.",
    "created_at": "2021-02-25T01:33:51Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477754",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:63'></a>
These dependencies point to `$SAGE_SRC/docbuild` (going through the symbolic link at `$SAGE_ROOT/build/pkgs/sage_docbuild/src`). `make` expands the wildcard pattern to the source file names there. When they are newer than the timestamp file `$SAGE_LOCAL/var/lib/sage/installed/sage_docbuild-9.3.beta7`, this triggers a rebuild/reinstallation of the package `sage_docbuild`.



---

archive/issue_events_268007.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-25T04:16:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268007"
}
```



---

archive/issue_events_268008.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-25T04:16:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268008"
}
```



---

archive/issue_comments_477755.json:
```json
{
    "body": "<a id='comment:64'></a>\nOkay, thanks, that makes sense. This is working for me now, both building from scratch and upgrading from #31344.",
    "created_at": "2021-02-25T04:16:15Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477755",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:64'></a>
Okay, thanks, that makes sense. This is working for me now, both building from scratch and upgrading from #31344.



---

archive/issue_comments_477756.json:
```json
{
    "body": "<a id='comment:65'></a>\nThank you!",
    "created_at": "2021-02-25T04:39:29Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477756",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:65'></a>
Thank you!



---

archive/issue_comments_477757.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)\" to \"[aaab1d3713d1bd2afb922466a086f8e85849a02d](https://github.com/sagemath/sagetrac-mirror/commit/aaab1d3713d1bd2afb922466a086f8e85849a02d)\".",
    "created_at": "2021-03-09T00:00:35Z",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30010#issuecomment-477757",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/split_sage_setup_docbuild_out_to_a_separate_package)" to "[aaab1d3713d1bd2afb922466a086f8e85849a02d](https://github.com/sagemath/sagetrac-mirror/commit/aaab1d3713d1bd2afb922466a086f8e85849a02d)".



---

archive/issue_events_268009.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-09T00:00:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268009"
}
```



---

archive/issue_events_268010.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-03-09T00:00:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30010",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30010#event-268010"
}
```
