# Issue 30912: sagelib: Update metadata for PyPI deployment as package sagemath-standard

archive/issues_030675.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nWe update the following items in `build/pkgs/sagelib/src/`:\n- Add `README.rst`\n- Add `LICENSE.txt` (for sagelib and documentation only - see discussion in #21571)\n- `setup.py` metadata (author, license, compatibility, ....)\n\nWe switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. \n\nsage-devel post regarding naming:\n- https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ\n\nNaming was discussed during https://wiki.sagemath.org/days111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.\n\n\n\nCC:  @dimpase @jhpalmieri @mmasdeu @videlec @malb @kiwifb @embray @NathanDunfield @slel @orlitzky @fchapoton @vbraun @seblabbe @williamstein @mwageringel @saraedum\n\nComponent: **build**\n\nKeywords: **sd111**\n\nAuthor: **Matthias Koeppe**\n\nBranch/Commit: **[`7ad4c0e`](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)**\n\nReviewer: **John Palmieri**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30912_\n\n",
    "closed_at": "2021-02-20T10:46:47Z",
    "created_at": "2020-11-14T04:14:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sagelib: Update metadata for PyPI deployment as package sagemath-standard",
    "type": "issue",
    "updated_at": "2021-02-20T10:46:47Z",
    "url": "https://github.com/sagemath/sage/issues/30912",
    "user": "https://github.com/mkoeppe"
}
```
<div id="comment:0"></div>

We update the following items in `build/pkgs/sagelib/src/`:
- Add `README.rst`
- Add `LICENSE.txt` (for sagelib and documentation only - see discussion in #21571)
- `setup.py` metadata (author, license, compatibility, ....)

We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. 

sage-devel post regarding naming:
- https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ

Naming was discussed during https://wiki.sagemath.org/days111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.



CC:  @dimpase @jhpalmieri @mmasdeu @videlec @malb @kiwifb @embray @NathanDunfield @slel @orlitzky @fchapoton @vbraun @seblabbe @williamstein @mwageringel @saraedum

Component: **build**

Keywords: **sd111**

Author: **Matthias Koeppe**

Branch/Commit: **[`7ad4c0e`](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)**

Reviewer: **John Palmieri**

_Issue created by migration from https://trac.sagemath.org/ticket/30912_





---

archive/issue_events_423210.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T04:14:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423210"
}
```



---

archive/issue_events_423211.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T04:14:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423211"
}
```



---

archive/issue_events_423212.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T04:14:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423212"
}
```



---

archive/issue_events_423213.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T04:14:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423213"
}
```



---

archive/issue_comments_494992.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nCurrently, `setup.py` thinks that the name of the distribution is `sage`.\n- `sage` is taken - see #28796\tClaim \"sage\" package on PyPI, replace unexplained package \"sage 0.0.0\"\n- `sagemath` is taken - https://pypi.org/project/sagemath/ \"This is a dummy package that checks that Sage is installed in the system\"\n- various other related and unrelated packages are published as sage-* - https://pypi.org/search/?q=sage\n\nI was planning to change it to `sagelib`. But we could also try a systematic approach regarding branding and call it `sagemath-standard` (in anticipation of the modularization project's smaller distributions that could be called `sagemath-core`, `sagemath-ntl`, etc., see #29705).",
    "created_at": "2020-11-14T04:37:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-494992",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">comment:1</div>

Currently, `setup.py` thinks that the name of the distribution is `sage`.
- `sage` is taken - see #28796	Claim "sage" package on PyPI, replace unexplained package "sage 0.0.0"
- `sagemath` is taken - https://pypi.org/project/sagemath/ "This is a dummy package that checks that Sage is installed in the system"
- various other related and unrelated packages are published as sage-* - https://pypi.org/search/?q=sage

I was planning to change it to `sagelib`. But we could also try a systematic approach regarding branding and call it `sagemath-standard` (in anticipation of the modularization project's smaller distributions that could be called `sagemath-core`, `sagemath-ntl`, etc., see #29705).



---

archive/issue_comments_494993.json:
```json
{
    "body": "Branch: **[u/mkoeppe/sagelib__update_metadata_for_pypi_deployment](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sagelib__update_metadata_for_pypi_deployment)**",
    "created_at": "2020-11-14T05:20:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-494993",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/sagelib__update_metadata_for_pypi_deployment](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sagelib__update_metadata_for_pypi_deployment)**



---

archive/issue_comments_494994.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4\"><code>2c40179</code></a></td><td><code>build/pkgs/sagelib/src: Update metadata</code></td></tr></table>\n",
    "created_at": "2020-11-14T05:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-494994",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4"><code>2c40179</code></a></td><td><code>build/pkgs/sagelib/src: Update metadata</code></td></tr></table>




---

archive/issue_events_423214.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T05:22:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423214"
}
```



---

archive/issue_comments_494995.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-11-14T05:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-494995",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_494996.json:
```json
{
    "body": "Commit: **[`2c40179`](https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4)**",
    "created_at": "2020-11-14T05:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-494996",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`2c40179`](https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4)**



---

archive/issue_comments_494997.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998\"><code>2a91862</code></a></td><td><code>build/pkgs/sagelib/src/README.rst: Add some text</code></td></tr></table>\n",
    "created_at": "2020-11-14T06:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-494997",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998"><code>2a91862</code></a></td><td><code>build/pkgs/sagelib/src/README.rst: Add some text</code></td></tr></table>




---

archive/issue_comments_494998.json:
```json
{
    "body": "Changed commit from **[`2c40179`](https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4)** to **[`2a91862`](https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998)**",
    "created_at": "2020-11-14T06:19:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-494998",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2c40179`](https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4)** to **[`2a91862`](https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998)**



---

archive/issue_comments_494999.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nshould we also claim https://pypi.org/project/sagemath/  ?",
    "created_at": "2020-11-14T11:41:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-494999",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

should we also claim https://pypi.org/project/sagemath/  ?



---

archive/issue_comments_495000.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe dummy package on pypi.org/project/sagemath was created so that other projects could be made to depend on it, and thus allow a user to install a custom package without having to recompile Sage. This has worked well to this day, you can install the darmonpoints package with a one-liner and alongside it checks that the installed version of Sage is the correct one.\n\nAt the time (2016 maybe?) we thought that this was a good idea, since it seemed like it was a long time until modularization would be a reality.\n\nThe dummy package only has one function (`check_version`) which compares the version passed as parameter with the sage version (via `from sage.all import version`).\n\nI don't mind giving away this package if modularity is happening, since then there would a proper way to check for each of the required packages (there should be a way to check for the \"whole sage\" being installed, since it may be hard to decide on all the dependencies).\n\nHow should we go about it? I would rather have this kind of functionality (and I am assuming that the other two package maintainers that use the dummy package would be with me) available during the transition, specially if it takes more than a week or two...",
    "created_at": "2020-11-15T16:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495000",
    "user": "https://github.com/mmasdeu"
}
```

<div id="comment:7" align="right">comment:7</div>

The dummy package on pypi.org/project/sagemath was created so that other projects could be made to depend on it, and thus allow a user to install a custom package without having to recompile Sage. This has worked well to this day, you can install the darmonpoints package with a one-liner and alongside it checks that the installed version of Sage is the correct one.

At the time (2016 maybe?) we thought that this was a good idea, since it seemed like it was a long time until modularization would be a reality.

The dummy package only has one function (`check_version`) which compares the version passed as parameter with the sage version (via `from sage.all import version`).

I don't mind giving away this package if modularity is happening, since then there would a proper way to check for each of the required packages (there should be a way to check for the "whole sage" being installed, since it may be hard to decide on all the dependencies).

How should we go about it? I would rather have this kind of functionality (and I am assuming that the other two package maintainers that use the dummy package would be with me) available during the transition, specially if it takes more than a week or two...



---

archive/issue_comments_495001.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI certainly don't need the `sagemath` name itself any time soon - I would use suffixed names such as `sagemath-standard`.",
    "created_at": "2020-11-15T23:20:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495001",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

I certainly don't need the `sagemath` name itself any time soon - I would use suffixed names such as `sagemath-standard`.



---

archive/issue_comments_495002.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,5 @@\n \n We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. \n \n+sage-devel post regarding naming:\n+- https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ\n``````\n",
    "created_at": "2020-11-17T05:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495002",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,5 @@
 
 We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. 
 
+sage-devel post regarding naming:
+- https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ
``````




---

archive/issue_comments_495003.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nWhat's the reason that this new metadata is only in build/.../sagelib and not (also?) under `src`?\nOther than that, the changes look good to me.\n\nMoreover, FYI, [PEP 621](https://www.python.org/dev/peps/pep-0621/) for Storing project metadata in pyproject.toml has been provisionally accepted (and will be fully accepted latest on 2021-03-01). Once setuptools supports this, I would propose to follow it and put the metadata in pyproject.toml.",
    "created_at": "2020-11-27T11:14:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495003",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:13" align="right">comment:13</div>

What's the reason that this new metadata is only in build/.../sagelib and not (also?) under `src`?
Other than that, the changes look good to me.

Moreover, FYI, [PEP 621](https://www.python.org/dev/peps/pep-0621/) for Storing project metadata in pyproject.toml has been provisionally accepted (and will be fully accepted latest on 2021-03-01). Once setuptools supports this, I would propose to follow it and put the metadata in pyproject.toml.



---

archive/issue_comments_495004.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6432727a4fb106206dd0aae3d8e62715cd6725b3\"><code>6432727</code></a></td><td><code>Merge tag '9.3.beta2' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a693f22c6044c8baa80f744519855371e3c4aae\"><code>4a693f2</code></a></td><td><code>Move build/pkgs/sagelib/src/setup.cfg to SAGE_ROOT/src, replace by symlink</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66\"><code>ea182d7</code></a></td><td><code>Copy changes from build/pkgs/sagelib/src to src</code></td></tr></table>\n",
    "created_at": "2020-11-27T21:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495004",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6432727a4fb106206dd0aae3d8e62715cd6725b3"><code>6432727</code></a></td><td><code>Merge tag '9.3.beta2' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a693f22c6044c8baa80f744519855371e3c4aae"><code>4a693f2</code></a></td><td><code>Move build/pkgs/sagelib/src/setup.cfg to SAGE_ROOT/src, replace by symlink</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66"><code>ea182d7</code></a></td><td><code>Copy changes from build/pkgs/sagelib/src to src</code></td></tr></table>




---

archive/issue_comments_495005.json:
```json
{
    "body": "Changed commit from **[`2a91862`](https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998)** to **[`ea182d7`](https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66)**",
    "created_at": "2020-11-27T21:26:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495005",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2a91862`](https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998)** to **[`ea182d7`](https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66)**



---

archive/issue_comments_495006.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@tobiasdiez](#comment%3A13):\n> What's the reason that this new metadata is only in build/.../sagelib and not (also?) under `src`?\n\nI guess I had wanted to avoid merge conflicts with #30371, but here you go.",
    "created_at": "2020-11-27T21:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495006",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@tobiasdiez](#comment%3A13):
> What's the reason that this new metadata is only in build/.../sagelib and not (also?) under `src`?

I guess I had wanted to avoid merge conflicts with #30371, but here you go.



---

archive/issue_comments_495007.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@tobiasdiez](#comment%3A13):\n> Moreover, FYI, [PEP 621](https://www.python.org/dev/peps/pep-0621/) for Storing project metadata in pyproject.toml has been provisionally accepted (and will be fully accepted latest on 2021-03-01). Once setuptools supports this, I would propose to follow it and put the metadata in pyproject.toml.\n\nYes, it's good to see the progress in this direction.",
    "created_at": "2020-11-27T21:28:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495007",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@tobiasdiez](#comment%3A13):
> Moreover, FYI, [PEP 621](https://www.python.org/dev/peps/pep-0621/) for Storing project metadata in pyproject.toml has been provisionally accepted (and will be fully accepted latest on 2021-03-01). Once setuptools supports this, I would propose to follow it and put the metadata in pyproject.toml.

Yes, it's good to see the progress in this direction.



---

archive/issue_comments_495008.json:
```json
{
    "body": "Changed commit from **[`ea182d7`](https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66)** to **[`a1a10b9`](https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147)**",
    "created_at": "2020-11-27T21:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495008",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ea182d7`](https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66)** to **[`a1a10b9`](https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147)**



---

archive/issue_comments_495009.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147\"><code>a1a10b9</code></a></td><td><code>src/VERSION.txt: New</code></td></tr></table>\n",
    "created_at": "2020-11-27T21:29:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495009",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147"><code>a1a10b9</code></a></td><td><code>src/VERSION.txt: New</code></td></tr></table>




---

archive/issue_comments_495010.json:
```json
{
    "body": "Changed keywords from none to **sd111**",
    "created_at": "2020-12-06T17:44:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495010",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from none to **sd111**



---

archive/issue_events_423215.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-09T01:32:51Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "title_is": "sagelib: Update metadata for PyPI deployment as package sagemath-standard",
    "title_was": "sagelib: Update metadata for PyPI deployment",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423215"
}
```



---

archive/issue_comments_495011.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,7 @@\n \n sage-devel post regarding naming:\n - https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ\n+\n+Naming was discussed during SageDays 111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.\n+\n+\n``````\n",
    "created_at": "2020-12-09T05:59:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495011",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,7 @@
 
 sage-devel post regarding naming:
 - https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ
+
+Naming was discussed during SageDays 111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.
+
+
``````




---

archive/issue_comments_495012.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@mmasdeu](#comment%3A7):\n> The dummy package on pypi.org/project/sagemath was created so that\n> other projects could be made to depend on it, and thus allow a user\n> to install a custom package without having to recompile Sage.\n> This has worked well to this day, you can install the darmonpoints\n> package with a one-liner and alongside it checks that the installed\n> version of Sage is the correct one.\n> \n> At the time (2016 maybe?) we thought that this was a good idea,\n> since it seemed like it was a long time until modularization\n> would be a reality.\n> \n> The dummy package only has one function (`check_version`) which\n> compares the version passed as parameter with the sage version\n> (via `from sage.all import version`).\n> \n> I don't mind giving away this package if modularity is happening,\n> since then there would a proper way to check for each of the required\n> packages (there should be a way to check for the \"whole sage\" being\n> installed, since it may be hard to decide on all the dependencies).\n> \n> How should we go about it? I would rather have this kind of\n> functionality (and I am assuming that the other two package\n> maintainers that use the dummy package would be with me) available\n> during the transition, specially if it takes more than a week or two...\n\nMaybe there could be a package with a more\ndescriptive name for that use case?\n\nMaybe one of the following names, or something similar?\n- `sagemath_installed`\n- `sagemath_version`\n- `sagemath_checkinstalled`\n- `sagemath_checkversion`\n- `sagemath_probe`\n\nSome users assume from the name that it actually installs Sage,\nand are surprised after installing it that things don't work as\nexpected; this comes up once in a while on the help and support\nchannels such as Ask Sage, sage-support, Stack Overflow...\n\nNot an emergency, but something to consider.",
    "created_at": "2020-12-09T15:20:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495012",
    "user": "https://github.com/slel"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@mmasdeu](#comment%3A7):
> The dummy package on pypi.org/project/sagemath was created so that
> other projects could be made to depend on it, and thus allow a user
> to install a custom package without having to recompile Sage.
> This has worked well to this day, you can install the darmonpoints
> package with a one-liner and alongside it checks that the installed
> version of Sage is the correct one.
> 
> At the time (2016 maybe?) we thought that this was a good idea,
> since it seemed like it was a long time until modularization
> would be a reality.
> 
> The dummy package only has one function (`check_version`) which
> compares the version passed as parameter with the sage version
> (via `from sage.all import version`).
> 
> I don't mind giving away this package if modularity is happening,
> since then there would a proper way to check for each of the required
> packages (there should be a way to check for the "whole sage" being
> installed, since it may be hard to decide on all the dependencies).
> 
> How should we go about it? I would rather have this kind of
> functionality (and I am assuming that the other two package
> maintainers that use the dummy package would be with me) available
> during the transition, specially if it takes more than a week or two...

Maybe there could be a package with a more
descriptive name for that use case?

Maybe one of the following names, or something similar?
- `sagemath_installed`
- `sagemath_version`
- `sagemath_checkinstalled`
- `sagemath_checkversion`
- `sagemath_probe`

Some users assume from the name that it actually installs Sage,
and are surprised after installing it that things don't work as
expected; this comes up once in a while on the help and support
channels such as Ask Sage, sage-support, Stack Overflow...

Not an emergency, but something to consider.



---

archive/issue_comments_495013.json:
```json
{
    "body": "Work Issues: **add license file**",
    "created_at": "2020-12-11T23:41:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495013",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **add license file**



---

archive/issue_events_423216.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-11T23:41:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423216"
}
```



---

archive/issue_events_423217.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-11T23:41:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423217"
}
```



---

archive/issue_comments_495014.json:
```json
{
    "body": "Changed commit from **[`a1a10b9`](https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147)** to **[`deb9eb3`](https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247)**",
    "created_at": "2020-12-12T00:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495014",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a1a10b9`](https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147)** to **[`deb9eb3`](https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247)**



---

archive/issue_comments_495015.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5697335ed14c929adb01a3fafe95f82b79248918\"><code>5697335</code></a></td><td><code>src/setup.cfg: Add license_file=LICENSE.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247\"><code>deb9eb3</code></a></td><td><code>Merge tag '9.3.beta3' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr></table>\n",
    "created_at": "2020-12-12T00:02:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495015",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5697335ed14c929adb01a3fafe95f82b79248918"><code>5697335</code></a></td><td><code>src/setup.cfg: Add license_file=LICENSE.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247"><code>deb9eb3</code></a></td><td><code>Merge tag '9.3.beta3' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr></table>




---

archive/issue_comments_495016.json:
```json
{
    "body": "Changed work issues from **add license file** to none",
    "created_at": "2020-12-12T00:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495016",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **add license file** to none



---

archive/issue_events_423218.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-12T00:07:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423218"
}
```



---

archive/issue_events_423219.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-12T00:07:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423219"
}
```



---

archive/issue_comments_495017.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n We update the following items in `build/pkgs/sagelib/src/`:\n-- Add README\n+- Add `README.rst`\n+- Add `LICENSE.txt` (for sagelib and documentation only - see discussion in #21571)\n - `setup.py` metadata (author, license, compatibility, ....)\n \n We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. \n``````\n",
    "created_at": "2020-12-12T00:07:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495017",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 We update the following items in `build/pkgs/sagelib/src/`:
-- Add README
+- Add `README.rst`
+- Add `LICENSE.txt` (for sagelib and documentation only - see discussion in #21571)
 - `setup.py` metadata (author, license, compatibility, ....)
 
 We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. 
``````




---

archive/issue_comments_495018.json:
```json
{
    "body": "Changed commit from **[`deb9eb3`](https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247)** to **[`7ad4c0e`](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)**",
    "created_at": "2020-12-22T15:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495018",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`deb9eb3`](https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247)** to **[`7ad4c0e`](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)**



---

archive/issue_comments_495019.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918\"><code>7ad4c0e</code></a></td><td><code>Merge tag '9.3.beta4' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr></table>\n",
    "created_at": "2020-12-22T15:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495019",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918"><code>7ad4c0e</code></a></td><td><code>Merge tag '9.3.beta4' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr></table>




---

archive/issue_comments_495020.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nStill hoping for someone with recent Python packaging experience to review this ticket.",
    "created_at": "2020-12-22T15:45:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495020",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Still hoping for someone with recent Python packaging experience to review this ticket.



---

archive/issue_comments_495021.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,6 +8,6 @@\n sage-devel post regarding naming:\n - https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ\n \n-Naming was discussed during SageDays 111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.\n+Naming was discussed during https://wiki.sagemath.org/days111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.\n \n \n``````\n",
    "created_at": "2020-12-27T18:47:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495021",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,6 +8,6 @@
 sage-devel post regarding naming:
 - https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ
 
-Naming was discussed during SageDays 111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.
+Naming was discussed during https://wiki.sagemath.org/days111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.
 
 
``````




---

archive/issue_events_423220.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-29T00:34:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423220"
}
```



---

archive/issue_events_423221.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-29T00:34:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423221"
}
```



---

archive/issue_comments_495022.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nNeeds review.",
    "created_at": "2021-01-16T19:27:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495022",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Needs review.



---

archive/issue_comments_495023.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nCan we please get this into 9.3?",
    "created_at": "2021-02-02T17:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495023",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Can we please get this into 9.3?



---

archive/issue_comments_495024.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nI'm seeing a doctest failure:\n\n```\nsage -t --warn-long 95.5 --random-seed=0 src/sage/all.py\n**********************************************************************\nFile \"src/sage/all.py\", line 333, in sage.all._write_started_file\nFailed example:\n    os.path.isfile(started_file)  # optional - build\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\nIs it spurious or could it be caused by this ticket?",
    "created_at": "2021-02-05T02:50:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495024",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">comment:36</div>

I'm seeing a doctest failure:

```
sage -t --warn-long 95.5 --random-seed=0 src/sage/all.py
**********************************************************************
File "src/sage/all.py", line 333, in sage.all._write_started_file
Failed example:
    os.path.isfile(started_file)  # optional - build
Expected:
    True
Got:
    False
**********************************************************************
```
Is it spurious or could it be caused by this ticket?



---

archive/issue_comments_495025.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nIf the docbuild fails with an error, then `make` does not get to the target that creates the started_file. You can fix this with `make build-start`",
    "created_at": "2021-02-05T02:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495025",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:37" align="right">comment:37</div>

If the docbuild fails with an error, then `make` does not get to the target that creates the started_file. You can fix this with `make build-start`



---

archive/issue_comments_495026.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThat's too bad. I thought, but maybe I'm wrong about this, that starting Sage used to create the started_file, and I made sure to run Sage before rerunning this doctest. You're right, in any case: `make build-start` fixed the doctest.",
    "created_at": "2021-02-05T03:28:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495026",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:38" align="right">comment:38</div>

That's too bad. I thought, but maybe I'm wrong about this, that starting Sage used to create the started_file, and I made sure to run Sage before rerunning this doctest. You're right, in any case: `make build-start` fixed the doctest.



---

archive/issue_comments_495027.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI don't think starting sage creates the started file. It's only happening as part of the build in `build/bin/sage-starts`",
    "created_at": "2021-02-05T03:32:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495027",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

I don't think starting sage creates the started file. It's only happening as part of the build in `build/bin/sage-starts`



---

archive/issue_comments_495028.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nsince #13988",
    "created_at": "2021-02-05T03:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495028",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

since #13988



---

archive/issue_comments_495029.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2021-02-05T04:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495029",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_events_423222.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-05T04:16:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423222"
}
```



---

archive/issue_events_423223.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-02-05T04:16:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423223"
}
```



---

archive/issue_comments_495030.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nI am far from an expert in `setuptools`, but this looks okay to me.",
    "created_at": "2021-02-05T04:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495030",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">comment:41</div>

I am far from an expert in `setuptools`, but this looks okay to me.



---

archive/issue_comments_495031.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nThanks!",
    "created_at": "2021-02-05T04:29:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495031",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Thanks!



---

archive/issue_comments_495032.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nThis is fun. Volker is in the process of merging the ticket, which means I get to test it in sage-on-gentoo\n\n```\n>>> Compiling source in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src ...\n * python3_7: running distutils-r1_run_phase python_compile\npython3.7 setup.py build -j 8\ndistributions = ['', 'sage-bliss', 'sage-meataxe']\nDiscovering Python/Cython source code....\nDiscovered Python/Cython sources, time: 0.20 seconds.\n************************************************************************\nTraceback (most recent call last):\n  File \"setup.py\", line 153, in <module>\n    ext_modules = cython_modules)\n  File \"/usr/lib/python3.7/site-packages/setuptools/__init__.py\", line 153, in setup\n    return distutils.core.setup(**attrs)\n  File \"/usr/lib/python3.7/distutils/core.py\", line 121, in setup\n    dist.parse_config_files()\n  File \"/usr/lib/python3.7/site-packages/setuptools/dist.py\", line 668, in parse_config_files\n    ignore_option_errors=ignore_option_errors)\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 157, in parse_configuration\n    meta.parse()\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 463, in parse\n    section_parser_method(section_options)\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 436, in parse_section\n    self[name] = value\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 220, in __setitem__\n    value = parser(value)\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 548, in _parse_version\n    raise DistutilsOptionError(tmpl.format(**locals()))\ndistutils.errors.DistutilsOptionError: Version loaded from file: VERSION.txt does not comply with PEP 440: SageMath version 9.3.beta7, Release Date: 2021-02-07\n************************************************************************\nError building the Sage library\n```\nYou can read the PEP in question here [https://www.python.org/dev/peps/pep-0440/](https://www.python.org/dev/peps/pep-0440/). I am currently using the Gentoo stable setuptools which is 50.3.0. sage is shipping 51.1.1 so I am guessing someone had a change of heart about strict enforcement between those two. I'll check by updating my own to the latest in Gentoo's tree (53.0.0).\n\nBut if the PEP get enforced the days of naming release .betaN and .rcN are numbered.",
    "created_at": "2021-02-14T03:00:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495032",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:43" align="right">comment:43</div>

This is fun. Volker is in the process of merging the ticket, which means I get to test it in sage-on-gentoo

```
>>> Compiling source in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src ...
 * python3_7: running distutils-r1_run_phase python_compile
python3.7 setup.py build -j 8
distributions = ['', 'sage-bliss', 'sage-meataxe']
Discovering Python/Cython source code....
Discovered Python/Cython sources, time: 0.20 seconds.
************************************************************************
Traceback (most recent call last):
  File "setup.py", line 153, in <module>
    ext_modules = cython_modules)
  File "/usr/lib/python3.7/site-packages/setuptools/__init__.py", line 153, in setup
    return distutils.core.setup(**attrs)
  File "/usr/lib/python3.7/distutils/core.py", line 121, in setup
    dist.parse_config_files()
  File "/usr/lib/python3.7/site-packages/setuptools/dist.py", line 668, in parse_config_files
    ignore_option_errors=ignore_option_errors)
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 157, in parse_configuration
    meta.parse()
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 463, in parse
    section_parser_method(section_options)
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 436, in parse_section
    self[name] = value
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 220, in __setitem__
    value = parser(value)
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 548, in _parse_version
    raise DistutilsOptionError(tmpl.format(**locals()))
distutils.errors.DistutilsOptionError: Version loaded from file: VERSION.txt does not comply with PEP 440: SageMath version 9.3.beta7, Release Date: 2021-02-07
************************************************************************
Error building the Sage library
```
You can read the PEP in question here [https://www.python.org/dev/peps/pep-0440/](https://www.python.org/dev/peps/pep-0440/). I am currently using the Gentoo stable setuptools which is 50.3.0. sage is shipping 51.1.1 so I am guessing someone had a change of heart about strict enforcement between those two. I'll check by updating my own to the latest in Gentoo's tree (53.0.0).

But if the PEP get enforced the days of naming release .betaN and .rcN are numbered.



---

archive/issue_comments_495033.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReading more closely `a`, `b` and `rc` are allowed.",
    "created_at": "2021-02-14T03:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495033",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">comment:44</div>

Reading more closely `a`, `b` and `rc` are allowed.



---

archive/issue_comments_495034.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nStill broken for me with setuptools-53.0.0.",
    "created_at": "2021-02-14T03:11:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495034",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:45" align="right">comment:45</div>

Still broken for me with setuptools-53.0.0.



---

archive/issue_comments_495035.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nThis does not affect the Sage distribution (it uses the other copy of `setup.py`) and is fixed already in #31357.",
    "created_at": "2021-02-14T03:25:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495035",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

This does not affect the Sage distribution (it uses the other copy of `setup.py`) and is fixed already in #31357.



---

archive/issue_comments_495036.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI see. Switching to that copy is possible but that messes up how I currently do the documentation. I am not quite sure how much effort yet but it probably should be done.",
    "created_at": "2021-02-14T03:47:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495036",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:47" align="right">comment:47</div>

I see. Switching to that copy is possible but that messes up how I currently do the documentation. I am not quite sure how much effort yet but it probably should be done.



---

archive/issue_comments_495037.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@kiwifb](#comment%3A47):\n> I see. Switching to that copy is possible but that messes up how I currently do the documentation. I am not quite sure how much effort yet but it probably should be done.\n\nLesson of the day, patch doesn't like symbolic links which means that I am better off waiting for #31357.",
    "created_at": "2021-02-14T04:28:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495037",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@kiwifb](#comment%3A47):
> I see. Switching to that copy is possible but that messes up how I currently do the documentation. I am not quite sure how much effort yet but it probably should be done.

Lesson of the day, patch doesn't like symbolic links which means that I am better off waiting for #31357.



---

archive/issue_events_423224.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-02-20T10:46:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423224"
}
```



---

archive/issue_events_423225.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c61a5bea306bcf728e48d28fccf4a21c5707121d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-02-20T10:46:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30912#event-423225"
}
```



---

archive/issue_comments_495038.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sagelib__update_metadata_for_pypi_deployment](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sagelib__update_metadata_for_pypi_deployment)** to **[`7ad4c0e`](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)**",
    "created_at": "2021-02-20T10:46:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30912#issuecomment-495038",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/sagelib__update_metadata_for_pypi_deployment](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sagelib__update_metadata_for_pypi_deployment)** to **[`7ad4c0e`](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)**
