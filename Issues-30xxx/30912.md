# Issue 30912: sagelib: Update metadata for PyPI deployment as package sagemath-standard

archive/issues_030675.json:
```json
{
    "body": "We update the following items in `build/pkgs/sagelib/src/`:\n- Add `README.rst`\n- Add `LICENSE.txt` (for sagelib and documentation only - see discussion in #21571)\n- `setup.py` metadata (author, license, compatibility, ....)\n\nWe switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. \n\nsage-devel post regarding naming:\n- https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ\n\nNaming was discussed during https://wiki.sagemath.org/days111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.\n\n\n\n**CC:**  @dimpase @jhpalmieri @mmasdeu @videlec @malb @kiwifb @embray @NathanDunfield @slel @orlitzky @fchapoton @vbraun @seblabbe @williamstein @mwageringel @saraedum\n\n**Keywords:** sd111\n\n**Branch/Commit:** [7ad4c0e6da58f8851cfbced0e9c1a66c9479f918](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)\n\n**Reviewer:** John Palmieri\n\n**Author:** Matthias Koeppe\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30912\n\n",
    "closed_at": "2021-02-20T10:46:47Z",
    "created_at": "2020-11-14T04:14:52Z",
    "labels": [
        "component: build",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "sagelib: Update metadata for PyPI deployment as package sagemath-standard",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30912",
    "user": "https://github.com/mkoeppe"
}
```
We update the following items in `build/pkgs/sagelib/src/`:
- Add `README.rst`
- Add `LICENSE.txt` (for sagelib and documentation only - see discussion in #21571)
- `setup.py` metadata (author, license, compatibility, ....)

We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. 

sage-devel post regarding naming:
- https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ

Naming was discussed during https://wiki.sagemath.org/days111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.



**CC:**  @dimpase @jhpalmieri @mmasdeu @videlec @malb @kiwifb @embray @NathanDunfield @slel @orlitzky @fchapoton @vbraun @seblabbe @williamstein @mwageringel @saraedum

**Keywords:** sd111

**Branch/Commit:** [7ad4c0e6da58f8851cfbced0e9c1a66c9479f918](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)

**Reviewer:** John Palmieri

**Author:** Matthias Koeppe

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/30912





---

archive/issue_comments_613569.json:
```json
{
    "body": "<a id='comment:1'></a>\nCurrently, `setup.py` thinks that the name of the distribution is `sage`.\n- `sage` is taken - see #28796\tClaim \"sage\" package on PyPI, replace unexplained package \"sage 0.0.0\"\n- `sagemath` is taken - https://pypi.org/project/sagemath/ \"This is a dummy package that checks that Sage is installed in the system\"\n- various other related and unrelated packages are published as sage-* - https://pypi.org/search/?q=sage\n\nI was planning to change it to `sagelib`. But we could also try a systematic approach regarding branding and call it `sagemath-standard` (in anticipation of the modularization project's smaller distributions that could be called `sagemath-core`, `sagemath-ntl`, etc., see #29705).",
    "created_at": "2020-11-14T04:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613569",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Currently, `setup.py` thinks that the name of the distribution is `sage`.
- `sage` is taken - see #28796	Claim "sage" package on PyPI, replace unexplained package "sage 0.0.0"
- `sagemath` is taken - https://pypi.org/project/sagemath/ "This is a dummy package that checks that Sage is installed in the system"
- various other related and unrelated packages are published as sage-* - https://pypi.org/search/?q=sage

I was planning to change it to `sagelib`. But we could also try a systematic approach regarding branding and call it `sagemath-standard` (in anticipation of the modularization project's smaller distributions that could be called `sagemath-core`, `sagemath-ntl`, etc., see #29705).



---

archive/issue_comments_613570.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/sagelib__update_metadata_for_pypi_deployment](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sagelib__update_metadata_for_pypi_deployment)",
    "created_at": "2020-11-14T05:20:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613570",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/sagelib__update_metadata_for_pypi_deployment](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sagelib__update_metadata_for_pypi_deployment)



---

archive/issue_comments_613571.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4\">2c40179</a></td><td><code>build/pkgs/sagelib/src: Update metadata</code></td></tr></table>\n",
    "created_at": "2020-11-14T05:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613571",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4">2c40179</a></td><td><code>build/pkgs/sagelib/src: Update metadata</code></td></tr></table>




---

archive/issue_comments_613572.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-11-14T05:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613572",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_613573.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-11-14T05:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613573",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_613574.json:
```json
{
    "body": "**Commit:** [2c40179e64bc01894e77de02a4b3399cea36c6f4](https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4)",
    "created_at": "2020-11-14T05:22:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613574",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [2c40179e64bc01894e77de02a4b3399cea36c6f4](https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4)



---

archive/issue_comments_613575.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998\">2a91862</a></td><td><code>build/pkgs/sagelib/src/README.rst: Add some text</code></td></tr></table>\n",
    "created_at": "2020-11-14T06:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998">2a91862</a></td><td><code>build/pkgs/sagelib/src/README.rst: Add some text</code></td></tr></table>




---

archive/issue_comments_613576.json:
```json
{
    "body": "**Changing commit** from \"[2c40179e64bc01894e77de02a4b3399cea36c6f4](https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4)\" to \"[2a91862c279caa62eee6b7d6d57fac1d99dd4998](https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998)\".",
    "created_at": "2020-11-14T06:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613576",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2c40179e64bc01894e77de02a4b3399cea36c6f4](https://github.com/sagemath/sagetrac-mirror/commit/2c40179e64bc01894e77de02a4b3399cea36c6f4)" to "[2a91862c279caa62eee6b7d6d57fac1d99dd4998](https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998)".



---

archive/issue_comments_613577.json:
```json
{
    "body": "<a id='comment:5'></a>\nshould we also claim https://pypi.org/project/sagemath/  ?",
    "created_at": "2020-11-14T11:41:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613577",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
should we also claim https://pypi.org/project/sagemath/  ?



---

archive/issue_comments_613578.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe dummy package on pypi.org/project/sagemath was created so that other projects could be made to depend on it, and thus allow a user to install a custom package without having to recompile Sage. This has worked well to this day, you can install the darmonpoints package with a one-liner and alongside it checks that the installed version of Sage is the correct one.\n\nAt the time (2016 maybe?) we thought that this was a good idea, since it seemed like it was a long time until modularization would be a reality.\n\nThe dummy package only has one function (`check_version`) which compares the version passed as parameter with the sage version (via `from sage.all import version`).\n\nI don't mind giving away this package if modularity is happening, since then there would a proper way to check for each of the required packages (there should be a way to check for the \"whole sage\" being installed, since it may be hard to decide on all the dependencies).\n\nHow should we go about it? I would rather have this kind of functionality (and I am assuming that the other two package maintainers that use the dummy package would be with me) available during the transition, specially if it takes more than a week or two...",
    "created_at": "2020-11-15T16:58:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613578",
    "user": "https://github.com/mmasdeu"
}
```

<a id='comment:7'></a>
The dummy package on pypi.org/project/sagemath was created so that other projects could be made to depend on it, and thus allow a user to install a custom package without having to recompile Sage. This has worked well to this day, you can install the darmonpoints package with a one-liner and alongside it checks that the installed version of Sage is the correct one.

At the time (2016 maybe?) we thought that this was a good idea, since it seemed like it was a long time until modularization would be a reality.

The dummy package only has one function (`check_version`) which compares the version passed as parameter with the sage version (via `from sage.all import version`).

I don't mind giving away this package if modularity is happening, since then there would a proper way to check for each of the required packages (there should be a way to check for the "whole sage" being installed, since it may be hard to decide on all the dependencies).

How should we go about it? I would rather have this kind of functionality (and I am assuming that the other two package maintainers that use the dummy package would be with me) available during the transition, specially if it takes more than a week or two...



---

archive/issue_comments_613579.json:
```json
{
    "body": "<a id='comment:8'></a>\nI certainly don't need the `sagemath` name itself any time soon - I would use suffixed names such as `sagemath-standard`.",
    "created_at": "2020-11-15T23:20:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613579",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
I certainly don't need the `sagemath` name itself any time soon - I would use suffixed names such as `sagemath-standard`.



---

archive/issue_comments_613580.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,5 @@\n \n We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. \n \n+sage-devel post regarding naming:\n+- https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ\n``````\n",
    "created_at": "2020-11-17T05:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613580",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,5 @@
 
 We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. 
 
+sage-devel post regarding naming:
+- https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ
``````




---

archive/issue_comments_613581.json:
```json
{
    "body": "<a id='comment:13'></a>\nWhat's the reason that this new metadata is only in build/.../sagelib and not (also?) under `src`?\nOther than that, the changes look good to me.\n\nMoreover, FYI, [PEP 621](https://www.python.org/dev/peps/pep-0621/) for Storing project metadata in pyproject.toml has been provisionally accepted (and will be fully accepted latest on 2021-03-01). Once setuptools supports this, I would propose to follow it and put the metadata in pyproject.toml.",
    "created_at": "2020-11-27T11:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613581",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:13'></a>
What's the reason that this new metadata is only in build/.../sagelib and not (also?) under `src`?
Other than that, the changes look good to me.

Moreover, FYI, [PEP 621](https://www.python.org/dev/peps/pep-0621/) for Storing project metadata in pyproject.toml has been provisionally accepted (and will be fully accepted latest on 2021-03-01). Once setuptools supports this, I would propose to follow it and put the metadata in pyproject.toml.



---

archive/issue_comments_613582.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6432727a4fb106206dd0aae3d8e62715cd6725b3\">6432727</a></td><td><code>Merge tag '9.3.beta2' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a693f22c6044c8baa80f744519855371e3c4aae\">4a693f2</a></td><td><code>Move build/pkgs/sagelib/src/setup.cfg to SAGE_ROOT/src, replace by symlink</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66\">ea182d7</a></td><td><code>Copy changes from build/pkgs/sagelib/src to src</code></td></tr></table>\n",
    "created_at": "2020-11-27T21:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6432727a4fb106206dd0aae3d8e62715cd6725b3">6432727</a></td><td><code>Merge tag '9.3.beta2' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a693f22c6044c8baa80f744519855371e3c4aae">4a693f2</a></td><td><code>Move build/pkgs/sagelib/src/setup.cfg to SAGE_ROOT/src, replace by symlink</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66">ea182d7</a></td><td><code>Copy changes from build/pkgs/sagelib/src to src</code></td></tr></table>




---

archive/issue_comments_613583.json:
```json
{
    "body": "**Changing commit** from \"[2a91862c279caa62eee6b7d6d57fac1d99dd4998](https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998)\" to \"[ea182d7302b3d362bbd38b548cda65c86e3b6f66](https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66)\".",
    "created_at": "2020-11-27T21:26:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613583",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2a91862c279caa62eee6b7d6d57fac1d99dd4998](https://github.com/sagemath/sagetrac-mirror/commit/2a91862c279caa62eee6b7d6d57fac1d99dd4998)" to "[ea182d7302b3d362bbd38b548cda65c86e3b6f66](https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66)".



---

archive/issue_comments_613584.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [gh-tobiasdiez](#comment%3A13):\n> What's the reason that this new metadata is only in build/.../sagelib and not (also?) under `src`?\n\n\nI guess I had wanted to avoid merge conflicts with #30371, but here you go.",
    "created_at": "2020-11-27T21:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613584",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
Replying to [gh-tobiasdiez](#comment%3A13):
> What's the reason that this new metadata is only in build/.../sagelib and not (also?) under `src`?


I guess I had wanted to avoid merge conflicts with #30371, but here you go.



---

archive/issue_comments_613585.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [gh-tobiasdiez](#comment%3A13):\n> Moreover, FYI, [PEP 621](https://www.python.org/dev/peps/pep-0621/) for Storing project metadata in pyproject.toml has been provisionally accepted (and will be fully accepted latest on 2021-03-01). Once setuptools supports this, I would propose to follow it and put the metadata in pyproject.toml.\n\n\nYes, it's good to see the progress in this direction.",
    "created_at": "2020-11-27T21:28:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613585",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>
Replying to [gh-tobiasdiez](#comment%3A13):
> Moreover, FYI, [PEP 621](https://www.python.org/dev/peps/pep-0621/) for Storing project metadata in pyproject.toml has been provisionally accepted (and will be fully accepted latest on 2021-03-01). Once setuptools supports this, I would propose to follow it and put the metadata in pyproject.toml.


Yes, it's good to see the progress in this direction.



---

archive/issue_comments_613586.json:
```json
{
    "body": "**Changing commit** from \"[ea182d7302b3d362bbd38b548cda65c86e3b6f66](https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66)\" to \"[a1a10b9b524e63574bbf1de2c4ce6f149116f147](https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147)\".",
    "created_at": "2020-11-27T21:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613586",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ea182d7302b3d362bbd38b548cda65c86e3b6f66](https://github.com/sagemath/sagetrac-mirror/commit/ea182d7302b3d362bbd38b548cda65c86e3b6f66)" to "[a1a10b9b524e63574bbf1de2c4ce6f149116f147](https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147)".



---

archive/issue_comments_613587.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147\">a1a10b9</a></td><td><code>src/VERSION.txt: New</code></td></tr></table>\n",
    "created_at": "2020-11-27T21:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613587",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147">a1a10b9</a></td><td><code>src/VERSION.txt: New</code></td></tr></table>




---

archive/issue_comments_613588.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd111\".",
    "created_at": "2020-12-06T17:44:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613588",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd111".



---

archive/issue_events_090929.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "rename": {
        "from": "sagelib: Update metadata for PyPI deployment",
        "to": "sagelib: Update metadata for PyPI deployment as package sagemath-standard"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30912#event-90929"
}
```



---

archive/issue_comments_613589.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,3 +6,7 @@\n \n sage-devel post regarding naming:\n - https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ\n+\n+Naming was discussed during SageDays 111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.\n+\n+\n``````\n",
    "created_at": "2020-12-09T05:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613589",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,3 +6,7 @@
 
 sage-devel post regarding naming:
 - https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ
+
+Naming was discussed during SageDays 111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.
+
+
``````




---

archive/issue_comments_613590.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [mmasdeu](#comment%3A7):\n> The dummy package on pypi.org/project/sagemath was created so that\n> other projects could be made to depend on it, and thus allow a user\n> to install a custom package without having to recompile Sage.\n> This has worked well to this day, you can install the darmonpoints\n> package with a one-liner and alongside it checks that the installed\n> version of Sage is the correct one.\n> \n> At the time (2016 maybe?) we thought that this was a good idea,\n> since it seemed like it was a long time until modularization\n> would be a reality.\n> \n> The dummy package only has one function (`check_version`) which\n> compares the version passed as parameter with the sage version\n> (via `from sage.all import version`).\n> \n> I don't mind giving away this package if modularity is happening,\n> since then there would a proper way to check for each of the required\n> packages (there should be a way to check for the \"whole sage\" being\n> installed, since it may be hard to decide on all the dependencies).\n> \n> How should we go about it? I would rather have this kind of\n> functionality (and I am assuming that the other two package\n> maintainers that use the dummy package would be with me) available\n> during the transition, specially if it takes more than a week or two...\n\n\nMaybe there could be a package with a more\ndescriptive name for that use case?\n\nMaybe one of the following names, or something similar?\n- `sagemath_installed`\n- `sagemath_version`\n- `sagemath_checkinstalled`\n- `sagemath_checkversion`\n- `sagemath_probe`\n\nSome users assume from the name that it actually installs Sage,\nand are surprised after installing it that things don't work as\nexpected; this comes up once in a while on the help and support\nchannels such as Ask Sage, sage-support, Stack Overflow...\n\nNot an emergency, but something to consider.",
    "created_at": "2020-12-09T15:20:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613590",
    "user": "https://github.com/slel"
}
```

<a id='comment:23'></a>
Replying to [mmasdeu](#comment%3A7):
> The dummy package on pypi.org/project/sagemath was created so that
> other projects could be made to depend on it, and thus allow a user
> to install a custom package without having to recompile Sage.
> This has worked well to this day, you can install the darmonpoints
> package with a one-liner and alongside it checks that the installed
> version of Sage is the correct one.
> 
> At the time (2016 maybe?) we thought that this was a good idea,
> since it seemed like it was a long time until modularization
> would be a reality.
> 
> The dummy package only has one function (`check_version`) which
> compares the version passed as parameter with the sage version
> (via `from sage.all import version`).
> 
> I don't mind giving away this package if modularity is happening,
> since then there would a proper way to check for each of the required
> packages (there should be a way to check for the "whole sage" being
> installed, since it may be hard to decide on all the dependencies).
> 
> How should we go about it? I would rather have this kind of
> functionality (and I am assuming that the other two package
> maintainers that use the dummy package would be with me) available
> during the transition, specially if it takes more than a week or two...


Maybe there could be a package with a more
descriptive name for that use case?

Maybe one of the following names, or something similar?
- `sagemath_installed`
- `sagemath_version`
- `sagemath_checkinstalled`
- `sagemath_checkversion`
- `sagemath_probe`

Some users assume from the name that it actually installs Sage,
and are surprised after installing it that things don't work as
expected; this comes up once in a while on the help and support
channels such as Ask Sage, sage-support, Stack Overflow...

Not an emergency, but something to consider.



---

archive/issue_comments_613591.json:
```json
{
    "body": "**Work_Issues:** add license file",
    "created_at": "2020-12-11T23:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613591",
    "user": "https://github.com/mkoeppe"
}
```

**Work_Issues:** add license file



---

archive/issue_comments_613592.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2020-12-11T23:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613592",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_613593.json:
```json
{
    "body": "**Changing commit** from \"[a1a10b9b524e63574bbf1de2c4ce6f149116f147](https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147)\" to \"[deb9eb3a33ee6474f755a9bee6f487d839c9d247](https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247)\".",
    "created_at": "2020-12-12T00:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613593",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a1a10b9b524e63574bbf1de2c4ce6f149116f147](https://github.com/sagemath/sagetrac-mirror/commit/a1a10b9b524e63574bbf1de2c4ce6f149116f147)" to "[deb9eb3a33ee6474f755a9bee6f487d839c9d247](https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247)".



---

archive/issue_comments_613594.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5697335ed14c929adb01a3fafe95f82b79248918\">5697335</a></td><td><code>src/setup.cfg: Add license_file=LICENSE.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247\">deb9eb3</a></td><td><code>Merge tag '9.3.beta3' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr></table>\n",
    "created_at": "2020-12-12T00:02:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613594",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5697335ed14c929adb01a3fafe95f82b79248918">5697335</a></td><td><code>src/setup.cfg: Add license_file=LICENSE.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247">deb9eb3</a></td><td><code>Merge tag '9.3.beta3' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr></table>




---

archive/issue_comments_613595.json:
```json
{
    "body": "**Changing work_issues** from \"add license file\" to \"\".",
    "created_at": "2020-12-12T00:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613595",
    "user": "https://github.com/mkoeppe"
}
```

**Changing work_issues** from "add license file" to "".



---

archive/issue_comments_613596.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2020-12-12T00:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613596",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_613597.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n We update the following items in `build/pkgs/sagelib/src/`:\n-- Add README\n+- Add `README.rst`\n+- Add `LICENSE.txt` (for sagelib and documentation only - see discussion in #21571)\n - `setup.py` metadata (author, license, compatibility, ....)\n \n We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. \n``````\n",
    "created_at": "2020-12-12T00:07:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613597",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 We update the following items in `build/pkgs/sagelib/src/`:
-- Add README
+- Add `README.rst`
+- Add `LICENSE.txt` (for sagelib and documentation only - see discussion in #21571)
 - `setup.py` metadata (author, license, compatibility, ....)
 
 We switch from distutils to setuptools so we can put the new metadata in the `setup.cfg` format. 
``````




---

archive/issue_comments_613598.json:
```json
{
    "body": "**Changing commit** from \"[deb9eb3a33ee6474f755a9bee6f487d839c9d247](https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247)\" to \"[7ad4c0e6da58f8851cfbced0e9c1a66c9479f918](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)\".",
    "created_at": "2020-12-22T15:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613598",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[deb9eb3a33ee6474f755a9bee6f487d839c9d247](https://github.com/sagemath/sagetrac-mirror/commit/deb9eb3a33ee6474f755a9bee6f487d839c9d247)" to "[7ad4c0e6da58f8851cfbced0e9c1a66c9479f918](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)".



---

archive/issue_comments_613599.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918\">7ad4c0e</a></td><td><code>Merge tag '9.3.beta4' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr></table>\n",
    "created_at": "2020-12-22T15:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613599",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918">7ad4c0e</a></td><td><code>Merge tag '9.3.beta4' into t/30912/sagelib__update_metadata_for_pypi_deployment</code></td></tr></table>




---

archive/issue_comments_613600.json:
```json
{
    "body": "<a id='comment:29'></a>\nStill hoping for someone with recent Python packaging experience to review this ticket.",
    "created_at": "2020-12-22T15:45:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613600",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>
Still hoping for someone with recent Python packaging experience to review this ticket.



---

archive/issue_comments_613601.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,6 +8,6 @@\n sage-devel post regarding naming:\n - https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ\n \n-Naming was discussed during SageDays 111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.\n+Naming was discussed during https://wiki.sagemath.org/days111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.\n \n \n``````\n",
    "created_at": "2020-12-27T18:47:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613601",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,6 +8,6 @@
 sage-devel post regarding naming:
 - https://groups.google.com/g/sage-devel/c/3mCIV9LnP9c/m/lQXLEGKcCQAJ
 
-Naming was discussed during SageDays 111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.
+Naming was discussed during https://wiki.sagemath.org/days111 and a decision made to use the `sagemath-...` format and in particular `sagemath-standard`.
 
 
``````




---

archive/issue_comments_613602.json:
```json
{
    "body": "<a id='comment:34'></a>\nNeeds review.",
    "created_at": "2021-01-16T19:27:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613602",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
Needs review.



---

archive/issue_comments_613603.json:
```json
{
    "body": "<a id='comment:35'></a>\nCan we please get this into 9.3?",
    "created_at": "2021-02-02T17:52:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613603",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Can we please get this into 9.3?



---

archive/issue_comments_613604.json:
```json
{
    "body": "<a id='comment:36'></a>\nI'm seeing a doctest failure:\n\n```\nsage -t --warn-long 95.5 --random-seed=0 src/sage/all.py\n**********************************************************************\nFile \"src/sage/all.py\", line 333, in sage.all._write_started_file\nFailed example:\n    os.path.isfile(started_file)  # optional - build\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n```\nIs it spurious or could it be caused by this ticket?",
    "created_at": "2021-02-05T02:50:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613604",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:36'></a>
I'm seeing a doctest failure:

```
sage -t --warn-long 95.5 --random-seed=0 src/sage/all.py
**********************************************************************
File "src/sage/all.py", line 333, in sage.all._write_started_file
Failed example:
    os.path.isfile(started_file)  # optional - build
Expected:
    True
Got:
    False
**********************************************************************
```
Is it spurious or could it be caused by this ticket?



---

archive/issue_comments_613605.json:
```json
{
    "body": "<a id='comment:37'></a>\nIf the docbuild fails with an error, then `make` does not get to the target that creates the started_file. You can fix this with `make build-start`",
    "created_at": "2021-02-05T02:58:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613605",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:37'></a>
If the docbuild fails with an error, then `make` does not get to the target that creates the started_file. You can fix this with `make build-start`



---

archive/issue_comments_613606.json:
```json
{
    "body": "<a id='comment:38'></a>\nThat's too bad. I thought, but maybe I'm wrong about this, that starting Sage used to create the started_file, and I made sure to run Sage before rerunning this doctest. You're right, in any case: `make build-start` fixed the doctest.",
    "created_at": "2021-02-05T03:28:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613606",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:38'></a>
That's too bad. I thought, but maybe I'm wrong about this, that starting Sage used to create the started_file, and I made sure to run Sage before rerunning this doctest. You're right, in any case: `make build-start` fixed the doctest.



---

archive/issue_comments_613607.json:
```json
{
    "body": "<a id='comment:39'></a>\nI don't think starting sage creates the started file. It's only happening as part of the build in `build/bin/sage-starts`",
    "created_at": "2021-02-05T03:32:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613607",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:39'></a>
I don't think starting sage creates the started file. It's only happening as part of the build in `build/bin/sage-starts`



---

archive/issue_comments_613608.json:
```json
{
    "body": "<a id='comment:40'></a>\nsince #13988",
    "created_at": "2021-02-05T03:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613608",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>
since #13988



---

archive/issue_comments_613609.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2021-02-05T04:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613609",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_comments_613610.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2021-02-05T04:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613610",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_613611.json:
```json
{
    "body": "<a id='comment:41'></a>\nI am far from an expert in `setuptools`, but this looks okay to me.",
    "created_at": "2021-02-05T04:16:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613611",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:41'></a>
I am far from an expert in `setuptools`, but this looks okay to me.



---

archive/issue_comments_613612.json:
```json
{
    "body": "<a id='comment:42'></a>\nThanks!",
    "created_at": "2021-02-05T04:29:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613612",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:42'></a>
Thanks!



---

archive/issue_comments_613613.json:
```json
{
    "body": "<a id='comment:43'></a>\nThis is fun. Volker is in the process of merging the ticket, which means I get to test it in sage-on-gentoo\n\n```\n>>> Compiling source in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src ...\n * python3_7: running distutils-r1_run_phase python_compile\npython3.7 setup.py build -j 8\ndistributions = ['', 'sage-bliss', 'sage-meataxe']\nDiscovering Python/Cython source code....\nDiscovered Python/Cython sources, time: 0.20 seconds.\n************************************************************************\nTraceback (most recent call last):\n  File \"setup.py\", line 153, in <module>\n    ext_modules = cython_modules)\n  File \"/usr/lib/python3.7/site-packages/setuptools/__init__.py\", line 153, in setup\n    return distutils.core.setup(**attrs)\n  File \"/usr/lib/python3.7/distutils/core.py\", line 121, in setup\n    dist.parse_config_files()\n  File \"/usr/lib/python3.7/site-packages/setuptools/dist.py\", line 668, in parse_config_files\n    ignore_option_errors=ignore_option_errors)\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 157, in parse_configuration\n    meta.parse()\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 463, in parse\n    section_parser_method(section_options)\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 436, in parse_section\n    self[name] = value\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 220, in `__setitem__`\n    value = parser(value)\n  File \"/usr/lib/python3.7/site-packages/setuptools/config.py\", line 548, in `_parse_`version\n    raise DistutilsOptionError(tmpl.format(**locals()))\ndistutils.errors.DistutilsOptionError: Version loaded from file: VERSION.txt does not comply with PEP 440: SageMath version 9.3.beta7, Release Date: 2021-02-07\n************************************************************************\nError building the Sage library\n```\nYou can read the PEP in question here [https://www.python.org/dev/peps/pep-0440/](https://www.python.org/dev/peps/pep-0440/). I am currently using the Gentoo stable setuptools which is 50.3.0. sage is shipping 51.1.1 so I am guessing someone had a change of heart about strict enforcement between those two. I'll check by updating my own to the latest in Gentoo's tree (53.0.0).\n\nBut if the PEP get enforced the days of naming release .betaN and .rcN are numbered.",
    "created_at": "2021-02-14T03:00:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613613",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:43'></a>
This is fun. Volker is in the process of merging the ticket, which means I get to test it in sage-on-gentoo

```
>>> Compiling source in /dev/shm/portage/sci-mathematics/sage-9999/work/sage-9999/src ...
 * python3_7: running distutils-r1_run_phase python_compile
python3.7 setup.py build -j 8
distributions = ['', 'sage-bliss', 'sage-meataxe']
Discovering Python/Cython source code....
Discovered Python/Cython sources, time: 0.20 seconds.
************************************************************************
Traceback (most recent call last):
  File "setup.py", line 153, in <module>
    ext_modules = cython_modules)
  File "/usr/lib/python3.7/site-packages/setuptools/__init__.py", line 153, in setup
    return distutils.core.setup(**attrs)
  File "/usr/lib/python3.7/distutils/core.py", line 121, in setup
    dist.parse_config_files()
  File "/usr/lib/python3.7/site-packages/setuptools/dist.py", line 668, in parse_config_files
    ignore_option_errors=ignore_option_errors)
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 157, in parse_configuration
    meta.parse()
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 463, in parse
    section_parser_method(section_options)
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 436, in parse_section
    self[name] = value
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 220, in `__setitem__`
    value = parser(value)
  File "/usr/lib/python3.7/site-packages/setuptools/config.py", line 548, in `_parse_`version
    raise DistutilsOptionError(tmpl.format(**locals()))
distutils.errors.DistutilsOptionError: Version loaded from file: VERSION.txt does not comply with PEP 440: SageMath version 9.3.beta7, Release Date: 2021-02-07
************************************************************************
Error building the Sage library
```
You can read the PEP in question here [https://www.python.org/dev/peps/pep-0440/](https://www.python.org/dev/peps/pep-0440/). I am currently using the Gentoo stable setuptools which is 50.3.0. sage is shipping 51.1.1 so I am guessing someone had a change of heart about strict enforcement between those two. I'll check by updating my own to the latest in Gentoo's tree (53.0.0).

But if the PEP get enforced the days of naming release .betaN and .rcN are numbered.



---

archive/issue_comments_613614.json:
```json
{
    "body": "<a id='comment:44'></a>\nReading more closely `a`, `b` and `rc` are allowed.",
    "created_at": "2021-02-14T03:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613614",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:44'></a>
Reading more closely `a`, `b` and `rc` are allowed.



---

archive/issue_comments_613615.json:
```json
{
    "body": "<a id='comment:45'></a>\nStill broken for me with setuptools-53.0.0.",
    "created_at": "2021-02-14T03:11:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613615",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:45'></a>
Still broken for me with setuptools-53.0.0.



---

archive/issue_comments_613616.json:
```json
{
    "body": "<a id='comment:46'></a>\nThis does not affect the Sage distribution (it uses the other copy of `setup.py`) and is fixed already in #31357.",
    "created_at": "2021-02-14T03:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613616",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:46'></a>
This does not affect the Sage distribution (it uses the other copy of `setup.py`) and is fixed already in #31357.



---

archive/issue_comments_613617.json:
```json
{
    "body": "<a id='comment:47'></a>\nI see. Switching to that copy is possible but that messes up how I currently do the documentation. I am not quite sure how much effort yet but it probably should be done.",
    "created_at": "2021-02-14T03:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613617",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:47'></a>
I see. Switching to that copy is possible but that messes up how I currently do the documentation. I am not quite sure how much effort yet but it probably should be done.



---

archive/issue_comments_613618.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [fbissey](#comment%3A47):\n> I see. Switching to that copy is possible but that messes up how I currently do the documentation. I am not quite sure how much effort yet but it probably should be done.\n\n\nLesson of the day, patch doesn't like symbolic links which means that I am better off waiting for #31357.",
    "created_at": "2021-02-14T04:28:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613618",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:48'></a>
Replying to [fbissey](#comment%3A47):
> I see. Switching to that copy is possible but that messes up how I currently do the documentation. I am not quite sure how much effort yet but it probably should be done.


Lesson of the day, patch doesn't like symbolic links which means that I am better off waiting for #31357.



---

archive/issue_events_090930.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-02-20T10:46:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30912#event-90930"
}
```



---

archive/issue_comments_613619.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2021-02-20T10:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613619",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_613620.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/sagelib__update_metadata_for_pypi_deployment](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sagelib__update_metadata_for_pypi_deployment)\" to \"[7ad4c0e6da58f8851cfbced0e9c1a66c9479f918](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)\".",
    "created_at": "2021-02-20T10:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30912",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30912#issuecomment-613620",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/sagelib__update_metadata_for_pypi_deployment](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sagelib__update_metadata_for_pypi_deployment)" to "[7ad4c0e6da58f8851cfbced0e9c1a66c9479f918](https://github.com/sagemath/sagetrac-mirror/commit/7ad4c0e6da58f8851cfbced0e9c1a66c9479f918)".
