# Issue 30752: switch the default mp library to gmp

archive/issues_030515.json:
```json
{
    "assignees": [],
    "body": "currently the default mp library is mpir: the default `--with-mp` is `system`, and in\n`build/pkgs/mpir/spkg-configure.m4` we have\n\n```\nSAGE_SPKG_CONFIGURE([mpir], [\ndnl Implement cases for what to do on different options here\n    case \"$with_mp\" in\n        system)\n            AC_CHECK_HEADER(gmp.h, [], [sage_spkg_install_mpir=yes])\n...\n\ndnl Set SAGE_MP_LIBRARY depending on the with_mp option\n    case \"$with_mp\" in\n    mpir|system)\n        SAGE_MP_LIBRARY=mpir\n        ;;\n    gmp)\n        SAGE_MP_LIBRARY=gmp\n```\n\nas `mpir` is getting more and more bitrotten, this should be switched to `gmp` as the default.\n\nAlso, \n\n```\n  --with-mp=system        use the system GMP as multiprecision library, if\n                          possible (default)\n```\nis a lie, as can be seen from above, the default is `mpir`, not `gmp`.\n\n\n\nCC:  @jhpalmieri @mkoeppe @orlitzky\n\nBranch/Commit: **[`d2500f1`](https://github.com/sagemath/sagetrac-mirror/commit/d2500f18354e5aa37bef1ee194e6ed3335874f2e)**\n\nReviewer: **Matthias Koeppe, Dima Pasechnik**\n\nAuthor: **Dima Pasechnik, Matthias Koeppe**\n\nComponent: **build: configure**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30752_\n\n",
    "closed_at": "2020-12-05T22:13:31Z",
    "created_at": "2020-10-11T10:00:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "switch the default mp library to gmp",
    "type": "issue",
    "updated_at": "2020-12-05T22:13:31Z",
    "url": "https://github.com/sagemath/sage/issues/30752",
    "user": "https://github.com/dimpase"
}
```
currently the default mp library is mpir: the default `--with-mp` is `system`, and in
`build/pkgs/mpir/spkg-configure.m4` we have

```
SAGE_SPKG_CONFIGURE([mpir], [
dnl Implement cases for what to do on different options here
    case "$with_mp" in
        system)
            AC_CHECK_HEADER(gmp.h, [], [sage_spkg_install_mpir=yes])
...

dnl Set SAGE_MP_LIBRARY depending on the with_mp option
    case "$with_mp" in
    mpir|system)
        SAGE_MP_LIBRARY=mpir
        ;;
    gmp)
        SAGE_MP_LIBRARY=gmp
```

as `mpir` is getting more and more bitrotten, this should be switched to `gmp` as the default.

Also, 

```
  --with-mp=system        use the system GMP as multiprecision library, if
                          possible (default)
```
is a lie, as can be seen from above, the default is `mpir`, not `gmp`.



CC:  @jhpalmieri @mkoeppe @orlitzky

Branch/Commit: **[`d2500f1`](https://github.com/sagemath/sagetrac-mirror/commit/d2500f18354e5aa37bef1ee194e6ed3335874f2e)**

Reviewer: **Matthias Koeppe, Dima Pasechnik**

Author: **Dima Pasechnik, Matthias Koeppe**

Component: **build: configure**

_Issue created by migration from https://trac.sagemath.org/ticket/30752_





---

archive/issue_events_426263.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T10:00:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426263"
}
```



---

archive/issue_events_426264.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T10:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426264"
}
```



---

archive/issue_events_426265.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T10:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426265"
}
```



---

archive/issue_events_426266.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T10:00:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426266"
}
```



---

archive/issue_comments_491489.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/make_gmp_default_mp)**",
    "created_at": "2020-10-11T17:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491489",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/make_gmp_default_mp)**



---

archive/issue_events_426267.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T17:57:55Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426267"
}
```



---

archive/issue_events_426268.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T17:57:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426268"
}
```



---

archive/issue_events_426269.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T17:57:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426269"
}
```



---

archive/issue_events_426270.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T17:57:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426270"
}
```



---

archive/issue_comments_491490.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nmarking it critical, as it corrects the `./configure -h` misleading info.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3af67388be690e42d736efed264267c8cbf9c8c9\"><code>3af6738</code></a></td><td><code>make gmp (and not mpir) the default mp lib</code></td></tr></table>\n",
    "created_at": "2020-10-11T17:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491490",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1" align="right">comment:1</div>

marking it critical, as it corrects the `./configure -h` misleading info.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3af67388be690e42d736efed264267c8cbf9c8c9"><code>3af6738</code></a></td><td><code>make gmp (and not mpir) the default mp lib</code></td></tr></table>




---

archive/issue_comments_491491.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2020-10-11T17:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491491",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_491492.json:
```json
{
    "body": "Commit: **[`3af6738`](https://github.com/sagemath/sagetrac-mirror/commit/3af67388be690e42d736efed264267c8cbf9c8c9)**",
    "created_at": "2020-10-11T17:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491492",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`3af6738`](https://github.com/sagemath/sagetrac-mirror/commit/3af67388be690e42d736efed264267c8cbf9c8c9)**



---

archive/issue_events_426271.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T18:29:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426271"
}
```



---

archive/issue_comments_491493.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nthe reporting is still a bit misleading:\n\n```\n...\ngmp-6.1.2:                                   using system package; SPKG will not be installed\n...\nmpir-3.0.0-644faf502c56f97d9accd301965fc57d6ec70868.p0:no suitable system package; will be installed as an SPKG\n...\n```\nbut this not a regression.",
    "created_at": "2020-10-11T18:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491493",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:2" align="right">comment:2</div>

the reporting is still a bit misleading:

```
...
gmp-6.1.2:                                   using system package; SPKG will not be installed
...
mpir-3.0.0-644faf502c56f97d9accd301965fc57d6ec70868.p0:no suitable system package; will be installed as an SPKG
...
```
but this not a regression.



---

archive/issue_comments_491494.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nIn principle this is okay, and I'm testing it on OS X, but I think it should be merged early in a release, not late in this one, since it needs testing on a wide variety of platforms.",
    "created_at": "2020-10-11T20:33:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491494",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:3" align="right">comment:3</div>

In principle this is okay, and I'm testing it on OS X, but I think it should be merged early in a release, not late in this one, since it needs testing on a wide variety of platforms.



---

archive/issue_events_426272.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T21:16:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426272"
}
```



---

archive/issue_events_426273.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-11T21:16:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426273"
}
```



---

archive/issue_comments_491495.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nperhaps you'd like to try this together with #30625 - upgrade of Sage's GMP.\n\nI've moved this to 9.3.",
    "created_at": "2020-10-11T21:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491495",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

perhaps you'd like to try this together with #30625 - upgrade of Sage's GMP.

I've moved this to 9.3.



---

archive/issue_comments_491496.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWith Xcode 12, OS X Catalina: works on its own and in combination with #30625.",
    "created_at": "2020-10-12T00:29:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491496",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:5" align="right">comment:5</div>

With Xcode 12, OS X Catalina: works on its own and in combination with #30625.



---

archive/issue_comments_491497.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/356510117**",
    "created_at": "2020-11-10T19:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491497",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/356510117**



---

archive/issue_comments_491498.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThis will affect all `-minimal` builds - so I am testing it with GH Actions",
    "created_at": "2020-11-10T19:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491498",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

This will affect all `-minimal` builds - so I am testing it with GH Actions



---

archive/issue_events_426274.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T17:06:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426274"
}
```



---

archive/issue_events_426275.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T17:06:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426275"
}
```



---

archive/issue_comments_491499.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThis breaks lots of `-minimal` builds - see for example `fedora-31-minimal`  (https://github.com/mkoeppe/sage/runs/1381716520)\n\n```\n  gcc -pthread -shared -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -L. -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib build/temp.linux-x86_64-3.8/cypari2/closure.o -L/sage/local/lib -L/sage/local/lib64 -L/sage/local/lib -lgmp -lpari -o build/lib.linux-x86_64-3.8/cypari2/closure.cpython-38-x86_64-linux-gnu.so -lpari\n  /usr/bin/ld: cannot find -lgmp\n  collect2: error: ld returned 1 exit status\n  error: command 'gcc' failed with exit status 1\n  Building wheel for cypari2 (setup.py): finished with status 'error'\n```",
    "created_at": "2020-11-11T17:06:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491499",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

This breaks lots of `-minimal` builds - see for example `fedora-31-minimal`  (https://github.com/mkoeppe/sage/runs/1381716520)

```
  gcc -pthread -shared -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -L. -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib -Wl,-rpath-link,/sage/local/lib -L/sage/local/lib -Wl,-rpath,/sage/local/lib build/temp.linux-x86_64-3.8/cypari2/closure.o -L/sage/local/lib -L/sage/local/lib64 -L/sage/local/lib -lgmp -lpari -o build/lib.linux-x86_64-3.8/cypari2/closure.cpython-38-x86_64-linux-gnu.so -lpari
  /usr/bin/ld: cannot find -lgmp
  collect2: error: ld returned 1 exit status
  error: command 'gcc' failed with exit status 1
  Building wheel for cypari2 (setup.py): finished with status 'error'
```



---

archive/issue_comments_491500.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\na logic error in spkg-configure (of mpir or gmp)\n\n```\n2020-11-10T22:56:48.4470802Z Checking whether SageMath should install SPKG mpir...\n2020-11-10T22:56:48.4471312Z checking gmp.h usability... no\n2020-11-10T22:56:48.4471747Z checking gmp.h presence... no\n2020-11-10T22:56:48.4472119Z checking for gmp.h... no\n2020-11-10T22:56:48.4472533Z checking gmpxx.h usability... no\n2020-11-10T22:56:48.4472984Z checking gmpxx.h presence... no\n2020-11-10T22:56:48.4473541Z checking for gmpxx.h... no\n2020-11-10T22:56:48.4473965Z checking for library containing __gmpq_cmp_z... no\n2020-11-10T22:56:48.4474813Z configure: will use system package and not install SPKG mpir\n2020-11-10T22:56:48.4475426Z using gmp SPKG (via --with-mp=gmp)\n2020-11-10T22:56:48.4475906Z -----------------------------------------------------------------------------\n2020-11-10T22:56:48.4476313Z Checking whether SageMath should install SPKG gmp...\n2020-11-10T22:56:48.4476849Z configure: will use system package and not install SPKG gmp\n```\nsomehow it thinks that system GMP is available.",
    "created_at": "2020-11-12T09:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491500",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

a logic error in spkg-configure (of mpir or gmp)

```
2020-11-10T22:56:48.4470802Z Checking whether SageMath should install SPKG mpir...
2020-11-10T22:56:48.4471312Z checking gmp.h usability... no
2020-11-10T22:56:48.4471747Z checking gmp.h presence... no
2020-11-10T22:56:48.4472119Z checking for gmp.h... no
2020-11-10T22:56:48.4472533Z checking gmpxx.h usability... no
2020-11-10T22:56:48.4472984Z checking gmpxx.h presence... no
2020-11-10T22:56:48.4473541Z checking for gmpxx.h... no
2020-11-10T22:56:48.4473965Z checking for library containing __gmpq_cmp_z... no
2020-11-10T22:56:48.4474813Z configure: will use system package and not install SPKG mpir
2020-11-10T22:56:48.4475426Z using gmp SPKG (via --with-mp=gmp)
2020-11-10T22:56:48.4475906Z -----------------------------------------------------------------------------
2020-11-10T22:56:48.4476313Z Checking whether SageMath should install SPKG gmp...
2020-11-10T22:56:48.4476849Z configure: will use system package and not install SPKG gmp
```
somehow it thinks that system GMP is available.



---

archive/issue_comments_491501.json:
```json
{
    "body": "Changed commit from **[`3af6738`](https://github.com/sagemath/sagetrac-mirror/commit/3af67388be690e42d736efed264267c8cbf9c8c9)** to **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)**",
    "created_at": "2020-11-12T11:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491501",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3af6738`](https://github.com/sagemath/sagetrac-mirror/commit/3af67388be690e42d736efed264267c8cbf9c8c9)** to **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)**



---

archive/issue_comments_491502.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25de198d58ba8a158ba854caa095de005fcc3868\"><code>25de198</code></a></td><td><code>make gmp (and not mpir) the default mp lib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb\"><code>a1b552c</code></a></td><td><code>correct logic for spkg-configures of gmp and mpir</code></td></tr></table>\n",
    "created_at": "2020-11-12T11:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491502",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25de198d58ba8a158ba854caa095de005fcc3868"><code>25de198</code></a></td><td><code>make gmp (and not mpir) the default mp lib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb"><code>a1b552c</code></a></td><td><code>correct logic for spkg-configures of gmp and mpir</code></td></tr></table>




---

archive/issue_comments_491503.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nfixed this (and rebased over latest beta).\nTested with/without gmp present, with various options for `--with-mp=`, all seems to work.",
    "created_at": "2020-11-12T11:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491503",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

fixed this (and rebased over latest beta).
Tested with/without gmp present, with various options for `--with-mp=`, all seems to work.



---

archive/issue_events_426276.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-12T11:24:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426276"
}
```



---

archive/issue_events_426277.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-12T11:24:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426277"
}
```



---

archive/issue_comments_491504.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/356510117** to **https://github.com/mkoeppe/sage/actions/runs/360142559**",
    "created_at": "2020-11-12T17:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491504",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/356510117** to **https://github.com/mkoeppe/sage/actions/runs/360142559**



---

archive/issue_comments_491505.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nthis round of GH actions looks better, several \"minimal\" jobs completed successfully.\nThese that failed (e.g. ubunuty-trusty) seemed to have failed for an unrelated reason.\nAlthough it's hart to see atm, for the latter one can only see that sagelib build failed somewhere, but the full log is not there - is it supposed to become available at some point after the run completes?",
    "created_at": "2020-11-13T09:34:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491505",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

this round of GH actions looks better, several "minimal" jobs completed successfully.
These that failed (e.g. ubunuty-trusty) seemed to have failed for an unrelated reason.
Although it's hart to see atm, for the latter one can only see that sagelib build failed somewhere, but the full log is not there - is it supposed to become available at some point after the run completes?



---

archive/issue_comments_491506.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThe full logs are now available as the run has completed",
    "created_at": "2020-11-14T23:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491506",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

The full logs are now available as the run has completed



---

archive/issue_comments_491507.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@mkoeppe](#comment:13):\n> The full logs are now available as the run has completed\n\nI don't know where to find  full untruncated logs, such as install.log for e.g. \ndocker (ubuntu-trusty, minimal).\n\"last whatever lines\" do not show the real error.",
    "created_at": "2020-11-15T10:06:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491507",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@mkoeppe](#comment:13):
> The full logs are now available as the run has completed

I don't know where to find  full untruncated logs, such as install.log for e.g. 
docker (ubuntu-trusty, minimal).
"last whatever lines" do not show the real error.



---

archive/issue_comments_491508.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIn the build artifacts listed at https://github.com/mkoeppe/sage/actions/runs/360142559, such as this one: https://github.com/mkoeppe/sage/suites/1493083844/artifacts/26253188\nfor ubuntu-trusty-minimal",
    "created_at": "2020-11-15T19:33:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491508",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

In the build artifacts listed at https://github.com/mkoeppe/sage/actions/runs/360142559, such as this one: https://github.com/mkoeppe/sage/suites/1493083844/artifacts/26253188
for ubuntu-trusty-minimal



---

archive/issue_comments_491509.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@mkoeppe](#comment:15):\n> In the build artifacts listed at https://github.com/mkoeppe/sage/actions/runs/360142559, such as this one: https://github.com/mkoeppe/sage/suites/1493083844/artifacts/26253188\n> for ubuntu-trusty-minimal\n\nOK, thanks for pointing to the right direction. In this case the error is about a giac header,\nas can be seen in `logs/pkgs/sagelib-9.3.beta1.log`\n\n```\n[197/523] creating build/temp.linux-x86_64-3.8/build/cythonized/sage/libs/giac\ngcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -Isage/libs/giac -I./sage/cpython -I/sage/local/lib/python3.8/site-packages/cysignals -I/sage/build/pkgs/sagelib/src -I/sage/l\nocal/include/python3.8 -I/sage/local/lib/python3.8/site-packages/numpy/core/include -Ibuild/cythonized -I/sage/local/include/python3.8 -c build/cythonized/sage/libs/giac/giac.cpp -o build/temp.linux-x86_64-3.8/bu\nild/cythonized/sage/libs/giac/giac.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -fno-tree-copyrename -std=c++11\nbuild/cythonized/sage/libs/giac/giac.cpp:676:23: fatal error: giac/giac.h: No such file or directory\n #include \"giac/giac.h\"\n                       ^\ncompilation terminated.\n```\nLooks as if `-I$SAGE_LOCAL/include` is missing in CFLAGS, or something like this.\nNothing to do with the branch on this ticket, anyway.",
    "created_at": "2020-11-15T22:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491509",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@mkoeppe](#comment:15):
> In the build artifacts listed at https://github.com/mkoeppe/sage/actions/runs/360142559, such as this one: https://github.com/mkoeppe/sage/suites/1493083844/artifacts/26253188
> for ubuntu-trusty-minimal

OK, thanks for pointing to the right direction. In this case the error is about a giac header,
as can be seen in `logs/pkgs/sagelib-9.3.beta1.log`

```
[197/523] creating build/temp.linux-x86_64-3.8/build/cythonized/sage/libs/giac
gcc -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -fPIC -Isage/libs/giac -I./sage/cpython -I/sage/local/lib/python3.8/site-packages/cysignals -I/sage/build/pkgs/sagelib/src -I/sage/l
ocal/include/python3.8 -I/sage/local/lib/python3.8/site-packages/numpy/core/include -Ibuild/cythonized -I/sage/local/include/python3.8 -c build/cythonized/sage/libs/giac/giac.cpp -o build/temp.linux-x86_64-3.8/bu
ild/cythonized/sage/libs/giac/giac.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -fno-tree-copyrename -std=c++11
build/cythonized/sage/libs/giac/giac.cpp:676:23: fatal error: giac/giac.h: No such file or directory
 #include "giac/giac.h"
                       ^
compilation terminated.
```
Looks as if `-I$SAGE_LOCAL/include` is missing in CFLAGS, or something like this.
Nothing to do with the branch on this ticket, anyway.



---

archive/issue_comments_491510.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe problem with giac is probably just that missing dependency, fixed in #30858",
    "created_at": "2020-11-17T03:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491510",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

The problem with giac is probably just that missing dependency, fixed in #30858



---

archive/issue_events_426278.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-17T03:20:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426278"
}
```



---

archive/issue_events_426279.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-17T03:20:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426279"
}
```



---

archive/issue_comments_491511.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/360142559** to **Matthias Koeppe**",
    "created_at": "2020-11-17T03:20:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491511",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/360142559** to **Matthias Koeppe**



---

archive/issue_events_426280.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426280"
}
```



---

archive/issue_events_426281.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426281"
}
```



---

archive/issue_comments_491512.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/make_gmp_default_mp)** to **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)**",
    "created_at": "2020-11-22T15:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491512",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/make_gmp_default_mp)** to **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)**



---

archive/issue_comments_491513.json:
```json
{
    "body": "Changed commit from **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)** to none",
    "created_at": "2020-11-22T22:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491513",
    "user": "https://github.com/vbraun"
}
```

Changed commit from **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)** to none



---

archive/issue_comments_491514.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOn OSX:\n\n```\nvbraun@osx Sage % ./sage -p gmp                       \nFound local metadata for gmp-6.2.0\nUsing cached file /Users/vbraun/Sage/upstream/gmp-6.2.0.tar.xz\ngmp-6.2.0\n====================================================\nSetting up build directory for gmp-6.2.0\nError: Unknown file type: /Users/vbraun/Sage/upstream/gmp-6.2.0.tar.xz\nFinished extraction\n```\nThe inability to extract xz is apparently ignored, but obviously install fails sooner or later.",
    "created_at": "2020-11-22T22:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491514",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:20" align="right">comment:20</div>

On OSX:

```
vbraun@osx Sage % ./sage -p gmp                       
Found local metadata for gmp-6.2.0
Using cached file /Users/vbraun/Sage/upstream/gmp-6.2.0.tar.xz
gmp-6.2.0
====================================================
Setting up build directory for gmp-6.2.0
Error: Unknown file type: /Users/vbraun/Sage/upstream/gmp-6.2.0.tar.xz
Finished extraction
```
The inability to extract xz is apparently ignored, but obviously install fails sooner or later.



---

archive/issue_comments_491515.json:
```json
{
    "body": "Commit: **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)**",
    "created_at": "2020-11-22T22:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491515",
    "user": "https://github.com/vbraun"
}
```

Commit: **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)**



---

archive/issue_comments_491516.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/25de198d58ba8a158ba854caa095de005fcc3868\"><code>25de198</code></a></td><td><code>make gmp (and not mpir) the default mp lib</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb\"><code>a1b552c</code></a></td><td><code>correct logic for spkg-configures of gmp and mpir</code></td></tr></table>\n",
    "created_at": "2020-11-22T22:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491516",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:21"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/25de198d58ba8a158ba854caa095de005fcc3868"><code>25de198</code></a></td><td><code>make gmp (and not mpir) the default mp lib</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb"><code>a1b552c</code></a></td><td><code>correct logic for spkg-configures of gmp and mpir</code></td></tr></table>




---

archive/issue_comments_491517.json:
```json
{
    "body": "Changed branch from **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)** to **[u/dimpase/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/make_gmp_default_mp)**",
    "created_at": "2020-11-22T22:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491517",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)** to **[u/dimpase/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/make_gmp_default_mp)**



---

archive/issue_comments_491518.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nWhat does this have to do with this ticket? If you can't extract xz files, then you can't extract tarballs for Python, symmetrica, gcc, and gmp.",
    "created_at": "2020-11-22T22:58:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491518",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

What does this have to do with this ticket? If you can't extract xz files, then you can't extract tarballs for Python, symmetrica, gcc, and gmp.



---

archive/issue_comments_491519.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThese other packages declare a dependency on `xz` (see #30559)",
    "created_at": "2020-11-22T23:00:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491519",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

These other packages declare a dependency on `xz` (see #30559)



---

archive/issue_comments_491520.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nBut on OS X, the included version of Python 3, at least as of 10.15.7, can extract `.tar.xz` files using its `tarfile` module. It looks like this feature was added in Python 3.3. We shouldn't need the `xz` executable for this, unless the system only has an old version of Python. Rather than using #30948, or maybe in addition, maybe we should modify the code in `sage_bootstrap.uncompress.tar_file` that handles `xz` files.",
    "created_at": "2020-11-22T23:53:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491520",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

But on OS X, the included version of Python 3, at least as of 10.15.7, can extract `.tar.xz` files using its `tarfile` module. It looks like this feature was added in Python 3.3. We shouldn't need the `xz` executable for this, unless the system only has an old version of Python. Rather than using #30948, or maybe in addition, maybe we should modify the code in `sage_bootstrap.uncompress.tar_file` that handles `xz` files.



---

archive/issue_comments_491521.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThat's true, but as of #29890, we prefer system python 2 because with python3 we have run into SSL problems. (The correct fix is discussed in the ticket description of #29418.)",
    "created_at": "2020-11-23T00:53:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491521",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

That's true, but as of #29890, we prefer system python 2 because with python3 we have run into SSL problems. (The correct fix is discussed in the ticket description of #29418.)



---

archive/issue_comments_491522.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@mkoeppe](#comment:25):\n> The correct fix is discussed in the ticket description of #29418.\n\nI've opened #30950 for this -- but for the present ticket, let's just add `xz` to the dependencies.",
    "created_at": "2020-11-23T02:02:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491522",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@mkoeppe](#comment:25):
> The correct fix is discussed in the ticket description of #29418.

I've opened #30950 for this -- but for the present ticket, let's just add `xz` to the dependencies.



---

archive/issue_comments_491523.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/make_gmp_default_mp)** to **[u/mkoeppe/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/make_gmp_default_mp)**",
    "created_at": "2020-11-25T00:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491523",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/dimpase/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/make_gmp_default_mp)** to **[u/mkoeppe/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/make_gmp_default_mp)**



---

archive/issue_comments_491524.json:
```json
{
    "body": "Changed commit from **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)** to **[`d2500f1`](https://github.com/sagemath/sagetrac-mirror/commit/d2500f18354e5aa37bef1ee194e6ed3335874f2e)**",
    "created_at": "2020-11-25T00:06:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491524",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`a1b552c`](https://github.com/sagemath/sagetrac-mirror/commit/a1b552cfa3ac2c732f1ded4c2aad9d149bba8efb)** to **[`d2500f1`](https://github.com/sagemath/sagetrac-mirror/commit/d2500f18354e5aa37bef1ee194e6ed3335874f2e)**



---

archive/issue_comments_491525.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/deb738c7c79dec04f5c2e5936bdd43a7f9652871\"><code>deb738c</code></a></td><td><code>Merge tag '9.3.beta2' into t/30752/packages/make_gmp_default_mp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d2500f18354e5aa37bef1ee194e6ed3335874f2e\"><code>d2500f1</code></a></td><td><code>build/pkgs/gmp/dependencies: Add xz</code></td></tr></table>\n",
    "created_at": "2020-11-25T00:06:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491525",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/deb738c7c79dec04f5c2e5936bdd43a7f9652871"><code>deb738c</code></a></td><td><code>Merge tag '9.3.beta2' into t/30752/packages/make_gmp_default_mp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d2500f18354e5aa37bef1ee194e6ed3335874f2e"><code>d2500f1</code></a></td><td><code>build/pkgs/gmp/dependencies: Add xz</code></td></tr></table>




---

archive/issue_events_426282.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-25T00:06:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426282"
}
```



---

archive/issue_comments_491526.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe** to **Matthias Koeppe, ...**",
    "created_at": "2020-11-25T00:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491526",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Matthias Koeppe** to **Matthias Koeppe, ...**



---

archive/issue_comments_491527.json:
```json
{
    "body": "Changed author from **Dima Pasechnik** to **Dima Pasechnik, Matthias Koeppe**",
    "created_at": "2020-11-25T00:08:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491527",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Dima Pasechnik** to **Dima Pasechnik, Matthias Koeppe**



---

archive/issue_comments_491528.json:
```json
{
    "body": "Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Dima Pasechnik**",
    "created_at": "2020-11-25T10:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491528",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Matthias Koeppe, ...** to **Matthias Koeppe, Dima Pasechnik**



---

archive/issue_comments_491529.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nlgtm",
    "created_at": "2020-11-25T10:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491529",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

lgtm



---

archive/issue_events_426283.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-25T10:07:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426283"
}
```



---

archive/issue_events_426284.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-25T10:07:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426284"
}
```



---

archive/issue_comments_491530.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/make_gmp_default_mp)** to **[`d2500f1`](https://github.com/sagemath/sagetrac-mirror/commit/d2500f18354e5aa37bef1ee194e6ed3335874f2e)**",
    "created_at": "2020-12-05T22:13:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30752#issuecomment-491530",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/packages/make_gmp_default_mp](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/packages/make_gmp_default_mp)** to **[`d2500f1`](https://github.com/sagemath/sagetrac-mirror/commit/d2500f18354e5aa37bef1ee194e6ed3335874f2e)**



---

archive/issue_events_426285.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-05T22:13:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426285"
}
```



---

archive/issue_events_426286.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "755a789d9966f3fdde6402c78a9a669f3c52eef6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-05T22:13:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30752",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30752#event-426286"
}
```
