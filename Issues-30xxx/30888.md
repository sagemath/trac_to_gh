# Issue 30888: Make $SAGE_LOCAL/bin/sage work again from any directory, in an environment without SAGE_* variables, following symlinks

archive/issues_030651.json:
```json
{
    "assignees": [],
    "body": "The feature introduced in #25486 (Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without SAGE_* variables) was killed by #30128 (enforce sourcing of `sage-env-config` before `src/bin/sage-env`).\n\nWe repair it, making sure that it works even if $0 is a symlink.\n\n\nCC:  @orlitzky @dimpase @jhpalmieri\n\nKeywords: **sd111**\n\nBranch/Commit: **[a63d256](https://github.com/sagemath/sagetrac-mirror/commit/a63d256e1f1968544822ff2af8b4ef146b7c9660)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Michael Orlitzky**\n\nComponent: **scripts**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30888_\n\n",
    "closed_at": "2021-04-02T15:42:53Z",
    "created_at": "2020-11-11T02:15:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20scripts",
        "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Make $SAGE_LOCAL/bin/sage work again from any directory, in an environment without SAGE_* variables, following symlinks",
    "type": "issue",
    "updated_at": "2021-04-02T15:42:53Z",
    "url": "https://github.com/sagemath/sage/issues/30888",
    "user": "https://github.com/mkoeppe"
}
```
The feature introduced in #25486 (Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without SAGE_* variables) was killed by #30128 (enforce sourcing of `sage-env-config` before `src/bin/sage-env`).

We repair it, making sure that it works even if $0 is a symlink.


CC:  @orlitzky @dimpase @jhpalmieri

Keywords: **sd111**

Branch/Commit: **[a63d256](https://github.com/sagemath/sagetrac-mirror/commit/a63d256e1f1968544822ff2af8b4ef146b7c9660)**

Reviewer: **Matthias Koeppe**

Author: **Michael Orlitzky**

Component: **scripts**

_Issue created by migration from https://trac.sagemath.org/ticket/30888_





---

archive/issue_events_426033.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T02:15:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426033"
}
```



---

archive/issue_events_426034.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T02:15:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20scripts",
    "label_color": "000080",
    "label_name": "c: scripts",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426034"
}
```



---

archive/issue_events_426035.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T02:15:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426035"
}
```



---

archive/issue_events_426036.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T02:15:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426036"
}
```



---

archive/issue_comments_494744.json:
```json
{
    "body": "Dependencies: **#29850**",
    "created_at": "2020-11-11T02:15:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494744",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#29850**



---

archive/issue_comments_494745.json:
```json
{
    "body": "Branch: **[u/mkoeppe/remove_unused_env_variable_sage_scripts_dir](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_unused_env_variable_sage_scripts_dir)**",
    "created_at": "2020-11-11T02:19:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494745",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/remove_unused_env_variable_sage_scripts_dir](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_unused_env_variable_sage_scripts_dir)**



---

archive/issue_events_426037.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T02:21:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426037"
}
```



---

archive/issue_comments_494746.json:
```json
{
    "body": "Commit: **[a318e9e](https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12)**",
    "created_at": "2020-11-11T02:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494746",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[a318e9e](https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12)**



---

archive/issue_comments_494747.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-11-11T02:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494747",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_494748.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8e69100d6b4ba30a3854266fbaa83aa3982f4a3\">c8e6910</a></td><td><code>Merge tag '9.3.beta1' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ab593c41f56260651931a630a6c0fd504130395\">9ab593c</a></td><td><code>Install sage-env-config with sage_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3615809e0eda053534d6f0713ee95e6c5939c7d\">a361580</a></td><td><code>build/pkgs/sage_conf/spkg-src: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d02b59722808b81329c390017e55e69237cc9557\">d02b597</a></td><td><code>build/pkgs/sagelib/src/setup.py: Do not install sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b4bc9938d3dcef8cd4f745f0bc26a718b35178d\">1b4bc99</a></td><td><code>src/bin/sage: Only source sage-env-config if it exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a1a6df55d880441fe57975c653c161e929cc9dd5\">a1a6df5</a></td><td><code>src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d30b4108d16ab4187d55d25bf19b94b2e6053106\">d30b410</a></td><td><code>build/pkgs/sage_conf/spkg-install: Build wheel manually</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/19f7eae793b3eee1113f98e31b952246ebfd51c4\">19f7eae</a></td><td><code>src/bin/sage-env: Make sage-env-config optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecde60526b1c8da6e4b4914dcea50fd7e68e24a4\">ecde605</a></td><td><code>Merge branch 't/29850/install_sage_env_config_with_sage_conf' into t/30888/remove_unused_env_variable_sage_scripts_dir</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12\">a318e9e</a></td><td><code>src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR</code></td></tr></table>\n",
    "created_at": "2020-11-11T02:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494748",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8e69100d6b4ba30a3854266fbaa83aa3982f4a3">c8e6910</a></td><td><code>Merge tag '9.3.beta1' into t/29951/src_bin_sage_env__make_sage_env_config_and_sage_local_optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ab593c41f56260651931a630a6c0fd504130395">9ab593c</a></td><td><code>Install sage-env-config with sage_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3615809e0eda053534d6f0713ee95e6c5939c7d">a361580</a></td><td><code>build/pkgs/sage_conf/spkg-src: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d02b59722808b81329c390017e55e69237cc9557">d02b597</a></td><td><code>build/pkgs/sagelib/src/setup.py: Do not install sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b4bc9938d3dcef8cd4f745f0bc26a718b35178d">1b4bc99</a></td><td><code>src/bin/sage: Only source sage-env-config if it exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a1a6df55d880441fe57975c653c161e929cc9dd5">a1a6df5</a></td><td><code>src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d30b4108d16ab4187d55d25bf19b94b2e6053106">d30b410</a></td><td><code>build/pkgs/sage_conf/spkg-install: Build wheel manually</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/19f7eae793b3eee1113f98e31b952246ebfd51c4">19f7eae</a></td><td><code>src/bin/sage-env: Make sage-env-config optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecde60526b1c8da6e4b4914dcea50fd7e68e24a4">ecde605</a></td><td><code>Merge branch 't/29850/install_sage_env_config_with_sage_conf' into t/30888/remove_unused_env_variable_sage_scripts_dir</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12">a318e9e</a></td><td><code>src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR</code></td></tr></table>




---

archive/issue_events_426038.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T18:48:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426038"
}
```



---

archive/issue_events_426039.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T18:48:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426039"
}
```



---

archive/issue_comments_494749.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nTurns out that `SAGE_SCRIPTS_DIR` is unused because the feature introduced in #25486 (Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without `SAGE_*` variables) was killed by #30128, as part of the quest to remove bashisms.",
    "created_at": "2020-11-11T18:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494749",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Turns out that `SAGE_SCRIPTS_DIR` is unused because the feature introduced in #25486 (Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without `SAGE_*` variables) was killed by #30128, as part of the quest to remove bashisms.



---

archive/issue_events_426040.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T18:58:03Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "title_is": "Repair SAGE_SCRIPTS_DIR discovery to make $SAGE_LOCAL/bin/sage work again from any directory, in an environment without SAGE_* variables",
    "title_was": "Remove unused env variable SAGE_SCRIPTS_DIR",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426040"
}
```



---

archive/issue_comments_494750.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nUnfortunately I did not notice it when I reviewed #30128.",
    "created_at": "2020-11-11T18:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494750",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Unfortunately I did not notice it when I reviewed #30128.



---

archive/issue_events_426041.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T18:58:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426041"
}
```



---

archive/issue_events_426042.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-11T18:58:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426042"
}
```



---

archive/issue_comments_494751.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n-After #30128 (enforce sourcing of `sage-env-config` before `src/bin/sage-env`) and #29850, `SAGE_SCRIPTS_DIR`, set in `sage-env`, is not used for anything. We remove it.\n+The feature introduced in #25486 (Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without SAGE_* variables) was killed by #30128 (enforce sourcing of `sage-env-config` before `src/bin/sage-env`).\n \n+We repair it, making sure that it works even if $0 is a symlink.\n+\n``````\n",
    "created_at": "2020-11-11T18:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494751",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
-After #30128 (enforce sourcing of `sage-env-config` before `src/bin/sage-env`) and #29850, `SAGE_SCRIPTS_DIR`, set in `sage-env`, is not used for anything. We remove it.
+The feature introduced in #25486 (Discover `SAGE_SCRIPTS_DIR` to make `$SAGE_LOCAL/bin/sage` work from any directory, in an environment without SAGE_* variables) was killed by #30128 (enforce sourcing of `sage-env-config` before `src/bin/sage-env`).
 
+We repair it, making sure that it works even if $0 is a symlink.
+
``````




---

archive/issue_comments_494752.json:
```json
{
    "body": "Changed commit from **[a318e9e](https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12)** to none",
    "created_at": "2020-11-12T19:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494752",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[a318e9e](https://github.com/sagemath/sagetrac-mirror/commit/a318e9e3c03bc466f966965df378ff4685ff6d12)** to none



---

archive/issue_comments_494753.json:
```json
{
    "body": "Changed dependencies from **#29850** to **#29951**",
    "created_at": "2020-11-12T19:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494753",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29850** to **#29951**



---

archive/issue_comments_494754.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/remove_unused_env_variable_sage_scripts_dir](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_unused_env_variable_sage_scripts_dir)** to none",
    "created_at": "2020-11-12T19:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494754",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mkoeppe/remove_unused_env_variable_sage_scripts_dir](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/remove_unused_env_variable_sage_scripts_dir)** to none



---

archive/issue_comments_494755.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAny takers for this one?",
    "created_at": "2020-11-12T19:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494755",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Any takers for this one?



---

archive/issue_comments_494756.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to none",
    "created_at": "2020-11-12T19:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494756",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to none



---

archive/issue_comments_494757.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nWhat kind of solution is acceptable here? I've lost track of the big picture, but it looks like all of the important `./configure`-time settings are in `sage-env-config`, but `local/bin/sage` can't find `sage-env-config` because the path to it (determined during `./configure`) is contained in `sage-env-config`.\n\nAre we allowed to stick autoconf values directly into `local/bin/sage` (after renaming with an `.in` suffix), like\n\n```\n: ${SAGE_ROOT:=@abs_top_srcdir@}\n```\n\nwhich would set a default value of `SAGE_ROOT` at `./configure`-time, but still allow custom values of `SAGE_ROOT` to be set in the environment?",
    "created_at": "2020-11-12T21:15:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494757",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:8" align="right">comment:8</div>

What kind of solution is acceptable here? I've lost track of the big picture, but it looks like all of the important `./configure`-time settings are in `sage-env-config`, but `local/bin/sage` can't find `sage-env-config` because the path to it (determined during `./configure`) is contained in `sage-env-config`.

Are we allowed to stick autoconf values directly into `local/bin/sage` (after renaming with an `.in` suffix), like

```
: ${SAGE_ROOT:=@abs_top_srcdir@}
```

which would set a default value of `SAGE_ROOT` at `./configure`-time, but still allow custom values of `SAGE_ROOT` to be set in the environment?



---

archive/issue_comments_494758.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@orlitzky](#comment:8):\n> What kind of solution is acceptable here? I've lost track of the big picture, but it looks like all of the important `./configure`-time settings are in `sage-env-config`, but `local/bin/sage` can't find `sage-env-config` because the path to it (determined during `./configure`) is contained in `sage-env-config`.\n\nThe directory can be found from $0, with resolving symlinks.\nSimilar to what used to be in `sage-env`, but not bash-specific because it's for an executed script rather than a sourced script.\n\n> Are we allowed to stick autoconf values directly into `local/bin/sage` (after renaming with an `.in` suffix), like\n> \n> ```\n> : ${SAGE_ROOT:=@abs_top_srcdir@}\n> ```\n> \n> which would set a default value of `SAGE_ROOT` at `./configure`-time, but still allow custom values of `SAGE_ROOT` to be set in the environment?\n\nNo, because the `sage` script is installed by `setup.py` and we plan to make this work even when `configure` has not been run.",
    "created_at": "2020-11-12T21:19:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494758",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@orlitzky](#comment:8):
> What kind of solution is acceptable here? I've lost track of the big picture, but it looks like all of the important `./configure`-time settings are in `sage-env-config`, but `local/bin/sage` can't find `sage-env-config` because the path to it (determined during `./configure`) is contained in `sage-env-config`.

The directory can be found from $0, with resolving symlinks.
Similar to what used to be in `sage-env`, but not bash-specific because it's for an executed script rather than a sourced script.

> Are we allowed to stick autoconf values directly into `local/bin/sage` (after renaming with an `.in` suffix), like
> 
> ```
> : ${SAGE_ROOT:=@abs_top_srcdir@}
> ```
> 
> which would set a default value of `SAGE_ROOT` at `./configure`-time, but still allow custom values of `SAGE_ROOT` to be set in the environment?

No, because the `sage` script is installed by `setup.py` and we plan to make this work even when `configure` has not been run.



---

archive/issue_comments_494759.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIt could be done on top of #29852, just adding code to resolve a $0 symlink instead of using $0 directly.",
    "created_at": "2020-11-13T03:10:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494759",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

It could be done on top of #29852, just adding code to resolve a $0 symlink instead of using $0 directly.



---

archive/issue_comments_494760.json:
```json
{
    "body": "Changed dependencies from **#29951** to **#29951, #29852**",
    "created_at": "2020-11-13T03:11:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494760",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29951** to **#29951, #29852**



---

archive/issue_comments_494761.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWe can fake `realpath` by copy & pasting the 70-line `resolvelinks()` function from sage-env, but I think that's pretty ugly:\n\n* It's copy/pasting a ton of code. We can't source sage-env for it, because we don't know where sage-env lives.\n* The function still doesn't work in some common cases, like hardlinks into the tree or symlinks out of the tree.\n* It's a waste of time recomputing the same paths every time \"sage\" is run, in slow shell script.\n\nIf setup.py installs the script, it knows the correct location. It could replace a placeholder at install-time as in e.g. https://git.launchpad.net/dkimpy-milter/tree/setup.py",
    "created_at": "2020-11-13T13:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494761",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:12" align="right">comment:12</div>

We can fake `realpath` by copy & pasting the 70-line `resolvelinks()` function from sage-env, but I think that's pretty ugly:

* It's copy/pasting a ton of code. We can't source sage-env for it, because we don't know where sage-env lives.
* The function still doesn't work in some common cases, like hardlinks into the tree or symlinks out of the tree.
* It's a waste of time recomputing the same paths every time "sage" is run, in slow shell script.

If setup.py installs the script, it knows the correct location. It could replace a placeholder at install-time as in e.g. https://git.launchpad.net/dkimpy-milter/tree/setup.py



---

archive/issue_comments_494762.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@orlitzky](#comment:12):\n> We can fake `realpath` by copy & pasting the 70-line `resolvelinks()` function from sage-env, but I think that's pretty ugly:\n> \n> * It's copy/pasting a ton of code. We can't source sage-env for it, because we don't know where sage-env lives.\n\nI agree it's a bit ugly... that would be the third copy of the code (another one is in SAGE_ROOT/sage). Perhaps we can get rid of the copy in `sage-env`?\n\n> * The function still doesn't work in some common cases, like hardlinks into the tree or symlinks out of the tree.\n\nHardlinks - granted.\n\nWhat do you mean by \"symlinks out of the tree\"?\n\nWe would just document what is supported. The installation manual already has some guidance regarding \"system wide installation\" that needs updating anyway.\n\n> * It's a waste of time recomputing the same paths every time \"sage\" is run, in slow shell script.\n\nTrue, but perhaps the resolving code would only be run if the files cannot be found without resolving. Then it would impose the runtime penalty only if symlinks are in use.\n\n> If setup.py installs the script, it knows the correct location. It could replace a placeholder at install-time as in e.g. https://git.launchpad.net/dkimpy-milter/tree/setup.py\n\nNo, this is unfortunately not true. The final install location of the Python package is not known at `setup.py` time. When we build a wheel (which is the default installation mechanism in modern pip), the resulting wheel can be installed in any venv location (and the wheel format does not support post-install hooks of any kind).",
    "created_at": "2020-11-13T16:38:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494762",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@orlitzky](#comment:12):
> We can fake `realpath` by copy & pasting the 70-line `resolvelinks()` function from sage-env, but I think that's pretty ugly:
> 
> * It's copy/pasting a ton of code. We can't source sage-env for it, because we don't know where sage-env lives.

I agree it's a bit ugly... that would be the third copy of the code (another one is in SAGE_ROOT/sage). Perhaps we can get rid of the copy in `sage-env`?

> * The function still doesn't work in some common cases, like hardlinks into the tree or symlinks out of the tree.

Hardlinks - granted.

What do you mean by "symlinks out of the tree"?

We would just document what is supported. The installation manual already has some guidance regarding "system wide installation" that needs updating anyway.

> * It's a waste of time recomputing the same paths every time "sage" is run, in slow shell script.

True, but perhaps the resolving code would only be run if the files cannot be found without resolving. Then it would impose the runtime penalty only if symlinks are in use.

> If setup.py installs the script, it knows the correct location. It could replace a placeholder at install-time as in e.g. https://git.launchpad.net/dkimpy-milter/tree/setup.py

No, this is unfortunately not true. The final install location of the Python package is not known at `setup.py` time. When we build a wheel (which is the default installation mechanism in modern pip), the resulting wheel can be installed in any venv location (and the wheel format does not support post-install hooks of any kind).



---

archive/issue_comments_494763.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@mkoeppe](#comment:13):\n> \n> What do you mean by \"symlinks out of the tree\"?\n\nIf you move `local/bin/sage` elsewhere, and then create a symlink from `local/bin/sage` to that location. In that case, you don't want to use the absolute physical path of the script that's being run to find `SAGE_ROOT`, rather the absolute physical path of its original install location.\n\n \n> > If setup.py installs the script, it knows the correct location. It could replace a placeholder at install-time as in e.g. https://git.launchpad.net/dkimpy-milter/tree/setup.py\n\n> \n> No, this is unfortunately not true. The final install location of the Python package is not known at `setup.py` time. When we build a wheel (which is the default installation mechanism in modern pip), the resulting wheel can be installed in any venv location (and the wheel format does not support post-install hooks of any kind).\n\nOk, I don't know enough about how this works to propose anything else. Copy/paste it is, then.",
    "created_at": "2020-11-13T21:15:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494763",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@mkoeppe](#comment:13):
> 
> What do you mean by "symlinks out of the tree"?

If you move `local/bin/sage` elsewhere, and then create a symlink from `local/bin/sage` to that location. In that case, you don't want to use the absolute physical path of the script that's being run to find `SAGE_ROOT`, rather the absolute physical path of its original install location.

 
> > If setup.py installs the script, it knows the correct location. It could replace a placeholder at install-time as in e.g. https://git.launchpad.net/dkimpy-milter/tree/setup.py

> 
> No, this is unfortunately not true. The final install location of the Python package is not known at `setup.py` time. When we build a wheel (which is the default installation mechanism in modern pip), the resulting wheel can be installed in any venv location (and the wheel format does not support post-install hooks of any kind).

Ok, I don't know enough about how this works to propose anything else. Copy/paste it is, then.



---

archive/issue_comments_494764.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@orlitzky](#comment:14):\n> Replying to [@mkoeppe](#comment:13):\n> > \n> > What do you mean by \"symlinks out of the tree\"?\n\n> \n> If you move `local/bin/sage` elsewhere, and then create a symlink from `local/bin/sage` to that location. In that case, you don't want to use the absolute physical path of the script that's being run to find `SAGE_ROOT`, rather the absolute physical path of its original install location.\n\nRight, let's just say that this is not supported.",
    "created_at": "2020-11-13T21:37:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494764",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@orlitzky](#comment:14):
> Replying to [@mkoeppe](#comment:13):
> > 
> > What do you mean by "symlinks out of the tree"?

> 
> If you move `local/bin/sage` elsewhere, and then create a symlink from `local/bin/sage` to that location. In that case, you don't want to use the absolute physical path of the script that's being run to find `SAGE_ROOT`, rather the absolute physical path of its original install location.

Right, let's just say that this is not supported.



---

archive/issue_events_426043.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-15T00:11:59Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "title_is": "Make $SAGE_LOCAL/bin/sage work again from any directory, in an environment without SAGE_* variables, following symlinks",
    "title_was": "Repair SAGE_SCRIPTS_DIR discovery to make $SAGE_LOCAL/bin/sage work again from any directory, in an environment without SAGE_* variables",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426043"
}
```



---

archive/issue_comments_494765.json:
```json
{
    "body": "Changed dependencies from **#29951, #29852** to **#29951, #29852, #30013**",
    "created_at": "2020-11-20T20:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494765",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29951, #29852** to **#29951, #29852, #30013**



---

archive/issue_comments_494766.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nBest to work on it on top of #30013",
    "created_at": "2020-11-20T20:54:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494766",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Best to work on it on top of #30013



---

archive/issue_comments_494767.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494767",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_494768.json:
```json
{
    "body": "Changed keywords from none to **sd111**",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494768",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from none to **sd111**



---

archive/issue_comments_494769.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nUser bug report - https://groups.google.com/g/sage-devel/c/tejOsRxfC9w/m/ulKTsowHBAAJ",
    "created_at": "2020-12-18T00:26:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494769",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

User bug report - https://groups.google.com/g/sage-devel/c/tejOsRxfC9w/m/ulKTsowHBAAJ



---

archive/issue_comments_494770.json:
```json
{
    "body": "Changed dependencies from **#29951, #29852, #30013** to none",
    "created_at": "2021-02-22T03:22:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494770",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29951, #29852, #30013** to none



---

archive/issue_comments_494771.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@orlitzky](#comment:14):\n> Copy/paste it is, then.\n\nGot time to work on this for Sage 9.3?",
    "created_at": "2021-03-20T00:44:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494771",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@orlitzky](#comment:14):
> Copy/paste it is, then.

Got time to work on this for Sage 9.3?



---

archive/issue_comments_494772.json:
```json
{
    "body": "Author: **Michael Orlitzky**",
    "created_at": "2021-03-21T01:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494772",
    "user": "https://github.com/orlitzky"
}
```

Author: **Michael Orlitzky**



---

archive/issue_comments_494773.json:
```json
{
    "body": "Branch: **[u/mjo/ticket/30888](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/30888)**",
    "created_at": "2021-03-21T01:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494773",
    "user": "https://github.com/orlitzky"
}
```

Branch: **[u/mjo/ticket/30888](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/30888)**



---

archive/issue_comments_494774.json:
```json
{
    "body": "Commit: **[a63d256](https://github.com/sagemath/sagetrac-mirror/commit/a63d256e1f1968544822ff2af8b4ef146b7c9660)**",
    "created_at": "2021-03-21T01:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494774",
    "user": "https://github.com/orlitzky"
}
```

Commit: **[a63d256](https://github.com/sagemath/sagetrac-mirror/commit/a63d256e1f1968544822ff2af8b4ef146b7c9660)**



---

archive/issue_events_426044.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-03-21T01:10:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426044"
}
```



---

archive/issue_events_426045.json:
```json
{
    "actor": "https://github.com/orlitzky",
    "created_at": "2021-03-21T01:10:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426045"
}
```



---

archive/issue_comments_494775.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nFurther cleanup is possible, but I think this fixes the issue and makes the diff nice and clear.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a63d256e1f1968544822ff2af8b4ef146b7c9660\">a63d256</a></td><td><code>Trac #30888: resolve $0 links in src/bin/sage.</code></td></tr></table>\n",
    "created_at": "2021-03-21T01:10:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494775",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:22" align="right">comment:22</div>

Further cleanup is possible, but I think this fixes the issue and makes the diff nice and clear.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a63d256e1f1968544822ff2af8b4ef146b7c9660">a63d256</a></td><td><code>Trac #30888: resolve $0 links in src/bin/sage.</code></td></tr></table>




---

archive/issue_comments_494776.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThis works well, thanks very much.",
    "created_at": "2021-03-21T05:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494776",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

This works well, thanks very much.



---

archive/issue_comments_494777.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-03-21T05:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494777",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_426046.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-21T05:08:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426046"
}
```



---

archive/issue_events_426047.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-21T05:08:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426047"
}
```



---

archive/issue_events_426048.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-28T18:45:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426048"
}
```



---

archive/issue_events_426049.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-28T18:45:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426049"
}
```



---

archive/issue_comments_494778.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSetting priority to blocker to bring this ticket to the attention of the release bot.",
    "created_at": "2021-03-29T23:54:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494778",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

Setting priority to blocker to bring this ticket to the attention of the release bot.



---

archive/issue_events_426050.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-29T23:54:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426050"
}
```



---

archive/issue_events_426051.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-29T23:54:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/p%3A%201%20%E2%80%93%20blocker",
    "label_color": "ff0000",
    "label_name": "p: 1 \u2013 blocker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426051"
}
```



---

archive/issue_events_426052.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-04-02T15:42:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426052"
}
```



---

archive/issue_events_426053.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7b44d1cb00446dde07804e09694432114657f31f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-04-02T15:42:53Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30888#event-426053"
}
```



---

archive/issue_comments_494779.json:
```json
{
    "body": "Changed branch from **[u/mjo/ticket/30888](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/30888)** to **[a63d256](https://github.com/sagemath/sagetrac-mirror/commit/a63d256e1f1968544822ff2af8b4ef146b7c9660)**",
    "created_at": "2021-04-02T15:42:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30888",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30888#issuecomment-494779",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mjo/ticket/30888](https://github.com/sagemath/sagetrac-mirror/tree/u/mjo/ticket/30888)** to **[a63d256](https://github.com/sagemath/sagetrac-mirror/commit/a63d256e1f1968544822ff2af8b4ef146b7c9660)**
