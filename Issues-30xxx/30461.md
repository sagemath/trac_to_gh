# Issue 30461: Fully-commutative stable Grothendieck crystal

archive/issues_030224.json:
```json
{
    "assignees": [],
    "body": "Implementation of the crystal on fully-commutative decreasing factorizations in the 0-Hecke monoid. See https://arxiv.org/abs/1911.08732.\n\nCC:  @anneschilling @sagetrac-jppan @tscrim\n\nKeywords: **crystal**\n\nBranch/Commit: **[`d6bfcd2`](https://github.com/sagemath/sagetrac-mirror/commit/d6bfcd240254286209a505763a30fae402d84feb)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jianping Pan, Wencin Poh, Anne Schilling**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30461_\n\n",
    "closed_at": "2020-10-05T20:13:22Z",
    "created_at": "2020-08-28T23:11:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fully-commutative stable Grothendieck crystal",
    "type": "issue",
    "updated_at": "2020-10-05T20:13:22Z",
    "url": "https://github.com/sagemath/sage/issues/30461",
    "user": "https://github.com/sagetrac-wpoh"
}
```
Implementation of the crystal on fully-commutative decreasing factorizations in the 0-Hecke monoid. See https://arxiv.org/abs/1911.08732.

CC:  @anneschilling @sagetrac-jppan @tscrim

Keywords: **crystal**

Branch/Commit: **[`d6bfcd2`](https://github.com/sagemath/sagetrac-mirror/commit/d6bfcd240254286209a505763a30fae402d84feb)**

Reviewer: **Travis Scrimshaw**

Author: **Jianping Pan, Wencin Poh, Anne Schilling**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/30461_





---

archive/issue_events_419904.json:
```json
{
    "actor": "https://github.com/sagetrac-wpoh",
    "created_at": "2020-08-28T23:11:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419904"
}
```



---

archive/issue_events_419905.json:
```json
{
    "actor": "https://github.com/sagetrac-wpoh",
    "created_at": "2020-08-28T23:11:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419905"
}
```



---

archive/issue_events_419906.json:
```json
{
    "actor": "https://github.com/sagetrac-wpoh",
    "created_at": "2020-08-28T23:11:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419906"
}
```



---

archive/issue_events_419907.json:
```json
{
    "actor": "https://github.com/sagetrac-wpoh",
    "created_at": "2020-08-28T23:11:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419907"
}
```



---

archive/issue_comments_485390.json:
```json
{
    "body": "Branch: **[public/combinat/fc_stable_Grothendieck_crystal-30461](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/fc_stable_Grothendieck_crystal-30461)**",
    "created_at": "2020-08-31T20:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485390",
    "user": "https://github.com/sagetrac-wpoh"
}
```

Branch: **[public/combinat/fc_stable_Grothendieck_crystal-30461](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/fc_stable_Grothendieck_crystal-30461)**



---

archive/issue_comments_485391.json:
```json
{
    "body": "Commit: **[`947ba35`](https://github.com/sagemath/sagetrac-mirror/commit/947ba351fcd236e66400afaa3e6c87a7d0b1232c)**",
    "created_at": "2020-08-31T20:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485391",
    "user": "https://github.com/sagetrac-wpoh"
}
```

Commit: **[`947ba35`](https://github.com/sagemath/sagetrac-mirror/commit/947ba351fcd236e66400afaa3e6c87a7d0b1232c)**



---

archive/issue_comments_485392.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/947ba351fcd236e66400afaa3e6c87a7d0b1232c\">947ba35</a></td><td><code>Add initial code</code></td></tr></table>\n",
    "created_at": "2020-08-31T20:03:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485392",
    "user": "https://github.com/sagetrac-wpoh"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/947ba351fcd236e66400afaa3e6c87a7d0b1232c">947ba35</a></td><td><code>Add initial code</code></td></tr></table>




---

archive/issue_comments_485393.json:
```json
{
    "body": "Changed commit from **[`947ba35`](https://github.com/sagemath/sagetrac-mirror/commit/947ba351fcd236e66400afaa3e6c87a7d0b1232c)** to **[`7eaf24d`](https://github.com/sagemath/sagetrac-mirror/commit/7eaf24da62aecd79d82ad7aa6be5b6c51d137d65)**",
    "created_at": "2020-09-08T03:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485393",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`947ba35`](https://github.com/sagemath/sagetrac-mirror/commit/947ba351fcd236e66400afaa3e6c87a7d0b1232c)** to **[`7eaf24d`](https://github.com/sagemath/sagetrac-mirror/commit/7eaf24da62aecd79d82ad7aa6be5b6c51d137d65)**



---

archive/issue_comments_485394.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7eaf24da62aecd79d82ad7aa6be5b6c51d137d65\">7eaf24d</a></td><td><code>fixes to docs and missing attributes</code></td></tr></table>\n",
    "created_at": "2020-09-08T03:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485394",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7eaf24da62aecd79d82ad7aa6be5b6c51d137d65">7eaf24d</a></td><td><code>fixes to docs and missing attributes</code></td></tr></table>




---

archive/issue_comments_485395.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b433d521670c341d3e9104390e95c8997a4951a\">1b433d5</a></td><td><code>Update documentation for Parent class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5dcfd53a29e92024d272ce7a652f5bcff9fdc4e1\">5dcfd53</a></td><td><code>Update documentation for DecreasingHeckeFactorization class</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/504dc16af1966bc76da8c6c1bb53165d70e80c06\">504dc16</a></td><td><code>Update documentation for Element class</code></td></tr></table>\n",
    "created_at": "2020-09-08T23:30:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485395",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b433d521670c341d3e9104390e95c8997a4951a">1b433d5</a></td><td><code>Update documentation for Parent class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5dcfd53a29e92024d272ce7a652f5bcff9fdc4e1">5dcfd53</a></td><td><code>Update documentation for DecreasingHeckeFactorization class</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/504dc16af1966bc76da8c6c1bb53165d70e80c06">504dc16</a></td><td><code>Update documentation for Element class</code></td></tr></table>




---

archive/issue_comments_485396.json:
```json
{
    "body": "Changed commit from **[`7eaf24d`](https://github.com/sagemath/sagetrac-mirror/commit/7eaf24da62aecd79d82ad7aa6be5b6c51d137d65)** to **[`504dc16`](https://github.com/sagemath/sagetrac-mirror/commit/504dc16af1966bc76da8c6c1bb53165d70e80c06)**",
    "created_at": "2020-09-08T23:30:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485396",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7eaf24d`](https://github.com/sagemath/sagetrac-mirror/commit/7eaf24da62aecd79d82ad7aa6be5b6c51d137d65)** to **[`504dc16`](https://github.com/sagemath/sagetrac-mirror/commit/504dc16af1966bc76da8c6c1bb53165d70e80c06)**



---

archive/issue_comments_485397.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83ba12f5cc9a9a72b26cc70b6c2670b586269b36\">83ba12f</a></td><td><code>Add FullyCommutativeStableGrothendieck to namespace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bd15e5a6cb57e89492012f1e62d85b9f51b0c4a\">0bd15e5</a></td><td><code>Update documentation for helper functions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0f2268183702d04ea4821f9225be931f6f03560\">d0f2268</a></td><td><code>Add reference</code></td></tr></table>\n",
    "created_at": "2020-09-09T03:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485397",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83ba12f5cc9a9a72b26cc70b6c2670b586269b36">83ba12f</a></td><td><code>Add FullyCommutativeStableGrothendieck to namespace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bd15e5a6cb57e89492012f1e62d85b9f51b0c4a">0bd15e5</a></td><td><code>Update documentation for helper functions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0f2268183702d04ea4821f9225be931f6f03560">d0f2268</a></td><td><code>Add reference</code></td></tr></table>




---

archive/issue_comments_485398.json:
```json
{
    "body": "Changed commit from **[`504dc16`](https://github.com/sagemath/sagetrac-mirror/commit/504dc16af1966bc76da8c6c1bb53165d70e80c06)** to **[`d0f2268`](https://github.com/sagemath/sagetrac-mirror/commit/d0f2268183702d04ea4821f9225be931f6f03560)**",
    "created_at": "2020-09-09T03:56:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485398",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`504dc16`](https://github.com/sagemath/sagetrac-mirror/commit/504dc16af1966bc76da8c6c1bb53165d70e80c06)** to **[`d0f2268`](https://github.com/sagemath/sagetrac-mirror/commit/d0f2268183702d04ea4821f9225be931f6f03560)**



---

archive/issue_comments_485399.json:
```json
{
    "body": "Changed commit from **[`d0f2268`](https://github.com/sagemath/sagetrac-mirror/commit/d0f2268183702d04ea4821f9225be931f6f03560)** to **[`855037c`](https://github.com/sagemath/sagetrac-mirror/commit/855037c4d36fd1c1d8b3c70563371a1b2c2a886b)**",
    "created_at": "2020-09-10T01:45:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485399",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d0f2268`](https://github.com/sagemath/sagetrac-mirror/commit/d0f2268183702d04ea4821f9225be931f6f03560)** to **[`855037c`](https://github.com/sagemath/sagetrac-mirror/commit/855037c4d36fd1c1d8b3c70563371a1b2c2a886b)**



---

archive/issue_comments_485400.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/855037c4d36fd1c1d8b3c70563371a1b2c2a886b\">855037c</a></td><td><code>white spaces and other doc fixes</code></td></tr></table>\n",
    "created_at": "2020-09-10T01:45:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485400",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/855037c4d36fd1c1d8b3c70563371a1b2c2a886b">855037c</a></td><td><code>white spaces and other doc fixes</code></td></tr></table>




---

archive/issue_comments_485401.json:
```json
{
    "body": "Changed commit from **[`855037c`](https://github.com/sagemath/sagetrac-mirror/commit/855037c4d36fd1c1d8b3c70563371a1b2c2a886b)** to **[`b4a9a3d`](https://github.com/sagemath/sagetrac-mirror/commit/b4a9a3d5812cb95b89df0bda6e646b4955c074d1)**",
    "created_at": "2020-09-10T08:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485401",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`855037c`](https://github.com/sagemath/sagetrac-mirror/commit/855037c4d36fd1c1d8b3c70563371a1b2c2a886b)** to **[`b4a9a3d`](https://github.com/sagemath/sagetrac-mirror/commit/b4a9a3d5812cb95b89df0bda6e646b4955c074d1)**



---

archive/issue_comments_485402.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4a9a3d5812cb95b89df0bda6e646b4955c074d1\">b4a9a3d</a></td><td><code>Support (skew) shapes for Parent class</code></td></tr></table>\n",
    "created_at": "2020-09-10T08:40:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485402",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4a9a3d5812cb95b89df0bda6e646b4955c074d1">b4a9a3d</a></td><td><code>Support (skew) shapes for Parent class</code></td></tr></table>




---

archive/issue_comments_485403.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cb552799f7f3504e98ad13040f81893ab9314c6\">8cb5527</a></td><td><code>Minor documentation edits</code></td></tr></table>\n",
    "created_at": "2020-09-11T19:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485403",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cb552799f7f3504e98ad13040f81893ab9314c6">8cb5527</a></td><td><code>Minor documentation edits</code></td></tr></table>




---

archive/issue_comments_485404.json:
```json
{
    "body": "Changed commit from **[`b4a9a3d`](https://github.com/sagemath/sagetrac-mirror/commit/b4a9a3d5812cb95b89df0bda6e646b4955c074d1)** to **[`8cb5527`](https://github.com/sagemath/sagetrac-mirror/commit/8cb552799f7f3504e98ad13040f81893ab9314c6)**",
    "created_at": "2020-09-11T19:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485404",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b4a9a3d`](https://github.com/sagemath/sagetrac-mirror/commit/b4a9a3d5812cb95b89df0bda6e646b4955c074d1)** to **[`8cb5527`](https://github.com/sagemath/sagetrac-mirror/commit/8cb552799f7f3504e98ad13040f81893ab9314c6)**



---

archive/issue_comments_485405.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51104eeea342edf5c3a0300ed4ca1996d529e826\">51104ee</a></td><td><code>merged with develop</code></td></tr></table>\n",
    "created_at": "2020-09-11T21:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485405",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51104eeea342edf5c3a0300ed4ca1996d529e826">51104ee</a></td><td><code>merged with develop</code></td></tr></table>




---

archive/issue_comments_485406.json:
```json
{
    "body": "Changed commit from **[`8cb5527`](https://github.com/sagemath/sagetrac-mirror/commit/8cb552799f7f3504e98ad13040f81893ab9314c6)** to **[`51104ee`](https://github.com/sagemath/sagetrac-mirror/commit/51104eeea342edf5c3a0300ed4ca1996d529e826)**",
    "created_at": "2020-09-11T21:08:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485406",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8cb5527`](https://github.com/sagemath/sagetrac-mirror/commit/8cb552799f7f3504e98ad13040f81893ab9314c6)** to **[`51104ee`](https://github.com/sagemath/sagetrac-mirror/commit/51104eeea342edf5c3a0300ed4ca1996d529e826)**



---

archive/issue_comments_485407.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb65b4c11b4177a4bbeeb18387d2aaea72d10c45\">bb65b4c</a></td><td><code>fixed doc tests and .m->.factors</code></td></tr></table>\n",
    "created_at": "2020-09-13T00:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485407",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb65b4c11b4177a4bbeeb18387d2aaea72d10c45">bb65b4c</a></td><td><code>fixed doc tests and .m->.factors</code></td></tr></table>




---

archive/issue_comments_485408.json:
```json
{
    "body": "Changed commit from **[`51104ee`](https://github.com/sagemath/sagetrac-mirror/commit/51104eeea342edf5c3a0300ed4ca1996d529e826)** to **[`bb65b4c`](https://github.com/sagemath/sagetrac-mirror/commit/bb65b4c11b4177a4bbeeb18387d2aaea72d10c45)**",
    "created_at": "2020-09-13T00:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485408",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`51104ee`](https://github.com/sagemath/sagetrac-mirror/commit/51104eeea342edf5c3a0300ed4ca1996d529e826)** to **[`bb65b4c`](https://github.com/sagemath/sagetrac-mirror/commit/bb65b4c11b4177a4bbeeb18387d2aaea72d10c45)**



---

archive/issue_comments_485409.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e86e6eaa14505c96c4e77043f97d005575a3ef8f\">e86e6ea</a></td><td><code>more intuitive names</code></td></tr></table>\n",
    "created_at": "2020-09-13T00:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485409",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e86e6eaa14505c96c4e77043f97d005575a3ef8f">e86e6ea</a></td><td><code>more intuitive names</code></td></tr></table>




---

archive/issue_comments_485410.json:
```json
{
    "body": "Changed commit from **[`bb65b4c`](https://github.com/sagemath/sagetrac-mirror/commit/bb65b4c11b4177a4bbeeb18387d2aaea72d10c45)** to **[`e86e6ea`](https://github.com/sagemath/sagetrac-mirror/commit/e86e6eaa14505c96c4e77043f97d005575a3ef8f)**",
    "created_at": "2020-09-13T00:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485410",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bb65b4c`](https://github.com/sagemath/sagetrac-mirror/commit/bb65b4c11b4177a4bbeeb18387d2aaea72d10c45)** to **[`e86e6ea`](https://github.com/sagemath/sagetrac-mirror/commit/e86e6eaa14505c96c4e77043f97d005575a3ef8f)**



---

archive/issue_comments_485411.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e6f215983929af76945ed6e9b5c4f963f09d32a\">8e6f215</a></td><td><code>changed input of crystal to symmetric group elements</code></td></tr></table>\n",
    "created_at": "2020-09-13T02:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485411",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e6f215983929af76945ed6e9b5c4f963f09d32a">8e6f215</a></td><td><code>changed input of crystal to symmetric group elements</code></td></tr></table>




---

archive/issue_comments_485412.json:
```json
{
    "body": "Changed commit from **[`e86e6ea`](https://github.com/sagemath/sagetrac-mirror/commit/e86e6eaa14505c96c4e77043f97d005575a3ef8f)** to **[`8e6f215`](https://github.com/sagemath/sagetrac-mirror/commit/8e6f215983929af76945ed6e9b5c4f963f09d32a)**",
    "created_at": "2020-09-13T02:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485412",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e86e6ea`](https://github.com/sagemath/sagetrac-mirror/commit/e86e6eaa14505c96c4e77043f97d005575a3ef8f)** to **[`8e6f215`](https://github.com/sagemath/sagetrac-mirror/commit/8e6f215983929af76945ed6e9b5c4f963f09d32a)**



---

archive/issue_events_419908.json:
```json
{
    "actor": "https://github.com/sagetrac-wpoh",
    "created_at": "2020-09-13T04:35:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419908"
}
```



---

archive/issue_comments_485413.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSamll remarks.\n\nAvoid having only TESTS:: in any non-underscored method, because the doc will be empty.\n\nThis\n\n```\nw.reduced_word()==[]\n```\ncould be\n\n```\nnot w.reduced_word()\n```\nwhich is faster.\n\n```\n+    Lists all words\n```\nshould be\n\n```\n+    List all words\n```\n\n```\n+    while len(queue) > 0:\n```\ncould be\n\n```\nwhile queue:\n```",
    "created_at": "2020-09-13T07:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485413",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:13" align="right">comment:13</div>

Samll remarks.

Avoid having only TESTS:: in any non-underscored method, because the doc will be empty.

This

```
w.reduced_word()==[]
```
could be

```
not w.reduced_word()
```
which is faster.

```
+    Lists all words
```
should be

```
+    List all words
```

```
+    while len(queue) > 0:
```
could be

```
while queue:
```



---

archive/issue_comments_485414.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c66e7b6ea0334524344ab9193994187cb84398d\">6c66e7b</a></td><td><code>turn TESTS in module_generators to EXAMPELS; small edits to chapoton's remarks</code></td></tr></table>\n",
    "created_at": "2020-09-13T17:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485414",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c66e7b6ea0334524344ab9193994187cb84398d">6c66e7b</a></td><td><code>turn TESTS in module_generators to EXAMPELS; small edits to chapoton's remarks</code></td></tr></table>




---

archive/issue_comments_485415.json:
```json
{
    "body": "Changed commit from **[`8e6f215`](https://github.com/sagemath/sagetrac-mirror/commit/8e6f215983929af76945ed6e9b5c4f963f09d32a)** to **[`6c66e7b`](https://github.com/sagemath/sagetrac-mirror/commit/6c66e7b6ea0334524344ab9193994187cb84398d)**",
    "created_at": "2020-09-13T17:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485415",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8e6f215`](https://github.com/sagemath/sagetrac-mirror/commit/8e6f215983929af76945ed6e9b5c4f963f09d32a)** to **[`6c66e7b`](https://github.com/sagemath/sagetrac-mirror/commit/6c66e7b6ea0334524344ab9193994187cb84398d)**



---

archive/issue_comments_485416.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc82786a165837433737e05cb09d952c5467dbe6\">bc82786</a></td><td><code>changed more TESTS to EXAMPLES</code></td></tr></table>\n",
    "created_at": "2020-09-13T18:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485416",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc82786a165837433737e05cb09d952c5467dbe6">bc82786</a></td><td><code>changed more TESTS to EXAMPLES</code></td></tr></table>




---

archive/issue_comments_485417.json:
```json
{
    "body": "Changed commit from **[`6c66e7b`](https://github.com/sagemath/sagetrac-mirror/commit/6c66e7b6ea0334524344ab9193994187cb84398d)** to **[`bc82786`](https://github.com/sagemath/sagetrac-mirror/commit/bc82786a165837433737e05cb09d952c5467dbe6)**",
    "created_at": "2020-09-13T18:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485417",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c66e7b`](https://github.com/sagemath/sagetrac-mirror/commit/6c66e7b6ea0334524344ab9193994187cb84398d)** to **[`bc82786`](https://github.com/sagemath/sagetrac-mirror/commit/bc82786a165837433737e05cb09d952c5467dbe6)**



---

archive/issue_comments_485418.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nfailing doctests in src/sage/misc/dev_tools.py\n\nThis seems to be due to a side effect of importing HeckeMonoid here.",
    "created_at": "2020-09-14T18:49:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485418",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:16" align="right">comment:16</div>

failing doctests in src/sage/misc/dev_tools.py

This seems to be due to a side effect of importing HeckeMonoid here.



---

archive/issue_comments_485419.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f66d1efdd3a89280b81ae4c68a6acca0f1c97993\">f66d1ef</a></td><td><code>fix Heckemonoid import issue</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/daa7e1ccd403eb31a101eb06a1bbd73bf023997d\">daa7e1c</a></td><td><code>minor edit</code></td></tr></table>\n",
    "created_at": "2020-09-15T01:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485419",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f66d1efdd3a89280b81ae4c68a6acca0f1c97993">f66d1ef</a></td><td><code>fix Heckemonoid import issue</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/daa7e1ccd403eb31a101eb06a1bbd73bf023997d">daa7e1c</a></td><td><code>minor edit</code></td></tr></table>




---

archive/issue_comments_485420.json:
```json
{
    "body": "Changed commit from **[`bc82786`](https://github.com/sagemath/sagetrac-mirror/commit/bc82786a165837433737e05cb09d952c5467dbe6)** to **[`daa7e1c`](https://github.com/sagemath/sagetrac-mirror/commit/daa7e1ccd403eb31a101eb06a1bbd73bf023997d)**",
    "created_at": "2020-09-15T01:20:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485420",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc82786`](https://github.com/sagemath/sagetrac-mirror/commit/bc82786a165837433737e05cb09d952c5467dbe6)** to **[`daa7e1c`](https://github.com/sagemath/sagetrac-mirror/commit/daa7e1ccd403eb31a101eb06a1bbd73bf023997d)**



---

archive/issue_comments_485421.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nLooks good. Thank you for this addition.\n\nSome additional comments to Fr\u00e9d\u00e9ric's:\n\n`fully_commutative_stable_grothendieck.py` is missing the file header information (module-level docstring, copyright, etc.).\n\nYou could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.\n\nIn the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?\n\nDo you really expect this:\n\n```\n            if not isinstance(parent, FullyCommutativeStableGrothendieckCrystal):\n                raise ValueError(\"parent should be an instance of FullyCommutativeStableGrothendieckCrystal\")\n```\nIt seems like it would be mostly useless.\n\nIt would be good to avoid going through the coercion framework and element constructor and just directly create the element:\n\n```diff\n-self.parent()(s)\n+P = self.parent()\n+P.element_class(P, s)\n```\nThis is good for speed.\n\nError messages should start with a lowercase:\n\n```diff\n-raise ValueError(\"Each nonempty factor should be a strictly decreasing sequence\")\n+raise ValueError(\"each nonempty factor should be a strictly decreasing sequence\")\n```\nThis is a Python convention that we try to follow.\n\nYou don't need the list here (I think it is actually slightly slower):\n\n```diff\n-m = max([cell[0] for cell in cells])+1\n+m = max(cell[0] for cell in cells) + 1\n```\n(and in similar other places).\n\n```diff\n-for i in range(m)[::-1]:\n+for i in range(m-1,-1,-1):\n```\n\nI believe you can do this:\n\n```\n-if p not in Permutations(avoiding=[3,2,1]):\n+if p.has_pattern([3,2,1]):\n```\nto avoid the transient parent (and some extra unnecessary containment checks).\n\n```diff\n-if m == None or (len(_jumps(w))<=m-1):\n+if m is None or len(_jumps(w)) <= m-1:\n```\n\nI think it would be good to avoid creating the tableau and then its conjugate in `_is_valid_column_word`:\n\n```python\n            T = Tableau(L)\n            return T.conjugate().is_semistandard()\n```\nI would just go through and check everything directly in `L`.",
    "created_at": "2020-09-15T01:21:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485421",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Looks good. Thank you for this addition.

Some additional comments to Frédéric's:

`fully_commutative_stable_grothendieck.py` is missing the file header information (module-level docstring, copyright, etc.).

You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.

In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?

Do you really expect this:

```
            if not isinstance(parent, FullyCommutativeStableGrothendieckCrystal):
                raise ValueError("parent should be an instance of FullyCommutativeStableGrothendieckCrystal")
```
It seems like it would be mostly useless.

It would be good to avoid going through the coercion framework and element constructor and just directly create the element:

```diff
-self.parent()(s)
+P = self.parent()
+P.element_class(P, s)
```
This is good for speed.

Error messages should start with a lowercase:

```diff
-raise ValueError("Each nonempty factor should be a strictly decreasing sequence")
+raise ValueError("each nonempty factor should be a strictly decreasing sequence")
```
This is a Python convention that we try to follow.

You don't need the list here (I think it is actually slightly slower):

```diff
-m = max([cell[0] for cell in cells])+1
+m = max(cell[0] for cell in cells) + 1
```
(and in similar other places).

```diff
-for i in range(m)[::-1]:
+for i in range(m-1,-1,-1):
```

I believe you can do this:

```
-if p not in Permutations(avoiding=[3,2,1]):
+if p.has_pattern([3,2,1]):
```
to avoid the transient parent (and some extra unnecessary containment checks).

```diff
-if m == None or (len(_jumps(w))<=m-1):
+if m is None or len(_jumps(w)) <= m-1:
```

I think it would be good to avoid creating the tableau and then its conjugate in `_is_valid_column_word`:

```python
            T = Tableau(L)
            return T.conjugate().is_semistandard()
```
I would just go through and check everything directly in `L`.



---

archive/issue_comments_485422.json:
```json
{
    "body": "Changed commit from **[`daa7e1c`](https://github.com/sagemath/sagetrac-mirror/commit/daa7e1ccd403eb31a101eb06a1bbd73bf023997d)** to **[`21e0fc6`](https://github.com/sagemath/sagetrac-mirror/commit/21e0fc64d0b02e986f6f5c6f4fc1e1484c188595)**",
    "created_at": "2020-09-15T02:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485422",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`daa7e1c`](https://github.com/sagemath/sagetrac-mirror/commit/daa7e1ccd403eb31a101eb06a1bbd73bf023997d)** to **[`21e0fc6`](https://github.com/sagemath/sagetrac-mirror/commit/21e0fc64d0b02e986f6f5c6f4fc1e1484c188595)**



---

archive/issue_comments_485423.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21e0fc64d0b02e986f6f5c6f4fc1e1484c188595\">21e0fc6</a></td><td><code>fix coding style from tscrim's remark</code></td></tr></table>\n",
    "created_at": "2020-09-15T02:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485423",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21e0fc64d0b02e986f6f5c6f4fc1e1484c188595">21e0fc6</a></td><td><code>fix coding style from tscrim's remark</code></td></tr></table>




---

archive/issue_comments_485424.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThis can be simplified:\n\n```diff\n-            for i in range(len(L)-1):\n-                for j in range(len(L[i+1])):\n-                    if L[i+1][j]<L[i][j]:\n-                        return False\n-            return True\n+            return not any(L[i+1][j] < L[i][j] for i in range(len(L)-1)\n+                           for j in range(len(L[i+1])))\n```\nor\n\n```diff\n+            return all(L[i+1][j] >= L[i][j] for i in range(len(L)-1)\n+                       for j in range(len(L[i+1])))\n```\n(Interestingly enough the latter is actually faster.)",
    "created_at": "2020-09-15T03:03:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485424",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

This can be simplified:

```diff
-            for i in range(len(L)-1):
-                for j in range(len(L[i+1])):
-                    if L[i+1][j]<L[i][j]:
-                        return False
-            return True
+            return not any(L[i+1][j] < L[i][j] for i in range(len(L)-1)
+                           for j in range(len(L[i+1])))
```
or

```diff
+            return all(L[i+1][j] >= L[i][j] for i in range(len(L)-1)
+                       for j in range(len(L[i+1])))
```
(Interestingly enough the latter is actually faster.)



---

archive/issue_comments_485425.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f035b227bcd2f1897f01249dc88b4b733e63b33\">2f035b2</a></td><td><code>Add heading</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9da5f2772db02d2d60e10cdb3b099ca862495650\">9da5f27</a></td><td><code>Merge branch 'public/combinat/fc_stable_Grothendieck_crystal-30461' of git://trac.sagemath.org/sage into t/30461/public/combinat/fc_stable_Grothendieck_crystal-30461</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cfec2e56674eb0db25ffb4ee51ee639e87dd1ac\">7cfec2e</a></td><td><code>Address the rest of tscrim's comments</code></td></tr></table>\n",
    "created_at": "2020-09-15T03:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485425",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f035b227bcd2f1897f01249dc88b4b733e63b33">2f035b2</a></td><td><code>Add heading</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9da5f2772db02d2d60e10cdb3b099ca862495650">9da5f27</a></td><td><code>Merge branch 'public/combinat/fc_stable_Grothendieck_crystal-30461' of git://trac.sagemath.org/sage into t/30461/public/combinat/fc_stable_Grothendieck_crystal-30461</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cfec2e56674eb0db25ffb4ee51ee639e87dd1ac">7cfec2e</a></td><td><code>Address the rest of tscrim's comments</code></td></tr></table>




---

archive/issue_comments_485426.json:
```json
{
    "body": "Changed commit from **[`21e0fc6`](https://github.com/sagemath/sagetrac-mirror/commit/21e0fc64d0b02e986f6f5c6f4fc1e1484c188595)** to **[`7cfec2e`](https://github.com/sagemath/sagetrac-mirror/commit/7cfec2e56674eb0db25ffb4ee51ee639e87dd1ac)**",
    "created_at": "2020-09-15T03:33:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485426",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`21e0fc6`](https://github.com/sagemath/sagetrac-mirror/commit/21e0fc64d0b02e986f6f5c6f4fc1e1484c188595)** to **[`7cfec2e`](https://github.com/sagemath/sagetrac-mirror/commit/7cfec2e56674eb0db25ffb4ee51ee639e87dd1ac)**



---

archive/issue_comments_485427.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThanks a lot for looking through the code, Travis. Appreciate the suggestions on syntax, speedups, SageMath-specific infrastructure, etc.\n\nReplying to [@tscrim](#comment:18):\n> You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.\n\nThank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:\nhttps://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html\n\n> In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?\n\nIt was to have the `__repr__` print\n`()(2, 1)(2)()(2)`\nrather than \n`()(2, 1)(2,)()(2,)`\nfor factors with single values. That behavior has been changed now. I'm maintaining the list casting for the `_latex_` method though as it looks prettier. =)\n\n> Do you really expect this:\n> \n> ```\n>             if not isinstance(parent, FullyCommutativeStableGrothendieckCrystal):\n>                 raise ValueError(\"parent should be an instance of FullyCommutativeStableGrothendieckCrystal\")\n> ```\n> It seems like it would be mostly useless.\n\nNo, so this has been removed.",
    "created_at": "2020-09-15T03:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485427",
    "user": "https://github.com/sagetrac-wpoh"
}
```

<div id="comment:22" align="right">comment:22</div>

Thanks a lot for looking through the code, Travis. Appreciate the suggestions on syntax, speedups, SageMath-specific infrastructure, etc.

Replying to [@tscrim](#comment:18):
> You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.

Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:
https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html

> In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?

It was to have the `__repr__` print
`()(2, 1)(2)()(2)`
rather than 
`()(2, 1)(2,)()(2,)`
for factors with single values. That behavior has been changed now. I'm maintaining the list casting for the `_latex_` method though as it looks prettier. =)

> Do you really expect this:
> 
> ```
>             if not isinstance(parent, FullyCommutativeStableGrothendieckCrystal):
>                 raise ValueError("parent should be an instance of FullyCommutativeStableGrothendieckCrystal")
> ```
> It seems like it would be mostly useless.

No, so this has been removed.



---

archive/issue_comments_485428.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@sagetrac-wpoh](#comment:22):\n> Thanks a lot for looking through the code, Travis. Appreciate the suggestions on syntax, speedups, SageMath-specific infrastructure, etc.\n\nThank you for your changes.\n\n> Replying to [@tscrim](#comment:18):\n> > You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.\n\n> Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:\n> https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html\n\nLooks good. Thanks. Can you add a test showing that the `!=` works as expected?\n\n> > In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?\n\n> It was to have the `__repr__` print\n> `()(2, 1)(2)()(2)`\n> rather than \n> `()(2, 1)(2,)()(2,)`\n> for factors with single values. That behavior has been changed now. I'm maintaining the list casting for the `_latex_` method though as it looks prettier. =)\n\nThat is a good point; I forgot about the singletons. For the `__repr__` it would make sense to do it like how you had before. Also, since `DecreasingHeckeFactorization` now inherits from `SageObject`, you should rename `__repr__` -> `_repr_`.\n\nI have a few more additional comments:\n\n```diff\n-return tuple(len(l) for l in self.value)[::-1]\n+return tuple([len(l) for l in reversed(self.value)])\n```\n\nYes, having the list here is strangely faster.\n\n```diff\n-if len(factor)>0:\n+if factor:\n```\n\nInstead of using both `Partition, Partitions`, you can just use the global parent of all partitions `_Partitions`. Also, I thought `SkewPartition` would parse its inputs into a pair of partitions?\n\nThis is strange to me:\n\n```\nclass Element(DecreasingHeckeFactorization, ElementWrapper):\n```\nWhy inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.",
    "created_at": "2020-09-15T23:21:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485428",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@sagetrac-wpoh](#comment:22):
> Thanks a lot for looking through the code, Travis. Appreciate the suggestions on syntax, speedups, SageMath-specific infrastructure, etc.

Thank you for your changes.

> Replying to [@tscrim](#comment:18):
> > You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.

> Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:
> https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html

Looks good. Thanks. Can you add a test showing that the `!=` works as expected?

> > In the `__repr__`, why do you do the `list` cast here: `repr(list(factor))[1:-1]`?

> It was to have the `__repr__` print
> `()(2, 1)(2)()(2)`
> rather than 
> `()(2, 1)(2,)()(2,)`
> for factors with single values. That behavior has been changed now. I'm maintaining the list casting for the `_latex_` method though as it looks prettier. =)

That is a good point; I forgot about the singletons. For the `__repr__` it would make sense to do it like how you had before. Also, since `DecreasingHeckeFactorization` now inherits from `SageObject`, you should rename `__repr__` -> `_repr_`.

I have a few more additional comments:

```diff
-return tuple(len(l) for l in self.value)[::-1]
+return tuple([len(l) for l in reversed(self.value)])
```

Yes, having the list here is strangely faster.

```diff
-if len(factor)>0:
+if factor:
```

Instead of using both `Partition, Partitions`, you can just use the global parent of all partitions `_Partitions`. Also, I thought `SkewPartition` would parse its inputs into a pair of partitions?

This is strange to me:

```
class Element(DecreasingHeckeFactorization, ElementWrapper):
```
Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.



---

archive/issue_comments_485429.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d10f11f3c5f08b0724955e36f60e00a3d4e23caf\">d10f11f</a></td><td><code>Add crystal to module_list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fce948d9844ca067206d1b41e554f4583b8dfb80\">fce948d</a></td><td><code>Address further comments from Travis</code></td></tr></table>\n",
    "created_at": "2020-09-16T01:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485429",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d10f11f3c5f08b0724955e36f60e00a3d4e23caf">d10f11f</a></td><td><code>Add crystal to module_list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fce948d9844ca067206d1b41e554f4583b8dfb80">fce948d</a></td><td><code>Address further comments from Travis</code></td></tr></table>




---

archive/issue_comments_485430.json:
```json
{
    "body": "Changed commit from **[`7cfec2e`](https://github.com/sagemath/sagetrac-mirror/commit/7cfec2e56674eb0db25ffb4ee51ee639e87dd1ac)** to **[`fce948d`](https://github.com/sagemath/sagetrac-mirror/commit/fce948d9844ca067206d1b41e554f4583b8dfb80)**",
    "created_at": "2020-09-16T01:38:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485430",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7cfec2e`](https://github.com/sagemath/sagetrac-mirror/commit/7cfec2e56674eb0db25ffb4ee51ee639e87dd1ac)** to **[`fce948d`](https://github.com/sagemath/sagetrac-mirror/commit/fce948d9844ca067206d1b41e554f4583b8dfb80)**



---

archive/issue_comments_485431.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThank you for the further comments. I've pushed all the changes according to the previous suggestions, except for the one on the `Element` class (see below).\n\nReplying to [@tscrim](#comment:23):\n> > Replying to [@tscrim](#comment:18):\n> > > You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.\n\n> > Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:\n> > https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html\n\n> \n> Looks good. Thanks. Can you add a test showing that the `!=` works as expected?\n\nI've added a test in the `__init__` for `DecreasingHeckeFactorization`.\n\n> Instead of using both `Partition, Partitions`, you can just use the global parent of all partitions `_Partitions`. Also, I thought `SkewPartition` would parse its inputs into a pair of partitions?\n\nBoth remarks make sense. The code looks better now.\n\n> This is strange to me:\n> \n> ```\n> class Element(DecreasingHeckeFactorization, ElementWrapper):\n> ```\n> Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.\n\nThe code was more or less adopted from `affine_factorization.py` in the `combinat/crystal` folder. The original intention is to inherit the methods (eg. `weight`) that come with `DecreasingHeckeFactorization` while having access to `parent` from `ElementWrapper`.\n\nI am not so familiar with the difference between `ElementWrapper` and `Element`, but trying\nfor example\n\n```\nclass Element(ElementWrapper):\n    def __init__()\n        # Do something to validate and process t into \n        # an instance of DecreasingHeckeFactorization u\n        ElementWrapper.__init__(self, parent, u)\n```\n\nand making minor changes in `e`, `f`, `bracketing` in the same class somehow gives the following unexpected behavior for `weight`:\n\n```\nsage: S = SymmetricGroup(3+1)\nsage: w = S.from_reduced_word([1, 3, 2])\nsage: B = crystals.FullyCommutativeStableGrothendieck(w, 3, 2)\nsage: h = B([[3, 1], [3], [3, 2]]); h\n(3, 1)(3)(3, 2)\nsage: h.weight()\n(0, -1, 0) # expected (2, 1, 2)\n```",
    "created_at": "2020-09-16T04:35:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485431",
    "user": "https://github.com/sagetrac-wpoh"
}
```

<div id="comment:25" align="right">comment:25</div>

Thank you for the further comments. I've pushed all the changes according to the previous suggestions, except for the one on the `Element` class (see below).

Replying to [@tscrim](#comment:23):
> > Replying to [@tscrim](#comment:18):
> > > You could have `DecreasingHeckeFactorization` inherit from `SageObject` (maybe `tuple`). Also, the inequality probably won't work (perhaps even some of the other inequalities). Using the `_richcmp_` (there is a decorator to add this) would simplify this.

> > Thank you for the suggestions. I used the following guide for `__richcmp__`, do correct me if the syntax does not look right:
> > https://doc.sagemath.org/html/en/reference/structure/sage/structure/richcmp.html

> 
> Looks good. Thanks. Can you add a test showing that the `!=` works as expected?

I've added a test in the `__init__` for `DecreasingHeckeFactorization`.

> Instead of using both `Partition, Partitions`, you can just use the global parent of all partitions `_Partitions`. Also, I thought `SkewPartition` would parse its inputs into a pair of partitions?

Both remarks make sense. The code looks better now.

> This is strange to me:
> 
> ```
> class Element(DecreasingHeckeFactorization, ElementWrapper):
> ```
> Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.

The code was more or less adopted from `affine_factorization.py` in the `combinat/crystal` folder. The original intention is to inherit the methods (eg. `weight`) that come with `DecreasingHeckeFactorization` while having access to `parent` from `ElementWrapper`.

I am not so familiar with the difference between `ElementWrapper` and `Element`, but trying
for example

```
class Element(ElementWrapper):
    def __init__()
        # Do something to validate and process t into 
        # an instance of DecreasingHeckeFactorization u
        ElementWrapper.__init__(self, parent, u)
```

and making minor changes in `e`, `f`, `bracketing` in the same class somehow gives the following unexpected behavior for `weight`:

```
sage: S = SymmetricGroup(3+1)
sage: w = S.from_reduced_word([1, 3, 2])
sage: B = crystals.FullyCommutativeStableGrothendieck(w, 3, 2)
sage: h = B([[3, 1], [3], [3, 2]]); h
(3, 1)(3)(3, 2)
sage: h.weight()
(0, -1, 0) # expected (2, 1, 2)
```



---

archive/issue_comments_485432.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@sagetrac-wpoh](#comment:25):\n> Thank you for the further comments. I've pushed all the changes according to the previous suggestions, except for the one on the `Element` class (see below).\n\nThank you.\n\n> > This is strange to me:\n> > \n> > ```\n> > class Element(DecreasingHeckeFactorization, ElementWrapper):\n> > ```\n> > Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.\n\n> The code was more or less adopted from `affine_factorization.py` in the `combinat/crystal` folder. The original intention is to inherit the methods (eg. `weight`) that come with `DecreasingHeckeFactorization` while having access to `parent` from `ElementWrapper`.\n> \n> I am not so familiar with the difference between `ElementWrapper` and `Element`, but trying\n> for example\n> \n> ```\n> class Element(ElementWrapper):\n>     def __init__()\n>         # Do something to validate and process t into \n>         # an instance of DecreasingHeckeFactorization u\n>         ElementWrapper.__init__(self, parent, u)\n> ```\n> \n> and making minor changes in `e`, `f`, `bracketing` in the same class somehow gives the following unexpected behavior for `weight`:\n> \n> ```\n> sage: S = SymmetricGroup(3+1)\n> sage: w = S.from_reduced_word([1, 3, 2])\n> sage: B = crystals.FullyCommutativeStableGrothendieck(w, 3, 2)\n> sage: h = B([[3, 1], [3], [3, 2]]); h\n> (3, 1)(3)(3, 2)\n> sage: h.weight()\n> (0, -1, 0) # expected (2, 1, 2)\n> ```\n\nWithout seeing what your code is, I cannot comment. You can look at the `ElementWrapper` class and see what extra features it builds upon. However, from what you (and the code) are telling me, you do not want to wrap `DecreasingHeckeFactorization` but extend its functionality, which means it should subclass it. You wrap an object if you want it to behave differently than the corresponding class, but you need the data structure and/or some functionality. Right now your code is somehow in between and you might need to disentangle it a bit.\n\nActually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the `@richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?\n\n---\n\nSome little nitpicks with style (it wouldn't stop a positive review, but it is good to follow):\n\n```diff\n-    k, D = max(w), {}\n+    k = max(w)\n+    D = {}\n```\n\n```diff\n-if all(len(L[i])>=len(L[i+1]) for i in range(len(L)-1)):\n+if all(len(L[i]) >= len(L[i+1]) for i in range(len(L)-1)):\n```\n\n```diff\n-if p==r and q!=p and abs(p-q)==1:\n+if p == r and q != p and abs(p-q) == 1:\n```\n\n```diff\n-t = _apply_relations(v,position,move)\n+t = _apply_relations(v, position, move)\n```\nand similar.\n\nMore micro-optimizations: For `_applicable_relations`, I would do:\n\n```python\n    def _applicable_relations(word):\n        \"\"\"\n        Return all positions where a relation can be applied on ``word``\n        along with the type of relation.\n        \"\"\"\n        L = []\n        for i in range(len(word)-2):\n            p, q, r = word[i:(i+2)+1]\n            if abs(p-q) > 1:\n                L += [[i,\"pq=qp\"]]\n            elif abs(p-q) == 1:\n                if p == r:  # p != q by the abs test\n                    L += [[i,\"pqp=qpq\"]]\n            elif r != p:  # We must have p == q\n                L += [[i,\"ppq=pqq\"]]\n            if q == r and r != p:\n                L += [[i,\"pqq=ppq\"]]\n        if abs(word[-2]-word[-1]) > 1:\n           L += [[len(word)-2,\"pq=qp\"]]\n        return L\n```\nThe first is removing the unless if statements and pulling the last case outside of the loop. The second is removing redundant checks for the different relations.\n\nI think this can be simplified:\n\n```diff\n-w[J[i]:J[i+1]][::-1]\n+w[J[i+1]-1:J[i]-1:-1]\n```\n\nIn `_apply_relations()`, do you need those checks? They are good for when debugging, but the first index errors will be thrown naturally by Python. The other errors checking the relations apply also feel more for debugging than a practical-use.\n\nYour doc is not building because you need to make this change:\n\n```diff\n-Remove all bracketed letters between `i`th and `(i+1)`th entry.\n+Remove all bracketed letters between `i`-th and `(i+1)`-th entry.\n```",
    "created_at": "2020-09-16T23:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485432",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@sagetrac-wpoh](#comment:25):
> Thank you for the further comments. I've pushed all the changes according to the previous suggestions, except for the one on the `Element` class (see below).

Thank you.

> > This is strange to me:
> > 
> > ```
> > class Element(DecreasingHeckeFactorization, ElementWrapper):
> > ```
> > Why inherit from both? Why not just wrap the `DecreasingHeckeFactorization` or inherit from `Element` instead of `ElementWrapper` since I believe the wrapping is basically done by `DecreasingHeckeFactorization`.

> The code was more or less adopted from `affine_factorization.py` in the `combinat/crystal` folder. The original intention is to inherit the methods (eg. `weight`) that come with `DecreasingHeckeFactorization` while having access to `parent` from `ElementWrapper`.
> 
> I am not so familiar with the difference between `ElementWrapper` and `Element`, but trying
> for example
> 
> ```
> class Element(ElementWrapper):
>     def __init__()
>         # Do something to validate and process t into 
>         # an instance of DecreasingHeckeFactorization u
>         ElementWrapper.__init__(self, parent, u)
> ```
> 
> and making minor changes in `e`, `f`, `bracketing` in the same class somehow gives the following unexpected behavior for `weight`:
> 
> ```
> sage: S = SymmetricGroup(3+1)
> sage: w = S.from_reduced_word([1, 3, 2])
> sage: B = crystals.FullyCommutativeStableGrothendieck(w, 3, 2)
> sage: h = B([[3, 1], [3], [3, 2]]); h
> (3, 1)(3)(3, 2)
> sage: h.weight()
> (0, -1, 0) # expected (2, 1, 2)
> ```

Without seeing what your code is, I cannot comment. You can look at the `ElementWrapper` class and see what extra features it builds upon. However, from what you (and the code) are telling me, you do not want to wrap `DecreasingHeckeFactorization` but extend its functionality, which means it should subclass it. You wrap an object if you want it to behave differently than the corresponding class, but you need the data structure and/or some functionality. Right now your code is somehow in between and you might need to disentangle it a bit.

Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the `@richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?

---

Some little nitpicks with style (it wouldn't stop a positive review, but it is good to follow):

```diff
-    k, D = max(w), {}
+    k = max(w)
+    D = {}
```

```diff
-if all(len(L[i])>=len(L[i+1]) for i in range(len(L)-1)):
+if all(len(L[i]) >= len(L[i+1]) for i in range(len(L)-1)):
```

```diff
-if p==r and q!=p and abs(p-q)==1:
+if p == r and q != p and abs(p-q) == 1:
```

```diff
-t = _apply_relations(v,position,move)
+t = _apply_relations(v, position, move)
```
and similar.

More micro-optimizations: For `_applicable_relations`, I would do:

```python
    def _applicable_relations(word):
        """
        Return all positions where a relation can be applied on ``word``
        along with the type of relation.
        """
        L = []
        for i in range(len(word)-2):
            p, q, r = word[i:(i+2)+1]
            if abs(p-q) > 1:
                L += [[i,"pq=qp"]]
            elif abs(p-q) == 1:
                if p == r:  # p != q by the abs test
                    L += [[i,"pqp=qpq"]]
            elif r != p:  # We must have p == q
                L += [[i,"ppq=pqq"]]
            if q == r and r != p:
                L += [[i,"pqq=ppq"]]
        if abs(word[-2]-word[-1]) > 1:
           L += [[len(word)-2,"pq=qp"]]
        return L
```
The first is removing the unless if statements and pulling the last case outside of the loop. The second is removing redundant checks for the different relations.

I think this can be simplified:

```diff
-w[J[i]:J[i+1]][::-1]
+w[J[i+1]-1:J[i]-1:-1]
```

In `_apply_relations()`, do you need those checks? They are good for when debugging, but the first index errors will be thrown naturally by Python. The other errors checking the relations apply also feel more for debugging than a practical-use.

Your doc is not building because you need to make this change:

```diff
-Remove all bracketed letters between `i`th and `(i+1)`th entry.
+Remove all bracketed letters between `i`-th and `(i+1)`-th entry.
```



---

archive/issue_comments_485433.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2eda37016b537e6ba52fbf2fa69cd76a2642b098\">2eda370</a></td><td><code>Minor documentation edit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6823293011188f73360ac8f58aa3c0f7fed92624\">6823293</a></td><td><code>Add spaces in code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3b135b49ad57efa96c080c7ed4a54e6b836984f\">d3b135b</a></td><td><code>Minor fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3509ec3131858bddcd02ea332562dade78633435\">3509ec3</a></td><td><code>Let DecreasingHeckeFactorization inherit from Element</code></td></tr></table>\n",
    "created_at": "2020-09-21T05:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485433",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2eda37016b537e6ba52fbf2fa69cd76a2642b098">2eda370</a></td><td><code>Minor documentation edit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6823293011188f73360ac8f58aa3c0f7fed92624">6823293</a></td><td><code>Add spaces in code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3b135b49ad57efa96c080c7ed4a54e6b836984f">d3b135b</a></td><td><code>Minor fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3509ec3131858bddcd02ea332562dade78633435">3509ec3</a></td><td><code>Let DecreasingHeckeFactorization inherit from Element</code></td></tr></table>




---

archive/issue_comments_485434.json:
```json
{
    "body": "Changed commit from **[`fce948d`](https://github.com/sagemath/sagetrac-mirror/commit/fce948d9844ca067206d1b41e554f4583b8dfb80)** to **[`3509ec3`](https://github.com/sagemath/sagetrac-mirror/commit/3509ec3131858bddcd02ea332562dade78633435)**",
    "created_at": "2020-09-21T05:48:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485434",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fce948d`](https://github.com/sagemath/sagetrac-mirror/commit/fce948d9844ca067206d1b41e554f4583b8dfb80)** to **[`3509ec3`](https://github.com/sagemath/sagetrac-mirror/commit/3509ec3131858bddcd02ea332562dade78633435)**



---

archive/issue_comments_485435.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nThanks again for the further comments. I have pushed all the changes according to the suggestions.\n\nReplying to [@tscrim](#comment:26):\n> Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the `@richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?\n\nThere are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.\n\nAlso, I need `__classcall_private__` for `DecreasingHeckeFactorization` to be called before the `__init__` method so that the proper parent class is initialized, do let me know if using `metaclass=InheritComparisonClasscallMetaclass` is not appropriate.\n\n> In `_apply_relations()`, do you need those checks? They are good for when debugging, but the first index errors will be thrown naturally by Python. The other errors checking the relations apply also feel more for debugging than a practical-use.\n\nYou're right that they were there mainly for debugging. I've removed the error handling.",
    "created_at": "2020-09-21T06:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485435",
    "user": "https://github.com/sagetrac-wpoh"
}
```

<div id="comment:28" align="right">comment:28</div>

Thanks again for the further comments. I have pushed all the changes according to the suggestions.

Replying to [@tscrim](#comment:26):
> Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the `@richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?

There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.

Also, I need `__classcall_private__` for `DecreasingHeckeFactorization` to be called before the `__init__` method so that the proper parent class is initialized, do let me know if using `metaclass=InheritComparisonClasscallMetaclass` is not appropriate.

> In `_apply_relations()`, do you need those checks? They are good for when debugging, but the first index errors will be thrown naturally by Python. The other errors checking the relations apply also feel more for debugging than a practical-use.

You're right that they were there mainly for debugging. I've removed the error handling.



---

archive/issue_comments_485436.json:
```json
{
    "body": "Changed commit from **[`3509ec3`](https://github.com/sagemath/sagetrac-mirror/commit/3509ec3131858bddcd02ea332562dade78633435)** to **[`d6bfcd2`](https://github.com/sagemath/sagetrac-mirror/commit/d6bfcd240254286209a505763a30fae402d84feb)**",
    "created_at": "2020-09-22T21:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485436",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3509ec3`](https://github.com/sagemath/sagetrac-mirror/commit/3509ec3131858bddcd02ea332562dade78633435)** to **[`d6bfcd2`](https://github.com/sagemath/sagetrac-mirror/commit/d6bfcd240254286209a505763a30fae402d84feb)**



---

archive/issue_comments_485437.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6bfcd240254286209a505763a30fae402d84feb\">d6bfcd2</a></td><td><code>Fix documentation issues</code></td></tr></table>\n",
    "created_at": "2020-09-22T21:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485437",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6bfcd240254286209a505763a30fae402d84feb">d6bfcd2</a></td><td><code>Fix documentation issues</code></td></tr></table>




---

archive/issue_comments_485438.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@sagetrac-wpoh](#comment:28):\n> Thanks again for the further comments. I have pushed all the changes according to the suggestions.\n> \n> Replying to [@tscrim](#comment:26):\n> > Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the `@richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?\n\n> There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.\n\nMaking this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.\n\n> Also, I need `__classcall_private__` for `DecreasingHeckeFactorization` to be called before the `__init__` method so that the proper parent class is initialized, do let me know if using `metaclass=InheritComparisonClasscallMetaclass` is not appropriate.\n\nI don't see any reason why you should need this. It seems like you are fighting code that is trying to tell you to make it more simple. Have I missed something?",
    "created_at": "2020-09-23T04:40:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485438",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@sagetrac-wpoh](#comment:28):
> Thanks again for the further comments. I have pushed all the changes according to the suggestions.
> 
> Replying to [@tscrim](#comment:26):
> > Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the `@richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?

> There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.

Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.

> Also, I need `__classcall_private__` for `DecreasingHeckeFactorization` to be called before the `__init__` method so that the proper parent class is initialized, do let me know if using `metaclass=InheritComparisonClasscallMetaclass` is not appropriate.

I don't see any reason why you should need this. It seems like you are fighting code that is trying to tell you to make it more simple. Have I missed something?



---

archive/issue_comments_485439.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@tscrim](#comment:30):\n> Replying to [@sagetrac-wpoh](#comment:28):\n> > Thanks again for the further comments. I have pushed all the changes according to the suggestions.\n> > \n> > Replying to [@tscrim](#comment:26):\n> > > Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the `@richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?\n\n> > There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.\n\n> \n> Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.\n\nSorry for the slow response. I could not compile Sage for a while due to Xcode12. \n\nWe need this for the insertion algorithm implemented in #30460 unless the insertion takes as input crystal elements rather than decreasing factorizations.",
    "created_at": "2020-09-25T06:13:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485439",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@tscrim](#comment:30):
> Replying to [@sagetrac-wpoh](#comment:28):
> > Thanks again for the further comments. I have pushed all the changes according to the suggestions.
> > 
> > Replying to [@tscrim](#comment:26):
> > > Actually, I am starting to wonder a bit why you need the separate class. If it inherits from `Element`(`Wrapper`), then it doesn't need the `@richcmp_method` decorator. Why do you need the `DecreasingHeckeFactorization` to not be a subclass of `Element`?

> > There are decreasing factorizations associated to non-fully commutative permutations, so I was hesitant to put it directly in the `Element` class of the parent class `FullyCommutativeStableGrothendieck`. However, writing `DecreasingHeckeFactorization` as a separate class and letting it inherit from `Element` does seem to work for our purposes, and I've added a parent class `DecreasingHeckeFactorizations` (with related methods) for the benefit of future explorations on non-fully commutative decreasing factorizations.

> 
> Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.

Sorry for the slow response. I could not compile Sage for a while due to Xcode12. 

We need this for the insertion algorithm implemented in #30460 unless the insertion takes as input crystal elements rather than decreasing factorizations.



---

archive/issue_comments_485440.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@anneschilling](#comment:31):\n> Replying to [@tscrim](#comment:30):\n> > Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.\n\n> \n> Sorry for the slow response. I could not compile Sage for a while due to Xcode12. \n> \n> We need this for the insertion algorithm implemented in #30460 unless the insertion takes as input crystal elements rather than decreasing factorizations.\n\nI don't see why the insertion could not take the crystal elements. So it still feels a little over-engineered, but it is good enough for now as the element class hierarchy doesn't have any duplication.",
    "created_at": "2020-09-28T04:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485440",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@anneschilling](#comment:31):
> Replying to [@tscrim](#comment:30):
> > Making this into a separate `Parent`/`Element` is overkill IMO. You don't need it now and it makes the code much more complicated. What I was suggesting was simply having `DecreasingHeckeFactorization` be the element class for the crystal. Perhaps I was unclear about this. The crystal seems sufficient for the current purposes, and anything else you can add to the Hecke monoid elements.

> 
> Sorry for the slow response. I could not compile Sage for a while due to Xcode12. 
> 
> We need this for the insertion algorithm implemented in #30460 unless the insertion takes as input crystal elements rather than decreasing factorizations.

I don't see why the insertion could not take the crystal elements. So it still feels a little over-engineered, but it is good enough for now as the element class hierarchy doesn't have any duplication.



---

archive/issue_events_419909.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-09-28T04:20:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419909"
}
```



---

archive/issue_events_419910.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-09-28T04:20:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419910"
}
```



---

archive/issue_comments_485441.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2020-09-28T04:20:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485441",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_485442.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThank you for the review, Travis!",
    "created_at": "2020-09-28T04:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485442",
    "user": "https://github.com/anneschilling"
}
```

<div id="comment:33" align="right">comment:33</div>

Thank you for the review, Travis!



---

archive/issue_comments_485443.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@anneschilling](#comment:33):\n> Thank you for the review, Travis!\n\nNo problem. Sorry it took a little longer for me to get to it. I will be on the lookout for when #30460 is ready.",
    "created_at": "2020-09-28T04:36:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485443",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@anneschilling](#comment:33):
> Thank you for the review, Travis!

No problem. Sorry it took a little longer for me to get to it. I will be on the lookout for when #30460 is ready.



---

archive/issue_comments_485444.json:
```json
{
    "body": "Changed branch from **[public/combinat/fc_stable_Grothendieck_crystal-30461](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/fc_stable_Grothendieck_crystal-30461)** to **[`d6bfcd2`](https://github.com/sagemath/sagetrac-mirror/commit/d6bfcd240254286209a505763a30fae402d84feb)**",
    "created_at": "2020-10-05T20:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30461#issuecomment-485444",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/combinat/fc_stable_Grothendieck_crystal-30461](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/fc_stable_Grothendieck_crystal-30461)** to **[`d6bfcd2`](https://github.com/sagemath/sagetrac-mirror/commit/d6bfcd240254286209a505763a30fae402d84feb)**



---

archive/issue_events_419911.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-05T20:13:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419911"
}
```



---

archive/issue_events_419912.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e2ed7d3f2d091b3eb7399b243e0fee76506b5af0",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-10-05T20:13:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30461",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30461#event-419912"
}
```
