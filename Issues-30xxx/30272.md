# Issue 30272: Mixed Forms: set_comp, comp

archive/issues_030035.json:
```json
{
    "body": "In the upcoming changes we want to allow mixed differential forms, among other things, being made immutable (see #30181, #30261).\n\nHowever, the current implementation would not support that behavior properly, namely:\n\n```\nsage: M = Manifold(2, 'M')\nsage: A = M.mixed_form()\nsage: a = M.diff_form(2)\nsage: A[2] = a\nsage: A[2] is a\nTrue\n```\n\nIf `A` would be set immutable and `a` is not, this would contradict the behavior of an immutable element. Even if `a` would automatically be set immutable as soon as `A` had been set immutable, this might happen not on the behalf of the user.\n\nI'd propose a similar approach as I had done in #30208 for bundle connections, and as it is already known for tensor fields, namely by introducing methods `set_comp` and `comp` (`add_comp` would not be necessary). Then each instance representing a homogeneous component is bound only to the mixed differential form.\n\nAs always, suggestions and opinions are welcome.\n\nCC:  @egourgoulhon @tscrim @mkoeppe\n\nBranch/Commit: 91fc96fed615f6070a729c143703907dc227819e\n\nReviewer: Eric Gourgoulhon\n\nAuthor: Michael Jung\n\nDependencies: #31654, #30473\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30272\n\n",
    "closed_at": "2021-07-23T20:11:33Z",
    "created_at": "2020-08-02T16:07:57Z",
    "labels": [
        "component: manifolds"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Mixed Forms: set_comp, comp",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30272",
    "user": "https://github.com/mjungmath"
}
```
In the upcoming changes we want to allow mixed differential forms, among other things, being made immutable (see #30181, #30261).

However, the current implementation would not support that behavior properly, namely:

```
sage: M = Manifold(2, 'M')
sage: A = M.mixed_form()
sage: a = M.diff_form(2)
sage: A[2] = a
sage: A[2] is a
True
```

If `A` would be set immutable and `a` is not, this would contradict the behavior of an immutable element. Even if `a` would automatically be set immutable as soon as `A` had been set immutable, this might happen not on the behalf of the user.

I'd propose a similar approach as I had done in #30208 for bundle connections, and as it is already known for tensor fields, namely by introducing methods `set_comp` and `comp` (`add_comp` would not be necessary). Then each instance representing a homogeneous component is bound only to the mixed differential form.

As always, suggestions and opinions are welcome.

CC:  @egourgoulhon @tscrim @mkoeppe

Branch/Commit: 91fc96fed615f6070a729c143703907dc227819e

Reviewer: Eric Gourgoulhon

Author: Michael Jung

Dependencies: #31654, #30473

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30272





---

archive/issue_comments_595714.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,7 +11,7 @@\n True\n ```\n \n-If `A` would be set immutable and `a` is not, this would contradict the behavior of an immutable element. Even if `a` would be set immutable as soon as `A` had been set immutable, this might happen not on the behalf of the user.\n+If `A` would be set immutable and `a` is not, this would contradict the behavior of an immutable element. Even if `a` would automatically be set immutable as soon as `A` had been set immutable, this might happen not on the behalf of the user.\n \n I'd propose a similar approach as I had done in #30208 for bundle connections, and as it is already known for tensor fields, namely by introducing methods `set_comp` and `comp` (`add_comp` would not be necessary). Then each instance representing a homogeneous component is bound only to the mixed differential form.\n \n``````\n",
    "created_at": "2020-08-02T16:21:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595714",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,7 +11,7 @@
 True
 ```
 
-If `A` would be set immutable and `a` is not, this would contradict the behavior of an immutable element. Even if `a` would be set immutable as soon as `A` had been set immutable, this might happen not on the behalf of the user.
+If `A` would be set immutable and `a` is not, this would contradict the behavior of an immutable element. Even if `a` would automatically be set immutable as soon as `A` had been set immutable, this might happen not on the behalf of the user.
 
 I'd propose a similar approach as I had done in #30208 for bundle connections, and as it is already known for tensor fields, namely by introducing methods `set_comp` and `comp` (`add_comp` would not be necessary). Then each instance representing a homogeneous component is bound only to the mixed differential form.
 
``````




---

archive/issue_events_078315.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30272#event-78315"
}
```



---

archive/issue_comments_595715.json:
```json
{
    "body": "<a id='comment:6'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595715",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_078316.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30272#event-78316"
}
```



---

archive/issue_events_078317.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30272#event-78317"
}
```



---

archive/issue_comments_595716.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#31653\"",
    "created_at": "2021-04-11T16:58:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595716",
    "user": "https://github.com/mjungmath"
}
```

Changing dependencies from "" to "#31653"



---

archive/issue_comments_595717.json:
```json
{
    "body": "Changing dependencies from \"#31653\" to \"#31654\"",
    "created_at": "2021-04-11T16:58:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595717",
    "user": "https://github.com/mjungmath"
}
```

Changing dependencies from "#31653" to "#31654"



---

archive/issue_comments_595718.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mjungmath/mixed_forms__set_comp__comp\"",
    "created_at": "2021-04-12T22:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595718",
    "user": "https://github.com/mjungmath"
}
```

Changing branch from "" to "u/gh-mjungmath/mixed_forms__set_comp__comp"



---

archive/issue_comments_595719.json:
```json
{
    "body": "Changing commit from \"\" to \"69f7bb51b0bd5d0cfe3db416e4e15b3bedc9997a\"",
    "created_at": "2021-04-12T23:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "69f7bb51b0bd5d0cfe3db416e4e15b3bedc9997a"



---

archive/issue_comments_595720.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|\n|[69f7bb5](https://git.sagemath.org/sage.git/commit/?id=69f7bb51b0bd5d0cfe3db416e4e15b3bedc9997a)|`Trac #30272: new standard name for homogeneous components (without tests)`|",
    "created_at": "2021-04-12T23:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595720",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------|
|[69f7bb5](https://git.sagemath.org/sage.git/commit/?id=69f7bb51b0bd5d0cfe3db416e4e15b3bedc9997a)|`Trac #30272: new standard name for homogeneous components (without tests)`|



---

archive/issue_comments_595721.json:
```json
{
    "body": "<a id='comment:11'></a>\nFirst approach.\n\n**What I did:**\n\n- homogeneous components are bound to mixed form and a priori detached from other instances; in particular\n\n```\nsage: A[0] = f\nsage: A[0] is f\n```\n   yields `False` now.\n\n- components are only initialized on demand (not on initialization of the mixed form)\n- by default, homogeneous components are named according to the mixed form's name: `A = A_0, A_1, ...`\n- `set_comp` method similar to tensor fields\n\nI tried to maintain as much backwards compatibility as possible. For example, even if copies now, the names are still applied if `A[:] = [f, omega, eta]` syntax is used. But the long-term idea is to favor `set_comp(i)[:] = ...` syntax instead of `omega[:] = ...` plus `A[i] = omega` syntax.\n\nComments are appreciated.",
    "created_at": "2021-04-12T23:44:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595721",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:11'></a>
First approach.

**What I did:**

- homogeneous components are bound to mixed form and a priori detached from other instances; in particular

```
sage: A[0] = f
sage: A[0] is f
```
   yields `False` now.

- components are only initialized on demand (not on initialization of the mixed form)
- by default, homogeneous components are named according to the mixed form's name: `A = A_0, A_1, ...`
- `set_comp` method similar to tensor fields

I tried to maintain as much backwards compatibility as possible. For example, even if copies now, the names are still applied if `A[:] = [f, omega, eta]` syntax is used. But the long-term idea is to favor `set_comp(i)[:] = ...` syntax instead of `omega[:] = ...` plus `A[i] = omega` syntax.

Comments are appreciated.



---

archive/issue_comments_595722.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[27aa360](https://git.sagemath.org/sage.git/commit/?id=27aa360aebdcdd632fa62d6d3161d475f3954221)|`Trac #30272: doctests added`|",
    "created_at": "2021-04-13T10:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[27aa360](https://git.sagemath.org/sage.git/commit/?id=27aa360aebdcdd632fa62d6d3161d475f3954221)|`Trac #30272: doctests added`|



---

archive/issue_comments_595723.json:
```json
{
    "body": "Changing commit from \"69f7bb51b0bd5d0cfe3db416e4e15b3bedc9997a\" to \"27aa360aebdcdd632fa62d6d3161d475f3954221\"",
    "created_at": "2021-04-13T10:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595723",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "69f7bb51b0bd5d0cfe3db416e4e15b3bedc9997a" to "27aa360aebdcdd632fa62d6d3161d475f3954221"



---

archive/issue_comments_595724.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-04-13T10:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595724",
    "user": "https://github.com/mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_595725.json:
```json
{
    "body": "<a id='comment:13'></a>\nHere we go, that should be it. Please take a close look whether this is (at least) halfway consistent and transparent to the user.\n\nIn a next step, mixed forms will be equipped with an immutability switch.",
    "created_at": "2021-04-13T10:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595725",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:13'></a>
Here we go, that should be it. Please take a close look whether this is (at least) halfway consistent and transparent to the user.

In a next step, mixed forms will be equipped with an immutability switch.



---

archive/issue_comments_595726.json:
```json
{
    "body": "<a id='comment:14'></a>\nIf desired so, I will squash the commits for final merge.",
    "created_at": "2021-04-13T10:26:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595726",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:14'></a>
If desired so, I will squash the commits for final merge.



---

archive/issue_comments_595727.json:
```json
{
    "body": "Changing author from \"\" to \"Michael Jung\"",
    "created_at": "2021-04-13T22:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595727",
    "user": "https://github.com/mjungmath"
}
```

Changing author from "" to "Michael Jung"



---

archive/issue_comments_595728.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Eric Gourgoulhon\"",
    "created_at": "2021-04-18T19:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595728",
    "user": "https://github.com/egourgoulhon"
}
```

Changing reviewer from "" to "Eric Gourgoulhon"



---

archive/issue_comments_595729.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-04-18T19:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595729",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_595730.json:
```json
{
    "body": "<a id='comment:16'></a>\nLGTM.",
    "created_at": "2021-04-18T19:30:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595730",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:16'></a>
LGTM.



---

archive/issue_comments_595731.json:
```json
{
    "body": "<a id='comment:17'></a>\nMerge conflict",
    "created_at": "2021-06-07T21:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595731",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:17'></a>
Merge conflict



---

archive/issue_comments_595732.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-06-07T21:42:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595732",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_595733.json:
```json
{
    "body": "Changing commit from \"27aa360aebdcdd632fa62d6d3161d475f3954221\" to \"89dc5520f76fc7ef937c073e5a799925491a88ea\"",
    "created_at": "2021-06-27T10:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "27aa360aebdcdd632fa62d6d3161d475f3954221" to "89dc5520f76fc7ef937c073e5a799925491a88ea"



---

archive/issue_comments_595734.json:
```json
{
    "body": "<a id='comment:18'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|\n|[89dc552](https://git.sagemath.org/sage.git/commit/?id=89dc5520f76fc7ef937c073e5a799925491a88ea)|`Trac #30272: merged`|",
    "created_at": "2021-06-27T10:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
|[89dc552](https://git.sagemath.org/sage.git/commit/?id=89dc5520f76fc7ef937c073e5a799925491a88ea)|`Trac #30272: merged`|



---

archive/issue_comments_595735.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-27T10:20:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595735",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_595736.json:
```json
{
    "body": "<a id='comment:20'></a>\nWhen clicking on the new branch, one gets a huge diff, which seems to be the whole 9.4.beta3 w.r.t 9.4.beta2. Wouldn't it be better to merge the previous ticket branch into a clean 9.4.beta3?",
    "created_at": "2021-06-27T16:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595736",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:20'></a>
When clicking on the new branch, one gets a huge diff, which seems to be the whole 9.4.beta3 w.r.t 9.4.beta2. Wouldn't it be better to merge the previous ticket branch into a clean 9.4.beta3?



---

archive/issue_comments_595737.json:
```json
{
    "body": "Attachment [Screenshot 2021-06-27 193218.png](tarball://root/attachments/some-uuid/ticket30272/Screenshot 2021-06-27 193218.png) by @mjungmath created at 2021-06-27 17:32:51",
    "created_at": "2021-06-27T17:32:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595737",
    "user": "https://github.com/mjungmath"
}
```

Attachment [Screenshot 2021-06-27 193218.png](tarball://root/attachments/some-uuid/ticket30272/Screenshot 2021-06-27 193218.png) by @mjungmath created at 2021-06-27 17:32:51



---

archive/issue_comments_595738.json:
```json
{
    "body": "<a id='comment:21'></a>\nThat's odd. For me the branch against the current beta looks just fine:\n\n![](https://trac.sagemath.org/raw-attachment/ticket/30272/Screenshot%202021-06-27%20193218.png)",
    "created_at": "2021-06-27T17:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595738",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:21'></a>
That's odd. For me the branch against the current beta looks just fine:

![](https://trac.sagemath.org/raw-attachment/ticket/30272/Screenshot%202021-06-27%20193218.png)



---

archive/issue_comments_595739.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [egourgoulhon](#comment%3A20):\n> When clicking on the new branch, one gets a huge diff, which seems to be the whole 9.4.beta3 w.r.t 9.4.beta2. Wouldn't it be better to merge the previous ticket branch into a clean 9.4.beta3? \n\n\nThat sometimes happens with the trac git helper. You don't have to worry too much about it as long as it pulls okay (a la[comment:21](#comment%3A21)).",
    "created_at": "2021-06-27T23:23:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595739",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
Replying to [egourgoulhon](#comment%3A20):
> When clicking on the new branch, one gets a huge diff, which seems to be the whole 9.4.beta3 w.r.t 9.4.beta2. Wouldn't it be better to merge the previous ticket branch into a clean 9.4.beta3? 


That sometimes happens with the trac git helper. You don't have to worry too much about it as long as it pulls okay (a la[comment:21](#comment%3A21)).



---

archive/issue_comments_595740.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [tscrim](#comment%3A22):\n> Replying to [egourgoulhon](#comment%3A20):\n> > When clicking on the new branch, one gets a huge diff, which seems to be the whole 9.4.beta3 w.r.t 9.4.beta2. Wouldn't it be better to merge the previous ticket branch into a clean 9.4.beta3? \n\n> \n> That sometimes happens with the trac git helper. You don't have to worry too much about it as long as it pulls okay (a la[comment:21](#comment%3A21)).\n\n\nIndeed, this seems erratic: it looks good now, while the branch has not been changed.",
    "created_at": "2021-06-28T07:58:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595740",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:23'></a>
Replying to [tscrim](#comment%3A22):
> Replying to [egourgoulhon](#comment%3A20):
> > When clicking on the new branch, one gets a huge diff, which seems to be the whole 9.4.beta3 w.r.t 9.4.beta2. Wouldn't it be better to merge the previous ticket branch into a clean 9.4.beta3? 

> 
> That sometimes happens with the trac git helper. You don't have to worry too much about it as long as it pulls okay (a la[comment:21](#comment%3A21)).


Indeed, this seems erratic: it looks good now, while the branch has not been changed.



---

archive/issue_comments_595741.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-28T07:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595741",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_595742.json:
```json
{
    "body": "<a id='comment:25'></a>\n\n```\n[release@zen Sage]$ sage -t --long --warn-long 49.3 --random-seed=0 src/sage/manifolds/differentiable/mixed_form.py  # 4 doctests failed\n \nRunning doctests with ID 2021-06-29-21-56-39-c62006fe.\nGit branch: develop\nUsing --optional=build,dochtml,fedora,pip,sage,sage_spkg\nDoctesting 1 file.\nsage -t --long --warn-long 49.3 --random-seed=0 src/sage/manifolds/differentiable/mixed_form.py\n**********************************************************************\nFile \"src/sage/manifolds/differentiable/mixed_form.py\", line 90, in sage.manifolds.differentiable.mixed_form.MixedForm\nFailed example:\n    A.display_expansion() # display expansion in basis\nExpected:\n    A = [x] + [x*y dx] + [x*y^2 dx/\\dy]\nGot:\n    A = x + x*y dx + x*y^2 dx/\\dy\n**********************************************************************\nFile \"src/sage/manifolds/differentiable/mixed_form.py\", line 113, in sage.manifolds.differentiable.mixed_form.MixedForm\nFailed example:\n    B.display_expansion()\nExpected:\n    B = [x] + [x*y dx] + [x*y^2 dx/\\dy]\nGot:\n    B = x + x*y dx + x*y^2 dx/\\dy\n**********************************************************************\n[...]\n```",
    "created_at": "2021-06-29T19:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595742",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>

```
[release@zen Sage]$ sage -t --long --warn-long 49.3 --random-seed=0 src/sage/manifolds/differentiable/mixed_form.py  # 4 doctests failed
 
Running doctests with ID 2021-06-29-21-56-39-c62006fe.
Git branch: develop
Using --optional=build,dochtml,fedora,pip,sage,sage_spkg
Doctesting 1 file.
sage -t --long --warn-long 49.3 --random-seed=0 src/sage/manifolds/differentiable/mixed_form.py
**********************************************************************
File "src/sage/manifolds/differentiable/mixed_form.py", line 90, in sage.manifolds.differentiable.mixed_form.MixedForm
Failed example:
    A.display_expansion() # display expansion in basis
Expected:
    A = [x] + [x*y dx] + [x*y^2 dx/\dy]
Got:
    A = x + x*y dx + x*y^2 dx/\dy
**********************************************************************
File "src/sage/manifolds/differentiable/mixed_form.py", line 113, in sage.manifolds.differentiable.mixed_form.MixedForm
Failed example:
    B.display_expansion()
Expected:
    B = [x] + [x*y dx] + [x*y^2 dx/\dy]
Got:
    B = x + x*y dx + x*y^2 dx/\dy
**********************************************************************
[...]
```



---

archive/issue_comments_595743.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-06-29T19:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595743",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_595744.json:
```json
{
    "body": "<a id='comment:26'></a>\nAh damn, I mis-resolved the merge conflict.\n\nLet's wait for #30473 anyway.",
    "created_at": "2021-06-29T20:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595744",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:26'></a>
Ah damn, I mis-resolved the merge conflict.

Let's wait for #30473 anyway.



---

archive/issue_comments_595745.json:
```json
{
    "body": "Changing dependencies from \"#31654\" to \"#31654, #30473\"",
    "created_at": "2021-06-29T20:50:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595745",
    "user": "https://github.com/mjungmath"
}
```

Changing dependencies from "#31654" to "#31654, #30473"



---

archive/issue_comments_595746.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|\n|[da8893f](https://git.sagemath.org/sage.git/commit/?id=da8893f5c68353345ba8a18a07d371705084a9e7)|`Use sage.typeset.unicode_characters in TensorProductFunctor and SignedTensorProductFunctor`|\n|[2a23cb5](https://git.sagemath.org/sage.git/commit/?id=2a23cb59c229343e5d0716fe157bea6fc3366b39)|`Unicode symbol 2202 (partial) for the text display of coordinate frames`|\n|[5d096f1](https://git.sagemath.org/sage.git/commit/?id=5d096f1c5125297c291793409d9837dcf8f9128e)|`f-string for unicode_symbol in TensorProductFunctor and SignedTensorProductFunctor`|\n|[76c2fd5](https://git.sagemath.org/sage.git/commit/?id=76c2fd56bbf0b734d0a1a5cef3c94b5276270b92)|`Use Unicode symbol for the Riemann sphere example`|\n|[5167e6c](https://git.sagemath.org/sage.git/commit/?id=5167e6cfc4130eb88b78ddf9eb5e130c089f39f9)|`Use Unicode symbol for default text display of RealLine`|\n|[332410b](https://git.sagemath.org/sage.git/commit/?id=332410b486ea3e180c073042980947d820824674)|`Use unicode_otimes in TensorProductFunctor and SignedTensorProductFunctor`|\n|[f5d15d2](https://git.sagemath.org/sage.git/commit/?id=f5d15d263101b4ab17343cf6f2c206025a12ccd7)|`Merge branch 'public/manifolds/unicode_art' of git://trac.sagemath.org/sage into Sage 9.4.beta4.`|\n|[d87d09b](https://git.sagemath.org/sage.git/commit/?id=d87d09b7e101ac462c04372b2f8cd691cdb774a1)|`#30473: fix doctest error in DiffMap.pullback`|\n|[d62adad](https://git.sagemath.org/sage.git/commit/?id=d62adadeb6765e4d773252f44487c8c4ac606cc6)|`merge unicode`|\n|[f1e7ef8](https://git.sagemath.org/sage.git/commit/?id=f1e7ef884b03cf3ad6a7fe09b0b8892acc818063)|`Trac #30272: remove set_name_comp + fix doctest`|",
    "created_at": "2021-07-06T11:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595746",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------|
|[da8893f](https://git.sagemath.org/sage.git/commit/?id=da8893f5c68353345ba8a18a07d371705084a9e7)|`Use sage.typeset.unicode_characters in TensorProductFunctor and SignedTensorProductFunctor`|
|[2a23cb5](https://git.sagemath.org/sage.git/commit/?id=2a23cb59c229343e5d0716fe157bea6fc3366b39)|`Unicode symbol 2202 (partial) for the text display of coordinate frames`|
|[5d096f1](https://git.sagemath.org/sage.git/commit/?id=5d096f1c5125297c291793409d9837dcf8f9128e)|`f-string for unicode_symbol in TensorProductFunctor and SignedTensorProductFunctor`|
|[76c2fd5](https://git.sagemath.org/sage.git/commit/?id=76c2fd56bbf0b734d0a1a5cef3c94b5276270b92)|`Use Unicode symbol for the Riemann sphere example`|
|[5167e6c](https://git.sagemath.org/sage.git/commit/?id=5167e6cfc4130eb88b78ddf9eb5e130c089f39f9)|`Use Unicode symbol for default text display of RealLine`|
|[332410b](https://git.sagemath.org/sage.git/commit/?id=332410b486ea3e180c073042980947d820824674)|`Use unicode_otimes in TensorProductFunctor and SignedTensorProductFunctor`|
|[f5d15d2](https://git.sagemath.org/sage.git/commit/?id=f5d15d263101b4ab17343cf6f2c206025a12ccd7)|`Merge branch 'public/manifolds/unicode_art' of git://trac.sagemath.org/sage into Sage 9.4.beta4.`|
|[d87d09b](https://git.sagemath.org/sage.git/commit/?id=d87d09b7e101ac462c04372b2f8cd691cdb774a1)|`#30473: fix doctest error in DiffMap.pullback`|
|[d62adad](https://git.sagemath.org/sage.git/commit/?id=d62adadeb6765e4d773252f44487c8c4ac606cc6)|`merge unicode`|
|[f1e7ef8](https://git.sagemath.org/sage.git/commit/?id=f1e7ef884b03cf3ad6a7fe09b0b8892acc818063)|`Trac #30272: remove set_name_comp + fix doctest`|



---

archive/issue_comments_595747.json:
```json
{
    "body": "Changing commit from \"89dc5520f76fc7ef937c073e5a799925491a88ea\" to \"f1e7ef884b03cf3ad6a7fe09b0b8892acc818063\"",
    "created_at": "2021-07-06T11:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595747",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "89dc5520f76fc7ef937c073e5a799925491a88ea" to "f1e7ef884b03cf3ad6a7fe09b0b8892acc818063"



---

archive/issue_comments_595748.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-06T11:44:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595748",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_595749.json:
```json
{
    "body": "Changing commit from \"f1e7ef884b03cf3ad6a7fe09b0b8892acc818063\" to \"91fc96fed615f6070a729c143703907dc227819e\"",
    "created_at": "2021-07-06T11:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595749",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f1e7ef884b03cf3ad6a7fe09b0b8892acc818063" to "91fc96fed615f6070a729c143703907dc227819e"



---

archive/issue_comments_595750.json:
```json
{
    "body": "<a id='comment:30'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[91fc96f](https://git.sagemath.org/sage.git/commit/?id=91fc96fed615f6070a729c143703907dc227819e)|`Trac #30272: minor doctest fix`|",
    "created_at": "2021-07-06T11:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[91fc96f](https://git.sagemath.org/sage.git/commit/?id=91fc96fed615f6070a729c143703907dc227819e)|`Trac #30272: minor doctest fix`|



---

archive/issue_comments_595751.json:
```json
{
    "body": "<a id='comment:31'></a>\nReady for review again.",
    "created_at": "2021-07-07T06:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595751",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:31'></a>
Ready for review again.



---

archive/issue_comments_595752.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-09T15:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595752",
    "user": "https://github.com/egourgoulhon"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_595753.json:
```json
{
    "body": "<a id='comment:32'></a>\nThe patchbot reports doctest failures that all pertain to the dependency #30473. They are all fixed in the latest version of that ticket. But I don't think it necessary to merge it here to move on.",
    "created_at": "2021-07-09T15:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595753",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:32'></a>
The patchbot reports doctest failures that all pertain to the dependency #30473. They are all fixed in the latest version of that ticket. But I don't think it necessary to merge it here to move on.



---

archive/issue_comments_595754.json:
```json
{
    "body": "Changing branch from \"u/gh-mjungmath/mixed_forms__set_comp__comp\" to \"91fc96fed615f6070a729c143703907dc227819e\"",
    "created_at": "2021-07-23T20:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595754",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mjungmath/mixed_forms__set_comp__comp" to "91fc96fed615f6070a729c143703907dc227819e"



---

archive/issue_events_078318.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-23T20:11:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30272#event-78318"
}
```



---

archive/issue_comments_595755.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-23T20:11:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30272",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30272#issuecomment-595755",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
