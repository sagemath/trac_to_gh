# Issue 30271: nauty: Switch to autotoolized fork so that shared libraries can be built

archive/issues_030034.json:
```json
{
    "body": "(split out from #27952).\n\nThe fork is at https://github.com/mkoeppe/nauty\n\n\n\nCC:  winfried @tobihan\n\nKeywords: sd111\n\nReviewer: https://github.com/mkoeppe/sage/actions/runs/205072095\n\nAuthor: Matthias Koeppe\n\nBranch: u/mkoeppe/nauty__switch_to_autotoolized_fork_so_that_shared_libraries_can_be_built\n\nStatus: new\n\nDependencies: #27952\n\nCommit: ba75940b91a1ae107c5869e9b446c9ef592bd78e\n\nIssue created by migration from https://trac.sagemath.org/ticket/30271\n\n",
    "created_at": "2020-08-02T13:04:03Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "nauty: Switch to autotoolized fork so that shared libraries can be built",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30271",
    "user": "https://github.com/mkoeppe"
}
```
(split out from #27952).

The fork is at https://github.com/mkoeppe/nauty



CC:  winfried @tobihan

Keywords: sd111

Reviewer: https://github.com/mkoeppe/sage/actions/runs/205072095

Author: Matthias Koeppe

Branch: u/mkoeppe/nauty__switch_to_autotoolized_fork_so_that_shared_libraries_can_be_built

Status: new

Dependencies: #27952

Commit: ba75940b91a1ae107c5869e9b446c9ef592bd78e

Issue created by migration from https://trac.sagemath.org/ticket/30271





---

archive/issue_comments_596454.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/nauty__switch_to_autotoolized_fork_so_that_shared_libraries_can_be_built\"",
    "created_at": "2020-08-02T13:09:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596454",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/nauty__switch_to_autotoolized_fork_so_that_shared_libraries_can_be_built"



---

archive/issue_comments_596455.json:
```json
{
    "body": "<a id='comment:2'></a>\nAs seen in https://github.com/Normaliz/Normaliz/runs/936924467, this needs more work:\n\n```\n  [nauty-2.7.1+ds+sage-2020-08-01]   /usr/bin/ld: cannot open linker script file ./nauty.map: No such file or directory\n  [nauty-2.7.1+ds+sage-2020-08-01]   collect2: error: ld returned 1 exit status\n```\n\n---\nNew commits:\n|                                                                                                                                          |                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[9ebc487](https://github.com/sagemath/sagetrac-mirror/commit/9ebc48774bad1215399fdf00240ca33fcb581a8d)|`build/pkgs/nauty: Switch to autotoolized fork`|",
    "created_at": "2020-08-02T13:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
As seen in https://github.com/Normaliz/Normaliz/runs/936924467, this needs more work:

```
  [nauty-2.7.1+ds+sage-2020-08-01]   /usr/bin/ld: cannot open linker script file ./nauty.map: No such file or directory
  [nauty-2.7.1+ds+sage-2020-08-01]   collect2: error: ld returned 1 exit status
```

---
New commits:
|                                                                                                                                          |                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[9ebc487](https://github.com/sagemath/sagetrac-mirror/commit/9ebc48774bad1215399fdf00240ca33fcb581a8d)|`build/pkgs/nauty: Switch to autotoolized fork`|



---

archive/issue_comments_596456.json:
```json
{
    "body": "Changing commit from \"\" to \"9ebc48774bad1215399fdf00240ca33fcb581a8d\"",
    "created_at": "2020-08-02T13:33:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596456",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "9ebc48774bad1215399fdf00240ca33fcb581a8d"



---

archive/issue_comments_596457.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#27952\"",
    "created_at": "2020-08-12T05:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596457",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#27952"



---

archive/issue_comments_596458.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-This is for #27952.\n+(split out from #27952).\n \n The fork is at https://github.com/mkoeppe/nauty\n \n``````\n",
    "created_at": "2020-08-12T05:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596458",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-This is for #27952.
+(split out from #27952).
 
 The fork is at https://github.com/mkoeppe/nauty
 
``````




---

archive/issue_comments_596459.json:
```json
{
    "body": "<a id='comment:3'></a>\n(removing cc as requested)",
    "created_at": "2020-08-12T05:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596459",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
(removing cc as requested)



---

archive/issue_comments_596460.json:
```json
{
    "body": "Changing commit from \"9ebc48774bad1215399fdf00240ca33fcb581a8d\" to \"ba75940b91a1ae107c5869e9b446c9ef592bd78e\"",
    "created_at": "2020-08-12T05:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596460",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9ebc48774bad1215399fdf00240ca33fcb581a8d" to "ba75940b91a1ae107c5869e9b446c9ef592bd78e"



---

archive/issue_comments_596461.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[6e9191a](https://github.com/sagemath/sagetrac-mirror/commit/6e9191ac44608e4c582f263e7e2a2168af270b94)|`build/pkgs/e_antic: Update to 0.1.8`|\n|[a906db8](https://github.com/sagemath/sagetrac-mirror/commit/a906db86d8d27c6af61ed623fabf09333c417235)|`Merge branch 't/30262/update_e_antic_to_0_1_8' into t/27952/normaliz`|\n|[582c309](https://github.com/sagemath/sagetrac-mirror/commit/582c3099e2e4c0e707604f9b938ec848eb48c2a6)|`build/pkgs/normaliz: Update to 3.8.7`|\n|[13c0375](https://github.com/sagemath/sagetrac-mirror/commit/13c0375d334eb3f85b643a7a0dff4a7621987e1a)|`build/pkgs/pynormaliz: Update to 2.12`|\n|[027ef5f](https://github.com/sagemath/sagetrac-mirror/commit/027ef5fadb38c4016947224c312dd320453e024b)|`build/pkgs/pynormaliz: Fix upstream_url`|\n|[0882611](https://github.com/sagemath/sagetrac-mirror/commit/08826113448fa5a5e2c76571fe3575764c22936a)|`Merge tag '9.2.beta7' into t/30262/update_e_antic_to_0_1_8`|\n|[071bfc7](https://github.com/sagemath/sagetrac-mirror/commit/071bfc7bb2b8dc582f4146613956727240e7ac13)|`Merge branch 't/30262/update_e_antic_to_0_1_8' into t/27952/normaliz`|\n|[f3e8fc2](https://github.com/sagemath/sagetrac-mirror/commit/f3e8fc21d70dc5b6f8e647e39fbe5d01b39ffe13)|`document far facet condition and add a doctest`|\n|[3f2d872](https://github.com/sagemath/sagetrac-mirror/commit/3f2d8729ef7447458da4f3235a60c77e9002218d)|`Merge tag '9.2.beta8' into t/27952/normaliz`|\n|[ba75940](https://github.com/sagemath/sagetrac-mirror/commit/ba75940b91a1ae107c5869e9b446c9ef592bd78e)|`Merge branch 't/27952/normaliz' into t/30271/nauty__switch_to_autotoolized_fork_so_that_shared_libraries_can_be_built`|",
    "created_at": "2020-08-12T05:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596461",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[6e9191a](https://github.com/sagemath/sagetrac-mirror/commit/6e9191ac44608e4c582f263e7e2a2168af270b94)|`build/pkgs/e_antic: Update to 0.1.8`|
|[a906db8](https://github.com/sagemath/sagetrac-mirror/commit/a906db86d8d27c6af61ed623fabf09333c417235)|`Merge branch 't/30262/update_e_antic_to_0_1_8' into t/27952/normaliz`|
|[582c309](https://github.com/sagemath/sagetrac-mirror/commit/582c3099e2e4c0e707604f9b938ec848eb48c2a6)|`build/pkgs/normaliz: Update to 3.8.7`|
|[13c0375](https://github.com/sagemath/sagetrac-mirror/commit/13c0375d334eb3f85b643a7a0dff4a7621987e1a)|`build/pkgs/pynormaliz: Update to 2.12`|
|[027ef5f](https://github.com/sagemath/sagetrac-mirror/commit/027ef5fadb38c4016947224c312dd320453e024b)|`build/pkgs/pynormaliz: Fix upstream_url`|
|[0882611](https://github.com/sagemath/sagetrac-mirror/commit/08826113448fa5a5e2c76571fe3575764c22936a)|`Merge tag '9.2.beta7' into t/30262/update_e_antic_to_0_1_8`|
|[071bfc7](https://github.com/sagemath/sagetrac-mirror/commit/071bfc7bb2b8dc582f4146613956727240e7ac13)|`Merge branch 't/30262/update_e_antic_to_0_1_8' into t/27952/normaliz`|
|[f3e8fc2](https://github.com/sagemath/sagetrac-mirror/commit/f3e8fc21d70dc5b6f8e647e39fbe5d01b39ffe13)|`document far facet condition and add a doctest`|
|[3f2d872](https://github.com/sagemath/sagetrac-mirror/commit/3f2d8729ef7447458da4f3235a60c77e9002218d)|`Merge tag '9.2.beta8' into t/27952/normaliz`|
|[ba75940](https://github.com/sagemath/sagetrac-mirror/commit/ba75940b91a1ae107c5869e9b446c9ef592bd78e)|`Merge branch 't/27952/normaliz' into t/30271/nauty__switch_to_autotoolized_fork_so_that_shared_libraries_can_be_built`|



---

archive/issue_comments_596462.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-08-12T05:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596462",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_596463.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/205072095\"",
    "created_at": "2020-08-12T05:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596463",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/205072095"



---

archive/issue_comments_596464.json:
```json
{
    "body": "<a id='comment:6'></a>\nubuntu-trusty-maximal (https://github.com/mkoeppe/sage/runs/974420086)\n\n```\n/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:1512: undefined reference to `__gmpz_init'\nsumlines-sumlines.o: In function `add_one':\n/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:677: undefined reference to `__gmpz_init_set'\n/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:629: undefined reference to `__gmpz_add'\nsumlines-sumlines.o: In function `scanline':\n/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:961: undefined reference to `__gmpz_set_str'\nsumlines-sumlines.o: In function `writeline':\n/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:388: undefined reference to `__gmpz_out_str'\ncollect2: error: ld returned 1 exit status\n```\nWorked ok on `ubuntu-bionic-maximal` (https://github.com/mkoeppe/sage/runs/974420157)",
    "created_at": "2020-08-12T18:22:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596464",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
ubuntu-trusty-maximal (https://github.com/mkoeppe/sage/runs/974420086)

```
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:1512: undefined reference to `__gmpz_init'
sumlines-sumlines.o: In function `add_one':
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:677: undefined reference to `__gmpz_init_set'
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:629: undefined reference to `__gmpz_add'
sumlines-sumlines.o: In function `scanline':
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:961: undefined reference to `__gmpz_set_str'
sumlines-sumlines.o: In function `writeline':
/sage/local/var/tmp/sage/build/nauty-2.7.1+ds+sage-2020-08-02/src/sumlines.c:388: undefined reference to `__gmpz_out_str'
collect2: error: ld returned 1 exit status
```
Worked ok on `ubuntu-bionic-maximal` (https://github.com/mkoeppe/sage/runs/974420157)



---

archive/issue_events_088270.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88270"
}
```



---

archive/issue_comments_596465.json:
```json
{
    "body": "<a id='comment:9'></a>\n`@`thansen: https://github.com/mkoeppe/nauty continues the autotoolization of nauty that is done partially by the Debian package. This may be of interest to the Debian maintainers",
    "created_at": "2020-12-10T07:03:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596465",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
`@`thansen: https://github.com/mkoeppe/nauty continues the autotoolization of nauty that is done partially by the Debian package. This may be of interest to the Debian maintainers



---

archive/issue_comments_596466.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-10T07:03:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596466",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_596467.json:
```json
{
    "body": "<a id='comment:11'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30271#issuecomment-596467",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_088271.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88271"
}
```



---

archive/issue_events_088272.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88272"
}
```



---

archive/issue_events_088273.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88273"
}
```



---

archive/issue_events_088274.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88274"
}
```



---

archive/issue_events_088275.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88275"
}
```



---

archive/issue_events_088276.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88276"
}
```



---

archive/issue_events_088277.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88277"
}
```



---

archive/issue_events_088278.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88278"
}
```



---

archive/issue_events_088279.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88279"
}
```



---

archive/issue_events_088280.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30271",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30271#event-88280"
}
```
