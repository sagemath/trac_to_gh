# Issue 30948: build/pkgs: Split out spkg liblzma from xz

archive/issues_030711.json:
```json
{
    "body": "(from #30559)\n\n```\n$ grep xz build/pkgs/*/dependencies\nbuild/pkgs/cmake/dependencies:curl zlib bzip2 xz\nbuild/pkgs/gcc/dependencies:| $(MP_LIBRARY) mpfr mpc zlib xz\nbuild/pkgs/gdb/dependencies:mpfr zlib ncurses $(PYTHON) xz\nbuild/pkgs/gfortran/dependencies:| $(MP_LIBRARY) mpfr mpc zlib xz\nbuild/pkgs/p_group_cohomology/dependencies:$(PYTHON)... | $(PYTHON_TOOLCHAIN) matplotlib gap xz $(SAGERUNTIME) ipywidgets\nbuild/pkgs/python3/dependencies:zlib readline sqlite libpng bzip2 xz libffi\nbuild/pkgs/r/dependencies:$(BLAS) gfortran iconv readline bzip2 xz pcre curl | pkgconf\n```\nIn this list, `cmake`, `r`, `python3` all depend on `liblzma`. \nThe others are merely build-time dependencies on the `xz` binary (for unpacking the tarball in `sage_bootstrap.uncompress.tar_file` - when `sage-bootstrap-python` is < 3.3 - see https://docs.python.org/3/library/tarfile.html) and have nothing to do with the shared library.\n\nThe new `liblzma` package is a script package without installation steps; it delegates the actual installation to the `xz` spkg. This follows the same approach as the `libnauty`/`nauty` packages.\n\n\n**CC:**  @dimpase @jhpalmieri\n\n**Branch/Commit:** [1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e](https://github.com/sagemath/sagetrac-mirror/commit/1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e)\n\n**Reviewer:** John Palmieri\n\n**Author:** Matthias Koeppe\n\n**Dependencies:** #31409, #30350\n\nIssue created by migration from https://trac.sagemath.org/ticket/30948\n\n",
    "closed_at": "2021-10-10T10:17:12Z",
    "created_at": "2020-11-22T23:03:23Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "title": "build/pkgs: Split out spkg liblzma from xz",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/30948",
    "user": "https://github.com/mkoeppe"
}
```
(from #30559)

```
$ grep xz build/pkgs/*/dependencies
build/pkgs/cmake/dependencies:curl zlib bzip2 xz
build/pkgs/gcc/dependencies:| $(MP_LIBRARY) mpfr mpc zlib xz
build/pkgs/gdb/dependencies:mpfr zlib ncurses $(PYTHON) xz
build/pkgs/gfortran/dependencies:| $(MP_LIBRARY) mpfr mpc zlib xz
build/pkgs/p_group_cohomology/dependencies:$(PYTHON)... | $(PYTHON_TOOLCHAIN) matplotlib gap xz $(SAGERUNTIME) ipywidgets
build/pkgs/python3/dependencies:zlib readline sqlite libpng bzip2 xz libffi
build/pkgs/r/dependencies:$(BLAS) gfortran iconv readline bzip2 xz pcre curl | pkgconf
```
In this list, `cmake`, `r`, `python3` all depend on `liblzma`. 
The others are merely build-time dependencies on the `xz` binary (for unpacking the tarball in `sage_bootstrap.uncompress.tar_file` - when `sage-bootstrap-python` is < 3.3 - see https://docs.python.org/3/library/tarfile.html) and have nothing to do with the shared library.

The new `liblzma` package is a script package without installation steps; it delegates the actual installation to the `xz` spkg. This follows the same approach as the `libnauty`/`nauty` packages.


**CC:**  @dimpase @jhpalmieri

**Branch/Commit:** [1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e](https://github.com/sagemath/sagetrac-mirror/commit/1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e)

**Reviewer:** John Palmieri

**Author:** Matthias Koeppe

**Dependencies:** #31409, #30350

Issue created by migration from https://trac.sagemath.org/ticket/30948





---

archive/issue_comments_498685.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,15 @@\n (from #30559)\n \n+```\n+$ grep xz build/pkgs/*/dependencies\n+build/pkgs/cmake/dependencies:curl zlib bzip2 xz\n+build/pkgs/gcc/dependencies:| $(MP_LIBRARY) mpfr mpc zlib xz\n+build/pkgs/gdb/dependencies:mpfr zlib ncurses $(PYTHON) xz\n+build/pkgs/gfortran/dependencies:| $(MP_LIBRARY) mpfr mpc zlib xz\n+build/pkgs/p_group_cohomology/dependencies:$(PYTHON)... | $(PYTHON_TOOLCHAIN) matplotlib gap xz $(SAGERUNTIME) ipywidgets\n+build/pkgs/python3/dependencies:zlib readline sqlite libpng bzip2 xz libffi\n+build/pkgs/r/dependencies:$(BLAS) gfortran iconv readline bzip2 xz pcre curl | pkgconf\n+```\n+In this list, `cmake`, `r`, `python3` all depend on `liblzma`. \n+The others are merely build-time dependencies on the `xz` binary (for unpacking the tarball in `sage_bootstrap.uncompress.tar_file` - when `sage-bootstrap-python` is < 3.3 - see https://docs.python.org/3/library/tarfile.html) and have nothing to do with the shared library.\n \n``````\n",
    "created_at": "2020-11-22T23:04:54Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498685",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,15 @@
 (from #30559)
 
+```
+$ grep xz build/pkgs/*/dependencies
+build/pkgs/cmake/dependencies:curl zlib bzip2 xz
+build/pkgs/gcc/dependencies:| $(MP_LIBRARY) mpfr mpc zlib xz
+build/pkgs/gdb/dependencies:mpfr zlib ncurses $(PYTHON) xz
+build/pkgs/gfortran/dependencies:| $(MP_LIBRARY) mpfr mpc zlib xz
+build/pkgs/p_group_cohomology/dependencies:$(PYTHON)... | $(PYTHON_TOOLCHAIN) matplotlib gap xz $(SAGERUNTIME) ipywidgets
+build/pkgs/python3/dependencies:zlib readline sqlite libpng bzip2 xz libffi
+build/pkgs/r/dependencies:$(BLAS) gfortran iconv readline bzip2 xz pcre curl | pkgconf
+```
+In this list, `cmake`, `r`, `python3` all depend on `liblzma`. 
+The others are merely build-time dependencies on the `xz` binary (for unpacking the tarball in `sage_bootstrap.uncompress.tar_file` - when `sage-bootstrap-python` is < 3.3 - see https://docs.python.org/3/library/tarfile.html) and have nothing to do with the shared library.
 
``````




---

archive/issue_comments_498686.json:
```json
{
    "body": "<a id='comment:2'></a>\nPython should be able handle uncompressing `.tar.xz` files, so maybe we should modify the `SageTarXZFile` class in `sage_bootstrap.uncompress.tar_file`: only use it if Python can't already handle `.xz` files.",
    "created_at": "2020-11-22T23:54:35Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498686",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:2'></a>
Python should be able handle uncompressing `.tar.xz` files, so maybe we should modify the `SageTarXZFile` class in `sage_bootstrap.uncompress.tar_file`: only use it if Python can't already handle `.xz` files.



---

archive/issue_comments_498687.json:
```json
{
    "body": "<a id='comment:3'></a>\nWe could test\n\n```\nhasattr(tarfile.TarFile, 'xzopen')\n```\nfor example.",
    "created_at": "2020-11-22T23:59:25Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498687",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>
We could test

```
hasattr(tarfile.TarFile, 'xzopen')
```
for example.



---

archive/issue_comments_498688.json:
```json
{
    "body": "<a id='comment:4'></a>\nI guess this shouldn't be necessary: `sage_bootstrap.uncompress.action.open_archive` should check to see if `tarfile.is_tarfile(FILE)` is `True` first, and it should be for `xz` files with a supported version of Python. So I still don't know what happened in Volker's case: using an old Python?",
    "created_at": "2020-11-23T00:05:03Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498688",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:4'></a>
I guess this shouldn't be necessary: `sage_bootstrap.uncompress.action.open_archive` should check to see if `tarfile.is_tarfile(FILE)` is `True` first, and it should be for `xz` files with a supported version of Python. So I still don't know what happened in Volker's case: using an old Python?



---

archive/issue_events_277524.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277524"
}
```



---

archive/issue_events_277525.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277525"
}
```



---

archive/issue_comments_498689.json:
```json
{
    "body": "<a id='comment:5'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498689",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_498690.json:
```json
{
    "body": "<a id='comment:6'></a>\nIf `r` is coming from the system or `--disable-r` (#31409) is used, then we can drop the SAGE_SPKG_DEPCHECK for `xz` in `python3/spkg-configure.m4`\nbecause then there is no package depending on `liblzma` that will run in the same process as `python3`.\n(`cmake` depends on `liblzma` but it does not run in the same process.)",
    "created_at": "2021-03-26T23:51:48Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498690",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
If `r` is coming from the system or `--disable-r` (#31409) is used, then we can drop the SAGE_SPKG_DEPCHECK for `xz` in `python3/spkg-configure.m4`
because then there is no package depending on `liblzma` that will run in the same process as `python3`.
(`cmake` depends on `liblzma` but it does not run in the same process.)



---

archive/issue_comments_498691.json:
```json
{
    "body": "**Dependencies:** #31409",
    "created_at": "2021-03-26T23:51:48Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498691",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #31409



---

archive/issue_events_277526.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277526"
}
```



---

archive/issue_events_277527.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277527"
}
```



---

archive/issue_comments_498692.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/build_pkgs__split_out_spkg_liblzma_from_xz](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/build_pkgs__split_out_spkg_liblzma_from_xz)",
    "created_at": "2021-09-26T00:12:43Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498692",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/build_pkgs__split_out_spkg_liblzma_from_xz](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/build_pkgs__split_out_spkg_liblzma_from_xz)



---

archive/issue_comments_498693.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2021-09-26T00:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498693",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_498694.json:
```json
{
    "body": "**Commit:** [546df52bdcaeb19e69defb20e41f5b6b043a0092](https://github.com/sagemath/sagetrac-mirror/commit/546df52bdcaeb19e69defb20e41f5b6b043a0092)",
    "created_at": "2021-09-26T00:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498694",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [546df52bdcaeb19e69defb20e41f5b6b043a0092](https://github.com/sagemath/sagetrac-mirror/commit/546df52bdcaeb19e69defb20e41f5b6b043a0092)



---

archive/issue_comments_498695.json:
```json
{
    "body": "<a id='comment:9'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c504bb98b41cf7c0c4876f1db34e8518030455e9\">c504bb9</a></td><td><code>build/pkgs: Split out spkg liblzma from xz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f83aac5c4316dd3116562a29cc329b9407e9cfbd\">f83aac5</a></td><td><code>build/pkgs/{cmake,r}/dependencies: Depend on liblzma, not xz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e1e64319b4270a46bc7b0a13b86423e0c175b82\">9e1e643</a></td><td><code>build/pkgs/python3/dependencies: Add liblzma</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe36a64587703ff58fa232153a586969b90fcd04\">fe36a64</a></td><td><code>build/pkgs/r/spkg-configure.m4: Change DEPCHECK from xz to liblzma</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/212b03eb9d4d793acaa634cacc3305f1b6b5c85a\">212b03e</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Change DEPCHECK from xz to liblzma</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/546df52bdcaeb19e69defb20e41f5b6b043a0092\">546df52</a></td><td><code>build/pkgs/xz/spkg-configure.m4: Set sage_require_xz=no if sage-bootstrap-python is new enough</code></td></tr></table>\n",
    "created_at": "2021-09-26T00:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498695",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c504bb98b41cf7c0c4876f1db34e8518030455e9">c504bb9</a></td><td><code>build/pkgs: Split out spkg liblzma from xz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f83aac5c4316dd3116562a29cc329b9407e9cfbd">f83aac5</a></td><td><code>build/pkgs/{cmake,r}/dependencies: Depend on liblzma, not xz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e1e64319b4270a46bc7b0a13b86423e0c175b82">9e1e643</a></td><td><code>build/pkgs/python3/dependencies: Add liblzma</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe36a64587703ff58fa232153a586969b90fcd04">fe36a64</a></td><td><code>build/pkgs/r/spkg-configure.m4: Change DEPCHECK from xz to liblzma</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/212b03eb9d4d793acaa634cacc3305f1b6b5c85a">212b03e</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Change DEPCHECK from xz to liblzma</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/546df52bdcaeb19e69defb20e41f5b6b043a0092">546df52</a></td><td><code>build/pkgs/xz/spkg-configure.m4: Set sage_require_xz=no if sage-bootstrap-python is new enough</code></td></tr></table>




---

archive/issue_comments_498696.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -13,3 +13,5 @@\n In this list, `cmake`, `r`, `python3` all depend on `liblzma`. \n The others are merely build-time dependencies on the `xz` binary (for unpacking the tarball in `sage_bootstrap.uncompress.tar_file` - when `sage-bootstrap-python` is < 3.3 - see https://docs.python.org/3/library/tarfile.html) and have nothing to do with the shared library.\n \n+The new `liblzma` package is a script package without installation steps; it delegates the actual installation to the `xz` spkg. This follows the same approach as the `libnauty`/`nauty` packages.\n+\n``````\n",
    "created_at": "2021-09-26T00:15:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498696",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -13,3 +13,5 @@
 In this list, `cmake`, `r`, `python3` all depend on `liblzma`. 
 The others are merely build-time dependencies on the `xz` binary (for unpacking the tarball in `sage_bootstrap.uncompress.tar_file` - when `sage-bootstrap-python` is < 3.3 - see https://docs.python.org/3/library/tarfile.html) and have nothing to do with the shared library.
 
+The new `liblzma` package is a script package without installation steps; it delegates the actual installation to the `xz` spkg. This follows the same approach as the `libnauty`/`nauty` packages.
+
``````




---

archive/issue_comments_498697.json:
```json
{
    "body": "<a id='comment:10'></a>\nThe changes discussed in [comment:2](#comment%3A2) to [comment:4](#comment%3A4) still need to be implemented",
    "created_at": "2021-09-26T00:18:35Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498697",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
The changes discussed in [comment:2](#comment%3A2) to [comment:4](#comment%3A4) still need to be implemented



---

archive/issue_comments_498698.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b4b142fbcdad6cc53313d84fdc88e49a6168de2\">2b4b142</a></td><td><code>build/pkgs: Split out spkg liblzma from xz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5137ae91f2dd0e61de3da26d3458459d21df7c24\">5137ae9</a></td><td><code>build/pkgs/{cmake,r}/dependencies: Depend on liblzma, not xz</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/462fd33dfa0afc26f07635bce582a24e51ce5db8\">462fd33</a></td><td><code>build/pkgs/python3/dependencies: Add liblzma</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba6fdcd228428ad397fffcc2110fa58c4e8f75b2\">ba6fdcd</a></td><td><code>build/pkgs/r/spkg-configure.m4: Change DEPCHECK from xz to liblzma</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bba3a93cd92e5ddec9a6a718d30ad9552bf3ee70\">bba3a93</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Change DEPCHECK from xz to liblzma</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf500bea95744af285d461b4f84ac573ecc97e3d\">bf500be</a></td><td><code>build/pkgs/xz/spkg-configure.m4: Set sage_require_xz=no if sage-bootstrap-python is new enough</code></td></tr></table>\n",
    "created_at": "2021-09-26T00:55:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498698",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b4b142fbcdad6cc53313d84fdc88e49a6168de2">2b4b142</a></td><td><code>build/pkgs: Split out spkg liblzma from xz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5137ae91f2dd0e61de3da26d3458459d21df7c24">5137ae9</a></td><td><code>build/pkgs/{cmake,r}/dependencies: Depend on liblzma, not xz</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/462fd33dfa0afc26f07635bce582a24e51ce5db8">462fd33</a></td><td><code>build/pkgs/python3/dependencies: Add liblzma</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba6fdcd228428ad397fffcc2110fa58c4e8f75b2">ba6fdcd</a></td><td><code>build/pkgs/r/spkg-configure.m4: Change DEPCHECK from xz to liblzma</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bba3a93cd92e5ddec9a6a718d30ad9552bf3ee70">bba3a93</a></td><td><code>build/pkgs/python3/spkg-configure.m4: Change DEPCHECK from xz to liblzma</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf500bea95744af285d461b4f84ac573ecc97e3d">bf500be</a></td><td><code>build/pkgs/xz/spkg-configure.m4: Set sage_require_xz=no if sage-bootstrap-python is new enough</code></td></tr></table>




---

archive/issue_comments_498699.json:
```json
{
    "body": "**Changing commit** from \"[546df52bdcaeb19e69defb20e41f5b6b043a0092](https://github.com/sagemath/sagetrac-mirror/commit/546df52bdcaeb19e69defb20e41f5b6b043a0092)\" to \"[bf500bea95744af285d461b4f84ac573ecc97e3d](https://github.com/sagemath/sagetrac-mirror/commit/bf500bea95744af285d461b4f84ac573ecc97e3d)\".",
    "created_at": "2021-09-26T00:55:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498699",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[546df52bdcaeb19e69defb20e41f5b6b043a0092](https://github.com/sagemath/sagetrac-mirror/commit/546df52bdcaeb19e69defb20e41f5b6b043a0092)" to "[bf500bea95744af285d461b4f84ac573ecc97e3d](https://github.com/sagemath/sagetrac-mirror/commit/bf500bea95744af285d461b4f84ac573ecc97e3d)".



---

archive/issue_comments_498700.json:
```json
{
    "body": "<a id='comment:12'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc010068136dbdda22a83bb933dbffa3686865e4\">bc01006</a></td><td><code>build/pkgs/xz: Update to 5.2.5, add upstream_url</code></td></tr></table>\n",
    "created_at": "2021-09-26T00:58:59Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498700",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc010068136dbdda22a83bb933dbffa3686865e4">bc01006</a></td><td><code>build/pkgs/xz: Update to 5.2.5, add upstream_url</code></td></tr></table>




---

archive/issue_comments_498701.json:
```json
{
    "body": "**Changing commit** from \"[bf500bea95744af285d461b4f84ac573ecc97e3d](https://github.com/sagemath/sagetrac-mirror/commit/bf500bea95744af285d461b4f84ac573ecc97e3d)\" to \"[bc010068136dbdda22a83bb933dbffa3686865e4](https://github.com/sagemath/sagetrac-mirror/commit/bc010068136dbdda22a83bb933dbffa3686865e4)\".",
    "created_at": "2021-09-26T00:58:59Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498701",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bf500bea95744af285d461b4f84ac573ecc97e3d](https://github.com/sagemath/sagetrac-mirror/commit/bf500bea95744af285d461b4f84ac573ecc97e3d)" to "[bc010068136dbdda22a83bb933dbffa3686865e4](https://github.com/sagemath/sagetrac-mirror/commit/bc010068136dbdda22a83bb933dbffa3686865e4)".



---

archive/issue_comments_498702.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/009256e4068b5d349d8e0a2793e77cd83b7c10ec\">009256e</a></td><td><code>build/pkgs/liblzma/dependencies: Update</code></td></tr></table>\n",
    "created_at": "2021-09-26T01:02:32Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498702",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/009256e4068b5d349d8e0a2793e77cd83b7c10ec">009256e</a></td><td><code>build/pkgs/liblzma/dependencies: Update</code></td></tr></table>




---

archive/issue_comments_498703.json:
```json
{
    "body": "**Changing commit** from \"[bc010068136dbdda22a83bb933dbffa3686865e4](https://github.com/sagemath/sagetrac-mirror/commit/bc010068136dbdda22a83bb933dbffa3686865e4)\" to \"[009256e4068b5d349d8e0a2793e77cd83b7c10ec](https://github.com/sagemath/sagetrac-mirror/commit/009256e4068b5d349d8e0a2793e77cd83b7c10ec)\".",
    "created_at": "2021-09-26T01:02:32Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bc010068136dbdda22a83bb933dbffa3686865e4](https://github.com/sagemath/sagetrac-mirror/commit/bc010068136dbdda22a83bb933dbffa3686865e4)" to "[009256e4068b5d349d8e0a2793e77cd83b7c10ec](https://github.com/sagemath/sagetrac-mirror/commit/009256e4068b5d349d8e0a2793e77cd83b7c10ec)".



---

archive/issue_events_277528.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-09-26T21:48:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277528"
}
```



---

archive/issue_comments_498704.json:
```json
{
    "body": "<a id='comment:15'></a>\nShould there be a symlink `build/pkgs/liblzma/package-version.txt -> ../xz/package-version.txt`? Or is it okay to omit the version for `lzma`?",
    "created_at": "2021-09-29T22:40:28Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498704",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>
Should there be a symlink `build/pkgs/liblzma/package-version.txt -> ../xz/package-version.txt`? Or is it okay to omit the version for `lzma`?



---

archive/issue_comments_498705.json:
```json
{
    "body": "**Changing commit** from \"[009256e4068b5d349d8e0a2793e77cd83b7c10ec](https://github.com/sagemath/sagetrac-mirror/commit/009256e4068b5d349d8e0a2793e77cd83b7c10ec)\" to \"[de28c72a9f65ed6681d05d3b9a954bd8f266c9a7](https://github.com/sagemath/sagetrac-mirror/commit/de28c72a9f65ed6681d05d3b9a954bd8f266c9a7)\".",
    "created_at": "2021-09-29T23:18:44Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[009256e4068b5d349d8e0a2793e77cd83b7c10ec](https://github.com/sagemath/sagetrac-mirror/commit/009256e4068b5d349d8e0a2793e77cd83b7c10ec)" to "[de28c72a9f65ed6681d05d3b9a954bd8f266c9a7](https://github.com/sagemath/sagetrac-mirror/commit/de28c72a9f65ed6681d05d3b9a954bd8f266c9a7)".



---

archive/issue_comments_498706.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de28c72a9f65ed6681d05d3b9a954bd8f266c9a7\">de28c72</a></td><td><code>build/pkgs/liblzma: Add symlink for package-version.txt</code></td></tr></table>\n",
    "created_at": "2021-09-29T23:18:44Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498706",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de28c72a9f65ed6681d05d3b9a954bd8f266c9a7">de28c72</a></td><td><code>build/pkgs/liblzma: Add symlink for package-version.txt</code></td></tr></table>




---

archive/issue_comments_498707.json:
```json
{
    "body": "<a id='comment:17'></a>\nIt's ok to omit it (it is using \"none\" in this case), but I agree that it's probably nicer with a version",
    "created_at": "2021-09-29T23:19:20Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498707",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
It's ok to omit it (it is using "none" in this case), but I agree that it's probably nicer with a version



---

archive/issue_comments_498708.json:
```json
{
    "body": "<a id='comment:18'></a>\nThank you, looks good.",
    "created_at": "2021-09-30T04:51:08Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498708",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'></a>
Thank you, looks good.



---

archive/issue_comments_498709.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2021-09-30T04:51:08Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498709",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_events_277529.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-09-30T04:51:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277529"
}
```



---

archive/issue_events_277530.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-09-30T04:51:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277530"
}
```



---

archive/issue_comments_498710.json:
```json
{
    "body": "<a id='comment:19'></a>\nThanks!",
    "created_at": "2021-09-30T04:59:18Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498710",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
Thanks!



---

archive/issue_events_277531.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-02T19:01:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277531"
}
```



---

archive/issue_events_277532.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-02T19:01:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277532"
}
```



---

archive/issue_comments_498711.json:
```json
{
    "body": "<a id='comment:20'></a>\nMerge conflict",
    "created_at": "2021-10-02T19:01:00Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498711",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:20'></a>
Merge conflict



---

archive/issue_comments_498712.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ba1d79f84e6030c01ede985e813e35a3d180feb\">8ba1d79</a></td><td><code>trac 30350: remove the ATLAS package</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69db83912a25f1cfa4341df59b2a5a45bb27a3cb\">69db839</a></td><td><code>trac 30350: remove \"--with-blas=\" option to ./configure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/272424a33ba1a68b221b160ebbbc9c89852aa464\">272424a</a></td><td><code>trac 30350: remove remaining bits in build/pkgs/atlas/distros</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e\">1fb1fa9</a></td><td><code>Merge #30350</code></td></tr></table>\n",
    "created_at": "2021-10-02T19:12:58Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ba1d79f84e6030c01ede985e813e35a3d180feb">8ba1d79</a></td><td><code>trac 30350: remove the ATLAS package</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69db83912a25f1cfa4341df59b2a5a45bb27a3cb">69db839</a></td><td><code>trac 30350: remove "--with-blas=" option to ./configure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/272424a33ba1a68b221b160ebbbc9c89852aa464">272424a</a></td><td><code>trac 30350: remove remaining bits in build/pkgs/atlas/distros</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e">1fb1fa9</a></td><td><code>Merge #30350</code></td></tr></table>




---

archive/issue_comments_498713.json:
```json
{
    "body": "**Changing commit** from \"[de28c72a9f65ed6681d05d3b9a954bd8f266c9a7](https://github.com/sagemath/sagetrac-mirror/commit/de28c72a9f65ed6681d05d3b9a954bd8f266c9a7)\" to \"[1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e](https://github.com/sagemath/sagetrac-mirror/commit/1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e)\".",
    "created_at": "2021-10-02T19:12:58Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[de28c72a9f65ed6681d05d3b9a954bd8f266c9a7](https://github.com/sagemath/sagetrac-mirror/commit/de28c72a9f65ed6681d05d3b9a954bd8f266c9a7)" to "[1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e](https://github.com/sagemath/sagetrac-mirror/commit/1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e)".



---

archive/issue_comments_498714.json:
```json
{
    "body": "**Changing dependencies** from \"#31409\" to \"#31409, #30350\".",
    "created_at": "2021-10-02T19:13:18Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498714",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#31409" to "#31409, #30350".



---

archive/issue_events_277533.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-02T19:13:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277533"
}
```



---

archive/issue_events_277534.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-02T19:13:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277534"
}
```



---

archive/issue_events_277535.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-10T10:17:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277535"
}
```



---

archive/issue_events_277536.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-10T10:17:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30948#event-277536"
}
```



---

archive/issue_comments_498715.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/build_pkgs__split_out_spkg_liblzma_from_xz](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/build_pkgs__split_out_spkg_liblzma_from_xz)\" to \"[1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e](https://github.com/sagemath/sagetrac-mirror/commit/1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e)\".",
    "created_at": "2021-10-10T10:17:12Z",
    "issue": "https://github.com/sagemath/sage/issues/30948",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30948#issuecomment-498715",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/build_pkgs__split_out_spkg_liblzma_from_xz](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/build_pkgs__split_out_spkg_liblzma_from_xz)" to "[1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e](https://github.com/sagemath/sagetrac-mirror/commit/1fb1fa905fa13ee2d6e247c553ea6aa857fffd3e)".
