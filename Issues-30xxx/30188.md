# Issue 30188: Modify shortest_paths method in boost_graph.pyx to take list of vertices as input

archive/issues_029951.json:
```json
{
    "assignees": [],
    "body": "This ticket aims to modify `shortest_paths` method in `boost_graph.pyx` to take list of vertices as input. \nThis will reduce the current scenario of converting a Sage graph to a Boost graph and then computing shortest paths for each required vertex.\n\nCC:  @dcoudert @slel\n\nKeywords: **gsoc2020**\n\nBranch/Commit: **[97fef26](https://github.com/sagemath/sagetrac-mirror/commit/97fef26ecbd6d0f326f393199e96ab32bd2f73d4)**\n\nReviewer: **Samuel Leli\u00e8vre, David Coudert**\n\nAuthor: **Vipul Gupta**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30188_\n\n",
    "closed_at": "2020-08-30T08:39:06Z",
    "created_at": "2020-07-21T07:59:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Modify shortest_paths method in boost_graph.pyx to take list of vertices as input",
    "type": "issue",
    "updated_at": "2020-08-30T08:39:06Z",
    "url": "https://github.com/sagemath/sage/issues/30188",
    "user": "https://github.com/vipul79321"
}
```
This ticket aims to modify `shortest_paths` method in `boost_graph.pyx` to take list of vertices as input. 
This will reduce the current scenario of converting a Sage graph to a Boost graph and then computing shortest paths for each required vertex.

CC:  @dcoudert @slel

Keywords: **gsoc2020**

Branch/Commit: **[97fef26](https://github.com/sagemath/sagetrac-mirror/commit/97fef26ecbd6d0f326f393199e96ab32bd2f73d4)**

Reviewer: **Samuel Lelièvre, David Coudert**

Author: **Vipul Gupta**

_Issue created by migration from https://trac.sagemath.org/ticket/30188_





---

archive/issue_events_397487.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-07-21T07:59:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397487"
}
```



---

archive/issue_events_397488.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-07-21T07:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397488"
}
```



---

archive/issue_events_397489.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-07-21T07:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397489"
}
```



---

archive/issue_events_397490.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-07-21T07:59:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397490"
}
```



---

archive/issue_comments_481250.json:
```json
{
    "body": "Branch: **[public/graphs/30188_shortest_paths](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30188_shortest_paths)**",
    "created_at": "2020-07-21T13:01:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481250",
    "user": "https://github.com/vipul79321"
}
```

Branch: **[public/graphs/30188_shortest_paths](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30188_shortest_paths)**



---

archive/issue_comments_481251.json:
```json
{
    "body": "Commit: **[467fbc7](https://github.com/sagemath/sagetrac-mirror/commit/467fbc70a08b552b3de33d9065204ee9cbfb02c7)**",
    "created_at": "2020-07-21T13:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481251",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[467fbc7](https://github.com/sagemath/sagetrac-mirror/commit/467fbc70a08b552b3de33d9065204ee9cbfb02c7)**



---

archive/issue_comments_481252.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-21T13:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481252",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2" align="right">Comment 2</div>

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_481253.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc924a3f7348e68f99f9e3e06fac373a8abd70e8\">cc924a3</a></td><td><code>code added</code></td></tr></table>\n",
    "created_at": "2020-07-21T13:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481253",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc924a3f7348e68f99f9e3e06fac373a8abd70e8">cc924a3</a></td><td><code>code added</code></td></tr></table>




---

archive/issue_comments_481254.json:
```json
{
    "body": "Changed commit from **[467fbc7](https://github.com/sagemath/sagetrac-mirror/commit/467fbc70a08b552b3de33d9065204ee9cbfb02c7)** to **[cc924a3](https://github.com/sagemath/sagetrac-mirror/commit/cc924a3f7348e68f99f9e3e06fac373a8abd70e8)**",
    "created_at": "2020-07-21T13:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481254",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[467fbc7](https://github.com/sagemath/sagetrac-mirror/commit/467fbc70a08b552b3de33d9065204ee9cbfb02c7)** to **[cc924a3](https://github.com/sagemath/sagetrac-mirror/commit/cc924a3f7348e68f99f9e3e06fac373a8abd70e8)**



---

archive/issue_comments_481255.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nPlease add your full name in the \"Authors\" field.\n\nPlease set to `needs_review` when ready for review.\n\nUse one more f-string:\n\n```\n-            raise ValueError(\"the starting vertex \" + str(v) + \" is not in \" +\n-                             \"the graph\")\n+            raise ValueError(f\"the starting vertex {v} is not in the graph\")\n```\n\nMaybe wrap long lines, for instance:\n\n```\n-                        raise RuntimeError(\"Dijkstra algorithm does not work with negative weights, use Bellman-Ford instead\")\n+                        raise RuntimeError(\"Dijkstra algorithm does not \"\n+                                           \"work with negative weights, \"\n+                                           \"use Bellman-Ford instead\")\n```\n\nMaybe remove unnecessary parentheses:\n\n```\n-    return (distances, predecessors)\n+    return distances, predecessors\n```",
    "created_at": "2020-07-21T22:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481255",
    "user": "https://github.com/slel"
}
```

<div id="comment:4" align="right">Comment 4</div>

Please add your full name in the "Authors" field.

Please set to `needs_review` when ready for review.

Use one more f-string:

```
-            raise ValueError("the starting vertex " + str(v) + " is not in " +
-                             "the graph")
+            raise ValueError(f"the starting vertex {v} is not in the graph")
```

Maybe wrap long lines, for instance:

```
-                        raise RuntimeError("Dijkstra algorithm does not work with negative weights, use Bellman-Ford instead")
+                        raise RuntimeError("Dijkstra algorithm does not "
+                                           "work with negative weights, "
+                                           "use Bellman-Ford instead")
```

Maybe remove unnecessary parentheses:

```
-    return (distances, predecessors)
+    return distances, predecessors
```



---

archive/issue_comments_481256.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre**",
    "created_at": "2020-07-21T22:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481256",
    "user": "https://github.com/slel"
}
```

Reviewer: **Samuel Lelièvre**



---

archive/issue_comments_481257.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n This ticket aims to modify `shortest_paths` method in `boost_graph.pyx` to take list of vertices as input. \n-This will reduce the current scenario of converting sage graph to boost graph and then computing shortest_paths for each required vertex.\n+This will reduce the current scenario of converting a Sage graph to a Boost graph and then computing shortest paths for each required vertex.\n``````\n",
    "created_at": "2020-07-21T22:57:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481257",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
 This ticket aims to modify `shortest_paths` method in `boost_graph.pyx` to take list of vertices as input. 
-This will reduce the current scenario of converting sage graph to boost graph and then computing shortest_paths for each required vertex.
+This will reduce the current scenario of converting a Sage graph to a Boost graph and then computing shortest paths for each required vertex.
``````




---

archive/issue_comments_481258.json:
```json
{
    "body": "Changed commit from **[cc924a3](https://github.com/sagemath/sagetrac-mirror/commit/cc924a3f7348e68f99f9e3e06fac373a8abd70e8)** to **[0c86a04](https://github.com/sagemath/sagetrac-mirror/commit/0c86a049b96f1ddb4bd7a7897b54f38c93bb1db0)**",
    "created_at": "2020-07-22T15:41:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481258",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[cc924a3](https://github.com/sagemath/sagetrac-mirror/commit/cc924a3f7348e68f99f9e3e06fac373a8abd70e8)** to **[0c86a04](https://github.com/sagemath/sagetrac-mirror/commit/0c86a049b96f1ddb4bd7a7897b54f38c93bb1db0)**



---

archive/issue_comments_481259.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c86a049b96f1ddb4bd7a7897b54f38c93bb1db0\">0c86a04</a></td><td><code>minor review commit</code></td></tr></table>\n",
    "created_at": "2020-07-22T15:41:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481259",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5" align="right">Comment 5</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c86a049b96f1ddb4bd7a7897b54f38c93bb1db0">0c86a04</a></td><td><code>minor review commit</code></td></tr></table>




---

archive/issue_comments_481260.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nReplying to [@slel](#comment%3A4):\n> Please add your full name in the \"Authors\" field.\n> \n> Please set to `needs_review` when ready for review.\n> \n\nCurrently, I am working on documentation. Will update as soon as I will be done.\n\nVipul",
    "created_at": "2020-07-22T15:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481260",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:6" align="right">Comment 6</div>

Replying to [@slel](#comment%3A4):
> Please add your full name in the "Authors" field.
> 
> Please set to `needs_review` when ready for review.
> 

Currently, I am working on documentation. Will update as soon as I will be done.

Vipul



---

archive/issue_comments_481261.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nI have one query regarding the documentation of `shortest_path` method in `boost_graph.pyx`. It mentions that\n\n```\n    Note that, if the graph is undirected, a negative edge automatically creates\n    a negative cycle: for this reason, in this case, Dijkstra algorithm is\n    always better.\n```\n\nI dont understand since there is already negative weight, then why to use dijkstra. And further, in such graphs shortest path computation may not be possible to negative cycle.",
    "created_at": "2020-07-22T15:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481261",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:7" align="right">Comment 7</div>

I have one query regarding the documentation of `shortest_path` method in `boost_graph.pyx`. It mentions that

```
    Note that, if the graph is undirected, a negative edge automatically creates
    a negative cycle: for this reason, in this case, Dijkstra algorithm is
    always better.
```

I dont understand since there is already negative weight, then why to use dijkstra. And further, in such graphs shortest path computation may not be possible to negative cycle.



---

archive/issue_comments_481262.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33e436d58f9c4a2c5345168e188401701d3cdf12\">33e436d</a></td><td><code>documentation added</code></td></tr></table>\n",
    "created_at": "2020-07-22T16:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481262",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8" align="right">Comment 8</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33e436d58f9c4a2c5345168e188401701d3cdf12">33e436d</a></td><td><code>documentation added</code></td></tr></table>




---

archive/issue_comments_481263.json:
```json
{
    "body": "Changed commit from **[0c86a04](https://github.com/sagemath/sagetrac-mirror/commit/0c86a049b96f1ddb4bd7a7897b54f38c93bb1db0)** to **[33e436d](https://github.com/sagemath/sagetrac-mirror/commit/33e436d58f9c4a2c5345168e188401701d3cdf12)**",
    "created_at": "2020-07-22T16:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481263",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0c86a04](https://github.com/sagemath/sagetrac-mirror/commit/0c86a049b96f1ddb4bd7a7897b54f38c93bb1db0)** to **[33e436d](https://github.com/sagemath/sagetrac-mirror/commit/33e436d58f9c4a2c5345168e188401701d3cdf12)**



---

archive/issue_events_397491.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-07-22T16:23:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397491"
}
```



---

archive/issue_comments_481264.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@sagetrac-git](#comment%3A8):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33e436d58f9c4a2c5345168e188401701d3cdf12\">33e436d</a></td><td><code>documentation added</code></td></tr></table>\n\nI have added documentation.\n\nOne thing, I would like to mention is that when `vertext_list` contains only one vertex, I have returned two dicts, instead of two dicts of dict. I have done so to keep uniformity in output from our method and current `shortest_path` method. So that in future, it will be easy for use to replace `shortest_path` method.",
    "created_at": "2020-07-22T16:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481264",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@sagetrac-git](#comment%3A8):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33e436d58f9c4a2c5345168e188401701d3cdf12">33e436d</a></td><td><code>documentation added</code></td></tr></table>

I have added documentation.

One thing, I would like to mention is that when `vertext_list` contains only one vertex, I have returned two dicts, instead of two dicts of dict. I have done so to keep uniformity in output from our method and current `shortest_path` method. So that in future, it will be easy for use to replace `shortest_path` method.



---

archive/issue_comments_481265.json:
```json
{
    "body": "Author: **Vipul Gupta**",
    "created_at": "2020-07-22T16:23:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481265",
    "user": "https://github.com/vipul79321"
}
```

Author: **Vipul Gupta**



---

archive/issue_comments_481266.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nNow after complete review, we just need to expose this method in `shortest_path_all_pairs`, `centrality_closeness` and all such methods in `generic_graph.py`",
    "created_at": "2020-07-22T16:24:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481266",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:10" align="right">Comment 10</div>

Now after complete review, we just need to expose this method in `shortest_path_all_pairs`, `centrality_closeness` and all such methods in `generic_graph.py`



---

archive/issue_comments_481267.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\n* Here you should first check if `vertex_list is None` \n\n```diff\n+    if not isinstance(vertex_list, list):\n+        vertex_list = [vertex_list]\n+\n+    for v in vertex_list:\n+        if v not in g:\n+            raise ValueError(f\"the starting vertex {v} is not in the graph\")\n+\n+    if vertex_list == None:\n+        vertex_list = list(g)\n```\n\n* A list is better here. It's faster to get a value from a list than from a dictionary\n\n```diff\n-    cdef dict int_to_v = dict(enumerate(g))\n+    cdef list int_to_v = list(g)\n```\n\n* Why this comment ?\n\n```diff\n+    # Needed for rational curves.\n```\n\n* define types of variables `distances`, `predecessors`, `pred_v`, etc.\n\n\nWhat I don't like here is that the method returns dict of dicts. A least a matrix would be a better choice. If the graph is large, it's a huge waste of time and space :(",
    "created_at": "2020-07-23T20:18:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481267",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:12" align="right">Comment 12</div>

* Here you should first check if `vertex_list is None` 

```diff
+    if not isinstance(vertex_list, list):
+        vertex_list = [vertex_list]
+
+    for v in vertex_list:
+        if v not in g:
+            raise ValueError(f"the starting vertex {v} is not in the graph")
+
+    if vertex_list == None:
+        vertex_list = list(g)
```

* A list is better here. It's faster to get a value from a list than from a dictionary

```diff
-    cdef dict int_to_v = dict(enumerate(g))
+    cdef list int_to_v = list(g)
```

* Why this comment ?

```diff
+    # Needed for rational curves.
```

* define types of variables `distances`, `predecessors`, `pred_v`, etc.


What I don't like here is that the method returns dict of dicts. A least a matrix would be a better choice. If the graph is large, it's a huge waste of time and space :(



---

archive/issue_comments_481268.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@dcoudert](#comment%3A12):\n\n> What I don't like here is that the method returns dict of dicts. A least a matrix would be a better choice. If the graph is large, it's a huge waste of time and space :(\n\nI was hoping maybe we could return dict instead of dict of dict. And in that dict key values will be vertex in vertex list. And item value will be a list or vector storing distances[v] in order of list(g). Meaning distances[v][i] will return shortest distance between v and list(g)[i].\n\nSimilarly for predecessor.\n\nIs it ok? \n\nP.S.- we can do similar thing with matrix. But i just feel that this will be nice way.",
    "created_at": "2020-07-25T18:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481268",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@dcoudert](#comment%3A12):

> What I don't like here is that the method returns dict of dicts. A least a matrix would be a better choice. If the graph is large, it's a huge waste of time and space :(

I was hoping maybe we could return dict instead of dict of dict. And in that dict key values will be vertex in vertex list. And item value will be a list or vector storing distances[v] in order of list(g). Meaning distances[v][i] will return shortest distance between v and list(g)[i].

Similarly for predecessor.

Is it ok? 

P.S.- we can do similar thing with matrix. But i just feel that this will be nice way.



---

archive/issue_comments_481269.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4011b50cb320068595e06462ddfc933abfcefc5\">f4011b5</a></td><td><code>trac #30188: fix merge conflicts</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a44ccbdfedc00aa8eed1b10a7fb23cfaf0d4231e\">a44ccbd</a></td><td><code>trac #30188: review commit</code></td></tr></table>\n",
    "created_at": "2020-07-26T17:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481269",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4011b50cb320068595e06462ddfc933abfcefc5">f4011b5</a></td><td><code>trac #30188: fix merge conflicts</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a44ccbdfedc00aa8eed1b10a7fb23cfaf0d4231e">a44ccbd</a></td><td><code>trac #30188: review commit</code></td></tr></table>




---

archive/issue_comments_481270.json:
```json
{
    "body": "Changed commit from **[33e436d](https://github.com/sagemath/sagetrac-mirror/commit/33e436d58f9c4a2c5345168e188401701d3cdf12)** to **[a44ccbd](https://github.com/sagemath/sagetrac-mirror/commit/a44ccbdfedc00aa8eed1b10a7fb23cfaf0d4231e)**",
    "created_at": "2020-07-26T17:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481270",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[33e436d](https://github.com/sagemath/sagetrac-mirror/commit/33e436d58f9c4a2c5345168e188401701d3cdf12)** to **[a44ccbd](https://github.com/sagemath/sagetrac-mirror/commit/a44ccbdfedc00aa8eed1b10a7fb23cfaf0d4231e)**



---

archive/issue_comments_481271.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nrebased on last beta and some minor improvements.",
    "created_at": "2020-07-26T17:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481271",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:15" align="right">Comment 15</div>

rebased on last beta and some minor improvements.



---

archive/issue_comments_481272.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ae87450b2709a36a5b8a3b91ee4ef5437f55b31\">8ae8745</a></td><td><code>made list of lists as return type</code></td></tr></table>\n",
    "created_at": "2020-07-28T19:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481272",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16" align="right">Comment 16</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ae87450b2709a36a5b8a3b91ee4ef5437f55b31">8ae8745</a></td><td><code>made list of lists as return type</code></td></tr></table>




---

archive/issue_comments_481273.json:
```json
{
    "body": "Changed commit from **[a44ccbd](https://github.com/sagemath/sagetrac-mirror/commit/a44ccbdfedc00aa8eed1b10a7fb23cfaf0d4231e)** to **[8ae8745](https://github.com/sagemath/sagetrac-mirror/commit/8ae87450b2709a36a5b8a3b91ee4ef5437f55b31)**",
    "created_at": "2020-07-28T19:11:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481273",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[a44ccbd](https://github.com/sagemath/sagetrac-mirror/commit/a44ccbdfedc00aa8eed1b10a7fb23cfaf0d4231e)** to **[8ae8745](https://github.com/sagemath/sagetrac-mirror/commit/8ae87450b2709a36a5b8a3b91ee4ef5437f55b31)**



---

archive/issue_comments_481274.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nReplying to [@sagetrac-git](#comment%3A16):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ae87450b2709a36a5b8a3b91ee4ef5437f55b31\">8ae8745</a></td><td><code>made list of lists as return type</code></td></tr></table>\n\nI have made the return type as list of lists. Now `for i, v in enumerate(vertex_list): distances[i] and predecessors[i] will give us the shortest path information from v`.\n\nAlthough, one thing I would like to mention is following scenario - \n\n```\nCurrent output using list of lists\nsage: G = Graph(5)\nsage: shortest_paths_from_vertices(G,0)\n([[0, +Infinity, +Infinity, +Infinity, +Infinity]],\n [[None, None, None, None, None]])\n\n```\n\n```\nwhen returning dict of dict\nsage: shortest_paths(G,0)\n({0: 0}, {0: None})\n```\n\nClearly, there is a need of extra memory in list of lists in case of disconnected graphs.\n\nOne bug that i encountered is:\n\n```\nsage: G = Graph([ (0,1,2), (1,2,0.7)], weighted = True)\nsage: shortest_paths_from_vertices(G, 0)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-12-1e6b63e11f81> in <module>()\n----> 1 shortest_paths_from_vertices(G, Integer(0))\n\n/home/vipul/sage/local/lib/python3.7/site-packages/sage/graphs/base/boost_graph.pyx in sage.graphs.base.boost_graph.shortest_paths_from_vertices (build/cythonized/sage/graphs/base/boost_graph.cpp:26092)()\n   2101     return LB\n   2102 \n-> 2103 cpdef shortest_paths_from_vertices(g, vertex_list=None, weight_function=None, algorithm=None):\n   2104     r\"\"\"\n   2105     Compute the shortest paths to all vertices from each vertex in\n\n/home/vipul/sage/local/lib/python3.7/site-packages/sage/graphs/base/boost_graph.pyx in sage.graphs.base.boost_graph.shortest_paths_from_vertices (build/cythonized/sage/graphs/base/boost_graph.cpp:25805)()\n   2312         for vert in range(g.num_verts()):\n   2313             if result.distances[vert] != sys.float_info.max:\n-> 2314                 dist_v.append(correct_type(result.distances[vert]))\n   2315                 pred = result.predecessors[vert]\n   2316                 if pred != vert:\n\n/home/vipul/sage/local/lib/python3.7/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__init__ (build/cythonized/sage/rings/integer.c:6091)()\n    684                     mpz_set_pylong(self.value, n)\n    685                 else:\n--> 686                     raise TypeError(\"Cannot convert non-integral float to integer\")\n    687 \n    688             elif isinstance(x, pari_gen):\n\nTypeError: Cannot convert non-integral float to integer\n\n```\n\nI guess, we have to remove code of correct_type.\n\nBest \nVipul",
    "created_at": "2020-07-28T19:29:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481274",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:17" align="right">Comment 17</div>

Replying to [@sagetrac-git](#comment%3A16):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ae87450b2709a36a5b8a3b91ee4ef5437f55b31">8ae8745</a></td><td><code>made list of lists as return type</code></td></tr></table>

I have made the return type as list of lists. Now `for i, v in enumerate(vertex_list): distances[i] and predecessors[i] will give us the shortest path information from v`.

Although, one thing I would like to mention is following scenario - 

```
Current output using list of lists
sage: G = Graph(5)
sage: shortest_paths_from_vertices(G,0)
([[0, +Infinity, +Infinity, +Infinity, +Infinity]],
 [[None, None, None, None, None]])

```

```
when returning dict of dict
sage: shortest_paths(G,0)
({0: 0}, {0: None})
```

Clearly, there is a need of extra memory in list of lists in case of disconnected graphs.

One bug that i encountered is:

```
sage: G = Graph([ (0,1,2), (1,2,0.7)], weighted = True)
sage: shortest_paths_from_vertices(G, 0)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-12-1e6b63e11f81> in <module>()
----> 1 shortest_paths_from_vertices(G, Integer(0))

/home/vipul/sage/local/lib/python3.7/site-packages/sage/graphs/base/boost_graph.pyx in sage.graphs.base.boost_graph.shortest_paths_from_vertices (build/cythonized/sage/graphs/base/boost_graph.cpp:26092)()
   2101     return LB
   2102 
-> 2103 cpdef shortest_paths_from_vertices(g, vertex_list=None, weight_function=None, algorithm=None):
   2104     r"""
   2105     Compute the shortest paths to all vertices from each vertex in

/home/vipul/sage/local/lib/python3.7/site-packages/sage/graphs/base/boost_graph.pyx in sage.graphs.base.boost_graph.shortest_paths_from_vertices (build/cythonized/sage/graphs/base/boost_graph.cpp:25805)()
   2312         for vert in range(g.num_verts()):
   2313             if result.distances[vert] != sys.float_info.max:
-> 2314                 dist_v.append(correct_type(result.distances[vert]))
   2315                 pred = result.predecessors[vert]
   2316                 if pred != vert:

/home/vipul/sage/local/lib/python3.7/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__init__ (build/cythonized/sage/rings/integer.c:6091)()
    684                     mpz_set_pylong(self.value, n)
    685                 else:
--> 686                     raise TypeError("Cannot convert non-integral float to integer")
    687 
    688             elif isinstance(x, pari_gen):

TypeError: Cannot convert non-integral float to integer

```

I guess, we have to remove code of correct_type.

Best 
Vipul



---

archive/issue_comments_481275.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c309ab42d962c6ff7017aa4533c97d6f765a3236\">c309ab4</a></td><td><code>minor mistake</code></td></tr></table>\n",
    "created_at": "2020-07-28T19:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481275",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c309ab42d962c6ff7017aa4533c97d6f765a3236">c309ab4</a></td><td><code>minor mistake</code></td></tr></table>




---

archive/issue_comments_481276.json:
```json
{
    "body": "Changed commit from **[8ae8745](https://github.com/sagemath/sagetrac-mirror/commit/8ae87450b2709a36a5b8a3b91ee4ef5437f55b31)** to **[c309ab4](https://github.com/sagemath/sagetrac-mirror/commit/c309ab42d962c6ff7017aa4533c97d6f765a3236)**",
    "created_at": "2020-07-28T19:32:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481276",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[8ae8745](https://github.com/sagemath/sagetrac-mirror/commit/8ae87450b2709a36a5b8a3b91ee4ef5437f55b31)** to **[c309ab4](https://github.com/sagemath/sagetrac-mirror/commit/c309ab42d962c6ff7017aa4533c97d6f765a3236)**



---

archive/issue_comments_481277.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@sagetrac-git](#comment%3A18):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c309ab42d962c6ff7017aa4533c97d6f765a3236\">c309ab4</a></td><td><code>minor mistake</code></td></tr></table>\n\nFixed a error, which i mistakenly introduced. \n\nI havent updated documentation yet. I will update it, when we finalize the changes",
    "created_at": "2020-07-28T19:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481277",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@sagetrac-git](#comment%3A18):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c309ab42d962c6ff7017aa4533c97d6f765a3236">c309ab4</a></td><td><code>minor mistake</code></td></tr></table>

Fixed a error, which i mistakenly introduced. 

I havent updated documentation yet. I will update it, when we finalize the changes



---

archive/issue_comments_481278.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nDeciding of the correct type to use is not easy. May be it's easier to not try to correct the type, no ?",
    "created_at": "2020-07-28T20:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481278",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:20" align="right">Comment 20</div>

Deciding of the correct type to use is not easy. May be it's easier to not try to correct the type, no ?



---

archive/issue_comments_481279.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nReplying to [@dcoudert](#comment%3A20):\n> Deciding of the correct type to use is not easy. May be it's easier to not try to correct the type, no ?\n\nYeah, i will remove that part.",
    "created_at": "2020-07-28T21:52:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481279",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:21" align="right">Comment 21</div>

Replying to [@dcoudert](#comment%3A20):
> Deciding of the correct type to use is not easy. May be it's easier to not try to correct the type, no ?

Yeah, i will remove that part.



---

archive/issue_comments_481280.json:
```json
{
    "body": "Changed commit from **[c309ab4](https://github.com/sagemath/sagetrac-mirror/commit/c309ab42d962c6ff7017aa4533c97d6f765a3236)** to **[10143a3](https://github.com/sagemath/sagetrac-mirror/commit/10143a3fe946e9e47c7023d842bb9ced936ee758)**",
    "created_at": "2020-07-29T17:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481280",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c309ab4](https://github.com/sagemath/sagetrac-mirror/commit/c309ab42d962c6ff7017aa4533c97d6f765a3236)** to **[10143a3](https://github.com/sagemath/sagetrac-mirror/commit/10143a3fe946e9e47c7023d842bb9ced936ee758)**



---

archive/issue_comments_481281.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10143a3fe946e9e47c7023d842bb9ced936ee758\">10143a3</a></td><td><code>correct type code removed</code></td></tr></table>\n",
    "created_at": "2020-07-29T17:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481281",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10143a3fe946e9e47c7023d842bb9ced936ee758">10143a3</a></td><td><code>correct type code removed</code></td></tr></table>




---

archive/issue_comments_481282.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@sagetrac-git](#comment%3A22):\n> Branch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10143a3fe946e9e47c7023d842bb9ced936ee758\">10143a3</a></td><td><code>correct type code removed</code></td></tr></table>\n\nCorrect type code removed.\nIf we are on board on current return method, I will update the documentation and expose it in `generic_graph.py`",
    "created_at": "2020-07-29T17:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481282",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@sagetrac-git](#comment%3A22):
> Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10143a3fe946e9e47c7023d842bb9ced936ee758">10143a3</a></td><td><code>correct type code removed</code></td></tr></table>

Correct type code removed.
If we are on board on current return method, I will update the documentation and expose it in `generic_graph.py`



---

archive/issue_comments_481283.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nHonestly, I'm not completely sure of what the method does and it's objective. Can you clarify how you plan to use it and where. I'm not sure it does exactly what is needed.",
    "created_at": "2020-07-29T17:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481283",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:24" align="right">Comment 24</div>

Honestly, I'm not completely sure of what the method does and it's objective. Can you clarify how you plan to use it and where. I'm not sure it does exactly what is needed.



---

archive/issue_comments_481284.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nGoal of this ticket is avoid format conversion (from sage graph to boost graph) for each vertex during `shortest_path_all_pairs` computation or other such method in `generic_graph.py`.  For e.g, see the following code - \n\n```\n    from sage.graphs.base.boost_graph import shortest_paths\n    dist = dict()\n    pred = dict()\n    for u in self:\n        dist[u], pred[u] = shortest_paths(self, u, weight_function, algorithm)\n    return dist, pred\n```\n\nHere `shortest_paths` of `boost_graph.pyx` is called for each vertex and hence format conversion time for each vertex.\n\nThis ticket aims to implement a method in `boost_graph.pyx` and take list of vertices as input and return `shortest_path` information for each vertex. Thus avoid conversion overhead.\n\nOur current method `shortest_path_from_vertices` in `boost_graph.pyx` does that.\n\nI hope it clear your doubt about purpose of the ticket :)\n\nVipul",
    "created_at": "2020-07-29T17:41:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481284",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:25" align="right">Comment 25</div>

Goal of this ticket is avoid format conversion (from sage graph to boost graph) for each vertex during `shortest_path_all_pairs` computation or other such method in `generic_graph.py`.  For e.g, see the following code - 

```
    from sage.graphs.base.boost_graph import shortest_paths
    dist = dict()
    pred = dict()
    for u in self:
        dist[u], pred[u] = shortest_paths(self, u, weight_function, algorithm)
    return dist, pred
```

Here `shortest_paths` of `boost_graph.pyx` is called for each vertex and hence format conversion time for each vertex.

This ticket aims to implement a method in `boost_graph.pyx` and take list of vertices as input and return `shortest_path` information for each vertex. Thus avoid conversion overhead.

Our current method `shortest_path_from_vertices` in `boost_graph.pyx` does that.

I hope it clear your doubt about purpose of the ticket :)

Vipul



---

archive/issue_comments_481285.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nmy main concern is that this method returns lists of distances. Outside this method, the chosen order of the vertices is not known. So I don't know how this can be used.",
    "created_at": "2020-07-30T09:37:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481285",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:26" align="right">Comment 26</div>

my main concern is that this method returns lists of distances. Outside this method, the chosen order of the vertices is not known. So I don't know how this can be used.



---

archive/issue_comments_481286.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@dcoudert](#comment%3A26):\n> my main concern is that this method returns lists of distances. Outside this method, the chosen order of the vertices is not known. So I don't know how this can be used.\n\nI think we can do it as follows in methods calling this method for retreiving path information -\n\n```\ndistances , predecessors = shortest_path_from_vertices(G, vertex_list)\nfor i, v in enumerate(vertex_list):\n    dist_v = distances[i]\n    pred_v = predecessors[i]\n    \n    for id, vertex in enumerate(G):\n       distance of vertex from v  = dist_v[id]\n       predecessor of vertex in shortest_path from v = pred_v[id]\n```\n\nWill it work?",
    "created_at": "2020-07-30T11:28:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481286",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@dcoudert](#comment%3A26):
> my main concern is that this method returns lists of distances. Outside this method, the chosen order of the vertices is not known. So I don't know how this can be used.

I think we can do it as follows in methods calling this method for retreiving path information -

```
distances , predecessors = shortest_path_from_vertices(G, vertex_list)
for i, v in enumerate(vertex_list):
    dist_v = distances[i]
    pred_v = predecessors[i]
    
    for id, vertex in enumerate(G):
       distance of vertex from v  = dist_v[id]
       predecessor of vertex in shortest_path from v = pred_v[id]
```

Will it work?



---

archive/issue_comments_481287.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nI don't think it's a safe usage, but I may be wrong.",
    "created_at": "2020-07-31T09:43:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481287",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:28" align="right">Comment 28</div>

I don't think it's a safe usage, but I may be wrong.



---

archive/issue_comments_481288.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nReplying to [@dcoudert](#comment%3A28):\n> I don't think it's a safe usage, but I may be wrong.\n\nIf that's the case then, we can return`list of dicts`, although it will be slow, but it will be an overall improvement on current scenario. \n\nI will add a note about in meta-ticket.",
    "created_at": "2020-07-31T18:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481288",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:29" align="right">Comment 29</div>

Replying to [@dcoudert](#comment%3A28):
> I don't think it's a safe usage, but I may be wrong.

If that's the case then, we can return`list of dicts`, although it will be slow, but it will be an overall improvement on current scenario. 

I will add a note about in meta-ticket.



---

archive/issue_comments_481289.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\n2 ideas to consider:\n- add input parameter `order` or `int_to_vertex` to specify the order of the vertices in the list\n- have 2 possible returned types: dict of lists and dict of dicts. The decision could be either when the given ordering is `None`, or with an extra input parameter.",
    "created_at": "2020-08-01T09:38:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481289",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:30" align="right">Comment 30</div>

2 ideas to consider:
- add input parameter `order` or `int_to_vertex` to specify the order of the vertices in the list
- have 2 possible returned types: dict of lists and dict of dicts. The decision could be either when the given ordering is `None`, or with an extra input parameter.



---

archive/issue_comments_481290.json:
```json
{
    "body": "Changed commit from **[10143a3](https://github.com/sagemath/sagetrac-mirror/commit/10143a3fe946e9e47c7023d842bb9ced936ee758)** to **[c5bfbfa](https://github.com/sagemath/sagetrac-mirror/commit/c5bfbfa6559f55e329ba43f4e1de09229aa59397)**",
    "created_at": "2020-08-20T14:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481290",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[10143a3](https://github.com/sagemath/sagetrac-mirror/commit/10143a3fe946e9e47c7023d842bb9ced936ee758)** to **[c5bfbfa](https://github.com/sagemath/sagetrac-mirror/commit/c5bfbfa6559f55e329ba43f4e1de09229aa59397)**



---

archive/issue_comments_481291.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/466e7fb9c568aaa01d551bd4811ccecb0581eab4\">466e7fb</a></td><td><code>updated</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/243a0845540877ce3b9023f82bdbba76b90a13b9\">243a084</a></td><td><code>documentation remaining</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ee8ea25217ca6b38e97f612d5cfc21743822e94\">9ee8ea2</a></td><td><code>introduced a extra parameter order</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2c27cb71aef080b571df934e06549959006b5494\">2c27cb7</a></td><td><code>correct type method re-introduced for sake of doc-test. Will modify after finailizing</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5bfbfa6559f55e329ba43f4e1de09229aa59397\">c5bfbfa</a></td><td><code>Merge branch 'develop' into temp</code></td></tr></table>\n",
    "created_at": "2020-08-20T14:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481291",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31" align="right">Comment 31</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/466e7fb9c568aaa01d551bd4811ccecb0581eab4">466e7fb</a></td><td><code>updated</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/243a0845540877ce3b9023f82bdbba76b90a13b9">243a084</a></td><td><code>documentation remaining</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ee8ea25217ca6b38e97f612d5cfc21743822e94">9ee8ea2</a></td><td><code>introduced a extra parameter order</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2c27cb71aef080b571df934e06549959006b5494">2c27cb7</a></td><td><code>correct type method re-introduced for sake of doc-test. Will modify after finailizing</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5bfbfa6559f55e329ba43f4e1de09229aa59397">c5bfbfa</a></td><td><code>Merge branch 'develop' into temp</code></td></tr></table>




---

archive/issue_comments_481292.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nWe are almost done\n\n- to avoid potential issues when building the doc, avoid `:` in\n\n```\n+    The input graph can be weighted: if the algorithm is Dijkstra, no negative\n+    weights are allowed, while if the algorithm is Bellman-Ford, negative\n+    weights are allowed, but there must be no negative cycle (otherwise, the\n+    shortest paths might not exist).\n+\n+    However, Dijkstra algorithm is more efficient: for this reason, we suggest\n+    to use Bellman-Ford only if necessary (which is also the default option).\n```\n- in the inout blocks, when the sentences are short, the convention is to not end with `.`, e.g.,\n\n```diff\n-    - ``order`` -- list (default: ``None``); order of vertices of `g`.\n+    - ``order`` -- list (default: ``None``); order of vertices of `g`\n```\n  of course, if you have a paragraph with several sentences, a final `.` is needed\n- again avoid `:` in ` Two possible outputs:`. You can write for instead `The type of output depends on the input. More precisely,` \n\n- this is simpler and more efficient\n\n```diff\n-           for vertex in g:\n-                if vertex not in order:\n-                    raise ValueError(\"Given ordering is not valid\")\n+            if any(v not in g for v in order:\n+                raise ValueError(\"Given ordering is not valid\")\n```\n  indeed, since `order` is a list, the test `vertex not in order` has time complexity in `O(n)`, while testing `v not in g` takes constant time (I hope)",
    "created_at": "2020-08-23T17:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481292",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:32" align="right">Comment 32</div>

We are almost done

- to avoid potential issues when building the doc, avoid `:` in

```
+    The input graph can be weighted: if the algorithm is Dijkstra, no negative
+    weights are allowed, while if the algorithm is Bellman-Ford, negative
+    weights are allowed, but there must be no negative cycle (otherwise, the
+    shortest paths might not exist).
+
+    However, Dijkstra algorithm is more efficient: for this reason, we suggest
+    to use Bellman-Ford only if necessary (which is also the default option).
```
- in the inout blocks, when the sentences are short, the convention is to not end with `.`, e.g.,

```diff
-    - ``order`` -- list (default: ``None``); order of vertices of `g`.
+    - ``order`` -- list (default: ``None``); order of vertices of `g`
```
  of course, if you have a paragraph with several sentences, a final `.` is needed
- again avoid `:` in ` Two possible outputs:`. You can write for instead `The type of output depends on the input. More precisely,` 

- this is simpler and more efficient

```diff
-           for vertex in g:
-                if vertex not in order:
-                    raise ValueError("Given ordering is not valid")
+            if any(v not in g for v in order:
+                raise ValueError("Given ordering is not valid")
```
  indeed, since `order` is a list, the test `vertex not in order` has time complexity in `O(n)`, while testing `v not in g` takes constant time (I hope)



---

archive/issue_comments_481293.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad7dc7d907fd362fc14aed22103f5c038401e814\">ad7dc7d</a></td><td><code>review commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b345479b6c7a78822b814800359b67d97d2e131b\">b345479</a></td><td><code>fixed merge conflict</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97fef26ecbd6d0f326f393199e96ab32bd2f73d4\">97fef26</a></td><td><code>minor correction</code></td></tr></table>\n",
    "created_at": "2020-08-24T09:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481293",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad7dc7d907fd362fc14aed22103f5c038401e814">ad7dc7d</a></td><td><code>review commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b345479b6c7a78822b814800359b67d97d2e131b">b345479</a></td><td><code>fixed merge conflict</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97fef26ecbd6d0f326f393199e96ab32bd2f73d4">97fef26</a></td><td><code>minor correction</code></td></tr></table>




---

archive/issue_comments_481294.json:
```json
{
    "body": "Changed commit from **[c5bfbfa](https://github.com/sagemath/sagetrac-mirror/commit/c5bfbfa6559f55e329ba43f4e1de09229aa59397)** to **[97fef26](https://github.com/sagemath/sagetrac-mirror/commit/97fef26ecbd6d0f326f393199e96ab32bd2f73d4)**",
    "created_at": "2020-08-24T09:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481294",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c5bfbfa](https://github.com/sagemath/sagetrac-mirror/commit/c5bfbfa6559f55e329ba43f4e1de09229aa59397)** to **[97fef26](https://github.com/sagemath/sagetrac-mirror/commit/97fef26ecbd6d0f326f393199e96ab32bd2f73d4)**



---

archive/issue_comments_481295.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@dcoudert](#comment%3A32):\n\n> - this is simpler and more efficient\n> \n> ```diff\n> -           for vertex in g:\n> -                if vertex not in order:\n> -                    raise ValueError(\"Given ordering is not valid\")\n> +            if any(v not in g for v in order:\n> +                raise ValueError(\"Given ordering is not valid\")\n> ```\n>   indeed, since `order` is a list, the test `vertex not in order` has time complexity in `O(n)`, while testing `v not in g` takes constant time (I hope)\n> \n\nTried this \n\n```diff\n +            if any(v not in g for v in order:\n +                raise ValueError(\"Given ordering is not valid\")\n```\n\nbut it gave the following error `closures inside cpdef functions not yet supported`.",
    "created_at": "2020-08-24T09:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481295",
    "user": "https://github.com/vipul79321"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@dcoudert](#comment%3A32):

> - this is simpler and more efficient
> 
> ```diff
> -           for vertex in g:
> -                if vertex not in order:
> -                    raise ValueError("Given ordering is not valid")
> +            if any(v not in g for v in order:
> +                raise ValueError("Given ordering is not valid")
> ```
>   indeed, since `order` is a list, the test `vertex not in order` has time complexity in `O(n)`, while testing `v not in g` takes constant time (I hope)
> 

Tried this 

```diff
 +            if any(v not in g for v in order:
 +                raise ValueError("Given ordering is not valid")
```

but it gave the following error `closures inside cpdef functions not yet supported`.



---

archive/issue_comments_481296.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nLGTM.",
    "created_at": "2020-08-24T11:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481296",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:35" align="right">Comment 35</div>

LGTM.



---

archive/issue_comments_481297.json:
```json
{
    "body": "Changed reviewer from **Samuel Leli\u00e8vre** to **Samuel Leli\u00e8vre, David Coudert**",
    "created_at": "2020-08-24T11:16:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481297",
    "user": "https://github.com/dcoudert"
}
```

Changed reviewer from **Samuel Lelièvre** to **Samuel Lelièvre, David Coudert**



---

archive/issue_events_397492.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-24T11:16:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397492"
}
```



---

archive/issue_events_397493.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-24T11:16:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397493"
}
```



---

archive/issue_events_397494.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-30T08:39:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397494"
}
```



---

archive/issue_events_397495.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "c549fc21557a828d847693558d6dee3a8fe624a4",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-30T08:39:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30188#event-397495"
}
```



---

archive/issue_comments_481298.json:
```json
{
    "body": "Changed branch from **[public/graphs/30188_shortest_paths](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30188_shortest_paths)** to **[97fef26](https://github.com/sagemath/sagetrac-mirror/commit/97fef26ecbd6d0f326f393199e96ab32bd2f73d4)**",
    "created_at": "2020-08-30T08:39:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30188",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30188#issuecomment-481298",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/graphs/30188_shortest_paths](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30188_shortest_paths)** to **[97fef26](https://github.com/sagemath/sagetrac-mirror/commit/97fef26ecbd6d0f326f393199e96ab32bd2f73d4)**
