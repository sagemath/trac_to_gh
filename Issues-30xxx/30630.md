# Issue 30630: findstat error handling

archive/issues_030393.json:
```json
{
    "assignees": [],
    "body": "Raise appropriate errors when there are problems in the communication with findstat.org.\n\nMoreover, add support for the new findstat collection \"finite lattices\".\n\nFinally, we fix some pyflakes issues.\n\nKeywords: **findstat**\n\nBranch/Commit: **[`3f89b5b`](https://github.com/sagemath/sagetrac-mirror/commit/3f89b5b6ca0e3fe607ca1dc6028c9b137777e006)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\nAuthor: **Martin Rubey**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30630_\n\n",
    "closed_at": "2020-11-07T16:22:23Z",
    "created_at": "2020-09-22T02:37:17Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "findstat error handling",
    "type": "issue",
    "updated_at": "2020-11-07T16:22:23Z",
    "url": "https://github.com/sagemath/sage/issues/30630",
    "user": "https://github.com/mantepse"
}
```
Raise appropriate errors when there are problems in the communication with findstat.org.

Moreover, add support for the new findstat collection "finite lattices".

Finally, we fix some pyflakes issues.

Keywords: **findstat**

Branch/Commit: **[`3f89b5b`](https://github.com/sagemath/sagetrac-mirror/commit/3f89b5b6ca0e3fe607ca1dc6028c9b137777e006)**

Reviewer: **Sébastien Labbé**

Author: **Martin Rubey**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/30630_





---

archive/issue_events_424356.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2020-09-22T02:37:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424356"
}
```



---

archive/issue_events_424357.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2020-09-22T02:37:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424357"
}
```



---

archive/issue_comments_488785.json:
```json
{
    "body": "Branch: **[u/mantepse/findstat_error_handling](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/findstat_error_handling)**",
    "created_at": "2020-09-22T02:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488785",
    "user": "https://github.com/mantepse"
}
```

Branch: **[u/mantepse/findstat_error_handling](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/findstat_error_handling)**



---

archive/issue_comments_488786.json:
```json
{
    "body": "Commit: **[`6d311b2`](https://github.com/sagemath/sagetrac-mirror/commit/6d311b2c6c988b1f258d6ac5c080231280c47ae9)**",
    "created_at": "2020-09-22T03:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488786",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`6d311b2`](https://github.com/sagemath/sagetrac-mirror/commit/6d311b2c6c988b1f258d6ac5c080231280c47ae9)**



---

archive/issue_comments_488787.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d311b2c6c988b1f258d6ac5c080231280c47ae9\"><code>6d311b2</code></a></td><td><code>add doctest</code></td></tr></table>\n",
    "created_at": "2020-09-22T03:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488787",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d311b2c6c988b1f258d6ac5c080231280c47ae9"><code>6d311b2</code></a></td><td><code>add doctest</code></td></tr></table>




---

archive/issue_events_424358.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2020-09-22T07:34:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424358"
}
```



---

archive/issue_comments_488788.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+Raise an appropriate error when findstat.org is down.\n``````\n",
    "created_at": "2020-09-22T07:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488788",
    "user": "https://github.com/mantepse"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+Raise an appropriate error when findstat.org is down.
``````




---

archive/issue_events_424359.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2020-09-22T07:34:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424359"
}
```



---

archive/issue_comments_488789.json:
```json
{
    "body": "Changed keywords from none to **findstat**",
    "created_at": "2020-09-22T07:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488789",
    "user": "https://github.com/mantepse"
}
```

Changed keywords from none to **findstat**



---

archive/issue_events_424360.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2020-09-22T07:34:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424360"
}
```



---

archive/issue_events_424361.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2020-09-22T07:34:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424361"
}
```



---

archive/issue_comments_488790.json:
```json
{
    "body": "Author: **Martin Rubey**",
    "created_at": "2020-09-22T07:34:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488790",
    "user": "https://github.com/mantepse"
}
```

Author: **Martin Rubey**



---

archive/issue_comments_488791.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nUse an url at `example.com` so nobody can play a trick? Check if that works.\n\n```\n-        sage: _get_json(\"https://nonexistingfindstaturl.org\")\n+        sage: _get_json(\"https://not-findstat.example.com\")\n         Traceback (most recent call last):\n         ...\n-        ConnectionError: HTTPSConnectionPool(host='nonexistingfindstaturl.org', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('...Failed to establish a new connection: [Errno -2] Name or service not known'))\n+        ConnectionError: HTTPSConnectionPool(host='not-findstat.example.com', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('...Failed to establish a new connection: [Errno -2] Name or service not known'))\n```\n\nDon't forget to set to `needs_review` when ready.",
    "created_at": "2020-09-24T02:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488791",
    "user": "https://github.com/slel"
}
```

<div id="comment:4" align="right">comment:4</div>

Use an url at `example.com` so nobody can play a trick? Check if that works.

```
-        sage: _get_json("https://nonexistingfindstaturl.org")
+        sage: _get_json("https://not-findstat.example.com")
         Traceback (most recent call last):
         ...
-        ConnectionError: HTTPSConnectionPool(host='nonexistingfindstaturl.org', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('...Failed to establish a new connection: [Errno -2] Name or service not known'))
+        ConnectionError: HTTPSConnectionPool(host='not-findstat.example.com', port=443): Max retries exceeded with url: / (Caused by NewConnectionError('...Failed to establish a new connection: [Errno -2] Name or service not known'))
```

Don't forget to set to `needs_review` when ready.



---

archive/issue_comments_488792.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ab688cc7b9705e12fe203ffd25f4d71fae233e8\"><code>8ab688c</code></a></td><td><code>better error handling and doctest</code></td></tr></table>\n",
    "created_at": "2020-09-24T08:33:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488792",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ab688cc7b9705e12fe203ffd25f4d71fae233e8"><code>8ab688c</code></a></td><td><code>better error handling and doctest</code></td></tr></table>




---

archive/issue_comments_488793.json:
```json
{
    "body": "Changed commit from **[`6d311b2`](https://github.com/sagemath/sagetrac-mirror/commit/6d311b2c6c988b1f258d6ac5c080231280c47ae9)** to **[`8ab688c`](https://github.com/sagemath/sagetrac-mirror/commit/8ab688cc7b9705e12fe203ffd25f4d71fae233e8)**",
    "created_at": "2020-09-24T08:33:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488793",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6d311b2`](https://github.com/sagemath/sagetrac-mirror/commit/6d311b2c6c988b1f258d6ac5c080231280c47ae9)** to **[`8ab688c`](https://github.com/sagemath/sagetrac-mirror/commit/8ab688cc7b9705e12fe203ffd25f4d71fae233e8)**



---

archive/issue_comments_488794.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIt turns out that testing what I really want to test is tricky:\n\n* I originally wanted to test that an error is raised when findstat is down.\n\n* using `badurl.example.com` or the like does not test this, because the domain does not exist.  In this case `request` also throws nested errors, which are hard to catch.\n\nTherefore, I test something else, which makes more sense to test anyway.",
    "created_at": "2020-09-24T08:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488794",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:6" align="right">comment:6</div>

It turns out that testing what I really want to test is tricky:

* I originally wanted to test that an error is raised when findstat is down.

* using `badurl.example.com` or the like does not test this, because the domain does not exist.  In this case `request` also throws nested errors, which are hard to catch.

Therefore, I test something else, which makes more sense to test anyway.



---

archive/issue_events_424362.json:
```json
{
    "actor": "https://github.com/mantepse",
    "created_at": "2020-09-24T08:39:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424362"
}
```



---

archive/issue_comments_488795.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12f0339fccc666adf6b41632a15f5fc1bd998367\"><code>12f0339</code></a></td><td><code>error handling also for post requests</code></td></tr></table>\n",
    "created_at": "2020-09-26T10:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12f0339fccc666adf6b41632a15f5fc1bd998367"><code>12f0339</code></a></td><td><code>error handling also for post requests</code></td></tr></table>




---

archive/issue_comments_488796.json:
```json
{
    "body": "Changed commit from **[`8ab688c`](https://github.com/sagemath/sagetrac-mirror/commit/8ab688cc7b9705e12fe203ffd25f4d71fae233e8)** to **[`12f0339`](https://github.com/sagemath/sagetrac-mirror/commit/12f0339fccc666adf6b41632a15f5fc1bd998367)**",
    "created_at": "2020-09-26T10:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488796",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8ab688c`](https://github.com/sagemath/sagetrac-mirror/commit/8ab688cc7b9705e12fe203ffd25f4d71fae233e8)** to **[`12f0339`](https://github.com/sagemath/sagetrac-mirror/commit/12f0339fccc666adf6b41632a15f5fc1bd998367)**



---

archive/issue_comments_488797.json:
```json
{
    "body": "Changed commit from **[`12f0339`](https://github.com/sagemath/sagetrac-mirror/commit/12f0339fccc666adf6b41632a15f5fc1bd998367)** to **[`a26e753`](https://github.com/sagemath/sagetrac-mirror/commit/a26e753b94ff0f1019225b10fe3a24b63ddeb08e)**",
    "created_at": "2020-09-27T16:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488797",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`12f0339`](https://github.com/sagemath/sagetrac-mirror/commit/12f0339fccc666adf6b41632a15f5fc1bd998367)** to **[`a26e753`](https://github.com/sagemath/sagetrac-mirror/commit/a26e753b94ff0f1019225b10fe3a24b63ddeb08e)**



---

archive/issue_comments_488798.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a26e753b94ff0f1019225b10fe3a24b63ddeb08e\"><code>a26e753</code></a></td><td><code>reenable support for unsupported collections, remove obsolete code</code></td></tr></table>\n",
    "created_at": "2020-09-27T16:23:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488798",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a26e753b94ff0f1019225b10fe3a24b63ddeb08e"><code>a26e753</code></a></td><td><code>reenable support for unsupported collections, remove obsolete code</code></td></tr></table>




---

archive/issue_comments_488799.json:
```json
{
    "body": "Changed commit from **[`a26e753`](https://github.com/sagemath/sagetrac-mirror/commit/a26e753b94ff0f1019225b10fe3a24b63ddeb08e)** to **[`27476c5`](https://github.com/sagemath/sagetrac-mirror/commit/27476c54e24b974027cc85c2325a0ebc1d6506bb)**",
    "created_at": "2020-09-27T18:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488799",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a26e753`](https://github.com/sagemath/sagetrac-mirror/commit/a26e753b94ff0f1019225b10fe3a24b63ddeb08e)** to **[`27476c5`](https://github.com/sagemath/sagetrac-mirror/commit/27476c54e24b974027cc85c2325a0ebc1d6506bb)**



---

archive/issue_comments_488800.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27476c54e24b974027cc85c2325a0ebc1d6506bb\"><code>27476c5</code></a></td><td><code>add lattices to supported collections</code></td></tr></table>\n",
    "created_at": "2020-09-27T18:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488800",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27476c54e24b974027cc85c2325a0ebc1d6506bb"><code>27476c5</code></a></td><td><code>add lattices to supported collections</code></td></tr></table>




---

archive/issue_comments_488801.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f89b5b6ca0e3fe607ca1dc6028c9b137777e006\"><code>3f89b5b</code></a></td><td><code>fix doctests, simplify iterator, fix missing import</code></td></tr></table>\n",
    "created_at": "2020-09-28T10:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488801",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f89b5b6ca0e3fe607ca1dc6028c9b137777e006"><code>3f89b5b</code></a></td><td><code>fix doctests, simplify iterator, fix missing import</code></td></tr></table>




---

archive/issue_comments_488802.json:
```json
{
    "body": "Changed commit from **[`27476c5`](https://github.com/sagemath/sagetrac-mirror/commit/27476c54e24b974027cc85c2325a0ebc1d6506bb)** to **[`3f89b5b`](https://github.com/sagemath/sagetrac-mirror/commit/3f89b5b6ca0e3fe607ca1dc6028c9b137777e006)**",
    "created_at": "2020-09-28T10:06:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488802",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`27476c5`](https://github.com/sagemath/sagetrac-mirror/commit/27476c54e24b974027cc85c2325a0ebc1d6506bb)** to **[`3f89b5b`](https://github.com/sagemath/sagetrac-mirror/commit/3f89b5b6ca0e3fe607ca1dc6028c9b137777e006)**



---

archive/issue_comments_488803.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCan you please modify the ticket description so that you see that the support for new collections is added.",
    "created_at": "2020-10-08T11:30:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488803",
    "user": "https://github.com/kliem"
}
```

<div id="comment:11" align="right">comment:11</div>

Can you please modify the ticket description so that you see that the support for new collections is added.



---

archive/issue_comments_488804.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,5 @@\n-Raise an appropriate error when findstat.org is down.\n+Raise appropriate errors when there are problems in the communication with findstat.org.\n+\n+Moreover, add support for the new findstat collection \"finite lattices\".\n+\n+Finally, we fix some pyflakes issues.\n``````\n",
    "created_at": "2020-10-08T13:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488804",
    "user": "https://github.com/mantepse"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,5 @@
-Raise an appropriate error when findstat.org is down.
+Raise appropriate errors when there are problems in the communication with findstat.org.
+
+Moreover, add support for the new findstat collection "finite lattices".
+
+Finally, we fix some pyflakes issues.
``````




---

archive/issue_comments_488805.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nWhy are you turning the `JSONDecodeError` into a `ValueError`?",
    "created_at": "2020-10-10T19:49:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488805",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">comment:13</div>

Why are you turning the `JSONDecodeError` into a `ValueError`?



---

archive/issue_comments_488806.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nBecause the reason for the error is (most likely) an inappropriate value `response.text`, due to (most likely) a bad url or a new but on the findstat server.  I felt that a `ValueError` would then be more correct.\n\nFor example, upon\n\n```\nsage: findstat()\nThe Combinatorial Statistic Finder (https://www.findstat.org/)\nsage: sage.databases.findstat._get_json(\"https://www.findstat.org/\")\n```\nif I only threw the `JSONDecodeError`, the message would simply be\n\n```\nJSONDecodeError: Expecting value: line 1 column 1 (char 0)\n```\nwhich wouldn't be helpful at all.\n\nThus I want to provide the `response.text`, which in this example would be the html of the frontpage of findstat.  Seeing this, I would immediately know that I forgot `api` in the url, which is a `ValueError`, I think.",
    "created_at": "2020-10-10T20:35:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488806",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:14" align="right">comment:14</div>

Because the reason for the error is (most likely) an inappropriate value `response.text`, due to (most likely) a bad url or a new but on the findstat server.  I felt that a `ValueError` would then be more correct.

For example, upon

```
sage: findstat()
The Combinatorial Statistic Finder (https://www.findstat.org/)
sage: sage.databases.findstat._get_json("https://www.findstat.org/")
```
if I only threw the `JSONDecodeError`, the message would simply be

```
JSONDecodeError: Expecting value: line 1 column 1 (char 0)
```
which wouldn't be helpful at all.

Thus I want to provide the `response.text`, which in this example would be the html of the frontpage of findstat.  Seeing this, I would immediately know that I forgot `api` in the url, which is a `ValueError`, I think.



---

archive/issue_comments_488807.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2020-10-22T09:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488807",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_488808.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\ngreen bot + works for me",
    "created_at": "2020-10-22T09:04:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488808",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:15" align="right">comment:15</div>

green bot + works for me



---

archive/issue_events_424363.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-10-22T09:04:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424363"
}
```



---

archive/issue_events_424364.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-10-22T09:04:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424364"
}
```



---

archive/issue_comments_488809.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThank you!",
    "created_at": "2020-10-22T10:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488809",
    "user": "https://github.com/mantepse"
}
```

<div id="comment:16" align="right">comment:16</div>

Thank you!



---

archive/issue_events_424365.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424365"
}
```



---

archive/issue_events_424366.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424366"
}
```



---

archive/issue_events_424367.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-07T16:22:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424367"
}
```



---

archive/issue_events_424368.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "01d7cc0514e0a35fa7613eacba8f53f1ee1f314b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-11-07T16:22:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30630#event-424368"
}
```



---

archive/issue_comments_488810.json:
```json
{
    "body": "Changed branch from **[u/mantepse/findstat_error_handling](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/findstat_error_handling)** to **[`3f89b5b`](https://github.com/sagemath/sagetrac-mirror/commit/3f89b5b6ca0e3fe607ca1dc6028c9b137777e006)**",
    "created_at": "2020-11-07T16:22:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30630#issuecomment-488810",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mantepse/findstat_error_handling](https://github.com/sagemath/sagetrac-mirror/tree/u/mantepse/findstat_error_handling)** to **[`3f89b5b`](https://github.com/sagemath/sagetrac-mirror/commit/3f89b5b6ca0e3fe607ca1dc6028c9b137777e006)**
