# Issue 30275: Replace AssertionError with ValueError

archive/issues_030038.json:
```json
{
    "body": "Turns out that an `AssertionError` is inapropriate to raise when immutable elements are tried to be changed (see [here](https://docs.python.org/3/library/exceptions.html#AssertionError)):\n\n> exception AssertionError\n>    Raised when an assert statement fails.\n\n\nsince no `assert` statements are involved. A better choice would be a `ValueError`.\n\nCC:  @egourgoulhon @tscrim @mkoeppe\n\nBranch/Commit: a20a6d29d125aae956111529df663be4b14943c7\n\nReviewer: Travis Scrimshaw\n\nAuthor: Michael Jung\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30275\n\n",
    "closed_at": "2020-09-15T21:58:35Z",
    "created_at": "2020-08-02T20:41:41Z",
    "labels": [
        "component: manifolds",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Replace AssertionError with ValueError",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30275",
    "user": "https://github.com/mjungmath"
}
```
Turns out that an `AssertionError` is inapropriate to raise when immutable elements are tried to be changed (see [here](https://docs.python.org/3/library/exceptions.html#AssertionError)):

> exception AssertionError
>    Raised when an assert statement fails.


since no `assert` statements are involved. A better choice would be a `ValueError`.

CC:  @egourgoulhon @tscrim @mkoeppe

Branch/Commit: a20a6d29d125aae956111529df663be4b14943c7

Reviewer: Travis Scrimshaw

Author: Michael Jung

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30275





---

archive/issue_comments_588423.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n >    Raised when an assert statement fails.\n \n \n-since no `assert` statements are involved. A better choice would be a `ValueError`. Apart from the new immutability implementations, this would also depend on #30239 because the `AssertionError` due to immutability is catched there. The easiest way, I think, is to substitute them all at once after the immutability tickets have been finished (find & replace).\n+since no `assert` statements are involved. A better choice would be a `ValueError`. Apart from the new immutability implementations, this would also depend on #30239 because the `AssertionError` due to immutability is catched there. The easiest way, I think, is to substitute them all at once after the immutability tickets and #30239 have been finished (find & replace).\n``````\n",
    "created_at": "2020-08-02T20:45:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588423",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 >    Raised when an assert statement fails.
 
 
-since no `assert` statements are involved. A better choice would be a `ValueError`. Apart from the new immutability implementations, this would also depend on #30239 because the `AssertionError` due to immutability is catched there. The easiest way, I think, is to substitute them all at once after the immutability tickets have been finished (find & replace).
+since no `assert` statements are involved. A better choice would be a `ValueError`. Apart from the new immutability implementations, this would also depend on #30239 because the `AssertionError` due to immutability is catched there. The easiest way, I think, is to substitute them all at once after the immutability tickets and #30239 have been finished (find & replace).
``````




---

archive/issue_events_096186.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30275#event-96186"
}
```



---

archive/issue_comments_588424.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mjungmath/replace_assertionerror_with_valueerror\"",
    "created_at": "2020-09-06T14:55:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588424",
    "user": "https://github.com/mjungmath"
}
```

Changing branch from "" to "u/gh-mjungmath/replace_assertionerror_with_valueerror"



---

archive/issue_comments_588425.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-06T14:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588425",
    "user": "https://github.com/mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_588426.json:
```json
{
    "body": "Changing author from \"\" to \"Michael Jung\"",
    "created_at": "2020-09-06T14:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588426",
    "user": "https://github.com/mjungmath"
}
```

Changing author from "" to "Michael Jung"



---

archive/issue_comments_588427.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                                      |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[787bc4b](https://github.com/sagemath/sagetrac-mirror/commit/787bc4b5db9e06093df9a6b5fa2722de69427245)|`Trac #30275: AssertionError replaced`|",
    "created_at": "2020-09-06T14:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588427",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                                      |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[787bc4b](https://github.com/sagemath/sagetrac-mirror/commit/787bc4b5db9e06093df9a6b5fa2722de69427245)|`Trac #30275: AssertionError replaced`|



---

archive/issue_comments_588428.json:
```json
{
    "body": "Changing commit from \"\" to \"787bc4b5db9e06093df9a6b5fa2722de69427245\"",
    "created_at": "2020-09-06T14:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588428",
    "user": "https://github.com/mjungmath"
}
```

Changing commit from "" to "787bc4b5db9e06093df9a6b5fa2722de69427245"



---

archive/issue_comments_588429.json:
```json
{
    "body": "Changing dependencies from \"#30181, #30261, #30239\" to \"\"",
    "created_at": "2020-09-06T23:14:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588429",
    "user": "https://github.com/mjungmath"
}
```

Changing dependencies from "#30181, #30261, #30239" to ""



---

archive/issue_comments_588430.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,4 @@\n >    Raised when an assert statement fails.\n \n \n-since no `assert` statements are involved. A better choice would be a `ValueError`. Apart from the new immutability implementations, this would also depend on #30239 because the `AssertionError` due to immutability is catched there. The easiest way, I think, is to substitute them all at once after the immutability tickets and #30239 have been finished (find & replace).\n+since no `assert` statements are involved. A better choice would be a `ValueError`.\n``````\n",
    "created_at": "2020-09-06T23:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588430",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,4 @@
 >    Raised when an assert statement fails.
 
 
-since no `assert` statements are involved. A better choice would be a `ValueError`. Apart from the new immutability implementations, this would also depend on #30239 because the `AssertionError` due to immutability is catched there. The easiest way, I think, is to substitute them all at once after the immutability tickets and #30239 have been finished (find & replace).
+since no `assert` statements are involved. A better choice would be a `ValueError`.
``````




---

archive/issue_comments_588431.json:
```json
{
    "body": "<a id='comment:7'></a>\nWhy the change in `algebras/commutative_dga.py`?",
    "created_at": "2020-09-06T23:22:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588431",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
Why the change in `algebras/commutative_dga.py`?



---

archive/issue_comments_588432.json:
```json
{
    "body": "<a id='comment:8'></a>\nThat is not supposed to be there. I'll change it.",
    "created_at": "2020-09-06T23:24:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588432",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:8'></a>
That is not supposed to be there. I'll change it.



---

archive/issue_comments_588433.json:
```json
{
    "body": "Changing commit from \"787bc4b5db9e06093df9a6b5fa2722de69427245\" to \"a20a6d29d125aae956111529df663be4b14943c7\"",
    "created_at": "2020-09-07T00:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588433",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "787bc4b5db9e06093df9a6b5fa2722de69427245" to "a20a6d29d125aae956111529df663be4b14943c7"



---

archive/issue_comments_588434.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|\n|[a20a6d2](https://github.com/sagemath/sagetrac-mirror/commit/a20a6d29d125aae956111529df663be4b14943c7)|`Trac #30275: AssertionError replaced`|",
    "created_at": "2020-09-07T00:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588434",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
|[a20a6d2](https://github.com/sagemath/sagetrac-mirror/commit/a20a6d29d125aae956111529df663be4b14943c7)|`Trac #30275: AssertionError replaced`|



---

archive/issue_comments_588435.json:
```json
{
    "body": "<a id='comment:10'></a>\nThere we go.",
    "created_at": "2020-09-07T00:04:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588435",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:10'></a>
There we go.



---

archive/issue_comments_588436.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-09-07T02:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588436",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_588437.json:
```json
{
    "body": "<a id='comment:11'></a>\nThanks. LGTM.",
    "created_at": "2020-09-07T02:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588437",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'></a>
Thanks. LGTM.



---

archive/issue_comments_588438.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-07T02:47:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588438",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_588439.json:
```json
{
    "body": "<a id='comment:12'></a>\nThank you for the quick review.\n\nWhat about the pyflakes errors? It has nothing to do with the ticket, but shouldn't that be polished at some point?",
    "created_at": "2020-09-07T14:54:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588439",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:12'></a>
Thank you for the quick review.

What about the pyflakes errors? It has nothing to do with the ticket, but shouldn't that be polished at some point?



---

archive/issue_comments_588440.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [gh-mjungmath](#comment%3A12):\n> Thank you for the quick review.\n\n\nNo problem.\n\n> What about the pyflakes errors? It has nothing to do with the ticket, but shouldn't that be polished at some point?\n\n\nYes, but that is something for another ticket. You probably can take care of all of those at once for the manifolds folder.",
    "created_at": "2020-09-07T23:55:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588440",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Replying to [gh-mjungmath](#comment%3A12):
> Thank you for the quick review.


No problem.

> What about the pyflakes errors? It has nothing to do with the ticket, but shouldn't that be polished at some point?


Yes, but that is something for another ticket. You probably can take care of all of those at once for the manifolds folder.



---

archive/issue_events_096187.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-15T21:58:35Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30275#event-96187"
}
```



---

archive/issue_comments_588441.json:
```json
{
    "body": "Changing branch from \"u/gh-mjungmath/replace_assertionerror_with_valueerror\" to \"a20a6d29d125aae956111529df663be4b14943c7\"",
    "created_at": "2020-09-15T21:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588441",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mjungmath/replace_assertionerror_with_valueerror" to "a20a6d29d125aae956111529df663be4b14943c7"



---

archive/issue_comments_588442.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-15T21:58:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30275#issuecomment-588442",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_096188.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T22:01:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30275#event-96188"
}
```



---

archive/issue_events_096189.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T22:01:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30275",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30275#event-96189"
}
```
