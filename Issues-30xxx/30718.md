# Issue 30718: build/pkgs/pynac/dependencies: Remove giac

archive/issues_030481.json:
```json
{
    "body": "As noted in #21700, our `pynac` spkg-install script explicitly disables use of giac. So that should not be a dependency.\n\nRemoving the dependency allows for greater parallelization of the build.\n\nThis is also a step toward allowing to build Sage with `./configure --without-giac` (see #30383 - `configure --disable-SPKG` for standard packages).\n\nSee also:\n- #29542 spkg-configure.m4 for pynac\n\n\n\nCC:  @dimpase @jhpalmieri @thierry-freebsd @orlitzky @tobiasdiez\n\nKeywords: dependencies, giac, pynac\n\nBranch/Commit: 9c5f5597207277d105344eac97fb9b97e1e3a3dd\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30718\n\n",
    "closed_at": "2020-11-01T00:42:56Z",
    "created_at": "2020-10-04T16:57:52Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "build/pkgs/pynac/dependencies: Remove giac",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30718",
    "user": "https://github.com/mkoeppe"
}
```
As noted in #21700, our `pynac` spkg-install script explicitly disables use of giac. So that should not be a dependency.

Removing the dependency allows for greater parallelization of the build.

This is also a step toward allowing to build Sage with `./configure --without-giac` (see #30383 - `configure --disable-SPKG` for standard packages).

See also:
- #29542 spkg-configure.m4 for pynac



CC:  @dimpase @jhpalmieri @thierry-freebsd @orlitzky @tobiasdiez

Keywords: dependencies, giac, pynac

Branch/Commit: 9c5f5597207277d105344eac97fb9b97e1e3a3dd

Reviewer: John Palmieri

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30718





---

archive/issue_comments_607927.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/build_pkgs_pynac_dependencies__remove_giac\"",
    "created_at": "2020-10-04T17:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607927",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/build_pkgs_pynac_dependencies__remove_giac"



---

archive/issue_comments_607928.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-10-04T17:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607928",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_607929.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-10-04T17:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607929",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_607930.json:
```json
{
    "body": "Changing commit from \"\" to \"9c5f5597207277d105344eac97fb9b97e1e3a3dd\"",
    "created_at": "2020-10-04T17:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607930",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "9c5f5597207277d105344eac97fb9b97e1e3a3dd"



---

archive/issue_comments_607931.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-10-04T17:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607931",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_607932.json:
```json
{
    "body": "<a id='comment:3'></a>This looks okay, but something is wrong with other dependencies. With this branch, `make pynac` works. With the current `develop` branch, `make pynac` fails (on OS X + homebrew) because `giac` fails to build:\n\n```\nchecking for lapack... no\nconfigure: error: Package requirements (lapack) were not met:\n\nNo package 'lapack' found\n\nConsider adjusting the PKG_CONFIG_PATH environment variable if you\ninstalled software in a non-standard prefix.\n\nAlternatively, you may set the environment variables LAPACK_CFLAGS\nand LAPACK_LIBS to avoid the need to call pkg-config.\nSee the pkg-config man page for more details.\n```\nRunning plain \"make\" works, I guess because something gets built before `giac` which provides whatever it needs.",
    "created_at": "2020-10-04T22:07:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607932",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>This looks okay, but something is wrong with other dependencies. With this branch, `make pynac` works. With the current `develop` branch, `make pynac` fails (on OS X + homebrew) because `giac` fails to build:

```
checking for lapack... no
configure: error: Package requirements (lapack) were not met:

No package 'lapack' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables LAPACK_CFLAGS
and LAPACK_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details.
```
Running plain "make" works, I guess because something gets built before `giac` which provides whatever it needs.



---

archive/issue_comments_607933.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2020-10-04T22:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607933",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_607934.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-04T22:29:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607934",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_607935.json:
```json
{
    "body": "<a id='comment:5'></a>The giac dependencies look fine - it depends on gsl, which depends on BLAS",
    "created_at": "2020-10-04T22:37:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607935",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>The giac dependencies look fine - it depends on gsl, which depends on BLAS



---

archive/issue_comments_607936.json:
```json
{
    "body": "<a id='comment:6'></a>I have homebrew packages for `openblas` and `gsl`, so Sage doesn't build those. I see this error on two different machines running OS X 10.15.7, Xcode 12, and a pretty complete homebrew installation (the only thing that Sage's configure complains about is `cmake`). If you have access to such a machine, try `make distclean; ./configure; make giac`. I'm curious about how it goes.",
    "created_at": "2020-10-04T22:55:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607936",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:6'></a>I have homebrew packages for `openblas` and `gsl`, so Sage doesn't build those. I see this error on two different machines running OS X 10.15.7, Xcode 12, and a pretty complete homebrew installation (the only thing that Sage's configure complains about is `cmake`). If you have access to such a machine, try `make distclean; ./configure; make giac`. I'm curious about how it goes.



---

archive/issue_comments_607937.json:
```json
{
    "body": "<a id='comment:7'></a>Yes, confirmed on my system (still with Xcode 11)",
    "created_at": "2020-10-04T23:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607937",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Yes, confirmed on my system (still with Xcode 11)



---

archive/issue_comments_607938.json:
```json
{
    "body": "<a id='comment:8'></a>Doing `make toolchain` first fixes this problem.",
    "created_at": "2020-10-04T23:15:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607938",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Doing `make toolchain` first fixes this problem.



---

archive/issue_comments_607939.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 mkoeppe]:\n> Doing `make toolchain` first fixes this problem.\n\n\nFollowup at #30721.",
    "created_at": "2020-10-05T00:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607939",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>Replying to [comment:8 mkoeppe]:
> Doing `make toolchain` first fixes this problem.


Followup at #30721.



---

archive/issue_comments_607940.json:
```json
{
    "body": "Changing keywords from \"\" to \"dependencies, giac, pynac\".",
    "created_at": "2020-10-05T13:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607940",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "dependencies, giac, pynac".



---

archive/issue_comments_607941.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-As notes in #21700, our `pynac` spkg-install script explicitly disables use of giac. So that should not be a dependency.\n+As noted in #21700, our `pynac` spkg-install script explicitly disables use of giac. So that should not be a dependency.\n \n Removing the dependency allows for greater parallelization of the build.\n \n@@ -7,6 +7,8 @@\n See also:\n - #29542 spkg-configure.m4 for pynac\n \n+\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/30718\n``````\n",
    "created_at": "2020-10-05T13:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607941",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-As notes in #21700, our `pynac` spkg-install script explicitly disables use of giac. So that should not be a dependency.
+As noted in #21700, our `pynac` spkg-install script explicitly disables use of giac. So that should not be a dependency.
 
 Removing the dependency allows for greater parallelization of the build.
 
@@ -7,6 +7,8 @@
 See also:
 - #29542 spkg-configure.m4 for pynac
 
+
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/30718
``````




---

archive/issue_events_080046.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30718#event-80046"
}
```



---

archive/issue_comments_607942.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-01T00:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607942",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_607943.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/build_pkgs_pynac_dependencies__remove_giac\" to \"9c5f5597207277d105344eac97fb9b97e1e3a3dd\"",
    "created_at": "2020-11-01T00:42:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30718#issuecomment-607943",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/build_pkgs_pynac_dependencies__remove_giac" to "9c5f5597207277d105344eac97fb9b97e1e3a3dd"



---

archive/issue_events_080047.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-01T00:42:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30718",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30718#event-80047"
}
```
