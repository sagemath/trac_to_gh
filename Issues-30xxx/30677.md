# Issue 30677: Add VS Code config for SAGE_ROOT/venv

archive/issues_030440.json:
```json
{
    "body": "Its recommended to check in some VS Code config files (which makes it easier for new users to start developing).\n\nWe configure it to use the Sage venv via the `configure`-generated symlink `SAGE_ROOT/venv` (from #32442)\n\nThe `.gitignore` configuration follows  https://www.toptal.com/developers/gitignore/api/python,visualstudiocode\n\n\nCC:  @mkoeppe\n\nKeywords: sd111\n\nBranch/Commit: 0eadcd118d2da14981cd17def91446232940d2f1\n\nReviewer: Dima Pasechnik\n\nAuthor: Tobias Diez\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30677\n\n",
    "closed_at": "2022-01-01T00:23:14Z",
    "created_at": "2020-09-28T09:09:43Z",
    "labels": [
        "component: build",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Add VS Code config for SAGE_ROOT/venv",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30677",
    "user": "https://github.com/tobiasdiez"
}
```
Its recommended to check in some VS Code config files (which makes it easier for new users to start developing).

We configure it to use the Sage venv via the `configure`-generated symlink `SAGE_ROOT/venv` (from #32442)

The `.gitignore` configuration follows  https://www.toptal.com/developers/gitignore/api/python,visualstudiocode


CC:  @mkoeppe

Keywords: sd111

Branch/Commit: 0eadcd118d2da14981cd17def91446232940d2f1

Reviewer: Dima Pasechnik

Author: Tobias Diez

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30677





---

archive/issue_comments_463300.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-28T09:09:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463300",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_463301.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Add VS code config to use the local virtual environment `src/.venv` that is added in #30371.\n+Its recommended to checkin some VS Code config files (which makes it easier for new users to start developing), so I did this. In particular, I added VS code config to use the local virtual environment `src/.venv` that is added in #30371. These changes are more or less copied from https://www.toptal.com/developers/gitignore/api/python,visualstudiocode.\n \n Dependencies: #30371\n \n``````\n",
    "created_at": "2020-09-28T09:14:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463301",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Add VS code config to use the local virtual environment `src/.venv` that is added in #30371.
+Its recommended to checkin some VS Code config files (which makes it easier for new users to start developing), so I did this. In particular, I added VS code config to use the local virtual environment `src/.venv` that is added in #30371. These changes are more or less copied from https://www.toptal.com/developers/gitignore/api/python,visualstudiocode.
 
 Dependencies: #30371
 
``````




---

archive/issue_comments_463302.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-03T22:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463302",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_079811.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30677#event-79811"
}
```



---

archive/issue_comments_463303.json:
```json
{
    "body": "<a id='comment:5'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463303",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_463304.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463304",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_463305.json:
```json
{
    "body": "<a id='comment:7'></a>rebase is needed",
    "created_at": "2020-12-12T08:16:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463305",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>rebase is needed



---

archive/issue_comments_463306.json:
```json
{
    "body": "<a id='comment:8'></a>This ticket could also be retargeted to #31377, using `local/` as the venv instead of `src/.venv`.",
    "created_at": "2021-02-11T22:58:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463306",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>This ticket could also be retargeted to #31377, using `local/` as the venv instead of `src/.venv`.



---

archive/issue_comments_463307.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:8 mkoeppe]:\n> This ticket could also be retargeted to #31377, using `local/` as the venv instead of `src/.venv`.\n\n\nThe nice thing about pipenv is that one can specify python packages for development, and so install e.g. pytest and linters in the virtual environment. VS code picks these up, and complains if they are not installed otherwise. Does sage's build setup has a similar flag to install dev packages?",
    "created_at": "2021-02-18T18:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463307",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>Replying to [comment:8 mkoeppe]:
> This ticket could also be retargeted to #31377, using `local/` as the venv instead of `src/.venv`.


The nice thing about pipenv is that one can specify python packages for development, and so install e.g. pytest and linters in the virtual environment. VS code picks these up, and complains if they are not installed otherwise. Does sage's build setup has a similar flag to install dev packages?



---

archive/issue_comments_463308.json:
```json
{
    "body": "<a id='comment:10'></a>In the current model, the linters are installed by tox into the tox environment.",
    "created_at": "2021-02-18T18:41:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463308",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>In the current model, the linters are installed by tox into the tox environment.



---

archive/issue_comments_463309.json:
```json
{
    "body": "<a id='comment:11'></a>needs a rebase",
    "created_at": "2021-03-10T13:57:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463309",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>needs a rebase



---

archive/issue_events_079812.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30677#event-79812"
}
```



---

archive/issue_events_079813.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30677#event-79813"
}
```



---

archive/issue_comments_463310.json:
```json
{
    "body": "<a id='comment:12'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463310",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_463311.json:
```json
{
    "body": "<a id='comment:13'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463311",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_079814.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30677#event-79814"
}
```



---

archive/issue_events_079815.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30677#event-79815"
}
```



---

archive/issue_comments_463312.json:
```json
{
    "body": "<a id='comment:14'></a>This should be redone without dep on #30371",
    "created_at": "2021-08-28T01:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463312",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>This should be redone without dep on #30371



---

archive/issue_comments_463313.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-08-28T01:32:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463313",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_463314.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,8 @@\n+Its recommended to check in some VS Code config files (which makes it easier for new users to start developing).\n+\n+We configure it to use the Sage venv via the `configure`-generated symlink `SAGE_ROOT/venv` (from #32442)\n+\n+The `.gitignore` configuration follows  https://www.toptal.com/developers/gitignore/api/python,visualstudiocode\n \n \n Dependencies: #30371\n``````\n",
    "created_at": "2021-10-03T03:26:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463314",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,8 @@
+Its recommended to check in some VS Code config files (which makes it easier for new users to start developing).
+
+We configure it to use the Sage venv via the `configure`-generated symlink `SAGE_ROOT/venv` (from #32442)
+
+The `.gitignore` configuration follows  https://www.toptal.com/developers/gitignore/api/python,visualstudiocode
 
 
 Dependencies: #30371
``````




---

archive/issue_comments_463315.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-10-03T03:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463315",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_463316.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-03T04:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463316",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463317.json:
```json
{
    "body": "<a id='comment:19'></a>If you plan to change from the pipenv to the sage venv, please also make sure that all dev-packages are included in the latter enviroment: https://github.com/sagemath/sagetrac-mirror/blob/fec55234a00e46d023ad583f8c6284b970141ab0/src/Pipfile#L6-L15\nThese are needed to use all features of VS code properly (linting, jupyter notebook support, etc). While working on the pipenv enviroment I've added those packages, but didn't double-check if they are included in the sage distribution (since they are meant only for developers, and not for actual distribution). \n\nAlso for clarification: the sage venv can be configured to have an editable install, right?",
    "created_at": "2021-10-04T09:39:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463317",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:19'></a>If you plan to change from the pipenv to the sage venv, please also make sure that all dev-packages are included in the latter enviroment: https://github.com/sagemath/sagetrac-mirror/blob/fec55234a00e46d023ad583f8c6284b970141ab0/src/Pipfile#L6-L15
These are needed to use all features of VS code properly (linting, jupyter notebook support, etc). While working on the pipenv enviroment I've added those packages, but didn't double-check if they are included in the sage distribution (since they are meant only for developers, and not for actual distribution). 

Also for clarification: the sage venv can be configured to have an editable install, right?



---

archive/issue_comments_463318.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 gh-tobiasdiez]:\n> for clarification: the sage venv can be configured to have an editable install, right?\n\n\nYes, this has been shipped in Sage 9.3, see https://wiki.sagemath.org/ReleaseTours/sage-9.3#Editable_.28.22in-place.22.2C_.22develop.22.29_installs_of_the_Sage_library",
    "created_at": "2021-10-04T19:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463318",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Replying to [comment:19 gh-tobiasdiez]:
> for clarification: the sage venv can be configured to have an editable install, right?


Yes, this has been shipped in Sage 9.3, see https://wiki.sagemath.org/ReleaseTours/sage-9.3#Editable_.28.22in-place.22.2C_.22develop.22.29_installs_of_the_Sage_library



---

archive/issue_comments_463319.json:
```json
{
    "body": "<a id='comment:21'></a>Matthias do you still have something you want to change here?\n\nBy the way, I think `.venv` is the most common convention for python venvs. At leasts that's what pipenv and poetry are using by default, and https://docs.python.org/3/library/venv.html is listing as \"a common name\". So maybe as a follow-up to #32442 rename the symbolic link accordingly (or even make it the default to install the python environment in `.venv`)?",
    "created_at": "2021-10-21T19:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463319",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:21'></a>Matthias do you still have something you want to change here?

By the way, I think `.venv` is the most common convention for python venvs. At leasts that's what pipenv and poetry are using by default, and https://docs.python.org/3/library/venv.html is listing as "a common name". So maybe as a follow-up to #32442 rename the symbolic link accordingly (or even make it the default to install the python environment in `.venv`)?



---

archive/issue_comments_463320.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-10-21T19:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463320",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_463321.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-10-21T19:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463321",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_463322.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:21 gh-tobiasdiez]:\n> I think `.venv` is the most common convention for python venvs. At leasts that's what pipenv and poetry are using by default, and https://docs.python.org/3/library/venv.html is listing as \"a common name\". So maybe as a follow-up to #32442 rename the symbolic link accordingly (or even make it the default to install the python environment in `.venv`)?\n\n\nWell, a `.venv` according to this common convention would lie in `SAGE_ROOT/src/` or perhaps in `SAGE_ROOT/pkgs/sagemath-standard/`, i.e., at the root of a Python distribution tree -- not in `SAGE_ROOT`, so it's not just a matter of renaming.\n\nAlso, I don't think we want tools such as `pipenv` to actually manipulate the venv built by the Sage distribution because it is managed by our build system.",
    "created_at": "2021-10-21T19:34:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463322",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Replying to [comment:21 gh-tobiasdiez]:
> I think `.venv` is the most common convention for python venvs. At leasts that's what pipenv and poetry are using by default, and https://docs.python.org/3/library/venv.html is listing as "a common name". So maybe as a follow-up to #32442 rename the symbolic link accordingly (or even make it the default to install the python environment in `.venv`)?


Well, a `.venv` according to this common convention would lie in `SAGE_ROOT/src/` or perhaps in `SAGE_ROOT/pkgs/sagemath-standard/`, i.e., at the root of a Python distribution tree -- not in `SAGE_ROOT`, so it's not just a matter of renaming.

Also, I don't think we want tools such as `pipenv` to actually manipulate the venv built by the Sage distribution because it is managed by our build system.



---

archive/issue_comments_463323.json:
```json
{
    "body": "<a id='comment:24'></a>To expand on this, I think it's better to reserve the common name `.venv` for user-created venvs (of which there can be many); and to use `SAGE_ROOT/venv` for \"the\" venv (= the one configured and built by the distribution).\n\nThen we can document as \"best practices\" to work with a user-created venv for example as the target for pip-installing additional packages. This will be more robust than the current status quo, in which the venv is built by our special tooling, and users kind of can install additional stuff if they are careful.",
    "created_at": "2021-10-21T19:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463323",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>To expand on this, I think it's better to reserve the common name `.venv` for user-created venvs (of which there can be many); and to use `SAGE_ROOT/venv` for "the" venv (= the one configured and built by the distribution).

Then we can document as "best practices" to work with a user-created venv for example as the target for pip-installing additional packages. This will be more robust than the current status quo, in which the venv is built by our special tooling, and users kind of can install additional stuff if they are careful.



---

archive/issue_comments_463324.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:\n> To expand on this, I think it's better to reserve the common name `.venv` for user-created venvs (of which there can be many); and to use `SAGE_ROOT/venv` for \"the\" venv (= the one configured and built by the distribution).\n\n\nIn this case, it is no good idea to use `venv` as the base for VS code since extensions (pycodestyle, pytest etc) will install additional packages using pip if needed.\n\n \n> Then we can document as \"best practices\" to work with a user-created venv for example as the target for pip-installing additional packages. This will be more robust than the current status quo, in which the venv is built by our special tooling, and users kind of can install additional stuff if they are careful.\n\n\nTo be honest, this sounds relatively complicated and confusing (as a 'normal' dev I don't really see the difference between \".venv\" and \"venv\"). Why not treat sage-the-distribution as just one of many ways to create a venv? For example, one could also add a `enable-pipenv` flag to make in which case pipenv is used to create the venv instead. It would be strange if this then would create `venv` and `.venv`.",
    "created_at": "2021-10-22T08:19:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463324",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:
> To expand on this, I think it's better to reserve the common name `.venv` for user-created venvs (of which there can be many); and to use `SAGE_ROOT/venv` for "the" venv (= the one configured and built by the distribution).


In this case, it is no good idea to use `venv` as the base for VS code since extensions (pycodestyle, pytest etc) will install additional packages using pip if needed.

 
> Then we can document as "best practices" to work with a user-created venv for example as the target for pip-installing additional packages. This will be more robust than the current status quo, in which the venv is built by our special tooling, and users kind of can install additional stuff if they are careful.


To be honest, this sounds relatively complicated and confusing (as a 'normal' dev I don't really see the difference between ".venv" and "venv"). Why not treat sage-the-distribution as just one of many ways to create a venv? For example, one could also add a `enable-pipenv` flag to make in which case pipenv is used to create the venv instead. It would be strange if this then would create `venv` and `.venv`.



---

archive/issue_comments_463325.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [comment:25 gh-tobiasdiez]:\n> Why not treat sage-the-distribution as just one of many ways to create a venv? \n\n\nWell, sage-the-distribution builds a set of wheels using \"the\" venv, which are stored in the venv's `var/lib/sage/wheels` directory. This distinguishes \"the\" venv from other venvs. I want to document the process for users to create user venvs by installing these wheels.",
    "created_at": "2021-10-22T19:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463325",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Replying to [comment:25 gh-tobiasdiez]:
> Why not treat sage-the-distribution as just one of many ways to create a venv? 


Well, sage-the-distribution builds a set of wheels using "the" venv, which are stored in the venv's `var/lib/sage/wheels` directory. This distinguishes "the" venv from other venvs. I want to document the process for users to create user venvs by installing these wheels.



---

archive/issue_comments_463326.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:25 gh-tobiasdiez]:\n> Replying to [comment:24 mkoeppe]:\n> > To expand on this, I think it's better to reserve the common name `.venv` for user-created venvs (of which there can be many); and to use `SAGE_ROOT/venv` for \"the\" venv (= the one configured and built by the distribution).\n\n> \n> In this case, it is no good idea to use `venv` as the base for VS code since extensions (pycodestyle, pytest etc) will install additional packages using pip if needed.\n\n\nThis is a good point but as of the status quo, \"the\" venv is the only venv around.",
    "created_at": "2021-10-22T19:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463326",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Replying to [comment:25 gh-tobiasdiez]:
> Replying to [comment:24 mkoeppe]:
> > To expand on this, I think it's better to reserve the common name `.venv` for user-created venvs (of which there can be many); and to use `SAGE_ROOT/venv` for "the" venv (= the one configured and built by the distribution).

> 
> In this case, it is no good idea to use `venv` as the base for VS code since extensions (pycodestyle, pytest etc) will install additional packages using pip if needed.


This is a good point but as of the status quo, "the" venv is the only venv around.



---

archive/issue_comments_463327.json:
```json
{
    "body": "<a id='comment:28'></a>What is the work issue \"config test discovery\"?",
    "created_at": "2021-10-25T03:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463327",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>What is the work issue "config test discovery"?



---

archive/issue_comments_463328.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-26T15:41:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463329.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:28 mkoeppe]:\n> What is the work issue \"config test discovery\"?\n\n\nAdding config for VS code testing feature: https://code.visualstudio.com/docs/python/testing.\nI've added this now.",
    "created_at": "2021-10-26T15:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463329",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:30'></a>Replying to [comment:28 mkoeppe]:
> What is the work issue "config test discovery"?


Adding config for VS code testing feature: https://code.visualstudio.com/docs/python/testing.
I've added this now.



---

archive/issue_comments_463330.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-10-26T15:42:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463330",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_463331.json:
```json
{
    "body": "<a id='comment:32'></a>It would be nice if this could be reviewed (and merged) relatively soon.",
    "created_at": "2021-11-18T12:25:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463331",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:32'></a>It would be nice if this could be reviewed (and merged) relatively soon.



---

archive/issue_comments_463332.json:
```json
{
    "body": "<a id='comment:33'></a>Does it mean to work together with a particular VSCode plugin?",
    "created_at": "2021-11-18T15:43:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463332",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>Does it mean to work together with a particular VSCode plugin?



---

archive/issue_comments_463333.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-18T16:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463333",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_463334.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:33 dimpase]:\n> Does it mean to work together with a particular VSCode plugin?\n\n\nWith the \"standard\" python extension https://marketplace.visualstudio.com/items?itemName=ms-python.python, which I've now also added as \"recommendation\" (vscode will ask once when a workspace is opened for the first time to install these recommended extensions).",
    "created_at": "2021-11-18T16:32:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463334",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:35'></a>Replying to [comment:33 dimpase]:
> Does it mean to work together with a particular VSCode plugin?


With the "standard" python extension https://marketplace.visualstudio.com/items?itemName=ms-python.python, which I've now also added as "recommendation" (vscode will ask once when a workspace is opened for the first time to install these recommended extensions).



---

archive/issue_comments_463335.json:
```json
{
    "body": "<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-11-18T16:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463335",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:36'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_463336.json:
```json
{
    "body": "<a id='comment:37'></a>I got it installed, and what should I try? I don't use vscode for developent, so it's pretty unclear.\n\nIncidentally, I saw that vscode has support for jupyter notebooks now, but the kernels it knows are the Python only ones. Should it know - be able to discover somehow - Sage's jupyter kernel, too?",
    "created_at": "2021-11-19T14:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463336",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>I got it installed, and what should I try? I don't use vscode for developent, so it's pretty unclear.

Incidentally, I saw that vscode has support for jupyter notebooks now, but the kernels it knows are the Python only ones. Should it know - be able to discover somehow - Sage's jupyter kernel, too?



---

archive/issue_comments_463337.json:
```json
{
    "body": "<a id='comment:38'></a>It should \"just work\". This ticket is not doing much, only adding basic configs so that vs code is automatically discovering the right things. In particular:\n- Find the virtual environment in `venv`\n- Use pytest for test discovery (https://code.visualstudio.com/docs/python/testing)\n- Hide build artifacts in the file explorer\n\nCoding you still have to do yourself though ;) (or install https://copilot.github.com/)\n\nBut you are right, adding documentation for how to use vs code might be a good follow-up. The same for the jupyter support - I had a quick look and it seems to work in principle but still have to figure out the details.",
    "created_at": "2021-11-19T16:26:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463337",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:38'></a>It should "just work". This ticket is not doing much, only adding basic configs so that vs code is automatically discovering the right things. In particular:
- Find the virtual environment in `venv`
- Use pytest for test discovery (https://code.visualstudio.com/docs/python/testing)
- Hide build artifacts in the file explorer

Coding you still have to do yourself though ;) (or install https://copilot.github.com/)

But you are right, adding documentation for how to use vs code might be a good follow-up. The same for the jupyter support - I had a quick look and it seems to work in principle but still have to figure out the details.



---

archive/issue_comments_463338.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:38 gh-tobiasdiez]:\n> It should \"just work\". This ticket is not doing much, only adding basic configs so that vs code is automatically discovering the right things. In particular:\n> - Find the virtual environment in `venv`\n> - Use pytest for test discovery (https://code.visualstudio.com/docs/python/testing)\n> - Hide build artifacts in the file explorer\n\n\nI know it's hard to explain in text - but I have trouble understanding how to do the\n1st 2 items. (we can have a video call via google meet or so, so that I can see the screen and\nthe cursor...)\n\nBy `It should \"just work\"` - do you mean the jupyter thing?\nWell, I can browse (and view, nicely) Sage's jupyter notebooks in vscode, but not run, as I don't see a way to select the right kernel, and it's now shown in the menu.\n\n\n> \n> Coding you still have to do yourself though ;) (or install https://copilot.github.com/)\n> \n\nI sometimes use vscode as an IDE to write markdown or LaTeX (or Lean :-)), but never for other things, so far.",
    "created_at": "2021-11-19T16:48:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463338",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>Replying to [comment:38 gh-tobiasdiez]:
> It should "just work". This ticket is not doing much, only adding basic configs so that vs code is automatically discovering the right things. In particular:
> - Find the virtual environment in `venv`
> - Use pytest for test discovery (https://code.visualstudio.com/docs/python/testing)
> - Hide build artifacts in the file explorer


I know it's hard to explain in text - but I have trouble understanding how to do the
1st 2 items. (we can have a video call via google meet or so, so that I can see the screen and
the cursor...)

By `It should "just work"` - do you mean the jupyter thing?
Well, I can browse (and view, nicely) Sage's jupyter notebooks in vscode, but not run, as I don't see a way to select the right kernel, and it's now shown in the menu.


> 
> Coding you still have to do yourself though ;) (or install https://copilot.github.com/)
> 

I sometimes use vscode as an IDE to write markdown or LaTeX (or Lean :-)), but never for other things, so far.



---

archive/issue_comments_463339.json:
```json
{
    "body": "<a id='comment:40'></a>For the virtual env, you should have something like `Pytohn 3.8.10 ('venv': venv)` in the lower left corner \n![](https://code.visualstudio.com/assets/docs/python/environments/selected-interpreter-status-bar.png)\n\nWith this ticket, this is now the default and can be changed as described in https://code.visualstudio.com/docs/python/environments#_select-and-activate-an-environment.\n\n\nFor testing, vscode should now look for pytests instead of the \"Configure Python tests\" window that you get normally after activating the test icon (with the red border)\n\n![](https://code.visualstudio.com/assets/docs/python/testing/test-explorer-no-tests.png)\n\nFor jupyter, it may work if you have jupter installed in the sage venv and then select it as the kernel as described here https://code.visualstudio.com/docs/datascience/jupyter-notebooks#_create-or-open-a-jupyter-notebook.\nThere are also config options to do this by default, but I've not yet looked into this.\nFor basic things, this is working for me, but I'm not sure about e.g. sage syntax etc.",
    "created_at": "2021-11-19T17:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463339",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:40'></a>For the virtual env, you should have something like `Pytohn 3.8.10 ('venv': venv)` in the lower left corner 
![](https://code.visualstudio.com/assets/docs/python/environments/selected-interpreter-status-bar.png)

With this ticket, this is now the default and can be changed as described in https://code.visualstudio.com/docs/python/environments#_select-and-activate-an-environment.


For testing, vscode should now look for pytests instead of the "Configure Python tests" window that you get normally after activating the test icon (with the red border)

![](https://code.visualstudio.com/assets/docs/python/testing/test-explorer-no-tests.png)

For jupyter, it may work if you have jupter installed in the sage venv and then select it as the kernel as described here https://code.visualstudio.com/docs/datascience/jupyter-notebooks#_create-or-open-a-jupyter-notebook.
There are also config options to do this by default, but I've not yet looked into this.
For basic things, this is working for me, but I'm not sure about e.g. sage syntax etc.



---

archive/issue_comments_463340.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-11-21T12:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463340",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_463341.json:
```json
{
    "body": "<a id='comment:41'></a>OK, I'm getting somewhere with Jupyter.\n\nThis time I started with opening the SAGE_ROOT \"folder\", clicked on \"trust the author\", and only after that, opened a Sage Jupyter notebook.\n\nNow, the Sage kernel shows up in the kernel list, and if I choose it, then after a while (~10 sec or more, I thought it just hangs, at first) it loads and everything works.\nOpening it next time is a bit faster. (I'm on a slow net now, and maybe it's phoning back?!).\n\nAnyhow, these details (about opening folger and blessing it) should be added to wiki, or docs, something like this.\n\nOtherwise, good!",
    "created_at": "2021-11-21T12:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463341",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:41'></a>OK, I'm getting somewhere with Jupyter.

This time I started with opening the SAGE_ROOT "folder", clicked on "trust the author", and only after that, opened a Sage Jupyter notebook.

Now, the Sage kernel shows up in the kernel list, and if I choose it, then after a while (~10 sec or more, I thought it just hangs, at first) it loads and everything works.
Opening it next time is a bit faster. (I'm on a slow net now, and maybe it's phoning back?!).

Anyhow, these details (about opening folger and blessing it) should be added to wiki, or docs, something like this.

Otherwise, good!



---

archive/issue_comments_463342.json:
```json
{
    "body": "<a id='comment:43'></a>It should be adverticed in the release wiki, we probably will then get a lot of feedback.",
    "created_at": "2021-11-21T12:37:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463342",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>It should be adverticed in the release wiki, we probably will then get a lot of feedback.



---

archive/issue_comments_463343.json:
```json
{
    "body": "<a id='comment:44'></a>Thanks for the review.\n\nI agree that it would be helpful to have a how to get started with vscode, especially for beginners. But I couldn't any similar docs for other Ides either. What are the conventions, and is it okay to \"advertise\" vscode by adding it to the docs?",
    "created_at": "2021-11-21T18:21:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463343",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:44'></a>Thanks for the review.

I agree that it would be helpful to have a how to get started with vscode, especially for beginners. But I couldn't any similar docs for other Ides either. What are the conventions, and is it okay to "advertise" vscode by adding it to the docs?



---

archive/issue_comments_463344.json:
```json
{
    "body": "<a id='comment:45'></a>This would be a very valuable contribution. We have a meta-ticket #30500 for these kinds of things, but so far nobody has done the work.",
    "created_at": "2021-11-21T20:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463344",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:45'></a>This would be a very valuable contribution. We have a meta-ticket #30500 for these kinds of things, but so far nobody has done the work.



---

archive/issue_comments_463345.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:44 gh-tobiasdiez]:\n> Thanks for the review.\n> \n> I agree that it would be helpful to have a how to get started with vscode, especially for beginners. But I couldn't any similar docs for other Ides either. What are the conventions, and is it okay to \"advertise\" vscode by adding it to the docs? \n\n\nas vscode is getting dominant, hiding from the public that we have these binding in Sage is kind of silly.\n\nwe do have binding for jupyter(lab), and something for emacs too, so it's not setting up a precedent.",
    "created_at": "2021-11-21T23:17:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463345",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'></a>Replying to [comment:44 gh-tobiasdiez]:
> Thanks for the review.
> 
> I agree that it would be helpful to have a how to get started with vscode, especially for beginners. But I couldn't any similar docs for other Ides either. What are the conventions, and is it okay to "advertise" vscode by adding it to the docs? 


as vscode is getting dominant, hiding from the public that we have these binding in Sage is kind of silly.

we do have binding for jupyter(lab), and something for emacs too, so it's not setting up a precedent.



---

archive/issue_events_079816.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-01-01T00:23:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30677#event-79816"
}
```



---

archive/issue_comments_463346.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-01-01T00:23:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30677#issuecomment-463346",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
