# Issue 30998: Compute the treelength of graphs

archive/issues_030761.json:
```json
{
    "body": "We add a method to compute the treelength of a graph. This measure of tree-likeness express how the metric structure of a graph is close to a tree metric.\n\nSome implementation choices:\n- Check if the input graph is chordal (treelength 1)\n- Use decomposition by clique minimal separators as preprocessing, and so compute only the treelength of the atoms of the graph.\n- Use isomorphisms between atoms to avoid computing the treelength of isomorphic atoms.\n- Implement a specific class to compute the treelength of an atom (which is working for all graphs but without pre-processing)\n- The main algorithm is an adaptation of algorithm `'sage'` for treewidth.\n\nBranch/Commit: 26079ff80d81d7b42bd9a3dad9adc21882c22c79\n\nReviewer: Travis Scrimshaw\n\nAuthor: David Coudert\n\nDependencies: #30993\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30998\n\n",
    "closed_at": "2021-10-10T10:17:09Z",
    "created_at": "2020-12-03T19:20:19Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Compute the treelength of graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30998",
    "user": "https://github.com/dcoudert"
}
```
We add a method to compute the treelength of a graph. This measure of tree-likeness express how the metric structure of a graph is close to a tree metric.

Some implementation choices:
- Check if the input graph is chordal (treelength 1)
- Use decomposition by clique minimal separators as preprocessing, and so compute only the treelength of the atoms of the graph.
- Use isomorphisms between atoms to avoid computing the treelength of isomorphic atoms.
- Implement a specific class to compute the treelength of an atom (which is working for all graphs but without pre-processing)
- The main algorithm is an adaptation of algorithm `'sage'` for treewidth.

Branch/Commit: 26079ff80d81d7b42bd9a3dad9adc21882c22c79

Reviewer: Travis Scrimshaw

Author: David Coudert

Dependencies: #30993

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30998





---

archive/issue_comments_607319.json:
```json
{
    "body": "Changing branch from \"\" to \"public/graphs/30998_treelength\"",
    "created_at": "2020-12-03T19:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607319",
    "user": "https://github.com/dcoudert"
}
```

Changing branch from "" to "public/graphs/30998_treelength"



---

archive/issue_comments_607320.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[ea8a5b2](https://github.com/sagemath/sagetrac-mirror/commit/ea8a5b224affa193f72938118905580253f411d3)|`move method treewidth to new module tree_Decomposition.pyx`|\n|[9a999fe](https://github.com/sagemath/sagetrac-mirror/commit/9a999fee164eee5b2797ae12ea9fcacb7b161e26)|`add method to check if a tree decomposition is valid`|\n|[3842a49](https://github.com/sagemath/sagetrac-mirror/commit/3842a49fda3495eeb5690bdaf737270b028329c8)|`add method to reduce a tree decomposition`|\n|[030ee86](https://github.com/sagemath/sagetrac-mirror/commit/030ee8646075ff26814c6b825d5e4c36e52daa6a)|`all method treelength`|",
    "created_at": "2020-12-03T19:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607320",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[ea8a5b2](https://github.com/sagemath/sagetrac-mirror/commit/ea8a5b224affa193f72938118905580253f411d3)|`move method treewidth to new module tree_Decomposition.pyx`|
|[9a999fe](https://github.com/sagemath/sagetrac-mirror/commit/9a999fee164eee5b2797ae12ea9fcacb7b161e26)|`add method to check if a tree decomposition is valid`|
|[3842a49](https://github.com/sagemath/sagetrac-mirror/commit/3842a49fda3495eeb5690bdaf737270b028329c8)|`add method to reduce a tree decomposition`|
|[030ee86](https://github.com/sagemath/sagetrac-mirror/commit/030ee8646075ff26814c6b825d5e4c36e52daa6a)|`all method treelength`|



---

archive/issue_comments_607321.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-12-03T19:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607321",
    "user": "https://github.com/dcoudert"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_607322.json:
```json
{
    "body": "Changing commit from \"\" to \"030ee8646075ff26814c6b825d5e4c36e52daa6a\"",
    "created_at": "2020-12-03T19:21:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607322",
    "user": "https://github.com/dcoudert"
}
```

Changing commit from "" to "030ee8646075ff26814c6b825d5e4c36e52daa6a"



---

archive/issue_comments_607323.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[32bb9b2](https://github.com/sagemath/sagetrac-mirror/commit/32bb9b247654231f6ffc9b4b678e25223279f833)|`trac #30998: improve doctests coverage`|",
    "created_at": "2020-12-03T21:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[32bb9b2](https://github.com/sagemath/sagetrac-mirror/commit/32bb9b247654231f6ffc9b4b678e25223279f833)|`trac #30998: improve doctests coverage`|



---

archive/issue_comments_607324.json:
```json
{
    "body": "Changing commit from \"030ee8646075ff26814c6b825d5e4c36e52daa6a\" to \"32bb9b247654231f6ffc9b4b678e25223279f833\"",
    "created_at": "2020-12-03T21:19:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "030ee8646075ff26814c6b825d5e4c36e52daa6a" to "32bb9b247654231f6ffc9b4b678e25223279f833"



---

archive/issue_comments_607325.json:
```json
{
    "body": "<a id='comment:3'></a>\nLet's see if the doctest coverage is better this way.",
    "created_at": "2020-12-03T21:20:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607325",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>
Let's see if the doctest coverage is better this way.



---

archive/issue_comments_607326.json:
```json
{
    "body": "Changing commit from \"32bb9b247654231f6ffc9b4b678e25223279f833\" to \"5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff\"",
    "created_at": "2020-12-05T15:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607326",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "32bb9b247654231f6ffc9b4b678e25223279f833" to "5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff"



---

archive/issue_comments_607327.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[5fbe0c5](https://github.com/sagemath/sagetrac-mirror/commit/5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff)|`trac #30998: further improvements`|",
    "created_at": "2020-12-05T15:34:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[5fbe0c5](https://github.com/sagemath/sagetrac-mirror/commit/5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff)|`trac #30998: further improvements`|



---

archive/issue_comments_607328.json:
```json
{
    "body": "<a id='comment:5'></a>\nI have simplified some parts of the code.",
    "created_at": "2020-12-05T15:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607328",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:5'></a>
I have simplified some parts of the code.



---

archive/issue_comments_607329.json:
```json
{
    "body": "<a id='comment:6'></a>\nI will rebase this ticket on top of #30993 (and remove dependency on #30986 which has been merged in 9.3.beta3).",
    "created_at": "2020-12-07T16:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607329",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
I will rebase this ticket on top of #30993 (and remove dependency on #30986 which has been merged in 9.3.beta3).



---

archive/issue_comments_607330.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-07T16:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607330",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_607331.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|\n|[2a9d49a](https://github.com/sagemath/sagetrac-mirror/commit/2a9d49a8c1fa2661216a9819b797013f081ba875)|`trac #30993: minor improvement`|\n|[e0beb45](https://github.com/sagemath/sagetrac-mirror/commit/e0beb45ca702112989d44ef5e24b90e2ce79286d)|`trac #30993: merged with 9.3.beta3`|\n|[b53379e](https://github.com/sagemath/sagetrac-mirror/commit/b53379e795cf0431f31769ae474780796399fc25)|`trac #30993: further improvements`|\n|[36b31b9](https://github.com/sagemath/sagetrac-mirror/commit/36b31b90cfa471ade415a6f2634274bfb071f54b)|`trac #30993: avoid extra validity test`|\n|[64fa9bb](https://github.com/sagemath/sagetrac-mirror/commit/64fa9bb42ce8e4f49a88e50cfd0d0aa1a5836346)|`trac #30993: ensure consistence of parameter algorithm`|\n|[f9ca3e3](https://github.com/sagemath/sagetrac-mirror/commit/f9ca3e329325cfe9c71f2c9525098bcdaf85ba48)|`all method treelength`|\n|[5adc99d](https://github.com/sagemath/sagetrac-mirror/commit/5adc99db5896267b5ccc6bf2dd980037cc3b8e0c)|`trac #30998: improve doctests coverage`|\n|[51b7830](https://github.com/sagemath/sagetrac-mirror/commit/51b783021b05179919492e426022b2410bd825bb)|`trac #30998: further improvements`|\n|[eeaef0d](https://github.com/sagemath/sagetrac-mirror/commit/eeaef0d887f97460e1a3bfdbbc21c0e847ad8873)|`trac #30998: use method _from_tree_decompositions_of_atoms_to_tree_decomposition`|\n|[4fb2610](https://github.com/sagemath/sagetrac-mirror/commit/4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a)|`trac #30998: corrections and faster doctest`|",
    "created_at": "2020-12-07T17:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607331",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------|
|[2a9d49a](https://github.com/sagemath/sagetrac-mirror/commit/2a9d49a8c1fa2661216a9819b797013f081ba875)|`trac #30993: minor improvement`|
|[e0beb45](https://github.com/sagemath/sagetrac-mirror/commit/e0beb45ca702112989d44ef5e24b90e2ce79286d)|`trac #30993: merged with 9.3.beta3`|
|[b53379e](https://github.com/sagemath/sagetrac-mirror/commit/b53379e795cf0431f31769ae474780796399fc25)|`trac #30993: further improvements`|
|[36b31b9](https://github.com/sagemath/sagetrac-mirror/commit/36b31b90cfa471ade415a6f2634274bfb071f54b)|`trac #30993: avoid extra validity test`|
|[64fa9bb](https://github.com/sagemath/sagetrac-mirror/commit/64fa9bb42ce8e4f49a88e50cfd0d0aa1a5836346)|`trac #30993: ensure consistence of parameter algorithm`|
|[f9ca3e3](https://github.com/sagemath/sagetrac-mirror/commit/f9ca3e329325cfe9c71f2c9525098bcdaf85ba48)|`all method treelength`|
|[5adc99d](https://github.com/sagemath/sagetrac-mirror/commit/5adc99db5896267b5ccc6bf2dd980037cc3b8e0c)|`trac #30998: improve doctests coverage`|
|[51b7830](https://github.com/sagemath/sagetrac-mirror/commit/51b783021b05179919492e426022b2410bd825bb)|`trac #30998: further improvements`|
|[eeaef0d](https://github.com/sagemath/sagetrac-mirror/commit/eeaef0d887f97460e1a3bfdbbc21c0e847ad8873)|`trac #30998: use method _from_tree_decompositions_of_atoms_to_tree_decomposition`|
|[4fb2610](https://github.com/sagemath/sagetrac-mirror/commit/4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a)|`trac #30998: corrections and faster doctest`|



---

archive/issue_comments_607332.json:
```json
{
    "body": "Changing commit from \"5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff\" to \"4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a\"",
    "created_at": "2020-12-07T17:52:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607332",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff" to "4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a"



---

archive/issue_comments_607333.json:
```json
{
    "body": "Changing dependencies from \"#30986\" to \"#30993\"",
    "created_at": "2020-12-07T17:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607333",
    "user": "https://github.com/dcoudert"
}
```

Changing dependencies from "#30986" to "#30993"



---

archive/issue_comments_607334.json:
```json
{
    "body": "<a id='comment:8'></a>\nI have rebased this ticket over #30993 (instead of #30986). I hope I did it correctly...",
    "created_at": "2020-12-07T17:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607334",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>
I have rebased this ticket over #30993 (instead of #30986). I hope I did it correctly...



---

archive/issue_comments_607335.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-07T17:56:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607335",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_events_099095.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30998#event-99095"
}
```



---

archive/issue_comments_607336.json:
```json
{
    "body": "<a id='comment:9'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607336",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_099096.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30998#event-99096"
}
```



---

archive/issue_events_099097.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30998#event-99097"
}
```



---

archive/issue_comments_607337.json:
```json
{
    "body": "<a id='comment:10'></a>\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607337",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_607338.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[d1ab94d](https://github.com/sagemath/sagetrac-mirror/commit/d1ab94dc3fa123934478ba14a681ee8bf2658237)|`trac #30998: fix merge conflict`|",
    "created_at": "2021-09-18T15:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607338",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[d1ab94d](https://github.com/sagemath/sagetrac-mirror/commit/d1ab94dc3fa123934478ba14a681ee8bf2658237)|`trac #30998: fix merge conflict`|



---

archive/issue_comments_607339.json:
```json
{
    "body": "Changing commit from \"4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a\" to \"d1ab94dc3fa123934478ba14a681ee8bf2658237\"",
    "created_at": "2021-09-18T15:51:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a" to "d1ab94dc3fa123934478ba14a681ee8bf2658237"



---

archive/issue_comments_607340.json:
```json
{
    "body": "<a id='comment:12'></a>\nFix merge conflict with 9.5.beta1",
    "created_at": "2021-09-18T15:52:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607340",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:12'></a>
Fix merge conflict with 9.5.beta1



---

archive/issue_comments_607341.json:
```json
{
    "body": "<a id='comment:13'></a>\nSome little comments:\n\nI know Matthias would like the `from sage.functions.other import ceil` import to be in the method that uses it to help him with the Sage modularization.\n\nThe text for `OUTPUT:` and `ALGORITHM:` should not be indented.\n\nIn `treelength()` and `_treelength()`, do you want to give some of your variables type information? For example, isn't `cc` a `set`?\n\nShouldn't `__destroy__` be `__dealloc__`?\n\n```diff\n-    TESTS::\n+    TESTS:\n \n     Check that the decomposition by clique separators is valid::\n```",
    "created_at": "2021-10-03T08:47:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607341",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
Some little comments:

I know Matthias would like the `from sage.functions.other import ceil` import to be in the method that uses it to help him with the Sage modularization.

The text for `OUTPUT:` and `ALGORITHM:` should not be indented.

In `treelength()` and `_treelength()`, do you want to give some of your variables type information? For example, isn't `cc` a `set`?

Shouldn't `__destroy__` be `__dealloc__`?

```diff
-    TESTS::
+    TESTS:
 
     Check that the decomposition by clique separators is valid::
```



---

archive/issue_comments_607342.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[6acc447](https://github.com/sagemath/sagetrac-mirror/commit/6acc4471c3a87a7d25b9f1f8a80e8ff419445f2e)|`trac #30998: merged with 9.5.beta2`|\n|[4764e60](https://github.com/sagemath/sagetrac-mirror/commit/4764e6085d7598756fe20367f13ee4a99b7f4806)|`trac #30998: review comments`|\n|[01d200b](https://github.com/sagemath/sagetrac-mirror/commit/01d200b8f047ddc356dad7eb3172530f6fe1eee8)|`trac #30998: ensure that the documentation is built`|",
    "created_at": "2021-10-03T10:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607342",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[6acc447](https://github.com/sagemath/sagetrac-mirror/commit/6acc4471c3a87a7d25b9f1f8a80e8ff419445f2e)|`trac #30998: merged with 9.5.beta2`|
|[4764e60](https://github.com/sagemath/sagetrac-mirror/commit/4764e6085d7598756fe20367f13ee4a99b7f4806)|`trac #30998: review comments`|
|[01d200b](https://github.com/sagemath/sagetrac-mirror/commit/01d200b8f047ddc356dad7eb3172530f6fe1eee8)|`trac #30998: ensure that the documentation is built`|



---

archive/issue_comments_607343.json:
```json
{
    "body": "Changing commit from \"d1ab94dc3fa123934478ba14a681ee8bf2658237\" to \"01d200b8f047ddc356dad7eb3172530f6fe1eee8\"",
    "created_at": "2021-10-03T10:54:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607343",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d1ab94dc3fa123934478ba14a681ee8bf2658237" to "01d200b8f047ddc356dad7eb3172530f6fe1eee8"



---

archive/issue_comments_607344.json:
```json
{
    "body": "<a id='comment:15'></a>\nI have implemented your comments, except for typing. I'm not sure how to add types information. It has not yet been done in the graph module.\n\nSurprisingly, the documentation of `tree_decomposition` was not built. I added it and made a few corrections.",
    "created_at": "2021-10-03T10:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607344",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:15'></a>
I have implemented your comments, except for typing. I'm not sure how to add types information. It has not yet been done in the graph module.

Surprisingly, the documentation of `tree_decomposition` was not built. I added it and made a few corrections.



---

archive/issue_comments_607345.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [dcoudert](#comment%3A15):\n> I have implemented your comments, except for typing. I'm not sure how to add types information. It has not yet been done in the graph module.\n\n\nI meant for Cython, like `cdef list result`.\n\n> Surprisingly, the documentation of `tree_decomposition` was not built. I added it and made a few corrections.\n\n\nThat is quite surprising. Well, let's wait for the patchbot.",
    "created_at": "2021-10-03T11:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607345",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:16'></a>
Replying to [dcoudert](#comment%3A15):
> I have implemented your comments, except for typing. I'm not sure how to add types information. It has not yet been done in the graph module.


I meant for Cython, like `cdef list result`.

> Surprisingly, the documentation of `tree_decomposition` was not built. I added it and made a few corrections.


That is quite surprising. Well, let's wait for the patchbot.



---

archive/issue_comments_607346.json:
```json
{
    "body": "Changing commit from \"01d200b8f047ddc356dad7eb3172530f6fe1eee8\" to \"26079ff80d81d7b42bd9a3dad9adc21882c22c79\"",
    "created_at": "2021-10-03T12:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "01d200b8f047ddc356dad7eb3172530f6fe1eee8" to "26079ff80d81d7b42bd9a3dad9adc21882c22c79"



---

archive/issue_comments_607347.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[da449a2](https://github.com/sagemath/sagetrac-mirror/commit/da449a214a214b1125af78540f20cbd28be997ee)|`trac #30998: add some type informations`|\n|[26079ff](https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79)|`trac #30998: minor details`|",
    "created_at": "2021-10-03T12:25:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[da449a2](https://github.com/sagemath/sagetrac-mirror/commit/da449a214a214b1125af78540f20cbd28be997ee)|`trac #30998: add some type informations`|
|[26079ff](https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79)|`trac #30998: minor details`|



---

archive/issue_comments_607348.json:
```json
{
    "body": "<a id='comment:18'></a>\nI added a few type informations.\n\nFor the documentation, I suspect that `tree_decomposition` has been inadvertently removed from `src/doc/en/reference/graphs/index.rst`.",
    "created_at": "2021-10-03T12:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607348",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:18'></a>
I added a few type informations.

For the documentation, I suspect that `tree_decomposition` has been inadvertently removed from `src/doc/en/reference/graphs/index.rst`.



---

archive/issue_comments_607349.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2021-10-03T12:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607349",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_607350.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [dcoudert](#comment%3A18):\n> I added a few type informations.\n\n\nThanks. That should make it run a bit faster (although it probably is at the mirco-optimization level).\n\n> For the documentation, I suspect that `tree_decomposition` has been inadvertently removed from `src/doc/en/reference/graphs/index.rst`. \n\n\nQuite possibly. Anyways, if the patchbot comes back green, then positive review.",
    "created_at": "2021-10-03T12:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607350",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>
Replying to [dcoudert](#comment%3A18):
> I added a few type informations.


Thanks. That should make it run a bit faster (although it probably is at the mirco-optimization level).

> For the documentation, I suspect that `tree_decomposition` has been inadvertently removed from `src/doc/en/reference/graphs/index.rst`. 


Quite possibly. Anyways, if the patchbot comes back green, then positive review.



---

archive/issue_comments_607351.json:
```json
{
    "body": "<a id='comment:20'></a>\nA patchbot reports a reduction of the doctest coverage. I don't understand why. All methods (except methods defined inside another method) have either an `EXAMPLES` block or a `TESTS` block or both. Actually, 3 methods have only `TESTS` blocks and the patchbot says that the coverage is 11/14. Should I change these blocks to `EXAMPLES` (or add something) ?",
    "created_at": "2021-10-03T15:32:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607351",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:20'></a>
A patchbot reports a reduction of the doctest coverage. I don't understand why. All methods (except methods defined inside another method) have either an `EXAMPLES` block or a `TESTS` block or both. Actually, 3 methods have only `TESTS` blocks and the patchbot says that the coverage is 11/14. Should I change these blocks to `EXAMPLES` (or add something) ?



---

archive/issue_comments_607352.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-03T23:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607352",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_607353.json:
```json
{
    "body": "<a id='comment:21'></a>\nIt is picking up the internal functions:\n\n```\ntravis@apricot:~/sage-build$ ./sage --coverage src/sage/graphs/graph_decompositions/tree_decomposition.pyx \n------------------------------------------------------------------------\nSCORE src/sage/graphs/graph_decompositions/tree_decomposition.pyx: 78.6% (11 of 14)\n\nMissing documentation:\n     * line 1077: def rec(cut, cc)\n     * line 1172: def good_label(x)\n     * line 1175: def good_label(x)\n```\nso it's fine. My guess is this is a bug in the coverage script by not filtering them out properly because they are within a `cdef` function.",
    "created_at": "2021-10-03T23:22:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607353",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
It is picking up the internal functions:

```
travis@apricot:~/sage-build$ ./sage --coverage src/sage/graphs/graph_decompositions/tree_decomposition.pyx 
------------------------------------------------------------------------
SCORE src/sage/graphs/graph_decompositions/tree_decomposition.pyx: 78.6% (11 of 14)

Missing documentation:
     * line 1077: def rec(cut, cc)
     * line 1172: def good_label(x)
     * line 1175: def good_label(x)
```
so it's fine. My guess is this is a bug in the coverage script by not filtering them out properly because they are within a `cdef` function.



---

archive/issue_comments_607354.json:
```json
{
    "body": "<a id='comment:22'></a>\nThank you for the review !",
    "created_at": "2021-10-04T06:00:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607354",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'></a>
Thank you for the review !



---

archive/issue_events_099098.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-10T10:17:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30998#event-99098"
}
```



---

archive/issue_comments_607355.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-10T10:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607355",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_607356.json:
```json
{
    "body": "Changing branch from \"public/graphs/30998_treelength\" to \"26079ff80d81d7b42bd9a3dad9adc21882c22c79\"",
    "created_at": "2021-10-10T10:17:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30998#issuecomment-607356",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/graphs/30998_treelength" to "26079ff80d81d7b42bd9a3dad9adc21882c22c79"
