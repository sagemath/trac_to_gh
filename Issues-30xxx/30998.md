# Issue 30998: Compute the treelength of graphs

archive/issues_030761.json:
```json
{
    "assignees": [],
    "body": "We add a method to compute the treelength of a graph. This measure of tree-likeness express how the metric structure of a graph is close to a tree metric.\n\nSome implementation choices:\n- Check if the input graph is chordal (treelength 1)\n- Use decomposition by clique minimal separators as preprocessing, and so compute only the treelength of the atoms of the graph.\n- Use isomorphisms between atoms to avoid computing the treelength of isomorphic atoms.\n- Implement a specific class to compute the treelength of an atom (which is working for all graphs but without pre-processing)\n- The main algorithm is an adaptation of algorithm `'sage'` for treewidth.\n\nDepends on #30993\n\nBranch/Commit: **[`26079ff`](https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **David Coudert**\n\nComponent: **graph theory**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30998_\n\n",
    "closed_at": "2021-10-10T10:17:09Z",
    "created_at": "2020-12-03T19:20:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Compute the treelength of graphs",
    "type": "issue",
    "updated_at": "2021-10-10T10:17:09Z",
    "url": "https://github.com/sagemath/sage/issues/30998",
    "user": "https://github.com/dcoudert"
}
```
We add a method to compute the treelength of a graph. This measure of tree-likeness express how the metric structure of a graph is close to a tree metric.

Some implementation choices:
- Check if the input graph is chordal (treelength 1)
- Use decomposition by clique minimal separators as preprocessing, and so compute only the treelength of the atoms of the graph.
- Use isomorphisms between atoms to avoid computing the treelength of isomorphic atoms.
- Implement a specific class to compute the treelength of an atom (which is working for all graphs but without pre-processing)
- The main algorithm is an adaptation of algorithm `'sage'` for treewidth.

Depends on #30993

Branch/Commit: **[`26079ff`](https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79)**

Reviewer: **Travis Scrimshaw**

Author: **David Coudert**

Component: **graph theory**

_Issue created by migration from https://trac.sagemath.org/ticket/30998_





---

archive/issue_events_429547.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-03T19:20:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429547"
}
```



---

archive/issue_events_429548.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-03T19:20:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "eeeeee",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429548"
}
```



---

archive/issue_events_429549.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-03T19:20:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429549"
}
```



---

archive/issue_events_429550.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-03T19:20:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429550"
}
```



---

archive/issue_comments_496561.json:
```json
{
    "body": "Branch: **[public/graphs/30998_treelength](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30998_treelength)**",
    "created_at": "2020-12-03T19:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496561",
    "user": "https://github.com/dcoudert"
}
```

Branch: **[public/graphs/30998_treelength](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30998_treelength)**



---

archive/issue_comments_496562.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea8a5b224affa193f72938118905580253f411d3\"><code>ea8a5b2</code></a></td><td><code>move method treewidth to new module tree_Decomposition.pyx</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a999fee164eee5b2797ae12ea9fcacb7b161e26\"><code>9a999fe</code></a></td><td><code>add method to check if a tree decomposition is valid</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3842a49fda3495eeb5690bdaf737270b028329c8\"><code>3842a49</code></a></td><td><code>add method to reduce a tree decomposition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/030ee8646075ff26814c6b825d5e4c36e52daa6a\"><code>030ee86</code></a></td><td><code>all method treelength</code></td></tr></table>\n",
    "created_at": "2020-12-03T19:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496562",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea8a5b224affa193f72938118905580253f411d3"><code>ea8a5b2</code></a></td><td><code>move method treewidth to new module tree_Decomposition.pyx</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a999fee164eee5b2797ae12ea9fcacb7b161e26"><code>9a999fe</code></a></td><td><code>add method to check if a tree decomposition is valid</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3842a49fda3495eeb5690bdaf737270b028329c8"><code>3842a49</code></a></td><td><code>add method to reduce a tree decomposition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/030ee8646075ff26814c6b825d5e4c36e52daa6a"><code>030ee86</code></a></td><td><code>all method treelength</code></td></tr></table>




---

archive/issue_events_429551.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-03T19:21:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429551"
}
```



---

archive/issue_comments_496563.json:
```json
{
    "body": "Commit: **[`030ee86`](https://github.com/sagemath/sagetrac-mirror/commit/030ee8646075ff26814c6b825d5e4c36e52daa6a)**",
    "created_at": "2020-12-03T19:21:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496563",
    "user": "https://github.com/dcoudert"
}
```

Commit: **[`030ee86`](https://github.com/sagemath/sagetrac-mirror/commit/030ee8646075ff26814c6b825d5e4c36e52daa6a)**



---

archive/issue_comments_496564.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32bb9b247654231f6ffc9b4b678e25223279f833\"><code>32bb9b2</code></a></td><td><code>trac #30998: improve doctests coverage</code></td></tr></table>\n",
    "created_at": "2020-12-03T21:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496564",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32bb9b247654231f6ffc9b4b678e25223279f833"><code>32bb9b2</code></a></td><td><code>trac #30998: improve doctests coverage</code></td></tr></table>




---

archive/issue_comments_496565.json:
```json
{
    "body": "Changed commit from **[`030ee86`](https://github.com/sagemath/sagetrac-mirror/commit/030ee8646075ff26814c6b825d5e4c36e52daa6a)** to **[`32bb9b2`](https://github.com/sagemath/sagetrac-mirror/commit/32bb9b247654231f6ffc9b4b678e25223279f833)**",
    "created_at": "2020-12-03T21:19:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496565",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`030ee86`](https://github.com/sagemath/sagetrac-mirror/commit/030ee8646075ff26814c6b825d5e4c36e52daa6a)** to **[`32bb9b2`](https://github.com/sagemath/sagetrac-mirror/commit/32bb9b247654231f6ffc9b4b678e25223279f833)**



---

archive/issue_comments_496566.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nLet's see if the doctest coverage is better this way.",
    "created_at": "2020-12-03T21:20:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496566",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:3" align="right">comment:3</div>

Let's see if the doctest coverage is better this way.



---

archive/issue_comments_496567.json:
```json
{
    "body": "Changed commit from **[`32bb9b2`](https://github.com/sagemath/sagetrac-mirror/commit/32bb9b247654231f6ffc9b4b678e25223279f833)** to **[`5fbe0c5`](https://github.com/sagemath/sagetrac-mirror/commit/5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff)**",
    "created_at": "2020-12-05T15:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496567",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`32bb9b2`](https://github.com/sagemath/sagetrac-mirror/commit/32bb9b247654231f6ffc9b4b678e25223279f833)** to **[`5fbe0c5`](https://github.com/sagemath/sagetrac-mirror/commit/5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff)**



---

archive/issue_comments_496568.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff\"><code>5fbe0c5</code></a></td><td><code>trac #30998: further improvements</code></td></tr></table>\n",
    "created_at": "2020-12-05T15:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496568",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff"><code>5fbe0c5</code></a></td><td><code>trac #30998: further improvements</code></td></tr></table>




---

archive/issue_comments_496569.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI have simplified some parts of the code.",
    "created_at": "2020-12-05T15:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496569",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:5" align="right">comment:5</div>

I have simplified some parts of the code.



---

archive/issue_comments_496570.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI will rebase this ticket on top of #30993 (and remove dependency on #30986 which has been merged in 9.3.beta3).",
    "created_at": "2020-12-07T16:37:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496570",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:6" align="right">comment:6</div>

I will rebase this ticket on top of #30993 (and remove dependency on #30986 which has been merged in 9.3.beta3).



---

archive/issue_events_429552.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-07T16:37:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429552"
}
```



---

archive/issue_events_429553.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-07T16:37:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429553"
}
```



---

archive/issue_comments_496571.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a9d49a8c1fa2661216a9819b797013f081ba875\"><code>2a9d49a</code></a></td><td><code>trac #30993: minor improvement</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0beb45ca702112989d44ef5e24b90e2ce79286d\"><code>e0beb45</code></a></td><td><code>trac #30993: merged with 9.3.beta3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b53379e795cf0431f31769ae474780796399fc25\"><code>b53379e</code></a></td><td><code>trac #30993: further improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36b31b90cfa471ade415a6f2634274bfb071f54b\"><code>36b31b9</code></a></td><td><code>trac #30993: avoid extra validity test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64fa9bb42ce8e4f49a88e50cfd0d0aa1a5836346\"><code>64fa9bb</code></a></td><td><code>trac #30993: ensure consistence of parameter algorithm</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f9ca3e329325cfe9c71f2c9525098bcdaf85ba48\"><code>f9ca3e3</code></a></td><td><code>all method treelength</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5adc99db5896267b5ccc6bf2dd980037cc3b8e0c\"><code>5adc99d</code></a></td><td><code>trac #30998: improve doctests coverage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/51b783021b05179919492e426022b2410bd825bb\"><code>51b7830</code></a></td><td><code>trac #30998: further improvements</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eeaef0d887f97460e1a3bfdbbc21c0e847ad8873\"><code>eeaef0d</code></a></td><td><code>trac #30998: use method _from_tree_decompositions_of_atoms_to_tree_decomposition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a\"><code>4fb2610</code></a></td><td><code>trac #30998: corrections and faster doctest</code></td></tr></table>\n",
    "created_at": "2020-12-07T17:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496571",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a9d49a8c1fa2661216a9819b797013f081ba875"><code>2a9d49a</code></a></td><td><code>trac #30993: minor improvement</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0beb45ca702112989d44ef5e24b90e2ce79286d"><code>e0beb45</code></a></td><td><code>trac #30993: merged with 9.3.beta3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b53379e795cf0431f31769ae474780796399fc25"><code>b53379e</code></a></td><td><code>trac #30993: further improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36b31b90cfa471ade415a6f2634274bfb071f54b"><code>36b31b9</code></a></td><td><code>trac #30993: avoid extra validity test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64fa9bb42ce8e4f49a88e50cfd0d0aa1a5836346"><code>64fa9bb</code></a></td><td><code>trac #30993: ensure consistence of parameter algorithm</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f9ca3e329325cfe9c71f2c9525098bcdaf85ba48"><code>f9ca3e3</code></a></td><td><code>all method treelength</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5adc99db5896267b5ccc6bf2dd980037cc3b8e0c"><code>5adc99d</code></a></td><td><code>trac #30998: improve doctests coverage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/51b783021b05179919492e426022b2410bd825bb"><code>51b7830</code></a></td><td><code>trac #30998: further improvements</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eeaef0d887f97460e1a3bfdbbc21c0e847ad8873"><code>eeaef0d</code></a></td><td><code>trac #30998: use method _from_tree_decompositions_of_atoms_to_tree_decomposition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a"><code>4fb2610</code></a></td><td><code>trac #30998: corrections and faster doctest</code></td></tr></table>




---

archive/issue_comments_496572.json:
```json
{
    "body": "Changed commit from **[`5fbe0c5`](https://github.com/sagemath/sagetrac-mirror/commit/5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff)** to **[`4fb2610`](https://github.com/sagemath/sagetrac-mirror/commit/4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a)**",
    "created_at": "2020-12-07T17:52:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496572",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5fbe0c5`](https://github.com/sagemath/sagetrac-mirror/commit/5fbe0c5014ee11161f1107d07f3a7c7b74daa6ff)** to **[`4fb2610`](https://github.com/sagemath/sagetrac-mirror/commit/4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a)**



---

archive/issue_comments_496573.json:
```json
{
    "body": "Changed dependencies from **#30986** to **#30993**",
    "created_at": "2020-12-07T17:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496573",
    "user": "https://github.com/dcoudert"
}
```

Changed dependencies from **#30986** to **#30993**



---

archive/issue_comments_496574.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI have rebased this ticket over #30993 (instead of #30986). I hope I did it correctly...",
    "created_at": "2020-12-07T17:56:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496574",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:8" align="right">comment:8</div>

I have rebased this ticket over #30993 (instead of #30986). I hope I did it correctly...



---

archive/issue_events_429554.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-07T17:56:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429554"
}
```



---

archive/issue_events_429555.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-12-07T17:56:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429555"
}
```



---

archive/issue_events_429556.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429556"
}
```



---

archive/issue_events_429557.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429557"
}
```



---

archive/issue_comments_496575.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496575",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_429558.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429558"
}
```



---

archive/issue_events_429559.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429559"
}
```



---

archive/issue_comments_496576.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496576",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_496577.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d1ab94dc3fa123934478ba14a681ee8bf2658237\"><code>d1ab94d</code></a></td><td><code>trac #30998: fix merge conflict</code></td></tr></table>\n",
    "created_at": "2021-09-18T15:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496577",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d1ab94dc3fa123934478ba14a681ee8bf2658237"><code>d1ab94d</code></a></td><td><code>trac #30998: fix merge conflict</code></td></tr></table>




---

archive/issue_comments_496578.json:
```json
{
    "body": "Changed commit from **[`4fb2610`](https://github.com/sagemath/sagetrac-mirror/commit/4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a)** to **[`d1ab94d`](https://github.com/sagemath/sagetrac-mirror/commit/d1ab94dc3fa123934478ba14a681ee8bf2658237)**",
    "created_at": "2021-09-18T15:51:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496578",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4fb2610`](https://github.com/sagemath/sagetrac-mirror/commit/4fb2610585cc1ed5e28df6c4a57921a6ca7e2d5a)** to **[`d1ab94d`](https://github.com/sagemath/sagetrac-mirror/commit/d1ab94dc3fa123934478ba14a681ee8bf2658237)**



---

archive/issue_comments_496579.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nFix merge conflict with 9.5.beta1",
    "created_at": "2021-09-18T15:52:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496579",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:12" align="right">comment:12</div>

Fix merge conflict with 9.5.beta1



---

archive/issue_comments_496580.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSome little comments:\n\nI know Matthias would like the `from sage.functions.other import ceil` import to be in the method that uses it to help him with the Sage modularization.\n\nThe text for `OUTPUT:` and `ALGORITHM:` should not be indented.\n\nIn `treelength()` and `_treelength()`, do you want to give some of your variables type information? For example, isn't `cc` a `set`?\n\nShouldn't `__destroy__` be `__dealloc__`?\n\n```diff\n-    TESTS::\n+    TESTS:\n \n     Check that the decomposition by clique separators is valid::\n```",
    "created_at": "2021-10-03T08:47:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496580",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Some little comments:

I know Matthias would like the `from sage.functions.other import ceil` import to be in the method that uses it to help him with the Sage modularization.

The text for `OUTPUT:` and `ALGORITHM:` should not be indented.

In `treelength()` and `_treelength()`, do you want to give some of your variables type information? For example, isn't `cc` a `set`?

Shouldn't `__destroy__` be `__dealloc__`?

```diff
-    TESTS::
+    TESTS:
 
     Check that the decomposition by clique separators is valid::
```



---

archive/issue_comments_496581.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6acc4471c3a87a7d25b9f1f8a80e8ff419445f2e\"><code>6acc447</code></a></td><td><code>trac #30998: merged with 9.5.beta2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4764e6085d7598756fe20367f13ee4a99b7f4806\"><code>4764e60</code></a></td><td><code>trac #30998: review comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01d200b8f047ddc356dad7eb3172530f6fe1eee8\"><code>01d200b</code></a></td><td><code>trac #30998: ensure that the documentation is built</code></td></tr></table>\n",
    "created_at": "2021-10-03T10:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496581",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6acc4471c3a87a7d25b9f1f8a80e8ff419445f2e"><code>6acc447</code></a></td><td><code>trac #30998: merged with 9.5.beta2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4764e6085d7598756fe20367f13ee4a99b7f4806"><code>4764e60</code></a></td><td><code>trac #30998: review comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01d200b8f047ddc356dad7eb3172530f6fe1eee8"><code>01d200b</code></a></td><td><code>trac #30998: ensure that the documentation is built</code></td></tr></table>




---

archive/issue_comments_496582.json:
```json
{
    "body": "Changed commit from **[`d1ab94d`](https://github.com/sagemath/sagetrac-mirror/commit/d1ab94dc3fa123934478ba14a681ee8bf2658237)** to **[`01d200b`](https://github.com/sagemath/sagetrac-mirror/commit/01d200b8f047ddc356dad7eb3172530f6fe1eee8)**",
    "created_at": "2021-10-03T10:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496582",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d1ab94d`](https://github.com/sagemath/sagetrac-mirror/commit/d1ab94dc3fa123934478ba14a681ee8bf2658237)** to **[`01d200b`](https://github.com/sagemath/sagetrac-mirror/commit/01d200b8f047ddc356dad7eb3172530f6fe1eee8)**



---

archive/issue_comments_496583.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI have implemented your comments, except for typing. I'm not sure how to add types information. It has not yet been done in the graph module.\n\nSurprisingly, the documentation of `tree_decomposition` was not built. I added it and made a few corrections.",
    "created_at": "2021-10-03T10:56:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496583",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:15" align="right">comment:15</div>

I have implemented your comments, except for typing. I'm not sure how to add types information. It has not yet been done in the graph module.

Surprisingly, the documentation of `tree_decomposition` was not built. I added it and made a few corrections.



---

archive/issue_comments_496584.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@dcoudert](#comment:15):\n> I have implemented your comments, except for typing. I'm not sure how to add types information. It has not yet been done in the graph module.\n\nI meant for Cython, like `cdef list result`.\n\n> Surprisingly, the documentation of `tree_decomposition` was not built. I added it and made a few corrections.\n\nThat is quite surprising. Well, let's wait for the patchbot.",
    "created_at": "2021-10-03T11:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496584",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@dcoudert](#comment:15):
> I have implemented your comments, except for typing. I'm not sure how to add types information. It has not yet been done in the graph module.

I meant for Cython, like `cdef list result`.

> Surprisingly, the documentation of `tree_decomposition` was not built. I added it and made a few corrections.

That is quite surprising. Well, let's wait for the patchbot.



---

archive/issue_comments_496585.json:
```json
{
    "body": "Changed commit from **[`01d200b`](https://github.com/sagemath/sagetrac-mirror/commit/01d200b8f047ddc356dad7eb3172530f6fe1eee8)** to **[`26079ff`](https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79)**",
    "created_at": "2021-10-03T12:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496585",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`01d200b`](https://github.com/sagemath/sagetrac-mirror/commit/01d200b8f047ddc356dad7eb3172530f6fe1eee8)** to **[`26079ff`](https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79)**



---

archive/issue_comments_496586.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da449a214a214b1125af78540f20cbd28be997ee\"><code>da449a2</code></a></td><td><code>trac #30998: add some type informations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79\"><code>26079ff</code></a></td><td><code>trac #30998: minor details</code></td></tr></table>\n",
    "created_at": "2021-10-03T12:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496586",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da449a214a214b1125af78540f20cbd28be997ee"><code>da449a2</code></a></td><td><code>trac #30998: add some type informations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79"><code>26079ff</code></a></td><td><code>trac #30998: minor details</code></td></tr></table>




---

archive/issue_comments_496587.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI added a few type informations.\n\nFor the documentation, I suspect that `tree_decomposition` has been inadvertently removed from `src/doc/en/reference/graphs/index.rst`.",
    "created_at": "2021-10-03T12:27:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496587",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:18" align="right">comment:18</div>

I added a few type informations.

For the documentation, I suspect that `tree_decomposition` has been inadvertently removed from `src/doc/en/reference/graphs/index.rst`.



---

archive/issue_comments_496588.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-10-03T12:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496588",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_496589.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@dcoudert](#comment:18):\n> I added a few type informations.\n\nThanks. That should make it run a bit faster (although it probably is at the mirco-optimization level).\n\n> For the documentation, I suspect that `tree_decomposition` has been inadvertently removed from `src/doc/en/reference/graphs/index.rst`. \n\nQuite possibly. Anyways, if the patchbot comes back green, then positive review.",
    "created_at": "2021-10-03T12:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496589",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@dcoudert](#comment:18):
> I added a few type informations.

Thanks. That should make it run a bit faster (although it probably is at the mirco-optimization level).

> For the documentation, I suspect that `tree_decomposition` has been inadvertently removed from `src/doc/en/reference/graphs/index.rst`. 

Quite possibly. Anyways, if the patchbot comes back green, then positive review.



---

archive/issue_comments_496590.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nA patchbot reports a reduction of the doctest coverage. I don't understand why. All methods (except methods defined inside another method) have either an `EXAMPLES` block or a `TESTS` block or both. Actually, 3 methods have only `TESTS` blocks and the patchbot says that the coverage is 11/14. Should I change these blocks to `EXAMPLES` (or add something) ?",
    "created_at": "2021-10-03T15:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496590",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:20" align="right">comment:20</div>

A patchbot reports a reduction of the doctest coverage. I don't understand why. All methods (except methods defined inside another method) have either an `EXAMPLES` block or a `TESTS` block or both. Actually, 3 methods have only `TESTS` blocks and the patchbot says that the coverage is 11/14. Should I change these blocks to `EXAMPLES` (or add something) ?



---

archive/issue_events_429560.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-10-03T23:22:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429560"
}
```



---

archive/issue_events_429561.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-10-03T23:22:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429561"
}
```



---

archive/issue_comments_496591.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIt is picking up the internal functions:\n\n```\ntravis@apricot:~/sage-build$ ./sage --coverage src/sage/graphs/graph_decompositions/tree_decomposition.pyx \n------------------------------------------------------------------------\nSCORE src/sage/graphs/graph_decompositions/tree_decomposition.pyx: 78.6% (11 of 14)\n\nMissing documentation:\n     * line 1077: def rec(cut, cc)\n     * line 1172: def good_label(x)\n     * line 1175: def good_label(x)\n```\nso it's fine. My guess is this is a bug in the coverage script by not filtering them out properly because they are within a `cdef` function.",
    "created_at": "2021-10-03T23:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496591",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

It is picking up the internal functions:

```
travis@apricot:~/sage-build$ ./sage --coverage src/sage/graphs/graph_decompositions/tree_decomposition.pyx 
------------------------------------------------------------------------
SCORE src/sage/graphs/graph_decompositions/tree_decomposition.pyx: 78.6% (11 of 14)

Missing documentation:
     * line 1077: def rec(cut, cc)
     * line 1172: def good_label(x)
     * line 1175: def good_label(x)
```
so it's fine. My guess is this is a bug in the coverage script by not filtering them out properly because they are within a `cdef` function.



---

archive/issue_comments_496592.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThank you for the review !",
    "created_at": "2021-10-04T06:00:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496592",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:22" align="right">comment:22</div>

Thank you for the review !



---

archive/issue_events_429562.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-10T10:17:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429562"
}
```



---

archive/issue_events_429563.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5da520be8a91b8e8878882c15db8153caf82e172",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-10-10T10:17:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30998#event-429563"
}
```



---

archive/issue_comments_496593.json:
```json
{
    "body": "Changed branch from **[public/graphs/30998_treelength](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30998_treelength)** to **[`26079ff`](https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79)**",
    "created_at": "2021-10-10T10:17:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30998",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30998#issuecomment-496593",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/graphs/30998_treelength](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30998_treelength)** to **[`26079ff`](https://github.com/sagemath/sagetrac-mirror/commit/26079ff80d81d7b42bd9a3dad9adc21882c22c79)**
