# Issue 30633: sympow gives "RuntimeError: failed to compute analytic rank" doctest failures

archive/issues_030396.json:
```json
{
    "assignees": [],
    "body": "On Ubuntu 18.04 + 9.2.beta13, running\n\n```\nsage -tp src/sage/lfunctions/sympow.py src/sage/schemes/elliptic_curves/ell_rational_field.py\n```\ngives\n\n```\n----------------------------------------------------------------------\nsage -t --random-seed=0 src/sage/lfunctions/sympow.py  # 3 doctests failed\nsage -t --random-seed=0 src/sage/schemes/elliptic_curves/ell_rational_field.py  # 2 doctests failed\n----------------------------------------------------------------------\n```\nwith errors looking like:\n\n```\n**********************************************************************\nFile \"src/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1502, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank\nFailed example:\n    E.analytic_rank(algorithm='all')\nException raised:\n    Traceback (most recent call last):\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank[5]>\", line 1, in <module>\n        E.analytic_rank(algorithm='all')\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1567, in analytic_rank\n        self.analytic_rank('rubinstein'), self.analytic_rank('sympow')])\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py\", line 1551, in analytic_rank\n        return sympow.analytic_rank(self)[0]\n      File \"/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/lfunctions/sympow.py\", line 299, in analytic_rank\n        raise RuntimeError(\"failed to compute analytic rank\")\n    RuntimeError: failed to compute analytic rank\n**********************************************************************\n```\n\nThat issue was already reported at #25856.\n\nA recent upgrade of sympow was made at #3360.\n\nCC:  @slel @sagetrac-stephen @dimpase @orlitzky @mkoeppe\n\nComponent: **build: configure**\n\nKeywords: **sympow**\n\nAuthor: **Dima Pasechnik**\n\nBranch/Commit: **[`0338db7`](https://github.com/sagemath/sagetrac-mirror/commit/0338db7f2afee09b4b15e75643eb83b910faf899)**\n\nReviewer: **S\u00e9bastien Labb\u00e9**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30633_\n\n",
    "closed_at": "2020-11-15T22:47:29Z",
    "created_at": "2020-09-22T20:32:40Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sympow gives \"RuntimeError: failed to compute analytic rank\" doctest failures",
    "type": "issue",
    "updated_at": "2020-11-15T22:47:29Z",
    "url": "https://github.com/sagemath/sage/issues/30633",
    "user": "https://github.com/seblabbe"
}
```
On Ubuntu 18.04 + 9.2.beta13, running

```
sage -tp src/sage/lfunctions/sympow.py src/sage/schemes/elliptic_curves/ell_rational_field.py
```
gives

```
----------------------------------------------------------------------
sage -t --random-seed=0 src/sage/lfunctions/sympow.py  # 3 doctests failed
sage -t --random-seed=0 src/sage/schemes/elliptic_curves/ell_rational_field.py  # 2 doctests failed
----------------------------------------------------------------------
```
with errors looking like:

```
**********************************************************************
File "src/sage/schemes/elliptic_curves/ell_rational_field.py", line 1502, in sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank
Failed example:
    E.analytic_rank(algorithm='all')
Exception raised:
    Traceback (most recent call last):
      File "/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.schemes.elliptic_curves.ell_rational_field.EllipticCurve_rational_field.analytic_rank[5]>", line 1, in <module>
        E.analytic_rank(algorithm='all')
      File "/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1567, in analytic_rank
        self.analytic_rank('rubinstein'), self.analytic_rank('sympow')])
      File "/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/schemes/elliptic_curves/ell_rational_field.py", line 1551, in analytic_rank
        return sympow.analytic_rank(self)[0]
      File "/home/slabbe/GitBox/sage/local/lib/python3.8/site-packages/sage/lfunctions/sympow.py", line 299, in analytic_rank
        raise RuntimeError("failed to compute analytic rank")
    RuntimeError: failed to compute analytic rank
**********************************************************************
```

That issue was already reported at #25856.

A recent upgrade of sympow was made at #3360.

CC:  @slel @sagetrac-stephen @dimpase @orlitzky @mkoeppe

Component: **build: configure**

Keywords: **sympow**

Author: **Dima Pasechnik**

Branch/Commit: **[`0338db7`](https://github.com/sagemath/sagetrac-mirror/commit/0338db7f2afee09b4b15e75643eb83b910faf899)**

Reviewer: **Sébastien Labbé**

_Issue created by migration from https://trac.sagemath.org/ticket/30633_





---

archive/issue_events_419184.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-09-22T20:32:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419184"
}
```



---

archive/issue_events_419185.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-09-22T20:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419185"
}
```



---

archive/issue_events_419186.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-09-22T20:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419186"
}
```



---

archive/issue_events_419187.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-09-22T20:32:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419187"
}
```



---

archive/issue_comments_488831.json:
```json
{
    "body": "Changed keywords from none to **sympow**",
    "created_at": "2020-09-24T02:56:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488831",
    "user": "https://github.com/slel"
}
```

Changed keywords from none to **sympow**



---

archive/issue_events_419188.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419188"
}
```



---

archive/issue_events_419189.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419189"
}
```



---

archive/issue_comments_488832.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -35,3 +35,7 @@\n     RuntimeError: failed to compute analytic rank\n **********************************************************************\n ```\n+\n+That issue was already reported at #25856.\n+\n+A recent upgrade of sympow was made at #3360.\n``````\n",
    "created_at": "2020-11-01T20:00:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488832",
    "user": "https://github.com/seblabbe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -35,3 +35,7 @@
     RuntimeError: failed to compute analytic rank
 **********************************************************************
 ```
+
+That issue was already reported at #25856.
+
+A recent upgrade of sympow was made at #3360.
``````




---

archive/issue_comments_488833.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI confirm I have the issue on Ubuntu 18.04 + 9.3.beta0 running Python 3.8.0.\n\nBut, I do not have this issue on Ubuntu 20.04 + 9.2.rc3 running Python 3.8.5.",
    "created_at": "2020-11-01T20:01:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488833",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:4" align="right">comment:4</div>

I confirm I have the issue on Ubuntu 18.04 + 9.3.beta0 running Python 3.8.0.

But, I do not have this issue on Ubuntu 20.04 + 9.2.rc3 running Python 3.8.5.



---

archive/issue_comments_488834.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nTo fix it, likely `build/pkgs/sympow/spkg-configure.m4` would need to be improved so that it rejects the broken system versions of sympow.",
    "created_at": "2020-11-01T20:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488834",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

To fix it, likely `build/pkgs/sympow/spkg-configure.m4` would need to be improved so that it rejects the broken system versions of sympow.



---

archive/issue_comments_488835.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nPrevious work in this direction was done in #30147",
    "created_at": "2020-11-01T20:03:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488835",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Previous work in this direction was done in #30147



---

archive/issue_comments_488836.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nAfter doing `sage -i sympow`, the issue disappears.",
    "created_at": "2020-11-01T20:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488836",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:7" align="right">comment:7</div>

After doing `sage -i sympow`, the issue disappears.



---

archive/issue_comments_488837.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOk, I see, the version on my system is 1.023:\n\n```\n$ sympow -version\n1.023 RELEASE (Debian 1.023-8)\n(sage-sh) $ sympow -version\n2.023.6 RELEASE\n```",
    "created_at": "2020-11-01T20:10:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488837",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:8" align="right">comment:8</div>

Ok, I see, the version on my system is 1.023:

```
$ sympow -version
1.023 RELEASE (Debian 1.023-8)
(sage-sh) $ sympow -version
2.023.6 RELEASE
```



---

archive/issue_comments_488838.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nAnd on Ubuntu 20.04, the version is:\n\n```\n$ sympow -version\n2.023.5 RELEASE (Debian 2.023.5-2)\n```\nwhich explains why it works on my other machine.",
    "created_at": "2020-11-01T20:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488838",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:9" align="right">comment:9</div>

And on Ubuntu 20.04, the version is:

```
$ sympow -version
2.023.5 RELEASE (Debian 2.023.5-2)
```
which explains why it works on my other machine.



---

archive/issue_comments_488839.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@seblabbe](#comment%3A8):\n> Ok, I see, the version on my system is 1.023:\n> \n> ```\n> $ sympow -version\n> 1.023 RELEASE (Debian 1.023-8)\n> (sage-sh) $ sympow -version\n> 2.023.6 RELEASE\n> ```\n\nCould you check your sympows as follows:\n\n```\n$ sympow -curve [1,-1,0,-79,289] -analrank\n$ sympow -curve [0,1,1,-2,0] -analrank\n```\n\nI believe the 2nd test, but not the 1st, should crash on your system sympow 1.023.\n\nIf so, we can add this test to the one we already do on #30147.",
    "created_at": "2020-11-01T22:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488839",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@seblabbe](#comment%3A8):
> Ok, I see, the version on my system is 1.023:
> 
> ```
> $ sympow -version
> 1.023 RELEASE (Debian 1.023-8)
> (sage-sh) $ sympow -version
> 2.023.6 RELEASE
> ```

Could you check your sympows as follows:

```
$ sympow -curve [1,-1,0,-79,289] -analrank
$ sympow -curve [0,1,1,-2,0] -analrank
```

I believe the 2nd test, but not the 1st, should crash on your system sympow 1.023.

If so, we can add this test to the one we already do on #30147.



---

archive/issue_comments_488840.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nOn Ubuntu 20.04, both commands are ok:\n\n```\n$ sympow -version\n2.023.5 RELEASE (Debian 2.023.5-2)\n\n$ sympow -curve [1,-1,0,-79,289] -analrank\nsympow 2.023.5 RELEASE (Debian 2.023.5-2)  (c) Mark Watkins --- see README and COPYING for details\nMinimal model of curve  is [1,-1,0,-79,289]\nAt 2: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nAt 117223: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nConductor is 234446\nsp 1: Conductor at 2 is 1+0, root number is 1\nsp 1: Euler factor at 2 is 1+1*x\nsp 1: Conductor at 117223 is 1+0, root number is -1\nsp 1: Euler factor at 117223 is 1-1*x\n1st sym power conductor is 234446, global root number is 1\nNT 1d0: 1064\nMaximal number of terms is 1064\n0.0E+00\nDone with small primes 1049\nL(E,1) appears to be zero 8.96886e-13\nNT 1d2: 702\n0.0E+00\nDone with small primes 1049\nL''(E,1) appears to be zero 7.93453e-16\nNT 1d4: 437\n0.0E+00\nDone with small primes 1049\nAnalytic Rank is 4 : leading L-term 8.94385e+00\n\n$ sympow -curve [0,1,1,-2,0] -analrank\nsympow 2.023.5 RELEASE (Debian 2.023.5-2)  (c) Mark Watkins --- see README and COPYING for details\nMinimal model of curve  is [0,1,1,-2,0]\nAt 389: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nConductor is 389\nsp 1: Conductor at 389 is 1+0, root number is -1\nsp 1: Euler factor at 389 is 1-1*x\n1st sym power conductor is 389, global root number is 1\nNT 1d0: 43\nMaximal number of terms is 43\n0.0E+00\nDone with small primes 1049\nL(E,1) appears to be zero 4.06614e-17\nNT 1d2: 28\n0.0E+00\nDone with small primes 1049\nAnalytic Rank is 2 : leading L-term 7.59317e-01\n```\n\nOn Ubuntu 18.04, both commands return \"Segmentation Fault\":\n\n```\n$ sympow -version\n1.023 RELEASE (Debian 1.023-8)\n\n$ sympow -curve [1,-1,0,-79,289] -analrank\nsympow 1.023 RELEASE (Debian 1.023-8)  (c) Mark Watkins --- see README and COPYING for details\nMinimal model of curve  is [1,-1,0,-79,289]\nAt 2: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nAt 117223: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nConductor is 234446\nsp 1: Conductor at 2 is 1+0, root number is 1\nsp 1: Euler factor at 2 is 1+1*x\nsp 1: Conductor at 117223 is 1+0, root number is -1\nsp 1: Euler factor at 117223 is 1-1*x\n1st sym power conductor is 234446, global root number is 1\nNT 1d0: 1064\nMaximal number of terms is 1064\n0.0E+00\nDone with small primes 1049\nErreur de segmentation\n\n$ sympow -curve [0,1,1,-2,0] -analrank\nsympow 1.023 RELEASE (Debian 1.023-8)  (c) Mark Watkins --- see README and COPYING for details\nMinimal model of curve  is [0,1,1,-2,0]\nAt 389: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nConductor is 389\nsp 1: Conductor at 389 is 1+0, root number is -1\nsp 1: Euler factor at 389 is 1-1*x\n1st sym power conductor is 389, global root number is 1\nNT 1d0: 43\nMaximal number of terms is 43\n0.0E+00\nDone with small primes 1049\nErreur de segmentation\n```",
    "created_at": "2020-11-02T07:47:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488840",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:11" align="right">comment:11</div>

On Ubuntu 20.04, both commands are ok:

```
$ sympow -version
2.023.5 RELEASE (Debian 2.023.5-2)

$ sympow -curve [1,-1,0,-79,289] -analrank
sympow 2.023.5 RELEASE (Debian 2.023.5-2)  (c) Mark Watkins --- see README and COPYING for details
Minimal model of curve  is [1,-1,0,-79,289]
At 2: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
At 117223: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
Conductor is 234446
sp 1: Conductor at 2 is 1+0, root number is 1
sp 1: Euler factor at 2 is 1+1*x
sp 1: Conductor at 117223 is 1+0, root number is -1
sp 1: Euler factor at 117223 is 1-1*x
1st sym power conductor is 234446, global root number is 1
NT 1d0: 1064
Maximal number of terms is 1064
0.0E+00
Done with small primes 1049
L(E,1) appears to be zero 8.96886e-13
NT 1d2: 702
0.0E+00
Done with small primes 1049
L''(E,1) appears to be zero 7.93453e-16
NT 1d4: 437
0.0E+00
Done with small primes 1049
Analytic Rank is 4 : leading L-term 8.94385e+00

$ sympow -curve [0,1,1,-2,0] -analrank
sympow 2.023.5 RELEASE (Debian 2.023.5-2)  (c) Mark Watkins --- see README and COPYING for details
Minimal model of curve  is [0,1,1,-2,0]
At 389: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
Conductor is 389
sp 1: Conductor at 389 is 1+0, root number is -1
sp 1: Euler factor at 389 is 1-1*x
1st sym power conductor is 389, global root number is 1
NT 1d0: 43
Maximal number of terms is 43
0.0E+00
Done with small primes 1049
L(E,1) appears to be zero 4.06614e-17
NT 1d2: 28
0.0E+00
Done with small primes 1049
Analytic Rank is 2 : leading L-term 7.59317e-01
```

On Ubuntu 18.04, both commands return "Segmentation Fault":

```
$ sympow -version
1.023 RELEASE (Debian 1.023-8)

$ sympow -curve [1,-1,0,-79,289] -analrank
sympow 1.023 RELEASE (Debian 1.023-8)  (c) Mark Watkins --- see README and COPYING for details
Minimal model of curve  is [1,-1,0,-79,289]
At 2: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
At 117223: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
Conductor is 234446
sp 1: Conductor at 2 is 1+0, root number is 1
sp 1: Euler factor at 2 is 1+1*x
sp 1: Conductor at 117223 is 1+0, root number is -1
sp 1: Euler factor at 117223 is 1-1*x
1st sym power conductor is 234446, global root number is 1
NT 1d0: 1064
Maximal number of terms is 1064
0.0E+00
Done with small primes 1049
Erreur de segmentation

$ sympow -curve [0,1,1,-2,0] -analrank
sympow 1.023 RELEASE (Debian 1.023-8)  (c) Mark Watkins --- see README and COPYING for details
Minimal model of curve  is [0,1,1,-2,0]
At 389: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
Conductor is 389
sp 1: Conductor at 389 is 1+0, root number is -1
sp 1: Euler factor at 389 is 1-1*x
1st sym power conductor is 389, global root number is 1
NT 1d0: 43
Maximal number of terms is 43
0.0E+00
Done with small primes 1049
Erreur de segmentation
```



---

archive/issue_comments_488841.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nSo the input `[1,-1,0,-79,289]` does fail. Copy pasting what is in the current `sage/build/pkgs/sympow/spkg-configure.m4`, I get:\n\n```\n$ echo \"@<:@1,-1,0,-79,289@:>@\" | sympow -analrank | grep ^\"Analytic Rank is 4\"\n**ERROR** Input appears to be bogus\n```\n\non both Ubuntu 20.04 and Ubuntu 18.04.",
    "created_at": "2020-11-02T08:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488841",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:12" align="right">comment:12</div>

So the input `[1,-1,0,-79,289]` does fail. Copy pasting what is in the current `sage/build/pkgs/sympow/spkg-configure.m4`, I get:

```
$ echo "@<:@1,-1,0,-79,289@:>@" | sympow -analrank | grep ^"Analytic Rank is 4"
**ERROR** Input appears to be bogus
```

on both Ubuntu 20.04 and Ubuntu 18.04.



---

archive/issue_comments_488842.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI do get a different behavior if I write:\n\nOn Ubuntu 18.04, sympow 1.023:\n\n```\n$ sympow -curve [1,-1,0,-79,289] -analrank | grep ^\"Analytic Rank is 4\"\n```\n\nOn Ubuntu 20.04, sympow 2.023:\n\n```\n$ sympow -curve [1,-1,0,-79,289] -analrank | grep ^\"Analytic Rank is 4\"\nAnalytic Rank is 4 : leading L-term 8.94385e+00\n```",
    "created_at": "2020-11-02T08:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488842",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:13" align="right">comment:13</div>

I do get a different behavior if I write:

On Ubuntu 18.04, sympow 1.023:

```
$ sympow -curve [1,-1,0,-79,289] -analrank | grep ^"Analytic Rank is 4"
```

On Ubuntu 20.04, sympow 2.023:

```
$ sympow -curve [1,-1,0,-79,289] -analrank | grep ^"Analytic Rank is 4"
Analytic Rank is 4 : leading L-term 8.94385e+00
```



---

archive/issue_comments_488843.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@seblabbe](#comment%3A12):\n> So the input `[1,-1,0,-79,289]` does fail. Copy pasting what is in the current `sage/build/pkgs/sympow/spkg-configure.m4`, I get:\n> \n> ```\n> $ echo \"@<:@1,-1,0,-79,289@:>@\" | sympow -analrank | grep ^\"Analytic Rank is 4\"\n> **ERROR** Input appears to be bogus\n> ```\n> \n> on both Ubuntu 20.04 and Ubuntu 18.04.\n\nyou cannot in general just cut and paste from an m4 file into a shell. m4 files are preprocessed by autoconf, into ./configure (in m4 `[` and `]` have special meanining,\nso they have to replaced by `@<:@` and `@:>@`, respectively). In the latter you can see\n\n```\n      { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether sympow works well (cf. :trac:30147)\" >&5\n$as_echo_n \"checking whether sympow works well (cf. :trac:30147)... \" >&6; }\n      sympow_rank_test=`echo \"[1,-1,0,-79,289]\" | sympow -analrank | grep ^\"Analytic Rank is 4\"`\n      if test x\"$sympow_rank_test\" = x; then :\n\n          { $as_echo \"$as_me:${as_lineno-$LINENO}: result: no; cannot use system sympow\" >&5\n$as_echo \"no; cannot use system sympow\" >&6; }\n          sage_spkg_install_sympow=yes\n\n```\n\nCould you check the output of this in `config.log`. If the test succeeds, one should get something like\n\n```\nconfigure:32210: checking whether sympow works well (cf. :trac:30147)\nconfigure:32221: result: yes; use system sympow\n```\nthere (line numbers might differ)",
    "created_at": "2020-11-02T09:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488843",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@seblabbe](#comment%3A12):
> So the input `[1,-1,0,-79,289]` does fail. Copy pasting what is in the current `sage/build/pkgs/sympow/spkg-configure.m4`, I get:
> 
> ```
> $ echo "@<:@1,-1,0,-79,289@:>@" | sympow -analrank | grep ^"Analytic Rank is 4"
> **ERROR** Input appears to be bogus
> ```
> 
> on both Ubuntu 20.04 and Ubuntu 18.04.

you cannot in general just cut and paste from an m4 file into a shell. m4 files are preprocessed by autoconf, into ./configure (in m4 `[` and `]` have special meanining,
so they have to replaced by `@<:@` and `@:>@`, respectively). In the latter you can see

```
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether sympow works well (cf. :trac:30147)" >&5
$as_echo_n "checking whether sympow works well (cf. :trac:30147)... " >&6; }
      sympow_rank_test=`echo "[1,-1,0,-79,289]" | sympow -analrank | grep ^"Analytic Rank is 4"`
      if test x"$sympow_rank_test" = x; then :

          { $as_echo "$as_me:${as_lineno-$LINENO}: result: no; cannot use system sympow" >&5
$as_echo "no; cannot use system sympow" >&6; }
          sage_spkg_install_sympow=yes

```

Could you check the output of this in `config.log`. If the test succeeds, one should get something like

```
configure:32210: checking whether sympow works well (cf. :trac:30147)
configure:32221: result: yes; use system sympow
```
there (line numbers might differ)



---

archive/issue_comments_488844.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@dimpase](#comment%3A14): \n> you cannot in general just cut and paste from an m4 file into a shell.\n\noups, ok, I see.\n\nOn the machine running Ubuntu 18.04, I did\n`make sympow-clean`\nto remove the sage spkg I installed earlier. Then, I did `./configure`. Then\n\n```\n$ grep sympow config.log\n## Checking whether SageMath should install SPKG sympow... ##\nconfigure:32515: checking for sympow\nconfigure:32533: found /usr/bin/sympow\nconfigure:32545: result: /usr/bin/sympow\nconfigure:32558: checking whether sympow works well (cf. :trac:30147)\nconfigure:32569: result: yes; use system sympow\nconfigure:32579: will use system package and not install SPKG sympow\nconfigure:38100: result: sympow-2.023.6:                              using system package; SPKG will not be installed\nac_cv_path_SYMPOW=/usr/bin/sympow\n    sympow \\\n    sympow \\\n    sympow \\\n    sympow \\\nSYMPOW='/usr/bin/sympow'\ndeps_sympow = | pari\nvers_sympow = 2.023.6\n\n$ /usr/bin/sympow -version\n1.023 RELEASE (Debian 1.023-8)\n```\n\nso it seems that sympow version 1.023 is passing the test, whereas it should not.",
    "created_at": "2020-11-02T10:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488844",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@dimpase](#comment%3A14): 
> you cannot in general just cut and paste from an m4 file into a shell.

oups, ok, I see.

On the machine running Ubuntu 18.04, I did
`make sympow-clean`
to remove the sage spkg I installed earlier. Then, I did `./configure`. Then

```
$ grep sympow config.log
## Checking whether SageMath should install SPKG sympow... ##
configure:32515: checking for sympow
configure:32533: found /usr/bin/sympow
configure:32545: result: /usr/bin/sympow
configure:32558: checking whether sympow works well (cf. :trac:30147)
configure:32569: result: yes; use system sympow
configure:32579: will use system package and not install SPKG sympow
configure:38100: result: sympow-2.023.6:                              using system package; SPKG will not be installed
ac_cv_path_SYMPOW=/usr/bin/sympow
    sympow \
    sympow \
    sympow \
    sympow \
SYMPOW='/usr/bin/sympow'
deps_sympow = | pari
vers_sympow = 2.023.6

$ /usr/bin/sympow -version
1.023 RELEASE (Debian 1.023-8)
```

so it seems that sympow version 1.023 is passing the test, whereas it should not.



---

archive/issue_comments_488845.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n> so it seems that sympow version 1.023 is passing the test, whereas it should not.\n\nIn fact, sympow 1.023 does pass the test written with the \"echo\" way:\n\n```\n$ echo \"[1,-1,0,-79,289]\" | sympow -analrank\nsympow 1.023 RELEASE (Debian 1.023-8)  (c) Mark Watkins --- see README and COPYING for details\nMinimal model of curve  is [1,-1,0,-79,289]\nAt 2: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nAt 117223: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nConductor is 234446\nsp 1: Conductor at 2 is 1+0, root number is 1\nsp 1: Euler factor at 2 is 1+1*x\nsp 1: Conductor at 117223 is 1+0, root number is -1\nsp 1: Euler factor at 117223 is 1-1*x\n1st sym power conductor is 234446, global root number is 1\nNT 1d0: 1064\nMaximal number of terms is 1064\n0.0E+00\nDone with small primes 1049\nL(E,1) appears to be zero 8.96886e-13\nNT 1d2: 702\n0.0E+00\nDone with small primes 1049\nL''(E,1) appears to be zero 7.93453e-16\nNT 1d4: 437\n0.0E+00\nDone with small primes 1049\nAnalytic Rank is 4 : leading L-term 8.94385e+00\n```\n\nBut, it does not work with the following syntax:\n\n```\n$ sympow -curve [1,-1,0,-79,289] -analrank\nsympow 1.023 RELEASE (Debian 1.023-8)  (c) Mark Watkins --- see README and COPYING for details\nMinimal model of curve  is [1,-1,0,-79,289]\nAt 2: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nAt 117223: Inertia Group is  C1 MULTIPLICATIVE REDUCTION\nConductor is 234446\nsp 1: Conductor at 2 is 1+0, root number is 1\nsp 1: Euler factor at 2 is 1+1*x\nsp 1: Conductor at 117223 is 1+0, root number is -1\nsp 1: Euler factor at 117223 is 1-1*x\n1st sym power conductor is 234446, global root number is 1\nNT 1d0: 1064\nMaximal number of terms is 1064\n0.0E+00\nDone with small primes 1049\nErreur de segmentation\n```",
    "created_at": "2020-11-02T11:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488845",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:16" align="right">comment:16</div>

> so it seems that sympow version 1.023 is passing the test, whereas it should not.

In fact, sympow 1.023 does pass the test written with the "echo" way:

```
$ echo "[1,-1,0,-79,289]" | sympow -analrank
sympow 1.023 RELEASE (Debian 1.023-8)  (c) Mark Watkins --- see README and COPYING for details
Minimal model of curve  is [1,-1,0,-79,289]
At 2: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
At 117223: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
Conductor is 234446
sp 1: Conductor at 2 is 1+0, root number is 1
sp 1: Euler factor at 2 is 1+1*x
sp 1: Conductor at 117223 is 1+0, root number is -1
sp 1: Euler factor at 117223 is 1-1*x
1st sym power conductor is 234446, global root number is 1
NT 1d0: 1064
Maximal number of terms is 1064
0.0E+00
Done with small primes 1049
L(E,1) appears to be zero 8.96886e-13
NT 1d2: 702
0.0E+00
Done with small primes 1049
L''(E,1) appears to be zero 7.93453e-16
NT 1d4: 437
0.0E+00
Done with small primes 1049
Analytic Rank is 4 : leading L-term 8.94385e+00
```

But, it does not work with the following syntax:

```
$ sympow -curve [1,-1,0,-79,289] -analrank
sympow 1.023 RELEASE (Debian 1.023-8)  (c) Mark Watkins --- see README and COPYING for details
Minimal model of curve  is [1,-1,0,-79,289]
At 2: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
At 117223: Inertia Group is  C1 MULTIPLICATIVE REDUCTION
Conductor is 234446
sp 1: Conductor at 2 is 1+0, root number is 1
sp 1: Euler factor at 2 is 1+1*x
sp 1: Conductor at 117223 is 1+0, root number is -1
sp 1: Euler factor at 117223 is 1-1*x
1st sym power conductor is 234446, global root number is 1
NT 1d0: 1064
Maximal number of terms is 1064
0.0E+00
Done with small primes 1049
Erreur de segmentation
```



---

archive/issue_comments_488846.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nok, I will add a test with the other syntax, too. Thanks for helping to dig the problem (which makes me willing to curse in various languages :-)) up.",
    "created_at": "2020-11-02T11:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488846",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

ok, I will add a test with the other syntax, too. Thanks for helping to dig the problem (which makes me willing to curse in various languages :-)) up.



---

archive/issue_events_419190.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-02T14:08:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20number%20theory",
    "label_color": "0000ff",
    "label_name": "c: number theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419190"
}
```



---

archive/issue_events_419191.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-02T14:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419191"
}
```



---

archive/issue_events_419192.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-02T14:08:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419192"
}
```



---

archive/issue_comments_488847.json:
```json
{
    "body": "Commit: **[`0338db7`](https://github.com/sagemath/sagetrac-mirror/commit/0338db7f2afee09b4b15e75643eb83b910faf899)**",
    "created_at": "2020-11-02T14:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488847",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`0338db7`](https://github.com/sagemath/sagetrac-mirror/commit/0338db7f2afee09b4b15e75643eb83b910faf899)**



---

archive/issue_comments_488848.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nOK, here it is\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0338db7f2afee09b4b15e75643eb83b910faf899\"><code>0338db7</code></a></td><td><code>test sympow with -curve argument, & one more curve</code></td></tr></table>\n",
    "created_at": "2020-11-02T14:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488848",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

OK, here it is

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0338db7f2afee09b4b15e75643eb83b910faf899"><code>0338db7</code></a></td><td><code>test sympow with -curve argument, & one more curve</code></td></tr></table>




---

archive/issue_comments_488849.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/sympowcurvecli](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sympowcurvecli)**",
    "created_at": "2020-11-02T14:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488849",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/sympowcurvecli](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sympowcurvecli)**



---

archive/issue_comments_488850.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2020-11-02T14:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488850",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_488851.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nAfter `make configure` and  `./configure`, I now get:\n\n```\n$ grep sympow config.log\n## Checking whether SageMath should install SPKG sympow... ##\nconfigure:32515: checking for sympow\nconfigure:32533: found /usr/bin/sympow\nconfigure:32545: result: /usr/bin/sympow\nconfigure:32558: checking whether sympow works well (cf. :trac:30147 and :trac:30633)\nconfigure:32565: result: no; cannot use system sympow\nconfigure:32592: no suitable system package found for SPKG sympow\nconfigure:38102: result: sympow-2.023.6:                              no suitable system package; will be installed as an SPKG\nconfigure:39587: notice: the following SPKGs did not find equivalent system packages: _recommended boost coxeter3 gp2c isl libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata sympow tox\n  $ sudo apt-get install texlive-generic-extra texlive-xetex latexmk pandoc dvipng default-jdk ffmpeg libavdevice-dev libboost-dev pari-gp2c libisl-dev sympow\n```\n\n(I wonder if the sentence \"the following SPKGs did not find equivalent system packages\" should be improved, because it is not clear what is meant by \"equivalent\". Does it mean that the system `sympow` was not there at all in which case the user will think to install it or that `sympow` from the system was too old and there is nothing to do?)",
    "created_at": "2020-11-02T14:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488851",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:19" align="right">comment:19</div>

After `make configure` and  `./configure`, I now get:

```
$ grep sympow config.log
## Checking whether SageMath should install SPKG sympow... ##
configure:32515: checking for sympow
configure:32533: found /usr/bin/sympow
configure:32545: result: /usr/bin/sympow
configure:32558: checking whether sympow works well (cf. :trac:30147 and :trac:30633)
configure:32565: result: no; cannot use system sympow
configure:32592: no suitable system package found for SPKG sympow
configure:38102: result: sympow-2.023.6:                              no suitable system package; will be installed as an SPKG
configure:39587: notice: the following SPKGs did not find equivalent system packages: _recommended boost coxeter3 gp2c isl libsemigroups pari_elldata pari_galpol pari_nftables pari_seadata sympow tox
  $ sudo apt-get install texlive-generic-extra texlive-xetex latexmk pandoc dvipng default-jdk ffmpeg libavdevice-dev libboost-dev pari-gp2c libisl-dev sympow
```

(I wonder if the sentence "the following SPKGs did not find equivalent system packages" should be improved, because it is not clear what is meant by "equivalent". Does it mean that the system `sympow` was not there at all in which case the user will think to install it or that `sympow` from the system was too old and there is nothing to do?)



---

archive/issue_events_419193.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-11-02T15:02:12Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "title_is": "sympow gives \"RuntimeError: failed to compute analytic rank\" doctest failures",
    "title_was": "\"RuntimeError: failed to compute analytic rank\" doctest failures",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419193"
}
```



---

archive/issue_events_419194.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-11-02T15:03:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419194"
}
```



---

archive/issue_events_419195.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2020-11-02T15:03:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419195"
}
```



---

archive/issue_comments_488852.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI now get:\n\n```\n$ sage -tp src/sage/lfunctions/sympow.py src/sage/schemes/elliptic_curves/ell_rational_field.py\nGit branch: 30633\nUsing --optional=4ti2,build,cbc,ccache,cryptominisat,database_jones_numfield,debian,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg\nDoctesting 2 files using 8 threads.\nsage -t --warn-long 51.0 --random-seed=0 src/sage/lfunctions/sympow.py\n    [10 tests, 0.70 s]\nsage -t --warn-long 51.0 --random-seed=0 src/sage/schemes/elliptic_curves/ell_rational_field.py\n    [834 tests, 20.51 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\n```",
    "created_at": "2020-11-02T15:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488852",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:21" align="right">comment:21</div>

I now get:

```
$ sage -tp src/sage/lfunctions/sympow.py src/sage/schemes/elliptic_curves/ell_rational_field.py
Git branch: 30633
Using --optional=4ti2,build,cbc,ccache,cryptominisat,database_jones_numfield,debian,dochtml,dot2tex,e_antic,fricas,glucose,latte_int,libnauty,lidia,lrslib,memlimit,normaliz,notedown,pandoc_attributes,pip,pycosat,pynormaliz,rst2ipynb,sage,sage_numerical_backends_coin,sage_spkg
Doctesting 2 files using 8 threads.
sage -t --warn-long 51.0 --random-seed=0 src/sage/lfunctions/sympow.py
    [10 tests, 0.70 s]
sage -t --warn-long 51.0 --random-seed=0 src/sage/schemes/elliptic_curves/ell_rational_field.py
    [834 tests, 20.51 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
```



---

archive/issue_comments_488853.json:
```json
{
    "body": "Reviewer: **S\u00e9bastien Labb\u00e9**",
    "created_at": "2020-11-02T15:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488853",
    "user": "https://github.com/seblabbe"
}
```

Reviewer: **Sébastien Labbé**



---

archive/issue_comments_488854.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis might fix your problem:\n\nhttps://trac.sagemath.org/ticket/12858\n\nBy its nature, it is an intermittent bug, which explains your mystery.",
    "created_at": "2020-11-02T15:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488854",
    "user": "https://github.com/stephenmontgomerysmith"
}
```

<div id="comment:22" align="right">comment:22</div>

This might fix your problem:

https://trac.sagemath.org/ticket/12858

By its nature, it is an intermittent bug, which explains your mystery.



---

archive/issue_comments_488855.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI don't know if it is related, because on Ubuntu 18.04 with sympow version 1.023, there is no mystery: the command `sympow -curve [1,-1,0,-79,289] -analrank` systematically fails as well as:\n\n```\nsage: sympow.analytic_rank(EllipticCurve('11a'))                                                                              \nSegmentation fault\n---------------------------------------------------------------------------\nRuntimeError                              Traceback (most recent call last)\n<ipython-input-1-8cf6df7248bc> in <module>\n----> 1 sympow.analytic_rank(EllipticCurve('11a'))\n~/GitBox/sage/local/lib/python3.8/site-packages/sage/lfunctions/sympow.py in analytic_rank(self, E)\n    295         if i == -1:\n    296             print(self._fix_err(v))\n--> 297             raise RuntimeError(\"failed to compute analytic rank\")\n    298         j = v.rfind(':')\n    299         r = sage.rings.all.Integer(v[i + len(s):j])\nRuntimeError: failed to compute analytic rank\n```",
    "created_at": "2020-11-02T15:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488855",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:23" align="right">comment:23</div>

I don't know if it is related, because on Ubuntu 18.04 with sympow version 1.023, there is no mystery: the command `sympow -curve [1,-1,0,-79,289] -analrank` systematically fails as well as:

```
sage: sympow.analytic_rank(EllipticCurve('11a'))                                                                              
Segmentation fault
---------------------------------------------------------------------------
RuntimeError                              Traceback (most recent call last)
<ipython-input-1-8cf6df7248bc> in <module>
----> 1 sympow.analytic_rank(EllipticCurve('11a'))
~/GitBox/sage/local/lib/python3.8/site-packages/sage/lfunctions/sympow.py in analytic_rank(self, E)
    295         if i == -1:
    296             print(self._fix_err(v))
--> 297             raise RuntimeError("failed to compute analytic rank")
    298         j = v.rfind(':')
    299         r = sage.rings.all.Integer(v[i + len(s):j])
RuntimeError: failed to compute analytic rank
```



---

archive/issue_comments_488856.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWhy not try it and see?  BTW, I definitely identified a bug, so if this isn't the cause of this particular problem, it will likely cause someone else problems down the road.\n\n\nReplying to [@seblabbe](#comment%3A23):\n> I don't know if it is related, because on Ubuntu 18.04 with sympow version 1.023, there is no mystery: the command `sympow -curve [1,-1,0,-79,289] -analrank` systematically fails as well as:\n> \n> ```\n> sage: sympow.analytic_rank(EllipticCurve('11a'))                                                                              \n> Segmentation fault\n> ---------------------------------------------------------------------------\n> RuntimeError                              Traceback (most recent call last)\n> <ipython-input-1-8cf6df7248bc> in <module>\n> ----> 1 sympow.analytic_rank(EllipticCurve('11a'))\n> ~/GitBox/sage/local/lib/python3.8/site-packages/sage/lfunctions/sympow.py in analytic_rank(self, E)\n>     295         if i == -1:\n>     296             print(self._fix_err(v))\n> --> 297             raise RuntimeError(\"failed to compute analytic rank\")\n>     298         j = v.rfind(':')\n>     299         r = sage.rings.all.Integer(v[i + len(s):j])\n> RuntimeError: failed to compute analytic rank\n> ```",
    "created_at": "2020-11-02T15:20:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488856",
    "user": "https://github.com/stephenmontgomerysmith"
}
```

<div id="comment:24" align="right">comment:24</div>

Why not try it and see?  BTW, I definitely identified a bug, so if this isn't the cause of this particular problem, it will likely cause someone else problems down the road.


Replying to [@seblabbe](#comment%3A23):
> I don't know if it is related, because on Ubuntu 18.04 with sympow version 1.023, there is no mystery: the command `sympow -curve [1,-1,0,-79,289] -analrank` systematically fails as well as:
> 
> ```
> sage: sympow.analytic_rank(EllipticCurve('11a'))                                                                              
> Segmentation fault
> ---------------------------------------------------------------------------
> RuntimeError                              Traceback (most recent call last)
> <ipython-input-1-8cf6df7248bc> in <module>
> ----> 1 sympow.analytic_rank(EllipticCurve('11a'))
> ~/GitBox/sage/local/lib/python3.8/site-packages/sage/lfunctions/sympow.py in analytic_rank(self, E)
>     295         if i == -1:
>     296             print(self._fix_err(v))
> --> 297             raise RuntimeError("failed to compute analytic rank")
>     298         j = v.rfind(':')
>     299         r = sage.rings.all.Integer(v[i + len(s):j])
> RuntimeError: failed to compute analytic rank
> ```



---

archive/issue_comments_488857.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@stephenmontgomerysmith](#comment%3A24):\n> Why not try it and see? \n\nI don't see what I should try? Is your branch public? If yes, what is the name of the branch?\n\n> BTW, I definitely identified a bug, so if this isn't the cause of this particular problem, it will likely cause someone else problems down the road.\n\nOkay, so maybe it should be part of another ticket, since the bug described in the current ticket is already fixed by the proposed branch.",
    "created_at": "2020-11-02T16:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488857",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@stephenmontgomerysmith](#comment%3A24):
> Why not try it and see? 

I don't see what I should try? Is your branch public? If yes, what is the name of the branch?

> BTW, I definitely identified a bug, so if this isn't the cause of this particular problem, it will likely cause someone else problems down the road.

Okay, so maybe it should be part of another ticket, since the bug described in the current ticket is already fixed by the proposed branch.



---

archive/issue_comments_488858.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@seblabbe](#comment%3A25):\n> Replying to [@stephenmontgomerysmith](#comment%3A24):\n> > Why not try it and see? \n\n> \n> I don't see what I should try? Is your branch public? If yes, what is the name of the branch?\n\nsee #12858, more precisely \n[#12858 comment:16](https://github.com/sagemath/sage/issues/12858#comment:16)\nI gather this is Debian \"upstream\", with this bug still in.\n \nI agree that this is an upstream bug, and the problem is to identify the upstream...\n\n> \n> > BTW, I definitely identified a bug, so if this isn't the cause of this particular problem, it will likely cause someone else problems down the road.\n\n> \n> Okay, so maybe it should be part of another ticket, since the bug described in the current ticket is already fixed by the proposed branch.",
    "created_at": "2020-11-02T16:56:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488858",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@seblabbe](#comment%3A25):
> Replying to [@stephenmontgomerysmith](#comment%3A24):
> > Why not try it and see? 

> 
> I don't see what I should try? Is your branch public? If yes, what is the name of the branch?

see #12858, more precisely 
[#12858 comment:16](https://github.com/sagemath/sage/issues/12858#comment:16)
I gather this is Debian "upstream", with this bug still in.
 
I agree that this is an upstream bug, and the problem is to identify the upstream...

> 
> > BTW, I definitely identified a bug, so if this isn't the cause of this particular problem, it will likely cause someone else problems down the road.

> 
> Okay, so maybe it should be part of another ticket, since the bug described in the current ticket is already fixed by the proposed branch.



---

archive/issue_comments_488859.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThere is no branch I know of that contains this patch.  You will either have to hack the source code yourself, or wait until someone else puts it into a branch.\n\nReplying to [@dimpase](#comment%3A26):\n> Replying to [@seblabbe](#comment%3A25):\n> > Replying to [@stephenmontgomerysmith](#comment%3A24):\n> > > Why not try it and see? \n\n> > \n> > I don't see what I should try? Is your branch public? If yes, what is the name of the branch?\n\n> \n> see #12858, more precisely \n> [#12858 comment:16](https://github.com/sagemath/sage/issues/12858#comment:16)\n> I gather this is Debian \"upstream\", with this bug still in.\n>  \n> I agree that this is an upstream bug, and the problem is to identify the upstream...\n> \n> > \n> > > BTW, I definitely identified a bug, so if this isn't the cause of this particular problem, it will likely cause someone else problems down the road.\n\n> > \n> > Okay, so maybe it should be part of another ticket, since the bug described in the current ticket is already fixed by the proposed branch.",
    "created_at": "2020-11-02T17:32:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488859",
    "user": "https://github.com/stephenmontgomerysmith"
}
```

<div id="comment:27" align="right">comment:27</div>

There is no branch I know of that contains this patch.  You will either have to hack the source code yourself, or wait until someone else puts it into a branch.

Replying to [@dimpase](#comment%3A26):
> Replying to [@seblabbe](#comment%3A25):
> > Replying to [@stephenmontgomerysmith](#comment%3A24):
> > > Why not try it and see? 

> > 
> > I don't see what I should try? Is your branch public? If yes, what is the name of the branch?

> 
> see #12858, more precisely 
> [#12858 comment:16](https://github.com/sagemath/sage/issues/12858#comment:16)
> I gather this is Debian "upstream", with this bug still in.
>  
> I agree that this is an upstream bug, and the problem is to identify the upstream...
> 
> > 
> > > BTW, I definitely identified a bug, so if this isn't the cause of this particular problem, it will likely cause someone else problems down the road.

> > 
> > Okay, so maybe it should be part of another ticket, since the bug described in the current ticket is already fixed by the proposed branch.



---

archive/issue_comments_488860.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nIt looks like another fix was committed a while ago.  While the other fix wasn't technically correct, it should nevertheless have solved this issue.  So most likely this won't fix your particular problem.  Sorry.",
    "created_at": "2020-11-03T20:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488860",
    "user": "https://github.com/stephenmontgomerysmith"
}
```

<div id="comment:28" align="right">comment:28</div>

It looks like another fix was committed a while ago.  While the other fix wasn't technically correct, it should nevertheless have solved this issue.  So most likely this won't fix your particular problem.  Sorry.



---

archive/issue_comments_488861.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nReplying to [@seblabbe](#comment%3A19):\n> (I wonder if the sentence \"the following SPKGs did not find equivalent system packages\" should be improved, because it is not clear what is meant by \"equivalent\". Does it mean that the system `sympow` was not there at all in which case the user will think to install it or that `sympow` from the system was too old and there is nothing to do?)\n\nI created #30863 to address this issue.",
    "created_at": "2020-11-04T13:01:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488861",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:29" align="right">comment:29</div>

Replying to [@seblabbe](#comment%3A19):
> (I wonder if the sentence "the following SPKGs did not find equivalent system packages" should be improved, because it is not clear what is meant by "equivalent". Does it mean that the system `sympow` was not there at all in which case the user will think to install it or that `sympow` from the system was too old and there is nothing to do?)

I created #30863 to address this issue.



---

archive/issue_comments_488862.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@stephenmontgomerysmith](#comment%3A28):\n> It looks like another fix was committed a while ago.  While the other fix wasn't technically correct, it should nevertheless have solved this issue. \n\nI've proposed your change to upstream in https://gitlab.com/rezozer/forks/sympow/-/merge_requests/4\n\nSo it will eventually be fixed.",
    "created_at": "2020-11-04T15:16:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488862",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@stephenmontgomerysmith](#comment%3A28):
> It looks like another fix was committed a while ago.  While the other fix wasn't technically correct, it should nevertheless have solved this issue. 

I've proposed your change to upstream in https://gitlab.com/rezozer/forks/sympow/-/merge_requests/4

So it will eventually be fixed.



---

archive/issue_comments_488863.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/sympowcurvecli](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sympowcurvecli)** to **[`0338db7`](https://github.com/sagemath/sagetrac-mirror/commit/0338db7f2afee09b4b15e75643eb83b910faf899)**",
    "created_at": "2020-11-15T22:47:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30633#issuecomment-488863",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/sympowcurvecli](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/sympowcurvecli)** to **[`0338db7`](https://github.com/sagemath/sagetrac-mirror/commit/0338db7f2afee09b4b15e75643eb83b910faf899)**



---

archive/issue_events_419196.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-15T22:47:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419196"
}
```



---

archive/issue_events_419197.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ffa1106a54d174726af1e40f2bc0bf0dd84a1696",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-11-15T22:47:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30633",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30633#event-419197"
}
```
