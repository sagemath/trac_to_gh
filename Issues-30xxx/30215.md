# Issue 30215: "sage -startuptime" should accept file names too

archive/issues_030215.json:
```json
{
    "body": "CC:  @dimpase @tobiasdiez @fchapoton @jhpalmieri @tscrim @vbraun\n\n(from #30410)\n\nThis is so that all of the tox environments (#30410, #30408) can be run on files and directories.\n\nExample:\n\n```\n$ ./sage -startuptime src/sage/tensor/ src/sage/geometry/polyhedron/base.py\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30452\n\n",
    "closed_at": "2020-09-06T21:51:26Z",
    "created_at": "2020-08-27T21:02:11Z",
    "labels": [
        "component: doctest framework"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "\"sage -startuptime\" should accept file names too",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30215",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @tobiasdiez @fchapoton @jhpalmieri @tscrim @vbraun

(from #30410)

This is so that all of the tox environments (#30410, #30408) can be run on files and directories.

Example:

```
$ ./sage -startuptime src/sage/tensor/ src/sage/geometry/polyhedron/base.py
```


Issue created by migration from https://trac.sagemath.org/ticket/30452





---

archive/issue_comments_430184.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-29T00:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430184",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_430185.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-08-29T00:23:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430185",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_430186.json:
```json
{
    "body": "It's certainly true that `./sage --startuptime src/sage/homology/simplicial_set.py` raises an error without this branch and doesn't raise an error with it, but with this branch it produces no output. What is it supposed to do?\n\nBy the way, it makes me a little uncomfortable to use the same loop variable twice like this:\n\n```\nfor module_arg in cmdline_args:\n    ...\n    for module_arg in matching_modules:\n        ...\n```",
    "created_at": "2020-09-01T20:38:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430186",
    "user": "https://github.com/jhpalmieri"
}
```

It's certainly true that `./sage --startuptime src/sage/homology/simplicial_set.py` raises an error without this branch and doesn't raise an error with it, but with this branch it produces no output. What is it supposed to do?

By the way, it makes me a little uncomfortable to use the same loop variable twice like this:

```
for module_arg in cmdline_args:
    ...
    for module_arg in matching_modules:
        ...
```



---

archive/issue_comments_430187.json:
```json
{
    "body": "On the other hand, `./sage -startuptime src/sage/geometry/polyhedron/base.py` does produce output. I'm confused.",
    "created_at": "2020-09-01T20:39:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430187",
    "user": "https://github.com/jhpalmieri"
}
```

On the other hand, `./sage -startuptime src/sage/geometry/polyhedron/base.py` does produce output. I'm confused.



---

archive/issue_comments_430188.json:
```json
{
    "body": "I would also recommend an explicit `import os` statement. I'm not sure why the script works without it. Edit: I guess it's being imported from `sage.all`, but it would be better to make it explicit at the top.",
    "created_at": "2020-09-01T20:42:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430188",
    "user": "https://github.com/jhpalmieri"
}
```

I would also recommend an explicit `import os` statement. I'm not sure why the script works without it. Edit: I guess it's being imported from `sage.all`, but it would be better to make it explicit at the top.



---

archive/issue_comments_430189.json:
```json
{
    "body": "Without this ticket `./sage --startuptime sage.homology.simplicial_set` gives\n\n```\n[]\nTraceback (most recent call last):\n  File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/bin/sage-startuptime.py\", line 148, in <module>\n    raise ValueError('\"' + module_arg + '\" does not uniquely determine Sage module.')\nValueError: \"sage.homology.simplicial_set\" does not uniquely determine Sage module.\n```\nBefore working on this ticket, I had never used these scripts. I don't really know whether the above is expected, or a result of undetected bitrot over the years.\n\nI think that it only works for modules that are loaded when `sage.all` is loaded.",
    "created_at": "2020-09-01T20:48:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430189",
    "user": "https://github.com/mkoeppe"
}
```

Without this ticket `./sage --startuptime sage.homology.simplicial_set` gives

```
[]
Traceback (most recent call last):
  File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/bin/sage-startuptime.py", line 148, in <module>
    raise ValueError('"' + module_arg + '" does not uniquely determine Sage module.')
ValueError: "sage.homology.simplicial_set" does not uniquely determine Sage module.
```
Before working on this ticket, I had never used these scripts. I don't really know whether the above is expected, or a result of undetected bitrot over the years.

I think that it only works for modules that are loaded when `sage.all` is loaded.



---

archive/issue_comments_430190.json:
```json
{
    "body": "Is it worth printing a message if the file or module is not loaded when `sage.all` is loaded, rather than being completely silent?",
    "created_at": "2020-09-01T20:56:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430190",
    "user": "https://github.com/jhpalmieri"
}
```

Is it worth printing a message if the file or module is not loaded when `sage.all` is loaded, rather than being completely silent?



---

archive/issue_comments_430191.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-01T20:57:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430191",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430192.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-01T20:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430192",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_430193.json:
```json
{
    "body": "How about this version?",
    "created_at": "2020-09-01T20:59:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430193",
    "user": "https://github.com/mkoeppe"
}
```

How about this version?



---

archive/issue_comments_430194.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-01T22:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430194",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_430195.json:
```json
{
    "body": "Great, thank you for the changes.",
    "created_at": "2020-09-01T22:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430195",
    "user": "https://github.com/jhpalmieri"
}
```

Great, thank you for the changes.



---

archive/issue_comments_430196.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-09-01T23:08:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430196",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_events_079040.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-06T21:51:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30215#event-79040"
}
```



---

archive/issue_comments_430197.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-06T21:51:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30215",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30215#issuecomment-430197",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
