# Issue 30778: sage.doctest.control: Exclude doctests in files via file directives ''# sage.doctest: optional - xyz'

archive/issues_030541.json:
```json
{
    "assignees": [],
    "body": "When a file is marked `# sage.doctest: optional - xyz`, we omit it from doctesting unless `--optional=xyz` is given.\n\nThis will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)\n\nWe do this by extending `sage.doctest.control.skipfile`, which already parses files for `# nodoctest` file directives.\n\nPrevious related proposals/discussions: #3260, #20427\n\nAlso related: #30746\n\n\nCC:  @simon-king-jena @kiwifb @roed314 @saraedum @nthiery @videlec\n\nKeywords: **sd111**\n\nBranch/Commit: **[5cc1288](https://github.com/sagemath/sagetrac-mirror/commit/5cc1288bec7a4c165723f8fd20d14843547faccc)**\n\nReviewer: **John Palmieri, Matthias Koeppe**\n\nAuthor: **Matthias Koeppe, John Palmieri**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30778_\n\n",
    "closed_at": "2021-10-10T10:17:16Z",
    "created_at": "2020-10-16T20:58:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "sage.doctest.control: Exclude doctests in files via file directives ''# sage.doctest: optional - xyz'",
    "type": "issue",
    "updated_at": "2021-10-10T10:17:16Z",
    "url": "https://github.com/sagemath/sage/issues/30778",
    "user": "https://github.com/mkoeppe"
}
```
When a file is marked `# sage.doctest: optional - xyz`, we omit it from doctesting unless `--optional=xyz` is given.

This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)

We do this by extending `sage.doctest.control.skipfile`, which already parses files for `# nodoctest` file directives.

Previous related proposals/discussions: #3260, #20427

Also related: #30746


CC:  @simon-king-jena @kiwifb @roed314 @saraedum @nthiery @videlec

Keywords: **sd111**

Branch/Commit: **[5cc1288](https://github.com/sagemath/sagetrac-mirror/commit/5cc1288bec7a4c165723f8fd20d14843547faccc)**

Reviewer: **John Palmieri, Matthias Koeppe**

Author: **Matthias Koeppe, John Palmieri**

_Issue created by migration from https://trac.sagemath.org/ticket/30778_





---

archive/issue_events_406258.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-16T20:58:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406258"
}
```



---

archive/issue_events_406259.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-16T20:58:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
    "label_color": "000080",
    "label_name": "component: doctest framework",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406259"
}
```



---

archive/issue_events_406260.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-16T20:58:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406260"
}
```



---

archive/issue_events_406261.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-16T20:58:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406261"
}
```



---

archive/issue_events_406262.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-16T22:00:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406262"
}
```



---

archive/issue_events_406263.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-16T22:00:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406263"
}
```



---

archive/issue_comments_495148.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495148",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">Comment 2</div>

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_495149.json:
```json
{
    "body": "Changed keywords from none to **sd111**",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495149",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from none to **sd111**



---

archive/issue_events_406264.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-12T19:01:39Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406264"
}
```



---

archive/issue_events_406265.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-12T19:01:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406265"
}
```



---

archive/issue_comments_495150.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n-When a file is marked `sage_setup: distribution = ...` (#29705), we omit it from doctesting.\n+When a file is marked `sage_setup: distribution = ...` (#29705) and this distribution is not installed, we omit it from doctesting.\n \n+This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)\n \n``````\n",
    "created_at": "2021-02-12T19:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495150",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
-When a file is marked `sage_setup: distribution = ...` (#29705), we omit it from doctesting.
+When a file is marked `sage_setup: distribution = ...` (#29705) and this distribution is not installed, we omit it from doctesting.
 
+This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)
 
``````




---

archive/issue_comments_495151.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,3 +2,4 @@\n \n This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)\n \n+We do this by extending `sage.doctest.control.skipfile`, which already parses files for `# nodoctest` file directives.\n``````\n",
    "created_at": "2021-02-13T03:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495151",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,3 +2,4 @@
 
 This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)
 
+We do this by extending `sage.doctest.control.skipfile`, which already parses files for `# nodoctest` file directives.
``````




---

archive/issue_comments_495152.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nWe could also parse a directive \"# doctest: optional - ...\" in the file header",
    "created_at": "2021-02-17T21:37:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495152",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">Comment 6</div>

We could also parse a directive "# doctest: optional - ..." in the file header



---

archive/issue_comments_495153.json:
```json
{
    "body": "Branch: **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**",
    "created_at": "2021-02-18T00:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495153",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**



---

archive/issue_comments_495154.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@mkoeppe](#comment%3A6):\n> We could also parse a directive \"# doctest: optional - ...\" in the file header\n\nThis has been discussed in the past and rejected, on the grounds that the directive is hidden when people look at the reference manual or just do `x.method?`, so they may expect those tests to work all the time. For any of these proposed directives, the corresponding page in the reference manual should have a clear warning. I don't know what to do about the help string for each relevant method/function/class. It's overkill to modify the help string based on such a directive, right?",
    "created_at": "2021-02-18T00:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495154",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@mkoeppe](#comment%3A6):
> We could also parse a directive "# doctest: optional - ..." in the file header

This has been discussed in the past and rejected, on the grounds that the directive is hidden when people look at the reference manual or just do `x.method?`, so they may expect those tests to work all the time. For any of these proposed directives, the corresponding page in the reference manual should have a clear warning. I don't know what to do about the help string for each relevant method/function/class. It's overkill to modify the help string based on such a directive, right?



---

archive/issue_comments_495155.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to none",
    "created_at": "2021-02-18T00:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495155",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to none



---

archive/issue_comments_495156.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a\">b92e036</a></td><td><code>sage.doctest: Handle file directives '# sage.doctest: optional - xyz'</code></td></tr></table>\n",
    "created_at": "2021-02-18T00:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495156",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">Comment 9</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a">b92e036</a></td><td><code>sage.doctest: Handle file directives '# sage.doctest: optional - xyz'</code></td></tr></table>




---

archive/issue_comments_495157.json:
```json
{
    "body": "Branch: **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**",
    "created_at": "2021-02-18T00:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495157",
    "user": "https://github.com/jhpalmieri"
}
```

Branch: **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**



---

archive/issue_comments_495158.json:
```json
{
    "body": "Commit: **[b92e036](https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a)**",
    "created_at": "2021-02-18T00:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495158",
    "user": "https://github.com/jhpalmieri"
}
```

Commit: **[b92e036](https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a)**



---

archive/issue_comments_495159.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-When a file is marked `sage_setup: distribution = ...` (#29705) and this distribution is not installed, we omit it from doctesting.\n+When a file is marked `# sage.doctest: optional - xyz`, we omit it from doctesting unless `--optional=xyz` is given.\n \n This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)\n \n``````\n",
    "created_at": "2021-02-18T00:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495159",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-When a file is marked `sage_setup: distribution = ...` (#29705) and this distribution is not installed, we omit it from doctesting.
+When a file is marked `# sage.doctest: optional - xyz`, we omit it from doctesting unless `--optional=xyz` is given.
 
 This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)
 
``````




---

archive/issue_comments_495160.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to none",
    "created_at": "2021-02-18T00:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495160",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to none



---

archive/issue_events_406266.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-18T00:27:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "title_is": "sage.doctest.control: Exclude doctests in files via file directives ''# sage.doctest: optional - xyz'",
    "title_was": "sage.doctest.control: Exclude doctests in files from non-installed distributions",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406266"
}
```



---

archive/issue_comments_495161.json:
```json
{
    "body": "Changed commit from **[b92e036](https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a)** to none",
    "created_at": "2021-02-18T00:27:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495161",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[b92e036](https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a)** to none



---

archive/issue_comments_495162.json:
```json
{
    "body": "Branch: **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**",
    "created_at": "2021-02-18T00:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495162",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**



---

archive/issue_comments_495163.json:
```json
{
    "body": "Commit: **[b92e036](https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a)**",
    "created_at": "2021-02-18T00:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495163",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[b92e036](https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a)**



---

archive/issue_comments_495164.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@jhpalmieri](#comment%3A8):\n> Replying to [@mkoeppe](#comment%3A6):\n> > We could also parse a directive \"# doctest: optional - ...\" in the file header\n\n> \n> This has been discussed in the past and rejected\n\nI was trying to find the ticket with this discussion but did not succeed\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a\">b92e036</a></td><td><code>sage.doctest: Handle file directives '# sage.doctest: optional - xyz'</code></td></tr></table>\n",
    "created_at": "2021-02-18T00:28:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495164",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@jhpalmieri](#comment%3A8):
> Replying to [@mkoeppe](#comment%3A6):
> > We could also parse a directive "# doctest: optional - ..." in the file header

> 
> This has been discussed in the past and rejected

I was trying to find the ticket with this discussion but did not succeed

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a">b92e036</a></td><td><code>sage.doctest: Handle file directives '# sage.doctest: optional - xyz'</code></td></tr></table>




---

archive/issue_comments_495165.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nThere is certainly an open question here. I don't think it's only a matter of marking up the doctests with \"optional\" tags. With modularization going forward, we need to find a way to inform the user that some Python module is provided by a particular distribution package. I think this information should be attached to the module name instead of cluttering the doctests.",
    "created_at": "2021-02-18T00:37:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495165",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">Comment 13</div>

There is certainly an open question here. I don't think it's only a matter of marking up the doctests with "optional" tags. With modularization going forward, we need to find a way to inform the user that some Python module is provided by a particular distribution package. I think this information should be attached to the module name instead of cluttering the doctests.



---

archive/issue_comments_495166.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nUntil we have a more systematic solution for this, I would just suggest that we add an admonition to the module documentation that says something like: \"The classes in this module require the optional package `rpy2` to be installed\"",
    "created_at": "2021-02-18T00:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495166",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">Comment 14</div>

Until we have a more systematic solution for this, I would just suggest that we add an admonition to the module documentation that says something like: "The classes in this module require the optional package `rpy2` to be installed"



---

archive/issue_comments_495167.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nOK, found some previous discussion: #3260, #20427",
    "created_at": "2021-02-18T01:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495167",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">Comment 15</div>

OK, found some previous discussion: #3260, #20427



---

archive/issue_comments_495168.json:
```json
{
    "body": "Changed dependencies from **#30746** to **#30746, #3260, #20427**",
    "created_at": "2021-02-18T01:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495168",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30746** to **#30746, #3260, #20427**



---

archive/issue_comments_495169.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nLooks like this topic is showing up every 4-6 years.\n\nWhat has changed now is that modularization (#29705) would introduce LOTS of new optional tags if we don't find a systematic solution.",
    "created_at": "2021-02-18T01:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495169",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">Comment 16</div>

Looks like this topic is showing up every 4-6 years.

What has changed now is that modularization (#29705) would introduce LOTS of new optional tags if we don't find a systematic solution.



---

archive/issue_comments_495170.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,5 @@\n This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)\n \n We do this by extending `sage.doctest.control.skipfile`, which already parses files for `# nodoctest` file directives.\n+\n+Previous related proposals/discussions: \n``````\n",
    "created_at": "2021-02-18T01:07:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495170",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,5 @@
 This will save us from having to add lots of `# optional - ...` tags to files in the course of modularization (#29705)
 
 We do this by extending `sage.doctest.control.skipfile`, which already parses files for `# nodoctest` file directives.
+
+Previous related proposals/discussions: 
``````




---

archive/issue_comments_495171.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,7 @@\n \n We do this by extending `sage.doctest.control.skipfile`, which already parses files for `# nodoctest` file directives.\n \n-Previous related proposals/discussions: \n+Previous related proposals/discussions: #3260, #20427\n+\n+Also related: #30746\n+\n``````\n",
    "created_at": "2021-02-18T01:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495171",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,7 @@
 
 We do this by extending `sage.doctest.control.skipfile`, which already parses files for `# nodoctest` file directives.
 
-Previous related proposals/discussions: 
+Previous related proposals/discussions: #3260, #20427
+
+Also related: #30746
+
``````




---

archive/issue_events_406267.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-18T01:08:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406267"
}
```



---

archive/issue_comments_495172.json:
```json
{
    "body": "Changed dependencies from **#30746, #3260, #20427** to none",
    "created_at": "2021-02-18T01:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495172",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30746, #3260, #20427** to none



---

archive/issue_comments_495173.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-02-18T01:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495173",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_495174.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nHow about a change like this?\n\n```diff\ndiff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py\nindex 6e75131fb3..0b10e19552 100644\n--- a/src/sage/doctest/control.py\n+++ b/src/sage/doctest/control.py\n@@ -216,6 +216,10 @@ def skipfile(filename, tested_optional_tags=False):\n     - ``tested_optional_tags`` - a list or tuple or set of optional tags to test,\n       or ``False`` (no optional test) or ``True`` (all optional tests)\n \n+    If ``filename`` contains a line of the form ``\"# sage.doctest:\n+    optional - xyz\")``, then this will return ``False`` if \"xyz\" is in\n+    ``tested_optional_tags``. Otherwise, it returns the matching line.\n+\n     EXAMPLES::\n \n         sage: from sage.doctest.control import skipfile\n@@ -231,9 +235,11 @@ def skipfile(filename, tested_optional_tags=False):\n         sage: with open(filename, \"w\") as f:\n         ....:     _ = f.write(\"# sage.doctest: optional - xyz\")\n         sage: skipfile(filename, False)\n+        '# sage.doctest: optional - xyz'\n+        sage: bool(skipfile(filename, False))\n         True\n         sage: skipfile(filename, ['abc'])\n-        True\n+        '# sage.doctest: optional - xyz'\n         sage: skipfile(filename, ['abc', 'xyz'])\n         False\n         sage: skipfile(filename, True)\n@@ -252,11 +258,11 @@ def skipfile(filename, tested_optional_tags=False):\n                 m = optionalfiledirective_regex.match(line)\n                 if m:\n                     if tested_optional_tags is False:\n-                        return True\n+                        return m.group(0)\n                     optional_tags = parse_optional_tags('#' + m.group(2))\n                     extra = optional_tags - set(tested_optional_tags)\n                     if extra:\n-                        return True\n+                        return m.group(0)\n             line_count += 1\n             if line_count >= 10:\n                 break\ndiff --git a/src/sage/misc/sageinspect.py b/src/sage/misc/sageinspect.py\nindex a37edbbffc..670a4aa4e6 100644\n--- a/src/sage/misc/sageinspect.py\n+++ b/src/sage/misc/sageinspect.py\n@@ -2031,6 +2031,15 @@ def sage_getdoc(obj, obj_name='', embedded_override=False):\n         return ''\n     r = sage_getdoc_original(obj)\n     s = sage.misc.sagedoc.format(r, embedded=(embedded_override or EMBEDDED_MODE))\n+    f = sage_getfile(obj)\n+    if f:\n+        from sage.doctest.control import skipfile\n+        skip = skipfile(f)\n+        if skip:\n+            warn = \"\"\"WARNING: the enclosing module is marked '{}',\n+so doctests may not pass.\"\"\".format(skip)\n+            s = warn + \"\\n\\n\" + s\n+        pass\n \n     # Fix object naming\n     if obj_name != '':\n```\nThen the help message printed by `obj?` will include a warning if the file is tagged to be skipped. Is it okay if `skipfile` returns a string instead of just `True`?",
    "created_at": "2021-02-19T00:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495174",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:19" align="right">Comment 19</div>

How about a change like this?

```diff
diff --git a/src/sage/doctest/control.py b/src/sage/doctest/control.py
index 6e75131fb3..0b10e19552 100644
--- a/src/sage/doctest/control.py
+++ b/src/sage/doctest/control.py
@@ -216,6 +216,10 @@ def skipfile(filename, tested_optional_tags=False):
     - ``tested_optional_tags`` - a list or tuple or set of optional tags to test,
       or ``False`` (no optional test) or ``True`` (all optional tests)
 
+    If ``filename`` contains a line of the form ``"# sage.doctest:
+    optional - xyz")``, then this will return ``False`` if "xyz" is in
+    ``tested_optional_tags``. Otherwise, it returns the matching line.
+
     EXAMPLES::
 
         sage: from sage.doctest.control import skipfile
@@ -231,9 +235,11 @@ def skipfile(filename, tested_optional_tags=False):
         sage: with open(filename, "w") as f:
         ....:     _ = f.write("# sage.doctest: optional - xyz")
         sage: skipfile(filename, False)
+        '# sage.doctest: optional - xyz'
+        sage: bool(skipfile(filename, False))
         True
         sage: skipfile(filename, ['abc'])
-        True
+        '# sage.doctest: optional - xyz'
         sage: skipfile(filename, ['abc', 'xyz'])
         False
         sage: skipfile(filename, True)
@@ -252,11 +258,11 @@ def skipfile(filename, tested_optional_tags=False):
                 m = optionalfiledirective_regex.match(line)
                 if m:
                     if tested_optional_tags is False:
-                        return True
+                        return m.group(0)
                     optional_tags = parse_optional_tags('#' + m.group(2))
                     extra = optional_tags - set(tested_optional_tags)
                     if extra:
-                        return True
+                        return m.group(0)
             line_count += 1
             if line_count >= 10:
                 break
diff --git a/src/sage/misc/sageinspect.py b/src/sage/misc/sageinspect.py
index a37edbbffc..670a4aa4e6 100644
--- a/src/sage/misc/sageinspect.py
+++ b/src/sage/misc/sageinspect.py
@@ -2031,6 +2031,15 @@ def sage_getdoc(obj, obj_name='', embedded_override=False):
         return ''
     r = sage_getdoc_original(obj)
     s = sage.misc.sagedoc.format(r, embedded=(embedded_override or EMBEDDED_MODE))
+    f = sage_getfile(obj)
+    if f:
+        from sage.doctest.control import skipfile
+        skip = skipfile(f)
+        if skip:
+            warn = """WARNING: the enclosing module is marked '{}',
+so doctests may not pass.""".format(skip)
+            s = warn + "\n\n" + s
+        pass
 
     # Fix object naming
     if obj_name != '':
```
Then the help message printed by `obj?` will include a warning if the file is tagged to be skipped. Is it okay if `skipfile` returns a string instead of just `True`?



---

archive/issue_comments_495175.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nI like this idea. How about using `m.group(2)` instead? I don't think the reader needs to know about the syntax of the `# sage.doctest:` directive",
    "created_at": "2021-02-19T01:05:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495175",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">Comment 20</div>

I like this idea. How about using `m.group(2)` instead? I don't think the reader needs to know about the syntax of the `# sage.doctest:` directive



---

archive/issue_comments_495176.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to **[u/jhpalmieri/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**",
    "created_at": "2021-02-19T04:06:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495176",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to **[u/jhpalmieri/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**



---

archive/issue_comments_495177.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nHow about this? I also added a bit to the developer's guide.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/07818e626a8a69bee77668969840c98d61f9a983\">07818e6</a></td><td><code>trac 30778: when a module is labeled \"optional - xyz\",</code></td></tr></table>\n",
    "created_at": "2021-02-19T04:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495177",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">Comment 22</div>

How about this? I also added a bit to the developer's guide.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/07818e626a8a69bee77668969840c98d61f9a983">07818e6</a></td><td><code>trac 30778: when a module is labeled "optional - xyz",</code></td></tr></table>




---

archive/issue_comments_495178.json:
```json
{
    "body": "Changed commit from **[b92e036](https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a)** to **[07818e6](https://github.com/sagemath/sagetrac-mirror/commit/07818e626a8a69bee77668969840c98d61f9a983)**",
    "created_at": "2021-02-19T04:06:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495178",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[b92e036](https://github.com/sagemath/sagetrac-mirror/commit/b92e036d7d6ea6a9e5a8ffd93cdd2804d0f0315a)** to **[07818e6](https://github.com/sagemath/sagetrac-mirror/commit/07818e626a8a69bee77668969840c98d61f9a983)**



---

archive/issue_comments_495179.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nAre there any files in the Sage library now that we want to use this feature on?  I think having some examples (in this ticket or a followup) would be good.\n\nThere are also a couple test failures reported by the patchbot.",
    "created_at": "2021-03-04T19:19:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495179",
    "user": "https://github.com/roed314"
}
```

<div id="comment:23" align="right">Comment 23</div>

Are there any files in the Sage library now that we want to use this feature on?  I think having some examples (in this ticket or a followup) would be good.

There are also a couple test failures reported by the patchbot.



---

archive/issue_comments_495180.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@roed314](#comment%3A23):\n> Are there any files in the Sage library now that we want to use this feature on?  I think having some examples (in this ticket or a followup) would be good.\n\nIt makes sense for optional extension modules, such as sage.matrix.matrix_gfpn_dense (but I don't know if there are others). Indeed the doctests are one reason why my optional package p_group_cohomology is not part of the sage library, although is is mostly written in Python and Cython and would thus fit well into the Sage library (but should still be an optional package).",
    "created_at": "2021-03-04T20:02:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495180",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@roed314](#comment%3A23):
> Are there any files in the Sage library now that we want to use this feature on?  I think having some examples (in this ticket or a followup) would be good.

It makes sense for optional extension modules, such as sage.matrix.matrix_gfpn_dense (but I don't know if there are others). Indeed the doctests are one reason why my optional package p_group_cohomology is not part of the sage library, although is is mostly written in Python and Cython and would thus fit well into the Sage library (but should still be an optional package).



---

archive/issue_comments_495181.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nYes, so let's do #30787...",
    "created_at": "2021-03-04T20:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495181",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">Comment 25</div>

Yes, so let's do #30787...



---

archive/issue_comments_495182.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@roed314](#comment%3A23):\n> Are there any files in the Sage library now that we want to use this feature on?  I think having some examples (in this ticket or a followup) would be good.\n\nIndeed it would be best to test this on files that are in tree but could be made \"optional\" via the same mechanism that we already use for extensions modules depending on optional packages. Candidates are:\n- modules depending on `giac`\n- modules depending on `brial`\n- modules depending on `ntl`\n- more - see #30666\n\nSince this will require modification of `setup.py`, it's best to do this on top of #31377, #30912",
    "created_at": "2021-03-04T22:34:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495182",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@roed314](#comment%3A23):
> Are there any files in the Sage library now that we want to use this feature on?  I think having some examples (in this ticket or a followup) would be good.

Indeed it would be best to test this on files that are in tree but could be made "optional" via the same mechanism that we already use for extensions modules depending on optional packages. Candidates are:
- modules depending on `giac`
- modules depending on `brial`
- modules depending on `ntl`
- more - see #30666

Since this will require modification of `setup.py`, it's best to do this on top of #31377, #30912



---

archive/issue_comments_495183.json:
```json
{
    "body": "Dependencies: **#31377, #30912, #31377, #30912**",
    "created_at": "2021-03-04T22:34:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495183",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31377, #30912, #31377, #30912**



---

archive/issue_comments_495184.json:
```json
{
    "body": "Changed dependencies from **#31377, #30912, #31377, #30912** to **#31377, #30912**",
    "created_at": "2021-03-04T22:34:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495184",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31377, #30912, #31377, #30912** to **#31377, #30912**



---

archive/issue_comments_495185.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, John Palmieri**",
    "created_at": "2021-03-04T22:46:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495185",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, John Palmieri**



---

archive/issue_events_406268.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-04T22:46:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406268"
}
```



---

archive/issue_events_406269.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-04T22:46:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406269"
}
```



---

archive/issue_comments_495186.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\n... and on top of #30383 because we need to make it possible to use `configure --disable-...` for at least one standard package.",
    "created_at": "2021-03-06T00:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495186",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">Comment 30</div>

... and on top of #30383 because we need to make it possible to use `configure --disable-...` for at least one standard package.



---

archive/issue_comments_495187.json:
```json
{
    "body": "Changed dependencies from **#31377, #30912** to **#31377, #30912, #30383**",
    "created_at": "2021-03-06T00:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495187",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31377, #30912** to **#31377, #30912, #30383**



---

archive/issue_events_406270.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406270"
}
```



---

archive/issue_events_406271.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406271"
}
```



---

archive/issue_comments_495188.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495188",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">Comment 31</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_495189.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f35123cdf0fe7fac80b786af4f660433d5164ed2\">f35123c</a></td><td><code>Merge branch 'develop' into t/30778/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/94727df4dbfa1e03c09e89cb87c2433232318962\">94727df</a></td><td><code>trac 30778: patch sageinspect to not print warning when skipfile returns True.</code></td></tr></table>\n",
    "created_at": "2021-10-01T18:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495189",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32" align="right">Comment 32</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f35123cdf0fe7fac80b786af4f660433d5164ed2">f35123c</a></td><td><code>Merge branch 'develop' into t/30778/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/94727df4dbfa1e03c09e89cb87c2433232318962">94727df</a></td><td><code>trac 30778: patch sageinspect to not print warning when skipfile returns True.</code></td></tr></table>




---

archive/issue_comments_495190.json:
```json
{
    "body": "Changed commit from **[07818e6](https://github.com/sagemath/sagetrac-mirror/commit/07818e626a8a69bee77668969840c98d61f9a983)** to **[94727df](https://github.com/sagemath/sagetrac-mirror/commit/94727df4dbfa1e03c09e89cb87c2433232318962)**",
    "created_at": "2021-10-01T18:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495190",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[07818e6](https://github.com/sagemath/sagetrac-mirror/commit/07818e626a8a69bee77668969840c98d61f9a983)** to **[94727df](https://github.com/sagemath/sagetrac-mirror/commit/94727df4dbfa1e03c09e89cb87c2433232318962)**



---

archive/issue_comments_495191.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nThis could still use some examples, as mentioned in [comment:23](#comment%3A23) and [comment:26](#comment%3A26).",
    "created_at": "2021-10-01T18:37:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495191",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:33" align="right">Comment 33</div>

This could still use some examples, as mentioned in [comment:23](#comment%3A23) and [comment:26](#comment%3A26).



---

archive/issue_comments_495192.json:
```json
{
    "body": "Changed dependencies from **#31377, #30912, #30383** to none",
    "created_at": "2021-10-01T19:33:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495192",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31377, #30912, #30383** to none



---

archive/issue_comments_495193.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nAs an example, we could apply it to `src/sage/matrix/matrix_gfpn_dense.pyx` and remove the line-by-line annotations \"# optional: meataxe\".\n\nHowever, as `git grep 'sage:' src/sage/matrix/matrix_gfpn_dense.pyx` shows, there are some doctest lines that are not marked optional. Not sure if they have any value by themselves.",
    "created_at": "2021-10-01T19:39:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495193",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">Comment 35</div>

As an example, we could apply it to `src/sage/matrix/matrix_gfpn_dense.pyx` and remove the line-by-line annotations "# optional: meataxe".

However, as `git grep 'sage:' src/sage/matrix/matrix_gfpn_dense.pyx` shows, there are some doctest lines that are not marked optional. Not sure if they have any value by themselves.



---

archive/issue_comments_495194.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\n@simon-king-jena: would you object if we skipped all tests in `src/sage/matrix/matrix_gfpn_dense.pyx` unless `meataxe` is installed? I've skimmed through and don't see anything that (I hope) isn't tested elsewhere for other matrix implementations, but you know this file pretty well.",
    "created_at": "2021-10-01T22:31:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495194",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">Comment 36</div>

@simon-king-jena: would you object if we skipped all tests in `src/sage/matrix/matrix_gfpn_dense.pyx` unless `meataxe` is installed? I've skimmed through and don't see anything that (I hope) isn't tested elsewhere for other matrix implementations, but you know this file pretty well.



---

archive/issue_comments_495195.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nReplying to [@jhpalmieri](#comment%3A36):\n> @simon-king-jena: would you object if we skipped all tests in `src/sage/matrix/matrix_gfpn_dense.pyx` unless `meataxe` is installed? I've skimmed through and don't see anything that (I hope) isn't tested elsewhere for other matrix implementations, but you know this file pretty well.\n\nI did not intend to create new tests for other matrix implementations. So, I wouldn't object to make all the module's tests optional. In fact, this is what I asked for since I first created the module.",
    "created_at": "2021-10-02T06:13:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495195",
    "user": "https://github.com/simon-king-jena"
}
```

<div id="comment:37" align="right">Comment 37</div>

Replying to [@jhpalmieri](#comment%3A36):
> @simon-king-jena: would you object if we skipped all tests in `src/sage/matrix/matrix_gfpn_dense.pyx` unless `meataxe` is installed? I've skimmed through and don't see anything that (I hope) isn't tested elsewhere for other matrix implementations, but you know this file pretty well.

I did not intend to create new tests for other matrix implementations. So, I wouldn't object to make all the module's tests optional. In fact, this is what I asked for since I first created the module.



---

archive/issue_comments_495196.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**",
    "created_at": "2021-10-02T15:48:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495196",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/jhpalmieri/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)**



---

archive/issue_comments_495197.json:
```json
{
    "body": "Changed commit from **[94727df](https://github.com/sagemath/sagetrac-mirror/commit/94727df4dbfa1e03c09e89cb87c2433232318962)** to **[1276609](https://github.com/sagemath/sagetrac-mirror/commit/1276609634a35c5d4b0131661791f4d47f1914cf)**",
    "created_at": "2021-10-02T15:49:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495197",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[94727df](https://github.com/sagemath/sagetrac-mirror/commit/94727df4dbfa1e03c09e89cb87c2433232318962)** to **[1276609](https://github.com/sagemath/sagetrac-mirror/commit/1276609634a35c5d4b0131661791f4d47f1914cf)**



---

archive/issue_events_406272.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-02T15:49:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406272"
}
```



---

archive/issue_events_406273.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-02T15:49:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406273"
}
```



---

archive/issue_comments_495198.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1276609634a35c5d4b0131661791f4d47f1914cf\">1276609</a></td><td><code>src/sage/matrix/matrix_gfpn_dense.pyx: Use # sage.doctest: optional - meataxe</code></td></tr></table>\n",
    "created_at": "2021-10-02T15:49:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495198",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">Comment 39</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1276609634a35c5d4b0131661791f4d47f1914cf">1276609</a></td><td><code>src/sage/matrix/matrix_gfpn_dense.pyx: Use # sage.doctest: optional - meataxe</code></td></tr></table>




---

archive/issue_comments_495199.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\n(untested)",
    "created_at": "2021-10-02T16:29:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495199",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">Comment 40</div>

(untested)



---

archive/issue_comments_495200.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nThis is working for me the way that I think it should: commands like `make ptestlong` or `./sage -tp src/sage/matrix/` ignore `matrix_gfpn_dense.pyx`, but if you specify the file explicitly (or let the shell specify it with `./sage -tp src/sage/matrix/matrix_g*`), then it gets tested, and of course many tests fail. I think that's the right behavior.",
    "created_at": "2021-10-02T22:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495200",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:41" align="right">Comment 41</div>

This is working for me the way that I think it should: commands like `make ptestlong` or `./sage -tp src/sage/matrix/` ignore `matrix_gfpn_dense.pyx`, but if you specify the file explicitly (or let the shell specify it with `./sage -tp src/sage/matrix/matrix_g*`), then it gets tested, and of course many tests fail. I think that's the right behavior.



---

archive/issue_comments_495201.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nRemains to put something in the documentation of `matrix_gfpn_dense.pyx`, as discussed in [comment:8](#comment%3A8), [comment:13](#comment%3A13), [comment:14](#comment%3A14)",
    "created_at": "2021-10-02T22:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495201",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">Comment 42</div>

Remains to put something in the documentation of `matrix_gfpn_dense.pyx`, as discussed in [comment:8](#comment%3A8), [comment:13](#comment%3A13), [comment:14](#comment%3A14)



---

archive/issue_comments_495202.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nReplying to [@mkoeppe](#comment%3A42):\n> Remains to put something in the documentation of `matrix_gfpn_dense.pyx`, as discussed in [comment:8](#comment%3A8), [comment:13](#comment%3A13), [comment:14](#comment%3A14)\n\nThis is easy enough to do manually. It would be nice to autodetect the line `# sage.doctest: optional - meataxe`, but do we want to do that here or a follow-up ticket?",
    "created_at": "2021-10-03T19:41:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495202",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:43" align="right">Comment 43</div>

Replying to [@mkoeppe](#comment%3A42):
> Remains to put something in the documentation of `matrix_gfpn_dense.pyx`, as discussed in [comment:8](#comment%3A8), [comment:13](#comment%3A13), [comment:14](#comment%3A14)

This is easy enough to do manually. It would be nice to autodetect the line `# sage.doctest: optional - meataxe`, but do we want to do that here or a follow-up ticket?



---

archive/issue_comments_495203.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nLet's do this manually for this ticket first",
    "created_at": "2021-10-03T20:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495203",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">Comment 44</div>

Let's do this manually for this ticket first



---

archive/issue_comments_495204.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nIn #32614 I now define some new optional tags, in particular a tag `sage.matrix.matrix_gfpn_dense`. So if we depend on that ticket, we could now write `# sage.doctest: optional - sage.matrix.matrix_gfpn_dense`; and in the module documentation we could refer to the class providing the feature (`sage__matrix__matrix_gfpn_dense`)",
    "created_at": "2021-10-03T23:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495204",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">Comment 45</div>

In #32614 I now define some new optional tags, in particular a tag `sage.matrix.matrix_gfpn_dense`. So if we depend on that ticket, we could now write `# sage.doctest: optional - sage.matrix.matrix_gfpn_dense`; and in the module documentation we could refer to the class providing the feature (`sage__matrix__matrix_gfpn_dense`)



---

archive/issue_comments_495205.json:
```json
{
    "body": "Changed commit from **[1276609](https://github.com/sagemath/sagetrac-mirror/commit/1276609634a35c5d4b0131661791f4d47f1914cf)** to **[5cc1288](https://github.com/sagemath/sagetrac-mirror/commit/5cc1288bec7a4c165723f8fd20d14843547faccc)**",
    "created_at": "2021-10-06T04:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495205",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1276609](https://github.com/sagemath/sagetrac-mirror/commit/1276609634a35c5d4b0131661791f4d47f1914cf)** to **[5cc1288](https://github.com/sagemath/sagetrac-mirror/commit/5cc1288bec7a4c165723f8fd20d14843547faccc)**



---

archive/issue_comments_495206.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5cc1288bec7a4c165723f8fd20d14843547faccc\">5cc1288</a></td><td><code>src/sage/matrix/matrix_gfpn_dense.pyx: Add reference to meataxe spkg</code></td></tr></table>\n",
    "created_at": "2021-10-06T04:17:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495206",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:46" align="right">Comment 46</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5cc1288bec7a4c165723f8fd20d14843547faccc">5cc1288</a></td><td><code>src/sage/matrix/matrix_gfpn_dense.pyx: Add reference to meataxe spkg</code></td></tr></table>




---

archive/issue_comments_495207.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nI've kept it simple and just added a note in the docstring.\n\nBut do we actually build HTML documentation for optional compiled modules at all?",
    "created_at": "2021-10-06T04:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495207",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">Comment 47</div>

I've kept it simple and just added a note in the docstring.

But do we actually build HTML documentation for optional compiled modules at all?



---

archive/issue_comments_495208.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nI'm happy with your changes on the ticket: positive review for those parts.",
    "created_at": "2021-10-07T18:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495208",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:48" align="right">Comment 48</div>

I'm happy with your changes on the ticket: positive review for those parts.



---

archive/issue_comments_495209.json:
```json
{
    "body": "Reviewer: **John Palmieri, ...**",
    "created_at": "2021-10-07T18:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495209",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri, ...**



---

archive/issue_events_406274.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-07T18:23:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406274"
}
```



---

archive/issue_events_406275.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-07T18:23:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406275"
}
```



---

archive/issue_comments_495210.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nThanks!",
    "created_at": "2021-10-07T18:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495210",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">Comment 49</div>

Thanks!



---

archive/issue_comments_495211.json:
```json
{
    "body": "Changed reviewer from **John Palmieri, ...** to **John Palmieri, Matthias Koeppe**",
    "created_at": "2021-10-07T18:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495211",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **John Palmieri, ...** to **John Palmieri, Matthias Koeppe**



---

archive/issue_events_406276.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-10-10T10:17:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406276"
}
```



---

archive/issue_events_406277.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f96cbf7ee432832f35c89590215a5829e4846370",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-10-10T10:17:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30778#event-406277"
}
```



---

archive/issue_comments_495212.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to **[5cc1288](https://github.com/sagemath/sagetrac-mirror/commit/5cc1288bec7a4c165723f8fd20d14843547faccc)**",
    "created_at": "2021-10-10T10:17:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30778",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30778#issuecomment-495212",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/sage_doctest_control__exclude_doctests_in_files_from_non_installed_distributions)** to **[5cc1288](https://github.com/sagemath/sagetrac-mirror/commit/5cc1288bec7a4c165723f8fd20d14843547faccc)**
