# Issue 30747: Deprecate sage.misc.package functions standard_packages, optional_packages, experimental_packages

archive/issues_030510.json:
```json
{
    "body": "These functions are superseded by the more general function `list_packages`.\n\n\nThis is also a step toward deprecating all of `sage.misc.package`.\n\n\n\nCC:  @antonio-rojas @jhpalmieri @kiwifb @isuruf\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nBranch: 8ccc15734fb09a3db16b11d960de9dfc3075fd3c\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30747\n\n",
    "closed_at": "2020-12-06T12:49:05Z",
    "created_at": "2020-10-08T17:13:56Z",
    "labels": [
        "component: refactoring",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Deprecate sage.misc.package functions standard_packages, optional_packages, experimental_packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30747",
    "user": "https://github.com/mkoeppe"
}
```
These functions are superseded by the more general function `list_packages`.


This is also a step toward deprecating all of `sage.misc.package`.



CC:  @antonio-rojas @jhpalmieri @kiwifb @isuruf

Reviewer: John Palmieri

Author: Matthias Koeppe

Branch: 8ccc15734fb09a3db16b11d960de9dfc3075fd3c

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30747





---

archive/issue_events_098208.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30747#event-98208"
}
```



---

archive/issue_comments_601167.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We move `is_package_installed` etc. to `sage_setup`, leaving deprecated `lazy_import`s behind.\n+We move `is_package_installed` etc. to `sage_setup` or `sage_bootstrap` (#29039), leaving deprecated `lazy_import`s behind.\n \n We keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).\n \n``````\n",
    "created_at": "2020-11-01T16:57:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601167",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We move `is_package_installed` etc. to `sage_setup`, leaving deprecated `lazy_import`s behind.
+We move `is_package_installed` etc. to `sage_setup` or `sage_bootstrap` (#29039), leaving deprecated `lazy_import`s behind.
 
 We keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).
 
``````




---

archive/issue_comments_601168.json:
```json
{
    "body": "Changing dependencies from \"#30746\" to \"#30746, #30712\"",
    "created_at": "2020-11-01T17:18:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601168",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30746" to "#30746, #30712"



---

archive/issue_comments_601169.json:
```json
{
    "body": "Changing dependencies from \"#30746, #30712\" to \"#30746, #30712, #30748\"",
    "created_at": "2020-11-01T19:23:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601169",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30746, #30712" to "#30746, #30712, #30748"



---

archive/issue_comments_601170.json:
```json
{
    "body": "Changing dependencies from \"#30746, #30712, #30748\" to \"#30746, #30712, #30846\"",
    "created_at": "2020-11-01T19:24:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601170",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30746, #30712, #30748" to "#30746, #30712, #30846"



---

archive/issue_comments_601171.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,8 +2,4 @@\n \n We keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).\n \n-We move `src/bin/sage-list-packages` to `build/bin`. It is only used in `build/bin/sage-site` (to implement `sage --installed` etc.) and not documented individually as a script.\n \n-\n-\n-\n``````\n",
    "created_at": "2020-11-01T19:24:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601171",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,8 +2,4 @@
 
 We keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).
 
-We move `src/bin/sage-list-packages` to `build/bin`. It is only used in `build/bin/sage-site` (to implement `sage --installed` etc.) and not documented individually as a script.
 
-
-
-
``````




---

archive/issue_comments_601172.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/deprecate_all_of_sage_misc_package_except_for_packagenotfounderror\"",
    "created_at": "2020-11-02T04:47:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601172",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/deprecate_all_of_sage_misc_package_except_for_packagenotfounderror"



---

archive/issue_comments_601173.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601173",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_601174.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,3 @@\n-We move `is_package_installed` etc. to `sage_setup` or `sage_bootstrap` (#29039), leaving deprecated `lazy_import`s behind.\n-\n-We keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).\n+This is a step toward deprecating all of `sage.misc.package`.\n \n \n``````\n",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601174",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,3 @@
-We move `is_package_installed` etc. to `sage_setup` or `sage_bootstrap` (#29039), leaving deprecated `lazy_import`s behind.
-
-We keep `PackageNotFoundError` (after #30607, instantiation already leads to a deprecation warning).
+This is a step toward deprecating all of `sage.misc.package`.
 
 
``````




---

archive/issue_comments_601175.json:
```json
{
    "body": "<a id='comment:8'></a>\nNew commits:\n|                                                                                                                                          |                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[8ab2285](https://github.com/sagemath/sagetrac-mirror/commit/8ab228502ea697525e8eda9b9ec9402ca8f36d9c)|`Gracefully fail if pip is not correctly installed`|\n|[ec90687](https://github.com/sagemath/sagetrac-mirror/commit/ec90687f7e4d281ba4c49dbe1db0a44d572fe131)|`Merge branch 'public/build/hardenPip' of git://trac.sagemath.org/sage into t/30747/deprecate_all_of_sage_misc_package_except_for_packagenotfounderror`|\n|[044fcc0](https://github.com/sagemath/sagetrac-mirror/commit/044fcc026f02e151dc2f41283e0079f30fc23c5e)|`Move sage-list-packages from src/bin (sagelib) to build/bin (sage_bootstrap)`|\n|[0085fde](https://github.com/sagemath/sagetrac-mirror/commit/0085fde287f5016f3858a1957413736dee567312)|`Merge branch 'u/mkoeppe/move__src_bin_sage_list_packages__to__build_bin_' of git://trac.sagemath.org/sage into t/30747/deprecate_all_of_sage_misc_package_except_for_packagenotfounderror`|\n|[f2a4e39](https://github.com/sagemath/sagetrac-mirror/commit/f2a4e39990eb93d5a8acca197fa400ecede40272)|`sage.misc.package: Deprecate standard_packages, optional_packages, experimental_packages`|",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601175",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
New commits:
|                                                                                                                                          |                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[8ab2285](https://github.com/sagemath/sagetrac-mirror/commit/8ab228502ea697525e8eda9b9ec9402ca8f36d9c)|`Gracefully fail if pip is not correctly installed`|
|[ec90687](https://github.com/sagemath/sagetrac-mirror/commit/ec90687f7e4d281ba4c49dbe1db0a44d572fe131)|`Merge branch 'public/build/hardenPip' of git://trac.sagemath.org/sage into t/30747/deprecate_all_of_sage_misc_package_except_for_packagenotfounderror`|
|[044fcc0](https://github.com/sagemath/sagetrac-mirror/commit/044fcc026f02e151dc2f41283e0079f30fc23c5e)|`Move sage-list-packages from src/bin (sagelib) to build/bin (sage_bootstrap)`|
|[0085fde](https://github.com/sagemath/sagetrac-mirror/commit/0085fde287f5016f3858a1957413736dee567312)|`Merge branch 'u/mkoeppe/move__src_bin_sage_list_packages__to__build_bin_' of git://trac.sagemath.org/sage into t/30747/deprecate_all_of_sage_misc_package_except_for_packagenotfounderror`|
|[f2a4e39](https://github.com/sagemath/sagetrac-mirror/commit/f2a4e39990eb93d5a8acca197fa400ecede40272)|`sage.misc.package: Deprecate standard_packages, optional_packages, experimental_packages`|



---

archive/issue_comments_601176.json:
```json
{
    "body": "Changing commit from \"\" to \"f2a4e39990eb93d5a8acca197fa400ecede40272\"",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601176",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "f2a4e39990eb93d5a8acca197fa400ecede40272"



---

archive/issue_events_098209.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "rename": {
        "from": "Deprecate all of sage.misc.package except for PackageNotFoundError",
        "to": "Deprecate sage.misc.package functions standard_packages, optional_packages, experimental_packages"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30747#event-98209"
}
```



---

archive/issue_comments_601177.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601177",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_601178.json:
```json
{
    "body": "Changing dependencies from \"#30746, #30712, #30846\" to \"#30712, #30846\"",
    "created_at": "2020-11-07T18:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601178",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30746, #30712, #30846" to "#30712, #30846"



---

archive/issue_comments_601179.json:
```json
{
    "body": "Changing dependencies from \"#30712, #30846\" to \"\"",
    "created_at": "2020-11-20T23:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601179",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30712, #30846" to ""



---

archive/issue_comments_601180.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,6 @@\n-This is a step toward deprecating all of `sage.misc.package`.\n+These functions are superseded by the more general function `list_packages`.\n \n \n+This is also a step toward deprecating all of `sage.misc.package`.\n+\n+\n``````\n",
    "created_at": "2020-11-20T23:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601180",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,6 @@
-This is a step toward deprecating all of `sage.misc.package`.
+These functions are superseded by the more general function `list_packages`.
 
 
+This is also a step toward deprecating all of `sage.misc.package`.
+
+
``````




---

archive/issue_comments_601181.json:
```json
{
    "body": "Changing commit from \"f2a4e39990eb93d5a8acca197fa400ecede40272\" to \"8ccc15734fb09a3db16b11d960de9dfc3075fd3c\"",
    "created_at": "2020-11-20T23:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601181",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f2a4e39990eb93d5a8acca197fa400ecede40272" to "8ccc15734fb09a3db16b11d960de9dfc3075fd3c"



---

archive/issue_comments_601182.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|\n|[8ccc157](https://github.com/sagemath/sagetrac-mirror/commit/8ccc15734fb09a3db16b11d960de9dfc3075fd3c)|`sage.misc.package: Deprecate standard_packages, optional_packages, experimental_packages`|",
    "created_at": "2020-11-20T23:53:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
|[8ccc157](https://github.com/sagemath/sagetrac-mirror/commit/8ccc15734fb09a3db16b11d960de9dfc3075fd3c)|`sage.misc.package: Deprecate standard_packages, optional_packages, experimental_packages`|



---

archive/issue_comments_601183.json:
```json
{
    "body": "<a id='comment:11'></a>\nLooks okay to me.",
    "created_at": "2020-11-21T20:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601183",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:11'></a>
Looks okay to me.



---

archive/issue_comments_601184.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2020-11-21T20:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601184",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_601185.json:
```json
{
    "body": "<a id='comment:12'></a>\npositive review?",
    "created_at": "2020-11-25T20:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601185",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
positive review?



---

archive/issue_comments_601186.json:
```json
{
    "body": "<a id='comment:13'></a>\nYes, sorry.",
    "created_at": "2020-11-25T21:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601186",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>
Yes, sorry.



---

archive/issue_comments_601187.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-25T21:20:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601187",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_601188.json:
```json
{
    "body": "<a id='comment:14'></a>\nThanks!",
    "created_at": "2020-11-25T21:36:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601188",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Thanks!



---

archive/issue_comments_601189.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/deprecate_all_of_sage_misc_package_except_for_packagenotfounderror\" to \"8ccc15734fb09a3db16b11d960de9dfc3075fd3c\"",
    "created_at": "2020-12-06T12:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601189",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/deprecate_all_of_sage_misc_package_except_for_packagenotfounderror" to "8ccc15734fb09a3db16b11d960de9dfc3075fd3c"



---

archive/issue_events_098210.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-06T12:49:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30747#event-98210"
}
```



---

archive/issue_comments_601190.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-06T12:49:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601190",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_601191.json:
```json
{
    "body": "Changing commit from \"8ccc15734fb09a3db16b11d960de9dfc3075fd3c\" to \"\"",
    "created_at": "2020-12-17T07:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601191",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "8ccc15734fb09a3db16b11d960de9dfc3075fd3c" to ""



---

archive/issue_comments_601192.json:
```json
{
    "body": "<a id='comment:16'></a>\nthe doctests in misc/package are sometimes failing, see\n\nhttps://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short\n\nwhich is running sage with python 3.9",
    "created_at": "2020-12-17T07:56:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601192",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>
the doctests in misc/package are sometimes failing, see

https://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short

which is running sage with python 3.9



---

archive/issue_comments_601193.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [chapoton](#comment%3A16):\n> the doctests in misc/package are sometimes failing, see\n> \n> https://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short\n\n\nAs part of #30940, some of these doctests are made less strict so that they work better in incremental builds that have some old packages still installed. - Needs review",
    "created_at": "2020-12-18T01:02:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30747",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30747#issuecomment-601193",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Replying to [chapoton](#comment%3A16):
> the doctests in misc/package are sometimes failing, see
> 
> https://patchbot.sagemath.org/log/31060/Linux/60-Ubuntu_SMP_Fri_Nov_6_10:37:59_UTC_2020/x86_64/5.4.0-54-generic/petitbonum/2020-12-16%2023:45:16?short


As part of #30940, some of these doctests are made less strict so that they work better in incremental builds that have some old packages still installed. - Needs review
