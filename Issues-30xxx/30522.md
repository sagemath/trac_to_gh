# Issue 30522: polynomial_element.pyx: roots: SR: Return value for vanishing determinant broken

archive/issues_030285.json:
```json
{
    "body": "The `roots` method for polynomials returns a list of pairs\n`(root, multiplicity)`.\n\nBefore this ticket, e.g. in Sage 9.2.beta12, this can fail:\n\n```\nsage: PolynomialRing(SR, names=\"x\")(\"x^2\").roots()\n[0, 2]\n```\n\nWith this ticket, we get the expected result:\n\n```\nsage: PolynomialRing(SR, names=\"x\")(\"x^2\").roots()\n[(0, 2)]\n```\n\n\nKeywords: polynomial, roots\n\nBranch/Commit: 25ee8d478510e60fe1da91092a4c182708cd21f3\n\nReviewer: Samuel Leli\u00e8vre\n\nAuthor: Michael Struwe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30522\n\n",
    "closed_at": "2020-09-23T21:27:13Z",
    "created_at": "2020-09-07T15:42:44Z",
    "labels": [
        "component: commutative algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "polynomial_element.pyx: roots: SR: Return value for vanishing determinant broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30522",
    "user": "https://github.com/shak-mar"
}
```
The `roots` method for polynomials returns a list of pairs
`(root, multiplicity)`.

Before this ticket, e.g. in Sage 9.2.beta12, this can fail:

```
sage: PolynomialRing(SR, names="x")("x^2").roots()
[0, 2]
```

With this ticket, we get the expected result:

```
sage: PolynomialRing(SR, names="x")("x^2").roots()
[(0, 2)]
```


Keywords: polynomial, roots

Branch/Commit: 25ee8d478510e60fe1da91092a4c182708cd21f3

Reviewer: Samuel Lelièvre

Author: Michael Struwe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30522





---

archive/issue_comments_603038.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n The bug can be reproduced by running the following code:\n-\n-\tPolynomialRing(SR, names=\"x\")(\"x^2\").roots()\n+\t\n+```\n+PolynomialRing(SR, names=\"x\")(\"x^2\").roots()\n+```\n \n Expected result: [(0, 2)]\n Actual result: [0, 2]\n``````\n",
    "created_at": "2020-09-07T15:49:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603038",
    "user": "https://github.com/shak-mar"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 The bug can be reproduced by running the following code:
-
-	PolynomialRing(SR, names="x")("x^2").roots()
+	
+```
+PolynomialRing(SR, names="x")("x^2").roots()
+```
 
 Expected result: [(0, 2)]
 Actual result: [0, 2]
``````




---

archive/issue_comments_603039.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-shak-mar/polynomial_element_pyx__roots__sr__return_value_for_vanishing_determinant_broken\"",
    "created_at": "2020-09-07T15:58:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603039",
    "user": "https://github.com/shak-mar"
}
```

Changing branch from "" to "u/gh-shak-mar/polynomial_element_pyx__roots__sr__return_value_for_vanishing_determinant_broken"



---

archive/issue_comments_603040.json:
```json
{
    "body": "<a id='comment:3'></a>Thanks for filing this ticket and providing a fix!\n\n> I have written a patch that fixes this;  let's see if I can manage\n> to attach it / push it to this ticket.\n\n\nYou managed!\n\n> I'm also not 100% sure that \"algebra\" is the right value\n> for the \"Component:\" field.\n\n\nI use \"commutative algebra\" for tickets about polynomials and friends.\n\nPlease add your full name in the \"Authors\" field on the ticket.\n\nPlease add the example from the ticket description as a doctest,\nwith the ticket number, as part of the EXAMPLES block in the\ndocstring for the `roots` method. Something like:\n\n```diff\n+        Check that :trac:`30522` is fixed::\n+\n+            sage: PolynomialRing(SR, names=\"x\")(\"x^2\").roots()\n+            [(0, 2)]\n+\n```\n\nWhen the ticket is ready for review, please set it to `needs_review`.\n\n---\nNew commits:",
    "created_at": "2020-09-07T17:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603040",
    "user": "https://github.com/slel"
}
```

<a id='comment:3'></a>Thanks for filing this ticket and providing a fix!

> I have written a patch that fixes this;  let's see if I can manage
> to attach it / push it to this ticket.


You managed!

> I'm also not 100% sure that "algebra" is the right value
> for the "Component:" field.


I use "commutative algebra" for tickets about polynomials and friends.

Please add your full name in the "Authors" field on the ticket.

Please add the example from the ticket description as a doctest,
with the ticket number, as part of the EXAMPLES block in the
docstring for the `roots` method. Something like:

```diff
+        Check that :trac:`30522` is fixed::
+
+            sage: PolynomialRing(SR, names="x")("x^2").roots()
+            [(0, 2)]
+
```

When the ticket is ready for review, please set it to `needs_review`.

---
New commits:



---

archive/issue_comments_603041.json:
```json
{
    "body": "Changing commit from \"\" to \"e64a2fe0b01eb63990acf9ff2482a3876e4c24d8\"",
    "created_at": "2020-09-07T17:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603041",
    "user": "https://github.com/slel"
}
```

Changing commit from "" to "e64a2fe0b01eb63990acf9ff2482a3876e4c24d8"



---

archive/issue_comments_603042.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,3 @@\n \n I tested this on 9.2.beta12, which is what the \"develop\" branch points to at the time of writing.\n \n-I have written a patch that fixes this;  let's see if I can manage to attach it / push it to this ticket.  I'm also not 100% sure that \"algebra\" is the right value for the \"Component:\" field.\n``````\n",
    "created_at": "2020-09-07T17:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603042",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,3 @@
 
 I tested this on 9.2.beta12, which is what the "develop" branch points to at the time of writing.
 
-I have written a patch that fixes this;  let's see if I can manage to attach it / push it to this ticket.  I'm also not 100% sure that "algebra" is the right value for the "Component:" field.
``````




---

archive/issue_comments_603043.json:
```json
{
    "body": "Changing component from algebra to commutative algebra.",
    "created_at": "2020-09-07T17:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603043",
    "user": "https://github.com/slel"
}
```

Changing component from algebra to commutative algebra.



---

archive/issue_comments_603044.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-08T17:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603044",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_603045.json:
```json
{
    "body": "Changing commit from \"e64a2fe0b01eb63990acf9ff2482a3876e4c24d8\" to \"ea09383cf346d8fbed91827136e87a399bf116e5\"",
    "created_at": "2020-09-08T17:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603045",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e64a2fe0b01eb63990acf9ff2482a3876e4c24d8" to "ea09383cf346d8fbed91827136e87a399bf116e5"



---

archive/issue_comments_603046.json:
```json
{
    "body": "Changing author from \"\" to \"Michael Struwe\"",
    "created_at": "2020-09-08T17:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603046",
    "user": "https://github.com/shak-mar"
}
```

Changing author from "" to "Michael Struwe"



---

archive/issue_comments_603047.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-08T17:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603047",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_603048.json:
```json
{
    "body": "Changing commit from \"ea09383cf346d8fbed91827136e87a399bf116e5\" to \"25ee8d478510e60fe1da91092a4c182708cd21f3\"",
    "created_at": "2020-09-08T17:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603048",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ea09383cf346d8fbed91827136e87a399bf116e5" to "25ee8d478510e60fe1da91092a4c182708cd21f3"



---

archive/issue_comments_603049.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-08T17:22:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603049",
    "user": "https://github.com/shak-mar"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_603050.json:
```json
{
    "body": "<a id='comment:8'></a>Cool!  I think I did all of that now :)",
    "created_at": "2020-09-08T17:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603050",
    "user": "https://github.com/shak-mar"
}
```

<a id='comment:8'></a>Cool!  I think I did all of that now :)



---

archive/issue_comments_603051.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,17 @@\n-The bug can be reproduced by running the following code:\n-\t\n+The `roots` method for polynomials returns a list of pairs\n+`(root, multiplicity)`.\n+\n+Before this ticket, e.g. in Sage 9.2.beta12, this can fail:\n+\n ```\n-PolynomialRing(SR, names=\"x\")(\"x^2\").roots()\n+sage: PolynomialRing(SR, names=\"x\")(\"x^2\").roots()\n+[0, 2]\n ```\n \n-Expected result: [(0, 2)]\n-Actual result: [0, 2]\n+With this ticket, we get the expected result:\n \n-I tested this on 9.2.beta12, which is what the \"develop\" branch points to at the time of writing.\n+```\n+sage: PolynomialRing(SR, names=\"x\")(\"x^2\").roots()\n+[(0, 2)]\n+```\n \n``````\n",
    "created_at": "2020-09-08T17:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603051",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,17 @@
-The bug can be reproduced by running the following code:
-	
+The `roots` method for polynomials returns a list of pairs
+`(root, multiplicity)`.
+
+Before this ticket, e.g. in Sage 9.2.beta12, this can fail:
+
 ```
-PolynomialRing(SR, names="x")("x^2").roots()
+sage: PolynomialRing(SR, names="x")("x^2").roots()
+[0, 2]
 ```
 
-Expected result: [(0, 2)]
-Actual result: [0, 2]
+With this ticket, we get the expected result:
 
-I tested this on 9.2.beta12, which is what the "develop" branch points to at the time of writing.
+```
+sage: PolynomialRing(SR, names="x")("x^2").roots()
+[(0, 2)]
+```
 
``````




---

archive/issue_comments_603052.json:
```json
{
    "body": "Changing keywords from \"\" to \"polynomial, roots\".",
    "created_at": "2020-09-08T17:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603052",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "polynomial, roots".



---

archive/issue_comments_603053.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Samuel Leli\u00e8vre\"",
    "created_at": "2020-09-08T17:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603053",
    "user": "https://github.com/slel"
}
```

Changing reviewer from "" to "Samuel Lelièvre"



---

archive/issue_comments_603054.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-08T17:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603054",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_603055.json:
```json
{
    "body": "<a id='comment:9'></a>Thanks!",
    "created_at": "2020-09-08T17:36:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603055",
    "user": "https://github.com/slel"
}
```

<a id='comment:9'></a>Thanks!



---

archive/issue_comments_603056.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-23T21:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603056",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_079314.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-23T21:27:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30522#event-79314"
}
```



---

archive/issue_comments_603057.json:
```json
{
    "body": "Changing branch from \"u/gh-shak-mar/polynomial_element_pyx__roots__sr__return_value_for_vanishing_determinant_broken\" to \"25ee8d478510e60fe1da91092a4c182708cd21f3\"",
    "created_at": "2020-09-23T21:27:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30522",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30522#issuecomment-603057",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-shak-mar/polynomial_element_pyx__roots__sr__return_value_for_vanishing_determinant_broken" to "25ee8d478510e60fe1da91092a4c182708cd21f3"
