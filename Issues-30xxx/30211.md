# Issue 30211: Characteristic Classes: Sequences

archive/issues_029974.json:
```json
{
    "assignees": [],
    "body": "To each additive/multiplicative characteristic class corresponds a sequence. Namely, due to the [fundamental theorem of symmetric polynomials](https://en.wikipedia.org/wiki/Elementary_symmetric_polynomial#Fundamental_theorem_of_symmetric_polynomials), each symmetric polynomial can be expressed in terms of the elementary symmetric polynomials. In our setup, the `k`-th elementary symmetric polynomials corresponds to the `k`-th Chern class. This allows us to express additive/multiplicative characteristic classes in terms of Chern classes (or Pontryagin classes in the real case respectively). This is the sequence.\n\nCC:  @slel @egourgoulhon @tscrim\n\nComponent: **manifolds**\n\nAuthor: **Michael Jung**\n\nBranch/Commit: **[`7aa0ec5`](https://github.com/sagemath/sagetrac-mirror/commit/7aa0ec5d36f81048c53beca87bd2adfffbebba6f)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30211_\n\n",
    "closed_at": "2021-05-27T20:29:14Z",
    "created_at": "2020-07-24T08:32:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Characteristic Classes: Sequences",
    "type": "issue",
    "updated_at": "2021-05-27T20:29:14Z",
    "url": "https://github.com/sagemath/sage/issues/30211",
    "user": "https://github.com/mjungmath"
}
```
To each additive/multiplicative characteristic class corresponds a sequence. Namely, due to the [fundamental theorem of symmetric polynomials](https://en.wikipedia.org/wiki/Elementary_symmetric_polynomial#Fundamental_theorem_of_symmetric_polynomials), each symmetric polynomial can be expressed in terms of the elementary symmetric polynomials. In our setup, the `k`-th elementary symmetric polynomials corresponds to the `k`-th Chern class. This allows us to express additive/multiplicative characteristic classes in terms of Chern classes (or Pontryagin classes in the real case respectively). This is the sequence.

CC:  @slel @egourgoulhon @tscrim

Component: **manifolds**

Author: **Michael Jung**

Branch/Commit: **[`7aa0ec5`](https://github.com/sagemath/sagetrac-mirror/commit/7aa0ec5d36f81048c53beca87bd2adfffbebba6f)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/30211_





---

archive/issue_events_413012.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-24T08:32:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413012"
}
```



---

archive/issue_events_413013.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-24T08:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
    "label_color": "0000ff",
    "label_name": "c: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413013"
}
```



---

archive/issue_events_413014.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-24T08:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413014"
}
```



---

archive/issue_events_413015.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-24T08:32:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413015"
}
```



---

archive/issue_comments_478604.json:
```json
{
    "body": "Branch: **[u/gh-mjungmath/characteristic_classes_sequence](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/characteristic_classes_sequence)**",
    "created_at": "2020-07-24T10:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478604",
    "user": "https://github.com/mjungmath"
}
```

Branch: **[u/gh-mjungmath/characteristic_classes_sequence](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/characteristic_classes_sequence)**



---

archive/issue_comments_478605.json:
```json
{
    "body": "Commit: **[`6972030`](https://github.com/sagemath/sagetrac-mirror/commit/6972030d8a15bf6c9371658826e35de746e4ab1b)**",
    "created_at": "2020-07-24T10:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478605",
    "user": "https://github.com/mjungmath"
}
```

Commit: **[`6972030`](https://github.com/sagemath/sagetrac-mirror/commit/6972030d8a15bf6c9371658826e35de746e4ab1b)**



---

archive/issue_comments_478606.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6972030d8a15bf6c9371658826e35de746e4ab1b\"><code>6972030</code></a></td><td><code>Trac #30211: sequence function added</code></td></tr></table>\n",
    "created_at": "2020-07-24T10:51:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478606",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6972030d8a15bf6c9371658826e35de746e4ab1b"><code>6972030</code></a></td><td><code>Trac #30211: sequence function added</code></td></tr></table>




---

archive/issue_events_413016.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-24T10:51:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413016"
}
```



---

archive/issue_comments_478607.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5f25df57fe1aa5576d295c7bfffbb5315472354d\"><code>5f25df5</code></a></td><td><code>Trac #30211: Merge branch 'develop' into characteristic_classes_sequence</code></td></tr></table>\n",
    "created_at": "2020-07-26T15:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478607",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5f25df57fe1aa5576d295c7bfffbb5315472354d"><code>5f25df5</code></a></td><td><code>Trac #30211: Merge branch 'develop' into characteristic_classes_sequence</code></td></tr></table>




---

archive/issue_comments_478608.json:
```json
{
    "body": "Changed commit from **[`6972030`](https://github.com/sagemath/sagetrac-mirror/commit/6972030d8a15bf6c9371658826e35de746e4ab1b)** to **[`5f25df5`](https://github.com/sagemath/sagetrac-mirror/commit/5f25df57fe1aa5576d295c7bfffbb5315472354d)**",
    "created_at": "2020-07-26T15:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478608",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6972030`](https://github.com/sagemath/sagetrac-mirror/commit/6972030d8a15bf6c9371658826e35de746e4ab1b)** to **[`5f25df5`](https://github.com/sagemath/sagetrac-mirror/commit/5f25df57fe1aa5576d295c7bfffbb5315472354d)**



---

archive/issue_comments_478609.json:
```json
{
    "body": "Changed commit from **[`5f25df5`](https://github.com/sagemath/sagetrac-mirror/commit/5f25df57fe1aa5576d295c7bfffbb5315472354d)** to **[`c7414bd`](https://github.com/sagemath/sagetrac-mirror/commit/c7414bdcd94df01d5ca6eacad9344f6243457b64)**",
    "created_at": "2020-07-28T10:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478609",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5f25df5`](https://github.com/sagemath/sagetrac-mirror/commit/5f25df57fe1aa5576d295c7bfffbb5315472354d)** to **[`c7414bd`](https://github.com/sagemath/sagetrac-mirror/commit/c7414bdcd94df01d5ca6eacad9344f6243457b64)**



---

archive/issue_comments_478610.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7414bdcd94df01d5ca6eacad9344f6243457b64\"><code>c7414bd</code></a></td><td><code>Trac #30211: docstring syntax</code></td></tr></table>\n",
    "created_at": "2020-07-28T10:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478610",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7414bdcd94df01d5ca6eacad9344f6243457b64"><code>c7414bd</code></a></td><td><code>Trac #30211: docstring syntax</code></td></tr></table>




---

archive/issue_comments_478611.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThis ticket is ready for review. Patchbot should turn green after this commit.",
    "created_at": "2020-07-28T10:42:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478611",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:5" align="right">comment:5</div>

This ticket is ready for review. Patchbot should turn green after this commit.



---

archive/issue_comments_478612.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nDo you have an example that gives something that is not a symmetric function over `QQ`?\n\nAlso, you are better off using\n\n```python\nm = Sym.m()\nm._from_dict({p: prod(ring(coeff[i]) for i in p)\n              for k in range(len(coeff))\n              for p in Partitions(k))\n```\nwhich is faster as it more directly creates the symmmetric function you want.",
    "created_at": "2020-08-03T12:58:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478612",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

Do you have an example that gives something that is not a symmetric function over `QQ`?

Also, you are better off using

```python
m = Sym.m()
m._from_dict({p: prod(ring(coeff[i]) for i in p)
              for k in range(len(coeff))
              for p in Partitions(k))
```
which is faster as it more directly creates the symmmetric function you want.



---

archive/issue_comments_478613.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@tscrim](#comment%3A6):\n> Do you have an example that gives something that is not a symmetric function over `QQ`?\n\nSure: `x-y` is no symmetric function over `QQ`.\n\n> \n> Also, you are better off using\n> \n> ```python\n> m = Sym.m()\n> m._from_dict({p: prod(ring(coeff[i]) for i in p)\n>               for k in range(len(coeff))\n>               for p in Partitions(k))\n> ```\n> which is faster as it more directly creates the symmmetric function you want.\n\nThanks, I'll try this.",
    "created_at": "2020-08-03T15:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478613",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@tscrim](#comment%3A6):
> Do you have an example that gives something that is not a symmetric function over `QQ`?

Sure: `x-y` is no symmetric function over `QQ`.

> 
> Also, you are better off using
> 
> ```python
> m = Sym.m()
> m._from_dict({p: prod(ring(coeff[i]) for i in p)
>               for k in range(len(coeff))
>               for p in Partitions(k))
> ```
> which is faster as it more directly creates the symmmetric function you want.

Thanks, I'll try this.



---

archive/issue_events_413017.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-03T15:39:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413017"
}
```



---

archive/issue_events_413018.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-03T15:39:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413018"
}
```



---

archive/issue_comments_478614.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nApparently, there is something wrong with the code since some doctests fail. I'll check on this.",
    "created_at": "2020-08-03T15:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478614",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:8" align="right">comment:8</div>

Apparently, there is something wrong with the code since some doctests fail. I'll check on this.



---

archive/issue_comments_478615.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@mjungmath](#comment%3A7):\n> Replying to [@tscrim](#comment%3A6):\n> > Do you have an example that gives something that is not a symmetric function over `QQ`?\n\n> \n> Sure: `x-y` is no symmetric function over `QQ`.\n\nI know what a symmetric function is (that is basically my main research area). What I want is a symmetric function over some other base ring besides `QQ`. Can you add an example where this happens? In the branch, you say don't assume `QQ`, so I want a doctest where that actually occurs.",
    "created_at": "2020-08-04T04:54:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478615",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@mjungmath](#comment%3A7):
> Replying to [@tscrim](#comment%3A6):
> > Do you have an example that gives something that is not a symmetric function over `QQ`?

> 
> Sure: `x-y` is no symmetric function over `QQ`.

I know what a symmetric function is (that is basically my main research area). What I want is a symmetric function over some other base ring besides `QQ`. Can you add an example where this happens? In the branch, you say don't assume `QQ`, so I want a doctest where that actually occurs.



---

archive/issue_comments_478616.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nAh, I see. I was already wondering. :D\n\nWell yes, the standard case is `QQ` but at the moment, there is nothing that prevents you having a parameter in `SR`. This might come in useful (I don't know when exactly, but I want to keep the possibility open). Now, I wanted to make sure that the algorithm always works, even in that case, so I chose `SR`.",
    "created_at": "2020-08-04T07:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478616",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:10" align="right">comment:10</div>

Ah, I see. I was already wondering. :D

Well yes, the standard case is `QQ` but at the moment, there is nothing that prevents you having a parameter in `SR`. This might come in useful (I don't know when exactly, but I want to keep the possibility open). Now, I wanted to make sure that the algorithm always works, even in that case, so I chose `SR`.



---

archive/issue_comments_478617.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI will try another attempt using power series only. I hope this simplifies the code significantly. Furthermore, this could improve the performance since power series compute things faster than symbolic expressions; also the use of power series is mathematically more rigorous. Finally, power series (over the symbolic ring) allow to distinct between parameters and the actual variable.",
    "created_at": "2020-08-04T17:40:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478617",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:11" align="right">comment:11</div>

I will try another attempt using power series only. I hope this simplifies the code significantly. Furthermore, this could improve the performance since power series compute things faster than symbolic expressions; also the use of power series is mathematically more rigorous. Finally, power series (over the symbolic ring) allow to distinct between parameters and the actual variable.



---

archive/issue_events_413019.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413019"
}
```



---

archive/issue_events_413020.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413020"
}
```



---

archive/issue_comments_478618.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@tscrim](#comment%3A9):\n> Replying to [@mjungmath](#comment%3A7):\n> > Replying to [@tscrim](#comment%3A6):\n> > > Do you have an example that gives something that is not a symmetric function over `QQ`?\n\n> > \n> > Sure: `x-y` is no symmetric function over `QQ`.\n\n> \n> I know what a symmetric function is (that is basically my main research area). What I want is a symmetric function over some other base ring besides `QQ`. Can you add an example where this happens? In the branch, you say don't assume `QQ`, so I want a doctest where that actually occurs.\n\nGeneral question: do the examples have to be mathematically sensible? For instance, there are plenty of examples where the coefficients of the Taylor expansion are not rationals and `SR` is then a reasonable choice, but such examples are very uncommon in the application of characteristic classes.",
    "created_at": "2020-09-19T19:52:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478618",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@tscrim](#comment%3A9):
> Replying to [@mjungmath](#comment%3A7):
> > Replying to [@tscrim](#comment%3A6):
> > > Do you have an example that gives something that is not a symmetric function over `QQ`?

> > 
> > Sure: `x-y` is no symmetric function over `QQ`.

> 
> I know what a symmetric function is (that is basically my main research area). What I want is a symmetric function over some other base ring besides `QQ`. Can you add an example where this happens? In the branch, you say don't assume `QQ`, so I want a doctest where that actually occurs.

General question: do the examples have to be mathematically sensible? For instance, there are plenty of examples where the coefficients of the Taylor expansion are not rationals and `SR` is then a reasonable choice, but such examples are very uncommon in the application of characteristic classes.



---

archive/issue_comments_478619.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@mjungmath](#comment%3A13):\n> Replying to [@tscrim](#comment%3A9):\n> > Replying to [@mjungmath](#comment%3A7):\n> > > Replying to [@tscrim](#comment%3A6):\n> > > > Do you have an example that gives something that is not a symmetric function over `QQ`?\n\n> > > \n> > > Sure: `x-y` is no symmetric function over `QQ`.\n\n> > \n> > I know what a symmetric function is (that is basically my main research area). What I want is a symmetric function over some other base ring besides `QQ`. Can you add an example where this happens? In the branch, you say don't assume `QQ`, so I want a doctest where that actually occurs.\n\n> \n> General question: do the examples have to be mathematically sensible? For instance, there are plenty of examples where the coefficients of the Taylor expansion are not rationals and `SR` is then a reasonable choice, but such examples are very uncommon in the application of characteristic classes.\n\nUncommon is different than mathematically sensible. Since it something you are supporting, it should be tested, even if it is uncommon. Something you could do is have `ring` being `None` and then have the code first try `QQ`, and if that doesn't work, do it again with `SR`. However, that would mean the code becomes more complicated. Another option would be to default to `QQ` with the documentation saying that if it fails over `QQ`, try `SR`.",
    "created_at": "2020-09-22T00:53:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478619",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@mjungmath](#comment%3A13):
> Replying to [@tscrim](#comment%3A9):
> > Replying to [@mjungmath](#comment%3A7):
> > > Replying to [@tscrim](#comment%3A6):
> > > > Do you have an example that gives something that is not a symmetric function over `QQ`?

> > > 
> > > Sure: `x-y` is no symmetric function over `QQ`.

> > 
> > I know what a symmetric function is (that is basically my main research area). What I want is a symmetric function over some other base ring besides `QQ`. Can you add an example where this happens? In the branch, you say don't assume `QQ`, so I want a doctest where that actually occurs.

> 
> General question: do the examples have to be mathematically sensible? For instance, there are plenty of examples where the coefficients of the Taylor expansion are not rationals and `SR` is then a reasonable choice, but such examples are very uncommon in the application of characteristic classes.

Uncommon is different than mathematically sensible. Since it something you are supporting, it should be tested, even if it is uncommon. Something you could do is have `ring` being `None` and then have the code first try `QQ`, and if that doesn't work, do it again with `SR`. However, that would mean the code becomes more complicated. Another option would be to default to `QQ` with the documentation saying that if it fails over `QQ`, try `SR`.



---

archive/issue_comments_478620.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21fee92369a6b47b5e07ba272e72bc195dd6c1f1\"><code>21fee92</code></a></td><td><code>Trac #30211: \"ring=QQ\"</code></td></tr></table>\n",
    "created_at": "2020-10-25T09:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478620",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21fee92369a6b47b5e07ba272e72bc195dd6c1f1"><code>21fee92</code></a></td><td><code>Trac #30211: "ring=QQ"</code></td></tr></table>




---

archive/issue_comments_478621.json:
```json
{
    "body": "Changed commit from **[`c7414bd`](https://github.com/sagemath/sagetrac-mirror/commit/c7414bdcd94df01d5ca6eacad9344f6243457b64)** to **[`21fee92`](https://github.com/sagemath/sagetrac-mirror/commit/21fee92369a6b47b5e07ba272e72bc195dd6c1f1)**",
    "created_at": "2020-10-25T09:48:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478621",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c7414bd`](https://github.com/sagemath/sagetrac-mirror/commit/c7414bdcd94df01d5ca6eacad9344f6243457b64)** to **[`21fee92`](https://github.com/sagemath/sagetrac-mirror/commit/21fee92369a6b47b5e07ba272e72bc195dd6c1f1)**



---

archive/issue_events_413021.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-10-25T09:49:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413021"
}
```



---

archive/issue_events_413022.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-10-25T09:49:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413022"
}
```



---

archive/issue_comments_478622.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49d617b34d94aadeef080c34252826783a2fd58a\"><code>49d617b</code></a></td><td><code>Trac #30211: distinct_real</code></td></tr></table>\n",
    "created_at": "2020-10-25T10:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478622",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49d617b34d94aadeef080c34252826783a2fd58a"><code>49d617b</code></a></td><td><code>Trac #30211: distinct_real</code></td></tr></table>




---

archive/issue_comments_478623.json:
```json
{
    "body": "Changed commit from **[`21fee92`](https://github.com/sagemath/sagetrac-mirror/commit/21fee92369a6b47b5e07ba272e72bc195dd6c1f1)** to **[`49d617b`](https://github.com/sagemath/sagetrac-mirror/commit/49d617b34d94aadeef080c34252826783a2fd58a)**",
    "created_at": "2020-10-25T10:43:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478623",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`21fee92`](https://github.com/sagemath/sagetrac-mirror/commit/21fee92369a6b47b5e07ba272e72bc195dd6c1f1)** to **[`49d617b`](https://github.com/sagemath/sagetrac-mirror/commit/49d617b34d94aadeef080c34252826783a2fd58a)**



---

archive/issue_comments_478624.json:
```json
{
    "body": "Changed commit from **[`49d617b`](https://github.com/sagemath/sagetrac-mirror/commit/49d617b34d94aadeef080c34252826783a2fd58a)** to **[`4765f29`](https://github.com/sagemath/sagetrac-mirror/commit/4765f29e000ba667e8099ff030d87ffe4bc66373)**",
    "created_at": "2020-10-25T10:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478624",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`49d617b`](https://github.com/sagemath/sagetrac-mirror/commit/49d617b34d94aadeef080c34252826783a2fd58a)** to **[`4765f29`](https://github.com/sagemath/sagetrac-mirror/commit/4765f29e000ba667e8099ff030d87ffe4bc66373)**



---

archive/issue_comments_478625.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6687d0c6abdd19da90e54a67237fc05165e7760d\"><code>6687d0c</code></a></td><td><code>Trac #30211: Merge branch 'develop' into t/30211/characteristic_classes_sequence</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4765f29e000ba667e8099ff030d87ffe4bc66373\"><code>4765f29</code></a></td><td><code>Trac #30211: distinct real</code></td></tr></table>\n",
    "created_at": "2020-10-25T10:43:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478625",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6687d0c6abdd19da90e54a67237fc05165e7760d"><code>6687d0c</code></a></td><td><code>Trac #30211: Merge branch 'develop' into t/30211/characteristic_classes_sequence</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4765f29e000ba667e8099ff030d87ffe4bc66373"><code>4765f29</code></a></td><td><code>Trac #30211: distinct real</code></td></tr></table>




---

archive/issue_comments_478626.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThanks. This will be good. Just one comment on the code:\n\n```diff\n             from sage.combinat.partition import Partitions\n             # Get the multiplicative sequence in the monomial basis:\n-            mon_pol = Sym.m().sum(prod(ring(coeff[i]) for i in p) * Sym.m()[p]\n+            mon_pol = Sym.m()._from_dict({p: sum(prod(ring(coeff[i]) for i in p)\n                                   for k in range(len(coeff))\n-                                  for p in Partitions(k))\n+                                  for p in Partitions(k)})\n```\nThis will create the element faster with far less temporary objects.",
    "created_at": "2020-10-26T00:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478626",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Thanks. This will be good. Just one comment on the code:

```diff
             from sage.combinat.partition import Partitions
             # Get the multiplicative sequence in the monomial basis:
-            mon_pol = Sym.m().sum(prod(ring(coeff[i]) for i in p) * Sym.m()[p]
+            mon_pol = Sym.m()._from_dict({p: sum(prod(ring(coeff[i]) for i in p)
                                   for k in range(len(coeff))
-                                  for p in Partitions(k))
+                                  for p in Partitions(k)})
```
This will create the element faster with far less temporary objects.



---

archive/issue_comments_478627.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nYou will probably also want to do something similar for the additive case.",
    "created_at": "2020-10-26T00:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478627",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

You will probably also want to do something similar for the additive case.



---

archive/issue_comments_478628.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7aa0ec5d36f81048c53beca87bd2adfffbebba6f\"><code>7aa0ec5</code></a></td><td><code>Trac #30211: symmetric polynomial via _from_dict</code></td></tr></table>\n",
    "created_at": "2020-10-27T19:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478628",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7aa0ec5d36f81048c53beca87bd2adfffbebba6f"><code>7aa0ec5</code></a></td><td><code>Trac #30211: symmetric polynomial via _from_dict</code></td></tr></table>




---

archive/issue_comments_478629.json:
```json
{
    "body": "Changed commit from **[`4765f29`](https://github.com/sagemath/sagetrac-mirror/commit/4765f29e000ba667e8099ff030d87ffe4bc66373)** to **[`7aa0ec5`](https://github.com/sagemath/sagetrac-mirror/commit/7aa0ec5d36f81048c53beca87bd2adfffbebba6f)**",
    "created_at": "2020-10-27T19:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4765f29`](https://github.com/sagemath/sagetrac-mirror/commit/4765f29e000ba667e8099ff030d87ffe4bc66373)** to **[`7aa0ec5`](https://github.com/sagemath/sagetrac-mirror/commit/7aa0ec5d36f81048c53beca87bd2adfffbebba6f)**



---

archive/issue_comments_478630.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nHere we go. Wait for patchbot.\n\n@tscrim: However, I am not sure whether this ticket is still useful since I plan to reconstruct the whole architecture of characteristic classes. Perhaps it is good if you could join my talk on Friday because I plan to explain the rough idea of the current implementation and an outline of what I have in mind.",
    "created_at": "2020-10-27T19:05:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478630",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:22" align="right">comment:22</div>

Here we go. Wait for patchbot.

@tscrim: However, I am not sure whether this ticket is still useful since I plan to reconstruct the whole architecture of characteristic classes. Perhaps it is good if you could join my talk on Friday because I plan to explain the rough idea of the current implementation and an outline of what I have in mind.



---

archive/issue_comments_478631.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478631",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_413023.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413023"
}
```



---

archive/issue_events_413024.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413024"
}
```



---

archive/issue_comments_478632.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThis will be good for now. If things get completely rewritten, then this can be modified/deprecated at that time.",
    "created_at": "2021-05-13T06:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478632",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:24" align="right">comment:24</div>

This will be good for now. If things get completely rewritten, then this can be modified/deprecated at that time.



---

archive/issue_events_413025.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-13T06:40:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413025"
}
```



---

archive/issue_events_413026.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2021-05-13T06:40:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413026"
}
```



---

archive/issue_comments_478633.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2021-05-13T06:40:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478633",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_478634.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThank you for the review!",
    "created_at": "2021-05-13T12:11:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478634",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:25" align="right">comment:25</div>

Thank you for the review!



---

archive/issue_events_413027.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-05-27T20:29:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413027"
}
```



---

archive/issue_events_413028.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9addf207d9efedf5b00d9ae36a2e195b3f92aa1e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-05-27T20:29:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30211#event-413028"
}
```



---

archive/issue_comments_478635.json:
```json
{
    "body": "Changed branch from **[u/gh-mjungmath/characteristic_classes_sequence](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/characteristic_classes_sequence)** to **[`7aa0ec5`](https://github.com/sagemath/sagetrac-mirror/commit/7aa0ec5d36f81048c53beca87bd2adfffbebba6f)**",
    "created_at": "2021-05-27T20:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30211",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30211#issuecomment-478635",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-mjungmath/characteristic_classes_sequence](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/characteristic_classes_sequence)** to **[`7aa0ec5`](https://github.com/sagemath/sagetrac-mirror/commit/7aa0ec5d36f81048c53beca87bd2adfffbebba6f)**
