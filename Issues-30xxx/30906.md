# Issue 30906: let pari's spkg-configure accept pari 2.13

archive/issues_030669.json:
```json
{
    "body": "some formats have changed, so tests fail, see \n[#30801 comment:6](https://github.com/sagemath/sage/issues/30801#comment:6)\n\nDepends on #30801\n\n**CC:**  @tobihan @thierry-FreeBSD @orlitzky @mkoeppe @antonio-rojas @videlec @dkwo\n\n**Branch:** [u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix)\n\n**Commit:** [ad702bf59ea7372ce12c37f53a18662cd9baee0b](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)\n\n**Reviewer:** Dima Pasechnik\n\nIssue created by migration from https://trac.sagemath.org/ticket/30906\n\n",
    "closed_at": "2021-06-13T06:40:58Z",
    "created_at": "2020-11-13T11:37:09Z",
    "labels": [
        "component: build: configure",
        "critical",
        "bug",
        "invalid"
    ],
    "title": "let pari's spkg-configure accept pari 2.13",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/30906",
    "user": "https://github.com/dimpase"
}
```
some formats have changed, so tests fail, see 
[#30801 comment:6](https://github.com/sagemath/sage/issues/30801#comment:6)

Depends on #30801

**CC:**  @tobihan @thierry-FreeBSD @orlitzky @mkoeppe @antonio-rojas @videlec @dkwo

**Branch:** [u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix)

**Commit:** [ad702bf59ea7372ce12c37f53a18662cd9baee0b](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)

**Reviewer:** Dima Pasechnik

Issue created by migration from https://trac.sagemath.org/ticket/30906





---

archive/issue_events_277137.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T12:48:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277137"
}
```



---

archive/issue_comments_497797.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b\">ad702bf</a></td><td><code>do the bnfisunit check in Pari, not rely on output</code></td></tr></table>\n",
    "created_at": "2020-11-13T12:48:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497797",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b">ad702bf</a></td><td><code>do the bnfisunit check in Pari, not rely on output</code></td></tr></table>




---

archive/issue_comments_497798.json:
```json
{
    "body": "**Commit:** [ad702bf59ea7372ce12c37f53a18662cd9baee0b](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)",
    "created_at": "2020-11-13T12:48:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497798",
    "user": "https://github.com/dimpase"
}
```

**Commit:** [ad702bf59ea7372ce12c37f53a18662cd9baee0b](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)



---

archive/issue_comments_497799.json:
```json
{
    "body": "**Author:** Dima Pasechnik",
    "created_at": "2020-11-13T12:48:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497799",
    "user": "https://github.com/dimpase"
}
```

**Author:** Dima Pasechnik



---

archive/issue_comments_497800.json:
```json
{
    "body": "**Branch:** [u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix)",
    "created_at": "2020-11-13T12:48:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497800",
    "user": "https://github.com/dimpase"
}
```

**Branch:** [u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix)



---

archive/issue_comments_497801.json:
```json
{
    "body": "<a id='comment:4'></a>\nping",
    "created_at": "2020-12-03T09:54:09Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497801",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
ping



---

archive/issue_comments_497802.json:
```json
{
    "body": "<a id='comment:5'></a>\non Gentoo this blocks using system pari",
    "created_at": "2020-12-03T09:54:45Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497802",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:5'></a>
on Gentoo this blocks using system pari



---

archive/issue_events_277138.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-03T09:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "critical",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277138"
}
```



---

archive/issue_events_277139.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-03T17:47:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277139"
}
```



---

archive/issue_events_277140.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-03T17:47:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277140"
}
```



---

archive/issue_comments_497803.json:
```json
{
    "body": "<a id='comment:7'></a>\nThe pari upgrade to the same version in #30801 seems to require nontrivial changes to Sage code and tests and also involves an upgrade of cypari2. How come we should just be able to be accepting system pari 2.13?",
    "created_at": "2020-12-03T17:47:58Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497803",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
The pari upgrade to the same version in #30801 seems to require nontrivial changes to Sage code and tests and also involves an upgrade of cypari2. How come we should just be able to be accepting system pari 2.13?



---

archive/issue_comments_497804.json:
```json
{
    "body": "<a id='comment:9'></a>\nmade it conditional on pari update to 2.13",
    "created_at": "2020-12-31T00:15:39Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497804",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
made it conditional on pari update to 2.13



---

archive/issue_events_277141.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-31T00:15:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277141"
}
```



---

archive/issue_events_277142.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-31T00:15:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277142"
}
```



---

archive/issue_comments_497805.json:
```json
{
    "body": "**Dependencies:** #30801",
    "created_at": "2020-12-31T00:15:39Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497805",
    "user": "https://github.com/dimpase"
}
```

**Dependencies:** #30801



---

archive/issue_comments_497806.json:
```json
{
    "body": "<a id='comment:10'></a>\nOn my Void linux machine, what works is\n\n```\n$ echo \"bnf = bnfinit(y^4-y-1); bnfisunit(bnf,-y^3+2*y^2-1)==[0,2,0]~\" | gp -qf\n1\n```\nwith only one square parenthesis, not two.",
    "created_at": "2021-02-09T17:42:32Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497806",
    "user": "https://github.com/dkwo"
}
```

<a id='comment:10'></a>
On my Void linux machine, what works is

```
$ echo "bnf = bnfinit(y^4-y-1); bnfisunit(bnf,-y^3+2*y^2-1)==[0,2,0]~" | gp -qf
1
```
with only one square parenthesis, not two.



---

archive/issue_comments_497807.json:
```json
{
    "body": "<a id='comment:12'></a>\nthe two brackets are m4 syntax",
    "created_at": "2021-02-09T19:02:21Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497807",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
the two brackets are m4 syntax



---

archive/issue_comments_497808.json:
```json
{
    "body": "<a id='comment:13'></a>\nI see, thanks.\nHowever, even if I edit the file as per the commit, the bnfisunit test still fails for me with pari 2.13.0 using ./config, even though from a shell I get as above.\n\nWhat am I missing?",
    "created_at": "2021-02-09T20:07:21Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497808",
    "user": "https://github.com/dkwo"
}
```

<a id='comment:13'></a>
I see, thanks.
However, even if I edit the file as per the commit, the bnfisunit test still fails for me with pari 2.13.0 using ./config, even though from a shell I get as above.

What am I missing?



---

archive/issue_comments_497809.json:
```json
{
    "body": "<a id='comment:14'></a>\nDid you run `./bootstrap`?",
    "created_at": "2021-02-09T20:10:31Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497809",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Did you run `./bootstrap`?



---

archive/issue_comments_497810.json:
```json
{
    "body": "<a id='comment:15'></a>\nThat fixes it, thanks.",
    "created_at": "2021-02-09T20:40:01Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497810",
    "user": "https://github.com/dkwo"
}
```

<a id='comment:15'></a>
That fixes it, thanks.



---

archive/issue_events_277143.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T21:43:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277143"
}
```



---

archive/issue_events_277144.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T21:43:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277144"
}
```



---

archive/issue_comments_497811.json:
```json
{
    "body": "<a id='comment:17'></a>\nLooks like #30801 is taking care of this",
    "created_at": "2021-03-17T20:17:17Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497811",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>
Looks like #30801 is taking care of this



---

archive/issue_events_277145.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277145"
}
```



---

archive/issue_events_277146.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277146"
}
```



---

archive/issue_comments_497812.json:
```json
{
    "body": "**Changing author** from \"Dima Pasechnik\" to \"\".",
    "created_at": "2021-03-17T20:17:17Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497812",
    "user": "https://github.com/mkoeppe"
}
```

**Changing author** from "Dima Pasechnik" to "".



---

archive/issue_events_277147.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277147"
}
```



---

archive/issue_comments_497813.json:
```json
{
    "body": "<a id='comment:18'></a>\nyep. looks like the fix here was copied there.",
    "created_at": "2021-03-18T11:26:08Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497813",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>
yep. looks like the fix here was copied there.



---

archive/issue_events_277148.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-18T11:26:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277148"
}
```



---

archive/issue_events_277149.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-18T11:26:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277149"
}
```



---

archive/issue_comments_497814.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2021-03-18T11:26:08Z",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-497814",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_events_277150.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-13T06:40:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277150"
}
```



---

archive/issue_events_277151.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-13T06:40:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-277151"
}
```
