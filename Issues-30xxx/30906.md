# Issue 30906: let pari's spkg-configure accept pari 2.13

archive/issues_030669.json:
```json
{
    "assignees": [],
    "body": "some formats have changed, so tests fail, see \n[#30801 comment:6](https://github.com/sagemath/sage/issues/30801#comment:6)\n\nDepends on #30801\n\nCC:  @tobihan @thierry-FreeBSD @orlitzky @mkoeppe @antonio-rojas @videlec @dkwo\n\nComponent: **build: configure**\n\nBranch/Commit: **[u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix) @ [`ad702bf`](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)**\n\nReviewer: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30906_\n\n",
    "closed_at": "2021-06-13T06:40:58Z",
    "created_at": "2020-11-13T11:37:09Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "let pari's spkg-configure accept pari 2.13",
    "type": "issue",
    "updated_at": "2021-06-13T06:40:58Z",
    "url": "https://github.com/sagemath/sage/issues/30906",
    "user": "https://github.com/dimpase"
}
```
some formats have changed, so tests fail, see 
[#30801 comment:6](https://github.com/sagemath/sage/issues/30801#comment:6)

Depends on #30801

CC:  @tobihan @thierry-FreeBSD @orlitzky @mkoeppe @antonio-rojas @videlec @dkwo

Component: **build: configure**

Branch/Commit: **[u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix) @ [`ad702bf`](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)**

Reviewer: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/30906_





---

archive/issue_events_423131.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T11:37:09Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423131"
}
```



---

archive/issue_events_423132.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T11:37:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build%3A%20configure",
    "label_color": "0000b0",
    "label_name": "c: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423132"
}
```



---

archive/issue_events_423133.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T11:37:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423133"
}
```



---

archive/issue_events_423134.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T11:37:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423134"
}
```



---

archive/issue_events_423135.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-11-13T12:48:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423135"
}
```



---

archive/issue_comments_494929.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b\"><code>ad702bf</code></a></td><td><code>do the bnfisunit check in Pari, not rely on output</code></td></tr></table>\n",
    "created_at": "2020-11-13T12:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494929",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b"><code>ad702bf</code></a></td><td><code>do the bnfisunit check in Pari, not rely on output</code></td></tr></table>




---

archive/issue_comments_494930.json:
```json
{
    "body": "Commit: **[`ad702bf`](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)**",
    "created_at": "2020-11-13T12:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494930",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`ad702bf`](https://github.com/sagemath/sagetrac-mirror/commit/ad702bf59ea7372ce12c37f53a18662cd9baee0b)**



---

archive/issue_comments_494931.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2020-11-13T12:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494931",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_comments_494932.json:
```json
{
    "body": "Branch: **[u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix)**",
    "created_at": "2020-11-13T12:48:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494932",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/build/pari213fix](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/build/pari213fix)**



---

archive/issue_comments_494933.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nping",
    "created_at": "2020-12-03T09:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494933",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:4" align="right">comment:4</div>

ping



---

archive/issue_comments_494934.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\non Gentoo this blocks using system pari",
    "created_at": "2020-12-03T09:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494934",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:5" align="right">comment:5</div>

on Gentoo this blocks using system pari



---

archive/issue_events_423136.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-03T09:56:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423136"
}
```



---

archive/issue_events_423137.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-03T09:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423137"
}
```



---

archive/issue_events_423138.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-03T17:47:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423138"
}
```



---

archive/issue_events_423139.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-03T17:47:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423139"
}
```



---

archive/issue_comments_494935.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe pari upgrade to the same version in #30801 seems to require nontrivial changes to Sage code and tests and also involves an upgrade of cypari2. How come we should just be able to be accepting system pari 2.13?",
    "created_at": "2020-12-03T17:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494935",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

The pari upgrade to the same version in #30801 seems to require nontrivial changes to Sage code and tests and also involves an upgrade of cypari2. How come we should just be able to be accepting system pari 2.13?



---

archive/issue_comments_494936.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nmade it conditional on pari update to 2.13",
    "created_at": "2020-12-31T00:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494936",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

made it conditional on pari update to 2.13



---

archive/issue_events_423140.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-31T00:15:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423140"
}
```



---

archive/issue_events_423141.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-12-31T00:15:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423141"
}
```



---

archive/issue_comments_494937.json:
```json
{
    "body": "Dependencies: **#30801**",
    "created_at": "2020-12-31T00:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494937",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#30801**



---

archive/issue_comments_494938.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nOn my Void linux machine, what works is\n\n```\n$ echo \"bnf = bnfinit(y^4-y-1); bnfisunit(bnf,-y^3+2*y^2-1)==[0,2,0]~\" | gp -qf\n1\n```\nwith only one square parenthesis, not two.",
    "created_at": "2021-02-09T17:42:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494938",
    "user": "https://github.com/dkwo"
}
```

<div id="comment:10" align="right">comment:10</div>

On my Void linux machine, what works is

```
$ echo "bnf = bnfinit(y^4-y-1); bnfisunit(bnf,-y^3+2*y^2-1)==[0,2,0]~" | gp -qf
1
```
with only one square parenthesis, not two.



---

archive/issue_comments_494939.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nthe two brackets are m4 syntax",
    "created_at": "2021-02-09T19:02:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494939",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

the two brackets are m4 syntax



---

archive/issue_comments_494940.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI see, thanks.\nHowever, even if I edit the file as per the commit, the bnfisunit test still fails for me with pari 2.13.0 using ./config, even though from a shell I get as above.\n\nWhat am I missing?",
    "created_at": "2021-02-09T20:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494940",
    "user": "https://github.com/dkwo"
}
```

<div id="comment:13" align="right">comment:13</div>

I see, thanks.
However, even if I edit the file as per the commit, the bnfisunit test still fails for me with pari 2.13.0 using ./config, even though from a shell I get as above.

What am I missing?



---

archive/issue_comments_494941.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nDid you run `./bootstrap`?",
    "created_at": "2021-02-09T20:10:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494941",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Did you run `./bootstrap`?



---

archive/issue_comments_494942.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThat fixes it, thanks.",
    "created_at": "2021-02-09T20:40:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494942",
    "user": "https://github.com/dkwo"
}
```

<div id="comment:15" align="right">comment:15</div>

That fixes it, thanks.



---

archive/issue_events_423142.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T21:43:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423142"
}
```



---

archive/issue_events_423143.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T21:43:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423143"
}
```



---

archive/issue_comments_494943.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nLooks like #30801 is taking care of this",
    "created_at": "2021-03-17T20:17:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494943",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Looks like #30801 is taking care of this



---

archive/issue_events_423144.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423144"
}
```



---

archive/issue_events_423145.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423145"
}
```



---

archive/issue_comments_494944.json:
```json
{
    "body": "Changed author from **Dima Pasechnik** to none",
    "created_at": "2021-03-17T20:17:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494944",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Dima Pasechnik** to none



---

archive/issue_events_423146.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-17T20:17:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423146"
}
```



---

archive/issue_comments_494945.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nyep. looks like the fix here was copied there.",
    "created_at": "2021-03-18T11:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494945",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

yep. looks like the fix here was copied there.



---

archive/issue_events_423147.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-18T11:26:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423147"
}
```



---

archive/issue_events_423148.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2021-03-18T11:26:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423148"
}
```



---

archive/issue_comments_494946.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2021-03-18T11:26:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30906#issuecomment-494946",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_events_423149.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-13T06:40:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423149"
}
```



---

archive/issue_events_423150.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-06-13T06:40:58Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30906",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30906#event-423150"
}
```
