# Issue 30915: Three.js: Upgrade to r122

archive/issues_030678.json:
```json
{
    "assignees": [],
    "body": "\n\nCC:  @jcamp0x2a @kiwifb @mkoeppe @EmmanuelCharpentier @enriqueartal\n\nComponent: **graphics**\n\nKeywords: **threejs**\n\nAuthor: **Paul Masson, Joshua Campbell**\n\nBranch/Commit: **[`c097439`](https://github.com/sagemath/sagetrac-mirror/commit/c0974392afc80a51693d40896a21c8e9902a7f27)**\n\nReviewer: **Joshua Campbell, Paul Masson, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30915_\n\n",
    "closed_at": "2020-12-05T22:13:11Z",
    "created_at": "2020-11-15T01:05:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graphics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Three.js: Upgrade to r122",
    "type": "issue",
    "updated_at": "2020-12-05T22:13:11Z",
    "url": "https://github.com/sagemath/sage/issues/30915",
    "user": "https://github.com/paulmasson"
}
```


CC:  @jcamp0x2a @kiwifb @mkoeppe @EmmanuelCharpentier @enriqueartal

Component: **graphics**

Keywords: **threejs**

Author: **Paul Masson, Joshua Campbell**

Branch/Commit: **[`c097439`](https://github.com/sagemath/sagetrac-mirror/commit/c0974392afc80a51693d40896a21c8e9902a7f27)**

Reviewer: **Joshua Campbell, Paul Masson, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/30915_





---

archive/issue_events_423272.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-15T01:05:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423272"
}
```



---

archive/issue_events_423273.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-15T01:05:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graphics",
    "label_color": "0000ff",
    "label_name": "c: graphics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423273"
}
```



---

archive/issue_events_423274.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-15T01:05:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423274"
}
```



---

archive/issue_events_423275.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-15T01:05:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423275"
}
```



---

archive/issue_comments_495278.json:
```json
{
    "body": "Branch: **[u/paulmasson/threejs-r122](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/threejs-r122)**",
    "created_at": "2020-11-15T01:05:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495278",
    "user": "https://github.com/paulmasson"
}
```

Branch: **[u/paulmasson/threejs-r122](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/threejs-r122)**



---

archive/issue_comments_495279.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nJoshua, should only need to do `make build` to test this. Downloading the file should be automatic.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ad4bdc82faf192a8bcf86eeb7ab3a18150efc97\"><code>9ad4bdc</code></a></td><td><code>Upgrade to r122</code></td></tr></table>\n",
    "created_at": "2020-11-15T01:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495279",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:2" align="right">comment:2</div>

Joshua, should only need to do `make build` to test this. Downloading the file should be automatic.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ad4bdc82faf192a8bcf86eeb7ab3a18150efc97"><code>9ad4bdc</code></a></td><td><code>Upgrade to r122</code></td></tr></table>




---

archive/issue_comments_495280.json:
```json
{
    "body": "Commit: **[`9ad4bdc`](https://github.com/sagemath/sagetrac-mirror/commit/9ad4bdc82faf192a8bcf86eeb7ab3a18150efc97)**",
    "created_at": "2020-11-15T01:07:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495280",
    "user": "https://github.com/paulmasson"
}
```

Commit: **[`9ad4bdc`](https://github.com/sagemath/sagetrac-mirror/commit/9ad4bdc82faf192a8bcf86eeb7ab3a18150efc97)**



---

archive/issue_events_423276.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-15T01:07:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423276"
}
```



---

archive/issue_events_423277.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-15T04:27:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423277"
}
```



---

archive/issue_events_423278.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-15T04:27:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423278"
}
```



---

archive/issue_comments_495281.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\n`make build` appears to have downloaded and extracted the files successfully. All the right stuff (OrbitControls and the \"fat\" line classes) seem to appear in the `three.min.js` file extracted into `local/share/threejs/build` and running a diff on it against the script I built from your repo produces no output, so it looks good.\n\nOf course, the HTML plots produced are still looking for `OrbitControls.js` and/or directing to mrdoob's repo on the CDN, but that's going to be a separate ticket?",
    "created_at": "2020-11-15T04:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495281",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:5" align="right">comment:5</div>

`make build` appears to have downloaded and extracted the files successfully. All the right stuff (OrbitControls and the "fat" line classes) seem to appear in the `three.min.js` file extracted into `local/share/threejs/build` and running a diff on it against the script I built from your repo produces no output, so it looks good.

Of course, the HTML plots produced are still looking for `OrbitControls.js` and/or directing to mrdoob's repo on the CDN, but that's going to be a separate ticket?



---

archive/issue_comments_495282.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@jcamp0x2a](#comment%3A5):\n\n> Of course, the HTML plots produced are still looking for `OrbitControls.js` and/or directing to mrdoob's repo on the CDN, but that's going to be a separate ticket?\n\nNo, I overlooked that before meeting a friend for dinner. Will fix tomorrow, but my friend pointed out another development: Mr.doob [reversed](https://github.com/mrdoob/three.js/issues/20455#issuecomment-706954770) himself and won\u2019t be deprecating `examples/js` this year. I think I\u2019m still in favor of this custom build rather than assembling a tarball because the entire process is smoother and the transition will happen at some point anyway. Feedback is welcome.",
    "created_at": "2020-11-15T04:50:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495282",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@jcamp0x2a](#comment%3A5):

> Of course, the HTML plots produced are still looking for `OrbitControls.js` and/or directing to mrdoob's repo on the CDN, but that's going to be a separate ticket?

No, I overlooked that before meeting a friend for dinner. Will fix tomorrow, but my friend pointed out another development: Mr.doob [reversed](https://github.com/mrdoob/three.js/issues/20455#issuecomment-706954770) himself and won’t be deprecating `examples/js` this year. I think I’m still in favor of this custom build rather than assembling a tarball because the entire process is smoother and the transition will happen at some point anyway. Feedback is welcome.



---

archive/issue_comments_495283.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@paulmasson](#comment%3A6):\n> I think I\u2019m still in favor of this custom build rather than assembling a tarball because the entire process is smoother and the transition will happen at some point anyway. Feedback is welcome. \n\nI would agree. It also allows everything to be bundled up into a single javascript file instead of having to include OrbitControls and now all the line stuff separately. So I think it's a positive change even if `examples/js` were never deprecated.",
    "created_at": "2020-11-15T05:05:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495283",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@paulmasson](#comment%3A6):
> I think I’m still in favor of this custom build rather than assembling a tarball because the entire process is smoother and the transition will happen at some point anyway. Feedback is welcome. 

I would agree. It also allows everything to be bundled up into a single javascript file instead of having to include OrbitControls and now all the line stuff separately. So I think it's a positive change even if `examples/js` were never deprecated.



---

archive/issue_comments_495284.json:
```json
{
    "body": "Changed commit from **[`9ad4bdc`](https://github.com/sagemath/sagetrac-mirror/commit/9ad4bdc82faf192a8bcf86eeb7ab3a18150efc97)** to **[`63530d2`](https://github.com/sagemath/sagetrac-mirror/commit/63530d2029ef7dd07f5437220ec02f27ded02457)**",
    "created_at": "2020-11-20T23:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495284",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9ad4bdc`](https://github.com/sagemath/sagetrac-mirror/commit/9ad4bdc82faf192a8bcf86eeb7ab3a18150efc97)** to **[`63530d2`](https://github.com/sagemath/sagetrac-mirror/commit/63530d2029ef7dd07f5437220ec02f27ded02457)**



---

archive/issue_comments_495285.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63530d2029ef7dd07f5437220ec02f27ded02457\"><code>63530d2</code></a></td><td><code>Update script link generation</code></td></tr></table>\n",
    "created_at": "2020-11-20T23:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495285",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63530d2029ef7dd07f5437220ec02f27ded02457"><code>63530d2</code></a></td><td><code>Update script link generation</code></td></tr></table>




---

archive/issue_events_423279.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-20T23:53:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423279"
}
```



---

archive/issue_events_423280.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-20T23:53:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423280"
}
```



---

archive/issue_comments_495286.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThe new commit updates the link generated internally, both for online and offline use. I changed the name of the internal function to recognize this. Doctests pass on the two modified files.\n\nMatthias, part of the reason I wanted the repository moved to the SageMath organization is that the online links must point to my personal repository on the CDN. If someone creates notebooks with these changes in place for online use, they may fail to work in the future when the repository is moved. If you're fine with that possibility, then we can procede with the upgrade.\n\nJoshua, before testing this ticket again let's hear back from Matthais.",
    "created_at": "2020-11-20T23:55:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495286",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:10" align="right">comment:10</div>

The new commit updates the link generated internally, both for online and offline use. I changed the name of the internal function to recognize this. Doctests pass on the two modified files.

Matthias, part of the reason I wanted the repository moved to the SageMath organization is that the online links must point to my personal repository on the CDN. If someone creates notebooks with these changes in place for online use, they may fail to work in the future when the repository is moved. If you're fine with that possibility, then we can procede with the upgrade.

Joshua, before testing this ticket again let's hear back from Matthais.



---

archive/issue_comments_495287.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nMakes sense. Am I understanding correctly that `jsdelivr.net` refers to specific tags here, so when you update the repository, the old versions stick around and can continue to be referred to by plots that were generated earlier?",
    "created_at": "2020-11-21T00:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495287",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Makes sense. Am I understanding correctly that `jsdelivr.net` refers to specific tags here, so when you update the repository, the old versions stick around and can continue to be referred to by plots that were generated earlier?



---

archive/issue_comments_495288.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mkoeppe](#comment%3A11):\n> Makes sense. Am I understanding correctly that `jsdelivr.net` refers to specific tags here, so when you update the repository, the old versions stick around and can continue to be referred to by plots that were generated earlier?\n\nOnce a file is in the CDN it is always available for future use and is indeed referenced by tag. According to the [documentation](https://www.jsdelivr.com/features#gh) the files remain even when a repository is deleted, so presumably it can handle movement of the repository between organizations. If you want us to proceed with the current setup then we can do that without too much worry after all.",
    "created_at": "2020-11-21T01:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495288",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mkoeppe](#comment%3A11):
> Makes sense. Am I understanding correctly that `jsdelivr.net` refers to specific tags here, so when you update the repository, the old versions stick around and can continue to be referred to by plots that were generated earlier?

Once a file is in the CDN it is always available for future use and is indeed referenced by tag. According to the [documentation](https://www.jsdelivr.com/features#gh) the files remain even when a repository is deleted, so presumably it can handle movement of the repository between organizations. If you want us to proceed with the current setup then we can do that without too much worry after all.



---

archive/issue_comments_495289.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks. And for the offline mode - does it make sense to make several versions available in SAGE_LOCAL?",
    "created_at": "2020-11-21T01:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495289",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks. And for the offline mode - does it make sense to make several versions available in SAGE_LOCAL?



---

archive/issue_comments_495290.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAlso, does the offline mode depend at all on the symbolic link `threejs` that is installed in `$SAGE_LOCAL/share/jupyter/nbextensions`?\n\n(My guess is that it does not and we can remove this symbolic link. At least that's what I gather from a comment in #30476 - it seems that threejs offline graphics also works with system jupyter notebook, which does not have that symbolic link.)",
    "created_at": "2020-11-21T01:30:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495290",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Also, does the offline mode depend at all on the symbolic link `threejs` that is installed in `$SAGE_LOCAL/share/jupyter/nbextensions`?

(My guess is that it does not and we can remove this symbolic link. At least that's what I gather from a comment in #30476 - it seems that threejs offline graphics also works with system jupyter notebook, which does not have that symbolic link.)



---

archive/issue_comments_495291.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@mkoeppe](#comment%3A13):\n> Thanks. And for the offline mode - does it make sense to make several versions available in SAGE_LOCAL?\n\nNo, it does not. The Three.js template is specifically tailored to the release currently in use. Mr. Doob sometimes breaks things. Backwards compatibility is not assured.",
    "created_at": "2020-11-21T01:41:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495291",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@mkoeppe](#comment%3A13):
> Thanks. And for the offline mode - does it make sense to make several versions available in SAGE_LOCAL?

No, it does not. The Three.js template is specifically tailored to the release currently in use. Mr. Doob sometimes breaks things. Backwards compatibility is not assured.



---

archive/issue_comments_495292.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@mkoeppe](#comment%3A14):\n> Also, does the offline mode depend at all on the symbolic link `threejs` that is installed in `$SAGE_LOCAL/share/jupyter/nbextensions`?\n\nThe system Jupyter notebook needs to find the local files for our Three.js viewer to work. As far as I know the symbolic link is how that happens. If you have a better idea in mind for letting the notebook know where the files are, then go for it. I'm still not clear on this question.",
    "created_at": "2020-11-21T01:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495292",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@mkoeppe](#comment%3A14):
> Also, does the offline mode depend at all on the symbolic link `threejs` that is installed in `$SAGE_LOCAL/share/jupyter/nbextensions`?

The system Jupyter notebook needs to find the local files for our Three.js viewer to work. As far as I know the symbolic link is how that happens. If you have a better idea in mind for letting the notebook know where the files are, then go for it. I'm still not clear on this question.



---

archive/issue_comments_495293.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@paulmasson](#comment%3A16):\n> Replying to [@mkoeppe](#comment%3A14):\n> > Also, does the offline mode depend at all on the symbolic link `threejs` that is installed in `$SAGE_LOCAL/share/jupyter/nbextensions`?\n\n> The system Jupyter notebook needs to find the local files for our Three.js viewer to work. As far as I know the symbolic link is how that happens. If you have a better idea in mind for letting the notebook know where the files are, then go for it. I'm still not clear on this question.\n\nThis seems to contradict what @EmmanuelCharpentier reported in #30476 regarding offline threejs in the system jupyter notebook.\n@EmmanuelCharpentier, @enriqueartal, could you help clarify this?",
    "created_at": "2020-11-21T02:43:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495293",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@paulmasson](#comment%3A16):
> Replying to [@mkoeppe](#comment%3A14):
> > Also, does the offline mode depend at all on the symbolic link `threejs` that is installed in `$SAGE_LOCAL/share/jupyter/nbextensions`?

> The system Jupyter notebook needs to find the local files for our Three.js viewer to work. As far as I know the symbolic link is how that happens. If you have a better idea in mind for letting the notebook know where the files are, then go for it. I'm still not clear on this question.

This seems to contradict what @EmmanuelCharpentier reported in #30476 regarding offline threejs in the system jupyter notebook.
@EmmanuelCharpentier, @enriqueartal, could you help clarify this?



---

archive/issue_comments_495294.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@paulmasson](#comment%3A15):\n> Replying to [@mkoeppe](#comment%3A13):\n> > Thanks. And for the offline mode - does it make sense to make several versions available in SAGE_LOCAL?\n\n> No, it does not. The Three.js template is specifically tailored to the release currently in use. Mr. Doob sometimes breaks things. Backwards compatibility is not assured.\n\nHmm... perhaps it would be better to link the offline plots to a specific version.\n\nFor example, suppose I generate an offline plot using the template that works for r117. The plot links to `/home/joshua/sage/local/share/threejs/build/three.min.js`. Some time in the future I upgrade [SageMath](../wiki/SageMath) in-place. (Do normal users do that?) That old plot is now linking to three.js r122 despite the template it was generated from only being guaranteed to work with r117. Suddenly the plot may no longer work.\n\nThat's not an issue for the Jupyter notebook since it's a \"live\" environment and you can always just re-run the cell to get an up-to-date plot. It's also not an issue for the CDN scripts since those are tied to specific versions.\n\nAlthough even if we fixed this, it'd still be fragile in that moving/deleting [SageMath](../wiki/SageMath) would also break old plots. To make a fully self-contained and isolated offline plot would probably require including the content of `three.min.js` inline instead of linking, but I imagine that might run afoul of the license.",
    "created_at": "2020-11-21T02:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495294",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@paulmasson](#comment%3A15):
> Replying to [@mkoeppe](#comment%3A13):
> > Thanks. And for the offline mode - does it make sense to make several versions available in SAGE_LOCAL?

> No, it does not. The Three.js template is specifically tailored to the release currently in use. Mr. Doob sometimes breaks things. Backwards compatibility is not assured.

Hmm... perhaps it would be better to link the offline plots to a specific version.

For example, suppose I generate an offline plot using the template that works for r117. The plot links to `/home/joshua/sage/local/share/threejs/build/three.min.js`. Some time in the future I upgrade [SageMath](../wiki/SageMath) in-place. (Do normal users do that?) That old plot is now linking to three.js r122 despite the template it was generated from only being guaranteed to work with r117. Suddenly the plot may no longer work.

That's not an issue for the Jupyter notebook since it's a "live" environment and you can always just re-run the cell to get an up-to-date plot. It's also not an issue for the CDN scripts since those are tied to specific versions.

Although even if we fixed this, it'd still be fragile in that moving/deleting [SageMath](../wiki/SageMath) would also break old plots. To make a fully self-contained and isolated offline plot would probably require including the content of `three.min.js` inline instead of linking, but I imagine that might run afoul of the license.



---

archive/issue_comments_495295.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIn any case, so that we can make progress here, I have forked the repo at https://github.com/sagemath/threejs-sage",
    "created_at": "2020-11-21T02:49:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495295",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

In any case, so that we can make progress here, I have forked the repo at https://github.com/sagemath/threejs-sage



---

archive/issue_comments_495296.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jcamp0x2a](#comment%3A18):\n> Replying to [@paulmasson](#comment%3A15):\n> > Replying to [@mkoeppe](#comment%3A13):\n> > > Thanks. And for the offline mode - does it make sense to make several versions available in SAGE_LOCAL?\n\n> > No, it does not. The Three.js template is specifically tailored to the release currently in use. Mr. Doob sometimes breaks things. Backwards compatibility is not assured.\n\n> \n> Hmm... perhaps it would be better to link the offline plots to a specific version.\n> \n> For example, suppose I generate an offline plot using the template that works for r117. The plot links to `/home/joshua/sage/local/share/threejs/build/three.min.js`. Some time in the future I upgrade [SageMath](../wiki/SageMath) in-place. (Do normal users do that?)\n\nYes, that's a typical operation.\n\n>  That old plot is now linking to three.js r122 despite the template it was generated from only being guaranteed to work with r117. Suddenly the plot may no longer work.\n\nRight.  So let's please do a versioned installation scheme to address this issue. Basically, upgrades should not break operation of older things.\n\n> That's not an issue for the Jupyter notebook since it's a \"live\" environment and you can always just re-run the cell to get an up-to-date plot.\n\nWell, but isn't it an important part of the point of the notebook format that the outputs are also stored?\n\n> It's also not an issue for the CDN scripts since those are tied to specific versions.\n> \n> Although even if we fixed this, it'd still be fragile in that moving/deleting [SageMath](../wiki/SageMath) would also break old plots. \n\n(Moving the Sage tree is not supported.)",
    "created_at": "2020-11-21T02:53:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495296",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jcamp0x2a](#comment%3A18):
> Replying to [@paulmasson](#comment%3A15):
> > Replying to [@mkoeppe](#comment%3A13):
> > > Thanks. And for the offline mode - does it make sense to make several versions available in SAGE_LOCAL?

> > No, it does not. The Three.js template is specifically tailored to the release currently in use. Mr. Doob sometimes breaks things. Backwards compatibility is not assured.

> 
> Hmm... perhaps it would be better to link the offline plots to a specific version.
> 
> For example, suppose I generate an offline plot using the template that works for r117. The plot links to `/home/joshua/sage/local/share/threejs/build/three.min.js`. Some time in the future I upgrade [SageMath](../wiki/SageMath) in-place. (Do normal users do that?)

Yes, that's a typical operation.

>  That old plot is now linking to three.js r122 despite the template it was generated from only being guaranteed to work with r117. Suddenly the plot may no longer work.

Right.  So let's please do a versioned installation scheme to address this issue. Basically, upgrades should not break operation of older things.

> That's not an issue for the Jupyter notebook since it's a "live" environment and you can always just re-run the cell to get an up-to-date plot.

Well, but isn't it an important part of the point of the notebook format that the outputs are also stored?

> It's also not an issue for the CDN scripts since those are tied to specific versions.
> 
> Although even if we fixed this, it'd still be fragile in that moving/deleting [SageMath](../wiki/SageMath) would also break old plots. 

(Moving the Sage tree is not supported.)



---

archive/issue_comments_495297.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@mkoeppe](#comment%3A20):\n> >  That old plot is now linking to three.js r122 despite the template it was generated from only being guaranteed to work with r117. Suddenly the plot may no longer work.\n\n> \n> Right.  So let's please do a versioned installation scheme to address this issue. Basically, upgrades should not break operation of older things.\n\nAgain the key use case to consider is to have one (\"system\") installation of the Jupyter notebook or JupyterLab, which the user uses to access multiple installations of different versions of the Sage kernel.",
    "created_at": "2020-11-21T02:56:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495297",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@mkoeppe](#comment%3A20):
> >  That old plot is now linking to three.js r122 despite the template it was generated from only being guaranteed to work with r117. Suddenly the plot may no longer work.

> 
> Right.  So let's please do a versioned installation scheme to address this issue. Basically, upgrades should not break operation of older things.

Again the key use case to consider is to have one ("system") installation of the Jupyter notebook or JupyterLab, which the user uses to access multiple installations of different versions of the Sage kernel.



---

archive/issue_comments_495298.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jcamp0x2a](#comment%3A18):\n> To make a fully self-contained and isolated offline plot would probably require including the content of `three.min.js` inline instead of linking, \n\nSounds like this would be a useful option.\n\n> but I imagine that might run afoul of the license.\n\nDoes a more restrictive license than MIT apply? https://github.com/sagemath/threejs-sage/blob/main/LICENSE",
    "created_at": "2020-11-21T03:09:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495298",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jcamp0x2a](#comment%3A18):
> To make a fully self-contained and isolated offline plot would probably require including the content of `three.min.js` inline instead of linking, 

Sounds like this would be a useful option.

> but I imagine that might run afoul of the license.

Does a more restrictive license than MIT apply? https://github.com/sagemath/threejs-sage/blob/main/LICENSE



---

archive/issue_comments_495299.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@mkoeppe](#comment%3A22):\n> Replying to [@jcamp0x2a](#comment%3A18):\n> > To make a fully self-contained and isolated offline plot would probably require including the content of `three.min.js` inline instead of linking, \n\n> \n> Sounds like this would be a useful option.\n> \n> > but I imagine that might run afoul of the license.\n\n> \n> Does a more restrictive license than MIT apply? https://github.com/sagemath/threejs-sage/blob/main/LICENSE\n> \n\nNo, I don't believe so. I was thinking it was LGPL for some reason and how all that static vs. dynamic linking stuff would work with javascript. Sorry :)",
    "created_at": "2020-11-21T03:45:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495299",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@mkoeppe](#comment%3A22):
> Replying to [@jcamp0x2a](#comment%3A18):
> > To make a fully self-contained and isolated offline plot would probably require including the content of `three.min.js` inline instead of linking, 

> 
> Sounds like this would be a useful option.
> 
> > but I imagine that might run afoul of the license.

> 
> Does a more restrictive license than MIT apply? https://github.com/sagemath/threejs-sage/blob/main/LICENSE
> 

No, I don't believe so. I was thinking it was LGPL for some reason and how all that static vs. dynamic linking stuff would work with javascript. Sorry :)



---

archive/issue_comments_495300.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@mkoeppe](#comment%3A19):\n> In any case, so that we can make progress here, I have forked the repo at https://github.com/sagemath/threejs-sage\n\nMatthias, to avoid any confusion with the repository, please delete your fork and I will initiate the transfer to the SageMath organization.",
    "created_at": "2020-11-21T23:53:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495300",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@mkoeppe](#comment%3A19):
> In any case, so that we can make progress here, I have forked the repo at https://github.com/sagemath/threejs-sage

Matthias, to avoid any confusion with the repository, please delete your fork and I will initiate the transfer to the SageMath organization.



---

archive/issue_comments_495301.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI just checked again. With online=False, it uses the local files of threejs. What I did is to link the threejs folder of the sage installation in /usr/local/sage/local/share/jupyter/nbextensions/\n\nThe threejs version is r-117\n\nReplying to [@mkoeppe](#comment%3A17):\n> Replying to [@paulmasson](#comment%3A16):\n> > Replying to [@mkoeppe](#comment%3A14):\n> > > Also, does the offline mode depend at all on the symbolic link `threejs` that is installed in `$SAGE_LOCAL/share/jupyter/nbextensions`?\n\n> > The system Jupyter notebook needs to find the local files for our Three.js viewer to work. As far as I know the symbolic link is how that happens. If you have a better idea in mind for letting the notebook know where the files are, then go for it. I'm still not clear on this question.\n\n> \n> This seems to contradict what @EmmanuelCharpentier reported in #30476 regarding offline threejs in the system jupyter notebook.\n> @EmmanuelCharpentier, @enriqueartal, could you help clarify this?\n> \n\n>",
    "created_at": "2020-11-22T00:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495301",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:25" align="right">comment:25</div>

I just checked again. With online=False, it uses the local files of threejs. What I did is to link the threejs folder of the sage installation in /usr/local/sage/local/share/jupyter/nbextensions/

The threejs version is r-117

Replying to [@mkoeppe](#comment%3A17):
> Replying to [@paulmasson](#comment%3A16):
> > Replying to [@mkoeppe](#comment%3A14):
> > > Also, does the offline mode depend at all on the symbolic link `threejs` that is installed in `$SAGE_LOCAL/share/jupyter/nbextensions`?

> > The system Jupyter notebook needs to find the local files for our Three.js viewer to work. As far as I know the symbolic link is how that happens. If you have a better idea in mind for letting the notebook know where the files are, then go for it. I'm still not clear on this question.

> 
> This seems to contradict what @EmmanuelCharpentier reported in #30476 regarding offline threejs in the system jupyter notebook.
> @EmmanuelCharpentier, @enriqueartal, could you help clarify this?
> 

>



---

archive/issue_comments_495302.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@paulmasson](#comment%3A24):\n> Replying to [@mkoeppe](#comment%3A19):\n> > In any case, so that we can make progress here, I have forked the repo at https://github.com/sagemath/threejs-sage\n\n> Matthias, to avoid any confusion with the repository, please delete your fork and I will initiate the transfer to the SageMath organization.\n\nIt seems the confusion has already happened. I created this fork for you because you requested a repository in the sagemath github organization. If you find that this is not suitable for what you have in mind, try explaining.",
    "created_at": "2020-11-22T00:15:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495302",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@paulmasson](#comment%3A24):
> Replying to [@mkoeppe](#comment%3A19):
> > In any case, so that we can make progress here, I have forked the repo at https://github.com/sagemath/threejs-sage

> Matthias, to avoid any confusion with the repository, please delete your fork and I will initiate the transfer to the SageMath organization.

It seems the confusion has already happened. I created this fork for you because you requested a repository in the sagemath github organization. If you find that this is not suitable for what you have in mind, try explaining.



---

archive/issue_comments_495303.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@enriqueartal](#comment%3A25):\n> I just checked again. With online=False, it uses the local files of threejs. What I did is to link the threejs folder of the sage installation in /usr/local/sage/local/share/jupyter/nbextensions/\n\nCan you please check whether it works without this symlink?",
    "created_at": "2020-11-22T00:16:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495303",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@enriqueartal](#comment%3A25):
> I just checked again. With online=False, it uses the local files of threejs. What I did is to link the threejs folder of the sage installation in /usr/local/sage/local/share/jupyter/nbextensions/

Can you please check whether it works without this symlink?



---

archive/issue_comments_495304.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@mkoeppe](#comment%3A26):\n> Replying to [@paulmasson](#comment%3A24):\n> > Replying to [@mkoeppe](#comment%3A19):\n> > > In any case, so that we can make progress here, I have forked the repo at https://github.com/sagemath/threejs-sage\n\n> > Matthias, to avoid any confusion with the repository, please delete your fork and I will initiate the transfer to the SageMath organization.\n\n> \n> It seems the confusion has already happened. I created this fork for you because you requested a repository in the sagemath github organization. If you find that this is not suitable for what you have in mind, try explaining.\n\nSorry! When I requested the repository, I was planning to do all the work there from the start. Then I went ahead and made my own to get things going. At this point, I could work in your fork and delete mine and [GitHub](../wiki/GitHub) should then treat yours as the new master repository. Rather than rely on that happening, I think it will be cleaner for me to transfer mine to you, so that there is no possibility of a mix up. I need to initiate the transfer and was waiting for you to be ready for it.",
    "created_at": "2020-11-22T00:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495304",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@mkoeppe](#comment%3A26):
> Replying to [@paulmasson](#comment%3A24):
> > Replying to [@mkoeppe](#comment%3A19):
> > > In any case, so that we can make progress here, I have forked the repo at https://github.com/sagemath/threejs-sage

> > Matthias, to avoid any confusion with the repository, please delete your fork and I will initiate the transfer to the SageMath organization.

> 
> It seems the confusion has already happened. I created this fork for you because you requested a repository in the sagemath github organization. If you find that this is not suitable for what you have in mind, try explaining.

Sorry! When I requested the repository, I was planning to do all the work there from the start. Then I went ahead and made my own to get things going. At this point, I could work in your fork and delete mine and [GitHub](../wiki/GitHub) should then treat yours as the new master repository. Rather than rely on that happening, I think it will be cleaner for me to transfer mine to you, so that there is no possibility of a mix up. I need to initiate the transfer and was waiting for you to be ready for it.



---

archive/issue_comments_495305.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nIn git, there is no notion of a master repository.  The repository I created for you is indistinguishable from yours: It has the same branches and tags.",
    "created_at": "2020-11-22T00:37:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495305",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

In git, there is no notion of a master repository.  The repository I created for you is indistinguishable from yours: It has the same branches and tags.



---

archive/issue_comments_495306.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@jcamp0x2a](#comment%3A18):\n\n> Although even if we fixed this, it'd still be fragile in that moving/deleting [SageMath](../wiki/SageMath) would also break old plots. To make a fully self-contained and isolated offline plot would probably require including the content of `three.min.js` inline instead of linking, but I imagine that might run afoul of the license.\n\nJoshua, I always envisioned the viewer as being used to share graphics on the web, since that's how I work and that's the future. I have yet to hear of anyone having encountered this problem. While I appreciate your concerns, I think we can let this lie until someone actually complains about it.\n\nAnd you could deal with the license by just copying it into the body of the document along with the library's code.",
    "created_at": "2020-11-22T00:40:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495306",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@jcamp0x2a](#comment%3A18):

> Although even if we fixed this, it'd still be fragile in that moving/deleting [SageMath](../wiki/SageMath) would also break old plots. To make a fully self-contained and isolated offline plot would probably require including the content of `three.min.js` inline instead of linking, but I imagine that might run afoul of the license.

Joshua, I always envisioned the viewer as being used to share graphics on the web, since that's how I work and that's the future. I have yet to hear of anyone having encountered this problem. While I appreciate your concerns, I think we can let this lie until someone actually complains about it.

And you could deal with the license by just copying it into the body of the document along with the library's code.



---

archive/issue_comments_495307.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@mkoeppe](#comment%3A29):\n> In git, there is no notion of a master repository.  The repository I created for you is indistinguishable from yours: It has the same branches and tags.\n\nIt does for the moment, but it won't update itself automatically. Someone would need to do that. And I used the wrong term: GitHub uses [parent](https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/what-happens-to-forks-when-a-repository-is-deleted-or-changes-visibility). Please read the section on deleting public repositories.",
    "created_at": "2020-11-22T00:43:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495307",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@mkoeppe](#comment%3A29):
> In git, there is no notion of a master repository.  The repository I created for you is indistinguishable from yours: It has the same branches and tags.

It does for the moment, but it won't update itself automatically. Someone would need to do that. And I used the wrong term: GitHub uses [parent](https://docs.github.com/en/free-pro-team@latest/github/collaborating-with-issues-and-pull-requests/what-happens-to-forks-when-a-repository-is-deleted-or-changes-visibility). Please read the section on deleting public repositories.



---

archive/issue_comments_495308.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@paulmasson](#comment%3A31):\n> Replying to [@mkoeppe](#comment%3A29):\n> > In git, there is no notion of a master repository.  The repository I created for you is indistinguishable from yours: It has the same branches and tags.\n\n> It does for the moment, but it won't update itself automatically.\n\nYes, obviously you would need to start using the repository.\n\nBut fine, I can redo it. Give me admin access to your repo and I'll transfer it.",
    "created_at": "2020-11-22T00:47:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495308",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@paulmasson](#comment%3A31):
> Replying to [@mkoeppe](#comment%3A29):
> > In git, there is no notion of a master repository.  The repository I created for you is indistinguishable from yours: It has the same branches and tags.

> It does for the moment, but it won't update itself automatically.

Yes, obviously you would need to start using the repository.

But fine, I can redo it. Give me admin access to your repo and I'll transfer it.



---

archive/issue_comments_495309.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@mkoeppe](#comment%3A21):\n> Replying to [@mkoeppe](#comment%3A20):\n> > >  That old plot is now linking to three.js r122 despite the template it was generated from only being guaranteed to work with r117. Suddenly the plot may no longer work.\n\n> > \n> > Right.  So let's please do a versioned installation scheme to address this issue. Basically, upgrades should not break operation of older things.\n\n> \n> Again the key use case to consider is to have one (\"system\") installation of the Jupyter notebook or JupyterLab, which the user uses to access multiple installations of different versions of the Sage kernel.\n\n>\n\nMatthias, the viewer was designed from the beginning for use in Sage only, so for me it's part of the kernel. Are you thinking of having us split it off completely? Otherwise the version of Three.js will track with the version of Sage.",
    "created_at": "2020-11-22T00:51:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495309",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@mkoeppe](#comment%3A21):
> Replying to [@mkoeppe](#comment%3A20):
> > >  That old plot is now linking to three.js r122 despite the template it was generated from only being guaranteed to work with r117. Suddenly the plot may no longer work.

> > 
> > Right.  So let's please do a versioned installation scheme to address this issue. Basically, upgrades should not break operation of older things.

> 
> Again the key use case to consider is to have one ("system") installation of the Jupyter notebook or JupyterLab, which the user uses to access multiple installations of different versions of the Sage kernel.

>

Matthias, the viewer was designed from the beginning for use in Sage only, so for me it's part of the kernel. Are you thinking of having us split it off completely? Otherwise the version of Three.js will track with the version of Sage.



---

archive/issue_comments_495310.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@paulmasson](#comment%3A33):\n> Replying to [@mkoeppe](#comment%3A21):\n> > Again the key use case to consider is to have one (\"system\") installation of the Jupyter notebook or JupyterLab, which the user uses to access multiple installations of different versions of the Sage kernel.\n\n> >\n\n> Matthias, the viewer was designed from the beginning for use in Sage only, so for me it's part of the kernel. Are you thinking of having us split it off completely? Otherwise the version of Three.js will track with the version of Sage.\n\nThe use case I am describing uses one system Jupyter installation (\"frontend\") that the user uses to access several kernels, including several Sage kernels installed in different directories.  The frontend may not come from Sage at all, but we need to find a way so that each of the Sage kernels fully works, and that includes the 3d graphics.",
    "created_at": "2020-11-22T00:56:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495310",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@paulmasson](#comment%3A33):
> Replying to [@mkoeppe](#comment%3A21):
> > Again the key use case to consider is to have one ("system") installation of the Jupyter notebook or JupyterLab, which the user uses to access multiple installations of different versions of the Sage kernel.

> >

> Matthias, the viewer was designed from the beginning for use in Sage only, so for me it's part of the kernel. Are you thinking of having us split it off completely? Otherwise the version of Three.js will track with the version of Sage.

The use case I am describing uses one system Jupyter installation ("frontend") that the user uses to access several kernels, including several Sage kernels installed in different directories.  The frontend may not come from Sage at all, but we need to find a way so that each of the Sage kernels fully works, and that includes the 3d graphics.



---

archive/issue_comments_495311.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\n(In #30476 we are putting together documentation on how to configure such a setup.)",
    "created_at": "2020-11-22T01:01:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495311",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

(In #30476 we are putting together documentation on how to configure such a setup.)



---

archive/issue_comments_495312.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@mkoeppe](#comment%3A32):\n> Give me admin access to your repo and I'll transfer it.\n\nI received and accepted the repo invite but will need additional permissions to make the transfer.",
    "created_at": "2020-11-22T01:53:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495312",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@mkoeppe](#comment%3A32):
> Give me admin access to your repo and I'll transfer it.

I received and accepted the repo invite but will need additional permissions to make the transfer.



---

archive/issue_comments_495313.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@mkoeppe](#comment%3A36):\n> Replying to [@mkoeppe](#comment%3A32):\n> > Give me admin access to your repo and I'll transfer it.\n\n> I received and accepted the repo invite but will need additional permissions to make the transfer.\n\nI don't see any options other than just inviting you. Do you not have access to !Settings/Options at this point?",
    "created_at": "2020-11-22T02:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495313",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@mkoeppe](#comment%3A36):
> Replying to [@mkoeppe](#comment%3A32):
> > Give me admin access to your repo and I'll transfer it.

> I received and accepted the repo invite but will need additional permissions to make the transfer.

I don't see any options other than just inviting you. Do you not have access to !Settings/Options at this point?



---

archive/issue_comments_495314.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nReplying to [@paulmasson](#comment%3A37):\n> Do you not have access to !Settings/Options at this point?\n\nNo",
    "created_at": "2020-11-22T02:46:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495314",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Replying to [@paulmasson](#comment%3A37):
> Do you not have access to !Settings/Options at this point?

No



---

archive/issue_comments_495315.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@mkoeppe](#comment%3A38):\n> Replying to [@paulmasson](#comment%3A37):\n> > Do you not have access to !Settings/Options at this point?\n\n> No\n\nThen we'll go with Plan B: since the fork is still there, I'll work in it and delete mine at some point. Good to go. Thanks!",
    "created_at": "2020-11-22T03:04:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495315",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@mkoeppe](#comment%3A38):
> Replying to [@paulmasson](#comment%3A37):
> > Do you not have access to !Settings/Options at this point?

> No

Then we'll go with Plan B: since the fork is still there, I'll work in it and delete mine at some point. Good to go. Thanks!



---

archive/issue_comments_495316.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@mkoeppe](#comment%3A27):\n> Replying to [@enriqueartal](#comment%3A25):\n> > I just checked again. With online=False, it uses the local files of threejs. What I did is to link the threejs folder of the sage installation in /usr/local/sage/local/share/jupyter/nbextensions/\n\n> \n> Can you please check whether it works without this symlink?\n\nI tried this time inspecting. Without the symlink and with online=False, it works since it looks for the threejs files locally and fails, and then it tries online successfully. I rechecked with the symlink and it finds the local files. \n\nBTW, with jupyterhub, it uses internet pages, not local ones even with the symlink",
    "created_at": "2020-11-22T10:06:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495316",
    "user": "https://github.com/enriqueartal"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@mkoeppe](#comment%3A27):
> Replying to [@enriqueartal](#comment%3A25):
> > I just checked again. With online=False, it uses the local files of threejs. What I did is to link the threejs folder of the sage installation in /usr/local/sage/local/share/jupyter/nbextensions/

> 
> Can you please check whether it works without this symlink?

I tried this time inspecting. Without the symlink and with online=False, it works since it looks for the threejs files locally and fails, and then it tries online successfully. I rechecked with the symlink and it finds the local files. 

BTW, with jupyterhub, it uses internet pages, not local ones even with the symlink



---

archive/issue_comments_495317.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@enriqueartal](#comment%3A40):\n> Replying to [@mkoeppe](#comment%3A27):\n> > Replying to [@enriqueartal](#comment%3A25):\n> > > I just checked again. With online=False, it uses the local files of threejs. What I did is to link the threejs folder of the sage installation in /usr/local/sage/local/share/jupyter/nbextensions/\n\n> > \n> > Can you please check whether it works without this symlink?\n\n> \n> I tried this time inspecting. \n\nThanks a lot for investigating!\n\n> Without the symlink and with online=False, it works since it looks for the threejs files locally \n\nBy \"locally\", do you mean through the notebook webserver?\n\n> and fails, and then it tries online successfully. I rechecked with the symlink and it finds the local files. \n\nThanks.\n\n> BTW, with jupyterhub, it uses internet pages, not local ones even with the symlink\n\nSounds like we would need to install files using `jupyter labextension` to support this.",
    "created_at": "2020-11-22T18:16:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495317",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@enriqueartal](#comment%3A40):
> Replying to [@mkoeppe](#comment%3A27):
> > Replying to [@enriqueartal](#comment%3A25):
> > > I just checked again. With online=False, it uses the local files of threejs. What I did is to link the threejs folder of the sage installation in /usr/local/sage/local/share/jupyter/nbextensions/

> > 
> > Can you please check whether it works without this symlink?

> 
> I tried this time inspecting. 

Thanks a lot for investigating!

> Without the symlink and with online=False, it works since it looks for the threejs files locally 

By "locally", do you mean through the notebook webserver?

> and fails, and then it tries online successfully. I rechecked with the symlink and it finds the local files. 

Thanks.

> BTW, with jupyterhub, it uses internet pages, not local ones even with the symlink

Sounds like we would need to install files using `jupyter labextension` to support this.



---

archive/issue_comments_495318.json:
```json
{
    "body": "<div id=\"comment:42\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82b8888f142d193ada736c32d1f8e358a6380878\"><code>82b8888</code></a></td><td><code>Update online link</code></td></tr></table>\n",
    "created_at": "2020-11-22T22:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495318",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:42"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82b8888f142d193ada736c32d1f8e358a6380878"><code>82b8888</code></a></td><td><code>Update online link</code></td></tr></table>




---

archive/issue_comments_495319.json:
```json
{
    "body": "Changed commit from **[`63530d2`](https://github.com/sagemath/sagetrac-mirror/commit/63530d2029ef7dd07f5437220ec02f27ded02457)** to **[`82b8888`](https://github.com/sagemath/sagetrac-mirror/commit/82b8888f142d193ada736c32d1f8e358a6380878)**",
    "created_at": "2020-11-22T22:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495319",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`63530d2`](https://github.com/sagemath/sagetrac-mirror/commit/63530d2029ef7dd07f5437220ec02f27ded02457)** to **[`82b8888`](https://github.com/sagemath/sagetrac-mirror/commit/82b8888f142d193ada736c32d1f8e358a6380878)**



---

archive/issue_comments_495320.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nJoshua, ready for another review. Thanks!",
    "created_at": "2020-11-22T22:16:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495320",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:43" align="right">comment:43</div>

Joshua, ready for another review. Thanks!



---

archive/issue_comments_495321.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@mkoeppe](#comment%3A34):\n> Replying to [@paulmasson](#comment%3A33):\n> > Matthias, the viewer was designed from the beginning for use in Sage only, so for me it's part of the kernel. Are you thinking of having us split it off completely? Otherwise the version of Three.js will track with the version of Sage.\n\n> \n> The use case I am describing uses one system Jupyter installation (\"frontend\") that the user uses to access several kernels, including several Sage kernels installed in different directories.  The frontend may not come from Sage at all, but we need to find a way so that each of the Sage kernels fully works, and that includes the 3d graphics.\n\nPaul, can we try to make progress on this question please? Is what I am describing here clear now? I'll be happy to explain more if necessary.",
    "created_at": "2020-11-22T22:42:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495321",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@mkoeppe](#comment%3A34):
> Replying to [@paulmasson](#comment%3A33):
> > Matthias, the viewer was designed from the beginning for use in Sage only, so for me it's part of the kernel. Are you thinking of having us split it off completely? Otherwise the version of Three.js will track with the version of Sage.

> 
> The use case I am describing uses one system Jupyter installation ("frontend") that the user uses to access several kernels, including several Sage kernels installed in different directories.  The frontend may not come from Sage at all, but we need to find a way so that each of the Sage kernels fully works, and that includes the 3d graphics.

Paul, can we try to make progress on this question please? Is what I am describing here clear now? I'll be happy to explain more if necessary.



---

archive/issue_comments_495322.json:
```json
{
    "body": "Changed commit from **[`82b8888`](https://github.com/sagemath/sagetrac-mirror/commit/82b8888f142d193ada736c32d1f8e358a6380878)** to **[`55449d8`](https://github.com/sagemath/sagetrac-mirror/commit/55449d83b20c85a9e80db210e5e2b2325987db0b)**",
    "created_at": "2020-11-22T23:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495322",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`82b8888`](https://github.com/sagemath/sagetrac-mirror/commit/82b8888f142d193ada736c32d1f8e358a6380878)** to **[`55449d8`](https://github.com/sagemath/sagetrac-mirror/commit/55449d83b20c85a9e80db210e5e2b2325987db0b)**



---

archive/issue_comments_495323.json:
```json
{
    "body": "<div id=\"comment:45\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55449d83b20c85a9e80db210e5e2b2325987db0b\"><code>55449d8</code></a></td><td><code>Update upstream URL</code></td></tr></table>\n",
    "created_at": "2020-11-22T23:30:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495323",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55449d83b20c85a9e80db210e5e2b2325987db0b"><code>55449d8</code></a></td><td><code>Update upstream URL</code></td></tr></table>




---

archive/issue_comments_495324.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@mkoeppe](#comment%3A44):\n> Replying to [@mkoeppe](#comment%3A34):\n> > Replying to [@paulmasson](#comment%3A33):\n> > > Matthias, the viewer was designed from the beginning for use in Sage only, so for me it's part of the kernel. Are you thinking of having us split it off completely? Otherwise the version of Three.js will track with the version of Sage.\n\n> > \n> > The use case I am describing uses one system Jupyter installation (\"frontend\") that the user uses to access several kernels, including several Sage kernels installed in different directories.  The frontend may not come from Sage at all, but we need to find a way so that each of the Sage kernels fully works, and that includes the 3d graphics.\n\n> \n> Paul, can we try to make progress on this question please? Is what I am describing here clear now? I'll be happy to explain more if necessary.\n\nUnfortunately I am not clear as to what you expect of me regarding this. The Sage files have to be somewhere and the notebook needs to now how to find them. If that is already necessary, why won't the notebook know how to find the Three.js file? Are you planning on eliminating `src/sage/ext_data`?\n\nMaybe this should be a separate ticket. This one is really just to upgrade the version with the existing structure already in place.",
    "created_at": "2020-11-23T00:47:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495324",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@mkoeppe](#comment%3A44):
> Replying to [@mkoeppe](#comment%3A34):
> > Replying to [@paulmasson](#comment%3A33):
> > > Matthias, the viewer was designed from the beginning for use in Sage only, so for me it's part of the kernel. Are you thinking of having us split it off completely? Otherwise the version of Three.js will track with the version of Sage.

> > 
> > The use case I am describing uses one system Jupyter installation ("frontend") that the user uses to access several kernels, including several Sage kernels installed in different directories.  The frontend may not come from Sage at all, but we need to find a way so that each of the Sage kernels fully works, and that includes the 3d graphics.

> 
> Paul, can we try to make progress on this question please? Is what I am describing here clear now? I'll be happy to explain more if necessary.

Unfortunately I am not clear as to what you expect of me regarding this. The Sage files have to be somewhere and the notebook needs to now how to find them. If that is already necessary, why won't the notebook know how to find the Three.js file? Are you planning on eliminating `src/sage/ext_data`?

Maybe this should be a separate ticket. This one is really just to upgrade the version with the existing structure already in place.



---

archive/issue_comments_495325.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [@paulmasson](#comment%3A46):\n> Are you planning on eliminating `src/sage/ext_data`?\n\nNo. The issue is about `share/jupyter/nbextensions/threejs` and the fact that there will be several unrelated copies of that.\n\nHere is an example.\n- Let's say system jupyter is installed in `/usr`, so the notebook server is accessing `/usr/share/jupyter/nbextensions`.  \n- Sage-9.x may be installed in `/home/x/sage-9.x/local/` and may need threejs r122.\n- Sage-9.y may be installed in `/home/x/sage-9.y/local/` and may need threejs r155.\n- Let's say r122 and r155 are mutually incompatible.\n\nAs @enriqueartal has reported above, our offline threejs graphics needs `/usr/share/jupyter/nbextensions/threejs/`. But the system does not provide it -- it must come from Sage.\nIf we create a symlink `/usr/share/jupyter/nbextensions/threejs -> /home/x/sage-9.x/local/share/jupyter/nbextensions/threejs`, then Sage 9.x will work with the system jupyter notebook; but Sage 9.y will not.\n\nDo you agree?\n\nSo this means that we need a versioned installation scheme. \nThe details of this installation scheme is what I am trying to discuss with you, in particular because it is certainly related to that new repository.",
    "created_at": "2020-11-23T01:15:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495325",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [@paulmasson](#comment%3A46):
> Are you planning on eliminating `src/sage/ext_data`?

No. The issue is about `share/jupyter/nbextensions/threejs` and the fact that there will be several unrelated copies of that.

Here is an example.
- Let's say system jupyter is installed in `/usr`, so the notebook server is accessing `/usr/share/jupyter/nbextensions`.  
- Sage-9.x may be installed in `/home/x/sage-9.x/local/` and may need threejs r122.
- Sage-9.y may be installed in `/home/x/sage-9.y/local/` and may need threejs r155.
- Let's say r122 and r155 are mutually incompatible.

As @enriqueartal has reported above, our offline threejs graphics needs `/usr/share/jupyter/nbextensions/threejs/`. But the system does not provide it -- it must come from Sage.
If we create a symlink `/usr/share/jupyter/nbextensions/threejs -> /home/x/sage-9.x/local/share/jupyter/nbextensions/threejs`, then Sage 9.x will work with the system jupyter notebook; but Sage 9.y will not.

Do you agree?

So this means that we need a versioned installation scheme. 
The details of this installation scheme is what I am trying to discuss with you, in particular because it is certainly related to that new repository.



---

archive/issue_comments_495326.json:
```json
{
    "body": "Changed author from **Paul Masson** to **Paul Masson, Joshua Campbell**",
    "created_at": "2020-11-24T17:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495326",
    "user": "https://github.com/jcamp0x2a"
}
```

Changed author from **Paul Masson** to **Paul Masson, Joshua Campbell**



---

archive/issue_comments_495327.json:
```json
{
    "body": "Changed commit from **[`55449d8`](https://github.com/sagemath/sagetrac-mirror/commit/55449d83b20c85a9e80db210e5e2b2325987db0b)** to **[`eed14d3`](https://github.com/sagemath/sagetrac-mirror/commit/eed14d3dc1b9f69cada9a54bb377f94ad145ec3f)**",
    "created_at": "2020-11-24T17:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495327",
    "user": "https://github.com/jcamp0x2a"
}
```

Changed commit from **[`55449d8`](https://github.com/sagemath/sagetrac-mirror/commit/55449d83b20c85a9e80db210e5e2b2325987db0b)** to **[`eed14d3`](https://github.com/sagemath/sagetrac-mirror/commit/eed14d3dc1b9f69cada9a54bb377f94ad145ec3f)**



---

archive/issue_comments_495328.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@paulmasson](#comment%3A43):\n> Joshua, ready for another review. Thanks!\n\nHi Paul, I found a failing doctest in `display_manager.py` due to the CDN URL change. I hope you don't mind, but I took the liberty of pushing a fix for it. I also went ahead and modified it to read from that new `version` file instead of relying on the `REVISION=` stuff, and I also renamed a few more occurrences of \"scripts\" to \"script\" as you had done in your commit.\n\nIf you are okay with the additional changes, I think you or I could mark it as positive review.",
    "created_at": "2020-11-24T17:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495328",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@paulmasson](#comment%3A43):
> Joshua, ready for another review. Thanks!

Hi Paul, I found a failing doctest in `display_manager.py` due to the CDN URL change. I hope you don't mind, but I took the liberty of pushing a fix for it. I also went ahead and modified it to read from that new `version` file instead of relying on the `REVISION=` stuff, and I also renamed a few more occurrences of "scripts" to "script" as you had done in your commit.

If you are okay with the additional changes, I think you or I could mark it as positive review.



---

archive/issue_comments_495329.json:
```json
{
    "body": "Changed branch from **[u/paulmasson/threejs-r122](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/threejs-r122)** to **[u/gh-jcamp0x2a/threejs-r122](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-jcamp0x2a/threejs-r122)**",
    "created_at": "2020-11-24T17:03:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495329",
    "user": "https://github.com/jcamp0x2a"
}
```

Changed branch from **[u/paulmasson/threejs-r122](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/threejs-r122)** to **[u/gh-jcamp0x2a/threejs-r122](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-jcamp0x2a/threejs-r122)**



---

archive/issue_comments_495330.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@mkoeppe](#comment%3A47):\n> So this means that we need a versioned installation scheme. \n> The details of this installation scheme is what I am trying to discuss with you, in particular because it is certainly related to that new repository.\n> \n\nIncluding the `three.min.js` inline for offline use (whether jupyter or command line) seems like it would clear up this headache for three.js at least. No more local file paths.\n\nI'd like to get this ticket merged as-is so I can make some headway on my \"fat\" lines branch. So perhaps a follow-up ticket?",
    "created_at": "2020-11-24T17:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495330",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@mkoeppe](#comment%3A47):
> So this means that we need a versioned installation scheme. 
> The details of this installation scheme is what I am trying to discuss with you, in particular because it is certainly related to that new repository.
> 

Including the `three.min.js` inline for offline use (whether jupyter or command line) seems like it would clear up this headache for three.js at least. No more local file paths.

I'd like to get this ticket merged as-is so I can make some headway on my "fat" lines branch. So perhaps a follow-up ticket?



---

archive/issue_comments_495331.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@mkoeppe](#comment%3A47):\n> Replying to [@paulmasson](#comment%3A46):\n> > Are you planning on eliminating `src/sage/ext_data`?\n\n> \n> No. The issue is about `share/jupyter/nbextensions/threejs` and the fact that there will be several unrelated copies of that.\n> \n> Here is an example.\n> - Let's say system jupyter is installed in `/usr`, so the notebook server is accessing `/usr/share/jupyter/nbextensions`.  \n> - Sage-9.x may be installed in `/home/x/sage-9.x/local/` and may need threejs r122.\n> - Sage-9.y may be installed in `/home/x/sage-9.y/local/` and may need threejs r155.\n> - Let's say r122 and r155 are mutually incompatible.\n> \n> As @enriqueartal has reported above, our offline threejs graphics needs `/usr/share/jupyter/nbextensions/threejs/`. But the system does not provide it -- it must come from Sage.\n> If we create a symlink `/usr/share/jupyter/nbextensions/threejs -> /home/x/sage-9.x/local/share/jupyter/nbextensions/threejs`, then Sage 9.x will work with the system jupyter notebook; but Sage 9.y will not.\n> \n> Do you agree?\n> \n> So this means that we need a versioned installation scheme. \n> The details of this installation scheme is what I am trying to discuss with you, in particular because it is certainly related to that new repository.\n> \n\nMoving discussion to #30972",
    "created_at": "2020-11-27T21:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495331",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@mkoeppe](#comment%3A47):
> Replying to [@paulmasson](#comment%3A46):
> > Are you planning on eliminating `src/sage/ext_data`?

> 
> No. The issue is about `share/jupyter/nbextensions/threejs` and the fact that there will be several unrelated copies of that.
> 
> Here is an example.
> - Let's say system jupyter is installed in `/usr`, so the notebook server is accessing `/usr/share/jupyter/nbextensions`.  
> - Sage-9.x may be installed in `/home/x/sage-9.x/local/` and may need threejs r122.
> - Sage-9.y may be installed in `/home/x/sage-9.y/local/` and may need threejs r155.
> - Let's say r122 and r155 are mutually incompatible.
> 
> As @enriqueartal has reported above, our offline threejs graphics needs `/usr/share/jupyter/nbextensions/threejs/`. But the system does not provide it -- it must come from Sage.
> If we create a symlink `/usr/share/jupyter/nbextensions/threejs -> /home/x/sage-9.x/local/share/jupyter/nbextensions/threejs`, then Sage 9.x will work with the system jupyter notebook; but Sage 9.y will not.
> 
> Do you agree?
> 
> So this means that we need a versioned installation scheme. 
> The details of this installation scheme is what I am trying to discuss with you, in particular because it is certainly related to that new repository.
> 

Moving discussion to #30972



---

archive/issue_comments_495332.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@jcamp0x2a](#comment%3A48):\n> Replying to [@paulmasson](#comment%3A43):\n> > Joshua, ready for another review. Thanks!\n\n> \n> Hi Paul, I found a failing doctest in `display_manager.py` due to the CDN URL change. I hope you don't mind, but I took the liberty of pushing a fix for it. I also went ahead and modified it to read from that new `version` file instead of relying on the `REVISION=` stuff, and I also renamed a few more occurrences of \"scripts\" to \"script\" as you had done in your commit.\n> \n> If you are okay with the additional changes, I think you or I could mark it as positive review.\n\nLGTM",
    "created_at": "2020-11-27T21:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495332",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@jcamp0x2a](#comment%3A48):
> Replying to [@paulmasson](#comment%3A43):
> > Joshua, ready for another review. Thanks!

> 
> Hi Paul, I found a failing doctest in `display_manager.py` due to the CDN URL change. I hope you don't mind, but I took the liberty of pushing a fix for it. I also went ahead and modified it to read from that new `version` file instead of relying on the `REVISION=` stuff, and I also renamed a few more occurrences of "scripts" to "script" as you had done in your commit.
> 
> If you are okay with the additional changes, I think you or I could mark it as positive review.

LGTM



---

archive/issue_comments_495333.json:
```json
{
    "body": "Reviewer: **Joshua Campbell, Paul Masson**",
    "created_at": "2020-11-27T21:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495333",
    "user": "https://github.com/paulmasson"
}
```

Reviewer: **Joshua Campbell, Paul Masson**



---

archive/issue_events_423281.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-27T21:47:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423281"
}
```



---

archive/issue_events_423282.json:
```json
{
    "actor": "https://github.com/paulmasson",
    "created_at": "2020-11-27T21:47:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423282"
}
```



---

archive/issue_comments_495334.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nPublic methods such as `threejs_offline_scripts` should not be renamed without deprecation",
    "created_at": "2020-11-28T01:43:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495334",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

Public methods such as `threejs_offline_scripts` should not be renamed without deprecation



---

archive/issue_events_423283.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-28T01:43:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423283"
}
```



---

archive/issue_events_423284.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-28T01:43:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423284"
}
```



---

archive/issue_comments_495335.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nJoshua, would you just revert the method name? It's only used internally and I no longer care if the script name doesn't match the output.",
    "created_at": "2020-11-28T02:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495335",
    "user": "https://github.com/paulmasson"
}
```

<div id="comment:53" align="right">comment:53</div>

Joshua, would you just revert the method name? It's only used internally and I no longer care if the script name doesn't match the output.



---

archive/issue_comments_495336.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c0974392afc80a51693d40896a21c8e9902a7f27\"><code>c097439</code></a></td><td><code>Revert threejs_scripts method name changes</code></td></tr></table>\n",
    "created_at": "2020-11-28T02:28:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495336",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c0974392afc80a51693d40896a21c8e9902a7f27"><code>c097439</code></a></td><td><code>Revert threejs_scripts method name changes</code></td></tr></table>




---

archive/issue_comments_495337.json:
```json
{
    "body": "Changed commit from **[`eed14d3`](https://github.com/sagemath/sagetrac-mirror/commit/eed14d3dc1b9f69cada9a54bb377f94ad145ec3f)** to **[`c097439`](https://github.com/sagemath/sagetrac-mirror/commit/c0974392afc80a51693d40896a21c8e9902a7f27)**",
    "created_at": "2020-11-28T02:28:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495337",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eed14d3`](https://github.com/sagemath/sagetrac-mirror/commit/eed14d3dc1b9f69cada9a54bb377f94ad145ec3f)** to **[`c097439`](https://github.com/sagemath/sagetrac-mirror/commit/c0974392afc80a51693d40896a21c8e9902a7f27)**



---

archive/issue_comments_495338.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@paulmasson](#comment%3A53):\n> Joshua, would you just revert the method name? It's only used internally and I no longer care if the script name doesn't match the output.\n\nDone. Did a quick sanity check and it still runs without issue in all four combinations of command-line/jupyter and online/offline.",
    "created_at": "2020-11-28T02:30:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495338",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@paulmasson](#comment%3A53):
> Joshua, would you just revert the method name? It's only used internally and I no longer care if the script name doesn't match the output.

Done. Did a quick sanity check and it still runs without issue in all four combinations of command-line/jupyter and online/offline.



---

archive/issue_events_423285.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-11-28T02:30:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423285"
}
```



---

archive/issue_events_423286.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-11-28T02:30:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423286"
}
```



---

archive/issue_comments_495339.json:
```json
{
    "body": "Changed reviewer from **Joshua Campbell, Paul Masson** to **Joshua Campbell, Paul Masson, Matthias Koeppe**",
    "created_at": "2020-11-28T02:40:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495339",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Joshua Campbell, Paul Masson** to **Joshua Campbell, Paul Masson, Matthias Koeppe**



---

archive/issue_events_423287.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-28T02:40:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423287"
}
```



---

archive/issue_events_423288.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-28T02:40:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423288"
}
```



---

archive/issue_comments_495340.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nJoshua, by the way, have you tested if the offline mode works with JupyterLab too?",
    "created_at": "2020-11-28T18:50:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495340",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Joshua, by the way, have you tested if the offline mode works with JupyterLab too?



---

archive/issue_comments_495341.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@mkoeppe](#comment%3A57):\n> Joshua, by the way, have you tested if the offline mode works with JupyterLab too?\n\nYes, sorry, that's actually what I meant by \"jupyter\". I've been using it in preference to the traditional notebook lately. I've gone back and tested with the traditional notebook and it works fine as well.\n\nOh, and I'm going to try to spend some time later today looking at your #30972.",
    "created_at": "2020-11-28T19:55:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495341",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@mkoeppe](#comment%3A57):
> Joshua, by the way, have you tested if the offline mode works with JupyterLab too?

Yes, sorry, that's actually what I meant by "jupyter". I've been using it in preference to the traditional notebook lately. I've gone back and tested with the traditional notebook and it works fine as well.

Oh, and I'm going to try to spend some time later today looking at your #30972.



---

archive/issue_comments_495342.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@jcamp0x2a](#comment%3A58):\n> Replying to [@mkoeppe](#comment%3A57):\n> > Joshua, by the way, have you tested if the offline mode works with JupyterLab too?\n\n> \n> Yes, sorry, that's actually what I meant by \"jupyter\". I've been using it in preference to the traditional notebook lately. I've gone back and tested with the traditional notebook and it works fine as well.\n\nGreat, thanks, I was not sure whether the JupyterLab server also serves the `/nbextensions` path.",
    "created_at": "2020-11-28T20:04:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495342",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@jcamp0x2a](#comment%3A58):
> Replying to [@mkoeppe](#comment%3A57):
> > Joshua, by the way, have you tested if the offline mode works with JupyterLab too?

> 
> Yes, sorry, that's actually what I meant by "jupyter". I've been using it in preference to the traditional notebook lately. I've gone back and tested with the traditional notebook and it works fine as well.

Great, thanks, I was not sure whether the JupyterLab server also serves the `/nbextensions` path.



---

archive/issue_events_423289.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-05T22:13:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423289"
}
```



---

archive/issue_events_423290.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f4909e1cb9a0efc1928590b1e804bbcd794da1c7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-05T22:13:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30915#event-423290"
}
```



---

archive/issue_comments_495343.json:
```json
{
    "body": "Changed branch from **[u/gh-jcamp0x2a/threejs-r122](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-jcamp0x2a/threejs-r122)** to **[`c097439`](https://github.com/sagemath/sagetrac-mirror/commit/c0974392afc80a51693d40896a21c8e9902a7f27)**",
    "created_at": "2020-12-05T22:13:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30915",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30915#issuecomment-495343",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-jcamp0x2a/threejs-r122](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-jcamp0x2a/threejs-r122)** to **[`c097439`](https://github.com/sagemath/sagetrac-mirror/commit/c0974392afc80a51693d40896a21c8e9902a7f27)**
