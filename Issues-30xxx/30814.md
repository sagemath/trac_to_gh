# Issue 30814: Cygwin: Fix remaining packages to build shared libraries, using `AM_LDFLAGS=-no-undefined`

archive/issues_030577.json:
```json
{
    "body": "Follow up from #29152, where it was noted that the resulting build logs (https://github.com/mkoeppe/sage/suites/1285136303/artifacts/20016238) show the following remaining issues:\n\n```\negret:~/Downloads/logs-commit-e41329adfa1f1e69653ba127d6460d2bd7aaaf00-cygwin-standard$ grep \"undefined symbols not allowed\" pkgs/*\npkgs/barvinok-0.41.1.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries; building static only\npkgs/e_antic-0.1.8.log:libtool: warning: undefined symbols not allowed in x86_64-pc-cygwin shared libraries; building static only\npkgs/isl-0.20.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries; building static only\npkgs/libbraiding-1.1.log:libtool: warning: undefined symbols not allowed in x86_64-pc-cygwin shared libraries; building static only\npkgs/polylib-5.22.5.log:libtool: link: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries\npkgs/singular-4.1.1p2.p0.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-c\n```\n(libbraiding was supposed to be fixed by the upgrade in #29152)\n\nAlso:\n\n```\n [p_group_cohomology-3.3.2]   libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified\n  [mpfrcx-0.5]   libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified\n```\n(https://github.com/mkoeppe/sage/runs/2145195319)\n\n\n**CC:**  @embray @dimpase @orlitzky @antonio-rojas @kiwifb simonking\n\n**Status:** new\n\nIssue created by migration from https://trac.sagemath.org/ticket/30814\n\n",
    "created_at": "2020-10-22T17:38:03Z",
    "labels": [
        "component: porting: cygwin",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-pending",
    "title": "Cygwin: Fix remaining packages to build shared libraries, using `AM_LDFLAGS=-no-undefined`",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30814",
    "user": "https://github.com/mkoeppe"
}
```
Follow up from #29152, where it was noted that the resulting build logs (https://github.com/mkoeppe/sage/suites/1285136303/artifacts/20016238) show the following remaining issues:

```
egret:~/Downloads/logs-commit-e41329adfa1f1e69653ba127d6460d2bd7aaaf00-cygwin-standard$ grep "undefined symbols not allowed" pkgs/*
pkgs/barvinok-0.41.1.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries; building static only
pkgs/e_antic-0.1.8.log:libtool: warning: undefined symbols not allowed in x86_64-pc-cygwin shared libraries; building static only
pkgs/isl-0.20.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries; building static only
pkgs/libbraiding-1.1.log:libtool: warning: undefined symbols not allowed in x86_64-pc-cygwin shared libraries; building static only
pkgs/polylib-5.22.5.log:libtool: link: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries
pkgs/singular-4.1.1p2.p0.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-c
```
(libbraiding was supposed to be fixed by the upgrade in #29152)

Also:

```
 [p_group_cohomology-3.3.2]   libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified
  [mpfrcx-0.5]   libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified
```
(https://github.com/mkoeppe/sage/runs/2145195319)


**CC:**  @embray @dimpase @orlitzky @antonio-rojas @kiwifb simonking

**Status:** new

Issue created by migration from https://trac.sagemath.org/ticket/30814





---

archive/issue_comments_611302.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,12 @@\n-Follow up from #29152.\n+Follow up from #29152, where it was noted that the resulting build logs (https://github.com/mkoeppe/sage/suites/1285136303/artifacts/20016238) show the following remaining issues:\n \n-\n+```\n+egret:~/Downloads/logs-commit-e41329adfa1f1e69653ba127d6460d2bd7aaaf00-cygwin-standard$ grep \"undefined symbols not allowed\" pkgs/*\n+pkgs/barvinok-0.41.1.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries; building static only\n+pkgs/e_antic-0.1.8.log:libtool: warning: undefined symbols not allowed in x86_64-pc-cygwin shared libraries; building static only\n+pkgs/isl-0.20.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries; building static only\n+pkgs/libbraiding-1.1.log:libtool: warning: undefined symbols not allowed in x86_64-pc-cygwin shared libraries; building static only\n+pkgs/polylib-5.22.5.log:libtool: link: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries\n+pkgs/singular-4.1.1p2.p0.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-c\n+```\n+(libbraiding was supposed to be fixed by the upgrade in #29152)\n``````\n",
    "created_at": "2020-10-22T17:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30814#issuecomment-611302",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,12 @@
-Follow up from #29152.
+Follow up from #29152, where it was noted that the resulting build logs (https://github.com/mkoeppe/sage/suites/1285136303/artifacts/20016238) show the following remaining issues:
 
-
+```
+egret:~/Downloads/logs-commit-e41329adfa1f1e69653ba127d6460d2bd7aaaf00-cygwin-standard$ grep "undefined symbols not allowed" pkgs/*
+pkgs/barvinok-0.41.1.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries; building static only
+pkgs/e_antic-0.1.8.log:libtool: warning: undefined symbols not allowed in x86_64-pc-cygwin shared libraries; building static only
+pkgs/isl-0.20.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries; building static only
+pkgs/libbraiding-1.1.log:libtool: warning: undefined symbols not allowed in x86_64-pc-cygwin shared libraries; building static only
+pkgs/polylib-5.22.5.log:libtool: link: warning: undefined symbols not allowed in x86_64-unknown-cygwin shared libraries
+pkgs/singular-4.1.1p2.p0.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-c
+```
+(libbraiding was supposed to be fixed by the upgrade in #29152)
``````




---

archive/issue_events_090567.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90567"
}
```




---

archive/issue_events_090568.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90568"
}
```




---

archive/issue_events_090569.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90569"
}
```




---

archive/issue_comments_611303.json:
```json
{
    "body": "<a id='comment:3'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30814#issuecomment-611303",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:3'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_611304.json:
```json
{
    "body": "<a id='comment:4'></a>\nsingular will be fixed by #25993",
    "created_at": "2021-02-27T20:31:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30814#issuecomment-611304",
    "user": "https://github.com/mkoeppe"
}
```


<a id='comment:4'></a>
singular will be fixed by #25993



---

archive/issue_comments_611305.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,3 +10,12 @@\n pkgs/singular-4.1.1p2.p0.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-c\n ```\n (libbraiding was supposed to be fixed by the upgrade in #29152)\n+\n+Also:\n+\n+```\n+ [p_group_cohomology-3.3.2]   libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified\n+  [mpfrcx-0.5]   libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified\n+```\n+(https://github.com/mkoeppe/sage/runs/2145195319)\n+\n``````\n",
    "created_at": "2021-03-19T16:47:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30814#issuecomment-611305",
    "user": "https://github.com/mkoeppe"
}
```


**Description changed:**
``````diff
--- 
+++ 
@@ -10,3 +10,12 @@
 pkgs/singular-4.1.1p2.p0.log:libtool: warning: undefined symbols not allowed in x86_64-unknown-c
 ```
 (libbraiding was supposed to be fixed by the upgrade in #29152)
+
+Also:
+
+```
+ [p_group_cohomology-3.3.2]   libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified
+  [mpfrcx-0.5]   libtool:   error: can't build x86_64-unknown-cygwin shared library unless -no-undefined is specified
+```
+(https://github.com/mkoeppe/sage/runs/2145195319)
+
``````




---

archive/issue_events_090570.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90570"
}
```




---

archive/issue_events_090571.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90571"
}
```




---

archive/issue_events_090572.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90572"
}
```




---

archive/issue_events_090573.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90573"
}
```




---

archive/issue_events_090574.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90574"
}
```




---

archive/issue_events_090575.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90575"
}
```




---

archive/issue_events_090576.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-25T20:19:16Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90576"
}
```




---

archive/issue_events_090577.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-25T20:19:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30814",
    "milestone": "sage-pending",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30814#event-90577"
}
```

