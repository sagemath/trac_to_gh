# Issue 30944: tox: Improve local-sudo-ubuntu-standard

archive/issues_030707.json:
```json
{
    "assignees": [],
    "body": "As a follow up to #30923, we improve the `local-sudo-...` environments as follows:\n- Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)\n- Use `configure --enable-build-as-root` for `local-root`\n- Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)\n- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of also invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).\n\n\nDepends on #29124\n\nCC:  @mkoeppe @dimpase @kliem\n\nBranch/Commit: **[ab19133](https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05)**\n\nReviewer: **Jonathan Kliem**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30944_\n\n",
    "closed_at": "2021-01-24T10:38:10Z",
    "created_at": "2020-11-22T17:52:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20porting",
        "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "tox: Improve local-sudo-ubuntu-standard",
    "type": "issue",
    "updated_at": "2021-01-24T10:38:10Z",
    "url": "https://github.com/sagemath/sage/issues/30944",
    "user": "https://github.com/tobiasdiez"
}
```
As a follow up to #30923, we improve the `local-sudo-...` environments as follows:
- Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)
- Use `configure --enable-build-as-root` for `local-root`
- Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)
- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of also invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).


Depends on #29124

CC:  @mkoeppe @dimpase @kliem

Branch/Commit: **[ab19133](https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05)**

Reviewer: **Jonathan Kliem**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/30944_





---

archive/issue_events_408522.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-11-22T17:52:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408522"
}
```



---

archive/issue_events_408523.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-11-22T17:52:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20porting",
    "label_color": "000080",
    "label_name": "component: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408523"
}
```



---

archive/issue_events_408524.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-11-22T17:52:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408524"
}
```



---

archive/issue_events_408525.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-11-22T17:52:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408525"
}
```



---

archive/issue_comments_498776.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nThe variant could be called `local-root-ubuntu-standard`, I guess",
    "created_at": "2020-11-22T19:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498776",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:1" align="right">Comment 1</div>

The variant could be called `local-root-ubuntu-standard`, I guess



---

archive/issue_comments_498777.json:
```json
{
    "body": "Branch: **[u/mkoeppe/tox__improve_local_sudo_ubuntu_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox__improve_local_sudo_ubuntu_standard)**",
    "created_at": "2020-11-22T20:03:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498777",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/tox__improve_local_sudo_ubuntu_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox__improve_local_sudo_ubuntu_standard)**



---

archive/issue_comments_498778.json:
```json
{
    "body": "Replying to [ticket:30944 gh-tobiasdiez]:\n> - Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)\n\nRight, I forgot about the mess with `TARGETS_PRE` and `TARGETS_OPTIONAL` in `tox.ini`, which do not get the same defaults for `local` as they do for `docker` - I'll fix this\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30e624abbc52b5a5a060a4eca801e8fda303937f\">30e624a</a></td><td><code>tox.ini: Add local-sudo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75ecd11e878e34a4c508d2f983b6d7527e689f94\">75ecd11</a></td><td><code>tox.ini (local-sudo): Also use ...-bootstrap.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dc79eb4b542a11aa8c226ca8cf9f0e2306698eb\">0dc79eb</a></td><td><code>build/bin/sage-print-system-package-command: Handle --no-install-recommends, --yes for systems for which write-dockerfile.sh knows these flags</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/050dcb8275b3a7e0db4c7ae3503428107bb5bf17\">050dcb8</a></td><td><code>tox.ini (local-sudo): Use --yes --no-install-recommends</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8fbe0beaec3a404d330aaebdf37186e9c6becec\">c8fbe0b</a></td><td><code>tox.ini (local-sudo): Ignore errors when IGNORE_MISSING_SYSTEM_PACKAGES=yes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff34897cac35061afd348cc08a6559f95f406f14\">ff34897</a></td><td><code>tox.ini (local): Guess the package system if it is not provided as a factor</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8\">e9e5d47</a></td><td><code>build/bin/sage-print-system-package-command (debian --yes): Use DEBIAN_FRONTEND=noninteractive</code></td></tr></table>\n",
    "created_at": "2020-11-22T20:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498778",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [ticket:30944 gh-tobiasdiez]:
> - Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)

Right, I forgot about the mess with `TARGETS_PRE` and `TARGETS_OPTIONAL` in `tox.ini`, which do not get the same defaults for `local` as they do for `docker` - I'll fix this

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30e624abbc52b5a5a060a4eca801e8fda303937f">30e624a</a></td><td><code>tox.ini: Add local-sudo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75ecd11e878e34a4c508d2f983b6d7527e689f94">75ecd11</a></td><td><code>tox.ini (local-sudo): Also use ...-bootstrap.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dc79eb4b542a11aa8c226ca8cf9f0e2306698eb">0dc79eb</a></td><td><code>build/bin/sage-print-system-package-command: Handle --no-install-recommends, --yes for systems for which write-dockerfile.sh knows these flags</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/050dcb8275b3a7e0db4c7ae3503428107bb5bf17">050dcb8</a></td><td><code>tox.ini (local-sudo): Use --yes --no-install-recommends</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8fbe0beaec3a404d330aaebdf37186e9c6becec">c8fbe0b</a></td><td><code>tox.ini (local-sudo): Ignore errors when IGNORE_MISSING_SYSTEM_PACKAGES=yes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff34897cac35061afd348cc08a6559f95f406f14">ff34897</a></td><td><code>tox.ini (local): Guess the package system if it is not provided as a factor</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8">e9e5d47</a></td><td><code>build/bin/sage-print-system-package-command (debian --yes): Use DEBIAN_FRONTEND=noninteractive</code></td></tr></table>




---

archive/issue_comments_498779.json:
```json
{
    "body": "Commit: **[e9e5d47](https://github.com/sagemath/sagetrac-mirror/commit/e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8)**",
    "created_at": "2020-11-22T20:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498779",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[e9e5d47](https://github.com/sagemath/sagetrac-mirror/commit/e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8)**



---

archive/issue_comments_498780.json:
```json
{
    "body": "Dependencies: **#30923**",
    "created_at": "2020-11-23T02:27:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498780",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30923**



---

archive/issue_comments_498781.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nReplying to [@mkoeppe](#comment%3A1):\n> The variant could be called `local-root-ubuntu-standard`, I guess\n\nAdding this in #29124",
    "created_at": "2020-11-24T05:52:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498781",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">Comment 5</div>

Replying to [@mkoeppe](#comment%3A1):
> The variant could be called `local-root-ubuntu-standard`, I guess

Adding this in #29124



---

archive/issue_comments_498782.json:
```json
{
    "body": "Changed dependencies from **#30923** to **#30923, #29124**",
    "created_at": "2020-11-24T18:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498782",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30923** to **#30923, #29124**



---

archive/issue_comments_498783.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [gh-tobiasdiez in #29124](https://trac.sagemath.org/ticket/29124?replyto=22#comment:22):\n> I'm not sure about the naming of the `local-` environments. Why should I expect as a developer that `local-sudo` installs system packages? What about `local-system-packages-ubuntu` (for root) and `local-sudo-system-packages-ubuntu` (for sudo)?\n\nAll of these environments install system packages... The only one that does not is `local-direct`",
    "created_at": "2020-11-24T18:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498783",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [gh-tobiasdiez in #29124](https://trac.sagemath.org/ticket/29124?replyto=22#comment:22):
> I'm not sure about the naming of the `local-` environments. Why should I expect as a developer that `local-sudo` installs system packages? What about `local-system-packages-ubuntu` (for root) and `local-sudo-system-packages-ubuntu` (for sudo)?

All of these environments install system packages... The only one that does not is `local-direct`



---

archive/issue_comments_498784.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nAh ok...than it makes sense.",
    "created_at": "2020-11-25T16:31:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498784",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:9" align="right">Comment 9</div>

Ah ok...than it makes sense.



---

archive/issue_comments_498785.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3180678ca52abca94e0444b5324234803de417f\">d318067</a></td><td><code>build/pkgs/_prereq/spkg-configure.m4: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85f8ce5225c9ad690af813f805bb31e1985ed4eb\">85f8ce5</a></td><td><code>src/doc/bootstrap: Remove special casing of build/pkgs/$SYSTEM.txt - _prereq is now just a standard package with spkg-configure.m4</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e97683f28c32d89f4b76b8be2de7653734ae277\">0e97683</a></td><td><code>tox.ini: Simplify, use sage-get-system-packages, sage-package list</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da3f657f5757276943b58a1c840bb45854d8b053\">da3f657</a></td><td><code>tox.ini: Fixup - always include _bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8fde1dc625f281fbdde361e58d2d9115a1ac0fe0\">8fde1dc</a></td><td><code>build/bin/write-dockerfile.sh: Remove special casing of build/pkgs/$SYSTEM.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8d725b8f8ca7e55a3fd09e9adb8d807ceed8ff84\">8d725b8</a></td><td><code>src/doc/en/developer/portability_testing.rst: Update paths in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd7f66c9e388b84aab870c382bfd9dc46a4af6de\">bd7f66c</a></td><td><code>Makefile (configure): Update dependency on moved files build/pkgs/*.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c18e935abaffefbfee6abbcfacdf1d9e4516e96c\">c18e935</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f18f849be44167cc84002045bbb24a8d1f979128\">f18f849</a></td><td><code>tox.ini: Add local-root</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd47bc39793be3d917f0ab1aac14ecce13970704\">fd47bc3</a></td><td><code>tox.ini (local-root): Pass --enable-build-as-root to configure</code></td></tr></table>\n",
    "created_at": "2020-11-25T22:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498785",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10" align="right">Comment 10</div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3180678ca52abca94e0444b5324234803de417f">d318067</a></td><td><code>build/pkgs/_prereq/spkg-configure.m4: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85f8ce5225c9ad690af813f805bb31e1985ed4eb">85f8ce5</a></td><td><code>src/doc/bootstrap: Remove special casing of build/pkgs/$SYSTEM.txt - _prereq is now just a standard package with spkg-configure.m4</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e97683f28c32d89f4b76b8be2de7653734ae277">0e97683</a></td><td><code>tox.ini: Simplify, use sage-get-system-packages, sage-package list</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da3f657f5757276943b58a1c840bb45854d8b053">da3f657</a></td><td><code>tox.ini: Fixup - always include _bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8fde1dc625f281fbdde361e58d2d9115a1ac0fe0">8fde1dc</a></td><td><code>build/bin/write-dockerfile.sh: Remove special casing of build/pkgs/$SYSTEM.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8d725b8f8ca7e55a3fd09e9adb8d807ceed8ff84">8d725b8</a></td><td><code>src/doc/en/developer/portability_testing.rst: Update paths in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd7f66c9e388b84aab870c382bfd9dc46a4af6de">bd7f66c</a></td><td><code>Makefile (configure): Update dependency on moved files build/pkgs/*.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c18e935abaffefbfee6abbcfacdf1d9e4516e96c">c18e935</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f18f849be44167cc84002045bbb24a8d1f979128">f18f849</a></td><td><code>tox.ini: Add local-root</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd47bc39793be3d917f0ab1aac14ecce13970704">fd47bc3</a></td><td><code>tox.ini (local-root): Pass --enable-build-as-root to configure</code></td></tr></table>




---

archive/issue_comments_498786.json:
```json
{
    "body": "Changed commit from **[e9e5d47](https://github.com/sagemath/sagetrac-mirror/commit/e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8)** to **[fd47bc3](https://github.com/sagemath/sagetrac-mirror/commit/fd47bc39793be3d917f0ab1aac14ecce13970704)**",
    "created_at": "2020-11-25T22:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498786",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e9e5d47](https://github.com/sagemath/sagetrac-mirror/commit/e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8)** to **[fd47bc3](https://github.com/sagemath/sagetrac-mirror/commit/fd47bc39793be3d917f0ab1aac14ecce13970704)**



---

archive/issue_comments_498787.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-11-25T22:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498787",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_498788.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n-As a follow up to #30923, we improve the `local-sudo-ubuntu-standard` environment as follows:\n-- Remove `sudo` requirement (which is not installed on github actions and not needed there)\n+As a follow up to #30923, we improve the `local-sudo-...` environments as follows:\n+- Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)\n+- Use `configure --enable-build-as-root` for `local-root`\n - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)\n - Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)\n-- Enable `--enable-build-as-root` for tox (Tobias: not sure about this one)\n+\n``````\n",
    "created_at": "2020-11-25T22:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498788",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
-As a follow up to #30923, we improve the `local-sudo-ubuntu-standard` environment as follows:
-- Remove `sudo` requirement (which is not installed on github actions and not needed there)
+As a follow up to #30923, we improve the `local-sudo-...` environments as follows:
+- Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)
+- Use `configure --enable-build-as-root` for `local-root`
 - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)
 - Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)
-- Enable `--enable-build-as-root` for tox (Tobias: not sure about this one)
+
``````




---

archive/issue_comments_498789.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d700ab293a857397e964334baeb8207d083daca9\">d700ab2</a></td><td><code>Merge tag '9.3.beta2' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>\n",
    "created_at": "2020-11-25T22:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498789",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12" align="right">Comment 12</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d700ab293a857397e964334baeb8207d083daca9">d700ab2</a></td><td><code>Merge tag '9.3.beta2' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>




---

archive/issue_comments_498790.json:
```json
{
    "body": "Changed commit from **[fd47bc3](https://github.com/sagemath/sagetrac-mirror/commit/fd47bc39793be3d917f0ab1aac14ecce13970704)** to **[d700ab2](https://github.com/sagemath/sagetrac-mirror/commit/d700ab293a857397e964334baeb8207d083daca9)**",
    "created_at": "2020-11-25T22:14:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498790",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fd47bc3](https://github.com/sagemath/sagetrac-mirror/commit/fd47bc39793be3d917f0ab1aac14ecce13970704)** to **[d700ab2](https://github.com/sagemath/sagetrac-mirror/commit/d700ab293a857397e964334baeb8207d083daca9)**



---

archive/issue_comments_498791.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nTo simplify the build rule for `local`, the next step is to do #30721 so we can eliminate the separate `make base-toolchain` step.",
    "created_at": "2020-11-25T22:34:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498791",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">Comment 13</div>

To simplify the build rule for `local`, the next step is to do #30721 so we can eliminate the separate `make base-toolchain` step.



---

archive/issue_comments_498792.json:
```json
{
    "body": "Changed dependencies from **#30923, #29124** to **#30923, #29124, #30721**",
    "created_at": "2020-11-25T22:34:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498792",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30923, #29124** to **#30923, #29124, #30721**



---

archive/issue_comments_498793.json:
```json
{
    "body": "Changed commit from **[d700ab2](https://github.com/sagemath/sagetrac-mirror/commit/d700ab293a857397e964334baeb8207d083daca9)** to **[9414be1](https://github.com/sagemath/sagetrac-mirror/commit/9414be10c519113c5f77b99504447d8ead4074e5)**",
    "created_at": "2020-11-25T22:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498793",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d700ab2](https://github.com/sagemath/sagetrac-mirror/commit/d700ab293a857397e964334baeb8207d083daca9)** to **[9414be1](https://github.com/sagemath/sagetrac-mirror/commit/9414be10c519113c5f77b99504447d8ead4074e5)**



---

archive/issue_comments_498794.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e9366d545d744840c2de716dd6d070c97555b13\">5e9366d</a></td><td><code>Merge tag '9.3.beta2' into t/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6b9f3a36ff57a3384be8ba63f6ff5b2e17a8cbdb\">6b9f3a3</a></td><td><code>Merge branch 't/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9414be10c519113c5f77b99504447d8ead4074e5\">9414be1</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>\n",
    "created_at": "2020-11-25T22:35:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498794",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14" align="right">Comment 14</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e9366d545d744840c2de716dd6d070c97555b13">5e9366d</a></td><td><code>Merge tag '9.3.beta2' into t/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6b9f3a36ff57a3384be8ba63f6ff5b2e17a8cbdb">6b9f3a3</a></td><td><code>Merge branch 't/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9414be10c519113c5f77b99504447d8ead4074e5">9414be1</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>




---

archive/issue_comments_498795.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e959873490b161ab53e0400d32612401e9db2d0c\">e959873</a></td><td><code>tox.ini (local): Do not build the toolchain when posargs = config.status or posargs = configure</code></td></tr></table>\n",
    "created_at": "2020-11-26T05:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498795",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e959873490b161ab53e0400d32612401e9db2d0c">e959873</a></td><td><code>tox.ini (local): Do not build the toolchain when posargs = config.status or posargs = configure</code></td></tr></table>




---

archive/issue_comments_498796.json:
```json
{
    "body": "Changed commit from **[9414be1](https://github.com/sagemath/sagetrac-mirror/commit/9414be10c519113c5f77b99504447d8ead4074e5)** to **[e959873](https://github.com/sagemath/sagetrac-mirror/commit/e959873490b161ab53e0400d32612401e9db2d0c)**",
    "created_at": "2020-11-26T05:11:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498796",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9414be1](https://github.com/sagemath/sagetrac-mirror/commit/9414be10c519113c5f77b99504447d8ead4074e5)** to **[e959873](https://github.com/sagemath/sagetrac-mirror/commit/e959873490b161ab53e0400d32612401e9db2d0c)**



---

archive/issue_comments_498797.json:
```json
{
    "body": "Changed dependencies from **#30923, #29124, #30721** to **#30923, #29124**",
    "created_at": "2020-11-26T05:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498797",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30923, #29124, #30721** to **#30923, #29124**



---

archive/issue_comments_498798.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nReplying to [@mkoeppe](#comment%3A13):\n> To simplify the build rule for `local`, the next step is to do #30721 so we can eliminate the separate `make base-toolchain` step.\n\nWell, I'll work on that another time. For now I have implemented it in a different way, special casing on \"config*\" targets.",
    "created_at": "2020-11-26T05:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498798",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:16" align="right">Comment 16</div>

Replying to [@mkoeppe](#comment%3A13):
> To simplify the build rule for `local`, the next step is to do #30721 so we can eliminate the separate `make base-toolchain` step.

Well, I'll work on that another time. For now I have implemented it in a different way, special casing on "config*" targets.



---

archive/issue_events_408526.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-26T05:12:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408526"
}
```



---

archive/issue_comments_498799.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nThanks! Looks good to me, as far as I understand the changes.\n\nJust to make sure:\n> Make tox -e local-sudo-standard -- config.status stop after configure\n\nIs fixed as well?",
    "created_at": "2020-11-26T08:26:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498799",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:17" align="right">Comment 17</div>

Thanks! Looks good to me, as far as I understand the changes.

Just to make sure:
> Make tox -e local-sudo-standard -- config.status stop after configure

Is fixed as well?



---

archive/issue_comments_498800.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@tobiasdiez](#comment%3A17):\n> Thanks! Looks good to me, as far as I understand the changes.\n> \n> Just to make sure:\n> > Make tox -e local-sudo-standard -- config.status stop after configure\n\n> \n> Is fixed as well?\n\nYes. This is what I meant in the previous comment - \"special casing on `config*` targets\"",
    "created_at": "2020-11-26T18:32:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498800",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@tobiasdiez](#comment%3A17):
> Thanks! Looks good to me, as far as I understand the changes.
> 
> Just to make sure:
> > Make tox -e local-sudo-standard -- config.status stop after configure

> 
> Is fixed as well?

Yes. This is what I meant in the previous comment - "special casing on `config*` targets"



---

archive/issue_comments_498801.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@mkoeppe](#comment%3A18):\n> Replying to [@tobiasdiez](#comment%3A17):\n> > Thanks! Looks good to me, as far as I understand the changes.\n> > \n> > Just to make sure:\n> > > Make tox -e local-sudo-standard -- config.status stop after configure\n\n> > \n> > Is fixed as well?\n\n> \n> Yes. This is what I meant in the previous comment - \"special casing on `config*` targets\"\n\nOk, then is good! Me with my limited bash knowledge thought that the final `make` that builds the sage packages is still invoked even though `-- config.status` is specified.",
    "created_at": "2020-11-26T20:57:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498801",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@mkoeppe](#comment%3A18):
> Replying to [@tobiasdiez](#comment%3A17):
> > Thanks! Looks good to me, as far as I understand the changes.
> > 
> > Just to make sure:
> > > Make tox -e local-sudo-standard -- config.status stop after configure

> > 
> > Is fixed as well?

> 
> Yes. This is what I meant in the previous comment - "special casing on `config*` targets"

Ok, then is good! Me with my limited bash knowledge thought that the final `make` that builds the sage packages is still invoked even though `-- config.status` is specified.



---

archive/issue_comments_498802.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nIt's only invoked on nonempty `$TARGETS_OPTIONAL`",
    "created_at": "2020-11-26T21:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498802",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">Comment 20</div>

It's only invoked on nonempty `$TARGETS_OPTIONAL`



---

archive/issue_events_408527.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-02T20:41:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408527"
}
```



---

archive/issue_events_408528.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-02T20:41:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408528"
}
```



---

archive/issue_comments_498803.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nRunning `tox -e local-sudo-ubuntu-standard -- SAGE_NUM_THREADS=16 build` (in WLS) yields\n\n```\nReading package lists... Done\nE: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)\nE: Unable to lock directory /var/lib/apt/lists/\nW: Problem unlinking the file /var/cache/apt/pkgcache.bin - RemoveCaches (13: Permission denied)\nW: Problem unlinking the file /var/cache/apt/srcpkgcache.bin - RemoveCaches (13: Permission denied)\nERROR: InvocationError for command /usr/bin/bash -c '$(build/bin/sage-print-system-package-command debian update) #' (exited with code 100)\n```\nRunning the same command with sudo is successful, so I guess a `--sudo` is missing somewhere.\n\n\nMoreover, `./bootstrap` didn't run with following error:\n\n```\n/mnt/d/Programming/sage/src/bin/sage-env: line 133: cd: /mnt/d/Programming/Projects/sage: No such file or directory\nWarning: overwriting SAGE_ROOT environment variable:\nOld SAGE_ROOT=/mnt/d/Programming/Projects/sage\nNew SAGE_ROOT=\nError: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\nError setting environment variables by sourcing '/mnt/d/Programming/sage/src/bin/sage-env';\npossibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n```\nuntil I deleted src/bin/sage-env manually. And the root version `sudo tox -e local-root-ubuntu-standard -- SAGE_NUM_THREADS=10 build` yields\n\n```\nlocal-root-ubuntu-standard run-test: commands[2] | bash -c 'PACKAGES=$(build/bin/sage-get-system-packages debian $(PATH=build/bin:$PATH build/bin/sage-package list --has-file=spkg-configure.m4 :standard:) _bootstrap); $(build/bin/sage-print-system-package-command debian  --yes --no-install-recommends install $PACKAGES) || [ \"$IGNORE_MISSING_SYSTEM_PACKAGES\" = yes ] && echo \"(ignoring errors)\" '\n/usr/bin/bash: DEBIAN_FRONTEND=noninteractive: command not found\nERROR: InvocationError for command /usr/bin/bash -c 'PACKAGES=$(build/bin/sage-get-system-packages debian $(PATH=build/bin:$PATH build/bin/sage-package list --has-file=spkg-configure.m4 :standard:) _bootstrap); $(build/bin/sage-print-system-package-command debian  --yes --no-install-recommends install $PACKAGES) || [ \"$IGNORE_MISSING_SYSTEM_PACKAGES\" = yes ] && echo \"(ignoring errors)\" ' (exited with code 1)\n```",
    "created_at": "2020-12-02T20:41:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498803",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:21" align="right">Comment 21</div>

Running `tox -e local-sudo-ubuntu-standard -- SAGE_NUM_THREADS=16 build` (in WLS) yields

```
Reading package lists... Done
E: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)
E: Unable to lock directory /var/lib/apt/lists/
W: Problem unlinking the file /var/cache/apt/pkgcache.bin - RemoveCaches (13: Permission denied)
W: Problem unlinking the file /var/cache/apt/srcpkgcache.bin - RemoveCaches (13: Permission denied)
ERROR: InvocationError for command /usr/bin/bash -c '$(build/bin/sage-print-system-package-command debian update) #' (exited with code 100)
```
Running the same command with sudo is successful, so I guess a `--sudo` is missing somewhere.


Moreover, `./bootstrap` didn't run with following error:

```
/mnt/d/Programming/sage/src/bin/sage-env: line 133: cd: /mnt/d/Programming/Projects/sage: No such file or directory
Warning: overwriting SAGE_ROOT environment variable:
Old SAGE_ROOT=/mnt/d/Programming/Projects/sage
New SAGE_ROOT=
Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
Error setting environment variables by sourcing '/mnt/d/Programming/sage/src/bin/sage-env';
possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
```
until I deleted src/bin/sage-env manually. And the root version `sudo tox -e local-root-ubuntu-standard -- SAGE_NUM_THREADS=10 build` yields

```
local-root-ubuntu-standard run-test: commands[2] | bash -c 'PACKAGES=$(build/bin/sage-get-system-packages debian $(PATH=build/bin:$PATH build/bin/sage-package list --has-file=spkg-configure.m4 :standard:) _bootstrap); $(build/bin/sage-print-system-package-command debian  --yes --no-install-recommends install $PACKAGES) || [ "$IGNORE_MISSING_SYSTEM_PACKAGES" = yes ] && echo "(ignoring errors)" '
/usr/bin/bash: DEBIAN_FRONTEND=noninteractive: command not found
ERROR: InvocationError for command /usr/bin/bash -c 'PACKAGES=$(build/bin/sage-get-system-packages debian $(PATH=build/bin:$PATH build/bin/sage-package list --has-file=spkg-configure.m4 :standard:) _bootstrap); $(build/bin/sage-print-system-package-command debian  --yes --no-install-recommends install $PACKAGES) || [ "$IGNORE_MISSING_SYSTEM_PACKAGES" = yes ] && echo "(ignoring errors)" ' (exited with code 1)
```



---

archive/issue_comments_498804.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27368b1bc6e9ed5a117005674025747af78b4227\">27368b1</a></td><td><code>tox.ini (local-sudo): Run apt-get update with sudo</code></td></tr></table>\n",
    "created_at": "2020-12-02T21:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498804",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22" align="right">Comment 22</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27368b1bc6e9ed5a117005674025747af78b4227">27368b1</a></td><td><code>tox.ini (local-sudo): Run apt-get update with sudo</code></td></tr></table>




---

archive/issue_comments_498805.json:
```json
{
    "body": "Changed commit from **[e959873](https://github.com/sagemath/sagetrac-mirror/commit/e959873490b161ab53e0400d32612401e9db2d0c)** to **[27368b1](https://github.com/sagemath/sagetrac-mirror/commit/27368b1bc6e9ed5a117005674025747af78b4227)**",
    "created_at": "2020-12-02T21:48:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498805",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e959873](https://github.com/sagemath/sagetrac-mirror/commit/e959873490b161ab53e0400d32612401e9db2d0c)** to **[27368b1](https://github.com/sagemath/sagetrac-mirror/commit/27368b1bc6e9ed5a117005674025747af78b4227)**



---

archive/issue_comments_498806.json:
```json
{
    "body": "Changed dependencies from **#30923, #29124** to **#30923, #29124, #22731**",
    "created_at": "2020-12-03T01:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498806",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30923, #29124** to **#30923, #29124, #22731**



---

archive/issue_comments_498807.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@tobiasdiez](#comment%3A21):\n> Moreover, `./bootstrap` didn't run with following error:\n> \n> ```\n> /mnt/d/Programming/sage/src/bin/sage-env: line 133: cd: /mnt/d/Programming/Projects/sage: No such file or directory\n> Warning: overwriting SAGE_ROOT environment variable:\n> Old SAGE_ROOT=/mnt/d/Programming/Projects/sage\n> New SAGE_ROOT=\n> Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\n> Error setting environment variables by sourcing '/mnt/d/Programming/sage/src/bin/sage-env';\n> possibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n> ```\n> until I deleted src/bin/sage-env manually.\n\nThis is fixed by #22731, I think. I'll merge it",
    "created_at": "2020-12-03T01:08:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498807",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@tobiasdiez](#comment%3A21):
> Moreover, `./bootstrap` didn't run with following error:
> 
> ```
> /mnt/d/Programming/sage/src/bin/sage-env: line 133: cd: /mnt/d/Programming/Projects/sage: No such file or directory
> Warning: overwriting SAGE_ROOT environment variable:
> Old SAGE_ROOT=/mnt/d/Programming/Projects/sage
> New SAGE_ROOT=
> Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
> Error setting environment variables by sourcing '/mnt/d/Programming/sage/src/bin/sage-env';
> possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
> ```
> until I deleted src/bin/sage-env manually.

This is fixed by #22731, I think. I'll merge it



---

archive/issue_comments_498808.json:
```json
{
    "body": "Changed commit from **[27368b1](https://github.com/sagemath/sagetrac-mirror/commit/27368b1bc6e9ed5a117005674025747af78b4227)** to **[7216c67](https://github.com/sagemath/sagetrac-mirror/commit/7216c677975a520343df6ab9dad5fdf0fc09cfcc)**",
    "created_at": "2020-12-03T01:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498808",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[27368b1](https://github.com/sagemath/sagetrac-mirror/commit/27368b1bc6e9ed5a117005674025747af78b4227)** to **[7216c67](https://github.com/sagemath/sagetrac-mirror/commit/7216c677975a520343df6ab9dad5fdf0fc09cfcc)**



---

archive/issue_comments_498809.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8f88709ed014c3af84ae5b3cbb26f1a1dbbbe53d\">8f88709</a></td><td><code>src/bin/sage: Only source sage-env-config if it exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab2655ea81257c333d3fdf2613d99c4ec2b343d7\">ab2655e</a></td><td><code>src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4577f37111f99e5733dd1c909e6e3a79dfe2163d\">4577f37</a></td><td><code>src/bin/sage-env: Make sage-env-config optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c35c170a7b7607187a5b5bb03f3bc3863555eb52\">c35c170</a></td><td><code>sage.env: Add SAGE_VENV</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f\">c585d94</a></td><td><code>src/sage: Replace some SAGE_LOCAL by SAGE_VENV</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af\">2fd195f</a></td><td><code>src/bin/sage: Fix reference to trac ticket</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008\">f3b7a9c</a></td><td><code>src/sage/env.py: Add documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d\">1fe77a8</a></td><td><code>src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a\">38eebc3</a></td><td><code>Merge tag '9.3.beta2' into t/22731/22731</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7216c677975a520343df6ab9dad5fdf0fc09cfcc\">7216c67</a></td><td><code>Merge branch 'u/mkoeppe/22731' of git://trac.sagemath.org/sage into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>\n",
    "created_at": "2020-12-03T01:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498809",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24" align="right">Comment 24</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8f88709ed014c3af84ae5b3cbb26f1a1dbbbe53d">8f88709</a></td><td><code>src/bin/sage: Only source sage-env-config if it exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab2655ea81257c333d3fdf2613d99c4ec2b343d7">ab2655e</a></td><td><code>src/bin/sage: Use python3 etc. from PATH instead of using SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4577f37111f99e5733dd1c909e6e3a79dfe2163d">4577f37</a></td><td><code>src/bin/sage-env: Make sage-env-config optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c35c170a7b7607187a5b5bb03f3bc3863555eb52">c35c170</a></td><td><code>sage.env: Add SAGE_VENV</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c585d94b95c5675f5a68690d13fa6a949642c48f">c585d94</a></td><td><code>src/sage: Replace some SAGE_LOCAL by SAGE_VENV</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2fd195f5f044d125b0d5a743fec9d79e449126af">2fd195f</a></td><td><code>src/bin/sage: Fix reference to trac ticket</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3b7a9cce247457f07ef42069cdadb3f6409b008">f3b7a9c</a></td><td><code>src/sage/env.py: Add documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1fe77a819d2477bf4b53d228388a4ff3e2c7c45d">1fe77a8</a></td><td><code>src/bin/sage-env: Do not set SAGE_SCRIPTS_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/38eebc3d9f790c81b8ffcc963cf2513184c9ae6a">38eebc3</a></td><td><code>Merge tag '9.3.beta2' into t/22731/22731</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7216c677975a520343df6ab9dad5fdf0fc09cfcc">7216c67</a></td><td><code>Merge branch 'u/mkoeppe/22731' of git://trac.sagemath.org/sage into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>




---

archive/issue_comments_498810.json:
```json
{
    "body": "Changed commit from **[7216c67](https://github.com/sagemath/sagetrac-mirror/commit/7216c677975a520343df6ab9dad5fdf0fc09cfcc)** to **[1c2dfc6](https://github.com/sagemath/sagetrac-mirror/commit/1c2dfc62c731c586d569c3e9eae6cd806c25a960)**",
    "created_at": "2020-12-03T01:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498810",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7216c67](https://github.com/sagemath/sagetrac-mirror/commit/7216c677975a520343df6ab9dad5fdf0fc09cfcc)** to **[1c2dfc6](https://github.com/sagemath/sagetrac-mirror/commit/1c2dfc62c731c586d569c3e9eae6cd806c25a960)**



---

archive/issue_comments_498811.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c2dfc62c731c586d569c3e9eae6cd806c25a960\">1c2dfc6</a></td><td><code>tox.ini (local-root, local-sudo): Run output of sage-print-system-package-command through eval</code></td></tr></table>\n",
    "created_at": "2020-12-03T01:14:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498811",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25" align="right">Comment 25</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c2dfc62c731c586d569c3e9eae6cd806c25a960">1c2dfc6</a></td><td><code>tox.ini (local-root, local-sudo): Run output of sage-print-system-package-command through eval</code></td></tr></table>




---

archive/issue_events_408529.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-03T01:14:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408529"
}
```



---

archive/issue_events_408530.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-03T01:14:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408530"
}
```



---

archive/issue_comments_498812.json:
```json
{
    "body": "Changed commit from **[1c2dfc6](https://github.com/sagemath/sagetrac-mirror/commit/1c2dfc62c731c586d569c3e9eae6cd806c25a960)** to **[3c7e5c4](https://github.com/sagemath/sagetrac-mirror/commit/3c7e5c482e1c54ba140c3d134ebfc909bd943a3d)**",
    "created_at": "2020-12-06T21:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498812",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1c2dfc6](https://github.com/sagemath/sagetrac-mirror/commit/1c2dfc62c731c586d569c3e9eae6cd806c25a960)** to **[3c7e5c4](https://github.com/sagemath/sagetrac-mirror/commit/3c7e5c482e1c54ba140c3d134ebfc909bd943a3d)**



---

archive/issue_comments_498813.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35241e7cc31dd679bc491028d7186629c2f97c57\">35241e7</a></td><td><code>src/doc/en/developer/portability_testing.rst: Update paths in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68baff143410209e56af62dc81eb6ec38ba12249\">68baff1</a></td><td><code>Makefile (configure): Update dependency on moved files build/pkgs/*.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fae4bd089c019cc0e27929d78a2b85b5e4dfa3a2\">fae4bd0</a></td><td><code>bootstrap: Remove --enable-_recommended etc.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9bd1455bf3762c21957bcf4da3e06750897b830\">a9bd145</a></td><td><code>m4/sage_spkg_collect.m4: Remove _recommended etc. from the configure package summary</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/93f5e32272d0f5082fce05406f99d6487d1a50fc\">93f5e32</a></td><td><code>build/bin/sage-print-system-package-command (debian --yes): Use DEBIAN_FRONTEND=noninteractive</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/898758da497ca4b57c5e8b609cf2439d215018a7\">898758d</a></td><td><code>tox.ini: Add local-root</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/559dd8e7acd647224b2b320a9e77e95e0737bc04\">559dd8e</a></td><td><code>tox.ini (local-root): Pass --enable-build-as-root to configure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a85f41c9220d9b71f0033faf1cb9010a8626ede1\">a85f41c</a></td><td><code>tox.ini (local): Do not build the toolchain when posargs = config.status or posargs = configure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1de912a69f441c80e4d4c64a627f0707e5807442\">1de912a</a></td><td><code>tox.ini (local-sudo): Run apt-get update with sudo</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c7e5c482e1c54ba140c3d134ebfc909bd943a3d\">3c7e5c4</a></td><td><code>tox.ini (local-root, local-sudo): Run output of sage-print-system-package-command through eval</code></td></tr></table>\n",
    "created_at": "2020-12-06T21:49:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498813",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27" align="right">Comment 27</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35241e7cc31dd679bc491028d7186629c2f97c57">35241e7</a></td><td><code>src/doc/en/developer/portability_testing.rst: Update paths in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68baff143410209e56af62dc81eb6ec38ba12249">68baff1</a></td><td><code>Makefile (configure): Update dependency on moved files build/pkgs/*.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fae4bd089c019cc0e27929d78a2b85b5e4dfa3a2">fae4bd0</a></td><td><code>bootstrap: Remove --enable-_recommended etc.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9bd1455bf3762c21957bcf4da3e06750897b830">a9bd145</a></td><td><code>m4/sage_spkg_collect.m4: Remove _recommended etc. from the configure package summary</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/93f5e32272d0f5082fce05406f99d6487d1a50fc">93f5e32</a></td><td><code>build/bin/sage-print-system-package-command (debian --yes): Use DEBIAN_FRONTEND=noninteractive</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/898758da497ca4b57c5e8b609cf2439d215018a7">898758d</a></td><td><code>tox.ini: Add local-root</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/559dd8e7acd647224b2b320a9e77e95e0737bc04">559dd8e</a></td><td><code>tox.ini (local-root): Pass --enable-build-as-root to configure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a85f41c9220d9b71f0033faf1cb9010a8626ede1">a85f41c</a></td><td><code>tox.ini (local): Do not build the toolchain when posargs = config.status or posargs = configure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1de912a69f441c80e4d4c64a627f0707e5807442">1de912a</a></td><td><code>tox.ini (local-sudo): Run apt-get update with sudo</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c7e5c482e1c54ba140c3d134ebfc909bd943a3d">3c7e5c4</a></td><td><code>tox.ini (local-root, local-sudo): Run output of sage-print-system-package-command through eval</code></td></tr></table>




---

archive/issue_comments_498814.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nRebased on top of 9.3.beta3 and rebased #29124",
    "created_at": "2020-12-06T21:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498814",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:28" align="right">Comment 28</div>

Rebased on top of 9.3.beta3 and rebased #29124



---

archive/issue_comments_498815.json:
```json
{
    "body": "Changed dependencies from **#30923, #29124, #22731** to **#29124**",
    "created_at": "2020-12-06T21:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498815",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30923, #29124, #22731** to **#29124**



---

archive/issue_comments_498816.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/184ae6d63c28e4462ec3711dc60c6d357218c3c8\">184ae6d</a></td><td><code>Merge tag '9.3.beta3' into t/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/084fbf6b995e304d126000e5be2797b51fbd4592\">084fbf6</a></td><td><code>src/doc/bootstrap: Use ./sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/571cc490c2efebe12bdac19490b9a2f8b058475d\">571cc49</a></td><td><code>Merge branch 't/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7ff30c92e59308d84377411ea4edd9173c4cd75\">f7ff30c</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>\n",
    "created_at": "2020-12-10T06:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498816",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29" align="right">Comment 29</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/184ae6d63c28e4462ec3711dc60c6d357218c3c8">184ae6d</a></td><td><code>Merge tag '9.3.beta3' into t/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/084fbf6b995e304d126000e5be2797b51fbd4592">084fbf6</a></td><td><code>src/doc/bootstrap: Use ./sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/571cc490c2efebe12bdac19490b9a2f8b058475d">571cc49</a></td><td><code>Merge branch 't/30947/src_doc_bootstrap__simplify_by_using_new_options_of__sage__package_list_' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7ff30c92e59308d84377411ea4edd9173c4cd75">f7ff30c</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>




---

archive/issue_comments_498817.json:
```json
{
    "body": "Changed commit from **[3c7e5c4](https://github.com/sagemath/sagetrac-mirror/commit/3c7e5c482e1c54ba140c3d134ebfc909bd943a3d)** to **[f7ff30c](https://github.com/sagemath/sagetrac-mirror/commit/f7ff30c92e59308d84377411ea4edd9173c4cd75)**",
    "created_at": "2020-12-10T06:41:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498817",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3c7e5c4](https://github.com/sagemath/sagetrac-mirror/commit/3c7e5c482e1c54ba140c3d134ebfc909bd943a3d)** to **[f7ff30c](https://github.com/sagemath/sagetrac-mirror/commit/f7ff30c92e59308d84377411ea4edd9173c4cd75)**



---

archive/issue_comments_498818.json:
```json
{
    "body": "Changed commit from **[f7ff30c](https://github.com/sagemath/sagetrac-mirror/commit/f7ff30c92e59308d84377411ea4edd9173c4cd75)** to **[e9ca2c1](https://github.com/sagemath/sagetrac-mirror/commit/e9ca2c1d848708c0a626bc412844043b005c985a)**",
    "created_at": "2020-12-16T23:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498818",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f7ff30c](https://github.com/sagemath/sagetrac-mirror/commit/f7ff30c92e59308d84377411ea4edd9173c4cd75)** to **[e9ca2c1](https://github.com/sagemath/sagetrac-mirror/commit/e9ca2c1d848708c0a626bc412844043b005c985a)**



---

archive/issue_comments_498819.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c529729783bd328c3180d0faa2c90071319fa000\">c529729</a></td><td><code>Merge commit '3bb309944b7e8542b2ac88ed3c9d9a60e68644d7' of git://trac.sagemath.org/sage into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b73d6f0e1f6d4bfc7e6442b1eeb4fef76c9f9ec6\">b73d6f0</a></td><td><code>Merge tag '9.3.beta4' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9ca2c1d848708c0a626bc412844043b005c985a\">e9ca2c1</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>\n",
    "created_at": "2020-12-16T23:27:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498819",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c529729783bd328c3180d0faa2c90071319fa000">c529729</a></td><td><code>Merge commit '3bb309944b7e8542b2ac88ed3c9d9a60e68644d7' of git://trac.sagemath.org/sage into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b73d6f0e1f6d4bfc7e6442b1eeb4fef76c9f9ec6">b73d6f0</a></td><td><code>Merge tag '9.3.beta4' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9ca2c1d848708c0a626bc412844043b005c985a">e9ca2c1</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>




---

archive/issue_comments_498820.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nMerged newest version of #29124. Still needs review",
    "created_at": "2020-12-16T23:27:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498820",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">Comment 31</div>

Merged newest version of #29124. Still needs review



---

archive/issue_events_408531.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-29T00:16:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408531"
}
```



---

archive/issue_events_408532.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-29T00:16:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408532"
}
```



---

archive/issue_comments_498821.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cf5ee46cde574170859d9d8ce90abef990e7969\">3cf5ee4</a></td><td><code>Merge commit 'a50ddf88975086b14a49895e371477df00fd57b5' of git://trac.sagemath.org/sage into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4927e1574e6f856f5dda78b888713f0358b16da\">b4927e1</a></td><td><code>sage.misc.package: Remove/adjust non-robust doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5fe7522a2ad03b23553d696e7a941e9f4fa3271\">e5fe752</a></td><td><code>Merge tag '9.3.beta4' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78ff9d580f5f0c1396e1f8a5421858170999957a\">78ff9d5</a></td><td><code>src/sage/misc/package.py: Add one more # optional - build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a44042f86577431358fb3ea95875cd949f971984\">a44042f</a></td><td><code>Merge branch 't/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64bde5f887ac115b1e40b7905ad30cc00d8de363\">64bde5f</a></td><td><code>Merge tag '9.3.beta5' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8\">e9a7572</a></td><td><code>src/sage/misc/package.py: Improve source formatting</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7bcda971b925201891d60d13c6b6e879c888301\">c7bcda9</a></td><td><code>Merge branch 't/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9988c5fab43adc6f5784a124248887637475d67c\">9988c5f</a></td><td><code>ci-cygwin*.yml: Adjust to new script packages _bootstrap, _prereq</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05\">ab19133</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>\n",
    "created_at": "2020-12-29T19:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498821",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33" align="right">Comment 33</div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cf5ee46cde574170859d9d8ce90abef990e7969">3cf5ee4</a></td><td><code>Merge commit 'a50ddf88975086b14a49895e371477df00fd57b5' of git://trac.sagemath.org/sage into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4927e1574e6f856f5dda78b888713f0358b16da">b4927e1</a></td><td><code>sage.misc.package: Remove/adjust non-robust doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5fe7522a2ad03b23553d696e7a941e9f4fa3271">e5fe752</a></td><td><code>Merge tag '9.3.beta4' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78ff9d580f5f0c1396e1f8a5421858170999957a">78ff9d5</a></td><td><code>src/sage/misc/package.py: Add one more # optional - build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a44042f86577431358fb3ea95875cd949f971984">a44042f</a></td><td><code>Merge branch 't/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64bde5f887ac115b1e40b7905ad30cc00d8de363">64bde5f</a></td><td><code>Merge tag '9.3.beta5' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8">e9a7572</a></td><td><code>src/sage/misc/package.py: Improve source formatting</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7bcda971b925201891d60d13c6b6e879c888301">c7bcda9</a></td><td><code>Merge branch 't/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available' into t/29124/script-packages-prereq-toolchain-bootstrap</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9988c5fab43adc6f5784a124248887637475d67c">9988c5f</a></td><td><code>ci-cygwin*.yml: Adjust to new script packages _bootstrap, _prereq</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05">ab19133</a></td><td><code>Merge branch 't/29124/script-packages-prereq-toolchain-bootstrap' into t/30944/tox__improve_local_sudo_ubuntu_standard</code></td></tr></table>




---

archive/issue_comments_498822.json:
```json
{
    "body": "Changed commit from **[e9ca2c1](https://github.com/sagemath/sagetrac-mirror/commit/e9ca2c1d848708c0a626bc412844043b005c985a)** to **[ab19133](https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05)**",
    "created_at": "2020-12-29T19:13:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498822",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e9ca2c1](https://github.com/sagemath/sagetrac-mirror/commit/e9ca2c1d848708c0a626bc412844043b005c985a)** to **[ab19133](https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05)**



---

archive/issue_comments_498823.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nMerged newest #29124, needs review",
    "created_at": "2020-12-29T19:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498823",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">Comment 34</div>

Merged newest #29124, needs review



---

archive/issue_comments_498824.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nLet's get this in please (dependency of #31064 and #31099)",
    "created_at": "2021-01-06T19:14:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498824",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">Comment 35</div>

Let's get this in please (dependency of #31064 and #31099)



---

archive/issue_comments_498825.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nI think #29124 isn't merged completely.",
    "created_at": "2021-01-06T20:04:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498825",
    "user": "https://github.com/kliem"
}
```

<div id="comment:36" align="right">Comment 36</div>

I think #29124 isn't merged completely.



---

archive/issue_comments_498826.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nWhat does\n\n```diff\n+    local:             case \"{posargs:}\" in \\\n+    local:                 config*) ;; \\\n+    local:                 *)       make -k V=0 base-toolchain ;; \\\n+    local:             esac && \\\n-    local:                     make -k V=0 base-toolchain && \\\n```\n\ndo? (That is not the diff, but I think morally it is.)",
    "created_at": "2021-01-06T20:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498826",
    "user": "https://github.com/kliem"
}
```

<div id="comment:37" align="right">Comment 37</div>

What does

```diff
+    local:             case "{posargs:}" in \
+    local:                 config*) ;; \
+    local:                 *)       make -k V=0 base-toolchain ;; \
+    local:             esac && \
-    local:                     make -k V=0 base-toolchain && \
```

do? (That is not the diff, but I think morally it is.)



---

archive/issue_comments_498827.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nIt implements the last bullet point of the ticket description: \nWhen something like `config.status` is given as the target, `make base-toolchain` should not be run.",
    "created_at": "2021-01-06T20:41:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498827",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">Comment 38</div>

It implements the last bullet point of the ticket description: 
When something like `config.status` is given as the target, `make base-toolchain` should not be run.



---

archive/issue_comments_498828.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nThanks. But does it stop then or are the other things still run?:\n\n```diff\n+    local:             make -k V=0 SAGE_SPKG=\"sage-spkg -y -o\" SAGE_CHECK=warn SAGE_CHECK_PACKAGES=\"!cython,!r,!python3,!nose,!gap,!cysignals,!linbox,!git,!ppl,!cmake,!networkx,!symengine_py\" {env:TARGETS_PRE:} {posargs:build} && \\\n+    local:             ([ -z \"{env:TARGETS_OPTIONAL:}\" ] || make -k V=0 SAGE_SPKG=\"sage-spkg -y -o\" SAGE_CHECK=warn SAGE_CHECK_PACKAGES=\"!cython,!r,!python3,!nose,!gap,!cysignals,!linbox,!git,!ppl,!cmake\" {env:TARGETS_OPTIONAL:} || echo \"(error ignored)\" ) '\n   ```",
    "created_at": "2021-01-06T20:43:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498828",
    "user": "https://github.com/kliem"
}
```

<div id="comment:39" align="right">Comment 39</div>

Thanks. But does it stop then or are the other things still run?:

```diff
+    local:             make -k V=0 SAGE_SPKG="sage-spkg -y -o" SAGE_CHECK=warn SAGE_CHECK_PACKAGES="!cython,!r,!python3,!nose,!gap,!cysignals,!linbox,!git,!ppl,!cmake,!networkx,!symengine_py" {env:TARGETS_PRE:} {posargs:build} && \
+    local:             ([ -z "{env:TARGETS_OPTIONAL:}" ] || make -k V=0 SAGE_SPKG="sage-spkg -y -o" SAGE_CHECK=warn SAGE_CHECK_PACKAGES="!cython,!r,!python3,!nose,!gap,!cysignals,!linbox,!git,!ppl,!cmake" {env:TARGETS_OPTIONAL:} || echo "(error ignored)" ) '
   ```



---

archive/issue_comments_498829.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nI have reworded the ticket description to clarify it.",
    "created_at": "2021-01-06T21:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498829",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">Comment 40</div>

I have reworded the ticket description to clarify it.



---

archive/issue_comments_498830.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n - Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)\n - Use `configure --enable-build-as-root` for `local-root`\n - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)\n-- Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)\n+- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).\n \n``````\n",
    "created_at": "2021-01-06T21:29:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498830",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 - Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)
 - Use `configure --enable-build-as-root` for `local-root`
 - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)
-- Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)
+- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).
 
``````




---

archive/issue_comments_498831.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n - Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)\n - Use `configure --enable-build-as-root` for `local-root`\n - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)\n-- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).\n+- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of also invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).\n \n``````\n",
    "created_at": "2021-01-06T21:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498831",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 - Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)
 - Use `configure --enable-build-as-root` for `local-root`
 - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)
-- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).
+- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of also invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).
 
``````




---

archive/issue_events_408533.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-07T06:08:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408533"
}
```



---

archive/issue_events_408534.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2021-01-07T06:08:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408534"
}
```



---

archive/issue_comments_498832.json:
```json
{
    "body": "Reviewer: **Jonathan Kliem**",
    "created_at": "2021-01-07T06:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498832",
    "user": "https://github.com/kliem"
}
```

Reviewer: **Jonathan Kliem**



---

archive/issue_comments_498833.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nLGTM.",
    "created_at": "2021-01-07T06:08:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498833",
    "user": "https://github.com/kliem"
}
```

<div id="comment:42" align="right">Comment 42</div>

LGTM.



---

archive/issue_comments_498834.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nThank you!",
    "created_at": "2021-01-07T06:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498834",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">Comment 43</div>

Thank you!



---

archive/issue_events_408535.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T10:38:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408535"
}
```



---

archive/issue_events_408536.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "e88216c277a570ffcdeda59d3763af780b8b2943",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-01-24T10:38:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30944#event-408536"
}
```



---

archive/issue_comments_498835.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/tox__improve_local_sudo_ubuntu_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox__improve_local_sudo_ubuntu_standard)** to **[ab19133](https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05)**",
    "created_at": "2021-01-24T10:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30944#issuecomment-498835",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/tox__improve_local_sudo_ubuntu_standard](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/tox__improve_local_sudo_ubuntu_standard)** to **[ab19133](https://github.com/sagemath/sagetrac-mirror/commit/ab191339dfa275b3466f530a59268c756f5d1b05)**
