# Issue 30944: tox: Improve local-sudo-ubuntu-standard

archive/issues_030707.json:
```json
{
    "body": "As a follow up to #30923, we improve the `local-sudo-...` environments as follows:\n- Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)\n- Use `configure --enable-build-as-root` for `local-root`\n- Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)\n- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of also invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).\n\n\nCC:  @mkoeppe @dimpase @kliem\n\nBranch/Commit: ab191339dfa275b3466f530a59268c756f5d1b05\n\nReviewer: Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nDependencies: #29124\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30944\n\n",
    "closed_at": "2021-01-24T10:38:10Z",
    "created_at": "2020-11-22T17:52:52Z",
    "labels": [
        "component: porting",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "tox: Improve local-sudo-ubuntu-standard",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30944",
    "user": "https://github.com/tobiasdiez"
}
```
As a follow up to #30923, we improve the `local-sudo-...` environments as follows:
- Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)
- Use `configure --enable-build-as-root` for `local-root`
- Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)
- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of also invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).


CC:  @mkoeppe @dimpase @kliem

Branch/Commit: ab191339dfa275b3466f530a59268c756f5d1b05

Reviewer: Jonathan Kliem

Author: Matthias Koeppe

Dependencies: #29124

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30944





---

archive/issue_comments_613886.json:
```json
{
    "body": "<a id='comment:1'></a>The variant could be called `local-root-ubuntu-standard`, I guess",
    "created_at": "2020-11-22T19:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613886",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>The variant could be called `local-root-ubuntu-standard`, I guess



---

archive/issue_comments_613887.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/tox__improve_local_sudo_ubuntu_standard\"",
    "created_at": "2020-11-22T20:03:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613887",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/tox__improve_local_sudo_ubuntu_standard"



---

archive/issue_comments_613888.json:
```json
{
    "body": "Replying to [ticket:30944 gh-tobiasdiez]:\n> - Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)\n\n\nRight, I forgot about the mess with `TARGETS_PRE` and `TARGETS_OPTIONAL` in `tox.ini`, which do not get the same defaults for `local` as they do for `docker` - I'll fix this\n\n---\nNew commits:",
    "created_at": "2020-11-22T20:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613888",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [ticket:30944 gh-tobiasdiez]:
> - Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)


Right, I forgot about the mess with `TARGETS_PRE` and `TARGETS_OPTIONAL` in `tox.ini`, which do not get the same defaults for `local` as they do for `docker` - I'll fix this

---
New commits:



---

archive/issue_comments_613889.json:
```json
{
    "body": "Changing commit from \"\" to \"e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8\"",
    "created_at": "2020-11-22T20:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613889",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8"



---

archive/issue_comments_613890.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30923\"",
    "created_at": "2020-11-23T02:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613890",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#30923"



---

archive/issue_comments_613891.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:1 mkoeppe]:\n> The variant could be called `local-root-ubuntu-standard`, I guess\n\nAdding this in #29124",
    "created_at": "2020-11-24T05:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613891",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Replying to [comment:1 mkoeppe]:
> The variant could be called `local-root-ubuntu-standard`, I guess

Adding this in #29124



---

archive/issue_comments_613892.json:
```json
{
    "body": "Changing dependencies from \"#30923\" to \"#30923, #29124\"",
    "created_at": "2020-11-24T18:24:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613892",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30923" to "#30923, #29124"



---

archive/issue_comments_613893.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [gh-tobiasdiez in #29124](https://trac.sagemath.org/ticket/29124?replyto=22#comment:22):\n> I'm not sure about the naming of the `local-` environments. Why should I expect as a developer that `local-sudo` installs system packages? What about `local-system-packages-ubuntu` (for root) and `local-sudo-system-packages-ubuntu` (for sudo)?\n\nAll of these environments install system packages... The only one that does not is `local-direct`",
    "created_at": "2020-11-24T18:41:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613893",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Replying to [gh-tobiasdiez in #29124](https://trac.sagemath.org/ticket/29124?replyto=22#comment:22):
> I'm not sure about the naming of the `local-` environments. Why should I expect as a developer that `local-sudo` installs system packages? What about `local-system-packages-ubuntu` (for root) and `local-sudo-system-packages-ubuntu` (for sudo)?

All of these environments install system packages... The only one that does not is `local-direct`



---

archive/issue_comments_613894.json:
```json
{
    "body": "<a id='comment:9'></a>Ah ok...than it makes sense.",
    "created_at": "2020-11-25T16:31:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613894",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:9'></a>Ah ok...than it makes sense.



---

archive/issue_comments_613895.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-11-25T22:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_613896.json:
```json
{
    "body": "Changing commit from \"e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8\" to \"fd47bc39793be3d917f0ab1aac14ecce13970704\"",
    "created_at": "2020-11-25T22:01:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e9e5d47d5e936fe7f28bcb7a0e8ba5c0711deea8" to "fd47bc39793be3d917f0ab1aac14ecce13970704"



---

archive/issue_comments_613897.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-11-25T22:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613897",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_613898.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n-As a follow up to #30923, we improve the `local-sudo-ubuntu-standard` environment as follows:\n-- Remove `sudo` requirement (which is not installed on github actions and not needed there)\n+As a follow up to #30923, we improve the `local-sudo-...` environments as follows:\n+- Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)\n+- Use `configure --enable-build-as-root` for `local-root`\n - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)\n - Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)\n-- Enable `--enable-build-as-root` for tox (Tobias: not sure about this one)\n+\n``````\n",
    "created_at": "2020-11-25T22:04:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613898",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
-As a follow up to #30923, we improve the `local-sudo-ubuntu-standard` environment as follows:
-- Remove `sudo` requirement (which is not installed on github actions and not needed there)
+As a follow up to #30923, we improve the `local-sudo-...` environments as follows:
+- Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)
+- Use `configure --enable-build-as-root` for `local-root`
 - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)
 - Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)
-- Enable `--enable-build-as-root` for tox (Tobias: not sure about this one)
+
``````




---

archive/issue_comments_613899.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-25T22:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613899",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613900.json:
```json
{
    "body": "Changing commit from \"fd47bc39793be3d917f0ab1aac14ecce13970704\" to \"d700ab293a857397e964334baeb8207d083daca9\"",
    "created_at": "2020-11-25T22:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613900",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fd47bc39793be3d917f0ab1aac14ecce13970704" to "d700ab293a857397e964334baeb8207d083daca9"



---

archive/issue_comments_613901.json:
```json
{
    "body": "<a id='comment:13'></a>To simplify the build rule for `local`, the next step is to do #30721 so we can eliminate the separate `make base-toolchain` step.",
    "created_at": "2020-11-25T22:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613901",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>To simplify the build rule for `local`, the next step is to do #30721 so we can eliminate the separate `make base-toolchain` step.



---

archive/issue_comments_613902.json:
```json
{
    "body": "Changing dependencies from \"#30923, #29124\" to \"#30923, #29124, #30721\"",
    "created_at": "2020-11-25T22:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613902",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30923, #29124" to "#30923, #29124, #30721"



---

archive/issue_comments_613903.json:
```json
{
    "body": "Changing commit from \"d700ab293a857397e964334baeb8207d083daca9\" to \"9414be10c519113c5f77b99504447d8ead4074e5\"",
    "created_at": "2020-11-25T22:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d700ab293a857397e964334baeb8207d083daca9" to "9414be10c519113c5f77b99504447d8ead4074e5"



---

archive/issue_comments_613904.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-25T22:35:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613904",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613905.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-26T05:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613905",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613906.json:
```json
{
    "body": "Changing commit from \"9414be10c519113c5f77b99504447d8ead4074e5\" to \"e959873490b161ab53e0400d32612401e9db2d0c\"",
    "created_at": "2020-11-26T05:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9414be10c519113c5f77b99504447d8ead4074e5" to "e959873490b161ab53e0400d32612401e9db2d0c"



---

archive/issue_comments_613907.json:
```json
{
    "body": "Changing dependencies from \"#30923, #29124, #30721\" to \"#30923, #29124\"",
    "created_at": "2020-11-26T05:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613907",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30923, #29124, #30721" to "#30923, #29124"



---

archive/issue_comments_613908.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:13 mkoeppe]:\n> To simplify the build rule for `local`, the next step is to do #30721 so we can eliminate the separate `make base-toolchain` step.\n\nWell, I'll work on that another time. For now I have implemented it in a different way, special casing on \"config*\" targets.",
    "created_at": "2020-11-26T05:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613908",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>Replying to [comment:13 mkoeppe]:
> To simplify the build rule for `local`, the next step is to do #30721 so we can eliminate the separate `make base-toolchain` step.

Well, I'll work on that another time. For now I have implemented it in a different way, special casing on "config*" targets.



---

archive/issue_comments_613909.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-26T05:12:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613909",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_613910.json:
```json
{
    "body": "<a id='comment:17'></a>Thanks! Looks good to me, as far as I understand the changes.\n\nJust to make sure:\n> Make tox -e local-sudo-standard -- config.status stop after configure\n\n\nIs fixed as well?",
    "created_at": "2020-11-26T08:26:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613910",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:17'></a>Thanks! Looks good to me, as far as I understand the changes.

Just to make sure:
> Make tox -e local-sudo-standard -- config.status stop after configure


Is fixed as well?



---

archive/issue_comments_613911.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 gh-tobiasdiez]:\n> Thanks! Looks good to me, as far as I understand the changes.\n> \n> Just to make sure:\n> > Make tox -e local-sudo-standard -- config.status stop after configure\n\n> \n> Is fixed as well?\n\n\nYes. This is what I meant in the previous comment - \"special casing on `config*` targets\"",
    "created_at": "2020-11-26T18:32:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613911",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Replying to [comment:17 gh-tobiasdiez]:
> Thanks! Looks good to me, as far as I understand the changes.
> 
> Just to make sure:
> > Make tox -e local-sudo-standard -- config.status stop after configure

> 
> Is fixed as well?


Yes. This is what I meant in the previous comment - "special casing on `config*` targets"



---

archive/issue_comments_613912.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 mkoeppe]:\n> Replying to [comment:17 gh-tobiasdiez]:\n> > Thanks! Looks good to me, as far as I understand the changes.\n> > \n> > Just to make sure:\n> > > Make tox -e local-sudo-standard -- config.status stop after configure\n\n> > \n> > Is fixed as well?\n\n> \n> Yes. This is what I meant in the previous comment - \"special casing on `config*` targets\"\n\n\nOk, then is good! Me with my limited bash knowledge thought that the final `make` that builds the sage packages is still invoked even though `-- config.status` is specified.",
    "created_at": "2020-11-26T20:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613912",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:19'></a>Replying to [comment:18 mkoeppe]:
> Replying to [comment:17 gh-tobiasdiez]:
> > Thanks! Looks good to me, as far as I understand the changes.
> > 
> > Just to make sure:
> > > Make tox -e local-sudo-standard -- config.status stop after configure

> > 
> > Is fixed as well?

> 
> Yes. This is what I meant in the previous comment - "special casing on `config*` targets"


Ok, then is good! Me with my limited bash knowledge thought that the final `make` that builds the sage packages is still invoked even though `-- config.status` is specified.



---

archive/issue_comments_613913.json:
```json
{
    "body": "<a id='comment:20'></a>It's only invoked on nonempty `$TARGETS_OPTIONAL`",
    "created_at": "2020-11-26T21:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613913",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>It's only invoked on nonempty `$TARGETS_OPTIONAL`



---

archive/issue_comments_613914.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-02T20:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613914",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_613915.json:
```json
{
    "body": "<a id='comment:21'></a>Running `tox -e local-sudo-ubuntu-standard -- SAGE_NUM_THREADS=16 build` (in WLS) yields\n\n```\nReading package lists... Done\nE: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)\nE: Unable to lock directory /var/lib/apt/lists/\nW: Problem unlinking the file /var/cache/apt/pkgcache.bin - RemoveCaches (13: Permission denied)\nW: Problem unlinking the file /var/cache/apt/srcpkgcache.bin - RemoveCaches (13: Permission denied)\nERROR: InvocationError for command /usr/bin/bash -c '$(build/bin/sage-print-system-package-command debian update) #' (exited with code 100)\n```\nRunning the same command with sudo is successful, so I guess a `--sudo` is missing somewhere.\n\n\nMoreover, `./bootstrap` didn't run with following error:\n\n```\n/mnt/d/Programming/sage/src/bin/sage-env: line 133: cd: /mnt/d/Programming/Projects/sage: No such file or directory\nWarning: overwriting SAGE_ROOT environment variable:\nOld SAGE_ROOT=/mnt/d/Programming/Projects/sage\nNew SAGE_ROOT=\nError: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\nError setting environment variables by sourcing '/mnt/d/Programming/sage/src/bin/sage-env';\npossibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n```\nuntil I deleted src/bin/sage-env manually. And the root version `sudo tox -e local-root-ubuntu-standard -- SAGE_NUM_THREADS=10 build` yields\n\n```\nlocal-root-ubuntu-standard run-test: commands[2] | bash -c 'PACKAGES=$(build/bin/sage-get-system-packages debian $(PATH=build/bin:$PATH build/bin/sage-package list --has-file=spkg-configure.m4 :standard:) _bootstrap); $(build/bin/sage-print-system-package-command debian  --yes --no-install-recommends install $PACKAGES) || [ \"$IGNORE_MISSING_SYSTEM_PACKAGES\" = yes ] && echo \"(ignoring errors)\" '\n/usr/bin/bash: DEBIAN_FRONTEND=noninteractive: command not found\nERROR: InvocationError for command /usr/bin/bash -c 'PACKAGES=$(build/bin/sage-get-system-packages debian $(PATH=build/bin:$PATH build/bin/sage-package list --has-file=spkg-configure.m4 :standard:) _bootstrap); $(build/bin/sage-print-system-package-command debian  --yes --no-install-recommends install $PACKAGES) || [ \"$IGNORE_MISSING_SYSTEM_PACKAGES\" = yes ] && echo \"(ignoring errors)\" ' (exited with code 1)\n```",
    "created_at": "2020-12-02T20:41:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613915",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:21'></a>Running `tox -e local-sudo-ubuntu-standard -- SAGE_NUM_THREADS=16 build` (in WLS) yields

```
Reading package lists... Done
E: Could not open lock file /var/lib/apt/lists/lock - open (13: Permission denied)
E: Unable to lock directory /var/lib/apt/lists/
W: Problem unlinking the file /var/cache/apt/pkgcache.bin - RemoveCaches (13: Permission denied)
W: Problem unlinking the file /var/cache/apt/srcpkgcache.bin - RemoveCaches (13: Permission denied)
ERROR: InvocationError for command /usr/bin/bash -c '$(build/bin/sage-print-system-package-command debian update) #' (exited with code 100)
```
Running the same command with sudo is successful, so I guess a `--sudo` is missing somewhere.


Moreover, `./bootstrap` didn't run with following error:

```
/mnt/d/Programming/sage/src/bin/sage-env: line 133: cd: /mnt/d/Programming/Projects/sage: No such file or directory
Warning: overwriting SAGE_ROOT environment variable:
Old SAGE_ROOT=/mnt/d/Programming/Projects/sage
New SAGE_ROOT=
Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
Error setting environment variables by sourcing '/mnt/d/Programming/sage/src/bin/sage-env';
possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
```
until I deleted src/bin/sage-env manually. And the root version `sudo tox -e local-root-ubuntu-standard -- SAGE_NUM_THREADS=10 build` yields

```
local-root-ubuntu-standard run-test: commands[2] | bash -c 'PACKAGES=$(build/bin/sage-get-system-packages debian $(PATH=build/bin:$PATH build/bin/sage-package list --has-file=spkg-configure.m4 :standard:) _bootstrap); $(build/bin/sage-print-system-package-command debian  --yes --no-install-recommends install $PACKAGES) || [ "$IGNORE_MISSING_SYSTEM_PACKAGES" = yes ] && echo "(ignoring errors)" '
/usr/bin/bash: DEBIAN_FRONTEND=noninteractive: command not found
ERROR: InvocationError for command /usr/bin/bash -c 'PACKAGES=$(build/bin/sage-get-system-packages debian $(PATH=build/bin:$PATH build/bin/sage-package list --has-file=spkg-configure.m4 :standard:) _bootstrap); $(build/bin/sage-print-system-package-command debian  --yes --no-install-recommends install $PACKAGES) || [ "$IGNORE_MISSING_SYSTEM_PACKAGES" = yes ] && echo "(ignoring errors)" ' (exited with code 1)
```



---

archive/issue_comments_613916.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-02T21:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613917.json:
```json
{
    "body": "Changing commit from \"e959873490b161ab53e0400d32612401e9db2d0c\" to \"27368b1bc6e9ed5a117005674025747af78b4227\"",
    "created_at": "2020-12-02T21:48:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e959873490b161ab53e0400d32612401e9db2d0c" to "27368b1bc6e9ed5a117005674025747af78b4227"



---

archive/issue_comments_613918.json:
```json
{
    "body": "Changing dependencies from \"#30923, #29124\" to \"#30923, #29124, #22731\"",
    "created_at": "2020-12-03T01:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613918",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30923, #29124" to "#30923, #29124, #22731"



---

archive/issue_comments_613919.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:21 gh-tobiasdiez]:\n> Moreover, `./bootstrap` didn't run with following error:\n> \n> ```\n> /mnt/d/Programming/sage/src/bin/sage-env: line 133: cd: /mnt/d/Programming/Projects/sage: No such file or directory\n> Warning: overwriting SAGE_ROOT environment variable:\n> Old SAGE_ROOT=/mnt/d/Programming/Projects/sage\n> New SAGE_ROOT=\n> Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\n> Error setting environment variables by sourcing '/mnt/d/Programming/sage/src/bin/sage-env';\n> possibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n> ```\n> until I deleted src/bin/sage-env manually.\n\n\nThis is fixed by #22731, I think. I'll merge it",
    "created_at": "2020-12-03T01:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613919",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>Replying to [comment:21 gh-tobiasdiez]:
> Moreover, `./bootstrap` didn't run with following error:
> 
> ```
> /mnt/d/Programming/sage/src/bin/sage-env: line 133: cd: /mnt/d/Programming/Projects/sage: No such file or directory
> Warning: overwriting SAGE_ROOT environment variable:
> Old SAGE_ROOT=/mnt/d/Programming/Projects/sage
> New SAGE_ROOT=
> Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
> Error setting environment variables by sourcing '/mnt/d/Programming/sage/src/bin/sage-env';
> possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
> ```
> until I deleted src/bin/sage-env manually.


This is fixed by #22731, I think. I'll merge it



---

archive/issue_comments_613920.json:
```json
{
    "body": "Changing commit from \"27368b1bc6e9ed5a117005674025747af78b4227\" to \"7216c677975a520343df6ab9dad5fdf0fc09cfcc\"",
    "created_at": "2020-12-03T01:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613920",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "27368b1bc6e9ed5a117005674025747af78b4227" to "7216c677975a520343df6ab9dad5fdf0fc09cfcc"



---

archive/issue_comments_613921.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-03T01:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613921",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613922.json:
```json
{
    "body": "Changing commit from \"7216c677975a520343df6ab9dad5fdf0fc09cfcc\" to \"1c2dfc62c731c586d569c3e9eae6cd806c25a960\"",
    "created_at": "2020-12-03T01:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7216c677975a520343df6ab9dad5fdf0fc09cfcc" to "1c2dfc62c731c586d569c3e9eae6cd806c25a960"



---

archive/issue_comments_613923.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-03T01:14:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613923",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613924.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-03T01:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613924",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_613925.json:
```json
{
    "body": "Changing commit from \"1c2dfc62c731c586d569c3e9eae6cd806c25a960\" to \"3c7e5c482e1c54ba140c3d134ebfc909bd943a3d\"",
    "created_at": "2020-12-06T21:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613925",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1c2dfc62c731c586d569c3e9eae6cd806c25a960" to "3c7e5c482e1c54ba140c3d134ebfc909bd943a3d"



---

archive/issue_comments_613926.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-12-06T21:49:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613926",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_613927.json:
```json
{
    "body": "<a id='comment:28'></a>Rebased on top of 9.3.beta3 and rebased #29124",
    "created_at": "2020-12-06T21:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613927",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>Rebased on top of 9.3.beta3 and rebased #29124



---

archive/issue_comments_613928.json:
```json
{
    "body": "Changing dependencies from \"#30923, #29124, #22731\" to \"#29124\"",
    "created_at": "2020-12-06T21:49:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613928",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30923, #29124, #22731" to "#29124"



---

archive/issue_comments_613929.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-10T06:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613929",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613930.json:
```json
{
    "body": "Changing commit from \"3c7e5c482e1c54ba140c3d134ebfc909bd943a3d\" to \"f7ff30c92e59308d84377411ea4edd9173c4cd75\"",
    "created_at": "2020-12-10T06:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613930",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3c7e5c482e1c54ba140c3d134ebfc909bd943a3d" to "f7ff30c92e59308d84377411ea4edd9173c4cd75"



---

archive/issue_comments_613931.json:
```json
{
    "body": "Changing commit from \"f7ff30c92e59308d84377411ea4edd9173c4cd75\" to \"e9ca2c1d848708c0a626bc412844043b005c985a\"",
    "created_at": "2020-12-16T23:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613931",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f7ff30c92e59308d84377411ea4edd9173c4cd75" to "e9ca2c1d848708c0a626bc412844043b005c985a"



---

archive/issue_comments_613932.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-16T23:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613932",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613933.json:
```json
{
    "body": "<a id='comment:31'></a>Merged newest version of #29124. Still needs review",
    "created_at": "2020-12-16T23:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613933",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>Merged newest version of #29124. Still needs review



---

archive/issue_comments_613934.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-12-29T00:16:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613934",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_613935.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-12-29T19:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613935",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_613936.json:
```json
{
    "body": "Changing commit from \"e9ca2c1d848708c0a626bc412844043b005c985a\" to \"ab191339dfa275b3466f530a59268c756f5d1b05\"",
    "created_at": "2020-12-29T19:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613936",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e9ca2c1d848708c0a626bc412844043b005c985a" to "ab191339dfa275b3466f530a59268c756f5d1b05"



---

archive/issue_comments_613937.json:
```json
{
    "body": "<a id='comment:34'></a>Merged newest #29124, needs review",
    "created_at": "2020-12-29T19:13:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613937",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Merged newest #29124, needs review



---

archive/issue_comments_613938.json:
```json
{
    "body": "<a id='comment:35'></a>Let's get this in please (dependency of #31064 and #31099)",
    "created_at": "2021-01-06T19:14:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613938",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Let's get this in please (dependency of #31064 and #31099)



---

archive/issue_comments_613939.json:
```json
{
    "body": "<a id='comment:36'></a>I think #29124 isn't merged completely.",
    "created_at": "2021-01-06T20:04:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613939",
    "user": "https://github.com/kliem"
}
```

<a id='comment:36'></a>I think #29124 isn't merged completely.



---

archive/issue_comments_613940.json:
```json
{
    "body": "<a id='comment:37'></a>What does\n\n```diff\n+    local:             case \"{posargs:}\" in \\\n+    local:                 config*) ;; \\\n+    local:                 *)       make -k V=0 base-toolchain ;; \\\n+    local:             esac && \\\n-    local:                     make -k V=0 base-toolchain && \\\n```\n\ndo? (That is not the diff, but I think morally it is.)",
    "created_at": "2021-01-06T20:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613940",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>What does

```diff
+    local:             case "{posargs:}" in \
+    local:                 config*) ;; \
+    local:                 *)       make -k V=0 base-toolchain ;; \
+    local:             esac && \
-    local:                     make -k V=0 base-toolchain && \
```

do? (That is not the diff, but I think morally it is.)



---

archive/issue_comments_613941.json:
```json
{
    "body": "<a id='comment:38'></a>It implements the last bullet point of the ticket description: \nWhen something like `config.status` is given as the target, `make base-toolchain` should not be run.",
    "created_at": "2021-01-06T20:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613941",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:38'></a>It implements the last bullet point of the ticket description: 
When something like `config.status` is given as the target, `make base-toolchain` should not be run.



---

archive/issue_comments_613942.json:
```json
{
    "body": "<a id='comment:39'></a>Thanks. But does it stop then or are the other things still run?:\n\n```diff\n+    local:             make -k V=0 SAGE_SPKG=\"sage-spkg -y -o\" SAGE_CHECK=warn SAGE_CHECK_PACKAGES=\"!cython,!r,!python3,!nose,!gap,!cysignals,!linbox,!git,!ppl,!cmake,!networkx,!symengine_py\" {env:TARGETS_PRE:} {posargs:build} && \\\n+    local:             ([ -z \"{env:TARGETS_OPTIONAL:}\" ] || make -k V=0 SAGE_SPKG=\"sage-spkg -y -o\" SAGE_CHECK=warn SAGE_CHECK_PACKAGES=\"!cython,!r,!python3,!nose,!gap,!cysignals,!linbox,!git,!ppl,!cmake\" {env:TARGETS_OPTIONAL:} || echo \"(error ignored)\" ) '\n }}}",
    "created_at": "2021-01-06T20:43:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613942",
    "user": "https://github.com/kliem"
}
```

<a id='comment:39'></a>Thanks. But does it stop then or are the other things still run?:

```diff
+    local:             make -k V=0 SAGE_SPKG="sage-spkg -y -o" SAGE_CHECK=warn SAGE_CHECK_PACKAGES="!cython,!r,!python3,!nose,!gap,!cysignals,!linbox,!git,!ppl,!cmake,!networkx,!symengine_py" {env:TARGETS_PRE:} {posargs:build} && \
+    local:             ([ -z "{env:TARGETS_OPTIONAL:}" ] || make -k V=0 SAGE_SPKG="sage-spkg -y -o" SAGE_CHECK=warn SAGE_CHECK_PACKAGES="!cython,!r,!python3,!nose,!gap,!cysignals,!linbox,!git,!ppl,!cmake" {env:TARGETS_OPTIONAL:} || echo "(error ignored)" ) '
 }}}



---

archive/issue_comments_613943.json:
```json
{
    "body": "<a id='comment:40'></a>I have reworded the ticket description to clarify it.",
    "created_at": "2021-01-06T21:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613943",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>I have reworded the ticket description to clarify it.



---

archive/issue_comments_613944.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n - Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)\n - Use `configure --enable-build-as-root` for `local-root`\n - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)\n-- Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)\n+- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).\n \n``````\n",
    "created_at": "2021-01-06T21:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613944",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 - Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)
 - Use `configure --enable-build-as-root` for `local-root`
 - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)
-- Make `tox -e local-sudo-standard -- config.status` stop after `configure` (and don't run `make`)
+- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).
 
``````




---

archive/issue_comments_613945.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,5 +2,5 @@\n - Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)\n - Use `configure --enable-build-as-root` for `local-root`\n - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)\n-- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).\n+- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of also invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).\n \n``````\n",
    "created_at": "2021-01-06T21:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613945",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,5 +2,5 @@
 - Provide alternative environments `local-root...`, which assume that we are already root, removing the `sudo` requirement (which is not installed on github actions and not needed there)
 - Use `configure --enable-build-as-root` for `local-root`
 - Add `DEBIAN_FRONTEND: noninteractive` to the installation of packages via `apt get` (otherwise installation of `tzdata` blocks CI)
-- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).
+- Make `tox -e local-sudo-standard -- config.status` only build `config.status` instead of also invoking `make base-toolchain` (which is run as the required first step of the Sage build system before something like `make numpy` can be run; see #30721).
 
``````




---

archive/issue_comments_613946.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-07T06:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613946",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_613947.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jonathan Kliem\"",
    "created_at": "2021-01-07T06:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613947",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "" to "Jonathan Kliem"



---

archive/issue_comments_613948.json:
```json
{
    "body": "<a id='comment:42'></a>LGTM.",
    "created_at": "2021-01-07T06:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613948",
    "user": "https://github.com/kliem"
}
```

<a id='comment:42'></a>LGTM.



---

archive/issue_comments_613949.json:
```json
{
    "body": "<a id='comment:43'></a>Thank you!",
    "created_at": "2021-01-07T06:36:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613949",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Thank you!



---

archive/issue_events_080815.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T10:38:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30944#event-80815"
}
```



---

archive/issue_comments_613950.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-24T10:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613950",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_613951.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/tox__improve_local_sudo_ubuntu_standard\" to \"ab191339dfa275b3466f530a59268c756f5d1b05\"",
    "created_at": "2021-01-24T10:38:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30944#issuecomment-613951",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/tox__improve_local_sudo_ubuntu_standard" to "ab191339dfa275b3466f530a59268c756f5d1b05"
