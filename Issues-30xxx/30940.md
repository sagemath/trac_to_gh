# Issue 30940: src/bin/sage-list-packages: Make it work if SAGE_ROOT is not available

archive/issues_030703.json:
```json
{
    "body": "In this case we can still retrieve the installed versions from the installation records `$SAGE_LOCAL/var/lib/sage/installed` (in the case of the sage distribution), but we will not be able to provide all details such as `remote_version`.\n\n\n\nCC:  @videlec @tobiasdiez @seblabbe @tobihan @jhpalmieri @fchapoton @kliem @slel\n\nKeywords: sd111\n\nBranch/Commit: e9a7572a37b228f4a74c35f680190e6b237f48d8\n\nReviewer: Tobias Diez, Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30940\n\n",
    "closed_at": "2021-01-03T12:15:46Z",
    "created_at": "2020-11-21T01:08:57Z",
    "labels": [
        "component: build",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "src/bin/sage-list-packages: Make it work if SAGE_ROOT is not available",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30940",
    "user": "https://github.com/mkoeppe"
}
```
In this case we can still retrieve the installed versions from the installation records `$SAGE_LOCAL/var/lib/sage/installed` (in the case of the sage distribution), but we will not be able to provide all details such as `remote_version`.



CC:  @videlec @tobiasdiez @seblabbe @tobihan @jhpalmieri @fchapoton @kliem @slel

Keywords: sd111

Branch/Commit: e9a7572a37b228f4a74c35f680190e6b237f48d8

Reviewer: Tobias Diez, Jonathan Kliem

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30940





---

archive/issue_comments_613815.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available\"",
    "created_at": "2020-11-21T01:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613815",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available"



---

archive/issue_comments_613816.json:
```json
{
    "body": "Changing commit from \"\" to \"3cc5edf85cb2c074ad12029637e09d799d7bde6f\"",
    "created_at": "2020-11-21T01:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613816",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "3cc5edf85cb2c074ad12029637e09d799d7bde6f"



---

archive/issue_comments_613817.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-11-21T01:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613817",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_613818.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-11-21T01:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613818",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_613819.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-21T01:14:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613819",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_613820.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Tobias Diez\"",
    "created_at": "2020-12-05T19:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613820",
    "user": "https://github.com/tobiasdiez"
}
```

Changing reviewer from "" to "Tobias Diez"



---

archive/issue_comments_613821.json:
```json
{
    "body": "<a id='comment:6'></a>I think the previous code was easier to understand: if SAGE_PKGS is None, we don't need to go through the following for loop. But now one has to understand that the iteration is over an empty list. Better to exit the method early. \n\n```\n-    if not SAGE_PKGS:\n-        return {}\n-\n-    try:\n-        lp = os.listdir(SAGE_PKGS)\n-    except FileNotFoundError:\n-        return {}\n+    if SAGE_PKGS:\n+        try:\n+            lp = os.listdir(SAGE_PKGS)\n+        except FileNotFoundError:\n+            pass\n     for ...\n```\n\nMoreover, I was wondering if the name normalization is ok as it changes the output of a public facing method and thus might break user scripts.\n\nOtherwise it looks good to me.",
    "created_at": "2020-12-05T19:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613821",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:6'></a>I think the previous code was easier to understand: if SAGE_PKGS is None, we don't need to go through the following for loop. But now one has to understand that the iteration is over an empty list. Better to exit the method early. 

```
-    if not SAGE_PKGS:
-        return {}
-
-    try:
-        lp = os.listdir(SAGE_PKGS)
-    except FileNotFoundError:
-        return {}
+    if SAGE_PKGS:
+        try:
+            lp = os.listdir(SAGE_PKGS)
+        except FileNotFoundError:
+            pass
     for ...
```

Moreover, I was wondering if the name normalization is ok as it changes the output of a public facing method and thus might break user scripts.

Otherwise it looks good to me.



---

archive/issue_comments_613822.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-12-05T19:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613822",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_613823.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [gh-tobiasdiez](#comment%3A6):\n> I was wondering if the name normalization is ok as it changes the output of a public facing method and thus might break user scripts.\n\n\nGood point, I'll make this normalization optional",
    "created_at": "2020-12-05T19:29:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613823",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Replying to [gh-tobiasdiez](#comment%3A6):
> I was wondering if the name normalization is ok as it changes the output of a public facing method and thus might break user scripts.


Good point, I'll make this normalization optional



---

archive/issue_comments_613824.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-06T02:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613824",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613825.json:
```json
{
    "body": "Changing commit from \"3cc5edf85cb2c074ad12029637e09d799d7bde6f\" to \"7f80e3e91f176d1650dc2f3bbb7a25eef366e068\"",
    "created_at": "2020-12-06T02:25:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613825",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3cc5edf85cb2c074ad12029637e09d799d7bde6f" to "7f80e3e91f176d1650dc2f3bbb7a25eef366e068"



---

archive/issue_comments_613826.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [gh-tobiasdiez](#comment%3A6):\n> I think the previous code was easier to understand: if SAGE_PKGS is None, we don't need to go through the following for loop. But now one has to understand that the iteration is over an empty list. Better to exit the method early. \n\n\nThanks, done.",
    "created_at": "2020-12-06T02:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613826",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Replying to [gh-tobiasdiez](#comment%3A6):
> I think the previous code was easier to understand: if SAGE_PKGS is None, we don't need to go through the following for loop. But now one has to understand that the iteration is over an empty list. Better to exit the method early. 


Thanks, done.



---

archive/issue_comments_613827.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-06T02:26:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613827",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_613828.json:
```json
{
    "body": "<a id='comment:10'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613828",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_613829.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613829",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_613830.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-06T22:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613830",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_613831.json:
```json
{
    "body": "<a id='comment:11'></a>Code-wise it looks good to me now, thanks for the update!",
    "created_at": "2020-12-06T22:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613831",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:11'></a>Code-wise it looks good to me now, thanks for the update!



---

archive/issue_comments_613832.json:
```json
{
    "body": "Changing commit from \"7f80e3e91f176d1650dc2f3bbb7a25eef366e068\" to \"78bae1ff5356529af4246bc3d33162a6045dde37\"",
    "created_at": "2020-12-07T19:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7f80e3e91f176d1650dc2f3bbb7a25eef366e068" to "78bae1ff5356529af4246bc3d33162a6045dde37"



---

archive/issue_comments_613833.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-12-07T19:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613833",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_613834.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-12-07T19:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613834",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_613835.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-07T19:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613835",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_613836.json:
```json
{
    "body": "<a id='comment:13'></a>Merged current beta",
    "created_at": "2020-12-07T19:12:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613836",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Merged current beta



---

archive/issue_comments_613837.json:
```json
{
    "body": "<a id='comment:14'></a>\n```\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 384, in sage.misc.package.is_package_installed\nFailed example:\n    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.is_package_installed[3]>\", line 2, in <module>\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\n    AssertionError: pip package is installed: zope_interface\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 454, in sage.misc.package.standard_packages\nFailed example:\n    installed[0], installed[-1]  # optional - build\nExpected:\n    ('alabaster', 'zn_poly')\nGot:\n    ('alabaster', 'zope_interface')\n**********************************************************************\n```",
    "created_at": "2020-12-14T06:08:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613837",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
```
**********************************************************************
File "src/sage/misc/package.py", line 384, in sage.misc.package.is_package_installed
Failed example:
    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.package.is_package_installed[3]>", line 2, in <module>
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
    AssertionError: pip package is installed: zope_interface
**********************************************************************
File "src/sage/misc/package.py", line 454, in sage.misc.package.standard_packages
Failed example:
    installed[0], installed[-1]  # optional - build
Expected:
    ('alabaster', 'zn_poly')
Got:
    ('alabaster', 'zope_interface')
**********************************************************************
```



---

archive/issue_comments_613838.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-12-14T06:08:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613838",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_613839.json:
```json
{
    "body": "Changing dependencies from \"#30747\" to \"#30747, #30900\"",
    "created_at": "2020-12-14T17:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613839",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30747" to "#30747, #30900"



---

archive/issue_comments_613840.json:
```json
{
    "body": "Changing commit from \"78bae1ff5356529af4246bc3d33162a6045dde37\" to \"b4927e1574e6f856f5dda78b888713f0358b16da\"",
    "created_at": "2020-12-14T17:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613840",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "78bae1ff5356529af4246bc3d33162a6045dde37" to "b4927e1574e6f856f5dda78b888713f0358b16da"



---

archive/issue_comments_613841.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-14T17:36:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613841",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613842.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-12-14T17:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613842",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_613843.json:
```json
{
    "body": "Changing commit from \"b4927e1574e6f856f5dda78b888713f0358b16da\" to \"78ff9d580f5f0c1396e1f8a5421858170999957a\"",
    "created_at": "2020-12-16T23:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613843",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b4927e1574e6f856f5dda78b888713f0358b16da" to "78ff9d580f5f0c1396e1f8a5421858170999957a"



---

archive/issue_comments_613844.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-16T23:49:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613844",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613845.json:
```json
{
    "body": "<a id='comment:21'></a>Let's please get this ticket in.",
    "created_at": "2020-12-20T20:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613845",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Let's please get this ticket in.



---

archive/issue_comments_613846.json:
```json
{
    "body": "Changing reviewer from \"Tobias Diez\" to \"Tobias Diez, ...\"",
    "created_at": "2020-12-26T19:15:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613846",
    "user": "https://github.com/tobiasdiez"
}
```

Changing reviewer from "Tobias Diez" to "Tobias Diez, ..."



---

archive/issue_comments_613847.json:
```json
{
    "body": "<a id='comment:25'></a>I would expect an empty line before and after\n\n```\n        def normalize(name):\n            if normalization is None:\n                return name\n            elif normalization == 'spkg':\n                return name.lower().replace('-', '_').replace('.', '_')\n            else:\n                raise NotImplementedError(f'normalization {normalization} is not implemented')\n```",
    "created_at": "2020-12-28T09:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613847",
    "user": "https://github.com/kliem"
}
```

<a id='comment:25'></a>I would expect an empty line before and after

```
        def normalize(name):
            if normalization is None:
                return name
            elif normalization == 'spkg':
                return name.lower().replace('-', '_').replace('.', '_')
            else:
                raise NotImplementedError(f'normalization {normalization} is not implemented')
```



---

archive/issue_comments_613848.json:
```json
{
    "body": "<a id='comment:26'></a>Why do we do it as a string here?\n\n```\npkg['remote_version'] = 'none'\n```",
    "created_at": "2020-12-28T10:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613848",
    "user": "https://github.com/kliem"
}
```

<a id='comment:26'></a>Why do we do it as a string here?

```
pkg['remote_version'] = 'none'
```



---

archive/issue_comments_613849.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [gh-kliem](#comment%3A26):\n> Why do we do it as a string here?\n> \n> ```\n> pkg['remote_version'] = 'none'\n> ```\n\nThis matches what `m4/sage_spkg_collect.m4` reports as the version of a package without `package-version.txt`",
    "created_at": "2020-12-29T00:06:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613849",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Replying to [gh-kliem](#comment%3A26):
> Why do we do it as a string here?
> 
> ```
> pkg['remote_version'] = 'none'
> ```

This matches what `m4/sage_spkg_collect.m4` reports as the version of a package without `package-version.txt`



---

archive/issue_comments_613850.json:
```json
{
    "body": "Changing commit from \"78ff9d580f5f0c1396e1f8a5421858170999957a\" to \"e9a7572a37b228f4a74c35f680190e6b237f48d8\"",
    "created_at": "2020-12-29T00:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613850",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "78ff9d580f5f0c1396e1f8a5421858170999957a" to "e9a7572a37b228f4a74c35f680190e6b237f48d8"



---

archive/issue_comments_613851.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-29T00:07:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613851",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_613852.json:
```json
{
    "body": "Changing dependencies from \"#30747, #30900\" to \"\"",
    "created_at": "2020-12-29T00:07:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613852",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30747, #30900" to ""



---

archive/issue_comments_613853.json:
```json
{
    "body": "Changing priority from minor to critical.",
    "created_at": "2020-12-29T00:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613853",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from minor to critical.



---

archive/issue_comments_613854.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-29T08:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613854",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_613855.json:
```json
{
    "body": "<a id='comment:31'></a>LGTM.",
    "created_at": "2020-12-29T08:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613855",
    "user": "https://github.com/kliem"
}
```

<a id='comment:31'></a>LGTM.



---

archive/issue_comments_613856.json:
```json
{
    "body": "Changing reviewer from \"Tobias Diez, ...\" to \"Tobias Diez, Jonathan Kliem\"",
    "created_at": "2020-12-29T08:45:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613856",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "Tobias Diez, ..." to "Tobias Diez, Jonathan Kliem"



---

archive/issue_comments_613857.json:
```json
{
    "body": "<a id='comment:32'></a>Thanks!",
    "created_at": "2020-12-29T18:21:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613857",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Thanks!



---

archive/issue_events_080803.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-03T12:15:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30940#event-80803"
}
```



---

archive/issue_comments_613858.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-03T12:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613858",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_613859.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available\" to \"e9a7572a37b228f4a74c35f680190e6b237f48d8\"",
    "created_at": "2021-01-03T12:15:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30940#issuecomment-613859",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available" to "e9a7572a37b228f4a74c35f680190e6b237f48d8"
