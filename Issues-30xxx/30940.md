# Issue 30940: src/bin/sage-list-packages: Make it work if SAGE_ROOT is not available

archive/issues_030703.json:
```json
{
    "assignees": [],
    "body": "In this case we can still retrieve the installed versions from the installation records `$SAGE_LOCAL/var/lib/sage/installed` (in the case of the sage distribution), but we will not be able to provide all details such as `remote_version`.\n\n\n\nCC:  @videlec @tobiasdiez @seblabbe @tobihan @jhpalmieri @fchapoton @kliem @slel\n\nKeywords: **sd111**\n\nBranch/Commit: **[e9a7572](https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8)**\n\nReviewer: **Tobias Diez, Jonathan Kliem**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30940_\n\n",
    "closed_at": "2021-01-03T12:15:46Z",
    "created_at": "2020-11-21T01:08:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "src/bin/sage-list-packages: Make it work if SAGE_ROOT is not available",
    "type": "issue",
    "updated_at": "2021-01-03T12:15:46Z",
    "url": "https://github.com/sagemath/sage/issues/30940",
    "user": "https://github.com/mkoeppe"
}
```
In this case we can still retrieve the installed versions from the installation records `$SAGE_LOCAL/var/lib/sage/installed` (in the case of the sage distribution), but we will not be able to provide all details such as `remote_version`.



CC:  @videlec @tobiasdiez @seblabbe @tobihan @jhpalmieri @fchapoton @kliem @slel

Keywords: **sd111**

Branch/Commit: **[e9a7572](https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8)**

Reviewer: **Tobias Diez, Jonathan Kliem**

Author: **Matthias Koeppe**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/30940_





---

archive/issue_events_426731.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-21T01:08:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426731"
}
```



---

archive/issue_events_426732.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-21T01:08:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426732"
}
```



---

archive/issue_events_426733.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-21T01:08:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426733"
}
```



---

archive/issue_events_426734.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-21T01:08:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426734"
}
```



---

archive/issue_comments_495815.json:
```json
{
    "body": "Branch: **[u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available)**",
    "created_at": "2020-11-21T01:12:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495815",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available)**



---

archive/issue_comments_495816.json:
```json
{
    "body": "Commit: **[3cc5edf](https://github.com/sagemath/sagetrac-mirror/commit/3cc5edf85cb2c074ad12029637e09d799d7bde6f)**",
    "created_at": "2020-11-21T01:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495816",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[3cc5edf](https://github.com/sagemath/sagetrac-mirror/commit/3cc5edf85cb2c074ad12029637e09d799d7bde6f)**



---

archive/issue_comments_495817.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ccc15734fb09a3db16b11d960de9dfc3075fd3c\">8ccc157</a></td><td><code>sage.misc.package: Deprecate standard_packages, optional_packages, experimental_packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c029fdf8fcb605928655f309f6b569813ffdebb6\">c029fdf</a></td><td><code>sage.misc.package.pip_installed_packages: Normalize package names</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/436cc5141b0c58895d3e8b4571b3044f5e609835\">436cc51</a></td><td><code>sage.misc.package.list_packages: Merge package lists from installation records and build/pkgs</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b577ddcf08de64dc8e8c995b6a1b7f6bcda348f8\">b577ddc</a></td><td><code>sage.misc.package.installed_packages: Omit .dummy and other dot files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cc5edf85cb2c074ad12029637e09d799d7bde6f\">3cc5edf</a></td><td><code>sage.misc.package.is_package_installed: Remove outdated code</code></td></tr></table>\n",
    "created_at": "2020-11-21T01:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495817",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ccc15734fb09a3db16b11d960de9dfc3075fd3c">8ccc157</a></td><td><code>sage.misc.package: Deprecate standard_packages, optional_packages, experimental_packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c029fdf8fcb605928655f309f6b569813ffdebb6">c029fdf</a></td><td><code>sage.misc.package.pip_installed_packages: Normalize package names</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/436cc5141b0c58895d3e8b4571b3044f5e609835">436cc51</a></td><td><code>sage.misc.package.list_packages: Merge package lists from installation records and build/pkgs</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b577ddcf08de64dc8e8c995b6a1b7f6bcda348f8">b577ddc</a></td><td><code>sage.misc.package.installed_packages: Omit .dummy and other dot files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cc5edf85cb2c074ad12029637e09d799d7bde6f">3cc5edf</a></td><td><code>sage.misc.package.is_package_installed: Remove outdated code</code></td></tr></table>




---

archive/issue_comments_495818.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-11-21T01:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495818",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_426735.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-21T01:14:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426735"
}
```



---

archive/issue_comments_495819.json:
```json
{
    "body": "Reviewer: **Tobias Diez**",
    "created_at": "2020-12-05T19:17:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495819",
    "user": "https://github.com/tobiasdiez"
}
```

Reviewer: **Tobias Diez**



---

archive/issue_comments_495820.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think the previous code was easier to understand: if SAGE_PKGS is None, we don't need to go through the following for loop. But now one has to understand that the iteration is over an empty list. Better to exit the method early. \n\n```\n-    if not SAGE_PKGS:\n-        return {}\n-\n-    try:\n-        lp = os.listdir(SAGE_PKGS)\n-    except FileNotFoundError:\n-        return {}\n+    if SAGE_PKGS:\n+        try:\n+            lp = os.listdir(SAGE_PKGS)\n+        except FileNotFoundError:\n+            pass\n     for ...\n```\n\nMoreover, I was wondering if the name normalization is ok as it changes the output of a public facing method and thus might break user scripts.\n\nOtherwise it looks good to me.",
    "created_at": "2020-12-05T19:17:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495820",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:6" align="right">comment:6</div>

I think the previous code was easier to understand: if SAGE_PKGS is None, we don't need to go through the following for loop. But now one has to understand that the iteration is over an empty list. Better to exit the method early. 

```
-    if not SAGE_PKGS:
-        return {}
-
-    try:
-        lp = os.listdir(SAGE_PKGS)
-    except FileNotFoundError:
-        return {}
+    if SAGE_PKGS:
+        try:
+            lp = os.listdir(SAGE_PKGS)
+        except FileNotFoundError:
+            pass
     for ...
```

Moreover, I was wondering if the name normalization is ok as it changes the output of a public facing method and thus might break user scripts.

Otherwise it looks good to me.



---

archive/issue_events_426736.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T19:17:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426736"
}
```



---

archive/issue_events_426737.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T19:17:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426737"
}
```



---

archive/issue_comments_495821.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@tobiasdiez](#comment:6):\n> I was wondering if the name normalization is ok as it changes the output of a public facing method and thus might break user scripts.\n\nGood point, I'll make this normalization optional",
    "created_at": "2020-12-05T19:29:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495821",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@tobiasdiez](#comment:6):
> I was wondering if the name normalization is ok as it changes the output of a public facing method and thus might break user scripts.

Good point, I'll make this normalization optional



---

archive/issue_comments_495822.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97942e3324985be8d273cd68b3b2b311209585d3\">97942e3</a></td><td><code>sage.misc.package.pip_installed_packages: Only normalize when optional arg normalization='spkg'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/670618283fcaccba3739bce5d7746bb383882a0f\">6706182</a></td><td><code>sage.misc.package.list_packages: Return early if SAGE_PKGS is not available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9258849ae24a3767fc0034a27a4bac7fbe26278f\">9258849</a></td><td><code>sage.misc.package.list_packages: Streamline handling of exclude_pip</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f80e3e91f176d1650dc2f3bbb7a25eef366e068\">7f80e3e</a></td><td><code>sage.misc.package.list_packages: Actually add new items to the list</code></td></tr></table>\n",
    "created_at": "2020-12-06T02:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495822",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97942e3324985be8d273cd68b3b2b311209585d3">97942e3</a></td><td><code>sage.misc.package.pip_installed_packages: Only normalize when optional arg normalization='spkg'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/670618283fcaccba3739bce5d7746bb383882a0f">6706182</a></td><td><code>sage.misc.package.list_packages: Return early if SAGE_PKGS is not available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9258849ae24a3767fc0034a27a4bac7fbe26278f">9258849</a></td><td><code>sage.misc.package.list_packages: Streamline handling of exclude_pip</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f80e3e91f176d1650dc2f3bbb7a25eef366e068">7f80e3e</a></td><td><code>sage.misc.package.list_packages: Actually add new items to the list</code></td></tr></table>




---

archive/issue_comments_495823.json:
```json
{
    "body": "Changed commit from **[3cc5edf](https://github.com/sagemath/sagetrac-mirror/commit/3cc5edf85cb2c074ad12029637e09d799d7bde6f)** to **[7f80e3e](https://github.com/sagemath/sagetrac-mirror/commit/7f80e3e91f176d1650dc2f3bbb7a25eef366e068)**",
    "created_at": "2020-12-06T02:25:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495823",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3cc5edf](https://github.com/sagemath/sagetrac-mirror/commit/3cc5edf85cb2c074ad12029637e09d799d7bde6f)** to **[7f80e3e](https://github.com/sagemath/sagetrac-mirror/commit/7f80e3e91f176d1650dc2f3bbb7a25eef366e068)**



---

archive/issue_comments_495824.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@tobiasdiez](#comment:6):\n> I think the previous code was easier to understand: if SAGE_PKGS is None, we don't need to go through the following for loop. But now one has to understand that the iteration is over an empty list. Better to exit the method early. \n\nThanks, done.",
    "created_at": "2020-12-06T02:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495824",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@tobiasdiez](#comment:6):
> I think the previous code was easier to understand: if SAGE_PKGS is None, we don't need to go through the following for loop. But now one has to understand that the iteration is over an empty list. Better to exit the method early. 

Thanks, done.



---

archive/issue_events_426738.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T02:26:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426738"
}
```



---

archive/issue_events_426739.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-06T02:26:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426739"
}
```



---

archive/issue_comments_495825.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495825",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_495826.json:
```json
{
    "body": "Changed keywords from none to **sd111**",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495826",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from none to **sd111**



---

archive/issue_events_426740.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-06T22:36:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426740"
}
```



---

archive/issue_events_426741.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-06T22:36:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426741"
}
```



---

archive/issue_comments_495827.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCode-wise it looks good to me now, thanks for the update!",
    "created_at": "2020-12-06T22:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495827",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:11" align="right">comment:11</div>

Code-wise it looks good to me now, thanks for the update!



---

archive/issue_comments_495828.json:
```json
{
    "body": "Changed commit from **[7f80e3e](https://github.com/sagemath/sagetrac-mirror/commit/7f80e3e91f176d1650dc2f3bbb7a25eef366e068)** to **[78bae1f](https://github.com/sagemath/sagetrac-mirror/commit/78bae1ff5356529af4246bc3d33162a6045dde37)**",
    "created_at": "2020-12-07T19:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495828",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7f80e3e](https://github.com/sagemath/sagetrac-mirror/commit/7f80e3e91f176d1650dc2f3bbb7a25eef366e068)** to **[78bae1f](https://github.com/sagemath/sagetrac-mirror/commit/78bae1ff5356529af4246bc3d33162a6045dde37)**



---

archive/issue_comments_495829.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78bae1ff5356529af4246bc3d33162a6045dde37\">78bae1f</a></td><td><code>Merge tag '9.3.beta3' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr></table>\n",
    "created_at": "2020-12-07T19:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495829",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78bae1ff5356529af4246bc3d33162a6045dde37">78bae1f</a></td><td><code>Merge tag '9.3.beta3' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr></table>




---

archive/issue_events_426742.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-07T19:12:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426742"
}
```



---

archive/issue_events_426743.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-07T19:12:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426743"
}
```



---

archive/issue_events_426744.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T19:12:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426744"
}
```



---

archive/issue_events_426745.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-07T19:12:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426745"
}
```



---

archive/issue_comments_495830.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nMerged current beta",
    "created_at": "2020-12-07T19:12:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495830",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Merged current beta



---

archive/issue_comments_495831.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n\n```\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 384, in sage.misc.package.is_package_installed\nFailed example:\n    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 714, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1133, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.misc.package.is_package_installed[3]>\", line 2, in <module>\n        assert not is_package_installed(pkg), \"pip package is installed: {}\".format(pkg)\n    AssertionError: pip package is installed: zope_interface\n**********************************************************************\nFile \"src/sage/misc/package.py\", line 454, in sage.misc.package.standard_packages\nFailed example:\n    installed[0], installed[-1]  # optional - build\nExpected:\n    ('alabaster', 'zn_poly')\nGot:\n    ('alabaster', 'zope_interface')\n**********************************************************************\n```",
    "created_at": "2020-12-14T06:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495831",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:14" align="right">comment:14</div>


```
**********************************************************************
File "src/sage/misc/package.py", line 384, in sage.misc.package.is_package_installed
Failed example:
    for pkg in list_packages(pkg_sources=('pip'), local=True):  # optional - build
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 714, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1133, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.misc.package.is_package_installed[3]>", line 2, in <module>
        assert not is_package_installed(pkg), "pip package is installed: {}".format(pkg)
    AssertionError: pip package is installed: zope_interface
**********************************************************************
File "src/sage/misc/package.py", line 454, in sage.misc.package.standard_packages
Failed example:
    installed[0], installed[-1]  # optional - build
Expected:
    ('alabaster', 'zn_poly')
Got:
    ('alabaster', 'zope_interface')
**********************************************************************
```



---

archive/issue_events_426746.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-14T06:08:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426746"
}
```



---

archive/issue_events_426747.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-14T06:08:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426747"
}
```



---

archive/issue_comments_495832.json:
```json
{
    "body": "Changed dependencies from **#30747** to **#30747, #30900**",
    "created_at": "2020-12-14T17:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495832",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30747** to **#30747, #30900**



---

archive/issue_comments_495833.json:
```json
{
    "body": "Changed commit from **[78bae1f](https://github.com/sagemath/sagetrac-mirror/commit/78bae1ff5356529af4246bc3d33162a6045dde37)** to **[b4927e1](https://github.com/sagemath/sagetrac-mirror/commit/b4927e1574e6f856f5dda78b888713f0358b16da)**",
    "created_at": "2020-12-14T17:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495833",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[78bae1f](https://github.com/sagemath/sagetrac-mirror/commit/78bae1ff5356529af4246bc3d33162a6045dde37)** to **[b4927e1](https://github.com/sagemath/sagetrac-mirror/commit/b4927e1574e6f856f5dda78b888713f0358b16da)**



---

archive/issue_comments_495834.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/945abb9a7dcee3ec36beeb5e288a6ea57900d828\">945abb9</a></td><td><code>build/pkgs/zope_interface: Remove</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c46e7e47421fb844b6701d318dcdbfaa8bc219cc\">c46e7e4</a></td><td><code>src/sage/misc/package.py: Remove zope_interface from doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3bf4ff336f194424137455156d1710fcff1eafea\">3bf4ff3</a></td><td><code>Merge branch 'u/isuruf/environment_yaml' of git://trac.sagemath.org/sage into t/30900/remove_last_traces_of_zope_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/24d79719e691fade5652a33b97ac17516a734b5c\">24d7971</a></td><td><code>build/pkgs/zope_interface/distros/conda.txt: Remove</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a50ddf88975086b14a49895e371477df00fd57b5\">a50ddf8</a></td><td><code>Merge branch 't/28745/environment_yaml' into t/30900/remove_last_traces_of_zope_interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cf5ee46cde574170859d9d8ce90abef990e7969\">3cf5ee4</a></td><td><code>Merge commit 'a50ddf88975086b14a49895e371477df00fd57b5' of git://trac.sagemath.org/sage into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4927e1574e6f856f5dda78b888713f0358b16da\">b4927e1</a></td><td><code>sage.misc.package: Remove/adjust non-robust doctests</code></td></tr></table>\n",
    "created_at": "2020-12-14T17:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495834",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/945abb9a7dcee3ec36beeb5e288a6ea57900d828">945abb9</a></td><td><code>build/pkgs/zope_interface: Remove</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c46e7e47421fb844b6701d318dcdbfaa8bc219cc">c46e7e4</a></td><td><code>src/sage/misc/package.py: Remove zope_interface from doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3bf4ff336f194424137455156d1710fcff1eafea">3bf4ff3</a></td><td><code>Merge branch 'u/isuruf/environment_yaml' of git://trac.sagemath.org/sage into t/30900/remove_last_traces_of_zope_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/24d79719e691fade5652a33b97ac17516a734b5c">24d7971</a></td><td><code>build/pkgs/zope_interface/distros/conda.txt: Remove</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a50ddf88975086b14a49895e371477df00fd57b5">a50ddf8</a></td><td><code>Merge branch 't/28745/environment_yaml' into t/30900/remove_last_traces_of_zope_interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cf5ee46cde574170859d9d8ce90abef990e7969">3cf5ee4</a></td><td><code>Merge commit 'a50ddf88975086b14a49895e371477df00fd57b5' of git://trac.sagemath.org/sage into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4927e1574e6f856f5dda78b888713f0358b16da">b4927e1</a></td><td><code>sage.misc.package: Remove/adjust non-robust doctests</code></td></tr></table>




---

archive/issue_events_426748.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-14T17:36:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426748"
}
```



---

archive/issue_events_426749.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-14T17:36:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426749"
}
```



---

archive/issue_comments_495835.json:
```json
{
    "body": "Changed commit from **[b4927e1](https://github.com/sagemath/sagetrac-mirror/commit/b4927e1574e6f856f5dda78b888713f0358b16da)** to **[78ff9d5](https://github.com/sagemath/sagetrac-mirror/commit/78ff9d580f5f0c1396e1f8a5421858170999957a)**",
    "created_at": "2020-12-16T23:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495835",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b4927e1](https://github.com/sagemath/sagetrac-mirror/commit/b4927e1574e6f856f5dda78b888713f0358b16da)** to **[78ff9d5](https://github.com/sagemath/sagetrac-mirror/commit/78ff9d580f5f0c1396e1f8a5421858170999957a)**



---

archive/issue_comments_495836.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5fe7522a2ad03b23553d696e7a941e9f4fa3271\">e5fe752</a></td><td><code>Merge tag '9.3.beta4' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/78ff9d580f5f0c1396e1f8a5421858170999957a\">78ff9d5</a></td><td><code>src/sage/misc/package.py: Add one more # optional - build</code></td></tr></table>\n",
    "created_at": "2020-12-16T23:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495836",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5fe7522a2ad03b23553d696e7a941e9f4fa3271">e5fe752</a></td><td><code>Merge tag '9.3.beta4' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/78ff9d580f5f0c1396e1f8a5421858170999957a">78ff9d5</a></td><td><code>src/sage/misc/package.py: Add one more # optional - build</code></td></tr></table>




---

archive/issue_comments_495837.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nLet's please get this ticket in.",
    "created_at": "2020-12-20T20:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495837",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

Let's please get this ticket in.



---

archive/issue_comments_495838.json:
```json
{
    "body": "Changed reviewer from **Tobias Diez** to **Tobias Diez, ...**",
    "created_at": "2020-12-26T19:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495838",
    "user": "https://github.com/tobiasdiez"
}
```

Changed reviewer from **Tobias Diez** to **Tobias Diez, ...**



---

archive/issue_comments_495839.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI would expect an empty line before and after\n\n```\n        def normalize(name):\n            if normalization is None:\n                return name\n            elif normalization == 'spkg':\n                return name.lower().replace('-', '_').replace('.', '_')\n            else:\n                raise NotImplementedError(f'normalization {normalization} is not implemented')\n```",
    "created_at": "2020-12-28T09:02:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495839",
    "user": "https://github.com/kliem"
}
```

<div id="comment:25" align="right">comment:25</div>

I would expect an empty line before and after

```
        def normalize(name):
            if normalization is None:
                return name
            elif normalization == 'spkg':
                return name.lower().replace('-', '_').replace('.', '_')
            else:
                raise NotImplementedError(f'normalization {normalization} is not implemented')
```



---

archive/issue_comments_495840.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nWhy do we do it as a string here?\n\n```\npkg['remote_version'] = 'none'\n```",
    "created_at": "2020-12-28T10:07:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495840",
    "user": "https://github.com/kliem"
}
```

<div id="comment:26" align="right">comment:26</div>

Why do we do it as a string here?

```
pkg['remote_version'] = 'none'
```



---

archive/issue_comments_495841.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@kliem](#comment:26):\n> Why do we do it as a string here?\n> \n> ```\n> pkg['remote_version'] = 'none'\n> ```\n\nThis matches what `m4/sage_spkg_collect.m4` reports as the version of a package without `package-version.txt`",
    "created_at": "2020-12-29T00:06:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495841",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@kliem](#comment:26):
> Why do we do it as a string here?
> 
> ```
> pkg['remote_version'] = 'none'
> ```

This matches what `m4/sage_spkg_collect.m4` reports as the version of a package without `package-version.txt`



---

archive/issue_comments_495842.json:
```json
{
    "body": "Changed commit from **[78ff9d5](https://github.com/sagemath/sagetrac-mirror/commit/78ff9d580f5f0c1396e1f8a5421858170999957a)** to **[e9a7572](https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8)**",
    "created_at": "2020-12-29T00:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495842",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[78ff9d5](https://github.com/sagemath/sagetrac-mirror/commit/78ff9d580f5f0c1396e1f8a5421858170999957a)** to **[e9a7572](https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8)**



---

archive/issue_comments_495843.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64bde5f887ac115b1e40b7905ad30cc00d8de363\">64bde5f</a></td><td><code>Merge tag '9.3.beta5' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8\">e9a7572</a></td><td><code>src/sage/misc/package.py: Improve source formatting</code></td></tr></table>\n",
    "created_at": "2020-12-29T00:07:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495843",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64bde5f887ac115b1e40b7905ad30cc00d8de363">64bde5f</a></td><td><code>Merge tag '9.3.beta5' into t/30940/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8">e9a7572</a></td><td><code>src/sage/misc/package.py: Improve source formatting</code></td></tr></table>




---

archive/issue_comments_495844.json:
```json
{
    "body": "Changed dependencies from **#30747, #30900** to none",
    "created_at": "2020-12-29T00:07:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495844",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30747, #30900** to none



---

archive/issue_events_426750.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-29T00:13:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426750"
}
```



---

archive/issue_events_426751.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-29T00:13:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426751"
}
```



---

archive/issue_events_426752.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-12-29T08:45:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426752"
}
```



---

archive/issue_events_426753.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-12-29T08:45:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426753"
}
```



---

archive/issue_comments_495845.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLGTM.",
    "created_at": "2020-12-29T08:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495845",
    "user": "https://github.com/kliem"
}
```

<div id="comment:31" align="right">comment:31</div>

LGTM.



---

archive/issue_comments_495846.json:
```json
{
    "body": "Changed reviewer from **Tobias Diez, ...** to **Tobias Diez, Jonathan Kliem**",
    "created_at": "2020-12-29T08:45:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495846",
    "user": "https://github.com/kliem"
}
```

Changed reviewer from **Tobias Diez, ...** to **Tobias Diez, Jonathan Kliem**



---

archive/issue_comments_495847.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThanks!",
    "created_at": "2020-12-29T18:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495847",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Thanks!



---

archive/issue_events_426754.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-03T12:15:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426754"
}
```



---

archive/issue_events_426755.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8c7eb2683a0a8262a3184a3a0f1c726893392e48",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-01-03T12:15:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30940#event-426755"
}
```



---

archive/issue_comments_495848.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available)** to **[e9a7572](https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8)**",
    "created_at": "2021-01-03T12:15:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30940#issuecomment-495848",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/src_bin_sage_list_packages__make_it_work_if_sage_root_is_not_available)** to **[e9a7572](https://github.com/sagemath/sagetrac-mirror/commit/e9a7572a37b228f4a74c35f680190e6b237f48d8)**
