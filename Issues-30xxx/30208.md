# Issue 30208: List Assignment for Bundle Connections

archive/issues_029971.json:
```json
{
    "body": "Bundle connections were implementet quite superficially (by me). In this ticket, I want to improve the assigment behavior of bundle connections.\n\nFirst of all, the methods `set_connection_form` and `add_connection_form` now return the corresponding connection 1-form ready for further assignment.\n\nThe main improvement in this ticket is to allow list assignments:\n\n```\nsage: M = Manifold(2, 'M', start_index=1)\nsage: X.<x,y> = M.chart()\nsage: E = M.vector_bundle(2, 'E')\nsage: nab = E.bundle_connection('nabla')\nsage: e = E.local_frame('e')\nsage: nab[e, :] = 0  # set all entries to zero\nsage: nab[e, 0, 0].display()\nconnection (1,1) of bundle connection nabla w.r.t. Local frame (E|_M, (e_1,e_2)) = 0\n```\n\nFor details see the documentation, which I have also improved.\n\nCC:  @egourgoulhon @tscrim\n\nBranch/Commit: [d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6](https://github.com/sagemath/sagetrac-mirror/commit/d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Michael Jung\n\nDependencies: #30191\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30208\n\n",
    "closed_at": "2020-08-07T19:07:28Z",
    "created_at": "2020-07-23T19:27:05Z",
    "labels": [
        "component: manifolds"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "List Assignment for Bundle Connections",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30208",
    "user": "https://github.com/mjungmath"
}
```
Bundle connections were implementet quite superficially (by me). In this ticket, I want to improve the assigment behavior of bundle connections.

First of all, the methods `set_connection_form` and `add_connection_form` now return the corresponding connection 1-form ready for further assignment.

The main improvement in this ticket is to allow list assignments:

```
sage: M = Manifold(2, 'M', start_index=1)
sage: X.<x,y> = M.chart()
sage: E = M.vector_bundle(2, 'E')
sage: nab = E.bundle_connection('nabla')
sage: e = E.local_frame('e')
sage: nab[e, :] = 0  # set all entries to zero
sage: nab[e, 0, 0].display()
connection (1,1) of bundle connection nabla w.r.t. Local frame (E|_M, (e_1,e_2)) = 0
```

For details see the documentation, which I have also improved.

CC:  @egourgoulhon @tscrim

Branch/Commit: [d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6](https://github.com/sagemath/sagetrac-mirror/commit/d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6)

Reviewer: Travis Scrimshaw

Author: Michael Jung

Dependencies: #30191

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30208





---

archive/issue_comments_594688.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30191\"",
    "created_at": "2020-07-23T19:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594688",
    "user": "https://github.com/mjungmath"
}
```

Changing dependencies from "" to "#30191"



---

archive/issue_comments_594689.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mjungmath/bundle_connection_extension\"",
    "created_at": "2020-07-23T20:28:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594689",
    "user": "https://github.com/mjungmath"
}
```

Changing branch from "" to "u/gh-mjungmath/bundle_connection_extension"



---

archive/issue_comments_594690.json:
```json
{
    "body": "Changing commit from \"\" to \"fa87f4b3f439fd02cbef4622efcebb11da329d5f\"",
    "created_at": "2020-07-23T20:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594690",
    "user": "https://github.com/mjungmath"
}
```

Changing commit from "" to "fa87f4b3f439fd02cbef4622efcebb11da329d5f"



---

archive/issue_comments_594691.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-23T20:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594691",
    "user": "https://github.com/mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_594692.json:
```json
{
    "body": "<a id='comment:3'></a>\nLast 10 new commits:\n|                                                                                                                                          |                                                            |\n|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|\n|[fe43915](https://github.com/sagemath/sagetrac-mirror/commit/fe4391559ee7d34dede77b532c1293be1a25b0b2)|`Trac #30191: code improvements + in ZZ check removed again`|\n|[461ff65](https://github.com/sagemath/sagetrac-mirror/commit/461ff656bc938720022b0bebdaef8ac1511916d0)|`Trac #30191: != [] removal reverted`|\n|[af5af8f](https://github.com/sagemath/sagetrac-mirror/commit/af5af8f7ed6cbc57832a64b75907f0fac054cb07)|`Trac #30191: elif reverted + in ZZ check for automorphismfield_group`|\n|[f0c6ee8](https://github.com/sagemath/sagetrac-mirror/commit/f0c6ee814ec3965b908073fd2dd47f2faead7e2b)|`Trac #30191: minor fix`|\n|[f1221da](https://github.com/sagemath/sagetrac-mirror/commit/f1221da5168e9b3231e00bde01a138bb4f9dc5f0)|`Trac #30191: minor fix`|\n|[a042313](https://github.com/sagemath/sagetrac-mirror/commit/a042313372e11304b48195a3441cd0bdea0db0b7)|`Trac# 30191: wrong indentation reverted`|\n|[4cc92e9](https://github.com/sagemath/sagetrac-mirror/commit/4cc92e908ce58c863330aac9001ddccbd76437d5)|`Trac #30191: comp check unified to if comp`|\n|[f98a47b](https://github.com/sagemath/sagetrac-mirror/commit/f98a47b9bc2302325a73ad1774dab26dc8a185d5)|`Trac #30191: unused ScalarField import removed`|\n|[9c5a25b](https://github.com/sagemath/sagetrac-mirror/commit/9c5a25b4997e4941aab2cdacde4b01ca3c2c0812)|`Trac #30208: assigment for bundle connections`|\n|[fa87f4b](https://github.com/sagemath/sagetrac-mirror/commit/fa87f4b3f439fd02cbef4622efcebb11da329d5f)|`Trac #30208: documentation improved`|",
    "created_at": "2020-07-23T20:29:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594692",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:3'></a>
Last 10 new commits:
|                                                                                                                                          |                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------|
|[fe43915](https://github.com/sagemath/sagetrac-mirror/commit/fe4391559ee7d34dede77b532c1293be1a25b0b2)|`Trac #30191: code improvements + in ZZ check removed again`|
|[461ff65](https://github.com/sagemath/sagetrac-mirror/commit/461ff656bc938720022b0bebdaef8ac1511916d0)|`Trac #30191: != [] removal reverted`|
|[af5af8f](https://github.com/sagemath/sagetrac-mirror/commit/af5af8f7ed6cbc57832a64b75907f0fac054cb07)|`Trac #30191: elif reverted + in ZZ check for automorphismfield_group`|
|[f0c6ee8](https://github.com/sagemath/sagetrac-mirror/commit/f0c6ee814ec3965b908073fd2dd47f2faead7e2b)|`Trac #30191: minor fix`|
|[f1221da](https://github.com/sagemath/sagetrac-mirror/commit/f1221da5168e9b3231e00bde01a138bb4f9dc5f0)|`Trac #30191: minor fix`|
|[a042313](https://github.com/sagemath/sagetrac-mirror/commit/a042313372e11304b48195a3441cd0bdea0db0b7)|`Trac# 30191: wrong indentation reverted`|
|[4cc92e9](https://github.com/sagemath/sagetrac-mirror/commit/4cc92e908ce58c863330aac9001ddccbd76437d5)|`Trac #30191: comp check unified to if comp`|
|[f98a47b](https://github.com/sagemath/sagetrac-mirror/commit/f98a47b9bc2302325a73ad1774dab26dc8a185d5)|`Trac #30191: unused ScalarField import removed`|
|[9c5a25b](https://github.com/sagemath/sagetrac-mirror/commit/9c5a25b4997e4941aab2cdacde4b01ca3c2c0812)|`Trac #30208: assigment for bundle connections`|
|[fa87f4b](https://github.com/sagemath/sagetrac-mirror/commit/fa87f4b3f439fd02cbef4622efcebb11da329d5f)|`Trac #30208: documentation improved`|



---

archive/issue_comments_594693.json:
```json
{
    "body": "Changing commit from \"fa87f4b3f439fd02cbef4622efcebb11da329d5f\" to \"4f0c279585c38920b442426c081bf93ecc526034\"",
    "created_at": "2020-07-26T15:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594693",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fa87f4b3f439fd02cbef4622efcebb11da329d5f" to "4f0c279585c38920b442426c081bf93ecc526034"



---

archive/issue_comments_594694.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|\n|[4f0c279](https://github.com/sagemath/sagetrac-mirror/commit/4f0c279585c38920b442426c081bf93ecc526034)|`Trac #30208: Merge branch 'develop' into bundle_connection_extension`|",
    "created_at": "2020-07-26T15:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594694",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|
|[4f0c279](https://github.com/sagemath/sagetrac-mirror/commit/4f0c279585c38920b442426c081bf93ecc526034)|`Trac #30208: Merge branch 'develop' into bundle_connection_extension`|



---

archive/issue_comments_594695.json:
```json
{
    "body": "<a id='comment:5'></a>\nMisindent:\n\n```diff\n-            sage: M = Manifold(2, 'M')\n+             sage: M = Manifold(2, 'M')\n             sage: X.<x,y> = M.chart()\n             sage: E = M.vector_bundle(2, 'E')\n```\nAlso in `add_connection_form` and `set_connection_form`, you need to deprecate the `form` input (or keep it with a default of `None`).",
    "created_at": "2020-07-27T04:00:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594695",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
Misindent:

```diff
-            sage: M = Manifold(2, 'M')
+             sage: M = Manifold(2, 'M')
             sage: X.<x,y> = M.chart()
             sage: E = M.vector_bundle(2, 'E')
```
Also in `add_connection_form` and `set_connection_form`, you need to deprecate the `form` input (or keep it with a default of `None`).



---

archive/issue_comments_594696.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[41983da](https://github.com/sagemath/sagetrac-mirror/commit/41983daf47bc0ab84485cc19a0b25f582465c343)|`Trac #30208: form input deprecated`|",
    "created_at": "2020-07-27T08:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594696",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[41983da](https://github.com/sagemath/sagetrac-mirror/commit/41983daf47bc0ab84485cc19a0b25f582465c343)|`Trac #30208: form input deprecated`|



---

archive/issue_comments_594697.json:
```json
{
    "body": "Changing commit from \"4f0c279585c38920b442426c081bf93ecc526034\" to \"41983daf47bc0ab84485cc19a0b25f582465c343\"",
    "created_at": "2020-07-27T08:50:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594697",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "4f0c279585c38920b442426c081bf93ecc526034" to "41983daf47bc0ab84485cc19a0b25f582465c343"



---

archive/issue_comments_594698.json:
```json
{
    "body": "<a id='comment:7'></a>\nIs this suitable?\n\n**Addendum:** Do you think this attempt is better than the one before?",
    "created_at": "2020-07-27T08:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594698",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:7'></a>
Is this suitable?

**Addendum:** Do you think this attempt is better than the one before?



---

archive/issue_comments_594699.json:
```json
{
    "body": "<a id='comment:8'></a>\nYou should make it a standard deprecation using `from sage.misc.superseded import deprecation`. Also, there will need to be separate deprecations for each of the two methods.\n\nMy (not so well informed) opinion is that both approaches seem natural. So I don't really can't make a comparison about which is better.",
    "created_at": "2020-07-27T11:17:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594699",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
You should make it a standard deprecation using `from sage.misc.superseded import deprecation`. Also, there will need to be separate deprecations for each of the two methods.

My (not so well informed) opinion is that both approaches seem natural. So I don't really can't make a comparison about which is better.



---

archive/issue_comments_594700.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [tscrim](#comment%3A8):\n> You should make it a standard deprecation using `from sage.misc.superseded import deprecation`. Also, there will need to be separate deprecations for each of the two methods.\n\n\nI will change this. Thank you.\n\n> My (not so well informed) opinion is that both approaches seem natural. So I don't really can't make a comparison about which is better.\n\n\nI thought this approach is more natural in terms of the \"immutability\" discussion we had months ago. The connection forms are now somehow fixed and clearly bound to the connection. Furthermore, it is much closer to the implementation of `AffineConnection`.\n\nEric, what do you say?",
    "created_at": "2020-07-27T11:31:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594700",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:9'></a>
Replying to [tscrim](#comment%3A8):
> You should make it a standard deprecation using `from sage.misc.superseded import deprecation`. Also, there will need to be separate deprecations for each of the two methods.


I will change this. Thank you.

> My (not so well informed) opinion is that both approaches seem natural. So I don't really can't make a comparison about which is better.


I thought this approach is more natural in terms of the "immutability" discussion we had months ago. The connection forms are now somehow fixed and clearly bound to the connection. Furthermore, it is much closer to the implementation of `AffineConnection`.

Eric, what do you say?



---

archive/issue_comments_594701.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [gh-mjungmath](#comment%3A9):\n> Replying to [tscrim](#comment%3A8):\n> > My (not so well informed) opinion is that both approaches seem natural. So I don't really can't make a comparison about which is better.\n\n> \n> I thought this approach is more natural in terms of the \"immutability\" discussion we had months ago. The connection forms are now somehow fixed and clearly bound to the connection.\n\n\nA few months ago seems like a lifetime now. Although I think it was more than a few months, but I don't quite remember the outcome of that conversation...",
    "created_at": "2020-07-27T11:36:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594701",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
Replying to [gh-mjungmath](#comment%3A9):
> Replying to [tscrim](#comment%3A8):
> > My (not so well informed) opinion is that both approaches seem natural. So I don't really can't make a comparison about which is better.

> 
> I thought this approach is more natural in terms of the "immutability" discussion we had months ago. The connection forms are now somehow fixed and clearly bound to the connection.


A few months ago seems like a lifetime now. Although I think it was more than a few months, but I don't quite remember the outcome of that conversation...



---

archive/issue_comments_594702.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [tscrim](#comment%3A10):\n> A few months ago seems like a lifetime now. Although I think it was more than a few months, but I don't quite remember the outcome of that conversation...\n\n\nAnd still, time flies...I think the outcome was #28562.",
    "created_at": "2020-07-27T11:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594702",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:11'></a>
Replying to [tscrim](#comment%3A10):
> A few months ago seems like a lifetime now. Although I think it was more than a few months, but I don't quite remember the outcome of that conversation...


And still, time flies...I think the outcome was #28562.



---

archive/issue_comments_594703.json:
```json
{
    "body": "Changing commit from \"41983daf47bc0ab84485cc19a0b25f582465c343\" to \"f9cb6c14c1709302fdbf2d37bae69a0ae098ebe6\"",
    "created_at": "2020-07-27T21:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594703",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "41983daf47bc0ab84485cc19a0b25f582465c343" to "f9cb6c14c1709302fdbf2d37bae69a0ae098ebe6"



---

archive/issue_comments_594704.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                  |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[f9cb6c1](https://github.com/sagemath/sagetrac-mirror/commit/f9cb6c14c1709302fdbf2d37bae69a0ae098ebe6)|`Trac #30208: deprecation warning`|",
    "created_at": "2020-07-27T21:50:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                  |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[f9cb6c1](https://github.com/sagemath/sagetrac-mirror/commit/f9cb6c14c1709302fdbf2d37bae69a0ae098ebe6)|`Trac #30208: deprecation warning`|



---

archive/issue_comments_594705.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-07-28T01:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594705",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_594706.json:
```json
{
    "body": "<a id='comment:13'></a>\nLGTM.",
    "created_at": "2020-07-28T01:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594706",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
LGTM.



---

archive/issue_comments_594707.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-28T01:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594707",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_594708.json:
```json
{
    "body": "<a id='comment:14'></a>\nThank you for the positive review. Besides, I am still curious what Eric has to say about these changes.",
    "created_at": "2020-07-28T10:25:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594708",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:14'></a>
Thank you for the positive review. Besides, I am still curious what Eric has to say about these changes.



---

archive/issue_comments_594709.json:
```json
{
    "body": "<a id='comment:15'></a>\nSorry, I have found some severe flaws.",
    "created_at": "2020-07-28T12:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594709",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:15'></a>
Sorry, I have found some severe flaws.



---

archive/issue_comments_594710.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-07-28T12:54:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594710",
    "user": "https://github.com/mjungmath"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_594711.json:
```json
{
    "body": "<a id='comment:16'></a>\nI have sensed something really odd, and I have no idea where this might come from:\n\n```\nsage: M = Manifold(3, 'M', start_index=1)\nsage: X.<x,y,z> = M.chart()\nsage: E = M.vector_bundle(2, 'E')\nsage: e = E.local_frame('e') # standard frame for E\nsage: nab = E.bundle_connection('nabla', latex_name=r'\\nabla')\nsage: nab[e, :] = 0\nsage: nab[e, 1, 2][:] = [x*z, y*z, z^2]\nsage: nab[e, 2, 1][:] = [x, x^2, x^3]\nsage: nab[e, 1, 1][:] = [x+z, y-z, x*y*z]\nsage: vframe = X.frame()\nsage: e[1][[e, 2]]\n0\nsage: om = nab[2, 2]\nsage: om(vframe[1])\nScalar field connection (2,2) of bundle connection nabla w.r.t. Local frame (E|_M, (e_1,e_2))(d/dx) on the 3-dimensional differentiable manifold M\nsage: e[1][[e, 2]]\nScalar field connection (2,2) of bundle connection nabla w.r.t. Local frame (E|_M, (e_1,e_2))(d/dx) on the 3-dimensional differentiable manifold M\nsage: e[1][[e, 2]] is om(vframe[1])\nTrue\n```\n\nWhat the...?\n\n**Addendum:** I think the problem comes from the *unique* zero scalar field. Somehow it gets altered via `__call__` of `TensorField`. It has therefore nothing to do with this ticket. I have opened another ticket #30239.",
    "created_at": "2020-07-28T13:03:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594711",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:16'></a>
I have sensed something really odd, and I have no idea where this might come from:

```
sage: M = Manifold(3, 'M', start_index=1)
sage: X.<x,y,z> = M.chart()
sage: E = M.vector_bundle(2, 'E')
sage: e = E.local_frame('e') # standard frame for E
sage: nab = E.bundle_connection('nabla', latex_name=r'\nabla')
sage: nab[e, :] = 0
sage: nab[e, 1, 2][:] = [x*z, y*z, z^2]
sage: nab[e, 2, 1][:] = [x, x^2, x^3]
sage: nab[e, 1, 1][:] = [x+z, y-z, x*y*z]
sage: vframe = X.frame()
sage: e[1][[e, 2]]
0
sage: om = nab[2, 2]
sage: om(vframe[1])
Scalar field connection (2,2) of bundle connection nabla w.r.t. Local frame (E|_M, (e_1,e_2))(d/dx) on the 3-dimensional differentiable manifold M
sage: e[1][[e, 2]]
Scalar field connection (2,2) of bundle connection nabla w.r.t. Local frame (E|_M, (e_1,e_2))(d/dx) on the 3-dimensional differentiable manifold M
sage: e[1][[e, 2]] is om(vframe[1])
True
```

What the...?

**Addendum:** I think the problem comes from the *unique* zero scalar field. Somehow it gets altered via `__call__` of `TensorField`. It has therefore nothing to do with this ticket. I have opened another ticket #30239.



---

archive/issue_comments_594712.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[c34e481](https://github.com/sagemath/sagetrac-mirror/commit/c34e4810fa3c8eea494ec67756987a7585e34a1e)|`Trac #30191: remove in ZZ check`|\n|[65dff3d](https://github.com/sagemath/sagetrac-mirror/commit/65dff3d011bbb5e89f8642ff7901a050c232fc7a)|`Trac #30191: Merge branch 'develop' into conversion_attributeerror_fix`|\n|[acc407c](https://github.com/sagemath/sagetrac-mirror/commit/acc407cc24226e8bee44bf30b39c24c7be86cb02)|`Trac #30191: try-except block for zero check`|\n|[0d27b57](https://github.com/sagemath/sagetrac-mirror/commit/0d27b57ae5b5fefa64c56aadf29ee15806b84c77)|`Trac #30191: unnecessary comment block removed`|\n|[f94bcbe](https://github.com/sagemath/sagetrac-mirror/commit/f94bcbe14781945c7d0e6a2643710599d1239e38)|`Trac #30191: if blocks rearranged`|\n|[28dec69](https://github.com/sagemath/sagetrac-mirror/commit/28dec692737c1ce7e9fadb753ff3b8b1c378d4c2)|`Trac #30191: doctest errors fixed`|\n|[6a55a0b](https://github.com/sagemath/sagetrac-mirror/commit/6a55a0b28bea30343ddc5f0b64406821ebd02cdc)|`Merge branch 'conversion_attributeerror_fix' into bundle_connection_extension`|\n|[bb476e2](https://github.com/sagemath/sagetrac-mirror/commit/bb476e24da2e55f7133e4d9ff14c92a5792401f9)|`Trac #30208: minor fix`|",
    "created_at": "2020-07-28T13:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594712",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[c34e481](https://github.com/sagemath/sagetrac-mirror/commit/c34e4810fa3c8eea494ec67756987a7585e34a1e)|`Trac #30191: remove in ZZ check`|
|[65dff3d](https://github.com/sagemath/sagetrac-mirror/commit/65dff3d011bbb5e89f8642ff7901a050c232fc7a)|`Trac #30191: Merge branch 'develop' into conversion_attributeerror_fix`|
|[acc407c](https://github.com/sagemath/sagetrac-mirror/commit/acc407cc24226e8bee44bf30b39c24c7be86cb02)|`Trac #30191: try-except block for zero check`|
|[0d27b57](https://github.com/sagemath/sagetrac-mirror/commit/0d27b57ae5b5fefa64c56aadf29ee15806b84c77)|`Trac #30191: unnecessary comment block removed`|
|[f94bcbe](https://github.com/sagemath/sagetrac-mirror/commit/f94bcbe14781945c7d0e6a2643710599d1239e38)|`Trac #30191: if blocks rearranged`|
|[28dec69](https://github.com/sagemath/sagetrac-mirror/commit/28dec692737c1ce7e9fadb753ff3b8b1c378d4c2)|`Trac #30191: doctest errors fixed`|
|[6a55a0b](https://github.com/sagemath/sagetrac-mirror/commit/6a55a0b28bea30343ddc5f0b64406821ebd02cdc)|`Merge branch 'conversion_attributeerror_fix' into bundle_connection_extension`|
|[bb476e2](https://github.com/sagemath/sagetrac-mirror/commit/bb476e24da2e55f7133e4d9ff14c92a5792401f9)|`Trac #30208: minor fix`|



---

archive/issue_comments_594713.json:
```json
{
    "body": "Changing commit from \"f9cb6c14c1709302fdbf2d37bae69a0ae098ebe6\" to \"bb476e24da2e55f7133e4d9ff14c92a5792401f9\"",
    "created_at": "2020-07-28T13:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594713",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f9cb6c14c1709302fdbf2d37bae69a0ae098ebe6" to "bb476e24da2e55f7133e4d9ff14c92a5792401f9"



---

archive/issue_comments_594714.json:
```json
{
    "body": "<a id='comment:18'></a>\nI have uploaded the fix of a minor mistake.",
    "created_at": "2020-07-28T13:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594714",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:18'></a>
I have uploaded the fix of a minor mistake.



---

archive/issue_comments_594715.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-07-28T13:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594715",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_594716.json:
```json
{
    "body": "<a id='comment:19'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|\n|[a77aebc](https://github.com/sagemath/sagetrac-mirror/commit/a77aebcc00bac6326a4e19a9c67aeb949ee10db2)|`Trac #30208: copy_from reverted to recover old behavior`|",
    "created_at": "2020-07-28T14:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594716",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------|
|[a77aebc](https://github.com/sagemath/sagetrac-mirror/commit/a77aebcc00bac6326a4e19a9c67aeb949ee10db2)|`Trac #30208: copy_from reverted to recover old behavior`|



---

archive/issue_comments_594717.json:
```json
{
    "body": "Changing commit from \"bb476e24da2e55f7133e4d9ff14c92a5792401f9\" to \"a77aebcc00bac6326a4e19a9c67aeb949ee10db2\"",
    "created_at": "2020-07-28T14:50:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594717",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bb476e24da2e55f7133e4d9ff14c92a5792401f9" to "a77aebcc00bac6326a4e19a9c67aeb949ee10db2"



---

archive/issue_comments_594718.json:
```json
{
    "body": "Changing commit from \"a77aebcc00bac6326a4e19a9c67aeb949ee10db2\" to \"934a4398d3659cebb5a376a1369f6168610ddb16\"",
    "created_at": "2020-07-28T14:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594718",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a77aebcc00bac6326a4e19a9c67aeb949ee10db2" to "934a4398d3659cebb5a376a1369f6168610ddb16"



---

archive/issue_comments_594719.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[934a439](https://github.com/sagemath/sagetrac-mirror/commit/934a4398d3659cebb5a376a1369f6168610ddb16)|`documentation slightly improved`|",
    "created_at": "2020-07-28T14:53:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594719",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[934a439](https://github.com/sagemath/sagetrac-mirror/commit/934a4398d3659cebb5a376a1369f6168610ddb16)|`documentation slightly improved`|



---

archive/issue_comments_594720.json:
```json
{
    "body": "<a id='comment:21'></a>\nWhile this was already there, so I am not going to stop a positive review, but I really dislike doctests like this:\n\n```\n            sage: nab._new_forms(e)  # random\n            dict of forms\n```\nIt is only `# random` because of the print order, but you can easily make it print in a fixed order by\n\n```\nsage: d = nab._new_forms(e)\nsage: [d[k] for k in sorted(d)]\n```\nBy marking it as `# random`, it can take any output, so it can mask bugs.\n\nIf you don't want to change this, you can just ignore and set a positive review. If you do change, you can just set it to a positive review after you run the doctest on the file.",
    "created_at": "2020-07-29T01:09:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594720",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
While this was already there, so I am not going to stop a positive review, but I really dislike doctests like this:

```
            sage: nab._new_forms(e)  # random
            dict of forms
```
It is only `# random` because of the print order, but you can easily make it print in a fixed order by

```
sage: d = nab._new_forms(e)
sage: [d[k] for k in sorted(d)]
```
By marking it as `# random`, it can take any output, so it can mask bugs.

If you don't want to change this, you can just ignore and set a positive review. If you do change, you can just set it to a positive review after you run the doctest on the file.



---

archive/issue_comments_594721.json:
```json
{
    "body": "Changing commit from \"934a4398d3659cebb5a376a1369f6168610ddb16\" to \"d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6\"",
    "created_at": "2020-07-29T08:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594721",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "934a4398d3659cebb5a376a1369f6168610ddb16" to "d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6"



---

archive/issue_comments_594722.json:
```json
{
    "body": "<a id='comment:22'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[d3c8cab](https://github.com/sagemath/sagetrac-mirror/commit/d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6)|`Trac #30208: random doctest removed`|",
    "created_at": "2020-07-29T08:13:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[d3c8cab](https://github.com/sagemath/sagetrac-mirror/commit/d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6)|`Trac #30208: random doctest removed`|



---

archive/issue_comments_594723.json:
```json
{
    "body": "<a id='comment:23'></a>\nVery good point. Thank you Travis. I've changed it.",
    "created_at": "2020-07-29T08:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594723",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:23'></a>
Very good point. Thank you Travis. I've changed it.



---

archive/issue_comments_594724.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-29T08:17:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594724",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_594725.json:
```json
{
    "body": "<a id='comment:24'></a>\nI'm just thinking about whether the list assignment via copying is the right way to do. The Python documentation says:\n\n> *Assignment statements in Python do not copy objects, they create bindings between a target and an object.*\n\n\nI suggest, we remove the `__setitem__` method again, and encourage the use of `set_connection_form(i, j).copy_from(omega)` instead. If that meets with your approval, I will open a ticket for that and apply the same changes for mixed differential forms.\n\n**Addendum:** Seems it's fine. Even some classes in the Python library admits that behavior. I just improved the documentation regarding that in one of the subsequent tickets.",
    "created_at": "2020-08-04T15:49:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594725",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:24'></a>
I'm just thinking about whether the list assignment via copying is the right way to do. The Python documentation says:

> *Assignment statements in Python do not copy objects, they create bindings between a target and an object.*


I suggest, we remove the `__setitem__` method again, and encourage the use of `set_connection_form(i, j).copy_from(omega)` instead. If that meets with your approval, I will open a ticket for that and apply the same changes for mixed differential forms.

**Addendum:** Seems it's fine. Even some classes in the Python library admits that behavior. I just improved the documentation regarding that in one of the subsequent tickets.



---

archive/issue_events_087973.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-07T19:07:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30208#event-87973"
}
```



---

archive/issue_comments_594726.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-07T19:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594726",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_594727.json:
```json
{
    "body": "Changing branch from \"u/gh-mjungmath/bundle_connection_extension\" to \"d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6\"",
    "created_at": "2020-08-07T19:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30208",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30208#issuecomment-594727",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mjungmath/bundle_connection_extension" to "d3c8cab917f04ebc9951d41a0cc8dcf4c66392a6"
