# Issue 30223: Combinatorial designs: generate GQ with spread

archive/issues_029986.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nImplement a few functions to generate and work on generalised quadrangles with spreads.\nIn particular we construct `H(3,q^2)`.\n\nCC:  @dimpase\n\nComponent: **combinatorial designs**\n\nKeywords: **generalised_quadrangle**\n\nAuthor: **Ivo Maffei**\n\nBranch: **[`5d16394`](https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100)**\n\nReviewer: **Samuel Leli\u00e8vre, Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30223_\n\n",
    "closed_at": "2020-08-30T08:39:03Z",
    "created_at": "2020-07-26T11:13:24Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Combinatorial designs: generate GQ with spread",
    "type": "issue",
    "updated_at": "2020-09-03T09:47:01Z",
    "url": "https://github.com/sagemath/sage/issues/30223",
    "user": "https://github.com/Ivo-Maffei"
}
```
<div id="comment:0"></div>

Implement a few functions to generate and work on generalised quadrangles with spreads.
In particular we construct `H(3,q^2)`.

CC:  @dimpase

Component: **combinatorial designs**

Keywords: **generalised_quadrangle**

Author: **Ivo Maffei**

Branch: **[`5d16394`](https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100)**

Reviewer: **Samuel Lelièvre, Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/30223_





---

archive/issue_events_413171.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-07-26T11:13:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413171"
}
```



---

archive/issue_events_413172.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-07-26T11:13:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
    "label_color": "0000ff",
    "label_name": "c: combinatorial designs",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413172"
}
```



---

archive/issue_events_413173.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-07-26T11:13:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413173"
}
```



---

archive/issue_comments_478808.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAt the moment the examples at the top of the file fail and they shouldn't.\nIn particular using the objects defined there one gets:\n\n```\nsage: set(GQ2._points) == set(range(1,1106))\nFalse\nsage: for i in GQ2._points:\n....:     if i not in range(1,1106):\n....:         print(i)\n....:         \nsage: for i in range(1,1106):\n....:     if i not in GQ2._points:\n....:         print(i)\n....:      \nsage:\n```\nI wonder if I'm missing something or if `==` is returning some weird output.",
    "created_at": "2020-07-26T11:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478808",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:1" align="right">comment:1</div>

At the moment the examples at the top of the file fail and they shouldn't.
In particular using the objects defined there one gets:

```
sage: set(GQ2._points) == set(range(1,1106))
False
sage: for i in GQ2._points:
....:     if i not in range(1,1106):
....:         print(i)
....:         
sage: for i in range(1,1106):
....:     if i not in GQ2._points:
....:         print(i)
....:      
sage:
```
I wonder if I'm missing something or if `==` is returning some weird output.



---

archive/issue_comments_478809.json:
```json
{
    "body": "Reviewer: **Samuel Leli\u00e8vre, ...**",
    "created_at": "2020-07-26T13:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478809",
    "user": "https://github.com/slel"
}
```

Reviewer: **Samuel Lelièvre, ...**



---

archive/issue_comments_478810.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nMinor suggestions, no hurry.\n\n```\n-- YOUR NAME (2005-01-03): initial version\n+- Ivo Maffei (2020-07-26): initial version\n```\n\n```\n-#       Copyright (C) 2013 IVO MAFFEI <ivomaffei@gmail.com>\n+#       Copyright (C) 2013 Ivo Maffei <ivomaffei@gmail.com>\n```\n\n```\n-    Construct the generalised quadrangle `H(3,q^2)` with an ovoid\n-    The GQ has order `(q^2,q)`\n+    Construct the generalised quadrangle `H(3,q^2)` with an ovoid.\n+\n+    The GQ has order `(q^2,q)`.\n```",
    "created_at": "2020-07-26T13:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478810",
    "user": "https://github.com/slel"
}
```

<div id="comment:2" align="right">comment:2</div>

Minor suggestions, no hurry.

```
-- YOUR NAME (2005-01-03): initial version
+- Ivo Maffei (2020-07-26): initial version
```

```
-#       Copyright (C) 2013 IVO MAFFEI <ivomaffei@gmail.com>
+#       Copyright (C) 2013 Ivo Maffei <ivomaffei@gmail.com>
```

```
-    Construct the generalised quadrangle `H(3,q^2)` with an ovoid
-    The GQ has order `(q^2,q)`
+    Construct the generalised quadrangle `H(3,q^2)` with an ovoid.
+
+    The GQ has order `(q^2,q)`.
```



---

archive/issue_events_413174.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2020-07-26T13:06:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413174"
}
```



---

archive/issue_comments_478811.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@Ivo-Maffei](#comment%3A1):\n> At the moment the examples at the top of the file fail and they shouldn't.\n> In particular using the objects defined there one gets:\n> \n> ```\n> sage: set(GQ2._points) == set(range(1,1106))\n> False\n> sage: for i in GQ2._points:\n> ....:     if i not in range(1,1106):\n> ....:         print(i)\n> ....:         \n> sage: for i in range(1,1106):\n> ....:     if i not in GQ2._points:\n> ....:         print(i)\n> ....:      \n> sage:\n> ```\n> I wonder if I'm missing something or if `==` is returning some weird output.\n\n`set(GQ2._points)` consists of GAP's  Integers, but in `range(1,1106)` you have Python `<int>`.\n\nThere is no automatic conversion between these set elements when you compare them:\n\n```\nsage: libgap(1)==int(1)\nTrue\nsage: type(libgap(1))\n<class 'sage.libs.gap.element.GapElement_Integer'>\nsage: set([libgap(1)])==set([int(1)])\nFalse\n```",
    "created_at": "2020-07-26T22:33:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478811",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@Ivo-Maffei](#comment%3A1):
> At the moment the examples at the top of the file fail and they shouldn't.
> In particular using the objects defined there one gets:
> 
> ```
> sage: set(GQ2._points) == set(range(1,1106))
> False
> sage: for i in GQ2._points:
> ....:     if i not in range(1,1106):
> ....:         print(i)
> ....:         
> sage: for i in range(1,1106):
> ....:     if i not in GQ2._points:
> ....:         print(i)
> ....:      
> sage:
> ```
> I wonder if I'm missing something or if `==` is returning some weird output.

`set(GQ2._points)` consists of GAP's  Integers, but in `range(1,1106)` you have Python `<int>`.

There is no automatic conversion between these set elements when you compare them:

```
sage: libgap(1)==int(1)
True
sage: type(libgap(1))
<class 'sage.libs.gap.element.GapElement_Integer'>
sage: set([libgap(1)])==set([int(1)])
False
```



---

archive/issue_comments_478812.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e828961dacb8da81a5117a0b13da79560e8533c\"><code>0e82896</code></a></td><td><code>removed gap int; fixed some docstrings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee0e18f36993d4b6529f2c3509d786b3a0249b05\"><code>ee0e18f</code></a></td><td><code>added references</code></td></tr></table>\n",
    "created_at": "2020-07-27T08:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478812",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e828961dacb8da81a5117a0b13da79560e8533c"><code>0e82896</code></a></td><td><code>removed gap int; fixed some docstrings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee0e18f36993d4b6529f2c3509d786b3a0249b05"><code>ee0e18f</code></a></td><td><code>added references</code></td></tr></table>




---

archive/issue_comments_478813.json:
```json
{
    "body": "Changed commit from **[`7555255`](https://github.com/sagemath/sagetrac-mirror/commit/7555255d1f36e114affe73d46c6af602515c849b)** to **[`ee0e18f`](https://github.com/sagemath/sagetrac-mirror/commit/ee0e18f36993d4b6529f2c3509d786b3a0249b05)**",
    "created_at": "2020-07-27T08:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478813",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7555255`](https://github.com/sagemath/sagetrac-mirror/commit/7555255d1f36e114affe73d46c6af602515c849b)** to **[`ee0e18f`](https://github.com/sagemath/sagetrac-mirror/commit/ee0e18f36993d4b6529f2c3509d786b3a0249b05)**



---

archive/issue_events_413175.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-07-27T08:53:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413175"
}
```



---

archive/issue_comments_478814.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-Implement a few functions to generate and work on generalised quadrangles with spreads\n+Implement a few functions to generate and work on generalised quadrangles with spreads.\n+In particular we construct `H(3,q^2)`.\n``````\n",
    "created_at": "2020-07-27T08:53:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478814",
    "user": "https://github.com/Ivo-Maffei"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-Implement a few functions to generate and work on generalised quadrangles with spreads
+Implement a few functions to generate and work on generalised quadrangles with spreads.
+In particular we construct `H(3,q^2)`.
``````




---

archive/issue_comments_478815.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nwhere is this supposed to be used?",
    "created_at": "2020-08-11T13:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478815",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

where is this supposed to be used?



---

archive/issue_comments_478816.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThe point graph of a GQ removed its spread is distance-regular. It's shown in BCN 12.5.\nI haven't yet made a ticket that puts the required code in distance_regular.pyx.",
    "created_at": "2020-08-11T16:08:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478816",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:7" align="right">comment:7</div>

The point graph of a GQ removed its spread is distance-regular. It's shown in BCN 12.5.
I haven't yet made a ticket that puts the required code in distance_regular.pyx.



---

archive/issue_comments_478817.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe description of \nhttps://en.wikipedia.org/wiki/Generalized_quadrangle\n\nHow about renaming gen_quadrangles.pyx to gen_quadrangles_with_spread.pyx\n\nAlso, `generalised_quadrangle_hermitian` should be renamed to something like\n`generalised_quadrangle_hermitian_with_ovoid`\n\nPerhaps it makes sense to introduce spreads for general Sage's incidence systems\n(sets of blocks that don't pairwise intersect and cover all the points) - then spreads here will be a particular case.",
    "created_at": "2020-08-22T10:26:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478817",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

The description of 
https://en.wikipedia.org/wiki/Generalized_quadrangle

How about renaming gen_quadrangles.pyx to gen_quadrangles_with_spread.pyx

Also, `generalised_quadrangle_hermitian` should be renamed to something like
`generalised_quadrangle_hermitian_with_ovoid`

Perhaps it makes sense to introduce spreads for general Sage's incidence systems
(sets of blocks that don't pairwise intersect and cover all the points) - then spreads here will be a particular case.



---

archive/issue_comments_478818.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@dimpase](#comment%3A8):\n> Perhaps it makes sense to introduce spreads for general Sage's incidence systems\n> (sets of blocks that don't pairwise intersect and cover all the points) - then spreads here will be a particular case.\n\nDo you have any idea on how to do so? We could add a field to the `IncidenceStructure` class or make a subclass `IncidenceStructureWithSpread`...",
    "created_at": "2020-08-22T10:54:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478818",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@dimpase](#comment%3A8):
> Perhaps it makes sense to introduce spreads for general Sage's incidence systems
> (sets of blocks that don't pairwise intersect and cover all the points) - then spreads here will be a particular case.

Do you have any idea on how to do so? We could add a field to the `IncidenceStructure` class or make a subclass `IncidenceStructureWithSpread`...



---

archive/issue_comments_478819.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI meant a member function that verifies that a given set of blocks is a spread.",
    "created_at": "2020-08-22T11:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478819",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

I meant a member function that verifies that a given set of blocks is a spread.



---

archive/issue_comments_478820.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9c44a33da176319f6453c59983fad1811fd50b03\"><code>9c44a33</code></a></td><td><code>Merge branch 9.2.beta9 into 30223</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdd9ae574c058bef5d9efbcb4eb0effdaccc1370\"><code>fdd9ae5</code></a></td><td><code>renamed method and file; some pep8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f5dc6f7f9f5a2f202fcc0cb43710d4ca64b4136\"><code>7f5dc6f</code></a></td><td><code>fix bugs due to renaming</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9a56f1eee61fc90a277e16d9cfec2b5eb96e68c8\"><code>9a56f1e</code></a></td><td><code>added is_spread method to incidence structures</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a464a9c08d164470bb744ded7bdb386cbc79e62b\"><code>a464a9c</code></a></td><td><code>stronger check for spread</code></td></tr></table>\n",
    "created_at": "2020-08-22T13:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478820",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9c44a33da176319f6453c59983fad1811fd50b03"><code>9c44a33</code></a></td><td><code>Merge branch 9.2.beta9 into 30223</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdd9ae574c058bef5d9efbcb4eb0effdaccc1370"><code>fdd9ae5</code></a></td><td><code>renamed method and file; some pep8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f5dc6f7f9f5a2f202fcc0cb43710d4ca64b4136"><code>7f5dc6f</code></a></td><td><code>fix bugs due to renaming</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9a56f1eee61fc90a277e16d9cfec2b5eb96e68c8"><code>9a56f1e</code></a></td><td><code>added is_spread method to incidence structures</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a464a9c08d164470bb744ded7bdb386cbc79e62b"><code>a464a9c</code></a></td><td><code>stronger check for spread</code></td></tr></table>




---

archive/issue_comments_478821.json:
```json
{
    "body": "Changed commit from **[`ee0e18f`](https://github.com/sagemath/sagetrac-mirror/commit/ee0e18f36993d4b6529f2c3509d786b3a0249b05)** to **[`a464a9c`](https://github.com/sagemath/sagetrac-mirror/commit/a464a9c08d164470bb744ded7bdb386cbc79e62b)**",
    "created_at": "2020-08-22T13:52:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478821",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ee0e18f`](https://github.com/sagemath/sagetrac-mirror/commit/ee0e18f36993d4b6529f2c3509d786b3a0249b05)** to **[`a464a9c`](https://github.com/sagemath/sagetrac-mirror/commit/a464a9c08d164470bb744ded7bdb386cbc79e62b)**



---

archive/issue_comments_478822.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI get a memory error here:\n\n```\nFile \"src/sage/combinat/designs/gen_quadrangles_with_spread.pyx\", line 257, in sage.combinat.designs.gen_quadrangles_with_spread.generalised_quadrangle_hermitian_with_ovoid\nFailed example:\n    t[0].is_generalized_quadrangle()  # long time\nException raised:\n...\n```\nand even worse crash (Bad Exit) here:\n\n```\nFile \"src/sage/combinat/designs/gen_quadrangles_with_spread.pyx\", line 271, in sage.combinat.designs.gen_quadrangles_with_spread.generalised_quadrangle_hermitian_with_ovoid\nFailed example:\n    is_GQ_with_spread(*t, s=3, t=9)\nException raised:\n...\n```",
    "created_at": "2020-08-24T17:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478822",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

I get a memory error here:

```
File "src/sage/combinat/designs/gen_quadrangles_with_spread.pyx", line 257, in sage.combinat.designs.gen_quadrangles_with_spread.generalised_quadrangle_hermitian_with_ovoid
Failed example:
    t[0].is_generalized_quadrangle()  # long time
Exception raised:
...
```
and even worse crash (Bad Exit) here:

```
File "src/sage/combinat/designs/gen_quadrangles_with_spread.pyx", line 271, in sage.combinat.designs.gen_quadrangles_with_spread.generalised_quadrangle_hermitian_with_ovoid
Failed example:
    is_GQ_with_spread(*t, s=3, t=9)
Exception raised:
...
```



---

archive/issue_comments_478823.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI merged 9.2.beta10 and tried both:\n\n```\nsage -tp src/sage/combinat/designs/gen_quadrangles_with_spread.pyx\nsage -tp --long src/sage/combinat/designs/gen_quadrangles_with_spread.pyx\n```\n\nThey both terminate with all tests passed.\nCould you try again with the merged branch and post the traceback?",
    "created_at": "2020-08-25T09:23:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478823",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:13" align="right">comment:13</div>

I merged 9.2.beta10 and tried both:

```
sage -tp src/sage/combinat/designs/gen_quadrangles_with_spread.pyx
sage -tp --long src/sage/combinat/designs/gen_quadrangles_with_spread.pyx
```

They both terminate with all tests passed.
Could you try again with the merged branch and post the traceback?



---

archive/issue_comments_478824.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd8d1baa2f65ae46567d39415bba4552f7f75607\"><code>fd8d1ba</code></a></td><td><code>Merge 9.2.beta10 into 30223</code></td></tr></table>\n",
    "created_at": "2020-08-25T09:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478824",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd8d1baa2f65ae46567d39415bba4552f7f75607"><code>fd8d1ba</code></a></td><td><code>Merge 9.2.beta10 into 30223</code></td></tr></table>




---

archive/issue_comments_478825.json:
```json
{
    "body": "Changed commit from **[`a464a9c`](https://github.com/sagemath/sagetrac-mirror/commit/a464a9c08d164470bb744ded7bdb386cbc79e62b)** to **[`fd8d1ba`](https://github.com/sagemath/sagetrac-mirror/commit/fd8d1baa2f65ae46567d39415bba4552f7f75607)**",
    "created_at": "2020-08-25T09:23:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478825",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a464a9c`](https://github.com/sagemath/sagetrac-mirror/commit/a464a9c08d164470bb744ded7bdb386cbc79e62b)** to **[`fd8d1ba`](https://github.com/sagemath/sagetrac-mirror/commit/fd8d1baa2f65ae46567d39415bba4552f7f75607)**



---

archive/issue_comments_478826.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThe non-long tests pass, but the long ones end up with\n\n```\n$ ./sage -tp 1 --long src/sage/combinat/designs/gen_quadrangles_with_spread.pyx 2>&1 >/tmp/p\nProcess DocTestWorker-1:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.7/multiprocessing/process.py\", line 297, in _bootstrap\n    self.run()\n  File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 2185, in run\n    task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n  File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 2535, in __call__\n    result_queue.put(result, False)\n  File \"/usr/lib/python3.7/multiprocessing/queues.py\", line 87, in put\n    self._start_thread()\n  File \"/usr/lib/python3.7/multiprocessing/queues.py\", line 170, in _start_thread\n    self._thread.start()\n  File \"/usr/lib/python3.7/threading.py\", line 852, in start\n    _start_new_thread(self._bootstrap, ())\nRuntimeError: can't start new thread\n```\nin \n\n```\nsage: t[0].is_generalized_quadrangle()  # long time ## line 257 ##\n```\n\nThis seems to be limited to this machine, though. If I run the test in question at the Sage prompt\nit takes about 30 sec and takes a lot of RAM.\nA much quicker test for t[0] being GQ(16,4) is to look at the dual graph\n\n```\nsage: tt=t[0]                                                                                                                        \nsage: ig=tt.intersection_graph([1])                                                                                                  \nsage: ig.is_strongly_regular(parameters=True)                                                                                        \n(325, 68, 3, 17)\nsage: set(tt.block_sizes())                                                                                                          \n{17}\n```\nIndeed, we got the collinearity graph of GQ(s,t)=GQ(4,16), as 68=s(t+1)=4*17, lambda=s-1=3, mu=t+1=17, and each of 325 blocks has size 17 (i.e. dually each of the 325 points has 17 blocks\nof size s+1=5 on it).",
    "created_at": "2020-08-25T22:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478826",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

The non-long tests pass, but the long ones end up with

```
$ ./sage -tp 1 --long src/sage/combinat/designs/gen_quadrangles_with_spread.pyx 2>&1 >/tmp/p
Process DocTestWorker-1:
Traceback (most recent call last):
  File "/usr/lib/python3.7/multiprocessing/process.py", line 297, in _bootstrap
    self.run()
  File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 2185, in run
    task(self.options, self.outtmpfile, msgpipe, self.result_queue)
  File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 2535, in __call__
    result_queue.put(result, False)
  File "/usr/lib/python3.7/multiprocessing/queues.py", line 87, in put
    self._start_thread()
  File "/usr/lib/python3.7/multiprocessing/queues.py", line 170, in _start_thread
    self._thread.start()
  File "/usr/lib/python3.7/threading.py", line 852, in start
    _start_new_thread(self._bootstrap, ())
RuntimeError: can't start new thread
```
in 

```
sage: t[0].is_generalized_quadrangle()  # long time ## line 257 ##
```

This seems to be limited to this machine, though. If I run the test in question at the Sage prompt
it takes about 30 sec and takes a lot of RAM.
A much quicker test for t[0] being GQ(16,4) is to look at the dual graph

```
sage: tt=t[0]                                                                                                                        
sage: ig=tt.intersection_graph([1])                                                                                                  
sage: ig.is_strongly_regular(parameters=True)                                                                                        
(325, 68, 3, 17)
sage: set(tt.block_sizes())                                                                                                          
{17}
```
Indeed, we got the collinearity graph of GQ(s,t)=GQ(4,16), as 68=s(t+1)=4*17, lambda=s-1=3, mu=t+1=17, and each of 325 blocks has size 17 (i.e. dually each of the 325 points has 17 blocks
of size s+1=5 on it).



---

archive/issue_events_413176.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-25T22:15:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413176"
}
```



---

archive/issue_events_413177.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-25T22:15:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413177"
}
```



---

archive/issue_comments_478827.json:
```json
{
    "body": "Changed reviewer from **Samuel Leli\u00e8vre, ...** to **Samuel Leli\u00e8vre, Dima Pasechnik**",
    "created_at": "2020-08-25T22:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478827",
    "user": "https://github.com/dimpase"
}
```

Changed reviewer from **Samuel Lelièvre, ...** to **Samuel Lelièvre, Dima Pasechnik**



---

archive/issue_comments_478828.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/250e3d77c71dac8fd23a1184f1a52a01820d4c0e\"><code>250e3d7</code></a></td><td><code>change doctest to easier check</code></td></tr></table>\n",
    "created_at": "2020-08-26T06:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478828",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/250e3d77c71dac8fd23a1184f1a52a01820d4c0e"><code>250e3d7</code></a></td><td><code>change doctest to easier check</code></td></tr></table>




---

archive/issue_comments_478829.json:
```json
{
    "body": "Changed commit from **[`fd8d1ba`](https://github.com/sagemath/sagetrac-mirror/commit/fd8d1baa2f65ae46567d39415bba4552f7f75607)** to **[`250e3d7`](https://github.com/sagemath/sagetrac-mirror/commit/250e3d77c71dac8fd23a1184f1a52a01820d4c0e)**",
    "created_at": "2020-08-26T06:47:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478829",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fd8d1ba`](https://github.com/sagemath/sagetrac-mirror/commit/fd8d1baa2f65ae46567d39415bba4552f7f75607)** to **[`250e3d7`](https://github.com/sagemath/sagetrac-mirror/commit/250e3d77c71dac8fd23a1184f1a52a01820d4c0e)**



---

archive/issue_events_413178.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-08-26T06:47:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413178"
}
```



---

archive/issue_events_413179.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-08-26T06:47:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413179"
}
```



---

archive/issue_events_413180.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-26T07:21:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413180"
}
```



---

archive/issue_events_413181.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-26T07:21:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413181"
}
```



---

archive/issue_comments_478830.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nperhaps on another ticket one should change the is_generalised_quadrangle to use this approach, it is faster.",
    "created_at": "2020-08-26T07:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478830",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

perhaps on another ticket one should change the is_generalised_quadrangle to use this approach, it is faster.



---

archive/issue_events_413182.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-26T13:40:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413182"
}
```



---

archive/issue_events_413183.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-26T13:40:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413183"
}
```



---

archive/issue_comments_478831.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI spoke too soon - docs don't build:\n\n```\n...\n[dochtml] [combinat ] The inventory files are in local/share/doc/sage/inventory/en/reference/combinat.\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/usr/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n[dochtml]     \"__main__\", mod_spec)\n[dochtml]   File \"/usr/lib/python3.7/runpy.py\", line 85, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 1721, in main\n[dochtml]     builder()\n[dochtml]   File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 328, in _wrapper\n[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)\n[dochtml]   File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 553, in _wrapper\n[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)\n[dochtml]   File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 539, in _build_everything_except_bibliography\n[dochtml]     build_many(build_ref_doc, non_references)\n[dochtml]   File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py\", line 281, in build_many\n[dochtml]     _build_many(target, args, processes=NUM_THREADS)\n[dochtml]   File \"/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py\", line 283, in build_many\n[dochtml]     raise worker_exc.original_exception\n[dochtml] OSError: WARNING: autodoc: failed to import module 'gen_quadrangles' from module 'sage.combinat.designs'; the following exception was raised:\nmake[3]: *** [Makefile:1866: doc-html] Error 1\n```",
    "created_at": "2020-08-26T13:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478831",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">comment:18</div>

I spoke too soon - docs don't build:

```
...
[dochtml] [combinat ] The inventory files are in local/share/doc/sage/inventory/en/reference/combinat.
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[dochtml]     "__main__", mod_spec)
[dochtml]   File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 1721, in main
[dochtml]     builder()
[dochtml]   File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 328, in _wrapper
[dochtml]     getattr(get_builder(document), 'inventory')(*args, **kwds)
[dochtml]   File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 553, in _wrapper
[dochtml]     self._build_everything_except_bibliography(lang, format, *args, **kwds)
[dochtml]   File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 539, in _build_everything_except_bibliography
[dochtml]     build_many(build_ref_doc, non_references)
[dochtml]   File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/__init__.py", line 281, in build_many
[dochtml]     _build_many(target, args, processes=NUM_THREADS)
[dochtml]   File "/mnt/opt/Sage/sage-dev/local/lib/python3.7/site-packages/sage_setup/docbuild/utils.py", line 283, in build_many
[dochtml]     raise worker_exc.original_exception
[dochtml] OSError: WARNING: autodoc: failed to import module 'gen_quadrangles' from module 'sage.combinat.designs'; the following exception was raised:
make[3]: *** [Makefile:1866: doc-html] Error 1
```



---

archive/issue_comments_478832.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI suppose one needs\n\n```diff\ndiff --git a/src/doc/en/reference/combinat/module_list.rst b/src/doc/en/reference/combinat/module_list.rst\nindex 39ca27c4a6..c8eca43954 100644\n--- a/src/doc/en/reference/combinat/module_list.rst\n+++ b/src/doc/en/reference/combinat/module_list.rst\n@@ -104,7 +104,7 @@ Comprehensive Module list\n     sage/combinat/designs/difference_matrices\n     sage/combinat/designs/evenly_distributed_sets\n     sage/combinat/designs/ext_rep\n-    sage/combinat/designs/gen_quadrangles\n+    sage/combinat/designs/gen_quadrangles_with_spread\n     sage/combinat/designs/incidence_structures\n     sage/combinat/designs/latin_squares\n     sage/combinat/designs/orthogonal_arrays\ndiff --git a/src/sage/combinat/designs/__init__.py b/src/sage/combinat/designs/__init__.py\nindex f8de34936f..4808cf1a55 100644\n--- a/src/sage/combinat/designs/__init__.py\n+++ b/src/sage/combinat/designs/__init__.py\n@@ -27,7 +27,7 @@ design catalog:\n - :ref:`sage.combinat.designs.steiner_quadruple_systems`\n - :ref:`sage.combinat.designs.twographs`\n - :ref:`sage.combinat.designs.database`\n-- :ref:`sage.combinat.designs.gen_quadrangles`\n+- :ref:`sage.combinat.designs.gen_quadrangles_with_spread`\n \n **Technical things**\n \ndiff --git a/src/sage/combinat/designs/design_catalog.py b/src/sage/combinat/designs/design_catalog.py\nindex 3a3c11597a..a9572e119c 100644\n--- a/src/sage/combinat/designs/design_catalog.py\n+++ b/src/sage/combinat/designs/design_catalog.py\n@@ -59,7 +59,7 @@ This module gathers the following designs:\n     :meth:`~sage.combinat.designs.steiner_quadruple_systems.steiner_quadruple_system`\n     :meth:`~sage.combinat.designs.block_design.projective_plane`\n     :meth:`~sage.combinat.designs.biplane`\n-    :meth:`~sage.combinat.designs.gen_quadrangles`\n+    :meth:`~sage.combinat.designs.gen_quadrangles_with_spread`\n \n And the :meth:`designs.best_known_covering_design_from_LJCR\n <sage.combinat.designs.covering_design.best_known_covering_design_www>` function\n```",
    "created_at": "2020-08-26T13:57:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478832",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

I suppose one needs

```diff
diff --git a/src/doc/en/reference/combinat/module_list.rst b/src/doc/en/reference/combinat/module_list.rst
index 39ca27c4a6..c8eca43954 100644
--- a/src/doc/en/reference/combinat/module_list.rst
+++ b/src/doc/en/reference/combinat/module_list.rst
@@ -104,7 +104,7 @@ Comprehensive Module list
     sage/combinat/designs/difference_matrices
     sage/combinat/designs/evenly_distributed_sets
     sage/combinat/designs/ext_rep
-    sage/combinat/designs/gen_quadrangles
+    sage/combinat/designs/gen_quadrangles_with_spread
     sage/combinat/designs/incidence_structures
     sage/combinat/designs/latin_squares
     sage/combinat/designs/orthogonal_arrays
diff --git a/src/sage/combinat/designs/__init__.py b/src/sage/combinat/designs/__init__.py
index f8de34936f..4808cf1a55 100644
--- a/src/sage/combinat/designs/__init__.py
+++ b/src/sage/combinat/designs/__init__.py
@@ -27,7 +27,7 @@ design catalog:
 - :ref:`sage.combinat.designs.steiner_quadruple_systems`
 - :ref:`sage.combinat.designs.twographs`
 - :ref:`sage.combinat.designs.database`
-- :ref:`sage.combinat.designs.gen_quadrangles`
+- :ref:`sage.combinat.designs.gen_quadrangles_with_spread`
 
 **Technical things**
 
diff --git a/src/sage/combinat/designs/design_catalog.py b/src/sage/combinat/designs/design_catalog.py
index 3a3c11597a..a9572e119c 100644
--- a/src/sage/combinat/designs/design_catalog.py
+++ b/src/sage/combinat/designs/design_catalog.py
@@ -59,7 +59,7 @@ This module gathers the following designs:
     :meth:`~sage.combinat.designs.steiner_quadruple_systems.steiner_quadruple_system`
     :meth:`~sage.combinat.designs.block_design.projective_plane`
     :meth:`~sage.combinat.designs.biplane`
-    :meth:`~sage.combinat.designs.gen_quadrangles`
+    :meth:`~sage.combinat.designs.gen_quadrangles_with_spread`
 
 And the :meth:`designs.best_known_covering_design_from_LJCR
 <sage.combinat.designs.covering_design.best_known_covering_design_www>` function
```



---

archive/issue_comments_478833.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0463d55773dea371da684ff48732d6cbf1a2925\"><code>a0463d5</code></a></td><td><code>fix docsrtings; renamed module</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100\"><code>5d16394</code></a></td><td><code>renamed in design_catalog</code></td></tr></table>\n",
    "created_at": "2020-08-26T14:13:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478833",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0463d55773dea371da684ff48732d6cbf1a2925"><code>a0463d5</code></a></td><td><code>fix docsrtings; renamed module</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100"><code>5d16394</code></a></td><td><code>renamed in design_catalog</code></td></tr></table>




---

archive/issue_comments_478834.json:
```json
{
    "body": "Changed commit from **[`250e3d7`](https://github.com/sagemath/sagetrac-mirror/commit/250e3d77c71dac8fd23a1184f1a52a01820d4c0e)** to **[`5d16394`](https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100)**",
    "created_at": "2020-08-26T14:13:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478834",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`250e3d7`](https://github.com/sagemath/sagetrac-mirror/commit/250e3d77c71dac8fd23a1184f1a52a01820d4c0e)** to **[`5d16394`](https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100)**



---

archive/issue_events_413184.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-08-26T14:16:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413184"
}
```



---

archive/issue_events_413185.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-08-26T14:16:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413185"
}
```



---

archive/issue_events_413186.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-26T14:30:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413186"
}
```



---

archive/issue_events_413187.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-08-26T14:30:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413187"
}
```



---

archive/issue_comments_478835.json:
```json
{
    "body": "Changed branch from **[u/gh-Ivo-Maffei/gen_quad](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Ivo-Maffei/gen_quad)** to **[`5d16394`](https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100)**",
    "created_at": "2020-08-30T08:39:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478835",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-Ivo-Maffei/gen_quad](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Ivo-Maffei/gen_quad)** to **[`5d16394`](https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100)**



---

archive/issue_events_413188.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-30T08:39:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413188"
}
```



---

archive/issue_events_413189.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b1714abad397a8cd11d7c9b37f8cc1a421ba1fbf",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-30T08:39:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30223#event-413189"
}
```



---

archive/issue_comments_478836.json:
```json
{
    "body": "Changed commit from **[`5d16394`](https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100)** to none",
    "created_at": "2020-09-03T09:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478836",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`5d16394`](https://github.com/sagemath/sagetrac-mirror/commit/5d16394c5bd7ba038f2a525a4759b7c197120100)** to none



---

archive/issue_comments_478837.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@dimpase](#comment%3A3):\n> Replying to [@Ivo-Maffei](#comment%3A1):\n> > At the moment the examples at the top of the file fail and they shouldn't.\n> > In particular using the objects defined there one gets:\n> > \n> > ```\n> > sage: set(GQ2._points) == set(range(1,1106))\n> > False\n> > sage: for i in GQ2._points:\n> > ....:     if i not in range(1,1106):\n> > ....:         print(i)\n> > ....:         \n> > sage: for i in range(1,1106):\n> > ....:     if i not in GQ2._points:\n> > ....:         print(i)\n> > ....:      \n> > sage:\n> > ```\n> > I wonder if I'm missing something or if `==` is returning some weird output.\n> \n> \n> `set(GQ2._points)` consists of GAP's  Integers, but in `range(1,1106)` you have Python `<int>`.\n> \n> There is no automatic conversion between these set elements when you compare them:\n> \n> ```\n> sage: libgap(1)==int(1)\n> True\n> sage: type(libgap(1))\n> <class 'sage.libs.gap.element.GapElement_Integer'>\n> sage: set([libgap(1)])==set([int(1)])\n> False\n> ```\n> \n> \n\nTo my mind this is a serious issue, see #30498.",
    "created_at": "2020-09-03T09:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30223",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30223#issuecomment-478837",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@dimpase](#comment%3A3):
> Replying to [@Ivo-Maffei](#comment%3A1):
> > At the moment the examples at the top of the file fail and they shouldn't.
> > In particular using the objects defined there one gets:
> > 
> > ```
> > sage: set(GQ2._points) == set(range(1,1106))
> > False
> > sage: for i in GQ2._points:
> > ....:     if i not in range(1,1106):
> > ....:         print(i)
> > ....:         
> > sage: for i in range(1,1106):
> > ....:     if i not in GQ2._points:
> > ....:         print(i)
> > ....:      
> > sage:
> > ```
> > I wonder if I'm missing something or if `==` is returning some weird output.
> 
> 
> `set(GQ2._points)` consists of GAP's  Integers, but in `range(1,1106)` you have Python `<int>`.
> 
> There is no automatic conversion between these set elements when you compare them:
> 
> ```
> sage: libgap(1)==int(1)
> True
> sage: type(libgap(1))
> <class 'sage.libs.gap.element.GapElement_Integer'>
> sage: set([libgap(1)])==set([int(1)])
> False
> ```
> 
> 

To my mind this is a serious issue, see #30498.
