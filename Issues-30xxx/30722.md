# Issue 30722: Improve conda pkg-config test

archive/issues_030485.json:
```json
{
    "body": "Follow-up from #30662.\n\nThe test introduced there seems to fail in https://github.com/mkoeppe/sage/runs/1206657981:\n\n```\nchecking for x86_64-apple-darwin13.4.0-pkg-config... /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/bin/x86_64-apple-darwin13.4.0-pkg-config\nchecking pkg-config is at least version 0.29... yes\nchecking for ranlib... yes\nchecking for strip... yes\nchecking for GNU or BSD tar... /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/bin/tar\nchecking for Python... /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/bin/python\nchecking for latex... no\nconfigure: You do not have 'latex', which is recommended, but not\nconfigure: required. Latex is only really used for building pdf\nconfigure: documents and for %latex mode in the Sage notebook.\nchecking for perl... /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/bin/perl\nchecking for Perl version 5.8.0 or later... yes\nchecking whether a conda environment is active... yes\nconfigure: error: A conda environment (base) is active, but\nthe pkg-config command is not provided by the conda environment,\nwhich indicates that the conda environment is missing\nthe following conda packages required for building Sage:\n     pkg-config\nFor building Sage, either:\n- activate a conda environment that has these packages, using:\n    conda activate ENVIRONMENT\n- or install these conda packages, using\n    conda install  pkg-config\n- or deactivate conda by\n    conda deactivate\n  (this command may need to be repeated).\n```\n\nBlocker because it is a regression in platform support, compared to 9.1\n\nCC:  @dimpase @isuruf @jhpalmieri\n\nBranch/Commit: b89a54ae7cd31c421325a5b0d145b8a91d6afff2\n\nReviewer: Isuru Fernando\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30722\n\n",
    "closed_at": "2020-10-11T22:59:50Z",
    "created_at": "2020-10-05T00:00:39Z",
    "labels": [
        "component: build: configure",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Improve conda pkg-config test",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30722",
    "user": "https://github.com/mkoeppe"
}
```
Follow-up from #30662.

The test introduced there seems to fail in https://github.com/mkoeppe/sage/runs/1206657981:

```
checking for x86_64-apple-darwin13.4.0-pkg-config... /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/bin/x86_64-apple-darwin13.4.0-pkg-config
checking pkg-config is at least version 0.29... yes
checking for ranlib... yes
checking for strip... yes
checking for GNU or BSD tar... /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/bin/tar
checking for Python... /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/bin/python
checking for latex... no
configure: You do not have 'latex', which is recommended, but not
configure: required. Latex is only really used for building pdf
configure: documents and for %latex mode in the Sage notebook.
checking for perl... /Users/runner/work/sage/sage/.tox/local-conda-forge-macos-maximal/conda/bin/perl
checking for Perl version 5.8.0 or later... yes
checking whether a conda environment is active... yes
configure: error: A conda environment (base) is active, but
the pkg-config command is not provided by the conda environment,
which indicates that the conda environment is missing
the following conda packages required for building Sage:
     pkg-config
For building Sage, either:
- activate a conda environment that has these packages, using:
    conda activate ENVIRONMENT
- or install these conda packages, using
    conda install  pkg-config
- or deactivate conda by
    conda deactivate
  (this command may need to be repeated).
```

Blocker because it is a regression in platform support, compared to 9.1

CC:  @dimpase @isuruf @jhpalmieri

Branch/Commit: b89a54ae7cd31c421325a5b0d145b8a91d6afff2

Reviewer: Isuru Fernando

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30722





---

archive/issue_comments_608032.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/improve_conda_pkg_config_test\"",
    "created_at": "2020-10-05T00:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608032",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/improve_conda_pkg_config_test"



---

archive/issue_comments_608033.json:
```json
{
    "body": "Changing commit from \"\" to \"b89a54ae7cd31c421325a5b0d145b8a91d6afff2\"",
    "created_at": "2020-10-05T00:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608033",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "b89a54ae7cd31c421325a5b0d145b8a91d6afff2"



---

archive/issue_comments_608034.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2020-10-05T00:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608034",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_608035.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-10-05T00:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608035",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_608036.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-10-05T00:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608036",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_608037.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-10-05T00:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608037",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_608038.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/mkoeppe/sage/actions/runs/288489348\"",
    "created_at": "2020-10-05T00:46:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608038",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "https://github.com/mkoeppe/sage/actions/runs/288489348"



---

archive/issue_comments_608039.json:
```json
{
    "body": "<a id='comment:4'></a>This works as can be seen in https://github.com/mkoeppe/sage/runs/1206810115\n\nNeeds review",
    "created_at": "2020-10-05T19:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608039",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>This works as can be seen in https://github.com/mkoeppe/sage/runs/1206810115

Needs review



---

archive/issue_comments_608040.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/288489348\" to \"https://github.com/mkoeppe/sage/actions/runs/288489348, ...\"",
    "created_at": "2020-10-05T19:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608040",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/288489348" to "https://github.com/mkoeppe/sage/actions/runs/288489348, ..."



---

archive/issue_comments_608041.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/mkoeppe/sage/actions/runs/288489348, ...\" to \"Isuru Fernando\"",
    "created_at": "2020-10-06T16:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608041",
    "user": "https://github.com/isuruf"
}
```

Changing reviewer from "https://github.com/mkoeppe/sage/actions/runs/288489348, ..." to "Isuru Fernando"



---

archive/issue_comments_608042.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-06T16:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608042",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_608043.json:
```json
{
    "body": "<a id='comment:7'></a>Thanks.",
    "created_at": "2020-10-06T17:52:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608043",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Thanks.



---

archive/issue_comments_608044.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2020-10-11T01:27:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608044",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_608045.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -31,3 +31,4 @@\n   (this command may need to be repeated).\n ```\n \n+Blocker because it is a regression in platform support, compared to 9.1\n``````\n",
    "created_at": "2020-10-11T01:28:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608045",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -31,3 +31,4 @@
   (this command may need to be repeated).
 ```
 
+Blocker because it is a regression in platform support, compared to 9.1
``````




---

archive/issue_comments_608046.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/improve_conda_pkg_config_test\" to \"b89a54ae7cd31c421325a5b0d145b8a91d6afff2\"",
    "created_at": "2020-10-11T22:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608046",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/improve_conda_pkg_config_test" to "b89a54ae7cd31c421325a5b0d145b8a91d6afff2"



---

archive/issue_events_080065.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-11T22:59:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30722#event-80065"
}
```



---

archive/issue_comments_608047.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-10-11T22:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30722",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30722#issuecomment-608047",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
