# Issue 30130: get rid of comparison using _cmp_

archive/issues_029893.json:
```json
{
    "body": "and use `_richcmp_` instead\n\nSo far, this remains used only in complex MPC and Integer classes.\n\n\n\n**CC:**  @tscrim\n\n**Branch/Commit:** [e6963fb961493f39d1f7a186e263144b1fb4398f](https://github.com/sagemath/sagetrac-mirror/commit/e6963fb961493f39d1f7a186e263144b1fb4398f)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/30130\n\n",
    "closed_at": "2020-07-25T22:50:50Z",
    "created_at": "2020-07-13T08:46:15Z",
    "labels": [
        "component: refactoring",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "get rid of comparison using _cmp_",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30130",
    "user": "https://github.com/fchapoton"
}
```
and use `_richcmp_` instead

So far, this remains used only in complex MPC and Integer classes.



**CC:**  @tscrim

**Branch/Commit:** [e6963fb961493f39d1f7a186e263144b1fb4398f](https://github.com/sagemath/sagetrac-mirror/commit/e6963fb961493f39d1f7a186e263144b1fb4398f)

**Reviewer:** Travis Scrimshaw

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/30130





---

archive/issue_comments_565296.json:
```json
{
    "body": "**Branch:** [u/chapoton/30130](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30130)",
    "created_at": "2020-07-13T08:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565296",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/30130](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30130)



---

archive/issue_comments_565297.json:
```json
{
    "body": "**Commit:** [066b9d98ff5b850bb98c151be4ad9a80e3c32f82](https://github.com/sagemath/sagetrac-mirror/commit/066b9d98ff5b850bb98c151be4ad9a80e3c32f82)",
    "created_at": "2020-07-13T08:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565297",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [066b9d98ff5b850bb98c151be4ad9a80e3c32f82](https://github.com/sagemath/sagetrac-mirror/commit/066b9d98ff5b850bb98c151be4ad9a80e3c32f82)



---

archive/issue_comments_565298.json:
```json
{
    "body": "**Changing status** from new to needs_info.",
    "created_at": "2020-07-13T08:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565298",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from new to needs_info.



---

archive/issue_comments_565299.json:
```json
{
    "body": "<a id='comment:1'></a>\nThis seems to reveal a bug in the pickling of complex numbers. Namely\n\n```\nsage: C = MPComplexField(prec=200, rnd='RNDUU')\nsage: b = C(393.39203845902384098234098230948209384028340)\nsage: loads(dumps(b))\n393.39203845902384098234098230948209384028340000000000000000 + NaN*I\n```\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/066b9d98ff5b850bb98c151be4ad9a80e3c32f82\">066b9d9</a></td><td><code>get rid of _cmp_ comparison</code></td></tr></table>\n",
    "created_at": "2020-07-13T08:49:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565299",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
This seems to reveal a bug in the pickling of complex numbers. Namely

```
sage: C = MPComplexField(prec=200, rnd='RNDUU')
sage: b = C(393.39203845902384098234098230948209384028340)
sage: loads(dumps(b))
393.39203845902384098234098230948209384028340000000000000000 + NaN*I
```

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/066b9d98ff5b850bb98c151be4ad9a80e3c32f82">066b9d9</a></td><td><code>get rid of _cmp_ comparison</code></td></tr></table>




---

archive/issue_comments_565300.json:
```json
{
    "body": "<a id='comment:2'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44e743413a43d6f8648844c464edf3d249e365e7\">44e7434</a></td><td><code>fix the bug in complex_mpc (for string entry without imaginary part)</code></td></tr></table>\n",
    "created_at": "2020-07-13T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565300",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44e743413a43d6f8648844c464edf3d249e365e7">44e7434</a></td><td><code>fix the bug in complex_mpc (for string entry without imaginary part)</code></td></tr></table>




---

archive/issue_comments_565301.json:
```json
{
    "body": "**Changing commit** from \"[066b9d98ff5b850bb98c151be4ad9a80e3c32f82](https://github.com/sagemath/sagetrac-mirror/commit/066b9d98ff5b850bb98c151be4ad9a80e3c32f82)\" to \"[44e743413a43d6f8648844c464edf3d249e365e7](https://github.com/sagemath/sagetrac-mirror/commit/44e743413a43d6f8648844c464edf3d249e365e7)\".",
    "created_at": "2020-07-13T09:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565301",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[066b9d98ff5b850bb98c151be4ad9a80e3c32f82](https://github.com/sagemath/sagetrac-mirror/commit/066b9d98ff5b850bb98c151be4ad9a80e3c32f82)" to "[44e743413a43d6f8648844c464edf3d249e365e7](https://github.com/sagemath/sagetrac-mirror/commit/44e743413a43d6f8648844c464edf3d249e365e7)".



---

archive/issue_comments_565302.json:
```json
{
    "body": "<a id='comment:3'></a>\nShould be good to go now. Let us wait for the patchbot report.",
    "created_at": "2020-07-13T09:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565302",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
Should be good to go now. Let us wait for the patchbot report.



---

archive/issue_comments_565303.json:
```json
{
    "body": "**Changing status** from needs_info to needs_review.",
    "created_at": "2020-07-13T09:20:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565303",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_info to needs_review.



---

archive/issue_comments_565304.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2020-07-13T10:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565304",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_565305.json:
```json
{
    "body": "<a id='comment:4'></a>\nWhat a glorious day. Green bot => positive review.",
    "created_at": "2020-07-13T10:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565305",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'></a>
What a glorious day. Green bot => positive review.



---

archive/issue_comments_565306.json:
```json
{
    "body": "<a id='comment:5'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6963fb961493f39d1f7a186e263144b1fb4398f\">e6963fb</a></td><td><code>fix doc and doctests about _cmp_</code></td></tr></table>\n",
    "created_at": "2020-07-13T12:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565306",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6963fb961493f39d1f7a186e263144b1fb4398f">e6963fb</a></td><td><code>fix doc and doctests about _cmp_</code></td></tr></table>




---

archive/issue_comments_565307.json:
```json
{
    "body": "**Changing commit** from \"[44e743413a43d6f8648844c464edf3d249e365e7](https://github.com/sagemath/sagetrac-mirror/commit/44e743413a43d6f8648844c464edf3d249e365e7)\" to \"[e6963fb961493f39d1f7a186e263144b1fb4398f](https://github.com/sagemath/sagetrac-mirror/commit/e6963fb961493f39d1f7a186e263144b1fb4398f)\".",
    "created_at": "2020-07-13T12:10:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565307",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[44e743413a43d6f8648844c464edf3d249e365e7](https://github.com/sagemath/sagetrac-mirror/commit/44e743413a43d6f8648844c464edf3d249e365e7)" to "[e6963fb961493f39d1f7a186e263144b1fb4398f](https://github.com/sagemath/sagetrac-mirror/commit/e6963fb961493f39d1f7a186e263144b1fb4398f)".



---

archive/issue_comments_565308.json:
```json
{
    "body": "<a id='comment:6'></a>\nsome trivial doctest failures. Patchbot re-launched",
    "created_at": "2020-07-13T12:13:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565308",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
some trivial doctest failures. Patchbot re-launched



---

archive/issue_comments_565309.json:
```json
{
    "body": "<a id='comment:7'></a>\nOne fast patchbot is morally green. Travis, do you agree with my last commit ?",
    "created_at": "2020-07-13T15:23:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565309",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'></a>
One fast patchbot is morally green. Travis, do you agree with my last commit ?



---

archive/issue_comments_565310.json:
```json
{
    "body": "<a id='comment:8'></a>\nYep. LGTM. Thanks.",
    "created_at": "2020-07-13T23:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565310",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:8'></a>
Yep. LGTM. Thanks.



---

archive/issue_comments_565311.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-07-13T23:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565311",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_087925.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-25T22:50:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30130#event-87925"
}
```



---

archive/issue_comments_565312.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/30130](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30130)\" to \"[e6963fb961493f39d1f7a186e263144b1fb4398f](https://github.com/sagemath/sagetrac-mirror/commit/e6963fb961493f39d1f7a186e263144b1fb4398f)\".",
    "created_at": "2020-07-25T22:50:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30130",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30130#issuecomment-565312",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/30130](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30130)" to "[e6963fb961493f39d1f7a186e263144b1fb4398f](https://github.com/sagemath/sagetrac-mirror/commit/e6963fb961493f39d1f7a186e263144b1fb4398f)".
