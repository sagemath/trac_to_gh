# Issue 30528: Remove basic access to bitsets in combinatorial polyhedron

archive/issues_030291.json:
```json
{
    "assignees": [],
    "body": "This ticket removes basic access to bitsets in files related to combinatorial polyhedron and moves this to a new file `combinatorial_polyhedron/bitsets.cc`, which is more or less a copy of parts of `data_structures/bitsets.pxi`.\n\nAlso `bit_vector_operations.cc` is renamed to `bitset_operations.cc`.\n\n`bitsets.cc` should be a C++ file, because `bitset_operations.cc` will use it (and the later one needs to be C++ or C, because it needs to be able to handle macros as indicated in #27103).\n\nFollow ups:\n- Even less access to the underlying structure of faces or lists of faces by introducing structures that collect them. This will simplify the signature of `get_next_level`.\n  Currently this is `(uin64_t**, size_t, uint64_t**, uint64_t**, size_t, size_t)` and much worse for the simple/simplicial case (#30040). Eventually this should be similar to `(face_list_struct, face_list_struct, face_list_struct)` for both cases and then the underlying function can worry about `face_list_struct`. This is also more solid with regard to future changes.\n- Eventually merging both versions of `bitsets` and only having small parts in an extra C++ file that can be optimized by intrinsics.\n\n**CC:**  @tscrim @mkoeppe\n\n**Reviewer:** Travis Scrimshaw\n\nIssue created by migration from https://trac.sagemath.org/ticket/30528\n\n",
    "closed_at": "2020-12-25T14:46:08Z",
    "created_at": "2020-09-08T10:05:38Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20geometry",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove basic access to bitsets in combinatorial polyhedron",
    "type": "issue",
    "updated_at": "2020-12-25T14:46:08Z",
    "url": "https://github.com/sagemath/sage/issues/30528",
    "user": "https://github.com/kliem"
}
```
This ticket removes basic access to bitsets in files related to combinatorial polyhedron and moves this to a new file `combinatorial_polyhedron/bitsets.cc`, which is more or less a copy of parts of `data_structures/bitsets.pxi`.

Also `bit_vector_operations.cc` is renamed to `bitset_operations.cc`.

`bitsets.cc` should be a C++ file, because `bitset_operations.cc` will use it (and the later one needs to be C++ or C, because it needs to be able to handle macros as indicated in #27103).

Follow ups:
- Even less access to the underlying structure of faces or lists of faces by introducing structures that collect them. This will simplify the signature of `get_next_level`.
  Currently this is `(uin64_t**, size_t, uint64_t**, uint64_t**, size_t, size_t)` and much worse for the simple/simplicial case (#30040). Eventually this should be similar to `(face_list_struct, face_list_struct, face_list_struct)` for both cases and then the underlying function can worry about `face_list_struct`. This is also more solid with regard to future changes.
- Eventually merging both versions of `bitsets` and only having small parts in an extra C++ file that can be optimized by intrinsics.

**CC:**  @tscrim @mkoeppe

**Reviewer:** Travis Scrimshaw

Issue created by migration from https://trac.sagemath.org/ticket/30528





---

archive/issue_events_369799.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-09-08T10:05:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20geometry",
    "label_color": "08517b",
    "label_name": "component: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369799"
}
```



---

archive/issue_events_369800.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-09-08T10:05:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369800"
}
```



---

archive/issue_events_369801.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-09-08T10:05:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "008080",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369801"
}
```



---

archive/issue_events_369802.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-09-08T10:05:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369802"
}
```



---

archive/issue_events_369803.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-09-08T22:51:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369803"
}
```



---

archive/issue_events_369804.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-09-08T22:51:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369804"
}
```



---

archive/issue_comments_489528.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2020-09-08T22:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489528",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_comments_489529.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nThis LGTM although it is making me wonder if we should have our own bitset operations class in Sage. There is the C++ STL bitset, and if we do need something slightly more custom, it would be good as a C++ library that we would then interface with.",
    "created_at": "2020-09-08T22:51:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489529",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'>**Comment 2:**</a>
This LGTM although it is making me wonder if we should have our own bitset operations class in Sage. There is the C++ STL bitset, and if we do need something slightly more custom, it would be good as a C++ library that we would then interface with.



---

archive/issue_comments_489530.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nThank you.\n\n`std::bitset` isn't architecture optimized as far as I can see.\nThere is also [Roaring Bitmap](https://www.roaringbitmap.org/,) and probably much more out there. Of course it must be portable to be shipped with sage.\n\nThe idea of this ticket (and a follow up) is to get to the point, where it makes sense to try different things. Currently, whenever I try something different, there is so many places that need to be adjusted. This is annoying. So the idea is that `FaceIterator` etc. do not know how that thing works. They just use it for top level functions to e.g. intersect two faces. Some down level function can worry about how to do this.\n\nFor a good face iterator I need the following:\n\n- Constant memory usage (I'm reusing the same things over and over, I cannot afford to allocate memory each time), as far as I can see Roaring Bitmap does not provide this.\n- Use of available intrinsics. Why waste a factor of two? (For the `f_vector` this was a factor of two for the total time, not just for part of the job.)\n- Some way to deal with very sparse sets. Further down the polyhedron there will be many faces containing just a tiny portion of the vertices. This can be exploited.",
    "created_at": "2020-09-09T07:56:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489530",
    "user": "https://github.com/kliem"
}
```

<a id='comment:3'>**Comment 3:**</a>
Thank you.

`std::bitset` isn't architecture optimized as far as I can see.
There is also [Roaring Bitmap](https://www.roaringbitmap.org/,) and probably much more out there. Of course it must be portable to be shipped with sage.

The idea of this ticket (and a follow up) is to get to the point, where it makes sense to try different things. Currently, whenever I try something different, there is so many places that need to be adjusted. This is annoying. So the idea is that `FaceIterator` etc. do not know how that thing works. They just use it for top level functions to e.g. intersect two faces. Some down level function can worry about how to do this.

For a good face iterator I need the following:

- Constant memory usage (I'm reusing the same things over and over, I cannot afford to allocate memory each time), as far as I can see Roaring Bitmap does not provide this.
- Use of available intrinsics. Why waste a factor of two? (For the `f_vector` this was a factor of two for the total time, not just for part of the job.)
- Some way to deal with very sparse sets. Further down the polyhedron there will be many faces containing just a tiny portion of the vertices. This can be exploited.



---

archive/issue_comments_489531.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** This was a forced push. **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f997cec7db436d7be469cc1e37369e7b7c39ee42\">f997cec</a></td><td><code>small fixes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63b7bd60cfc649e3d4448f970295eb7b7a977adf\">63b7bd6</a></td><td><code>improvements in documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2edc3dd34c2d2c7ea08614110f8d61406abf1b0\">f2edc3d</a></td><td><code>get rid of maybe_newfaces</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dfbe81be0ee342139e8bc9e3f4d16fe58aaa691\">6dfbe81</a></td><td><code>get rid of compute_dimension_loop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2dd0723583e0d38ef9edc032d62fce102736c55\">f2dd072</a></td><td><code>do not expose the coatoms</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc8124a4986660d38297bab6723860d9bf99ed8c\">fc8124a</a></td><td><code>fix mistake</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b134d5b6f8a667083f90eb89d15fd6c0943bb97\">7b134d5</a></td><td><code>Merge branch 'u/gh-kliem/simplify_conversion_tests' of git://trac.sagemath.org/sage into u/gh-kliem/no_more_basic_access_2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/072e2001f7677b8d3e4cc316cc309662203a0a3c\">072e200</a></td><td><code>temporary commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cba37e8455ae363d493bf56ef5c177d1fa5e4e4d\">cba37e8</a></td><td><code>temporary commit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b41c77a91f6686e3a6e9a99eb78053d93a2e904\">0b41c77</a></td><td><code>remove basic acces to bitsets</code></td></tr></table>\n",
    "created_at": "2020-09-09T08:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489531",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>**Comment 4:**</a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** This was a forced push. **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f997cec7db436d7be469cc1e37369e7b7c39ee42">f997cec</a></td><td><code>small fixes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63b7bd60cfc649e3d4448f970295eb7b7a977adf">63b7bd6</a></td><td><code>improvements in documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2edc3dd34c2d2c7ea08614110f8d61406abf1b0">f2edc3d</a></td><td><code>get rid of maybe_newfaces</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dfbe81be0ee342139e8bc9e3f4d16fe58aaa691">6dfbe81</a></td><td><code>get rid of compute_dimension_loop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2dd0723583e0d38ef9edc032d62fce102736c55">f2dd072</a></td><td><code>do not expose the coatoms</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc8124a4986660d38297bab6723860d9bf99ed8c">fc8124a</a></td><td><code>fix mistake</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b134d5b6f8a667083f90eb89d15fd6c0943bb97">7b134d5</a></td><td><code>Merge branch 'u/gh-kliem/simplify_conversion_tests' of git://trac.sagemath.org/sage into u/gh-kliem/no_more_basic_access_2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/072e2001f7677b8d3e4cc316cc309662203a0a3c">072e200</a></td><td><code>temporary commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cba37e8455ae363d493bf56ef5c177d1fa5e4e4d">cba37e8</a></td><td><code>temporary commit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b41c77a91f6686e3a6e9a99eb78053d93a2e904">0b41c77</a></td><td><code>remove basic acces to bitsets</code></td></tr></table>




---

archive/issue_comments_489532.json:
```json
{
    "body": "**Changing commit** from \"[5052b06d9aaf952d127bbc9cff0abacdfda777d0](https://github.com/sagemath/sagetrac-mirror/commit/5052b06d9aaf952d127bbc9cff0abacdfda777d0)\" to \"[0b41c77a91f6686e3a6e9a99eb78053d93a2e904](https://github.com/sagemath/sagetrac-mirror/commit/0b41c77a91f6686e3a6e9a99eb78053d93a2e904)\".",
    "created_at": "2020-09-09T08:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489532",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5052b06d9aaf952d127bbc9cff0abacdfda777d0](https://github.com/sagemath/sagetrac-mirror/commit/5052b06d9aaf952d127bbc9cff0abacdfda777d0)" to "[0b41c77a91f6686e3a6e9a99eb78053d93a2e904](https://github.com/sagemath/sagetrac-mirror/commit/0b41c77a91f6686e3a6e9a99eb78053d93a2e904)".



---

archive/issue_events_369805.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-09-09T08:41:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369805"
}
```



---

archive/issue_events_369806.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-09-09T08:41:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369806"
}
```



---

archive/issue_comments_489533.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nRebased.",
    "created_at": "2020-09-09T08:42:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489533",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'>**Comment 5:**</a>
Rebased.



---

archive/issue_events_369807.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-09-09T08:42:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369807"
}
```



---

archive/issue_events_369808.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-09-09T08:42:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369808"
}
```



---

archive/issue_comments_489534.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nThank you for the explanation and the rebase.",
    "created_at": "2020-09-09T23:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489534",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'>**Comment 6:**</a>
Thank you for the explanation and the rebase.



---

archive/issue_comments_489535.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nReplying to [@kliem](#comment%3A3):\n> Thank you.\n> \n> `std::bitset` isn't architecture optimized as far as I can see.\n> There is also [Roaring Bitmap](https://www.roaringbitmap.org/,) and probably much more out there. Of course it must be portable to be shipped with sage.\n> \n> The idea of this ticket (and a follow up) is to get to the point, where it makes sense to try different things. Currently, whenever I try something different, there is so many places that need to be adjusted. This is annoying. So the idea is that `FaceIterator` etc. do not know how that thing works. They just use it for top level functions to e.g. intersect two faces. Some down level function can worry about how to do this.\n> \n> For a good face iterator I need the following:\n> \n> - Constant memory usage (I'm reusing the same things over and over, I cannot afford to allocate memory each time), as far as I can see Roaring Bitmap does not provide this.\n> - Use of available intrinsics. Why waste a factor of two? (For the `f_vector` this was a factor of two for the total time, not just for part of the job.)\n> - Some way to deal with very sparse sets. Further down the polyhedron there will be many faces containing just a tiny portion of the vertices. This can be exploited.\n\nA quick update to the explanation:\n\nI tested roaring and it performs wonderful, but only with bitsets starting with about 50,000 bits, as it stores in chunks and the chunks are set to 2^16 bits each. So this is not an option for small stuff, but very interesting if you go into very large things.",
    "created_at": "2020-11-18T08:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489535",
    "user": "https://github.com/kliem"
}
```

<a id='comment:7'>**Comment 7:**</a>
Replying to [@kliem](#comment%3A3):
> Thank you.
> 
> `std::bitset` isn't architecture optimized as far as I can see.
> There is also [Roaring Bitmap](https://www.roaringbitmap.org/,) and probably much more out there. Of course it must be portable to be shipped with sage.
> 
> The idea of this ticket (and a follow up) is to get to the point, where it makes sense to try different things. Currently, whenever I try something different, there is so many places that need to be adjusted. This is annoying. So the idea is that `FaceIterator` etc. do not know how that thing works. They just use it for top level functions to e.g. intersect two faces. Some down level function can worry about how to do this.
> 
> For a good face iterator I need the following:
> 
> - Constant memory usage (I'm reusing the same things over and over, I cannot afford to allocate memory each time), as far as I can see Roaring Bitmap does not provide this.
> - Use of available intrinsics. Why waste a factor of two? (For the `f_vector` this was a factor of two for the total time, not just for part of the job.)
> - Some way to deal with very sparse sets. Further down the polyhedron there will be many faces containing just a tiny portion of the vertices. This can be exploited.

A quick update to the explanation:

I tested roaring and it performs wonderful, but only with bitsets starting with about 50,000 bits, as it stores in chunks and the chunks are set to 2^16 bits each. So this is not an option for small stuff, but very interesting if you go into very large things.



---

archive/issue_events_369809.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-19T23:22:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369809"
}
```



---

archive/issue_events_369810.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-19T23:22:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369810"
}
```



---

archive/issue_comments_489536.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nDoesn't compile on osx\n\n```\n[sagelib-9.3.beta1] [18/20] gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -Isage/geometry/polyhedron/combinatorial_polyhedron -I./sage/libs/flint -I./sage/cpython -I./sage/ext -I/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/cysignals -I/Users/buildbot-sage/slave/sage_git/build/build/pkgs/sagelib/src -I/Users/buildbot-sage/slave/sage_git/build/local/include/python3.8 -I/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/numpy/core/include -Ibuild/cythonized -I/Users/buildbot-sage/slave/sage_git/build/local/include/python3.8 -c build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.cpp -o build/temp.macosx-10.9-x86_64-3.8/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c++11\n[sagelib-9.3.beta1] In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.cpp:2902:\n[sagelib-9.3.beta1] build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/bitsets.cc:143:12: error: no matching function for call to '__gmpn_scan1'\n[sagelib-9.3.beta1]     return mpn_scan1(&limb, 0);\n[sagelib-9.3.beta1]            ^~~~~~~~~\n[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:1828:19: note: expanded from macro 'mpn_scan1'\n[sagelib-9.3.beta1] #define mpn_scan1 __MPN(scan1)\n[sagelib-9.3.beta1]                   ^~~~~~~~~~~~\n[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:335:18: note: expanded from macro '__MPN'\n[sagelib-9.3.beta1] #define __MPN(x) __gmpn_##x\n[sagelib-9.3.beta1]                  ^~~~~~~~~~\n[sagelib-9.3.beta1] <scratch space>:6:1: note: expanded from here\n[sagelib-9.3.beta1] __gmpn_scan1\n[sagelib-9.3.beta1] ^~~~~~~~~~~~\n[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:1829:28: note: candidate function not viable: no known conversion from 'uint64_t *' (aka 'unsigned long long *') to 'mp_srcptr' (aka 'const unsigned long *') for 1st argument\n[sagelib-9.3.beta1] __GMP_DECLSPEC mp_bitcnt_t mpn_scan1 __GMP_PROTO ((mp_srcptr, mp_bitcnt_t)) __GMP_ATTRIBUTE_PURE;\n[sagelib-9.3.beta1]                            ^\n[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:1828:19: note: expanded from macro 'mpn_scan1'\n[sagelib-9.3.beta1] #define mpn_scan1 __MPN(scan1)\n[sagelib-9.3.beta1]                   ^\n[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:335:18: note: expanded from macro '__MPN'\n[sagelib-9.3.beta1] #define __MPN(x) __gmpn_##x\n[sagelib-9.3.beta1]                  ^\n[sagelib-9.3.beta1] <scratch space>:125:1: note: expanded from here\n```",
    "created_at": "2020-11-19T23:22:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489536",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:8'>**Comment 8:**</a>
Doesn't compile on osx

```
[sagelib-9.3.beta1] [18/20] gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -Isage/geometry/polyhedron/combinatorial_polyhedron -I./sage/libs/flint -I./sage/cpython -I./sage/ext -I/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/cysignals -I/Users/buildbot-sage/slave/sage_git/build/build/pkgs/sagelib/src -I/Users/buildbot-sage/slave/sage_git/build/local/include/python3.8 -I/Users/buildbot-sage/slave/sage_git/build/local/lib/python3.8/site-packages/numpy/core/include -Ibuild/cythonized -I/Users/buildbot-sage/slave/sage_git/build/local/include/python3.8 -c build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.cpp -o build/temp.macosx-10.9-x86_64-3.8/build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.o -fno-strict-aliasing -DCYTHON_CLINE_IN_TRACEBACK=1 -std=c++11
[sagelib-9.3.beta1] In file included from build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/list_of_faces.cpp:2902:
[sagelib-9.3.beta1] build/cythonized/sage/geometry/polyhedron/combinatorial_polyhedron/bitsets.cc:143:12: error: no matching function for call to '__gmpn_scan1'
[sagelib-9.3.beta1]     return mpn_scan1(&limb, 0);
[sagelib-9.3.beta1]            ^~~~~~~~~
[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:1828:19: note: expanded from macro 'mpn_scan1'
[sagelib-9.3.beta1] #define mpn_scan1 __MPN(scan1)
[sagelib-9.3.beta1]                   ^~~~~~~~~~~~
[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:335:18: note: expanded from macro '__MPN'
[sagelib-9.3.beta1] #define __MPN(x) __gmpn_##x
[sagelib-9.3.beta1]                  ^~~~~~~~~~
[sagelib-9.3.beta1] <scratch space>:6:1: note: expanded from here
[sagelib-9.3.beta1] __gmpn_scan1
[sagelib-9.3.beta1] ^~~~~~~~~~~~
[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:1829:28: note: candidate function not viable: no known conversion from 'uint64_t *' (aka 'unsigned long long *') to 'mp_srcptr' (aka 'const unsigned long *') for 1st argument
[sagelib-9.3.beta1] __GMP_DECLSPEC mp_bitcnt_t mpn_scan1 __GMP_PROTO ((mp_srcptr, mp_bitcnt_t)) __GMP_ATTRIBUTE_PURE;
[sagelib-9.3.beta1]                            ^
[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:1828:19: note: expanded from macro 'mpn_scan1'
[sagelib-9.3.beta1] #define mpn_scan1 __MPN(scan1)
[sagelib-9.3.beta1]                   ^
[sagelib-9.3.beta1] /Users/buildbot-sage/slave/sage_git/build/local/include/gmp.h:335:18: note: expanded from macro '__MPN'
[sagelib-9.3.beta1] #define __MPN(x) __gmpn_##x
[sagelib-9.3.beta1]                  ^
[sagelib-9.3.beta1] <scratch space>:125:1: note: expanded from here
```



---

archive/issue_comments_489537.json:
```json
{
    "body": "**Changing commit** from \"[0b41c77a91f6686e3a6e9a99eb78053d93a2e904](https://github.com/sagemath/sagetrac-mirror/commit/0b41c77a91f6686e3a6e9a99eb78053d93a2e904)\" to \"[6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67](https://github.com/sagemath/sagetrac-mirror/commit/6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67)\".",
    "created_at": "2020-11-20T08:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489537",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[0b41c77a91f6686e3a6e9a99eb78053d93a2e904](https://github.com/sagemath/sagetrac-mirror/commit/0b41c77a91f6686e3a6e9a99eb78053d93a2e904)" to "[6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67](https://github.com/sagemath/sagetrac-mirror/commit/6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67)".



---

archive/issue_comments_489538.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/610d7e1c15bd0753a8ec7e12d4cba65fbc198c0c\">610d7e1</a></td><td><code>Merge branch 'u/gh-kliem/no_more_basic_access' of git://trac.sagemath.org/sage into u/gh-kliem/no_more_basic_access</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67\">6fa7ac9</a></td><td><code>a workaround for mpn_scan1</code></td></tr></table>\n",
    "created_at": "2020-11-20T08:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489538",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>**Comment 9:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/610d7e1c15bd0753a8ec7e12d4cba65fbc198c0c">610d7e1</a></td><td><code>Merge branch 'u/gh-kliem/no_more_basic_access' of git://trac.sagemath.org/sage into u/gh-kliem/no_more_basic_access</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67">6fa7ac9</a></td><td><code>a workaround for mpn_scan1</code></td></tr></table>




---

archive/issue_events_369811.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-11-20T08:38:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369811"
}
```



---

archive/issue_events_369812.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-11-20T08:38:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369812"
}
```



---

archive/issue_comments_489539.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nOk, falling back to a manual `mpn_scan1` for now.\n\nIt really doesn't matter that much, because it is not less efficient then the current one and it will hopefully be removed in follow up.\n\nThis ticket is mostly about moving some function out of the \"frontend\", to account for the fact that `CombinatorialPolyhedron` does not need to know how we want to store incidences. We could use any representation and the algorithm would still work. So the `CombinatorialPolyhedron` and `FaceIterator` should not relie on implementation details of the data structure and instead use access functions.",
    "created_at": "2020-11-20T08:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489539",
    "user": "https://github.com/kliem"
}
```

<a id='comment:10'>**Comment 10:**</a>
Ok, falling back to a manual `mpn_scan1` for now.

It really doesn't matter that much, because it is not less efficient then the current one and it will hopefully be removed in follow up.

This ticket is mostly about moving some function out of the "frontend", to account for the fact that `CombinatorialPolyhedron` does not need to know how we want to store incidences. We could use any representation and the algorithm would still work. So the `CombinatorialPolyhedron` and `FaceIterator` should not relie on implementation details of the data structure and instead use access functions.



---

archive/issue_comments_489540.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\n@mkoeppe: Could you maybe check if this works on OSX? So if it compiles now and if tests in `geometry/polyhedron` pass?",
    "created_at": "2020-11-20T08:40:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489540",
    "user": "https://github.com/kliem"
}
```

<a id='comment:11'>**Comment 11:**</a>
@mkoeppe: Could you maybe check if this works on OSX? So if it compiles now and if tests in `geometry/polyhedron` pass?



---

archive/issue_comments_489541.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nReplying to [@kliem](#comment%3A11):\n> @mkoeppe: Could you maybe check if this works on OSX? So if it compiles now and if tests in `geometry/polyhedron` pass?\n\nYes, please as I don't have access to an OSX machine. `@`gh-kliem we can also hope the appropriate patchbot to come around too.",
    "created_at": "2020-11-20T08:57:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489541",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:12'>**Comment 12:**</a>
Replying to [@kliem](#comment%3A11):
> @mkoeppe: Could you maybe check if this works on OSX? So if it compiles now and if tests in `geometry/polyhedron` pass?

Yes, please as I don't have access to an OSX machine. `@`gh-kliem we can also hope the appropriate patchbot to come around too.



---

archive/issue_comments_489542.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\nhttps://github.com/kliem/sage/actions/runs/374613473\n\nEventually this will also terminate.",
    "created_at": "2020-11-20T15:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489542",
    "user": "https://github.com/kliem"
}
```

<a id='comment:13'>**Comment 13:**</a>
https://github.com/kliem/sage/actions/runs/374613473

Eventually this will also terminate.



---

archive/issue_events_369813.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-11-24T08:09:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369813"
}
```



---

archive/issue_events_369814.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-11-24T08:09:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369814"
}
```



---

archive/issue_comments_489543.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\nOk. Seems to work now. The OSX patchbot came back and it is morally green (unrelated tests fail).",
    "created_at": "2020-11-24T08:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489543",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'>**Comment 14:**</a>
Ok. Seems to work now. The OSX patchbot came back and it is morally green (unrelated tests fail).



---

archive/issue_comments_489544.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nFails on 32-bit:\n\n```\nFile \"src/sage/combinat/root_system/associahedron.py\", line 121, in sage.combinat.root_system.associahedron.Associahedron\nFailed example:\n    TestSuite(p2).run()\nExpected nothing\nGot:\n    Failure in _test_pyramid:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 7432, in _test_pyramid\n        check_pyramid_certificate(pyr, cert)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 7421, in check_pyramid_certificate\n        tester.assertTrue(any(set(f.ambient_Vrepresentation()) == others for f in P.facets()))\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/unittest/case.py\", line 765, in assertTrue\n        raise self.failureException(msg)\n    AssertionError: False is not true\n    ------------------------------------------------------------\n    The following tests failed: _test_pyramid\n**********************************************************************\nFile \"src/sage/combinat/root_system/associahedron.py\", line 123, in sage.combinat.root_system.associahedron.Associahedron\nFailed example:\n    TestSuite(p3).run()\nExpected nothing\nGot:\n    Failure in _test_an_affine_basis:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 2290, in _test_an_affine_basis\n        b = self.an_affine_basis()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 2263, in an_affine_basis\n        basis_indices.append(face[0])\n    IndexError: tuple index out of range\n    ------------------------------------------------------------\n    Failure in _test_linear_transformation:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 5353, in _test_linear_transformation\n        tester.assertEqual(self, self.linear_transformation(identity_matrix(self.ambient_dim())))\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 5286, in linear_transformation\n        homogeneous_basis = matrix(R, ( [1] + list(v) for v in self.an_affine_basis() )).transpose()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 2263, in an_affine_basis\n        basis_indices.append(face[0])\n    IndexError: tuple index out of range\n    ------------------------------------------------------------\n    Failure in _test_pyramid:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/sage_unittest.py\", line 297, in run\n        test_method(tester=tester)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 7432, in _test_pyramid\n        check_pyramid_certificate(pyr, cert)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 7421, in check_pyramid_certificate\n        tester.assertTrue(any(set(f.ambient_Vrepresentation()) == others for f in P.facets()))\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/unittest/case.py\", line 765, in assertTrue\n        raise self.failureException(msg)\n    AssertionError: False is not true\n    ------------------------------------------------------------\n    The following tests failed: _test_an_affine_basis, _test_linear_transformation, _test_pyramid\n**********************************************************************\n1 item had failures:\n   2 of  17 in sage.combinat.root_system.associahedron.Associahedron\n    [69 tests, 2 failures, 8.05 s]\n**********************************************************************\nFile \"src/sage/combinat/root_system/root_lattice_realizations.py\", line 2517, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron\nFailed example:\n    RootSystem([\"B\",3]).ambient_space().plot_hedron()\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron[2]>\", line 1, in <module>\n        RootSystem([\"B\",Integer(3)]).ambient_space().plot_hedron()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py\", line 2551, in plot_hedron\n        return Polyhedron(vertices=vertices).plot()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 1068, in plot\n        projection = project(self, orthonormal)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 1056, in project\n        return polyhedron.projection()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 7661, in projection\n        self.projection = Projection(self)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 372, in __init__\n        self._init_from_3d(polyhedron)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 667, in _init_from_3d\n        self._init_lines_arrows(polyhedron)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 709, in _init_lines_arrows\n        if polyhedron.vertex_adjacency_matrix()[i,j] == 0:\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)\n        self.cache = f(self._instance)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 2692, in vertex_adjacency_matrix\n        return self._vertex_adjacency_matrix()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 471, in _vertex_adjacency_matrix\n        face_lattice = self.face_lattice()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 6498, in face_lattice\n        return FiniteLatticePoset(self.hasse_diagram())\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)\n        self.cache = f(self._instance)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 6526, in hasse_diagram\n        return D.relabel(index_to_polyhedron_face, inplace=False, immutable=True)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 21431, in relabel\n        perm2 = G.relabel(perm,\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 21499, in relabel\n        raise NotImplementedError(\"Non injective relabeling\")\n    NotImplementedError: Non injective relabeling\n**********************************************************************\nFile \"src/sage/combinat/root_system/root_lattice_realizations.py\", line 2519, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron\nFailed example:\n    RootSystem([\"C\",3]).ambient_space().plot_hedron()\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron[3]>\", line 1, in <module>\n        RootSystem([\"C\",Integer(3)]).ambient_space().plot_hedron()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py\", line 2551, in plot_hedron\n        return Polyhedron(vertices=vertices).plot()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 1068, in plot\n        projection = project(self, orthonormal)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 1056, in project\n        return polyhedron.projection()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 7661, in projection\n        self.projection = Projection(self)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 372, in __init__\n        self._init_from_3d(polyhedron)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 667, in _init_from_3d\n        self._init_lines_arrows(polyhedron)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 709, in _init_lines_arrows\n        if polyhedron.vertex_adjacency_matrix()[i,j] == 0:\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)\n        self.cache = f(self._instance)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 2692, in vertex_adjacency_matrix\n        return self._vertex_adjacency_matrix()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 471, in _vertex_adjacency_matrix\n        face_lattice = self.face_lattice()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 6498, in face_lattice\n        return FiniteLatticePoset(self.hasse_diagram())\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)\n        self.cache = f(self._instance)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 6526, in hasse_diagram\n        return D.relabel(index_to_polyhedron_face, inplace=False, immutable=True)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 21431, in relabel\n        perm2 = G.relabel(perm,\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 21499, in relabel\n        raise NotImplementedError(\"Non injective relabeling\")\n    NotImplementedError: Non injective relabeling\n**********************************************************************\nFile \"src/sage/combinat/root_system/root_lattice_realizations.py\", line 2527, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron\nFailed example:\n    RootSystem([\"F\",4]).ambient_space().plot_hedron() # long time\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron[5]>\", line 1, in <module>\n        RootSystem([\"F\",Integer(4)]).ambient_space().plot_hedron() # long time\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py\", line 2551, in plot_hedron\n        return Polyhedron(vertices=vertices).plot()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 1068, in plot\n        projection = project(self, orthonormal)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 1064, in project\n        return polyhedron.schlegel_projection(position=position)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 7768, in schlegel_projection\n        proj = self.projection()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 7661, in projection\n        self.projection = Projection(self)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 375, in __init__\n        self._init_lines_arrows(polyhedron)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 709, in _init_lines_arrows\n        if polyhedron.vertex_adjacency_matrix()[i,j] == 0:\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)\n        self.cache = f(self._instance)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 2692, in vertex_adjacency_matrix\n        return self._vertex_adjacency_matrix()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 471, in _vertex_adjacency_matrix\n        face_lattice = self.face_lattice()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 6498, in face_lattice\n        return FiniteLatticePoset(self.hasse_diagram())\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)\n        self.cache = f(self._instance)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 6526, in hasse_diagram\n        return D.relabel(index_to_polyhedron_face, inplace=False, immutable=True)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 21431, in relabel\n        perm2 = G.relabel(perm,\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 21499, in relabel\n        raise NotImplementedError(\"Non injective relabeling\")\n    NotImplementedError: Non injective relabeling\n**********************************************************************\n1 item had failures:\n   3 of   9 in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron\n    [645 tests, 3 failures, 54.31 s]\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/backend_cdd.py\", line 559, in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd._init_from_Vrepresentation_and_Hrepresentation\nFailed example:\n    P.is_combinatorially_isomorphic(Q)\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/backend_cdd.py\", line 562, in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd._init_from_Vrepresentation_and_Hrepresentation\nFailed example:\n    P.is_combinatorially_isomorphic(R)\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   2 of  20 in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd._init_from_Vrepresentation_and_Hrepresentation\n    [67 tests, 2 failures, 1.75 s]\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 1052, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.incidence_matrix\nFailed example:\n    C.incidence_matrix() == P.incidence_matrix()\nExpected:\n    True\nGot:\n    False\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 2285, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.face_iter\nFailed example:\n    face.ambient_Vrepresentation()\nExpected:\n    (A vertex at (1, 3, 2, 5, 4),\n     A vertex at (2, 3, 1, 5, 4),\n     A vertex at (3, 1, 2, 5, 4),\n     A vertex at (3, 2, 1, 5, 4),\n     A vertex at (2, 1, 3, 5, 4),\n     A vertex at (1, 2, 3, 5, 4))\nGot:\n    (A vertex at (1, 3, 2, 5, 4),\n     A vertex at (3, 1, 2, 5, 4),\n     A vertex at (3, 2, 1, 5, 4),\n     A vertex at (2, 1, 3, 5, 4),\n     A vertex at (1, 2, 3, 5, 4))\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 2294, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.face_iter\nFailed example:\n    face.ambient_Vrepresentation()\nExpected:\n    (A vertex at (2, 1, 4, 5, 3),\n     A vertex at (3, 2, 4, 5, 1),\n     A vertex at (3, 1, 4, 5, 2),\n     A vertex at (1, 3, 4, 5, 2),\n     A vertex at (1, 2, 4, 5, 3),\n     A vertex at (2, 3, 4, 5, 1))\nGot:\n    (A vertex at (3, 2, 4, 5, 1),\n     A vertex at (3, 1, 4, 5, 2),\n     A vertex at (1, 3, 4, 5, 2),\n     A vertex at (1, 2, 4, 5, 3),\n     A vertex at (2, 3, 4, 5, 1))\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx\", line 2311, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.face_iter\nFailed example:\n    face.ambient_V_indices()\nExpected:\n    (32, 89, 90, 94)\nGot:\n    (89, 90, 94)\n**********************************************************************\n2 items had failures:\n   3 of  20 in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.face_iter\n   1 of  25 in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.incidence_matrix\n    [572 tests, 4 failures, 1.40 s]\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx\", line 421, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_Vrepresentation\nFailed example:\n    face.ambient_Vrepresentation()\nExpected:\n    (A vertex at (1, 3, 2, 5, 4),\n     A vertex at (2, 3, 1, 5, 4),\n     A vertex at (3, 1, 2, 5, 4),\n     A vertex at (3, 2, 1, 5, 4),\n     A vertex at (2, 1, 3, 5, 4),\n     A vertex at (1, 2, 3, 5, 4))\nGot:\n    (A vertex at (1, 3, 2, 5, 4),\n     A vertex at (3, 1, 2, 5, 4),\n     A vertex at (3, 2, 1, 5, 4),\n     A vertex at (2, 1, 3, 5, 4),\n     A vertex at (1, 2, 3, 5, 4))\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx\", line 429, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_Vrepresentation\nFailed example:\n    face.ambient_Vrepresentation()\nExpected:\n    (A vertex at (2, 1, 4, 5, 3),\n     A vertex at (3, 2, 4, 5, 1),\n     A vertex at (3, 1, 4, 5, 2),\n     A vertex at (1, 3, 4, 5, 2),\n     A vertex at (1, 2, 4, 5, 3),\n     A vertex at (2, 3, 4, 5, 1))\nGot:\n    (A vertex at (3, 2, 4, 5, 1),\n     A vertex at (3, 1, 4, 5, 2),\n     A vertex at (1, 3, 4, 5, 2),\n     A vertex at (1, 2, 4, 5, 3),\n     A vertex at (2, 3, 4, 5, 1))\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx\", line 485, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_V_indices\nFailed example:\n    next(it).ambient_V_indices()\nExpected:\n    (32, 91, 92, 93, 94, 95)\nGot:\n    (91, 92, 93, 94, 95)\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx\", line 487, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_V_indices\nFailed example:\n    next(it).ambient_V_indices()\nExpected:\n    (32, 89, 90, 94)\nGot:\n    (89, 90, 94)\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx\", line 546, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.Vrepr\nFailed example:\n    face.Vrepr()\nExpected:\n    doctest:...: DeprecationWarning: the method Vrepr of CombinatorialPolyhedron is deprecated; use ambient_V_indices or ambient_Vrepresentation\n    See https://trac.sagemath.org/28616 for details.\n    (A vertex at (1, 3, 2, 5, 4),\n     A vertex at (2, 3, 1, 5, 4),\n     A vertex at (3, 1, 2, 5, 4),\n     A vertex at (3, 2, 1, 5, 4),\n     A vertex at (2, 1, 3, 5, 4),\n     A vertex at (1, 2, 3, 5, 4))\nGot:\n    doctest:warning\n      File \"/var/lib/buildbot/slave/sage_git/build/src/bin/sage-runtests\", line 182, in <module>\n        err = DC.run()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/control.py\", line 1237, in run\n        self.run_doctests()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/control.py\", line 938, in run_doctests\n        self.dispatcher.dispatch()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2052, in dispatch\n        self.parallel_dispatch()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1947, in parallel_dispatch\n        w.start()  # This might take some time\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2219, in start\n        super(DocTestWorker, self).start()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/process.py\", line 121, in start\n        self._popen = self._Popen(self)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/context.py\", line 224, in _Popen\n        return _default_context.get_context().Process._Popen(process_obj)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/context.py\", line 277, in _Popen\n        return Popen(process_obj)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/popen_fork.py\", line 19, in __init__\n        self._launch(process_obj)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/popen_fork.py\", line 75, in _launch\n        code = process_obj._bootstrap(parent_sentinel=child_r)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/process.py\", line 315, in _bootstrap\n        self.run()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2191, in run\n        task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2520, in __call__\n        doctests, extras = self._run(runner, options, results)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2567, in _run\n        result = runner.run(test)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 918, in run\n        return self._run(test, compileflags, out)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.Vrepr[4]>\", line 1, in <module>\n        face.Vrepr()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/superseded.py\", line 100, in deprecation\n        warning(trac_number, message, DeprecationWarning, stacklevel)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/superseded.py\", line 146, in warning\n        warn(message, warning_class, stacklevel)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    DeprecationWarning: the method Vrepr of CombinatorialPolyhedron is deprecated; use ambient_V_indices or ambient_Vrepresentation\n    See https://trac.sagemath.org/28616 for details.\n    (A vertex at (1, 3, 2, 5, 4),\n     A vertex at (3, 1, 2, 5, 4),\n     A vertex at (3, 2, 1, 5, 4),\n     A vertex at (2, 1, 3, 5, 4),\n     A vertex at (1, 2, 3, 5, 4))\n**********************************************************************\n3 items had failures:\n   1 of   6 in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.Vrepr\n   2 of  10 in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_V_indices\n   2 of  11 in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_Vrepresentation\n    [157 tests, 5 failures, 1.25 s]\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx\", line 509, in sage.geometry.polyhedron.combinatorial_polyhedron.conversions.?\nFailed example:\n    for _ in range(10):\n        st = set(randint(0,127) for i in range(40))\n        tup = tuple(sorted(tuple(st)))\n        faces = _Vrep_list_to_bit_rep_wrapper(tup)\n        output = _bit_rep_to_Vrep_list_wrapper(faces, 0)\n        if not tup == output:\n            print('``bit_rep_to_Vrep_list`` does not behave',\n                  'as the inverse of ``Vrep_list_to_bit_rep``')\nExpected nothing\nGot:\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``\n**********************************************************************\n1 item had failures:\n   1 of  20 in sage.geometry.polyhedron.combinatorial_polyhedron.conversions.?\n    [63 tests, 1 failure, 0.29 s]\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/base.py\", line 4859, in sage.geometry.polyhedron.base.Polyhedron_base.join\nFailed example:\n    C.join(S).is_combinatorially_isomorphic(C.pyramid())\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n1 item had failures:\n   1 of  15 in sage.geometry.polyhedron.base.Polyhedron_base.join\n    [1600 tests, 1 failure, 42.35 s]\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 940, in sage.geometry.polyhedron.library.Polytopes.great_rhombicuboctahedron\nFailed example:\n    sum(1 for f in gr.facets() if len(f.vertices()) == 6)\nExpected:\n    8\nGot:\n    0\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 942, in sage.geometry.polyhedron.library.Polytopes.great_rhombicuboctahedron\nFailed example:\n    sum(1 for f in gr.facets() if len(f.vertices()) == 8)\nExpected:\n    6\nGot:\n    4\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 1440, in sage.geometry.polyhedron.library.Polytopes.buckyball\nFailed example:\n    sum(1 for f in bb.facets() if len(f.vertices()) == 5)\nExpected:\n    12\nGot:\n    3\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 1442, in sage.geometry.polyhedron.library.Polytopes.buckyball\nFailed example:\n    sum(1 for f in bb.facets() if len(f.vertices()) == 6)\nExpected:\n    20\nGot:\n    2\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 1615, in sage.geometry.polyhedron.library.Polytopes.truncated_dodecahedron\nFailed example:\n    sum(1 for f in td.facets() if len(f.vertices()) == 3)\nExpected:\n    20\nGot:\n    8\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 1617, in sage.geometry.polyhedron.library.Polytopes.truncated_dodecahedron\nFailed example:\n    sum(1 for f in td.facets() if len(f.vertices()) == 10)\nExpected:\n    12\nGot:\n    1\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 1868, in sage.geometry.polyhedron.library.Polytopes.truncated_icosidodecahedron\nFailed example:\n    sum(1 for f in ti.facets() if len(f.vertices()) == 4)\nExpected:\n    30\nGot:\n    21\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 1870, in sage.geometry.polyhedron.library.Polytopes.truncated_icosidodecahedron\nFailed example:\n    sum(1 for f in ti.facets() if len(f.vertices()) == 6)\nExpected:\n    20\nGot:\n    3\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/library.py\", line 1872, in sage.geometry.polyhedron.library.Polytopes.truncated_icosidodecahedron\nFailed example:\n    sum(1 for f in ti.facets() if len(f.vertices()) == 10)\nExpected:\n    12\nGot:\n    0\n**********************************************************************\n4 items had failures:\n   2 of   9 in sage.geometry.polyhedron.library.Polytopes.buckyball\n   2 of   8 in sage.geometry.polyhedron.library.Polytopes.great_rhombicuboctahedron\n   2 of   9 in sage.geometry.polyhedron.library.Polytopes.truncated_dodecahedron\n   3 of  10 in sage.geometry.polyhedron.library.Polytopes.truncated_icosidodecahedron\n    [307 tests, 9 failures, 52.94 s]\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/plot.py\", line 452, in sage.geometry.polyhedron.plot.Projection.stereographic\nFailed example:\n    proj = Projection(polytopes.buckyball())  #long time\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.plot.Projection.stereographic[1]>\", line 1, in <module>\n        proj = Projection(polytopes.buckyball())  #long time\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 372, in __init__\n        self._init_from_3d(polyhedron)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 667, in _init_from_3d\n        self._init_lines_arrows(polyhedron)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 709, in _init_lines_arrows\n        if polyhedron.vertex_adjacency_matrix()[i,j] == 0:\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)\n        self.cache = f(self._instance)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 2692, in vertex_adjacency_matrix\n        return self._vertex_adjacency_matrix()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 471, in _vertex_adjacency_matrix\n        face_lattice = self.face_lattice()\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 6498, in face_lattice\n        return FiniteLatticePoset(self.hasse_diagram())\n      File \"sage/misc/cachefunc.pyx\", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)\n        self.cache = f(self._instance)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py\", line 6526, in hasse_diagram\n        return D.relabel(index_to_polyhedron_face, inplace=False, immutable=True)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 21431, in relabel\n        perm2 = G.relabel(perm,\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py\", line 21499, in relabel\n        raise NotImplementedError(\"Non injective relabeling\")\n    NotImplementedError: Non injective relabeling\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/plot.py\", line 453, in sage.geometry.polyhedron.plot.Projection.stereographic\nFailed example:\n    proj                                      #long time\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.plot.Projection.stereographic[2]>\", line 1, in <module>\n        proj                                      #long time\n    NameError: name 'proj' is not defined\n**********************************************************************\nFile \"src/sage/geometry/polyhedron/plot.py\", line 455, in sage.geometry.polyhedron.plot.Projection.stereographic\nFailed example:\n    proj.stereographic([5,2,3]).plot()        #long time\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 720, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1145, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.plot.Projection.stereographic[3]>\", line 1, in <module>\n        proj.stereographic([Integer(5),Integer(2),Integer(3)]).plot()        #long time\n    NameError: name 'proj' is not defined\n**********************************************************************\n1 item had failures:\n   3 of   6 in sage.geometry.polyhedron.plot.Projection.stereographic\n    [239 tests, 3 failures, 8.48 s]\nR[write to console]: Warning messages:\nR[write to console]: 1: \nR[write to console]: In sage10 + sage6 :\nR[write to console]: \n \nR[write to console]:  longer object length is not a multiple of shorter object length\nR[write to console]: 2: \nR[write to console]: In sqrt(sage10) :\nR[write to console]:  NaNs produced\nR[write to console]: 3: \nR[write to console]: In sqrt(sage4) :\nR[write to console]:  NaNs produced\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/combinat/root_system/associahedron.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/combinat/root_system/root_lattice_realizations.py  # 3 doctests failed\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/backend_cdd.py  # 2 doctests failed\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx  # 4 doctests failed\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx  # 5 doctests failed\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/base.py  # 1 doctest failed\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/library.py  # 9 doctests failed\nsage -t --long --random-seed=0 src/sage/geometry/polyhedron/plot.py  # 3 doctests failed\n\n```",
    "created_at": "2020-11-26T20:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489544",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:15'>**Comment 15:**</a>
Fails on 32-bit:

```
File "src/sage/combinat/root_system/associahedron.py", line 121, in sage.combinat.root_system.associahedron.Associahedron
Failed example:
    TestSuite(p2).run()
Expected nothing
Got:
    Failure in _test_pyramid:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 7432, in _test_pyramid
        check_pyramid_certificate(pyr, cert)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 7421, in check_pyramid_certificate
        tester.assertTrue(any(set(f.ambient_Vrepresentation()) == others for f in P.facets()))
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/unittest/case.py", line 765, in assertTrue
        raise self.failureException(msg)
    AssertionError: False is not true
    ------------------------------------------------------------
    The following tests failed: _test_pyramid
**********************************************************************
File "src/sage/combinat/root_system/associahedron.py", line 123, in sage.combinat.root_system.associahedron.Associahedron
Failed example:
    TestSuite(p3).run()
Expected nothing
Got:
    Failure in _test_an_affine_basis:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 2290, in _test_an_affine_basis
        b = self.an_affine_basis()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 2263, in an_affine_basis
        basis_indices.append(face[0])
    IndexError: tuple index out of range
    ------------------------------------------------------------
    Failure in _test_linear_transformation:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 5353, in _test_linear_transformation
        tester.assertEqual(self, self.linear_transformation(identity_matrix(self.ambient_dim())))
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 5286, in linear_transformation
        homogeneous_basis = matrix(R, ( [1] + list(v) for v in self.an_affine_basis() )).transpose()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 2263, in an_affine_basis
        basis_indices.append(face[0])
    IndexError: tuple index out of range
    ------------------------------------------------------------
    Failure in _test_pyramid:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/sage_unittest.py", line 297, in run
        test_method(tester=tester)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 7432, in _test_pyramid
        check_pyramid_certificate(pyr, cert)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 7421, in check_pyramid_certificate
        tester.assertTrue(any(set(f.ambient_Vrepresentation()) == others for f in P.facets()))
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/unittest/case.py", line 765, in assertTrue
        raise self.failureException(msg)
    AssertionError: False is not true
    ------------------------------------------------------------
    The following tests failed: _test_an_affine_basis, _test_linear_transformation, _test_pyramid
**********************************************************************
1 item had failures:
   2 of  17 in sage.combinat.root_system.associahedron.Associahedron
    [69 tests, 2 failures, 8.05 s]
**********************************************************************
File "src/sage/combinat/root_system/root_lattice_realizations.py", line 2517, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron
Failed example:
    RootSystem(["B",3]).ambient_space().plot_hedron()
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron[2]>", line 1, in <module>
        RootSystem(["B",Integer(3)]).ambient_space().plot_hedron()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py", line 2551, in plot_hedron
        return Polyhedron(vertices=vertices).plot()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 1068, in plot
        projection = project(self, orthonormal)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 1056, in project
        return polyhedron.projection()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 7661, in projection
        self.projection = Projection(self)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 372, in __init__
        self._init_from_3d(polyhedron)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 667, in _init_from_3d
        self._init_lines_arrows(polyhedron)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 709, in _init_lines_arrows
        if polyhedron.vertex_adjacency_matrix()[i,j] == 0:
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)
        self.cache = f(self._instance)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 2692, in vertex_adjacency_matrix
        return self._vertex_adjacency_matrix()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 471, in _vertex_adjacency_matrix
        face_lattice = self.face_lattice()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 6498, in face_lattice
        return FiniteLatticePoset(self.hasse_diagram())
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)
        self.cache = f(self._instance)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 6526, in hasse_diagram
        return D.relabel(index_to_polyhedron_face, inplace=False, immutable=True)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 21431, in relabel
        perm2 = G.relabel(perm,
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 21499, in relabel
        raise NotImplementedError("Non injective relabeling")
    NotImplementedError: Non injective relabeling
**********************************************************************
File "src/sage/combinat/root_system/root_lattice_realizations.py", line 2519, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron
Failed example:
    RootSystem(["C",3]).ambient_space().plot_hedron()
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron[3]>", line 1, in <module>
        RootSystem(["C",Integer(3)]).ambient_space().plot_hedron()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py", line 2551, in plot_hedron
        return Polyhedron(vertices=vertices).plot()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 1068, in plot
        projection = project(self, orthonormal)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 1056, in project
        return polyhedron.projection()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 7661, in projection
        self.projection = Projection(self)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 372, in __init__
        self._init_from_3d(polyhedron)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 667, in _init_from_3d
        self._init_lines_arrows(polyhedron)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 709, in _init_lines_arrows
        if polyhedron.vertex_adjacency_matrix()[i,j] == 0:
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)
        self.cache = f(self._instance)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 2692, in vertex_adjacency_matrix
        return self._vertex_adjacency_matrix()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 471, in _vertex_adjacency_matrix
        face_lattice = self.face_lattice()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 6498, in face_lattice
        return FiniteLatticePoset(self.hasse_diagram())
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)
        self.cache = f(self._instance)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 6526, in hasse_diagram
        return D.relabel(index_to_polyhedron_face, inplace=False, immutable=True)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 21431, in relabel
        perm2 = G.relabel(perm,
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 21499, in relabel
        raise NotImplementedError("Non injective relabeling")
    NotImplementedError: Non injective relabeling
**********************************************************************
File "src/sage/combinat/root_system/root_lattice_realizations.py", line 2527, in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron
Failed example:
    RootSystem(["F",4]).ambient_space().plot_hedron() # long time
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron[5]>", line 1, in <module>
        RootSystem(["F",Integer(4)]).ambient_space().plot_hedron() # long time
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py", line 2551, in plot_hedron
        return Polyhedron(vertices=vertices).plot()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 1068, in plot
        projection = project(self, orthonormal)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 1064, in project
        return polyhedron.schlegel_projection(position=position)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 7768, in schlegel_projection
        proj = self.projection()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 7661, in projection
        self.projection = Projection(self)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 375, in __init__
        self._init_lines_arrows(polyhedron)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 709, in _init_lines_arrows
        if polyhedron.vertex_adjacency_matrix()[i,j] == 0:
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)
        self.cache = f(self._instance)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 2692, in vertex_adjacency_matrix
        return self._vertex_adjacency_matrix()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 471, in _vertex_adjacency_matrix
        face_lattice = self.face_lattice()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 6498, in face_lattice
        return FiniteLatticePoset(self.hasse_diagram())
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)
        self.cache = f(self._instance)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 6526, in hasse_diagram
        return D.relabel(index_to_polyhedron_face, inplace=False, immutable=True)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 21431, in relabel
        perm2 = G.relabel(perm,
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 21499, in relabel
        raise NotImplementedError("Non injective relabeling")
    NotImplementedError: Non injective relabeling
**********************************************************************
1 item had failures:
   3 of   9 in sage.combinat.root_system.root_lattice_realizations.RootLatticeRealizations.ParentMethods.plot_hedron
    [645 tests, 3 failures, 54.31 s]
**********************************************************************
File "src/sage/geometry/polyhedron/backend_cdd.py", line 559, in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd._init_from_Vrepresentation_and_Hrepresentation
Failed example:
    P.is_combinatorially_isomorphic(Q)
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/geometry/polyhedron/backend_cdd.py", line 562, in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd._init_from_Vrepresentation_and_Hrepresentation
Failed example:
    P.is_combinatorially_isomorphic(R)
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   2 of  20 in sage.geometry.polyhedron.backend_cdd.Polyhedron_RDF_cdd._init_from_Vrepresentation_and_Hrepresentation
    [67 tests, 2 failures, 1.75 s]
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 1052, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.incidence_matrix
Failed example:
    C.incidence_matrix() == P.incidence_matrix()
Expected:
    True
Got:
    False
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 2285, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.face_iter
Failed example:
    face.ambient_Vrepresentation()
Expected:
    (A vertex at (1, 3, 2, 5, 4),
     A vertex at (2, 3, 1, 5, 4),
     A vertex at (3, 1, 2, 5, 4),
     A vertex at (3, 2, 1, 5, 4),
     A vertex at (2, 1, 3, 5, 4),
     A vertex at (1, 2, 3, 5, 4))
Got:
    (A vertex at (1, 3, 2, 5, 4),
     A vertex at (3, 1, 2, 5, 4),
     A vertex at (3, 2, 1, 5, 4),
     A vertex at (2, 1, 3, 5, 4),
     A vertex at (1, 2, 3, 5, 4))
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 2294, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.face_iter
Failed example:
    face.ambient_Vrepresentation()
Expected:
    (A vertex at (2, 1, 4, 5, 3),
     A vertex at (3, 2, 4, 5, 1),
     A vertex at (3, 1, 4, 5, 2),
     A vertex at (1, 3, 4, 5, 2),
     A vertex at (1, 2, 4, 5, 3),
     A vertex at (2, 3, 4, 5, 1))
Got:
    (A vertex at (3, 2, 4, 5, 1),
     A vertex at (3, 1, 4, 5, 2),
     A vertex at (1, 3, 4, 5, 2),
     A vertex at (1, 2, 4, 5, 3),
     A vertex at (2, 3, 4, 5, 1))
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx", line 2311, in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.face_iter
Failed example:
    face.ambient_V_indices()
Expected:
    (32, 89, 90, 94)
Got:
    (89, 90, 94)
**********************************************************************
2 items had failures:
   3 of  20 in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.face_iter
   1 of  25 in sage.geometry.polyhedron.combinatorial_polyhedron.base.CombinatorialPolyhedron.incidence_matrix
    [572 tests, 4 failures, 1.40 s]
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx", line 421, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_Vrepresentation
Failed example:
    face.ambient_Vrepresentation()
Expected:
    (A vertex at (1, 3, 2, 5, 4),
     A vertex at (2, 3, 1, 5, 4),
     A vertex at (3, 1, 2, 5, 4),
     A vertex at (3, 2, 1, 5, 4),
     A vertex at (2, 1, 3, 5, 4),
     A vertex at (1, 2, 3, 5, 4))
Got:
    (A vertex at (1, 3, 2, 5, 4),
     A vertex at (3, 1, 2, 5, 4),
     A vertex at (3, 2, 1, 5, 4),
     A vertex at (2, 1, 3, 5, 4),
     A vertex at (1, 2, 3, 5, 4))
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx", line 429, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_Vrepresentation
Failed example:
    face.ambient_Vrepresentation()
Expected:
    (A vertex at (2, 1, 4, 5, 3),
     A vertex at (3, 2, 4, 5, 1),
     A vertex at (3, 1, 4, 5, 2),
     A vertex at (1, 3, 4, 5, 2),
     A vertex at (1, 2, 4, 5, 3),
     A vertex at (2, 3, 4, 5, 1))
Got:
    (A vertex at (3, 2, 4, 5, 1),
     A vertex at (3, 1, 4, 5, 2),
     A vertex at (1, 3, 4, 5, 2),
     A vertex at (1, 2, 4, 5, 3),
     A vertex at (2, 3, 4, 5, 1))
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx", line 485, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_V_indices
Failed example:
    next(it).ambient_V_indices()
Expected:
    (32, 91, 92, 93, 94, 95)
Got:
    (91, 92, 93, 94, 95)
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx", line 487, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_V_indices
Failed example:
    next(it).ambient_V_indices()
Expected:
    (32, 89, 90, 94)
Got:
    (89, 90, 94)
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx", line 546, in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.Vrepr
Failed example:
    face.Vrepr()
Expected:
    doctest:...: DeprecationWarning: the method Vrepr of CombinatorialPolyhedron is deprecated; use ambient_V_indices or ambient_Vrepresentation
    See https://trac.sagemath.org/28616 for details.
    (A vertex at (1, 3, 2, 5, 4),
     A vertex at (2, 3, 1, 5, 4),
     A vertex at (3, 1, 2, 5, 4),
     A vertex at (3, 2, 1, 5, 4),
     A vertex at (2, 1, 3, 5, 4),
     A vertex at (1, 2, 3, 5, 4))
Got:
    doctest:warning
      File "/var/lib/buildbot/slave/sage_git/build/src/bin/sage-runtests", line 182, in <module>
        err = DC.run()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/control.py", line 1237, in run
        self.run_doctests()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/control.py", line 938, in run_doctests
        self.dispatcher.dispatch()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2052, in dispatch
        self.parallel_dispatch()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1947, in parallel_dispatch
        w.start()  # This might take some time
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2219, in start
        super(DocTestWorker, self).start()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/process.py", line 121, in start
        self._popen = self._Popen(self)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/context.py", line 224, in _Popen
        return _default_context.get_context().Process._Popen(process_obj)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/context.py", line 277, in _Popen
        return Popen(process_obj)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/popen_fork.py", line 19, in __init__
        self._launch(process_obj)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/popen_fork.py", line 75, in _launch
        code = process_obj._bootstrap(parent_sentinel=child_r)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/multiprocessing/process.py", line 315, in _bootstrap
        self.run()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2191, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2520, in __call__
        doctests, extras = self._run(runner, options, results)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 2567, in _run
        result = runner.run(test)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 918, in run
        return self._run(test, compileflags, out)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.Vrepr[4]>", line 1, in <module>
        face.Vrepr()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/superseded.py", line 100, in deprecation
        warning(trac_number, message, DeprecationWarning, stacklevel)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/misc/superseded.py", line 146, in warning
        warn(message, warning_class, stacklevel)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    DeprecationWarning: the method Vrepr of CombinatorialPolyhedron is deprecated; use ambient_V_indices or ambient_Vrepresentation
    See https://trac.sagemath.org/28616 for details.
    (A vertex at (1, 3, 2, 5, 4),
     A vertex at (3, 1, 2, 5, 4),
     A vertex at (3, 2, 1, 5, 4),
     A vertex at (2, 1, 3, 5, 4),
     A vertex at (1, 2, 3, 5, 4))
**********************************************************************
3 items had failures:
   1 of   6 in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.Vrepr
   2 of  10 in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_V_indices
   2 of  11 in sage.geometry.polyhedron.combinatorial_polyhedron.combinatorial_face.CombinatorialFace.ambient_Vrepresentation
    [157 tests, 5 failures, 1.25 s]
**********************************************************************
File "src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx", line 509, in sage.geometry.polyhedron.combinatorial_polyhedron.conversions.?
Failed example:
    for _ in range(10):
        st = set(randint(0,127) for i in range(40))
        tup = tuple(sorted(tuple(st)))
        faces = _Vrep_list_to_bit_rep_wrapper(tup)
        output = _bit_rep_to_Vrep_list_wrapper(faces, 0)
        if not tup == output:
            print('``bit_rep_to_Vrep_list`` does not behave',
                  'as the inverse of ``Vrep_list_to_bit_rep``')
Expected nothing
Got:
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
    ``bit_rep_to_Vrep_list`` does not behave as the inverse of ``Vrep_list_to_bit_rep``
**********************************************************************
1 item had failures:
   1 of  20 in sage.geometry.polyhedron.combinatorial_polyhedron.conversions.?
    [63 tests, 1 failure, 0.29 s]
**********************************************************************
File "src/sage/geometry/polyhedron/base.py", line 4859, in sage.geometry.polyhedron.base.Polyhedron_base.join
Failed example:
    C.join(S).is_combinatorially_isomorphic(C.pyramid())
Expected:
    True
Got:
    False
**********************************************************************
1 item had failures:
   1 of  15 in sage.geometry.polyhedron.base.Polyhedron_base.join
    [1600 tests, 1 failure, 42.35 s]
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 940, in sage.geometry.polyhedron.library.Polytopes.great_rhombicuboctahedron
Failed example:
    sum(1 for f in gr.facets() if len(f.vertices()) == 6)
Expected:
    8
Got:
    0
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 942, in sage.geometry.polyhedron.library.Polytopes.great_rhombicuboctahedron
Failed example:
    sum(1 for f in gr.facets() if len(f.vertices()) == 8)
Expected:
    6
Got:
    4
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 1440, in sage.geometry.polyhedron.library.Polytopes.buckyball
Failed example:
    sum(1 for f in bb.facets() if len(f.vertices()) == 5)
Expected:
    12
Got:
    3
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 1442, in sage.geometry.polyhedron.library.Polytopes.buckyball
Failed example:
    sum(1 for f in bb.facets() if len(f.vertices()) == 6)
Expected:
    20
Got:
    2
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 1615, in sage.geometry.polyhedron.library.Polytopes.truncated_dodecahedron
Failed example:
    sum(1 for f in td.facets() if len(f.vertices()) == 3)
Expected:
    20
Got:
    8
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 1617, in sage.geometry.polyhedron.library.Polytopes.truncated_dodecahedron
Failed example:
    sum(1 for f in td.facets() if len(f.vertices()) == 10)
Expected:
    12
Got:
    1
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 1868, in sage.geometry.polyhedron.library.Polytopes.truncated_icosidodecahedron
Failed example:
    sum(1 for f in ti.facets() if len(f.vertices()) == 4)
Expected:
    30
Got:
    21
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 1870, in sage.geometry.polyhedron.library.Polytopes.truncated_icosidodecahedron
Failed example:
    sum(1 for f in ti.facets() if len(f.vertices()) == 6)
Expected:
    20
Got:
    3
**********************************************************************
File "src/sage/geometry/polyhedron/library.py", line 1872, in sage.geometry.polyhedron.library.Polytopes.truncated_icosidodecahedron
Failed example:
    sum(1 for f in ti.facets() if len(f.vertices()) == 10)
Expected:
    12
Got:
    0
**********************************************************************
4 items had failures:
   2 of   9 in sage.geometry.polyhedron.library.Polytopes.buckyball
   2 of   8 in sage.geometry.polyhedron.library.Polytopes.great_rhombicuboctahedron
   2 of   9 in sage.geometry.polyhedron.library.Polytopes.truncated_dodecahedron
   3 of  10 in sage.geometry.polyhedron.library.Polytopes.truncated_icosidodecahedron
    [307 tests, 9 failures, 52.94 s]
**********************************************************************
File "src/sage/geometry/polyhedron/plot.py", line 452, in sage.geometry.polyhedron.plot.Projection.stereographic
Failed example:
    proj = Projection(polytopes.buckyball())  #long time
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.plot.Projection.stereographic[1]>", line 1, in <module>
        proj = Projection(polytopes.buckyball())  #long time
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 372, in __init__
        self._init_from_3d(polyhedron)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 667, in _init_from_3d
        self._init_lines_arrows(polyhedron)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 709, in _init_lines_arrows
        if polyhedron.vertex_adjacency_matrix()[i,j] == 0:
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)
        self.cache = f(self._instance)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 2692, in vertex_adjacency_matrix
        return self._vertex_adjacency_matrix()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 471, in _vertex_adjacency_matrix
        face_lattice = self.face_lattice()
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 6498, in face_lattice
        return FiniteLatticePoset(self.hasse_diagram())
      File "sage/misc/cachefunc.pyx", line 2310, in sage.misc.cachefunc.CachedMethodCallerNoArgs.__call__ (build/cythonized/sage/misc/cachefunc.c:12906)
        self.cache = f(self._instance)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/geometry/polyhedron/base.py", line 6526, in hasse_diagram
        return D.relabel(index_to_polyhedron_face, inplace=False, immutable=True)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 21431, in relabel
        perm2 = G.relabel(perm,
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/graphs/generic_graph.py", line 21499, in relabel
        raise NotImplementedError("Non injective relabeling")
    NotImplementedError: Non injective relabeling
**********************************************************************
File "src/sage/geometry/polyhedron/plot.py", line 453, in sage.geometry.polyhedron.plot.Projection.stereographic
Failed example:
    proj                                      #long time
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.plot.Projection.stereographic[2]>", line 1, in <module>
        proj                                      #long time
    NameError: name 'proj' is not defined
**********************************************************************
File "src/sage/geometry/polyhedron/plot.py", line 455, in sage.geometry.polyhedron.plot.Projection.stereographic
Failed example:
    proj.stereographic([5,2,3]).plot()        #long time
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 720, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.8/site-packages/sage/doctest/forker.py", line 1145, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.plot.Projection.stereographic[3]>", line 1, in <module>
        proj.stereographic([Integer(5),Integer(2),Integer(3)]).plot()        #long time
    NameError: name 'proj' is not defined
**********************************************************************
1 item had failures:
   3 of   6 in sage.geometry.polyhedron.plot.Projection.stereographic
    [239 tests, 3 failures, 8.48 s]
R[write to console]: Warning messages:
R[write to console]: 1: 
R[write to console]: In sage10 + sage6 :
R[write to console]: 
 
R[write to console]:  longer object length is not a multiple of shorter object length
R[write to console]: 2: 
R[write to console]: In sqrt(sage10) :
R[write to console]:  NaNs produced
R[write to console]: 3: 
R[write to console]: In sqrt(sage4) :
R[write to console]:  NaNs produced
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/combinat/root_system/associahedron.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/combinat/root_system/root_lattice_realizations.py  # 3 doctests failed
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/backend_cdd.py  # 2 doctests failed
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/base.pyx  # 4 doctests failed
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/combinatorial_face.pyx  # 5 doctests failed
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/combinatorial_polyhedron/conversions.pyx  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/base.py  # 1 doctest failed
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/library.py  # 9 doctests failed
sage -t --long --random-seed=0 src/sage/geometry/polyhedron/plot.py  # 3 doctests failed

```



---

archive/issue_events_369815.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-11-26T23:27:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369815"
}
```



---

archive/issue_events_369816.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-11-26T23:27:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369816"
}
```



---

archive/issue_events_369817.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-11-27T08:03:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369817"
}
```



---

archive/issue_events_369818.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-11-27T08:03:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369818"
}
```



---

archive/issue_events_369819.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-11-27T08:03:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369819"
}
```



---

archive/issue_comments_489545.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nI honestly don't want to keep working on this anymore. This was supposed to make #30549 a bit easier, but apparently this is not happening.\n\n`data_structures/bitsets...` is well tested and is working, what we had before for combinatorial polyhedron was working as well, I guess this intermediate solution is more pain than anything else.",
    "created_at": "2020-11-27T08:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489545",
    "user": "https://github.com/kliem"
}
```

<a id='comment:17'>**Comment 17:**</a>
I honestly don't want to keep working on this anymore. This was supposed to make #30549 a bit easier, but apparently this is not happening.

`data_structures/bitsets...` is well tested and is working, what we had before for combinatorial polyhedron was working as well, I guess this intermediate solution is more pain than anything else.



---

archive/issue_comments_489546.json:
```json
{
    "body": "**Changing author** from \"Jonathan Kliem\" to \"\".",
    "created_at": "2020-11-29T23:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489546",
    "user": "https://github.com/tscrim"
}
```

**Changing author** from "Jonathan Kliem" to "".



---

archive/issue_comments_489547.json:
```json
{
    "body": "**Changing commit** from \"[6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67](https://github.com/sagemath/sagetrac-mirror/commit/6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67)\" to \"\".",
    "created_at": "2020-11-29T23:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489547",
    "user": "https://github.com/tscrim"
}
```

**Changing commit** from "[6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67](https://github.com/sagemath/sagetrac-mirror/commit/6fa7ac9335dcc1baf8fa086c0b82a3b1e70bde67)" to "".



---

archive/issue_comments_489548.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-kliem/no_more_basic_access](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/no_more_basic_access)\" to \"\".",
    "created_at": "2020-11-29T23:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489548",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[u/gh-kliem/no_more_basic_access](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-kliem/no_more_basic_access)" to "".



---

archive/issue_events_369820.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-11-29T23:37:40Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369820"
}
```



---

archive/issue_events_369821.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-11-29T23:37:40Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369821"
}
```



---

archive/issue_comments_489549.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\nAs you wish.",
    "created_at": "2020-11-29T23:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489549",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'>**Comment 18:**</a>
As you wish.



---

archive/issue_comments_489550.json:
```json
{
    "body": "**Changing dependencies** from \"#30492, #30524\" to \"\".",
    "created_at": "2020-11-29T23:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30528#issuecomment-489550",
    "user": "https://github.com/tscrim"
}
```

**Changing dependencies** from "#30492, #30524" to "".



---

archive/issue_events_369822.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-25T14:46:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369822"
}
```



---

archive/issue_events_369823.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-25T14:46:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30528",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30528#event-369823"
}
```
