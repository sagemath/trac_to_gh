# Issue 30914: Meta-ticket: Create upstream repositories, pip-installable packages for database packages

archive/issues_030677.json:
```json
{
    "body": "The Sage distribution contains a number of \"database packages\", many of which do not seem to have a \"real upstream\" (or installation procedures other than our scripts in build/pkgs).\n\nWe transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib) and then discovered by libraries using standard Python facilities.\n\nRole model: https://pypi.org/project/database-knotinfo/\n\nFor those that do not have a real upstream, we create separate git repositories in github.com/sagemath/ to serve as new upstream.\n\nList of packages/tickets:\n\nArchitecture independent:\n\n- #33881 New upstream for `database_stein_watkins`\n- `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB, https://repology.org/project/sagemath-combinatorial-designs/versions\n- `graphs` (`graphs.db`, `brouwer_srg_database.json`, `smallgraphs.txt`, `isgci_sage.xml`), 336 kB; the `SPKG.rst` explains: The code used to parse the data from Andries E. Brouwer's website is available at https://github.com/nathanncohen/strongly_regular_graphs_database\n- `polytopes_db` (various files), 41 kB\n- `polytopes_db_4d` (various files), 878 MB\n\nPrepared files:\n\n- #32747: `conway_polynomials`\n- elliptic_curves\n\nNew data sources:\n\n- #30352 Interface to the KnotInfo and LinkInfo databases\n- `database_graver_ppi` - https://www.math.ucdavis.edu/~mkoeppe/art/ppi/index.html\n- https://mathdb.mathhub.info/\n- https://swmath.org/\n\nRelated (other stuff written by the Sage distribution into $SAGE_SHARE): \n- #30306 - jupyter notebook related things\n- #20080 - documentation\n- #30885 - `sage.features`\n\nTechniques:\n- `importlib.resources` - would help making a distribution `zip_safe` (#31306)\n- could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) \n- Reduce local duplication of large database package when venvs are in use: https://pypi.org/project/pydupes/ (similar to rdfind)\n- Avoid duplicate installation by using [PEP 660 editable wheels](https://peps.python.org/pep-0660/). Use a build backend that supports it: flit, pdm, hatchling, poetry, not setuptools. https://discuss.python.org/t/pep-660-and-setuptools/14855\n- However there are [implementation restrictions in the interaction of editable wheels and implicit namespace packages](https://github.com/pfmoore/editables/blob/main/docs/source/implementation.md#import-hooks)\n\n\n\n\n\n**CC:**  @mkoeppe @jhpalmieri @kiwifb @isuruf @antonio-rojas @dimpase @slel @tobihan @jamesjer @soehms @videlec @williamstein @roed314\n\n**Keywords:** sd111\n\nIssue created by migration from https://trac.sagemath.org/ticket/30914\n\n",
    "created_at": "2020-11-14T18:51:24Z",
    "labels": [
        "component: build",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "title": "Meta-ticket: Create upstream repositories, pip-installable packages for database packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/30914",
    "user": "https://github.com/tobiasdiez"
}
```
The Sage distribution contains a number of "database packages", many of which do not seem to have a "real upstream" (or installation procedures other than our scripts in build/pkgs).

We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib) and then discovered by libraries using standard Python facilities.

Role model: https://pypi.org/project/database-knotinfo/

For those that do not have a real upstream, we create separate git repositories in github.com/sagemath/ to serve as new upstream.

List of packages/tickets:

Architecture independent:

- #33881 New upstream for `database_stein_watkins`
- `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB, https://repology.org/project/sagemath-combinatorial-designs/versions
- `graphs` (`graphs.db`, `brouwer_srg_database.json`, `smallgraphs.txt`, `isgci_sage.xml`), 336 kB; the `SPKG.rst` explains: The code used to parse the data from Andries E. Brouwer's website is available at https://github.com/nathanncohen/strongly_regular_graphs_database
- `polytopes_db` (various files), 41 kB
- `polytopes_db_4d` (various files), 878 MB

Prepared files:

- #32747: `conway_polynomials`
- elliptic_curves

New data sources:

- #30352 Interface to the KnotInfo and LinkInfo databases
- `database_graver_ppi` - https://www.math.ucdavis.edu/~mkoeppe/art/ppi/index.html
- https://mathdb.mathhub.info/
- https://swmath.org/

Related (other stuff written by the Sage distribution into $SAGE_SHARE): 
- #30306 - jupyter notebook related things
- #20080 - documentation
- #30885 - `sage.features`

Techniques:
- `importlib.resources` - would help making a distribution `zip_safe` (#31306)
- could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) 
- Reduce local duplication of large database package when venvs are in use: https://pypi.org/project/pydupes/ (similar to rdfind)
- Avoid duplicate installation by using [PEP 660 editable wheels](https://peps.python.org/pep-0660/). Use a build backend that supports it: flit, pdm, hatchling, poetry, not setuptools. https://discuss.python.org/t/pep-660-and-setuptools/14855
- However there are [implementation restrictions in the interaction of editable wheels and implicit namespace packages](https://github.com/pfmoore/editables/blob/main/docs/source/implementation.md#import-hooks)





**CC:**  @mkoeppe @jhpalmieri @kiwifb @isuruf @antonio-rojas @dimpase @slel @tobihan @jamesjer @soehms @videlec @williamstein @roed314

**Keywords:** sd111

Issue created by migration from https://trac.sagemath.org/ticket/30914





---

archive/issue_comments_498114.json:
```json
{
    "body": "<a id='comment:1'></a>\nWhich files, specifically?",
    "created_at": "2020-11-14T19:59:10Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498114",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Which files, specifically?



---

archive/issue_comments_498115.json:
```json
{
    "body": "<a id='comment:2'></a>\nIf you are talking about database packages such as `build/pkgs/conway_polynomials`, in particular those that do not seem to have a \"real upstream\" (or installation procedures other than our scripts in build/pkgs), then yes, I agree that a possible direction would be to create pip-installable packages for them and to publish them to PyPI. They should be maintained outside of the source tree, each in a separate git repository.",
    "created_at": "2020-11-14T20:17:35Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498115",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
If you are talking about database packages such as `build/pkgs/conway_polynomials`, in particular those that do not seem to have a "real upstream" (or installation procedures other than our scripts in build/pkgs), then yes, I agree that a possible direction would be to create pip-installable packages for them and to publish them to PyPI. They should be maintained outside of the source tree, each in a separate git repository.



---

archive/issue_comments_498116.json:
```json
{
    "body": "<a id='comment:3'></a>\nIf this is what you had in mind, let's transform this ticket into a meta-ticket and get the downstream packagers of Sage on board -- they may have insights on the upstream status of some of these packages, which we may have forgotten about.",
    "created_at": "2020-11-14T20:19:37Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498116",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
If this is what you had in mind, let's transform this ticket into a meta-ticket and get the downstream packagers of Sage on board -- they may have insights on the upstream status of some of these packages, which we may have forgotten about.



---

archive/issue_comments_498117.json:
```json
{
    "body": "<a id='comment:4'></a>\nYes, a confirmation of which bits would be nice. If @mkoeppe is right you are talking about\n* combinatorial_designs\n* conway_polynomials\n* elliptic_curves\n* graphs\n* polytopes_db\n* plus some other optional packages\nThey are indeed static but come in two flavors. \n\nArchitecture independent:\n* combinatorial_designs\n* graphs\n* polytopes_db\nwhich are really file copying.\n\nPrepared files\n* conway_polynomials\n* elliptic_curves\nwhere the files are processed before install with some python code that may be depending on python or some other software. \n\n`conway_polynomials` uses `pickle.dump` which could pose problems across python versions?\n\n`elliptic_curves` is put into a SQL database with sqlite, this should be a stable format. Don't know if that's portable between, say, x86_64 and ppc64le?",
    "created_at": "2020-11-14T20:49:21Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498117",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:4'></a>
Yes, a confirmation of which bits would be nice. If @mkoeppe is right you are talking about
* combinatorial_designs
* conway_polynomials
* elliptic_curves
* graphs
* polytopes_db
* plus some other optional packages
They are indeed static but come in two flavors. 

Architecture independent:
* combinatorial_designs
* graphs
* polytopes_db
which are really file copying.

Prepared files
* conway_polynomials
* elliptic_curves
where the files are processed before install with some python code that may be depending on python or some other software. 

`conway_polynomials` uses `pickle.dump` which could pose problems across python versions?

`elliptic_curves` is put into a SQL database with sqlite, this should be a stable format. Don't know if that's portable between, say, x86_64 and ppc64le?



---

archive/issue_comments_498118.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,11 +1,11 @@\n-Problem: While working on #30371, I noticed that most files in `local/share` are more or less static, but are generated during `make`.\n-I was wondering how to streamline this process a bit in order to make modularization easier, and to make it possible to install sagelib in different venv and without a previous run of `bootstrap`/`make`.\n+The Sage distribution contains a number of \"database packages\", many of which do not seem to have a \"real upstream\" (or installation procedures other than our scripts in build/pkgs).\n \n-Options that I see:\n-1. Checkin the current version of these files (at least the almost static databases etc) in say `src/share`. Then they only need to be generated anew for update due to changes upstream. So one can remove the corresponding sage packages from the `make` pipeline.\n+We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib).\n \n-2. Publish these dependencies to pypi, and install them to the current venv using requirements.txt and/or pipfile.\n+For those that do not have a real upstream, we create separate git repositories in github.com/sagemath/ to serve as new upstream.\n \n-3. Generate these files during a call of `src/setup.py`, and include them in this way in the current venv.\n+List of packages/tickets:\n \n-Any other ideas/preferences about how to handle these files?\n+TBD\n+\n+\n``````\n",
    "created_at": "2020-11-14T20:51:11Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498118",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,11 +1,11 @@
-Problem: While working on #30371, I noticed that most files in `local/share` are more or less static, but are generated during `make`.
-I was wondering how to streamline this process a bit in order to make modularization easier, and to make it possible to install sagelib in different venv and without a previous run of `bootstrap`/`make`.
+The Sage distribution contains a number of "database packages", many of which do not seem to have a "real upstream" (or installation procedures other than our scripts in build/pkgs).
 
-Options that I see:
-1. Checkin the current version of these files (at least the almost static databases etc) in say `src/share`. Then they only need to be generated anew for update due to changes upstream. So one can remove the corresponding sage packages from the `make` pipeline.
+We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib).
 
-2. Publish these dependencies to pypi, and install them to the current venv using requirements.txt and/or pipfile.
+For those that do not have a real upstream, we create separate git repositories in github.com/sagemath/ to serve as new upstream.
 
-3. Generate these files during a call of `src/setup.py`, and include them in this way in the current venv.
+List of packages/tickets:
 
-Any other ideas/preferences about how to handle these files?
+TBD
+
+
``````




---

archive/issue_comments_498119.json:
```json
{
    "body": "<a id='comment:5'></a>\nOK, I've taken the liberty to rewrite the ticket description",
    "created_at": "2020-11-14T20:51:11Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498119",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
OK, I've taken the liberty to rewrite the ticket description



---

archive/issue_events_277223.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T20:51:11Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "rename": {
        "from": "Generate sage/share files in sage/setup.py?",
        "to": "Meta-ticket: Create upstream repositories, pip-installable packages for database packages"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277223"
}
```



---

archive/issue_comments_498120.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [@kiwifb](#comment%3A4):\n> Prepared files\n> * conway_polynomials\n> * elliptic_curves\n> where the files are processed before install with some python code that may be depending on python or some other software. \n> \n> `conway_polynomials` uses `pickle.dump` which could pose problems across python versions?\n> \n> `elliptic_curves` is put into a SQL database with sqlite, this should be a stable format. Don't know if that's portable between, say, x86_64 and ppc64le?\n\nFor these ones, we should make the actual source distribution architecture-independent.\nThe architecture-dependent products could be built during setup.py - and published as wheels.",
    "created_at": "2020-11-14T20:53:00Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498120",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Replying to [@kiwifb](#comment%3A4):
> Prepared files
> * conway_polynomials
> * elliptic_curves
> where the files are processed before install with some python code that may be depending on python or some other software. 
> 
> `conway_polynomials` uses `pickle.dump` which could pose problems across python versions?
> 
> `elliptic_curves` is put into a SQL database with sqlite, this should be a stable format. Don't know if that's portable between, say, x86_64 and ppc64le?

For these ones, we should make the actual source distribution architecture-independent.
The architecture-dependent products could be built during setup.py - and published as wheels.



---

archive/issue_comments_498121.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -6,6 +6,15 @@\n \n List of packages/tickets:\n \n-TBD\n+Architecture independent:\n+\n+- combinatorial_designs\n+- graphs\n+- polytopes_db\n+\n+Prepared files:\n+\n+- conway_polynomials\n+- elliptic_curves\n \n \n``````\n",
    "created_at": "2020-11-14T20:54:43Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498121",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -6,6 +6,15 @@
 
 List of packages/tickets:
 
-TBD
+Architecture independent:
+
+- combinatorial_designs
+- graphs
+- polytopes_db
+
+Prepared files:
+
+- conway_polynomials
+- elliptic_curves
 
 
``````




---

archive/issue_comments_498122.json:
```json
{
    "body": "<a id='comment:7'></a>\nFor example `database_stein_watkins_mini`'s SPKG.rst lists http://modular.math.washington.edu/papers/stein-watkins/ as upstream or source, which is defunct",
    "created_at": "2020-11-14T20:54:43Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498122",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
For example `database_stein_watkins_mini`'s SPKG.rst lists http://modular.math.washington.edu/papers/stein-watkins/ as upstream or source, which is defunct



---

archive/issue_comments_498123.json:
```json
{
    "body": "<a id='comment:8'></a>\nOne thing that may need discussion is that for huge databases, one may want to avoid installing multiple copies",
    "created_at": "2020-11-14T20:57:15Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498123",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
One thing that may need discussion is that for huge databases, one may want to avoid installing multiple copies



---

archive/issue_comments_498124.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,3 +18,8 @@\n - elliptic_curves\n \n \n+\n+Related (other stuff written by the Sage distribution into $SAGE_SHARE): \n+- #30306 - jupyter notebook related things\n+- #20080 - documentation\n+\n``````\n",
    "created_at": "2020-11-14T21:01:34Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498124",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,3 +18,8 @@
 - elliptic_curves
 
 
+
+Related (other stuff written by the Sage distribution into $SAGE_SHARE): 
+- #30306 - jupyter notebook related things
+- #20080 - documentation
+
``````




---

archive/issue_comments_498125.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [@mkoeppe](#comment%3A7):\n> For example `database_stein_watkins_mini`'s SPKG.rst lists http://modular.math.washington.edu/papers/stein-watkins/ as upstream or source, which is defunct\n\nIt's at https://wstein.org/papers/stein-watkins/",
    "created_at": "2020-11-14T22:02:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498125",
    "user": "https://github.com/slel"
}
```

<a id='comment:10'></a>
Replying to [@mkoeppe](#comment%3A7):
> For example `database_stein_watkins_mini`'s SPKG.rst lists http://modular.math.washington.edu/papers/stein-watkins/ as upstream or source, which is defunct

It's at https://wstein.org/papers/stein-watkins/



---

archive/issue_comments_498126.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [@kiwifb](#comment%3A4):\n> Yes, a confirmation of which bits would be nice. If @mkoeppe is right you are talking about ...\n\n\nYes, that's exactly what I meant! Thanks everybody for their input, that's already way better than what I've imagined originally.",
    "created_at": "2020-11-14T22:50:33Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498126",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:11'></a>
Replying to [@kiwifb](#comment%3A4):
> Yes, a confirmation of which bits would be nice. If @mkoeppe is right you are talking about ...


Yes, that's exactly what I meant! Thanks everybody for their input, that's already way better than what I've imagined originally.



---

archive/issue_comments_498127.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd111\".",
    "created_at": "2020-12-06T17:48:32Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498127",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd111".



---

archive/issue_comments_498128.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -23,3 +23,7 @@\n - #30306 - jupyter notebook related things\n - #20080 - documentation\n \n+Techniques:\n+- `importlib.resources` - would help making a distribution `zip_safe` (#31306)\n+- could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) \n+\n``````\n",
    "created_at": "2021-02-04T17:45:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498128",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -23,3 +23,7 @@
 - #30306 - jupyter notebook related things
 - #20080 - documentation
 
+Techniques:
+- `importlib.resources` - would help making a distribution `zip_safe` (#31306)
+- could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) 
+
``````




---

archive/issue_comments_498129.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -17,7 +17,9 @@\n - conway_polynomials\n - elliptic_curves\n \n+New data sources:\n \n+- #30352 Interface to the KnotInfo and LinkInfo databases\n \n Related (other stuff written by the Sage distribution into $SAGE_SHARE): \n - #30306 - jupyter notebook related things\n``````\n",
    "created_at": "2021-02-04T17:53:05Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498129",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -17,7 +17,9 @@
 - conway_polynomials
 - elliptic_curves
 
+New data sources:
 
+- #30352 Interface to the KnotInfo and LinkInfo databases
 
 Related (other stuff written by the Sage distribution into $SAGE_SHARE): 
 - #30306 - jupyter notebook related things
``````




---

archive/issue_comments_498130.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,9 +8,10 @@\n \n Architecture independent:\n \n-- combinatorial_designs\n-- graphs\n-- polytopes_db\n+- `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB\n+- `graphs` (`graphs.db`, `brouwer_srg_database.json`, `smallgraphs.txt`, `isgci_sage.xml`), 336 kB; the `SPKG.rst` explains: The code used to parse the data from Andries E. Brouwer's website is available at https://github.com/nathanncohen/strongly_regular_graphs_database\n+- `polytopes_db` (various files), 41 kB\n+- `polytopes_db_4d` (various files), 878 MB\n \n Prepared files:\n \n``````\n",
    "created_at": "2021-02-05T01:55:11Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498130",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,9 +8,10 @@
 
 Architecture independent:
 
-- combinatorial_designs
-- graphs
-- polytopes_db
+- `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB
+- `graphs` (`graphs.db`, `brouwer_srg_database.json`, `smallgraphs.txt`, `isgci_sage.xml`), 336 kB; the `SPKG.rst` explains: The code used to parse the data from Andries E. Brouwer's website is available at https://github.com/nathanncohen/strongly_regular_graphs_database
+- `polytopes_db` (various files), 41 kB
+- `polytopes_db_4d` (various files), 878 MB
 
 Prepared files:
 
``````




---

archive/issue_comments_498131.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -8,7 +8,7 @@\n \n Architecture independent:\n \n-- `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB\n+- `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB, https://repology.org/project/sagemath-combinatorial-designs/versions\n - `graphs` (`graphs.db`, `brouwer_srg_database.json`, `smallgraphs.txt`, `isgci_sage.xml`), 336 kB; the `SPKG.rst` explains: The code used to parse the data from Andries E. Brouwer's website is available at https://github.com/nathanncohen/strongly_regular_graphs_database\n - `polytopes_db` (various files), 41 kB\n - `polytopes_db_4d` (various files), 878 MB\n``````\n",
    "created_at": "2021-02-05T05:57:49Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498131",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -8,7 +8,7 @@
 
 Architecture independent:
 
-- `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB
+- `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB, https://repology.org/project/sagemath-combinatorial-designs/versions
 - `graphs` (`graphs.db`, `brouwer_srg_database.json`, `smallgraphs.txt`, `isgci_sage.xml`), 336 kB; the `SPKG.rst` explains: The code used to parse the data from Andries E. Brouwer's website is available at https://github.com/nathanncohen/strongly_regular_graphs_database
 - `polytopes_db` (various files), 41 kB
 - `polytopes_db_4d` (various files), 878 MB
``````




---

archive/issue_comments_498132.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,6 +21,7 @@\n New data sources:\n \n - #30352 Interface to the KnotInfo and LinkInfo databases\n+- `database_graver_ppi` - https://www.math.ucdavis.edu/~mkoeppe/art/ppi/index.html\n \n Related (other stuff written by the Sage distribution into $SAGE_SHARE): \n - #30306 - jupyter notebook related things\n``````\n",
    "created_at": "2021-02-09T17:04:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498132",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,6 +21,7 @@
 New data sources:
 
 - #30352 Interface to the KnotInfo and LinkInfo databases
+- `database_graver_ppi` - https://www.math.ucdavis.edu/~mkoeppe/art/ppi/index.html
 
 Related (other stuff written by the Sage distribution into $SAGE_SHARE): 
 - #30306 - jupyter notebook related things
``````




---

archive/issue_comments_498133.json:
```json
{
    "body": "**Description changed:**\n``````diff\n\n``````\n",
    "created_at": "2021-02-09T17:07:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498133",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff

``````




---

archive/issue_comments_498134.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,6 +26,7 @@\n Related (other stuff written by the Sage distribution into $SAGE_SHARE): \n - #30306 - jupyter notebook related things\n - #20080 - documentation\n+- #30885 - `sage.features`\n \n Techniques:\n - `importlib.resources` - would help making a distribution `zip_safe` (#31306)\n``````\n",
    "created_at": "2021-02-13T21:22:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498134",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,6 +26,7 @@
 Related (other stuff written by the Sage distribution into $SAGE_SHARE): 
 - #30306 - jupyter notebook related things
 - #20080 - documentation
+- #30885 - `sage.features`
 
 Techniques:
 - `importlib.resources` - would help making a distribution `zip_safe` (#31306)
``````




---

archive/issue_events_277224.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277224"
}
```



---

archive/issue_events_277225.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277225"
}
```



---

archive/issue_comments_498135.json:
```json
{
    "body": "<a id='comment:21'></a>\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498135",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_277226.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277226"
}
```



---

archive/issue_events_277227.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277227"
}
```



---

archive/issue_comments_498136.json:
```json
{
    "body": "<a id='comment:24'></a>\nFor #32432 (**sagemath-polyhedra**), pip-installable `polytopes_db`, `polytopes_db_4d` would be good",
    "created_at": "2021-10-06T06:49:13Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498136",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
For #32432 (**sagemath-polyhedra**), pip-installable `polytopes_db`, `polytopes_db_4d` would be good



---

archive/issue_comments_498137.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n \n Prepared files:\n \n-- conway_polynomials\n+- #32747: `conway_polynomials`\n - elliptic_curves\n \n New data sources:\n``````\n",
    "created_at": "2021-10-23T16:27:44Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498137",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 
 Prepared files:
 
-- conway_polynomials
+- #32747: `conway_polynomials`
 - elliptic_curves
 
 New data sources:
``````




---

archive/issue_events_277228.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277228"
}
```



---

archive/issue_events_277229.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277229"
}
```



---

archive/issue_events_277230.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277230"
}
```



---

archive/issue_events_277231.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277231"
}
```



---

archive/issue_comments_498138.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -22,6 +22,8 @@\n \n - #30352 Interface to the KnotInfo and LinkInfo databases\n - `database_graver_ppi` - https://www.math.ucdavis.edu/~mkoeppe/art/ppi/index.html\n+- https://mathdb.mathhub.info/\n+- https://swmath.org/\n \n Related (other stuff written by the Sage distribution into $SAGE_SHARE): \n - #30306 - jupyter notebook related things\n``````\n",
    "created_at": "2022-05-21T19:51:46Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498138",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -22,6 +22,8 @@
 
 - #30352 Interface to the KnotInfo and LinkInfo databases
 - `database_graver_ppi` - https://www.math.ucdavis.edu/~mkoeppe/art/ppi/index.html
+- https://mathdb.mathhub.info/
+- https://swmath.org/
 
 Related (other stuff written by the Sage distribution into $SAGE_SHARE): 
 - #30306 - jupyter notebook related things
``````




---

archive/issue_comments_498139.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -33,4 +33,6 @@\n Techniques:\n - `importlib.resources` - would help making a distribution `zip_safe` (#31306)\n - could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) \n+- Reduce local duplication of large database package when venvs are in use: https://pypi.org/project/pydupes/ (similar to rdfind)\n \n+\n``````\n",
    "created_at": "2022-05-21T20:31:44Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498139",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -33,4 +33,6 @@
 Techniques:
 - `importlib.resources` - would help making a distribution `zip_safe` (#31306)
 - could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) 
+- Reduce local duplication of large database package when venvs are in use: https://pypi.org/project/pydupes/ (similar to rdfind)
 
+
``````




---

archive/issue_comments_498140.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,8 @@\n The Sage distribution contains a number of \"database packages\", many of which do not seem to have a \"real upstream\" (or installation procedures other than our scripts in build/pkgs).\n \n We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib).\n+\n+Role model: https://pypi.org/project/database-knotinfo/\n \n For those that do not have a real upstream, we create separate git repositories in github.com/sagemath/ to serve as new upstream.\n \n``````\n",
    "created_at": "2022-05-21T20:33:22Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498140",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,8 @@
 The Sage distribution contains a number of "database packages", many of which do not seem to have a "real upstream" (or installation procedures other than our scripts in build/pkgs).
 
 We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib).
+
+Role model: https://pypi.org/project/database-knotinfo/
 
 For those that do not have a real upstream, we create separate git repositories in github.com/sagemath/ to serve as new upstream.
 
``````




---

archive/issue_comments_498141.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -36,5 +36,8 @@\n - `importlib.resources` - would help making a distribution `zip_safe` (#31306)\n - could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) \n - Reduce local duplication of large database package when venvs are in use: https://pypi.org/project/pydupes/ (similar to rdfind)\n+- Avoid duplicate installation by using [PEP 660 editable wheels](https://peps.python.org/pep-0660/). Use a build backend that supports it: flit, pdm, hatchling, poetry, not setuptools. https://discuss.python.org/t/pep-660-and-setuptools/14855\n \n \n+\n+\n``````\n",
    "created_at": "2022-05-21T23:00:29Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498141",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -36,5 +36,8 @@
 - `importlib.resources` - would help making a distribution `zip_safe` (#31306)
 - could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) 
 - Reduce local duplication of large database package when venvs are in use: https://pypi.org/project/pydupes/ (similar to rdfind)
+- Avoid duplicate installation by using [PEP 660 editable wheels](https://peps.python.org/pep-0660/). Use a build backend that supports it: flit, pdm, hatchling, poetry, not setuptools. https://discuss.python.org/t/pep-660-and-setuptools/14855
 
 
+
+
``````




---

archive/issue_comments_498142.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n The Sage distribution contains a number of \"database packages\", many of which do not seem to have a \"real upstream\" (or installation procedures other than our scripts in build/pkgs).\n \n-We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib).\n+We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib) and then discovered by libraries using standard Python facilities.\n \n Role model: https://pypi.org/project/database-knotinfo/\n \n``````\n",
    "created_at": "2022-05-21T23:01:16Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498142",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 The Sage distribution contains a number of "database packages", many of which do not seem to have a "real upstream" (or installation procedures other than our scripts in build/pkgs).
 
-We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib).
+We transform them into pip-installable packages and publish them to PyPI so that they can be installed using standard Python tools (and become Python dependencies of sagelib) and then discovered by libraries using standard Python facilities.
 
 Role model: https://pypi.org/project/database-knotinfo/
 
``````




---

archive/issue_comments_498143.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [@slel](#comment%3A10):\n> Replying to [@mkoeppe](#comment%3A7):\n> > For example `database_stein_watkins_mini`'s SPKG.rst lists http://modular.math.washington.edu/papers/stein-watkins/ as upstream or source, which is defunct\n\n> \n> It's at https://wstein.org/papers/stein-watkins/\n\nThe link \"Click here for the database\" (https://wstein.org/ecdb) and \"Our database\" (https://wstein.org/papers/stein-watkins/ecdb) are both broken",
    "created_at": "2022-05-21T23:32:16Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498143",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Replying to [@slel](#comment%3A10):
> Replying to [@mkoeppe](#comment%3A7):
> > For example `database_stein_watkins_mini`'s SPKG.rst lists http://modular.math.washington.edu/papers/stein-watkins/ as upstream or source, which is defunct

> 
> It's at https://wstein.org/papers/stein-watkins/

The link "Click here for the database" (https://wstein.org/ecdb) and "Our database" (https://wstein.org/papers/stein-watkins/ecdb) are both broken



---

archive/issue_comments_498144.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -10,6 +10,7 @@\n \n Architecture independent:\n \n+- #33881 New upstream for `database_stein_watkins`\n - `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB, https://repology.org/project/sagemath-combinatorial-designs/versions\n - `graphs` (`graphs.db`, `brouwer_srg_database.json`, `smallgraphs.txt`, `isgci_sage.xml`), 336 kB; the `SPKG.rst` explains: The code used to parse the data from Andries E. Brouwer's website is available at https://github.com/nathanncohen/strongly_regular_graphs_database\n - `polytopes_db` (various files), 41 kB\n``````\n",
    "created_at": "2022-05-22T00:30:20Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498144",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -10,6 +10,7 @@
 
 Architecture independent:
 
+- #33881 New upstream for `database_stein_watkins`
 - `combinatorial_designs` (single text file `MOLS_table.txt`), 8 kB, https://repology.org/project/sagemath-combinatorial-designs/versions
 - `graphs` (`graphs.db`, `brouwer_srg_database.json`, `smallgraphs.txt`, `isgci_sage.xml`), 336 kB; the `SPKG.rst` explains: The code used to parse the data from Andries E. Brouwer's website is available at https://github.com/nathanncohen/strongly_regular_graphs_database
 - `polytopes_db` (various files), 41 kB
``````




---

archive/issue_comments_498145.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -38,6 +38,7 @@\n - could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) \n - Reduce local duplication of large database package when venvs are in use: https://pypi.org/project/pydupes/ (similar to rdfind)\n - Avoid duplicate installation by using [PEP 660 editable wheels](https://peps.python.org/pep-0660/). Use a build backend that supports it: flit, pdm, hatchling, poetry, not setuptools. https://discuss.python.org/t/pep-660-and-setuptools/14855\n+- However there are [implementation restrictions in the interaction of editable wheels and implicit namespace packages](https://github.com/pfmoore/editables/blob/main/docs/source/implementation.md#import-hooks)\n \n \n \n``````\n",
    "created_at": "2022-05-22T17:38:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30914#issuecomment-498145",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -38,6 +38,7 @@
 - could consider advertise install location using a pkgconfig file: [#30787 comment:24](https://github.com/sagemath/sage/issues/30787#comment:24) 
 - Reduce local duplication of large database package when venvs are in use: https://pypi.org/project/pydupes/ (similar to rdfind)
 - Avoid duplicate installation by using [PEP 660 editable wheels](https://peps.python.org/pep-0660/). Use a build backend that supports it: flit, pdm, hatchling, poetry, not setuptools. https://discuss.python.org/t/pep-660-and-setuptools/14855
+- However there are [implementation restrictions in the interaction of editable wheels and implicit namespace packages](https://github.com/pfmoore/editables/blob/main/docs/source/implementation.md#import-hooks)
 
 
 
``````




---

archive/issue_events_277232.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277232"
}
```



---

archive/issue_events_277233.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30914",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30914#event-277233"
}
```
