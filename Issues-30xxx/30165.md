# Issue 30165: normalize_coordinates broken for p-adic fields

archive/issues_029928.json:
```json
{
    "body": "normalize_coordinates in projective_morphism does not properly scale by the GCD of the coefficients over a p-adic field:\n\n```\nsage: P.<x,y> = ProjectiveSpace(Qp(3),1)\nsage: f = DynamicalSystem_projective([3*x^2 + 6*y^2, 9*x*y])\nsage: f.normalize_coordinates(); QQ(f[0][2,0])\n-3\n```\n\nWe fix the gcd computation. We also stop scaling by -1 in the p-adic case.\n\n**CC:**  @bhutz @pfili\n\n**Keywords:** gsoc20\n\n**Branch/Commit:** [cec0b4b779876828d755a781d2f9b90d8dc969ee](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)\n\n**Reviewer:** Paul Fili\n\n**Author:** Alexander Galarraga\n\nIssue created by migration from https://trac.sagemath.org/ticket/30165\n\n",
    "closed_at": "2020-08-14T22:23:15Z",
    "created_at": "2020-07-17T19:23:55Z",
    "labels": [
        "component: dynamics",
        "trivial",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "normalize_coordinates broken for p-adic fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30165",
    "user": "https://github.com/EnderWannabe"
}
```
normalize_coordinates in projective_morphism does not properly scale by the GCD of the coefficients over a p-adic field:

```
sage: P.<x,y> = ProjectiveSpace(Qp(3),1)
sage: f = DynamicalSystem_projective([3*x^2 + 6*y^2, 9*x*y])
sage: f.normalize_coordinates(); QQ(f[0][2,0])
-3
```

We fix the gcd computation. We also stop scaling by -1 in the p-adic case.

**CC:**  @bhutz @pfili

**Keywords:** gsoc20

**Branch/Commit:** [cec0b4b779876828d755a781d2f9b90d8dc969ee](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)

**Reviewer:** Paul Fili

**Author:** Alexander Galarraga

Issue created by migration from https://trac.sagemath.org/ticket/30165





---

archive/issue_comments_482073.json:
```json
{
    "body": "**Branch:** [u/gh-EnderWannabe/padic_normalize_coordinates](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/padic_normalize_coordinates)",
    "created_at": "2020-07-17T19:24:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482073",
    "user": "https://github.com/EnderWannabe"
}
```

**Branch:** [u/gh-EnderWannabe/padic_normalize_coordinates](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/padic_normalize_coordinates)



---

archive/issue_comments_482074.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f\">7f1c1de</a></td><td><code>30165: fixed gcd computation, added example/documentation</code></td></tr></table>\n",
    "created_at": "2020-07-17T19:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482074",
    "user": "https://github.com/EnderWannabe"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f">7f1c1de</a></td><td><code>30165: fixed gcd computation, added example/documentation</code></td></tr></table>




---

archive/issue_comments_482075.json:
```json
{
    "body": "**Commit:** [7f1c1deb64f524f27f4ba2084b358c2fdf54941f](https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f)",
    "created_at": "2020-07-17T19:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482075",
    "user": "https://github.com/EnderWannabe"
}
```

**Commit:** [7f1c1deb64f524f27f4ba2084b358c2fdf54941f](https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f)



---

archive/issue_events_274081.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-07-17T19:25:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274081"
}
```



---

archive/issue_comments_482076.json:
```json
{
    "body": "**Changing commit** from \"[7f1c1deb64f524f27f4ba2084b358c2fdf54941f](https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f)\" to \"[cec0b4b779876828d755a781d2f9b90d8dc969ee](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)\".",
    "created_at": "2020-07-27T21:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482076",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7f1c1deb64f524f27f4ba2084b358c2fdf54941f](https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f)" to "[cec0b4b779876828d755a781d2f9b90d8dc969ee](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)".



---

archive/issue_comments_482077.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee\">cec0b4b</a></td><td><code>30165: small doc fixes</code></td></tr></table>\n",
    "created_at": "2020-07-27T21:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482077",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee">cec0b4b</a></td><td><code>30165: small doc fixes</code></td></tr></table>




---

archive/issue_events_274082.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2020-08-03T16:57:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274082"
}
```



---

archive/issue_events_274083.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2020-08-03T16:57:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274083"
}
```



---

archive/issue_events_274084.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-09T08:49:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274084"
}
```



---

archive/issue_events_274085.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-09T08:49:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274085"
}
```



---

archive/issue_comments_482078.json:
```json
{
    "body": "<a id='comment:5'></a>\nPlease fill out the Author & Reviewer field",
    "created_at": "2020-08-09T08:49:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482078",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:5'></a>
Please fill out the Author & Reviewer field



---

archive/issue_comments_482079.json:
```json
{
    "body": "**Reviewer:** Paul Fili",
    "created_at": "2020-08-10T18:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482079",
    "user": "https://github.com/EnderWannabe"
}
```

**Reviewer:** Paul Fili



---

archive/issue_events_274086.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-08-10T18:05:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274086"
}
```



---

archive/issue_events_274087.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-08-10T18:05:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274087"
}
```



---

archive/issue_comments_482080.json:
```json
{
    "body": "**Author:** Alexander Galarraga",
    "created_at": "2020-08-10T18:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482080",
    "user": "https://github.com/EnderWannabe"
}
```

**Author:** Alexander Galarraga



---

archive/issue_events_274088.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2020-08-10T18:55:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274088"
}
```



---

archive/issue_events_274089.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2020-08-10T18:55:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274089"
}
```



---

archive/issue_comments_482081.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-EnderWannabe/padic_normalize_coordinates](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/padic_normalize_coordinates)\" to \"[cec0b4b779876828d755a781d2f9b90d8dc969ee](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)\".",
    "created_at": "2020-08-14T22:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30165#issuecomment-482081",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/gh-EnderWannabe/padic_normalize_coordinates](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/padic_normalize_coordinates)" to "[cec0b4b779876828d755a781d2f9b90d8dc969ee](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)".



---

archive/issue_events_274090.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-14T22:23:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274090"
}
```



---

archive/issue_events_274091.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-14T22:23:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30165",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30165#event-274091"
}
```
