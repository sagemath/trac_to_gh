# Issue 30165: normalize_coordinates broken for p-adic fields

archive/issues_029928.json:
```json
{
    "assignees": [],
    "body": "normalize_coordinates in projective_morphism does not properly scale by the GCD of the coefficients over a p-adic field:\n\n```\nsage: P.<x,y> = ProjectiveSpace(Qp(3),1)\nsage: f = DynamicalSystem_projective([3*x^2 + 6*y^2, 9*x*y])\nsage: f.normalize_coordinates(); QQ(f[0][2,0])\n-3\n```\n\nWe fix the gcd computation. We also stop scaling by -1 in the p-adic case.\n\nCC:  @bhutz @pfili\n\nKeywords: **gsoc20**\n\nBranch/Commit: **[cec0b4b](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)**\n\nReviewer: **Paul Fili**\n\nAuthor: **Alexander Galarraga**\n\nComponent: **dynamics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30165_\n\n",
    "closed_at": "2020-08-14T22:23:15Z",
    "created_at": "2020-07-17T19:23:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20dynamics",
        "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "normalize_coordinates broken for p-adic fields",
    "type": "issue",
    "updated_at": "2020-08-14T22:23:15Z",
    "url": "https://github.com/sagemath/sage/issues/30165",
    "user": "https://github.com/EnderWannabe"
}
```
normalize_coordinates in projective_morphism does not properly scale by the GCD of the coefficients over a p-adic field:

```
sage: P.<x,y> = ProjectiveSpace(Qp(3),1)
sage: f = DynamicalSystem_projective([3*x^2 + 6*y^2, 9*x*y])
sage: f.normalize_coordinates(); QQ(f[0][2,0])
-3
```

We fix the gcd computation. We also stop scaling by -1 in the p-adic case.

CC:  @bhutz @pfili

Keywords: **gsoc20**

Branch/Commit: **[cec0b4b](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)**

Reviewer: **Paul Fili**

Author: **Alexander Galarraga**

Component: **dynamics**

_Issue created by migration from https://trac.sagemath.org/ticket/30165_





---

archive/issue_events_415408.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-07-17T19:23:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415408"
}
```



---

archive/issue_events_415409.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-07-17T19:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20dynamics",
    "label_color": "0000ff",
    "label_name": "c: dynamics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415409"
}
```



---

archive/issue_events_415410.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-07-17T19:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/p%3A%205%20%E2%80%93%20trivial",
    "label_color": "fff9e5",
    "label_name": "p: 5 \u2013 trivial",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415410"
}
```



---

archive/issue_events_415411.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-07-17T19:23:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415411"
}
```



---

archive/issue_comments_477780.json:
```json
{
    "body": "Branch: **[u/gh-EnderWannabe/padic_normalize_coordinates](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/padic_normalize_coordinates)**",
    "created_at": "2020-07-17T19:24:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477780",
    "user": "https://github.com/EnderWannabe"
}
```

Branch: **[u/gh-EnderWannabe/padic_normalize_coordinates](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/padic_normalize_coordinates)**



---

archive/issue_comments_477781.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f\">7f1c1de</a></td><td><code>30165: fixed gcd computation, added example/documentation</code></td></tr></table>\n",
    "created_at": "2020-07-17T19:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477781",
    "user": "https://github.com/EnderWannabe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f">7f1c1de</a></td><td><code>30165: fixed gcd computation, added example/documentation</code></td></tr></table>




---

archive/issue_comments_477782.json:
```json
{
    "body": "Commit: **[7f1c1de](https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f)**",
    "created_at": "2020-07-17T19:25:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477782",
    "user": "https://github.com/EnderWannabe"
}
```

Commit: **[7f1c1de](https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f)**



---

archive/issue_events_415412.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-07-17T19:25:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415412"
}
```



---

archive/issue_comments_477783.json:
```json
{
    "body": "Changed commit from **[7f1c1de](https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f)** to **[cec0b4b](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)**",
    "created_at": "2020-07-27T21:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477783",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7f1c1de](https://github.com/sagemath/sagetrac-mirror/commit/7f1c1deb64f524f27f4ba2084b358c2fdf54941f)** to **[cec0b4b](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)**



---

archive/issue_comments_477784.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee\">cec0b4b</a></td><td><code>30165: small doc fixes</code></td></tr></table>\n",
    "created_at": "2020-07-27T21:16:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477784",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee">cec0b4b</a></td><td><code>30165: small doc fixes</code></td></tr></table>




---

archive/issue_events_415413.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2020-08-03T16:57:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415413"
}
```



---

archive/issue_events_415414.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2020-08-03T16:57:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415414"
}
```



---

archive/issue_events_415415.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-09T08:49:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415415"
}
```



---

archive/issue_events_415416.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-09T08:49:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415416"
}
```



---

archive/issue_comments_477785.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nPlease fill out the Author & Reviewer field",
    "created_at": "2020-08-09T08:49:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477785",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:5" align="right">comment:5</div>

Please fill out the Author & Reviewer field



---

archive/issue_comments_477786.json:
```json
{
    "body": "Reviewer: **Paul Fili**",
    "created_at": "2020-08-10T18:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477786",
    "user": "https://github.com/EnderWannabe"
}
```

Reviewer: **Paul Fili**



---

archive/issue_events_415417.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-08-10T18:05:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415417"
}
```



---

archive/issue_events_415418.json:
```json
{
    "actor": "https://github.com/EnderWannabe",
    "created_at": "2020-08-10T18:05:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415418"
}
```



---

archive/issue_comments_477787.json:
```json
{
    "body": "Author: **Alexander Galarraga**",
    "created_at": "2020-08-10T18:05:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477787",
    "user": "https://github.com/EnderWannabe"
}
```

Author: **Alexander Galarraga**



---

archive/issue_events_415419.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2020-08-10T18:55:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415419"
}
```



---

archive/issue_events_415420.json:
```json
{
    "actor": "https://github.com/pfili",
    "created_at": "2020-08-10T18:55:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415420"
}
```



---

archive/issue_comments_477788.json:
```json
{
    "body": "Changed branch from **[u/gh-EnderWannabe/padic_normalize_coordinates](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/padic_normalize_coordinates)** to **[cec0b4b](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)**",
    "created_at": "2020-08-14T22:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30165#issuecomment-477788",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-EnderWannabe/padic_normalize_coordinates](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-EnderWannabe/padic_normalize_coordinates)** to **[cec0b4b](https://github.com/sagemath/sagetrac-mirror/commit/cec0b4b779876828d755a781d2f9b90d8dc969ee)**



---

archive/issue_events_415421.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-14T22:23:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415421"
}
```



---

archive/issue_events_415422.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "11bb005e989530aac0c9cec7ba10de0bd4f7eef7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-14T22:23:15Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30165",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30165#event-415422"
}
```
