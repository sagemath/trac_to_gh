# Issue 30749: Characteristic polynomial of central Hyperplane arrangement returns wrong result?

archive/issues_030512.json:
```json
{
    "body": "A central hyperplane arrangement must have an even number of regions by central symmetry... yet the one below gets 31 regions(!).\n\n```\nR.<y> = QQ[]\nv1 = AA.polynomial_root(AA.common_polynomial(y^2 - 3), RIF(RR(1.7320508075688772), RR(1.7320508075688774)))\nv2 = QQbar.polynomial_root(AA.common_polynomial(y^4 - y^2 + 1), CIF(RIF(RR(0.8660254037844386), RR(0.86602540378443871)), RIF(-RR(0.50000000000000011), -RR(0.49999999999999994))))\nmy_vectors = (vector(AA, [-v1, -1, 1]), vector(AA, [0, 2, 1]), vector(AA,[v1, -1, 1]), vector(AA, [1, 0, 0]), vector(AA, [1/2, AA(-1/2*v2^3 + v2),0]), vector(AA, [-1/2, AA(-1/2*v2^3 + v2), 0]))\n\n\nsage: H = HyperplaneArrangements(AA,names='xyz')\nsage: x,y,z = H.gens()\nsage: A = H(backend=\"normaliz\")\nsage: for v in my_vectors:\n....:     a,b,c = v\n....:     A = A.add_hyperplane(a*x + b*y + c*z)\nsage: A\nArrangement of 6 hyperplanes of dimension 3 and rank 3\nsage: A.n_regions()\n31\nsage: A.is_central()\nTrue\n```\n\nHere is another failure in characteristic polynomial:\n\n```\nsage: tau = AA((1+sqrt(5))/2)                                                                                                                                                                                      \nsage: ncn = [[2*tau+1,2*tau,tau],[2*tau+2,2*tau+1,tau+1],[1,1,1],[tau+1,tau+1,tau],[2*tau,2*tau,tau],[tau+1,tau+1,1],[1,1,0],[0,1,0],[1,0,0],[tau+1,tau,tau]]                                                      \nsage: H = HyperplaneArrangements(AA,names='xyz')                                                                                                                                                                   \nsage: x,y,z = H.gens()                                                                                                                                                                                             \nsage: A = H()                                                                                                                                                                                                      \nsage: for v in ncn: \n....:     a,b,c = v \n....:     A = A.add_hyperplane(a*x + b*y + c*z) \n....:                                                                                                                                                                                                              \nsage: A.n_regions()\nTraceback (most recent call last):\n...\nValueError: arrangement cannot simultaneously have h and -h as hyperplane\n```\n\n#30078 fixes this and we add another doctest here.\n\n**CC:**  @kliem @LaisRast nailuj\n\n**Keywords:** hyperplane arrangements, regions\n\n**Branch/Commit:** [d74929dfb74820f79d574189a6bc5803dc00dd8d](https://github.com/sagemath/sagetrac-mirror/commit/d74929dfb74820f79d574189a6bc5803dc00dd8d)\n\n**Reviewer:** Travis Scrimshaw\n\n**Author:** Jonathan Kliem\n\nIssue created by migration from https://trac.sagemath.org/ticket/30749\n\n",
    "closed_at": "2022-04-10T13:12:46Z",
    "created_at": "2020-10-09T09:43:06Z",
    "labels": [
        "component: geometry",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.6",
    "title": "Characteristic polynomial of central Hyperplane arrangement returns wrong result?",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30749",
    "user": "https://github.com/jplab"
}
```
A central hyperplane arrangement must have an even number of regions by central symmetry... yet the one below gets 31 regions(!).

```
R.<y> = QQ[]
v1 = AA.polynomial_root(AA.common_polynomial(y^2 - 3), RIF(RR(1.7320508075688772), RR(1.7320508075688774)))
v2 = QQbar.polynomial_root(AA.common_polynomial(y^4 - y^2 + 1), CIF(RIF(RR(0.8660254037844386), RR(0.86602540378443871)), RIF(-RR(0.50000000000000011), -RR(0.49999999999999994))))
my_vectors = (vector(AA, [-v1, -1, 1]), vector(AA, [0, 2, 1]), vector(AA,[v1, -1, 1]), vector(AA, [1, 0, 0]), vector(AA, [1/2, AA(-1/2*v2^3 + v2),0]), vector(AA, [-1/2, AA(-1/2*v2^3 + v2), 0]))


sage: H = HyperplaneArrangements(AA,names='xyz')
sage: x,y,z = H.gens()
sage: A = H(backend="normaliz")
sage: for v in my_vectors:
....:     a,b,c = v
....:     A = A.add_hyperplane(a*x + b*y + c*z)
sage: A
Arrangement of 6 hyperplanes of dimension 3 and rank 3
sage: A.n_regions()
31
sage: A.is_central()
True
```

Here is another failure in characteristic polynomial:

```
sage: tau = AA((1+sqrt(5))/2)                                                                                                                                                                                      
sage: ncn = [[2*tau+1,2*tau,tau],[2*tau+2,2*tau+1,tau+1],[1,1,1],[tau+1,tau+1,tau],[2*tau,2*tau,tau],[tau+1,tau+1,1],[1,1,0],[0,1,0],[1,0,0],[tau+1,tau,tau]]                                                      
sage: H = HyperplaneArrangements(AA,names='xyz')                                                                                                                                                                   
sage: x,y,z = H.gens()                                                                                                                                                                                             
sage: A = H()                                                                                                                                                                                                      
sage: for v in ncn: 
....:     a,b,c = v 
....:     A = A.add_hyperplane(a*x + b*y + c*z) 
....:                                                                                                                                                                                                              
sage: A.n_regions()
Traceback (most recent call last):
...
ValueError: arrangement cannot simultaneously have h and -h as hyperplane
```

#30078 fixes this and we add another doctest here.

**CC:**  @kliem @LaisRast nailuj

**Keywords:** hyperplane arrangements, regions

**Branch/Commit:** [d74929dfb74820f79d574189a6bc5803dc00dd8d](https://github.com/sagemath/sagetrac-mirror/commit/d74929dfb74820f79d574189a6bc5803dc00dd8d)

**Reviewer:** Travis Scrimshaw

**Author:** Jonathan Kliem

Issue created by migration from https://trac.sagemath.org/ticket/30749





---

archive/issue_comments_495866.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,23 +1,18 @@\n A central hyperplane arrangement must have an even number of regions by central symmetry... yet the one below gets 31 regions(!).\n \n ```\n-sage: R.<y> = QQ[]\n-....: v1 = AA.polynomial_root(AA.common_polynomial(y^2 - 3), RIF(RR(1.7320508075\n-....: 688772), RR(1.7320508075688774)))\n-....: v2 = QQbar.polynomial_root(AA.common_polynomial(y^4 - y^2 + 1), CIF(RIF(RR\n-....: (0.8660254037844386), RR(0.86602540378443871)), RIF(-RR(0.5000000000000001\n-....: 1), -RR(0.49999999999999994))))\n-....: my_vectors = (vector(AA, [-v1, -1, 1]), vector(AA, [0, 2, 1]), vector(AA, \n-....: [v1, -1, 1]), vector(AA, [1, 0, 0]), vector(AA, [1/2, AA(-1/2*v2^3 + v2), \n-....: 0]), vector(AA, [-1/2, AA(-1/2*v2^3 + v2), 0]))\n-....: \n+R.<y> = QQ[]\n+v1 = AA.polynomial_root(AA.common_polynomial(y^2 - 3), RIF(RR(1.7320508075688772), RR(1.7320508075688774)))\n+v2 = QQbar.polynomial_root(AA.common_polynomial(y^4 - y^2 + 1), CIF(RIF(RR(0.8660254037844386), RR(0.86602540378443871)), RIF(-RR(0.50000000000000011), -RR(0.49999999999999994))))\n+my_vectors = (vector(AA, [-v1, -1, 1]), vector(AA, [0, 2, 1]), vector(AA,[v1, -1, 1]), vector(AA, [1, 0, 0]), vector(AA, [1/2, AA(-1/2*v2^3 + v2),0]), vector(AA, [-1/2, AA(-1/2*v2^3 + v2), 0]))\n+\n+\n sage: H = HyperplaneArrangements(AA,names='xyz')\n sage: x,y,z = H.gens()\n sage: A = H(backend=\"normaliz\")\n sage: for v in my_vectors:\n ....:     a,b,c = v\n ....:     A = A.add_hyperplane(a*x + b*y + c*z)\n-....:     \n sage: A\n Arrangement of 6 hyperplanes of dimension 3 and rank 3\n sage: A.n_regions()\n``````\n",
    "created_at": "2020-10-09T11:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495866",
    "user": "https://github.com/fchapoton"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,23 +1,18 @@
 A central hyperplane arrangement must have an even number of regions by central symmetry... yet the one below gets 31 regions(!).
 
 ```
-sage: R.<y> = QQ[]
-....: v1 = AA.polynomial_root(AA.common_polynomial(y^2 - 3), RIF(RR(1.7320508075
-....: 688772), RR(1.7320508075688774)))
-....: v2 = QQbar.polynomial_root(AA.common_polynomial(y^4 - y^2 + 1), CIF(RIF(RR
-....: (0.8660254037844386), RR(0.86602540378443871)), RIF(-RR(0.5000000000000001
-....: 1), -RR(0.49999999999999994))))
-....: my_vectors = (vector(AA, [-v1, -1, 1]), vector(AA, [0, 2, 1]), vector(AA, 
-....: [v1, -1, 1]), vector(AA, [1, 0, 0]), vector(AA, [1/2, AA(-1/2*v2^3 + v2), 
-....: 0]), vector(AA, [-1/2, AA(-1/2*v2^3 + v2), 0]))
-....: 
+R.<y> = QQ[]
+v1 = AA.polynomial_root(AA.common_polynomial(y^2 - 3), RIF(RR(1.7320508075688772), RR(1.7320508075688774)))
+v2 = QQbar.polynomial_root(AA.common_polynomial(y^4 - y^2 + 1), CIF(RIF(RR(0.8660254037844386), RR(0.86602540378443871)), RIF(-RR(0.50000000000000011), -RR(0.49999999999999994))))
+my_vectors = (vector(AA, [-v1, -1, 1]), vector(AA, [0, 2, 1]), vector(AA,[v1, -1, 1]), vector(AA, [1, 0, 0]), vector(AA, [1/2, AA(-1/2*v2^3 + v2),0]), vector(AA, [-1/2, AA(-1/2*v2^3 + v2), 0]))
+
+
 sage: H = HyperplaneArrangements(AA,names='xyz')
 sage: x,y,z = H.gens()
 sage: A = H(backend="normaliz")
 sage: for v in my_vectors:
 ....:     a,b,c = v
 ....:     A = A.add_hyperplane(a*x + b*y + c*z)
-....:     
 sage: A
 Arrangement of 6 hyperplanes of dimension 3 and rank 3
 sage: A.n_regions()
``````




---

archive/issue_comments_495867.json:
```json
{
    "body": "<a id='comment:2'></a>\nThe char poly gives the same answer\n\n```\nsage: p = A.characteristic_polynomial() : p\nx^3 - 6*x^2 + 13*x - 11\nsage: p(-1)                                                                     \n-31\n```",
    "created_at": "2020-10-09T11:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495867",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>
The char poly gives the same answer

```
sage: p = A.characteristic_polynomial() : p
x^3 - 6*x^2 + 13*x - 11
sage: p(-1)                                                                     
-31
```



---

archive/issue_comments_495868.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [chapoton](#comment%3A2):\n> The char poly gives the same answer\n> \n> ```\n> sage: p = A.characteristic_polynomial() : p\n> x^3 - 6*x^2 + 13*x - 11\n> sage: p(-1)                                                                     \n> -31\n> ```\n\n\nYes, this is how the number of regions is computed up to sign. The hyperplane arrangement seems to be sane: computing `.regions()` computes the expected (number of) regions.\n\nI asked the number of regions to double-check something and then got this scary answer...",
    "created_at": "2020-10-09T14:14:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495868",
    "user": "https://github.com/jplab"
}
```

<a id='comment:3'></a>
Replying to [chapoton](#comment%3A2):
> The char poly gives the same answer
> 
> ```
> sage: p = A.characteristic_polynomial() : p
> x^3 - 6*x^2 + 13*x - 11
> sage: p(-1)                                                                     
> -31
> ```


Yes, this is how the number of regions is computed up to sign. The hyperplane arrangement seems to be sane: computing `.regions()` computes the expected (number of) regions.

I asked the number of regions to double-check something and then got this scary answer...



---

archive/issue_events_280319.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2020-10-09T14:15:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "rename": {
        "from": "Characteristic polynomial of central Hyperplane arrangement results wrong result?",
        "to": "Characteristic polynomial of central Hyperplane arrangement returns wrong result?"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280319"
}
```



---

archive/issue_comments_495869.json:
```json
{
    "body": "<a id='comment:5'></a>\nI encountered this problem in some example a long while ago, before I was contributing to Sage myself. A simple workaround is to have `n_regions` output `len(self.regions())`, which was good enough for me. Of course, this is much slower if one doesn\u2019t want to compute the regions anyway. I don\u2019t understand the characteristic polynomial well enough to figure out the error in there.",
    "created_at": "2020-10-09T14:26:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495869",
    "user": "https://trac.sagemath.org/admin/accounts/users/nailuj"
}
```

<a id='comment:5'></a>
I encountered this problem in some example a long while ago, before I was contributing to Sage myself. A simple workaround is to have `n_regions` output `len(self.regions())`, which was good enough for me. Of course, this is much slower if one doesn’t want to compute the regions anyway. I don’t understand the characteristic polynomial well enough to figure out the error in there.



---

archive/issue_comments_495870.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -20,3 +20,21 @@\n sage: A.is_central()\n True\n ```\n+\n+Here is another failure in characteristic polynomial:\n+\n+```\n+sage: tau = AA((1+sqrt(5))/2)                                                                                                                                                                                      \n+sage: ncn = [[2*tau+1,2*tau,tau],[2*tau+2,2*tau+1,tau+1],[1,1,1],[tau+1,tau+1,tau],[2*tau,2*tau,tau],[tau+1,tau+1,1],[1,1,0],[0,1,0],[1,0,0],[tau+1,tau,tau]]                                                      \n+sage: H = HyperplaneArrangements(AA,names='xyz')                                                                                                                                                                   \n+sage: x,y,z = H.gens()                                                                                                                                                                                             \n+sage: A = H()                                                                                                                                                                                                      \n+sage: for v in ncn: \n+....:     a,b,c = v \n+....:     A = A.add_hyperplane(a*x + b*y + c*z) \n+....:                                                                                                                                                                                                              \n+sage: A.n_regions()\n+Traceback (most recent call last):\n+...\n+ValueError: arrangement cannot simultaneously have h and -h as hyperplane\n+```\n``````\n",
    "created_at": "2020-12-01T09:04:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495870",
    "user": "https://github.com/jplab"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -20,3 +20,21 @@
 sage: A.is_central()
 True
 ```
+
+Here is another failure in characteristic polynomial:
+
+```
+sage: tau = AA((1+sqrt(5))/2)                                                                                                                                                                                      
+sage: ncn = [[2*tau+1,2*tau,tau],[2*tau+2,2*tau+1,tau+1],[1,1,1],[tau+1,tau+1,tau],[2*tau,2*tau,tau],[tau+1,tau+1,1],[1,1,0],[0,1,0],[1,0,0],[tau+1,tau,tau]]                                                      
+sage: H = HyperplaneArrangements(AA,names='xyz')                                                                                                                                                                   
+sage: x,y,z = H.gens()                                                                                                                                                                                             
+sage: A = H()                                                                                                                                                                                                      
+sage: for v in ncn: 
+....:     a,b,c = v 
+....:     A = A.add_hyperplane(a*x + b*y + c*z) 
+....:                                                                                                                                                                                                              
+sage: A.n_regions()
+Traceback (most recent call last):
+...
+ValueError: arrangement cannot simultaneously have h and -h as hyperplane
+```
``````




---

archive/issue_events_280320.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280320"
}
```



---

archive/issue_events_280321.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280321"
}
```



---

archive/issue_comments_495871.json:
```json
{
    "body": "<a id='comment:7'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495871",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_280322.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280322"
}
```



---

archive/issue_events_280323.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-09T21:26:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280323"
}
```



---

archive/issue_events_280324.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280324"
}
```



---

archive/issue_events_280325.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280325"
}
```



---

archive/issue_comments_495872.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [nailuj](#comment%3A5):\n> I don\u2019t understand the characteristic polynomial well enough to figure out the error in there.\n\n\nThe characteristic polynomial is obtained through recursive deletions and contractions of hyperplane arrangements. During this process, it may occur that some hyperplane `h` is included in an arrangement multiple times with different scalings of the defining linear expression which are not properly detected as duplicates. This is due to a defect in the method `hyperplane.primitive()` addressed in #30078.",
    "created_at": "2022-03-16T17:26:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495872",
    "user": "https://trac.sagemath.org/admin/accounts/users/nailuj"
}
```

<a id='comment:10'></a>
Replying to [nailuj](#comment%3A5):
> I don’t understand the characteristic polynomial well enough to figure out the error in there.


The characteristic polynomial is obtained through recursive deletions and contractions of hyperplane arrangements. During this process, it may occur that some hyperplane `h` is included in an arrangement multiple times with different scalings of the defining linear expression which are not properly detected as duplicates. This is due to a defect in the method `hyperplane.primitive()` addressed in #30078.



---

archive/issue_comments_495873.json:
```json
{
    "body": "**Dependencies:** #30078",
    "created_at": "2022-03-21T06:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495873",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #30078



---

archive/issue_comments_495874.json:
```json
{
    "body": "<a id='comment:12'></a>\nIs this defect solved by #30078?",
    "created_at": "2022-04-03T18:48:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495874",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>
Is this defect solved by #30078?



---

archive/issue_comments_495875.json:
```json
{
    "body": "<a id='comment:13'></a>\nIt seems like it is. Using the first example, I get\n\n```\nsage: A.n_regions()\n24\nsage: len(A.regions())\n24\nsage: A.characteristic_polynomial()(-1)\n-24\n```\nSo it is now consistent. We probably just want to add a doctest for this ticket.",
    "created_at": "2022-04-04T01:08:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495875",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>
It seems like it is. Using the first example, I get

```
sage: A.n_regions()
24
sage: len(A.regions())
24
sage: A.characteristic_polynomial()(-1)
-24
```
So it is now consistent. We probably just want to add a doctest for this ticket.



---

archive/issue_events_280326.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2022-04-05T12:40:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280326"
}
```



---

archive/issue_comments_495876.json:
```json
{
    "body": "<a id='comment:14'></a>\n#30078 already adds one doctest. So we can either close it as duplicate or add another doctest. Either way is fine with me.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1492ed150e76f36d09317428d9e642986554ec6b\">1492ed1</a></td><td><code>add another doctest for 30749</code></td></tr></table>\n",
    "created_at": "2022-04-05T12:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495876",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'></a>
#30078 already adds one doctest. So we can either close it as duplicate or add another doctest. Either way is fine with me.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1492ed150e76f36d09317428d9e642986554ec6b">1492ed1</a></td><td><code>add another doctest for 30749</code></td></tr></table>




---

archive/issue_comments_495877.json:
```json
{
    "body": "**Branch:** [public/30749](https://github.com/sagemath/sagetrac-mirror/tree/public/30749)",
    "created_at": "2022-04-05T12:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495877",
    "user": "https://github.com/kliem"
}
```

**Branch:** [public/30749](https://github.com/sagemath/sagetrac-mirror/tree/public/30749)



---

archive/issue_comments_495878.json:
```json
{
    "body": "**Author:** Jonathan Kliem",
    "created_at": "2022-04-05T12:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495878",
    "user": "https://github.com/kliem"
}
```

**Author:** Jonathan Kliem



---

archive/issue_comments_495879.json:
```json
{
    "body": "**Commit:** [1492ed150e76f36d09317428d9e642986554ec6b](https://github.com/sagemath/sagetrac-mirror/commit/1492ed150e76f36d09317428d9e642986554ec6b)",
    "created_at": "2022-04-05T12:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495879",
    "user": "https://github.com/kliem"
}
```

**Commit:** [1492ed150e76f36d09317428d9e642986554ec6b](https://github.com/sagemath/sagetrac-mirror/commit/1492ed150e76f36d09317428d9e642986554ec6b)



---

archive/issue_comments_495880.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -38,3 +38,5 @@\n ...\n ValueError: arrangement cannot simultaneously have h and -h as hyperplane\n ```\n+\n+#30078 fixes this and we add another doctest here.\n``````\n",
    "created_at": "2022-04-05T12:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495880",
    "user": "https://github.com/kliem"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -38,3 +38,5 @@
 ...
 ValueError: arrangement cannot simultaneously have h and -h as hyperplane
 ```
+
+#30078 fixes this and we add another doctest here.
``````




---

archive/issue_comments_495881.json:
```json
{
    "body": "**Changing dependencies** from \"#30078\" to \"\".",
    "created_at": "2022-04-05T12:40:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495881",
    "user": "https://github.com/kliem"
}
```

**Changing dependencies** from "#30078" to "".



---

archive/issue_comments_495882.json:
```json
{
    "body": "<a id='comment:15'></a>\n\n```diff\n--- a/sage/geometry/hyperplane_arrangement/arrangement.py\n+++ b/sage/geometry/hyperplane_arrangement/arrangement.py\n@@ -1179,10 +1179,10 @@\n             sage: H = HyperplaneArrangements(AA, names='xyz')\n             sage: x,y,z = H.gens()\n             sage: A = H(backend=\"normaliz\")  # optional - pynormaliz\n-            sage: for v in my_vector:        # optional - pyrormaliz\n+            sage: for v in my_vectors:       # optional - pynormaliz\n             ....:     a, b, c = v\n             ....:     A = A.add_hyperplane(a*x + b*y + c*z)\n-            sage: A.n_regions()              # optional - pyrormaliz\n+            sage: A.n_regions()              # optional - pynormaliz\n             32\n         \"\"\"\n         if self.base_ring().characteristic() != 0:\n```",
    "created_at": "2022-04-05T14:59:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495882",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:15'></a>

```diff
--- a/sage/geometry/hyperplane_arrangement/arrangement.py
+++ b/sage/geometry/hyperplane_arrangement/arrangement.py
@@ -1179,10 +1179,10 @@
             sage: H = HyperplaneArrangements(AA, names='xyz')
             sage: x,y,z = H.gens()
             sage: A = H(backend="normaliz")  # optional - pynormaliz
-            sage: for v in my_vector:        # optional - pyrormaliz
+            sage: for v in my_vectors:       # optional - pynormaliz
             ....:     a, b, c = v
             ....:     A = A.add_hyperplane(a*x + b*y + c*z)
-            sage: A.n_regions()              # optional - pyrormaliz
+            sage: A.n_regions()              # optional - pynormaliz
             32
         """
         if self.base_ring().characteristic() != 0:
```



---

archive/issue_comments_495883.json:
```json
{
    "body": "**Changing commit** from \"[1492ed150e76f36d09317428d9e642986554ec6b](https://github.com/sagemath/sagetrac-mirror/commit/1492ed150e76f36d09317428d9e642986554ec6b)\" to \"[d74929dfb74820f79d574189a6bc5803dc00dd8d](https://github.com/sagemath/sagetrac-mirror/commit/d74929dfb74820f79d574189a6bc5803dc00dd8d)\".",
    "created_at": "2022-04-05T15:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1492ed150e76f36d09317428d9e642986554ec6b](https://github.com/sagemath/sagetrac-mirror/commit/1492ed150e76f36d09317428d9e642986554ec6b)" to "[d74929dfb74820f79d574189a6bc5803dc00dd8d](https://github.com/sagemath/sagetrac-mirror/commit/d74929dfb74820f79d574189a6bc5803dc00dd8d)".



---

archive/issue_comments_495884.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d74929dfb74820f79d574189a6bc5803dc00dd8d\">d74929d</a></td><td><code>typos</code></td></tr></table>\n",
    "created_at": "2022-04-05T15:33:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d74929dfb74820f79d574189a6bc5803dc00dd8d">d74929d</a></td><td><code>typos</code></td></tr></table>




---

archive/issue_events_280327.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-04-06T00:51:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280327"
}
```



---

archive/issue_events_280328.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2022-04-06T00:51:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280328"
}
```



---

archive/issue_comments_495885.json:
```json
{
    "body": "<a id='comment:17'></a>\nThank you. LGTM.\n\n`@`gh-sheerluck, please add your (real) name to the reviewers (if you want).",
    "created_at": "2022-04-06T00:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495885",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
Thank you. LGTM.

`@`gh-sheerluck, please add your (real) name to the reviewers (if you want).



---

archive/issue_comments_495886.json:
```json
{
    "body": "**Reviewer:** Travis Scrimshaw",
    "created_at": "2022-04-06T00:51:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495886",
    "user": "https://github.com/tscrim"
}
```

**Reviewer:** Travis Scrimshaw



---

archive/issue_events_280329.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-10T13:12:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280329"
}
```



---

archive/issue_events_280330.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-04-10T13:12:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30749#event-280330"
}
```



---

archive/issue_comments_495887.json:
```json
{
    "body": "**Changing branch** from \"[public/30749](https://github.com/sagemath/sagetrac-mirror/tree/public/30749)\" to \"[d74929dfb74820f79d574189a6bc5803dc00dd8d](https://github.com/sagemath/sagetrac-mirror/commit/d74929dfb74820f79d574189a6bc5803dc00dd8d)\".",
    "created_at": "2022-04-10T13:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30749",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30749#issuecomment-495887",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/30749](https://github.com/sagemath/sagetrac-mirror/tree/public/30749)" to "[d74929dfb74820f79d574189a6bc5803dc00dd8d](https://github.com/sagemath/sagetrac-mirror/commit/d74929dfb74820f79d574189a6bc5803dc00dd8d)".
