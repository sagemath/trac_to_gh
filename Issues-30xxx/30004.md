# Issue 30004: Added new constructions for BIBDs

archive/issues_029767.json:
```json
{
    "assignees": [],
    "body": "Constructed the biplanes with parameters `(79,13,2)` and `(56,11,2)`.\nThe constructions are added to the `BIBD_constructions` dictionary in `sage.combinat.designs.database`.\n\nAfter #29959, they will be available via `designs.balanced_incomplete_block_design`.\n\nDepends on #29959\n\nCC:  @dimpase\n\nKeywords: **bibd combinatorial-designs**\n\nBranch/Commit: **[`b99b1eb`](https://github.com/sagemath/sagetrac-mirror/commit/b99b1eb2c8c73d0aa921b11abd4736bb02f5acd8)**\n\nReviewer: **Dima Pasechnik**\n\nAuthor: **Ivo Maffei**\n\nComponent: **combinatorial designs**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30004_\n\n",
    "closed_at": "2020-07-08T19:33:06Z",
    "created_at": "2020-06-27T20:30:30Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Added new constructions for BIBDs",
    "type": "issue",
    "updated_at": "2020-07-08T19:33:06Z",
    "url": "https://github.com/sagemath/sage/issues/30004",
    "user": "https://github.com/Ivo-Maffei"
}
```
Constructed the biplanes with parameters `(79,13,2)` and `(56,11,2)`.
The constructions are added to the `BIBD_constructions` dictionary in `sage.combinat.designs.database`.

After #29959, they will be available via `designs.balanced_incomplete_block_design`.

Depends on #29959

CC:  @dimpase

Keywords: **bibd combinatorial-designs**

Branch/Commit: **[`b99b1eb`](https://github.com/sagemath/sagetrac-mirror/commit/b99b1eb2c8c73d0aa921b11abd4736bb02f5acd8)**

Reviewer: **Dima Pasechnik**

Author: **Ivo Maffei**

Component: **combinatorial designs**

_Issue created by migration from https://trac.sagemath.org/ticket/30004_





---

archive/issue_events_410067.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-27T20:30:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410067"
}
```



---

archive/issue_events_410068.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-27T20:30:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorial%20designs",
    "label_color": "0000ff",
    "label_name": "c: combinatorial designs",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410068"
}
```



---

archive/issue_events_410069.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-27T20:30:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410069"
}
```



---

archive/issue_events_410070.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-27T20:30:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410070"
}
```



---

archive/issue_comments_474687.json:
```json
{
    "body": "Author: **Ivo Maffei**",
    "created_at": "2020-06-27T20:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474687",
    "user": "https://github.com/Ivo-Maffei"
}
```

Author: **Ivo Maffei**



---

archive/issue_comments_474688.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nWhy do you use `biplane` rather than `BIBD` in the new function names?\n(docstrings certainly should mention it).\n\nOne can also create a function `designs.biplane(k)`, with `k` being the biplane order,\nwhich would return an example for each `k` a construction is known to exist.\n\nAs to references, look up how it is done elsewhere in this file. You'd add\n\n```\n    REFERENCES:\n\n    .. [Aschbacher71] \\M. Aschbacher,\n      On collineation groups of symmetric block designs.\n      J. Combinatorial Theory Ser. A 11 (1971), pp. 272\u2013281.\n\n    .. [Hall71] \\M. Hall, Jr.,\n      Combinatorial designs and groups.\n      Actes du Congr\u00e8s International des Math\u00e9maticiens (Nice, 1970),\n      v.3, pp. 217\u2013222. Gauthier-Villars, Paris, 1971.\n```\n\nThis part must only appear once.\nAlso, add\n\n```\n# -*- coding: utf-8 -*-\n```\nas the 1st line of the file, as the 2nd reference uses utf-8.\n\n\nThen you can use tags\n`[Aschbacher71]_` and `[Hall71]_` to describe the history in the docstrings.\n(that the latter in particular fixed a typo in the former, etc)",
    "created_at": "2020-06-27T21:56:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474688",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:3" align="right">comment:3</div>

Why do you use `biplane` rather than `BIBD` in the new function names?
(docstrings certainly should mention it).

One can also create a function `designs.biplane(k)`, with `k` being the biplane order,
which would return an example for each `k` a construction is known to exist.

As to references, look up how it is done elsewhere in this file. You'd add

```
    REFERENCES:

    .. [Aschbacher71] \M. Aschbacher,
      On collineation groups of symmetric block designs.
      J. Combinatorial Theory Ser. A 11 (1971), pp. 272–281.

    .. [Hall71] \M. Hall, Jr.,
      Combinatorial designs and groups.
      Actes du Congrès International des Mathématiciens (Nice, 1970),
      v.3, pp. 217–222. Gauthier-Villars, Paris, 1971.
```

This part must only appear once.
Also, add

```
# -*- coding: utf-8 -*-
```
as the 1st line of the file, as the 2nd reference uses utf-8.


Then you can use tags
`[Aschbacher71]_` and `[Hall71]_` to describe the history in the docstrings.
(that the latter in particular fixed a typo in the former, etc)



---

archive/issue_comments_474689.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/690b7573b92930b018773a96cf8d90281e9094c4\"><code>690b757</code></a></td><td><code>added references and changed names to BIBD</code></td></tr></table>\n",
    "created_at": "2020-06-29T09:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474689",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/690b7573b92930b018773a96cf8d90281e9094c4"><code>690b757</code></a></td><td><code>added references and changed names to BIBD</code></td></tr></table>




---

archive/issue_comments_474690.json:
```json
{
    "body": "Changed commit from **[`13486dd`](https://github.com/sagemath/sagetrac-mirror/commit/13486dd490c6cff3ea162d12e79882eab5b04f71)** to **[`690b757`](https://github.com/sagemath/sagetrac-mirror/commit/690b7573b92930b018773a96cf8d90281e9094c4)**",
    "created_at": "2020-06-29T09:03:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474690",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`13486dd`](https://github.com/sagemath/sagetrac-mirror/commit/13486dd490c6cff3ea162d12e79882eab5b04f71)** to **[`690b757`](https://github.com/sagemath/sagetrac-mirror/commit/690b7573b92930b018773a96cf8d90281e9094c4)**



---

archive/issue_comments_474691.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f016797af059aefdf081866da3b3d2d99c9c64dc\"><code>f016797</code></a></td><td><code>fixed typo in docstring</code></td></tr></table>\n",
    "created_at": "2020-06-29T09:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474691",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f016797af059aefdf081866da3b3d2d99c9c64dc"><code>f016797</code></a></td><td><code>fixed typo in docstring</code></td></tr></table>




---

archive/issue_comments_474692.json:
```json
{
    "body": "Changed commit from **[`690b757`](https://github.com/sagemath/sagetrac-mirror/commit/690b7573b92930b018773a96cf8d90281e9094c4)** to **[`f016797`](https://github.com/sagemath/sagetrac-mirror/commit/f016797af059aefdf081866da3b3d2d99c9c64dc)**",
    "created_at": "2020-06-29T09:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474692",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`690b757`](https://github.com/sagemath/sagetrac-mirror/commit/690b7573b92930b018773a96cf8d90281e9094c4)** to **[`f016797`](https://github.com/sagemath/sagetrac-mirror/commit/f016797af059aefdf081866da3b3d2d99c9c64dc)**



---

archive/issue_comments_474693.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI like the idea of a `biplane` function, I need a new ticket though. For testing that function I'll need the changes of #29959.\nCan I branch off that ticket or do I need to always branch from develop?",
    "created_at": "2020-06-29T09:12:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474693",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:6" align="right">comment:6</div>

I like the idea of a `biplane` function, I need a new ticket though. For testing that function I'll need the changes of #29959.
Can I branch off that ticket or do I need to always branch from develop?



---

archive/issue_events_410071.json:
```json
{
    "actor": "https://github.com/Ivo-Maffei",
    "created_at": "2020-06-29T09:12:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410071"
}
```



---

archive/issue_comments_474694.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@Ivo-Maffei](#comment:6):\n> I like the idea of a `biplane` function, I need a new ticket though. For testing that function I'll need the changes of #29959.\n> Can I branch off that ticket or do I need to always branch from develop?\n\nit's perfectly fine, and actually safer, as the right merge is already done this way, to branch off that ticket (in this case it should be mentioned in `Dependencies:` field in the ticket description)",
    "created_at": "2020-06-29T10:26:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474694",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@Ivo-Maffei](#comment:6):
> I like the idea of a `biplane` function, I need a new ticket though. For testing that function I'll need the changes of #29959.
> Can I branch off that ticket or do I need to always branch from develop?

it's perfectly fine, and actually safer, as the right merge is already done this way, to branch off that ticket (in this case it should be mentioned in `Dependencies:` field in the ticket description)



---

archive/issue_comments_474695.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe code implementing the nonabelian group from scratch looks too complicated. It seems it's much easier to deal with this group as a subgroup of upper-triangular 2x2 matrices mod 11.\nIndeed, please check that the following matrices satisy the required relations \n\n```\nx=matrix(GF(11),[[1,1],[0,1]])\ny=matrix(GF(11),[[5,0],[0,9]])\nz=matrix(GF(11),[[-1,0],[0,1]])\n```",
    "created_at": "2020-06-29T12:12:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474695",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

The code implementing the nonabelian group from scratch looks too complicated. It seems it's much easier to deal with this group as a subgroup of upper-triangular 2x2 matrices mod 11.
Indeed, please check that the following matrices satisy the required relations 

```
x=matrix(GF(11),[[1,1],[0,1]])
y=matrix(GF(11),[[5,0],[0,9]])
z=matrix(GF(11),[[-1,0],[0,1]])
```



---

archive/issue_comments_474696.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThose matrices generate a group isomorphic to the one given.\nHowever, I'm still looking for some concrete representation of the `P_i`'s that would take advantage of the new group.\nI tried representing the `P_i`'s as vectors, projective points and matrices but with little luck.\nNow I'm looking at polynomials.\n\nIf I can't find anything, then to compute the action of a matrix on `P_i` I would need to decompose the matrix into `x,y,z` and end up doing most of the ugly operations I already do.",
    "created_at": "2020-06-29T14:38:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474696",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:9" align="right">comment:9</div>

Those matrices generate a group isomorphic to the one given.
However, I'm still looking for some concrete representation of the `P_i`'s that would take advantage of the new group.
I tried representing the `P_i`'s as vectors, projective points and matrices but with little luck.
Now I'm looking at polynomials.

If I can't find anything, then to compute the action of a matrix on `P_i` I would need to decompose the matrix into `x,y,z` and end up doing most of the ugly operations I already do.



---

archive/issue_comments_474697.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nyou can use subgroup cosets, just as in Aschbacher's paper.",
    "created_at": "2020-06-29T14:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474697",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">comment:10</div>

you can use subgroup cosets, just as in Aschbacher's paper.



---

archive/issue_comments_474698.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThanks!\n\nIf I understand the paper correctly, the `P_i`'s are left abstract and the orbit of `P_i` is `G/H_i`, yet `P_i != I H_i` as otherwise `P_2 = P_3`.\nI was hoping for something more concrete, but I ended up reducing the action of `M` on `P_i` to basically be `P_i N` for a unique representative `N` of `M H_i`. Hence, I represent `P_i M` by the pair `(i, M)`.\n\nMy current implementation is extremely slow and it seems that the `quotient` method of `MatrixGroup` yields a `NotImplementedError`.\n\nI'm now moving everything to GAP. Soon I'll push the new method.",
    "created_at": "2020-06-29T15:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474698",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:11" align="right">comment:11</div>

Thanks!

If I understand the paper correctly, the `P_i`'s are left abstract and the orbit of `P_i` is `G/H_i`, yet `P_i != I H_i` as otherwise `P_2 = P_3`.
I was hoping for something more concrete, but I ended up reducing the action of `M` on `P_i` to basically be `P_i N` for a unique representative `N` of `M H_i`. Hence, I represent `P_i M` by the pair `(i, M)`.

My current implementation is extremely slow and it seems that the `quotient` method of `MatrixGroup` yields a `NotImplementedError`.

I'm now moving everything to GAP. Soon I'll push the new method.



---

archive/issue_comments_474699.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nin GAP you need FactorCosetAction function, which can take any group G and its subgroup H of finite index, and construct the action on the cosets of H in G.",
    "created_at": "2020-06-29T16:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474699",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">comment:12</div>

in GAP you need FactorCosetAction function, which can take any group G and its subgroup H of finite index, and construct the action on the cosets of H in G.



---

archive/issue_comments_474700.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nhere is what you can do, with x,y,z as in [comment:8](#comment:8):\n\n```\nsage: G=libgap(MatrixGroup([x,y,z]))\nsage: H=G.Subgroup([libgap(z)])\nsage: G.FactorCosetAction(H).Image()\n<permutation group of size 110 with 3 generators>\nsage: G.FactorCosetAction(H).Image().OrbitLength(1)\n55\n```",
    "created_at": "2020-06-29T17:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474700",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:13" align="right">comment:13</div>

here is what you can do, with x,y,z as in [comment:8](#comment:8):

```
sage: G=libgap(MatrixGroup([x,y,z]))
sage: H=G.Subgroup([libgap(z)])
sage: G.FactorCosetAction(H).Image()
<permutation group of size 110 with 3 generators>
sage: G.FactorCosetAction(H).Image().OrbitLength(1)
55
```



---

archive/issue_comments_474701.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI've done something a bit different by preserving the homomorphism given by `FactorCosetAction` since I'll need a different action for each `P_i`. I've not pushed the changes yet because the tests are still running.",
    "created_at": "2020-06-29T18:09:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474701",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:14" align="right">comment:14</div>

I've done something a bit different by preserving the homomorphism given by `FactorCosetAction` since I'll need a different action for each `P_i`. I've not pushed the changes yet because the tests are still running.



---

archive/issue_comments_474702.json:
```json
{
    "body": "Changed commit from **[`f016797`](https://github.com/sagemath/sagetrac-mirror/commit/f016797af059aefdf081866da3b3d2d99c9c64dc)** to **[`b6ac057`](https://github.com/sagemath/sagetrac-mirror/commit/b6ac057c9b58f57e00cd089ee9082325506c79d2)**",
    "created_at": "2020-06-29T18:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474702",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f016797`](https://github.com/sagemath/sagetrac-mirror/commit/f016797af059aefdf081866da3b3d2d99c9c64dc)** to **[`b6ac057`](https://github.com/sagemath/sagetrac-mirror/commit/b6ac057c9b58f57e00cd089ee9082325506c79d2)**



---

archive/issue_comments_474703.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b6ac057c9b58f57e00cd089ee9082325506c79d2\"><code>b6ac057</code></a></td><td><code>changed function to use GAP</code></td></tr></table>\n",
    "created_at": "2020-06-29T18:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474703",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b6ac057c9b58f57e00cd089ee9082325506c79d2"><code>b6ac057</code></a></td><td><code>changed function to use GAP</code></td></tr></table>




---

archive/issue_comments_474704.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nCan you use libgap.function_factory instead of libgap.eval, where appropriate?\n\nalso, libgap.set_global looks dodgy, do you really need it?",
    "created_at": "2020-06-29T19:26:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474704",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:16" align="right">comment:16</div>

Can you use libgap.function_factory instead of libgap.eval, where appropriate?

also, libgap.set_global looks dodgy, do you really need it?



---

archive/issue_comments_474705.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nthe way you describe intial blocks looks ugly, as they are unions of orbits of certain subgroups. There is no need to do explicit enumeration of elements of these subgroups.",
    "created_at": "2020-06-29T19:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474705",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

the way you describe intial blocks looks ugly, as they are unions of orbits of certain subgroups. There is no need to do explicit enumeration of elements of these subgroups.



---

archive/issue_comments_474706.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI changed the `eval`'s. I don't know how to get rid of the `set_global`'s as I need to give the actions a name to use inside the `function_factory`'s.\n\nAs far as the blocks are concerned, I can change `B1, B2, B3` to the below\n\n```\nB1 = list(libgap.Orbit(H4, p1, action)) + list(libgap.Orbit(G, p2, action))\nB2 = list(libgap.Orbit(H4, p1, action)) + list(libgap.Orbit(G, p3, action))\nB3 = list(libgap([p1, p2, p3])) + list(libgap.Orbit(libgap.Group(Y), action(p4, X), action)) + list(libgap.Orbit(libgap.Group(Y), action(p4, X**4), action))\nB1 = libgap.Set(B1)\nB2 = libgap.Set(B2)\nB3 = libgap.Set(B3)\n```\n\nI don't know how to write `B4` as unions of orbits.",
    "created_at": "2020-06-29T20:48:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474706",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:18" align="right">comment:18</div>

I changed the `eval`'s. I don't know how to get rid of the `set_global`'s as I need to give the actions a name to use inside the `function_factory`'s.

As far as the blocks are concerned, I can change `B1, B2, B3` to the below

```
B1 = list(libgap.Orbit(H4, p1, action)) + list(libgap.Orbit(G, p2, action))
B2 = list(libgap.Orbit(H4, p1, action)) + list(libgap.Orbit(G, p3, action))
B3 = list(libgap([p1, p2, p3])) + list(libgap.Orbit(libgap.Group(Y), action(p4, X), action)) + list(libgap.Orbit(libgap.Group(Y), action(p4, X**4), action))
B1 = libgap.Set(B1)
B2 = libgap.Set(B2)
B3 = libgap.Set(B3)
```

I don't know how to write `B4` as unions of orbits.



---

archive/issue_comments_474707.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n`B4` is invariant under an element of order 2 (well, it's not a big saving, of course)",
    "created_at": "2020-06-29T21:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474707",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

`B4` is invariant under an element of order 2 (well, it's not a big saving, of course)



---

archive/issue_comments_474708.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@Ivo-Maffei](#comment:18):\n> I changed the `eval`'s. I don't know how to get rid of the `set_global`'s as I need to give the actions a name to use inside the `function_factory`'s.\n\nUpdate the branch please, then I can comment on your latest code.",
    "created_at": "2020-06-29T22:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474708",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@Ivo-Maffei](#comment:18):
> I changed the `eval`'s. I don't know how to get rid of the `set_global`'s as I need to give the actions a name to use inside the `function_factory`'s.

Update the branch please, then I can comment on your latest code.



---

archive/issue_comments_474709.json:
```json
{
    "body": "Changed commit from **[`b6ac057`](https://github.com/sagemath/sagetrac-mirror/commit/b6ac057c9b58f57e00cd089ee9082325506c79d2)** to **[`6c60867`](https://github.com/sagemath/sagetrac-mirror/commit/6c60867bffe003146cbb4560e7d767df83c32625)**",
    "created_at": "2020-06-30T08:30:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474709",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b6ac057`](https://github.com/sagemath/sagetrac-mirror/commit/b6ac057c9b58f57e00cd089ee9082325506c79d2)** to **[`6c60867`](https://github.com/sagemath/sagetrac-mirror/commit/6c60867bffe003146cbb4560e7d767df83c32625)**



---

archive/issue_comments_474710.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9fd36fd32c9addbf3fdfdeb84999f748d8a2be50\"><code>9fd36fd</code></a></td><td><code>used function_factory; rewrote initial blocks; clear GAP global var</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c60867bffe003146cbb4560e7d767df83c32625\"><code>6c60867</code></a></td><td><code>removed floating g</code></td></tr></table>\n",
    "created_at": "2020-06-30T08:30:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474710",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9fd36fd32c9addbf3fdfdeb84999f748d8a2be50"><code>9fd36fd</code></a></td><td><code>used function_factory; rewrote initial blocks; clear GAP global var</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c60867bffe003146cbb4560e7d767df83c32625"><code>6c60867</code></a></td><td><code>removed floating g</code></td></tr></table>




---

archive/issue_comments_474711.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nhere is a bit of refactoring and simplification, but I believe it's better to combine all the actions into just one permutation action, and get rid of the points as pairs.\n\n```diff\ndiff --git a/src/sage/combinat/designs/database.py b/src/sage/combinat/designs/database.py\nindex 0fb34910a5..779e7873eb 100644\n--- a/src/sage/combinat/designs/database.py\n+++ b/src/sage/combinat/designs/database.py\n@@ -4618,22 +4618,12 @@ def BIBD_79_13_2():\n     libgap.set_global(\"p23Act\", P23Action)\n     libgap.set_global(\"p4Act\", P4Action)\n \n-    get_action = libgap.function_factory(\"\"\"ChooseMyAction := function(i)\n-        if i = 1 then\n-            return p1Act;\n-        elif i = 4 then\n-            return p4Act;\n-        else\n-            return p23Act;\n-        fi;\n-    end;\"\"\")\n-\n     action = libgap.function_factory(\"\"\"MyAction := function(pair, g)\n-        local i, C, hom;\n+        local i, C, homs;\n+        homs := [p1Act, p23Act, p23Act, p4Act];\n         i := pair[1];\n         C := pair[2];\n-        hom := ChooseMyAction(i);\n-        return [i, C^(ImageElm(hom,g))];\n+        return [i, C^(ImageElm(homs[i],g))];\n     end;\"\"\")\n \n     p1 = (1,1)\n@@ -4652,7 +4642,7 @@ def BIBD_79_13_2():\n           action(p4, X * Y**2), action(p4, X**-1 * Y**2), action(p4, X*Y), action(p4, X**-1 * Y),\n           action(p4, X**5 * Y), action(p4, X**-5 * Y), action(p4, X**5 * Y**4), action(p4, X**-5 * Y**4)])\n \n-    actionOnSet = libgap.function_factory(\"\"\"MyActionOnSets := function(block, g)\n+    actionOnSet = libgap.function_factory(\"\"\"function(block, g)\n         local set, p, q;\n         set := Set([]);\n         for p in block do\n@@ -4670,9 +4660,7 @@ def BIBD_79_13_2():\n     libgap.unset_global(\"p1Act\")\n     libgap.unset_global(\"p23Act\")\n     libgap.unset_global(\"p4Act\")\n-    libgap.unset_global(\"ChooseMyAction\")\n     libgap.unset_global(\"MyAction\")\n-    libgap.unset_global(\"MyActionOnSets\")\n     return blocks\n \n def BIBD_56_11_2():\n```",
    "created_at": "2020-06-30T11:36:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474711",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

here is a bit of refactoring and simplification, but I believe it's better to combine all the actions into just one permutation action, and get rid of the points as pairs.

```diff
diff --git a/src/sage/combinat/designs/database.py b/src/sage/combinat/designs/database.py
index 0fb34910a5..779e7873eb 100644
--- a/src/sage/combinat/designs/database.py
+++ b/src/sage/combinat/designs/database.py
@@ -4618,22 +4618,12 @@ def BIBD_79_13_2():
     libgap.set_global("p23Act", P23Action)
     libgap.set_global("p4Act", P4Action)
 
-    get_action = libgap.function_factory("""ChooseMyAction := function(i)
-        if i = 1 then
-            return p1Act;
-        elif i = 4 then
-            return p4Act;
-        else
-            return p23Act;
-        fi;
-    end;""")
-
     action = libgap.function_factory("""MyAction := function(pair, g)
-        local i, C, hom;
+        local i, C, homs;
+        homs := [p1Act, p23Act, p23Act, p4Act];
         i := pair[1];
         C := pair[2];
-        hom := ChooseMyAction(i);
-        return [i, C^(ImageElm(hom,g))];
+        return [i, C^(ImageElm(homs[i],g))];
     end;""")
 
     p1 = (1,1)
@@ -4652,7 +4642,7 @@ def BIBD_79_13_2():
           action(p4, X * Y**2), action(p4, X**-1 * Y**2), action(p4, X*Y), action(p4, X**-1 * Y),
           action(p4, X**5 * Y), action(p4, X**-5 * Y), action(p4, X**5 * Y**4), action(p4, X**-5 * Y**4)])
 
-    actionOnSet = libgap.function_factory("""MyActionOnSets := function(block, g)
+    actionOnSet = libgap.function_factory("""function(block, g)
         local set, p, q;
         set := Set([]);
         for p in block do
@@ -4670,9 +4660,7 @@ def BIBD_79_13_2():
     libgap.unset_global("p1Act")
     libgap.unset_global("p23Act")
     libgap.unset_global("p4Act")
-    libgap.unset_global("ChooseMyAction")
     libgap.unset_global("MyAction")
-    libgap.unset_global("MyActionOnSets")
     return blocks
 
 def BIBD_56_11_2():
```



---

archive/issue_comments_474712.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b15980fcbabd983d3a7718a2789137172dc0ecc\"><code>3b15980</code></a></td><td><code>pyflakes errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a6059a31edd9bb9255104de3ee9ab4fdaea4f226\"><code>a6059a3</code></a></td><td><code>changed to use only 1 permutation action</code></td></tr></table>\n",
    "created_at": "2020-06-30T12:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474712",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b15980fcbabd983d3a7718a2789137172dc0ecc"><code>3b15980</code></a></td><td><code>pyflakes errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a6059a31edd9bb9255104de3ee9ab4fdaea4f226"><code>a6059a3</code></a></td><td><code>changed to use only 1 permutation action</code></td></tr></table>




---

archive/issue_comments_474713.json:
```json
{
    "body": "Changed commit from **[`6c60867`](https://github.com/sagemath/sagetrac-mirror/commit/6c60867bffe003146cbb4560e7d767df83c32625)** to **[`a6059a3`](https://github.com/sagemath/sagetrac-mirror/commit/a6059a31edd9bb9255104de3ee9ab4fdaea4f226)**",
    "created_at": "2020-06-30T12:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474713",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6c60867`](https://github.com/sagemath/sagetrac-mirror/commit/6c60867bffe003146cbb4560e7d767df83c32625)** to **[`a6059a3`](https://github.com/sagemath/sagetrac-mirror/commit/a6059a31edd9bb9255104de3ee9ab4fdaea4f226)**



---

archive/issue_comments_474714.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI combined the action into 1 permutation action. I hope that is what you meant.\nI haven't run all tests on the above, but only checked that file. I'll do all the doctests when we reach a nice version of that function.",
    "created_at": "2020-06-30T12:36:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474714",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:24" align="right">comment:24</div>

I combined the action into 1 permutation action. I hope that is what you meant.
I haven't run all tests on the above, but only checked that file. I'll do all the doctests when we reach a nice version of that function.



---

archive/issue_comments_474715.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI think you better convert the block data into Sage's ZZ - at the moment they are still GAP integers (and also re-index from 0), as something goes wrong:\n\n```\nsage: designs.balanced_incomplete_block_design(79,13,2)\n---------------------------------------------------------------------------\nGAPError                                  Traceback (most recent call last)\n...\nAttributeError: 'sort' is not defined in GAP\n```",
    "created_at": "2020-06-30T13:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474715",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

I think you better convert the block data into Sage's ZZ - at the moment they are still GAP integers (and also re-index from 0), as something goes wrong:

```
sage: designs.balanced_incomplete_block_design(79,13,2)
---------------------------------------------------------------------------
GAPError                                  Traceback (most recent call last)
...
AttributeError: 'sort' is not defined in GAP
```



---

archive/issue_comments_474716.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nthis is a fix:\n\n```\ndiff --git a/src/sage/combinat/designs/database.py b/src/sage/combinat/designs/database.py\nindex ecc17faa54..2437c0362e 100644\n--- a/src/sage/combinat/designs/database.py\n+++ b/src/sage/combinat/designs/database.py\n@@ -4646,7 +4646,7 @@ def BIBD_79_13_2():\n     libgap.unset_global(\"p1Act\")\n     libgap.unset_global(\"p23Act\")\n     libgap.unset_global(\"p4Act\")\n-    return blocks\n+    return [[int(t)-1 for t in y] for y in blocks]\n \n def BIBD_56_11_2():\n     r\"\"\"\n```",
    "created_at": "2020-06-30T13:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474716",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

this is a fix:

```
diff --git a/src/sage/combinat/designs/database.py b/src/sage/combinat/designs/database.py
index ecc17faa54..2437c0362e 100644
--- a/src/sage/combinat/designs/database.py
+++ b/src/sage/combinat/designs/database.py
@@ -4646,7 +4646,7 @@ def BIBD_79_13_2():
     libgap.unset_global("p1Act")
     libgap.unset_global("p23Act")
     libgap.unset_global("p4Act")
-    return blocks
+    return [[int(t)-1 for t in y] for y in blocks]
 
 def BIBD_56_11_2():
     r"""
```



---

archive/issue_comments_474717.json:
```json
{
    "body": "Changed commit from **[`a6059a3`](https://github.com/sagemath/sagetrac-mirror/commit/a6059a31edd9bb9255104de3ee9ab4fdaea4f226)** to **[`b99b1eb`](https://github.com/sagemath/sagetrac-mirror/commit/b99b1eb2c8c73d0aa921b11abd4736bb02f5acd8)**",
    "created_at": "2020-06-30T16:27:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474717",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a6059a3`](https://github.com/sagemath/sagetrac-mirror/commit/a6059a31edd9bb9255104de3ee9ab4fdaea4f226)** to **[`b99b1eb`](https://github.com/sagemath/sagetrac-mirror/commit/b99b1eb2c8c73d0aa921b11abd4736bb02f5acd8)**



---

archive/issue_comments_474718.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b99b1eb2c8c73d0aa921b11abd4736bb02f5acd8\"><code>b99b1eb</code></a></td><td><code>change gap int to int</code></td></tr></table>\n",
    "created_at": "2020-06-30T16:27:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474718",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b99b1eb2c8c73d0aa921b11abd4736bb02f5acd8"><code>b99b1eb</code></a></td><td><code>change gap int to int</code></td></tr></table>




---

archive/issue_comments_474719.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nsubject to tests passing, this looks good.\nThere is one more bug (or perhaps something not implemented at all), for a follow-up ticket:\nremoving a block from a symmetric BIBD(v,k,l) should give BIBD(v-k,k-l,l),\nas by symmetry any 2 blocks intersect in l points, \nbut this does not work e.g. for BIBD_79_13_2, as\n\n```\nsage: designs.balanced_incomplete_block_design(66,11,2)\n---------------------------------------------------------------------------\nNotImplementedError                       Traceback (most recent call last)\n<ipython-input-23-f4a04be51fbf> in <module>()\n----> 1 designs.balanced_incomplete_block_design(Integer(66),Integer(11),Integer(2))\n\n/home/dimpase/sage/local/lib/python3.7/site-packages/sage/combinat/designs/bibd.py in balanced_incomplete_block_design(v, k, lambd, existence, use_LJCR)\n    270         return Unknown\n    271     else:\n--> 272         raise NotImplementedError(\"I don't know how to build a ({},{},{})-BIBD!\".format(v, k, lambd))\n    273 \n    274 def steiner_triple_system(n):\n\nNotImplementedError: I don't know how to build a (66,11,2)-BIBD!\n```",
    "created_at": "2020-06-30T23:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474719",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">comment:28</div>

subject to tests passing, this looks good.
There is one more bug (or perhaps something not implemented at all), for a follow-up ticket:
removing a block from a symmetric BIBD(v,k,l) should give BIBD(v-k,k-l,l),
as by symmetry any 2 blocks intersect in l points, 
but this does not work e.g. for BIBD_79_13_2, as

```
sage: designs.balanced_incomplete_block_design(66,11,2)
---------------------------------------------------------------------------
NotImplementedError                       Traceback (most recent call last)
<ipython-input-23-f4a04be51fbf> in <module>()
----> 1 designs.balanced_incomplete_block_design(Integer(66),Integer(11),Integer(2))

/home/dimpase/sage/local/lib/python3.7/site-packages/sage/combinat/designs/bibd.py in balanced_incomplete_block_design(v, k, lambd, existence, use_LJCR)
    270         return Unknown
    271     else:
--> 272         raise NotImplementedError("I don't know how to build a ({},{},{})-BIBD!".format(v, k, lambd))
    273 
    274 def steiner_triple_system(n):

NotImplementedError: I don't know how to build a (66,11,2)-BIBD!
```



---

archive/issue_events_410072.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-30T23:10:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410072"
}
```



---

archive/issue_events_410073.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-06-30T23:10:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410073"
}
```



---

archive/issue_comments_474720.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2020-06-30T23:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474720",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_474721.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nI'm now running all tests.\nHowever, I'm a bit confused by your code examples, as on this branch the function `balanced_incomplete_block_design` only works for `lambda = 1`. Have you merged this with #29959 to run the tests? (that's actually a great idea, so I'll run the tests on this merged version)\n\nAnyway, the `balanced_incomplete_block_design` code doesn't seem to include the recursive construction you mentioned.\nI'll make a small ticket for it.",
    "created_at": "2020-07-01T09:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474721",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:29" align="right">comment:29</div>

I'm now running all tests.
However, I'm a bit confused by your code examples, as on this branch the function `balanced_incomplete_block_design` only works for `lambda = 1`. Have you merged this with #29959 to run the tests? (that's actually a great idea, so I'll run the tests on this merged version)

Anyway, the `balanced_incomplete_block_design` code doesn't seem to include the recursive construction you mentioned.
I'll make a small ticket for it.



---

archive/issue_comments_474722.json:
```json
{
    "body": "Dependencies: **#29959**",
    "created_at": "2020-07-01T10:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474722",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#29959**



---

archive/issue_comments_474723.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@Ivo-Maffei](#comment:29):\n> I'm now running all tests.\n> However, I'm a bit confused by your code examples, as on this branch the function `balanced_incomplete_block_design` only works for `lambda = 1`. Have you merged this with #29959 to run the tests? (that's actually a great idea, so I'll run the tests on this merged version)\n\nyes, sure. I've made #29959 a dependency of this ticket.",
    "created_at": "2020-07-01T10:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474723",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@Ivo-Maffei](#comment:29):
> I'm now running all tests.
> However, I'm a bit confused by your code examples, as on this branch the function `balanced_incomplete_block_design` only works for `lambda = 1`. Have you merged this with #29959 to run the tests? (that's actually a great idea, so I'll run the tests on this merged version)

yes, sure. I've made #29959 a dependency of this ticket.



---

archive/issue_comments_474724.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nSo I finally finished testing this branch merged with #29959 and all tests pass.",
    "created_at": "2020-07-01T12:42:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474724",
    "user": "https://github.com/Ivo-Maffei"
}
```

<div id="comment:31" align="right">comment:31</div>

So I finally finished testing this branch merged with #29959 and all tests pass.



---

archive/issue_comments_474725.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nOK, all clear.",
    "created_at": "2020-07-01T14:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474725",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

OK, all clear.



---

archive/issue_comments_474726.json:
```json
{
    "body": "Changed branch from **[u/gh-Ivo-Maffei/biplanes](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Ivo-Maffei/biplanes)** to **[`b99b1eb`](https://github.com/sagemath/sagetrac-mirror/commit/b99b1eb2c8c73d0aa921b11abd4736bb02f5acd8)**",
    "created_at": "2020-07-08T19:33:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30004#issuecomment-474726",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/gh-Ivo-Maffei/biplanes](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-Ivo-Maffei/biplanes)** to **[`b99b1eb`](https://github.com/sagemath/sagetrac-mirror/commit/b99b1eb2c8c73d0aa921b11abd4736bb02f5acd8)**



---

archive/issue_events_410074.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-08T19:33:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410074"
}
```



---

archive/issue_events_410075.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1a9e4473b1d5863072f7adef50b4f6888963aba1",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-07-08T19:33:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30004",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30004#event-410075"
}
```
