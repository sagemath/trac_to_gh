# Issue 30820: some CI details

archive/issues_030583.json:
```json
{
    "assignees": [],
    "body": "* no longer use WITH_PYTHON\n\n* fix a bash syntax error\n\nCC:  @saraedum @embray @mkoeppe @dimpase\n\nComponent: **docker**\n\nKeywords: **ContinuousIntegration**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nBranch/Commit: **[`e9812be`](https://github.com/sagemath/sagetrac-mirror/commit/e9812be02ae1618d0d11b78e03b7824a0bd0129b)**\n\nReviewer: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30820_\n\n",
    "closed_at": "2020-11-07T16:23:45Z",
    "created_at": "2020-10-24T07:57:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20docker",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20docker"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "some CI details",
    "type": "issue",
    "updated_at": "2020-11-07T16:23:45Z",
    "url": "https://github.com/sagemath/sage/issues/30820",
    "user": "https://github.com/fchapoton"
}
```
* no longer use WITH_PYTHON

* fix a bash syntax error

CC:  @saraedum @embray @mkoeppe @dimpase

Component: **docker**

Keywords: **ContinuousIntegration**

Author: **Frédéric Chapoton**

Branch/Commit: **[`e9812be`](https://github.com/sagemath/sagetrac-mirror/commit/e9812be02ae1618d0d11b78e03b7824a0bd0129b)**

Reviewer: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/30820_





---

archive/issue_events_421980.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-10-24T07:57:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421980"
}
```



---

archive/issue_events_421981.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-10-24T07:57:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20docker",
    "label_color": "0000b0",
    "label_name": "c: docker",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421981"
}
```



---

archive/issue_events_421982.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-10-24T07:57:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421982"
}
```



---

archive/issue_events_421983.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-10-24T07:57:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421983"
}
```



---

archive/issue_comments_493089.json:
```json
{
    "body": "Branch: **[public/ticket/30820](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/30820)**",
    "created_at": "2020-10-24T07:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493089",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[public/ticket/30820](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/30820)**



---

archive/issue_events_421984.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-10-24T07:58:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421984"
}
```



---

archive/issue_comments_493090.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9812be02ae1618d0d11b78e03b7824a0bd0129b\"><code>e9812be</code></a></td><td><code>CI tweaks : no more WITH_PYTHON, fix bash syntax</code></td></tr></table>\n",
    "created_at": "2020-10-24T07:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493090",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9812be02ae1618d0d11b78e03b7824a0bd0129b"><code>e9812be</code></a></td><td><code>CI tweaks : no more WITH_PYTHON, fix bash syntax</code></td></tr></table>




---

archive/issue_comments_493091.json:
```json
{
    "body": "Commit: **[`e9812be`](https://github.com/sagemath/sagetrac-mirror/commit/e9812be02ae1618d0d11b78e03b7824a0bd0129b)**",
    "created_at": "2020-10-24T07:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493091",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`e9812be`](https://github.com/sagemath/sagetrac-mirror/commit/e9812be02ae1618d0d11b78e03b7824a0bd0129b)**



---

archive/issue_comments_493092.json:
```json
{
    "body": "Changed keywords from none to **ContinuousIntegration**",
    "created_at": "2020-10-24T12:25:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493092",
    "user": "https://github.com/fchapoton"
}
```

Changed keywords from none to **ContinuousIntegration**



---

archive/issue_events_421985.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421985"
}
```



---

archive/issue_events_421986.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421986"
}
```



---

archive/issue_events_421987.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-26T07:39:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421987"
}
```



---

archive/issue_events_421988.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-10-26T07:39:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421988"
}
```



---

archive/issue_comments_493093.json:
```json
{
    "body": "Reviewer: **Dima Pasechnik**",
    "created_at": "2020-10-26T07:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493093",
    "user": "https://github.com/dimpase"
}
```

Reviewer: **Dima Pasechnik**



---

archive/issue_comments_493094.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nlet us see if it makes a difference in CI",
    "created_at": "2020-10-26T07:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493094",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

let us see if it makes a difference in CI



---

archive/issue_comments_493095.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nThanks Dima. The changes here are not making any serious difference. Our current breaking point is handled in #30736.",
    "created_at": "2020-10-26T08:12:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493095",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:7" align="right">comment:7</div>

Thanks Dima. The changes here are not making any serious difference. Our current breaking point is handled in #30736.



---

archive/issue_comments_493096.json:
```json
{
    "body": "Dependencies: **#30736**",
    "created_at": "2020-10-26T09:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493096",
    "user": "https://github.com/dimpase"
}
```

Dependencies: **#30736**



---

archive/issue_comments_493097.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI've pushed the branch u/dimpase/ticket/30820, where I merged this ticket and #30736 - let's see if this works together.",
    "created_at": "2020-10-26T09:20:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493097",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">comment:8</div>

I've pushed the branch u/dimpase/ticket/30820, where I merged this ticket and #30736 - let's see if this works together.



---

archive/issue_comments_493098.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nBut it seems that this ticket alone already does the trick, according to\nhttps://gitlab.com/sagemath/dev/trac/-/pipelines/207109801",
    "created_at": "2020-10-26T09:23:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493098",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

But it seems that this ticket alone already does the trick, according to
https://gitlab.com/sagemath/dev/trac/-/pipelines/207109801



---

archive/issue_comments_493099.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@dimpase](#comment%3A9):\n> But it seems that this ticket alone already does the trick, according to\n> https://gitlab.com/sagemath/dev/trac/-/pipelines/207109801\n\nIndeed, that is good news! Although it warns about security issues.",
    "created_at": "2020-10-26T11:01:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493099",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@dimpase](#comment%3A9):
> But it seems that this ticket alone already does the trick, according to
> https://gitlab.com/sagemath/dev/trac/-/pipelines/207109801

Indeed, that is good news! Although it warns about security issues.



---

archive/issue_comments_493100.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI only see warnings from docker \n\n```\nd11b78e03b7824a0bd0129b .ci/push-gitlab.sh sagemath\n+ docker login -u gitlab-ci-token -p [MASKED] registry.gitlab.com\nWARNING! Using --password via the CLI is insecure. Use --password-stdin.\nWARNING! Your password will be stored unencrypted in /root/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/#credentials-store\nLogin Succeeded\n```\nso this is about a \"credential helper\" to be set up.\n\nno idea what it is though. nothing to do with git, I think.",
    "created_at": "2020-10-26T13:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493100",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:11" align="right">comment:11</div>

I only see warnings from docker 

```
d11b78e03b7824a0bd0129b .ci/push-gitlab.sh sagemath
+ docker login -u gitlab-ci-token -p [MASKED] registry.gitlab.com
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store
Login Succeeded
```
so this is about a "credential helper" to be set up.

no idea what it is though. nothing to do with git, I think.



---

archive/issue_comments_493101.json:
```json
{
    "body": "Changed dependencies from **#30736** to none",
    "created_at": "2020-10-26T13:12:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493101",
    "user": "https://github.com/dimpase"
}
```

Changed dependencies from **#30736** to none



---

archive/issue_comments_493102.json:
```json
{
    "body": "Changed branch from **[public/ticket/30820](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/30820)** to **[`e9812be`](https://github.com/sagemath/sagetrac-mirror/commit/e9812be02ae1618d0d11b78e03b7824a0bd0129b)**",
    "created_at": "2020-11-07T16:23:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30820#issuecomment-493102",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ticket/30820](https://github.com/sagemath/sagetrac-mirror/tree/public/ticket/30820)** to **[`e9812be`](https://github.com/sagemath/sagetrac-mirror/commit/e9812be02ae1618d0d11b78e03b7824a0bd0129b)**



---

archive/issue_events_421989.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-07T16:23:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421989"
}
```



---

archive/issue_events_421990.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1d7508b311b8347286f3dd9f16f9cb5cf4c67b55",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-11-07T16:23:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30820",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30820#event-421990"
}
```
