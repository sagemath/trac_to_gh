# Issue 30552: display options for matrices

archive/issues_030315.json:
```json
{
    "body": "As suggested in [This is the Trac macro *ticket:29203* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:29203-macro), this ticket adds `GlobalOptions` to control the display options of matrices. Currently, this only refactors the options to control the maximum number of rows and columns to display. New options will follow in separate tickets.\n\n```\nsage: matrix.options\nCurrent options for Matrix\n  - max_cols: 49\n  - max_rows: 19\nsage: matrix.options.max_cols = 6\nsage: matrix.options.max_rows = 3\nsage: matrix(ZZ, 3, 6)\n[0 0 0 0 0 0]\n[0 0 0 0 0 0]\n[0 0 0 0 0 0]\nsage: matrix(ZZ, 3, 7)\n3 x 7 dense matrix over Integer Ring (use the '.str()' method to see the entries)\n```\n\nThis also fixes an off-by-one error and deprecates the setters `set_max_rows`/`set_max_cols`.\n\nThe new code is placed in `sage.matrix.constructor`, since that is where `matrix`/`Matrix` is defined. The latter is not actually a class, so the `options` are attached via the ``@`matrix_method` decorator.\n\n\nCC:  @videlec\n\nBranch/Commit: 5fe9b2c2dc0125297fc6c14215315c564b77b6b6\n\nReviewer: Vincent Delecroix\n\nAuthor: Markus Wageringel\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30552\n\n",
    "closed_at": "2020-11-07T16:22:39Z",
    "created_at": "2020-09-10T18:23:22Z",
    "labels": [
        "component: refactoring",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "display options for matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30552",
    "user": "https://github.com/mwageringel"
}
```
As suggested in [This is the Trac macro *ticket:29203* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ticket:29203-macro), this ticket adds `GlobalOptions` to control the display options of matrices. Currently, this only refactors the options to control the maximum number of rows and columns to display. New options will follow in separate tickets.

```
sage: matrix.options
Current options for Matrix
  - max_cols: 49
  - max_rows: 19
sage: matrix.options.max_cols = 6
sage: matrix.options.max_rows = 3
sage: matrix(ZZ, 3, 6)
[0 0 0 0 0 0]
[0 0 0 0 0 0]
[0 0 0 0 0 0]
sage: matrix(ZZ, 3, 7)
3 x 7 dense matrix over Integer Ring (use the '.str()' method to see the entries)
```

This also fixes an off-by-one error and deprecates the setters `set_max_rows`/`set_max_cols`.

The new code is placed in `sage.matrix.constructor`, since that is where `matrix`/`Matrix` is defined. The latter is not actually a class, so the `options` are attached via the ``@`matrix_method` decorator.


CC:  @videlec

Branch/Commit: 5fe9b2c2dc0125297fc6c14215315c564b77b6b6

Reviewer: Vincent Delecroix

Author: Markus Wageringel

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30552





---

archive/issue_comments_604729.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[bac5148](https://github.com/sagemath/sagetrac-mirror/commit/bac514846aa1d9bc0cf4aa417de861ab07060d8f)|`30552: implement global options for matrices`|",
    "created_at": "2020-09-10T18:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604729",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[bac5148](https://github.com/sagemath/sagetrac-mirror/commit/bac514846aa1d9bc0cf4aa417de861ab07060d8f)|`30552: implement global options for matrices`|



---

archive/issue_comments_604730.json:
```json
{
    "body": "Changing branch from \"\" to \"u/gh-mwageringel/30552\"",
    "created_at": "2020-09-10T18:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604730",
    "user": "https://github.com/mwageringel"
}
```

Changing branch from "" to "u/gh-mwageringel/30552"



---

archive/issue_comments_604731.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-10T18:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604731",
    "user": "https://github.com/mwageringel"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_604732.json:
```json
{
    "body": "Changing author from \"\" to \"Markus Wageringel\"",
    "created_at": "2020-09-10T18:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604732",
    "user": "https://github.com/mwageringel"
}
```

Changing author from "" to "Markus Wageringel"



---

archive/issue_comments_604733.json:
```json
{
    "body": "Changing commit from \"\" to \"bac514846aa1d9bc0cf4aa417de861ab07060d8f\"",
    "created_at": "2020-09-10T18:31:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604733",
    "user": "https://github.com/mwageringel"
}
```

Changing commit from "" to "bac514846aa1d9bc0cf4aa417de861ab07060d8f"



---

archive/issue_comments_604734.json:
```json
{
    "body": "Changing commit from \"bac514846aa1d9bc0cf4aa417de861ab07060d8f\" to \"3a149e1603059b188389111bc3b3c6b89029dbae\"",
    "created_at": "2020-09-11T06:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bac514846aa1d9bc0cf4aa417de861ab07060d8f" to "3a149e1603059b188389111bc3b3c6b89029dbae"



---

archive/issue_comments_604735.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[3a149e1](https://github.com/sagemath/sagetrac-mirror/commit/3a149e1603059b188389111bc3b3c6b89029dbae)|`30552: implement global options for matrices`|",
    "created_at": "2020-09-11T06:55:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604735",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[3a149e1](https://github.com/sagemath/sagetrac-mirror/commit/3a149e1603059b188389111bc3b3c6b89029dbae)|`30552: implement global options for matrices`|



---

archive/issue_comments_604736.json:
```json
{
    "body": "Changing commit from \"3a149e1603059b188389111bc3b3c6b89029dbae\" to \"7d0b5481ce14036403dad4c2647822e453f528e0\"",
    "created_at": "2020-10-11T13:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604736",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3a149e1603059b188389111bc3b3c6b89029dbae" to "7d0b5481ce14036403dad4c2647822e453f528e0"



---

archive/issue_comments_604737.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|\n|[7d0b548](https://github.com/sagemath/sagetrac-mirror/commit/7d0b5481ce14036403dad4c2647822e453f528e0)|`30552: implement global options for matrices`|",
    "created_at": "2020-10-11T13:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604737",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------|
|[7d0b548](https://github.com/sagemath/sagetrac-mirror/commit/7d0b5481ce14036403dad4c2647822e453f528e0)|`30552: implement global options for matrices`|



---

archive/issue_comments_604738.json:
```json
{
    "body": "<a id='comment:4'></a>\nSetting\n\n```\n+        sage: matrix.options.max_cols = 6\n+        sage: matrix.options.max_rows = 3\n```\nin a doctest might have side effects (ie not reset the values in further doctests). See eg the examples in `structure/global_options.py`. Could you reset the values at the end of the same example block (with `matrix.options._reset()`)?",
    "created_at": "2020-10-11T21:11:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604738",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>
Setting

```
+        sage: matrix.options.max_cols = 6
+        sage: matrix.options.max_rows = 3
```
in a doctest might have side effects (ie not reset the values in further doctests). See eg the examples in `structure/global_options.py`. Could you reset the values at the end of the same example block (with `matrix.options._reset()`)?



---

archive/issue_comments_604739.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2020-10-11T21:11:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604739",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_604740.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                     |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[5fe9b2c](https://github.com/sagemath/sagetrac-mirror/commit/5fe9b2c2dc0125297fc6c14215315c564b77b6b6)|`30552: reset options after examples`|",
    "created_at": "2020-10-12T19:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604740",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                     |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[5fe9b2c](https://github.com/sagemath/sagetrac-mirror/commit/5fe9b2c2dc0125297fc6c14215315c564b77b6b6)|`30552: reset options after examples`|



---

archive/issue_comments_604741.json:
```json
{
    "body": "Changing commit from \"7d0b5481ce14036403dad4c2647822e453f528e0\" to \"5fe9b2c2dc0125297fc6c14215315c564b77b6b6\"",
    "created_at": "2020-10-12T19:07:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7d0b5481ce14036403dad4c2647822e453f528e0" to "5fe9b2c2dc0125297fc6c14215315c564b77b6b6"



---

archive/issue_comments_604742.json:
```json
{
    "body": "<a id='comment:7'></a>\nGood point. I have updated the example as you suggested.",
    "created_at": "2020-10-12T19:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604742",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:7'></a>
Good point. I have updated the example as you suggested.



---

archive/issue_comments_604743.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-12T20:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604743",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_604744.json:
```json
{
    "body": "<a id='comment:9'></a>\nThank you.",
    "created_at": "2020-10-12T20:54:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604744",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:9'></a>
Thank you.



---

archive/issue_comments_604745.json:
```json
{
    "body": "Changing branch from \"u/gh-mwageringel/30552\" to \"5fe9b2c2dc0125297fc6c14215315c564b77b6b6\"",
    "created_at": "2020-11-07T16:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604745",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-mwageringel/30552" to "5fe9b2c2dc0125297fc6c14215315c564b77b6b6"



---

archive/issue_events_089474.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-07T16:22:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30552#event-89474"
}
```



---

archive/issue_comments_604746.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-07T16:22:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30552",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30552#issuecomment-604746",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
