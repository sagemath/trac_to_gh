# Issue 30578: Add src/requirements.txt for installation of sagelib in a venv

archive/issues_030341.json:
```json
{
    "assignees": [],
    "body": "After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n\nIn this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate installing sagelib into such a venv. (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n\nA virtual environment using it can be created and doctested using:\n\n```\n./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'\n```\n(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` first - this is from #30527.)\n\nRelated:\n- #28746 Developer's Guide: Add instructions for sagelib development in a conda environment\n- #28752 Make sagelib pip-installable in a conda environment\n\nFollow-up tickets:\n- #30371 In-place (editable) installs of sagelib in a venv\n- #29041 at `./bootstrap` time, generate `requirements.txt`, `constraints.txt`, `setup.cfg [install_requires]`, `Pipfile` from `build/pkgs`\n- add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n\nDepends on #30527\nDepends on #30013\n\nCC:  @tobiasdiez @kiwifb @jhpalmieri @videlec\n\nKeywords: **sd111**\n\nBranch/Commit: **[u/mkoeppe/add-src-requirements-txt](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add-src-requirements-txt) @ [`9ad6b36`](https://github.com/sagemath/sagetrac-mirror/commit/9ad6b36a3523c3d04f66a62662d09d5e8dfa5142)**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30578_\n\n",
    "closed_at": "2021-07-29T19:13:51Z",
    "created_at": "2020-09-15T20:20:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/duplicate",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Add src/requirements.txt for installation of sagelib in a venv",
    "type": "issue",
    "updated_at": "2021-07-29T19:13:51Z",
    "url": "https://github.com/sagemath/sage/issues/30578",
    "user": "https://github.com/mkoeppe"
}
```
After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  

In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate installing sagelib into such a venv. (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)

A virtual environment using it can be created and doctested using:

```
./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'
```
(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` first - this is from #30527.)

Related:
- #28746 Developer's Guide: Add instructions for sagelib development in a conda environment
- #28752 Make sagelib pip-installable in a conda environment

Follow-up tickets:
- #30371 In-place (editable) installs of sagelib in a venv
- #29041 at `./bootstrap` time, generate `requirements.txt`, `constraints.txt`, `setup.cfg [install_requires]`, `Pipfile` from `build/pkgs`
- add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 

Depends on #30527
Depends on #30013

CC:  @tobiasdiez @kiwifb @jhpalmieri @videlec

Keywords: **sd111**

Branch/Commit: **[u/mkoeppe/add-src-requirements-txt](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add-src-requirements-txt) @ [`9ad6b36`](https://github.com/sagemath/sagetrac-mirror/commit/9ad6b36a3523c3d04f66a62662d09d5e8dfa5142)**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/30578_





---

archive/issue_events_421558.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T20:20:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421558"
}
```



---

archive/issue_events_421559.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T20:20:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421559"
}
```



---

archive/issue_events_421560.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T20:20:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421560"
}
```



---

archive/issue_events_421561.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-15T20:20:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421561"
}
```



---

archive/issue_comments_487864.json:
```json
{
    "body": "Changed dependencies from **#30527** to **#29500, #30527, #22731**",
    "created_at": "2020-09-15T20:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487864",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30527** to **#29500, #30527, #22731**



---

archive/issue_comments_487865.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n \n In this ticket, we create `src/requirements.txt` to facilitate this.\n+(This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n``````\n",
    "created_at": "2020-09-15T20:22:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487865",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,7 @@
 After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
 
 In this ticket, we create `src/requirements.txt` to facilitate this.
+(This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
 We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 
``````




---

archive/issue_comments_487866.json:
```json
{
    "body": "Branch: **[u/mkoeppe/add-src-requirements-txt](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add-src-requirements-txt)**",
    "created_at": "2020-09-15T20:24:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487866",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/add-src-requirements-txt](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/add-src-requirements-txt)**



---

archive/issue_comments_487867.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWhat do you think about generating the requirements.txt file from a pipfile: https://pipenv-fork.readthedocs.io/en/latest/advanced.html#generating-a-requirements-txt? (Maybe as part of this ticket or as #29041)\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a646747dbf7c823030e1b23419348ff795a0661\"><code>0a64674</code></a></td><td><code>build/pkgs/gambit/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca586938cbdd91114a10dd3364201c8076412485\"><code>ca58693</code></a></td><td><code>build/pkgs/pillow/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/207d80f99b8498b9d34e6dd7cee4f0d3d00e53c5\"><code>207d80f</code></a></td><td><code>build/pkgs/pip2pi: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2555e19712ee6bc2f9b4edf982b5f86d1bb9a6fe\"><code>2555e19</code></a></td><td><code>build/make/install: At the end, update the repository index</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a747c48eca1be0104c202e4922e5386aa794d08\"><code>5a747c4</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Remove pip2 support</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e66243f23a20a6499b0ad33c5538ae4f36b31764\"><code>e66243f</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30527/pep-503-simple-repository-for-wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9937126f6c18d3bbf1eeb28d69c610492daeb23f\"><code>9937126</code></a></td><td><code>Merge branch 't/30527/pep-503-simple-repository-for-wheels' into t/30371/public/build/inplace</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a39442df31b764771970b5c8031ba38a6255d0f\"><code>1a39442</code></a></td><td><code>build/pkgs/sagelib/src/setup.py: Replace symlink to SAGE_SRC/setup.py by a copy</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67c56a6a215f646336b6fe8374aca89fa6d8bb84\"><code>67c56a6</code></a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d88afe7a80236573849fe1fd23590c4443a3382\"><code>1d88afe</code></a></td><td><code>WIP</code></td></tr></table>\n",
    "created_at": "2020-09-15T20:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487867",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:4" align="right">comment:4</div>

What do you think about generating the requirements.txt file from a pipfile: https://pipenv-fork.readthedocs.io/en/latest/advanced.html#generating-a-requirements-txt? (Maybe as part of this ticket or as #29041)

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a646747dbf7c823030e1b23419348ff795a0661"><code>0a64674</code></a></td><td><code>build/pkgs/gambit/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca586938cbdd91114a10dd3364201c8076412485"><code>ca58693</code></a></td><td><code>build/pkgs/pillow/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/207d80f99b8498b9d34e6dd7cee4f0d3d00e53c5"><code>207d80f</code></a></td><td><code>build/pkgs/pip2pi: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2555e19712ee6bc2f9b4edf982b5f86d1bb9a6fe"><code>2555e19</code></a></td><td><code>build/make/install: At the end, update the repository index</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a747c48eca1be0104c202e4922e5386aa794d08"><code>5a747c4</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Remove pip2 support</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e66243f23a20a6499b0ad33c5538ae4f36b31764"><code>e66243f</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30527/pep-503-simple-repository-for-wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9937126f6c18d3bbf1eeb28d69c610492daeb23f"><code>9937126</code></a></td><td><code>Merge branch 't/30527/pep-503-simple-repository-for-wheels' into t/30371/public/build/inplace</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a39442df31b764771970b5c8031ba38a6255d0f"><code>1a39442</code></a></td><td><code>build/pkgs/sagelib/src/setup.py: Replace symlink to SAGE_SRC/setup.py by a copy</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67c56a6a215f646336b6fe8374aca89fa6d8bb84"><code>67c56a6</code></a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d88afe7a80236573849fe1fd23590c4443a3382"><code>1d88afe</code></a></td><td><code>WIP</code></td></tr></table>




---

archive/issue_comments_487868.json:
```json
{
    "body": "Commit: **[`1d88afe`](https://github.com/sagemath/sagetrac-mirror/commit/1d88afe7a80236573849fe1fd23590c4443a3382)**",
    "created_at": "2020-09-15T20:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487868",
    "user": "https://github.com/tobiasdiez"
}
```

Commit: **[`1d88afe`](https://github.com/sagemath/sagetrac-mirror/commit/1d88afe7a80236573849fe1fd23590c4443a3382)**



---

archive/issue_comments_487869.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nYes, I started to play a bit with pipenv, and this looks like a possible route.\n\nI would like to keep that for #29041 though.\n\nOn the present ticket I would only want to do the most rudimentary thing - basically to try out the adjustments that sagelib will need (see #22731).",
    "created_at": "2020-09-15T20:50:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487869",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Yes, I started to play a bit with pipenv, and this looks like a possible route.

I would like to keep that for #29041 though.

On the present ticket I would only want to do the most rudimentary thing - basically to try out the adjustments that sagelib will need (see #22731).



---

archive/issue_comments_487870.json:
```json
{
    "body": "Changed commit from **[`1d88afe`](https://github.com/sagemath/sagetrac-mirror/commit/1d88afe7a80236573849fe1fd23590c4443a3382)** to **[`ba2a6b9`](https://github.com/sagemath/sagetrac-mirror/commit/ba2a6b94c3782fa044e70384fb7dab906353e96b)**",
    "created_at": "2020-09-15T21:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487870",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1d88afe`](https://github.com/sagemath/sagetrac-mirror/commit/1d88afe7a80236573849fe1fd23590c4443a3382)** to **[`ba2a6b9`](https://github.com/sagemath/sagetrac-mirror/commit/ba2a6b94c3782fa044e70384fb7dab906353e96b)**



---

archive/issue_comments_487871.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e83725f450c0f55bf6f8d823f53eda1b72762f4a\"><code>e83725f</code></a></td><td><code>sage_setup.command.sage_install.sage_install: Rename to sage_install_and_clean, update use it in src/setup.py; refactor through new class sage_install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba2a6b94c3782fa044e70384fb7dab906353e96b\"><code>ba2a6b9</code></a></td><td><code>src/requirements.txt: Add sage_conf</code></td></tr></table>\n",
    "created_at": "2020-09-15T21:25:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487871",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e83725f450c0f55bf6f8d823f53eda1b72762f4a"><code>e83725f</code></a></td><td><code>sage_setup.command.sage_install.sage_install: Rename to sage_install_and_clean, update use it in src/setup.py; refactor through new class sage_install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba2a6b94c3782fa044e70384fb7dab906353e96b"><code>ba2a6b9</code></a></td><td><code>src/requirements.txt: Add sage_conf</code></td></tr></table>




---

archive/issue_comments_487872.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/033a95a9362c31a48e24750f63be5e76254c37a8\"><code>033a95a</code></a></td><td><code>sage_setup.command.sage_install: Fixup: Remove cleaning code (moved to sage_install_and_clean)</code></td></tr></table>\n",
    "created_at": "2020-09-15T22:30:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487872",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/033a95a9362c31a48e24750f63be5e76254c37a8"><code>033a95a</code></a></td><td><code>sage_setup.command.sage_install: Fixup: Remove cleaning code (moved to sage_install_and_clean)</code></td></tr></table>




---

archive/issue_comments_487873.json:
```json
{
    "body": "Changed commit from **[`ba2a6b9`](https://github.com/sagemath/sagetrac-mirror/commit/ba2a6b94c3782fa044e70384fb7dab906353e96b)** to **[`033a95a`](https://github.com/sagemath/sagetrac-mirror/commit/033a95a9362c31a48e24750f63be5e76254c37a8)**",
    "created_at": "2020-09-15T22:30:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487873",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ba2a6b9`](https://github.com/sagemath/sagetrac-mirror/commit/ba2a6b94c3782fa044e70384fb7dab906353e96b)** to **[`033a95a`](https://github.com/sagemath/sagetrac-mirror/commit/033a95a9362c31a48e24750f63be5e76254c37a8)**



---

archive/issue_comments_487874.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,10 @@\n In this ticket, we create `src/requirements.txt` to facilitate this.\n (This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n-We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n+We add a tox environment to `src/tox.ini`, enabling the command\n+`../sage -sh -c 'tox -e develop'` (with #30410: `../sage -tox -e develop`) for building sagelib in a venv.\n+\n+We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n The existing `src/setup.py` is copied into `build/pkgs/sagelib/src`  to replace the symlink. In this way, the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library.\n \n``````\n",
    "created_at": "2020-09-17T02:36:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487874",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,10 @@
 In this ticket, we create `src/requirements.txt` to facilitate this.
 (This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
-We add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
+We add a tox environment to `src/tox.ini`, enabling the command
+`../sage -sh -c 'tox -e develop'` (with #30410: `../sage -tox -e develop`) for building sagelib in a venv.
+
+We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 
 The existing `src/setup.py` is copied into `build/pkgs/sagelib/src`  to replace the symlink. In this way, the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library.
 
``````




---

archive/issue_comments_487875.json:
```json
{
    "body": "Changed commit from **[`033a95a`](https://github.com/sagemath/sagetrac-mirror/commit/033a95a9362c31a48e24750f63be5e76254c37a8)** to **[`4ed815a`](https://github.com/sagemath/sagetrac-mirror/commit/4ed815a432dab3f03f17c792506377f86d2f13e6)**",
    "created_at": "2020-09-17T02:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487875",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`033a95a`](https://github.com/sagemath/sagetrac-mirror/commit/033a95a9362c31a48e24750f63be5e76254c37a8)** to **[`4ed815a`](https://github.com/sagemath/sagetrac-mirror/commit/4ed815a432dab3f03f17c792506377f86d2f13e6)**



---

archive/issue_comments_487876.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ed815a432dab3f03f17c792506377f86d2f13e6\"><code>4ed815a</code></a></td><td><code>src/tox.ini (develop): New</code></td></tr></table>\n",
    "created_at": "2020-09-17T02:37:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487876",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ed815a432dab3f03f17c792506377f86d2f13e6"><code>4ed815a</code></a></td><td><code>src/tox.ini (develop): New</code></td></tr></table>




---

archive/issue_events_421562.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-19T20:17:31Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "title_is": "Add src/requirements.txt and src/setup.cfg [install_requires] for installation of sagelib in a venv",
    "title_was": "Add src/requirements.txt for installation of sagelib in a venv",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421562"
}
```



---

archive/issue_comments_487877.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85175ab94703854ec80ceae0a32ec6bf08c13d60\"><code>85175ab</code></a></td><td><code>src/setup.py: Switch to setuptools, add setup.cfg, install-requires.txt</code></td></tr></table>\n",
    "created_at": "2020-09-21T01:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487877",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85175ab94703854ec80ceae0a32ec6bf08c13d60"><code>85175ab</code></a></td><td><code>src/setup.py: Switch to setuptools, add setup.cfg, install-requires.txt</code></td></tr></table>




---

archive/issue_comments_487878.json:
```json
{
    "body": "Changed commit from **[`4ed815a`](https://github.com/sagemath/sagetrac-mirror/commit/4ed815a432dab3f03f17c792506377f86d2f13e6)** to **[`85175ab`](https://github.com/sagemath/sagetrac-mirror/commit/85175ab94703854ec80ceae0a32ec6bf08c13d60)**",
    "created_at": "2020-09-21T01:32:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487878",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4ed815a`](https://github.com/sagemath/sagetrac-mirror/commit/4ed815a432dab3f03f17c792506377f86d2f13e6)** to **[`85175ab`](https://github.com/sagemath/sagetrac-mirror/commit/85175ab94703854ec80ceae0a32ec6bf08c13d60)**



---

archive/issue_comments_487879.json:
```json
{
    "body": "Changed dependencies from **#29500, #30527, #22731** to **#29500, #30527, #30658, #22731**",
    "created_at": "2020-09-26T00:39:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487879",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29500, #30527, #22731** to **#29500, #30527, #30658, #22731**



---

archive/issue_comments_487880.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ee21109dfb001feec2b032c197defb91cc75783\"><code>9ee2110</code></a></td><td><code>build/bin/sage-dist-helpers: Also use $sudo for storing the wheel file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7aac84ab4dd86ad6203a99eb82371c1d2a46363\"><code>d7aac84</code></a></td><td><code>src/doc/en/developer/packaging.rst: Update sdh_... documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b7c7a04d658838ce511e352edb9c03f42c4a7f2\"><code>9b7c7a0</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Fix typo in comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4135e8b236d2e5491b3ee96cbd00196dc5b6e036\"><code>4135e8b</code></a></td><td><code>build/bin/sage-pip-install: Remove an outdated comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2e707561ab3044221b57151ae4cc67d502fe9f8\"><code>f2e7075</code></a></td><td><code>Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2efa14a764e9e205f445fc7a44295aebc45ec41\"><code>c2efa14</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30658/conda_forge_ubuntu_standard__pillow_fails_to_install__follow_up_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff0c97310b273bceef775021704c0e08b48b9117\"><code>ff0c973</code></a></td><td><code>build/pkgs/pillow/spkg-install.in: Fix up 'setup.py bdist_wheel' command</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/63490fd5202fd38d7d6540da1e06e580305d0954\"><code>63490fd</code></a></td><td><code>Merge branch 't/30658/conda_forge_ubuntu_standard__pillow_fails_to_install__follow_up_' into t/30578/add-src-requirements-txt</code></td></tr></table>\n",
    "created_at": "2020-09-26T00:41:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487880",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ee21109dfb001feec2b032c197defb91cc75783"><code>9ee2110</code></a></td><td><code>build/bin/sage-dist-helpers: Also use $sudo for storing the wheel file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7aac84ab4dd86ad6203a99eb82371c1d2a46363"><code>d7aac84</code></a></td><td><code>src/doc/en/developer/packaging.rst: Update sdh_... documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b7c7a04d658838ce511e352edb9c03f42c4a7f2"><code>9b7c7a0</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Fix typo in comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4135e8b236d2e5491b3ee96cbd00196dc5b6e036"><code>4135e8b</code></a></td><td><code>build/bin/sage-pip-install: Remove an outdated comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2e707561ab3044221b57151ae4cc67d502fe9f8"><code>f2e7075</code></a></td><td><code>Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2efa14a764e9e205f445fc7a44295aebc45ec41"><code>c2efa14</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30658/conda_forge_ubuntu_standard__pillow_fails_to_install__follow_up_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff0c97310b273bceef775021704c0e08b48b9117"><code>ff0c973</code></a></td><td><code>build/pkgs/pillow/spkg-install.in: Fix up 'setup.py bdist_wheel' command</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/63490fd5202fd38d7d6540da1e06e580305d0954"><code>63490fd</code></a></td><td><code>Merge branch 't/30658/conda_forge_ubuntu_standard__pillow_fails_to_install__follow_up_' into t/30578/add-src-requirements-txt</code></td></tr></table>




---

archive/issue_comments_487881.json:
```json
{
    "body": "Changed commit from **[`85175ab`](https://github.com/sagemath/sagetrac-mirror/commit/85175ab94703854ec80ceae0a32ec6bf08c13d60)** to **[`63490fd`](https://github.com/sagemath/sagetrac-mirror/commit/63490fd5202fd38d7d6540da1e06e580305d0954)**",
    "created_at": "2020-09-26T00:41:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487881",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`85175ab`](https://github.com/sagemath/sagetrac-mirror/commit/85175ab94703854ec80ceae0a32ec6bf08c13d60)** to **[`63490fd`](https://github.com/sagemath/sagetrac-mirror/commit/63490fd5202fd38d7d6540da1e06e580305d0954)**



---

archive/issue_comments_487882.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a2491a5c4ef99ba8e63ebb5c81ae69e45605c60\"><code>5a2491a</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30527/pep-503-simple-repository-for-wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4e3a2c3e2f75d6c8b20d11d22e0efd24718baaf6\"><code>4e3a2c3</code></a></td><td><code>Merge branch 't/30527/pep-503-simple-repository-for-wheels' into t/30578/add-src-requirements-txt</code></td></tr></table>\n",
    "created_at": "2020-09-26T00:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487882",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a2491a5c4ef99ba8e63ebb5c81ae69e45605c60"><code>5a2491a</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30527/pep-503-simple-repository-for-wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4e3a2c3e2f75d6c8b20d11d22e0efd24718baaf6"><code>4e3a2c3</code></a></td><td><code>Merge branch 't/30527/pep-503-simple-repository-for-wheels' into t/30578/add-src-requirements-txt</code></td></tr></table>




---

archive/issue_comments_487883.json:
```json
{
    "body": "Changed commit from **[`63490fd`](https://github.com/sagemath/sagetrac-mirror/commit/63490fd5202fd38d7d6540da1e06e580305d0954)** to **[`4e3a2c3`](https://github.com/sagemath/sagetrac-mirror/commit/4e3a2c3e2f75d6c8b20d11d22e0efd24718baaf6)**",
    "created_at": "2020-09-26T00:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487883",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`63490fd`](https://github.com/sagemath/sagetrac-mirror/commit/63490fd5202fd38d7d6540da1e06e580305d0954)** to **[`4e3a2c3`](https://github.com/sagemath/sagetrac-mirror/commit/4e3a2c3e2f75d6c8b20d11d22e0efd24718baaf6)**



---

archive/issue_comments_487884.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/659f723dc36795501ae960c61dce1e9f463c117f\"><code>659f723</code></a></td><td><code>Merge tag '9.2.rc2' into t/30578/add-src-requirements-txt</code></td></tr></table>\n",
    "created_at": "2020-10-16T21:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487884",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/659f723dc36795501ae960c61dce1e9f463c117f"><code>659f723</code></a></td><td><code>Merge tag '9.2.rc2' into t/30578/add-src-requirements-txt</code></td></tr></table>




---

archive/issue_comments_487885.json:
```json
{
    "body": "Changed commit from **[`4e3a2c3`](https://github.com/sagemath/sagetrac-mirror/commit/4e3a2c3e2f75d6c8b20d11d22e0efd24718baaf6)** to **[`659f723`](https://github.com/sagemath/sagetrac-mirror/commit/659f723dc36795501ae960c61dce1e9f463c117f)**",
    "created_at": "2020-10-16T21:28:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487885",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4e3a2c3`](https://github.com/sagemath/sagetrac-mirror/commit/4e3a2c3e2f75d6c8b20d11d22e0efd24718baaf6)** to **[`659f723`](https://github.com/sagemath/sagetrac-mirror/commit/659f723dc36795501ae960c61dce1e9f463c117f)**



---

archive/issue_comments_487886.json:
```json
{
    "body": "Work Issues: **rebase on #30779**",
    "created_at": "2020-10-16T22:20:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487886",
    "user": "https://github.com/mkoeppe"
}
```

Work Issues: **rebase on #30779**



---

archive/issue_comments_487887.json:
```json
{
    "body": "Changed dependencies from **#29500, #30527, #30658, #22731** to **#30527, #22731 | #30779**",
    "created_at": "2020-10-16T22:20:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487887",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#29500, #30527, #30658, #22731** to **#30527, #22731 | #30779**



---

archive/issue_events_421563.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421563"
}
```



---

archive/issue_events_421564.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421564"
}
```



---

archive/issue_comments_487888.json:
```json
{
    "body": "Changed work issues from **rebase on #30779** to none",
    "created_at": "2020-11-11T02:47:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487888",
    "user": "https://github.com/mkoeppe"
}
```

Changed work issues from **rebase on #30779** to none



---

archive/issue_comments_487889.json:
```json
{
    "body": "Changed dependencies from **#30527, #22731 | #30779** to **#30527, #22731, #30780**",
    "created_at": "2020-11-11T02:47:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487889",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30527, #22731 | #30779** to **#30527, #22731, #30780**



---

archive/issue_comments_487890.json:
```json
{
    "body": "Changed commit from **[`659f723`](https://github.com/sagemath/sagetrac-mirror/commit/659f723dc36795501ae960c61dce1e9f463c117f)** to **[`22a92ce`](https://github.com/sagemath/sagetrac-mirror/commit/22a92ce79d166fdaab35bf56aae64ebc830a9090)**",
    "created_at": "2020-11-11T02:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487890",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`659f723`](https://github.com/sagemath/sagetrac-mirror/commit/659f723dc36795501ae960c61dce1e9f463c117f)** to **[`22a92ce`](https://github.com/sagemath/sagetrac-mirror/commit/22a92ce79d166fdaab35bf56aae64ebc830a9090)**



---

archive/issue_comments_487891.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f82f3458f0f0a6621898756cc9f8dc5da94f679b\"><code>f82f345</code></a></td><td><code>Merge branch 't/22731/22731' into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/79801309c0aa7e455db183a9865a57b8f49ad2b5\"><code>7980130</code></a></td><td><code>Merge branch 't/30779/duplicate_src_setup_py' into t/30780/sage_setup__separate_installing_and_cleaning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b9562827f92371c91109fc62380fecf7af8f65d\"><code>9b95628</code></a></td><td><code>sage_setup.command.sage_install.sage_install: Rename to sage_install_and_clean, update use it in build/pkgs/sagelib/src/setup.py; refactor through new class sage_install</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad9402f606204d6dd9a454b9b055bed63247d97a\"><code>ad9402f</code></a></td><td><code>sage_setup.command.sage_install: Fixup: Remove cleaning code (moved to sage_install_and_clean)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2fa705c3833f15c8e07d9e5d7c19b809a0d0a3a\"><code>e2fa705</code></a></td><td><code>Merge branch 't/30780/sage_setup__separate_installing_and_cleaning' into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3557bb85739d006b85744789aab36aed83c3b364\"><code>3557bb8</code></a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c584408b26bc98883b7fc45b2f4dabe6f8e9a867\"><code>c584408</code></a></td><td><code>WIP</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/343ebfb621035c5fabf465ee63723002f957eca9\"><code>343ebfb</code></a></td><td><code>src/requirements.txt: Add sage_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e766ec1e5ae6be228b885760577571be5521d9c\"><code>1e766ec</code></a></td><td><code>src/tox.ini (develop): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22a92ce79d166fdaab35bf56aae64ebc830a9090\"><code>22a92ce</code></a></td><td><code>src/setup.py: Switch to setuptools, add setup.cfg, install-requires.txt</code></td></tr></table>\n",
    "created_at": "2020-11-11T02:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487891",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f82f3458f0f0a6621898756cc9f8dc5da94f679b"><code>f82f345</code></a></td><td><code>Merge branch 't/22731/22731' into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/79801309c0aa7e455db183a9865a57b8f49ad2b5"><code>7980130</code></a></td><td><code>Merge branch 't/30779/duplicate_src_setup_py' into t/30780/sage_setup__separate_installing_and_cleaning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b9562827f92371c91109fc62380fecf7af8f65d"><code>9b95628</code></a></td><td><code>sage_setup.command.sage_install.sage_install: Rename to sage_install_and_clean, update use it in build/pkgs/sagelib/src/setup.py; refactor through new class sage_install</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad9402f606204d6dd9a454b9b055bed63247d97a"><code>ad9402f</code></a></td><td><code>sage_setup.command.sage_install: Fixup: Remove cleaning code (moved to sage_install_and_clean)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2fa705c3833f15c8e07d9e5d7c19b809a0d0a3a"><code>e2fa705</code></a></td><td><code>Merge branch 't/30780/sage_setup__separate_installing_and_cleaning' into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3557bb85739d006b85744789aab36aed83c3b364"><code>3557bb8</code></a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c584408b26bc98883b7fc45b2f4dabe6f8e9a867"><code>c584408</code></a></td><td><code>WIP</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/343ebfb621035c5fabf465ee63723002f957eca9"><code>343ebfb</code></a></td><td><code>src/requirements.txt: Add sage_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e766ec1e5ae6be228b885760577571be5521d9c"><code>1e766ec</code></a></td><td><code>src/tox.ini (develop): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22a92ce79d166fdaab35bf56aae64ebc830a9090"><code>22a92ce</code></a></td><td><code>src/setup.py: Switch to setuptools, add setup.cfg, install-requires.txt</code></td></tr></table>




---

archive/issue_comments_487892.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n (This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n We add a tox environment to `src/tox.ini`, enabling the command\n-`../sage -sh -c 'tox -e develop'` (with #30410: `../sage -tox -e develop`) for building sagelib in a venv.\n+`../sage -sh -c 'tox -e develop'` (with #30410: `../sage -tox -e develop`) for building sagelib in a venv.  (This requires `sage -i pip2pi` from #30527.)\n \n We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n``````\n",
    "created_at": "2020-11-11T03:06:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487892",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 (This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
 We add a tox environment to `src/tox.ini`, enabling the command
-`../sage -sh -c 'tox -e develop'` (with #30410: `../sage -tox -e develop`) for building sagelib in a venv.
+`../sage -sh -c 'tox -e develop'` (with #30410: `../sage -tox -e develop`) for building sagelib in a venv.  (This requires `sage -i pip2pi` from #30527.)
 
 We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 
``````




---

archive/issue_comments_487893.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e9b41980a6c128689f9a3ff07b118493d60e969\"><code>9e9b419</code></a></td><td><code>src/requirements.txt, src/setup.cfg: Fix up</code></td></tr></table>\n",
    "created_at": "2020-11-11T03:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487893",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e9b41980a6c128689f9a3ff07b118493d60e969"><code>9e9b419</code></a></td><td><code>src/requirements.txt, src/setup.cfg: Fix up</code></td></tr></table>




---

archive/issue_comments_487894.json:
```json
{
    "body": "Changed commit from **[`22a92ce`](https://github.com/sagemath/sagetrac-mirror/commit/22a92ce79d166fdaab35bf56aae64ebc830a9090)** to **[`9e9b419`](https://github.com/sagemath/sagetrac-mirror/commit/9e9b41980a6c128689f9a3ff07b118493d60e969)**",
    "created_at": "2020-11-11T03:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487894",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`22a92ce`](https://github.com/sagemath/sagetrac-mirror/commit/22a92ce79d166fdaab35bf56aae64ebc830a9090)** to **[`9e9b419`](https://github.com/sagemath/sagetrac-mirror/commit/9e9b41980a6c128689f9a3ff07b118493d60e969)**



---

archive/issue_comments_487895.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,7 @@\n (This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n We add a tox environment to `src/tox.ini`, enabling the command\n-`../sage -sh -c 'tox -e develop'` (with #30410: `../sage -tox -e develop`) for building sagelib in a venv.  (This requires `sage -i pip2pi` from #30527.)\n+`../sage -tox -e develop` for building sagelib in a venv.  (This requires `sage -i pip2pi` from #30527.)\n \n We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n``````\n",
    "created_at": "2020-11-11T03:36:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487895",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,7 @@
 (This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
 We add a tox environment to `src/tox.ini`, enabling the command
-`../sage -sh -c 'tox -e develop'` (with #30410: `../sage -tox -e develop`) for building sagelib in a venv.  (This requires `sage -i pip2pi` from #30527.)
+`../sage -tox -e develop` for building sagelib in a venv.  (This requires `sage -i pip2pi` from #30527.)
 
 We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 
``````




---

archive/issue_comments_487896.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,15 +1,17 @@\n After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n \n-In this ticket, we create `src/requirements.txt` to facilitate this.\n+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> \n+ src/requirements.txt` to facilitate this.\n (This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n-We add a tox environment to `src/tox.ini`, enabling the command\n-`../sage -tox -e develop` for building sagelib in a venv.  (This requires `sage -i pip2pi` from #30527.)\n+A virtual environment using it can be created using:\n+./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'\n+(This requires `sage -i pip2pi` from #30527.)\n+\n+\n+(We also add a tox environment `develop` to `src/tox.ini`, enabling the command `../sage -tox -e develop` for building sagelib in a venv - but this needs further work in #30371.)\n \n We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n-\n-The existing `src/setup.py` is copied into `build/pkgs/sagelib/src`  to replace the symlink. In this way, the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library.\n-\n \n Related:\n - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment\n``````\n",
    "created_at": "2020-11-11T05:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487896",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,15 +1,17 @@
 After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
 
-In this ticket, we create `src/requirements.txt` to facilitate this.
+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> 
+ src/requirements.txt` to facilitate this.
 (This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
-We add a tox environment to `src/tox.ini`, enabling the command
-`../sage -tox -e develop` for building sagelib in a venv.  (This requires `sage -i pip2pi` from #30527.)
+A virtual environment using it can be created using:
+./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'
+(This requires `sage -i pip2pi` from #30527.)
+
+
+(We also add a tox environment `develop` to `src/tox.ini`, enabling the command `../sage -tox -e develop` for building sagelib in a venv - but this needs further work in #30371.)
 
 We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
-
-The existing `src/setup.py` is copied into `build/pkgs/sagelib/src`  to replace the symlink. In this way, the changes to `src/setup.py` made in this ticket do not affect the existing build process of the Sage library.
-
 
 Related:
 - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment
``````




---

archive/issue_comments_487897.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,7 @@\n After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n \n-In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> \n- src/requirements.txt` to facilitate this.\n-(This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate this.\n+(This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n A virtual environment using it can be created using:\n ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'\n``````\n",
    "created_at": "2020-11-11T05:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487897",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,7 @@
 After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
 
-In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> 
- src/requirements.txt` to facilitate this.
-(This duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate this.
+(This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
 A virtual environment using it can be created using:
 ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'
``````




---

archive/issue_comments_487898.json:
```json
{
    "body": "Changed dependencies from **#30527, #22731, #30780** to **#30527, #22731, #30780, #30013**",
    "created_at": "2020-11-11T05:10:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487898",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30527, #22731, #30780** to **#30527, #22731, #30780, #30013**



---

archive/issue_comments_487899.json:
```json
{
    "body": "Changed commit from **[`9e9b419`](https://github.com/sagemath/sagetrac-mirror/commit/9e9b41980a6c128689f9a3ff07b118493d60e969)** to **[`a4fd284`](https://github.com/sagemath/sagetrac-mirror/commit/a4fd2844cb54c0df8252d9e649b6dce88c6c7ddc)**",
    "created_at": "2020-11-11T05:26:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487899",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9e9b419`](https://github.com/sagemath/sagetrac-mirror/commit/9e9b41980a6c128689f9a3ff07b118493d60e969)** to **[`a4fd284`](https://github.com/sagemath/sagetrac-mirror/commit/a4fd2844cb54c0df8252d9e649b6dce88c6c7ddc)**



---

archive/issue_comments_487900.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dd9075fd09e544c783d20b4d22c2c83ebb83d65\"><code>4dd9075</code></a></td><td><code>build/pkgs/sagelib/src: Add more symlinks to SAGE_ROOT/src</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a4fd2844cb54c0df8252d9e649b6dce88c6c7ddc\"><code>a4fd284</code></a></td><td><code>WIP</code></td></tr></table>\n",
    "created_at": "2020-11-11T05:26:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487900",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dd9075fd09e544c783d20b4d22c2c83ebb83d65"><code>4dd9075</code></a></td><td><code>build/pkgs/sagelib/src: Add more symlinks to SAGE_ROOT/src</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a4fd2844cb54c0df8252d9e649b6dce88c6c7ddc"><code>a4fd284</code></a></td><td><code>WIP</code></td></tr></table>




---

archive/issue_comments_487901.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,7 +4,10 @@\n (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n A virtual environment using it can be created using:\n+\n+```\n ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'\n+```\n (This requires `sage -i pip2pi` from #30527.)\n \n \n``````\n",
    "created_at": "2020-11-13T06:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487901",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,7 +4,10 @@
 (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
 A virtual environment using it can be created using:
+
+```
 ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'
+```
 (This requires `sage -i pip2pi` from #30527.)
 
 
``````




---

archive/issue_comments_487902.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6f1e974c8332dedb856312715e6275388d3fa0d\"><code>f6f1e97</code></a></td><td><code>Merge branch 't/22731/22731' into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a93d0d1a75ada040746f4cf380de33243d152bf\"><code>1a93d0d</code></a></td><td><code>Merge branch 't/30780/sage_setup__separate_installing_and_cleaning' into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a796d4935ac7315d59dbe236a48afcb4c91ebc72\"><code>a796d49</code></a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aebb1ce6cbc4e0dd964c834fc7b98d04e00ebceb\"><code>aebb1ce</code></a></td><td><code>WIP</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95f02a1509513036807b027ae193861c1e7bda4c\"><code>95f02a1</code></a></td><td><code>src/requirements.txt: Add sage_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e12b7cf33edd1fa46b4519d9b817d9aac70f702\"><code>8e12b7c</code></a></td><td><code>src/tox.ini (develop): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ddaf26c68a36b844eef09d6b6c336597a787e4f\"><code>9ddaf26</code></a></td><td><code>src/setup.py: Switch to setuptools, add setup.cfg, install-requires.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8a5d01fb97d05c38d11ca94e28ced65041a1577b\"><code>8a5d01f</code></a></td><td><code>src/requirements.txt, src/setup.cfg: Fix up</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f9388da86921287b16ff1efd1de2a7fb898cc3d\"><code>7f9388d</code></a></td><td><code>build/pkgs/sagelib/src: Add more symlinks to SAGE_ROOT/src</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3f368341972005f50ea31262d38a61af63f59f4\"><code>d3f3683</code></a></td><td><code>WIP</code></td></tr></table>\n",
    "created_at": "2020-11-13T06:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487902",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6f1e974c8332dedb856312715e6275388d3fa0d"><code>f6f1e97</code></a></td><td><code>Merge branch 't/22731/22731' into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a93d0d1a75ada040746f4cf380de33243d152bf"><code>1a93d0d</code></a></td><td><code>Merge branch 't/30780/sage_setup__separate_installing_and_cleaning' into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a796d4935ac7315d59dbe236a48afcb4c91ebc72"><code>a796d49</code></a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aebb1ce6cbc4e0dd964c834fc7b98d04e00ebceb"><code>aebb1ce</code></a></td><td><code>WIP</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95f02a1509513036807b027ae193861c1e7bda4c"><code>95f02a1</code></a></td><td><code>src/requirements.txt: Add sage_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e12b7cf33edd1fa46b4519d9b817d9aac70f702"><code>8e12b7c</code></a></td><td><code>src/tox.ini (develop): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ddaf26c68a36b844eef09d6b6c336597a787e4f"><code>9ddaf26</code></a></td><td><code>src/setup.py: Switch to setuptools, add setup.cfg, install-requires.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8a5d01fb97d05c38d11ca94e28ced65041a1577b"><code>8a5d01f</code></a></td><td><code>src/requirements.txt, src/setup.cfg: Fix up</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f9388da86921287b16ff1efd1de2a7fb898cc3d"><code>7f9388d</code></a></td><td><code>build/pkgs/sagelib/src: Add more symlinks to SAGE_ROOT/src</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3f368341972005f50ea31262d38a61af63f59f4"><code>d3f3683</code></a></td><td><code>WIP</code></td></tr></table>




---

archive/issue_comments_487903.json:
```json
{
    "body": "Changed commit from **[`a4fd284`](https://github.com/sagemath/sagetrac-mirror/commit/a4fd2844cb54c0df8252d9e649b6dce88c6c7ddc)** to **[`d3f3683`](https://github.com/sagemath/sagetrac-mirror/commit/d3f368341972005f50ea31262d38a61af63f59f4)**",
    "created_at": "2020-11-13T06:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487903",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a4fd284`](https://github.com/sagemath/sagetrac-mirror/commit/a4fd2844cb54c0df8252d9e649b6dce88c6c7ddc)** to **[`d3f3683`](https://github.com/sagemath/sagetrac-mirror/commit/d3f368341972005f50ea31262d38a61af63f59f4)**



---

archive/issue_comments_487904.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-11-13T06:56:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487904",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_487905.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nNow, with #30013 merged, the correct sage script is executed in the venv created by tox.\n\nWhat remains to be done is to add more packages to requirements.txt - in particular `ipywidgets` so that the doctester can run.",
    "created_at": "2020-11-13T07:24:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487905",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Now, with #30013 merged, the correct sage script is executed in the venv created by tox.

What remains to be done is to add more packages to requirements.txt - in particular `ipywidgets` so that the doctester can run.



---

archive/issue_comments_487906.json:
```json
{
    "body": "Changed commit from **[`d3f3683`](https://github.com/sagemath/sagetrac-mirror/commit/d3f368341972005f50ea31262d38a61af63f59f4)** to **[`8c03c6b`](https://github.com/sagemath/sagetrac-mirror/commit/8c03c6b52aedd82a5254f95660ed3acfbbb9c339)**",
    "created_at": "2020-11-14T01:05:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487906",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3f3683`](https://github.com/sagemath/sagetrac-mirror/commit/d3f368341972005f50ea31262d38a61af63f59f4)** to **[`8c03c6b`](https://github.com/sagemath/sagetrac-mirror/commit/8c03c6b52aedd82a5254f95660ed3acfbbb9c339)**



---

archive/issue_comments_487907.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/842995f51bf527c86cb346f31a35741400893620\"><code>842995f</code></a></td><td><code>src/bin/sage-venv-config: Add comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a518c0cd17cfd81ad05492ee4b932d0fd4a93a3\"><code>1a518c0</code></a></td><td><code>src/bin/sage: Set SAGE_VENV from sage-venv-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d372ecf8623695519c8471e3232f50355e8cbc15\"><code>d372ecf</code></a></td><td><code>src/bin/sage-env: Put $SAGE_VENV/bin before $SAGE_LOCAL/bin in PATH</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0140f8429e166081798cb678dcc273c3ad769ec6\"><code>0140f84</code></a></td><td><code>src/bin/sage-src-env-config.in: New, sourced in src/bin/sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/948fb493f8e277c35f735fe46f270dde6b463393\"><code>948fb49</code></a></td><td><code>Merge branch 'u/mkoeppe/src_bin_sage_env__make_sure__sage_venv_bin_is_at_the_beginning_of_the_path' of git://trac.sagemath.org/sage into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e96dc7acfea09666e23b04cfaf86111cd4a47fdd\"><code>e96dc7a</code></a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/367fd3ed1bb813b4dfe13095f23f19e68ca94914\"><code>367fd3e</code></a></td><td><code>src/tox.ini (develop): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c5a1a1839aeda256f8f8c49f66014f262962174\"><code>0c5a1a1</code></a></td><td><code>WIP</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7121cb77a28a11ebaf88ba567b9431d09a7fa8d9\"><code>7121cb7</code></a></td><td><code>src/requirements.txt: Add sage_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c03c6b52aedd82a5254f95660ed3acfbbb9c339\"><code>8c03c6b</code></a></td><td><code>src/setup.py: Switch to setuptools, add setup.cfg, install-requires.txt</code></td></tr></table>\n",
    "created_at": "2020-11-14T01:05:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487907",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/842995f51bf527c86cb346f31a35741400893620"><code>842995f</code></a></td><td><code>src/bin/sage-venv-config: Add comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a518c0cd17cfd81ad05492ee4b932d0fd4a93a3"><code>1a518c0</code></a></td><td><code>src/bin/sage: Set SAGE_VENV from sage-venv-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d372ecf8623695519c8471e3232f50355e8cbc15"><code>d372ecf</code></a></td><td><code>src/bin/sage-env: Put $SAGE_VENV/bin before $SAGE_LOCAL/bin in PATH</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0140f8429e166081798cb678dcc273c3ad769ec6"><code>0140f84</code></a></td><td><code>src/bin/sage-src-env-config.in: New, sourced in src/bin/sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/948fb493f8e277c35f735fe46f270dde6b463393"><code>948fb49</code></a></td><td><code>Merge branch 'u/mkoeppe/src_bin_sage_env__make_sure__sage_venv_bin_is_at_the_beginning_of_the_path' of git://trac.sagemath.org/sage into t/30578/add-src-requirements-txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e96dc7acfea09666e23b04cfaf86111cd4a47fdd"><code>e96dc7a</code></a></td><td><code>src/requirements.txt, src/MANIFEST.in: Move here from build/pkgs/sagelib/src, leave symlinks behind</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/367fd3ed1bb813b4dfe13095f23f19e68ca94914"><code>367fd3e</code></a></td><td><code>src/tox.ini (develop): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c5a1a1839aeda256f8f8c49f66014f262962174"><code>0c5a1a1</code></a></td><td><code>WIP</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7121cb77a28a11ebaf88ba567b9431d09a7fa8d9"><code>7121cb7</code></a></td><td><code>src/requirements.txt: Add sage_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c03c6b52aedd82a5254f95660ed3acfbbb9c339"><code>8c03c6b</code></a></td><td><code>src/setup.py: Switch to setuptools, add setup.cfg, install-requires.txt</code></td></tr></table>




---

archive/issue_comments_487908.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,19 +1,13 @@\n After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n \n-In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate this.\n-(This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate installing sagelib into such a venv. (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n-A virtual environment using it can be created using:\n+A virtual environment using it can be created and doctested using:\n \n ```\n ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'\n ```\n-(This requires `sage -i pip2pi` from #30527.)\n-\n-\n-(We also add a tox environment `develop` to `src/tox.ini`, enabling the command `../sage -tox -e develop` for building sagelib in a venv - but this needs further work in #30371.)\n-\n-We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n+(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` - from #30527.)\n \n Related:\n - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment\n@@ -22,3 +16,5 @@\n Follow-up tickets:\n - #30371 In-place (editable) installs of sagelib in a venv\n - #29041 at `./bootstrap` time, generate `requirements.txt`, `constraints.txt`, `setup.cfg [install_requires]`, `Pipfile` from `build/pkgs`\n+- add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n+\n``````\n",
    "created_at": "2020-11-14T01:52:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487908",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,19 +1,13 @@
 After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
 
-In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate this.
-(This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate installing sagelib into such a venv. (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
-A virtual environment using it can be created using:
+A virtual environment using it can be created and doctested using:
 
 ```
 ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'
 ```
-(This requires `sage -i pip2pi` from #30527.)
-
-
-(We also add a tox environment `develop` to `src/tox.ini`, enabling the command `../sage -tox -e develop` for building sagelib in a venv - but this needs further work in #30371.)
-
-We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
+(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` - from #30527.)
 
 Related:
 - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment
@@ -22,3 +16,5 @@
 Follow-up tickets:
 - #30371 In-place (editable) installs of sagelib in a venv
 - #29041 at `./bootstrap` time, generate `requirements.txt`, `constraints.txt`, `setup.cfg [install_requires]`, `Pipfile` from `build/pkgs`
+- add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
+
``````




---

archive/issue_comments_487909.json:
```json
{
    "body": "Changed commit from **[`8c03c6b`](https://github.com/sagemath/sagetrac-mirror/commit/8c03c6b52aedd82a5254f95660ed3acfbbb9c339)** to **[`e2d498f`](https://github.com/sagemath/sagetrac-mirror/commit/e2d498f4e7f779b5ac38bda9c69ce89955cacd66)**",
    "created_at": "2020-11-14T02:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487909",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8c03c6b`](https://github.com/sagemath/sagetrac-mirror/commit/8c03c6b52aedd82a5254f95660ed3acfbbb9c339)** to **[`e2d498f`](https://github.com/sagemath/sagetrac-mirror/commit/e2d498f4e7f779b5ac38bda9c69ce89955cacd66)**



---

archive/issue_comments_487910.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55d59f8bacfc2a715a0f50967557c9d5eb64c2e1\"><code>55d59f8</code></a></td><td><code>src/requirements.txt: Add more packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e2d498f4e7f779b5ac38bda9c69ce89955cacd66\"><code>e2d498f</code></a></td><td><code>build/pkgs/sagelib/src/tox.ini: Update tests and instructions</code></td></tr></table>\n",
    "created_at": "2020-11-14T02:20:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487910",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55d59f8bacfc2a715a0f50967557c9d5eb64c2e1"><code>55d59f8</code></a></td><td><code>src/requirements.txt: Add more packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e2d498f4e7f779b5ac38bda9c69ce89955cacd66"><code>e2d498f</code></a></td><td><code>build/pkgs/sagelib/src/tox.ini: Update tests and instructions</code></td></tr></table>




---

archive/issue_comments_487911.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nThis works; only minor issues in doctests remain.\n\n```\nFile \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/sage/interfaces/gap_workspace.py\", line 55, in sage.interfaces.gap_workspace.gap_workspace_file\nFailed example:\n    name1 = Popen([sys.executable, '-c', cmd], stdout=PIPE).communicate()[0]\nExpected nothing\nGot:\n    Traceback (most recent call last):\n      File \"<string>\", line 1, in <module>\n      File \"/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/all.py\", line 125, in <module>\n        import sage.misc.lazy_import\n    ModuleNotFoundError: No module named 'sage.misc.lazy_import'\n```\nThere are also some doctest errors in the pexpect interfaces for singular and gap.",
    "created_at": "2020-11-14T02:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487911",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

This works; only minor issues in doctests remain.

```
File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/sage/interfaces/gap_workspace.py", line 55, in sage.interfaces.gap_workspace.gap_workspace_file
Failed example:
    name1 = Popen([sys.executable, '-c', cmd], stdout=PIPE).communicate()[0]
Expected nothing
Got:
    Traceback (most recent call last):
      File "<string>", line 1, in <module>
      File "/Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/build/pkgs/sagelib/src/sage/all.py", line 125, in <module>
        import sage.misc.lazy_import
    ModuleNotFoundError: No module named 'sage.misc.lazy_import'
```
There are also some doctest errors in the pexpect interfaces for singular and gap.



---

archive/issue_events_421565.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T02:21:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421565"
}
```



---

archive/issue_comments_487912.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,19 @@\n After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n \n-In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate installing sagelib into such a venv. (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate this.\n+(This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n-A virtual environment using it can be created and doctested using:\n+A virtual environment using it can be created using:\n \n ```\n ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'\n ```\n-(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` - from #30527.)\n+(This requires `sage -i pip2pi` from #30527.)\n+\n+\n+(We also add a tox environment `develop` to `src/tox.ini`, enabling the command `../sage -tox -e develop` for building sagelib in a venv - but this needs further work in #30371.)\n+\n+We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n \n Related:\n - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment\n@@ -16,5 +22,3 @@\n Follow-up tickets:\n - #30371 In-place (editable) installs of sagelib in a venv\n - #29041 at `./bootstrap` time, generate `requirements.txt`, `constraints.txt`, `setup.cfg [install_requires]`, `Pipfile` from `build/pkgs`\n-- add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n-\n``````\n",
    "created_at": "2020-11-14T02:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487912",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,19 @@
 After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
 
-In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate installing sagelib into such a venv. (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate this.
+(This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
-A virtual environment using it can be created and doctested using:
+A virtual environment using it can be created using:
 
 ```
 ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'
 ```
-(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` - from #30527.)
+(This requires `sage -i pip2pi` from #30527.)
+
+
+(We also add a tox environment `develop` to `src/tox.ini`, enabling the command `../sage -tox -e develop` for building sagelib in a venv - but this needs further work in #30371.)
+
+We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
 
 Related:
 - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment
@@ -16,5 +22,3 @@
 Follow-up tickets:
 - #30371 In-place (editable) installs of sagelib in a venv
 - #29041 at `./bootstrap` time, generate `requirements.txt`, `constraints.txt`, `setup.cfg [install_requires]`, `Pipfile` from `build/pkgs`
-- add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
-
``````




---

archive/issue_comments_487913.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,19 +1,13 @@\n After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  \n \n-In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate this.\n-(This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate installing sagelib into such a venv. (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)\n \n-A virtual environment using it can be created using:\n+A virtual environment using it can be created and doctested using:\n \n ```\n ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'\n ```\n-(This requires `sage -i pip2pi` from #30527.)\n-\n-\n-(We also add a tox environment `develop` to `src/tox.ini`, enabling the command `../sage -tox -e develop` for building sagelib in a venv - but this needs further work in #30371.)\n-\n-We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n+(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` - from #30527.)\n \n Related:\n - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment\n@@ -22,3 +16,5 @@\n Follow-up tickets:\n - #30371 In-place (editable) installs of sagelib in a venv\n - #29041 at `./bootstrap` time, generate `requirements.txt`, `constraints.txt`, `setup.cfg [install_requires]`, `Pipfile` from `build/pkgs`\n+- add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.\n+ \n``````\n",
    "created_at": "2020-11-14T02:24:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487913",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,19 +1,13 @@
 After #30527, it is possible to install Python packages built by the Sage distribution into user-defined venvs.  
 
-In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate this.
-(This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
+In this ticket, we create `build/pkgs/sagelib/src/requirements.txt -> src/requirements.txt` to facilitate installing sagelib into such a venv. (This file duplicates some information also available in `build/pkgs`; #29041 will rectify this.)
 
-A virtual environment using it can be created using:
+A virtual environment using it can be created and doctested using:
 
 ```
 ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'
 ```
-(This requires `sage -i pip2pi` from #30527.)
-
-
-(We also add a tox environment `develop` to `src/tox.ini`, enabling the command `../sage -tox -e develop` for building sagelib in a venv - but this needs further work in #30371.)
-
-We also add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
+(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` - from #30527.)
 
 Related:
 - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment
@@ -22,3 +16,5 @@
 Follow-up tickets:
 - #30371 In-place (editable) installs of sagelib in a venv
 - #29041 at `./bootstrap` time, generate `requirements.txt`, `constraints.txt`, `setup.cfg [install_requires]`, `Pipfile` from `build/pkgs`
+- add documentation on how to set up the virtual environment, using either plain `python -m venv`, `virtualenv` (20.x), or `pipenv`.
+ 
``````




---

archive/issue_comments_487914.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe `fpylll` package unfortunately does not install because it does not declare its build dependencies correctly. Reported upstream: https://github.com/fplll/fpylll/issues/185",
    "created_at": "2020-11-14T03:18:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487914",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

The `fpylll` package unfortunately does not install because it does not declare its build dependencies correctly. Reported upstream: https://github.com/fplll/fpylll/issues/185



---

archive/issue_comments_487915.json:
```json
{
    "body": "Changed commit from **[`e2d498f`](https://github.com/sagemath/sagetrac-mirror/commit/e2d498f4e7f779b5ac38bda9c69ce89955cacd66)** to **[`db148ac`](https://github.com/sagemath/sagetrac-mirror/commit/db148ac28b1b5052c496c55a1c4ec0ee04395dc9)**",
    "created_at": "2020-11-14T03:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487915",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e2d498f`](https://github.com/sagemath/sagetrac-mirror/commit/e2d498f4e7f779b5ac38bda9c69ce89955cacd66)** to **[`db148ac`](https://github.com/sagemath/sagetrac-mirror/commit/db148ac28b1b5052c496c55a1c4ec0ee04395dc9)**



---

archive/issue_comments_487916.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db148ac28b1b5052c496c55a1c4ec0ee04395dc9\"><code>db148ac</code></a></td><td><code>src/requirements.txt: Disable fpylll</code></td></tr></table>\n",
    "created_at": "2020-11-14T03:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487916",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db148ac28b1b5052c496c55a1c4ec0ee04395dc9"><code>db148ac</code></a></td><td><code>src/requirements.txt: Disable fpylll</code></td></tr></table>




---

archive/issue_comments_487917.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ad6b36a3523c3d04f66a62662d09d5e8dfa5142\"><code>9ad6b36</code></a></td><td><code>build/pkgs/sagelib/src/setup.cfg: Remove</code></td></tr></table>\n",
    "created_at": "2020-11-14T04:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487917",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ad6b36a3523c3d04f66a62662d09d5e8dfa5142"><code>9ad6b36</code></a></td><td><code>build/pkgs/sagelib/src/setup.cfg: Remove</code></td></tr></table>




---

archive/issue_comments_487918.json:
```json
{
    "body": "Changed commit from **[`db148ac`](https://github.com/sagemath/sagetrac-mirror/commit/db148ac28b1b5052c496c55a1c4ec0ee04395dc9)** to **[`9ad6b36`](https://github.com/sagemath/sagetrac-mirror/commit/9ad6b36a3523c3d04f66a62662d09d5e8dfa5142)**",
    "created_at": "2020-11-14T04:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487918",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db148ac`](https://github.com/sagemath/sagetrac-mirror/commit/db148ac28b1b5052c496c55a1c4ec0ee04395dc9)** to **[`9ad6b36`](https://github.com/sagemath/sagetrac-mirror/commit/9ad6b36a3523c3d04f66a62662d09d5e8dfa5142)**



---

archive/issue_events_421566.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-14T04:02:16Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "title_is": "Add src/requirements.txt for installation of sagelib in a venv",
    "title_was": "Add src/requirements.txt and src/setup.cfg [install_requires] for installation of sagelib in a venv",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421566"
}
```



---

archive/issue_comments_487919.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,7 +7,7 @@\n ```\n ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'\n ```\n-(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` - from #30527.)\n+(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` first - this is from #30527.)\n \n Related:\n - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment\n``````\n",
    "created_at": "2020-11-14T04:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487919",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,7 +7,7 @@
 ```
 ./sage -sh -c '(cd build/pkgs/sagelib/src && tox -v -v -v)'
 ```
-(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` - from #30527.)
+(Reusing wheels built by the Sage distribution requires to do `sage -i pip2pi` first - this is from #30527.)
 
 Related:
 - #28746 Developer's Guide: Add instructions for sagelib development in a conda environment
``````




---

archive/issue_comments_487920.json:
```json
{
    "body": "Changed keywords from none to **sd111**",
    "created_at": "2020-12-06T17:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487920",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from none to **sd111**



---

archive/issue_comments_487921.json:
```json
{
    "body": "Changed dependencies from **#30527, #22731, #30780, #30013** to **#30527, #30013**",
    "created_at": "2020-12-06T21:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487921",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30527, #22731, #30780, #30013** to **#30527, #30013**



---

archive/issue_events_421567.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-18T04:46:29Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421567"
}
```



---

archive/issue_events_421568.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-18T04:46:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421568"
}
```



---

archive/issue_events_421569.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-18T04:46:29Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421569"
}
```



---

archive/issue_comments_487922.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to none",
    "created_at": "2021-01-18T04:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487922",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to none



---

archive/issue_comments_487923.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nLet's skip this ticket and do #30913 directly.",
    "created_at": "2021-01-18T04:46:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30578#issuecomment-487923",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

Let's skip this ticket and do #30913 directly.



---

archive/issue_events_421570.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-07-29T19:13:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421570"
}
```



---

archive/issue_events_421571.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-07-29T19:13:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421571"
}
```



---

archive/issue_events_421572.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2021-07-29T19:13:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30578",
    "label": "https://github.com/sagemath/sage/labels/duplicate",
    "label_color": "a6a6a6",
    "label_name": "duplicate",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30578#event-421572"
}
```
