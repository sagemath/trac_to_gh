# Issue 30266: Immutability for scalar fields

archive/issues_030029.json:
```json
{
    "body": "This ticket adds the immutability and hashability for scalar fields.\n\nSee #30261.\n\nDepends on #30181\n\n**CC:**  @egourgoulhon @tscrim @mkoeppe\n\n**Keywords:** immutability\n\n**Branch/Commit:** [1912193c1c40222a7ce606e318fb1c5d5126cca4](https://github.com/sagemath/sagetrac-mirror/commit/1912193c1c40222a7ce606e318fb1c5d5126cca4)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Michael Jung\n\nIssue created by migration from https://trac.sagemath.org/ticket/30266\n\n",
    "closed_at": "2020-08-09T08:47:24Z",
    "created_at": "2020-08-01T12:56:35Z",
    "labels": [
        "component: manifolds",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "title": "Immutability for scalar fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/30266",
    "user": "https://github.com/mjungmath"
}
```
This ticket adds the immutability and hashability for scalar fields.

See #30261.

Depends on #30181

**CC:**  @egourgoulhon @tscrim @mkoeppe

**Keywords:** immutability

**Branch/Commit:** [1912193c1c40222a7ce606e318fb1c5d5126cca4](https://github.com/sagemath/sagetrac-mirror/commit/1912193c1c40222a7ce606e318fb1c5d5126cca4)

**Reviewer:** Matthias Koeppe

**Author:** Michael Jung

Issue created by migration from https://trac.sagemath.org/ticket/30266





---

archive/issue_comments_482867.json:
```json
{
    "body": "**Branch:** [u/gh-mjungmath/immutability_for_scalar_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/immutability_for_scalar_fields)",
    "created_at": "2020-08-01T12:57:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482867",
    "user": "https://github.com/mjungmath"
}
```

**Branch:** [u/gh-mjungmath/immutability_for_scalar_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/immutability_for_scalar_fields)



---

archive/issue_comments_482868.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+This ticket adds the immutability and hashability for scalar fields.\n \n+See #30261.\n``````\n",
    "created_at": "2020-08-01T12:59:41Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482868",
    "user": "https://github.com/mjungmath"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+This ticket adds the immutability and hashability for scalar fields.
 
+See #30261.
``````




---

archive/issue_comments_482869.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"immutability\".",
    "created_at": "2020-08-01T12:59:41Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482869",
    "user": "https://github.com/mjungmath"
}
```

**Changing keywords** from "" to "immutability".



---

archive/issue_events_270557.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-01T12:59:41Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "rename": {
        "from": "immutability for scalar fields",
        "to": "Immutability for scalar fields"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30266#event-270557"
}
```



---

archive/issue_events_270558.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-01T12:59:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "label": "component: manifolds",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30266#event-270558"
}
```



---

archive/issue_comments_482870.json:
```json
{
    "body": "**Author:** Michael Jung",
    "created_at": "2020-08-01T12:59:41Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482870",
    "user": "https://github.com/mjungmath"
}
```

**Author:** Michael Jung



---

archive/issue_events_270559.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-01T12:59:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30266#event-270559"
}
```



---

archive/issue_comments_482871.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/286d3c604d0fe9aa2f78b5c09773c4af3bb3369b\">286d3c6</a></td><td><code>FreeModuleTensor, Vector: Subclass a new class ModuleElementWithMutability</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9df3d22ca84da6b604226d5b88d2a581b0cc53ca\">9df3d22</a></td><td><code>sage.tensor.modules: Make all zero() and one() elements immutable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4373ea269d9d426163fa3d1e72bdf6e20c412f87\">4373ea2</a></td><td><code>FreeModuleTensor: Replace special casing of the immutable zero by is_immutable</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2ee8beb504477a3215e002391e44a51b2957ca2\">a2ee8be</a></td><td><code>ModuleElementWithMutability.is_immutable, is_mutable: Change def to cpdef</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aebadedd85d782e004a626f207df5422fee5a9ab\">aebaded</a></td><td><code>Trac #30266: make scalarfields immutable</code></td></tr></table>\n",
    "created_at": "2020-08-01T12:59:41Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482871",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/286d3c604d0fe9aa2f78b5c09773c4af3bb3369b">286d3c6</a></td><td><code>FreeModuleTensor, Vector: Subclass a new class ModuleElementWithMutability</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9df3d22ca84da6b604226d5b88d2a581b0cc53ca">9df3d22</a></td><td><code>sage.tensor.modules: Make all zero() and one() elements immutable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4373ea269d9d426163fa3d1e72bdf6e20c412f87">4373ea2</a></td><td><code>FreeModuleTensor: Replace special casing of the immutable zero by is_immutable</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2ee8beb504477a3215e002391e44a51b2957ca2">a2ee8be</a></td><td><code>ModuleElementWithMutability.is_immutable, is_mutable: Change def to cpdef</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aebadedd85d782e004a626f207df5422fee5a9ab">aebaded</a></td><td><code>Trac #30266: make scalarfields immutable</code></td></tr></table>




---

archive/issue_events_270560.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-01T12:59:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30266#event-270560"
}
```



---

archive/issue_comments_482872.json:
```json
{
    "body": "**Commit:** [aebadedd85d782e004a626f207df5422fee5a9ab](https://github.com/sagemath/sagetrac-mirror/commit/aebadedd85d782e004a626f207df5422fee5a9ab)",
    "created_at": "2020-08-01T12:59:41Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482872",
    "user": "https://github.com/mjungmath"
}
```

**Commit:** [aebadedd85d782e004a626f207df5422fee5a9ab](https://github.com/sagemath/sagetrac-mirror/commit/aebadedd85d782e004a626f207df5422fee5a9ab)



---

archive/issue_comments_482873.json:
```json
{
    "body": "**Dependencies:** #30181",
    "created_at": "2020-08-01T13:00:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482873",
    "user": "https://github.com/mjungmath"
}
```

**Dependencies:** #30181



---

archive/issue_comments_482874.json:
```json
{
    "body": "<a id='comment:4'></a>\nIs the hash input okay? Or should it be something more unique?",
    "created_at": "2020-08-01T13:03:37Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482874",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:4'></a>
Is the hash input okay? Or should it be something more unique?



---

archive/issue_comments_482875.json:
```json
{
    "body": "<a id='comment:5'></a>\nGiven that `ScalarField_repr_` does not print any contents, this hash does not seem to be useful to distinguish non-equal elements. This will degrade the performance of sets to that of lists.\n\nMore importantly, it must be ensured that `f == g` implies `hash(f) == hash(g)`. Because equality does not take names into account but `repr` does, this is currently not satisfied.",
    "created_at": "2020-08-01T13:21:54Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482875",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Given that `ScalarField_repr_` does not print any contents, this hash does not seem to be useful to distinguish non-equal elements. This will degrade the performance of sets to that of lists.

More importantly, it must be ensured that `f == g` implies `hash(f) == hash(g)`. Because equality does not take names into account but `repr` does, this is currently not satisfied.



---

archive/issue_comments_482876.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [mkoeppe](#comment%3A5):\n> Given that `ScalarField_repr_` does not print any contents, this hash does not seem to be useful to distinguish non-equal elements. This will degrade the performance of sets to that of lists.\n> \n> More importantly, it must be ensured that `f == g` implies `hash(f) == hash(g)`. Because equality does not take names into account but `repr` does, this is currently not satisfied.\n> \n\n\nI just copied the ideas from the elsewhere in the Sage code. This means that most `hash` functions are implemented wrong.\n\nAre you sure it is not `f is g` implies `hash(f) == hash(g)`? `f == g` implies `hash(f) == hash(g)` is barely possible in cases where coercions apply, isn't it?",
    "created_at": "2020-08-01T13:27:42Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482876",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:6'></a>
Replying to [mkoeppe](#comment%3A5):
> Given that `ScalarField_repr_` does not print any contents, this hash does not seem to be useful to distinguish non-equal elements. This will degrade the performance of sets to that of lists.
> 
> More importantly, it must be ensured that `f == g` implies `hash(f) == hash(g)`. Because equality does not take names into account but `repr` does, this is currently not satisfied.
> 


I just copied the ideas from the elsewhere in the Sage code. This means that most `hash` functions are implemented wrong.

Are you sure it is not `f is g` implies `hash(f) == hash(g)`? `f == g` implies `hash(f) == hash(g)` is barely possible in cases where coercions apply, isn't it?



---

archive/issue_comments_482877.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [gh-mjungmath](#comment%3A6):\n> Are you sure it is not `f is g` implies `hash(f) == hash(g)`? \n\n\nThis implication is trivially true.",
    "created_at": "2020-08-01T13:31:55Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482877",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
Replying to [gh-mjungmath](#comment%3A6):
> Are you sure it is not `f is g` implies `hash(f) == hash(g)`? 


This implication is trivially true.



---

archive/issue_comments_482878.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [mkoeppe](#comment%3A7):\n> Replying to [gh-mjungmath](#comment%3A6):\n> > Are you sure it is not `f is g` implies `hash(f) == hash(g)`? \n\n> \n> This implication is trivially true.\n\n\nOh, yes, this is obviously right. >.< :D",
    "created_at": "2020-08-01T13:38:51Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482878",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:8'></a>
Replying to [mkoeppe](#comment%3A7):
> Replying to [gh-mjungmath](#comment%3A6):
> > Are you sure it is not `f is g` implies `hash(f) == hash(g)`? 

> 
> This implication is trivially true.


Oh, yes, this is obviously right. >.< :D



---

archive/issue_comments_482879.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [gh-mjungmath](#comment%3A6):\n> Replying to [mkoeppe](#comment%3A5):\n> > Given that `ScalarField_repr_` does not print any contents, this hash does not seem to be useful to distinguish non-equal elements. This will degrade the performance of sets to that of lists.\n> > \n> > More importantly, it must be ensured that `f == g` implies `hash(f) == hash(g)`. Because equality does not take names into account but `repr` does, this is currently not satisfied.\n> > \n\n> \n> I just copied the ideas from the elsewhere in the Sage code. This means that most `hash` functions are implemented wrong.\n\n\nAh yes, I see, apparently that were cases where the string representation cannot be changed. Due to the fact that we allow restrictions as coercion, `hash(self._manifold)` seem to be the only choice.\n\nI will add a related doctest for this particular case.\n\nThank you.",
    "created_at": "2020-08-01T13:44:00Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482879",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:9'></a>
Replying to [gh-mjungmath](#comment%3A6):
> Replying to [mkoeppe](#comment%3A5):
> > Given that `ScalarField_repr_` does not print any contents, this hash does not seem to be useful to distinguish non-equal elements. This will degrade the performance of sets to that of lists.
> > 
> > More importantly, it must be ensured that `f == g` implies `hash(f) == hash(g)`. Because equality does not take names into account but `repr` does, this is currently not satisfied.
> > 

> 
> I just copied the ideas from the elsewhere in the Sage code. This means that most `hash` functions are implemented wrong.


Ah yes, I see, apparently that were cases where the string representation cannot be changed. Due to the fact that we allow restrictions as coercion, `hash(self._manifold)` seem to be the only choice.

I will add a related doctest for this particular case.

Thank you.



---

archive/issue_comments_482880.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5c7fd6e1933dd09daab91eda15df09572148413b\">5c7fd6e</a></td><td><code>Trac #30266: immutability of restrictions + hash function improved</code></td></tr></table>\n",
    "created_at": "2020-08-01T14:15:16Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482880",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5c7fd6e1933dd09daab91eda15df09572148413b">5c7fd6e</a></td><td><code>Trac #30266: immutability of restrictions + hash function improved</code></td></tr></table>




---

archive/issue_comments_482881.json:
```json
{
    "body": "**Changing commit** from \"[aebadedd85d782e004a626f207df5422fee5a9ab](https://github.com/sagemath/sagetrac-mirror/commit/aebadedd85d782e004a626f207df5422fee5a9ab)\" to \"[5c7fd6e1933dd09daab91eda15df09572148413b](https://github.com/sagemath/sagetrac-mirror/commit/5c7fd6e1933dd09daab91eda15df09572148413b)\".",
    "created_at": "2020-08-01T14:15:16Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[aebadedd85d782e004a626f207df5422fee5a9ab](https://github.com/sagemath/sagetrac-mirror/commit/aebadedd85d782e004a626f207df5422fee5a9ab)" to "[5c7fd6e1933dd09daab91eda15df09572148413b](https://github.com/sagemath/sagetrac-mirror/commit/5c7fd6e1933dd09daab91eda15df09572148413b)".



---

archive/issue_comments_482882.json:
```json
{
    "body": "<a id='comment:11'></a>\nThis should be better.",
    "created_at": "2020-08-01T14:15:39Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482882",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:11'></a>
This should be better.



---

archive/issue_comments_482883.json:
```json
{
    "body": "<a id='comment:12'></a>\nIs that `hash` function okay? I have added a short `f == g` implies `hash(f) == hash(g)` test.\n\nPatchbot is green, btw.",
    "created_at": "2020-08-02T09:59:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482883",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:12'></a>
Is that `hash` function okay? I have added a short `f == g` implies `hash(f) == hash(g)` test.

Patchbot is green, btw.



---

archive/issue_comments_482884.json:
```json
{
    "body": "**Changing dependencies** from \"#30181\" to \"#30181, #30116\".",
    "created_at": "2020-08-02T21:29:04Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482884",
    "user": "https://github.com/mjungmath"
}
```

**Changing dependencies** from "#30181" to "#30181, #30116".



---

archive/issue_comments_482885.json:
```json
{
    "body": "<a id='comment:13'></a>\nSince #30116, scalar fields can be compared on common domains. I added the check of the hash condition in the doctest for this particular comparison.",
    "created_at": "2020-08-02T21:29:04Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482885",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:13'></a>
Since #30116, scalar fields can be compared on common domains. I added the check of the hash condition in the doctest for this particular comparison.



---

archive/issue_comments_482886.json:
```json
{
    "body": "**Changing commit** from \"[5c7fd6e1933dd09daab91eda15df09572148413b](https://github.com/sagemath/sagetrac-mirror/commit/5c7fd6e1933dd09daab91eda15df09572148413b)\" to \"[8ca8b754a246ebad775b7db7310e4996f086687a](https://github.com/sagemath/sagetrac-mirror/commit/8ca8b754a246ebad775b7db7310e4996f086687a)\".",
    "created_at": "2020-08-02T21:31:05Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482886",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[5c7fd6e1933dd09daab91eda15df09572148413b](https://github.com/sagemath/sagetrac-mirror/commit/5c7fd6e1933dd09daab91eda15df09572148413b)" to "[8ca8b754a246ebad775b7db7310e4996f086687a](https://github.com/sagemath/sagetrac-mirror/commit/8ca8b754a246ebad775b7db7310e4996f086687a)".



---

archive/issue_comments_482887.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/22e2961381064463bbb48350743520c75d384bb4\">22e2961</a></td><td><code>Trac #30116: Merge branch 'develop' into replace_eq_by_richcmp_tensorfield</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11c9d35deade99b7a8cb186b4edfa507c74ff213\">11c9d35</a></td><td><code>Trac #30116: invoke super method by using super() + replacing `__eq__` in most files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a59c71acdf7d22fcafd00ad1965407cf9f9b8a12\">a59c71a</a></td><td><code>Trac #30267: coercion via restriction added</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e2b28cd23af0f59e2f31da2506eac3666a49bd3\">3e2b28c</a></td><td><code>Trac #30267: coercion via restriction added</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f640f21c2abb8e54f0d903edee7c48acbc0c434e\">f640f21</a></td><td><code>Trac #30116: Merge branch 't/30267/coercion_via_restriction_of_chart_functions' into t/30116/test_comparison_tensorfield</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4bcd2eeb367909eef66de8f0390f4fa7abea22c9\">4bcd2ee</a></td><td><code>Trac #30267: coercion via restriction added</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89906e2eea286f109b9745fc5202839a57538261\">89906e2</a></td><td><code>Trac #30116: Merge branch 'coercion_via_restriction_of_chart_functions' into t/30116/test_comparison_tensorfield</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9d652faa628d3f7cc9f747ef83f0000ba53f2d5\">a9d652f</a></td><td><code>Trac #30116: documentation adapted</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/055d2261ecc3b9b826b0f7d082ffb7802a253421\">055d226</a></td><td><code>Trac #30266: Merge branch 't/30116/test_comparison_tensorfield' into t/30266/immutability_for_scalar_fields</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ca8b754a246ebad775b7db7310e4996f086687a\">8ca8b75</a></td><td><code>Trac #30266: hash compatibility check wrt #30116</code></td></tr></table>\n",
    "created_at": "2020-08-02T21:31:05Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482887",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/22e2961381064463bbb48350743520c75d384bb4">22e2961</a></td><td><code>Trac #30116: Merge branch 'develop' into replace_eq_by_richcmp_tensorfield</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11c9d35deade99b7a8cb186b4edfa507c74ff213">11c9d35</a></td><td><code>Trac #30116: invoke super method by using super() + replacing `__eq__` in most files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a59c71acdf7d22fcafd00ad1965407cf9f9b8a12">a59c71a</a></td><td><code>Trac #30267: coercion via restriction added</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e2b28cd23af0f59e2f31da2506eac3666a49bd3">3e2b28c</a></td><td><code>Trac #30267: coercion via restriction added</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f640f21c2abb8e54f0d903edee7c48acbc0c434e">f640f21</a></td><td><code>Trac #30116: Merge branch 't/30267/coercion_via_restriction_of_chart_functions' into t/30116/test_comparison_tensorfield</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4bcd2eeb367909eef66de8f0390f4fa7abea22c9">4bcd2ee</a></td><td><code>Trac #30267: coercion via restriction added</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89906e2eea286f109b9745fc5202839a57538261">89906e2</a></td><td><code>Trac #30116: Merge branch 'coercion_via_restriction_of_chart_functions' into t/30116/test_comparison_tensorfield</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9d652faa628d3f7cc9f747ef83f0000ba53f2d5">a9d652f</a></td><td><code>Trac #30116: documentation adapted</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/055d2261ecc3b9b826b0f7d082ffb7802a253421">055d226</a></td><td><code>Trac #30266: Merge branch 't/30116/test_comparison_tensorfield' into t/30266/immutability_for_scalar_fields</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ca8b754a246ebad775b7db7310e4996f086687a">8ca8b75</a></td><td><code>Trac #30266: hash compatibility check wrt #30116</code></td></tr></table>




---

archive/issue_comments_482888.json:
```json
{
    "body": "**Changing commit** from \"[8ca8b754a246ebad775b7db7310e4996f086687a](https://github.com/sagemath/sagetrac-mirror/commit/8ca8b754a246ebad775b7db7310e4996f086687a)\" to \"[0bf9f36d692396f8aa2b32a529532c2e4e48511e](https://github.com/sagemath/sagetrac-mirror/commit/0bf9f36d692396f8aa2b32a529532c2e4e48511e)\".",
    "created_at": "2020-08-02T21:36:27Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8ca8b754a246ebad775b7db7310e4996f086687a](https://github.com/sagemath/sagetrac-mirror/commit/8ca8b754a246ebad775b7db7310e4996f086687a)" to "[0bf9f36d692396f8aa2b32a529532c2e4e48511e](https://github.com/sagemath/sagetrac-mirror/commit/0bf9f36d692396f8aa2b32a529532c2e4e48511e)".



---

archive/issue_comments_482889.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0bf9f36d692396f8aa2b32a529532c2e4e48511e\">0bf9f36</a></td><td><code>Trac #30266: Merge branch 'develop' into t/30266/immutability_for_scalar_fields</code></td></tr></table>\n",
    "created_at": "2020-08-02T21:36:27Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0bf9f36d692396f8aa2b32a529532c2e4e48511e">0bf9f36</a></td><td><code>Trac #30266: Merge branch 'develop' into t/30266/immutability_for_scalar_fields</code></td></tr></table>




---

archive/issue_comments_482890.json:
```json
{
    "body": "<a id='comment:16'></a>\nPatchbot is green.",
    "created_at": "2020-08-03T09:02:14Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482890",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:16'></a>
Patchbot is green.



---

archive/issue_comments_482891.json:
```json
{
    "body": "<a id='comment:17'></a>\nI believe for `_richcmp_` you also have `self is not other`, but you should double check this.",
    "created_at": "2020-08-03T12:04:32Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482891",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>
I believe for `_richcmp_` you also have `self is not other`, but you should double check this.



---

archive/issue_comments_482892.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [tscrim](#comment%3A17):\n> I believe for `_richcmp_` you also have `self is not other`, but you should double check this.\n\n\nIn #30116, I used `if self is other:` instead. Is that what you mean?",
    "created_at": "2020-08-03T12:39:37Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482892",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:18'></a>
Replying to [tscrim](#comment%3A17):
> I believe for `_richcmp_` you also have `self is not other`, but you should double check this.


In #30116, I used `if self is other:` instead. Is that what you mean?



---

archive/issue_comments_482893.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [gh-mjungmath](#comment%3A18):\n> Replying to [tscrim](#comment%3A17):\n> > I believe for `_richcmp_` you also have `self is not other`, but you should double check this.\n\n> \n> In #30116, I used `if self is other:` instead. Is that what you mean?\n\n\nAh, I missed it there. Yes, I mean that, and I think it is unnecessary because the coercion framework through `__eq__` handles that case. However, I don't trust myself here, so it is worth checking.",
    "created_at": "2020-08-03T12:53:42Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482893",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>
Replying to [gh-mjungmath](#comment%3A18):
> Replying to [tscrim](#comment%3A17):
> > I believe for `_richcmp_` you also have `self is not other`, but you should double check this.

> 
> In #30116, I used `if self is other:` instead. Is that what you mean?


Ah, I missed it there. Yes, I mean that, and I think it is unnecessary because the coercion framework through `__eq__` handles that case. However, I don't trust myself here, so it is worth checking.



---

archive/issue_comments_482894.json:
```json
{
    "body": "<a id='comment:20'></a>\nI changed the whole `_richcmp_` to `return False` and tried `f == f`. It returned `False`. So, no prior instance check here. For fun, I did the same with the opposite: no prior check there, too.",
    "created_at": "2020-08-03T13:35:18Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482894",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:20'></a>
I changed the whole `_richcmp_` to `return False` and tried `f == f`. It returned `False`. So, no prior instance check here. For fun, I did the same with the opposite: no prior check there, too.



---

archive/issue_comments_482895.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a5f6a19d0b492cbe2b73daf74e1a6b3a98667055\">a5f6a19</a></td><td><code>Trac 30266: hash function slightly improved</code></td></tr></table>\n",
    "created_at": "2020-08-03T22:32:44Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482895",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a5f6a19d0b492cbe2b73daf74e1a6b3a98667055">a5f6a19</a></td><td><code>Trac 30266: hash function slightly improved</code></td></tr></table>




---

archive/issue_comments_482896.json:
```json
{
    "body": "**Changing commit** from \"[0bf9f36d692396f8aa2b32a529532c2e4e48511e](https://github.com/sagemath/sagetrac-mirror/commit/0bf9f36d692396f8aa2b32a529532c2e4e48511e)\" to \"[a5f6a19d0b492cbe2b73daf74e1a6b3a98667055](https://github.com/sagemath/sagetrac-mirror/commit/a5f6a19d0b492cbe2b73daf74e1a6b3a98667055)\".",
    "created_at": "2020-08-03T22:32:44Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482896",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0bf9f36d692396f8aa2b32a529532c2e4e48511e](https://github.com/sagemath/sagetrac-mirror/commit/0bf9f36d692396f8aa2b32a529532c2e4e48511e)" to "[a5f6a19d0b492cbe2b73daf74e1a6b3a98667055](https://github.com/sagemath/sagetrac-mirror/commit/a5f6a19d0b492cbe2b73daf74e1a6b3a98667055)".



---

archive/issue_comments_482897.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [gh-mjungmath](#comment%3A20):\n> I changed the whole `_richcmp_` to `return False` and tried `f == f`. It returned `False`. So, no prior instance check here. For fun, I did the same with the opposite: no prior check there, too.\n\n\nThank you for checking. `:)`",
    "created_at": "2020-08-04T00:25:55Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482897",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
Replying to [gh-mjungmath](#comment%3A20):
> I changed the whole `_richcmp_` to `return False` and tried `f == f`. It returned `False`. So, no prior instance check here. For fun, I did the same with the opposite: no prior check there, too.


Thank you for checking. `:)`



---

archive/issue_comments_482898.json:
```json
{
    "body": "<a id='comment:23'></a>\nUnfortunately I am too busy right now to do the review. I can probably do it next week, but if someone else wants to step up and do it, please go ahead.",
    "created_at": "2020-08-04T00:27:25Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482898",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:23'></a>
Unfortunately I am too busy right now to do the review. I can probably do it next week, but if someone else wants to step up and do it, please go ahead.



---

archive/issue_comments_482899.json:
```json
{
    "body": "<a id='comment:24'></a>\nOne question btw: must `1 == f` also imply `hash(1) == hash(f)`. The former can be fulfilled due to the coercion framework, the latter is rather difficult since both have different types. Is it enough for this condition to be fulfilled for objects of the same type?",
    "created_at": "2020-08-04T07:52:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482899",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:24'></a>
One question btw: must `1 == f` also imply `hash(1) == hash(f)`. The former can be fulfilled due to the coercion framework, the latter is rather difficult since both have different types. Is it enough for this condition to be fulfilled for objects of the same type?



---

archive/issue_comments_482900.json:
```json
{
    "body": "<a id='comment:25'></a>\nFor the ring of integers modulo some number, this behavior is not satisfied:\n\n```\nsage: 3 == GF(2)(3)\nTrue\nsage: hash(3) == hash(GF(2)(3))\nFalse\n```",
    "created_at": "2020-08-04T15:00:19Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482900",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:25'></a>
For the ring of integers modulo some number, this behavior is not satisfied:

```
sage: 3 == GF(2)(3)
True
sage: hash(3) == hash(GF(2)(3))
False
```



---

archive/issue_comments_482901.json:
```json
{
    "body": "<a id='comment:26'></a>\nEnsuring that this implication holds across coercion is very difficult, and it is done in Sage on a \"best effort\" basis -- such as for QQ as the fraction field of ZZ.\n\nThe rule of thumb is that if we form sets, they should be of elements of the same parent so that no coercion is involved.  Likewise for the keys of dictionaries.",
    "created_at": "2020-08-04T15:09:13Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482901",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Ensuring that this implication holds across coercion is very difficult, and it is done in Sage on a "best effort" basis -- such as for QQ as the fraction field of ZZ.

The rule of thumb is that if we form sets, they should be of elements of the same parent so that no coercion is involved.  Likewise for the keys of dictionaries.



---

archive/issue_comments_482902.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [mkoeppe](#comment%3A26):\n> Ensuring that this implication holds across coercion is very difficult, and it is done in Sage on a \"best effort\" basis -- such as for QQ as the fraction field of ZZ.\n> \n> The rule of thumb is that if we form sets, they should be of elements of the same parent so that no coercion is involved.  Likewise for the keys of dictionaries.\n\n\nSince the restriction is set as a coercion, and they live in different sets, maybe we should make the hash more unique? Namely:\n\n```diff\n-        return hash((type(self).__name__, self._manifold))\n+        return hash((type(self).__name__, self._domain))\n```\n\nIf that is what we want, I will, of course, adapt the doctest section.",
    "created_at": "2020-08-04T15:19:20Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482902",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:27'></a>
Replying to [mkoeppe](#comment%3A26):
> Ensuring that this implication holds across coercion is very difficult, and it is done in Sage on a "best effort" basis -- such as for QQ as the fraction field of ZZ.
> 
> The rule of thumb is that if we form sets, they should be of elements of the same parent so that no coercion is involved.  Likewise for the keys of dictionaries.


Since the restriction is set as a coercion, and they live in different sets, maybe we should make the hash more unique? Namely:

```diff
-        return hash((type(self).__name__, self._manifold))
+        return hash((type(self).__name__, self._domain))
```

If that is what we want, I will, of course, adapt the doctest section.



---

archive/issue_comments_482903.json:
```json
{
    "body": "<a id='comment:28'></a>\nI haven't followed the discussion regarding restriction and equality, so I would need more context here.",
    "created_at": "2020-08-04T15:46:27Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482903",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>
I haven't followed the discussion regarding restriction and equality, so I would need more context here.



---

archive/issue_comments_482904.json:
```json
{
    "body": "<a id='comment:29'></a>\nReplying to [mkoeppe](#comment%3A28):\n> I haven't followed the discussion regarding restriction and equality, so I would need more context here.\n\n\nSorry, sure. See #30116 for the discussion.\n\nManifolds allows coercions from scalar fields on `M` to scalar fields on `U`, where `U` is a subset of `M`, i.e. a restriction. Since #30116, the equality check compares scalar fields on a common subset and returns `True` if they are the same on that domain. Nevertheless, both scalar fields on different domains are still distinct objects defined in distinct sets.",
    "created_at": "2020-08-04T15:54:42Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482904",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:29'></a>
Replying to [mkoeppe](#comment%3A28):
> I haven't followed the discussion regarding restriction and equality, so I would need more context here.


Sorry, sure. See #30116 for the discussion.

Manifolds allows coercions from scalar fields on `M` to scalar fields on `U`, where `U` is a subset of `M`, i.e. a restriction. Since #30116, the equality check compares scalar fields on a common subset and returns `True` if they are the same on that domain. Nevertheless, both scalar fields on different domains are still distinct objects defined in distinct sets.



---

archive/issue_comments_482905.json:
```json
{
    "body": "<a id='comment:30'></a>\nYou probably discussed this on that ticket, but this kind of \"equality\" relation is not transitive without strong assumptions such as analyticity and connectedness, is it?",
    "created_at": "2020-08-04T16:01:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482905",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
You probably discussed this on that ticket, but this kind of "equality" relation is not transitive without strong assumptions such as analyticity and connectedness, is it?



---

archive/issue_comments_482906.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [mkoeppe](#comment%3A30):\n> You probably discussed this on that ticket, but this kind of \"equality\" relation is not transitive without strong assumptions such as analyticity and connectedness, is it?\n\n\nActually, we didn't. But that is a crucial point! Without analyticity, which is not necessarily given, the transitivity is definitely violated.\n\nHowever, coercible objects have to be comparable, right?",
    "created_at": "2020-08-04T16:18:42Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482906",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:31'></a>
Replying to [mkoeppe](#comment%3A30):
> You probably discussed this on that ticket, but this kind of "equality" relation is not transitive without strong assumptions such as analyticity and connectedness, is it?


Actually, we didn't. But that is a crucial point! Without analyticity, which is not necessarily given, the transitivity is definitely violated.

However, coercible objects have to be comparable, right?



---

archive/issue_comments_482907.json:
```json
{
    "body": "<a id='comment:32'></a>\nIn general I don't think you should feel obligated to use the coercion framework for comparisons just because you use it for arithmetic. It's just a tool.",
    "created_at": "2020-08-04T16:23:04Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482907",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
In general I don't think you should feel obligated to use the coercion framework for comparisons just because you use it for arithmetic. It's just a tool.



---

archive/issue_comments_482908.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [mkoeppe](#comment%3A32):\n> In general I don't think you should feel obligated to use the coercion framework for comparisons just because you use it for arithmetic. It's just a tool.\n\n\nProbably you're right. The documentation, however, is not very explicit on that. I changed the ticket above to \"needs info\" and left a question. Perhaps you can take a short look?",
    "created_at": "2020-08-04T16:26:13Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482908",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:33'></a>
Replying to [mkoeppe](#comment%3A32):
> In general I don't think you should feel obligated to use the coercion framework for comparisons just because you use it for arithmetic. It's just a tool.


Probably you're right. The documentation, however, is not very explicit on that. I changed the ticket above to "needs info" and left a question. Perhaps you can take a short look?



---

archive/issue_comments_482909.json:
```json
{
    "body": "<a id='comment:34'></a>\nI just want to mention that your contributions are always very beneficial. Thank you very much! :)",
    "created_at": "2020-08-04T16:35:27Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482909",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:34'></a>
I just want to mention that your contributions are always very beneficial. Thank you very much! :)



---

archive/issue_comments_482910.json:
```json
{
    "body": "<a id='comment:35'></a>\nBut soon I'll start bothering you with lots of naive questions about differential geometry... ;)",
    "created_at": "2020-08-04T16:46:45Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482910",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
But soon I'll start bothering you with lots of naive questions about differential geometry... ;)



---

archive/issue_comments_482911.json:
```json
{
    "body": "<a id='comment:36'></a>\nReplying to [mkoeppe](#comment%3A35):\n> But soon I'll start bothering you with lots of naive questions about differential geometry... ;)\n\n\nThat's only fair. ;)",
    "created_at": "2020-08-04T16:56:25Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482911",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:36'></a>
Replying to [mkoeppe](#comment%3A35):
> But soon I'll start bothering you with lots of naive questions about differential geometry... ;)


That's only fair. ;)



---

archive/issue_comments_482912.json:
```json
{
    "body": "<a id='comment:37'></a>\nI will remove the dependence from #30116 again.",
    "created_at": "2020-08-04T17:04:42Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482912",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:37'></a>
I will remove the dependence from #30116 again.



---

archive/issue_comments_482913.json:
```json
{
    "body": "**Changing commit** from \"[a5f6a19d0b492cbe2b73daf74e1a6b3a98667055](https://github.com/sagemath/sagetrac-mirror/commit/a5f6a19d0b492cbe2b73daf74e1a6b3a98667055)\" to \"[37b004279233b59c9044e82fb1578a3025beb258](https://github.com/sagemath/sagetrac-mirror/commit/37b004279233b59c9044e82fb1578a3025beb258)\".",
    "created_at": "2020-08-04T17:17:48Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482913",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a5f6a19d0b492cbe2b73daf74e1a6b3a98667055](https://github.com/sagemath/sagetrac-mirror/commit/a5f6a19d0b492cbe2b73daf74e1a6b3a98667055)" to "[37b004279233b59c9044e82fb1578a3025beb258](https://github.com/sagemath/sagetrac-mirror/commit/37b004279233b59c9044e82fb1578a3025beb258)".



---

archive/issue_comments_482914.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37b004279233b59c9044e82fb1578a3025beb258\">37b0042</a></td><td><code>Trac #30266: remove dependency of #30116</code></td></tr></table>\n",
    "created_at": "2020-08-04T17:17:48Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37b004279233b59c9044e82fb1578a3025beb258">37b0042</a></td><td><code>Trac #30266: remove dependency of #30116</code></td></tr></table>




---

archive/issue_comments_482915.json:
```json
{
    "body": "**Changing commit** from \"[37b004279233b59c9044e82fb1578a3025beb258](https://github.com/sagemath/sagetrac-mirror/commit/37b004279233b59c9044e82fb1578a3025beb258)\" to \"[2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e](https://github.com/sagemath/sagetrac-mirror/commit/2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e)\".",
    "created_at": "2020-08-04T17:18:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[37b004279233b59c9044e82fb1578a3025beb258](https://github.com/sagemath/sagetrac-mirror/commit/37b004279233b59c9044e82fb1578a3025beb258)" to "[2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e](https://github.com/sagemath/sagetrac-mirror/commit/2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e)".



---

archive/issue_comments_482916.json:
```json
{
    "body": "<a id='comment:39'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e\">2f72e19</a></td><td><code>Trac #30266: if statement missing</code></td></tr></table>\n",
    "created_at": "2020-08-04T17:18:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e">2f72e19</a></td><td><code>Trac #30266: if statement missing</code></td></tr></table>




---

archive/issue_comments_482917.json:
```json
{
    "body": "**Changing commit** from \"[2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e](https://github.com/sagemath/sagetrac-mirror/commit/2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e)\" to \"[793c162342e961c60ddc3ba704a59934d921c47d](https://github.com/sagemath/sagetrac-mirror/commit/793c162342e961c60ddc3ba704a59934d921c47d)\".",
    "created_at": "2020-08-04T17:27:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e](https://github.com/sagemath/sagetrac-mirror/commit/2f72e19ef4e48b1dd886a3b7ec3488e0e95b284e)" to "[793c162342e961c60ddc3ba704a59934d921c47d](https://github.com/sagemath/sagetrac-mirror/commit/793c162342e961c60ddc3ba704a59934d921c47d)".



---

archive/issue_comments_482918.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/793c162342e961c60ddc3ba704a59934d921c47d\">793c162</a></td><td><code>Trac #30266: hash function improved</code></td></tr></table>\n",
    "created_at": "2020-08-04T17:27:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482918",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/793c162342e961c60ddc3ba704a59934d921c47d">793c162</a></td><td><code>Trac #30266: hash function improved</code></td></tr></table>




---

archive/issue_comments_482919.json:
```json
{
    "body": "<a id='comment:41'></a>\nHere we go. Let's see what our friend the patchbot says...",
    "created_at": "2020-08-04T17:28:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482919",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:41'></a>
Here we go. Let's see what our friend the patchbot says...



---

archive/issue_comments_482920.json:
```json
{
    "body": "**Changing dependencies** from \"#30181, #30116\" to \"#30181\".",
    "created_at": "2020-08-04T17:28:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482920",
    "user": "https://github.com/mjungmath"
}
```

**Changing dependencies** from "#30181, #30116" to "#30181".



---

archive/issue_comments_482921.json:
```json
{
    "body": "**Changing commit** from \"[793c162342e961c60ddc3ba704a59934d921c47d](https://github.com/sagemath/sagetrac-mirror/commit/793c162342e961c60ddc3ba704a59934d921c47d)\" to \"[1912193c1c40222a7ce606e318fb1c5d5126cca4](https://github.com/sagemath/sagetrac-mirror/commit/1912193c1c40222a7ce606e318fb1c5d5126cca4)\".",
    "created_at": "2020-08-04T17:50:01Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482921",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[793c162342e961c60ddc3ba704a59934d921c47d](https://github.com/sagemath/sagetrac-mirror/commit/793c162342e961c60ddc3ba704a59934d921c47d)" to "[1912193c1c40222a7ce606e318fb1c5d5126cca4](https://github.com/sagemath/sagetrac-mirror/commit/1912193c1c40222a7ce606e318fb1c5d5126cca4)".



---

archive/issue_comments_482922.json:
```json
{
    "body": "<a id='comment:42'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1912193c1c40222a7ce606e318fb1c5d5126cca4\">1912193</a></td><td><code>Trac #30266: doctest improved</code></td></tr></table>\n",
    "created_at": "2020-08-04T17:50:01Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1912193c1c40222a7ce606e318fb1c5d5126cca4">1912193</a></td><td><code>Trac #30266: doctest improved</code></td></tr></table>




---

archive/issue_comments_482923.json:
```json
{
    "body": "<a id='comment:43'></a>\nPatchbot is satisfied.",
    "created_at": "2020-08-04T20:24:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482923",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:43'></a>
Patchbot is satisfied.



---

archive/issue_comments_482924.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2020-08-04T21:46:10Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482924",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_events_270561.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-04T21:46:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30266#event-270561"
}
```



---

archive/issue_events_270562.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-04T21:46:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30266#event-270562"
}
```



---

archive/issue_events_270563.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-09T08:47:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30266#event-270563"
}
```



---

archive/issue_events_270564.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7b224d83c00c84e08525d7a4a98ce73a51a6c52f",
    "created_at": "2020-08-09T08:47:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30266#event-270564"
}
```



---

archive/issue_comments_482925.json:
```json
{
    "body": "**Changing branch** from \"[u/gh-mjungmath/immutability_for_scalar_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/immutability_for_scalar_fields)\" to \"[1912193c1c40222a7ce606e318fb1c5d5126cca4](https://github.com/sagemath/sagetrac-mirror/commit/1912193c1c40222a7ce606e318fb1c5d5126cca4)\".",
    "created_at": "2020-08-09T08:47:24Z",
    "issue": "https://github.com/sagemath/sage/issues/30266",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30266#issuecomment-482925",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/gh-mjungmath/immutability_for_scalar_fields](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/immutability_for_scalar_fields)" to "[1912193c1c40222a7ce606e318fb1c5d5126cca4](https://github.com/sagemath/sagetrac-mirror/commit/1912193c1c40222a7ce606e318fb1c5d5126cca4)".
