# Issue 30713: Narrow down import of SageObject

archive/issues_030476.json:
```json
{
    "body": "CC:  @mkoeppe @tscrim\n\nKeywords: sd111\n\nSmall change of narrowing down the import of `SageObject` instead of importing the whole module.\n\nIssue created by migration from https://trac.sagemath.org/ticket/30713\n\n",
    "created_at": "2020-10-03T20:29:19Z",
    "labels": [
        "component: refactoring"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Narrow down import of SageObject",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30713",
    "user": "https://github.com/tobiasdiez"
}
```
CC:  @mkoeppe @tscrim

Keywords: sd111

Small change of narrowing down the import of `SageObject` instead of importing the whole module.

Issue created by migration from https://trac.sagemath.org/ticket/30713





---

archive/issue_comments_434457.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-03T20:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_434458.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-10-03T20:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434458",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_434459.json:
```json
{
    "body": "New commits:\n|                                                                                                                                          |                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|\n|[ff9ed51](https://git.sagemath.org/sage.git/commit?id=ff9ed515c45cd8a66a6b2cf9f96b8604d6ae24fe)|`Narrow down import of SageObject`|\n---\nNew commits:",
    "created_at": "2020-10-03T20:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434459",
    "user": "https://github.com/tobiasdiez"
}
```

New commits:
|                                                                                                                                          |                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------|
|[ff9ed51](https://git.sagemath.org/sage.git/commit?id=ff9ed515c45cd8a66a6b2cf9f96b8604d6ae24fe)|`Narrow down import of SageObject`|
---
New commits:



---

archive/issue_comments_434460.json:
```json
{
    "body": "I also prefer the style that uses `from ... import ...`, but this is a cosmetic change. It still loads the whole module.",
    "created_at": "2020-10-03T21:30:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434460",
    "user": "https://github.com/mkoeppe"
}
```

I also prefer the style that uses `from ... import ...`, but this is a cosmetic change. It still loads the whole module.



---

archive/issue_comments_434461.json:
```json
{
    "body": "Replying to [comment:3 mkoeppe]:\n> I also prefer the style that uses `from ... import ...`,\n\n\nSame.\n\n> but this is a cosmetic change. It still loads the whole module. \n\n\nIt is not entirely cosmetic with how the imports work IIRC. But it does make is clear what is desired from that module, so I think it is a net improvement.",
    "created_at": "2020-10-04T02:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434461",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:3 mkoeppe]:
> I also prefer the style that uses `from ... import ...`,


Same.

> but this is a cosmetic change. It still loads the whole module. 


It is not entirely cosmetic with how the imports work IIRC. But it does make is clear what is desired from that module, so I think it is a net improvement.



---

archive/issue_comments_434462.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-04T03:37:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434462",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_434463.json:
```json
{
    "body": "Thanks for the review!",
    "created_at": "2020-10-04T09:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434463",
    "user": "https://github.com/tobiasdiez"
}
```

Thanks for the review!



---

archive/issue_events_080003.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80003"
}
```



---

archive/issue_comments_434464.json:
```json
{
    "body": "docbuild fails:\n\n```\n[dochtml] [function_] building [inventory]: targets for 11 source files that are out of date\n[dochtml] [function_] updating environment: [new config] 11 added, 0 changed, 0 removed\n[dochtml] [combinat ] /home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/crystals/mv_polytopes.py:docstring of sage.combinat.crystals.mv_polytopes.MVPolytope.plot:22: WARNING: Exception occurred in plotting mv_polytopes-1\n[dochtml] [combinat ]  from /home/release/Sage/src/doc/en/reference/combinat/sage/combinat/crystals/mv_polytopes.rst:\n[dochtml] [combinat ] Traceback (most recent call last):\n[dochtml] [combinat ]   File \"/home/release/Sage/local/lib/python3.8/site-packages/matplotlib/sphinxext/plot_directive.py\", line 472, in run_code\n[dochtml] [combinat ]     exec(code, ns)\n[dochtml] [combinat ]   File \"<string>\", line 4, in <module>\n[dochtml] [combinat ]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py\", line 2053, in plot\n[dochtml] [combinat ]     G += self.plot_roots(roots, plot_options=plot_options)\n[dochtml] [combinat ]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py\", line 2299, in plot_roots\n[dochtml] [combinat ]     roots = Family(roots, self)\n[dochtml] [combinat ]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage/sets/family.py\", line 406, in Family\n[dochtml] [combinat ]     return LazyFamily(indices, function, name)\n[dochtml] [combinat ]   File \"/home/release/Sage/local/lib/python3.8/site-packages/sage/sets/family.py\", line 908, in __init__\n[dochtml] [combinat ]     self.set = copy(set)\n[dochtml] [combinat ]   File \"/home/release/Sage/local/lib/python3.8/copy.py\", line 102, in copy\n[dochtml] [combinat ]     return _reconstruct(x, None, *rv)\n[dochtml] [combinat ]   File \"/home/release/Sage/local/lib/python3.8/copy.py\", line 264, in _reconstruct\n[dochtml] [combinat ]     y = func(*args)\n[dochtml] [combinat ]   File \"stringsource\", line 7, in sage.structure.sage_object.__pyx_unpickle_SageObject (build/cythonized/sage/structure/sage_object.c:11737)\n[dochtml] [combinat ] TypeError: sage.structure.sage_object.SageObject.__new__(FiniteFamily_with_category) is not safe, use FiniteFamily_with_category.__new__()\n[dochtml] [combinat ] /home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/crystals/mv_polytopes.py:docstring of sage.combinat.crystals.mv_polytopes.MVPolytopes:101: WARNING: Exception occurred in plotting mv_polytopes-2\n```",
    "created_at": "2020-10-25T23:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434464",
    "user": "https://github.com/vbraun"
}
```

docbuild fails:

```
[dochtml] [function_] building [inventory]: targets for 11 source files that are out of date
[dochtml] [function_] updating environment: [new config] 11 added, 0 changed, 0 removed
[dochtml] [combinat ] /home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/crystals/mv_polytopes.py:docstring of sage.combinat.crystals.mv_polytopes.MVPolytope.plot:22: WARNING: Exception occurred in plotting mv_polytopes-1
[dochtml] [combinat ]  from /home/release/Sage/src/doc/en/reference/combinat/sage/combinat/crystals/mv_polytopes.rst:
[dochtml] [combinat ] Traceback (most recent call last):
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/matplotlib/sphinxext/plot_directive.py", line 472, in run_code
[dochtml] [combinat ]     exec(code, ns)
[dochtml] [combinat ]   File "<string>", line 4, in <module>
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py", line 2053, in plot
[dochtml] [combinat ]     G += self.plot_roots(roots, plot_options=plot_options)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/root_system/root_lattice_realizations.py", line 2299, in plot_roots
[dochtml] [combinat ]     roots = Family(roots, self)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage/sets/family.py", line 406, in Family
[dochtml] [combinat ]     return LazyFamily(indices, function, name)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/site-packages/sage/sets/family.py", line 908, in __init__
[dochtml] [combinat ]     self.set = copy(set)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/copy.py", line 102, in copy
[dochtml] [combinat ]     return _reconstruct(x, None, *rv)
[dochtml] [combinat ]   File "/home/release/Sage/local/lib/python3.8/copy.py", line 264, in _reconstruct
[dochtml] [combinat ]     y = func(*args)
[dochtml] [combinat ]   File "stringsource", line 7, in sage.structure.sage_object.__pyx_unpickle_SageObject (build/cythonized/sage/structure/sage_object.c:11737)
[dochtml] [combinat ] TypeError: sage.structure.sage_object.SageObject.__new__(FiniteFamily_with_category) is not safe, use FiniteFamily_with_category.__new__()
[dochtml] [combinat ] /home/release/Sage/local/lib/python3.8/site-packages/sage/combinat/crystals/mv_polytopes.py:docstring of sage.combinat.crystals.mv_polytopes.MVPolytopes:101: WARNING: Exception occurred in plotting mv_polytopes-2
```



---

archive/issue_comments_434465.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-10-25T23:28:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434465",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_434466.json:
```json
{
    "body": "Thanks for testing, but I don't see how this error `TypeError: sage.structure.sage_object.SageObject.__new__(FiniteFamily_with_category) is not safe, use FiniteFamily_with_category.__new__()` is related to the changes in this branch. Do you have any suggestions on how to investigate this?",
    "created_at": "2020-10-26T08:22:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434466",
    "user": "https://github.com/tobiasdiez"
}
```

Thanks for testing, but I don't see how this error `TypeError: sage.structure.sage_object.SageObject.__new__(FiniteFamily_with_category) is not safe, use FiniteFamily_with_category.__new__()` is related to the changes in this branch. Do you have any suggestions on how to investigate this?



---

archive/issue_comments_434467.json:
```json
{
    "body": "Something very subtle is likely happening if it is indeed related to this branch. The first thing to do would be to try and reproduce the error. You might want to try with Volker's current branch to see if it is coming from one of the already merged-but-not-released branches for the upcoming 9.3.beta0. However, I am at a loss as well for the error and reproducing it.",
    "created_at": "2020-10-27T00:24:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434467",
    "user": "https://github.com/tscrim"
}
```

Something very subtle is likely happening if it is indeed related to this branch. The first thing to do would be to try and reproduce the error. You might want to try with Volker's current branch to see if it is coming from one of the already merged-but-not-released branches for the upcoming 9.3.beta0. However, I am at a loss as well for the error and reproducing it.



---

archive/issue_comments_434468.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434468",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_434469.json:
```json
{
    "body": "Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434469",
    "user": "https://github.com/mkoeppe"
}
```

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_events_080004.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80004"
}
```



---

archive/issue_events_080005.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80005"
}
```



---

archive/issue_comments_434470.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434470",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_080006.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80006"
}
```



---

archive/issue_events_080007.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80007"
}
```



---

archive/issue_comments_434471.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30713#issuecomment-434471",
    "user": "https://github.com/mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_080008.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80008"
}
```



---

archive/issue_events_080009.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80009"
}
```



---

archive/issue_events_080010.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80010"
}
```



---

archive/issue_events_080011.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80011"
}
```



---

archive/issue_events_080012.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80012"
}
```



---

archive/issue_events_080013.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30713",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30713#event-80013"
}
```
