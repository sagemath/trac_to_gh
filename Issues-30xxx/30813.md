# Issue 30813: try to upgrade tdlib

archive/issues_030576.json:
```json
{
    "body": "tdlib appears in development, at https://github.com/freetdi/tdlib - now at version 0.9.\n\nNot sure whether it it easy to upgrade, but one should try.\n\n**CC:**  @dcoudert llarisch\n\nIssue created by migration from https://trac.sagemath.org/ticket/30813\n\n",
    "created_at": "2020-10-22T17:30:15Z",
    "labels": [
        "component: packages: optional",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "try to upgrade tdlib",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30813",
    "user": "https://github.com/dimpase"
}
```
tdlib appears in development, at https://github.com/freetdi/tdlib - now at version 0.9.

Not sure whether it it easy to upgrade, but one should try.

**CC:**  @dcoudert llarisch

Issue created by migration from https://trac.sagemath.org/ticket/30813





---

archive/issue_comments_497489.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt's in my todo list since several months now... but I don't know how to do that.\n\nWe should also expose other algorithms from this library (heuristics, cuset, etc.). I plan to move the treewidth method into a new `tree_decomposition.pyx` file and add an exact algorithm for treelength (I have one). But one step at a time.",
    "created_at": "2020-10-22T18:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30813#issuecomment-497489",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:2'></a>
It's in my todo list since several months now... but I don't know how to do that.

We should also expose other algorithms from this library (heuristics, cuset, etc.). I plan to move the treewidth method into a new `tree_decomposition.pyx` file and add an exact algorithm for treelength (I have one). But one step at a time.



---

archive/issue_comments_497490.json:
```json
{
    "body": "<a id='comment:3'></a>\nNote that Cython code that uses tdlib should remain in its own module and not be mixed with other Cython code - this is important for the modularization effort (#29864)",
    "created_at": "2020-10-22T19:21:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30813#issuecomment-497490",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Note that Cython code that uses tdlib should remain in its own module and not be mixed with other Cython code - this is important for the modularization effort (#29864)



---

archive/issue_comments_497491.json:
```json
{
    "body": "<a id='comment:4'></a>\nI opened https://github.com/freetdi/tdlib/issues/34\n\nit principle, all the C++ headers as in the current package are still there, whether they are compatible is another question. I asked the upstream to make a release.",
    "created_at": "2020-10-23T10:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30813#issuecomment-497491",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
I opened https://github.com/freetdi/tdlib/issues/34

it principle, all the C++ headers as in the current package are still there, whether they are compatible is another question. I asked the upstream to make a release.



---

archive/issue_events_280935.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280935"
}
```



---

archive/issue_events_280936.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280936"
}
```



---

archive/issue_comments_497492.json:
```json
{
    "body": "<a id='comment:5'></a>\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30813#issuecomment-497492",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_497493.json:
```json
{
    "body": "<a id='comment:6'></a>\nnow on gitlab, and with a new name\n\nhttps://gitlab.com/freetdi/treedec/-/releases",
    "created_at": "2021-05-07T18:11:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30813#issuecomment-497493",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
now on gitlab, and with a new name

https://gitlab.com/freetdi/treedec/-/releases



---

archive/issue_comments_497494.json:
```json
{
    "body": "<a id='comment:7'></a>\nand a new release: https://gitlab.com/freetdi/treedec/-/releases",
    "created_at": "2021-07-14T09:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30813#issuecomment-497494",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
and a new release: https://gitlab.com/freetdi/treedec/-/releases



---

archive/issue_comments_497495.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [dimpase](#comment%3A7):\n> and a new release: https://gitlab.com/freetdi/treedec/-/releases\n\n\n```diff\n --- a/src/sage/graphs/graph_decompositions/sage_tdlib.cpp\n +++ b/src/sage/graphs/graph_decompositions/sage_tdlib.cpp\n @@ -2,8 +2,9 @@\n  #include <map>\n  \n  #include <boost/graph/adjacency_list.hpp>\n -#include \"tdlib/TD_combinations.hpp\"\n -#include \"tdlib/TD_misc.hpp\"\n +#include <treedec/combinations.hpp>\n +#include <treedec/misc.hpp>\n +#include <treedec/treedec.hpp>\n  \n  #ifndef TD_STRUCT_VERTEX\n  #define TD_STRUCT_VERTEX\n @@ -20,7 +21,6 @@ struct bag{\n      std::set<unsigned int> bag;\n  };\n  \n -typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS, bag> TD_tree_dec_t;\n  \n  \n  void make_tdlib_graph(TD_graph_t &G, std::vector<unsigned int> &V, std::vector<unsigned int> &E){\n```",
    "created_at": "2021-07-15T20:09:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30813#issuecomment-497495",
    "user": "https://github.com/sheerluck"
}
```

<a id='comment:8'></a>
Replying to [dimpase](#comment%3A7):
> and a new release: https://gitlab.com/freetdi/treedec/-/releases


```diff
 --- a/src/sage/graphs/graph_decompositions/sage_tdlib.cpp
 +++ b/src/sage/graphs/graph_decompositions/sage_tdlib.cpp
 @@ -2,8 +2,9 @@
  #include <map>
  
  #include <boost/graph/adjacency_list.hpp>
 -#include "tdlib/TD_combinations.hpp"
 -#include "tdlib/TD_misc.hpp"
 +#include <treedec/combinations.hpp>
 +#include <treedec/misc.hpp>
 +#include <treedec/treedec.hpp>
  
  #ifndef TD_STRUCT_VERTEX
  #define TD_STRUCT_VERTEX
 @@ -20,7 +21,6 @@ struct bag{
      std::set<unsigned int> bag;
  };
  
 -typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::undirectedS, bag> TD_tree_dec_t;
  
  
  void make_tdlib_graph(TD_graph_t &G, std::vector<unsigned int> &V, std::vector<unsigned int> &E){
```



---

archive/issue_events_280937.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280937"
}
```



---

archive/issue_events_280938.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T02:58:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280938"
}
```



---

archive/issue_events_280939.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280939"
}
```



---

archive/issue_events_280940.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:41:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280940"
}
```



---

archive/issue_events_280941.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280941"
}
```



---

archive/issue_events_280942.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280942"
}
```



---

archive/issue_events_280943.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T19:55:19Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280943"
}
```



---

archive/issue_events_280944.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-06T19:55:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30813",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30813#event-280944"
}
```
