# Issue 30352: Interface to the KnotInfo and LinkInfo databases

archive/issues_030115.json:
```json
{
    "assignees": [],
    "body": "At the moment Sage offers just a small set of 250 named knots (`src/sage/knots/knot_table.py`) taken form the [Rolfsen table](http://katlas.math.toronto.edu/wiki/The_Rolfsen_Knot_Table). Proper named links aren't available at all.\n\nNowadays, larger databases for knots and links are available at the [Knot Atlas](http://katlas.math.toronto.edu/wiki/Main_Page) pages in RDF-format and at [KnotInfo](https://knotinfo.math.indiana.edu/) as XLS / XLSX -files. Since parsing of CSV files is already supported by Sage, this is a good start to produce a Sage packages from these files containing about 3000 knots and 4000 proper links together with a lot of their properties and invariants.\n\nSuch a package has a couple of advantages:\n\n1. Perform cross-checks for about 7000 links of alternative implementations of certain methods.\n2. Do cross-checks against results listed in the *KontInfo* database.\n3. Provide properties for these links that are not provided by Sage, yet.\n4. Implement a link identification method for our link class (like *KnotFinder*).\n5. Launch webpages containing additional information for a link or alternate graphical representations.\n\nThe aim of this ticket is to have the databases accessible in Sage together with conversion methods for the most important properties and invariants.\n\nMany thanks to Allison Moore and Chuck Livingston for their kind permission to have this interface implemented and their offer to support us.\n\n\nHaving checked out the ticket for the first time, you have to run\n\n```\n./configure --enable-download-from-upstream-url\nsage -i database_knotinfo\n```\n\nin order to have the databases installed. If you like to run all relevant doctests on the installation use:\n\n```\nsage -i -c database_knotinfo\n```\n\nCC:  @miguelmarco @mkoeppe @kiwifb\n\nComponent: **algebraic topology**\n\nKeywords: **knot, link**\n\nAuthor: **Sebastian Oehms**\n\nBranch: **[`9cde996`](https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1)**\n\nReviewer: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30352_\n\n",
    "closed_at": "2021-06-06T13:19:25Z",
    "created_at": "2020-08-14T07:01:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20topology",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20databases"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Interface to the KnotInfo and LinkInfo databases",
    "type": "issue",
    "updated_at": "2021-10-26T15:50:32Z",
    "url": "https://github.com/sagemath/sage/issues/30352",
    "user": "https://github.com/soehms"
}
```
At the moment Sage offers just a small set of 250 named knots (`src/sage/knots/knot_table.py`) taken form the [Rolfsen table](http://katlas.math.toronto.edu/wiki/The_Rolfsen_Knot_Table). Proper named links aren't available at all.

Nowadays, larger databases for knots and links are available at the [Knot Atlas](http://katlas.math.toronto.edu/wiki/Main_Page) pages in RDF-format and at [KnotInfo](https://knotinfo.math.indiana.edu/) as XLS / XLSX -files. Since parsing of CSV files is already supported by Sage, this is a good start to produce a Sage packages from these files containing about 3000 knots and 4000 proper links together with a lot of their properties and invariants.

Such a package has a couple of advantages:

1. Perform cross-checks for about 7000 links of alternative implementations of certain methods.
2. Do cross-checks against results listed in the *KontInfo* database.
3. Provide properties for these links that are not provided by Sage, yet.
4. Implement a link identification method for our link class (like *KnotFinder*).
5. Launch webpages containing additional information for a link or alternate graphical representations.

The aim of this ticket is to have the databases accessible in Sage together with conversion methods for the most important properties and invariants.

Many thanks to Allison Moore and Chuck Livingston for their kind permission to have this interface implemented and their offer to support us.


Having checked out the ticket for the first time, you have to run

```
./configure --enable-download-from-upstream-url
sage -i database_knotinfo
```

in order to have the databases installed. If you like to run all relevant doctests on the installation use:

```
sage -i -c database_knotinfo
```

CC:  @miguelmarco @mkoeppe @kiwifb

Component: **algebraic topology**

Keywords: **knot, link**

Author: **Sebastian Oehms**

Branch: **[`9cde996`](https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1)**

Reviewer: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/30352_





---

archive/issue_events_415082.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-08-14T07:01:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415082"
}
```



---

archive/issue_events_415083.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-08-14T07:01:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20topology",
    "label_color": "0000ff",
    "label_name": "c: algebraic topology",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415083"
}
```



---

archive/issue_events_415084.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-08-14T07:01:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415084"
}
```



---

archive/issue_events_415085.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-08-14T07:01:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415085"
}
```



---

archive/issue_events_415086.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-08-14T07:01:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20databases",
    "label_color": "0000ff",
    "label_name": "c: databases",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415086"
}
```



---

archive/issue_comments_481851.json:
```json
{
    "body": "Branch: **[u/soehms/knotinfo](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/knotinfo)**",
    "created_at": "2020-08-14T07:42:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481851",
    "user": "https://github.com/soehms"
}
```

Branch: **[u/soehms/knotinfo](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/knotinfo)**



---

archive/issue_comments_481852.json:
```json
{
    "body": "Tarball for KnotInfo",
    "created_at": "2020-08-14T07:44:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481852",
    "user": "https://github.com/soehms"
}
```

Tarball for KnotInfo



---

archive/issue_comments_481853.json:
```json
{
    "body": "Commit: **[`a79ddf5`](https://github.com/sagemath/sagetrac-mirror/commit/a79ddf5786906d819287c1125e94188511157912)**",
    "created_at": "2020-08-14T07:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481853",
    "user": "https://github.com/soehms"
}
```

Commit: **[`a79ddf5`](https://github.com/sagemath/sagetrac-mirror/commit/a79ddf5786906d819287c1125e94188511157912)**



---

archive/issue_comments_481854.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nAttachment: **[knotinfo-20200713.tar.bz2.gz](https://github.com/sagemath/sage/files/ticket30352/knotinfo-20200713.tar.bz2.gz)**\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a79ddf5786906d819287c1125e94188511157912\"><code>a79ddf5</code></a></td><td><code>30352: initial version providing just the basics</code></td></tr></table>\n",
    "created_at": "2020-08-14T07:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481854",
    "user": "https://github.com/soehms"
}
```

<div id="comment:2" align="right">comment:2</div>

Attachment: **[knotinfo-20200713.tar.bz2.gz](https://github.com/sagemath/sage/files/ticket30352/knotinfo-20200713.tar.bz2.gz)**

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a79ddf5786906d819287c1125e94188511157912"><code>a79ddf5</code></a></td><td><code>30352: initial version providing just the basics</code></td></tr></table>




---

archive/issue_comments_481855.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,3 +14,15 @@\n \n Many thanks to Allison Moore and Chuck Livingston for their kind permission to have this interface implemented and their offer to support us.\n \n+\n+\n+Having checked out the ticket for the first time, you have to run\n+\n+```\n+make SAGE_SPKG=\"sage-spkg -o\" knotinfo build\n+```\n+\n+in order to have the databases installed.\n+\n+Traball: https://trac.sagemath.org/raw-attachment/ticket/30352/knotinfo-20200813.tar.bz2\n+\n``````\n",
    "created_at": "2020-08-14T07:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481855",
    "user": "https://github.com/soehms"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,3 +14,15 @@
 
 Many thanks to Allison Moore and Chuck Livingston for their kind permission to have this interface implemented and their offer to support us.
 
+
+
+Having checked out the ticket for the first time, you have to run
+
+```
+make SAGE_SPKG="sage-spkg -o" knotinfo build
+```
+
+in order to have the databases installed.
+
+Traball: https://trac.sagemath.org/raw-attachment/ticket/30352/knotinfo-20200813.tar.bz2
+
``````




---

archive/issue_comments_481856.json:
```json
{
    "body": "Author: **Sebastian Oehms**",
    "created_at": "2020-08-14T08:45:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481856",
    "user": "https://github.com/soehms"
}
```

Author: **Sebastian Oehms**



---

archive/issue_comments_481857.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,7 +19,7 @@\n Having checked out the ticket for the first time, you have to run\n \n ```\n-make SAGE_SPKG=\"sage-spkg -o\" knotinfo build\n+make SAGE_SPKG=\"sage-spkg -o\" knotinfo-clean build\n ```\n \n in order to have the databases installed.\n``````\n",
    "created_at": "2020-08-14T09:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481857",
    "user": "https://github.com/soehms"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,7 +19,7 @@
 Having checked out the ticket for the first time, you have to run
 
 ```
-make SAGE_SPKG="sage-spkg -o" knotinfo build
+make SAGE_SPKG="sage-spkg -o" knotinfo-clean build
 ```
 
 in order to have the databases installed.
``````




---

archive/issue_comments_481858.json:
```json
{
    "body": "Changed commit from **[`a79ddf5`](https://github.com/sagemath/sagetrac-mirror/commit/a79ddf5786906d819287c1125e94188511157912)** to **[`a8f1bfc`](https://github.com/sagemath/sagetrac-mirror/commit/a8f1bfc6a1f7647ab8ff3329759f66269c955d2c)**",
    "created_at": "2020-08-15T09:08:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481858",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a79ddf5`](https://github.com/sagemath/sagetrac-mirror/commit/a79ddf5786906d819287c1125e94188511157912)** to **[`a8f1bfc`](https://github.com/sagemath/sagetrac-mirror/commit/a8f1bfc6a1f7647ab8ff3329759f66269c955d2c)**



---

archive/issue_comments_481859.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8f1bfc6a1f7647ab8ff3329759f66269c955d2c\"><code>a8f1bfc</code></a></td><td><code>30352: adding Gauss-code and symmetry type</code></td></tr></table>\n",
    "created_at": "2020-08-15T09:08:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481859",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8f1bfc6a1f7647ab8ff3329759f66269c955d2c"><code>a8f1bfc</code></a></td><td><code>30352: adding Gauss-code and symmetry type</code></td></tr></table>




---

archive/issue_comments_481860.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,7 +22,12 @@\n make SAGE_SPKG=\"sage-spkg -o\" knotinfo-clean build\n ```\n \n-in order to have the databases installed.\n+in order to have the databases installed. If you like to run all relevant doctests on the installation use:\n+\n+```\n+make SAGE_SPKG=\"sage-spkg -o\" SAGE_CHECK=\"yes\" knotinfo-clean build\n+```\n+\n \n Traball: https://trac.sagemath.org/raw-attachment/ticket/30352/knotinfo-20200813.tar.bz2\n \n``````\n",
    "created_at": "2020-08-15T09:11:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481860",
    "user": "https://github.com/soehms"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,7 +22,12 @@
 make SAGE_SPKG="sage-spkg -o" knotinfo-clean build
 ```
 
-in order to have the databases installed.
+in order to have the databases installed. If you like to run all relevant doctests on the installation use:
+
+```
+make SAGE_SPKG="sage-spkg -o" SAGE_CHECK="yes" knotinfo-clean build
+```
+
 
 Traball: https://trac.sagemath.org/raw-attachment/ticket/30352/knotinfo-20200813.tar.bz2
 
``````




---

archive/issue_comments_481861.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ec036c08283c02d335b0f56e70b362cb3817bc0\"><code>1ec036c</code></a></td><td><code>30352: add demo sample list of 20 links</code></td></tr></table>\n",
    "created_at": "2020-08-23T17:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481861",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ec036c08283c02d335b0f56e70b362cb3817bc0"><code>1ec036c</code></a></td><td><code>30352: add demo sample list of 20 links</code></td></tr></table>




---

archive/issue_comments_481862.json:
```json
{
    "body": "Changed commit from **[`a8f1bfc`](https://github.com/sagemath/sagetrac-mirror/commit/a8f1bfc6a1f7647ab8ff3329759f66269c955d2c)** to **[`1ec036c`](https://github.com/sagemath/sagetrac-mirror/commit/1ec036c08283c02d335b0f56e70b362cb3817bc0)**",
    "created_at": "2020-08-23T17:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481862",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a8f1bfc`](https://github.com/sagemath/sagetrac-mirror/commit/a8f1bfc6a1f7647ab8ff3329759f66269c955d2c)** to **[`1ec036c`](https://github.com/sagemath/sagetrac-mirror/commit/1ec036c08283c02d335b0f56e70b362cb3817bc0)**



---

archive/issue_comments_481863.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI add a sample of 20 links with about 20 of their properties as demonstration examples in order to have most of the doctests work on standard tests.",
    "created_at": "2020-08-23T17:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481863",
    "user": "https://github.com/soehms"
}
```

<div id="comment:8" align="right">comment:8</div>

I add a sample of 20 links with about 20 of their properties as demonstration examples in order to have most of the doctests work on standard tests.



---

archive/issue_comments_481864.json:
```json
{
    "body": "Changed commit from **[`1ec036c`](https://github.com/sagemath/sagetrac-mirror/commit/1ec036c08283c02d335b0f56e70b362cb3817bc0)** to **[`092cd4c`](https://github.com/sagemath/sagetrac-mirror/commit/092cd4c74776a3e1027229788b7ed0f4821bd008)**",
    "created_at": "2020-11-01T07:38:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481864",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1ec036c`](https://github.com/sagemath/sagetrac-mirror/commit/1ec036c08283c02d335b0f56e70b362cb3817bc0)** to **[`092cd4c`](https://github.com/sagemath/sagetrac-mirror/commit/092cd4c74776a3e1027229788b7ed0f4821bd008)**



---

archive/issue_comments_481865.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a20c2f01a7098204736228f04094fe243c762742\"><code>a20c2f0</code></a></td><td><code>build/pkgs/sage_sws2rst/src/test/Adding_Pictures_and_screenshots.sws</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60bae796c8feb5ebcdfad9ab826b9f4022dd38db\"><code>60bae79</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c28e7365a1a4a0b89885865d9ae45b9fa0019d5\"><code>0c28e73</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/092cd4c74776a3e1027229788b7ed0f4821bd008\"><code>092cd4c</code></a></td><td><code>30352: improvements and documentation</code></td></tr></table>\n",
    "created_at": "2020-11-01T07:38:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481865",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a20c2f01a7098204736228f04094fe243c762742"><code>a20c2f0</code></a></td><td><code>build/pkgs/sage_sws2rst/src/test/Adding_Pictures_and_screenshots.sws</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60bae796c8feb5ebcdfad9ab826b9f4022dd38db"><code>60bae79</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c28e7365a1a4a0b89885865d9ae45b9fa0019d5"><code>0c28e73</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/092cd4c74776a3e1027229788b7ed0f4821bd008"><code>092cd4c</code></a></td><td><code>30352: improvements and documentation</code></td></tr></table>




---

archive/issue_comments_481866.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI do the following:\n\n1. Add a new class `KnotInfoSeries` improving the access to the links.\n2. Add an link identification method (`identify_knotinfo`) to the class `Link` used in a new `is_isotopic` method.\n3. Add some more conversion methods for link invariants to Sage objects.\n4. Add `injection` methods to inject names of links and series of links easily into the namespace.\n5. Add conversion to [SnapPy](https://snappy.math.uic.edu/index.html) links.\n6. Some improvements in code sructure.\n7. Dokumentation.\n\nNow a state is reached where about a quarter of the more than 120 properties of links listed in the KnotInfo databases have conversions to Sage objects (whereas all of them can be accessed as string). Surely, useres will still miss conversion methods in the remaining cases. But, from my point of view the current set is sufficient for a start with that interface. More conversion methods can be added on demand. Therefore, I think this is ready for review.",
    "created_at": "2020-11-01T07:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481866",
    "user": "https://github.com/soehms"
}
```

<div id="comment:10" align="right">comment:10</div>

I do the following:

1. Add a new class `KnotInfoSeries` improving the access to the links.
2. Add an link identification method (`identify_knotinfo`) to the class `Link` used in a new `is_isotopic` method.
3. Add some more conversion methods for link invariants to Sage objects.
4. Add `injection` methods to inject names of links and series of links easily into the namespace.
5. Add conversion to [SnapPy](https://snappy.math.uic.edu/index.html) links.
6. Some improvements in code sructure.
7. Dokumentation.

Now a state is reached where about a quarter of the more than 120 properties of links listed in the KnotInfo databases have conversions to Sage objects (whereas all of them can be accessed as string). Surely, useres will still miss conversion methods in the remaining cases. But, from my point of view the current set is sufficient for a start with that interface. More conversion methods can be added on demand. Therefore, I think this is ready for review.



---

archive/issue_events_415087.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-11-01T07:43:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415087"
}
```



---

archive/issue_comments_481867.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -19,13 +19,13 @@\n Having checked out the ticket for the first time, you have to run\n \n ```\n-make SAGE_SPKG=\"sage-spkg -o\" knotinfo-clean build\n+make SAGE_SPKG=\"sage-spkg -o\" database_knotinfo-clean build\n ```\n \n in order to have the databases installed. If you like to run all relevant doctests on the installation use:\n \n ```\n-make SAGE_SPKG=\"sage-spkg -o\" SAGE_CHECK=\"yes\" knotinfo-clean build\n+make SAGE_SPKG=\"sage-spkg -o\" SAGE_CHECK=\"yes\" database_knotinfo-clean build\n ```\n \n \n``````\n",
    "created_at": "2020-11-01T07:43:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481867",
    "user": "https://github.com/soehms"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -19,13 +19,13 @@
 Having checked out the ticket for the first time, you have to run
 
 ```
-make SAGE_SPKG="sage-spkg -o" knotinfo-clean build
+make SAGE_SPKG="sage-spkg -o" database_knotinfo-clean build
 ```
 
 in order to have the databases installed. If you like to run all relevant doctests on the installation use:
 
 ```
-make SAGE_SPKG="sage-spkg -o" SAGE_CHECK="yes" knotinfo-clean build
+make SAGE_SPKG="sage-spkg -o" SAGE_CHECK="yes" database_knotinfo-clean build
 ```
 
 
``````




---

archive/issue_comments_481868.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI feel like there should be something added to the `features/databases.py` file to test that the package is installed rather than within the class itself. I think this is how we generally want to do things (but perhaps I am not the best person to ask about this).\n\nI am not entirely convinced by name of the method `identify_knotinfo`. I am thinking `knotinfo` is easier to discover, but I am also not sure this is a good name too. You should add a doctest showing an example that is not covered by the database to show that works (not just when it cannot be uniquely determined).\n\nNow for some minor things:\n\nIt would be good to limit things in the docstrings to ~80 characters per line.\n\nMissing blankline:\n\n```\n    def __init__(self, crossing_number, is_knot, is_alternating, name_unoriented=None):\n        r\"\"\"\n        Python constructor.\n\n        EXAMPLES::\n            sage: from sage.knots.knotinfo import KnotInfoSeries\n            sage: L6a = KnotInfoSeries(6, False, True); L6a\n            Series of links L6a\n            sage: TestSuite(L6a).run()\n        \"\"\"\n```\n\nYou don't need to apologize `:P`:\n\n```\nNotImplementedError: Sorry, this link cannot be uniquely determined\n```\nAlso, error messages should start with a lowercase.\n\nDo you need this import?\n\n```diff\n             sage: from sage.databases.knotinfo_db import KnotInfoDataBase\n-            sage: from sage.env import SAGE_SHARE\n             sage: ki_db = KnotInfoDataBase()\n             sage: ki_db.filename.links\n             <KnotInfoFilename.links: ['https://linkinfo.sitehost.iu.edu/', 'linkinfo_data_complete']>\n```\nI don't see where it is used in the doctest.\n\nThe bullet points are overindented:\n\n```\nBriefly, these differences are:\n\n   - ``pd_notation`` --        KnotInfo: counter clockwise Sage: clockwise, see note in\n     :meth:`KnotInfoBase.link`\n\n   - ``homfly_polynomial`` --  KnotInfo: ``v``  Sage: `1/a`, see note in :meth:`KnotInfoBase.homfly_polynomial`.\n\n   - ``braid_notation``    --  This is used accordingly: The crossing of the braid generators are positive\n     in both systems. Here it is listed because there could arise confusion from the source where they are\n     taken from. There, the braid generators are assumed to have a negative crossing\n     (see definition 3  of `Gittings, T., \"Minimum Braids: A Complete Invariant of Knots and Links <https://arxiv.org/abs/math/0401051>`__).\n```\n\nA trivial thing: `Examples::` -> EXAMPLES::`",
    "created_at": "2020-11-02T01:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481868",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

I feel like there should be something added to the `features/databases.py` file to test that the package is installed rather than within the class itself. I think this is how we generally want to do things (but perhaps I am not the best person to ask about this).

I am not entirely convinced by name of the method `identify_knotinfo`. I am thinking `knotinfo` is easier to discover, but I am also not sure this is a good name too. You should add a doctest showing an example that is not covered by the database to show that works (not just when it cannot be uniquely determined).

Now for some minor things:

It would be good to limit things in the docstrings to ~80 characters per line.

Missing blankline:

```
    def __init__(self, crossing_number, is_knot, is_alternating, name_unoriented=None):
        r"""
        Python constructor.

        EXAMPLES::
            sage: from sage.knots.knotinfo import KnotInfoSeries
            sage: L6a = KnotInfoSeries(6, False, True); L6a
            Series of links L6a
            sage: TestSuite(L6a).run()
        """
```

You don't need to apologize `:P`:

```
NotImplementedError: Sorry, this link cannot be uniquely determined
```
Also, error messages should start with a lowercase.

Do you need this import?

```diff
             sage: from sage.databases.knotinfo_db import KnotInfoDataBase
-            sage: from sage.env import SAGE_SHARE
             sage: ki_db = KnotInfoDataBase()
             sage: ki_db.filename.links
             <KnotInfoFilename.links: ['https://linkinfo.sitehost.iu.edu/', 'linkinfo_data_complete']>
```
I don't see where it is used in the doctest.

The bullet points are overindented:

```
Briefly, these differences are:

   - ``pd_notation`` --        KnotInfo: counter clockwise Sage: clockwise, see note in
     :meth:`KnotInfoBase.link`

   - ``homfly_polynomial`` --  KnotInfo: ``v``  Sage: `1/a`, see note in :meth:`KnotInfoBase.homfly_polynomial`.

   - ``braid_notation``    --  This is used accordingly: The crossing of the braid generators are positive
     in both systems. Here it is listed because there could arise confusion from the source where they are
     taken from. There, the braid generators are assumed to have a negative crossing
     (see definition 3  of `Gittings, T., "Minimum Braids: A Complete Invariant of Knots and Links <https://arxiv.org/abs/math/0401051>`__).
```

A trivial thing: `Examples::` -> EXAMPLES::`



---

archive/issue_comments_481869.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@tscrim](#comment%3A11):\n\nThank you for having a look at this, Travis! Also, many thanks for the organization of that great Sage Days!\n\n> I feel like there should be something added to the `features/databases.py` file to test that the package is installed rather than within the class itself. I think this is how we generally want to do things (but perhaps I am not the best person to ask about this).\n\nIndeed, it seems so! I didn't notice that because only two of the databases did that and everything worked fine, so far. Surely, it would be no mistake to do it. So I will include that in the next commit.\n\n> I am not entirely convinced by name of the method `identify_knotinfo`. I am thinking `knotinfo` is easier to discover, but I am also not sure this is a good name too.\n\nWhat about `to_knotinfo`?\n\n> You should add a doctest showing an example that is not covered by the database to show that works (not just when it cannot be uniquely determined).\n\nI will add one in the next commit and fix the other minor issues, as well.",
    "created_at": "2020-11-03T08:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481869",
    "user": "https://github.com/soehms"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@tscrim](#comment%3A11):

Thank you for having a look at this, Travis! Also, many thanks for the organization of that great Sage Days!

> I feel like there should be something added to the `features/databases.py` file to test that the package is installed rather than within the class itself. I think this is how we generally want to do things (but perhaps I am not the best person to ask about this).

Indeed, it seems so! I didn't notice that because only two of the databases did that and everything worked fine, so far. Surely, it would be no mistake to do it. So I will include that in the next commit.

> I am not entirely convinced by name of the method `identify_knotinfo`. I am thinking `knotinfo` is easier to discover, but I am also not sure this is a good name too.

What about `to_knotinfo`?

> You should add a doctest showing an example that is not covered by the database to show that works (not just when it cannot be uniquely determined).

I will add one in the next commit and fix the other minor issues, as well.



---

archive/issue_comments_481870.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@soehms](#comment%3A12):\n> Replying to [@tscrim](#comment%3A11):\n> \n> Thank you for having a look at this, Travis! Also, many thanks for the organization of that great Sage Days!\n\nThank you.\n\n> > I am not entirely convinced by name of the method `identify_knotinfo`. I am thinking `knotinfo` is easier to discover, but I am also not sure this is a good name too.\n\n> \n> What about `to_knotinfo`?\n\nBetter, but it is not really returning a `knotinfo()` object. I would be okay with `get_knotinfo()`.",
    "created_at": "2020-11-04T08:58:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481870",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@soehms](#comment%3A12):
> Replying to [@tscrim](#comment%3A11):
> 
> Thank you for having a look at this, Travis! Also, many thanks for the organization of that great Sage Days!

Thank you.

> > I am not entirely convinced by name of the method `identify_knotinfo`. I am thinking `knotinfo` is easier to discover, but I am also not sure this is a good name too.

> 
> What about `to_knotinfo`?

Better, but it is not really returning a `knotinfo()` object. I would be okay with `get_knotinfo()`.



---

archive/issue_comments_481871.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acddc12a6ebba7e333ca2f52d3e372269c9ad595\"><code>acddc12</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5c0b1a452627ddde9a6d0ebe3ba69a250b5230d\"><code>b5c0b1a</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/654a20f4dbdaa9bdb7ac10bf7ac1e054ac2ae685\"><code>654a20f</code></a></td><td><code>30352: corrections according to review</code></td></tr></table>\n",
    "created_at": "2020-11-07T21:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481871",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acddc12a6ebba7e333ca2f52d3e372269c9ad595"><code>acddc12</code></a></td><td><code>Merge branch 'develop' of git://github.com/sagemath/sage into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5c0b1a452627ddde9a6d0ebe3ba69a250b5230d"><code>b5c0b1a</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/654a20f4dbdaa9bdb7ac10bf7ac1e054ac2ae685"><code>654a20f</code></a></td><td><code>30352: corrections according to review</code></td></tr></table>




---

archive/issue_comments_481872.json:
```json
{
    "body": "Changed commit from **[`092cd4c`](https://github.com/sagemath/sagetrac-mirror/commit/092cd4c74776a3e1027229788b7ed0f4821bd008)** to **[`654a20f`](https://github.com/sagemath/sagetrac-mirror/commit/654a20f4dbdaa9bdb7ac10bf7ac1e054ac2ae685)**",
    "created_at": "2020-11-07T21:01:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481872",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`092cd4c`](https://github.com/sagemath/sagetrac-mirror/commit/092cd4c74776a3e1027229788b7ed0f4821bd008)** to **[`654a20f`](https://github.com/sagemath/sagetrac-mirror/commit/654a20f4dbdaa9bdb7ac10bf7ac1e054ac2ae685)**



---

archive/issue_comments_481873.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@tscrim](#comment%3A13):\n> Replying to [@soehms](#comment%3A12):\n> > What about `to_knotinfo`?\n\n> \n> Better, but it is not really returning a `knotinfo()` object. I would be okay with `get_knotinfo()`.\n\nIt's okay for me, as well. The same concerning all your other suggestions, as you can see from the recent commit.\n\nNote, that the *SnapPy*  doctests don't work any more since #24483 introduced an incompatibility in 9.3.beta0 (`create_ComplexNumber` did move to another module harming the import of `snappy`).",
    "created_at": "2020-11-07T21:14:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481873",
    "user": "https://github.com/soehms"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@tscrim](#comment%3A13):
> Replying to [@soehms](#comment%3A12):
> > What about `to_knotinfo`?

> 
> Better, but it is not really returning a `knotinfo()` object. I would be okay with `get_knotinfo()`.

It's okay for me, as well. The same concerning all your other suggestions, as you can see from the recent commit.

Note, that the *SnapPy*  doctests don't work any more since #24483 introduced an incompatibility in 9.3.beta0 (`create_ComplexNumber` did move to another module harming the import of `snappy`).



---

archive/issue_comments_481874.json:
```json
{
    "body": "Changed commit from **[`654a20f`](https://github.com/sagemath/sagetrac-mirror/commit/654a20f4dbdaa9bdb7ac10bf7ac1e054ac2ae685)** to **[`255a768`](https://github.com/sagemath/sagetrac-mirror/commit/255a768c8b881d9827d3b9db2c01775840842ff0)**",
    "created_at": "2020-11-07T21:18:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481874",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`654a20f`](https://github.com/sagemath/sagetrac-mirror/commit/654a20f4dbdaa9bdb7ac10bf7ac1e054ac2ae685)** to **[`255a768`](https://github.com/sagemath/sagetrac-mirror/commit/255a768c8b881d9827d3b9db2c01775840842ff0)**



---

archive/issue_comments_481875.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/255a768c8b881d9827d3b9db2c01775840842ff0\"><code>255a768</code></a></td><td><code>30352: once again</code></td></tr></table>\n",
    "created_at": "2020-11-07T21:18:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481875",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/255a768c8b881d9827d3b9db2c01775840842ff0"><code>255a768</code></a></td><td><code>30352: once again</code></td></tr></table>




---

archive/issue_comments_481876.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nplease rebase your branch, it's red (ie does not merge/show)",
    "created_at": "2020-11-09T13:26:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481876",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

please rebase your branch, it's red (ie does not merge/show)



---

archive/issue_comments_481877.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72bd3532c3d94c4c5f0ed16d38fc9f7756dd763f\"><code>72bd353</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7173489d9f621191dc80c22197be4d9eaf1ee1cd\"><code>7173489</code></a></td><td><code>30352: rebase to 9.3.beta1</code></td></tr></table>\n",
    "created_at": "2020-11-09T15:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481877",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72bd3532c3d94c4c5f0ed16d38fc9f7756dd763f"><code>72bd353</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7173489d9f621191dc80c22197be4d9eaf1ee1cd"><code>7173489</code></a></td><td><code>30352: rebase to 9.3.beta1</code></td></tr></table>




---

archive/issue_comments_481878.json:
```json
{
    "body": "Changed commit from **[`255a768`](https://github.com/sagemath/sagetrac-mirror/commit/255a768c8b881d9827d3b9db2c01775840842ff0)** to **[`7173489`](https://github.com/sagemath/sagetrac-mirror/commit/7173489d9f621191dc80c22197be4d9eaf1ee1cd)**",
    "created_at": "2020-11-09T15:52:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481878",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`255a768`](https://github.com/sagemath/sagetrac-mirror/commit/255a768c8b881d9827d3b9db2c01775840842ff0)** to **[`7173489`](https://github.com/sagemath/sagetrac-mirror/commit/7173489d9f621191dc80c22197be4d9eaf1ee1cd)**



---

archive/issue_comments_481879.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@dimpase](#comment%3A17):\n> please rebase your branch, it's red (ie does not merge/show)\n\nThanks for the hint. On the one hand, I could merge the branch into 9.3.beta1 without any conflicts. On the other hand I got a difference in  `build/pkgs/sage_sws2rst/src/test/Adding_Pictures_and_screenshots.sws` where I have absolutely no idea how this came up:\n\n```diff\n.../src/test/Adding_Pictures_and_screenshots.sws   |  Bin 281797 -> 281795 bytes\n```\n\nI replaced this by the develop branch version (hoping that fixes the issue).",
    "created_at": "2020-11-09T15:56:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481879",
    "user": "https://github.com/soehms"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@dimpase](#comment%3A17):
> please rebase your branch, it's red (ie does not merge/show)

Thanks for the hint. On the one hand, I could merge the branch into 9.3.beta1 without any conflicts. On the other hand I got a difference in  `build/pkgs/sage_sws2rst/src/test/Adding_Pictures_and_screenshots.sws` where I have absolutely no idea how this came up:

```diff
.../src/test/Adding_Pictures_and_screenshots.sws   |  Bin 281797 -> 281795 bytes
```

I replaced this by the develop branch version (hoping that fixes the issue).



---

archive/issue_comments_481880.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@soehms](#comment%3A19):\n> Replying to [@dimpase](#comment%3A17):\n> > please rebase your branch, it's red (ie does not merge/show)\n\n> Thanks for the hint. On the one hand, I could merge the branch into 9.3.beta1 without any conflicts. On the other hand I got a difference in  `build/pkgs/sage_sws2rst/src/test/Adding_Pictures_and_screenshots.sws` where I have absolutely no idea how this came up:\n> \n> ```diff\n> .../src/test/Adding_Pictures_and_screenshots.sws   |  Bin 281797 -> 281795 bytes\n> ```\n\nthis is from #28838 - which you somehow changed, judging by the file size.\n\n> \n> I replaced this by the develop branch version (hoping that fixes the issue).\n> \n\nPerhaps Matthias can have a look at this, qua the package structure.",
    "created_at": "2020-11-09T20:02:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481880",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@soehms](#comment%3A19):
> Replying to [@dimpase](#comment%3A17):
> > please rebase your branch, it's red (ie does not merge/show)

> Thanks for the hint. On the one hand, I could merge the branch into 9.3.beta1 without any conflicts. On the other hand I got a difference in  `build/pkgs/sage_sws2rst/src/test/Adding_Pictures_and_screenshots.sws` where I have absolutely no idea how this came up:
> 
> ```diff
> .../src/test/Adding_Pictures_and_screenshots.sws   |  Bin 281797 -> 281795 bytes
> ```

this is from #28838 - which you somehow changed, judging by the file size.

> 
> I replaced this by the develop branch version (hoping that fixes the issue).
> 

Perhaps Matthias can have a look at this, qua the package structure.



---

archive/issue_comments_481881.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIt doesn't seem to be in the current diff according to trac.",
    "created_at": "2020-11-09T22:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481881",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

It doesn't seem to be in the current diff according to trac.



---

archive/issue_comments_481882.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nA couple of suggestions:\n\nSince Knotinfo uses yet another normalization for the HOMFLY polynomial, maybe we could add it to the options for Sage knots and links (maybe 'vz' could be a good name). It could simplify the code in the identification process.\n\nAlso, in the same identification, we don't really need to check for braid equality, braid conjugacy would be enough. Thanks to libbraiding we have a very fast `is conjugated` method.",
    "created_at": "2020-11-10T12:53:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481882",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:22" align="right">comment:22</div>

A couple of suggestions:

Since Knotinfo uses yet another normalization for the HOMFLY polynomial, maybe we could add it to the options for Sage knots and links (maybe 'vz' could be a good name). It could simplify the code in the identification process.

Also, in the same identification, we don't really need to check for braid equality, braid conjugacy would be enough. Thanks to libbraiding we have a very fast `is conjugated` method.



---

archive/issue_comments_481883.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@miguelmarco](#comment%3A22):\n\nThanks a lot for your suggestions, Miguel!\n\n> A couple of suggestions:\n> \n> Since Knotinfo uses yet another normalization for the HOMFLY polynomial, maybe we could add it to the options for Sage knots and links (maybe 'vz' could be a good name). It could simplify the code in the identification process.\n\nMy approach is to keep the sage conventions fixed and do all necessary adaptions in the KnotInfo wrapper. There, I add to some of the conversion methods a keyword argument `sage_convention` which can be used to have the adaption performed.\n\nSo, are you suggesting to have `vz` instead of that, or in addition? If you mean *in addition*, I don't see an essential simplification. If not, I think it could be confusing if for one method (`homfly_polynomial`) the adaption is realized in class `Link` whereas for others (`jones_polynomial`, `alexander_polynomial`)  it would remain in `KnotInfo`. Therefore, if we want to move the adaption to class `Link`, I would prefer to do it in all cases.\n\n> \n> Also, in the same identification, we don't really need to check for braid equality, braid conjugacy would be enough. Thanks to libbraiding we have a very fast `is conjugated` method.\n\nGreat! I missed that because I've tried `is_conjugate` (omitting the final `d`) which didn't terminate or results in an error from the Gap wrapper. That made me capitulate! Of course I will include that in the next commit.\n\n\nBTW: As you predicted I encountered some other instances of the trivial diagram issue (#30346). In two cases you get errors (`is_alternating`, `khovanov_homology`) and in one case a wrong result (`jones_polynomial`). Furthermore, in `is_alternating` shouldn't we change this:\n\n```\n        if not self.is_knot():\n            return False\n```\n\ninto a `NotImplementedError`?\n\nShall I create a ticket for each case, or one for all? This is now #31001!",
    "created_at": "2020-11-13T16:56:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481883",
    "user": "https://github.com/soehms"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@miguelmarco](#comment%3A22):

Thanks a lot for your suggestions, Miguel!

> A couple of suggestions:
> 
> Since Knotinfo uses yet another normalization for the HOMFLY polynomial, maybe we could add it to the options for Sage knots and links (maybe 'vz' could be a good name). It could simplify the code in the identification process.

My approach is to keep the sage conventions fixed and do all necessary adaptions in the KnotInfo wrapper. There, I add to some of the conversion methods a keyword argument `sage_convention` which can be used to have the adaption performed.

So, are you suggesting to have `vz` instead of that, or in addition? If you mean *in addition*, I don't see an essential simplification. If not, I think it could be confusing if for one method (`homfly_polynomial`) the adaption is realized in class `Link` whereas for others (`jones_polynomial`, `alexander_polynomial`)  it would remain in `KnotInfo`. Therefore, if we want to move the adaption to class `Link`, I would prefer to do it in all cases.

> 
> Also, in the same identification, we don't really need to check for braid equality, braid conjugacy would be enough. Thanks to libbraiding we have a very fast `is conjugated` method.

Great! I missed that because I've tried `is_conjugate` (omitting the final `d`) which didn't terminate or results in an error from the Gap wrapper. That made me capitulate! Of course I will include that in the next commit.


BTW: As you predicted I encountered some other instances of the trivial diagram issue (#30346). In two cases you get errors (`is_alternating`, `khovanov_homology`) and in one case a wrong result (`jones_polynomial`). Furthermore, in `is_alternating` shouldn't we change this:

```
        if not self.is_knot():
            return False
```

into a `NotImplementedError`?

Shall I create a ticket for each case, or one for all? This is now #31001!



---

archive/issue_comments_481884.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\n> So, are you suggesting to have `vz` instead of that, or in addition? If you mean *in addition*, I don't see an essential simplification. If not, I think it could be confusing if for one method (`homfly_polynomial`) the adaption is realized in class `Link` whereas for others (`jones_polynomial`, `alexander_polynomial`)  it would remain in `KnotInfo`. Therefore, if we want to move the adaption to class `Link`, I would prefer to do it in all cases.\n> \n\nIf this 'vz' normalization is used out there (and it is, as KnotInfo/LinkInfo uses it), it makes sense for Sage to acknowledge it, and provide the option of giving the HOMFLY polynomial in that notation. Users that are used to it might find it useful. And as a side effect, the code you are writing could be simpler.\n\nThe case of Alexander Polynomial might be different, since the ambiguity between different possible results comes from an ambiguous definition; instead of coming from different choice of notations.",
    "created_at": "2020-11-17T14:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481884",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:24" align="right">comment:24</div>

> So, are you suggesting to have `vz` instead of that, or in addition? If you mean *in addition*, I don't see an essential simplification. If not, I think it could be confusing if for one method (`homfly_polynomial`) the adaption is realized in class `Link` whereas for others (`jones_polynomial`, `alexander_polynomial`)  it would remain in `KnotInfo`. Therefore, if we want to move the adaption to class `Link`, I would prefer to do it in all cases.
> 

If this 'vz' normalization is used out there (and it is, as KnotInfo/LinkInfo uses it), it makes sense for Sage to acknowledge it, and provide the option of giving the HOMFLY polynomial in that notation. Users that are used to it might find it useful. And as a side effect, the code you are writing could be simpler.

The case of Alexander Polynomial might be different, since the ambiguity between different possible results comes from an ambiguous definition; instead of coming from different choice of notations.



---

archive/issue_comments_481885.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@miguelmarco](#comment%3A24):\n\n> Users that are used to it might find it useful.\n\nNow I know what you mean! I'll do that on a separate commit in order not to do too much at once. Currently, the defaults for `var1` and `var2` do not depend on the chosen `normalization` (they are `L` and `M` regardless whether `normalization=lm` or not). If you agree, I will take the occasion to have this more comfortable: More precisely, I would set the keyword defaults to `None` and change `None` according to the `normalization`.\n\n> The case of Alexander Polynomial might be different, since the ambiguity between different possible results comes from an ambiguous definition; instead of coming from different choice of notations.\n\nThe ambiguity of definition could be dealt with a synchronization of normalization (which I realized up to sign). But you are right: in both other cases (Jones and Alexander polynomials) KnotInfo uses the same definition as we do. The differences come from the fact that KnotInfo avoids polynomials with negative or fractional exponents. I will leave the corresponding methods as they are, but maybe replace the keyword name `sage_convention` by something more specific.\n\nWhat about my question concerning `is_alternating`?",
    "created_at": "2020-11-18T13:11:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481885",
    "user": "https://github.com/soehms"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@miguelmarco](#comment%3A24):

> Users that are used to it might find it useful.

Now I know what you mean! I'll do that on a separate commit in order not to do too much at once. Currently, the defaults for `var1` and `var2` do not depend on the chosen `normalization` (they are `L` and `M` regardless whether `normalization=lm` or not). If you agree, I will take the occasion to have this more comfortable: More precisely, I would set the keyword defaults to `None` and change `None` according to the `normalization`.

> The case of Alexander Polynomial might be different, since the ambiguity between different possible results comes from an ambiguous definition; instead of coming from different choice of notations.

The ambiguity of definition could be dealt with a synchronization of normalization (which I realized up to sign). But you are right: in both other cases (Jones and Alexander polynomials) KnotInfo uses the same definition as we do. The differences come from the fact that KnotInfo avoids polynomials with negative or fractional exponents. I will leave the corresponding methods as they are, but maybe replace the keyword name `sage_convention` by something more specific.

What about my question concerning `is_alternating`?



---

archive/issue_comments_481886.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a174d2a86e42fe957a55d4141de1b31fbcab5f8\"><code>3a174d2</code></a></td><td><code>30352: use braid.is_conjugated and restructure get_knotinfo</code></td></tr></table>\n",
    "created_at": "2020-11-18T13:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481886",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a174d2a86e42fe957a55d4141de1b31fbcab5f8"><code>3a174d2</code></a></td><td><code>30352: use braid.is_conjugated and restructure get_knotinfo</code></td></tr></table>




---

archive/issue_comments_481887.json:
```json
{
    "body": "Changed commit from **[`7173489`](https://github.com/sagemath/sagetrac-mirror/commit/7173489d9f621191dc80c22197be4d9eaf1ee1cd)** to **[`3a174d2`](https://github.com/sagemath/sagetrac-mirror/commit/3a174d2a86e42fe957a55d4141de1b31fbcab5f8)**",
    "created_at": "2020-11-18T13:15:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481887",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7173489`](https://github.com/sagemath/sagetrac-mirror/commit/7173489d9f621191dc80c22197be4d9eaf1ee1cd)** to **[`3a174d2`](https://github.com/sagemath/sagetrac-mirror/commit/3a174d2a86e42fe957a55d4141de1b31fbcab5f8)**



---

archive/issue_comments_481888.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI do the following:\n\n1. I use the braid method `is_conjugated` in `get_knotinfo` and `is_isotopic` according to Miguel's suggestion. To deal with the case where the braid's parents are different I implemented a helper method `_markov_move_cmp` for class `Link`. Here the embedding into a common parent via Markov moves II is realized.\n\n2. I restructure  `get_knotinfo` since I found some algorithmic leaks leading to irritating results. For example amphicheiral knots were detected as mirror image of their KnotInfo equivalent. Another source of confusion has been the fact that `KnotInfo.L5a1_1.link()` has been identified as `KnotInfo.L5a1_0`. The reason is that both are isotopic (see the note I add to `get_knotinfo`). I prefer to raise an error in such a case and let the user apply the keyword `unique=False` to obtain both of them.\n\n- Details of the restructuring: I remove the function `knotinfo_matching_list`. One part of its contents is now in a new method  `lower_list` of class `KnotInfoSeries` and the other part in a new method `_knotinfo_matching_list` of class `Link`. The latter method contains parts of the former `get_knotinfo` in addition.\n\n3. I do some renaming and introduction of keywords in order to unify their usage, especially in the context of distinguishing between oriented and unoriented proper links.\n\n4. I add `__gt__` to class `KnotInfoBase` in order to have `sorted` work for lists of KnotInfo items.",
    "created_at": "2020-11-18T13:23:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481888",
    "user": "https://github.com/soehms"
}
```

<div id="comment:27" align="right">comment:27</div>

I do the following:

1. I use the braid method `is_conjugated` in `get_knotinfo` and `is_isotopic` according to Miguel's suggestion. To deal with the case where the braid's parents are different I implemented a helper method `_markov_move_cmp` for class `Link`. Here the embedding into a common parent via Markov moves II is realized.

2. I restructure  `get_knotinfo` since I found some algorithmic leaks leading to irritating results. For example amphicheiral knots were detected as mirror image of their KnotInfo equivalent. Another source of confusion has been the fact that `KnotInfo.L5a1_1.link()` has been identified as `KnotInfo.L5a1_0`. The reason is that both are isotopic (see the note I add to `get_knotinfo`). I prefer to raise an error in such a case and let the user apply the keyword `unique=False` to obtain both of them.

- Details of the restructuring: I remove the function `knotinfo_matching_list`. One part of its contents is now in a new method  `lower_list` of class `KnotInfoSeries` and the other part in a new method `_knotinfo_matching_list` of class `Link`. The latter method contains parts of the former `get_knotinfo` in addition.

3. I do some renaming and introduction of keywords in order to unify their usage, especially in the context of distinguishing between oriented and unoriented proper links.

4. I add `__gt__` to class `KnotInfoBase` in order to have `sorted` work for lists of KnotInfo items.



---

archive/issue_events_415088.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-12-01T22:06:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415088"
}
```



---

archive/issue_events_415089.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-12-01T22:06:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415089"
}
```



---

archive/issue_comments_481889.json:
```json
{
    "body": "Changed commit from **[`3a174d2`](https://github.com/sagemath/sagetrac-mirror/commit/3a174d2a86e42fe957a55d4141de1b31fbcab5f8)** to **[`c6c57dc`](https://github.com/sagemath/sagetrac-mirror/commit/c6c57dc6633410faa63dffe85cf8c47b567191bf)**",
    "created_at": "2020-12-03T11:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481889",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a174d2`](https://github.com/sagemath/sagetrac-mirror/commit/3a174d2a86e42fe957a55d4141de1b31fbcab5f8)** to **[`c6c57dc`](https://github.com/sagemath/sagetrac-mirror/commit/c6c57dc6633410faa63dffe85cf8c47b567191bf)**



---

archive/issue_comments_481890.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29a3df3cb503d68cba3ce33e7c533359c53d190d\"><code>29a3df3</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c6c57dc6633410faa63dffe85cf8c47b567191bf\"><code>c6c57dc</code></a></td><td><code>30352: normalization vz, _test_recover</code></td></tr></table>\n",
    "created_at": "2020-12-03T11:09:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481890",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29a3df3cb503d68cba3ce33e7c533359c53d190d"><code>29a3df3</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c6c57dc6633410faa63dffe85cf8c47b567191bf"><code>c6c57dc</code></a></td><td><code>30352: normalization vz, _test_recover</code></td></tr></table>




---

archive/issue_events_415090.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-12-03T11:14:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415090"
}
```



---

archive/issue_events_415091.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-12-03T11:14:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415091"
}
```



---

archive/issue_comments_481891.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThe commit above contains the following changes:\n\n1. The changes announced in [comment 25](https://github.com/sagemath/sage/issues/30352#comment:25) concerning Miguels suggestions.\n2. new methods `_test_recover` for the classes `KnotInfoBase` and `KnotInfoSeries` in order to have `TestSuite` check if the items of the KnotInfo databases can be recovered correctly (up to ambiguities) from the different conversions to Sage.\n3. Further changes regarding the method `get_knotinfo` and its auxillaries in order to improve its perfomance and remove bugs I detected using `_test_recover`.\n4. In connection with the former item I add a couple of `cached_method` decorators.\n5. Some further adaptions to database issues (trailing whitespaces in `symmetry_type` and the value of `determinant` for unknot).\n\nRunning `_test_recover` over the complete database (more than 28000 checks in sum) now takes about one and a half hour (on an i5). When I started to test this it didn't terminate after one night. At the moment there are still some failures (13 pairs of orientation mutants of proper links) all due to the current implementation of `mirror_image`. I opened ticket #30997 to have this fixed.\n\nBTW: By what reason is `determinant` not implemented for proper links?",
    "created_at": "2020-12-03T11:14:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481891",
    "user": "https://github.com/soehms"
}
```

<div id="comment:30" align="right">comment:30</div>

The commit above contains the following changes:

1. The changes announced in [comment 25](https://github.com/sagemath/sage/issues/30352#comment:25) concerning Miguels suggestions.
2. new methods `_test_recover` for the classes `KnotInfoBase` and `KnotInfoSeries` in order to have `TestSuite` check if the items of the KnotInfo databases can be recovered correctly (up to ambiguities) from the different conversions to Sage.
3. Further changes regarding the method `get_knotinfo` and its auxillaries in order to improve its perfomance and remove bugs I detected using `_test_recover`.
4. In connection with the former item I add a couple of `cached_method` decorators.
5. Some further adaptions to database issues (trailing whitespaces in `symmetry_type` and the value of `determinant` for unknot).

Running `_test_recover` over the complete database (more than 28000 checks in sum) now takes about one and a half hour (on an i5). When I started to test this it didn't terminate after one night. At the moment there are still some failures (13 pairs of orientation mutants of proper links) all due to the current implementation of `mirror_image`. I opened ticket #30997 to have this fixed.

BTW: By what reason is `determinant` not implemented for proper links?



---

archive/issue_comments_481892.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/febf374654b8760600e47cf852aed5551bb14281\"><code>febf374</code></a></td><td><code>39352: some pyflake fixes which got lost</code></td></tr></table>\n",
    "created_at": "2020-12-04T08:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481892",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/febf374654b8760600e47cf852aed5551bb14281"><code>febf374</code></a></td><td><code>39352: some pyflake fixes which got lost</code></td></tr></table>




---

archive/issue_comments_481893.json:
```json
{
    "body": "Changed commit from **[`c6c57dc`](https://github.com/sagemath/sagetrac-mirror/commit/c6c57dc6633410faa63dffe85cf8c47b567191bf)** to **[`febf374`](https://github.com/sagemath/sagetrac-mirror/commit/febf374654b8760600e47cf852aed5551bb14281)**",
    "created_at": "2020-12-04T08:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481893",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c6c57dc`](https://github.com/sagemath/sagetrac-mirror/commit/c6c57dc6633410faa63dffe85cf8c47b567191bf)** to **[`febf374`](https://github.com/sagemath/sagetrac-mirror/commit/febf374654b8760600e47cf852aed5551bb14281)**



---

archive/issue_comments_481894.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@soehms](#comment%3A30):\n> Running `_test_recover` over the complete database (more than 28000 checks in sum) now takes about one and a half hour (on an i5). When I started to test this it didn't terminate after one night. At the moment there are still some failures (13 pairs of orientation mutants of proper links) all due to the current implementation of `mirror_image`. I opened ticket #30997 to have this fixed.\n\nEven if it takes 1.5 hours, that is still far too long as a default. You should use the `tester._max_runs` of the tester to limit the number that gets run as a default. This at least makes it much more controllable for the doctests to limit it to a few seconds (which it then is marked as `# long time`) with perhaps a < .5s run for the non-long tests.\n\nAlso, you will probably need to mark a lot of doctests as `# optional - database_knotinfo`.",
    "created_at": "2020-12-04T08:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481894",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@soehms](#comment%3A30):
> Running `_test_recover` over the complete database (more than 28000 checks in sum) now takes about one and a half hour (on an i5). When I started to test this it didn't terminate after one night. At the moment there are still some failures (13 pairs of orientation mutants of proper links) all due to the current implementation of `mirror_image`. I opened ticket #30997 to have this fixed.

Even if it takes 1.5 hours, that is still far too long as a default. You should use the `tester._max_runs` of the tester to limit the number that gets run as a default. This at least makes it much more controllable for the doctests to limit it to a few seconds (which it then is marked as `# long time`) with perhaps a < .5s run for the non-long tests.

Also, you will probably need to mark a lot of doctests as `# optional - database_knotinfo`.



---

archive/issue_comments_481895.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@tscrim](#comment%3A32):\n> Replying to [@soehms](#comment%3A30):\n\n> Even if it takes 1.5 hours, that is still far too long as a default. You should use the `tester._max_runs` of the tester to limit the number that gets run as a default. This at least makes it much more controllable for the doctests to limit it to a few seconds (which it then is marked as `# long time`) with perhaps a < .5s run for the non-long tests.\n> \n\nI didn't include the test of the complete database in the code. Only one over all proper alternating links with 5 crossings:\n\n```\nsage: %time TestSuite(KnotInfo.L5a1_0.series()).run()\nCPU times: user 680 ms, sys: 52 ms, total: 732 ms\nWall time: 718 ms\n```\n\nI will mark this as long.\nThanks for your hint to `tester._max_runs`. I will checkout how I can apply it.\n\n> Also, you will probably need to mark a lot of doctests as `# optional - database_knotinfo`.\n\nNo! All not maked tests run without the optional package by help of a small list of demonstration cases kept in static dictionaries.",
    "created_at": "2020-12-04T09:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481895",
    "user": "https://github.com/soehms"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@tscrim](#comment%3A32):
> Replying to [@soehms](#comment%3A30):

> Even if it takes 1.5 hours, that is still far too long as a default. You should use the `tester._max_runs` of the tester to limit the number that gets run as a default. This at least makes it much more controllable for the doctests to limit it to a few seconds (which it then is marked as `# long time`) with perhaps a < .5s run for the non-long tests.
> 

I didn't include the test of the complete database in the code. Only one over all proper alternating links with 5 crossings:

```
sage: %time TestSuite(KnotInfo.L5a1_0.series()).run()
CPU times: user 680 ms, sys: 52 ms, total: 732 ms
Wall time: 718 ms
```

I will mark this as long.
Thanks for your hint to `tester._max_runs`. I will checkout how I can apply it.

> Also, you will probably need to mark a lot of doctests as `# optional - database_knotinfo`.

No! All not maked tests run without the optional package by help of a small list of demonstration cases kept in static dictionaries.



---

archive/issue_comments_481896.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@soehms](#comment%3A33):\n> Replying to [@tscrim](#comment%3A32):\n> > Replying to [@soehms](#comment%3A30):\n\n> \n> > Even if it takes 1.5 hours, that is still far too long as a default. You should use the `tester._max_runs` of the tester to limit the number that gets run as a default. This at least makes it much more controllable for the doctests to limit it to a few seconds (which it then is marked as `# long time`) with perhaps a < .5s run for the non-long tests.\n> > \n\n> \n> I didn't include the test of the complete database in the code. Only one over all proper alternating links with 5 crossings:\n> \n> ```\n> sage: %time TestSuite(KnotInfo.L5a1_0.series()).run()\n> CPU times: user 680 ms, sys: 52 ms, total: 732 ms\n> Wall time: 718 ms\n> ```\n> \n> I will mark this as long.\n\nThat is fine; it doesn't need to be marked as long.\n\n> Thanks for your hint to `tester._max_runs`. I will checkout how I can apply it.\n\nIt is very easy to add a `TestSuite(KnotInfo).run()` test, which then will accidentally take a long time. Granted, it is on subsequent authors to avoid doing this, but a user might also do this, so this is now mostly a me being complete paranoid request.\n\n> > Also, you will probably need to mark a lot of doctests as `# optional - database_knotinfo`.\n\n> \n> No! All not maked tests run without the optional package by help of a small list of demonstration cases kept in static dictionaries.\n\nI see. I am not sure how I feel about that as I feel like it could hide stuff accidentally. I am inclined to keep it, but perhaps someone else can comment on this.",
    "created_at": "2020-12-09T07:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481896",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@soehms](#comment%3A33):
> Replying to [@tscrim](#comment%3A32):
> > Replying to [@soehms](#comment%3A30):

> 
> > Even if it takes 1.5 hours, that is still far too long as a default. You should use the `tester._max_runs` of the tester to limit the number that gets run as a default. This at least makes it much more controllable for the doctests to limit it to a few seconds (which it then is marked as `# long time`) with perhaps a < .5s run for the non-long tests.
> > 

> 
> I didn't include the test of the complete database in the code. Only one over all proper alternating links with 5 crossings:
> 
> ```
> sage: %time TestSuite(KnotInfo.L5a1_0.series()).run()
> CPU times: user 680 ms, sys: 52 ms, total: 732 ms
> Wall time: 718 ms
> ```
> 
> I will mark this as long.

That is fine; it doesn't need to be marked as long.

> Thanks for your hint to `tester._max_runs`. I will checkout how I can apply it.

It is very easy to add a `TestSuite(KnotInfo).run()` test, which then will accidentally take a long time. Granted, it is on subsequent authors to avoid doing this, but a user might also do this, so this is now mostly a me being complete paranoid request.

> > Also, you will probably need to mark a lot of doctests as `# optional - database_knotinfo`.

> 
> No! All not maked tests run without the optional package by help of a small list of demonstration cases kept in static dictionaries.

I see. I am not sure how I feel about that as I feel like it could hide stuff accidentally. I am inclined to keep it, but perhaps someone else can comment on this.



---

archive/issue_comments_481897.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@tscrim](#comment%3A34):\n> It is very easy to add a `TestSuite(KnotInfo).run()` test, which then will accidentally take a long time. Granted, it is on subsequent authors to avoid doing this, but a user might also do this, so this is now mostly a me being complete paranoid request.\n\nThis danger does not exist in this special case:\n\n```\nsage: TestSuite(KnotInfo).run(verbose=True)\nrunning ._test_new() . . . pass\nrunning ._test_pickling() . . . pass\n```\n\nThis is because `KnotInfo` isn't inherited from `SageObject` which is not possible for `Enum`. Just the `TestSuite` for `KnotInfoSeries` use this method (indirectly). Obviously this `TestSuite` construction causes some confusion. I will try to improve this according to your hints!\n\nBTW: The test that run 1.5 h was this (no way to do that accidentally, but sorry that I didn't make this clear enought):\n\n```\nsage: from sage.misc.sage_unittest import instance_tester\n....: from sage.knots.knotinfo import KnotInfo\n....: tester = instance_tester(KnotInfo)\n....: def test_all():\n....:     for L in KnotInfo:\n....:         try:\n....:             L._test_recover(tester=tester)\n....:         except AssertionError:\n....:             print(L)\n....:\nsage: %time test_all()\nCPU times: user 1h 30min 45s, sys: 2.08 s, total: 1h 30min 47s\nWall time: 1h 30min 47s\n```\n\n\n\n\n> I feel like it could hide stuff accidentally.\n\nWhat stuff do you mean? Future changes in the real database for the first twenty links? I think changes in the values of the properties used can be ruled out and adding new properties wouldn't hurt.\n\nThe great advantage of these demo examples is that the basic functionality of this interface is permanently tested. So if someone introduces something into another library code that is incompatible, he becomes aware of it.",
    "created_at": "2020-12-10T15:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481897",
    "user": "https://github.com/soehms"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@tscrim](#comment%3A34):
> It is very easy to add a `TestSuite(KnotInfo).run()` test, which then will accidentally take a long time. Granted, it is on subsequent authors to avoid doing this, but a user might also do this, so this is now mostly a me being complete paranoid request.

This danger does not exist in this special case:

```
sage: TestSuite(KnotInfo).run(verbose=True)
running ._test_new() . . . pass
running ._test_pickling() . . . pass
```

This is because `KnotInfo` isn't inherited from `SageObject` which is not possible for `Enum`. Just the `TestSuite` for `KnotInfoSeries` use this method (indirectly). Obviously this `TestSuite` construction causes some confusion. I will try to improve this according to your hints!

BTW: The test that run 1.5 h was this (no way to do that accidentally, but sorry that I didn't make this clear enought):

```
sage: from sage.misc.sage_unittest import instance_tester
....: from sage.knots.knotinfo import KnotInfo
....: tester = instance_tester(KnotInfo)
....: def test_all():
....:     for L in KnotInfo:
....:         try:
....:             L._test_recover(tester=tester)
....:         except AssertionError:
....:             print(L)
....:
sage: %time test_all()
CPU times: user 1h 30min 45s, sys: 2.08 s, total: 1h 30min 47s
Wall time: 1h 30min 47s
```




> I feel like it could hide stuff accidentally.

What stuff do you mean? Future changes in the real database for the first twenty links? I think changes in the values of the properties used can be ruled out and adding new properties wouldn't hurt.

The great advantage of these demo examples is that the basic functionality of this interface is permanently tested. So if someone introduces something into another library code that is incompatible, he becomes aware of it.



---

archive/issue_events_415092.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-12-10T15:51:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415092"
}
```



---

archive/issue_events_415093.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-12-10T15:51:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415093"
}
```



---

archive/issue_comments_481898.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@soehms](#comment%3A35):\n> Replying to [@tscrim](#comment%3A34):\n> > It is very easy to add a `TestSuite(KnotInfo).run()` test, which then will accidentally take a long time. Granted, it is on subsequent authors to avoid doing this, but a user might also do this, so this is now mostly a me being complete paranoid request.\n\n> \n> This danger does not exist in this special case:\n> \n> ```\n> sage: TestSuite(KnotInfo).run(verbose=True)\n> running ._test_new() . . . pass\n> running ._test_pickling() . . . pass\n> ```\n> \n> This is because `KnotInfo` isn't inherited from `SageObject` which is not possible for `Enum`. Just the `TestSuite` for `KnotInfoSeries` use this method (indirectly). Obviously this `TestSuite` construction causes some confusion. I will try to improve this according to your hints!\n\nAh, I think I now understand as I was misunderstanding what `KnotInfoSeries` (which is what I meant before because of calling the `_test_recover`; sorry for this error too) was holding. I thought it was holding onto the entire database.\n\n> BTW: The test that run 1.5 h was this (no way to do that accidentally, but sorry that I didn't make this clear enought):\n> \n> ```\n> sage: from sage.misc.sage_unittest import instance_tester\n> ....: from sage.knots.knotinfo import KnotInfo\n> ....: tester = instance_tester(KnotInfo)\n> ....: def test_all():\n> ....:     for L in KnotInfo:\n> ....:         try:\n> ....:             L._test_recover(tester=tester)\n> ....:         except AssertionError:\n> ....:             print(L)\n> ....:\n> sage: %time test_all()\n> CPU times: user 1h 30min 45s, sys: 2.08 s, total: 1h 30min 47s\n> Wall time: 1h 30min 47s\n> ```\n> \n\nI would have expected the database itself to have a consistency check like this.\n\n> > I feel like it could hide stuff accidentally.\n\n> \n> What stuff do you mean? Future changes in the real database for the first twenty links? I think changes in the values of the properties used can be ruled out and adding new properties wouldn't hurt.\n\nThe link with the database somehow becomes broken, such as they change the name of a column. So the code breaks once you install the database. Granted, I think this is unlikely. Looking over the design a bit more, having a future developer should not naturally avoid the methods that differentiate between the two.\n\n> The great advantage of these demo examples is that the basic functionality of this interface is permanently tested. So if someone introduces something into another library code that is incompatible, he becomes aware of it.\n\nI agree that it is an advantage to have it tested. Although I do believe it should not be done locally within Sage's library but with a more robust testing framework. Yet, I believe that the benefits here clearly outweigh the costs.",
    "created_at": "2020-12-17T08:26:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481898",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@soehms](#comment%3A35):
> Replying to [@tscrim](#comment%3A34):
> > It is very easy to add a `TestSuite(KnotInfo).run()` test, which then will accidentally take a long time. Granted, it is on subsequent authors to avoid doing this, but a user might also do this, so this is now mostly a me being complete paranoid request.

> 
> This danger does not exist in this special case:
> 
> ```
> sage: TestSuite(KnotInfo).run(verbose=True)
> running ._test_new() . . . pass
> running ._test_pickling() . . . pass
> ```
> 
> This is because `KnotInfo` isn't inherited from `SageObject` which is not possible for `Enum`. Just the `TestSuite` for `KnotInfoSeries` use this method (indirectly). Obviously this `TestSuite` construction causes some confusion. I will try to improve this according to your hints!

Ah, I think I now understand as I was misunderstanding what `KnotInfoSeries` (which is what I meant before because of calling the `_test_recover`; sorry for this error too) was holding. I thought it was holding onto the entire database.

> BTW: The test that run 1.5 h was this (no way to do that accidentally, but sorry that I didn't make this clear enought):
> 
> ```
> sage: from sage.misc.sage_unittest import instance_tester
> ....: from sage.knots.knotinfo import KnotInfo
> ....: tester = instance_tester(KnotInfo)
> ....: def test_all():
> ....:     for L in KnotInfo:
> ....:         try:
> ....:             L._test_recover(tester=tester)
> ....:         except AssertionError:
> ....:             print(L)
> ....:
> sage: %time test_all()
> CPU times: user 1h 30min 45s, sys: 2.08 s, total: 1h 30min 47s
> Wall time: 1h 30min 47s
> ```
> 

I would have expected the database itself to have a consistency check like this.

> > I feel like it could hide stuff accidentally.

> 
> What stuff do you mean? Future changes in the real database for the first twenty links? I think changes in the values of the properties used can be ruled out and adding new properties wouldn't hurt.

The link with the database somehow becomes broken, such as they change the name of a column. So the code breaks once you install the database. Granted, I think this is unlikely. Looking over the design a bit more, having a future developer should not naturally avoid the methods that differentiate between the two.

> The great advantage of these demo examples is that the basic functionality of this interface is permanently tested. So if someone introduces something into another library code that is incompatible, he becomes aware of it.

I agree that it is an advantage to have it tested. Although I do believe it should not be done locally within Sage's library but with a more robust testing framework. Yet, I believe that the benefits here clearly outweigh the costs.



---

archive/issue_comments_481899.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1977368c4883fb32baea600796fd6e2f55e299c8\"><code>1977368</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e8ec73e5ec6634a136006da0b281b751dfebec15\"><code>e8ec73e</code></a></td><td><code>30352: changes according to review and feedback Chuck Livingston</code></td></tr></table>\n",
    "created_at": "2020-12-18T17:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481899",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1977368c4883fb32baea600796fd6e2f55e299c8"><code>1977368</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of git://trac.sagemath.org/sage into knotinfo_30352</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e8ec73e5ec6634a136006da0b281b751dfebec15"><code>e8ec73e</code></a></td><td><code>30352: changes according to review and feedback Chuck Livingston</code></td></tr></table>




---

archive/issue_comments_481900.json:
```json
{
    "body": "Changed commit from **[`febf374`](https://github.com/sagemath/sagetrac-mirror/commit/febf374654b8760600e47cf852aed5551bb14281)** to **[`e8ec73e`](https://github.com/sagemath/sagetrac-mirror/commit/e8ec73e5ec6634a136006da0b281b751dfebec15)**",
    "created_at": "2020-12-18T17:48:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481900",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`febf374`](https://github.com/sagemath/sagetrac-mirror/commit/febf374654b8760600e47cf852aed5551bb14281)** to **[`e8ec73e`](https://github.com/sagemath/sagetrac-mirror/commit/e8ec73e5ec6634a136006da0b281b751dfebec15)**



---

archive/issue_comments_481901.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI do the following changes:\n\n1. I make TestSuite functionality more clear: I rename the former methods `_test_recover` to user visible boolean methods `is_recoverable`. I add a new `_test_recover` to class `KnotInfoSeries` which just runs the test using `is_recoverable` and the `tester` -option `max_samples`.\n\n2. I add a new method `is_unique` to class `KnotInfoBase` which tests if a proper link is unique in the database under isotopy. This is needed in `get_knotinfo` and `is_isotopic` in order to give more reliable answers in unclear situations.\n3. I extend `is_amphicheiral` to proper links by internal tests (needed for `get_knotinfo`, as well).\n4. I remove option `oriented` from `get_knotinfo` and improve the quality of its answer in unclear situations.\n5. I add a warning to the docstring of method `from_dowker_code` of class `Knot` according to a hint of Chuck Livingston.",
    "created_at": "2020-12-18T17:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481901",
    "user": "https://github.com/soehms"
}
```

<div id="comment:38" align="right">comment:38</div>

I do the following changes:

1. I make TestSuite functionality more clear: I rename the former methods `_test_recover` to user visible boolean methods `is_recoverable`. I add a new `_test_recover` to class `KnotInfoSeries` which just runs the test using `is_recoverable` and the `tester` -option `max_samples`.

2. I add a new method `is_unique` to class `KnotInfoBase` which tests if a proper link is unique in the database under isotopy. This is needed in `get_knotinfo` and `is_isotopic` in order to give more reliable answers in unclear situations.
3. I extend `is_amphicheiral` to proper links by internal tests (needed for `get_knotinfo`, as well).
4. I remove option `oriented` from `get_knotinfo` and improve the quality of its answer in unclear situations.
5. I add a warning to the docstring of method `from_dowker_code` of class `Knot` according to a hint of Chuck Livingston.



---

archive/issue_events_415094.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-12-18T17:51:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415094"
}
```



---

archive/issue_events_415095.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2020-12-18T17:51:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415095"
}
```



---

archive/issue_comments_481902.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@tscrim](#comment%3A36):\n> Replying to [@soehms](#comment%3A35):\n\n> I would have expected the database itself to have a consistency check like this.\n\nDo you mean on the installation procedure with option `-c`? I could run tests with larger samples there in addition to the doctests, shall I?\n\n> The link with the database somehow becomes broken, such as they change the name of a column. So the code breaks once you install the database. Granted, I think this is unlikely. Looking over the design a bit more, having a future developer should not naturally avoid the methods that differentiate between the two.\n\nIf the package will be upgraded to a new database version then the patchbots would detect a change of a column-name that wasn't performed in the static dictionary. But unfortunately, they don't take package tickets. Indeed, in the case of this package it would make sense if they would.\n\n> I agree that it is an advantage to have it tested. Although I do believe it should not be done locally within Sage's library but with a more robust testing framework. Yet, I believe that the benefits here clearly outweigh the costs.\n\nWhat robust testing framework do you mean? If the database is not installed the all doctests of the ticket consume less than five seconds (on i5).",
    "created_at": "2020-12-18T17:56:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481902",
    "user": "https://github.com/soehms"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@tscrim](#comment%3A36):
> Replying to [@soehms](#comment%3A35):

> I would have expected the database itself to have a consistency check like this.

Do you mean on the installation procedure with option `-c`? I could run tests with larger samples there in addition to the doctests, shall I?

> The link with the database somehow becomes broken, such as they change the name of a column. So the code breaks once you install the database. Granted, I think this is unlikely. Looking over the design a bit more, having a future developer should not naturally avoid the methods that differentiate between the two.

If the package will be upgraded to a new database version then the patchbots would detect a change of a column-name that wasn't performed in the static dictionary. But unfortunately, they don't take package tickets. Indeed, in the case of this package it would make sense if they would.

> I agree that it is an advantage to have it tested. Although I do believe it should not be done locally within Sage's library but with a more robust testing framework. Yet, I believe that the benefits here clearly outweigh the costs.

What robust testing framework do you mean? If the database is not installed the all doctests of the ticket consume less than five seconds (on i5).



---

archive/issue_comments_481903.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nReplying to [@soehms](#comment%3A39):\n> Replying to [@tscrim](#comment%3A36):\n> > Replying to [@soehms](#comment%3A35):\n\n> \n> > I would have expected the database itself to have a consistency check like this.\n\n> \n> Do you mean on the installation procedure with option `-c`? I could run tests with larger samples there in addition to the doctests, shall I?\n\nNo, I mean that there is a `_test_database` type method on the database class. The `-c` option is good, but I also think we shouldn't have that take too long.\n\n> > I agree that it is an advantage to have it tested. Although I do believe it should not be done locally within Sage's library but with a more robust testing framework. Yet, I believe that the benefits here clearly outweigh the costs.\n\n> \n> What robust testing framework do you mean? If the database is not installed the all doctests of the ticket consume less than five seconds (on i5).\n\nThere are patchbots/buildbots with the database that check that everything still works rather than a group of us with the database installed running tests after each beta release.",
    "created_at": "2020-12-19T08:02:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481903",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:40" align="right">comment:40</div>

Replying to [@soehms](#comment%3A39):
> Replying to [@tscrim](#comment%3A36):
> > Replying to [@soehms](#comment%3A35):

> 
> > I would have expected the database itself to have a consistency check like this.

> 
> Do you mean on the installation procedure with option `-c`? I could run tests with larger samples there in addition to the doctests, shall I?

No, I mean that there is a `_test_database` type method on the database class. The `-c` option is good, but I also think we shouldn't have that take too long.

> > I agree that it is an advantage to have it tested. Although I do believe it should not be done locally within Sage's library but with a more robust testing framework. Yet, I believe that the benefits here clearly outweigh the costs.

> 
> What robust testing framework do you mean? If the database is not installed the all doctests of the ticket consume less than five seconds (on i5).

There are patchbots/buildbots with the database that check that everything still works rather than a group of us with the database installed running tests after each beta release.



---

archive/issue_comments_481904.json:
```json
{
    "body": "Changed commit from **[`e8ec73e`](https://github.com/sagemath/sagetrac-mirror/commit/e8ec73e5ec6634a136006da0b281b751dfebec15)** to **[`440b5f3`](https://github.com/sagemath/sagetrac-mirror/commit/440b5f39c410ebc6e574714fe939d40a18143285)**",
    "created_at": "2020-12-22T15:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481904",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e8ec73e`](https://github.com/sagemath/sagetrac-mirror/commit/e8ec73e5ec6634a136006da0b281b751dfebec15)** to **[`440b5f3`](https://github.com/sagemath/sagetrac-mirror/commit/440b5f39c410ebc6e574714fe939d40a18143285)**



---

archive/issue_comments_481905.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/440b5f39c410ebc6e574714fe939d40a18143285\"><code>440b5f3</code></a></td><td><code>30352: add _test_database and fix broken installation</code></td></tr></table>\n",
    "created_at": "2020-12-22T15:38:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481905",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/440b5f39c410ebc6e574714fe939d40a18143285"><code>440b5f3</code></a></td><td><code>30352: add _test_database and fix broken installation</code></td></tr></table>




---

archive/issue_comments_481906.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@tscrim](#comment%3A40):\n> Replying to [@soehms](#comment%3A39):\n\n> No, I mean that there is a `_test_database` type method on the database class.  The `-c` option is good, but I also think we shouldn't have that take too long.\n\nI add such a `_test_database` method which tests for a random sample of 20 links (by default). I marked the `TestSuite` doctest as `long time`. It takes less than 2 seconds if the database isn't installed and about 20 seconds else (including loading of the database). In addition I had to do some changes since the installation was broken (because of the usage of `feature` and `UniqueRepresentation`). Furthermore, I make the `-c` installation option take this long doctest, as well.\n\n> There are patchbots/buildbots with the database that check that everything still works rather than a group of us with the database installed running tests after each beta release.\n\nAre such patchbots/buildbots already possible?",
    "created_at": "2020-12-22T15:42:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481906",
    "user": "https://github.com/soehms"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@tscrim](#comment%3A40):
> Replying to [@soehms](#comment%3A39):

> No, I mean that there is a `_test_database` type method on the database class.  The `-c` option is good, but I also think we shouldn't have that take too long.

I add such a `_test_database` method which tests for a random sample of 20 links (by default). I marked the `TestSuite` doctest as `long time`. It takes less than 2 seconds if the database isn't installed and about 20 seconds else (including loading of the database). In addition I had to do some changes since the installation was broken (because of the usage of `feature` and `UniqueRepresentation`). Furthermore, I make the `-c` installation option take this long doctest, as well.

> There are patchbots/buildbots with the database that check that everything still works rather than a group of us with the database installed running tests after each beta release.

Are such patchbots/buildbots already possible?



---

archive/issue_comments_481907.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nReplying to [@soehms](#comment%3A42):\n> Replying to [@tscrim](#comment%3A40):\n> > Replying to [@soehms](#comment%3A39):\n\n> \n> > No, I mean that there is a `_test_database` type method on the database class.  The `-c` option is good, but I also think we shouldn't have that take too long.\n\n> \n> I add such a `_test_database` method which tests for a random sample of 20 links (by default). I marked the `TestSuite` doctest as `long time`. It takes less than 2 seconds if the database isn't installed and about 20 seconds else (including loading of the database). In addition I had to do some changes since the installation was broken (because of the usage of `feature` and `UniqueRepresentation`). Furthermore, I make the `-c` installation option take this long doctest, as well.\n\nThank you. I think that will help with the testing.\n\nDima, Miguel, anyone else have any additional comments before I set this to a positive review?\n\n> > There are patchbots/buildbots with the database that check that everything still works rather than a group of us with the database installed running tests after each beta release.\n\n> \n> Are such patchbots/buildbots already possible?\n\nIt is possible, but with all the different combinations, it is impossible to maintain as there is some different behavior depending on certain optional (experimental?) packages being installed. Although I would advocate for having at least one buildbot that has all optional (and possibly experimental) packages installed that runs tests.",
    "created_at": "2020-12-28T00:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481907",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:43" align="right">comment:43</div>

Replying to [@soehms](#comment%3A42):
> Replying to [@tscrim](#comment%3A40):
> > Replying to [@soehms](#comment%3A39):

> 
> > No, I mean that there is a `_test_database` type method on the database class.  The `-c` option is good, but I also think we shouldn't have that take too long.

> 
> I add such a `_test_database` method which tests for a random sample of 20 links (by default). I marked the `TestSuite` doctest as `long time`. It takes less than 2 seconds if the database isn't installed and about 20 seconds else (including loading of the database). In addition I had to do some changes since the installation was broken (because of the usage of `feature` and `UniqueRepresentation`). Furthermore, I make the `-c` installation option take this long doctest, as well.

Thank you. I think that will help with the testing.

Dima, Miguel, anyone else have any additional comments before I set this to a positive review?

> > There are patchbots/buildbots with the database that check that everything still works rather than a group of us with the database installed running tests after each beta release.

> 
> Are such patchbots/buildbots already possible?

It is possible, but with all the different combinations, it is impossible to maintain as there is some different behavior depending on certain optional (experimental?) packages being installed. Although I would advocate for having at least one buildbot that has all optional (and possibly experimental) packages installed that runs tests.



---

archive/issue_comments_481908.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nTypo: `KontInfo` (3 times)",
    "created_at": "2021-01-17T19:28:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481908",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:44" align="right">comment:44</div>

Typo: `KontInfo` (3 times)



---

archive/issue_comments_481909.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nIn terms of packaging, I think it would be much preferable to create a pip-installable package than to have a Sage specific upstream tarball.\n\nSee #30914 (Meta-ticket: Create upstream repositories, pip-installable packages for database packages)",
    "created_at": "2021-01-17T19:32:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481909",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

In terms of packaging, I think it would be much preferable to create a pip-installable package than to have a Sage specific upstream tarball.

See #30914 (Meta-ticket: Create upstream repositories, pip-installable packages for database packages)



---

archive/issue_comments_481910.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nAlso, in `SPKG.rst` please follow the new format of the title from #29655",
    "created_at": "2021-01-17T19:34:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481910",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:46" align="right">comment:46</div>

Also, in `SPKG.rst` please follow the new format of the title from #29655



---

archive/issue_comments_481911.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI see that upstream stores the original files in excel spreadsheets and it is then exported to cvs with some substitutions in libreoffice. That is not a sustainable approach unless you have some libreoffice automated scripting. \n\nI would recommend a python script using pandas [not included in sage] or a R script to perform such task.\n\nAsides from those workflow issues some proper packaging as something pip installable would indeed be nice. It should be relatively trivial if we only install the data.",
    "created_at": "2021-01-17T20:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481911",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:47" align="right">comment:47</div>

I see that upstream stores the original files in excel spreadsheets and it is then exported to cvs with some substitutions in libreoffice. That is not a sustainable approach unless you have some libreoffice automated scripting. 

I would recommend a python script using pandas [not included in sage] or a R script to perform such task.

Asides from those workflow issues some proper packaging as something pip installable would indeed be nice. It should be relatively trivial if we only install the data.



---

archive/issue_comments_481912.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\n> I see that upstream stores the original files in excel spreadsheets and it is then exported to cvs with some substitutions in libreoffice.\n\nI am sure this explains [`KontInfo`](https://www.google.com/search?q=google+translate+kont). (Pardon my French...)",
    "created_at": "2021-01-18T17:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481912",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

> I see that upstream stores the original files in excel spreadsheets and it is then exported to cvs with some substitutions in libreoffice.

I am sure this explains [`KontInfo`](https://www.google.com/search?q=google+translate+kont). (Pardon my French...)



---

archive/issue_comments_481913.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@mkoeppe](#comment%3A46):\n> Typo: `KontInfo` (3 times)\n\nThanks!\n\n> In terms of packaging, I think it would be much preferable to create a pip-\n> installable package than to have a Sage specific upstream tarball.\n\nI would like to do that, but I would prefer to do it in a follow-up ticket. Having never done this before, I will likely need advice and maybe help (plus time that I won't have until February). Are there any examples that I can see how I can do this?\n\n> Also, in `SPKG.rst` please follow the new format of the title from #29655\n\nI will do that!",
    "created_at": "2021-01-20T11:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481913",
    "user": "https://github.com/soehms"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@mkoeppe](#comment%3A46):
> Typo: `KontInfo` (3 times)

Thanks!

> In terms of packaging, I think it would be much preferable to create a pip-
> installable package than to have a Sage specific upstream tarball.

I would like to do that, but I would prefer to do it in a follow-up ticket. Having never done this before, I will likely need advice and maybe help (plus time that I won't have until February). Are there any examples that I can see how I can do this?

> Also, in `SPKG.rst` please follow the new format of the title from #29655

I will do that!



---

archive/issue_comments_481914.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@kiwifb](#comment%3A47):\n> I see that upstream stores the original files in excel spreadsheets and it is then exported to cvs with some substitutions in libreoffice. That is not a sustainable approach unless you have some libreoffice automated scripting. \n\nI know, this was only intended as a temporary solution (after failing to use `pandoc`). I reported some minor (and non-significant) issues upstream and waited for them to provide new files. If not, the existing tarball is good enough to start.\n\n\n> I would recommend a python script using pandas [not included in sage] or a R script to perform such task.\n\nThanks for your suggestions. I will see which one is appropriate to implement such a script.\n\n> Asides from those workflow issues some proper packaging as something pip installable would indeed be nice. It should be relatively trivial if we only install the data.\n\nDo you know examples that I can follow?",
    "created_at": "2021-01-20T11:15:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481914",
    "user": "https://github.com/soehms"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@kiwifb](#comment%3A47):
> I see that upstream stores the original files in excel spreadsheets and it is then exported to cvs with some substitutions in libreoffice. That is not a sustainable approach unless you have some libreoffice automated scripting. 

I know, this was only intended as a temporary solution (after failing to use `pandoc`). I reported some minor (and non-significant) issues upstream and waited for them to provide new files. If not, the existing tarball is good enough to start.


> I would recommend a python script using pandas [not included in sage] or a R script to perform such task.

Thanks for your suggestions. I will see which one is appropriate to implement such a script.

> Asides from those workflow issues some proper packaging as something pip installable would indeed be nice. It should be relatively trivial if we only install the data.

Do you know examples that I can follow?



---

archive/issue_events_415096.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-01-20T12:01:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415096"
}
```



---

archive/issue_events_415097.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-01-20T12:01:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415097"
}
```



---

archive/issue_comments_481915.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [@soehms](#comment%3A50):\n> Replying to [@kiwifb](#comment%3A47):\n> > I would recommend a python script using pandas [not included in sage] or a R script to perform such task.\n\n> \n> Thanks for your suggestions. I will see which one is appropriate to implement such a script.\n> \n\nAmusingly, I did the exact reverse for some people in the school of economics in my university. They had large csv files to download and they wanted to transform them into excel files - during the process we had to add some substitutions for missing values. They wanted the files in excel format as an input for STATA - I want to cry sometimes with some researchers. \n\n> > Asides from those workflow issues some proper packaging as something pip installable would indeed be nice. It should be relatively trivial if we only install the data.\n\n> \n> Do you know examples that I can follow?\n\nGood one. We have identified that as a need for our data packages but I don't think we have done it with any. I cannot think of a python package that is a pure data load either. Possibly because people do not usually bother which is sad.",
    "created_at": "2021-01-20T19:24:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481915",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [@soehms](#comment%3A50):
> Replying to [@kiwifb](#comment%3A47):
> > I would recommend a python script using pandas [not included in sage] or a R script to perform such task.

> 
> Thanks for your suggestions. I will see which one is appropriate to implement such a script.
> 

Amusingly, I did the exact reverse for some people in the school of economics in my university. They had large csv files to download and they wanted to transform them into excel files - during the process we had to add some substitutions for missing values. They wanted the files in excel format as an input for STATA - I want to cry sometimes with some researchers. 

> > Asides from those workflow issues some proper packaging as something pip installable would indeed be nice. It should be relatively trivial if we only install the data.

> 
> Do you know examples that I can follow?

Good one. We have identified that as a need for our data packages but I don't think we have done it with any. I cannot think of a python package that is a pure data load either. Possibly because people do not usually bother which is sad.



---

archive/issue_comments_481916.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nA few more comments.\n\n1. If you do `git grep SAGE_ROOT src/sage`, you will see that we have essentially eliminate use of this variable in the Sage library. This ticket reintroduces it, mixing Sage-the-distribution-specific code with Sage library code. That's not a good direction. In particular, Sage library code should not refer to `SAGE_ROOT/build/pkgs/%s/package-version.txt` at all - as this may not be available in downstream distribution packaging of Sage.\n\n2. The purpose of subclasses `sage.features.StaticFile` is to provide an interface to discovering files in an installation. `KnotInfoFilename.knots.sobj_path` should use `sage.features.databases.DatabaseKnotInfo` to find the path, not the other way around.",
    "created_at": "2021-01-20T19:57:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481916",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">comment:53</div>

A few more comments.

1. If you do `git grep SAGE_ROOT src/sage`, you will see that we have essentially eliminate use of this variable in the Sage library. This ticket reintroduces it, mixing Sage-the-distribution-specific code with Sage library code. That's not a good direction. In particular, Sage library code should not refer to `SAGE_ROOT/build/pkgs/%s/package-version.txt` at all - as this may not be available in downstream distribution packaging of Sage.

2. The purpose of subclasses `sage.features.StaticFile` is to provide an interface to discovering files in an installation. `KnotInfoFilename.knots.sobj_path` should use `sage.features.databases.DatabaseKnotInfo` to find the path, not the other way around.



---

archive/issue_comments_481917.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nI also don't fully understand the purpose of the data transformation that is happening at installation time, reading the csv files and creating many sobj files, in functions such as `_create_col_dict_sobj` etc. Each of the little files is storing a dictionary mapping strings to strings as a pickle (sobj)?",
    "created_at": "2021-01-20T20:13:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481917",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:54" align="right">comment:54</div>

I also don't fully understand the purpose of the data transformation that is happening at installation time, reading the csv files and creating many sobj files, in functions such as `_create_col_dict_sobj` etc. Each of the little files is storing a dictionary mapping strings to strings as a pickle (sobj)?



---

archive/issue_comments_481918.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@kiwifb](#comment%3A52):\n> Replying to [@soehms](#comment%3A50):\n> \n> Amusingly, I did the exact reverse for some people in the school of economics in my university. They had large csv files to download and they wanted to transform them into excel files - during the process we had to add some substitutions for missing values. They wanted the files in excel format as an input for STATA - I want to cry sometimes with some researchers. \n> \n\nI'm also amazed that pure math data is stored in Excel spreadsheets, but missing values haven't been a problem here so far (with the exception of the trivial knot, which I had to deal with separately in some cases). But there was a misplaced character and trailing and leading whitespaces (which of course can be handled using `strip`).\n\nThe reason why I converted them to `csv` is that I found no Excel reader included in Sage. You mentioned that `pandas` isn't included in Sage, as well. So, how can I use it in `spkg-install`?\n\n\n> Good one. We have identified that as a need for our data packages but I don't think we have done it with any. I cannot think of a python package that is a pure data load either. Possibly because people do not usually bother which is sad.\n\nI am open to try making a prototype. But that should be on a follow-up ticket.",
    "created_at": "2021-01-21T12:48:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481918",
    "user": "https://github.com/soehms"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@kiwifb](#comment%3A52):
> Replying to [@soehms](#comment%3A50):
> 
> Amusingly, I did the exact reverse for some people in the school of economics in my university. They had large csv files to download and they wanted to transform them into excel files - during the process we had to add some substitutions for missing values. They wanted the files in excel format as an input for STATA - I want to cry sometimes with some researchers. 
> 

I'm also amazed that pure math data is stored in Excel spreadsheets, but missing values haven't been a problem here so far (with the exception of the trivial knot, which I had to deal with separately in some cases). But there was a misplaced character and trailing and leading whitespaces (which of course can be handled using `strip`).

The reason why I converted them to `csv` is that I found no Excel reader included in Sage. You mentioned that `pandas` isn't included in Sage, as well. So, how can I use it in `spkg-install`?


> Good one. We have identified that as a need for our data packages but I don't think we have done it with any. I cannot think of a python package that is a pure data load either. Possibly because people do not usually bother which is sad.

I am open to try making a prototype. But that should be on a follow-up ticket.



---

archive/issue_comments_481919.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@mkoeppe](#comment%3A53):\n> A few more comments.\n> \n> 1. If you do `git grep SAGE_ROOT src/sage`, you will see that we have essentially eliminate use of this variable in the Sage library. This ticket reintroduces it, mixing Sage-the-distribution-specific code with Sage library code. That's not a good direction. In particular, Sage library code should not refer to `SAGE_ROOT/build/pkgs/%s/package-version.txt` at all - as this may not be available in downstream distribution packaging of Sage.\n> \n> 2. The purpose of subclasses `sage.features.StaticFile` is to provide an interface to discovering files in an installation. `KnotInfoFilename.knots.sobj_path` should use `sage.features.databases.DatabaseKnotInfo` to find the path, not the other way around.\n> \n\nSorry, that I didn't realize that! Of course I will correct it!",
    "created_at": "2021-01-21T12:50:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481919",
    "user": "https://github.com/soehms"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@mkoeppe](#comment%3A53):
> A few more comments.
> 
> 1. If you do `git grep SAGE_ROOT src/sage`, you will see that we have essentially eliminate use of this variable in the Sage library. This ticket reintroduces it, mixing Sage-the-distribution-specific code with Sage library code. That's not a good direction. In particular, Sage library code should not refer to `SAGE_ROOT/build/pkgs/%s/package-version.txt` at all - as this may not be available in downstream distribution packaging of Sage.
> 
> 2. The purpose of subclasses `sage.features.StaticFile` is to provide an interface to discovering files in an installation. `KnotInfoFilename.knots.sobj_path` should use `sage.features.databases.DatabaseKnotInfo` to find the path, not the other way around.
> 

Sorry, that I didn't realize that! Of course I will correct it!



---

archive/issue_comments_481920.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@mkoeppe](#comment%3A54):\n> I also don't fully understand the purpose of the data transformation that is happening at installation time, reading the csv files and creating many sobj files, in functions such as `_create_col_dict_sobj` etc. Each of the little files is storing a dictionary mapping strings to strings as a pickle (sobj)?\n> \n> \n\nPerhaps this is ridiculous given the size of these databases, but the purpose is to minimize the memory load. The user only needs a few of the 120 columns in the tables at a time (so why load them all each time).",
    "created_at": "2021-01-21T12:52:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481920",
    "user": "https://github.com/soehms"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@mkoeppe](#comment%3A54):
> I also don't fully understand the purpose of the data transformation that is happening at installation time, reading the csv files and creating many sobj files, in functions such as `_create_col_dict_sobj` etc. Each of the little files is storing a dictionary mapping strings to strings as a pickle (sobj)?
> 
> 

Perhaps this is ridiculous given the size of these databases, but the purpose is to minimize the memory load. The user only needs a few of the 120 columns in the tables at a time (so why load them all each time).



---

archive/issue_comments_481921.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce3bfdd5d2584fa8ffafc6d7fc0f89c233d3546e\"><code>ce3bfdd</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of trac.sagemath.org:sage into knotinfo_30352</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5844caed348d8602ef57f092a9e86999dbef1e0f\"><code>5844cae</code></a></td><td><code>30352: new tarball version 20210201</code></td></tr></table>\n",
    "created_at": "2021-02-01T17:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481921",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce3bfdd5d2584fa8ffafc6d7fc0f89c233d3546e"><code>ce3bfdd</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of trac.sagemath.org:sage into knotinfo_30352</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5844caed348d8602ef57f092a9e86999dbef1e0f"><code>5844cae</code></a></td><td><code>30352: new tarball version 20210201</code></td></tr></table>




---

archive/issue_comments_481922.json:
```json
{
    "body": "Changed commit from **[`440b5f3`](https://github.com/sagemath/sagetrac-mirror/commit/440b5f39c410ebc6e574714fe939d40a18143285)** to **[`5844cae`](https://github.com/sagemath/sagetrac-mirror/commit/5844caed348d8602ef57f092a9e86999dbef1e0f)**",
    "created_at": "2021-02-01T17:40:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481922",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`440b5f3`](https://github.com/sagemath/sagetrac-mirror/commit/440b5f39c410ebc6e574714fe939d40a18143285)** to **[`5844cae`](https://github.com/sagemath/sagetrac-mirror/commit/5844caed348d8602ef57f092a9e86999dbef1e0f)**



---

archive/issue_comments_481923.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nI do the following:\n\n1. Changes which I have announced in comments 49, 50 and 56 according to review.\n2. Upgrade to a new tarball since one of the both Excel files has changed (three additional columns and some whitespace erasing).\n3. I add 2 more conversion methods (`three_genus` and `signature`) of link properties which have been of interest, recently (#31188).\n4. One fix, since there was still a single link (`L10a171_1_1_0`) that caused `TestSuite` (with option `max_samples=infinity`) fail for class `KnotInfoDatabase`.\n5. I put `KnotInfo` and `KnotInfoSeries` into the global namespace in case the database is installed.",
    "created_at": "2021-02-01T17:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481923",
    "user": "https://github.com/soehms"
}
```

<div id="comment:59" align="right">comment:59</div>

I do the following:

1. Changes which I have announced in comments 49, 50 and 56 according to review.
2. Upgrade to a new tarball since one of the both Excel files has changed (three additional columns and some whitespace erasing).
3. I add 2 more conversion methods (`three_genus` and `signature`) of link properties which have been of interest, recently (#31188).
4. One fix, since there was still a single link (`L10a171_1_1_0`) that caused `TestSuite` (with option `max_samples=infinity`) fail for class `KnotInfoDatabase`.
5. I put `KnotInfo` and `KnotInfoSeries` into the global namespace in case the database is installed.



---

archive/issue_events_415098.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-02-01T17:46:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415098"
}
```



---

archive/issue_events_415099.json:
```json
{
    "actor": "https://github.com/soehms",
    "created_at": "2021-02-01T17:46:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415099"
}
```



---

archive/issue_comments_481924.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -29,5 +29,5 @@\n ```\n \n \n-Traball: https://trac.sagemath.org/raw-attachment/ticket/30352/knotinfo-20200813.tar.bz2\n+Traball: https://github.com/soehms/sagemath_knotinfo/blob/main/knotinfo-20210201.tar.bz2?raw=true\n \n``````\n",
    "created_at": "2021-02-01T17:47:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481924",
    "user": "https://github.com/soehms"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -29,5 +29,5 @@
 ```
 
 
-Traball: https://trac.sagemath.org/raw-attachment/ticket/30352/knotinfo-20200813.tar.bz2
+Traball: https://github.com/soehms/sagemath_knotinfo/blob/main/knotinfo-20210201.tar.bz2?raw=true
 
``````




---

archive/issue_comments_481925.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nSome suggestions for the upstream repository (in the direction of #30914):\n- Call it `database_knotinfo`, not `sagemath_knotinfo` -- it will be useful to a broader community (Python)\n- It's redundant to put versioned tarballs in a git repository - put instead the unpacked tarball there and have git take care of versioning\n- When done, I can send you a pull request that turns this repository into a pip-installable package",
    "created_at": "2021-02-04T17:59:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481925",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Some suggestions for the upstream repository (in the direction of #30914):
- Call it `database_knotinfo`, not `sagemath_knotinfo` -- it will be useful to a broader community (Python)
- It's redundant to put versioned tarballs in a git repository - put instead the unpacked tarball there and have git take care of versioning
- When done, I can send you a pull request that turns this repository into a pip-installable package



---

archive/issue_comments_481926.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@mkoeppe](#comment%3A61):\n> Some suggestions for the upstream repository (in the direction of #30914):\n> - Call it `database_knotinfo`, not `sagemath_knotinfo` -- it will be useful to a broader community (Python)\n> - It's redundant to put versioned tarballs in a git repository - put instead the unpacked tarball there and have git take care of versioning\n> - When done, I can send you a pull request that turns this repository into a pip-installable package\n\nSounds good! I hope the [new repository](https://github.com/soehms/database_knotinfo) is as expected. Please don't hesitate to make any changes you think are necessary! Many Thanks!",
    "created_at": "2021-02-06T19:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481926",
    "user": "https://github.com/soehms"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@mkoeppe](#comment%3A61):
> Some suggestions for the upstream repository (in the direction of #30914):
> - Call it `database_knotinfo`, not `sagemath_knotinfo` -- it will be useful to a broader community (Python)
> - It's redundant to put versioned tarballs in a git repository - put instead the unpacked tarball there and have git take care of versioning
> - When done, I can send you a pull request that turns this repository into a pip-installable package

Sounds good! I hope the [new repository](https://github.com/soehms/database_knotinfo) is as expected. Please don't hesitate to make any changes you think are necessary! Many Thanks!



---

archive/issue_comments_481927.json:
```json
{
    "body": "Changed commit from **[`5844cae`](https://github.com/sagemath/sagetrac-mirror/commit/5844caed348d8602ef57f092a9e86999dbef1e0f)** to **[`6e5e1e5`](https://github.com/sagemath/sagetrac-mirror/commit/6e5e1e55a76985668cd351265f65e898b059b6b6)**",
    "created_at": "2021-02-15T08:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481927",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5844cae`](https://github.com/sagemath/sagetrac-mirror/commit/5844caed348d8602ef57f092a9e86999dbef1e0f)** to **[`6e5e1e5`](https://github.com/sagemath/sagetrac-mirror/commit/6e5e1e55a76985668cd351265f65e898b059b6b6)**



---

archive/issue_comments_481928.json:
```json
{
    "body": "<div id=\"comment:63\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1721a4495b60016988b90c4a03b44bc7b1eb7449\"><code>1721a44</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of trac.sagemath.org:sage into knotinfo_30352</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e5e1e55a76985668cd351265f65e898b059b6b6\"><code>6e5e1e5</code></a></td><td><code>adaption to new beta version and some typo and style fixes</code></td></tr></table>\n",
    "created_at": "2021-02-15T08:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481928",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:63"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1721a4495b60016988b90c4a03b44bc7b1eb7449"><code>1721a44</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of trac.sagemath.org:sage into knotinfo_30352</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e5e1e55a76985668cd351265f65e898b059b6b6"><code>6e5e1e5</code></a></td><td><code>adaption to new beta version and some typo and style fixes</code></td></tr></table>




---

archive/issue_events_415100.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415100"
}
```



---

archive/issue_events_415101.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415101"
}
```



---

archive/issue_comments_481929.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481929",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_481930.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66a555bbb689e345d19c462660f86ba873544bcd\"><code>66a555b</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of trac.sagemath.org:sage into knotinfo_30352</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1\"><code>9cde996</code></a></td><td><code>30352: installation via PyPI</code></td></tr></table>\n",
    "created_at": "2021-05-15T17:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481930",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66a555bbb689e345d19c462660f86ba873544bcd"><code>66a555b</code></a></td><td><code>Merge branch 'u/soehms/knotinfo' of trac.sagemath.org:sage into knotinfo_30352</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1"><code>9cde996</code></a></td><td><code>30352: installation via PyPI</code></td></tr></table>




---

archive/issue_comments_481931.json:
```json
{
    "body": "Changed commit from **[`6e5e1e5`](https://github.com/sagemath/sagetrac-mirror/commit/6e5e1e55a76985668cd351265f65e898b059b6b6)** to **[`9cde996`](https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1)**",
    "created_at": "2021-05-15T17:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481931",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6e5e1e5`](https://github.com/sagemath/sagetrac-mirror/commit/6e5e1e55a76985668cd351265f65e898b059b6b6)** to **[`9cde996`](https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1)**



---

archive/issue_comments_481932.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@mkoeppe](#comment%3A61):\n\n> - When done, I can send you a pull request that turns this repository into a pip-installable package\n\nI've tried it now on my own and at least it is working. But since I needed a lot of trial error cycles I would appreciate it if you could have a look at it.\n\nThe current commit here concerns the adaption to the pip-installable package. Furthermore, it contains adaptations to SnapPy 3.0.1 and an addition of some verbose messages to `is_isotopic` (following a suggestion of knot theorists from the University of Regensburg).",
    "created_at": "2021-05-15T18:03:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481932",
    "user": "https://github.com/soehms"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@mkoeppe](#comment%3A61):

> - When done, I can send you a pull request that turns this repository into a pip-installable package

I've tried it now on my own and at least it is working. But since I needed a lot of trial error cycles I would appreciate it if you could have a look at it.

The current commit here concerns the adaption to the pip-installable package. Furthermore, it contains adaptations to SnapPy 3.0.1 and an addition of some verbose messages to `is_isotopic` (following a suggestion of knot theorists from the University of Regensburg).



---

archive/issue_comments_481933.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,19 +15,15 @@\n Many thanks to Allison Moore and Chuck Livingston for their kind permission to have this interface implemented and their offer to support us.\n \n \n-\n Having checked out the ticket for the first time, you have to run\n \n ```\n-make SAGE_SPKG=\"sage-spkg -o\" database_knotinfo-clean build\n+./configure --enable-download-from-upstream-url\n+sage -i database_knotinfo\n ```\n \n in order to have the databases installed. If you like to run all relevant doctests on the installation use:\n \n ```\n-make SAGE_SPKG=\"sage-spkg -o\" SAGE_CHECK=\"yes\" database_knotinfo-clean build\n+sage -i -c database_knotinfo\n ```\n-\n-\n-Traball: https://github.com/soehms/sagemath_knotinfo/blob/main/knotinfo-20210201.tar.bz2?raw=true\n-\n``````\n",
    "created_at": "2021-05-15T18:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481933",
    "user": "https://github.com/soehms"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,19 +15,15 @@
 Many thanks to Allison Moore and Chuck Livingston for their kind permission to have this interface implemented and their offer to support us.
 
 
-
 Having checked out the ticket for the first time, you have to run
 
 ```
-make SAGE_SPKG="sage-spkg -o" database_knotinfo-clean build
+./configure --enable-download-from-upstream-url
+sage -i database_knotinfo
 ```
 
 in order to have the databases installed. If you like to run all relevant doctests on the installation use:
 
 ```
-make SAGE_SPKG="sage-spkg -o" SAGE_CHECK="yes" database_knotinfo-clean build
+sage -i -c database_knotinfo
 ```
-
-
-Traball: https://github.com/soehms/sagemath_knotinfo/blob/main/knotinfo-20210201.tar.bz2?raw=true
-
``````




---

archive/issue_comments_481934.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nI don't think it is necessary to cache `homfly_polynomial()` as all of the key computational aspects are cached and so you don't cache the \"same\" object even though someone changed the variable name.\n\nOther than that, I am happy with the current state of things. Does anyone else have any comments or suggestions?",
    "created_at": "2021-05-21T02:01:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481934",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:68" align="right">comment:68</div>

I don't think it is necessary to cache `homfly_polynomial()` as all of the key computational aspects are cached and so you don't cache the "same" object even though someone changed the variable name.

Other than that, I am happy with the current state of things. Does anyone else have any comments or suggestions?



---

archive/issue_comments_481935.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nLooks great to me!",
    "created_at": "2021-05-21T03:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481935",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">comment:69</div>

Looks great to me!



---

archive/issue_comments_481936.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2021-05-21T03:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481936",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_415102.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-21T03:23:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415102"
}
```



---

archive/issue_events_415103.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-21T03:23:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415103"
}
```



---

archive/issue_comments_481937.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\n> I don't think it is necessary to cache homfly_polynomial() as all of the key computational aspects are cached and so you don't cache the \"same\" object even though someone changed the variable name.\n\nI agree that this is not that effective. In general, my consideration concerning caching was that with the database available you easily can have hundreds or thousands of invocations of any method. Anyway, I think that is nothing that could hurt, and thus would keep it for a start.\n\nMany thanks to everyone who helped to have this interface realized!",
    "created_at": "2021-05-21T07:09:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481937",
    "user": "https://github.com/soehms"
}
```

<div id="comment:70" align="right">comment:70</div>

> I don't think it is necessary to cache homfly_polynomial() as all of the key computational aspects are cached and so you don't cache the "same" object even though someone changed the variable name.

I agree that this is not that effective. In general, my consideration concerning caching was that with the database available you easily can have hundreds or thousands of invocations of any method. Anyway, I think that is nothing that could hurt, and thus would keep it for a start.

Many thanks to everyone who helped to have this interface realized!



---

archive/issue_comments_481938.json:
```json
{
    "body": "Changed branch from **[u/soehms/knotinfo](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/knotinfo)** to **[`9cde996`](https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1)**",
    "created_at": "2021-06-06T13:19:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481938",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/soehms/knotinfo](https://github.com/sagemath/sagetrac-mirror/tree/u/soehms/knotinfo)** to **[`9cde996`](https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1)**



---

archive/issue_events_415104.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-06T13:19:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415104"
}
```



---

archive/issue_events_415105.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9c85a6c1cfea365260c67ea69717c5831fa47980",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-06-06T13:19:25Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30352#event-415105"
}
```



---

archive/issue_comments_481939.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nFollow up at #31921.",
    "created_at": "2021-06-07T03:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481939",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:72" align="right">comment:72</div>

Follow up at #31921.



---

archive/issue_comments_481940.json:
```json
{
    "body": "Changed commit from **[`9cde996`](https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1)** to none",
    "created_at": "2021-06-07T03:55:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481940",
    "user": "https://github.com/kiwifb"
}
```

Changed commit from **[`9cde996`](https://github.com/sagemath/sagetrac-mirror/commit/9cde99610c99144c3f434b6a1e690666a05090d1)** to none



---

archive/issue_comments_481941.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nAnother follow up at #32760.",
    "created_at": "2021-10-26T15:50:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30352",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30352#issuecomment-481941",
    "user": "https://github.com/soehms"
}
```

<div id="comment:73" align="right">comment:73</div>

Another follow up at #32760.
