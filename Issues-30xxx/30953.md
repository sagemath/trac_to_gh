# Issue 30953: Implicit line continuation in callable symbolic expression

archive/issues_030716.json:
```json
{
    "body": "Reported in comment:19:ticket:30928\n\n```python\nsage: f(x) = (x +  \n....:         1)                                                                                    \n  File \"<ipython-input-10-ae23cb631161>\", line 1\n    __tmp__=var(\"x\"); f = symbolic_expression((x + ).function(x)\n                                                   ^\nSyntaxError: invalid syntax\n```\n\n`sage.repl.preparse.preparse_calculus` needs to be modified to accommodate implicit line continuations such as inside parentheses, brackets, and braces.\n\nCC:  @strogdon @egourgoulhon @kliem @slel\n\nKeywords: line continuation symbolic expression preparser parentheses\n\nWork_Issues: close #4545?\n\nResolution: invalid\n\nIssue created by migration from https://trac.sagemath.org/ticket/30953\n\n",
    "closed_at": "2021-10-04T23:44:13Z",
    "created_at": "2020-11-23T18:12:17Z",
    "labels": [
        "component: symbolics",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Implicit line continuation in callable symbolic expression",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30953",
    "user": "https://github.com/jcamp0x2a"
}
```
Reported in comment:19:ticket:30928

```python
sage: f(x) = (x +  
....:         1)                                                                                    
  File "<ipython-input-10-ae23cb631161>", line 1
    __tmp__=var("x"); f = symbolic_expression((x + ).function(x)
                                                   ^
SyntaxError: invalid syntax
```

`sage.repl.preparse.preparse_calculus` needs to be modified to accommodate implicit line continuations such as inside parentheses, brackets, and braces.

CC:  @strogdon @egourgoulhon @kliem @slel

Keywords: line continuation symbolic expression preparser parentheses

Work_Issues: close #4545?

Resolution: invalid

Issue created by migration from https://trac.sagemath.org/ticket/30953





---

archive/issue_comments_468525.json:
```json
{
    "body": "<a id='comment:3'></a>I've just been struck by a silent failure (!) version of this bug. A minimal version is\n\n```\nsage: f(x) = 1/2*(1 + x \n....:             + x^2)                                                                            \nsage: f                                                                                             \nx |--> x^2 + 1/2*x + 1/2\n```\nThis issue is present in Sage 9.1, 9.2 and 9.3.beta3.",
    "created_at": "2020-12-14T20:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468525",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:3'></a>I've just been struck by a silent failure (!) version of this bug. A minimal version is

```
sage: f(x) = 1/2*(1 + x 
....:             + x^2)                                                                            
sage: f                                                                                             
x |--> x^2 + 1/2*x + 1/2
```
This issue is present in Sage 9.1, 9.2 and 9.3.beta3.



---

archive/issue_comments_468526.json:
```json
{
    "body": "<a id='comment:4'></a>Because this is a silent failure in an elementary operation.",
    "created_at": "2020-12-14T20:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468526",
    "user": "https://github.com/egourgoulhon"
}
```

<a id='comment:4'></a>Because this is a silent failure in an elementary operation.



---

archive/issue_comments_468527.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-12-14T20:22:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468527",
    "user": "https://github.com/egourgoulhon"
}
```

Changing priority from major to critical.



---

archive/issue_events_080844.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-18T16:17:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30953#event-80844"
}
```



---

archive/issue_events_080845.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30953#event-80845"
}
```



---

archive/issue_events_080846.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-08-22T20:35:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30953#event-80846"
}
```



---

archive/issue_comments_468528.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-16T14:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468528",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_468529.json:
```json
{
    "body": "<a id='comment:8'></a>Only works in the interactive shell so far and not when parsing `*.sage` files.\n\n---\nNew commits:",
    "created_at": "2021-09-16T14:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468529",
    "user": "https://github.com/kliem"
}
```

<a id='comment:8'></a>Only works in the interactive shell so far and not when parsing `*.sage` files.

---
New commits:



---

archive/issue_comments_468530.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-09-21T15:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468530",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_468531.json:
```json
{
    "body": "<a id='comment:9'></a>I'm reworking the entire `preparse` now.\n\nThere is so much basic stuff that is just not working, e.g. line continuation for\n\n```\nsage: def foo():\n....:     a = 2312334432134.factor()\n```",
    "created_at": "2021-09-21T15:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468531",
    "user": "https://github.com/kliem"
}
```

<a id='comment:9'></a>I'm reworking the entire `preparse` now.

There is so much basic stuff that is just not working, e.g. line continuation for

```
sage: def foo():
....:     a = 2312334432134.factor()
```



---

archive/issue_comments_468532.json:
```json
{
    "body": "<a id='comment:11'></a>In #31951#comment:42 I suggest a simple fix for #31951 and doing the more elaborate work here.\n\n---\nNew commits:",
    "created_at": "2021-09-27T21:51:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468532",
    "user": "https://github.com/kliem"
}
```

<a id='comment:11'></a>In #31951#comment:42 I suggest a simple fix for #31951 and doing the more elaborate work here.

---
New commits:



---

archive/issue_comments_468533.json:
```json
{
    "body": "<a id='comment:13'></a>Renamed the branch and added to commits.\n\n---\nNew commits:",
    "created_at": "2021-09-27T21:56:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468533",
    "user": "https://github.com/kliem"
}
```

<a id='comment:13'></a>Renamed the branch and added to commits.

---
New commits:



---

archive/issue_comments_468534.json:
```json
{
    "body": "<a id='comment:14'></a>Fixed in #31951.",
    "created_at": "2021-09-28T16:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468534",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'></a>Fixed in #31951.



---

archive/issue_events_080847.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-09-28T16:19:21Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30953#event-80847"
}
```



---

archive/issue_events_080848.json:
```json
{
    "actor": "https://github.com/kwankyu",
    "created_at": "2021-09-28T16:19:21Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30953#event-80848"
}
```



---

archive/issue_comments_468535.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-09-28T16:19:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468535",
    "user": "https://github.com/kwankyu"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_468536.json:
```json
{
    "body": "<a id='comment:15'></a>This is fixed by #31951.",
    "created_at": "2021-10-01T06:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468536",
    "user": "https://github.com/kliem"
}
```

<a id='comment:15'></a>This is fixed by #31951.



---

archive/issue_comments_468537.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-01T06:31:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468537",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_468538.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2021-10-04T23:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30953#issuecomment-468538",
    "user": "https://github.com/mkoeppe"
}
```

Resolution: invalid



---

archive/issue_events_080849.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-04T23:44:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30953",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30953#event-80849"
}
```
