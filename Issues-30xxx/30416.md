# Issue 30416: Make tox a standard package

archive/issues_030179.json:
```json
{
    "body": "see #30410.\n\n[Discussion/vote at sage-devel](https://groups.google.com/d/msg/sage-devel/G5kMggTecA8/ikT04wi8AQAJ).\n\n\n\nCC:  @jhpalmieri @tobiasdiez @fchapoton @slel @orlitzky\n\nReviewer: John Palmieri\n\nAuthor: Matthias Koeppe\n\nBranch: 65e6330c118a89e21b8ba13bcfc9a407550bad63\n\nDependencies: #31699\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30416\n\n",
    "closed_at": "2021-06-20T08:14:31Z",
    "created_at": "2020-08-21T17:43:03Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Make tox a standard package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30416",
    "user": "https://github.com/mkoeppe"
}
```
see #30410.

[Discussion/vote at sage-devel](https://groups.google.com/d/msg/sage-devel/G5kMggTecA8/ikT04wi8AQAJ).



CC:  @jhpalmieri @tobiasdiez @fchapoton @slel @orlitzky

Reviewer: John Palmieri

Author: Matthias Koeppe

Branch: 65e6330c118a89e21b8ba13bcfc9a407550bad63

Dependencies: #31699

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30416





---

archive/issue_comments_600452.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,7 @@\n-see #30410; this will need a discussion/vote at sage-devel.\n+see #30410.\n+\n+[Discussion/vote at sage-devel](https://groups.google.com/d/msg/sage-devel/G5kMggTecA8/ikT04wi8AQAJ).\n+\n \n Comment: 1\n \n``````\n",
    "created_at": "2020-09-09T16:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600452",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,7 @@
-see #30410; this will need a discussion/vote at sage-devel.
+see #30410.
+
+[Discussion/vote at sage-devel](https://groups.google.com/d/msg/sage-devel/G5kMggTecA8/ikT04wi8AQAJ).
+
 
 Comment: 1
 
``````




---

archive/issue_comments_600453.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/make_tox_a_standard_package\"",
    "created_at": "2020-09-09T17:03:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600453",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/make_tox_a_standard_package"



---

archive/issue_comments_600454.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-09-09T17:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600454",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_600455.json:
```json
{
    "body": "<a id='comment:4'></a>New commits:",
    "created_at": "2020-09-09T17:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:4'></a>New commits:



---

archive/issue_comments_600456.json:
```json
{
    "body": "Changing commit from \"\" to \"6913cd8cf3cb18a6873696bcaf7678e95f60f37a\"",
    "created_at": "2020-09-09T17:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600456",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "6913cd8cf3cb18a6873696bcaf7678e95f60f37a"



---

archive/issue_comments_600457.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-09T17:03:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600457",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_600458.json:
```json
{
    "body": "<a id='comment:5'></a>Should there also be an `spkg-configure.m4` file? (As a policy issue, should all new standard packages be encouraged, required if at all possible, to have such files, to try to maintain the momentum toward working well with distros?)",
    "created_at": "2020-09-09T18:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600458",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:5'></a>Should there also be an `spkg-configure.m4` file? (As a policy issue, should all new standard packages be encouraged, required if at all possible, to have such files, to try to maintain the momentum toward working well with distros?)



---

archive/issue_comments_600459.json:
```json
{
    "body": "<a id='comment:6'></a>That's a good idea, and I would support adding this policy too.",
    "created_at": "2020-09-09T18:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600459",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>That's a good idea, and I would support adding this policy too.



---

archive/issue_comments_600460.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-09T18:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600460",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_600461.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-09T21:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600461",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_600462.json:
```json
{
    "body": "Changing commit from \"6913cd8cf3cb18a6873696bcaf7678e95f60f37a\" to \"3b510ddb24aac1161817570f09b336f34c8185af\"",
    "created_at": "2020-09-09T21:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6913cd8cf3cb18a6873696bcaf7678e95f60f37a" to "3b510ddb24aac1161817570f09b336f34c8185af"



---

archive/issue_comments_600463.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-09-09T21:07:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600463",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_600464.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:6 mkoeppe]:\n> That's a good idea, and I would support adding this policy too.\n\n\nSee #30543 for documentation for spkg-configure.m4 and the statement of this policy.",
    "created_at": "2020-09-09T21:34:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600464",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:9'></a>Replying to [comment:6 mkoeppe]:
> That's a good idea, and I would support adding this policy too.


See #30543 for documentation for spkg-configure.m4 and the statement of this policy.



---

archive/issue_comments_600465.json:
```json
{
    "body": "<a id='comment:10'></a>We're missing some dependencies:\n\n```\ninstall_requires = \n\tfilelock>=3.0.0\n\tpackaging>=14\n\tpluggy>=0.12.0\n\tpy>=1.4.17\n\tsix>=1.14.0 # required when virtualenv>=20\n\ttoml>=0.9.4\n        virtualenv!=20.0.0,!=20.0.1,!=20.0.2,!=20.0.3,!=20.0.4,!=20.0.5,!=20.0.6,!=20.0.7,>=16.0.0\n\tcolorama>=0.4.1 ;platform_system==\"Windows\"\n\timportlib-metadata>=0.12,<2;python_version<\"3.8\"\n```\nWhen I run `./sage --tox --version`, I get\n\n```\nModuleNotFoundError: No module named 'pluggy'\n```",
    "created_at": "2020-09-09T22:41:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600465",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:10'></a>We're missing some dependencies:

```
install_requires = 
	filelock>=3.0.0
	packaging>=14
	pluggy>=0.12.0
	py>=1.4.17
	six>=1.14.0 # required when virtualenv>=20
	toml>=0.9.4
        virtualenv!=20.0.0,!=20.0.1,!=20.0.2,!=20.0.3,!=20.0.4,!=20.0.5,!=20.0.6,!=20.0.7,>=16.0.0
	colorama>=0.4.1 ;platform_system=="Windows"
	importlib-metadata>=0.12,<2;python_version<"3.8"
```
When I run `./sage --tox --version`, I get

```
ModuleNotFoundError: No module named 'pluggy'
```



---

archive/issue_comments_600466.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-09-10T00:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600466",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_600467.json:
```json
{
    "body": "<a id='comment:11'></a>Indeed, thanks for catching this.",
    "created_at": "2020-09-10T00:00:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600467",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Indeed, thanks for catching this.



---

archive/issue_comments_600468.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+see #30410.\n \n+[Discussion/vote at sage-devel](https://groups.google.com/d/msg/sage-devel/G5kMggTecA8/ikT04wi8AQAJ).\n+\n+System packages: https://repology.org/project/python:tox/versions\n \n Comment: 1\n \n``````\n",
    "created_at": "2020-09-10T00:01:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600468",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+see #30410.
 
+[Discussion/vote at sage-devel](https://groups.google.com/d/msg/sage-devel/G5kMggTecA8/ikT04wi8AQAJ).
+
+System packages: https://repology.org/project/python:tox/versions
 
 Comment: 1
 
``````




---

archive/issue_comments_600469.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,7 @@\n+see #30410.\n+\n+[Discussion/vote at sage-devel](https://groups.google.com/d/msg/sage-devel/G5kMggTecA8/ikT04wi8AQAJ).\n+\n \n \n Comment: 1\n``````\n",
    "created_at": "2020-09-10T00:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600469",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,7 @@
+see #30410.
+
+[Discussion/vote at sage-devel](https://groups.google.com/d/msg/sage-devel/G5kMggTecA8/ikT04wi8AQAJ).
+
 
 
 Comment: 1
``````




---

archive/issue_events_078880.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-10T00:39:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30416#event-78880"
}
```



---

archive/issue_comments_600470.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30544\"",
    "created_at": "2020-09-10T00:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600470",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#30544"



---

archive/issue_comments_600471.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-09-10T00:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600471",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_600472.json:
```json
{
    "body": "Changing commit from \"3b510ddb24aac1161817570f09b336f34c8185af\" to \"f8a7ee6c4e498c455b96701c159f55edeb8348bb\"",
    "created_at": "2020-09-10T00:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600472",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3b510ddb24aac1161817570f09b336f34c8185af" to "f8a7ee6c4e498c455b96701c159f55edeb8348bb"



---

archive/issue_comments_600473.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-12-27T18:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_600474.json:
```json
{
    "body": "Changing commit from \"f8a7ee6c4e498c455b96701c159f55edeb8348bb\" to \"9e7cc2aed7f075cba0ff6b0b60ae382f3af58638\"",
    "created_at": "2020-12-27T18:07:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f8a7ee6c4e498c455b96701c159f55edeb8348bb" to "9e7cc2aed7f075cba0ff6b0b60ae382f3af58638"



---

archive/issue_comments_600475.json:
```json
{
    "body": "<a id='comment:17'></a>Added these dependencies using the new tool described at https://wiki.sagemath.org/ReleaseTours/sage-9.3#For_developers:_Setting_up_Python_packages_from_PyPI_as_Sage_packages\n\nUntested so far - possibly needs more dependencies\n\nAnd probably the dependencies that are only needed by `tox` should be marked as not required if system tox is found.",
    "created_at": "2020-12-27T18:29:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600475",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Added these dependencies using the new tool described at https://wiki.sagemath.org/ReleaseTours/sage-9.3#For_developers:_Setting_up_Python_packages_from_PyPI_as_Sage_packages

Untested so far - possibly needs more dependencies

And probably the dependencies that are only needed by `tox` should be marked as not required if system tox is found.



---

archive/issue_comments_600476.json:
```json
{
    "body": "<a id='comment:18'></a>`virtualenv` has the following additional dependencies:\n\n```\n        appdirs>=1.4.3,<2\n        distlib>=0.3.1,<1\n        filelock>=3.0.0,<4\n        six>=1.9.0,<2   # keep it >=1.9.0 as it may cause problems on LTS platforms\n        importlib-metadata>=0.12;python_version<\"3.8\"\n        importlib-resources>=1.0;python_version<\"3.7\"\n```",
    "created_at": "2021-01-02T04:23:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600476",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>`virtualenv` has the following additional dependencies:

```
        appdirs>=1.4.3,<2
        distlib>=0.3.1,<1
        filelock>=3.0.0,<4
        six>=1.9.0,<2   # keep it >=1.9.0 as it may cause problems on LTS platforms
        importlib-metadata>=0.12;python_version<"3.8"
        importlib-resources>=1.0;python_version<"3.7"
```



---

archive/issue_comments_600477.json:
```json
{
    "body": "Changing commit from \"9e7cc2aed7f075cba0ff6b0b60ae382f3af58638\" to \"b51cf6b6e467f1cc8f761ca6bb0698c6a49e534c\"",
    "created_at": "2021-01-02T04:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600477",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9e7cc2aed7f075cba0ff6b0b60ae382f3af58638" to "b51cf6b6e467f1cc8f761ca6bb0698c6a49e534c"



---

archive/issue_comments_600478.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-01-02T04:39:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600478",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_600479.json:
```json
{
    "body": "Changing dependencies from \"#30544\" to \"#29655\"",
    "created_at": "2021-01-02T04:39:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600479",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30544" to "#29655"



---

archive/issue_events_078881.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-20T19:14:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30416#event-78881"
}
```



---

archive/issue_events_078882.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-20T19:14:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30416#event-78882"
}
```



---

archive/issue_comments_600480.json:
```json
{
    "body": "Changing dependencies from \"#29655\" to \"#31699\"",
    "created_at": "2021-05-27T22:48:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600480",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29655" to "#31699"



---

archive/issue_comments_600481.json:
```json
{
    "body": "Changing commit from \"b51cf6b6e467f1cc8f761ca6bb0698c6a49e534c\" to \"cc2f4ae779d1dc5b03ee94f0f5e1e17c422363ad\"",
    "created_at": "2021-05-27T22:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600481",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b51cf6b6e467f1cc8f761ca6bb0698c6a49e534c" to "cc2f4ae779d1dc5b03ee94f0f5e1e17c422363ad"



---

archive/issue_comments_600482.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-05-27T22:52:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600482",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_600483.json:
```json
{
    "body": "Changing commit from \"cc2f4ae779d1dc5b03ee94f0f5e1e17c422363ad\" to \"b9c4ec8aadeb3c2977e9899cbd65bae7d9bc2761\"",
    "created_at": "2021-05-27T23:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600483",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cc2f4ae779d1dc5b03ee94f0f5e1e17c422363ad" to "b9c4ec8aadeb3c2977e9899cbd65bae7d9bc2761"



---

archive/issue_comments_600484.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-27T23:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600484",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_600485.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-05-27T23:12:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600485",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_600486.json:
```json
{
    "body": "<a id='comment:26'></a>`py` doesn't build for me; even if it did, it looks like it's trying to download things at the start of its build process. Log attached.",
    "created_at": "2021-05-28T05:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600486",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:26'></a>`py` doesn't build for me; even if it did, it looks like it's trying to download things at the start of its build process. Log attached.



---

archive/issue_comments_600487.json:
```json
{
    "body": "<a id='comment:27'></a>Attachment [py-1.10.0.log](tarball://root/attachments/some-uuid/ticket30416/py-1.10.0.log) by git created at 2021-05-28 05:35:23\n\nBranch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-28T05:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600487",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Attachment [py-1.10.0.log](tarball://root/attachments/some-uuid/ticket30416/py-1.10.0.log) by git created at 2021-05-28 05:35:23

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_600488.json:
```json
{
    "body": "Changing commit from \"b9c4ec8aadeb3c2977e9899cbd65bae7d9bc2761\" to \"ce2ec11d5f9cdb37e4b8d746836dbb5461e64ed7\"",
    "created_at": "2021-05-28T05:35:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600488",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b9c4ec8aadeb3c2977e9899cbd65bae7d9bc2761" to "ce2ec11d5f9cdb37e4b8d746836dbb5461e64ed7"



---

archive/issue_comments_600489.json:
```json
{
    "body": "<a id='comment:28'></a>It's a little unfortunate that the top-level `configure` recognizes that\n\n```\nconfigure:38013: checking for tox >= 2.5.0\nconfigure:38096: result: /usr/local/bin/tox\nconfigure:38107: will use system package and not install SPKG tox\n```\nbut our build system isn't smart enough to skip its dependencies.",
    "created_at": "2021-05-28T16:50:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600489",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>It's a little unfortunate that the top-level `configure` recognizes that

```
configure:38013: checking for tox >= 2.5.0
configure:38096: result: /usr/local/bin/tox
configure:38107: will use system package and not install SPKG tox
```
but our build system isn't smart enough to skip its dependencies.



---

archive/issue_comments_600490.json:
```json
{
    "body": "<a id='comment:29'></a>Great point! I'll see what I can do about this",
    "created_at": "2021-05-28T16:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600490",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Great point! I'll see what I can do about this



---

archive/issue_comments_600491.json:
```json
{
    "body": "Changing commit from \"ce2ec11d5f9cdb37e4b8d746836dbb5461e64ed7\" to \"65e6330c118a89e21b8ba13bcfc9a407550bad63\"",
    "created_at": "2021-05-29T00:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600491",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ce2ec11d5f9cdb37e4b8d746836dbb5461e64ed7" to "65e6330c118a89e21b8ba13bcfc9a407550bad63"



---

archive/issue_comments_600492.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-29T00:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600492",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_600493.json:
```json
{
    "body": "<a id='comment:31'></a>Here's something that will avoid installing 4 packages in this case:\n- `appdirs`, `distlib`, `filelock`, `virtualenv`\n\nI haven't added the same logic to the other packages:\n- `pluggy`, `py`, `toml` -- because they will also be needed as dependencies of `pytest` (see #31110)\n- `importlib_resources` -- because it is useful as a backport package (see #31306)",
    "created_at": "2021-05-29T01:06:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600493",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>Here's something that will avoid installing 4 packages in this case:
- `appdirs`, `distlib`, `filelock`, `virtualenv`

I haven't added the same logic to the other packages:
- `pluggy`, `py`, `toml` -- because they will also be needed as dependencies of `pytest` (see #31110)
- `importlib_resources` -- because it is useful as a backport package (see #31306)



---

archive/issue_comments_600494.json:
```json
{
    "body": "<a id='comment:32'></a>Okay, thanks, looks good.",
    "created_at": "2021-05-31T03:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600494",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:32'></a>Okay, thanks, looks good.



---

archive/issue_comments_600495.json:
```json
{
    "body": "Changing reviewer from \"\" to \"John Palmieri\"",
    "created_at": "2021-05-31T03:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600495",
    "user": "https://github.com/jhpalmieri"
}
```

Changing reviewer from "" to "John Palmieri"



---

archive/issue_comments_600496.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-31T03:53:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600496",
    "user": "https://github.com/jhpalmieri"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_600497.json:
```json
{
    "body": "<a id='comment:33'></a>Thanks!",
    "created_at": "2021-05-31T05:32:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600497",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:33'></a>Thanks!



---

archive/issue_comments_600498.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-06-20T08:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600498",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_600499.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/make_tox_a_standard_package\" to \"65e6330c118a89e21b8ba13bcfc9a407550bad63\"",
    "created_at": "2021-06-20T08:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600499",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/make_tox_a_standard_package" to "65e6330c118a89e21b8ba13bcfc9a407550bad63"



---

archive/issue_events_078883.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-06-20T08:14:31Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30416#event-78883"
}
```



---

archive/issue_comments_600500.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:26 jhpalmieri]:\n> `py` doesn't build for me; even if it did, it looks like it's trying to download things at the start of its build process. Log attached.\n\n\nWhat was the resolution to this?\n\nI'm getting build failure of sage because of this now. It's not terrible and I guess `py` isn't needed by anything. But I'm also wondering, why it is a dependency of `tox` and `pytest` in the first place. Neither of them lists `py` as a dependency. Where do we use it?",
    "created_at": "2021-06-22T09:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600500",
    "user": "https://github.com/kliem"
}
```

<a id='comment:35'></a>Replying to [comment:26 jhpalmieri]:
> `py` doesn't build for me; even if it did, it looks like it's trying to download things at the start of its build process. Log attached.


What was the resolution to this?

I'm getting build failure of sage because of this now. It's not terrible and I guess `py` isn't needed by anything. But I'm also wondering, why it is a dependency of `tox` and `pytest` in the first place. Neither of them lists `py` as a dependency. Where do we use it?



---

archive/issue_comments_600501.json:
```json
{
    "body": "Changing commit from \"65e6330c118a89e21b8ba13bcfc9a407550bad63\" to \"\"",
    "created_at": "2021-06-22T09:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600501",
    "user": "https://github.com/kliem"
}
```

Changing commit from "65e6330c118a89e21b8ba13bcfc9a407550bad63" to ""



---

archive/issue_comments_600502.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 gh-kliem]:\n> Replying to [comment:26 jhpalmieri]:\n> > `py` doesn't build for me; even if it did, it looks like it's trying to download things at the start of its build process. Log attached.\n\n> \n> What was the resolution to this?\n\n\nThe missing dependency on `setuptools_scm` was added\n\n> I'm getting build failure of sage because of this now. It's not terrible and I guess `py` isn't needed by anything. But I'm also wondering, why it is a dependency of `tox` and `pytest` in the first place. Neither of them lists `py` as a dependency. Where do we use it?\n\n\nIt's an `install_requires` of tox: https://github.com/tox-dev/tox/blob/master/setup.cfg",
    "created_at": "2021-06-22T13:41:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30416",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30416#issuecomment-600502",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>Replying to [comment:35 gh-kliem]:
> Replying to [comment:26 jhpalmieri]:
> > `py` doesn't build for me; even if it did, it looks like it's trying to download things at the start of its build process. Log attached.

> 
> What was the resolution to this?


The missing dependency on `setuptools_scm` was added

> I'm getting build failure of sage because of this now. It's not terrible and I guess `py` isn't needed by anything. But I'm also wondering, why it is a dependency of `tox` and `pytest` in the first place. Neither of them lists `py` as a dependency. Where do we use it?


It's an `install_requires` of tox: https://github.com/tox-dev/tox/blob/master/setup.cfg
