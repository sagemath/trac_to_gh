# Issue 30872: lrslib compilation failure

archive/issues_030635.json:
```json
{
    "body": "On archlinux with gcc 10.2.0\n\n```\nlibtool: link: gcc -g -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -o .libs/lrsnash lrsnash-lrsnash.o lrsnash-lrsnashlib.o  -L/opt/sage/local/lib ./.libs/liblrsgmp.so -lgmp -Wl,-rpath -Wl,/opt/sage/local/lib\n/usr/bin/ld: lrsnash-lrsnashlib.o:/opt/sage/local/var/tmp/sage/build/lrslib-062+autotools-2017-03-03.p1/src/lrsnashlib.h:68: multiple definition of `FirstTime'; lrsnash-lrsnash.o:/opt/sage/local/var/tmp/sage/build/lrslib-062+autotools-2017-03-03.p1/src/lrsnashlib.h:68: first defined here\ncollect2: error: ld returned 1 exit status\n```\n- [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)\n- [config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)\n- [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)\n\nUpstream pull requests\n- https://github.com/mkoeppe/lrslib/pull/6\n- https://github.com/mkoeppe/lrslib/pull/7\n\nCC:  @mkoeppe @dimpase\n\nUpstream: Reported upstream. No feedback yet.\n\nReviewer: Thierry Monteil\n\nDependencies: #27745\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30872\n\n",
    "closed_at": "2021-07-31T17:58:02Z",
    "created_at": "2020-11-07T16:40:06Z",
    "labels": [
        "component: packages: optional",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "lrslib compilation failure",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30872",
    "user": "https://github.com/videlec"
}
```
On archlinux with gcc 10.2.0

```
libtool: link: gcc -g -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -o .libs/lrsnash lrsnash-lrsnash.o lrsnash-lrsnashlib.o  -L/opt/sage/local/lib ./.libs/liblrsgmp.so -lgmp -Wl,-rpath -Wl,/opt/sage/local/lib
/usr/bin/ld: lrsnash-lrsnashlib.o:/opt/sage/local/var/tmp/sage/build/lrslib-062+autotools-2017-03-03.p1/src/lrsnashlib.h:68: multiple definition of `FirstTime'; lrsnash-lrsnash.o:/opt/sage/local/var/tmp/sage/build/lrslib-062+autotools-2017-03-03.p1/src/lrsnashlib.h:68: first defined here
collect2: error: ld returned 1 exit status
```
- [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)
- [config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)
- [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)

Upstream pull requests
- https://github.com/mkoeppe/lrslib/pull/6
- https://github.com/mkoeppe/lrslib/pull/7

CC:  @mkoeppe @dimpase

Upstream: Reported upstream. No feedback yet.

Reviewer: Thierry Monteil

Dependencies: #27745

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30872





---

archive/issue_comments_612759.json:
```json
{
    "body": "Attachment [lrslib-062+autotools-2017-03-03.p1.log](tarball://root/attachments/some-uuid/ticket30872/lrslib-062+autotools-2017-03-03.p1.log) by @videlec created at 2020-11-07 16:40:48",
    "created_at": "2020-11-07T16:40:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612759",
    "user": "https://github.com/videlec"
}
```

Attachment [lrslib-062+autotools-2017-03-03.p1.log](tarball://root/attachments/some-uuid/ticket30872/lrslib-062+autotools-2017-03-03.p1.log) by @videlec created at 2020-11-07 16:40:48



---

archive/issue_comments_612760.json:
```json
{
    "body": "Attachment [config.log](tarball://root/attachments/some-uuid/ticket30872/config.log) by @videlec created at 2020-11-07 16:41:01",
    "created_at": "2020-11-07T16:41:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612760",
    "user": "https://github.com/videlec"
}
```

Attachment [config.log](tarball://root/attachments/some-uuid/ticket30872/config.log) by @videlec created at 2020-11-07 16:41:01



---

archive/issue_comments_612761.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [config.status](tarball://root/attachments/some-uuid/ticket30872/config.status) by @videlec created at 2020-11-07 16:42:15",
    "created_at": "2020-11-07T16:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612761",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
Attachment [config.status](tarball://root/attachments/some-uuid/ticket30872/config.status) by @videlec created at 2020-11-07 16:42:15



---

archive/issue_comments_612762.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n On archlinux\n \n-- config.log\n-- config.status\n-- lrslib-062+autotools-2017-03-03.p1.log\n+- [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)\n+- [[config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)\n+- [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)\n``````\n",
    "created_at": "2020-11-07T16:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612762",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 On archlinux
 
-- config.log
-- config.status
-- lrslib-062+autotools-2017-03-03.p1.log
+- [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)
+- [[config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)
+- [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)
``````




---

archive/issue_comments_612763.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n On archlinux\n \n - [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)\n-- [[config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)\n+- [config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)\n - [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)\n``````\n",
    "created_at": "2020-11-07T16:42:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612763",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 On archlinux
 
 - [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)
-- [[config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)
+- [config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)
 - [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)
``````




---

archive/issue_comments_612764.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,10 @@\n-On archlinux\n+On archlinux with gcc 10.2.0\n \n+```\n+libtool: link: gcc -g -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -o .libs/lrsnash lrsnash-lrsnash.o lrsnash-lrsnashlib.o  -L/opt/sage/local/lib ./.libs/liblrsgmp.so -lgmp -Wl,-rpath -Wl,/opt/sage/local/lib\n+/usr/bin/ld: lrsnash-lrsnashlib.o:/opt/sage/local/var/tmp/sage/build/lrslib-062+autotools-2017-03-03.p1/src/lrsnashlib.h:68: multiple definition of `FirstTime'; lrsnash-lrsnash.o:/opt/sage/local/var/tmp/sage/build/lrslib-062+autotools-2017-03-03.p1/src/lrsnashlib.h:68: first defined here\n+collect2: error: ld returned 1 exit status\n+```\n - [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)\n - [config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)\n - [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)\n``````\n",
    "created_at": "2020-11-07T16:43:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612764",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,10 @@
-On archlinux
+On archlinux with gcc 10.2.0
 
+```
+libtool: link: gcc -g -O2 -Wl,-rpath-link -Wl,/opt/sage/local/lib -Wl,-rpath -Wl,/opt/sage/local/lib -o .libs/lrsnash lrsnash-lrsnash.o lrsnash-lrsnashlib.o  -L/opt/sage/local/lib ./.libs/liblrsgmp.so -lgmp -Wl,-rpath -Wl,/opt/sage/local/lib
+/usr/bin/ld: lrsnash-lrsnashlib.o:/opt/sage/local/var/tmp/sage/build/lrslib-062+autotools-2017-03-03.p1/src/lrsnashlib.h:68: multiple definition of `FirstTime'; lrsnash-lrsnash.o:/opt/sage/local/var/tmp/sage/build/lrslib-062+autotools-2017-03-03.p1/src/lrsnashlib.h:68: first defined here
+collect2: error: ld returned 1 exit status
+```
 - [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)
 - [config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)
 - [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)
``````




---

archive/issue_comments_612765.json:
```json
{
    "body": "<a id='comment:4'></a>\n\n```diff\ndiff --git a/lrsgmp.c b/lrsgmp.c\nindex ba83d82..182b4fa 100755\n--- a/lrsgmp.c\n+++ b/lrsgmp.c\n@@ -250,7 +250,7 @@ readrat (lrs_mp Na, lrs_mp Da)\t/* read a rational or integer and convert to lrs_\n }\n \n #ifdef PLRS\n-string prat (char name[], lrs_mp Nin, lrs_mp Din)\t/*reduce and print Nin/Din  */\n+string prat (const char name[], lrs_mp Nin, lrs_mp Din)\t/*reduce and print Nin/Din  */\n {\n \n \t//create stream to collect output\n@@ -284,7 +284,7 @@ string prat (char name[], lrs_mp Nin, lrs_mp Din)\t/*reduce and print Nin/Din  */\n \treturn str;\n }\n \n-char *cprat (char name[], lrs_mp Nin, lrs_mp Din) \n+char *cprat (const char name[], lrs_mp Nin, lrs_mp Din)\n {\n \tchar *ret;\n \tunsigned long len;\n@@ -311,7 +311,7 @@ char *cprat (char name[], lrs_mp Nin, lrs_mp Din)\n \treturn ret;\n }\n \n-string pmp (char name[], lrs_mp Nt)\t/*print the long precision integer a */\n+string pmp (const char name[], lrs_mp Nt)\t/*print the long precision integer a */\n {\n \t\n \t//create stream to collect output\n@@ -333,7 +333,7 @@ string pmp (char name[], lrs_mp Nt)\t/*print the long precision integer a */\n #else\n \n void\n-pmp (char name[], lrs_mp Nt)\n+pmp (const char name[], lrs_mp Nt)\n {\n   fprintf (lrs_ofp, \"%s\", name);\n   if (sign (Nt) != NEG)\n@@ -343,7 +343,7 @@ pmp (char name[], lrs_mp Nt)\n }\n \n void \n-prat (char name[], lrs_mp Nin, lrs_mp Din)\n+prat (const char name[], lrs_mp Nin, lrs_mp Din)\n      /*print the long precision rational Nt/Dt  */\n {\n \tlrs_mp temp1, temp2;\n@@ -458,7 +458,7 @@ lrs_getdigits (long *a, long *b)\n }\n \n void *\n-xcalloc (long n, long s, long l, char *f)\n+xcalloc (long n, long s, long l, const char *f)\n {\n   void *tmp;\n \ndiff --git a/lrsgmp.h b/lrsgmp.h\nindex 6bc18a7..2f0e138 100755\n--- a/lrsgmp.h\n+++ b/lrsgmp.h\n@@ -168,13 +168,13 @@ void atomp (const char s[], lrs_mp a);\t/* convert string to lrs_mp integer\n long compare (lrs_mp a, lrs_mp b);\t/* a ? b and returns -1,0,1 for <,=,>             */\n void linint (lrs_mp a, long ka, lrs_mp b, long kb);     /* compute a*ka+b*kb --> a        */\n #ifdef PLRS\n-string pmp (char name[], lrs_mp a);\t/* print the long precision integer a             */\n-string prat (char name[], lrs_mp Nt, lrs_mp Dt);\t/* reduce and print  Nt/Dt                        */\n-char *cprat(char name[], lrs_mp Nt, lrs_mp Dt); /* C version of prat */\n+string pmp (const char name[], lrs_mp a);\t/* print the long precision integer a             */\n+string prat (const char name[], lrs_mp Nt, lrs_mp Dt);\t/* reduce and print  Nt/Dt                        */\n+char *cprat(const char name[], lrs_mp Nt, lrs_mp Dt); /* C version of prat */\n long plrs_readrat (lrs_mp Na, lrs_mp Da, const char * rat);\t/* take a rational number and convert to lrs_mp   */\n #else\n-void pmp (char name[], lrs_mp a);\t/* print the long precision integer a             */\n-void prat (char name[], lrs_mp Nt, lrs_mp Dt);\t/* reduce and print  Nt/Dt                        */\n+void pmp (const char name[], lrs_mp a);\t/* print the long precision integer a             */\n+void prat (const char name[], lrs_mp Nt, lrs_mp Dt);\t/* reduce and print  Nt/Dt                        */\n #endif\n void readmp (lrs_mp a);\t\t/* read an integer and convert to lrs_mp          */\n long readrat (lrs_mp Na, lrs_mp Da);\t/* read a rational or int and convert to lrs_mp   */\n@@ -214,7 +214,7 @@ void *calloc ();\n void *malloc ();\n #endif\n \n-void *xcalloc (long n, long s, long l, char *f);\n+void *xcalloc (long n, long s, long l, const char *f);\n \n void lrs_default_digits_overflow ();\n \ndiff --git a/lrslib.c b/lrslib.c\nindex ffe1ffa..3a5276c 100755\n--- a/lrslib.c\n+++ b/lrslib.c\n@@ -110,7 +110,7 @@ lrs_main (int argc, char *argv[])\n #else\n   if ( !lrs_init (\"\\n*lrs:\"))\n     return 1;\n-  printf(\"\\n%s\",AUTHOR);\n+  printf(\"\\n%s\", LRSLIB_AUTHOR);\n #endif\n \n /*********************************************************************************/\n@@ -765,7 +765,7 @@ redund_main (int argc, char *argv[])\n     return 1;\n \n   printf (\"\\n\");\n-  printf (AUTHOR);\n+  printf (LRSLIB_AUTHOR);\n \n /*********************************************************************************/\n /* Step 1: Allocate lrs_dat, lrs_dic and set up the problem                      */\n@@ -1100,8 +1100,8 @@ lrs_init (char *name)       /* returns TRUE if successful, else FALSE */\n {\n \n   printf (\"%s\", name);\n-  printf (TITLE);\n-  printf (VERSION);\n+  printf (LRSLIB_TITLE);\n+  printf (LRSLIB_VERSION);\n   printf (\"(\");\n   printf (BIT); \n   printf (\",\"); \n@@ -1124,8 +1124,8 @@ lrs_close (char *name)\n {\n \n   fprintf (lrs_ofp, \"\\n*%s\", name);\n-  fprintf (lrs_ofp, TITLE);\n-  fprintf (lrs_ofp, VERSION);\n+  fprintf (lrs_ofp, LRSLIB_TITLE);\n+  fprintf (lrs_ofp, LRSLIB_VERSION);\n   fprintf (lrs_ofp, \"(\");\n   fprintf (lrs_ofp, BIT);\n   fprintf (lrs_ofp, \",\");\ndiff --git a/lrslib.h b/lrslib.h\nindex 5857877..7ec43cd 100755\n--- a/lrslib.h\n+++ b/lrslib.h\n@@ -1,7 +1,7 @@\n /* lrslib.hpp (vertex enumeration using lexicographic reverse search) */\n-#define TITLE \"lrslib \"\n-#define VERSION \"v.6.2 2016.3.28\"   \n-#define AUTHOR \"*Copyright (C) 1995,2016, David Avis   avis@cs.mcgill.ca \"\n+#define LRSLIB_TITLE \"lrslib \"\n+#define LRSLIB_VERSION \"v.6.2 2016.3.28\"\n+#define LRSLIB_AUTHOR \"*Copyright (C) 1995,2016, David Avis   avis@cs.mcgill.ca \"\n \n /* This program is free software; you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\ndiff --git a/lrslong.c b/lrslong.c\nindex 2ea741d..4dccfc1 100755\n--- a/lrslong.c\n+++ b/lrslong.c\n@@ -456,7 +456,7 @@ lrs_getdigits (long *a, long *b)\n }\n \n void *\n-xcalloc (long n, long s, long l, char *f)\n+xcalloc (long n, long s, long l, const char *f)\n {\n   void *tmp;\n \ndiff --git a/lrslong.h b/lrslong.h\nindex 1913b18..30e925f 100755\n--- a/lrslong.h\n+++ b/lrslong.h\n@@ -225,7 +225,7 @@ void stringcpy (char *s, char *t);\t/* copy t to s pointer version\n \n void *calloc ();\n void *malloc ();\n-void *xcalloc (long n, long s, long l, char *f);\n+void *xcalloc (long n, long s, long l, const char *f);\n \n void lrs_default_digits_overflow ();\n \ndiff --git a/lrsmp.c b/lrsmp.c\nindex 7607dbe..aef732a 100755\n--- a/lrsmp.c\n+++ b/lrsmp.c\n@@ -1063,7 +1063,7 @@ mulrat (lrs_mp Na, lrs_mp Da, lrs_mp Nb, lrs_mp Db, lrs_mp Nc, lrs_mp Dc)\n \n \n void *\n-xcalloc (long n, long s, long l, char *f)\n+xcalloc (long n, long s, long l, const char *f)\n {\n   void *tmp;\n \ndiff --git a/lrsmp.h b/lrsmp.h\nindex 39001fe..5e1f2e7 100755\n--- a/lrsmp.h\n+++ b/lrsmp.h\n@@ -224,7 +224,7 @@ void lrs_getdigits (long *a, long *b);\t/* send digit information to user\n \n void stringcpy (char *s, char *t);\t/* copy t to s pointer version                            */\n \n-void *xcalloc (long n, long s, long l, char *f);\n+void *xcalloc (long n, long s, long l, const char *f);\n \n void lrs_default_digits_overflow ();\n void digits_overflow ();\ndiff --git a/lrsnash.c b/lrsnash.c\nindex ed4b55f..363ef77 100755\n--- a/lrsnash.c\n+++ b/lrsnash.c\n@@ -70,7 +70,7 @@ int openIO(void) {\n   if (!lrs_init(\"*lrsnash:\"))\n     return FALSE;\n   fprintf(stderr, \"\\n\");\n-  fprintf(stderr, AUTHOR);\n+  fprintf(stderr, LRSLIB_AUTHOR);\n   fprintf(stderr, \"\\n\");\n \tif(Outfile != NULL) {\n \t  if ((lrs_ofp = fopen(Outfile, \"w\")) == NULL) {\ndiff --git a/lrsnashlib.c b/lrsnashlib.c\nindex 6c05c7f..ab575fc 100755\n--- a/lrsnashlib.c\n+++ b/lrsnashlib.c\n@@ -19,6 +19,7 @@\n #include \"lrslib.h\"\n #include \"lrsnashlib.h\"\n \n+long FirstTime;\n \n //========================================================================\n // Standard solver. Modified version of main() from lrsNash\n@@ -804,7 +805,7 @@ int lrs_solve_nash_legacy (int argc, char *argv[])\n   if ( !lrs_init (\"\\n*nash:\"))\n     return 1;\n   printf(\"\\n\");\n-  printf(AUTHOR);\n+  printf(LRSLIB_AUTHOR);\n \n /*********************************************************************************/\n /* Step 1: Allocate lrs_dat, lrs_dic and set up the problem                      */\ndiff --git a/lrsnashlib.h b/lrsnashlib.h\nindex caf8a5c..809b765 100755\n--- a/lrsnashlib.h\n+++ b/lrsnashlib.h\n@@ -65,7 +65,7 @@ void initFwidth(game *g);\n void updateFwidth(game *g, int col, int pos, char *str);\n \n \n-long FirstTime;          /* set this to true for every new game to be solved */\n+extern long FirstTime;          /* set this to true for every new game to be solved */\n static long Debug_flag;\n static long Verbose_flag;\n \ndiff --git a/mplrs.c b/mplrs.c\nindex d5db655..4944be2 100755\n--- a/mplrs.c\n+++ b/mplrs.c\n@@ -1933,7 +1933,7 @@ void recv_counting_stats(int target)\n void initial_print(void)\n {\n \t\tfprintf(consumer.output, \"*mplrs:%s%s(%s)%d processes\\n%s\\n\",\n-\t\t\tTITLE,VERSION,ARITH,mplrs.size,AUTHOR);\n+\t\t\tLRSLIB_TITLE,LRSLIB_VERSION,ARITH,mplrs.size,LRSLIB_AUTHOR);\n \t\tfprintf(consumer.output, \"*Input taken from %s\\n\",\n \t\t\tmplrs.input_filename);\n \t\tfprintf(consumer.output, \"*Starting depth of %d maxcobases=%d \",\n@@ -1945,8 +1945,8 @@ void initial_print(void)\n \t\t\tfprintf(consumer.output, \"*countonly\\n\");\n \t\tif (consumer.output==stdout)\n \t\t\treturn;\n-\t\tprintf(\"*mplrs:%s%s(%s)%d processes\\n%s\\n\",TITLE,VERSION,ARITH,\n-\t\t       mplrs.size,AUTHOR);\n+\t\tprintf(\"*mplrs:%s%s(%s)%d processes\\n%s\\n\",LRSLIB_TITLE,LRSLIB_VERSION,ARITH,\n+\t\t       mplrs.size,LRSLIB_AUTHOR);\n \t\tprintf(\"*Input taken from %s\\n\",mplrs.input_filename);\n \t\tprintf(\"*Output written to: %s\\n\",consumer.output_filename);\n \t\tprintf(\"*Starting depth of %d maxcobases=%d \", master.initdepth,\ndiff --git a/plrs.cpp b/plrs.cpp\nindex 755dd52..060b687 100755\n--- a/plrs.cpp\n+++ b/plrs.cpp\n@@ -347,7 +347,7 @@ int main(int argc, char* argv[]){\n \tgettimeofday(&start, NULL);\n \n \t//Print version\n-\tprintf(\"*plrs:%s%s(%s)\",TITLE,VERSION,ARITH);\n+\tprintf(\"*plrs:%s%s(%s)\",LRSLIB_TITLE,LRSLIB_VERSION,ARITH);\n \n \tstring outputfile;\n         int firstfile=1;\n@@ -397,7 +397,7 @@ int main(int argc, char* argv[]){\n         }\n \n         printf(\"%d processes\\n\",MAXTHREADS);\n-        printf(\"%s\\n\",AUTHOR);\n+        printf(\"%s\\n\",LRSLIB_AUTHOR);\n \n \tif(INPUTFILE.empty()){\n \t\tprintf(\"No input file.\\n\");\n@@ -418,7 +418,7 @@ int main(int argc, char* argv[]){\n \t\n         if(OUTSTREAM)\n             {\n-\t     OUTSTREAM <<\"*plrs:\"<<TITLE<<VERSION<<\"(\"<<ARITH<<\")\"<<MAXTHREADS<<\" processes\"<<endl<<AUTHOR<<endl;\n+\t     OUTSTREAM <<\"*plrs:\"<<LRSLIB_TITLE<<LRSLIB_VERSION<<\"(\"<<ARITH<<\")\"<<MAXTHREADS<<\" processes\"<<endl<<LRSLIB_AUTHOR<<endl;\n \t     OUTSTREAM <<\"*Input taken from \"<<INPUTFILE<<endl;\n             }\n \tif (PLRS_DEBUG_PHASE1)\n```",
    "created_at": "2020-11-07T17:05:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612765",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>

```diff
diff --git a/lrsgmp.c b/lrsgmp.c
index ba83d82..182b4fa 100755
--- a/lrsgmp.c
+++ b/lrsgmp.c
@@ -250,7 +250,7 @@ readrat (lrs_mp Na, lrs_mp Da)	/* read a rational or integer and convert to lrs_
 }
 
 #ifdef PLRS
-string prat (char name[], lrs_mp Nin, lrs_mp Din)	/*reduce and print Nin/Din  */
+string prat (const char name[], lrs_mp Nin, lrs_mp Din)	/*reduce and print Nin/Din  */
 {
 
 	//create stream to collect output
@@ -284,7 +284,7 @@ string prat (char name[], lrs_mp Nin, lrs_mp Din)	/*reduce and print Nin/Din  */
 	return str;
 }
 
-char *cprat (char name[], lrs_mp Nin, lrs_mp Din) 
+char *cprat (const char name[], lrs_mp Nin, lrs_mp Din)
 {
 	char *ret;
 	unsigned long len;
@@ -311,7 +311,7 @@ char *cprat (char name[], lrs_mp Nin, lrs_mp Din)
 	return ret;
 }
 
-string pmp (char name[], lrs_mp Nt)	/*print the long precision integer a */
+string pmp (const char name[], lrs_mp Nt)	/*print the long precision integer a */
 {
 	
 	//create stream to collect output
@@ -333,7 +333,7 @@ string pmp (char name[], lrs_mp Nt)	/*print the long precision integer a */
 #else
 
 void
-pmp (char name[], lrs_mp Nt)
+pmp (const char name[], lrs_mp Nt)
 {
   fprintf (lrs_ofp, "%s", name);
   if (sign (Nt) != NEG)
@@ -343,7 +343,7 @@ pmp (char name[], lrs_mp Nt)
 }
 
 void 
-prat (char name[], lrs_mp Nin, lrs_mp Din)
+prat (const char name[], lrs_mp Nin, lrs_mp Din)
      /*print the long precision rational Nt/Dt  */
 {
 	lrs_mp temp1, temp2;
@@ -458,7 +458,7 @@ lrs_getdigits (long *a, long *b)
 }
 
 void *
-xcalloc (long n, long s, long l, char *f)
+xcalloc (long n, long s, long l, const char *f)
 {
   void *tmp;
 
diff --git a/lrsgmp.h b/lrsgmp.h
index 6bc18a7..2f0e138 100755
--- a/lrsgmp.h
+++ b/lrsgmp.h
@@ -168,13 +168,13 @@ void atomp (const char s[], lrs_mp a);	/* convert string to lrs_mp integer
 long compare (lrs_mp a, lrs_mp b);	/* a ? b and returns -1,0,1 for <,=,>             */
 void linint (lrs_mp a, long ka, lrs_mp b, long kb);     /* compute a*ka+b*kb --> a        */
 #ifdef PLRS
-string pmp (char name[], lrs_mp a);	/* print the long precision integer a             */
-string prat (char name[], lrs_mp Nt, lrs_mp Dt);	/* reduce and print  Nt/Dt                        */
-char *cprat(char name[], lrs_mp Nt, lrs_mp Dt); /* C version of prat */
+string pmp (const char name[], lrs_mp a);	/* print the long precision integer a             */
+string prat (const char name[], lrs_mp Nt, lrs_mp Dt);	/* reduce and print  Nt/Dt                        */
+char *cprat(const char name[], lrs_mp Nt, lrs_mp Dt); /* C version of prat */
 long plrs_readrat (lrs_mp Na, lrs_mp Da, const char * rat);	/* take a rational number and convert to lrs_mp   */
 #else
-void pmp (char name[], lrs_mp a);	/* print the long precision integer a             */
-void prat (char name[], lrs_mp Nt, lrs_mp Dt);	/* reduce and print  Nt/Dt                        */
+void pmp (const char name[], lrs_mp a);	/* print the long precision integer a             */
+void prat (const char name[], lrs_mp Nt, lrs_mp Dt);	/* reduce and print  Nt/Dt                        */
 #endif
 void readmp (lrs_mp a);		/* read an integer and convert to lrs_mp          */
 long readrat (lrs_mp Na, lrs_mp Da);	/* read a rational or int and convert to lrs_mp   */
@@ -214,7 +214,7 @@ void *calloc ();
 void *malloc ();
 #endif
 
-void *xcalloc (long n, long s, long l, char *f);
+void *xcalloc (long n, long s, long l, const char *f);
 
 void lrs_default_digits_overflow ();
 
diff --git a/lrslib.c b/lrslib.c
index ffe1ffa..3a5276c 100755
--- a/lrslib.c
+++ b/lrslib.c
@@ -110,7 +110,7 @@ lrs_main (int argc, char *argv[])
 #else
   if ( !lrs_init ("\n*lrs:"))
     return 1;
-  printf("\n%s",AUTHOR);
+  printf("\n%s", LRSLIB_AUTHOR);
 #endif
 
 /*********************************************************************************/
@@ -765,7 +765,7 @@ redund_main (int argc, char *argv[])
     return 1;
 
   printf ("\n");
-  printf (AUTHOR);
+  printf (LRSLIB_AUTHOR);
 
 /*********************************************************************************/
 /* Step 1: Allocate lrs_dat, lrs_dic and set up the problem                      */
@@ -1100,8 +1100,8 @@ lrs_init (char *name)       /* returns TRUE if successful, else FALSE */
 {
 
   printf ("%s", name);
-  printf (TITLE);
-  printf (VERSION);
+  printf (LRSLIB_TITLE);
+  printf (LRSLIB_VERSION);
   printf ("(");
   printf (BIT); 
   printf (","); 
@@ -1124,8 +1124,8 @@ lrs_close (char *name)
 {
 
   fprintf (lrs_ofp, "\n*%s", name);
-  fprintf (lrs_ofp, TITLE);
-  fprintf (lrs_ofp, VERSION);
+  fprintf (lrs_ofp, LRSLIB_TITLE);
+  fprintf (lrs_ofp, LRSLIB_VERSION);
   fprintf (lrs_ofp, "(");
   fprintf (lrs_ofp, BIT);
   fprintf (lrs_ofp, ",");
diff --git a/lrslib.h b/lrslib.h
index 5857877..7ec43cd 100755
--- a/lrslib.h
+++ b/lrslib.h
@@ -1,7 +1,7 @@
 /* lrslib.hpp (vertex enumeration using lexicographic reverse search) */
-#define TITLE "lrslib "
-#define VERSION "v.6.2 2016.3.28"   
-#define AUTHOR "*Copyright (C) 1995,2016, David Avis   avis@cs.mcgill.ca "
+#define LRSLIB_TITLE "lrslib "
+#define LRSLIB_VERSION "v.6.2 2016.3.28"
+#define LRSLIB_AUTHOR "*Copyright (C) 1995,2016, David Avis   avis@cs.mcgill.ca "
 
 /* This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
diff --git a/lrslong.c b/lrslong.c
index 2ea741d..4dccfc1 100755
--- a/lrslong.c
+++ b/lrslong.c
@@ -456,7 +456,7 @@ lrs_getdigits (long *a, long *b)
 }
 
 void *
-xcalloc (long n, long s, long l, char *f)
+xcalloc (long n, long s, long l, const char *f)
 {
   void *tmp;
 
diff --git a/lrslong.h b/lrslong.h
index 1913b18..30e925f 100755
--- a/lrslong.h
+++ b/lrslong.h
@@ -225,7 +225,7 @@ void stringcpy (char *s, char *t);	/* copy t to s pointer version
 
 void *calloc ();
 void *malloc ();
-void *xcalloc (long n, long s, long l, char *f);
+void *xcalloc (long n, long s, long l, const char *f);
 
 void lrs_default_digits_overflow ();
 
diff --git a/lrsmp.c b/lrsmp.c
index 7607dbe..aef732a 100755
--- a/lrsmp.c
+++ b/lrsmp.c
@@ -1063,7 +1063,7 @@ mulrat (lrs_mp Na, lrs_mp Da, lrs_mp Nb, lrs_mp Db, lrs_mp Nc, lrs_mp Dc)
 
 
 void *
-xcalloc (long n, long s, long l, char *f)
+xcalloc (long n, long s, long l, const char *f)
 {
   void *tmp;
 
diff --git a/lrsmp.h b/lrsmp.h
index 39001fe..5e1f2e7 100755
--- a/lrsmp.h
+++ b/lrsmp.h
@@ -224,7 +224,7 @@ void lrs_getdigits (long *a, long *b);	/* send digit information to user
 
 void stringcpy (char *s, char *t);	/* copy t to s pointer version                            */
 
-void *xcalloc (long n, long s, long l, char *f);
+void *xcalloc (long n, long s, long l, const char *f);
 
 void lrs_default_digits_overflow ();
 void digits_overflow ();
diff --git a/lrsnash.c b/lrsnash.c
index ed4b55f..363ef77 100755
--- a/lrsnash.c
+++ b/lrsnash.c
@@ -70,7 +70,7 @@ int openIO(void) {
   if (!lrs_init("*lrsnash:"))
     return FALSE;
   fprintf(stderr, "\n");
-  fprintf(stderr, AUTHOR);
+  fprintf(stderr, LRSLIB_AUTHOR);
   fprintf(stderr, "\n");
 	if(Outfile != NULL) {
 	  if ((lrs_ofp = fopen(Outfile, "w")) == NULL) {
diff --git a/lrsnashlib.c b/lrsnashlib.c
index 6c05c7f..ab575fc 100755
--- a/lrsnashlib.c
+++ b/lrsnashlib.c
@@ -19,6 +19,7 @@
 #include "lrslib.h"
 #include "lrsnashlib.h"
 
+long FirstTime;
 
 //========================================================================
 // Standard solver. Modified version of main() from lrsNash
@@ -804,7 +805,7 @@ int lrs_solve_nash_legacy (int argc, char *argv[])
   if ( !lrs_init ("\n*nash:"))
     return 1;
   printf("\n");
-  printf(AUTHOR);
+  printf(LRSLIB_AUTHOR);
 
 /*********************************************************************************/
 /* Step 1: Allocate lrs_dat, lrs_dic and set up the problem                      */
diff --git a/lrsnashlib.h b/lrsnashlib.h
index caf8a5c..809b765 100755
--- a/lrsnashlib.h
+++ b/lrsnashlib.h
@@ -65,7 +65,7 @@ void initFwidth(game *g);
 void updateFwidth(game *g, int col, int pos, char *str);
 
 
-long FirstTime;          /* set this to true for every new game to be solved */
+extern long FirstTime;          /* set this to true for every new game to be solved */
 static long Debug_flag;
 static long Verbose_flag;
 
diff --git a/mplrs.c b/mplrs.c
index d5db655..4944be2 100755
--- a/mplrs.c
+++ b/mplrs.c
@@ -1933,7 +1933,7 @@ void recv_counting_stats(int target)
 void initial_print(void)
 {
 		fprintf(consumer.output, "*mplrs:%s%s(%s)%d processes\n%s\n",
-			TITLE,VERSION,ARITH,mplrs.size,AUTHOR);
+			LRSLIB_TITLE,LRSLIB_VERSION,ARITH,mplrs.size,LRSLIB_AUTHOR);
 		fprintf(consumer.output, "*Input taken from %s\n",
 			mplrs.input_filename);
 		fprintf(consumer.output, "*Starting depth of %d maxcobases=%d ",
@@ -1945,8 +1945,8 @@ void initial_print(void)
 			fprintf(consumer.output, "*countonly\n");
 		if (consumer.output==stdout)
 			return;
-		printf("*mplrs:%s%s(%s)%d processes\n%s\n",TITLE,VERSION,ARITH,
-		       mplrs.size,AUTHOR);
+		printf("*mplrs:%s%s(%s)%d processes\n%s\n",LRSLIB_TITLE,LRSLIB_VERSION,ARITH,
+		       mplrs.size,LRSLIB_AUTHOR);
 		printf("*Input taken from %s\n",mplrs.input_filename);
 		printf("*Output written to: %s\n",consumer.output_filename);
 		printf("*Starting depth of %d maxcobases=%d ", master.initdepth,
diff --git a/plrs.cpp b/plrs.cpp
index 755dd52..060b687 100755
--- a/plrs.cpp
+++ b/plrs.cpp
@@ -347,7 +347,7 @@ int main(int argc, char* argv[]){
 	gettimeofday(&start, NULL);
 
 	//Print version
-	printf("*plrs:%s%s(%s)",TITLE,VERSION,ARITH);
+	printf("*plrs:%s%s(%s)",LRSLIB_TITLE,LRSLIB_VERSION,ARITH);
 
 	string outputfile;
         int firstfile=1;
@@ -397,7 +397,7 @@ int main(int argc, char* argv[]){
         }
 
         printf("%d processes\n",MAXTHREADS);
-        printf("%s\n",AUTHOR);
+        printf("%s\n",LRSLIB_AUTHOR);
 
 	if(INPUTFILE.empty()){
 		printf("No input file.\n");
@@ -418,7 +418,7 @@ int main(int argc, char* argv[]){
 	
         if(OUTSTREAM)
             {
-	     OUTSTREAM <<"*plrs:"<<TITLE<<VERSION<<"("<<ARITH<<")"<<MAXTHREADS<<" processes"<<endl<<AUTHOR<<endl;
+	     OUTSTREAM <<"*plrs:"<<LRSLIB_TITLE<<LRSLIB_VERSION<<"("<<ARITH<<")"<<MAXTHREADS<<" processes"<<endl<<LRSLIB_AUTHOR<<endl;
 	     OUTSTREAM <<"*Input taken from "<<INPUTFILE<<endl;
             }
 	if (PLRS_DEBUG_PHASE1)
```



---

archive/issue_comments_612766.json:
```json
{
    "body": "<a id='comment:5'></a>\nUpstream for our spkg is at https://github.com/mkoeppe/lrslib",
    "created_at": "2020-11-07T17:27:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612766",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Upstream for our spkg is at https://github.com/mkoeppe/lrslib



---

archive/issue_comments_612767.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Not yet reported upstream; Will do shortly.\"",
    "created_at": "2020-11-07T18:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612767",
    "user": "https://github.com/videlec"
}
```

Changing upstream from "N/A" to "Not yet reported upstream; Will do shortly."



---

archive/issue_comments_612768.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,7 @@\n - [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)\n - [config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)\n - [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)\n+\n+Upstream pull requests\n+- https://github.com/mkoeppe/lrslib/pull/6\n+- https://github.com/mkoeppe/lrslib/pull/7\n``````\n",
    "created_at": "2020-11-07T19:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612768",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,7 @@
 - [config.log](https://trac.sagemath.org/raw-attachment/ticket/30872/config.log)
 - [config.status](https://trac.sagemath.org/raw-attachment/ticket/30872/config.status)
 - [lrslib-062+autotools-2017-03-03.p1.log](https://trac.sagemath.org/raw-attachment/ticket/30872/lrslib-062%2Bautotools-2017-03-03.p1.log)
+
+Upstream pull requests
+- https://github.com/mkoeppe/lrslib/pull/6
+- https://github.com/mkoeppe/lrslib/pull/7
``````




---

archive/issue_comments_612769.json:
```json
{
    "body": "Changing upstream from \"Not yet reported upstream; Will do shortly.\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2020-11-07T19:22:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612769",
    "user": "https://github.com/videlec"
}
```

Changing upstream from "Not yet reported upstream; Will do shortly." to "Reported upstream. No feedback yet."



---

archive/issue_events_090771.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-04-07T19:29:15Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30872#event-90771"
}
```



---

archive/issue_comments_612770.json:
```json
{
    "body": "<a id='comment:8'></a>\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-04-07T19:29:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612770",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_612771.json:
```json
{
    "body": "<a id='comment:9'></a>\nWill be fixed in the update in #27745",
    "created_at": "2021-05-17T22:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612771",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Will be fixed in the update in #27745



---

archive/issue_events_090772.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-17T22:23:31Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30872#event-90772"
}
```



---

archive/issue_events_090773.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-05-17T22:23:31Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30872#event-90773"
}
```



---

archive/issue_comments_612772.json:
```json
{
    "body": "Dependencies: #27745",
    "created_at": "2021-05-17T22:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612772",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: #27745



---

archive/issue_comments_612773.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-17T22:23:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612773",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_612774.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-07-31T16:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612774",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_612775.json:
```json
{
    "body": "Reviewer: Thierry Monteil",
    "created_at": "2021-07-31T16:46:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612775",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Reviewer: Thierry Monteil



---

archive/issue_events_090774.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-07-31T17:58:02Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30872#event-90774"
}
```



---

archive/issue_comments_612776.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-31T17:58:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30872",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30872#issuecomment-612776",
    "user": "https://github.com/slel"
}
```

Resolution: fixed
