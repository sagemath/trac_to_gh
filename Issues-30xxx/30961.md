# Issue 30961: Fix valid input types for NumberField element constructor

archive/issues_030724.json:
```json
{
    "body": "Before this ticket, lists of elements with arbitrary parents were accepted:\n\n```\nsage: x = SR.var('x')\nsage: QQi = i.parent()\nsage: QQi((x, x))\n(I + 1)*x\n```\n\nHowever, some lists that arguably should be accepted for consistency were not:\n\n```\nsage: QQi(\"1\")\n1\nsage: QQi((\"1\", \"2\"))\n...\nTypeError: can't multiply sequence by non-int of type 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_gaussian'\n```\n\nAdditionally, lists and vector inputs behaved differently for no clear reason:\n\n```\nsage: QQi(RR(1))\n1\nsage: QQi((RR(1), RR(2)))\n1.00000000000000 + 2.00000000000000*I\nsage: _.parent()\nComplex Field with 53 bits of precision\nsage: QQi(vector((RR(1), RR(2))))\n...\nTypeError: unable to convert (1.00000000000000, 2.00000000000000) to Number Field in I with defining polynomial x^2 + 1 with I = 1*I\n```\n\nBranch/Commit: 780ed337ce09cacc3bbedf2fc5cfe6bb82ec40f5\n\nReviewer: Samuel Leli\u00e8vre\n\nAuthor: Marc Mezzarobba\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30961\n\n",
    "closed_at": "2020-12-06T12:49:24Z",
    "created_at": "2020-11-25T15:17:09Z",
    "labels": [
        "component: number fields",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Fix valid input types for NumberField element constructor",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30961",
    "user": "https://github.com/mezzarobba"
}
```
Before this ticket, lists of elements with arbitrary parents were accepted:

```
sage: x = SR.var('x')
sage: QQi = i.parent()
sage: QQi((x, x))
(I + 1)*x
```

However, some lists that arguably should be accepted for consistency were not:

```
sage: QQi("1")
1
sage: QQi(("1", "2"))
...
TypeError: can't multiply sequence by non-int of type 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_gaussian'
```

Additionally, lists and vector inputs behaved differently for no clear reason:

```
sage: QQi(RR(1))
1
sage: QQi((RR(1), RR(2)))
1.00000000000000 + 2.00000000000000*I
sage: _.parent()
Complex Field with 53 bits of precision
sage: QQi(vector((RR(1), RR(2))))
...
TypeError: unable to convert (1.00000000000000, 2.00000000000000) to Number Field in I with defining polynomial x^2 + 1 with I = 1*I
```

Branch/Commit: 780ed337ce09cacc3bbedf2fc5cfe6bb82ec40f5

Reviewer: Samuel Lelièvre

Author: Marc Mezzarobba

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30961





---

archive/issue_comments_606665.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|\n|[780ed33](https://github.com/sagemath/sagetrac-mirror/commit/780ed337ce09cacc3bbedf2fc5cfe6bb82ec40f5)|`#30961 fix construction of number field elts from lists/vectors`|",
    "created_at": "2020-11-25T15:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606665",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
|[780ed33](https://github.com/sagemath/sagetrac-mirror/commit/780ed337ce09cacc3bbedf2fc5cfe6bb82ec40f5)|`#30961 fix construction of number field elts from lists/vectors`|



---

archive/issue_comments_606666.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mmezzarobba/30961-fix_nf_elt_constructor\"",
    "created_at": "2020-11-25T15:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606666",
    "user": "https://github.com/mezzarobba"
}
```

Changing branch from "" to "u/mmezzarobba/30961-fix_nf_elt_constructor"



---

archive/issue_comments_606667.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-25T15:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606667",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_606668.json:
```json
{
    "body": "Changing commit from \"\" to \"780ed337ce09cacc3bbedf2fc5cfe6bb82ec40f5\"",
    "created_at": "2020-11-25T15:25:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606668",
    "user": "https://github.com/mezzarobba"
}
```

Changing commit from "" to "780ed337ce09cacc3bbedf2fc5cfe6bb82ec40f5"



---

archive/issue_comments_606669.json:
```json
{
    "body": "<a id='comment:2'></a>\nThese are welcome fixes.",
    "created_at": "2020-12-01T12:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606669",
    "user": "https://github.com/slel"
}
```

<a id='comment:2'></a>
These are welcome fixes.



---

archive/issue_comments_606670.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,13 @@\n-Lists of elements with arbitrary parents are accepted:\n+Before this ticket, lists of elements with arbitrary parents were accepted:\n \n ```\n sage: x = SR.var('x')\n sage: QQi = i.parent()\n-sage: QQi((x,x))\n+sage: QQi((x, x))\n (I + 1)*x\n ```\n \n-However, some lists that arguably should be accepted for consistency are not:\n+However, some lists that arguably should be accepted for consistency were not:\n \n ```\n sage: QQi(\"1\")\n@@ -17,7 +17,7 @@\n TypeError: can't multiply sequence by non-int of type 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_gaussian'\n ```\n \n-Additionally, lists and vector inputs behave differently for no clear reason:\n+Additionally, lists and vector inputs behaved differently for no clear reason:\n \n ```\n sage: QQi(RR(1))\n``````\n",
    "created_at": "2020-12-01T12:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606670",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,13 @@
-Lists of elements with arbitrary parents are accepted:
+Before this ticket, lists of elements with arbitrary parents were accepted:
 
 ```
 sage: x = SR.var('x')
 sage: QQi = i.parent()
-sage: QQi((x,x))
+sage: QQi((x, x))
 (I + 1)*x
 ```
 
-However, some lists that arguably should be accepted for consistency are not:
+However, some lists that arguably should be accepted for consistency were not:
 
 ```
 sage: QQi("1")
@@ -17,7 +17,7 @@
 TypeError: can't multiply sequence by non-int of type 'sage.rings.number_field.number_field_element_quadratic.NumberFieldElement_gaussian'
 ```
 
-Additionally, lists and vector inputs behave differently for no clear reason:
+Additionally, lists and vector inputs behaved differently for no clear reason:
 
 ```
 sage: QQi(RR(1))
``````




---

archive/issue_events_099010.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "rename": {
        "from": "multiple bugs in NumberField element constructor",
        "to": "Fix valid input types for NumberField element constructor"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30961#event-99010"
}
```



---

archive/issue_comments_606671.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-01T12:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606671",
    "user": "https://github.com/slel"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_606672.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Samuel Leli\u00e8vre\"",
    "created_at": "2020-12-01T12:47:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606672",
    "user": "https://github.com/slel"
}
```

Changing reviewer from "" to "Samuel Lelièvre"



---

archive/issue_comments_606673.json:
```json
{
    "body": "<a id='comment:3'></a>\nmerci !",
    "created_at": "2020-12-01T13:18:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606673",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'></a>
merci !



---

archive/issue_events_099011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-06T12:49:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30961#event-99011"
}
```



---

archive/issue_comments_606674.json:
```json
{
    "body": "Changing branch from \"u/mmezzarobba/30961-fix_nf_elt_constructor\" to \"780ed337ce09cacc3bbedf2fc5cfe6bb82ec40f5\"",
    "created_at": "2020-12-06T12:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606674",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mmezzarobba/30961-fix_nf_elt_constructor" to "780ed337ce09cacc3bbedf2fc5cfe6bb82ec40f5"



---

archive/issue_comments_606675.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-06T12:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30961",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30961#issuecomment-606675",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
