# Issue 30278: TensorFreeModule should not have a coercion from its quotients, ExtPowerFreeModule/ExtPowerDualFreeModule

archive/issues_030041.json:
```json
{
    "assignees": [],
    "body": "This coercion is going in the wrong direction and seems quite dangerous.\n\n\n\nDepends on #30229\n\nCC:  @tscrim @egourgoulhon @mjungmath\n\nComponent: **linear algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30278_\n\n",
    "created_at": "2020-08-03T05:18:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "TensorFreeModule should not have a coercion from its quotients, ExtPowerFreeModule/ExtPowerDualFreeModule",
    "type": "issue",
    "updated_at": "2023-01-07T21:39:40Z",
    "url": "https://github.com/sagemath/sage/issues/30278",
    "user": "https://github.com/mkoeppe"
}
```
This coercion is going in the wrong direction and seems quite dangerous.



Depends on #30229

CC:  @tscrim @egourgoulhon @mjungmath

Component: **linear algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/30278_





---

archive/issue_events_417097.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-03T05:18:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417097"
}
```



---

archive/issue_events_417098.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-03T05:18:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417098"
}
```



---

archive/issue_events_417099.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-03T05:18:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417099"
}
```



---

archive/issue_events_417100.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-03T05:18:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417100"
}
```



---

archive/issue_comments_480380.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nWhat do you mean by \"this coercion is going in the wrong direction\"?\nIt seems to me that the direction is correct. For instance, we have\n\n```\nsage: M = FiniteRankFreeModule(ZZ, 2, name='M')\nsage: T = M.tensor_module(2, 0)\nsage: A = M.exterior_power(2)\nsage: T.has_coerce_map_from(A)\nTrue\nsage: A.has_coerce_map_from(T)\nFalse\n```\nThis is correct because any element of `A` is a tensor of type (2,0) (and the identification is canonical), whereas the reverse is not true.",
    "created_at": "2020-08-03T08:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480380",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:1" align="right">comment:1</div>

What do you mean by "this coercion is going in the wrong direction"?
It seems to me that the direction is correct. For instance, we have

```
sage: M = FiniteRankFreeModule(ZZ, 2, name='M')
sage: T = M.tensor_module(2, 0)
sage: A = M.exterior_power(2)
sage: T.has_coerce_map_from(A)
True
sage: A.has_coerce_map_from(T)
False
```
This is correct because any element of `A` is a tensor of type (2,0) (and the identification is canonical), whereas the reverse is not true.



---

archive/issue_comments_480381.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nCompare with:\n\n```\nsage: ZZ.has_coerce_map_from(Z5)\nFalse\nsage: Z5.has_coerce_map_from(ZZ)\nTrue\n\nsage: QQ.has_coerce_map_from(QQ/ZZ)\nFalse\nsage: (QQ/ZZ).has_coerce_map_from(QQ)\nTrue\n```",
    "created_at": "2020-08-03T10:01:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480381",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

Compare with:

```
sage: ZZ.has_coerce_map_from(Z5)
False
sage: Z5.has_coerce_map_from(ZZ)
True

sage: QQ.has_coerce_map_from(QQ/ZZ)
False
sage: (QQ/ZZ).has_coerce_map_from(QQ)
True
```



---

archive/issue_comments_480382.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nReplying to [@mkoeppe](#comment:2):\n> Compare with:\n> \n> ```\n> sage: ZZ.has_coerce_map_from(Z5)\n> False\n> sage: Z5.has_coerce_map_from(ZZ)\n> True\n> \n> sage: QQ.has_coerce_map_from(QQ/ZZ)\n> False\n> sage: (QQ/ZZ).has_coerce_map_from(QQ)\n> True\n> ```\n\nThe coercion direction is clear from the quotient view point, but the opposite direction is also clear from the \"tensor with symmetries\" view point. IMHO, this is the latter that we need for tensor calculus: when we do `a + t`, with `a` in `A` and `t` in `T` (notations from [comment:1](#comment:1)), we want the result to be in `T` with a prior coercion of `a` to an element of `T`.",
    "created_at": "2020-08-03T10:24:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480382",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:3" align="right">comment:3</div>

Replying to [@mkoeppe](#comment:2):
> Compare with:
> 
> ```
> sage: ZZ.has_coerce_map_from(Z5)
> False
> sage: Z5.has_coerce_map_from(ZZ)
> True
> 
> sage: QQ.has_coerce_map_from(QQ/ZZ)
> False
> sage: (QQ/ZZ).has_coerce_map_from(QQ)
> True
> ```

The coercion direction is clear from the quotient view point, but the opposite direction is also clear from the "tensor with symmetries" view point. IMHO, this is the latter that we need for tensor calculus: when we do `a + t`, with `a` in `A` and `t` in `T` (notations from [comment:1](#comment:1)), we want the result to be in `T` with a prior coercion of `a` to an element of `T`.



---

archive/issue_comments_480383.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@egourgoulhon](#comment:3):\n> Replying to [@mkoeppe](#comment:2):\n> > Compare with:\n> > \n> > ```\n> > sage: ZZ.has_coerce_map_from(Z5)\n> > False\n> > sage: Z5.has_coerce_map_from(ZZ)\n> > True\n> > \n> > sage: QQ.has_coerce_map_from(QQ/ZZ)\n> > False\n> > sage: (QQ/ZZ).has_coerce_map_from(QQ)\n> > True\n> > ```\n\n> \n> The coercion direction is clear from the quotient view point, but the opposite direction is also clear from the \"tensor with symmetries\" view point. IMHO, this is the latter that we need for tensor calculus: when we do `a + t`, with `a` in `A` and `t` in `T` (notations from [comment:1](#comment:1)), we want the result to be in `T` with a prior coercion of `a` to an element of `T`. \n\nPrecisely. That is exactly what I was going to point out as well; but you were faster. :)\n\nThere is a canonical isomorphism between anti-symmetric tensors of rank `(k,0)` and the exterior algebra.\n\nI also vote to keep the current behavior, with the same argument you gave above.",
    "created_at": "2020-08-03T10:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480383",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@egourgoulhon](#comment:3):
> Replying to [@mkoeppe](#comment:2):
> > Compare with:
> > 
> > ```
> > sage: ZZ.has_coerce_map_from(Z5)
> > False
> > sage: Z5.has_coerce_map_from(ZZ)
> > True
> > 
> > sage: QQ.has_coerce_map_from(QQ/ZZ)
> > False
> > sage: (QQ/ZZ).has_coerce_map_from(QQ)
> > True
> > ```

> 
> The coercion direction is clear from the quotient view point, but the opposite direction is also clear from the "tensor with symmetries" view point. IMHO, this is the latter that we need for tensor calculus: when we do `a + t`, with `a` in `A` and `t` in `T` (notations from [comment:1](#comment:1)), we want the result to be in `T` with a prior coercion of `a` to an element of `T`. 

Precisely. That is exactly what I was going to point out as well; but you were faster. :)

There is a canonical isomorphism between anti-symmetric tensors of rank `(k,0)` and the exterior algebra.

I also vote to keep the current behavior, with the same argument you gave above.



---

archive/issue_comments_480384.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nBeing canonical is a necessary condition for a coerce map, but not a sufficient one.\n\nIn #30242 (unfinished), this canonical injection from the exterior module to the tensor module is made available as the \"lift\" map. But it should not be a coercion.",
    "created_at": "2020-08-03T10:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480384",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5" align="right">comment:5</div>

Being canonical is a necessary condition for a coerce map, but not a sufficient one.

In #30242 (unfinished), this canonical injection from the exterior module to the tensor module is made available as the "lift" map. But it should not be a coercion.



---

archive/issue_comments_480385.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nReplying to [@mkoeppe](#comment:5):\n> ...But it should not be a coercion.\n\nWhy not?\n\nI cannot see any practical use for such a coercion. The current coercion, on the other hand, is needed to perform tensor calculus. This is what the whole piece of software is about.\n\nFurthermore, removing the current coercion could corrupt many notebooks which have already been written with SageManifolds.",
    "created_at": "2020-08-03T11:06:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480385",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:6" align="right">comment:6</div>

Replying to [@mkoeppe](#comment:5):
> ...But it should not be a coercion.

Why not?

I cannot see any practical use for such a coercion. The current coercion, on the other hand, is needed to perform tensor calculus. This is what the whole piece of software is about.

Furthermore, removing the current coercion could corrupt many notebooks which have already been written with SageManifolds.



---

archive/issue_comments_480386.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@egourgoulhon](#comment:3):\n> [...] we need for tensor calculus: when we do `a + t`, with `a` in `A` and `t` in `T` (notations from [comment:1](#comment:1)), we want the result to be in `T` with a prior coercion of `a` to an element of `T`. \n\nCould you point me to a good example where you need this coercion, and where it would not be practical to use the lift map from A to T explicitly? This would be very helpful.\n\nThere is nothing really in the doctests of sage manifolds that needs these coercions. Indeed, if I disable these coercions, almost all tests pass.\n\n```diff\ndiff --git a/src/sage/manifolds/differentiable/tensorfield_module.py b/src/sage/manifolds/differentiable/tensorfield_module.py\nindex fff3fac10b..4cf940a28b 100644\n--- a/src/sage/manifolds/differentiable/tensorfield_module.py\n+++ b/src/sage/manifolds/differentiable/tensorfield_module.py\n@@ -448,14 +448,6 @@ class TensorFieldModule(UniqueRepresentation, Parent):\n             return (self._tensor_type == other._tensor_type\n                     and self._domain.is_subset(other._domain)\n                     and self._ambient_domain.is_subset(other._ambient_domain))\n-        if isinstance(other, DiffFormModule):\n-            # coercion of p-forms to type-(0,p) tensor fields\n-            return (self._vmodule is other.base_module()\n-                    and self._tensor_type == (0, other.degree()))\n-        if isinstance(other, MultivectorModule):\n-            # coercion of p-vector fields to type-(p,0) tensor fields\n-            return (self._vmodule is other.base_module()\n-                    and self._tensor_type == (other.degree(),0))\n         if isinstance(other, AutomorphismFieldGroup):\n             # coercion of automorphism fields to type-(1,1) tensor fields\n             return (self._vmodule is other.base_module()\ndiff --git a/src/sage/tensor/modules/tensor_free_module.py b/src/sage/tensor/modules/tensor_free_module.py\nindex 9285cbc0de..9886c90062 100644\n--- a/src/sage/tensor/modules/tensor_free_module.py\n+++ b/src/sage/tensor/modules/tensor_free_module.py\n@@ -617,15 +617,6 @@ class TensorFreeModule(FiniteRankFreeModule):\n                                          self._fmodule is other.domain()\n             else:\n                 return False\n-        if isinstance(other, ExtPowerFreeModule):\n-            # Coercion of an alternating contravariant tensor to a\n-            # type-(p,0) tensor:\n-            return self._tensor_type == (other.degree(), 0) and \\\n-                                    self._fmodule is other.base_module()\n-        if isinstance(other, ExtPowerDualFreeModule):\n-            # Coercion of an alternating form to a type-(0,p) tensor:\n-            return self._tensor_type == (0, other.degree()) and \\\n-                                    self._fmodule is other.base_module()\n         if isinstance(other, FreeModuleLinearGroup):\n             # Coercion of an automorphism to a type-(1,1) tensor:\n             return self._tensor_type == (1,1) and \\\n```",
    "created_at": "2020-08-03T12:04:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480386",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@egourgoulhon](#comment:3):
> [...] we need for tensor calculus: when we do `a + t`, with `a` in `A` and `t` in `T` (notations from [comment:1](#comment:1)), we want the result to be in `T` with a prior coercion of `a` to an element of `T`. 

Could you point me to a good example where you need this coercion, and where it would not be practical to use the lift map from A to T explicitly? This would be very helpful.

There is nothing really in the doctests of sage manifolds that needs these coercions. Indeed, if I disable these coercions, almost all tests pass.

```diff
diff --git a/src/sage/manifolds/differentiable/tensorfield_module.py b/src/sage/manifolds/differentiable/tensorfield_module.py
index fff3fac10b..4cf940a28b 100644
--- a/src/sage/manifolds/differentiable/tensorfield_module.py
+++ b/src/sage/manifolds/differentiable/tensorfield_module.py
@@ -448,14 +448,6 @@ class TensorFieldModule(UniqueRepresentation, Parent):
             return (self._tensor_type == other._tensor_type
                     and self._domain.is_subset(other._domain)
                     and self._ambient_domain.is_subset(other._ambient_domain))
-        if isinstance(other, DiffFormModule):
-            # coercion of p-forms to type-(0,p) tensor fields
-            return (self._vmodule is other.base_module()
-                    and self._tensor_type == (0, other.degree()))
-        if isinstance(other, MultivectorModule):
-            # coercion of p-vector fields to type-(p,0) tensor fields
-            return (self._vmodule is other.base_module()
-                    and self._tensor_type == (other.degree(),0))
         if isinstance(other, AutomorphismFieldGroup):
             # coercion of automorphism fields to type-(1,1) tensor fields
             return (self._vmodule is other.base_module()
diff --git a/src/sage/tensor/modules/tensor_free_module.py b/src/sage/tensor/modules/tensor_free_module.py
index 9285cbc0de..9886c90062 100644
--- a/src/sage/tensor/modules/tensor_free_module.py
+++ b/src/sage/tensor/modules/tensor_free_module.py
@@ -617,15 +617,6 @@ class TensorFreeModule(FiniteRankFreeModule):
                                          self._fmodule is other.domain()
             else:
                 return False
-        if isinstance(other, ExtPowerFreeModule):
-            # Coercion of an alternating contravariant tensor to a
-            # type-(p,0) tensor:
-            return self._tensor_type == (other.degree(), 0) and \
-                                    self._fmodule is other.base_module()
-        if isinstance(other, ExtPowerDualFreeModule):
-            # Coercion of an alternating form to a type-(0,p) tensor:
-            return self._tensor_type == (0, other.degree()) and \
-                                    self._fmodule is other.base_module()
         if isinstance(other, FreeModuleLinearGroup):
             # Coercion of an automorphism to a type-(1,1) tensor:
             return self._tensor_type == (1,1) and \
```



---

archive/issue_comments_480387.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mjungmath](#comment:6):\n> Replying to [@mkoeppe](#comment:5):\n> > ...But it should not be a coercion.\n\n> \n> Why not?\n\nBasically, because not everything that we call \"canonical\" is actually canonical in a technical sense. The map from T to the quotient A is actually canonical. \"The\" lift map from A to T is not -- we are merely picking a preferred choice.",
    "created_at": "2020-08-03T12:10:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480387",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mjungmath](#comment:6):
> Replying to [@mkoeppe](#comment:5):
> > ...But it should not be a coercion.

> 
> Why not?

Basically, because not everything that we call "canonical" is actually canonical in a technical sense. The map from T to the quotient A is actually canonical. "The" lift map from A to T is not -- we are merely picking a preferred choice.



---

archive/issue_comments_480388.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWhat would happen if one implements both directions, i.e. both coercions? Would that be possible?",
    "created_at": "2020-08-03T12:17:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480388",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:9" align="right">comment:9</div>

What would happen if one implements both directions, i.e. both coercions? Would that be possible?



---

archive/issue_comments_480389.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI would think that this is dangerous because the composition antisymmetrizes.",
    "created_at": "2020-08-03T12:21:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480389",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

I would think that this is dangerous because the composition antisymmetrizes.



---

archive/issue_comments_480390.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI just found a good discussion of the two viewpoints of `ExtPower` as a quotient space vs. as a subspace (which I was not familiar with) in https://kconrad.math.uconn.edu/blurbs/linmultialg/extmod.pdf, page 12/13.",
    "created_at": "2020-08-03T12:23:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480390",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

I just found a good discussion of the two viewpoints of `ExtPower` as a quotient space vs. as a subspace (which I was not familiar with) in https://kconrad.math.uconn.edu/blurbs/linmultialg/extmod.pdf, page 12/13.



---

archive/issue_comments_480391.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mkoeppe](#comment:10):\n> I would think that this is dangerous because the composition antisymmetrizes.\n\nWhere's the problem in that?\n\nHowever, due to my [comment:7](https://github.com/sagemath/sage/issues/30095#comment:7) in #30095, the aforementioned map is not necessarily an isomorphism if the field characteristic is not zero. Usually it is given, but we also allow other fields/rings as base. Hence, I tend to agree with you, Matthias.\n\nAnyway, it would be good to keep the from Eric mentioned behavior `a+T` in case of characteristic zero. Is there a compromise, we can go?\n\nBy the way: not having a doctest doesn't mean that it is not used in practice, I'd say. Imho, the documention is in general very sparse, even though the manifolds extension has a comparatively comprehensive documentation.",
    "created_at": "2020-08-03T12:32:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480391",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mkoeppe](#comment:10):
> I would think that this is dangerous because the composition antisymmetrizes.

Where's the problem in that?

However, due to my [comment:7](https://github.com/sagemath/sage/issues/30095#comment:7) in #30095, the aforementioned map is not necessarily an isomorphism if the field characteristic is not zero. Usually it is given, but we also allow other fields/rings as base. Hence, I tend to agree with you, Matthias.

Anyway, it would be good to keep the from Eric mentioned behavior `a+T` in case of characteristic zero. Is there a compromise, we can go?

By the way: not having a doctest doesn't mean that it is not used in practice, I'd say. Imho, the documention is in general very sparse, even though the manifolds extension has a comparatively comprehensive documentation.



---

archive/issue_comments_480392.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@mkoeppe](#comment:11):\n> I just found a good discussion of the two viewpoints of `ExtPower` as a quotient space vs. as a subspace (which I was not familiar with) in https://kconrad.math.uconn.edu/blurbs/linmultialg/extmod.pdf, page 12/13.\n\nThank you. This is more trustworthy than my reference to Wikipedia. On top, it is very good explained.",
    "created_at": "2020-08-03T13:43:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480392",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@mkoeppe](#comment:11):
> I just found a good discussion of the two viewpoints of `ExtPower` as a quotient space vs. as a subspace (which I was not familiar with) in https://kconrad.math.uconn.edu/blurbs/linmultialg/extmod.pdf, page 12/13.

Thank you. This is more trustworthy than my reference to Wikipedia. On top, it is very good explained.



---

archive/issue_comments_480393.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\n**Suggestion:** What about just renaming `ExtPowerFreeModule` into something like `AltContrTensorFreeModule`, and keep the coercion as it is.\n\nIn a next step, we create the class `ExtPowerFreeModule` which behaves similar to quotients of polynomial rings. Namely, applying a tensor to `ExtPowerFreeModule` (i.e. reducing w.r.t. the ideal `<x*x>`) yields an element of `AltContrTensorFreeModule`. In that class, we can include all the things we need for a quotient such as a method lift and the coercion from tensor fields to the exterior algebra given by this quotient.\n\nJust as a rough idea. This would make everyone happy and is mathematical rigorous.\n\n**Edit:** Sorry. Wasn't such a good idea. I don't think that is what we want.\n\nI think there should be no problem in implementing a coercion from `FreeModuleTensor` to `ExtPowerFreeModule` (given by the quotient) **and** a coercion from `ExtPowerFreeModule` to `FreeModuleTensor` (given by `1/k! \u03b1_(k,V)` in case of zero field characteristic).",
    "created_at": "2020-08-03T16:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480393",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:14" align="right">comment:14</div>

**Suggestion:** What about just renaming `ExtPowerFreeModule` into something like `AltContrTensorFreeModule`, and keep the coercion as it is.

In a next step, we create the class `ExtPowerFreeModule` which behaves similar to quotients of polynomial rings. Namely, applying a tensor to `ExtPowerFreeModule` (i.e. reducing w.r.t. the ideal `<x*x>`) yields an element of `AltContrTensorFreeModule`. In that class, we can include all the things we need for a quotient such as a method lift and the coercion from tensor fields to the exterior algebra given by this quotient.

Just as a rough idea. This would make everyone happy and is mathematical rigorous.

**Edit:** Sorry. Wasn't such a good idea. I don't think that is what we want.

I think there should be no problem in implementing a coercion from `FreeModuleTensor` to `ExtPowerFreeModule` (given by the quotient) **and** a coercion from `ExtPowerFreeModule` to `FreeModuleTensor` (given by `1/k! α_(k,V)` in case of zero field characteristic).



---

archive/issue_comments_480394.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@mkoeppe](#comment:11):\n> I just found a good discussion of the two viewpoints of `ExtPower` as a quotient space vs. as a subspace (which I was not familiar with) in https://kconrad.math.uconn.edu/blurbs/linmultialg/extmod.pdf, page 12/13.\n\nIndeed, in page 12 of this reference, we can read: *It means we can think of \u039b<sup>k</sup> (V ) as a subspace of the tensor power V<sup>\u2297k</sup> instead of as a quotient space. This viewpoint is widely used in differential geometry.* This is of course the differential geometry viewpoint that I took when introducing `ExtPowerFreeModule`. It is also written: ''That is fine for real and complex\nvector spaces (as in differential geometry), but it is not a universal method.''",
    "created_at": "2020-08-03T16:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480394",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@mkoeppe](#comment:11):
> I just found a good discussion of the two viewpoints of `ExtPower` as a quotient space vs. as a subspace (which I was not familiar with) in https://kconrad.math.uconn.edu/blurbs/linmultialg/extmod.pdf, page 12/13.

Indeed, in page 12 of this reference, we can read: *It means we can think of Λ<sup>k</sup> (V ) as a subspace of the tensor power V<sup>⊗k</sup> instead of as a quotient space. This viewpoint is widely used in differential geometry.* This is of course the differential geometry viewpoint that I took when introducing `ExtPowerFreeModule`. It is also written: ''That is fine for real and complex
vector spaces (as in differential geometry), but it is not a universal method.''



---

archive/issue_comments_480395.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@mjungmath](#comment:14):\n> **Suggestion:** What about just renaming `ExtPowerFreeModule` into something like `AltContrTensorFreeModule`, and keep the coercion as it is.\n> \n> In a next step, we create the class `ExtPowerFreeModule` which behaves similar to quotients of polynomial rings. Namely, applying a tensor to `ExtPowerFreeModule` (i.e. reducing w.r.t. the ideal `<x*x>`) yields an element of `AltContrTensorFreeModule`. In that class, we can include all the things we need for a quotient such as a method lift and the coercion from tensor fields to the exterior algebra given by this quotient.\n> \n> Just as a rough idea. This would make everyone happy and is mathematical rigorous.\n> \n> **Edit:** Sorry. Wasn't such a good idea. I don't think that is what we want.\n\nWhy do you think this is not a good idea? At least, this would be mathematically correct for any base ring...",
    "created_at": "2020-08-03T16:59:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480395",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@mjungmath](#comment:14):
> **Suggestion:** What about just renaming `ExtPowerFreeModule` into something like `AltContrTensorFreeModule`, and keep the coercion as it is.
> 
> In a next step, we create the class `ExtPowerFreeModule` which behaves similar to quotients of polynomial rings. Namely, applying a tensor to `ExtPowerFreeModule` (i.e. reducing w.r.t. the ideal `<x*x>`) yields an element of `AltContrTensorFreeModule`. In that class, we can include all the things we need for a quotient such as a method lift and the coercion from tensor fields to the exterior algebra given by this quotient.
> 
> Just as a rough idea. This would make everyone happy and is mathematical rigorous.
> 
> **Edit:** Sorry. Wasn't such a good idea. I don't think that is what we want.

Why do you think this is not a good idea? At least, this would be mathematically correct for any base ring...



---

archive/issue_comments_480396.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@mjungmath](#comment:12):\n> By the way: not having a doctest doesn't mean that it is not used in practice, I'd say.\n\nYes, I didn't mean to imply that. \n\n> Imho, the documention is in general very sparse, even though the manifolds extension has a comparatively comprehensive documentation.\n\nRather, as we discussed briefly on another ticket, I think it is crucial to extend the doctests so that typical use in practice is covered, perhaps by importing the sage-manifolds worksheets.",
    "created_at": "2020-08-03T18:37:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480396",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@mjungmath](#comment:12):
> By the way: not having a doctest doesn't mean that it is not used in practice, I'd say.

Yes, I didn't mean to imply that. 

> Imho, the documention is in general very sparse, even though the manifolds extension has a comparatively comprehensive documentation.

Rather, as we discussed briefly on another ticket, I think it is crucial to extend the doctests so that typical use in practice is covered, perhaps by importing the sage-manifolds worksheets.



---

archive/issue_comments_480397.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@mjungmath](#comment:14):\n> **Suggestion:** What about just renaming `ExtPowerFreeModule` into something like `AltContrTensorFreeModule`, and keep the coercion as it is.\n\nNote that #30229 (unfinished) creates submodules of the tensor modules with arbitrary prescribed symmetries. Prescribed antisymmetries are a special case. \nThese submodules, of course, do have coercions into the ambient tensor module.",
    "created_at": "2020-08-03T18:39:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480397",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@mjungmath](#comment:14):
> **Suggestion:** What about just renaming `ExtPowerFreeModule` into something like `AltContrTensorFreeModule`, and keep the coercion as it is.

Note that #30229 (unfinished) creates submodules of the tensor modules with arbitrary prescribed symmetries. Prescribed antisymmetries are a special case. 
These submodules, of course, do have coercions into the ambient tensor module.



---

archive/issue_comments_480398.json:
```json
{
    "body": "Dependencies: **#30229**",
    "created_at": "2020-08-03T18:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480398",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30229**



---

archive/issue_comments_480399.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@mkoeppe](#comment:18):\n> Replying to [@mjungmath](#comment:14):\n> > **Suggestion:** What about just renaming `ExtPowerFreeModule` into something like `AltContrTensorFreeModule`, and keep the coercion as it is.\n\n> \n> Note that #30229 (unfinished) creates submodules of the tensor modules with arbitrary prescribed symmetries. Prescribed antisymmetries are a special case. \n> These submodules, of course, do have coercions into the ambient tensor module.\n> \n\nIndeed, this seems the way to go.",
    "created_at": "2020-08-03T19:07:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480399",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@mkoeppe](#comment:18):
> Replying to [@mjungmath](#comment:14):
> > **Suggestion:** What about just renaming `ExtPowerFreeModule` into something like `AltContrTensorFreeModule`, and keep the coercion as it is.

> 
> Note that #30229 (unfinished) creates submodules of the tensor modules with arbitrary prescribed symmetries. Prescribed antisymmetries are a special case. 
> These submodules, of course, do have coercions into the ambient tensor module.
> 

Indeed, this seems the way to go.



---

archive/issue_events_417101.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417101"
}
```



---

archive/issue_events_417102.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417102"
}
```



---

archive/issue_comments_480400.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30278#issuecomment-480400",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_417103.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417103"
}
```



---

archive/issue_events_417104.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417104"
}
```



---

archive/issue_events_417105.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417105"
}
```



---

archive/issue_events_417106.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417106"
}
```



---

archive/issue_events_417107.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417107"
}
```



---

archive/issue_events_417108.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417108"
}
```



---

archive/issue_events_417109.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417109"
}
```



---

archive/issue_events_417110.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417110"
}
```



---

archive/issue_events_417111.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417111"
}
```



---

archive/issue_events_417112.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417112"
}
```



---

archive/issue_events_417113.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T21:39:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417113"
}
```



---

archive/issue_events_417114.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T21:39:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30278",
    "milestone_number": null,
    "milestone_title": "sage-9.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30278#event-417114"
}
```
