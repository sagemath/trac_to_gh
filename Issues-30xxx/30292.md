# Issue 30292: is_pyramid returns a wrong certificate

archive/issues_030055.json:
```json
{
    "body": "The method `is_pyramid` of `CombinatorialPolyhedron` returns a wrong certificate:\n\n```\nsage: Polyhedron([[0, -1, -1], [0, -1, 1], [0, 1, -1], [0, 1, 1], [1, 0, 0]]).is_pyramid(certificate=True)\n(True, A vertex at (0, -1, -1))\n```\n\nThis bug introduced in #29189; the indexing in `_face_iter(True, 0)` is different from the indexing in `Vrepresentation`.\n\nCC:  @jplab @kliem\n\nKeywords: polytope, combinatorialpolyhedron, is_pyramid\n\nBranch/Commit: 4c5c730e216d0d160408d2474adcc51b33d28075\n\nReviewer: Matthias Koeppe\n\nAuthor: Jonathan Kliem\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30292\n\n",
    "closed_at": "2020-08-12T19:53:50Z",
    "created_at": "2020-08-05T12:37:08Z",
    "labels": [
        "component: geometry",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "is_pyramid returns a wrong certificate",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30292",
    "user": "https://github.com/LaisRast"
}
```
The method `is_pyramid` of `CombinatorialPolyhedron` returns a wrong certificate:

```
sage: Polyhedron([[0, -1, -1], [0, -1, 1], [0, 1, -1], [0, 1, 1], [1, 0, 0]]).is_pyramid(certificate=True)
(True, A vertex at (0, -1, -1))
```

This bug introduced in #29189; the indexing in `_face_iter(True, 0)` is different from the indexing in `Vrepresentation`.

CC:  @jplab @kliem

Keywords: polytope, combinatorialpolyhedron, is_pyramid

Branch/Commit: 4c5c730e216d0d160408d2474adcc51b33d28075

Reviewer: Matthias Koeppe

Author: Jonathan Kliem

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30292





---

archive/issue_comments_596125.json:
```json
{
    "body": "<a id='comment:1'></a>\nThanks for catching this. Stupid mistake.",
    "created_at": "2020-08-10T16:10:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596125",
    "user": "https://github.com/kliem"
}
```

<a id='comment:1'></a>
Thanks for catching this. Stupid mistake.



---

archive/issue_comments_596126.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[fb22b48](https://git.sagemath.org/sage.git/commit?id=fb22b485e74152bc740eeb577eb1f90413eca342)|`fix certificate for pyramid`|",
    "created_at": "2020-08-10T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596126",
    "user": "https://github.com/kliem"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[fb22b48](https://git.sagemath.org/sage.git/commit?id=fb22b485e74152bc740eeb577eb1f90413eca342)|`fix certificate for pyramid`|



---

archive/issue_comments_596127.json:
```json
{
    "body": "Changing branch from \"\" to \"public/30292\"",
    "created_at": "2020-08-10T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596127",
    "user": "https://github.com/kliem"
}
```

Changing branch from "" to "public/30292"



---

archive/issue_comments_596128.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-10T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596128",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_596129.json:
```json
{
    "body": "Changing author from \"\" to \"Jonathan Kliem\"",
    "created_at": "2020-08-10T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596129",
    "user": "https://github.com/kliem"
}
```

Changing author from "" to "Jonathan Kliem"



---

archive/issue_comments_596130.json:
```json
{
    "body": "Changing commit from \"\" to \"fb22b485e74152bc740eeb577eb1f90413eca342\"",
    "created_at": "2020-08-10T16:17:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596130",
    "user": "https://github.com/kliem"
}
```

Changing commit from "" to "fb22b485e74152bc740eeb577eb1f90413eca342"



---

archive/issue_comments_596131.json:
```json
{
    "body": "<a id='comment:3'></a>\nPerhaps there should be a _test... method that checks the certificate?",
    "created_at": "2020-08-10T18:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596131",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
Perhaps there should be a _test... method that checks the certificate?



---

archive/issue_comments_596132.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[4c5c730](https://git.sagemath.org/sage.git/commit/?id=4c5c730e216d0d160408d2474adcc51b33d28075)|`add method `_test_pyramid``|",
    "created_at": "2020-08-10T19:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596132",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[4c5c730](https://git.sagemath.org/sage.git/commit/?id=4c5c730e216d0d160408d2474adcc51b33d28075)|`add method `_test_pyramid``|



---

archive/issue_comments_596133.json:
```json
{
    "body": "Changing commit from \"fb22b485e74152bc740eeb577eb1f90413eca342\" to \"4c5c730e216d0d160408d2474adcc51b33d28075\"",
    "created_at": "2020-08-10T19:57:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596133",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fb22b485e74152bc740eeb577eb1f90413eca342" to "4c5c730e216d0d160408d2474adcc51b33d28075"



---

archive/issue_comments_596134.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-08-10T22:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596134",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_596135.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-10T22:29:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596135",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_596136.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-08-10T22:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596136",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_596137.json:
```json
{
    "body": "<a id='comment:7'></a>\nThank you.",
    "created_at": "2020-08-11T04:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596137",
    "user": "https://github.com/kliem"
}
```

<a id='comment:7'></a>
Thank you.



---

archive/issue_comments_596138.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-12T19:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596138",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_078386.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-12T19:53:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30292#event-78386"
}
```



---

archive/issue_comments_596139.json:
```json
{
    "body": "Changing branch from \"public/30292\" to \"4c5c730e216d0d160408d2474adcc51b33d28075\"",
    "created_at": "2020-08-12T19:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30292",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30292#issuecomment-596139",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/30292" to "4c5c730e216d0d160408d2474adcc51b33d28075"
