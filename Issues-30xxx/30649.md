# Issue 30649: Reimplement "sage -p SPKG" as "cd $SAGE_ROOT && make SPKG-no-deps"

archive/issues_030412.json:
```json
{
    "assignees": [],
    "body": "This option installs a package without its dependencies, enabling experiments by experienced developers.\n\nAfter #29013 (Support installation of Python packages into separate venvs depending on the python version), `sage-spkg` requires an installation-tree argument. As a result, currently `sage -p` is broken, as reported in #32751.\n\nWe remove this direct use of `sage-spkg`.\n\nMaking this change also removes the last use of `SAGE_LOGS` from `src/`\n\nSince this now goes through a `make` target instead of using `sage-spkg` directly, after switching to a branch that adds a package, developers may need to manually invoke `bootstrap` and `configure` before using this option.\n\n\n\nDepends on #33127\n\nCC:  @jhpalmieri @orlitzky @kliem @vbraun\n\nComponent: **build**\n\nAuthor: **Matthias Koeppe, John Palmieri**\n\nBranch/Commit: **[`9ed0d60`](https://github.com/sagemath/sagetrac-mirror/commit/9ed0d606063186aac40ae434dda853948966edd4)**\n\nReviewer: **John Palmieri, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30649_\n\n",
    "closed_at": "2022-02-21T21:56:19Z",
    "created_at": "2020-09-24T02:57:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Reimplement \"sage -p SPKG\" as \"cd $SAGE_ROOT && make SPKG-no-deps\"",
    "type": "issue",
    "updated_at": "2022-02-21T21:56:19Z",
    "url": "https://github.com/sagemath/sage/issues/30649",
    "user": "https://github.com/mkoeppe"
}
```
This option installs a package without its dependencies, enabling experiments by experienced developers.

After #29013 (Support installation of Python packages into separate venvs depending on the python version), `sage-spkg` requires an installation-tree argument. As a result, currently `sage -p` is broken, as reported in #32751.

We remove this direct use of `sage-spkg`.

Making this change also removes the last use of `SAGE_LOGS` from `src/`

Since this now goes through a `make` target instead of using `sage-spkg` directly, after switching to a branch that adds a package, developers may need to manually invoke `bootstrap` and `configure` before using this option.



Depends on #33127

CC:  @jhpalmieri @orlitzky @kliem @vbraun

Component: **build**

Author: **Matthias Koeppe, John Palmieri**

Branch/Commit: **[`9ed0d60`](https://github.com/sagemath/sagetrac-mirror/commit/9ed0d606063186aac40ae434dda853948966edd4)**

Reviewer: **John Palmieri, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/30649_





---

archive/issue_events_419421.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-24T02:57:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419421"
}
```



---

archive/issue_events_419422.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-24T02:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419422"
}
```



---

archive/issue_events_419423.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-24T02:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419423"
}
```



---

archive/issue_events_419424.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-24T02:57:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419424"
}
```



---

archive/issue_comments_489102.json:
```json
{
    "body": "Dependencies: **#30657**",
    "created_at": "2020-09-24T22:17:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489102",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30657**



---

archive/issue_events_419425.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419425"
}
```



---

archive/issue_events_419426.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419426"
}
```



---

archive/issue_comments_489103.json:
```json
{
    "body": "Changed dependencies from **#30657** to **#31263**",
    "created_at": "2021-01-19T20:45:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489103",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30657** to **#31263**



---

archive/issue_events_419427.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-19T20:45:42Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "title_is": "Reimplement \"sage -p SPKG\" as \"cd $SAGE_ROOT/build/make && install SPKG-no-deps\"",
    "title_was": "Reimplement \"sage -p SPKG\" as \"make SPKG-no-deps\"",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419427"
}
```



---

archive/issue_comments_489104.json:
```json
{
    "body": "Branch: **[u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)**",
    "created_at": "2021-01-19T20:57:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489104",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)**



---

archive/issue_events_419428.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-19T21:05:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419428"
}
```



---

archive/issue_comments_489105.json:
```json
{
    "body": "Commit: **[`427f0bd`](https://github.com/sagemath/sagetrac-mirror/commit/427f0bdb7644e51fa3e126d6d5827a0b11e22456)**",
    "created_at": "2021-01-19T21:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489105",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`427f0bd`](https://github.com/sagemath/sagetrac-mirror/commit/427f0bdb7644e51fa3e126d6d5827a0b11e22456)**



---

archive/issue_events_419429.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-01-19T21:05:36Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "title_is": "Reimplement \"sage -p SPKG\" as \"cd $SAGE_ROOT/build/make && ./install SPKG-no-deps\"",
    "title_was": "Reimplement \"sage -p SPKG\" as \"cd $SAGE_ROOT/build/make && install SPKG-no-deps\"",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419429"
}
```



---

archive/issue_comments_489106.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2021-01-19T21:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489106",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_489107.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/427f0bdb7644e51fa3e126d6d5827a0b11e22456\"><code>427f0bd</code></a></td><td><code>src/bin/sage (-p): Use build/make/install SPKG-no-deps</code></td></tr></table>\n",
    "created_at": "2021-01-19T21:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489107",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:5"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/427f0bdb7644e51fa3e126d6d5827a0b11e22456"><code>427f0bd</code></a></td><td><code>src/bin/sage (-p): Use build/make/install SPKG-no-deps</code></td></tr></table>




---

archive/issue_comments_489108.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n-Making this change will allow us to remove the last use of `SAGE_LOGS` from `src/`.\n+This option installs a package without its dependencies, enabling experiments by experienced developers.\n+\n+Making this change \n+- removes the last use of `SAGE_LOGS` from `src/`\n+- is preparation for #29013 (Support installation of Python packages into separate venvs depending on the python version)\n+\n+Since this now goes through a `make` target instead of using `sage-spkg` directly, after switching to a branch that adds a package, developers may need to manually invoke `bootstrap` and `configure` before using this option.\n \n \n``````\n",
    "created_at": "2021-01-19T21:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489108",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
-Making this change will allow us to remove the last use of `SAGE_LOGS` from `src/`.
+This option installs a package without its dependencies, enabling experiments by experienced developers.
+
+Making this change 
+- removes the last use of `SAGE_LOGS` from `src/`
+- is preparation for #29013 (Support installation of Python packages into separate venvs depending on the python version)
+
+Since this now goes through a `make` target instead of using `sage-spkg` directly, after switching to a branch that adds a package, developers may need to manually invoke `bootstrap` and `configure` before using this option.
 
 
``````




---

archive/issue_comments_489109.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI think that this does not behave according to the documentation: \"Options are the same as for the -i command.\" For example `./sage -p -c bzip2` does not run the test suite, and `./sage -p -s biopython` does not preserve the build directory.",
    "created_at": "2021-01-19T23:56:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489109",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

I think that this does not behave according to the documentation: "Options are the same as for the -i command." For example `./sage -p -c bzip2` does not run the test suite, and `./sage -p -s biopython` does not preserve the build directory.



---

archive/issue_events_419430.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-01-19T23:56:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419430"
}
```



---

archive/issue_events_419431.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-01-19T23:56:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419431"
}
```



---

archive/issue_comments_489110.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nYou are right, this needs more thought",
    "created_at": "2021-01-20T00:23:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489110",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

You are right, this needs more thought



---

archive/issue_comments_489111.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489111",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_419432.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419432"
}
```



---

archive/issue_events_419433.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419433"
}
```



---

archive/issue_comments_489112.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489112",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_419434.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419434"
}
```



---

archive/issue_events_419435.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419435"
}
```



---

archive/issue_events_419436.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T18:39:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419436"
}
```



---

archive/issue_events_419437.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T18:39:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419437"
}
```



---

archive/issue_comments_489113.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,9 @@\n This option installs a package without its dependencies, enabling experiments by experienced developers.\n+\n+After #29013 (Support installation of Python packages into separate venvs depending on the python version), `sage-spkg` requires an installation-tree argument. As a result, currently `sage -p` is broken, as reported in #32751.\n \n Making this change \n - removes the last use of `SAGE_LOGS` from `src/`\n-- is preparation for #29013 (Support installation of Python packages into separate venvs depending on the python version)\n \n Since this now goes through a `make` target instead of using `sage-spkg` directly, after switching to a branch that adds a package, developers may need to manually invoke `bootstrap` and `configure` before using this option.\n \n``````\n",
    "created_at": "2021-10-24T18:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489113",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,9 @@
 This option installs a package without its dependencies, enabling experiments by experienced developers.
+
+After #29013 (Support installation of Python packages into separate venvs depending on the python version), `sage-spkg` requires an installation-tree argument. As a result, currently `sage -p` is broken, as reported in #32751.
 
 Making this change 
 - removes the last use of `SAGE_LOGS` from `src/`
-- is preparation for #29013 (Support installation of Python packages into separate venvs depending on the python version)
 
 Since this now goes through a `make` target instead of using `sage-spkg` directly, after switching to a branch that adds a package, developers may need to manually invoke `bootstrap` and `configure` before using this option.
 
``````




---

archive/issue_comments_489114.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,8 +2,9 @@\n \n After #29013 (Support installation of Python packages into separate venvs depending on the python version), `sage-spkg` requires an installation-tree argument. As a result, currently `sage -p` is broken, as reported in #32751.\n \n-Making this change \n-- removes the last use of `SAGE_LOGS` from `src/`\n+We remove this direct use of `sage-spkg`.\n+\n+Making this change also removes the last use of `SAGE_LOGS` from `src/`\n \n Since this now goes through a `make` target instead of using `sage-spkg` directly, after switching to a branch that adds a package, developers may need to manually invoke `bootstrap` and `configure` before using this option.\n \n``````\n",
    "created_at": "2021-10-24T18:39:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489114",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,8 +2,9 @@
 
 After #29013 (Support installation of Python packages into separate venvs depending on the python version), `sage-spkg` requires an installation-tree argument. As a result, currently `sage -p` is broken, as reported in #32751.
 
-Making this change 
-- removes the last use of `SAGE_LOGS` from `src/`
+We remove this direct use of `sage-spkg`.
+
+Making this change also removes the last use of `SAGE_LOGS` from `src/`
 
 Since this now goes through a `make` target instead of using `sage-spkg` directly, after switching to a branch that adds a package, developers may need to manually invoke `bootstrap` and `configure` before using this option.
 
``````




---

archive/issue_comments_489115.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf40b1dc40640fad269cba7160cd847dd597bca1\"><code>bf40b1d</code></a></td><td><code>src/bin/sage (-p): Use build/make/install SPKG-no-deps</code></td></tr></table>\n",
    "created_at": "2021-10-24T19:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489115",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf40b1dc40640fad269cba7160cd847dd597bca1"><code>bf40b1d</code></a></td><td><code>src/bin/sage (-p): Use build/make/install SPKG-no-deps</code></td></tr></table>




---

archive/issue_comments_489116.json:
```json
{
    "body": "Changed commit from **[`427f0bd`](https://github.com/sagemath/sagetrac-mirror/commit/427f0bdb7644e51fa3e126d6d5827a0b11e22456)** to **[`bf40b1d`](https://github.com/sagemath/sagetrac-mirror/commit/bf40b1dc40640fad269cba7160cd847dd597bca1)**",
    "created_at": "2021-10-24T19:35:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489116",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`427f0bd`](https://github.com/sagemath/sagetrac-mirror/commit/427f0bdb7644e51fa3e126d6d5827a0b11e22456)** to **[`bf40b1d`](https://github.com/sagemath/sagetrac-mirror/commit/bf40b1dc40640fad269cba7160cd847dd597bca1)**



---

archive/issue_comments_489117.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9aa68c73b444de8d120e79f43a5bee0998459d1\"><code>c9aa68c</code></a></td><td><code>src/bin/sage (-p): Use 'make' to install the package and pass on INSTALL_OPTIONS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d852ad84c878ec529300db0e2825f1460b2e0bc\"><code>2d852ad</code></a></td><td><code>build/bin/sage-dist-helpers (sdh_pip_uninstall): Use build/bin/sage-pip-uninstall, resurrected in simplified form</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5a89ad82614300cef196fb0d4eed4a07a591235\"><code>b5a89ad</code></a></td><td><code>build/bin/sage-dist-helpers (sdh_store_and_pip_install_wheel): Uninstall before installing, to ensure the wheel is installed even if the version is the same</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30a272e613ecf63b12702bc7fa1d630f2502ce83\"><code>30a272e</code></a></td><td><code>build/pkgs/sage_setup/dependencies: Add interpreter specs as dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d4357816318a05645edfd169c6f2b08108074fb1\"><code>d435781</code></a></td><td><code>build/bin/sage-dist-helpers (sdh_store_and_pip_install_wheel): Use sage-pip-uninstall</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/11c47d89d43eb2865ac9f39e5d4706749d9e0425\"><code>11c47d8</code></a></td><td><code>Merge #32659</code></td></tr></table>\n",
    "created_at": "2021-10-24T19:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489117",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9aa68c73b444de8d120e79f43a5bee0998459d1"><code>c9aa68c</code></a></td><td><code>src/bin/sage (-p): Use 'make' to install the package and pass on INSTALL_OPTIONS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d852ad84c878ec529300db0e2825f1460b2e0bc"><code>2d852ad</code></a></td><td><code>build/bin/sage-dist-helpers (sdh_pip_uninstall): Use build/bin/sage-pip-uninstall, resurrected in simplified form</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5a89ad82614300cef196fb0d4eed4a07a591235"><code>b5a89ad</code></a></td><td><code>build/bin/sage-dist-helpers (sdh_store_and_pip_install_wheel): Uninstall before installing, to ensure the wheel is installed even if the version is the same</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30a272e613ecf63b12702bc7fa1d630f2502ce83"><code>30a272e</code></a></td><td><code>build/pkgs/sage_setup/dependencies: Add interpreter specs as dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d4357816318a05645edfd169c6f2b08108074fb1"><code>d435781</code></a></td><td><code>build/bin/sage-dist-helpers (sdh_store_and_pip_install_wheel): Use sage-pip-uninstall</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/11c47d89d43eb2865ac9f39e5d4706749d9e0425"><code>11c47d8</code></a></td><td><code>Merge #32659</code></td></tr></table>




---

archive/issue_comments_489118.json:
```json
{
    "body": "Changed commit from **[`bf40b1d`](https://github.com/sagemath/sagetrac-mirror/commit/bf40b1dc40640fad269cba7160cd847dd597bca1)** to **[`11c47d8`](https://github.com/sagemath/sagetrac-mirror/commit/11c47d89d43eb2865ac9f39e5d4706749d9e0425)**",
    "created_at": "2021-10-24T19:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489118",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bf40b1d`](https://github.com/sagemath/sagetrac-mirror/commit/bf40b1dc40640fad269cba7160cd847dd597bca1)** to **[`11c47d8`](https://github.com/sagemath/sagetrac-mirror/commit/11c47d89d43eb2865ac9f39e5d4706749d9e0425)**



---

archive/issue_events_419438.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T19:44:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419438"
}
```



---

archive/issue_events_419439.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T19:44:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419439"
}
```



---

archive/issue_comments_489119.json:
```json
{
    "body": "Changed dependencies from **#31263** to **#32659**",
    "created_at": "2021-10-24T19:44:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489119",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31263** to **#32659**



---

archive/issue_events_419440.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-10-24T19:45:20Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "title_is": "Reimplement \"sage -p SPKG\" as \"cd $SAGE_ROOT && make SPKG-no-deps\"",
    "title_was": "Reimplement \"sage -p SPKG\" as \"cd $SAGE_ROOT/build/make && ./install SPKG-no-deps\"",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419440"
}
```



---

archive/issue_comments_489120.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThe code looks simple and it works for me. `./sage -p -s ...` and `./sage -p -c ...` work. One possible issue I can see is the one mentioned in the description: users may need to use `./bootstrap` and/or `./configure` first. But I think this is okay.\n\nOne real issue: `src/sage/tests/cmdline.py` fails doctests. I think the test is kind of stupid, though (the second one):\n\n```\n    Test ``sage --info [packages]`` and the equivalent\n    ``sage -p --info --info [packages]`` (the doubling of ``--info``\n    is intentional, that option should be idempotent)::\n```\nWhy do we care whether `./sage -p --info --info PKG` works? `./sage --info --info PKG` doesn't work, so why should we care whether it works if we insert `-p`?",
    "created_at": "2021-11-02T04:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489120",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

The code looks simple and it works for me. `./sage -p -s ...` and `./sage -p -c ...` work. One possible issue I can see is the one mentioned in the description: users may need to use `./bootstrap` and/or `./configure` first. But I think this is okay.

One real issue: `src/sage/tests/cmdline.py` fails doctests. I think the test is kind of stupid, though (the second one):

```
    Test ``sage --info [packages]`` and the equivalent
    ``sage -p --info --info [packages]`` (the doubling of ``--info``
    is intentional, that option should be idempotent)::
```
Why do we care whether `./sage -p --info --info PKG` works? `./sage --info --info PKG` doesn't work, so why should we care whether it works if we insert `-p`?



---

archive/issue_events_419441.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-04T01:52:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419441"
}
```



---

archive/issue_events_419442.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-11-04T01:52:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419442"
}
```



---

archive/issue_comments_489121.json:
```json
{
    "body": "Changed commit from **[`11c47d8`](https://github.com/sagemath/sagetrac-mirror/commit/11c47d89d43eb2865ac9f39e5d4706749d9e0425)** to **[`efaadfa`](https://github.com/sagemath/sagetrac-mirror/commit/efaadfa163087416a1c1bc07ef8762e69b122be0)**",
    "created_at": "2021-11-05T05:04:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489121",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`11c47d8`](https://github.com/sagemath/sagetrac-mirror/commit/11c47d89d43eb2865ac9f39e5d4706749d9e0425)** to **[`efaadfa`](https://github.com/sagemath/sagetrac-mirror/commit/efaadfa163087416a1c1bc07ef8762e69b122be0)**



---

archive/issue_comments_489122.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/59b576ed190e4d71c359479ce8b4d9fc2879605e\"><code>59b576e</code></a></td><td><code>Merge tag '9.5.beta5' into t/30649/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a320416aecd9e9a17af5a08117531bfb115e1237\"><code>a320416</code></a></td><td><code>src/bin/sage: Unify code for -i and -p</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6eba1640aa99a4385494e2a2b03a6aae262a9c54\"><code>6eba164</code></a></td><td><code>build/bin/sage-site: Move handling of -i, -f, -p here from src/bin/sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/140d1c0470734201dcb22f611b201c78cbe95bfa\"><code>140d1c0</code></a></td><td><code>build/bin/sage-spkg: Do not depend on sage-env for printing usage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60a2d99cee6efa4258e654f9188367eb3c46aca4\"><code>60a2d99</code></a></td><td><code>build/bin/sage-site: Do not depend on PATH being set for running --info</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/efaadfa163087416a1c1bc07ef8762e69b122be0\"><code>efaadfa</code></a></td><td><code>build/bin/sage-site: On -p, also do not run then final 'make all-build'</code></td></tr></table>\n",
    "created_at": "2021-11-05T05:04:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489122",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/59b576ed190e4d71c359479ce8b4d9fc2879605e"><code>59b576e</code></a></td><td><code>Merge tag '9.5.beta5' into t/30649/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a320416aecd9e9a17af5a08117531bfb115e1237"><code>a320416</code></a></td><td><code>src/bin/sage: Unify code for -i and -p</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6eba1640aa99a4385494e2a2b03a6aae262a9c54"><code>6eba164</code></a></td><td><code>build/bin/sage-site: Move handling of -i, -f, -p here from src/bin/sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/140d1c0470734201dcb22f611b201c78cbe95bfa"><code>140d1c0</code></a></td><td><code>build/bin/sage-spkg: Do not depend on sage-env for printing usage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60a2d99cee6efa4258e654f9188367eb3c46aca4"><code>60a2d99</code></a></td><td><code>build/bin/sage-site: Do not depend on PATH being set for running --info</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/efaadfa163087416a1c1bc07ef8762e69b122be0"><code>efaadfa</code></a></td><td><code>build/bin/sage-site: On -p, also do not run then final 'make all-build'</code></td></tr></table>




---

archive/issue_comments_489123.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nI've cleaned this up a bit more, it's now all in `build/bin/sage-site`.\nNeeds a bit more work though",
    "created_at": "2021-11-05T05:06:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489123",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

I've cleaned this up a bit more, it's now all in `build/bin/sage-site`.
Needs a bit more work though



---

archive/issue_events_419443.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419443"
}
```



---

archive/issue_events_419444.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419444"
}
```



---

archive/issue_comments_489124.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nMaybe this will resolve #22062: currently `sage -p --info sqlite` writes info to a log file as well as printing on the screen, and I think it should just print to the screen.",
    "created_at": "2022-01-05T23:45:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489124",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:21" align="right">comment:21</div>

Maybe this will resolve #22062: currently `sage -p --info sqlite` writes info to a log file as well as printing on the screen, and I think it should just print to the screen.



---

archive/issue_comments_489125.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nWhat work needs to be done here? This does indeed resolve #22062 because it disables the use of `sage -p --arg`.",
    "created_at": "2022-02-13T17:12:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489125",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:22" align="right">comment:22</div>

What work needs to be done here? This does indeed resolve #22062 because it disables the use of `sage -p --arg`.



---

archive/issue_comments_489126.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e11edef320f00cdfddbf767bfff680c6d643bd5\"><code>7e11ede</code></a></td><td><code>src/bin/sage (-p): Use build/make/install SPKG-no-deps</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d90eeae6f1cd0d43efc402444aa7790745e0356e\"><code>d90eeae</code></a></td><td><code>src/bin/sage (-p): Use 'make' to install the package and pass on INSTALL_OPTIONS</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fd4ffee736fd8f55c258a95081e145b46f2e5a81\"><code>fd4ffee</code></a></td><td><code>src/bin/sage: Unify code for -i and -p</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e8c0fab0fdb9a7aad4d0943b0da3da045bc3734\"><code>7e8c0fa</code></a></td><td><code>build/bin/sage-site: Move handling of -i, -f, -p here from src/bin/sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33251071a407a5a238a70ba0b16afb429505acde\"><code>3325107</code></a></td><td><code>build/bin/sage-spkg: Do not depend on sage-env for printing usage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1b796bd4ac6f5ea3be3807222b26c7086074b438\"><code>1b796bd</code></a></td><td><code>build/bin/sage-site: Do not depend on PATH being set for running --info</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0aa72332aa9069aaf4babb70cda561a6a381df32\"><code>0aa7233</code></a></td><td><code>build/bin/sage-site: On -p, also do not run then final 'make all-build'</code></td></tr></table>\n",
    "created_at": "2022-02-13T17:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489126",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e11edef320f00cdfddbf767bfff680c6d643bd5"><code>7e11ede</code></a></td><td><code>src/bin/sage (-p): Use build/make/install SPKG-no-deps</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d90eeae6f1cd0d43efc402444aa7790745e0356e"><code>d90eeae</code></a></td><td><code>src/bin/sage (-p): Use 'make' to install the package and pass on INSTALL_OPTIONS</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fd4ffee736fd8f55c258a95081e145b46f2e5a81"><code>fd4ffee</code></a></td><td><code>src/bin/sage: Unify code for -i and -p</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e8c0fab0fdb9a7aad4d0943b0da3da045bc3734"><code>7e8c0fa</code></a></td><td><code>build/bin/sage-site: Move handling of -i, -f, -p here from src/bin/sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33251071a407a5a238a70ba0b16afb429505acde"><code>3325107</code></a></td><td><code>build/bin/sage-spkg: Do not depend on sage-env for printing usage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1b796bd4ac6f5ea3be3807222b26c7086074b438"><code>1b796bd</code></a></td><td><code>build/bin/sage-site: Do not depend on PATH being set for running --info</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0aa72332aa9069aaf4babb70cda561a6a381df32"><code>0aa7233</code></a></td><td><code>build/bin/sage-site: On -p, also do not run then final 'make all-build'</code></td></tr></table>




---

archive/issue_comments_489127.json:
```json
{
    "body": "Changed commit from **[`efaadfa`](https://github.com/sagemath/sagetrac-mirror/commit/efaadfa163087416a1c1bc07ef8762e69b122be0)** to **[`0aa7233`](https://github.com/sagemath/sagetrac-mirror/commit/0aa72332aa9069aaf4babb70cda561a6a381df32)**",
    "created_at": "2022-02-13T17:40:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489127",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`efaadfa`](https://github.com/sagemath/sagetrac-mirror/commit/efaadfa163087416a1c1bc07ef8762e69b122be0)** to **[`0aa7233`](https://github.com/sagemath/sagetrac-mirror/commit/0aa72332aa9069aaf4babb70cda561a6a381df32)**



---

archive/issue_comments_489128.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nRebased on current beta.",
    "created_at": "2022-02-13T17:41:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489128",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

Rebased on current beta.



---

archive/issue_comments_489129.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI unfortunately don't recall what I meant in [comment:19](#comment%3A19)",
    "created_at": "2022-02-13T17:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489129",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

I unfortunately don't recall what I meant in [comment:19](#comment%3A19)



---

archive/issue_comments_489130.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac9f30225dacc7c443527a6c1b6aa7ad0526c3a7\"><code>ac9f302</code></a></td><td><code>src/bin/sage, src/bin/sage-env: Treat SAGE_ROOT = nonexisting directory like SAGE_ROOT unset</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ee6fba4ab5ead77a3905656e028064206afce3e\"><code>5ee6fba</code></a></td><td><code>src/bin/sage-env: Suppress warning 'overwriting SAGE_ROOT' for empty NEW_SAGE_ROOT</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b6e7f8d8662127744862900431a09aa2e5f1928\"><code>5b6e7f8</code></a></td><td><code>Merge #33127</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d42fabe95caebe1ba7bcb96d04031a0ad7dffa09\"><code>d42fabe</code></a></td><td><code>src/bin/sage: Another 'test -d SAGE_ROOT' instead of 'test -n SAGE_ROOT</code></td></tr></table>\n",
    "created_at": "2022-02-13T17:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489130",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac9f30225dacc7c443527a6c1b6aa7ad0526c3a7"><code>ac9f302</code></a></td><td><code>src/bin/sage, src/bin/sage-env: Treat SAGE_ROOT = nonexisting directory like SAGE_ROOT unset</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ee6fba4ab5ead77a3905656e028064206afce3e"><code>5ee6fba</code></a></td><td><code>src/bin/sage-env: Suppress warning 'overwriting SAGE_ROOT' for empty NEW_SAGE_ROOT</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b6e7f8d8662127744862900431a09aa2e5f1928"><code>5b6e7f8</code></a></td><td><code>Merge #33127</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d42fabe95caebe1ba7bcb96d04031a0ad7dffa09"><code>d42fabe</code></a></td><td><code>src/bin/sage: Another 'test -d SAGE_ROOT' instead of 'test -n SAGE_ROOT</code></td></tr></table>




---

archive/issue_comments_489131.json:
```json
{
    "body": "Changed commit from **[`0aa7233`](https://github.com/sagemath/sagetrac-mirror/commit/0aa72332aa9069aaf4babb70cda561a6a381df32)** to **[`d42fabe`](https://github.com/sagemath/sagetrac-mirror/commit/d42fabe95caebe1ba7bcb96d04031a0ad7dffa09)**",
    "created_at": "2022-02-13T17:46:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489131",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0aa7233`](https://github.com/sagemath/sagetrac-mirror/commit/0aa72332aa9069aaf4babb70cda561a6a381df32)** to **[`d42fabe`](https://github.com/sagemath/sagetrac-mirror/commit/d42fabe95caebe1ba7bcb96d04031a0ad7dffa09)**



---

archive/issue_comments_489132.json:
```json
{
    "body": "Changed dependencies from **#32659** to **#33127**",
    "created_at": "2022-02-13T17:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489132",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#32659** to **#33127**



---

archive/issue_comments_489133.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nA (stupid) doctest fails, and we could just delete it:\n\n```diff\ndiff --git a/src/sage/tests/cmdline.py b/src/sage/tests/cmdline.py\nindex 681ff703e2..fccba3f12f 100644\n--- a/src/sage/tests/cmdline.py\n+++ b/src/sage/tests/cmdline.py\n@@ -210,9 +210,7 @@ def test_executable(args, input=\"\", timeout=100.0, pydebug_ignore_warnings=False\n         sage: ret  # optional - sage_spkg\n         0\n \n-    Test ``sage --info [packages]`` and the equivalent\n-    ``sage -p --info --info [packages]`` (the doubling of ``--info``\n-    is intentional, that option should be idempotent)::\n+    Test ``sage --info [packages]``::\n \n         sage: out, err, ret = test_executable([\"sage\", \"--info\", \"sqlite\"])  # optional - sage_spkg\n         sage: print(out)  # optional - sage_spkg\n@@ -225,17 +223,6 @@ def test_executable(args, input=\"\", timeout=100.0, pydebug_ignore_warnings=False\n         sage: ret  # optional - sage_spkg\n         0\n \n-        sage: out, err, ret = test_executable([\"sage\", \"-p\", \"--info\", \"--info\", \"sqlite\"])  # optional - sage_spkg\n-        sage: print(out)  # optional - sage_spkg\n-        sqlite...\n-        SQLite is a software library that implements a self-contained,\n-        serverless, zero-configuration, transactional SQL database engine.\n-        ...\n-        sage: err  # optional - sage_spkg\n-        ''\n-        sage: ret  # optional - sage_spkg\n-        0\n-\n     Test ``sage-run`` on a Python file, both with an absolute and with a relative path::\n \n         sage: dir = tmp_dir(); name = 'python_test_file.py'\n```\nUnless there is some script somewhere that routinely produces commands like `sage --info --info ...`?",
    "created_at": "2022-02-14T22:40:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489133",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

A (stupid) doctest fails, and we could just delete it:

```diff
diff --git a/src/sage/tests/cmdline.py b/src/sage/tests/cmdline.py
index 681ff703e2..fccba3f12f 100644
--- a/src/sage/tests/cmdline.py
+++ b/src/sage/tests/cmdline.py
@@ -210,9 +210,7 @@ def test_executable(args, input="", timeout=100.0, pydebug_ignore_warnings=False
         sage: ret  # optional - sage_spkg
         0
 
-    Test ``sage --info [packages]`` and the equivalent
-    ``sage -p --info --info [packages]`` (the doubling of ``--info``
-    is intentional, that option should be idempotent)::
+    Test ``sage --info [packages]``::
 
         sage: out, err, ret = test_executable(["sage", "--info", "sqlite"])  # optional - sage_spkg
         sage: print(out)  # optional - sage_spkg
@@ -225,17 +223,6 @@ def test_executable(args, input="", timeout=100.0, pydebug_ignore_warnings=False
         sage: ret  # optional - sage_spkg
         0
 
-        sage: out, err, ret = test_executable(["sage", "-p", "--info", "--info", "sqlite"])  # optional - sage_spkg
-        sage: print(out)  # optional - sage_spkg
-        sqlite...
-        SQLite is a software library that implements a self-contained,
-        serverless, zero-configuration, transactional SQL database engine.
-        ...
-        sage: err  # optional - sage_spkg
-        ''
-        sage: ret  # optional - sage_spkg
-        0
-
     Test ``sage-run`` on a Python file, both with an absolute and with a relative path::
 
         sage: dir = tmp_dir(); name = 'python_test_file.py'
```
Unless there is some script somewhere that routinely produces commands like `sage --info --info ...`?



---

archive/issue_comments_489134.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nYes, I'm in favor of deleting this nonsensical test",
    "created_at": "2022-02-15T05:34:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489134",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Yes, I'm in favor of deleting this nonsensical test



---

archive/issue_comments_489135.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)** to **[u/jhpalmieri/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)**",
    "created_at": "2022-02-15T22:40:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489135",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)** to **[u/jhpalmieri/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)**



---

archive/issue_comments_489136.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThe issues in [comment:6](#comment%3A6) have been fixed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ebd85bc2ea02a04f4d230dea79082965dd774f7\"><code>8ebd85b</code></a></td><td><code>trac 30649: remove \"sage -p --info --info ...\" test</code></td></tr></table>\n",
    "created_at": "2022-02-15T22:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489136",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

The issues in [comment:6](#comment%3A6) have been fixed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ebd85bc2ea02a04f4d230dea79082965dd774f7"><code>8ebd85b</code></a></td><td><code>trac 30649: remove "sage -p --info --info ..." test</code></td></tr></table>




---

archive/issue_comments_489137.json:
```json
{
    "body": "Changed commit from **[`d42fabe`](https://github.com/sagemath/sagetrac-mirror/commit/d42fabe95caebe1ba7bcb96d04031a0ad7dffa09)** to **[`8ebd85b`](https://github.com/sagemath/sagetrac-mirror/commit/8ebd85bc2ea02a04f4d230dea79082965dd774f7)**",
    "created_at": "2022-02-15T22:44:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489137",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`d42fabe`](https://github.com/sagemath/sagetrac-mirror/commit/d42fabe95caebe1ba7bcb96d04031a0ad7dffa09)** to **[`8ebd85b`](https://github.com/sagemath/sagetrac-mirror/commit/8ebd85bc2ea02a04f4d230dea79082965dd774f7)**



---

archive/issue_comments_489138.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, John Palmieri**",
    "created_at": "2022-02-16T02:09:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489138",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, John Palmieri**



---

archive/issue_comments_489139.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)** to **[u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)**",
    "created_at": "2022-02-17T20:07:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489139",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/jhpalmieri/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)** to **[u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)**



---

archive/issue_comments_489140.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nAny ideas on what else needs to be done with this?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33d3d1ccc0a5abe156b506dd77b8bd4d2f46ed4e\"><code>33d3d1c</code></a></td><td><code>src/bin/sage-env: Merge code that sets SAGE_ROOT</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdada1c6b0eef8a857fc9f652f59ec1b86ce5c02\"><code>fdada1c</code></a></td><td><code>src/bin/sage-env: Update comments on SAGE_ENV_SOURCED</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7828a7919cc7735d6bb2cbe03196f008f0c33ad5\"><code>7828a79</code></a></td><td><code>src/bin/sage-env: Fixup: Move setting of SAGE_ROOT out of the inner-most if-block</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2bd07420e5d0775fbfa98e8460be918ceffbc06d\"><code>2bd0742</code></a></td><td><code>src/bin/sage-env: Suppress error message from probing for NEW_SAGE_ROOT</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/702b7795295d96f3601a129f0729f4006a55740a\"><code>702b779</code></a></td><td><code>src/bin/sage-env: Do not set SAGE_ROOT to empty; sage-location does not like it</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9fe2ed264d0ced37a68a93b6fce47b6dc60cb7e\"><code>c9fe2ed</code></a></td><td><code>Merge #33127</code></td></tr></table>\n",
    "created_at": "2022-02-19T22:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489140",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

Any ideas on what else needs to be done with this?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33d3d1ccc0a5abe156b506dd77b8bd4d2f46ed4e"><code>33d3d1c</code></a></td><td><code>src/bin/sage-env: Merge code that sets SAGE_ROOT</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdada1c6b0eef8a857fc9f652f59ec1b86ce5c02"><code>fdada1c</code></a></td><td><code>src/bin/sage-env: Update comments on SAGE_ENV_SOURCED</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7828a7919cc7735d6bb2cbe03196f008f0c33ad5"><code>7828a79</code></a></td><td><code>src/bin/sage-env: Fixup: Move setting of SAGE_ROOT out of the inner-most if-block</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2bd07420e5d0775fbfa98e8460be918ceffbc06d"><code>2bd0742</code></a></td><td><code>src/bin/sage-env: Suppress error message from probing for NEW_SAGE_ROOT</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/702b7795295d96f3601a129f0729f4006a55740a"><code>702b779</code></a></td><td><code>src/bin/sage-env: Do not set SAGE_ROOT to empty; sage-location does not like it</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9fe2ed264d0ced37a68a93b6fce47b6dc60cb7e"><code>c9fe2ed</code></a></td><td><code>Merge #33127</code></td></tr></table>




---

archive/issue_comments_489141.json:
```json
{
    "body": "Changed commit from **[`8ebd85b`](https://github.com/sagemath/sagetrac-mirror/commit/8ebd85bc2ea02a04f4d230dea79082965dd774f7)** to **[`c9fe2ed`](https://github.com/sagemath/sagetrac-mirror/commit/c9fe2ed264d0ced37a68a93b6fce47b6dc60cb7e)**",
    "created_at": "2022-02-19T22:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489141",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`8ebd85b`](https://github.com/sagemath/sagetrac-mirror/commit/8ebd85bc2ea02a04f4d230dea79082965dd774f7)** to **[`c9fe2ed`](https://github.com/sagemath/sagetrac-mirror/commit/c9fe2ed264d0ced37a68a93b6fce47b6dc60cb7e)**



---

archive/issue_events_419445.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-19T22:40:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419445"
}
```



---

archive/issue_events_419446.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-02-19T22:40:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419446"
}
```



---

archive/issue_comments_489142.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI think it is ready",
    "created_at": "2022-02-19T22:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489142",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

I think it is ready



---

archive/issue_comments_489143.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe change from [comment:30](#comment%3A30) and [comment:31](#comment%3A31) seems to have been lost, and I am getting an error when I try to push. I don't want to mess up the rest of the branch, so it might be better if you do it:\n\n```diff\ndiff --git a/src/sage/tests/cmdline.py b/src/sage/tests/cmdline.py\nindex 681ff703e25..fccba3f12fb 100644\n--- a/src/sage/tests/cmdline.py\n+++ b/src/sage/tests/cmdline.py\n@@ -210,9 +210,7 @@ def test_executable(args, input=\"\", timeout=100.0, pydebug_ignore_warnings=False\n         sage: ret  # optional - sage_spkg\n         0\n \n-    Test ``sage --info [packages]`` and the equivalent\n-    ``sage -p --info --info [packages]`` (the doubling of ``--info``\n-    is intentional, that option should be idempotent)::\n+    Test ``sage --info [packages]``::\n \n         sage: out, err, ret = test_executable([\"sage\", \"--info\", \"sqlite\"])  # optional - sage_spkg\n         sage: print(out)  # optional - sage_spkg\n@@ -225,17 +223,6 @@ def test_executable(args, input=\"\", timeout=100.0, pydebug_ignore_warnings=False\n         sage: ret  # optional - sage_spkg\n         0\n \n-        sage: out, err, ret = test_executable([\"sage\", \"-p\", \"--info\", \"--info\", \"sqlite\"])  # optional - sage_spkg\n-        sage: print(out)  # optional - sage_spkg\n-        sqlite...\n-        SQLite is a software library that implements a self-contained,\n-        serverless, zero-configuration, transactional SQL database engine.\n-        ...\n-        sage: err  # optional - sage_spkg\n-        ''\n-        sage: ret  # optional - sage_spkg\n-        0\n-\n     Test ``sage-run`` on a Python file, both with an absolute and with a relative path::\n \n         sage: dir = tmp_dir(); name = 'python_test_file.py'\n```",
    "created_at": "2022-02-20T01:11:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489143",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:36" align="right">comment:36</div>

The change from [comment:30](#comment%3A30) and [comment:31](#comment%3A31) seems to have been lost, and I am getting an error when I try to push. I don't want to mess up the rest of the branch, so it might be better if you do it:

```diff
diff --git a/src/sage/tests/cmdline.py b/src/sage/tests/cmdline.py
index 681ff703e25..fccba3f12fb 100644
--- a/src/sage/tests/cmdline.py
+++ b/src/sage/tests/cmdline.py
@@ -210,9 +210,7 @@ def test_executable(args, input="", timeout=100.0, pydebug_ignore_warnings=False
         sage: ret  # optional - sage_spkg
         0
 
-    Test ``sage --info [packages]`` and the equivalent
-    ``sage -p --info --info [packages]`` (the doubling of ``--info``
-    is intentional, that option should be idempotent)::
+    Test ``sage --info [packages]``::
 
         sage: out, err, ret = test_executable(["sage", "--info", "sqlite"])  # optional - sage_spkg
         sage: print(out)  # optional - sage_spkg
@@ -225,17 +223,6 @@ def test_executable(args, input="", timeout=100.0, pydebug_ignore_warnings=False
         sage: ret  # optional - sage_spkg
         0
 
-        sage: out, err, ret = test_executable(["sage", "-p", "--info", "--info", "sqlite"])  # optional - sage_spkg
-        sage: print(out)  # optional - sage_spkg
-        sqlite...
-        SQLite is a software library that implements a self-contained,
-        serverless, zero-configuration, transactional SQL database engine.
-        ...
-        sage: err  # optional - sage_spkg
-        ''
-        sage: ret  # optional - sage_spkg
-        0
-
     Test ``sage-run`` on a Python file, both with an absolute and with a relative path::
 
         sage: dir = tmp_dir(); name = 'python_test_file.py'
```



---

archive/issue_comments_489144.json:
```json
{
    "body": "<div id=\"comment:37\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65989cc2ed05f09c8a114a84d6c529bdc28a50dd\"><code>65989cc</code></a></td><td><code>trac 30649: remove \"sage -p --info --info ...\" test</code></td></tr></table>\n",
    "created_at": "2022-02-20T01:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489144",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65989cc2ed05f09c8a114a84d6c529bdc28a50dd"><code>65989cc</code></a></td><td><code>trac 30649: remove "sage -p --info --info ..." test</code></td></tr></table>




---

archive/issue_comments_489145.json:
```json
{
    "body": "Changed commit from **[`c9fe2ed`](https://github.com/sagemath/sagetrac-mirror/commit/c9fe2ed264d0ced37a68a93b6fce47b6dc60cb7e)** to **[`65989cc`](https://github.com/sagemath/sagetrac-mirror/commit/65989cc2ed05f09c8a114a84d6c529bdc28a50dd)**",
    "created_at": "2022-02-20T01:13:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489145",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c9fe2ed`](https://github.com/sagemath/sagetrac-mirror/commit/c9fe2ed264d0ced37a68a93b6fce47b6dc60cb7e)** to **[`65989cc`](https://github.com/sagemath/sagetrac-mirror/commit/65989cc2ed05f09c8a114a84d6c529bdc28a50dd)**



---

archive/issue_comments_489146.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nSorry for dropping this! Here it is",
    "created_at": "2022-02-20T01:14:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489146",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Sorry for dropping this! Here it is



---

archive/issue_comments_489147.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nI propose the following two changes (the first one because this is already in `sage-site` and the option is handled twenty lines later, the second is just a typo not related to the changes here but one that you see when you run `./sage -p`):\n\n```diff\ndiff --git a/build/bin/sage-site b/build/bin/sage-site\nindex 78848c389e..f7164503b7 100755\n--- a/build/bin/sage-site\n+++ b/build/bin/sage-site\n@@ -129,7 +129,7 @@ if [ \"$1\" = '-standard' -o \"$1\" = \"--standard\" ]; then\n fi\n \n if [ \"$1\" = '-p' ]; then\n-    # If there are no further arguments, display usage help (via an option handled by sage-site)\n+    # If there are no further arguments, display usage help\n     if [ $# -eq 1 ]; then\n         set -- --info\n     else\ndiff --git a/build/bin/sage-spkg b/build/bin/sage-spkg\nindex 1af55f6671..4478bc7f2d 100755\n--- a/build/bin/sage-spkg\n+++ b/build/bin/sage-spkg\n@@ -99,7 +99,7 @@ Options:\n    -y: automatically reply \"y\" for all prompts regarding\n        experimental and old-style packages; warning: there\n        is no guarantee that these packages will build correctly;\n-       use at your own risk\"\n+       use at your own risk\n    -n: automatically reply \"n\" for all prompts regarding\n        experimental and old-style packages\n    -o: allow fetching the package from its upstream URL\n```\nAlso for a future ticket: should `./sage -i` and `./sage -p` (with no further arguments) behave similarly? `./sage -i` builds some stuff, while `./sage -p` just prints a usage message and exits.",
    "created_at": "2022-02-20T04:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489147",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:39" align="right">comment:39</div>

I propose the following two changes (the first one because this is already in `sage-site` and the option is handled twenty lines later, the second is just a typo not related to the changes here but one that you see when you run `./sage -p`):

```diff
diff --git a/build/bin/sage-site b/build/bin/sage-site
index 78848c389e..f7164503b7 100755
--- a/build/bin/sage-site
+++ b/build/bin/sage-site
@@ -129,7 +129,7 @@ if [ "$1" = '-standard' -o "$1" = "--standard" ]; then
 fi
 
 if [ "$1" = '-p' ]; then
-    # If there are no further arguments, display usage help (via an option handled by sage-site)
+    # If there are no further arguments, display usage help
     if [ $# -eq 1 ]; then
         set -- --info
     else
diff --git a/build/bin/sage-spkg b/build/bin/sage-spkg
index 1af55f6671..4478bc7f2d 100755
--- a/build/bin/sage-spkg
+++ b/build/bin/sage-spkg
@@ -99,7 +99,7 @@ Options:
    -y: automatically reply "y" for all prompts regarding
        experimental and old-style packages; warning: there
        is no guarantee that these packages will build correctly;
-       use at your own risk"
+       use at your own risk
    -n: automatically reply "n" for all prompts regarding
        experimental and old-style packages
    -o: allow fetching the package from its upstream URL
```
Also for a future ticket: should `./sage -i` and `./sage -p` (with no further arguments) behave similarly? `./sage -i` builds some stuff, while `./sage -p` just prints a usage message and exits.



---

archive/issue_comments_489148.json:
```json
{
    "body": "Changed commit from **[`65989cc`](https://github.com/sagemath/sagetrac-mirror/commit/65989cc2ed05f09c8a114a84d6c529bdc28a50dd)** to **[`9ed0d60`](https://github.com/sagemath/sagetrac-mirror/commit/9ed0d606063186aac40ae434dda853948966edd4)**",
    "created_at": "2022-02-20T19:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489148",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`65989cc`](https://github.com/sagemath/sagetrac-mirror/commit/65989cc2ed05f09c8a114a84d6c529bdc28a50dd)** to **[`9ed0d60`](https://github.com/sagemath/sagetrac-mirror/commit/9ed0d606063186aac40ae434dda853948966edd4)**



---

archive/issue_comments_489149.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ed0d606063186aac40ae434dda853948966edd4\"><code>9ed0d60</code></a></td><td><code>build/bin/sage-site: Edits to comments, help text</code></td></tr></table>\n",
    "created_at": "2022-02-20T19:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489149",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ed0d606063186aac40ae434dda853948966edd4"><code>9ed0d60</code></a></td><td><code>build/bin/sage-site: Edits to comments, help text</code></td></tr></table>




---

archive/issue_comments_489150.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@jhpalmieri](#comment%3A39):\n> should `./sage -i` and `./sage -p` (with no further arguments) behave similarly? `./sage -i` builds some stuff, while `./sage -p` just prints a usage message and exits.\n\nI suppose `sage -p` could be reduced to just saying \"Nothing to do.\" instead of showing usage.",
    "created_at": "2022-02-20T19:11:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489150",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@jhpalmieri](#comment%3A39):
> should `./sage -i` and `./sage -p` (with no further arguments) behave similarly? `./sage -i` builds some stuff, while `./sage -p` just prints a usage message and exits.

I suppose `sage -p` could be reduced to just saying "Nothing to do." instead of showing usage.



---

archive/issue_comments_489151.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nAnd it's not clear if `sage -i` running `make all-build` is really useful, so we could consider changing this behavior too.\n\nBut as you say, that would be a future ticket.",
    "created_at": "2022-02-20T19:15:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489151",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

And it's not clear if `sage -i` running `make all-build` is really useful, so we could consider changing this behavior too.

But as you say, that would be a future ticket.



---

archive/issue_comments_489152.json:
```json
{
    "body": "Reviewer: **..., Matthias Koeppe**",
    "created_at": "2022-02-20T19:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489152",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **..., Matthias Koeppe**



---

archive/issue_comments_489153.json:
```json
{
    "body": "Changed reviewer from **..., Matthias Koeppe** to **John Palmieri, Matthias Koeppe**",
    "created_at": "2022-02-20T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489153",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **..., Matthias Koeppe** to **John Palmieri, Matthias Koeppe**



---

archive/issue_events_419447.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-02-20T21:41:11Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419447"
}
```



---

archive/issue_events_419448.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2022-02-20T21:41:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419448"
}
```



---

archive/issue_comments_489154.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nLooks good to me. It has some advantages that I didn't expect. Without this branch:\n\n```\n% ./sage -p pytest\nError: Installing old-style SPKGs is no longer supported\n```\nwhereas with this branch, `./sage -p pytest` works fine (although it says \"Successfully installed iniconfig-1.1.1 pytest-7.0.1\" so it is still doing some dependency checking \u2014\u00a0probably `pip` or similar, not Sage's build system).",
    "created_at": "2022-02-20T21:41:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489154",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:44" align="right">comment:44</div>

Looks good to me. It has some advantages that I didn't expect. Without this branch:

```
% ./sage -p pytest
Error: Installing old-style SPKGs is no longer supported
```
whereas with this branch, `./sage -p pytest` works fine (although it says "Successfully installed iniconfig-1.1.1 pytest-7.0.1" so it is still doing some dependency checking probably `pip` or similar, not Sage's build system).



---

archive/issue_comments_489155.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nThanks!",
    "created_at": "2022-02-20T22:27:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489155",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Thanks!



---

archive/issue_comments_489156.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)** to **[`9ed0d60`](https://github.com/sagemath/sagetrac-mirror/commit/9ed0d606063186aac40ae434dda853948966edd4)**",
    "created_at": "2022-02-21T21:56:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30649#issuecomment-489156",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/reimplement__sage__p_spkg__as__cd__sage_root_build_make____install_spkg_no_deps_)** to **[`9ed0d60`](https://github.com/sagemath/sagetrac-mirror/commit/9ed0d606063186aac40ae434dda853948966edd4)**



---

archive/issue_events_419449.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2022-02-21T21:56:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419449"
}
```



---

archive/issue_events_419450.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "72f573e6068986fd03b3775eaddad1625fad9919",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2022-02-21T21:56:19Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30649",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30649#event-419450"
}
```
