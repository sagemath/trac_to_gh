# Issue 30315: Switch jsmol to jupyter-jsmol

archive/issues_030078.json:
```json
{
    "body": "Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. \n\nIn this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n\nDiscussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n\nSee also: \n- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n- #31027 - Make jmol optional\n\n\n\nDepends on #31002\n\n**CC:**  @kcrisman @novoselt @fchapoton @antonio-rojas @kiwifb @slel @nbruin @paulmasson @egourgoulhon @kwankyu @enriqueartal @jcamp0x2a\n\n**Keywords:** sd111\n\n**Branch/Commit:** [80a3db1582a541ceaaa5098d36d5fedb4c98ee8b](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)\n\n**Reviewer:** Joshua Campbell\n\n**Author:** Matthias Koeppe\n\nIssue created by migration from https://trac.sagemath.org/ticket/30315\n\n",
    "closed_at": "2020-12-13T20:30:50Z",
    "created_at": "2020-08-07T18:26:49Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "title": "Switch jsmol to jupyter-jsmol",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/30315",
    "user": "https://github.com/mkoeppe"
}
```
Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. 

In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.

Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ

See also: 
- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
- #31027 - Make jmol optional



Depends on #31002

**CC:**  @kcrisman @novoselt @fchapoton @antonio-rojas @kiwifb @slel @nbruin @paulmasson @egourgoulhon @kwankyu @enriqueartal @jcamp0x2a

**Keywords:** sd111

**Branch/Commit:** [80a3db1582a541ceaaa5098d36d5fedb4c98ee8b](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)

**Reviewer:** Joshua Campbell

**Author:** Matthias Koeppe

Issue created by migration from https://trac.sagemath.org/ticket/30315





---

archive/issue_comments_483874.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n \n Then we can downgrade `jmol` to `optional`.\n \n+See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n``````\n",
    "created_at": "2020-08-07T18:46:49Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483874",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 
 Then we can downgrade `jmol` to `optional`.
 
+See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
``````




---

archive/issue_comments_483875.json:
```json
{
    "body": "<a id='comment:2'></a>\n(deleted)",
    "created_at": "2020-08-08T05:50:17Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483875",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
(deleted)



---

archive/issue_comments_483876.json:
```json
{
    "body": "<a id='comment:3'></a>\n`./sage -pip install jupyter-jsmol` installs proper nbextensions:\n\n```\n$ jupyter nbextension list\nKnown nbextensions:\n  config dir: /Users/mkoeppe/s/sage/sage-rebasing/local/etc/jupyter/nbconfig\n    notebook section\n      jupyter_jsmol/extension  enabled \n      - Validating: OK\n      jupyter-js-widgets/extension  enabled \n      - Validating: OK\n```\nThe installed files can be seen in `$SAGE_LOCAL/share/jupyter/nbextensions/jupyter_jsmol/`",
    "created_at": "2020-08-08T05:56:39Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483876",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
`./sage -pip install jupyter-jsmol` installs proper nbextensions:

```
$ jupyter nbextension list
Known nbextensions:
  config dir: /Users/mkoeppe/s/sage/sage-rebasing/local/etc/jupyter/nbconfig
    notebook section
      jupyter_jsmol/extension  enabled 
      - Validating: OK
      jupyter-js-widgets/extension  enabled 
      - Validating: OK
```
The installed files can be seen in `$SAGE_LOCAL/share/jupyter/nbextensions/jupyter_jsmol/`



---

archive/issue_events_271056.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271056"
}
```



---

archive/issue_events_271057.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271057"
}
```



---

archive/issue_comments_483877.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional)",
    "created_at": "2020-11-29T06:58:09Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483877",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional)



---

archive/issue_comments_483878.json:
```json
{
    "body": "**Commit:** [ac1ab7c844cdeea9346f35e5691755fc713d18c8](https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8)",
    "created_at": "2020-11-29T07:00:27Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483878",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [ac1ab7c844cdeea9346f35e5691755fc713d18c8](https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8)



---

archive/issue_events_271058.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-29T07:00:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271058"
}
```



---

archive/issue_comments_483879.json:
```json
{
    "body": "<a id='comment:7'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6617f87a26b35e9794dc868a3666e04f342c7c7a\">6617f87</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbaf661a17c8f52b388009c06ae7648cd8527e48\">cbaf661</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ca5328998627b45f1e25754dee43afabbc10d3f\">2ca5328</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8\">ac1ab7c</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr></table>\n",
    "created_at": "2020-11-29T07:00:27Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483879",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6617f87a26b35e9794dc868a3666e04f342c7c7a">6617f87</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbaf661a17c8f52b388009c06ae7648cd8527e48">cbaf661</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ca5328998627b45f1e25754dee43afabbc10d3f">2ca5328</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8">ac1ab7c</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr></table>




---

archive/issue_comments_483880.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2020-11-29T07:00:27Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483880",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_483881.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a\">e6ebaf7</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr></table>\n",
    "created_at": "2020-11-29T07:02:28Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483881",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a">e6ebaf7</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr></table>




---

archive/issue_comments_483882.json:
```json
{
    "body": "**Changing commit** from \"[ac1ab7c844cdeea9346f35e5691755fc713d18c8](https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8)\" to \"[e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a](https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a)\".",
    "created_at": "2020-11-29T07:02:28Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ac1ab7c844cdeea9346f35e5691755fc713d18c8](https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8)" to "[e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a](https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a)".



---

archive/issue_comments_483883.json:
```json
{
    "body": "<a id='comment:9'></a>\n`sagetex` declares `jmol` as a dependency - what is it used for?",
    "created_at": "2020-11-29T07:05:17Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483883",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
`sagetex` declares `jmol` as a dependency - what is it used for?



---

archive/issue_comments_483884.json:
```json
{
    "body": "<a id='comment:10'></a>\n> `sagetex` declares `jmol` as a dependency - what is it used for?\n\nI think for generating a 3d image in its documentation, compilation of which is part of its test suite.",
    "created_at": "2020-11-29T21:11:58Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483884",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>
> `sagetex` declares `jmol` as a dependency - what is it used for?

I think for generating a 3d image in its documentation, compilation of which is part of its test suite.



---

archive/issue_comments_483885.json:
```json
{
    "body": "<a id='comment:11'></a>\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483885",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_483886.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483886",
    "user": "https://github.com/mkoeppe"
}
```

**Changing keywords** from "" to "sd111".



---

archive/issue_comments_483887.json:
```json
{
    "body": "**Dependencies:** #31020",
    "created_at": "2020-12-07T04:07:27Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483887",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #31020



---

archive/issue_comments_483888.json:
```json
{
    "body": "**Changing commit** from \"[e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a](https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a)\" to \"[6a549d97f2051ae6c158adc06ae6b6d86fde24dc](https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc)\".",
    "created_at": "2020-12-07T04:09:29Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a](https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a)" to "[6a549d97f2051ae6c158adc06ae6b6d86fde24dc](https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc)".



---

archive/issue_comments_483889.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21259b2fa2087a7613dd69ad9bab0249d3242a58\">21259b2</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5f5f433398b4e4cd88ebbe54dc30291ae632973\">b5f5f43</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0fe5432edf50c2ff1220e7b39819bd1cc37ed8e\">a0fe543</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e24bc02470ffba6efb4e6284025399d35905ad0\">6e24bc0</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52803b4d02019feafab03053f952e925f15aa4fa\">52803b4</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/719445910103801ef8a0e79c9f06ec269e7beca6\">7194459</a></td><td><code>build/pkgs/jmol/type: Make it optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ed256ce64728942249fa79b72abcf37cb544814\">0ed256c</a></td><td><code>build/make/Makefile.in: Compute SAGE_CHECK_... earlier, before evaluating dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f714c119492a2540b74fc8e9521cc7204d4d28e\">1f714c1</a></td><td><code>build/pkgs/sagetex/dependencies: Conditionalize order-only deps on SAGE_CHECK_sagetex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc\">6a549d9</a></td><td><code>Merge branch 't/31020/build_make_makefile_in__fix_sage_check_logic__conditionalize_sagetex_dependencies_on_sage_check' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr></table>\n",
    "created_at": "2020-12-07T04:09:29Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483889",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21259b2fa2087a7613dd69ad9bab0249d3242a58">21259b2</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5f5f433398b4e4cd88ebbe54dc30291ae632973">b5f5f43</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0fe5432edf50c2ff1220e7b39819bd1cc37ed8e">a0fe543</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e24bc02470ffba6efb4e6284025399d35905ad0">6e24bc0</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52803b4d02019feafab03053f952e925f15aa4fa">52803b4</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/719445910103801ef8a0e79c9f06ec269e7beca6">7194459</a></td><td><code>build/pkgs/jmol/type: Make it optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ed256ce64728942249fa79b72abcf37cb544814">0ed256c</a></td><td><code>build/make/Makefile.in: Compute SAGE_CHECK_... earlier, before evaluating dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f714c119492a2540b74fc8e9521cc7204d4d28e">1f714c1</a></td><td><code>build/pkgs/sagetex/dependencies: Conditionalize order-only deps on SAGE_CHECK_sagetex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc">6a549d9</a></td><td><code>Merge branch 't/31020/build_make_makefile_in__fix_sage_check_logic__conditionalize_sagetex_dependencies_on_sage_check' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr></table>




---

archive/issue_comments_483890.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [@kcrisman](#comment%3A10):\n> > `sagetex` declares `jmol` as a dependency - what is it used for?\n\n> \n> I think for generating a 3d image in its documentation, compilation of which is part of its test suite.\n\nThanks! I have adjusted the dependencies in #31020 (now a dependency) so that `jmol` is only treated as a dependency when `SAGE_CHECK` is active.",
    "created_at": "2020-12-07T04:10:39Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483890",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Replying to [@kcrisman](#comment%3A10):
> > `sagetex` declares `jmol` as a dependency - what is it used for?

> 
> I think for generating a 3d image in its documentation, compilation of which is part of its test suite.

Thanks! I have adjusted the dependencies in #31020 (now a dependency) so that `jmol` is only treated as a dependency when `SAGE_CHECK` is active.



---

archive/issue_comments_483891.json:
```json
{
    "body": "**Changing commit** from \"[6a549d97f2051ae6c158adc06ae6b6d86fde24dc](https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc)\" to \"[ae970c2c80a24bfeab28a1748881147c6cd12bf8](https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8)\".",
    "created_at": "2020-12-07T04:34:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483891",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6a549d97f2051ae6c158adc06ae6b6d86fde24dc](https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc)" to "[ae970c2c80a24bfeab28a1748881147c6cd12bf8](https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8)".



---

archive/issue_comments_483892.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a45d72b552d7baeb046a9829e63353e8aa7e252\">3a45d72</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Do not rebuild the javascript file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8e0364dc6ff16a799b64670e75f05a4dfac3b1e\">a8e0364</a></td><td><code>Specify bdist temp folder for WSL compatibility</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3077c71f488ddb2b6fe4058cbbc981d02d7ba95\">a3077c7</a></td><td><code>Use mktemp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5a14a396fd1f1cd2de0d6fd465e546b7ff0b33b\">c5a14a3</a></td><td><code>build/bin/sage-dist-helpers (sdh_setup_bdist_wheel): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb10429b974d649741c67077ed50a00815880932\">fb10429</a></td><td><code>build/pkgs/*/spkg-install.in: Use new function sdh_setup_bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32bf46376eb931956d38a0d9811960db51d899d0\">32bf463</a></td><td><code>Merge branch 't/31002/public/build/bdist_wsl' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8\">ae970c2</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Use new function sdh_setup_bdist_wheel</code></td></tr></table>\n",
    "created_at": "2020-12-07T04:34:52Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483892",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a45d72b552d7baeb046a9829e63353e8aa7e252">3a45d72</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Do not rebuild the javascript file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8e0364dc6ff16a799b64670e75f05a4dfac3b1e">a8e0364</a></td><td><code>Specify bdist temp folder for WSL compatibility</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3077c71f488ddb2b6fe4058cbbc981d02d7ba95">a3077c7</a></td><td><code>Use mktemp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5a14a396fd1f1cd2de0d6fd465e546b7ff0b33b">c5a14a3</a></td><td><code>build/bin/sage-dist-helpers (sdh_setup_bdist_wheel): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb10429b974d649741c67077ed50a00815880932">fb10429</a></td><td><code>build/pkgs/*/spkg-install.in: Use new function sdh_setup_bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32bf46376eb931956d38a0d9811960db51d899d0">32bf463</a></td><td><code>Merge branch 't/31002/public/build/bdist_wsl' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8">ae970c2</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Use new function sdh_setup_bdist_wheel</code></td></tr></table>




---

archive/issue_comments_483893.json:
```json
{
    "body": "**Changing dependencies** from \"#31020\" to \"#31002, #31020\".",
    "created_at": "2020-12-07T04:45:13Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483893",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#31020" to "#31002, #31020".



---

archive/issue_comments_483894.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,4 +4,8 @@\n \n Then we can downgrade `jmol` to `optional`.\n \n+Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n+\n See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+\n+\n``````\n",
    "created_at": "2020-12-07T05:12:10Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483894",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,4 +4,8 @@
 
 Then we can downgrade `jmol` to `optional`.
 
+Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ
+
 See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+
+
``````




---

archive/issue_comments_483895.json:
```json
{
    "body": "<a id='comment:18'></a>\nThat is not a good idea.  Because we want people to be able to build the documentation for SageTeX, which after all isn't \"really\" upstream.  Instead, we should see if jsmol or some other tool suffices to build 3d pictures in SageTeX, which is a very useful use case for it.  Untested = broken, and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.",
    "created_at": "2020-12-07T13:12:25Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483895",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>
That is not a good idea.  Because we want people to be able to build the documentation for SageTeX, which after all isn't "really" upstream.  Instead, we should see if jsmol or some other tool suffices to build 3d pictures in SageTeX, which is a very useful use case for it.  Untested = broken, and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.



---

archive/issue_comments_483896.json:
```json
{
    "body": "<a id='comment:19'></a>\n> and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.\n\nThough my info on the build system is pretty outdated :-)",
    "created_at": "2020-12-07T13:12:53Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483896",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>
> and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.

Though my info on the build system is pretty outdated :-)



---

archive/issue_comments_483897.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [@kcrisman](#comment%3A19):\n> > and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.\n\n> Though my info on the build system is pretty outdated :-)\n\nActually, we've introduced a few of these this year because the complexity of Python test frameworks has escalated and we don't want to ship all of their dependencies.  Currently, `networkx`, `rpy2`, and `sage_sws2rst` all have check-only dependencies.",
    "created_at": "2020-12-07T18:31:01Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483897",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Replying to [@kcrisman](#comment%3A19):
> > and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.

> Though my info on the build system is pretty outdated :-)

Actually, we've introduced a few of these this year because the complexity of Python test frameworks has escalated and we don't want to ship all of their dependencies.  Currently, `networkx`, `rpy2`, and `sage_sws2rst` all have check-only dependencies.



---

archive/issue_comments_483898.json:
```json
{
    "body": "<a id='comment:21'></a>\nInteresting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ...",
    "created_at": "2020-12-07T18:34:03Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483898",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>
Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ...



---

archive/issue_comments_483899.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [@kcrisman](#comment%3A21):\n> Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ... \n\nWhat's the status of generating 3D plots and saving them using threejs? I think for SageTeX it is irrelevant what is producing pictures, just show that it works well. Tachyon is not the best in this regard.",
    "created_at": "2020-12-07T20:32:00Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483899",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:22'></a>
Replying to [@kcrisman](#comment%3A21):
> Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ... 

What's the status of generating 3D plots and saving them using threejs? I think for SageTeX it is irrelevant what is producing pictures, just show that it works well. Tachyon is not the best in this regard.



---

archive/issue_comments_483900.json:
```json
{
    "body": "<a id='comment:23'></a>\nA discussion has unfolded in https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ",
    "created_at": "2020-12-07T23:35:11Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483900",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
A discussion has unfolded in https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ



---

archive/issue_events_271059.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-08T01:44:05Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "rename": {
        "from": "Switch jsmol to jupyter-jsmol, make jmol optional",
        "to": "Switch jsmol to jupyter-jsmol"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271059"
}
```



---

archive/issue_comments_483901.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,11 +1,11 @@\n Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. \n \n-We should switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n-\n-Then we can downgrade `jmol` to `optional`.\n+In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n \n Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n \n-See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+See also: \n+- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+- #31027 - Make jmol optional\n \n \n``````\n",
    "created_at": "2020-12-08T01:44:05Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483901",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,11 +1,11 @@
 Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. 
 
-We should switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.
-
-Then we can downgrade `jmol` to `optional`.
+In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.
 
 Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ
 
-See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+See also: 
+- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+- #31027 - Make jmol optional
 
 
``````




---

archive/issue_comments_483902.json:
```json
{
    "body": "**Changing commit** from \"[ae970c2c80a24bfeab28a1748881147c6cd12bf8](https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8)\" to \"[bf3c1dc8956ce14720b0a230ab7d99198de64c40](https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40)\".",
    "created_at": "2020-12-08T01:50:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483902",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ae970c2c80a24bfeab28a1748881147c6cd12bf8](https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8)" to "[bf3c1dc8956ce14720b0a230ab7d99198de64c40](https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40)".



---

archive/issue_comments_483903.json:
```json
{
    "body": "<a id='comment:25'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e57f927a7f58310bc1f8b0fce02ff2a63d4de42f\">e57f927</a></td><td><code>Merge branch 't/31002/public/build/bdist_wsl' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/017b81628ea95caa8386352de7a1236de55b8a8a\">017b816</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db1b38c73e2d342ef889d82626bd91762653d103\">db1b38c</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95a713101574bc269d7c38955c14b497e155f718\">95a7131</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98b83f5c225dcf0e76b4bfe80f3f02017a561e36\">98b83f5</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40a8823eeda7c1c0e8ef5ffab8583742b8c53b74\">40a8823</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40\">bf3c1dc</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Do not rebuild the javascript file</code></td></tr></table>\n",
    "created_at": "2020-12-08T01:50:02Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e57f927a7f58310bc1f8b0fce02ff2a63d4de42f">e57f927</a></td><td><code>Merge branch 't/31002/public/build/bdist_wsl' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/017b81628ea95caa8386352de7a1236de55b8a8a">017b816</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db1b38c73e2d342ef889d82626bd91762653d103">db1b38c</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95a713101574bc269d7c38955c14b497e155f718">95a7131</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98b83f5c225dcf0e76b4bfe80f3f02017a561e36">98b83f5</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40a8823eeda7c1c0e8ef5ffab8583742b8c53b74">40a8823</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40">bf3c1dc</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Do not rebuild the javascript file</code></td></tr></table>




---

archive/issue_comments_483904.json:
```json
{
    "body": "**Changing dependencies** from \"#31002, #31020\" to \"#31002\".",
    "created_at": "2020-12-08T01:52:26Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483904",
    "user": "https://github.com/mkoeppe"
}
```

**Changing dependencies** from "#31002, #31020" to "#31002".



---

archive/issue_comments_483905.json:
```json
{
    "body": "<a id='comment:26'></a>\nI have narrowed this ticket to only separating the `jmol` and `jsmol` installation.",
    "created_at": "2020-12-08T01:52:26Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483905",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
I have narrowed this ticket to only separating the `jmol` and `jsmol` installation.



---

archive/issue_comments_483906.json:
```json
{
    "body": "<a id='comment:27'></a>\nMaking jmol optional, and the discussion about new technologies to create images from 3d graphics, is now on #31027.",
    "created_at": "2020-12-08T01:53:17Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483906",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Making jmol optional, and the discussion about new technologies to create images from 3d graphics, is now on #31027.



---

archive/issue_comments_483907.json:
```json
{
    "body": "<a id='comment:28'></a>\nI was able to verify that JSmol still works correctly in both Jupyter and JupyterLab. However, I did notice a test failure in `src/sage/repl/ipython_kernel/install.py` due to the new deprecation warning:\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 142, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    spec.use_local_jsmol()\nExpected nothing\nGot:\n    doctest:warning\n      File \"/home/joshua/sage/src/bin/sage-runtests\", line 182, in <module>\n        err = DC.run()\n    [...]\n    :\n    DeprecationWarning: Symlinking jsmol is no longer necessary\n    See https://trac.sagemath.org/30315 for details.\n```\n\nAlso, after removing the `local/share/jsmol` folder since it is no longer needed (and wouldn't be present on a clean install), I get a couple more test failures in the same file:\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 144, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    os.path.isdir(jsmol)\nExpected:\n    True\nGot:\n    False\n```\n\nand\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 146, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    os.path.isfile(os.path.join(jsmol, \"JSmol.min.js\"))\nExpected:\n    True\nGot:\n    False\n```",
    "created_at": "2020-12-08T18:14:04Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483907",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:28'></a>
I was able to verify that JSmol still works correctly in both Jupyter and JupyterLab. However, I did notice a test failure in `src/sage/repl/ipython_kernel/install.py` due to the new deprecation warning:

```
File "src/sage/repl/ipython_kernel/install.py", line 142, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    spec.use_local_jsmol()
Expected nothing
Got:
    doctest:warning
      File "/home/joshua/sage/src/bin/sage-runtests", line 182, in <module>
        err = DC.run()
    [...]
    :
    DeprecationWarning: Symlinking jsmol is no longer necessary
    See https://trac.sagemath.org/30315 for details.
```

Also, after removing the `local/share/jsmol` folder since it is no longer needed (and wouldn't be present on a clean install), I get a couple more test failures in the same file:

```
File "src/sage/repl/ipython_kernel/install.py", line 144, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    os.path.isdir(jsmol)
Expected:
    True
Got:
    False
```

and

```
File "src/sage/repl/ipython_kernel/install.py", line 146, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    os.path.isfile(os.path.join(jsmol, "JSmol.min.js"))
Expected:
    True
Got:
    False
```



---

archive/issue_comments_483908.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2a02d9d0ca5e8be7f45b2dc583fabce30cf2556\">f2a02d9</a></td><td><code>Get rid of JSMOL_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960\">7732e2e</a></td><td><code>build/pkgs/jmol/SPKG.rst: Update</code></td></tr></table>\n",
    "created_at": "2020-12-09T00:53:26Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483908",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2a02d9d0ca5e8be7f45b2dc583fabce30cf2556">f2a02d9</a></td><td><code>Get rid of JSMOL_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960">7732e2e</a></td><td><code>build/pkgs/jmol/SPKG.rst: Update</code></td></tr></table>




---

archive/issue_comments_483909.json:
```json
{
    "body": "**Changing commit** from \"[bf3c1dc8956ce14720b0a230ab7d99198de64c40](https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40)\" to \"[7732e2eac50a3e2c0f865304ce4eecd26c6ff960](https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960)\".",
    "created_at": "2020-12-09T00:53:26Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483909",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bf3c1dc8956ce14720b0a230ab7d99198de64c40](https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40)" to "[7732e2eac50a3e2c0f865304ce4eecd26c6ff960](https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960)".



---

archive/issue_comments_483910.json:
```json
{
    "body": "<a id='comment:30'></a>\nThanks. This function, after all, does not make sense any more, so there's no point in trying to go through deprecation.  I have now removed it completely (alongside with the variable `JSMOL_DIR`).",
    "created_at": "2020-12-09T00:55:15Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483910",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Thanks. This function, after all, does not make sense any more, so there's no point in trying to go through deprecation.  I have now removed it completely (alongside with the variable `JSMOL_DIR`).



---

archive/issue_events_271060.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-12-09T16:41:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271060"
}
```



---

archive/issue_events_271061.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-12-09T16:41:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271061"
}
```



---

archive/issue_comments_483911.json:
```json
{
    "body": "<a id='comment:31'></a>\nLooks good. JSmol still works in Jupyter and JupyterLab.",
    "created_at": "2020-12-09T16:41:36Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483911",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:31'></a>
Looks good. JSmol still works in Jupyter and JupyterLab.



---

archive/issue_comments_483912.json:
```json
{
    "body": "**Reviewer:** Joshua Campbell",
    "created_at": "2020-12-09T16:41:36Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483912",
    "user": "https://github.com/jcamp0x2a"
}
```

**Reviewer:** Joshua Campbell



---

archive/issue_comments_483913.json:
```json
{
    "body": "<a id='comment:32'></a>\nThank you!",
    "created_at": "2020-12-09T19:59:21Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483913",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
Thank you!



---

archive/issue_comments_483914.json:
```json
{
    "body": "**Changing commit** from \"[7732e2eac50a3e2c0f865304ce4eecd26c6ff960](https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960)\" to \"[80a3db1582a541ceaaa5098d36d5fedb4c98ee8b](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)\".",
    "created_at": "2020-12-10T00:56:37Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483914",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7732e2eac50a3e2c0f865304ce4eecd26c6ff960](https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960)" to "[80a3db1582a541ceaaa5098d36d5fedb4c98ee8b](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)".



---

archive/issue_comments_483915.json:
```json
{
    "body": "<a id='comment:33'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b\">80a3db1</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Use sdh_setup_bdist_wheel</code></td></tr></table>\n",
    "created_at": "2020-12-10T00:56:37Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483915",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b">80a3db1</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Use sdh_setup_bdist_wheel</code></td></tr></table>




---

archive/issue_events_271062.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2020-12-10T00:56:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271062"
}
```



---

archive/issue_events_271063.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/git",
    "created_at": "2020-12-10T00:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271063"
}
```



---

archive/issue_comments_483916.json:
```json
{
    "body": "<a id='comment:34'></a>\nForgot to actually use #31002 - this change is necessary for correct installation on WSL",
    "created_at": "2020-12-10T00:57:13Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483916",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
Forgot to actually use #31002 - this change is necessary for correct installation on WSL



---

archive/issue_events_271064.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-12-10T02:01:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271064"
}
```



---

archive/issue_events_271065.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-12-10T02:01:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271065"
}
```



---

archive/issue_comments_483917.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [@mkoeppe](#comment%3A34):\n> Forgot to actually use #31002 - this change is necessary for correct installation on WSL\n\nOk. I tested this on Ubuntu WSL earlier without any installation issues. If I understand #31002 correctly, the problem was occurring due to mounting Windows folders, which I'm not doing, so that's probably why I didn't run into it.\n\nI've gone ahead and re-verified that JSmol still works in Jupyter and JupyterLab.",
    "created_at": "2020-12-10T02:01:03Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483917",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:35'></a>
Replying to [@mkoeppe](#comment%3A34):
> Forgot to actually use #31002 - this change is necessary for correct installation on WSL

Ok. I tested this on Ubuntu WSL earlier without any installation issues. If I understand #31002 correctly, the problem was occurring due to mounting Windows folders, which I'm not doing, so that's probably why I didn't run into it.

I've gone ahead and re-verified that JSmol still works in Jupyter and JupyterLab.



---

archive/issue_comments_483918.json:
```json
{
    "body": "<a id='comment:36'></a>\nThanks again!",
    "created_at": "2020-12-10T03:16:51Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483918",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
Thanks again!



---

archive/issue_events_271066.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-13T20:30:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271066"
}
```



---

archive/issue_events_271067.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6bde0c04d5fe2a28cb925b4b0325f2830a26ff5c",
    "created_at": "2020-12-13T20:30:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-271067"
}
```



---

archive/issue_comments_483919.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional)\" to \"[80a3db1582a541ceaaa5098d36d5fedb4c98ee8b](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)\".",
    "created_at": "2020-12-13T20:30:50Z",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-483919",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional)" to "[80a3db1582a541ceaaa5098d36d5fedb4c98ee8b](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)".
