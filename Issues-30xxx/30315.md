# Issue 30315: Switch jsmol to jupyter-jsmol

archive/issues_030078.json:
```json
{
    "assignees": [],
    "body": "Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. \n\nIn this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n\nDiscussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n\nSee also: \n- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n- #31027 - Make jmol optional\n\n\n\nDepends on #31002\n\nCC:  @kcrisman @novoselt @fchapoton @antonio-rojas @kiwifb @slel @nbruin @paulmasson @egourgoulhon @kwankyu @enriqueartal @jcamp0x2a\n\nKeywords: **sd111**\n\nBranch/Commit: **[80a3db1](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)**\n\nReviewer: **Joshua Campbell**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30315_\n\n",
    "closed_at": "2020-12-13T20:30:50Z",
    "created_at": "2020-08-07T18:26:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Switch jsmol to jupyter-jsmol",
    "type": "issue",
    "updated_at": "2020-12-13T20:30:50Z",
    "url": "https://github.com/sagemath/sage/issues/30315",
    "user": "https://github.com/mkoeppe"
}
```
Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. 

In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.

Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ

See also: 
- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
- #31027 - Make jmol optional



Depends on #31002

CC:  @kcrisman @novoselt @fchapoton @antonio-rojas @kiwifb @slel @nbruin @paulmasson @egourgoulhon @kwankyu @enriqueartal @jcamp0x2a

Keywords: **sd111**

Branch/Commit: **[80a3db1](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)**

Reviewer: **Joshua Campbell**

Author: **Matthias Koeppe**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/30315_





---

archive/issue_events_417630.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-07T18:26:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417630"
}
```



---

archive/issue_events_417631.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-07T18:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417631"
}
```



---

archive/issue_events_417632.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-07T18:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417632"
}
```



---

archive/issue_events_417633.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-07T18:26:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417633"
}
```



---

archive/issue_comments_481165.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n \n Then we can downgrade `jmol` to `optional`.\n \n+See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n``````\n",
    "created_at": "2020-08-07T18:46:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481165",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 
 Then we can downgrade `jmol` to `optional`.
 
+See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
``````




---

archive/issue_comments_481166.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\n(deleted)",
    "created_at": "2020-08-08T05:50:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481166",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">comment:2</div>

(deleted)



---

archive/issue_comments_481167.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\n`./sage -pip install jupyter-jsmol` installs proper nbextensions:\n\n```\n$ jupyter nbextension list\nKnown nbextensions:\n  config dir: /Users/mkoeppe/s/sage/sage-rebasing/local/etc/jupyter/nbconfig\n    notebook section\n      jupyter_jsmol/extension  enabled \n      - Validating: OK\n      jupyter-js-widgets/extension  enabled \n      - Validating: OK\n```\nThe installed files can be seen in `$SAGE_LOCAL/share/jupyter/nbextensions/jupyter_jsmol/`",
    "created_at": "2020-08-08T05:56:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481167",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">comment:3</div>

`./sage -pip install jupyter-jsmol` installs proper nbextensions:

```
$ jupyter nbextension list
Known nbextensions:
  config dir: /Users/mkoeppe/s/sage/sage-rebasing/local/etc/jupyter/nbconfig
    notebook section
      jupyter_jsmol/extension  enabled 
      - Validating: OK
      jupyter-js-widgets/extension  enabled 
      - Validating: OK
```
The installed files can be seen in `$SAGE_LOCAL/share/jupyter/nbextensions/jupyter_jsmol/`



---

archive/issue_events_417634.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417634"
}
```



---

archive/issue_events_417635.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417635"
}
```



---

archive/issue_comments_481168.json:
```json
{
    "body": "Branch: **[u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional)**",
    "created_at": "2020-11-29T06:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481168",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional)**



---

archive/issue_comments_481169.json:
```json
{
    "body": "Commit: **[ac1ab7c](https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8)**",
    "created_at": "2020-11-29T07:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481169",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[ac1ab7c](https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8)**



---

archive/issue_events_417636.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-11-29T07:00:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417636"
}
```



---

archive/issue_comments_481170.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6617f87a26b35e9794dc868a3666e04f342c7c7a\">6617f87</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cbaf661a17c8f52b388009c06ae7648cd8527e48\">cbaf661</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ca5328998627b45f1e25754dee43afabbc10d3f\">2ca5328</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8\">ac1ab7c</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr></table>\n",
    "created_at": "2020-11-29T07:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481170",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6617f87a26b35e9794dc868a3666e04f342c7c7a">6617f87</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cbaf661a17c8f52b388009c06ae7648cd8527e48">cbaf661</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ca5328998627b45f1e25754dee43afabbc10d3f">2ca5328</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8">ac1ab7c</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr></table>




---

archive/issue_comments_481171.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-11-29T07:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481171",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_481172.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a\">e6ebaf7</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr></table>\n",
    "created_at": "2020-11-29T07:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481172",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a">e6ebaf7</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr></table>




---

archive/issue_comments_481173.json:
```json
{
    "body": "Changed commit from **[ac1ab7c](https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8)** to **[e6ebaf7](https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a)**",
    "created_at": "2020-11-29T07:02:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481173",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ac1ab7c](https://github.com/sagemath/sagetrac-mirror/commit/ac1ab7c844cdeea9346f35e5691755fc713d18c8)** to **[e6ebaf7](https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a)**



---

archive/issue_comments_481174.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\n`sagetex` declares `jmol` as a dependency - what is it used for?",
    "created_at": "2020-11-29T07:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481174",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

`sagetex` declares `jmol` as a dependency - what is it used for?



---

archive/issue_comments_481175.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\n> `sagetex` declares `jmol` as a dependency - what is it used for?\n\nI think for generating a 3d image in its documentation, compilation of which is part of its test suite.",
    "created_at": "2020-11-29T21:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481175",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:10" align="right">comment:10</div>

> `sagetex` declares `jmol` as a dependency - what is it used for?

I think for generating a 3d image in its documentation, compilation of which is part of its test suite.



---

archive/issue_comments_481176.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481176",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_481177.json:
```json
{
    "body": "Changed keywords from none to **sd111**",
    "created_at": "2020-12-06T18:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481177",
    "user": "https://github.com/mkoeppe"
}
```

Changed keywords from none to **sd111**



---

archive/issue_comments_481178.json:
```json
{
    "body": "Dependencies: **#31020**",
    "created_at": "2020-12-07T04:07:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481178",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31020**



---

archive/issue_comments_481179.json:
```json
{
    "body": "Changed commit from **[e6ebaf7](https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a)** to **[6a549d9](https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc)**",
    "created_at": "2020-12-07T04:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481179",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e6ebaf7](https://github.com/sagemath/sagetrac-mirror/commit/e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a)** to **[6a549d9](https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc)**



---

archive/issue_comments_481180.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/21259b2fa2087a7613dd69ad9bab0249d3242a58\">21259b2</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5f5f433398b4e4cd88ebbe54dc30291ae632973\">b5f5f43</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0fe5432edf50c2ff1220e7b39819bd1cc37ed8e\">a0fe543</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e24bc02470ffba6efb4e6284025399d35905ad0\">6e24bc0</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52803b4d02019feafab03053f952e925f15aa4fa\">52803b4</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/719445910103801ef8a0e79c9f06ec269e7beca6\">7194459</a></td><td><code>build/pkgs/jmol/type: Make it optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0ed256ce64728942249fa79b72abcf37cb544814\">0ed256c</a></td><td><code>build/make/Makefile.in: Compute SAGE_CHECK_... earlier, before evaluating dependencies</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1f714c119492a2540b74fc8e9521cc7204d4d28e\">1f714c1</a></td><td><code>build/pkgs/sagetex/dependencies: Conditionalize order-only deps on SAGE_CHECK_sagetex</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc\">6a549d9</a></td><td><code>Merge branch 't/31020/build_make_makefile_in__fix_sage_check_logic__conditionalize_sagetex_dependencies_on_sage_check' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr></table>\n",
    "created_at": "2020-12-07T04:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481180",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/21259b2fa2087a7613dd69ad9bab0249d3242a58">21259b2</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5f5f433398b4e4cd88ebbe54dc30291ae632973">b5f5f43</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0fe5432edf50c2ff1220e7b39819bd1cc37ed8e">a0fe543</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e24bc02470ffba6efb4e6284025399d35905ad0">6e24bc0</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52803b4d02019feafab03053f952e925f15aa4fa">52803b4</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/719445910103801ef8a0e79c9f06ec269e7beca6">7194459</a></td><td><code>build/pkgs/jmol/type: Make it optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0ed256ce64728942249fa79b72abcf37cb544814">0ed256c</a></td><td><code>build/make/Makefile.in: Compute SAGE_CHECK_... earlier, before evaluating dependencies</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1f714c119492a2540b74fc8e9521cc7204d4d28e">1f714c1</a></td><td><code>build/pkgs/sagetex/dependencies: Conditionalize order-only deps on SAGE_CHECK_sagetex</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc">6a549d9</a></td><td><code>Merge branch 't/31020/build_make_makefile_in__fix_sage_check_logic__conditionalize_sagetex_dependencies_on_sage_check' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr></table>




---

archive/issue_comments_481181.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@kcrisman](#comment:10):\n> > `sagetex` declares `jmol` as a dependency - what is it used for?\n\n> \n> I think for generating a 3d image in its documentation, compilation of which is part of its test suite.\n\nThanks! I have adjusted the dependencies in #31020 (now a dependency) so that `jmol` is only treated as a dependency when `SAGE_CHECK` is active.",
    "created_at": "2020-12-07T04:10:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481181",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@kcrisman](#comment:10):
> > `sagetex` declares `jmol` as a dependency - what is it used for?

> 
> I think for generating a 3d image in its documentation, compilation of which is part of its test suite.

Thanks! I have adjusted the dependencies in #31020 (now a dependency) so that `jmol` is only treated as a dependency when `SAGE_CHECK` is active.



---

archive/issue_comments_481182.json:
```json
{
    "body": "Changed commit from **[6a549d9](https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc)** to **[ae970c2](https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8)**",
    "created_at": "2020-12-07T04:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481182",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6a549d9](https://github.com/sagemath/sagetrac-mirror/commit/6a549d97f2051ae6c158adc06ae6b6d86fde24dc)** to **[ae970c2](https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8)**



---

archive/issue_comments_481183.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a45d72b552d7baeb046a9829e63353e8aa7e252\">3a45d72</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Do not rebuild the javascript file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8e0364dc6ff16a799b64670e75f05a4dfac3b1e\">a8e0364</a></td><td><code>Specify bdist temp folder for WSL compatibility</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3077c71f488ddb2b6fe4058cbbc981d02d7ba95\">a3077c7</a></td><td><code>Use mktemp</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5a14a396fd1f1cd2de0d6fd465e546b7ff0b33b\">c5a14a3</a></td><td><code>build/bin/sage-dist-helpers (sdh_setup_bdist_wheel): New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb10429b974d649741c67077ed50a00815880932\">fb10429</a></td><td><code>build/pkgs/*/spkg-install.in: Use new function sdh_setup_bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32bf46376eb931956d38a0d9811960db51d899d0\">32bf463</a></td><td><code>Merge branch 't/31002/public/build/bdist_wsl' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8\">ae970c2</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Use new function sdh_setup_bdist_wheel</code></td></tr></table>\n",
    "created_at": "2020-12-07T04:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481183",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a45d72b552d7baeb046a9829e63353e8aa7e252">3a45d72</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Do not rebuild the javascript file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8e0364dc6ff16a799b64670e75f05a4dfac3b1e">a8e0364</a></td><td><code>Specify bdist temp folder for WSL compatibility</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3077c71f488ddb2b6fe4058cbbc981d02d7ba95">a3077c7</a></td><td><code>Use mktemp</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5a14a396fd1f1cd2de0d6fd465e546b7ff0b33b">c5a14a3</a></td><td><code>build/bin/sage-dist-helpers (sdh_setup_bdist_wheel): New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb10429b974d649741c67077ed50a00815880932">fb10429</a></td><td><code>build/pkgs/*/spkg-install.in: Use new function sdh_setup_bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32bf46376eb931956d38a0d9811960db51d899d0">32bf463</a></td><td><code>Merge branch 't/31002/public/build/bdist_wsl' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8">ae970c2</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Use new function sdh_setup_bdist_wheel</code></td></tr></table>




---

archive/issue_comments_481184.json:
```json
{
    "body": "Changed dependencies from **#31020** to **#31002, #31020**",
    "created_at": "2020-12-07T04:45:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481184",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31020** to **#31002, #31020**



---

archive/issue_comments_481185.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,8 @@\n \n Then we can downgrade `jmol` to `optional`.\n \n+Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n+\n See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+\n+\n``````\n",
    "created_at": "2020-12-07T05:12:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481185",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,8 @@
 
 Then we can downgrade `jmol` to `optional`.
 
+Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ
+
 See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+
+
``````




---

archive/issue_comments_481186.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThat is not a good idea.  Because we want people to be able to build the documentation for SageTeX, which after all isn't \"really\" upstream.  Instead, we should see if jsmol or some other tool suffices to build 3d pictures in SageTeX, which is a very useful use case for it.  Untested = broken, and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.",
    "created_at": "2020-12-07T13:12:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481186",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:18" align="right">comment:18</div>

That is not a good idea.  Because we want people to be able to build the documentation for SageTeX, which after all isn't "really" upstream.  Instead, we should see if jsmol or some other tool suffices to build 3d pictures in SageTeX, which is a very useful use case for it.  Untested = broken, and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.



---

archive/issue_comments_481187.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n> and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.\n\nThough my info on the build system is pretty outdated :-)",
    "created_at": "2020-12-07T13:12:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481187",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:19" align="right">comment:19</div>

> and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.

Though my info on the build system is pretty outdated :-)



---

archive/issue_comments_481188.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@kcrisman](#comment:19):\n> > and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.\n\n> Though my info on the build system is pretty outdated :-)\n\nActually, we've introduced a few of these this year because the complexity of Python test frameworks has escalated and we don't want to ship all of their dependencies.  Currently, `networkx`, `rpy2`, and `sage_sws2rst` all have check-only dependencies.",
    "created_at": "2020-12-07T18:31:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481188",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@kcrisman](#comment:19):
> > and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.

> Though my info on the build system is pretty outdated :-)

Actually, we've introduced a few of these this year because the complexity of Python test frameworks has escalated and we don't want to ship all of their dependencies.  Currently, `networkx`, `rpy2`, and `sage_sws2rst` all have check-only dependencies.



---

archive/issue_comments_481189.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nInteresting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ...",
    "created_at": "2020-12-07T18:34:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481189",
    "user": "https://github.com/kcrisman"
}
```

<div id="comment:21" align="right">comment:21</div>

Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ...



---

archive/issue_comments_481190.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@kcrisman](#comment:21):\n> Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ... \n\nWhat's the status of generating 3D plots and saving them using threejs? I think for SageTeX it is irrelevant what is producing pictures, just show that it works well. Tachyon is not the best in this regard.",
    "created_at": "2020-12-07T20:32:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481190",
    "user": "https://github.com/novoselt"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@kcrisman](#comment:21):
> Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ... 

What's the status of generating 3D plots and saving them using threejs? I think for SageTeX it is irrelevant what is producing pictures, just show that it works well. Tachyon is not the best in this regard.



---

archive/issue_comments_481191.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nA discussion has unfolded in https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ",
    "created_at": "2020-12-07T23:35:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481191",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

A discussion has unfolded in https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ



---

archive/issue_events_417637.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-08T01:44:05Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "title_is": "Switch jsmol to jupyter-jsmol",
    "title_was": "Switch jsmol to jupyter-jsmol, make jmol optional",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417637"
}
```



---

archive/issue_comments_481192.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,11 @@\n Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. \n \n-We should switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n-\n-Then we can downgrade `jmol` to `optional`.\n+In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n \n Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n \n-See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+See also: \n+- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+- #31027 - Make jmol optional\n \n \n``````\n",
    "created_at": "2020-12-08T01:44:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481192",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,11 @@
 Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. 
 
-We should switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.
-
-Then we can downgrade `jmol` to `optional`.
+In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.
 
 Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ
 
-See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+See also: 
+- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+- #31027 - Make jmol optional
 
 
``````




---

archive/issue_comments_481193.json:
```json
{
    "body": "Changed commit from **[ae970c2](https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8)** to **[bf3c1dc](https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40)**",
    "created_at": "2020-12-08T01:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481193",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ae970c2](https://github.com/sagemath/sagetrac-mirror/commit/ae970c2c80a24bfeab28a1748881147c6cd12bf8)** to **[bf3c1dc](https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40)**



---

archive/issue_comments_481194.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e57f927a7f58310bc1f8b0fce02ff2a63d4de42f\">e57f927</a></td><td><code>Merge branch 't/31002/public/build/bdist_wsl' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/017b81628ea95caa8386352de7a1236de55b8a8a\">017b816</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db1b38c73e2d342ef889d82626bd91762653d103\">db1b38c</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/95a713101574bc269d7c38955c14b497e155f718\">95a7131</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98b83f5c225dcf0e76b4bfe80f3f02017a561e36\">98b83f5</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40a8823eeda7c1c0e8ef5ffab8583742b8c53b74\">40a8823</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40\">bf3c1dc</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Do not rebuild the javascript file</code></td></tr></table>\n",
    "created_at": "2020-12-08T01:50:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481194",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e57f927a7f58310bc1f8b0fce02ff2a63d4de42f">e57f927</a></td><td><code>Merge branch 't/31002/public/build/bdist_wsl' into t/30315/switch_jsmol_to_jupyter_jsmol__make_jmol_optional</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/017b81628ea95caa8386352de7a1236de55b8a8a">017b816</a></td><td><code>build/pkgs/jupyter_jsmol: New</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db1b38c73e2d342ef889d82626bd91762653d103">db1b38c</a></td><td><code>build/pkgs/jmol/spkg-install.in: No longer install jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/95a713101574bc269d7c38955c14b497e155f718">95a7131</a></td><td><code>sage.repl.display.jsmol_iframe: Adjust path to jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98b83f5c225dcf0e76b4bfe80f3f02017a561e36">98b83f5</a></td><td><code>sage.repl.ipython_kernel.install: No longer symlink jsmol</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40a8823eeda7c1c0e8ef5ffab8583742b8c53b74">40a8823</a></td><td><code>build/pkgs/jupyter_jsmol: Add dependencies, install-requires.txt</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40">bf3c1dc</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Do not rebuild the javascript file</code></td></tr></table>




---

archive/issue_comments_481195.json:
```json
{
    "body": "Changed dependencies from **#31002, #31020** to **#31002**",
    "created_at": "2020-12-08T01:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481195",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#31002, #31020** to **#31002**



---

archive/issue_comments_481196.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI have narrowed this ticket to only separating the `jmol` and `jsmol` installation.",
    "created_at": "2020-12-08T01:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481196",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

I have narrowed this ticket to only separating the `jmol` and `jsmol` installation.



---

archive/issue_comments_481197.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nMaking jmol optional, and the discussion about new technologies to create images from 3d graphics, is now on #31027.",
    "created_at": "2020-12-08T01:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481197",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Making jmol optional, and the discussion about new technologies to create images from 3d graphics, is now on #31027.



---

archive/issue_comments_481198.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nI was able to verify that JSmol still works correctly in both Jupyter and JupyterLab. However, I did notice a test failure in `src/sage/repl/ipython_kernel/install.py` due to the new deprecation warning:\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 142, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    spec.use_local_jsmol()\nExpected nothing\nGot:\n    doctest:warning\n      File \"/home/joshua/sage/src/bin/sage-runtests\", line 182, in <module>\n        err = DC.run()\n    [...]\n    :\n    DeprecationWarning: Symlinking jsmol is no longer necessary\n    See https://trac.sagemath.org/30315 for details.\n```\n\nAlso, after removing the `local/share/jsmol` folder since it is no longer needed (and wouldn't be present on a clean install), I get a couple more test failures in the same file:\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 144, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    os.path.isdir(jsmol)\nExpected:\n    True\nGot:\n    False\n```\n\nand\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 146, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    os.path.isfile(os.path.join(jsmol, \"JSmol.min.js\"))\nExpected:\n    True\nGot:\n    False\n```",
    "created_at": "2020-12-08T18:14:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481198",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:28" align="right">comment:28</div>

I was able to verify that JSmol still works correctly in both Jupyter and JupyterLab. However, I did notice a test failure in `src/sage/repl/ipython_kernel/install.py` due to the new deprecation warning:

```
File "src/sage/repl/ipython_kernel/install.py", line 142, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    spec.use_local_jsmol()
Expected nothing
Got:
    doctest:warning
      File "/home/joshua/sage/src/bin/sage-runtests", line 182, in <module>
        err = DC.run()
    [...]
    :
    DeprecationWarning: Symlinking jsmol is no longer necessary
    See https://trac.sagemath.org/30315 for details.
```

Also, after removing the `local/share/jsmol` folder since it is no longer needed (and wouldn't be present on a clean install), I get a couple more test failures in the same file:

```
File "src/sage/repl/ipython_kernel/install.py", line 144, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    os.path.isdir(jsmol)
Expected:
    True
Got:
    False
```

and

```
File "src/sage/repl/ipython_kernel/install.py", line 146, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    os.path.isfile(os.path.join(jsmol, "JSmol.min.js"))
Expected:
    True
Got:
    False
```



---

archive/issue_comments_481199.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2a02d9d0ca5e8be7f45b2dc583fabce30cf2556\">f2a02d9</a></td><td><code>Get rid of JSMOL_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960\">7732e2e</a></td><td><code>build/pkgs/jmol/SPKG.rst: Update</code></td></tr></table>\n",
    "created_at": "2020-12-09T00:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481199",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2a02d9d0ca5e8be7f45b2dc583fabce30cf2556">f2a02d9</a></td><td><code>Get rid of JSMOL_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960">7732e2e</a></td><td><code>build/pkgs/jmol/SPKG.rst: Update</code></td></tr></table>




---

archive/issue_comments_481200.json:
```json
{
    "body": "Changed commit from **[bf3c1dc](https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40)** to **[7732e2e](https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960)**",
    "created_at": "2020-12-09T00:53:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481200",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bf3c1dc](https://github.com/sagemath/sagetrac-mirror/commit/bf3c1dc8956ce14720b0a230ab7d99198de64c40)** to **[7732e2e](https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960)**



---

archive/issue_comments_481201.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThanks. This function, after all, does not make sense any more, so there's no point in trying to go through deprecation.  I have now removed it completely (alongside with the variable `JSMOL_DIR`).",
    "created_at": "2020-12-09T00:55:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481201",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Thanks. This function, after all, does not make sense any more, so there's no point in trying to go through deprecation.  I have now removed it completely (alongside with the variable `JSMOL_DIR`).



---

archive/issue_events_417638.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-12-09T16:41:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417638"
}
```



---

archive/issue_events_417639.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-12-09T16:41:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417639"
}
```



---

archive/issue_comments_481202.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLooks good. JSmol still works in Jupyter and JupyterLab.",
    "created_at": "2020-12-09T16:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481202",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:31" align="right">comment:31</div>

Looks good. JSmol still works in Jupyter and JupyterLab.



---

archive/issue_comments_481203.json:
```json
{
    "body": "Reviewer: **Joshua Campbell**",
    "created_at": "2020-12-09T16:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481203",
    "user": "https://github.com/jcamp0x2a"
}
```

Reviewer: **Joshua Campbell**



---

archive/issue_comments_481204.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nThank you!",
    "created_at": "2020-12-09T19:59:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481204",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:32" align="right">comment:32</div>

Thank you!



---

archive/issue_comments_481205.json:
```json
{
    "body": "Changed commit from **[7732e2e](https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960)** to **[80a3db1](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)**",
    "created_at": "2020-12-10T00:56:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481205",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7732e2e](https://github.com/sagemath/sagetrac-mirror/commit/7732e2eac50a3e2c0f865304ce4eecd26c6ff960)** to **[80a3db1](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)**



---

archive/issue_comments_481206.json:
```json
{
    "body": "<div id=\"comment:33\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b\">80a3db1</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Use sdh_setup_bdist_wheel</code></td></tr></table>\n",
    "created_at": "2020-12-10T00:56:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481206",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:33"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b">80a3db1</a></td><td><code>build/pkgs/jupyter_jsmol/spkg-install.in: Use sdh_setup_bdist_wheel</code></td></tr></table>




---

archive/issue_events_417640.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-10T00:56:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417640"
}
```



---

archive/issue_events_417641.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-10T00:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417641"
}
```



---

archive/issue_comments_481207.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nForgot to actually use #31002 - this change is necessary for correct installation on WSL",
    "created_at": "2020-12-10T00:57:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481207",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:34" align="right">comment:34</div>

Forgot to actually use #31002 - this change is necessary for correct installation on WSL



---

archive/issue_events_417642.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-12-10T02:01:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417642"
}
```



---

archive/issue_events_417643.json:
```json
{
    "actor": "https://github.com/jcamp0x2a",
    "created_at": "2020-12-10T02:01:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417643"
}
```



---

archive/issue_comments_481208.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@mkoeppe](#comment:34):\n> Forgot to actually use #31002 - this change is necessary for correct installation on WSL\n\nOk. I tested this on Ubuntu WSL earlier without any installation issues. If I understand #31002 correctly, the problem was occurring due to mounting Windows folders, which I'm not doing, so that's probably why I didn't run into it.\n\nI've gone ahead and re-verified that JSmol still works in Jupyter and JupyterLab.",
    "created_at": "2020-12-10T02:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481208",
    "user": "https://github.com/jcamp0x2a"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@mkoeppe](#comment:34):
> Forgot to actually use #31002 - this change is necessary for correct installation on WSL

Ok. I tested this on Ubuntu WSL earlier without any installation issues. If I understand #31002 correctly, the problem was occurring due to mounting Windows folders, which I'm not doing, so that's probably why I didn't run into it.

I've gone ahead and re-verified that JSmol still works in Jupyter and JupyterLab.



---

archive/issue_comments_481209.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThanks again!",
    "created_at": "2020-12-10T03:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481209",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Thanks again!



---

archive/issue_events_417644.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-13T20:30:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417644"
}
```



---

archive/issue_events_417645.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6bde0c04d5fe2a28cb925b4b0325f2830a26ff5c",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-13T20:30:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30315#event-417645"
}
```



---

archive/issue_comments_481210.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional)** to **[80a3db1](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)**",
    "created_at": "2020-12-13T20:30:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30315#issuecomment-481210",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional)** to **[80a3db1](https://github.com/sagemath/sagetrac-mirror/commit/80a3db1582a541ceaaa5098d36d5fedb4c98ee8b)**
