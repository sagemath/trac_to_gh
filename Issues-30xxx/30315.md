# Issue 30315: Switch jsmol to jupyter-jsmol

archive/issues_030078.json:
```json
{
    "body": "Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. \n\nIn this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n\nDiscussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n\nSee also: \n- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n- #31027 - Make jmol optional\n\n\n\nCC:  @kcrisman @novoselt @fchapoton @antonio-rojas @kiwifb @slel @nbruin @paulmasson @egourgoulhon @kwankyu @enriqueartal @jcamp0x2a\n\nKeywords: sd111\n\nBranch/Commit: 80a3db1582a541ceaaa5098d36d5fedb4c98ee8b\n\nReviewer: Joshua Campbell\n\nAuthor: Matthias Koeppe\n\nDependencies: #31002\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30315\n\n",
    "closed_at": "2020-12-13T20:30:50Z",
    "created_at": "2020-08-07T18:26:49Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Switch jsmol to jupyter-jsmol",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30315",
    "user": "https://github.com/mkoeppe"
}
```
Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. 

In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.

Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ

See also: 
- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
- #31027 - Make jmol optional



CC:  @kcrisman @novoselt @fchapoton @antonio-rojas @kiwifb @slel @nbruin @paulmasson @egourgoulhon @kwankyu @enriqueartal @jcamp0x2a

Keywords: sd111

Branch/Commit: 80a3db1582a541ceaaa5098d36d5fedb4c98ee8b

Reviewer: Joshua Campbell

Author: Matthias Koeppe

Dependencies: #31002

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30315





---

archive/issue_comments_596764.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n \n Then we can downgrade `jmol` to `optional`.\n \n+See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n``````\n",
    "created_at": "2020-08-07T18:46:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596764",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 
 Then we can downgrade `jmol` to `optional`.
 
+See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
``````




---

archive/issue_comments_596765.json:
```json
{
    "body": "<a id='comment:2'></a>(deleted)",
    "created_at": "2020-08-08T05:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596765",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>(deleted)



---

archive/issue_comments_596766.json:
```json
{
    "body": "<a id='comment:3'></a>`./sage -pip install jupyter-jsmol` installs proper nbextensions:\n\n```\n$ jupyter nbextension list\nKnown nbextensions:\n  config dir: /Users/mkoeppe/s/sage/sage-rebasing/local/etc/jupyter/nbconfig\n    notebook section\n      jupyter_jsmol/extension  enabled \n      - Validating: OK\n      jupyter-js-widgets/extension  enabled \n      - Validating: OK\n```\nThe installed files can be seen in `$SAGE_LOCAL/share/jupyter/nbextensions/jupyter_jsmol/`",
    "created_at": "2020-08-08T05:56:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596766",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>`./sage -pip install jupyter-jsmol` installs proper nbextensions:

```
$ jupyter nbextension list
Known nbextensions:
  config dir: /Users/mkoeppe/s/sage/sage-rebasing/local/etc/jupyter/nbconfig
    notebook section
      jupyter_jsmol/extension  enabled 
      - Validating: OK
      jupyter-js-widgets/extension  enabled 
      - Validating: OK
```
The installed files can be seen in `$SAGE_LOCAL/share/jupyter/nbextensions/jupyter_jsmol/`



---

archive/issue_events_078518.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-13T17:11:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30315#event-78518"
}
```



---

archive/issue_comments_596767.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional\"",
    "created_at": "2020-11-29T06:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596767",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional"



---

archive/issue_comments_596768.json:
```json
{
    "body": "Changing commit from \"\" to \"ac1ab7c844cdeea9346f35e5691755fc713d18c8\"",
    "created_at": "2020-11-29T07:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596768",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "ac1ab7c844cdeea9346f35e5691755fc713d18c8"



---

archive/issue_comments_596769.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-29T07:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596769",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_596770.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2020-11-29T07:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596770",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_596771.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-11-29T07:00:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596771",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_596772.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-29T07:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_596773.json:
```json
{
    "body": "Changing commit from \"ac1ab7c844cdeea9346f35e5691755fc713d18c8\" to \"e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a\"",
    "created_at": "2020-11-29T07:02:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596773",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ac1ab7c844cdeea9346f35e5691755fc713d18c8" to "e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a"



---

archive/issue_comments_596774.json:
```json
{
    "body": "<a id='comment:9'></a>`sagetex` declares `jmol` as a dependency - what is it used for?",
    "created_at": "2020-11-29T07:05:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596774",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>`sagetex` declares `jmol` as a dependency - what is it used for?



---

archive/issue_comments_596775.json:
```json
{
    "body": "<a id='comment:10'></a>> `sagetex` declares `jmol` as a dependency - what is it used for?\n\n\nI think for generating a 3d image in its documentation, compilation of which is part of its test suite.",
    "created_at": "2020-11-29T21:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596775",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>> `sagetex` declares `jmol` as a dependency - what is it used for?


I think for generating a 3d image in its documentation, compilation of which is part of its test suite.



---

archive/issue_comments_596776.json:
```json
{
    "body": "<a id='comment:11'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596776",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_596777.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596777",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_596778.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#31020\"",
    "created_at": "2020-12-07T04:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596778",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#31020"



---

archive/issue_comments_596779.json:
```json
{
    "body": "Changing commit from \"e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a\" to \"6a549d97f2051ae6c158adc06ae6b6d86fde24dc\"",
    "created_at": "2020-12-07T04:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596779",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "e6ebaf7e812c5bbd4dfe9d2da0bcee73598d957a" to "6a549d97f2051ae6c158adc06ae6b6d86fde24dc"



---

archive/issue_comments_596780.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-12-07T04:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596780",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_596781.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:10 kcrisman]:\n> > `sagetex` declares `jmol` as a dependency - what is it used for?\n\n> \n> I think for generating a 3d image in its documentation, compilation of which is part of its test suite.\n\n\nThanks! I have adjusted the dependencies in #31020 (now a dependency) so that `jmol` is only treated as a dependency when `SAGE_CHECK` is active.",
    "created_at": "2020-12-07T04:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596781",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Replying to [comment:10 kcrisman]:
> > `sagetex` declares `jmol` as a dependency - what is it used for?

> 
> I think for generating a 3d image in its documentation, compilation of which is part of its test suite.


Thanks! I have adjusted the dependencies in #31020 (now a dependency) so that `jmol` is only treated as a dependency when `SAGE_CHECK` is active.



---

archive/issue_comments_596782.json:
```json
{
    "body": "Changing commit from \"6a549d97f2051ae6c158adc06ae6b6d86fde24dc\" to \"ae970c2c80a24bfeab28a1748881147c6cd12bf8\"",
    "created_at": "2020-12-07T04:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596782",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6a549d97f2051ae6c158adc06ae6b6d86fde24dc" to "ae970c2c80a24bfeab28a1748881147c6cd12bf8"



---

archive/issue_comments_596783.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-07T04:34:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596783",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_596784.json:
```json
{
    "body": "Changing dependencies from \"#31020\" to \"#31002, #31020\"",
    "created_at": "2020-12-07T04:45:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596784",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#31020" to "#31002, #31020"



---

archive/issue_comments_596785.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,4 +4,8 @@\n \n Then we can downgrade `jmol` to `optional`.\n \n+Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n+\n See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+\n+\n``````\n",
    "created_at": "2020-12-07T05:12:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596785",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,4 +4,8 @@
 
 Then we can downgrade `jmol` to `optional`.
 
+Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ
+
 See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+
+
``````




---

archive/issue_comments_596786.json:
```json
{
    "body": "<a id='comment:18'></a>That is not a good idea.  Because we want people to be able to build the documentation for SageTeX, which after all isn't \"really\" upstream.  Instead, we should see if jsmol or some other tool suffices to build 3d pictures in SageTeX, which is a very useful use case for it.  Untested = broken, and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.",
    "created_at": "2020-12-07T13:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596786",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:18'></a>That is not a good idea.  Because we want people to be able to build the documentation for SageTeX, which after all isn't "really" upstream.  Instead, we should see if jsmol or some other tool suffices to build 3d pictures in SageTeX, which is a very useful use case for it.  Untested = broken, and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.



---

archive/issue_comments_596787.json:
```json
{
    "body": "<a id='comment:19'></a>> and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.\n\nThough my info on the build system is pretty outdated :-)",
    "created_at": "2020-12-07T13:12:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596787",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:19'></a>> and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.

Though my info on the build system is pretty outdated :-)



---

archive/issue_comments_596788.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 kcrisman]:\n> > and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.\n\n> Though my info on the build system is pretty outdated :-)\n\nActually, we've introduced a few of these this year because the complexity of Python test frameworks has escalated and we don't want to ship all of their dependencies.  Currently, `networkx`, `rpy2`, and `sage_sws2rst` all have check-only dependencies.",
    "created_at": "2020-12-07T18:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596788",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Replying to [comment:19 kcrisman]:
> > and I don't think that we've ever had a dependency only in `SAGE_CHECK` before.

> Though my info on the build system is pretty outdated :-)

Actually, we've introduced a few of these this year because the complexity of Python test frameworks has escalated and we don't want to ship all of their dependencies.  Currently, `networkx`, `rpy2`, and `sage_sws2rst` all have check-only dependencies.



---

archive/issue_comments_596789.json:
```json
{
    "body": "<a id='comment:21'></a>Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ...",
    "created_at": "2020-12-07T18:34:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596789",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:21'></a>Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ...



---

archive/issue_comments_596790.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 kcrisman]:\n> Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ... \n\n\nWhat's the status of generating 3D plots and saving them using threejs? I think for SageTeX it is irrelevant what is producing pictures, just show that it works well. Tachyon is not the best in this regard.",
    "created_at": "2020-12-07T20:32:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596790",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:22'></a>Replying to [comment:21 kcrisman]:
> Interesting.  I wonder whether jsmol might be a drop-in replacement for this specific use case though. Or even Tachyon ... 


What's the status of generating 3D plots and saving them using threejs? I think for SageTeX it is irrelevant what is producing pictures, just show that it works well. Tachyon is not the best in this regard.



---

archive/issue_comments_596791.json:
```json
{
    "body": "<a id='comment:23'></a>A discussion has unfolded in https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ",
    "created_at": "2020-12-07T23:35:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596791",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>A discussion has unfolded in https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ



---

archive/issue_comments_596792.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,11 +1,11 @@\n Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. \n \n-We should switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n-\n-Then we can downgrade `jmol` to `optional`.\n+In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.\n \n Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ\n \n-See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+See also: \n+- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol\n+- #31027 - Make jmol optional\n \n \n``````\n",
    "created_at": "2020-12-08T01:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596792",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,11 +1,11 @@
 Currently, jsmol is installed by the jmol spkg and then symlinked into the jupyter notebook directory. 
 
-We should switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.
-
-Then we can downgrade `jmol` to `optional`.
+In this ticket, we switch to https://pypi.org/project/jupyter-jsmol/ (https://github.com/fekad/jupyter-jsmol), which can be installed by standard Python tools.
 
 Discussion: https://groups.google.com/g/sage-devel/c/qKqTmLzHAbg/m/6YxQ_qWUBQAJ
 
-See also: #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+See also: 
+- #30316 - Update jmol to 14.31.2, add spkg-configure for jmol
+- #31027 - Make jmol optional
 
 
``````




---

archive/issue_comments_596793.json:
```json
{
    "body": "Changing commit from \"ae970c2c80a24bfeab28a1748881147c6cd12bf8\" to \"bf3c1dc8956ce14720b0a230ab7d99198de64c40\"",
    "created_at": "2020-12-08T01:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596793",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ae970c2c80a24bfeab28a1748881147c6cd12bf8" to "bf3c1dc8956ce14720b0a230ab7d99198de64c40"



---

archive/issue_comments_596794.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-12-08T01:50:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596794",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_596795.json:
```json
{
    "body": "Changing dependencies from \"#31002, #31020\" to \"#31002\"",
    "created_at": "2020-12-08T01:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596795",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#31002, #31020" to "#31002"



---

archive/issue_comments_596796.json:
```json
{
    "body": "<a id='comment:26'></a>I have narrowed this ticket to only separating the `jmol` and `jsmol` installation.",
    "created_at": "2020-12-08T01:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596796",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>I have narrowed this ticket to only separating the `jmol` and `jsmol` installation.



---

archive/issue_comments_596797.json:
```json
{
    "body": "<a id='comment:27'></a>Making jmol optional, and the discussion about new technologies to create images from 3d graphics, is now on #31027.",
    "created_at": "2020-12-08T01:53:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596797",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Making jmol optional, and the discussion about new technologies to create images from 3d graphics, is now on #31027.



---

archive/issue_comments_596798.json:
```json
{
    "body": "<a id='comment:28'></a>I was able to verify that JSmol still works correctly in both Jupyter and JupyterLab. However, I did notice a test failure in `src/sage/repl/ipython_kernel/install.py` due to the new deprecation warning:\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 142, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    spec.use_local_jsmol()\nExpected nothing\nGot:\n    doctest:warning\n      File \"/home/joshua/sage/src/bin/sage-runtests\", line 182, in <module>\n        err = DC.run()\n    [...]\n    :\n    DeprecationWarning: Symlinking jsmol is no longer necessary\n    See https://trac.sagemath.org/30315 for details.\n```\n\nAlso, after removing the `local/share/jsmol` folder since it is no longer needed (and wouldn't be present on a clean install), I get a couple more test failures in the same file:\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 144, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    os.path.isdir(jsmol)\nExpected:\n    True\nGot:\n    False\n```\n\nand\n\n```\nFile \"src/sage/repl/ipython_kernel/install.py\", line 146, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol\nFailed example:\n    os.path.isfile(os.path.join(jsmol, \"JSmol.min.js\"))\nExpected:\n    True\nGot:\n    False\n```",
    "created_at": "2020-12-08T18:14:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596798",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:28'></a>I was able to verify that JSmol still works correctly in both Jupyter and JupyterLab. However, I did notice a test failure in `src/sage/repl/ipython_kernel/install.py` due to the new deprecation warning:

```
File "src/sage/repl/ipython_kernel/install.py", line 142, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    spec.use_local_jsmol()
Expected nothing
Got:
    doctest:warning
      File "/home/joshua/sage/src/bin/sage-runtests", line 182, in <module>
        err = DC.run()
    [...]
    :
    DeprecationWarning: Symlinking jsmol is no longer necessary
    See https://trac.sagemath.org/30315 for details.
```

Also, after removing the `local/share/jsmol` folder since it is no longer needed (and wouldn't be present on a clean install), I get a couple more test failures in the same file:

```
File "src/sage/repl/ipython_kernel/install.py", line 144, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    os.path.isdir(jsmol)
Expected:
    True
Got:
    False
```

and

```
File "src/sage/repl/ipython_kernel/install.py", line 146, in sage.repl.ipython_kernel.install.SageKernelSpec.use_local_jsmol
Failed example:
    os.path.isfile(os.path.join(jsmol, "JSmol.min.js"))
Expected:
    True
Got:
    False
```



---

archive/issue_comments_596799.json:
```json
{
    "body": "<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-09T00:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596799",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_596800.json:
```json
{
    "body": "Changing commit from \"bf3c1dc8956ce14720b0a230ab7d99198de64c40\" to \"7732e2eac50a3e2c0f865304ce4eecd26c6ff960\"",
    "created_at": "2020-12-09T00:53:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596800",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bf3c1dc8956ce14720b0a230ab7d99198de64c40" to "7732e2eac50a3e2c0f865304ce4eecd26c6ff960"



---

archive/issue_comments_596801.json:
```json
{
    "body": "<a id='comment:30'></a>Thanks. This function, after all, does not make sense any more, so there's no point in trying to go through deprecation.  I have now removed it completely (alongside with the variable `JSMOL_DIR`).",
    "created_at": "2020-12-09T00:55:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596801",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>Thanks. This function, after all, does not make sense any more, so there's no point in trying to go through deprecation.  I have now removed it completely (alongside with the variable `JSMOL_DIR`).



---

archive/issue_comments_596802.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-09T16:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596802",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_596803.json:
```json
{
    "body": "<a id='comment:31'></a>Looks good. JSmol still works in Jupyter and JupyterLab.",
    "created_at": "2020-12-09T16:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596803",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:31'></a>Looks good. JSmol still works in Jupyter and JupyterLab.



---

archive/issue_comments_596804.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Joshua Campbell\"",
    "created_at": "2020-12-09T16:41:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596804",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing reviewer from "" to "Joshua Campbell"



---

archive/issue_comments_596805.json:
```json
{
    "body": "<a id='comment:32'></a>Thank you!",
    "created_at": "2020-12-09T19:59:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596805",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Thank you!



---

archive/issue_comments_596806.json:
```json
{
    "body": "Changing commit from \"7732e2eac50a3e2c0f865304ce4eecd26c6ff960\" to \"80a3db1582a541ceaaa5098d36d5fedb4c98ee8b\"",
    "created_at": "2020-12-10T00:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596806",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "7732e2eac50a3e2c0f865304ce4eecd26c6ff960" to "80a3db1582a541ceaaa5098d36d5fedb4c98ee8b"



---

archive/issue_comments_596807.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2020-12-10T00:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596807",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_596808.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2020-12-10T00:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596808",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_596809.json:
```json
{
    "body": "<a id='comment:34'></a>Forgot to actually use #31002 - this change is necessary for correct installation on WSL",
    "created_at": "2020-12-10T00:57:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596809",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>Forgot to actually use #31002 - this change is necessary for correct installation on WSL



---

archive/issue_comments_596810.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-10T02:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596810",
    "user": "https://github.com/jcamp0x2a"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_596811.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:34 mkoeppe]:\n> Forgot to actually use #31002 - this change is necessary for correct installation on WSL\n\n\nOk. I tested this on Ubuntu WSL earlier without any installation issues. If I understand #31002 correctly, the problem was occurring due to mounting Windows folders, which I'm not doing, so that's probably why I didn't run into it.\n\nI've gone ahead and re-verified that JSmol still works in Jupyter and JupyterLab.",
    "created_at": "2020-12-10T02:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596811",
    "user": "https://github.com/jcamp0x2a"
}
```

<a id='comment:35'></a>Replying to [comment:34 mkoeppe]:
> Forgot to actually use #31002 - this change is necessary for correct installation on WSL


Ok. I tested this on Ubuntu WSL earlier without any installation issues. If I understand #31002 correctly, the problem was occurring due to mounting Windows folders, which I'm not doing, so that's probably why I didn't run into it.

I've gone ahead and re-verified that JSmol still works in Jupyter and JupyterLab.



---

archive/issue_comments_596812.json:
```json
{
    "body": "<a id='comment:36'></a>Thanks again!",
    "created_at": "2020-12-10T03:16:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596812",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>Thanks again!



---

archive/issue_events_078519.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-13T20:30:50Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30315#event-78519"
}
```



---

archive/issue_comments_596813.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional\" to \"80a3db1582a541ceaaa5098d36d5fedb4c98ee8b\"",
    "created_at": "2020-12-13T20:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596813",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/switch_jsmol_to_jupyter_jsmol__make_jmol_optional" to "80a3db1582a541ceaaa5098d36d5fedb4c98ee8b"



---

archive/issue_comments_596814.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-13T20:30:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30315",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30315#issuecomment-596814",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
