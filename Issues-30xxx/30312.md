# Issue 30312: Graphs: more classical parameters distance regular graphs

archive/issues_030075.json:
```json
{
    "body": "Added three families of distance regular graphs, they are based, respectively, on bilinear forms, alternating forms and hermitian forms.\n\nAlso moved `AztecDiamondGraph` to families of graphs rather than basic structures.\n\nCC:  @dimpase\n\nBranch/Commit: 9e69f0dc82fe102a853bb3cefe6c874c094227c2\n\nReviewer: Dima Pasechnik\n\nAuthor: Ivo Maffei\n\nDependencies: #30303\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30312\n\n",
    "closed_at": "2020-09-15T21:58:33Z",
    "created_at": "2020-08-07T14:29:03Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Graphs: more classical parameters distance regular graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30312",
    "user": "https://github.com/Ivo-Maffei"
}
```
Added three families of distance regular graphs, they are based, respectively, on bilinear forms, alternating forms and hermitian forms.

Also moved `AztecDiamondGraph` to families of graphs rather than basic structures.

CC:  @dimpase

Branch/Commit: 9e69f0dc82fe102a853bb3cefe6c874c094227c2

Reviewer: Dima Pasechnik

Author: Ivo Maffei

Dependencies: #30303

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30312





---

archive/issue_comments_455876.json:
```json
{
    "body": "<a id='comment:1'></a>Last 10 new commits:",
    "created_at": "2020-08-07T14:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455876",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:1'></a>Last 10 new commits:



---

archive/issue_comments_455877.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-07T14:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455877",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_455878.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-11T10:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455878",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_455879.json:
```json
{
    "body": "<a id='comment:2'></a>Remainder to update once #30303 and #29886 are sorted",
    "created_at": "2020-08-11T10:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455879",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:2'></a>Remainder to update once #30303 and #29886 are sorted



---

archive/issue_comments_455880.json:
```json
{
    "body": "<a id='comment:3'></a>`..FormGraph` should be `..FormsGraph`, as these are graphs with vertex sets being sets of forms, right?",
    "created_at": "2020-08-11T10:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455880",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>`..FormGraph` should be `..FormsGraph`, as these are graphs with vertex sets being sets of forms, right?



---

archive/issue_comments_455881.json:
```json
{
    "body": "<a id='comment:4'></a>Yes, I've changed it and also merged #30303 (with the update to 9.2.beta8).\nIf #29886 will take too much time, I could remove the dependency and generate the needed matrices with the `...FormsGraph` method.\nThis is what I initially did ages ago.\n\nOf course as soon as #29886 or something similar gets fixed, I can change back these functions to something neater.",
    "created_at": "2020-08-11T12:44:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455881",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:4'></a>Yes, I've changed it and also merged #30303 (with the update to 9.2.beta8).
If #29886 will take too much time, I could remove the dependency and generate the needed matrices with the `...FormsGraph` method.
This is what I initially did ages ago.

Of course as soon as #29886 or something similar gets fixed, I can change back these functions to something neater.



---

archive/issue_comments_455882.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-11T13:14:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455882",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455883.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-12T13:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455884.json:
```json
{
    "body": "<a id='comment:7'></a>Now this should work without #29886.\nIt's much slower but it should do for now.",
    "created_at": "2020-08-12T13:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455884",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:7'></a>Now this should work without #29886.
It's much slower but it should do for now.



---

archive/issue_comments_455885.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-12T13:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455885",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_455886.json:
```json
{
    "body": "<a id='comment:8'></a>very long doctests that need more than 1 minute, say, should be tagged as `# not tested` - by the way, on my machine some long doctests with meataxe used crash with `Memory Error`, while complete if run at the sage prompt (due to doctest parallelism I guess).  \n\nAlso, there is a typo: `bilienar` -> `bilinear`",
    "created_at": "2020-08-22T11:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455886",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>very long doctests that need more than 1 minute, say, should be tagged as `# not tested` - by the way, on my machine some long doctests with meataxe used crash with `Memory Error`, while complete if run at the sage prompt (due to doctest parallelism I guess).  

Also, there is a typo: `bilienar` -> `bilinear`



---

archive/issue_comments_455887.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-22T11:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455887",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_455888.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-22T12:30:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455888",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455889.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-22T12:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455889",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_455890.json:
```json
{
    "body": "<a id='comment:10'></a>I added the `# not tested` flag and run all doctests with and without the `--long` flag.\nThey all pass in roughly 2 min.",
    "created_at": "2020-08-22T12:32:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455890",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:10'></a>I added the `# not tested` flag and run all doctests with and without the `--long` flag.
They all pass in roughly 2 min.



---

archive/issue_comments_455891.json:
```json
{
    "body": "<a id='comment:11'></a>more typos\n\n- adjecent -> adjacent\n- aprime -> a prime",
    "created_at": "2020-08-22T13:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455891",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>more typos

- adjecent -> adjacent
- aprime -> a prime



---

archive/issue_comments_455892.json:
```json
{
    "body": "<a id='comment:12'></a>I also think that the Hermitian case should take not q=r<sup>2</sup> as input, but r itself.",
    "created_at": "2020-08-22T13:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455892",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>I also think that the Hermitian case should take not q=r<sup>2</sup> as input, but r itself.



---

archive/issue_comments_455893.json:
```json
{
    "body": "<a id='comment:13'></a>As you are on the forms graph here, let's add the missing case of the symmetric 3x3 forms graph, as\ndiscussed in [BCN] corrections: https://www.win.tue.nl/~aeb/drg/ch9\n\n```\nFor $n = 3$ we find a distance-regular graph with intersection array\n$\"{\"q sup 3 -1 , q sup 3 -q , q sup 3 -q sup 2 + 1 ;~ 1,q,q sup 2 -1\"}\"$\n(in the diagram on p. 286, merge the balloons for the forms of rank 3 and\nthe alternating forms of rank 2).\n```",
    "created_at": "2020-08-22T13:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455893",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>As you are on the forms graph here, let's add the missing case of the symmetric 3x3 forms graph, as
discussed in [BCN] corrections: https://www.win.tue.nl/~aeb/drg/ch9

```
For $n = 3$ we find a distance-regular graph with intersection array
$"{"q sup 3 -1 , q sup 3 -q , q sup 3 -q sup 2 + 1 ;~ 1,q,q sup 2 -1"}"$
(in the diagram on p. 286, merge the balloons for the forms of rank 3 and
the alternating forms of rank 2).
```



---

archive/issue_comments_455894.json:
```json
{
    "body": "<a id='comment:14'></a>Having the latter should allow a more economic definition of the Hermitian case, as a product of the symmetric forms graph over GF(r) and alternating forms graph over GF(r).\n\nIt's the product, in the sense that vertices are pairs, 2 vertices (a,b) and (c,d) are adjacent iff \nrk(a-c+i(b-d))=1, where i is a generator of GF(q) over GF(r).\n(If I'm not mistaken, rk(a-c+i(b-d))=1 may be expressed as \"either rk(a-c)+rk(b-d)<2, or\nrk(a-c)=rk(b-d)=1, Ker(a-c)=Ker(b-d).)",
    "created_at": "2020-08-22T13:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455894",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:14'></a>Having the latter should allow a more economic definition of the Hermitian case, as a product of the symmetric forms graph over GF(r) and alternating forms graph over GF(r).

It's the product, in the sense that vertices are pairs, 2 vertices (a,b) and (c,d) are adjacent iff 
rk(a-c+i(b-d))=1, where i is a generator of GF(q) over GF(r).
(If I'm not mistaken, rk(a-c+i(b-d))=1 may be expressed as "either rk(a-c)+rk(b-d)<2, or
rk(a-c)=rk(b-d)=1, Ker(a-c)=Ker(b-d).)



---

archive/issue_comments_455895.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 dimpase]:\n> As you are on the forms graph here, let's add the missing case of the symmetric 3x3 forms graph, as\n> discussed in [BCN] corrections: https://www.win.tue.nl/~aeb/drg/ch9\n> \n> ```\n> For $n = 3$ we find a distance-regular graph with intersection array\n> $\"{\"q sup 3 -1 , q sup 3 -q , q sup 3 -q sup 2 + 1 ;~ 1,q,q sup 2 -1\"}\"$\n> (in the diagram on p. 286, merge the balloons for the forms of rank 3 and\n> the alternating forms of rank 2).\n> ```\n\nI think these graphs have the same intersection array of the Brouwer-Pasechnik graph (https://arxiv.org/abs/1107.0475).\nYou definitely know if I'm wrong.\n\nThe construction given for that graph is easy and works in O(E), so I chose that one over the symmetric matrices one.\nOf course we could have both if you wish.",
    "created_at": "2020-08-22T14:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455895",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:15'></a>Replying to [comment:13 dimpase]:
> As you are on the forms graph here, let's add the missing case of the symmetric 3x3 forms graph, as
> discussed in [BCN] corrections: https://www.win.tue.nl/~aeb/drg/ch9
> 
> ```
> For $n = 3$ we find a distance-regular graph with intersection array
> $"{"q sup 3 -1 , q sup 3 -q , q sup 3 -q sup 2 + 1 ;~ 1,q,q sup 2 -1"}"$
> (in the diagram on p. 286, merge the balloons for the forms of rank 3 and
> the alternating forms of rank 2).
> ```

I think these graphs have the same intersection array of the Brouwer-Pasechnik graph (https://arxiv.org/abs/1107.0475).
You definitely know if I'm wrong.

The construction given for that graph is easy and works in O(E), so I chose that one over the symmetric matrices one.
Of course we could have both if you wish.



---

archive/issue_comments_455896.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:14 dimpase]:\n> Having the latter should allow a more economic definition of the Hermitian case, as a product of the symmetric forms graph over GF(r) and alternating forms graph over GF(r).\n> \n> It's the product, in the sense that vertices are pairs, 2 vertices (a,b) and (c,d) are adjacent iff \n> rk(a-c+i(b-d))=1, where i is a generator of GF(q) over GF(r).\n> (If I'm not mistaken, rk(a-c+i(b-d))=1 may be expressed as \"either rk(a-c)+rk(b-d)<2, or\n> rk(a-c)=rk(b-d)=1, Ker(a-c)=Ker(b-d).)\n\nI'll still try this construction. Could you clarify what you mean by \"a generator of GF(q) over GF(r)\"?\nDo you mean $i \\in GF(q)$ s.t. $i$ generated $GF(q) / GF(r)$ as vector spaces over $GF(r)$?",
    "created_at": "2020-08-22T14:25:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455896",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:16'></a>Replying to [comment:14 dimpase]:
> Having the latter should allow a more economic definition of the Hermitian case, as a product of the symmetric forms graph over GF(r) and alternating forms graph over GF(r).
> 
> It's the product, in the sense that vertices are pairs, 2 vertices (a,b) and (c,d) are adjacent iff 
> rk(a-c+i(b-d))=1, where i is a generator of GF(q) over GF(r).
> (If I'm not mistaken, rk(a-c+i(b-d))=1 may be expressed as "either rk(a-c)+rk(b-d)<2, or
> rk(a-c)=rk(b-d)=1, Ker(a-c)=Ker(b-d).)

I'll still try this construction. Could you clarify what you mean by "a generator of GF(q) over GF(r)"?
Do you mean $i \in GF(q)$ s.t. $i$ generated $GF(q) / GF(r)$ as vector spaces over $GF(r)$?



---

archive/issue_comments_455897.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:15 gh-Ivo-Maffei]:\n> Replying to [comment:13 dimpase]:\n> > As you are on the forms graph here, let's add the missing case of the symmetric 3x3 forms graph, as\n> > discussed in [BCN] corrections: https://www.win.tue.nl/~aeb/drg/ch9\n> > \n> > ```\n> > For $n = 3$ we find a distance-regular graph with intersection array\n> > $\"{\"q sup 3 -1 , q sup 3 -q , q sup 3 -q sup 2 + 1 ;~ 1,q,q sup 2 -1\"}\"$\n> > (in the diagram on p. 286, merge the balloons for the forms of rank 3 and\n> > the alternating forms of rank 2).\n> > ```\n\n> I think these graphs have the same intersection array of the Brouwer-Pasechnik graph (https://arxiv.org/abs/1107.0475).\n> You definitely know if I'm wrong.\n> \n> The construction given for that graph is easy and works in O(E), so I chose that one over the symmetric matrices one.\n> Of course we could have both if you wish.\n\n\nin fact, yes, sure, https://arxiv.org/abs/1107.0475 points out to https://www.win.tue.nl/~aeb/drg/ch9 and discusses the relation between the two. There is something with q being even or odd there, so beware of details.",
    "created_at": "2020-08-23T08:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455897",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>Replying to [comment:15 gh-Ivo-Maffei]:
> Replying to [comment:13 dimpase]:
> > As you are on the forms graph here, let's add the missing case of the symmetric 3x3 forms graph, as
> > discussed in [BCN] corrections: https://www.win.tue.nl/~aeb/drg/ch9
> > 
> > ```
> > For $n = 3$ we find a distance-regular graph with intersection array
> > $"{"q sup 3 -1 , q sup 3 -q , q sup 3 -q sup 2 + 1 ;~ 1,q,q sup 2 -1"}"$
> > (in the diagram on p. 286, merge the balloons for the forms of rank 3 and
> > the alternating forms of rank 2).
> > ```

> I think these graphs have the same intersection array of the Brouwer-Pasechnik graph (https://arxiv.org/abs/1107.0475).
> You definitely know if I'm wrong.
> 
> The construction given for that graph is easy and works in O(E), so I chose that one over the symmetric matrices one.
> Of course we could have both if you wish.


in fact, yes, sure, https://arxiv.org/abs/1107.0475 points out to https://www.win.tue.nl/~aeb/drg/ch9 and discusses the relation between the two. There is something with q being even or odd there, so beware of details.



---

archive/issue_comments_455898.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:16 gh-Ivo-Maffei]:\n\n> I'll still try this construction. Could you clarify what you mean by \"a generator of GF(q) over GF(r)\"?\n> Do you mean $i \\in GF(q)$ s.t. $i$ generated $GF(q) / GF(r)$ as vector spaces over $GF(r)$?\nyes. That is, any i in GF(q)\\GF(r) will do.",
    "created_at": "2020-08-23T08:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455898",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:18'></a>Replying to [comment:16 gh-Ivo-Maffei]:

> I'll still try this construction. Could you clarify what you mean by "a generator of GF(q) over GF(r)"?
> Do you mean $i \in GF(q)$ s.t. $i$ generated $GF(q) / GF(r)$ as vector spaces over $GF(r)$?
yes. That is, any i in GF(q)\GF(r) will do.



---

archive/issue_comments_455899.json:
```json
{
    "body": "<a id='comment:19'></a>at the moment `graphs.HermitianFormsGraph(2,9)` is horribly slow. \n\nE.g. it could in part be due to slowness in computing the below-diagonal part. Taking to `r`-th power is perhaps the worst possible way to compute the map in question. Instead, choose `i` as above, compute `i`<sup>r</sup> (once), then for a,b in GF(r) one has (a+ib)<sup>r</sup>= a+i<sup>r</sup>b.\n\nAnother place is rank 1 Hermitian matrices. Each such nxn matrix has form vv<sup>*</sup>, for v in GF(q)<sup>n</sup>,\nand * denoting the map induced by taking to r-th power. So no need to compute ranks and filter on rank 1.",
    "created_at": "2020-08-23T09:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455899",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:19'></a>at the moment `graphs.HermitianFormsGraph(2,9)` is horribly slow. 

E.g. it could in part be due to slowness in computing the below-diagonal part. Taking to `r`-th power is perhaps the worst possible way to compute the map in question. Instead, choose `i` as above, compute `i`<sup>r</sup> (once), then for a,b in GF(r) one has (a+ib)<sup>r</sup>= a+i<sup>r</sup>b.

Another place is rank 1 Hermitian matrices. Each such nxn matrix has form vv<sup>*</sup>, for v in GF(q)<sup>n</sup>,
and * denoting the map induced by taking to r-th power. So no need to compute ranks and filter on rank 1.



---

archive/issue_comments_455900.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-23T09:27:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455900",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_455901.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 dimpase]:\n> at the moment `graphs.HermitianFormsGraph(2,9)` is horribly slow. \n\nTotally agree, also `graphs.AlternatingFormsGraph` is too slow.\n\nI thought that the \"product\" construction was meant to solve the issue with the `HermitianFormsGraph`.",
    "created_at": "2020-08-23T10:18:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455901",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:20'></a>Replying to [comment:19 dimpase]:
> at the moment `graphs.HermitianFormsGraph(2,9)` is horribly slow. 

Totally agree, also `graphs.AlternatingFormsGraph` is too slow.

I thought that the "product" construction was meant to solve the issue with the `HermitianFormsGraph`.



---

archive/issue_comments_455902.json:
```json
{
    "body": "<a id='comment:21'></a>The \"product\" boils down pretty much to modifications I just explained, anyway.\nAlso, there seems to be no need to even construct matrices (I think the only place you needed them is to compute rank, but this can be skipped, as we just saw) - just keep everything as vectors.",
    "created_at": "2020-08-23T10:50:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455902",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:21'></a>The "product" boils down pretty much to modifications I just explained, anyway.
Also, there seems to be no need to even construct matrices (I think the only place you needed them is to compute rank, but this can be skipped, as we just saw) - just keep everything as vectors.



---

archive/issue_comments_455903.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-23T17:03:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455903",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455904.json:
```json
{
    "body": "<a id='comment:23'></a>Now the function is quite fast. I wish `AlternatingFormsGraph` could be as fast.",
    "created_at": "2020-08-23T17:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455904",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:23'></a>Now the function is quite fast. I wish `AlternatingFormsGraph` could be as fast.



---

archive/issue_comments_455905.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-23T17:08:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455905",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_455906.json:
```json
{
    "body": "<a id='comment:24'></a>Hermitean forms tests don't need to be tagged by `# meataxe`.\nThere is also a typo `tow` -> `two`.",
    "created_at": "2020-08-23T17:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455906",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>Hermitean forms tests don't need to be tagged by `# meataxe`.
There is also a typo `tow` -> `two`.



---

archive/issue_comments_455907.json:
```json
{
    "body": "<a id='comment:25'></a>It seems to me that any alternating rank 2 nxn form  can be obtained from two n-vectors v,u, as\nvu<sup>T</sup> - uv<sup>T</sup>. This way alternating forms graphs can be dealt with in a similar way as Hermitean, without using meataxe and matrix spaces.",
    "created_at": "2020-08-23T18:00:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455907",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:25'></a>It seems to me that any alternating rank 2 nxn form  can be obtained from two n-vectors v,u, as
vu<sup>T</sup> - uv<sup>T</sup>. This way alternating forms graphs can be dealt with in a similar way as Hermitean, without using meataxe and matrix spaces.



---

archive/issue_comments_455908.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T13:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455908",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455909.json:
```json
{
    "body": "<a id='comment:27'></a>The `AlternatingFormsGraph` still builds some redundant rank 2 matrices. \nFor instance, `AlternatingFormsGraph(4, 3)` builds 2080 rank 2 matrices, but only 260 of them are distinct.",
    "created_at": "2020-08-24T13:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455909",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:27'></a>The `AlternatingFormsGraph` still builds some redundant rank 2 matrices. 
For instance, `AlternatingFormsGraph(4, 3)` builds 2080 rank 2 matrices, but only 260 of them are distinct.



---

archive/issue_comments_455910.json:
```json
{
    "body": "<a id='comment:28'></a>You can normalise one of the vectors, say u, to have the 1st non-zero coordinate equal to 1.",
    "created_at": "2020-08-24T13:42:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455910",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:28'></a>You can normalise one of the vectors, say u, to have the 1st non-zero coordinate equal to 1.



---

archive/issue_comments_455911.json:
```json
{
    "body": "<a id='comment:29'></a>There is still quite a lot of redundancy:\n`AlternatingFormsGraph(4, 3)` builds 1040 instead of 260 and\n`AlternatingFormsGraph(3, 4)` builds 315 instead of 63.\n\nIf getting the exact number is too complex, then I won't push further.",
    "created_at": "2020-08-24T14:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455911",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:29'></a>There is still quite a lot of redundancy:
`AlternatingFormsGraph(4, 3)` builds 1040 instead of 260 and
`AlternatingFormsGraph(3, 4)` builds 315 instead of 63.

If getting the exact number is too complex, then I won't push further.



---

archive/issue_comments_455912.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T14:11:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455912",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455913.json:
```json
{
    "body": "<a id='comment:31'></a>it seems that for `AlternatingFormsGraph(4, 3)` one somehow gets one rank 2 matrix in 4 different ways. Could you post an example?",
    "created_at": "2020-08-24T14:40:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455913",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>it seems that for `AlternatingFormsGraph(4, 3)` one somehow gets one rank 2 matrix in 4 different ways. Could you post an example?



---

archive/issue_comments_455914.json:
```json
{
    "body": "<a id='comment:32'></a>For instance:\n\n```sage                                                                                                                                                                                                                                     \n[0 2 2 1]\n[1 0 0 1]\n[1 0 0 1]\n[2 2 2 0]\n# the above is obtained by the following 4 pairs (v, u)\n[((2, 2, 2, 0), (0, 1, 1, 2)),\n ((2, 1, 1, 1), (0, 1, 1, 2)),\n ((2, 0, 0, 2), (0, 1, 1, 2)),\n ((0, 1, 1, 2), (1, 0, 0, 1))]\n```\n\nNot all matrices are constructed by pairs where 1 vectors is in all pairs (above (0, 1, 1, 2)):\n\n```sage\n[0 1 2 0]\n[2 0 0 2]\n[1 0 0 1]\n[0 1 2 0]\n#given by\n[((0, 2, 1, 0), (1, 0, 0, 1)),\n ((1, 0, 0, 1), (0, 1, 2, 0)),\n ((1, 2, 1, 1), (0, 1, 2, 0)),\n ((1, 1, 2, 1), (0, 1, 2, 0))]\n```\nThis time the vector (0, 1, 2, 0) in multiplied by 2 when it appears as v",
    "created_at": "2020-08-24T15:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455914",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:32'></a>For instance:

```sage                                                                                                                                                                                                                                     
[0 2 2 1]
[1 0 0 1]
[1 0 0 1]
[2 2 2 0]
# the above is obtained by the following 4 pairs (v, u)
[((2, 2, 2, 0), (0, 1, 1, 2)),
 ((2, 1, 1, 1), (0, 1, 1, 2)),
 ((2, 0, 0, 2), (0, 1, 1, 2)),
 ((0, 1, 1, 2), (1, 0, 0, 1))]
```

Not all matrices are constructed by pairs where 1 vectors is in all pairs (above (0, 1, 1, 2)):

```sage
[0 1 2 0]
[2 0 0 2]
[1 0 0 1]
[0 1 2 0]
#given by
[((0, 2, 1, 0), (1, 0, 0, 1)),
 ((1, 0, 0, 1), (0, 1, 2, 0)),
 ((1, 2, 1, 1), (0, 1, 2, 0)),
 ((1, 1, 2, 1), (0, 1, 2, 0))]
```
This time the vector (0, 1, 2, 0) in multiplied by 2 when it appears as v



---

archive/issue_comments_455915.json:
```json
{
    "body": "<a id='comment:33'></a>One further optimisation would be to take unordered pairs of u,v, both with 1st non-zero coordinates equal to 1, remove duplicates, and then scale the resulting matrices by the non-zero elements of GF(q).\nThis would cut the duplication by 2, I believe.\n\nI give up on further improving this for the time being (this seems to be a non-trivial maths question). \n\nI believe for our purposes it is fast enough.",
    "created_at": "2020-08-24T15:49:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455915",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:33'></a>One further optimisation would be to take unordered pairs of u,v, both with 1st non-zero coordinates equal to 1, remove duplicates, and then scale the resulting matrices by the non-zero elements of GF(q).
This would cut the duplication by 2, I believe.

I give up on further improving this for the time being (this seems to be a non-trivial maths question). 

I believe for our purposes it is fast enough.



---

archive/issue_comments_455916.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T16:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455916",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455917.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T16:26:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455917",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455918.json:
```json
{
    "body": "<a id='comment:36'></a>Can we also get rid of meataxe in BilinearFormsGraph ? Again, the idea is that every rank 1 mxn matrix can be written as uv<sup>T</sup>, for m-vector u and n-vector v, and so the adjacency may be computed without actually doing through matrices and their ranks.",
    "created_at": "2020-08-24T16:46:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455918",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:36'></a>Can we also get rid of meataxe in BilinearFormsGraph ? Again, the idea is that every rank 1 mxn matrix can be written as uv<sup>T</sup>, for m-vector u and n-vector v, and so the adjacency may be computed without actually doing through matrices and their ranks.



---

archive/issue_comments_455919.json:
```json
{
    "body": "<a id='comment:37'></a>Replying to [comment:36 dimpase]:\n> Can we also get rid of meataxe in BilinearFormsGraph ? Again, the idea is that every rank 1 mxn matrix can be written as uv<sup>T</sup>, for m-vector u and n-vector v, and so the adjacency may be computed without actually doing through matrices and their ranks.\n\nI can avoid computing ranks, but while in `AlternatingFormsGraph` and `HermitianFormsGraph` I was representing a form by the vector of the upper triangular entries, in `BilinearFormsGraph` I need the whole matrix.\n\nI can try using the MatrixSpace without `implementation=meataxe` or \"flattening\" all matrices to vectors, but we'll lose speed.",
    "created_at": "2020-08-24T17:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455919",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:37'></a>Replying to [comment:36 dimpase]:
> Can we also get rid of meataxe in BilinearFormsGraph ? Again, the idea is that every rank 1 mxn matrix can be written as uv<sup>T</sup>, for m-vector u and n-vector v, and so the adjacency may be computed without actually doing through matrices and their ranks.

I can avoid computing ranks, but while in `AlternatingFormsGraph` and `HermitianFormsGraph` I was representing a form by the vector of the upper triangular entries, in `BilinearFormsGraph` I need the whole matrix.

I can try using the MatrixSpace without `implementation=meataxe` or "flattening" all matrices to vectors, but we'll lose speed.



---

archive/issue_comments_455920.json:
```json
{
    "body": "<a id='comment:38'></a>In any event, please remove the rank computation there.",
    "created_at": "2020-08-25T07:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455920",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:38'></a>In any event, please remove the rank computation there.



---

archive/issue_comments_455921.json:
```json
{
    "body": "<a id='comment:39'></a>Otherwise, it looks good, great speedups!",
    "created_at": "2020-08-25T08:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455921",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:39'></a>Otherwise, it looks good, great speedups!



---

archive/issue_comments_455922.json:
```json
{
    "body": "<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-25T08:57:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455922",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455923.json:
```json
{
    "body": "<a id='comment:41'></a>Using integer vectors to iterate over the matrices cuts all times to half respect to the initial implementation with meataxe.",
    "created_at": "2020-08-25T08:58:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455923",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:41'></a>Using integer vectors to iterate over the matrices cuts all times to half respect to the initial implementation with meataxe.



---

archive/issue_comments_455924.json:
```json
{
    "body": "<a id='comment:42'></a>not sure how you encode elements of GF(q) as integers, in particular for nonprime q",
    "created_at": "2020-08-25T10:22:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455924",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:42'></a>not sure how you encode elements of GF(q) as integers, in particular for nonprime q



---

archive/issue_comments_455925.json:
```json
{
    "body": "<a id='comment:43'></a>I use integers only in `matricesOverq` and the encoding is given by `Fqelems` which maps integers to elements of GF(q).\nThe inverse GF(q) -> Int is not needed but it is given by `toInt = {n: x for n, x in enumerate(Fqelems)}`.\nAll arithmetic is done with elements of GF(q). The integers are only used to speed up the iteration `for m1 in matricesOverq`.",
    "created_at": "2020-08-25T10:40:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455925",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:43'></a>I use integers only in `matricesOverq` and the encoding is given by `Fqelems` which maps integers to elements of GF(q).
The inverse GF(q) -> Int is not needed but it is given by `toInt = {n: x for n, x in enumerate(Fqelems)}`.
All arithmetic is done with elements of GF(q). The integers are only used to speed up the iteration `for m1 in matricesOverq`.



---

archive/issue_comments_455926.json:
```json
{
    "body": "<a id='comment:44'></a>by the way, nothing prevents you from trying to use the meataxe backend for matrices, and falling back on the default one if it's not available.",
    "created_at": "2020-08-25T16:54:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455926",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:44'></a>by the way, nothing prevents you from trying to use the meataxe backend for matrices, and falling back on the default one if it's not available.



---

archive/issue_comments_455927.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-25T20:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455927",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_455928.json:
```json
{
    "body": "<a id='comment:45'></a>If you like to add the meataxe speed up option, please do, else it's good as it is.",
    "created_at": "2020-08-25T20:16:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455928",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>If you like to add the meataxe speed up option, please do, else it's good as it is.



---

archive/issue_comments_455929.json:
```json
{
    "body": "<a id='comment:46'></a>Replying to [comment:45 dimpase]:\n> If you like to add the meataxe speed up option, please do, else it's good as it is.\n\nThe current code is faster than any previous version that used meataxe\nI'm not sure how to speed things up more with meataxe",
    "created_at": "2020-08-26T06:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455929",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:46'></a>Replying to [comment:45 dimpase]:
> If you like to add the meataxe speed up option, please do, else it's good as it is.

The current code is faster than any previous version that used meataxe
I'm not sure how to speed things up more with meataxe



---

archive/issue_events_078503.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-30T08:38:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30312#event-78503"
}
```



---

archive/issue_comments_455930.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-30T08:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455930",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_455931.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2020-08-30T10:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455931",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_455932.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2020-08-30T10:12:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455932",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_078504.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-30T10:12:25Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30312#event-78504"
}
```



---

archive/issue_comments_455933.json:
```json
{
    "body": "<a id='comment:49'></a>\n```\n**********************************************************************\nFile \"src/sage/graphs/generators/distance_regular.pyx\", line 629, in sage.graphs.generators.distance_regular.BilinearFormsGraph\nFailed example:\n    G = graphs.BilinearFormsGraph(3,3,3)  # long time (20 s)\nException raised:\n    Traceback (most recent call last):\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/var/lib/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.generators.distance_regular.BilinearFormsGraph[2]>\", line 1, in <module>\n        G = graphs.BilinearFormsGraph(Integer(3),Integer(3),Integer(3))  # long time (20 s)\n      File \"sage/graphs/generators/distance_regular.pyx\", line 679, in sage.graphs.generators.distance_regular.BilinearFormsGraph (build/cythonized/sage/graphs/generators/distance_regular.c:11661)\n        m3 = tuple([m1[i] + m2[i] for i in range(d*e)])\n    MemoryError\n**********************************************************************\nFile \"src/sage/graphs/generators/distance_regular.pyx\", line 630, in sage.graphs.generators.distance_regular.BilinearFormsGraph\nFailed example:\n    G.order()  # long time (due to above)\nExpected:\n    19683\nGot:\n    512\n**********************************************************************\n```",
    "created_at": "2020-08-30T10:13:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455933",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:49'></a>
```
**********************************************************************
File "src/sage/graphs/generators/distance_regular.pyx", line 629, in sage.graphs.generators.distance_regular.BilinearFormsGraph
Failed example:
    G = graphs.BilinearFormsGraph(3,3,3)  # long time (20 s)
Exception raised:
    Traceback (most recent call last):
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/var/lib/buildbot/slave/sage_git/build/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.generators.distance_regular.BilinearFormsGraph[2]>", line 1, in <module>
        G = graphs.BilinearFormsGraph(Integer(3),Integer(3),Integer(3))  # long time (20 s)
      File "sage/graphs/generators/distance_regular.pyx", line 679, in sage.graphs.generators.distance_regular.BilinearFormsGraph (build/cythonized/sage/graphs/generators/distance_regular.c:11661)
        m3 = tuple([m1[i] + m2[i] for i in range(d*e)])
    MemoryError
**********************************************************************
File "src/sage/graphs/generators/distance_regular.pyx", line 630, in sage.graphs.generators.distance_regular.BilinearFormsGraph
Failed example:
    G.order()  # long time (due to above)
Expected:
    19683
Got:
    512
**********************************************************************
```



---

archive/issue_comments_455934.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-30T14:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455934",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_455935.json:
```json
{
    "body": "<a id='comment:50'></a>I made the same changes of #30337 commit 59776810db8b3352985cc688c82b9ea6e48a70dc",
    "created_at": "2020-08-30T14:17:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455935",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:50'></a>I made the same changes of #30337 commit 59776810db8b3352985cc688c82b9ea6e48a70dc



---

archive/issue_comments_455936.json:
```json
{
    "body": "<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-03T08:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455936",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455937.json:
```json
{
    "body": "<a id='comment:52'></a>some tests should still be tagged long:\n\n```\nTrying (line 388):    G = graphs.distance_3_doubly_truncated_Golay_code_graph()\nExpecting nothing\nok [10.27 s]\n...\n\nTrying (line 582):    G = graphs.UstimenkoGraph(5, 2)\nExpecting nothing\nok [22.18 s]\nTrying (line 583):    G.order()\nExpecting:\n    2295\nok [0.00 s]\nTrying (line 585):    G.is_distance_regular(True)\nExpecting:\n    ([310, 224, None], [None, 1, 35])\nok [11.42 s]\n\nTrying (line 633):    G.is_distance_regular(True)\nExpecting:\n    ([105, 84, 48, None], [None, 1, 6, 28])\nok [17.22 s]\n\n```",
    "created_at": "2020-09-03T20:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455937",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:52'></a>some tests should still be tagged long:

```
Trying (line 388):    G = graphs.distance_3_doubly_truncated_Golay_code_graph()
Expecting nothing
ok [10.27 s]
...

Trying (line 582):    G = graphs.UstimenkoGraph(5, 2)
Expecting nothing
ok [22.18 s]
Trying (line 583):    G.order()
Expecting:
    2295
ok [0.00 s]
Trying (line 585):    G.is_distance_regular(True)
Expecting:
    ([310, 224, None], [None, 1, 35])
ok [11.42 s]

Trying (line 633):    G.is_distance_regular(True)
Expecting:
    ([105, 84, 48, None], [None, 1, 6, 28])
ok [17.22 s]

```



---

archive/issue_comments_455938.json:
```json
{
    "body": "<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-04T08:35:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455938",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455939.json:
```json
{
    "body": "<a id='comment:54'></a>`#long` tag missing on line 588, leading to a failing doctest:\n\n```\nFile \"src/sage/graphs/generators/distance_regular.pyx\", line 588, in sage.graphs.generators.distance_regular.UstimenkoGraph\nFailed example:\n    G.is_distance_regular(True)\nExpected:\n    ([390, 243, None], [None, 1, 130])\nGot:\n    ([70, 32, None], [None, 1, 35])\n```",
    "created_at": "2020-09-04T08:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455939",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:54'></a>`#long` tag missing on line 588, leading to a failing doctest:

```
File "src/sage/graphs/generators/distance_regular.pyx", line 588, in sage.graphs.generators.distance_regular.UstimenkoGraph
Failed example:
    G.is_distance_regular(True)
Expected:
    ([390, 243, None], [None, 1, 130])
Got:
    ([70, 32, None], [None, 1, 35])
```



---

archive/issue_comments_455940.json:
```json
{
    "body": "<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-04T08:48:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455940",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:55'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_455941.json:
```json
{
    "body": "<a id='comment:56'></a>long tests are still a bit too long to my taste, but OK.",
    "created_at": "2020-09-04T09:27:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455941",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>long tests are still a bit too long to my taste, but OK.



---

archive/issue_comments_455942.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-04T09:27:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455942",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_455943.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-09-15T21:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30312#issuecomment-455943",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_078505.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-09-15T21:58:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30312",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30312#event-78505"
}
```
