# Issue 30261: Meta-ticket: Immutability for manifold objects

archive/issues_030024.json:
```json
{
    "assignees": [],
    "body": "Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable and in conclusion to make them hashable.\n\nConnections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.\n\n- Scalar Fields: #30266\n- Scalar Fields II: #30311\n- Tensor Fields (without hash): #30274, #31255\n- Affine Connections: #30280\n- Bundle Connections: #30284\n- Sections (without hash): #30288, #31255\n- Chart Functions (without hash): #30310\n- Mixed Differential Forms: #31706\n\nDepends on #30181\nDepends on #30266\nDepends on #30274\nDepends on #30280\nDepends on #30284\nDepends on #30288\nDepends on #30310\nDepends on #30311\nDepends on #31706\n\nCC:  @egourgoulhon @mkoeppe @tscrim\n\nKeywords: **immutability**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30261_\n\n",
    "closed_at": "2021-07-25T13:50:22Z",
    "created_at": "2020-07-31T13:29:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20manifolds",
        "https://github.com/sagemath/sage/labels/invalid"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Meta-ticket: Immutability for manifold objects",
    "type": "issue",
    "updated_at": "2021-07-25T13:50:22Z",
    "url": "https://github.com/sagemath/sage/issues/30261",
    "user": "https://github.com/mjungmath"
}
```
Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable and in conclusion to make them hashable.

Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.

- Scalar Fields: #30266
- Scalar Fields II: #30311
- Tensor Fields (without hash): #30274, #31255
- Affine Connections: #30280
- Bundle Connections: #30284
- Sections (without hash): #30288, #31255
- Chart Functions (without hash): #30310
- Mixed Differential Forms: #31706

Depends on #30181
Depends on #30266
Depends on #30274
Depends on #30280
Depends on #30284
Depends on #30288
Depends on #30310
Depends on #30311
Depends on #31706

CC:  @egourgoulhon @mkoeppe @tscrim

Keywords: **immutability**

_Issue created by migration from https://trac.sagemath.org/ticket/30261_





---

archive/issue_events_398608.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-31T13:29:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398608"
}
```



---

archive/issue_events_398609.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-31T13:29:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20manifolds",
    "label_color": "0000ff",
    "label_name": "component: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398609"
}
```



---

archive/issue_events_398610.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-31T13:29:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398610"
}
```



---

archive/issue_events_398611.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-07-31T13:29:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398611"
}
```



---

archive/issue_comments_482946.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-According to #30181, tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, it should be possible to make them immutable to make them hashable.\n+Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, sccording to #30181, it should be possible to make them immutable in conclusion to make them hashable.\n \n Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly to #30181 in this ticket.\n``````\n",
    "created_at": "2020-07-31T13:30:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482946",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-According to #30181, tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, it should be possible to make them immutable to make them hashable.
+Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, sccording to #30181, it should be possible to make them immutable in conclusion to make them hashable.
 
 Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly to #30181 in this ticket.
``````




---

archive/issue_comments_482947.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, sccording to #30181, it should be possible to make them immutable in conclusion to make them hashable.\n \n-Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly to #30181 in this ticket.\n+Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.\n``````\n",
    "created_at": "2020-07-31T13:30:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482947",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, sccording to #30181, it should be possible to make them immutable in conclusion to make them hashable.
 
-Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly to #30181 in this ticket.
+Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.
``````




---

archive/issue_comments_482948.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, sccording to #30181, it should be possible to make them immutable in conclusion to make them hashable.\n+Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable in conclusion to make them hashable.\n \n Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.\n``````\n",
    "created_at": "2020-07-31T13:31:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482948",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, sccording to #30181, it should be possible to make them immutable in conclusion to make them hashable.
+Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable in conclusion to make them hashable.
 
 Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.
``````




---

archive/issue_comments_482949.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable in conclusion to make them hashable.\n+Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable and in conclusion to make them hashable.\n \n Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.\n``````\n",
    "created_at": "2020-07-31T13:31:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482949",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable in conclusion to make them hashable.
+Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable and in conclusion to make them hashable.
 
 Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.
``````




---

archive/issue_comments_482950.json:
```json
{
    "body": "Dependencies: **#30181**",
    "created_at": "2020-07-31T19:58:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482950",
    "user": "https://github.com/mjungmath"
}
```

Dependencies: **#30181**



---

archive/issue_comments_482951.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nI haven't found any active use of the `Mutability` class in the whole Sage library. For the sake of generality, it would be good to have a class which inherits from `SageObject` and represents a mutable element. This would be good for e.g. connections. Either one adds such a class to `sage.structure.mutability` or, since the aforementioned class is not actively used anywhere, rename it accordingly (like `ElementWithMutability`) and adding an inheritance from `SageObject`. Of course, I would open another ticket for that. Probably, the `ModuleElementWithMutability` should be shifted in that file, too?\n\nThere is another issue, I have encountered due to the dependence of #30181. I simply changed the following lines in `sage.manifolds.differentiable.tensorfield`:\n\n```diff\n-from sage.structure.element import ModuleElement\n+from sage.structure.element import ModuleElementWithMutability\n\n-class TensorField(ModuleElement):\n+class TensorField(ModuleElementWithMutability):\n\n-        ModuleElement.__init__(self, parent)\n+        super().__init__(parent)\n```\n\nand I get the following error message:\n\n```\nsage: M = Manifold(2, 'M')\nsage: U = M.open_subset('U'); V = M.open_subset('V')\nsage: c_xy.<x,y> = U.chart(); c_uv.<u,v> = V.chart()\nTraceback (most recent call last)\n...\nTypeError: __init__() missing 1 required positional argument: 'tensor_type'\n```",
    "created_at": "2020-07-31T20:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482951",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:6" align="right">Comment 6</div>

I haven't found any active use of the `Mutability` class in the whole Sage library. For the sake of generality, it would be good to have a class which inherits from `SageObject` and represents a mutable element. This would be good for e.g. connections. Either one adds such a class to `sage.structure.mutability` or, since the aforementioned class is not actively used anywhere, rename it accordingly (like `ElementWithMutability`) and adding an inheritance from `SageObject`. Of course, I would open another ticket for that. Probably, the `ModuleElementWithMutability` should be shifted in that file, too?

There is another issue, I have encountered due to the dependence of #30181. I simply changed the following lines in `sage.manifolds.differentiable.tensorfield`:

```diff
-from sage.structure.element import ModuleElement
+from sage.structure.element import ModuleElementWithMutability

-class TensorField(ModuleElement):
+class TensorField(ModuleElementWithMutability):

-        ModuleElement.__init__(self, parent)
+        super().__init__(parent)
```

and I get the following error message:

```
sage: M = Manifold(2, 'M')
sage: U = M.open_subset('U'); V = M.open_subset('V')
sage: c_xy.<x,y> = U.chart(); c_uv.<u,v> = V.chart()
Traceback (most recent call last)
...
TypeError: __init__() missing 1 required positional argument: 'tensor_type'
```



---

archive/issue_comments_482952.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nIf you `super`, all `__init__`s need to have a compatible signature...",
    "created_at": "2020-07-31T20:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482952",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">Comment 7</div>

If you `super`, all `__init__`s need to have a compatible signature...



---

archive/issue_comments_482953.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@mjungmath](#comment%3A6):\n> For the sake of generality, it would be good to have a class which inherits from `SageObject` and represents a mutable element. This would be good for e.g. connections.\n\nStrong -1 This is a mixin class. Just add it to your inheritance. You don't have any Cython classes, so you can use multiple inheritance without any issues. I don't expect too many cases where having Cython is useful for elements with mutabiliy.\n\n> Probably, the `ModuleElementWithMutability` should be shifted in that file, too?\n\n-1 All of the ABCs for the elements are in `element.pyx`. Moving it would make it harder to find.",
    "created_at": "2020-08-01T01:48:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482953",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@mjungmath](#comment%3A6):
> For the sake of generality, it would be good to have a class which inherits from `SageObject` and represents a mutable element. This would be good for e.g. connections.

Strong -1 This is a mixin class. Just add it to your inheritance. You don't have any Cython classes, so you can use multiple inheritance without any issues. I don't expect too many cases where having Cython is useful for elements with mutabiliy.

> Probably, the `ModuleElementWithMutability` should be shifted in that file, too?

-1 All of the ABCs for the elements are in `element.pyx`. Moving it would make it harder to find.



---

archive/issue_comments_482954.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@tscrim](#comment%3A8):\n> Strong -1 This is a mixin class. Just add it to your inheritance. You don't have any Cython classes, so you can use multiple inheritance without any issues. I don't expect too many cases where having Cython is useful for elements with mutabiliy.\n\nYou mean\n\n```diff\n-class AffineConnection(SageObject):\n+class AffineConnection(SageObject, Mutability):\n```\n\nWhy is it working in this case? `SageObject` and `Mutability` are both Cython classes. I am a little bit confused...sorry.\n\n> \n> > Probably, the `ModuleElementWithMutability` should be shifted in that file, too?\n\n> \n> -1 All of the ABCs for the elements are in `element.pyx`. Moving it would make it harder to find.\n\nAlright, that makes sense.\n\n---\n\nThe inheritance above seems to cause some trouble, I think due to the `__reduce__` method in `Mutability`:\n\n```\nFile \"src/sage/manifolds/differentiable/affine_connection.py\", line 350, in sage.manifolds.differentiable.affine_connection.AffineConnection.__init__\nFailed example:\n    TestSuite(nab).run()\nExpected nothing\nGot:\n    Failure in _test_pickling:\n    Traceback (most recent call last):\n      File \"/home/michi/Projekte/sage-devel/local/lib/python3.7/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n        test_method(tester=tester)\n      File \"sage/structure/sage_object.pyx\", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)\n        tester.assertEqual(loads(dumps(self)), self)\n      File \"/home/michi/Projekte/sage-devel/local/lib/python3.7/unittest/case.py\", line 839, in assertEqual\n        assertion_func(first, second, msg=msg)\n      File \"/home/michi/Projekte/sage-devel/local/lib/python3.7/unittest/case.py\", line 832, in _baseAssertEqual\n        raise self.failureException(msg)\n    AssertionError: <sage.structure.mutability.Mutability object at 0x7fc1d06dd410> != Affine connection nabla on the 3-dimensional differentiable manifold M\n    ------------------------------------------------------------\n    The following tests failed: _test_pickling\n```",
    "created_at": "2020-08-01T06:26:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482954",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@tscrim](#comment%3A8):
> Strong -1 This is a mixin class. Just add it to your inheritance. You don't have any Cython classes, so you can use multiple inheritance without any issues. I don't expect too many cases where having Cython is useful for elements with mutabiliy.

You mean

```diff
-class AffineConnection(SageObject):
+class AffineConnection(SageObject, Mutability):
```

Why is it working in this case? `SageObject` and `Mutability` are both Cython classes. I am a little bit confused...sorry.

> 
> > Probably, the `ModuleElementWithMutability` should be shifted in that file, too?

> 
> -1 All of the ABCs for the elements are in `element.pyx`. Moving it would make it harder to find.

Alright, that makes sense.

---

The inheritance above seems to cause some trouble, I think due to the `__reduce__` method in `Mutability`:

```
File "src/sage/manifolds/differentiable/affine_connection.py", line 350, in sage.manifolds.differentiable.affine_connection.AffineConnection.__init__
Failed example:
    TestSuite(nab).run()
Expected nothing
Got:
    Failure in _test_pickling:
    Traceback (most recent call last):
      File "/home/michi/Projekte/sage-devel/local/lib/python3.7/site-packages/sage/misc/sage_unittest.py", line 296, in run
        test_method(tester=tester)
      File "sage/structure/sage_object.pyx", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)
        tester.assertEqual(loads(dumps(self)), self)
      File "/home/michi/Projekte/sage-devel/local/lib/python3.7/unittest/case.py", line 839, in assertEqual
        assertion_func(first, second, msg=msg)
      File "/home/michi/Projekte/sage-devel/local/lib/python3.7/unittest/case.py", line 832, in _baseAssertEqual
        raise self.failureException(msg)
    AssertionError: <sage.structure.mutability.Mutability object at 0x7fc1d06dd410> != Affine connection nabla on the 3-dimensional differentiable manifold M
    ------------------------------------------------------------
    The following tests failed: _test_pickling
```



---

archive/issue_comments_482955.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@mjungmath](#comment%3A9):\n> Replying to [@tscrim](#comment%3A8):\n> > Strong -1 This is a mixin class. Just add it to your inheritance. You don't have any Cython classes, so you can use multiple inheritance without any issues. I don't expect too many cases where having Cython is useful for elements with mutabiliy.\n\n> \n> You mean\n> \n> ```diff\n> -class AffineConnection(SageObject):\n> +class AffineConnection(SageObject, Mutability):\n> ```\n> \n> Why is it working in this case? `SageObject` and `Mutability` are both Cython classes. I am a little bit confused...sorry.\n\nNo. A Cython class cannot inherit from multiple things, but a Python class (as you have here) can. The classes it inherits from can both be Cython classes.\n\n> ---\n> \n> The inheritance above seems to cause some trouble, I think due to the `__reduce__` method in `Mutability`:\n> \n> ```\n> File \"src/sage/manifolds/differentiable/affine_connection.py\", line 350, in sage.manifolds.differentiable.affine_connection.AffineConnection.__init__\n> Failed example:\n>     TestSuite(nab).run()\n> Expected nothing\n> Got:\n>     Failure in _test_pickling:\n>     Traceback (most recent call last):\n>       File \"/home/michi/Projekte/sage-devel/local/lib/python3.7/site-packages/sage/misc/sage_unittest.py\", line 296, in run\n>         test_method(tester=tester)\n>       File \"sage/structure/sage_object.pyx\", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)\n>         tester.assertEqual(loads(dumps(self)), self)\n>       File \"/home/michi/Projekte/sage-devel/local/lib/python3.7/unittest/case.py\", line 839, in assertEqual\n>         assertion_func(first, second, msg=msg)\n>       File \"/home/michi/Projekte/sage-devel/local/lib/python3.7/unittest/case.py\", line 832, in _baseAssertEqual\n>         raise self.failureException(msg)\n>     AssertionError: <sage.structure.mutability.Mutability object at 0x7fc1d06dd410> != Affine connection nabla on the 3-dimensional differentiable manifold M\n>     ------------------------------------------------------------\n>     The following tests failed: _test_pickling\n> ```\n> \n\nYes, but not because it does not inherit from `SageObject`. It is purely an implementation issue trying to keep immutable objects immutable under pickling. I might argue that the `Mutability` should not have a `__reduce__`. Although some part of the issue is that you do not handle pickling in `AffineConnection`.",
    "created_at": "2020-08-01T09:31:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482955",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@mjungmath](#comment%3A9):
> Replying to [@tscrim](#comment%3A8):
> > Strong -1 This is a mixin class. Just add it to your inheritance. You don't have any Cython classes, so you can use multiple inheritance without any issues. I don't expect too many cases where having Cython is useful for elements with mutabiliy.

> 
> You mean
> 
> ```diff
> -class AffineConnection(SageObject):
> +class AffineConnection(SageObject, Mutability):
> ```
> 
> Why is it working in this case? `SageObject` and `Mutability` are both Cython classes. I am a little bit confused...sorry.

No. A Cython class cannot inherit from multiple things, but a Python class (as you have here) can. The classes it inherits from can both be Cython classes.

> ---
> 
> The inheritance above seems to cause some trouble, I think due to the `__reduce__` method in `Mutability`:
> 
> ```
> File "src/sage/manifolds/differentiable/affine_connection.py", line 350, in sage.manifolds.differentiable.affine_connection.AffineConnection.__init__
> Failed example:
>     TestSuite(nab).run()
> Expected nothing
> Got:
>     Failure in _test_pickling:
>     Traceback (most recent call last):
>       File "/home/michi/Projekte/sage-devel/local/lib/python3.7/site-packages/sage/misc/sage_unittest.py", line 296, in run
>         test_method(tester=tester)
>       File "sage/structure/sage_object.pyx", line 639, in sage.structure.sage_object.SageObject._test_pickling (build/cythonized/sage/structure/sage_object.c:4953)
>         tester.assertEqual(loads(dumps(self)), self)
>       File "/home/michi/Projekte/sage-devel/local/lib/python3.7/unittest/case.py", line 839, in assertEqual
>         assertion_func(first, second, msg=msg)
>       File "/home/michi/Projekte/sage-devel/local/lib/python3.7/unittest/case.py", line 832, in _baseAssertEqual
>         raise self.failureException(msg)
>     AssertionError: <sage.structure.mutability.Mutability object at 0x7fc1d06dd410> != Affine connection nabla on the 3-dimensional differentiable manifold M
>     ------------------------------------------------------------
>     The following tests failed: _test_pickling
> ```
> 

Yes, but not because it does not inherit from `SageObject`. It is purely an implementation issue trying to keep immutable objects immutable under pickling. I might argue that the `Mutability` should not have a `__reduce__`. Although some part of the issue is that you do not handle pickling in `AffineConnection`.



---

archive/issue_comments_482956.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nReplying to [@tscrim](#comment%3A10):\n> > Why is it working in this case? `SageObject` and `Mutability` are both Cython classes. I am a little bit confused...sorry.\n\n> \n> No. A Cython class cannot inherit from multiple things, but a Python class (as you have here) can. The classes it inherits from can both be Cython classes.\n\nI'm confused because `SageObject` and `Mutability` both add methods and\n\n```diff\n-class FreeModuleTensor(ModuleElement):\n+class FreeModuleTensor(ModuleElement, Mutability):\n```\n\nwon't work. What is the difference? Is it because `ModuleElement` already is inherited?\n\n> Yes, but not because it does not inherit from `SageObject`. It is purely an implementation issue trying to keep immutable objects immutable under pickling. I might argue that the `Mutability` should not have a `__reduce__`. Although some part of the issue is that you do not handle pickling in `AffineConnection`.\n\n \nMh. Should I then overload `__reduce__` or add `set_immutable()` etc. manually? Unfortunately, I don't know much about pickling.",
    "created_at": "2020-08-01T10:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482956",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:11" align="right">Comment 11</div>

Replying to [@tscrim](#comment%3A10):
> > Why is it working in this case? `SageObject` and `Mutability` are both Cython classes. I am a little bit confused...sorry.

> 
> No. A Cython class cannot inherit from multiple things, but a Python class (as you have here) can. The classes it inherits from can both be Cython classes.

I'm confused because `SageObject` and `Mutability` both add methods and

```diff
-class FreeModuleTensor(ModuleElement):
+class FreeModuleTensor(ModuleElement, Mutability):
```

won't work. What is the difference? Is it because `ModuleElement` already is inherited?

> Yes, but not because it does not inherit from `SageObject`. It is purely an implementation issue trying to keep immutable objects immutable under pickling. I might argue that the `Mutability` should not have a `__reduce__`. Although some part of the issue is that you do not handle pickling in `AffineConnection`.

 
Mh. Should I then overload `__reduce__` or add `set_immutable()` etc. manually? Unfortunately, I don't know much about pickling.



---

archive/issue_comments_482957.json:
```json
{
    "body": "Changed dependencies from **#30181** to **#30181, #30266**",
    "created_at": "2020-08-01T12:58:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482957",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181** to **#30181, #30266**



---

archive/issue_comments_482958.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable and in conclusion to make them hashable.\n \n Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.\n+\n+- Scalar Fields: #30266\n``````\n",
    "created_at": "2020-08-01T12:58:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482958",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 Tensor fields, scalar fields, sections and (bundle) connections are a priori mutable. However, according to #30181, it should be possible to make them immutable and in conclusion to make them hashable.
 
 Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.
+
+- Scalar Fields: #30266
``````




---

archive/issue_comments_482959.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nLet's work step-wise here. Scalar fields made no problem, I have created a new ticket devoted to them: #30266.",
    "created_at": "2020-08-01T13:03:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482959",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:14" align="right">Comment 14</div>

Let's work step-wise here. Scalar fields made no problem, I have created a new ticket devoted to them: #30266.



---

archive/issue_events_398612.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-02T20:53:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398612"
}
```



---

archive/issue_comments_482960.json:
```json
{
    "body": "Changed dependencies from **#30181, #30266** to **#30181, #30266, #30274**",
    "created_at": "2020-08-03T10:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482960",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181, #30266** to **#30181, #30266, #30274**



---

archive/issue_comments_482961.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,3 +3,4 @@\n Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.\n \n - Scalar Fields: #30266\n+- Tensor Fields: #30274\n``````\n",
    "created_at": "2020-08-03T10:37:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482961",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,3 +3,4 @@
 Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.
 
 - Scalar Fields: #30266
+- Tensor Fields: #30274
``````




---

archive/issue_comments_482962.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,4 +3,4 @@\n Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.\n \n - Scalar Fields: #30266\n-- Tensor Fields: #30274\n+- Tensor Fields (without hash): #30274\n``````\n",
    "created_at": "2020-08-03T10:39:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482962",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,4 +3,4 @@
 Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.
 
 - Scalar Fields: #30266
-- Tensor Fields: #30274
+- Tensor Fields (without hash): #30274
``````




---

archive/issue_comments_482963.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@mjungmath](#comment%3A11):\n> Replying to [@tscrim](#comment%3A10):\n> > > Why is it working in this case? `SageObject` and `Mutability` are both Cython classes. I am a little bit confused...sorry.\n\n> > \n> > No. A Cython class cannot inherit from multiple things, but a Python class (as you have here) can. The classes it inherits from can both be Cython classes.\n\n> \n> I'm confused because `SageObject` and `Mutability` both add methods and\n> \n> ```diff\n> -class FreeModuleTensor(ModuleElement):\n> +class FreeModuleTensor(ModuleElement, Mutability):\n> ```\n> \n> won't work. What is the difference? Is it because `ModuleElement` already is inherited?\n\nWon't work how? The difference with what? The pickling/`__reduce__` issue is because of the implementation of `Mutability`, not a Python/Cython issue. I need something more precise here.\n\n> > Yes, but not because it does not inherit from `SageObject`. It is purely an implementation issue trying to keep immutable objects immutable under pickling. I might argue that the `Mutability` should not have a `__reduce__`. Although some part of the issue is that you do not handle pickling in `AffineConnection`.\n\n>  \n> Mh. Should I then overload `__reduce__` or add `set_immutable()` etc. manually? Unfortunately, I don't know much about pickling.\n\nYou should overload `__reduce__`. Although I am not sure I agree with the `Mutability` having a `__reduce__` method (or at least once like that; seems counterproductive).",
    "created_at": "2020-08-03T12:08:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482963",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@mjungmath](#comment%3A11):
> Replying to [@tscrim](#comment%3A10):
> > > Why is it working in this case? `SageObject` and `Mutability` are both Cython classes. I am a little bit confused...sorry.

> > 
> > No. A Cython class cannot inherit from multiple things, but a Python class (as you have here) can. The classes it inherits from can both be Cython classes.

> 
> I'm confused because `SageObject` and `Mutability` both add methods and
> 
> ```diff
> -class FreeModuleTensor(ModuleElement):
> +class FreeModuleTensor(ModuleElement, Mutability):
> ```
> 
> won't work. What is the difference? Is it because `ModuleElement` already is inherited?

Won't work how? The difference with what? The pickling/`__reduce__` issue is because of the implementation of `Mutability`, not a Python/Cython issue. I need something more precise here.

> > Yes, but not because it does not inherit from `SageObject`. It is purely an implementation issue trying to keep immutable objects immutable under pickling. I might argue that the `Mutability` should not have a `__reduce__`. Although some part of the issue is that you do not handle pickling in `AffineConnection`.

>  
> Mh. Should I then overload `__reduce__` or add `set_immutable()` etc. manually? Unfortunately, I don't know much about pickling.

You should overload `__reduce__`. Although I am not sure I agree with the `Mutability` having a `__reduce__` method (or at least once like that; seems counterproductive).



---

archive/issue_comments_482964.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@tscrim](#comment%3A18):\n> You should overload `__reduce__`. Although I am not sure I agree with the `Mutability` having a `__reduce__` method (or at least once like that; seems counterproductive).\n\nWould you agree if I remove `__reduce__` from `Mutability`?\n\n> Won't work how? The difference with what? \n\nMy example above raises a type error while doctesting:\n\n```\nTypeError: multiple bases have instance lay-out conflict\n```\n\nWasn't that the original intention to write a dedicated `ModuleElementWithMutability` class? However, due to your argument, at least if I understand it correctly, this should work.",
    "created_at": "2020-08-03T12:40:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482964",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@tscrim](#comment%3A18):
> You should overload `__reduce__`. Although I am not sure I agree with the `Mutability` having a `__reduce__` method (or at least once like that; seems counterproductive).

Would you agree if I remove `__reduce__` from `Mutability`?

> Won't work how? The difference with what? 

My example above raises a type error while doctesting:

```
TypeError: multiple bases have instance lay-out conflict
```

Wasn't that the original intention to write a dedicated `ModuleElementWithMutability` class? However, due to your argument, at least if I understand it correctly, this should work.



---

archive/issue_comments_482965.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@mjungmath](#comment%3A19):\n> Replying to [@tscrim](#comment%3A18):\n> > You should overload `__reduce__`. Although I am not sure I agree with the `Mutability` having a `__reduce__` method (or at least once like that; seems counterproductive).\n\n> \n> Would you agree if I remove `__reduce__` from `Mutability`?\n\nYes, but that should be done on a separate ticket.\n\n> > Won't work how? The difference with what? \n\n> \n> My example above raises a type error while doctesting:\n> \n> ```\n> TypeError: multiple bases have instance lay-out conflict\n> ```\n> \n> Wasn't that the original intention to write a dedicated `ModuleElementWithMutability` class? However, due to your argument, at least if I understand it correctly, this should work.\n\nThere is a technical reason with incompatible slots in the Cython classes. However, this was not the original intent of this class. The reason is Sage vectors are Cython classes, not Python classes, which only have single inheritance. So they cannot have mixin classes. All of this is done to optimize them because linear algebra needs to be fast.",
    "created_at": "2020-08-03T12:51:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482965",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@mjungmath](#comment%3A19):
> Replying to [@tscrim](#comment%3A18):
> > You should overload `__reduce__`. Although I am not sure I agree with the `Mutability` having a `__reduce__` method (or at least once like that; seems counterproductive).

> 
> Would you agree if I remove `__reduce__` from `Mutability`?

Yes, but that should be done on a separate ticket.

> > Won't work how? The difference with what? 

> 
> My example above raises a type error while doctesting:
> 
> ```
> TypeError: multiple bases have instance lay-out conflict
> ```
> 
> Wasn't that the original intention to write a dedicated `ModuleElementWithMutability` class? However, due to your argument, at least if I understand it correctly, this should work.

There is a technical reason with incompatible slots in the Cython classes. However, this was not the original intent of this class. The reason is Sage vectors are Cython classes, not Python classes, which only have single inheritance. So they cannot have mixin classes. All of this is done to optimize them because linear algebra needs to be fast.



---

archive/issue_comments_482966.json:
```json
{
    "body": "Changed dependencies from **#30181, #30266, #30274** to **#30181, #30266, #30274, #30280**",
    "created_at": "2020-08-03T16:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482966",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181, #30266, #30274** to **#30181, #30266, #30274, #30280**



---

archive/issue_comments_482967.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,3 +4,4 @@\n \n - Scalar Fields: #30266\n - Tensor Fields (without hash): #30274\n+- Affine Connections: #30280\n``````\n",
    "created_at": "2020-08-03T16:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482967",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,3 +4,4 @@
 
 - Scalar Fields: #30266
 - Tensor Fields (without hash): #30274
+- Affine Connections: #30280
``````




---

archive/issue_comments_482968.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,4 @@\n - Scalar Fields: #30266\n - Tensor Fields (without hash): #30274\n - Affine Connections: #30280\n+- Bundle Connections: 30284\n``````\n",
    "created_at": "2020-08-04T20:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482968",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,4 @@
 - Scalar Fields: #30266
 - Tensor Fields (without hash): #30274
 - Affine Connections: #30280
+- Bundle Connections: 30284
``````




---

archive/issue_comments_482969.json:
```json
{
    "body": "Changed dependencies from **#30181, #30266, #30274, #30280** to **#30181, #30266, #30274, #30280, #30284**",
    "created_at": "2020-08-04T20:10:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482969",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181, #30266, #30274, #30280** to **#30181, #30266, #30274, #30280, #30284**



---

archive/issue_comments_482970.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,4 +5,4 @@\n - Scalar Fields: #30266\n - Tensor Fields (without hash): #30274\n - Affine Connections: #30280\n-- Bundle Connections: 30284\n+- Bundle Connections: #30284\n``````\n",
    "created_at": "2020-08-04T20:11:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482970",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,4 +5,4 @@
 - Scalar Fields: #30266
 - Tensor Fields (without hash): #30274
 - Affine Connections: #30280
-- Bundle Connections: 30284
+- Bundle Connections: #30284
``````




---

archive/issue_comments_482971.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,3 +6,4 @@\n - Tensor Fields (without hash): #30274\n - Affine Connections: #30280\n - Bundle Connections: #30284\n+- Sections (without hash): #30288\n``````\n",
    "created_at": "2020-08-04T21:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482971",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,3 +6,4 @@
 - Tensor Fields (without hash): #30274
 - Affine Connections: #30280
 - Bundle Connections: #30284
+- Sections (without hash): #30288
``````




---

archive/issue_comments_482972.json:
```json
{
    "body": "Changed dependencies from **#30181, #30266, #30274, #30280, #30284** to **#30181, #30266, #30274, #30280, #30284, #30288**",
    "created_at": "2020-08-04T21:52:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482972",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181, #30266, #30274, #30280, #30284** to **#30181, #30266, #30274, #30280, #30284, #30288**



---

archive/issue_comments_482973.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,4 @@\n - Affine Connections: #30280\n - Bundle Connections: #30284\n - Sections (without hash): #30288\n+- Chart Functions (without hash): #30310\n``````\n",
    "created_at": "2020-08-07T13:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482973",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,4 @@
 - Affine Connections: #30280
 - Bundle Connections: #30284
 - Sections (without hash): #30288
+- Chart Functions (without hash): #30310
``````




---

archive/issue_comments_482974.json:
```json
{
    "body": "Changed keywords from **immutable** to **immutability**",
    "created_at": "2020-08-07T13:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482974",
    "user": "https://github.com/mjungmath"
}
```

Changed keywords from **immutable** to **immutability**



---

archive/issue_comments_482975.json:
```json
{
    "body": "Changed dependencies from **#30181, #30266, #30274, #30280, #30284, #30288** to **#30181, #30266, #30274, #30280, #30284, #30288, #30310**",
    "created_at": "2020-08-07T13:03:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482975",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181, #30266, #30274, #30280, #30284, #30288** to **#30181, #30266, #30274, #30280, #30284, #30288, #30310**



---

archive/issue_comments_482976.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,7 @@\n Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.\n \n - Scalar Fields: #30266\n+- Scalar Fields II: #30311\n - Tensor Fields (without hash): #30274\n - Affine Connections: #30280\n - Bundle Connections: #30284\n``````\n",
    "created_at": "2020-08-07T13:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482976",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,7 @@
 Connections and bundle connections are already hashable even though they are not immutable. This will be changed accordingly in this ticket.
 
 - Scalar Fields: #30266
+- Scalar Fields II: #30311
 - Tensor Fields (without hash): #30274
 - Affine Connections: #30280
 - Bundle Connections: #30284
``````




---

archive/issue_comments_482977.json:
```json
{
    "body": "Changed dependencies from **#30181, #30266, #30274, #30280, #30284, #30288, #30310** to **#30181, #30266, #30274, #30280, #30284, #30288, #30310, 30311**",
    "created_at": "2020-08-07T13:07:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482977",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181, #30266, #30274, #30280, #30284, #30288, #30310** to **#30181, #30266, #30274, #30280, #30284, #30288, #30310, 30311**



---

archive/issue_comments_482978.json:
```json
{
    "body": "Changed dependencies from **#30181, #30266, #30274, #30280, #30284, #30288, #30310, 30311** to **#30181, #30266, #30274, #30280, #30284, #30288, #30310, #30311**",
    "created_at": "2020-08-07T13:08:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482978",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181, #30266, #30274, #30280, #30284, #30288, #30310, 30311** to **#30181, #30266, #30274, #30280, #30284, #30288, #30310, #30311**



---

archive/issue_comments_482979.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nThat should be all. In case I missed something, please let me know.",
    "created_at": "2020-08-07T13:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482979",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:28" align="right">Comment 28</div>

That should be all. In case I missed something, please let me know.



---

archive/issue_events_398613.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-07T16:07:27Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "title_is": "Meta-ticket: Immutability for manifold objects",
    "title_was": "Immutability for manifold objects",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398613"
}
```



---

archive/issue_events_398614.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398614"
}
```



---

archive/issue_events_398615.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398615"
}
```



---

archive/issue_comments_482980.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nThe pickling test still fails, though #30281. See [here](https://github.com/sagemath/sage/issues/30310#comment:13). Made a ticket, see #31182.",
    "created_at": "2021-01-04T18:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482980",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:31" align="right">Comment 31</div>

The pickling test still fails, though #30281. See [here](https://github.com/sagemath/sage/issues/30310#comment:13). Made a ticket, see #31182.



---

archive/issue_comments_482981.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,3 +9,7 @@\n - Bundle Connections: #30284\n - Sections (without hash): #30288\n - Chart Functions (without hash): #30310\n+\n+**Follow ups:**\n+\n+- clear already occured code duplication with `Mutability` module and use `require_mutable` decorator\n``````\n",
    "created_at": "2021-01-07T13:41:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482981",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,3 +9,7 @@
 - Bundle Connections: #30284
 - Sections (without hash): #30288
 - Chart Functions (without hash): #30310
+
+**Follow ups:**
+
+- clear already occured code duplication with `Mutability` module and use `require_mutable` decorator
``````




---

archive/issue_comments_482982.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -4,10 +4,10 @@\n \n - Scalar Fields: #30266\n - Scalar Fields II: #30311\n-- Tensor Fields (without hash): #30274\n+- Tensor Fields (without hash): #30274, #31255\n - Affine Connections: #30280\n - Bundle Connections: #30284\n-- Sections (without hash): #30288\n+- Sections (without hash): #30288, #31255\n - Chart Functions (without hash): #30310\n \n **Follow ups:**\n``````\n",
    "created_at": "2021-01-17T12:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482982",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -4,10 +4,10 @@
 
 - Scalar Fields: #30266
 - Scalar Fields II: #30311
-- Tensor Fields (without hash): #30274
+- Tensor Fields (without hash): #30274, #31255
 - Affine Connections: #30280
 - Bundle Connections: #30284
-- Sections (without hash): #30288
+- Sections (without hash): #30288, #31255
 - Chart Functions (without hash): #30310
 
 **Follow ups:**
``````




---

archive/issue_comments_482983.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,6 +9,7 @@\n - Bundle Connections: #30284\n - Sections (without hash): #30288, #31255\n - Chart Functions (without hash): #30310\n+- Mixed Differential Forms\n \n **Follow ups:**\n \n``````\n",
    "created_at": "2021-01-21T16:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482983",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,6 +9,7 @@
 - Bundle Connections: #30284
 - Sections (without hash): #30288, #31255
 - Chart Functions (without hash): #30310
+- Mixed Differential Forms
 
 **Follow ups:**
 
``````




---

archive/issue_comments_482984.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,7 +10,3 @@\n - Sections (without hash): #30288, #31255\n - Chart Functions (without hash): #30310\n - Mixed Differential Forms\n-\n-**Follow ups:**\n-\n-- clear already occured code duplication with `Mutability` module and use `require_mutable` decorator\n``````\n",
    "created_at": "2021-01-21T16:47:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482984",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,7 +10,3 @@
 - Sections (without hash): #30288, #31255
 - Chart Functions (without hash): #30310
 - Mixed Differential Forms
-
-**Follow ups:**
-
-- clear already occured code duplication with `Mutability` module and use `require_mutable` decorator
``````




---

archive/issue_events_398616.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398616"
}
```



---

archive/issue_events_398617.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-24T02:04:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398617"
}
```



---

archive/issue_comments_482985.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nSage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-24T02:04:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482985",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">Comment 36</div>

Sage development has entered the release candidate phase for 9.3. Setting a new milestone for this ticket based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_482986.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n - Bundle Connections: #30284\n - Sections (without hash): #30288, #31255\n - Chart Functions (without hash): #30310\n-- Mixed Differential Forms\n+- Mixed Differential Forms: #31706\n``````\n",
    "created_at": "2021-04-20T18:37:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482986",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 - Bundle Connections: #30284
 - Sections (without hash): #30288, #31255
 - Chart Functions (without hash): #30310
-- Mixed Differential Forms
+- Mixed Differential Forms: #31706
``````




---

archive/issue_comments_482987.json:
```json
{
    "body": "Changed dependencies from **#30181, #30266, #30274, #30280, #30284, #30288, #30310, #30311** to **#30181, #30266, #30274, #30280, #30284, #30288, #30310, #30311, #31706**",
    "created_at": "2021-04-20T18:37:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482987",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30181, #30266, #30274, #30280, #30284, #30288, #30310, #30311** to **#30181, #30266, #30274, #30280, #30284, #30288, #30310, #30311, #31706**



---

archive/issue_events_398618.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-05-01T10:33:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398618"
}
```



---

archive/issue_events_398619.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-05-01T10:33:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398619"
}
```



---

archive/issue_events_398620.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-05-01T10:33:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398620"
}
```



---

archive/issue_events_398621.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-30T09:54:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398621"
}
```



---

archive/issue_events_398622.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-06-30T09:54:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398622"
}
```



---

archive/issue_comments_482988.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nBy positive review, do you mean all goals of this meta-ticket are complete?\n\nWe might want to wait for #31706 to be merged before closing here.\n\nOnce that is done, maybe set the milestone here to sage-duplicate/invalid/wontfix?",
    "created_at": "2021-06-30T09:54:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482988",
    "user": "https://github.com/slel"
}
```

<div id="comment:41" align="right">Comment 41</div>

By positive review, do you mean all goals of this meta-ticket are complete?

We might want to wait for #31706 to be merged before closing here.

Once that is done, maybe set the milestone here to sage-duplicate/invalid/wontfix?



---

archive/issue_events_398623.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398623"
}
```



---

archive/issue_events_398624.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398624"
}
```



---

archive/issue_comments_482989.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30261#issuecomment-482989",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">Comment 42</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_398625.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-07-25T13:33:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398625"
}
```



---

archive/issue_events_398626.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-07-25T13:33:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398626"
}
```



---

archive/issue_events_398627.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-07-25T13:33:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398627"
}
```



---

archive/issue_events_398628.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-07-25T13:33:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398628"
}
```



---

archive/issue_events_398629.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2021-07-25T13:33:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398629"
}
```



---

archive/issue_events_398630.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-07-25T13:50:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398630"
}
```



---

archive/issue_events_398631.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2021-07-25T13:50:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30261",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30261#event-398631"
}
```
