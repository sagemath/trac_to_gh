# Issue 30719: Add build/pkgs/SPKG/install-requires.txt for all Python packages, remove some unneeded packages

archive/issues_030482.json:
```json
{
    "body": "These files:\n\n- serve as a marker that an SPKG is a Python package (for #29013)\n- may include comments that explain why we reject certain versions\n- provide version constraints (lower and upper bounds)\n- as such, are preparation for #29023: Meta-ticket: In a python 3 build, optionally use system Python packages\n- can be used to generate other metadata such as `src/Pipfile`, `src/setup.cfg [install_requires]` (#29041) in the `bootstrap` phase, to avoid duplicating this information in various places\n\n\n\nCC:  @tobiasdiez @isuruf @kiwifb @antonio-rojas @dimpase\n\nBranch/Commit: 6ec00dd002b41c4fe9b91233f2cebe37c87144d9\n\nReviewer: Dima Pasechnik\n\nAuthor: Matthias Koeppe\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30719\n\n",
    "closed_at": "2020-11-20T22:15:16Z",
    "created_at": "2020-10-04T17:30:11Z",
    "labels": [
        "component: build",
        "critical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Add build/pkgs/SPKG/install-requires.txt for all Python packages, remove some unneeded packages",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30719",
    "user": "https://github.com/mkoeppe"
}
```
These files:

- serve as a marker that an SPKG is a Python package (for #29013)
- may include comments that explain why we reject certain versions
- provide version constraints (lower and upper bounds)
- as such, are preparation for #29023: Meta-ticket: In a python 3 build, optionally use system Python packages
- can be used to generate other metadata such as `src/Pipfile`, `src/setup.cfg [install_requires]` (#29041) in the `bootstrap` phase, to avoid duplicating this information in various places



CC:  @tobiasdiez @isuruf @kiwifb @antonio-rojas @dimpase

Branch/Commit: 6ec00dd002b41c4fe9b91233f2cebe37c87144d9

Reviewer: Dima Pasechnik

Author: Matthias Koeppe

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30719





---

archive/issue_comments_607944.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/add_build_pkgs_spkg_install_requires_txt_for_all_python_packages\"",
    "created_at": "2020-10-04T17:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607944",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/add_build_pkgs_spkg_install_requires_txt_for_all_python_packages"



---

archive/issue_comments_607945.json:
```json
{
    "body": "<a id='comment:2'></a>Tobias, before I add more of these, do you think this format is useful for generating other files?\n\n---\nNew commits:",
    "created_at": "2020-10-04T17:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607945",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Tobias, before I add more of these, do you think this format is useful for generating other files?

---
New commits:



---

archive/issue_comments_607946.json:
```json
{
    "body": "Changing commit from \"\" to \"a754e8c70b528e2c010e2d62c9375c874802a8c0\"",
    "created_at": "2020-10-04T17:51:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607946",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "" to "a754e8c70b528e2c010e2d62c9375c874802a8c0"



---

archive/issue_comments_607947.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-04T18:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607947",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607948.json:
```json
{
    "body": "Changing commit from \"a754e8c70b528e2c010e2d62c9375c874802a8c0\" to \"11ce883bcb57024a33c6b22ca0dc8ceb2674e9c8\"",
    "created_at": "2020-10-04T18:21:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607948",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a754e8c70b528e2c010e2d62c9375c874802a8c0" to "11ce883bcb57024a33c6b22ca0dc8ceb2674e9c8"



---

archive/issue_comments_607949.json:
```json
{
    "body": "<a id='comment:4'></a>So the idea would be to concatenate all these `install-requires.txt` files to obtain the `install_requires` section of `src/setup.cfg`? That should work. Except that cython is a more a compile time dependency (`[build-system] requires = [\"cython\"]` in `pyproject.toml`), right?\n\nI have to admit though that I don't see the benefit of having all these text files over having a single `src/setup.cfg` (or pyproject for that matter). It feels like it's the same information, just in a different location.\nIn fact, it feels a bit like you are reinventing the wheel. pyproject etc also have support for different kinds of dependencies, e.g. optional, compile time (cython), test (pytest) and build dependencies (tox).\n\nMaybe that's a bit too na\u00efve, but I would approach this as follows: `sagelib` (everything in `/src`) is a python library and as such only declares minimum dependencies and their requirements, trying not to pin versions (except if it's really necessary). I think, the most modern way would be to do this via a `pyproject.toml` file.\nThen sage-the-application (the actual thing used by the enduser) is a python application and thus includes sagelib as a library and needs to satisfy its dependencies (this is the point where you have to specify in some way the exact version you want to use).\nsage-the library should be completely independent of sage-the-application (i.e. it should work to have them in different git repositories).",
    "created_at": "2020-10-04T18:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607949",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>So the idea would be to concatenate all these `install-requires.txt` files to obtain the `install_requires` section of `src/setup.cfg`? That should work. Except that cython is a more a compile time dependency (`[build-system] requires = ["cython"]` in `pyproject.toml`), right?

I have to admit though that I don't see the benefit of having all these text files over having a single `src/setup.cfg` (or pyproject for that matter). It feels like it's the same information, just in a different location.
In fact, it feels a bit like you are reinventing the wheel. pyproject etc also have support for different kinds of dependencies, e.g. optional, compile time (cython), test (pytest) and build dependencies (tox).

Maybe that's a bit too na√Øve, but I would approach this as follows: `sagelib` (everything in `/src`) is a python library and as such only declares minimum dependencies and their requirements, trying not to pin versions (except if it's really necessary). I think, the most modern way would be to do this via a `pyproject.toml` file.
Then sage-the-application (the actual thing used by the enduser) is a python application and thus includes sagelib as a library and needs to satisfy its dependencies (this is the point where you have to specify in some way the exact version you want to use).
sage-the library should be completely independent of sage-the-application (i.e. it should work to have them in different git repositories).



---

archive/issue_comments_607950.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 gh-tobiasdiez]:\n> So the idea would be to concatenate all these `install-requires.txt` files to obtain the `install_requires` section of `src/setup.cfg`?\n\n\nYes.\n\n> That should work. Except that cython is a more a compile time dependency (`[build-system] requires = [\"cython\"]` in `pyproject.toml`), right?\n\n\nRight; but sagelib also exposes cython at runtime for interactive use.\n\n> I have to admit though that I don't see the benefit of having all these text files over having a single `src/setup.cfg` (or pyproject for that matter). It feels like it's the same information, just in a different location.\n\n\nWith modularization, I expect to see dozens of `setup.cfg` files for the various subset distributions. Basically, I don't want to duplicate version ranges between these.\n\n> In fact, it feels a bit like you are reinventing the wheel. pyproject etc also have support for different kinds of dependencies, e.g. optional, compile time (cython), test (pytest) and build dependencies (tox).\n\n\nWhat I want to do is define version ranges in one place for all of the Sage project.\n\nDistinguishing the kinds of dependencies (build, test, ...) should be orthogonal -- and the mechanism in #29041 should be able to put these version ranges into whatever file/format is needed. \n\n(I don't think it would add sufficient value to Sage to have different version ranges for a given package in different roles, like \"we need Cython >= 0.29.21 for build, but any Cython >= 0.27 is fine for runtime.)\n \n> sage-the library should be completely independent of sage-the-application (i.e. it should work to have them in different git repositories). \n\n\nI don't like to go into this direction because it would add a big hurdle to our developer community. Having one git repository is key.",
    "created_at": "2020-10-04T19:38:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607950",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Replying to [comment:4 gh-tobiasdiez]:
> So the idea would be to concatenate all these `install-requires.txt` files to obtain the `install_requires` section of `src/setup.cfg`?


Yes.

> That should work. Except that cython is a more a compile time dependency (`[build-system] requires = ["cython"]` in `pyproject.toml`), right?


Right; but sagelib also exposes cython at runtime for interactive use.

> I have to admit though that I don't see the benefit of having all these text files over having a single `src/setup.cfg` (or pyproject for that matter). It feels like it's the same information, just in a different location.


With modularization, I expect to see dozens of `setup.cfg` files for the various subset distributions. Basically, I don't want to duplicate version ranges between these.

> In fact, it feels a bit like you are reinventing the wheel. pyproject etc also have support for different kinds of dependencies, e.g. optional, compile time (cython), test (pytest) and build dependencies (tox).


What I want to do is define version ranges in one place for all of the Sage project.

Distinguishing the kinds of dependencies (build, test, ...) should be orthogonal -- and the mechanism in #29041 should be able to put these version ranges into whatever file/format is needed. 

(I don't think it would add sufficient value to Sage to have different version ranges for a given package in different roles, like "we need Cython >= 0.29.21 for build, but any Cython >= 0.27 is fine for runtime.)
 
> sage-the library should be completely independent of sage-the-application (i.e. it should work to have them in different git repositories). 


I don't like to go into this direction because it would add a big hurdle to our developer community. Having one git repository is key.



---

archive/issue_comments_607951.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 mkoeppe]:\n> > I have to admit though that I don't see the benefit of having all these text files over having a single `src/setup.cfg` (or pyproject for that matter). It feels like it's the same information, just in a different location.\n\n> \n> With modularization, I expect to see dozens of `setup.cfg` files for the various subset distributions. Basically, I don't want to duplicate version ranges between these.\n\n\nSounds like a valid point.\n\n\n> Having one git repository is key. \n\n\nI agree! What I meant is that it might be helpful to approach it like this, i.e. how would you solve this problem if sage-library would be sitting in a different git repo? I think, this will be helpful e.g for distribution as pipy-installable package where it would be helpful if `src/` works independently of the `make` and `build` scripts. \n\n\nOne more remark: I would try to make the version range specifications as general as possible, i.e. only add restrictions if its known that that this particular version doesn't work with sage (this in particular applies to the upper limit). Otherwise the sage-library (and its subdistributions) would be harder to use (e.g. if one cannot upgrade/downgrade a dependency because other code relies on it). In this context, it may actually turn out to be helpful if you could could control the dependency versions for each submodule sepereatly, e.g. if ModuleA breaks with a newer version but ModuleB doesn't have these problems.",
    "created_at": "2020-10-04T20:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607951",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:6'></a>Replying to [comment:5 mkoeppe]:
> > I have to admit though that I don't see the benefit of having all these text files over having a single `src/setup.cfg` (or pyproject for that matter). It feels like it's the same information, just in a different location.

> 
> With modularization, I expect to see dozens of `setup.cfg` files for the various subset distributions. Basically, I don't want to duplicate version ranges between these.


Sounds like a valid point.


> Having one git repository is key. 


I agree! What I meant is that it might be helpful to approach it like this, i.e. how would you solve this problem if sage-library would be sitting in a different git repo? I think, this will be helpful e.g for distribution as pipy-installable package where it would be helpful if `src/` works independently of the `make` and `build` scripts. 


One more remark: I would try to make the version range specifications as general as possible, i.e. only add restrictions if its known that that this particular version doesn't work with sage (this in particular applies to the upper limit). Otherwise the sage-library (and its subdistributions) would be harder to use (e.g. if one cannot upgrade/downgrade a dependency because other code relies on it). In this context, it may actually turn out to be helpful if you could could control the dependency versions for each submodule sepereatly, e.g. if ModuleA breaks with a newer version but ModuleB doesn't have these problems.



---

archive/issue_comments_607952.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 gh-tobiasdiez]:\n> What I meant is that it might be helpful to approach it like this, i.e. how would you solve this problem if sage-library would be sitting in a different git repo? I think, this will be helpful e.g for distribution as pipy-installable package where it would be helpful if `src/` works independently of the `make` and `build` scripts. \n\n\nSounds like we are basically in agreement here. One detail, however, is the bootstrapping phase. The way I see it, after running `./bootstrap`, we would have standard Python package source trees (which will not depend on make and build) -- right now, `src` or `build/pkgs/sagelib/src/`, but many more after modularization (such as `build/pkgs/sage-ntl/src/`). By using scripts that are executed during bootstrapping, we can avoid duplicating a lot of information and thus reduce the maintenance burden.",
    "created_at": "2020-10-04T21:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607952",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Replying to [comment:6 gh-tobiasdiez]:
> What I meant is that it might be helpful to approach it like this, i.e. how would you solve this problem if sage-library would be sitting in a different git repo? I think, this will be helpful e.g for distribution as pipy-installable package where it would be helpful if `src/` works independently of the `make` and `build` scripts. 


Sounds like we are basically in agreement here. One detail, however, is the bootstrapping phase. The way I see it, after running `./bootstrap`, we would have standard Python package source trees (which will not depend on make and build) -- right now, `src` or `build/pkgs/sagelib/src/`, but many more after modularization (such as `build/pkgs/sage-ntl/src/`). By using scripts that are executed during bootstrapping, we can avoid duplicating a lot of information and thus reduce the maintenance burden.



---

archive/issue_comments_607953.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:6 gh-tobiasdiez]:\n> I would try to make the version range specifications as general as possible, i.e. only add restrictions if its known that that this particular version doesn't work with sage (this in particular applies to the upper limit). Otherwise the sage-library (and its subdistributions) would be harder to use (e.g. if one cannot upgrade/downgrade a dependency because other code relies on it). \n\n\nYes, this is tricky to get right and will probably need some detailed discussion for individual packages. But I do think that some upper bounds on the version are always needed because we do not want our package to stop working if a new major version of some package is released on pypi. For example, Cython has an upcoming 3.x version which we have not tested with at all.\n\n> In this context, it may actually turn out to be helpful if you could could control the dependency versions for each submodule separately, e.g. if ModuleA breaks with a newer version but ModuleB doesn't have these problems.\n\n\nYes, this is conceivable but I would hope that if this ever becomes necessary, it can be implemented by overriding the default rather than defaulting to duplicate maintenance of the version ranges.",
    "created_at": "2020-10-04T21:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607953",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Replying to [comment:6 gh-tobiasdiez]:
> I would try to make the version range specifications as general as possible, i.e. only add restrictions if its known that that this particular version doesn't work with sage (this in particular applies to the upper limit). Otherwise the sage-library (and its subdistributions) would be harder to use (e.g. if one cannot upgrade/downgrade a dependency because other code relies on it). 


Yes, this is tricky to get right and will probably need some detailed discussion for individual packages. But I do think that some upper bounds on the version are always needed because we do not want our package to stop working if a new major version of some package is released on pypi. For example, Cython has an upcoming 3.x version which we have not tested with at all.

> In this context, it may actually turn out to be helpful if you could could control the dependency versions for each submodule separately, e.g. if ModuleA breaks with a newer version but ModuleB doesn't have these problems.


Yes, this is conceivable but I would hope that if this ever becomes necessary, it can be implemented by overriding the default rather than defaulting to duplicate maintenance of the version ranges.



---

archive/issue_comments_607954.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-04T21:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607954",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607955.json:
```json
{
    "body": "Changing commit from \"11ce883bcb57024a33c6b22ca0dc8ceb2674e9c8\" to \"f9ac70ef321f333f2b7d0a7a080c01899cec4f86\"",
    "created_at": "2020-10-04T21:57:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "11ce883bcb57024a33c6b22ca0dc8ceb2674e9c8" to "f9ac70ef321f333f2b7d0a7a080c01899cec4f86"



---

archive/issue_comments_607956.json:
```json
{
    "body": "<a id='comment:10'></a>Autogenerated for now, setting current version as lower bound",
    "created_at": "2020-10-04T21:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607956",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>Autogenerated for now, setting current version as lower bound



---

archive/issue_events_080048.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30719#event-80048"
}
```



---

archive/issue_comments_607957.json:
```json
{
    "body": "<a id='comment:12'></a>I'm hoping to gather version information for our Python packages here.",
    "created_at": "2020-11-11T19:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607957",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>I'm hoping to gather version information for our Python packages here.



---

archive/issue_comments_607958.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-11T19:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607958",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_607959.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-11-11T20:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607959",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_607960.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,6 +3,7 @@\n - serve as a marker that an SPKG is a Python package (for #29013)\n - may include comments that explain why we reject certain versions\n - provide version constraints (lower and upper bounds)\n+- as such, are preparation for #29023: Meta-ticket: In a python 3 build, optionally use system Python packages\n - can be used to generate other metadata such as `src/Pipfile`, `src/setup.cfg [install_requires]` (#29041) in the `bootstrap` phase, to avoid duplicating this information in various places\n \n \n``````\n",
    "created_at": "2020-11-11T20:03:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607960",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,6 +3,7 @@
 - serve as a marker that an SPKG is a Python package (for #29013)
 - may include comments that explain why we reject certain versions
 - provide version constraints (lower and upper bounds)
+- as such, are preparation for #29023: Meta-ticket: In a python 3 build, optionally use system Python packages
 - can be used to generate other metadata such as `src/Pipfile`, `src/setup.cfg [install_requires]` (#29041) in the `bootstrap` phase, to avoid duplicating this information in various places
 
 
``````




---

archive/issue_comments_607961.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-11-11T20:07:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607961",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_607962.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T20:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607963.json:
```json
{
    "body": "Changing commit from \"f9ac70ef321f333f2b7d0a7a080c01899cec4f86\" to \"f6a2c56e0f098dedb0aa3bdbebad1a9d09d549f8\"",
    "created_at": "2020-11-11T20:12:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607963",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f9ac70ef321f333f2b7d0a7a080c01899cec4f86" to "f6a2c56e0f098dedb0aa3bdbebad1a9d09d549f8"



---

archive/issue_comments_607964.json:
```json
{
    "body": "<a id='comment:17'></a>That's a lot of packages to parse :(\n\nSome stuff I can notice from a cursory inspection. I use sphinx 3.2.1 so the restriction `<3.2` seem useless. Similarly I currently use networkx 2.5. `python_openid` was a sagenb dependency, I don't think we need it anymore. I certainly do not have it anymore on my system. Same with `itsdangerous`.",
    "created_at": "2020-11-11T20:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607964",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>That's a lot of packages to parse :(

Some stuff I can notice from a cursory inspection. I use sphinx 3.2.1 so the restriction `<3.2` seem useless. Similarly I currently use networkx 2.5. `python_openid` was a sagenb dependency, I don't think we need it anymore. I certainly do not have it anymore on my system. Same with `itsdangerous`.



---

archive/issue_comments_607965.json:
```json
{
    "body": "<a id='comment:18'></a>The pipenv.lock file added in #30371 is a good indication, too.\n\nThe `<1.0` constraint for cython seems to be not necessary (at least they are very far off from version 1.0).",
    "created_at": "2020-11-11T20:48:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607965",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:18'></a>The pipenv.lock file added in #30371 is a good indication, too.

The `<1.0` constraint for cython seems to be not necessary (at least they are very far off from version 1.0).



---

archive/issue_comments_607966.json:
```json
{
    "body": "Changing commit from \"f6a2c56e0f098dedb0aa3bdbebad1a9d09d549f8\" to \"ba1d913e2e340c8ec5c533ecb26d2f3d835b4eb9\"",
    "created_at": "2020-11-11T22:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607966",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "f6a2c56e0f098dedb0aa3bdbebad1a9d09d549f8" to "ba1d913e2e340c8ec5c533ecb26d2f3d835b4eb9"



---

archive/issue_comments_607967.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T22:03:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607967",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607968.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:18 gh-tobiasdiez]:\n> The `<1.0` constraint for cython seems to be not necessary (at least they are very far off from version 1.0).\n\nFrom comment 8:\n  For example, Cython has an upcoming 3.x version which we have not tested with at all.",
    "created_at": "2020-11-11T22:04:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607968",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Replying to [comment:18 gh-tobiasdiez]:
> The `<1.0` constraint for cython seems to be not necessary (at least they are very far off from version 1.0).

From comment 8:
  For example, Cython has an upcoming 3.x version which we have not tested with at all.



---

archive/issue_comments_607969.json:
```json
{
    "body": "Changing commit from \"ba1d913e2e340c8ec5c533ecb26d2f3d835b4eb9\" to \"bb6c4ae829c6c6f55d305e64833a5b85d50fc205\"",
    "created_at": "2020-11-11T22:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607969",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ba1d913e2e340c8ec5c533ecb26d2f3d835b4eb9" to "bb6c4ae829c6c6f55d305e64833a5b85d50fc205"



---

archive/issue_comments_607970.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T22:12:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607971.json:
```json
{
    "body": "Changing commit from \"bb6c4ae829c6c6f55d305e64833a5b85d50fc205\" to \"d50750123c5368874f99a05626f33fade165b246\"",
    "created_at": "2020-11-11T22:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607971",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "bb6c4ae829c6c6f55d305e64833a5b85d50fc205" to "d50750123c5368874f99a05626f33fade165b246"



---

archive/issue_comments_607972.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T22:34:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607972",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607973.json:
```json
{
    "body": "<a id='comment:23'></a>See also: Upgrade ticket #30611",
    "created_at": "2020-11-12T00:08:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607973",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>See also: Upgrade ticket #30611



---

archive/issue_comments_607974.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-12T00:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607975.json:
```json
{
    "body": "Changing commit from \"d50750123c5368874f99a05626f33fade165b246\" to \"d5e9840e860958f2aafe63280ea822900e722658\"",
    "created_at": "2020-11-12T00:23:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d50750123c5368874f99a05626f33fade165b246" to "d5e9840e860958f2aafe63280ea822900e722658"



---

archive/issue_comments_607976.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-12T00:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607976",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_607977.json:
```json
{
    "body": "Changing commit from \"d5e9840e860958f2aafe63280ea822900e722658\" to \"c3a9352acb3f87d8afdb5d9b0d61611cc30fefaa\"",
    "created_at": "2020-11-12T00:55:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607977",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d5e9840e860958f2aafe63280ea822900e722658" to "c3a9352acb3f87d8afdb5d9b0d61611cc30fefaa"



---

archive/issue_comments_607978.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-12T00:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607979.json:
```json
{
    "body": "Changing commit from \"c3a9352acb3f87d8afdb5d9b0d61611cc30fefaa\" to \"ebd4610519f9794aef64e8f283adcc827addf6f5\"",
    "created_at": "2020-11-12T00:59:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607979",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c3a9352acb3f87d8afdb5d9b0d61611cc30fefaa" to "ebd4610519f9794aef64e8f283adcc827addf6f5"



---

archive/issue_comments_607980.json:
```json
{
    "body": "<a id='comment:28'></a>Good enough as a first approximation?",
    "created_at": "2020-11-12T01:33:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607980",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:28'></a>Good enough as a first approximation?



---

archive/issue_comments_607981.json:
```json
{
    "body": "<a id='comment:29'></a>Missing: numpy",
    "created_at": "2020-11-12T22:22:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607981",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Missing: numpy



---

archive/issue_comments_607982.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-12T23:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607982",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_607983.json:
```json
{
    "body": "Changing commit from \"ebd4610519f9794aef64e8f283adcc827addf6f5\" to \"6ec00dd002b41c4fe9b91233f2cebe37c87144d9\"",
    "created_at": "2020-11-12T23:08:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607983",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ebd4610519f9794aef64e8f283adcc827addf6f5" to "6ec00dd002b41c4fe9b91233f2cebe37c87144d9"



---

archive/issue_comments_607984.json:
```json
{
    "body": "<a id='comment:31'></a>OK, good. (all tests of this branch pass on Fedora 30, too)",
    "created_at": "2020-11-13T11:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607984",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>OK, good. (all tests of this branch pass on Fedora 30, too)



---

archive/issue_comments_607985.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Dima Pasechnik\"",
    "created_at": "2020-11-13T11:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607985",
    "user": "https://github.com/dimpase"
}
```

Changing reviewer from "" to "Dima Pasechnik"



---

archive/issue_comments_607986.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-13T11:01:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607986",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_607987.json:
```json
{
    "body": "<a id='comment:32'></a>Thanks!",
    "created_at": "2020-11-14T00:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607987",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Thanks!



---

archive/issue_events_080049.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-20T22:15:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30719#event-80049"
}
```



---

archive/issue_comments_607988.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/add_build_pkgs_spkg_install_requires_txt_for_all_python_packages\" to \"6ec00dd002b41c4fe9b91233f2cebe37c87144d9\"",
    "created_at": "2020-11-20T22:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607988",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/add_build_pkgs_spkg_install_requires_txt_for_all_python_packages" to "6ec00dd002b41c4fe9b91233f2cebe37c87144d9"



---

archive/issue_comments_607989.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-20T22:15:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30719",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30719#issuecomment-607989",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
