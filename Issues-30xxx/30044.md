# Issue 30044: tox.ini: Test on voidlinux

archive/issues_029807.json:
```json
{
    "body": "Prompted by installation trouble reported at\nhttps://groups.google.com/d/msg/sage-devel/kiEh8JgbWeQ/Oqe77sQTCAAJ\n\nwe add infrastructure to test on voidlinux installations via Docker\nby repeating the steps done for Slackware in #29354\n\nTo test:\n\n```\ntox -e docker-voidlinux-standard\n```\n\nReferences: \n- https://hub.docker.com/r/voidlinux/voidlinux\n- https://github.com/void-linux/xbps\n\n\n\nCC:  @dimpase @orlitzky @kliem @slel\n\nBranch/Commit: d43730cdbe9bb09b1045ba16daad841f83419642\n\nReviewer: Jonathan Kliem\n\nAuthor: Nicol\u00f2 Piazzalunga, Matthias Koeppe\n\nDependencies: #30064\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30044\n\n",
    "closed_at": "2020-08-14T22:23:17Z",
    "created_at": "2020-07-02T04:15:53Z",
    "labels": [
        "component: porting",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "tox.ini: Test on voidlinux",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30044",
    "user": "https://github.com/mkoeppe"
}
```
Prompted by installation trouble reported at
https://groups.google.com/d/msg/sage-devel/kiEh8JgbWeQ/Oqe77sQTCAAJ

we add infrastructure to test on voidlinux installations via Docker
by repeating the steps done for Slackware in #29354

To test:

```
tox -e docker-voidlinux-standard
```

References: 
- https://hub.docker.com/r/voidlinux/voidlinux
- https://github.com/void-linux/xbps



CC:  @dimpase @orlitzky @kliem @slel

Branch/Commit: d43730cdbe9bb09b1045ba16daad841f83419642

Reviewer: Jonathan Kliem

Author: Nicol√≤ Piazzalunga, Matthias Koeppe

Dependencies: #30064

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30044





---

archive/issue_comments_451350.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,8 +1,15 @@\n+Prompted by installation trouble reported at\n https://groups.google.com/d/msg/sage-devel/kiEh8JgbWeQ/Oqe77sQTCAAJ\n \n-https://hub.docker.com/r/voidlinux/voidlinux\n+we add infrastructure to test on voidlinux installations via Docker\n+by repeating the steps done for Slackware in #29354\n \n-https://github.com/void-linux/xbps\n+\n+References: \n+- https://hub.docker.com/r/voidlinux/voidlinux\n+- https://github.com/void-linux/xbps\n+\n+\n \n Comment: 1\n \n```\n",
    "created_at": "2020-07-03T13:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451350",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,8 +1,15 @@
+Prompted by installation trouble reported at
 https://groups.google.com/d/msg/sage-devel/kiEh8JgbWeQ/Oqe77sQTCAAJ
 
-https://hub.docker.com/r/voidlinux/voidlinux
+we add infrastructure to test on voidlinux installations via Docker
+by repeating the steps done for Slackware in #29354
 
-https://github.com/void-linux/xbps
+
+References: 
+- https://hub.docker.com/r/voidlinux/voidlinux
+- https://github.com/void-linux/xbps
+
+
 
 Comment: 1
 
```




---

archive/issue_comments_451351.json:
```json
{
    "body": "<a id='comment:3'></a>New commits:",
    "created_at": "2020-07-07T19:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451351",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>New commits:



---

archive/issue_comments_451352.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-07T19:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451352",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_451353.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-08T13:51:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451353",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_451354.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-12T18:31:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451354",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_451355.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-22T17:16:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451355",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_451356.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,19 @@\n+Prompted by installation trouble reported at\n+https://groups.google.com/d/msg/sage-devel/kiEh8JgbWeQ/Oqe77sQTCAAJ\n+\n+we add infrastructure to test on voidlinux installations via Docker\n+by repeating the steps done for Slackware in #29354\n+\n+To test:\n+\n+```\n+tox -e docker-voidlinux-standard\n+```\n+\n+References: \n+- https://hub.docker.com/r/voidlinux/voidlinux\n+- https://github.com/void-linux/xbps\n+\n \n \n Comment: 1\n```\n",
    "created_at": "2020-07-22T17:17:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451356",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,19 @@
+Prompted by installation trouble reported at
+https://groups.google.com/d/msg/sage-devel/kiEh8JgbWeQ/Oqe77sQTCAAJ
+
+we add infrastructure to test on voidlinux installations via Docker
+by repeating the steps done for Slackware in #29354
+
+To test:
+
+```
+tox -e docker-voidlinux-standard
+```
+
+References: 
+- https://hub.docker.com/r/voidlinux/voidlinux
+- https://github.com/void-linux/xbps
+
 
 
 Comment: 1
```




---

archive/issue_comments_451357.json:
```json
{
    "body": "<a id='comment:9'></a>This works well enough to reproduce at least some of the reported build errors. Needs review",
    "created_at": "2020-07-24T17:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451357",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>This works well enough to reproduce at least some of the reported build errors. Needs review



---

archive/issue_comments_451358.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-24T17:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451358",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_451359.json:
```json
{
    "body": "<a id='comment:11'></a>Let's get this in please",
    "created_at": "2020-08-10T23:36:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451359",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Let's get this in please



---

archive/issue_comments_451360.json:
```json
{
    "body": "<a id='comment:12'></a>I'm running some tests to see whether voidlinux somehow works with github actions:\n\nhttps://github.com/kliem/sage/pull/22/checks",
    "created_at": "2020-08-11T04:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451360",
    "user": "https://github.com/kliem"
}
```

<a id='comment:12'></a>I'm running some tests to see whether voidlinux somehow works with github actions:

https://github.com/kliem/sage/pull/22/checks



---

archive/issue_comments_451361.json:
```json
{
    "body": "<a id='comment:13'></a>In principle this seems capable of reproducing problems. However, I'm getting errors in log file artifacts. Did I do something wrong? Is it a problem with github? Is it caused by this ticket?",
    "created_at": "2020-08-11T12:45:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451361",
    "user": "https://github.com/kliem"
}
```

<a id='comment:13'></a>In principle this seems capable of reproducing problems. However, I'm getting errors in log file artifacts. Did I do something wrong? Is it a problem with github? Is it caused by this ticket?



---

archive/issue_comments_451362.json:
```json
{
    "body": "<a id='comment:14'></a>\n```diff\ndiff --git a/.github/workflows/tox.yml b/.github/workflows/tox.yml\nindex d6f46bd7b1..27f2f34dd4 100644\n--- a/.github/workflows/tox.yml\n+++ b/.github/workflows/tox.yml\n@@ -36,7 +36,7 @@ jobs:\n       fail-fast: false\n       max-parallel: 20\n       matrix:\n-        tox_system_factor: [ubuntu-trusty, ubuntu-xenial, ubuntu-bionic, ubuntu-eoan, ubuntu-focal, debian-jessie, debian-stretch, debian-buster, debian-bullseye, debian-sid, linuxmint-17, linuxmint-18, linuxmint-19, linuxmint-19.3, fedora-26, fedora-27, fedora-28, fedora-29, fedora-30, fedora-31, fedora-32, centos-7, centos-8, gentoo, archlinux-latest, slackware-14.2, conda-forge, ubuntu-bionic-i386, ubuntu-eoan-i386, debian-buster-i386, centos-7-i386]\n+        tox_system_factor: [debian-buster, voidlinux]\n         tox_packages_factor: [minimal, standard]\n     env:\n       TOX_ENV: docker-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}\n@@ -94,173 +94,3 @@ jobs:\n             done || echo \"(Ignoring errors)\"\n           fi\n         if: always()\n-\n-  local-macos:\n-\n-    runs-on: macos-latest\n-    strategy:\n-      fail-fast: false\n-      max-parallel: 4\n-      matrix:\n-        tox_system_factor: [homebrew-macos, homebrew-macos-python3_xcode, homebrew-macos-python3_xcode-nokegonly, homebrew-macos-python3_pythonorg, homebrew-macos-python3_xcode-gcc_spkg, conda-forge-macos]\n-        tox_packages_factor: [minimal, standard]\n-    env:\n-      TOX_ENV: local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}\n-      LOGS_ARTIFACT_NAME: logs-commit-${{ github.sha }}-tox-local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}\n-    steps:\n-      - uses: actions/checkout@v2\n-      - name: Install test prerequisites\n-        run: |\n-          brew install tox\n-      - name: Install python3 from python.org\n-        # As of 2020-03-30 (https://github.com/actions/virtual-environments/blob/master/images/macos/macos-10.15-Readme.md),\n-        # Python 3.7.7 is installed on GitHub Actions runners.  But we install our own copy from the python.org binary package.\n-        run: |\n-          curl -o python3.pkg https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg\n-          sudo installer -verbose -pkg python3.pkg -target /\n-        if: contains(matrix.tox_system_factor, 'python3_pythonorg')\n-      - name: Build and test with tox\n-        # We use a high parallelization on purpose in order to catch possible parallelization bugs in the build scripts.\n-        # For doctesting, we use a lower parallelization to avoid timeouts.\n-        run: |\n-          MAKE=\"make -j12\" tox -e $TOX_ENV -- SAGE_NUM_THREADS=4 $TARGETS\n-      - name: Prepare logs artifact\n-        run: |\n-          mkdir -p \"artifacts/$LOGS_ARTIFACT_NAME\"; cp -r .tox/*/log \"artifacts/$LOGS_ARTIFACT_NAME\"\n-        if: always()\n-      - uses: actions/upload-artifact@v1\n-        with:\n-          path: artifacts\n-          name: ${{ env.LOGS_ARTIFACT_NAME }}\n-        if: always()\n-      - name: Print out logs for immediate inspection\n-        # and markup the output with GitHub Actions logging commands\n-        run: |\n-          .github/workflows/scan-logs.sh \"artifacts/$LOGS_ARTIFACT_NAME\"\n-        if: always()\n-\n-  local-ubuntu:\n-\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      max-parallel: 1\n-      matrix:\n-        tox_system_factor: [conda-forge-ubuntu]\n-        tox_packages_factor: [minimal, standard]\n-    env:\n-      TOX_ENV: local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}\n-      LOGS_ARTIFACT_NAME: logs-commit-${{ github.sha }}-tox-local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}\n-    steps:\n-      - uses: actions/checkout@v2\n-      - name: Install test prerequisites\n-        run: |\n-          sudo DEBIAN_FRONTEND=noninteractive apt-get update\n-          sudo DEBIAN_FRONTEND=noninteractive apt-get install python-tox\n-      - name: Build and test with tox\n-        # We use a high parallelization on purpose in order to catch possible parallelization bugs in the build scripts.\n-        # For doctesting, we use a lower parallelization to avoid timeouts.\n-        run: |\n-          MAKE=\"make -j12\" tox -e $TOX_ENV -- SAGE_NUM_THREADS=4 $TARGETS\n-      - name: Prepare logs artifact\n-        run: |\n-          mkdir -p \"artifacts/$LOGS_ARTIFACT_NAME\"; cp -r .tox/*/log \"artifacts/$LOGS_ARTIFACT_NAME\"\n-        if: always()\n-      - uses: actions/upload-artifact@v1\n-        with:\n-          path: artifacts\n-          name: ${{ env.LOGS_ARTIFACT_NAME }}\n-        if: always()\n-      - name: Print out logs for immediate inspection\n-        # and markup the output with GitHub Actions logging commands\n-        run: |\n-          .github/workflows/scan-logs.sh \"artifacts/$LOGS_ARTIFACT_NAME\"\n-        if: always()\n-\n-  dist:\n-\n-    runs-on: ubuntu-latest\n-    steps:\n-      - uses: actions/checkout@v2\n-        with:\n-          fetch-depth: 500\n-      - name: fetch tags\n-        run: git fetch --depth=1 origin +refs/tags/*:refs/tags/*\n-      - name: Install bootstrap prerequisites\n-        run: |\n-          sudo DEBIAN_FRONTEND=noninteractive apt-get update\n-          sudo DEBIAN_FRONTEND=noninteractive apt-get install $(sed \"s/#.*//;\" build/pkgs/debian-bootstrap.txt)\n-      - name: Bootstrap with sage-update-version\n-        # We set SAGE_ROOT and SAGE_SRC by hand\n-        # because 'sage -sh' does not work with an unconfigured tree,\n-        # giving: Error: SAGE_SCRIPTS_DIR is set to a bad value\n-        run: |\n-          git config --global user.email \"nobody@example.com\"\n-          git config --global user.name \"Sage GitHub CI\"\n-          SAGE_ROOT=. SAGE_SRC=./src src/bin/sage-update-version $(git describe)\n-      - name: make dist\n-        run: |\n-          ./configure && make dist\n-      - uses: actions/upload-artifact@v2\n-        with:\n-          path: \"dist/*.tar.gz\"\n-          name: dist\n-\n-  local-macos-nohomebrew:\n-\n-    needs: [dist]\n-\n-    runs-on: macos-latest\n-    strategy:\n-      fail-fast: false\n-      max-parallel: 4\n-      matrix:\n-        tox_system_factor: [macos-nobootstrap, macos-nobootstrap-python3_pythonorg]\n-        tox_packages_factor: [minimal]\n-    env:\n-      TOX_ENV: local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}\n-      LOGS_ARTIFACT_NAME: logs-commit-${{ github.sha }}-tox-local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}\n-    steps:\n-      - uses: actions/checkout@v2\n-        if: \"!contains(matrix.tox_system_factor, 'nobootstrap')\"\n-      - uses: actions/download-artifact@v2\n-        with:\n-          path: .\n-          name: dist\n-        if: contains(matrix.tox_system_factor, 'nobootstrap')\n-      - name: Unpack sage dist\n-        run: |\n-          tar xf sage*.tar.gz --strip-components=1\n-        if: contains(matrix.tox_system_factor, 'nobootstrap')\n-      - name: Move homebrew away\n-        run: |\n-          (cd /usr/local && for a in bin etc include lib opt sbin share; do mv $a $a-moved; done)\n-      - name: Install test prerequisites\n-        run: |\n-          /usr/bin/python3 -m pip install --user tox\n-      - name: Install python3 from python.org\n-        # As of 2020-03-30 (https://github.com/actions/virtual-environments/blob/master/images/macos/macos-10.15-Readme.md),\n-        # Python 3.7.7 is installed on GitHub Actions runners.  But we install our own copy from the python.org binary package.\n-        run: |\n-          curl -o python3.pkg https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg\n-          sudo installer -verbose -pkg python3.pkg -target /\n-        if: contains(matrix.tox_system_factor, 'python3_pythonorg')\n-      - name: Build and test with tox\n-        # We use a high parallelization on purpose in order to catch possible parallelization bugs in the build scripts.\n-        # For doctesting, we use a lower parallelization to avoid timeouts.\n-        run: |\n-          MAKE=\"make -j12\" tox -e $TOX_ENV -- SAGE_NUM_THREADS=4 $TARGETS\n-      - name: Prepare logs artifact\n-        run: |\n-          mkdir -p \"artifacts/$LOGS_ARTIFACT_NAME\"; cp -r .tox/*/log \"artifacts/$LOGS_ARTIFACT_NAME\"\n-        if: always()\n-      - uses: actions/upload-artifact@v1\n-        with:\n-          path: artifacts\n-          name: ${{ env.LOGS_ARTIFACT_NAME }}\n-        if: always()\n-      - name: Print out logs for immediate inspection\n-        # and markup the output with GitHub Actions logging commands\n-        run: |\n-          .github/workflows/scan-logs.sh \"artifacts/$LOGS_ARTIFACT_NAME\"\n-        if: always()\n```",
    "created_at": "2020-08-11T12:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451362",
    "user": "https://github.com/kliem"
}
```

<a id='comment:14'></a>
```diff
diff --git a/.github/workflows/tox.yml b/.github/workflows/tox.yml
index d6f46bd7b1..27f2f34dd4 100644
--- a/.github/workflows/tox.yml
+++ b/.github/workflows/tox.yml
@@ -36,7 +36,7 @@ jobs:
       fail-fast: false
       max-parallel: 20
       matrix:
-        tox_system_factor: [ubuntu-trusty, ubuntu-xenial, ubuntu-bionic, ubuntu-eoan, ubuntu-focal, debian-jessie, debian-stretch, debian-buster, debian-bullseye, debian-sid, linuxmint-17, linuxmint-18, linuxmint-19, linuxmint-19.3, fedora-26, fedora-27, fedora-28, fedora-29, fedora-30, fedora-31, fedora-32, centos-7, centos-8, gentoo, archlinux-latest, slackware-14.2, conda-forge, ubuntu-bionic-i386, ubuntu-eoan-i386, debian-buster-i386, centos-7-i386]
+        tox_system_factor: [debian-buster, voidlinux]
         tox_packages_factor: [minimal, standard]
     env:
       TOX_ENV: docker-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}
@@ -94,173 +94,3 @@ jobs:
             done || echo "(Ignoring errors)"
           fi
         if: always()
-
-  local-macos:
-
-    runs-on: macos-latest
-    strategy:
-      fail-fast: false
-      max-parallel: 4
-      matrix:
-        tox_system_factor: [homebrew-macos, homebrew-macos-python3_xcode, homebrew-macos-python3_xcode-nokegonly, homebrew-macos-python3_pythonorg, homebrew-macos-python3_xcode-gcc_spkg, conda-forge-macos]
-        tox_packages_factor: [minimal, standard]
-    env:
-      TOX_ENV: local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}
-      LOGS_ARTIFACT_NAME: logs-commit-${{ github.sha }}-tox-local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}
-    steps:
-      - uses: actions/checkout@v2
-      - name: Install test prerequisites
-        run: |
-          brew install tox
-      - name: Install python3 from python.org
-        # As of 2020-03-30 (https://github.com/actions/virtual-environments/blob/master/images/macos/macos-10.15-Readme.md),
-        # Python 3.7.7 is installed on GitHub Actions runners.  But we install our own copy from the python.org binary package.
-        run: |
-          curl -o python3.pkg https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg
-          sudo installer -verbose -pkg python3.pkg -target /
-        if: contains(matrix.tox_system_factor, 'python3_pythonorg')
-      - name: Build and test with tox
-        # We use a high parallelization on purpose in order to catch possible parallelization bugs in the build scripts.
-        # For doctesting, we use a lower parallelization to avoid timeouts.
-        run: |
-          MAKE="make -j12" tox -e $TOX_ENV -- SAGE_NUM_THREADS=4 $TARGETS
-      - name: Prepare logs artifact
-        run: |
-          mkdir -p "artifacts/$LOGS_ARTIFACT_NAME"; cp -r .tox/*/log "artifacts/$LOGS_ARTIFACT_NAME"
-        if: always()
-      - uses: actions/upload-artifact@v1
-        with:
-          path: artifacts
-          name: ${{ env.LOGS_ARTIFACT_NAME }}
-        if: always()
-      - name: Print out logs for immediate inspection
-        # and markup the output with GitHub Actions logging commands
-        run: |
-          .github/workflows/scan-logs.sh "artifacts/$LOGS_ARTIFACT_NAME"
-        if: always()
-
-  local-ubuntu:
-
-    runs-on: ubuntu-latest
-    strategy:
-      fail-fast: false
-      max-parallel: 1
-      matrix:
-        tox_system_factor: [conda-forge-ubuntu]
-        tox_packages_factor: [minimal, standard]
-    env:
-      TOX_ENV: local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}
-      LOGS_ARTIFACT_NAME: logs-commit-${{ github.sha }}-tox-local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}
-    steps:
-      - uses: actions/checkout@v2
-      - name: Install test prerequisites
-        run: |
-          sudo DEBIAN_FRONTEND=noninteractive apt-get update
-          sudo DEBIAN_FRONTEND=noninteractive apt-get install python-tox
-      - name: Build and test with tox
-        # We use a high parallelization on purpose in order to catch possible parallelization bugs in the build scripts.
-        # For doctesting, we use a lower parallelization to avoid timeouts.
-        run: |
-          MAKE="make -j12" tox -e $TOX_ENV -- SAGE_NUM_THREADS=4 $TARGETS
-      - name: Prepare logs artifact
-        run: |
-          mkdir -p "artifacts/$LOGS_ARTIFACT_NAME"; cp -r .tox/*/log "artifacts/$LOGS_ARTIFACT_NAME"
-        if: always()
-      - uses: actions/upload-artifact@v1
-        with:
-          path: artifacts
-          name: ${{ env.LOGS_ARTIFACT_NAME }}
-        if: always()
-      - name: Print out logs for immediate inspection
-        # and markup the output with GitHub Actions logging commands
-        run: |
-          .github/workflows/scan-logs.sh "artifacts/$LOGS_ARTIFACT_NAME"
-        if: always()
-
-  dist:
-
-    runs-on: ubuntu-latest
-    steps:
-      - uses: actions/checkout@v2
-        with:
-          fetch-depth: 500
-      - name: fetch tags
-        run: git fetch --depth=1 origin +refs/tags/*:refs/tags/*
-      - name: Install bootstrap prerequisites
-        run: |
-          sudo DEBIAN_FRONTEND=noninteractive apt-get update
-          sudo DEBIAN_FRONTEND=noninteractive apt-get install $(sed "s/#.*//;" build/pkgs/debian-bootstrap.txt)
-      - name: Bootstrap with sage-update-version
-        # We set SAGE_ROOT and SAGE_SRC by hand
-        # because 'sage -sh' does not work with an unconfigured tree,
-        # giving: Error: SAGE_SCRIPTS_DIR is set to a bad value
-        run: |
-          git config --global user.email "nobody@example.com"
-          git config --global user.name "Sage GitHub CI"
-          SAGE_ROOT=. SAGE_SRC=./src src/bin/sage-update-version $(git describe)
-      - name: make dist
-        run: |
-          ./configure && make dist
-      - uses: actions/upload-artifact@v2
-        with:
-          path: "dist/*.tar.gz"
-          name: dist
-
-  local-macos-nohomebrew:
-
-    needs: [dist]
-
-    runs-on: macos-latest
-    strategy:
-      fail-fast: false
-      max-parallel: 4
-      matrix:
-        tox_system_factor: [macos-nobootstrap, macos-nobootstrap-python3_pythonorg]
-        tox_packages_factor: [minimal]
-    env:
-      TOX_ENV: local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}
-      LOGS_ARTIFACT_NAME: logs-commit-${{ github.sha }}-tox-local-${{ matrix.tox_system_factor }}-${{ matrix.tox_packages_factor }}
-    steps:
-      - uses: actions/checkout@v2
-        if: "!contains(matrix.tox_system_factor, 'nobootstrap')"
-      - uses: actions/download-artifact@v2
-        with:
-          path: .
-          name: dist
-        if: contains(matrix.tox_system_factor, 'nobootstrap')
-      - name: Unpack sage dist
-        run: |
-          tar xf sage*.tar.gz --strip-components=1
-        if: contains(matrix.tox_system_factor, 'nobootstrap')
-      - name: Move homebrew away
-        run: |
-          (cd /usr/local && for a in bin etc include lib opt sbin share; do mv $a $a-moved; done)
-      - name: Install test prerequisites
-        run: |
-          /usr/bin/python3 -m pip install --user tox
-      - name: Install python3 from python.org
-        # As of 2020-03-30 (https://github.com/actions/virtual-environments/blob/master/images/macos/macos-10.15-Readme.md),
-        # Python 3.7.7 is installed on GitHub Actions runners.  But we install our own copy from the python.org binary package.
-        run: |
-          curl -o python3.pkg https://www.python.org/ftp/python/3.7.7/python-3.7.7-macosx10.9.pkg
-          sudo installer -verbose -pkg python3.pkg -target /
-        if: contains(matrix.tox_system_factor, 'python3_pythonorg')
-      - name: Build and test with tox
-        # We use a high parallelization on purpose in order to catch possible parallelization bugs in the build scripts.
-        # For doctesting, we use a lower parallelization to avoid timeouts.
-        run: |
-          MAKE="make -j12" tox -e $TOX_ENV -- SAGE_NUM_THREADS=4 $TARGETS
-      - name: Prepare logs artifact
-        run: |
-          mkdir -p "artifacts/$LOGS_ARTIFACT_NAME"; cp -r .tox/*/log "artifacts/$LOGS_ARTIFACT_NAME"
-        if: always()
-      - uses: actions/upload-artifact@v1
-        with:
-          path: artifacts
-          name: ${{ env.LOGS_ARTIFACT_NAME }}
-        if: always()
-      - name: Print out logs for immediate inspection
-        # and markup the output with GitHub Actions logging commands
-        run: |
-          .github/workflows/scan-logs.sh "artifacts/$LOGS_ARTIFACT_NAME"
-        if: always()
```



---

archive/issue_comments_451363.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:13 gh-kliem]:\n> In principle this seems capable of reproducing problems. However, I'm getting errors in log file artifacts. Did I do something wrong? Is it a problem with github? Is it caused by this ticket?\n\nIt's a problem with github. I have had a lot of trouble with it in the past weeks.",
    "created_at": "2020-08-11T14:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451363",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Replying to [comment:13 gh-kliem]:
> In principle this seems capable of reproducing problems. However, I'm getting errors in log file artifacts. Did I do something wrong? Is it a problem with github? Is it caused by this ticket?

It's a problem with github. I have had a lot of trouble with it in the past weeks.



---

archive/issue_comments_451364.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-11T14:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451364",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_451365.json:
```json
{
    "body": "<a id='comment:16'></a>LGTM.",
    "created_at": "2020-08-11T14:30:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451365",
    "user": "https://github.com/kliem"
}
```

<a id='comment:16'></a>LGTM.



---

archive/issue_comments_451366.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-14T22:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30044#issuecomment-451366",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_077256.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-14T22:23:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30044",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30044#event-77256"
}
```
