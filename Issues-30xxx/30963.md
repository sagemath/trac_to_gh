# Issue 30963: remove CombinatorialClass in graph_path.py

archive/issues_030726.json:
```json
{
    "assignees": [],
    "body": "as part of #12913\n\nBranch/Commit: **[2ac6bde](https://github.com/sagemath/sagetrac-mirror/commit/2ac6bde9f0e9458553ad15d2ed2ea71d3c439743)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30963_\n\n",
    "closed_at": "2020-12-06T12:49:22Z",
    "created_at": "2020-11-25T17:38:54Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "remove CombinatorialClass in graph_path.py",
    "type": "issue",
    "updated_at": "2020-12-06T12:49:22Z",
    "url": "https://github.com/sagemath/sage/issues/30963",
    "user": "https://github.com/fchapoton"
}
```
as part of #12913

Branch/Commit: **[2ac6bde](https://github.com/sagemath/sagetrac-mirror/commit/2ac6bde9f0e9458553ad15d2ed2ea71d3c439743)**

Reviewer: **Travis Scrimshaw**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/30963_





---

archive/issue_events_408766.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T17:38:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408766"
}
```



---

archive/issue_events_408767.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T17:38:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408767"
}
```



---

archive/issue_events_408768.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T17:38:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408768"
}
```



---

archive/issue_events_408769.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T17:38:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408769"
}
```



---

archive/issue_events_408770.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-11-25T17:39:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408770"
}
```



---

archive/issue_comments_499132.json:
```json
{
    "body": "Branch: **[u/chapoton/30963](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30963)**",
    "created_at": "2020-11-25T17:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499132",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/30963](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30963)**



---

archive/issue_comments_499133.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/26212a54a2062dae4984e44e413d54f6c865f191\">26212a5</a></td><td><code>remove CombinatorialClass in graph_path.py</code></td></tr></table>\n",
    "created_at": "2020-11-25T17:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499133",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/26212a54a2062dae4984e44e413d54f6c865f191">26212a5</a></td><td><code>remove CombinatorialClass in graph_path.py</code></td></tr></table>




---

archive/issue_comments_499134.json:
```json
{
    "body": "Commit: **[26212a5](https://github.com/sagemath/sagetrac-mirror/commit/26212a54a2062dae4984e44e413d54f6c865f191)**",
    "created_at": "2020-11-25T17:39:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499134",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[26212a5](https://github.com/sagemath/sagetrac-mirror/commit/26212a54a2062dae4984e44e413d54f6c865f191)**



---

archive/issue_comments_499135.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2020-11-30T04:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499135",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_499136.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nFailures seem unrelated, but why did you get rid of this doctest?\n\n```diff\ndiff --git a/src/sage/combinat/graph_path.py b/src/sage/combinat/graph_path.py\nindex dc2c7ce..620ef03 100644\n--- a/src/sage/combinat/graph_path.py\n+++ b/src/sage/combinat/graph_path.py\n@@ -239,10 +240,9 @@ class GraphPaths_all(CombinatorialClass, GraphPaths_common):\n \n             sage: G = DiGraph({1:[2,2,3], 2:[3,4], 3:[4], 4:[5,5]}, multiedges=True)\n             sage: p = GraphPaths(G)\n-            sage: p == loads(dumps(p))\n-            True\n         \"\"\"\n         self.graph = g\n+        Parent.__init__(self, category=FiniteEnumeratedSets())\n \n     def __repr__(self):\n         \"\"\"\n```",
    "created_at": "2020-11-30T04:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499136",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:2'>Comment 2:</a>
Failures seem unrelated, but why did you get rid of this doctest?

```diff
diff --git a/src/sage/combinat/graph_path.py b/src/sage/combinat/graph_path.py
index dc2c7ce..620ef03 100644
--- a/src/sage/combinat/graph_path.py
+++ b/src/sage/combinat/graph_path.py
@@ -239,10 +240,9 @@ class GraphPaths_all(CombinatorialClass, GraphPaths_common):
 
             sage: G = DiGraph({1:[2,2,3], 2:[3,4], 3:[4], 4:[5,5]}, multiedges=True)
             sage: p = GraphPaths(G)
-            sage: p == loads(dumps(p))
-            True
         """
         self.graph = g
+        Parent.__init__(self, category=FiniteEnumeratedSets())
 
     def __repr__(self):
         """
```



---

archive/issue_comments_499137.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nHello Travis,\n\nfailures on darwin patchbot are due to usage of python 3.9\n\nfailures on petitbonum are because of a pexpect problem with singular #30945\n\nHere, I have a problem with loads-dumps, because I cannot use `UniqueRepresentation`, the input (a graph) being not compatible with that. Should I make a custom `__eq__` and `__ne__` to be able to restore this doctest ?",
    "created_at": "2020-11-30T08:30:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499137",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'>Comment 3:</a>
Hello Travis,

failures on darwin patchbot are due to usage of python 3.9

failures on petitbonum are because of a pexpect problem with singular #30945

Here, I have a problem with loads-dumps, because I cannot use `UniqueRepresentation`, the input (a graph) being not compatible with that. Should I make a custom `__eq__` and `__ne__` to be able to restore this doctest ?



---

archive/issue_comments_499138.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nReplying to [@fchapoton](#comment%3A3):\n> Here, I have a problem with loads-dumps, because I cannot use `UniqueRepresentation`, the input (a graph) being not compatible with that. Should I make a custom `__eq__` and `__ne__` to be able to restore this doctest ?\n\nYes, I think that is best. In fact, the lack of equality testing might end up being a backwards incompatible change (although I do see it as being unlikely). Probably also should have a `__hash__` too...",
    "created_at": "2020-11-30T13:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499138",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'>Comment 4:</a>
Replying to [@fchapoton](#comment%3A3):
> Here, I have a problem with loads-dumps, because I cannot use `UniqueRepresentation`, the input (a graph) being not compatible with that. Should I make a custom `__eq__` and `__ne__` to be able to restore this doctest ?

Yes, I think that is best. In fact, the lack of equality testing might end up being a backwards incompatible change (although I do see it as being unlikely). Probably also should have a `__hash__` too...



---

archive/issue_comments_499139.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e4666b354e0f048c7f5c5f98b9a959f08e6b017\">6e4666b</a></td><td><code>adding `__eq__` and `__ne__` for GraphPaths pickling</code></td></tr></table>\n",
    "created_at": "2020-12-02T20:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499139",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e4666b354e0f048c7f5c5f98b9a959f08e6b017">6e4666b</a></td><td><code>adding `__eq__` and `__ne__` for GraphPaths pickling</code></td></tr></table>




---

archive/issue_comments_499140.json:
```json
{
    "body": "Changed commit from **[26212a5](https://github.com/sagemath/sagetrac-mirror/commit/26212a54a2062dae4984e44e413d54f6c865f191)** to **[6e4666b](https://github.com/sagemath/sagetrac-mirror/commit/6e4666b354e0f048c7f5c5f98b9a959f08e6b017)**",
    "created_at": "2020-12-02T20:02:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499140",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[26212a5](https://github.com/sagemath/sagetrac-mirror/commit/26212a54a2062dae4984e44e413d54f6c865f191)** to **[6e4666b](https://github.com/sagemath/sagetrac-mirror/commit/6e4666b354e0f048c7f5c5f98b9a959f08e6b017)**



---

archive/issue_comments_499141.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nok, here is the equality test",
    "created_at": "2020-12-02T20:28:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499141",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'>Comment 6:</a>
ok, here is the equality test



---

archive/issue_comments_499142.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nThank you. LGTM.",
    "created_at": "2020-12-03T07:03:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499142",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'>Comment 7:</a>
Thank you. LGTM.



---

archive/issue_events_408771.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-12-03T07:03:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408771"
}
```



---

archive/issue_events_408772.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2020-12-03T07:03:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408772"
}
```



---

archive/issue_comments_499143.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\none moment, I see that I forgot to put back all the loads-dumps doctests..",
    "created_at": "2020-12-03T08:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499143",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'>Comment 8:</a>
one moment, I see that I forgot to put back all the loads-dumps doctests..



---

archive/issue_comments_499144.json:
```json
{
    "body": "Changed commit from **[6e4666b](https://github.com/sagemath/sagetrac-mirror/commit/6e4666b354e0f048c7f5c5f98b9a959f08e6b017)** to **[2ac6bde](https://github.com/sagemath/sagetrac-mirror/commit/2ac6bde9f0e9458553ad15d2ed2ea71d3c439743)**",
    "created_at": "2020-12-03T08:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499144",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6e4666b](https://github.com/sagemath/sagetrac-mirror/commit/6e4666b354e0f048c7f5c5f98b9a959f08e6b017)** to **[2ac6bde](https://github.com/sagemath/sagetrac-mirror/commit/2ac6bde9f0e9458553ad15d2ed2ea71d3c439743)**



---

archive/issue_comments_499145.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2ac6bde9f0e9458553ad15d2ed2ea71d3c439743\">2ac6bde</a></td><td><code>adding back loads-dumps</code></td></tr></table>\n",
    "created_at": "2020-12-03T08:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499145",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2ac6bde9f0e9458553ad15d2ed2ea71d3c439743">2ac6bde</a></td><td><code>adding back loads-dumps</code></td></tr></table>




---

archive/issue_events_408773.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-03T08:24:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408773"
}
```



---

archive/issue_events_408774.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-03T08:24:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408774"
}
```



---

archive/issue_comments_499146.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\ndone. I also removed the `.Facade()` that I added before and was probably used wrongly. Back to needs review, sorry for that.",
    "created_at": "2020-12-03T08:25:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499146",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'>Comment 10:</a>
done. I also removed the `.Facade()` that I added before and was probably used wrongly. Back to needs review, sorry for that.



---

archive/issue_comments_499147.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\ngiven the green bot, I will allow mself to set this back to positive",
    "created_at": "2020-12-05T20:29:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499147",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'>Comment 11:</a>
given the green bot, I will allow mself to set this back to positive



---

archive/issue_events_408775.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-05T20:29:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408775"
}
```



---

archive/issue_events_408776.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-05T20:29:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408776"
}
```



---

archive/issue_events_408777.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-06T12:49:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408777"
}
```



---

archive/issue_events_408778.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "5fadc42c3be680ea30def2bb25d52050d0a11c87",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-06T12:49:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30963#event-408778"
}
```



---

archive/issue_comments_499148.json:
```json
{
    "body": "Changed branch from **[u/chapoton/30963](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30963)** to **[2ac6bde](https://github.com/sagemath/sagetrac-mirror/commit/2ac6bde9f0e9458553ad15d2ed2ea71d3c439743)**",
    "created_at": "2020-12-06T12:49:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30963#issuecomment-499148",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/30963](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30963)** to **[2ac6bde](https://github.com/sagemath/sagetrac-mirror/commit/2ac6bde9f0e9458553ad15d2ed2ea71d3c439743)**
