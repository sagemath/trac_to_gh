# Issue 30622: build/bin/sage-spkg: Handle an optional argument to set the installation tree (default SAGE_LOCAL)

archive/issues_030385.json:
```json
{
    "body": "We handle a new optional argument to `sage-spkg`, which sets the installation tree - the new variable `SAGE_INST_LOCAL` (default:  `$SAGE_LOCAL`) for the package installation scripts.  (The script `sage-spkg-uninstall` already accepts this optional argument.)\n\nWe also move the definition of `SAGE_SPKG_INST` and `SAGE_SPKG_WHEELS` out of `build/bin/install` into `sage-spkg` (and into `Makefile.in` for script packages). This is so that they can depend on `SAGE_INST_LOCAL`.\n\nThus, the installation location of the installation records now depends on the installation tree - it is `$SAGE_INST_LOCAL/var/lib/sage/{installed,scripts,wheels}`.\n\nThis is preparation for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.\n\n\n\nCC:  @jhpalmieri @orlitzky @kliem\n\nKeywords: sd111\n\nReviewer: Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nBranch: 7ea44f7f8faf65d0061d97b53a53e73151716d94\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30622\n\n",
    "closed_at": "2021-01-03T12:15:39Z",
    "created_at": "2020-09-21T03:19:05Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "build/bin/sage-spkg: Handle an optional argument to set the installation tree (default SAGE_LOCAL)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30622",
    "user": "https://github.com/mkoeppe"
}
```
We handle a new optional argument to `sage-spkg`, which sets the installation tree - the new variable `SAGE_INST_LOCAL` (default:  `$SAGE_LOCAL`) for the package installation scripts.  (The script `sage-spkg-uninstall` already accepts this optional argument.)

We also move the definition of `SAGE_SPKG_INST` and `SAGE_SPKG_WHEELS` out of `build/bin/install` into `sage-spkg` (and into `Makefile.in` for script packages). This is so that they can depend on `SAGE_INST_LOCAL`.

Thus, the installation location of the installation records now depends on the installation tree - it is `$SAGE_INST_LOCAL/var/lib/sage/{installed,scripts,wheels}`.

This is preparation for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.



CC:  @jhpalmieri @orlitzky @kliem

Keywords: sd111

Reviewer: Jonathan Kliem

Author: Matthias Koeppe

Branch: 7ea44f7f8faf65d0061d97b53a53e73151716d94

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30622





---

archive/issue_comments_462323.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n This is for #29013 - which proposes to install Python packages in \\`$SAGE_VENV\\` instead of \\`$SAGE_LOCAL\\`.\n \n-\\`Makefile\\` would set \\`SAGE_SPKG_PREFIX=$SAGE_VENV\\` for these packages.  This will in particular set the installation location of installation records to \\`$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}\\`.\n+\\`Makefile\\` would set \\`SAGE_INST_LOCAL=$SAGE_VENV\\` for these packages.  This will in particular set the installation location of installation records to \\`$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}\\`.\n+\n+\n+\n \n Summary: build/bin/sage-spkg: Allow overriding SAGE_LOCAL by SAGE_SPKG_PREFIX\n \n```\n",
    "created_at": "2020-09-21T04:27:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462323",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,9 @@
 This is for #29013 - which proposes to install Python packages in \`$SAGE_VENV\` instead of \`$SAGE_LOCAL\`.
 
-\`Makefile\` would set \`SAGE_SPKG_PREFIX=$SAGE_VENV\` for these packages.  This will in particular set the installation location of installation records to \`$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}\`.
+\`Makefile\` would set \`SAGE_INST_LOCAL=$SAGE_VENV\` for these packages.  This will in particular set the installation location of installation records to \`$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}\`.
+
+
+
 
 Summary: build/bin/sage-spkg: Allow overriding SAGE_LOCAL by SAGE_SPKG_PREFIX
 
```




---

archive/issue_comments_462324.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-24T02:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462324",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462325.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-05T01:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462325",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462326.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-30T03:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462326",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462327.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,3 +1,11 @@\n+We handle a new optional argument to \\`sage-spkg\\`, which sets the installation tree - the new variable \\`SAGE_INST_LOCAL\\` (default:  \\`$SAGE_LOCAL\\`) for the package installation scripts.  (The script \\`sage-spkg-uninstall\\` already accepts this optional argument.)\n+\n+We also move the definition of \\`SAGE_SPKG_INST\\` and \\`SAGE_SPKG_WHEELS\\` out of \\`build/bin/install\\` into \\`sage-spkg\\` (and into \\`Makefile.in\\` for script packages). This is so that they can depend on \\`SAGE_INST_LOCAL\\`.\n+\n+Thus, the installation location of the installation records now depends on the installation tree - it is \\`$SAGE_INST_LOCAL/var/lib/sage/{installed,scripts,wheels}\\`.\n+\n+This is preparation for #29013 - which proposes to install Python packages in \\`$SAGE_VENV\\` instead of \\`$SAGE_LOCAL\\`.\n+\n \n \n Summary: build/bin/sage-spkg: Allow overriding SAGE_LOCAL by SAGE_SPKG_PREFIX\n```\n",
    "created_at": "2020-11-30T03:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462327",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,3 +1,11 @@
+We handle a new optional argument to \`sage-spkg\`, which sets the installation tree - the new variable \`SAGE_INST_LOCAL\` (default:  \`$SAGE_LOCAL\`) for the package installation scripts.  (The script \`sage-spkg-uninstall\` already accepts this optional argument.)
+
+We also move the definition of \`SAGE_SPKG_INST\` and \`SAGE_SPKG_WHEELS\` out of \`build/bin/install\` into \`sage-spkg\` (and into \`Makefile.in\` for script packages). This is so that they can depend on \`SAGE_INST_LOCAL\`.
+
+Thus, the installation location of the installation records now depends on the installation tree - it is \`$SAGE_INST_LOCAL/var/lib/sage/{installed,scripts,wheels}\`.
+
+This is preparation for #29013 - which proposes to install Python packages in \`$SAGE_VENV\` instead of \`$SAGE_LOCAL\`.
+
 
 
 Summary: build/bin/sage-spkg: Allow overriding SAGE_LOCAL by SAGE_SPKG_PREFIX
```




---

archive/issue_comments_462328.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-30T03:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462329.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-30T03:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462329",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_462330.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-11-30T03:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462330",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_462331.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-30T04:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462331",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462332.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-30T04:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462332",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_462333.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462333",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_462334.json:
```json
{
    "body": "<a id='comment:18'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462334",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_462335.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-07T07:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462335",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_462336.json:
```json
{
    "body": "<a id='comment:19'></a>LGTM.",
    "created_at": "2020-12-07T07:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462336",
    "user": "https://github.com/kliem"
}
```

<a id='comment:19'></a>LGTM.



---

archive/issue_comments_462337.json:
```json
{
    "body": "<a id='comment:20'></a>Thank you!",
    "created_at": "2020-12-07T07:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462337",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Thank you!



---

archive/issue_comments_462338.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-12-13T00:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462338",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_462339.json:
```json
{
    "body": "<a id='comment:21'></a>Merge conflict",
    "created_at": "2020-12-13T00:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462339",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>Merge conflict



---

archive/issue_comments_462340.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2020-12-13T21:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_462341.json:
```json
{
    "body": "<a id='comment:24'></a>Merged #30375",
    "created_at": "2020-12-13T22:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462341",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Merged #30375



---

archive/issue_comments_462342.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-12-13T22:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462342",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_079616.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-21T23:35:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30622#event-79616"
}
```



---

archive/issue_comments_462343.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-21T23:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462343",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_462344.json:
```json
{
    "body": "<a id='comment:26'></a>Breaks making source tarballs:\n\n```\nSage version 9.3.beta5, release date 2020-12-27\nCloning into '/home/release/Sage/tmp/sage-9.3.beta5'...\ndone.\nEnumerating objects: 737573, done.\nCounting objects: 100% (737573/737573), done.\nDelta compression using up to 16 threads\nCompressing objects: 100% (702757/702757), done.\nWriting objects: 100% (737573/737573), done.\nTotal 737573 (delta 588187), reused 141018 (delta 0), pack-reused 0\nChecking connectivity: 737573, done.\nFinished cloning Sage sources\nMakefile:22: *** This Makefile needs to be invoked by build/make/install.  Stop.\nTraceback (most recent call last):\n  File \"/home/release/opt/bin/git-releasemgr\", line 16, in <module>\n    cmdline.launch()\n  File \"/home/release/opt/git-trac-command/git_trac/releasemgr/cmdline.py\", line 166, in launch\n    app.release(args.version, check=args.check)\n  File \"/home/release/opt/git-trac-command/git_trac/releasemgr/app.py\", line 315, in release\n    create_tarball()\n  File \"/home/release/opt/git-trac-command/git_trac/releasemgr/make_release.py\", line 15, in create_tarball\n    check_call(['sage', '-sdist'])\n  File \"/home/release/opt/conda/lib/python2.7/subprocess.py\", line 190, in check_call\n    raise CalledProcessError(retcode, cmd)\nsubprocess.CalledProcessError: Command '['sage', '-sdist']' returned non-zero exit status 2\n```",
    "created_at": "2020-12-27T23:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462344",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>Breaks making source tarballs:

```
Sage version 9.3.beta5, release date 2020-12-27
Cloning into '/home/release/Sage/tmp/sage-9.3.beta5'...
done.
Enumerating objects: 737573, done.
Counting objects: 100% (737573/737573), done.
Delta compression using up to 16 threads
Compressing objects: 100% (702757/702757), done.
Writing objects: 100% (737573/737573), done.
Total 737573 (delta 588187), reused 141018 (delta 0), pack-reused 0
Checking connectivity: 737573, done.
Finished cloning Sage sources
Makefile:22: *** This Makefile needs to be invoked by build/make/install.  Stop.
Traceback (most recent call last):
  File "/home/release/opt/bin/git-releasemgr", line 16, in <module>
    cmdline.launch()
  File "/home/release/opt/git-trac-command/git_trac/releasemgr/cmdline.py", line 166, in launch
    app.release(args.version, check=args.check)
  File "/home/release/opt/git-trac-command/git_trac/releasemgr/app.py", line 315, in release
    create_tarball()
  File "/home/release/opt/git-trac-command/git_trac/releasemgr/make_release.py", line 15, in create_tarball
    check_call(['sage', '-sdist'])
  File "/home/release/opt/conda/lib/python2.7/subprocess.py", line 190, in check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command '['sage', '-sdist']' returned non-zero exit status 2
```



---

archive/issue_comments_462345.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2020-12-27T23:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462345",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_079617.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-27T23:56:09Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30622#event-79617"
}
```



---

archive/issue_comments_462346.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2020-12-27T23:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462346",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_462347.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-28T04:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462348.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-12-28T04:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462348",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_462349.json:
```json
{
    "body": "<a id='comment:30'></a>There is two small things that could be fixed along the way:\n- `make dist` does not appear in `make --help`.\n- `local/bin/sage-sdist` claims it should be called by `spkg/bin/sage`, but it is really run by `local/bin/sage`.\n\nThe error message `This Makefile needs to be invoked by build/make/install` seems strange, as there is at least one other legal way to call the Makefile, as we discovered here. If it is not included in the message, I think the comment should be more verbose.",
    "created_at": "2020-12-28T07:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462349",
    "user": "https://github.com/kliem"
}
```

<a id='comment:30'></a>There is two small things that could be fixed along the way:
- `make dist` does not appear in `make --help`.
- `local/bin/sage-sdist` claims it should be called by `spkg/bin/sage`, but it is really run by `local/bin/sage`.

The error message `This Makefile needs to be invoked by build/make/install` seems strange, as there is at least one other legal way to call the Makefile, as we discovered here. If it is not included in the message, I think the comment should be more verbose.



---

archive/issue_comments_462350.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-28T18:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462350",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462351.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:30 gh-kliem]:\n> There is two small things that could be fixed along the way:\n> - `make dist` does not appear in `make --help`.\n\n\nMy version of `make` here on macOS does not list any targets on `make --help`. In any case, beyond the scope of the ticket.\n\n> - `local/bin/sage-sdist` claims it should be called by `spkg/bin/sage`, but it is really run by `local/bin/sage`.\n\n\nUpdated.",
    "created_at": "2020-12-28T18:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462351",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Replying to [comment:30 gh-kliem]:
> There is two small things that could be fixed along the way:
> - `make dist` does not appear in `make --help`.


My version of `make` here on macOS does not list any targets on `make --help`. In any case, beyond the scope of the ticket.

> - `local/bin/sage-sdist` claims it should be called by `spkg/bin/sage`, but it is really run by `local/bin/sage`.


Updated.



---

archive/issue_comments_462352.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-12-28T18:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462352",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_462353.json:
```json
{
    "body": "<a id='comment:34'></a>Back to positive review.",
    "created_at": "2020-12-29T08:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462353",
    "user": "https://github.com/kliem"
}
```

<a id='comment:34'></a>Back to positive review.



---

archive/issue_comments_462354.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-29T08:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462354",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_462355.json:
```json
{
    "body": "<a id='comment:35'></a>Thanks.",
    "created_at": "2020-12-29T18:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462355",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Thanks.



---

archive/issue_comments_462356.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-03T12:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462356",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_079618.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-03T12:15:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30622#event-79618"
}
```



---

archive/issue_comments_462357.json:
```json
{
    "body": "<a id='comment:37'></a>Apparently we broke `sage -b` with this ticket.",
    "created_at": "2021-01-19T08:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-462357",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>Apparently we broke `sage -b` with this ticket.
