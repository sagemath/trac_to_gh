# Issue 30622: build/bin/sage-spkg: Handle an optional argument to set the installation tree (default SAGE_LOCAL)

archive/issues_030385.json:
```json
{
    "body": "We handle a new optional argument to `sage-spkg`, which sets the installation tree - the new variable `SAGE_INST_LOCAL` (default:  `$SAGE_LOCAL`) for the package installation scripts.  (The script `sage-spkg-uninstall` already accepts this optional argument.)\n\nWe also move the definition of `SAGE_SPKG_INST` and `SAGE_SPKG_WHEELS` out of `build/bin/install` into `sage-spkg` (and into `Makefile.in` for script packages). This is so that they can depend on `SAGE_INST_LOCAL`.\n\nThus, the installation location of the installation records now depends on the installation tree - it is `$SAGE_INST_LOCAL/var/lib/sage/{installed,scripts,wheels}`.\n\nThis is preparation for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.\n\n\n\nCC:  @jhpalmieri @orlitzky @kliem\n\nKeywords: sd111\n\nReviewer: Jonathan Kliem\n\nAuthor: Matthias Koeppe\n\nBranch: 7ea44f7f8faf65d0061d97b53a53e73151716d94\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30622\n\n",
    "closed_at": "2021-01-03T12:15:39Z",
    "created_at": "2020-09-21T03:19:05Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "build/bin/sage-spkg: Handle an optional argument to set the installation tree (default SAGE_LOCAL)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30622",
    "user": "https://github.com/mkoeppe"
}
```
We handle a new optional argument to `sage-spkg`, which sets the installation tree - the new variable `SAGE_INST_LOCAL` (default:  `$SAGE_LOCAL`) for the package installation scripts.  (The script `sage-spkg-uninstall` already accepts this optional argument.)

We also move the definition of `SAGE_SPKG_INST` and `SAGE_SPKG_WHEELS` out of `build/bin/install` into `sage-spkg` (and into `Makefile.in` for script packages). This is so that they can depend on `SAGE_INST_LOCAL`.

Thus, the installation location of the installation records now depends on the installation tree - it is `$SAGE_INST_LOCAL/var/lib/sage/{installed,scripts,wheels}`.

This is preparation for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.



CC:  @jhpalmieri @orlitzky @kliem

Keywords: sd111

Reviewer: Jonathan Kliem

Author: Matthias Koeppe

Branch: 7ea44f7f8faf65d0061d97b53a53e73151716d94

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30622





---

archive/issue_comments_605567.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n This is for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.\n \n-`Makefile` would set `SAGE_SPKG_PREFIX=$SAGE_VENV` for these packages.  This will in particular set the installation location of installation records to `$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}`.\n+`Makefile` would set `SAGE_INST_LOCAL=$SAGE_VENV` for these packages.  This will in particular set the installation location of installation records to `$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}`.\n \n \n \n``````\n",
    "created_at": "2020-09-21T04:27:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605567",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 This is for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.
 
-`Makefile` would set `SAGE_SPKG_PREFIX=$SAGE_VENV` for these packages.  This will in particular set the installation location of installation records to `$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}`.
+`Makefile` would set `SAGE_INST_LOCAL=$SAGE_VENV` for these packages.  This will in particular set the installation location of installation records to `$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}`.
 
 
 
``````




---

archive/issue_comments_605568.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#29500\"",
    "created_at": "2020-09-21T06:10:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605568",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#29500"



---

archive/issue_comments_605569.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mkoeppe/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix\"",
    "created_at": "2020-09-21T06:17:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605569",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "" to "u/mkoeppe/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix"



---

archive/issue_comments_605570.json:
```json
{
    "body": "Changing commit from \"\" to \"8fc7f9ca20d6665425d0332070c6e7e3dc3968c9\"",
    "created_at": "2020-09-24T02:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605570",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "8fc7f9ca20d6665425d0332070c6e7e3dc3968c9"



---

archive/issue_comments_605571.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------|\n|[f2e7075](https://git.sagemath.org/sage.git/commit/?id=f2e707561ab3044221b57151ae4cc67d502fe9f8)|`Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels`|\n|[8fc7f9c](https://git.sagemath.org/sage.git/commit/?id=8fc7f9ca20d6665425d0332070c6e7e3dc3968c9)|`Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|",
    "created_at": "2020-09-24T02:31:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605571",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------|
|[f2e7075](https://git.sagemath.org/sage.git/commit/?id=f2e707561ab3044221b57151ae4cc67d502fe9f8)|`Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels`|
|[8fc7f9c](https://git.sagemath.org/sage.git/commit/?id=8fc7f9ca20d6665425d0332070c6e7e3dc3968c9)|`Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|



---

archive/issue_comments_605572.json:
```json
{
    "body": "Changing dependencies from \"#29500\" to \"#29500, #29386\"",
    "created_at": "2020-09-24T05:11:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605572",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29500" to "#29500, #29386"



---

archive/issue_comments_605573.json:
```json
{
    "body": "Changing dependencies from \"#29500, #29386\" to \"#29500, #29386, #30657\"",
    "created_at": "2020-09-24T22:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605573",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29500, #29386" to "#29500, #29386, #30657"



---

archive/issue_comments_605574.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|\n|[0f1b7aa](https://git.sagemath.org/sage.git/commit/?id=0f1b7aab59ff88cbb2995287ce6c2de1a12473fc)|`build/make/install: Do not set SAGE_SPKG_INST here; set it in build/make/Makefile.in`|\n|[1baf8ea](https://git.sagemath.org/sage.git/commit/?id=1baf8eae8a49e394c33c0b1c3633ab1755db86a5)|`WIP`|\n|[bd0fd2f](https://git.sagemath.org/sage.git/commit/?id=bd0fd2f3142b08a906ebdbe3e2f37be6bec5f135)|`Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30657/fix_up__sage__p_`|\n|[2e20f23](https://git.sagemath.org/sage.git/commit/?id=2e20f230c0ac0b24c14b04b180217db68a2b7278)|`build/bin/sage-spkg: Move SAGE_SPKG_{INST,SCRIPTS,WHEELS} setting here from build/bin/install, make them relative to SAGE_INST_LOCAL`|\n|[be2417c](https://git.sagemath.org/sage.git/commit/?id=be2417cd48549b2c1a9fa29bcd362b08c2a6fda7)|`Merge tag '9.2.beta14' into t/30657/fix_up__sage__p_`|\n|[8ee7ee2](https://git.sagemath.org/sage.git/commit/?id=8ee7ee29ea4686a968846df1621f52adcd8f4173)|`build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work`|\n|[a713c39](https://git.sagemath.org/sage.git/commit/?id=a713c390686ce8da37f0c0268059d3b522c0d0d3)|`Merge branch 't/30657/fix_up__sage__p_' into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|",
    "created_at": "2020-10-05T01:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605574",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|
|[0f1b7aa](https://git.sagemath.org/sage.git/commit/?id=0f1b7aab59ff88cbb2995287ce6c2de1a12473fc)|`build/make/install: Do not set SAGE_SPKG_INST here; set it in build/make/Makefile.in`|
|[1baf8ea](https://git.sagemath.org/sage.git/commit/?id=1baf8eae8a49e394c33c0b1c3633ab1755db86a5)|`WIP`|
|[bd0fd2f](https://git.sagemath.org/sage.git/commit/?id=bd0fd2f3142b08a906ebdbe3e2f37be6bec5f135)|`Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30657/fix_up__sage__p_`|
|[2e20f23](https://git.sagemath.org/sage.git/commit/?id=2e20f230c0ac0b24c14b04b180217db68a2b7278)|`build/bin/sage-spkg: Move SAGE_SPKG_{INST,SCRIPTS,WHEELS} setting here from build/bin/install, make them relative to SAGE_INST_LOCAL`|
|[be2417c](https://git.sagemath.org/sage.git/commit/?id=be2417cd48549b2c1a9fa29bcd362b08c2a6fda7)|`Merge tag '9.2.beta14' into t/30657/fix_up__sage__p_`|
|[8ee7ee2](https://git.sagemath.org/sage.git/commit/?id=8ee7ee29ea4686a968846df1621f52adcd8f4173)|`build/make/install: Set SAGE_SPKG_WHEELS also here so that script packages still work`|
|[a713c39](https://git.sagemath.org/sage.git/commit/?id=a713c390686ce8da37f0c0268059d3b522c0d0d3)|`Merge branch 't/30657/fix_up__sage__p_' into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|



---

archive/issue_comments_605575.json:
```json
{
    "body": "Changing commit from \"8fc7f9ca20d6665425d0332070c6e7e3dc3968c9\" to \"a713c390686ce8da37f0c0268059d3b522c0d0d3\"",
    "created_at": "2020-10-05T01:08:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605575",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8fc7f9ca20d6665425d0332070c6e7e3dc3968c9" to "a713c390686ce8da37f0c0268059d3b522c0d0d3"



---

archive/issue_comments_605576.json:
```json
{
    "body": "Changing author from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-10-05T02:33:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605576",
    "user": "https://github.com/mkoeppe"
}
```

Changing author from "" to "Matthias Koeppe"



---

archive/issue_comments_605577.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|\n|[8ef2508](https://git.sagemath.org/sage.git/commit/?id=8ef2508a1db39fbbf85e774e4544619494483dc7)|`Merge tag '9.3.beta2' into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|\n|[333c5b5](https://git.sagemath.org/sage.git/commit/?id=333c5b5668b7290f074bcf65fc421a58a3cd74eb)|`build/bin/sage-spkg: Accept installation tree as an optional argument, like sage-spkg-uninstall`|",
    "created_at": "2020-11-30T03:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605577",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
|[8ef2508](https://git.sagemath.org/sage.git/commit/?id=8ef2508a1db39fbbf85e774e4544619494483dc7)|`Merge tag '9.3.beta2' into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|
|[333c5b5](https://git.sagemath.org/sage.git/commit/?id=333c5b5668b7290f074bcf65fc421a58a3cd74eb)|`build/bin/sage-spkg: Accept installation tree as an optional argument, like sage-spkg-uninstall`|



---

archive/issue_comments_605578.json:
```json
{
    "body": "Changing commit from \"a713c390686ce8da37f0c0268059d3b522c0d0d3\" to \"333c5b5668b7290f074bcf65fc421a58a3cd74eb\"",
    "created_at": "2020-11-30T03:00:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605578",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a713c390686ce8da37f0c0268059d3b522c0d0d3" to "333c5b5668b7290f074bcf65fc421a58a3cd74eb"



---

archive/issue_comments_605579.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,9 @@\n-This is for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.\n+We handle a new optional argument to `sage-spkg`, which sets the installation tree - the new variable `SAGE_INST_LOCAL` (default:  `$SAGE_LOCAL`) for the package installation scripts.  (The script `sage-spkg-uninstall` already accepts this optional argument.)\n \n-`Makefile` would set `SAGE_INST_LOCAL=$SAGE_VENV` for these packages.  This will in particular set the installation location of installation records to `$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}`.\n+We also move the definition of `SAGE_SPKG_INST` and `SAGE_SPKG_WHEELS` out of `build/bin/install` into `sage-spkg` (and into `Makefile.in` for script packages). This is so that they can depend on `SAGE_INST_LOCAL`.\n+\n+Thus, the installation location of the installation records now depends on the installation tree - it is `$SAGE_INST_LOCAL/var/lib/sage/{installed,scripts,wheels}`.\n+\n+This is preparation for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.\n \n \n-\n``````\n",
    "created_at": "2020-11-30T03:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605579",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,9 @@
-This is for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.
+We handle a new optional argument to `sage-spkg`, which sets the installation tree - the new variable `SAGE_INST_LOCAL` (default:  `$SAGE_LOCAL`) for the package installation scripts.  (The script `sage-spkg-uninstall` already accepts this optional argument.)
 
-`Makefile` would set `SAGE_INST_LOCAL=$SAGE_VENV` for these packages.  This will in particular set the installation location of installation records to `$SAGE_VENV/var/lib/sage/{installed,scripts,wheels}`.
+We also move the definition of `SAGE_SPKG_INST` and `SAGE_SPKG_WHEELS` out of `build/bin/install` into `sage-spkg` (and into `Makefile.in` for script packages). This is so that they can depend on `SAGE_INST_LOCAL`.
+
+Thus, the installation location of the installation records now depends on the installation tree - it is `$SAGE_INST_LOCAL/var/lib/sage/{installed,scripts,wheels}`.
+
+This is preparation for #29013 - which proposes to install Python packages in `$SAGE_VENV` instead of `$SAGE_LOCAL`.
 
 
-
``````




---

archive/issue_comments_605580.json:
```json
{
    "body": "Changing dependencies from \"#29500, #29386, #30657\" to \"\"",
    "created_at": "2020-11-30T03:08:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605580",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#29500, #29386, #30657" to ""



---

archive/issue_comments_605581.json:
```json
{
    "body": "Changing commit from \"333c5b5668b7290f074bcf65fc421a58a3cd74eb\" to \"dbbd614955b84bb7379f5222b3717051abc8ab14\"",
    "created_at": "2020-11-30T03:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605581",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "333c5b5668b7290f074bcf65fc421a58a3cd74eb" to "dbbd614955b84bb7379f5222b3717051abc8ab14"



---

archive/issue_comments_605582.json:
```json
{
    "body": "<a id='comment:11'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|\n|[dbbd614](https://git.sagemath.org/sage.git/commit/?id=dbbd614955b84bb7379f5222b3717051abc8ab14)|`build/bin/sage-spkg: From bash -x back to bash`|",
    "created_at": "2020-11-30T03:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------|
|[dbbd614](https://git.sagemath.org/sage.git/commit/?id=dbbd614955b84bb7379f5222b3717051abc8ab14)|`build/bin/sage-spkg: From bash -x back to bash`|



---

archive/issue_comments_605583.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-30T03:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605583",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_605584.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-11-30T03:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605584",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_605585.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[cb15169](https://git.sagemath.org/sage.git/commit/?id=cb151691167c0317214ddc4657ea5efc2691776c)|`Makefile, build/make/Makefile.in: Fix 'make list'`|",
    "created_at": "2020-11-30T04:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605585",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[cb15169](https://git.sagemath.org/sage.git/commit/?id=cb151691167c0317214ddc4657ea5efc2691776c)|`Makefile, build/make/Makefile.in: Fix 'make list'`|



---

archive/issue_comments_605586.json:
```json
{
    "body": "Changing commit from \"dbbd614955b84bb7379f5222b3717051abc8ab14\" to \"cb151691167c0317214ddc4657ea5efc2691776c\"",
    "created_at": "2020-11-30T04:49:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605586",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dbbd614955b84bb7379f5222b3717051abc8ab14" to "cb151691167c0317214ddc4657ea5efc2691776c"



---

archive/issue_comments_605587.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-30T04:50:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605587",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_605588.json:
```json
{
    "body": "Changing reviewer from \"\" to \"https://github.com/kliem/sage/pull/29/checks\"",
    "created_at": "2020-12-04T08:14:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605588",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "" to "https://github.com/kliem/sage/pull/29/checks"



---

archive/issue_comments_605589.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd111\".",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605589",
    "user": "https://github.com/mkoeppe"
}
```

Changing keywords from "" to "sd111".



---

archive/issue_comments_605590.json:
```json
{
    "body": "<a id='comment:18'></a>\nHoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111",
    "created_at": "2020-12-06T18:17:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605590",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Hoping we can make progress on this ticket this week - https://wiki.sagemath.org/days111



---

archive/issue_comments_605591.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-07T07:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605591",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_605592.json:
```json
{
    "body": "Changing reviewer from \"https://github.com/kliem/sage/pull/29/checks\" to \"Jonathan Kliem\"",
    "created_at": "2020-12-07T07:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605592",
    "user": "https://github.com/kliem"
}
```

Changing reviewer from "https://github.com/kliem/sage/pull/29/checks" to "Jonathan Kliem"



---

archive/issue_comments_605593.json:
```json
{
    "body": "<a id='comment:19'></a>\nLGTM.",
    "created_at": "2020-12-07T07:10:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605593",
    "user": "https://github.com/kliem"
}
```

<a id='comment:19'></a>
LGTM.



---

archive/issue_comments_605594.json:
```json
{
    "body": "<a id='comment:20'></a>\nThank you!",
    "created_at": "2020-12-07T07:16:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605594",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>
Thank you!



---

archive/issue_comments_605595.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-12-13T00:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605595",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_605596.json:
```json
{
    "body": "<a id='comment:21'></a>\nMerge conflict",
    "created_at": "2020-12-13T00:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605596",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:21'></a>
Merge conflict



---

archive/issue_comments_605597.json:
```json
{
    "body": "Changing work_issues from \"\" to \"merge #30375\"",
    "created_at": "2020-12-13T01:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605597",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "" to "merge #30375"



---

archive/issue_comments_605598.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n|                                                                                                                                           |                                                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|\n|[9c5e8a2](https://git.sagemath.org/sage.git/commit/?id=9c5e8a245aae24288d3a922666c3abbe41a44747)|`add references to `bin/sage-build-env` and `bin/sage-build-env-config``|\n|[4b8933b](https://git.sagemath.org/sage.git/commit/?id=4b8933b0aec03722e34fa1a6d2573a22c3edfedc)|`remove incorrect `$` in `build/bin/sage-build-env``|\n|[071b8cc](https://git.sagemath.org/sage.git/commit/?id=071b8ccc520b1b1c6b419465da76a26cec99f694)|`Revert \"add references to `bin/sage-build-env` and `bin/sage-build-env-config`\"`|\n|[c51e752](https://git.sagemath.org/sage.git/commit/?id=c51e752495cf323c27f089c2cd2d870fbd3abad6)|`correct comments to makefile`|\n|[aa7ecd6](https://git.sagemath.org/sage.git/commit/?id=aa7ecd6ef0fd94e9d3a42c1c496f2138cc76fc91)|`fix that we might have changed $FCFLAGS during configure`|\n|[94326db](https://git.sagemath.org/sage.git/commit/?id=94326db15e38576990696e59347cb857a5ecb73e)|`better solution for dealing with -ffree-form`|\n|[87dae61](https://git.sagemath.org/sage.git/commit/?id=87dae61577f33d1572ae140ee32fe32b3470e7d4)|`keep FCFLAGS during gfortran configure`|\n|[7577dd4](https://git.sagemath.org/sage.git/commit/?id=7577dd41f29981722e970606664cfc8651b6a6bb)|`added quotes`|\n|[3bb3099](https://git.sagemath.org/sage.git/commit/?id=3bb309944b7e8542b2ac88ed3c9d9a60e68644d7)|`prepare preciouos variables`|\n|[9c9b3bf](https://git.sagemath.org/sage.git/commit/?id=9c9b3bf8a52544285935dac66e0589769bac363c)|`Merge commit '3bb309944b7e8542b2ac88ed3c9d9a60e68644d7' of git://trac.sagemath.org/sage into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|",
    "created_at": "2020-12-13T21:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605598",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
|                                                                                                                                           |                                                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------|
|[9c5e8a2](https://git.sagemath.org/sage.git/commit/?id=9c5e8a245aae24288d3a922666c3abbe41a44747)|`add references to `bin/sage-build-env` and `bin/sage-build-env-config``|
|[4b8933b](https://git.sagemath.org/sage.git/commit/?id=4b8933b0aec03722e34fa1a6d2573a22c3edfedc)|`remove incorrect `$` in `build/bin/sage-build-env``|
|[071b8cc](https://git.sagemath.org/sage.git/commit/?id=071b8ccc520b1b1c6b419465da76a26cec99f694)|`Revert "add references to `bin/sage-build-env` and `bin/sage-build-env-config`"`|
|[c51e752](https://git.sagemath.org/sage.git/commit/?id=c51e752495cf323c27f089c2cd2d870fbd3abad6)|`correct comments to makefile`|
|[aa7ecd6](https://git.sagemath.org/sage.git/commit/?id=aa7ecd6ef0fd94e9d3a42c1c496f2138cc76fc91)|`fix that we might have changed $FCFLAGS during configure`|
|[94326db](https://git.sagemath.org/sage.git/commit/?id=94326db15e38576990696e59347cb857a5ecb73e)|`better solution for dealing with -ffree-form`|
|[87dae61](https://git.sagemath.org/sage.git/commit/?id=87dae61577f33d1572ae140ee32fe32b3470e7d4)|`keep FCFLAGS during gfortran configure`|
|[7577dd4](https://git.sagemath.org/sage.git/commit/?id=7577dd41f29981722e970606664cfc8651b6a6bb)|`added quotes`|
|[3bb3099](https://git.sagemath.org/sage.git/commit/?id=3bb309944b7e8542b2ac88ed3c9d9a60e68644d7)|`prepare preciouos variables`|
|[9c9b3bf](https://git.sagemath.org/sage.git/commit/?id=9c9b3bf8a52544285935dac66e0589769bac363c)|`Merge commit '3bb309944b7e8542b2ac88ed3c9d9a60e68644d7' of git://trac.sagemath.org/sage into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|



---

archive/issue_comments_605599.json:
```json
{
    "body": "Changing commit from \"cb151691167c0317214ddc4657ea5efc2691776c\" to \"9c9b3bf8a52544285935dac66e0589769bac363c\"",
    "created_at": "2020-12-13T21:52:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605599",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cb151691167c0317214ddc4657ea5efc2691776c" to "9c9b3bf8a52544285935dac66e0589769bac363c"



---

archive/issue_comments_605600.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#30375\"",
    "created_at": "2020-12-13T22:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605600",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#30375"



---

archive/issue_comments_605601.json:
```json
{
    "body": "Changing work_issues from \"merge #30375\" to \"\"",
    "created_at": "2020-12-13T22:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605601",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "merge #30375" to ""



---

archive/issue_comments_605602.json:
```json
{
    "body": "<a id='comment:24'></a>\nMerged #30375",
    "created_at": "2020-12-13T22:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605602",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
Merged #30375



---

archive/issue_comments_605603.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-12-13T22:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605603",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_605604.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix\" to \"9c9b3bf8a52544285935dac66e0589769bac363c\"",
    "created_at": "2020-12-21T23:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605604",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix" to "9c9b3bf8a52544285935dac66e0589769bac363c"



---

archive/issue_events_079616.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-21T23:35:28Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30622#event-79616"
}
```



---

archive/issue_comments_605605.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-21T23:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605605",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_605606.json:
```json
{
    "body": "Changing branch from \"9c9b3bf8a52544285935dac66e0589769bac363c\" to \"u/mkoeppe/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix\"",
    "created_at": "2020-12-27T23:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605606",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "9c9b3bf8a52544285935dac66e0589769bac363c" to "u/mkoeppe/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix"



---

archive/issue_comments_605607.json:
```json
{
    "body": "<a id='comment:26'></a>\nBreaks making source tarballs:\n\n```\nSage version 9.3.beta5, release date 2020-12-27\nCloning into '/home/release/Sage/tmp/sage-9.3.beta5'...\ndone.\nEnumerating objects: 737573, done.\nCounting objects: 100% (737573/737573), done.\nDelta compression using up to 16 threads\nCompressing objects: 100% (702757/702757), done.\nWriting objects: 100% (737573/737573), done.\nTotal 737573 (delta 588187), reused 141018 (delta 0), pack-reused 0\nChecking connectivity: 737573, done.\nFinished cloning Sage sources\nMakefile:22: *** This Makefile needs to be invoked by build/make/install.  Stop.\nTraceback (most recent call last):\n  File \"/home/release/opt/bin/git-releasemgr\", line 16, in <module>\n    cmdline.launch()\n  File \"/home/release/opt/git-trac-command/git_trac/releasemgr/cmdline.py\", line 166, in launch\n    app.release(args.version, check=args.check)\n  File \"/home/release/opt/git-trac-command/git_trac/releasemgr/app.py\", line 315, in release\n    create_tarball()\n  File \"/home/release/opt/git-trac-command/git_trac/releasemgr/make_release.py\", line 15, in create_tarball\n    check_call(['sage', '-sdist'])\n  File \"/home/release/opt/conda/lib/python2.7/subprocess.py\", line 190, in check_call\n    raise CalledProcessError(retcode, cmd)\nsubprocess.CalledProcessError: Command '['sage', '-sdist']' returned non-zero exit status 2\n```",
    "created_at": "2020-12-27T23:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605607",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:26'></a>
Breaks making source tarballs:

```
Sage version 9.3.beta5, release date 2020-12-27
Cloning into '/home/release/Sage/tmp/sage-9.3.beta5'...
done.
Enumerating objects: 737573, done.
Counting objects: 100% (737573/737573), done.
Delta compression using up to 16 threads
Compressing objects: 100% (702757/702757), done.
Writing objects: 100% (737573/737573), done.
Total 737573 (delta 588187), reused 141018 (delta 0), pack-reused 0
Checking connectivity: 737573, done.
Finished cloning Sage sources
Makefile:22: *** This Makefile needs to be invoked by build/make/install.  Stop.
Traceback (most recent call last):
  File "/home/release/opt/bin/git-releasemgr", line 16, in <module>
    cmdline.launch()
  File "/home/release/opt/git-trac-command/git_trac/releasemgr/cmdline.py", line 166, in launch
    app.release(args.version, check=args.check)
  File "/home/release/opt/git-trac-command/git_trac/releasemgr/app.py", line 315, in release
    create_tarball()
  File "/home/release/opt/git-trac-command/git_trac/releasemgr/make_release.py", line 15, in create_tarball
    check_call(['sage', '-sdist'])
  File "/home/release/opt/conda/lib/python2.7/subprocess.py", line 190, in check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command '['sage', '-sdist']' returned non-zero exit status 2
```



---

archive/issue_comments_605608.json:
```json
{
    "body": "Changing status from closed to new.",
    "created_at": "2020-12-27T23:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605608",
    "user": "https://github.com/vbraun"
}
```

Changing status from closed to new.



---

archive/issue_events_079617.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-27T23:56:09Z",
    "event": "reopened",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30622#event-79617"
}
```



---

archive/issue_comments_605609.json:
```json
{
    "body": "Resolution changed from fixed to ",
    "created_at": "2020-12-27T23:56:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605609",
    "user": "https://github.com/vbraun"
}
```

Resolution changed from fixed to 



---

archive/issue_comments_605610.json:
```json
{
    "body": "<a id='comment:27'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                                                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|\n|[36e8f7d](https://git.sagemath.org/sage.git/commit/?id=36e8f7d02778f3d767bfb3a74980bc4ff979e65c)|`Merge tag '9.3.beta5' into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|\n|[062ef92](https://git.sagemath.org/sage.git/commit/?id=062ef926118ea779aec0af92530079f140f276bc)|`build/make/Makefile.in: Fix up 'make dist'`|",
    "created_at": "2020-12-28T04:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                                                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------|
|[36e8f7d](https://git.sagemath.org/sage.git/commit/?id=36e8f7d02778f3d767bfb3a74980bc4ff979e65c)|`Merge tag '9.3.beta5' into t/30622/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix`|
|[062ef92](https://git.sagemath.org/sage.git/commit/?id=062ef926118ea779aec0af92530079f140f276bc)|`build/make/Makefile.in: Fix up 'make dist'`|



---

archive/issue_comments_605611.json:
```json
{
    "body": "Changing commit from \"9c9b3bf8a52544285935dac66e0589769bac363c\" to \"062ef926118ea779aec0af92530079f140f276bc\"",
    "created_at": "2020-12-28T04:31:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9c9b3bf8a52544285935dac66e0589769bac363c" to "062ef926118ea779aec0af92530079f140f276bc"



---

archive/issue_comments_605612.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-12-28T04:32:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605612",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_605613.json:
```json
{
    "body": "Changing dependencies from \"#30375\" to \"\"",
    "created_at": "2020-12-28T04:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605613",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#30375" to ""



---

archive/issue_comments_605614.json:
```json
{
    "body": "<a id='comment:30'></a>\nThere is two small things that could be fixed along the way:\n- `make dist` does not appear in `make --help`.\n- `local/bin/sage-sdist` claims it should be called by `spkg/bin/sage`, but it is really run by `local/bin/sage`.\n\nThe error message `This Makefile needs to be invoked by build/make/install` seems strange, as there is at least one other legal way to call the Makefile, as we discovered here. If it is not included in the message, I think the comment should be more verbose.",
    "created_at": "2020-12-28T07:07:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605614",
    "user": "https://github.com/kliem"
}
```

<a id='comment:30'></a>
There is two small things that could be fixed along the way:
- `make dist` does not appear in `make --help`.
- `local/bin/sage-sdist` claims it should be called by `spkg/bin/sage`, but it is really run by `local/bin/sage`.

The error message `This Makefile needs to be invoked by build/make/install` seems strange, as there is at least one other legal way to call the Makefile, as we discovered here. If it is not included in the message, I think the comment should be more verbose.



---

archive/issue_comments_605615.json:
```json
{
    "body": "<a id='comment:31'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[6eb8f26](https://git.sagemath.org/sage.git/commit/?id=6eb8f26b9edfa806c8b5e2453d6b6f6e0f54b5ab)|`build/bin/sage-sdist: Update file comment`|",
    "created_at": "2020-12-28T18:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[6eb8f26](https://git.sagemath.org/sage.git/commit/?id=6eb8f26b9edfa806c8b5e2453d6b6f6e0f54b5ab)|`build/bin/sage-sdist: Update file comment`|



---

archive/issue_comments_605616.json:
```json
{
    "body": "Changing commit from \"062ef926118ea779aec0af92530079f140f276bc\" to \"6eb8f26b9edfa806c8b5e2453d6b6f6e0f54b5ab\"",
    "created_at": "2020-12-28T18:19:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605616",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "062ef926118ea779aec0af92530079f140f276bc" to "6eb8f26b9edfa806c8b5e2453d6b6f6e0f54b5ab"



---

archive/issue_comments_605617.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [gh-kliem](#comment%3A30):\n> There is two small things that could be fixed along the way:\n> - `make dist` does not appear in `make --help`.\n\n\nMy version of `make` here on macOS does not list any targets on `make --help`. In any case, beyond the scope of the ticket.\n\n> - `local/bin/sage-sdist` claims it should be called by `spkg/bin/sage`, but it is really run by `local/bin/sage`.\n\n\nUpdated.",
    "created_at": "2020-12-28T18:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605617",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
Replying to [gh-kliem](#comment%3A30):
> There is two small things that could be fixed along the way:
> - `make dist` does not appear in `make --help`.


My version of `make` here on macOS does not list any targets on `make --help`. In any case, beyond the scope of the ticket.

> - `local/bin/sage-sdist` claims it should be called by `spkg/bin/sage`, but it is really run by `local/bin/sage`.


Updated.



---

archive/issue_comments_605618.json:
```json
{
    "body": "Changing commit from \"6eb8f26b9edfa806c8b5e2453d6b6f6e0f54b5ab\" to \"7ea44f7f8faf65d0061d97b53a53e73151716d94\"",
    "created_at": "2020-12-28T18:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605618",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "6eb8f26b9edfa806c8b5e2453d6b6f6e0f54b5ab" to "7ea44f7f8faf65d0061d97b53a53e73151716d94"



---

archive/issue_comments_605619.json:
```json
{
    "body": "<a id='comment:33'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[7ea44f7](https://git.sagemath.org/sage.git/commit/?id=7ea44f7f8faf65d0061d97b53a53e73151716d94)|`build/make/Makefile.in: Expand comment`|",
    "created_at": "2020-12-28T18:22:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605619",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[7ea44f7](https://git.sagemath.org/sage.git/commit/?id=7ea44f7f8faf65d0061d97b53a53e73151716d94)|`build/make/Makefile.in: Expand comment`|



---

archive/issue_comments_605620.json:
```json
{
    "body": "<a id='comment:34'></a>\nBack to positive review.",
    "created_at": "2020-12-29T08:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605620",
    "user": "https://github.com/kliem"
}
```

<a id='comment:34'></a>
Back to positive review.



---

archive/issue_comments_605621.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-12-29T08:48:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605621",
    "user": "https://github.com/kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_605622.json:
```json
{
    "body": "<a id='comment:35'></a>\nThanks.",
    "created_at": "2020-12-29T18:21:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605622",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>
Thanks.



---

archive/issue_comments_605623.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-03T12:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605623",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_605624.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix\" to \"7ea44f7f8faf65d0061d97b53a53e73151716d94\"",
    "created_at": "2021-01-03T12:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605624",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mkoeppe/build_bin_sage_spkg__allow_overriding_sage_local_by_sage_spkg_prefix" to "7ea44f7f8faf65d0061d97b53a53e73151716d94"



---

archive/issue_events_079618.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-03T12:15:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30622#event-79618"
}
```



---

archive/issue_comments_605625.json:
```json
{
    "body": "<a id='comment:37'></a>\nApparently we broke `sage -b` with this ticket.",
    "created_at": "2021-01-19T08:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605625",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>
Apparently we broke `sage -b` with this ticket.



---

archive/issue_comments_605626.json:
```json
{
    "body": "Changing commit from \"7ea44f7f8faf65d0061d97b53a53e73151716d94\" to \"\"",
    "created_at": "2021-01-19T08:27:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30622",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30622#issuecomment-605626",
    "user": "https://github.com/kliem"
}
```

Changing commit from "7ea44f7f8faf65d0061d97b53a53e73151716d94" to ""
