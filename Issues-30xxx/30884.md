# Issue 30884: Replace sage_wraps by decorator library

archive/issues_030647.json:
```json
{
    "body": "Replace the sage custom sage_wrap and decorator_defaults methods by the well-maintained decorator library https://github.com/micheles/decorator.\n\nMy motivation is to replace sage's autodoc sphinx extension with the built-in one. For this, the Phyton introspection code needs to work without sage's customization. This ticket is a first step towards this goal. But independently of this motivation the approach using decorator library already provides cleaner code and better introspection results with respect to annotations (e.g. typing information). See the following test script for a comparison:\n\n```\nimport inspect\nfrom pathlib import Path\nfrom sage.misc.decorators import decorator_keywords, sage_wraps\nfrom decorator import decorator, getfullargspec\nfrom sage.misc.sageinspect import sage_getargspec\n\n@decorator\ndef warn_slow(func, timelimit=60, *args, **kw):\n    print('%s took %d seconds', func.__name__, timelimit)\n    return func(*args, **kw)\n\n@warn_slow\ndef preprocess_input_files(inputdir: Path, tempdir):\n    pass\n\n@warn_slow(timelimit=600)\ndef run_calculation(tempdir, outdir):\n    pass\n\nprint(\"With decorator\")\nprint(getfullargspec(preprocess_input_files))\n# FullArgSpec(args=['inputdir', 'tempdir'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={'inputdir': <class 'pathlib.Path'>})\nprint(inspect.getfullargspec(preprocess_input_files))\n# FullArgSpec(args=['inputdir', 'tempdir'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={'inputdir': <class 'pathlib.Path'>})\n# !! Yields full information as expected\nprint(sage_getargspec(preprocess_input_files))\n# ArgSpec(args=['inputdir', 'tempdir'], varargs=None, keywords=None, defaults=None)\n# !! No annotation information\nprint(getfullargspec(run_calculation))\n# FullArgSpec(args=['tempdir', 'outdir'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})\nprint(inspect.getfullargspec(run_calculation))\n# FullArgSpec(args=['tempdir', 'outdir'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})\nprint(sage_getargspec(preprocess_input_files))\n# ArgSpec(args=['inputdir', 'tempdir'], varargs=None, keywords=None, defaults=None)\n\n@decorator_keywords\ndef warn_slow_sage(func=None, timelimit=60):\n     @sage_wraps(func)\n     def wrapper(*args, **kwargs):\n         print('%s took %d seconds', func.__name__, timelimit)\n         return func(*args, **kw)\n     return wrapper\n\n@warn_slow_sage\ndef preprocess_input_files_sage(inputdir: Path, tempdir):\n    pass\n\n@warn_slow_sage(timelimit=600)\ndef run_calculation_sage(tempdir, outdir):\n    pass\n\nprint(\"With sage\")\nprint(getfullargspec(preprocess_input_files_sage))\n# FullArgSpec(args=[], varargs='args', varkw='kwargs', defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})\nprint(inspect.getfullargspec(preprocess_input_files_sage))\n# FullArgSpec(args=[], varargs='args', varkw='kwargs', defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})\n# !! No args nor annotation\nprint(sage_getargspec(preprocess_input_files_sage))\n# ArgSpec(args=['inputdir', 'tempdir'], varargs=None, keywords=None, defaults=None)\nprint(getfullargspec(run_calculation_sage))\n# !! No annotation info\n# FullArgSpec(args=[], varargs='args', varkw='kwargs', defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})\nprint(inspect.getfullargspec(run_calculation_sage))\n# FullArgSpec(args=[], varargs='args', varkw='kwargs', defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})\nprint(sage_getargspec(preprocess_input_files_sage))\n# ArgSpec(args=['inputdir', 'tempdir'], varargs=None, keywords=None, defaults=None)\n```\n\nReplacing `sage_getargspec` with `inspect.getfullargspec` will be done in a follow-up ticket (as this is already big enough).\n\n\nTodo (as follow-up): Migrate cachefunction etc to decorator framework. The documentation https://github.com/micheles/decorator/blob/master/docs/documentation.md#the-solution contains an example (memoize) of how this may look like.\n\nCC:  @mkoeppe @kwankyu\n\nWork_Issues: Fix patchbot warnings\n\nAuthor: Tobias Diez\n\nBranch: public/documentation/replaceDecorator\n\nStatus: needs_work\n\nDependencies: #26254\n\nCommit: 1b656a3b28cc8aa2fb530783f53f05be79846dc7\n\nIssue created by migration from https://trac.sagemath.org/ticket/30884\n\n",
    "created_at": "2020-11-10T23:42:18Z",
    "labels": [
        "component: doctest framework"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Replace sage_wraps by decorator library",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30884",
    "user": "https://github.com/tobiasdiez"
}
```
Replace the sage custom sage_wrap and decorator_defaults methods by the well-maintained decorator library https://github.com/micheles/decorator.

My motivation is to replace sage's autodoc sphinx extension with the built-in one. For this, the Phyton introspection code needs to work without sage's customization. This ticket is a first step towards this goal. But independently of this motivation the approach using decorator library already provides cleaner code and better introspection results with respect to annotations (e.g. typing information). See the following test script for a comparison:

```
import inspect
from pathlib import Path
from sage.misc.decorators import decorator_keywords, sage_wraps
from decorator import decorator, getfullargspec
from sage.misc.sageinspect import sage_getargspec

@decorator
def warn_slow(func, timelimit=60, *args, **kw):
    print('%s took %d seconds', func.__name__, timelimit)
    return func(*args, **kw)

@warn_slow
def preprocess_input_files(inputdir: Path, tempdir):
    pass

@warn_slow(timelimit=600)
def run_calculation(tempdir, outdir):
    pass

print("With decorator")
print(getfullargspec(preprocess_input_files))
# FullArgSpec(args=['inputdir', 'tempdir'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={'inputdir': <class 'pathlib.Path'>})
print(inspect.getfullargspec(preprocess_input_files))
# FullArgSpec(args=['inputdir', 'tempdir'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={'inputdir': <class 'pathlib.Path'>})
# !! Yields full information as expected
print(sage_getargspec(preprocess_input_files))
# ArgSpec(args=['inputdir', 'tempdir'], varargs=None, keywords=None, defaults=None)
# !! No annotation information
print(getfullargspec(run_calculation))
# FullArgSpec(args=['tempdir', 'outdir'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})
print(inspect.getfullargspec(run_calculation))
# FullArgSpec(args=['tempdir', 'outdir'], varargs=None, varkw=None, defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})
print(sage_getargspec(preprocess_input_files))
# ArgSpec(args=['inputdir', 'tempdir'], varargs=None, keywords=None, defaults=None)

@decorator_keywords
def warn_slow_sage(func=None, timelimit=60):
     @sage_wraps(func)
     def wrapper(*args, **kwargs):
         print('%s took %d seconds', func.__name__, timelimit)
         return func(*args, **kw)
     return wrapper

@warn_slow_sage
def preprocess_input_files_sage(inputdir: Path, tempdir):
    pass

@warn_slow_sage(timelimit=600)
def run_calculation_sage(tempdir, outdir):
    pass

print("With sage")
print(getfullargspec(preprocess_input_files_sage))
# FullArgSpec(args=[], varargs='args', varkw='kwargs', defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})
print(inspect.getfullargspec(preprocess_input_files_sage))
# FullArgSpec(args=[], varargs='args', varkw='kwargs', defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})
# !! No args nor annotation
print(sage_getargspec(preprocess_input_files_sage))
# ArgSpec(args=['inputdir', 'tempdir'], varargs=None, keywords=None, defaults=None)
print(getfullargspec(run_calculation_sage))
# !! No annotation info
# FullArgSpec(args=[], varargs='args', varkw='kwargs', defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})
print(inspect.getfullargspec(run_calculation_sage))
# FullArgSpec(args=[], varargs='args', varkw='kwargs', defaults=None, kwonlyargs=[], kwonlydefaults=None, annotations={})
print(sage_getargspec(preprocess_input_files_sage))
# ArgSpec(args=['inputdir', 'tempdir'], varargs=None, keywords=None, defaults=None)
```

Replacing `sage_getargspec` with `inspect.getfullargspec` will be done in a follow-up ticket (as this is already big enough).


Todo (as follow-up): Migrate cachefunction etc to decorator framework. The documentation https://github.com/micheles/decorator/blob/master/docs/documentation.md#the-solution contains an example (memoize) of how this may look like.

CC:  @mkoeppe @kwankyu

Work_Issues: Fix patchbot warnings

Author: Tobias Diez

Branch: public/documentation/replaceDecorator

Status: needs_work

Dependencies: #26254

Commit: 1b656a3b28cc8aa2fb530783f53f05be79846dc7

Issue created by migration from https://trac.sagemath.org/ticket/30884





---

archive/issue_comments_467318.json:
```json
{
    "body": "<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-10T23:50:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467318",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:1'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467319.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-10T23:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467319",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467320.json:
```json
{
    "body": "<a id='comment:3'></a>Functions such as `sage_wraps` cannot just be removed, as they may be used by user code. They need to go through deprecation",
    "created_at": "2020-11-11T00:08:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467320",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>Functions such as `sage_wraps` cannot just be removed, as they may be used by user code. They need to go through deprecation



---

archive/issue_comments_467321.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T15:52:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467321",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467322.json:
```json
{
    "body": "<a id='comment:5'></a>Good to know! I've readded and marked as deprecated them.\n\nThis should be now ready for review.",
    "created_at": "2020-11-11T15:53:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467322",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:5'></a>Good to know! I've readded and marked as deprecated them.

This should be now ready for review.



---

archive/issue_comments_467323.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-11T15:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467323",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_467324.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2020-11-11T15:54:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467324",
    "user": "https://github.com/tobiasdiez"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_467325.json:
```json
{
    "body": "<a id='comment:8'></a>Better squash changes like this so that `git blame` is more accurate",
    "created_at": "2020-11-11T16:43:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467325",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>Better squash changes like this so that `git blame` is more accurate



---

archive/issue_comments_467326.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2020-11-11T16:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467326",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_467327.json:
```json
{
    "body": "<a id='comment:9'></a>Does the `decorator` library really misspell `decorator` as `decorater`?",
    "created_at": "2020-11-11T16:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467327",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>Does the `decorator` library really misspell `decorator` as `decorater`?



---

archive/issue_comments_467328.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T16:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467328",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467329.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T17:02:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467329",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467330.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 mkoeppe]:\n> Does the `decorator` library really misspell `decorator` as `decorater`?\n\n\nNo of course not. That was a result of some last minute changes on my side. Fixed now.\n\n---\nNew commits:",
    "created_at": "2020-11-11T17:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467330",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:12'></a>Replying to [comment:9 mkoeppe]:
> Does the `decorator` library really misspell `decorator` as `decorater`?


No of course not. That was a result of some last minute changes on my side. Fixed now.

---
New commits:



---

archive/issue_comments_467331.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2020-11-11T17:03:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467331",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_467332.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-11-11T17:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467332",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_467333.json:
```json
{
    "body": "<a id='comment:15'></a>Can you explain the purpose of the change\n\n```diff\ndiff --git a/src/sage_setup/docbuild/__init__.py b/src/sage_setup/docbuild/__init__.py\nindex b07e9c1..a4ba68e 100644\n--- a/src/sage_setup/docbuild/__init__.py\n+++ b/src/sage_setup/docbuild/__init__.py\n@@ -564,7 +564,7 @@ class ReferenceBuilder(AllBuilder):\n             if not os.path.exists(refdir):\n                 continue\n             logger.info('Building bibliography')\n-            self._build_bibliography(lang, format, *args, **kwds)\n+            #self._build_bibliography(lang, format, *args, **kwds)\n             logger.info('Bibliography finished, building dependent manuals')\n             self._build_everything_except_bibliography(lang, format, *args, **kwds)\n             # The html refman must be build at the end to ensure correct\n```\n?",
    "created_at": "2020-11-11T18:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467333",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:15'></a>Can you explain the purpose of the change

```diff
diff --git a/src/sage_setup/docbuild/__init__.py b/src/sage_setup/docbuild/__init__.py
index b07e9c1..a4ba68e 100644
--- a/src/sage_setup/docbuild/__init__.py
+++ b/src/sage_setup/docbuild/__init__.py
@@ -564,7 +564,7 @@ class ReferenceBuilder(AllBuilder):
             if not os.path.exists(refdir):
                 continue
             logger.info('Building bibliography')
-            self._build_bibliography(lang, format, *args, **kwds)
+            #self._build_bibliography(lang, format, *args, **kwds)
             logger.info('Bibliography finished, building dependent manuals')
             self._build_everything_except_bibliography(lang, format, *args, **kwds)
             # The html refman must be build at the end to ensure correct
```
?



---

archive/issue_comments_467334.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T19:10:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467334",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467335.json:
```json
{
    "body": "<a id='comment:17'></a>That's only a temporary fix (that I accidentally committed) since I don't have latex installed.",
    "created_at": "2020-11-11T19:11:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467335",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:17'></a>That's only a temporary fix (that I accidentally committed) since I don't have latex installed.



---

archive/issue_comments_467336.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T20:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467336",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467337.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T21:53:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467337",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467338.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-11T22:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467338",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467339.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-12T08:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467339",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467340.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-12T09:17:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467340",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467341.json:
```json
{
    "body": "<a id='comment:23'></a>What's the status of this ticket? Just came across a `sage_getargspec` bug (#31309), so it would be great if we can get rid of it",
    "created_at": "2021-01-31T07:31:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467341",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>What's the status of this ticket? Just came across a `sage_getargspec` bug (#31309), so it would be great if we can get rid of it



---

archive/issue_comments_467342.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-02T17:22:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467342",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467343.json:
```json
{
    "body": "<a id='comment:25'></a>It is working in principle, but I still need to fix a few things here and there. The biggest problem is that there are some changes to cython files needed, for which it would be really handy if we could get #30371 merged.",
    "created_at": "2021-02-02T17:24:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467343",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:25'></a>It is working in principle, but I still need to fix a few things here and there. The biggest problem is that there are some changes to cython files needed, for which it would be really handy if we could get #30371 merged.



---

archive/issue_events_080601.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-03-15T22:07:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80601"
}
```



---

archive/issue_comments_467344.json:
```json
{
    "body": "<a id='comment:26'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467344",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_080602.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80602"
}
```



---

archive/issue_events_080603.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80603"
}
```



---

archive/issue_comments_467345.json:
```json
{
    "body": "<a id='comment:27'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467345",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_467346.json:
```json
{
    "body": "<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-11-28T20:00:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467346",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_080604.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80604"
}
```



---

archive/issue_events_080605.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80605"
}
```



---

archive/issue_comments_467347.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-01-08T12:17:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467347",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467348.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-01-08T12:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467348",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_467349.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -73,6 +73,9 @@\n \n Replacing \\`sage_getargspec\\` with \\`inspect.getfullargspec\\` will be done in a follow-up ticket (as this is already big enough).\n \n+\n+Todo (as follow-up): Migrate cachefunction etc to decorator framework. The documentation https://github.com/micheles/decorator/blob/master/docs/documentation.md#the-solution contains an example (memoize) of how this may look like.\n+\n Work_Issues: Fix patchbot warnings\n \n Author: Tobias Diez\n```\n",
    "created_at": "2022-01-08T12:56:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30884#issuecomment-467349",
    "user": "https://github.com/tobiasdiez"
}
```

Description changed:
```diff
--- 
+++ 
@@ -73,6 +73,9 @@
 
 Replacing \`sage_getargspec\` with \`inspect.getfullargspec\` will be done in a follow-up ticket (as this is already big enough).
 
+
+Todo (as follow-up): Migrate cachefunction etc to decorator framework. The documentation https://github.com/micheles/decorator/blob/master/docs/documentation.md#the-solution contains an example (memoize) of how this may look like.
+
 Work_Issues: Fix patchbot warnings
 
 Author: Tobias Diez
```




---

archive/issue_events_080606.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80606"
}
```



---

archive/issue_events_080607.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80607"
}
```



---

archive/issue_events_080608.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80608"
}
```



---

archive/issue_events_080609.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30884",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30884#event-80609"
}
```
