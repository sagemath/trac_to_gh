# Issue 30989: add some typing information to interval-posets

archive/issues_030752.json:
```json
{
    "assignees": [],
    "body": "just as a little experiment\n\nCC:  @tobiasdiez\n\nBranch/Commit: **[2272bc3](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**\n\nReviewer: **Tobias Diez**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30989_\n\n",
    "closed_at": "2020-12-21T23:35:22Z",
    "created_at": "2020-12-01T13:09:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "add some typing information to interval-posets",
    "type": "issue",
    "updated_at": "2020-12-21T23:35:22Z",
    "url": "https://github.com/sagemath/sage/issues/30989",
    "user": "https://github.com/fchapoton"
}
```
just as a little experiment

CC:  @tobiasdiez

Branch/Commit: **[2272bc3](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**

Reviewer: **Tobias Diez**

Author: **Frédéric Chapoton**

_Issue created by migration from https://trac.sagemath.org/ticket/30989_





---

archive/issue_events_395196.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395196"
}
```



---

archive/issue_events_395197.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "component: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395197"
}
```



---

archive/issue_events_395198.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395198"
}
```



---

archive/issue_events_395199.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395199"
}
```



---

archive/issue_comments_499516.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf\">99c5273</a></td><td><code>add some basic typing information to Tamari interval posets</code></td></tr></table>\n",
    "created_at": "2020-12-01T13:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499516",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'>Comment 1:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf">99c5273</a></td><td><code>add some basic typing information to Tamari interval posets</code></td></tr></table>




---

archive/issue_events_395200.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395200"
}
```



---

archive/issue_comments_499517.json:
```json
{
    "body": "Branch: **[u/chapoton/30989](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30989)**",
    "created_at": "2020-12-01T13:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499517",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/30989](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30989)**



---

archive/issue_comments_499518.json:
```json
{
    "body": "Commit: **[99c5273](https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf)**",
    "created_at": "2020-12-01T13:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499518",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[99c5273](https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf)**



---

archive/issue_comments_499519.json:
```json
{
    "body": "Changed commit from **[99c5273](https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf)** to **[3d6644a](https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68)**",
    "created_at": "2020-12-01T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499519",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[99c5273](https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf)** to **[3d6644a](https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68)**



---

archive/issue_comments_499520.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68\">3d6644a</a></td><td><code>fix bad types</code></td></tr></table>\n",
    "created_at": "2020-12-01T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499520",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>Comment 2:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68">3d6644a</a></td><td><code>fix bad types</code></td></tr></table>




---

archive/issue_events_395201.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-01T19:21:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395201"
}
```



---

archive/issue_events_395202.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-01T19:21:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395202"
}
```



---

archive/issue_comments_499521.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nIn general, this looks good to me (I have admit I didn't went through the code in detail to check whether the added typing information is correct.)\n\nOne suggestion for improvement: for lists, tuple and iterators there are special typing annotation that allow to specify also the type of elements in these lists, e.g. https://docs.python.org/3/library/typing.html#typing.Iterator\nAfter `from `__future__` import annotations`, you can simply write `list[str]` for a list of strings.\n\nMoreover, it would be good to also annotate the method parameters. For example, https://github.com/microsoft/pyright/blob/master/docs/getting-started.md comments\n> The annotations that provide most value are on function input parameters, instance variables, and return parameters (in that order).",
    "created_at": "2020-12-01T19:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499521",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'>Comment 4:</a>
In general, this looks good to me (I have admit I didn't went through the code in detail to check whether the added typing information is correct.)

One suggestion for improvement: for lists, tuple and iterators there are special typing annotation that allow to specify also the type of elements in these lists, e.g. https://docs.python.org/3/library/typing.html#typing.Iterator
After `from `__future__` import annotations`, you can simply write `list[str]` for a list of strings.

Moreover, it would be good to also annotate the method parameters. For example, https://github.com/microsoft/pyright/blob/master/docs/getting-started.md comments
> The annotations that provide most value are on function input parameters, instance variables, and return parameters (in that order).



---

archive/issue_comments_499522.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4\">e1faf42</a></td><td><code>import annotations from future</code></td></tr></table>\n",
    "created_at": "2020-12-01T20:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499522",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:5'>Comment 5:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4">e1faf42</a></td><td><code>import annotations from future</code></td></tr></table>




---

archive/issue_comments_499523.json:
```json
{
    "body": "Changed commit from **[3d6644a](https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68)** to **[e1faf42](https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4)**",
    "created_at": "2020-12-01T20:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499523",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3d6644a](https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68)** to **[e1faf42](https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4)**



---

archive/issue_comments_499524.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nThanks for the hint.\n\nI think it would be slightly premature to add more typing here, without thinking in general about the relationship with the Parent/Element framework.",
    "created_at": "2020-12-01T20:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499524",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'>Comment 6:</a>
Thanks for the hint.

I think it would be slightly premature to add more typing here, without thinking in general about the relationship with the Parent/Element framework.



---

archive/issue_comments_499525.json:
```json
{
    "body": "Reviewer: **Tobias Diez**",
    "created_at": "2020-12-01T22:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499525",
    "user": "https://github.com/tobiasdiez"
}
```

Reviewer: **Tobias Diez**



---

archive/issue_comments_499526.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nSure, it's already better than no typing at all.\n\nFeel free to set it to \"positive review\" after the tests pass.",
    "created_at": "2020-12-01T22:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499526",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'>Comment 7:</a>
Sure, it's already better than no typing at all.

Feel free to set it to "positive review" after the tests pass.



---

archive/issue_comments_499527.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nok, thanks. For sure, only a first step.\n\nI was wondering how to add typing information explaining that the output type has the same \"Parent\" as self.",
    "created_at": "2020-12-02T07:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499527",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:8'>Comment 8:</a>
ok, thanks. For sure, only a first step.

I was wondering how to add typing information explaining that the output type has the same "Parent" as self.



---

archive/issue_events_395203.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-02T07:56:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395203"
}
```



---

archive/issue_events_395204.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-02T07:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395204"
}
```



---

archive/issue_comments_499528.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nReplying to [@fchapoton](#comment%3A8):\n> I was wondering how to add typing information explaining that the output type has the same \"Parent\" as self.\n\nIn general you can use `@overload` for methods to provide a more refined typing information depending on the type of the arguments, in particular, also of self.\nFor example,\n\n```\n    @overload\n    def method(self: 'MyClass', other: 'OtherClass') -> 'ReturnClass':\n        pass\n\n    def method(self: Any, other: Any) -> Any:\n        ....\n```\n\nThe category framework probably needs further work to be able to provide meaningful typing information. One way path would be to use generics. For example, [sage.categories.action.Action](https://doc.sagemath.org/html/en/reference/coercion/sage/categories/action.html) could be declared as\n\n```\nG = TypeVar('G') # possibly with some constraints\nS = TypeVar('S')\n\nclass Action(Generic[G, S]):\n\n   def __init__(G: G, S: S):\n       ....\n   \n   def actor(self) -> G:\n       ....\n\n   def codomain(self) -> S:\n       ...\n```",
    "created_at": "2020-12-02T11:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499528",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:10'>Comment 10:</a>
Replying to [@fchapoton](#comment%3A8):
> I was wondering how to add typing information explaining that the output type has the same "Parent" as self.

In general you can use `@overload` for methods to provide a more refined typing information depending on the type of the arguments, in particular, also of self.
For example,

```
    @overload
    def method(self: 'MyClass', other: 'OtherClass') -> 'ReturnClass':
        pass

    def method(self: Any, other: Any) -> Any:
        ....
```

The category framework probably needs further work to be able to provide meaningful typing information. One way path would be to use generics. For example, [sage.categories.action.Action](https://doc.sagemath.org/html/en/reference/coercion/sage/categories/action.html) could be declared as

```
G = TypeVar('G') # possibly with some constraints
S = TypeVar('S')

class Action(Generic[G, S]):

   def __init__(G: G, S: S):
       ....
   
   def actor(self) -> G:
       ....

   def codomain(self) -> S:
       ...
```



---

archive/issue_comments_499529.json:
```json
{
    "body": "Dependencies: **#30551**",
    "created_at": "2020-12-04T19:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499529",
    "user": "https://github.com/fchapoton"
}
```

Dependencies: **#30551**



---

archive/issue_comments_499530.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nTo my understanding, type annotations themselves are supported in Python 3.6. \n`from `__future__` import annotations` is for \"postponed evaluation of annotations\" (https://www.python.org/dev/peps/pep-0563/) \n\nI think the annotations added on this ticket do not need `from `__future__` import annotations` - so this line can be removed and the dependency can be dropped",
    "created_at": "2020-12-04T19:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499530",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'>Comment 12:</a>
To my understanding, type annotations themselves are supported in Python 3.6. 
`from `__future__` import annotations` is for "postponed evaluation of annotations" (https://www.python.org/dev/peps/pep-0563/) 

I think the annotations added on this ticket do not need `from `__future__` import annotations` - so this line can be removed and the dependency can be dropped



---

archive/issue_comments_499531.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88\">fdadfa8</a></td><td><code>add some basic typing information to Tamari interval posets</code></td></tr></table>\n",
    "created_at": "2020-12-05T08:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499531",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>Comment 13:</a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88">fdadfa8</a></td><td><code>add some basic typing information to Tamari interval posets</code></td></tr></table>




---

archive/issue_comments_499532.json:
```json
{
    "body": "Changed commit from **[e1faf42](https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4)** to **[fdadfa8](https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88)**",
    "created_at": "2020-12-05T08:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499532",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e1faf42](https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4)** to **[fdadfa8](https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88)**



---

archive/issue_events_395205.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-05T08:09:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395205"
}
```



---

archive/issue_events_395206.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-05T08:09:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395206"
}
```



---

archive/issue_comments_499533.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nok, here is a more basic annotation, without future import\n\nUsing python 3.8.5, I needed to change back `list[tuple]` to just `list`\n\nplease review again",
    "created_at": "2020-12-05T08:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499533",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'>Comment 14:</a>
ok, here is a more basic annotation, without future import

Using python 3.8.5, I needed to change back `list[tuple]` to just `list`

please review again



---

archive/issue_comments_499534.json:
```json
{
    "body": "Changed dependencies from **#30551** to none",
    "created_at": "2020-12-05T08:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499534",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#30551** to none



---

archive/issue_events_395207.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T12:41:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395207"
}
```



---

archive/issue_events_395208.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T12:41:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395208"
}
```



---

archive/issue_comments_499535.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nIf you don't want to use `__future__`, then you have to use `List[Tuple[...]]` from `typing`, and also sometimes wrap typing information in strings (e.g. so that you don't run into issues with forward references).\nI'm in favor of using the future import, since this can easily be migrated once only >= python 3.9 is supported (by simply removing the import).\n\nI think it's a good idea to specify the complete typing information, so also specify the type of the list items, i.e. `List[str]` instead of only `List`. Same for the iterator.",
    "created_at": "2020-12-05T12:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499535",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:15'>Comment 15:</a>
If you don't want to use `__future__`, then you have to use `List[Tuple[...]]` from `typing`, and also sometimes wrap typing information in strings (e.g. so that you don't run into issues with forward references).
I'm in favor of using the future import, since this can easily be migrated once only >= python 3.9 is supported (by simply removing the import).

I think it's a good idea to specify the complete typing information, so also specify the type of the list items, i.e. `List[str]` instead of only `List`. Same for the iterator.



---

archive/issue_comments_499536.json:
```json
{
    "body": "Changed commit from **[fdadfa8](https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88)** to **[e74fa70](https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557)**",
    "created_at": "2020-12-05T16:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499536",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fdadfa8](https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88)** to **[e74fa70](https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557)**



---

archive/issue_comments_499537.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557\">e74fa70</a></td><td><code>use List and Tuple</code></td></tr></table>\n",
    "created_at": "2020-12-05T16:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499537",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557">e74fa70</a></td><td><code>use List and Tuple</code></td></tr></table>




---

archive/issue_comments_499538.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nok, here is a commit for using List[Tuple]",
    "created_at": "2020-12-05T16:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499538",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'>Comment 17:</a>
ok, here is a commit for using List[Tuple]



---

archive/issue_events_395209.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-05T16:48:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395209"
}
```



---

archive/issue_events_395210.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-05T16:48:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395210"
}
```



---

archive/issue_comments_499539.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nThere are merged conflicts now.",
    "created_at": "2020-12-07T23:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499539",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:19'>Comment 19:</a>
There are merged conflicts now.



---

archive/issue_events_395211.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T23:34:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395211"
}
```



---

archive/issue_events_395212.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T23:34:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395212"
}
```



---

archive/issue_comments_499540.json:
```json
{
    "body": "Changed commit from **[e74fa70](https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557)** to **[2272bc3](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**",
    "created_at": "2020-12-08T08:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499540",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e74fa70](https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557)** to **[2272bc3](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**



---

archive/issue_comments_499541.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d\">2272bc3</a></td><td><code>Merge branch 'u/chapoton/30989' in 9.3.b3</code></td></tr></table>\n",
    "created_at": "2020-12-08T08:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499541",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'>Comment 20:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d">2272bc3</a></td><td><code>Merge branch 'u/chapoton/30989' in 9.3.b3</code></td></tr></table>




---

archive/issue_events_395213.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-08T08:01:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395213"
}
```



---

archive/issue_events_395214.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-08T08:01:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395214"
}
```



---

archive/issue_comments_499542.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nmerged",
    "created_at": "2020-12-08T08:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499542",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'>Comment 21:</a>
merged



---

archive/issue_comments_499543.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nLGTM. The patchbot fails, but the errors seem not relevant to the changes on the branch.",
    "created_at": "2020-12-08T12:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499543",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:22'>Comment 22:</a>
LGTM. The patchbot fails, but the errors seem not relevant to the changes on the branch.



---

archive/issue_events_395215.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T12:46:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395215"
}
```



---

archive/issue_events_395216.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T12:46:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395216"
}
```



---

archive/issue_events_395217.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-21T23:35:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395217"
}
```



---

archive/issue_events_395218.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b235baa8f3c46d857089d60a144a45b7f8ef3cbc",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-21T23:35:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-395218"
}
```



---

archive/issue_comments_499544.json:
```json
{
    "body": "Changed branch from **[u/chapoton/30989](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30989)** to **[2272bc3](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**",
    "created_at": "2020-12-21T23:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-499544",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/30989](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30989)** to **[2272bc3](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**
