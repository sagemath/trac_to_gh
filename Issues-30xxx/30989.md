# Issue 30989: add some typing information to interval-posets

archive/issues_030752.json:
```json
{
    "assignees": [],
    "body": "just as a little experiment\n\nCC:  @tobiasdiez\n\nBranch/Commit: **[`2272bc3`](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**\n\nReviewer: **Tobias Diez**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30989_\n\n",
    "closed_at": "2020-12-21T23:35:22Z",
    "created_at": "2020-12-01T13:09:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "add some typing information to interval-posets",
    "type": "issue",
    "updated_at": "2020-12-21T23:35:22Z",
    "url": "https://github.com/sagemath/sage/issues/30989",
    "user": "https://github.com/fchapoton"
}
```
just as a little experiment

CC:  @tobiasdiez

Branch/Commit: **[`2272bc3`](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**

Reviewer: **Tobias Diez**

Author: **Frédéric Chapoton**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/30989_





---

archive/issue_events_424192.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424192"
}
```



---

archive/issue_events_424193.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424193"
}
```



---

archive/issue_events_424194.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424194"
}
```



---

archive/issue_events_424195.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424195"
}
```



---

archive/issue_comments_496446.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf\"><code>99c5273</code></a></td><td><code>add some basic typing information to Tamari interval posets</code></td></tr></table>\n",
    "created_at": "2020-12-01T13:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496446",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf"><code>99c5273</code></a></td><td><code>add some basic typing information to Tamari interval posets</code></td></tr></table>




---

archive/issue_events_424196.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-01T13:09:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424196"
}
```



---

archive/issue_comments_496447.json:
```json
{
    "body": "Branch: **[u/chapoton/30989](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30989)**",
    "created_at": "2020-12-01T13:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496447",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/30989](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30989)**



---

archive/issue_comments_496448.json:
```json
{
    "body": "Commit: **[`99c5273`](https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf)**",
    "created_at": "2020-12-01T13:09:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496448",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`99c5273`](https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf)**



---

archive/issue_comments_496449.json:
```json
{
    "body": "Changed commit from **[`99c5273`](https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf)** to **[`3d6644a`](https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68)**",
    "created_at": "2020-12-01T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496449",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`99c5273`](https://github.com/sagemath/sagetrac-mirror/commit/99c5273074bde9de1d2e68717dfef4209004e1cf)** to **[`3d6644a`](https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68)**



---

archive/issue_comments_496450.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68\"><code>3d6644a</code></a></td><td><code>fix bad types</code></td></tr></table>\n",
    "created_at": "2020-12-01T17:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496450",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68"><code>3d6644a</code></a></td><td><code>fix bad types</code></td></tr></table>




---

archive/issue_events_424197.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-01T19:21:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424197"
}
```



---

archive/issue_events_424198.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-01T19:21:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424198"
}
```



---

archive/issue_comments_496451.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIn general, this looks good to me (I have admit I didn't went through the code in detail to check whether the added typing information is correct.)\n\nOne suggestion for improvement: for lists, tuple and iterators there are special typing annotation that allow to specify also the type of elements in these lists, e.g. https://docs.python.org/3/library/typing.html#typing.Iterator\nAfter `from `__future__` import annotations`, you can simply write `list[str]` for a list of strings.\n\nMoreover, it would be good to also annotate the method parameters. For example, https://github.com/microsoft/pyright/blob/master/docs/getting-started.md comments\n> The annotations that provide most value are on function input parameters, instance variables, and return parameters (in that order).",
    "created_at": "2020-12-01T19:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496451",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:4" align="right">comment:4</div>

In general, this looks good to me (I have admit I didn't went through the code in detail to check whether the added typing information is correct.)

One suggestion for improvement: for lists, tuple and iterators there are special typing annotation that allow to specify also the type of elements in these lists, e.g. https://docs.python.org/3/library/typing.html#typing.Iterator
After `from `__future__` import annotations`, you can simply write `list[str]` for a list of strings.

Moreover, it would be good to also annotate the method parameters. For example, https://github.com/microsoft/pyright/blob/master/docs/getting-started.md comments
> The annotations that provide most value are on function input parameters, instance variables, and return parameters (in that order).



---

archive/issue_comments_496452.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4\"><code>e1faf42</code></a></td><td><code>import annotations from future</code></td></tr></table>\n",
    "created_at": "2020-12-01T20:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496452",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4"><code>e1faf42</code></a></td><td><code>import annotations from future</code></td></tr></table>




---

archive/issue_comments_496453.json:
```json
{
    "body": "Changed commit from **[`3d6644a`](https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68)** to **[`e1faf42`](https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4)**",
    "created_at": "2020-12-01T20:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496453",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d6644a`](https://github.com/sagemath/sagetrac-mirror/commit/3d6644a410b9813e55b67975563858586f206d68)** to **[`e1faf42`](https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4)**



---

archive/issue_comments_496454.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThanks for the hint.\n\nI think it would be slightly premature to add more typing here, without thinking in general about the relationship with the Parent/Element framework.",
    "created_at": "2020-12-01T20:47:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496454",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

Thanks for the hint.

I think it would be slightly premature to add more typing here, without thinking in general about the relationship with the Parent/Element framework.



---

archive/issue_comments_496455.json:
```json
{
    "body": "Reviewer: **Tobias Diez**",
    "created_at": "2020-12-01T22:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496455",
    "user": "https://github.com/tobiasdiez"
}
```

Reviewer: **Tobias Diez**



---

archive/issue_comments_496456.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nSure, it's already better than no typing at all.\n\nFeel free to set it to \"positive review\" after the tests pass.",
    "created_at": "2020-12-01T22:45:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496456",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:7" align="right">comment:7</div>

Sure, it's already better than no typing at all.

Feel free to set it to "positive review" after the tests pass.



---

archive/issue_comments_496457.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nok, thanks. For sure, only a first step.\n\nI was wondering how to add typing information explaining that the output type has the same \"Parent\" as self.",
    "created_at": "2020-12-02T07:56:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496457",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:8" align="right">comment:8</div>

ok, thanks. For sure, only a first step.

I was wondering how to add typing information explaining that the output type has the same "Parent" as self.



---

archive/issue_events_424199.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-02T07:56:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424199"
}
```



---

archive/issue_events_424200.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-02T07:56:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424200"
}
```



---

archive/issue_comments_496458.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@fchapoton](#comment:8):\n> I was wondering how to add typing information explaining that the output type has the same \"Parent\" as self.\n\nIn general you can use `@overload` for methods to provide a more refined typing information depending on the type of the arguments, in particular, also of self.\nFor example,\n\n```\n    @overload\n    def method(self: 'MyClass', other: 'OtherClass') -> 'ReturnClass':\n        pass\n\n    def method(self: Any, other: Any) -> Any:\n        ....\n```\n\nThe category framework probably needs further work to be able to provide meaningful typing information. One way path would be to use generics. For example, [sage.categories.action.Action](https://doc.sagemath.org/html/en/reference/coercion/sage/categories/action.html) could be declared as\n\n```\nG = TypeVar('G') # possibly with some constraints\nS = TypeVar('S')\n\nclass Action(Generic[G, S]):\n\n   def __init__(G: G, S: S):\n       ....\n   \n   def actor(self) -> G:\n       ....\n\n   def codomain(self) -> S:\n       ...\n```",
    "created_at": "2020-12-02T11:12:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496458",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@fchapoton](#comment:8):
> I was wondering how to add typing information explaining that the output type has the same "Parent" as self.

In general you can use `@overload` for methods to provide a more refined typing information depending on the type of the arguments, in particular, also of self.
For example,

```
    @overload
    def method(self: 'MyClass', other: 'OtherClass') -> 'ReturnClass':
        pass

    def method(self: Any, other: Any) -> Any:
        ....
```

The category framework probably needs further work to be able to provide meaningful typing information. One way path would be to use generics. For example, [sage.categories.action.Action](https://doc.sagemath.org/html/en/reference/coercion/sage/categories/action.html) could be declared as

```
G = TypeVar('G') # possibly with some constraints
S = TypeVar('S')

class Action(Generic[G, S]):

   def __init__(G: G, S: S):
       ....
   
   def actor(self) -> G:
       ....

   def codomain(self) -> S:
       ...
```



---

archive/issue_comments_496459.json:
```json
{
    "body": "Dependencies: **#30551**",
    "created_at": "2020-12-04T19:47:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496459",
    "user": "https://github.com/fchapoton"
}
```

Dependencies: **#30551**



---

archive/issue_comments_496460.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nTo my understanding, type annotations themselves are supported in Python 3.6. \n`from `__future__` import annotations` is for \"postponed evaluation of annotations\" (https://www.python.org/dev/peps/pep-0563/) \n\nI think the annotations added on this ticket do not need `from `__future__` import annotations` - so this line can be removed and the dependency can be dropped",
    "created_at": "2020-12-04T19:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496460",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

To my understanding, type annotations themselves are supported in Python 3.6. 
`from `__future__` import annotations` is for "postponed evaluation of annotations" (https://www.python.org/dev/peps/pep-0563/) 

I think the annotations added on this ticket do not need `from `__future__` import annotations` - so this line can be removed and the dependency can be dropped



---

archive/issue_comments_496461.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88\"><code>fdadfa8</code></a></td><td><code>add some basic typing information to Tamari interval posets</code></td></tr></table>\n",
    "created_at": "2020-12-05T08:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496461",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88"><code>fdadfa8</code></a></td><td><code>add some basic typing information to Tamari interval posets</code></td></tr></table>




---

archive/issue_comments_496462.json:
```json
{
    "body": "Changed commit from **[`e1faf42`](https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4)** to **[`fdadfa8`](https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88)**",
    "created_at": "2020-12-05T08:09:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496462",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e1faf42`](https://github.com/sagemath/sagetrac-mirror/commit/e1faf42f91a688cf0afe646779aef5962a34bea4)** to **[`fdadfa8`](https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88)**



---

archive/issue_events_424201.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-05T08:09:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424201"
}
```



---

archive/issue_events_424202.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2020-12-05T08:09:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424202"
}
```



---

archive/issue_comments_496463.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nok, here is a more basic annotation, without future import\n\nUsing python 3.8.5, I needed to change back `list[tuple]` to just `list`\n\nplease review again",
    "created_at": "2020-12-05T08:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496463",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:14" align="right">comment:14</div>

ok, here is a more basic annotation, without future import

Using python 3.8.5, I needed to change back `list[tuple]` to just `list`

please review again



---

archive/issue_comments_496464.json:
```json
{
    "body": "Changed dependencies from **#30551** to none",
    "created_at": "2020-12-05T08:11:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496464",
    "user": "https://github.com/fchapoton"
}
```

Changed dependencies from **#30551** to none



---

archive/issue_events_424203.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T12:41:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424203"
}
```



---

archive/issue_events_424204.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-05T12:41:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424204"
}
```



---

archive/issue_comments_496465.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nIf you don't want to use `__future__`, then you have to use `List[Tuple[...]]` from `typing`, and also sometimes wrap typing information in strings (e.g. so that you don't run into issues with forward references).\nI'm in favor of using the future import, since this can easily be migrated once only >= python 3.9 is supported (by simply removing the import).\n\nI think it's a good idea to specify the complete typing information, so also specify the type of the list items, i.e. `List[str]` instead of only `List`. Same for the iterator.",
    "created_at": "2020-12-05T12:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496465",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:15" align="right">comment:15</div>

If you don't want to use `__future__`, then you have to use `List[Tuple[...]]` from `typing`, and also sometimes wrap typing information in strings (e.g. so that you don't run into issues with forward references).
I'm in favor of using the future import, since this can easily be migrated once only >= python 3.9 is supported (by simply removing the import).

I think it's a good idea to specify the complete typing information, so also specify the type of the list items, i.e. `List[str]` instead of only `List`. Same for the iterator.



---

archive/issue_comments_496466.json:
```json
{
    "body": "Changed commit from **[`fdadfa8`](https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88)** to **[`e74fa70`](https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557)**",
    "created_at": "2020-12-05T16:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496466",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fdadfa8`](https://github.com/sagemath/sagetrac-mirror/commit/fdadfa8a5bdf8db9fc3635f4bb562fcff20b5a88)** to **[`e74fa70`](https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557)**



---

archive/issue_comments_496467.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557\"><code>e74fa70</code></a></td><td><code>use List and Tuple</code></td></tr></table>\n",
    "created_at": "2020-12-05T16:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496467",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557"><code>e74fa70</code></a></td><td><code>use List and Tuple</code></td></tr></table>




---

archive/issue_comments_496468.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nok, here is a commit for using List[Tuple]",
    "created_at": "2020-12-05T16:48:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496468",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:17" align="right">comment:17</div>

ok, here is a commit for using List[Tuple]



---

archive/issue_events_424205.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-05T16:48:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424205"
}
```



---

archive/issue_events_424206.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-05T16:48:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424206"
}
```



---

archive/issue_comments_496469.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThere are merged conflicts now.",
    "created_at": "2020-12-07T23:34:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496469",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:19" align="right">comment:19</div>

There are merged conflicts now.



---

archive/issue_events_424207.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T23:34:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424207"
}
```



---

archive/issue_events_424208.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-07T23:34:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424208"
}
```



---

archive/issue_comments_496470.json:
```json
{
    "body": "Changed commit from **[`e74fa70`](https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557)** to **[`2272bc3`](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**",
    "created_at": "2020-12-08T08:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496470",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e74fa70`](https://github.com/sagemath/sagetrac-mirror/commit/e74fa703f7ab8bc3b52b55916a0080eaf2b85557)** to **[`2272bc3`](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**



---

archive/issue_comments_496471.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d\"><code>2272bc3</code></a></td><td><code>Merge branch 'u/chapoton/30989' in 9.3.b3</code></td></tr></table>\n",
    "created_at": "2020-12-08T08:01:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496471",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d"><code>2272bc3</code></a></td><td><code>Merge branch 'u/chapoton/30989' in 9.3.b3</code></td></tr></table>




---

archive/issue_events_424209.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-08T08:01:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424209"
}
```



---

archive/issue_events_424210.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-12-08T08:01:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424210"
}
```



---

archive/issue_comments_496472.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nmerged",
    "created_at": "2020-12-08T08:01:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496472",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:21" align="right">comment:21</div>

merged



---

archive/issue_comments_496473.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nLGTM. The patchbot fails, but the errors seem not relevant to the changes on the branch.",
    "created_at": "2020-12-08T12:46:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496473",
    "user": "https://github.com/tobiasdiez"
}
```

<div id="comment:22" align="right">comment:22</div>

LGTM. The patchbot fails, but the errors seem not relevant to the changes on the branch.



---

archive/issue_events_424211.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T12:46:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424211"
}
```



---

archive/issue_events_424212.json:
```json
{
    "actor": "https://github.com/tobiasdiez",
    "created_at": "2020-12-08T12:46:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424212"
}
```



---

archive/issue_events_424213.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-21T23:35:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424213"
}
```



---

archive/issue_events_424214.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b235baa8f3c46d857089d60a144a45b7f8ef3cbc",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-12-21T23:35:22Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30989#event-424214"
}
```



---

archive/issue_comments_496474.json:
```json
{
    "body": "Changed branch from **[u/chapoton/30989](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30989)** to **[`2272bc3`](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**",
    "created_at": "2020-12-21T23:35:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30989",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30989#issuecomment-496474",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/30989](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/30989)** to **[`2272bc3`](https://github.com/sagemath/sagetrac-mirror/commit/2272bc31ba28e6e4411f75143476d84143edd25d)**
