# Issue 30599: Define a new data structure for a list of combinatorial faces

archive/issues_030362.json:
```json
{
    "body": "We define a new data structure for a lists of combinatorial faces.\n\nThe corresponding functions will replace the functions in `bit_vector_operations.cc` and now are factored out to bitsets.\n\nSee #30549 for doctesting.\n\nCC:  @tscrim\n\nKeywords: face list data structure\n\nBranch/Commit: 7a40b9ae38b4f7bb76121ec294f8479fed7b8cde\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jonathan Kliem\n\nDependencies: #30598\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30599\n\n",
    "closed_at": "2020-11-01T00:42:59Z",
    "created_at": "2020-09-18T13:51:10Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Define a new data structure for a list of combinatorial faces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30599",
    "user": "https://github.com/kliem"
}
```
We define a new data structure for a lists of combinatorial faces.

The corresponding functions will replace the functions in `bit_vector_operations.cc` and now are factored out to bitsets.

See #30549 for doctesting.

CC:  @tscrim

Keywords: face list data structure

Branch/Commit: 7a40b9ae38b4f7bb76121ec294f8479fed7b8cde

Reviewer: Travis Scrimshaw

Author: Jonathan Kliem

Dependencies: #30598

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30599





---

archive/issue_comments_461961.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-18T13:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-461961",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_461962.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2020-09-18T15:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-461962",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_461963.json:
```json
{
    "body": "<a id='comment:3'></a>The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?\n\nTrivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`",
    "created_at": "2020-10-24T05:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-461963",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?

Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`



---

archive/issue_comments_461964.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-26T07:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-461964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461965.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 tscrim]:\n> The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?\n> \n> Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`\n> \n\n\nDone.\n\nThe `return` is still needed, but only in one place (out of two). In `sort_faces_list` it is indeed redundant. A few lines down it is still present.",
    "created_at": "2020-10-26T07:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-461965",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'></a>Replying to [comment:3 tscrim]:
> The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?
> 
> Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`
> 


Done.

The `return` is still needed, but only in one place (out of two). In `sort_faces_list` it is indeed redundant. A few lines down it is still present.



---

archive/issue_comments_461966.json:
```json
{
    "body": "<a id='comment:6'></a>I agree that it is needed for `_sort_faces_loop`.\n\nThank you. LGTM.",
    "created_at": "2020-10-27T00:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-461966",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>I agree that it is needed for `_sort_faces_loop`.

Thank you. LGTM.



---

archive/issue_comments_461967.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-27T00:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-461967",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_461968.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-01T00:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-461968",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_079575.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-01T00:42:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30599#event-79575"
}
```
