# Issue 30599: Define a new data structure for a list of combinatorial faces

archive/issues_030362.json:
```json
{
    "body": "We define a new data structure for a lists of combinatorial faces.\n\nThe corresponding functions will replace the functions in `bit_vector_operations.cc` and now are factored out to bitsets.\n\nSee #30549 for doctesting.\n\nCC:  @tscrim\n\nKeywords: face list data structure\n\nBranch/Commit: [7a40b9ae38b4f7bb76121ec294f8479fed7b8cde](https://github.com/sagemath/sagetrac-mirror/commit/7a40b9ae38b4f7bb76121ec294f8479fed7b8cde)\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jonathan Kliem\n\nDependencies: #30598\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30599\n\n",
    "closed_at": "2020-11-01T00:42:59Z",
    "created_at": "2020-09-18T13:51:10Z",
    "labels": [
        "component: geometry"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Define a new data structure for a list of combinatorial faces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30599",
    "user": "https://github.com/kliem"
}
```
We define a new data structure for a lists of combinatorial faces.

The corresponding functions will replace the functions in `bit_vector_operations.cc` and now are factored out to bitsets.

See #30549 for doctesting.

CC:  @tscrim

Keywords: face list data structure

Branch/Commit: [7a40b9ae38b4f7bb76121ec294f8479fed7b8cde](https://github.com/sagemath/sagetrac-mirror/commit/7a40b9ae38b4f7bb76121ec294f8479fed7b8cde)

Reviewer: Travis Scrimshaw

Author: Jonathan Kliem

Dependencies: #30598

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30599





---

archive/issue_comments_605703.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-18T13:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605703",
    "user": "https://github.com/kliem"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_605704.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                      |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|\n|[a369269](https://github.com/sagemath/sagetrac-mirror/commit/a369269092be18e407d994438599b8577a1eedb6)|`put imports in order`|\n|[bb33866](https://github.com/sagemath/sagetrac-mirror/commit/bb3386679619b91dd9b02718025d1331cc9ed3cb)|`import instead of include`|\n|[689bd4d](https://github.com/sagemath/sagetrac-mirror/commit/689bd4d4f649eacd6a3732463769a9eb6e892b4d)|`new data structure for a combinatorial face of a polyhedron`|\n|[d644669](https://github.com/sagemath/sagetrac-mirror/commit/d644669fb758786c7f809c55cb8138ea7f64c54e)|`put imports in order`|\n|[7cc7fcd](https://github.com/sagemath/sagetrac-mirror/commit/7cc7fcd302e729fcf95206a8eae3f5570a787310)|`added file`|\n|[f1f9499](https://github.com/sagemath/sagetrac-mirror/commit/f1f9499743f4dc2d27e7e381ae344e073d4b52f2)|`face_list_t`|\n|[02eabff](https://github.com/sagemath/sagetrac-mirror/commit/02eabff1b64b472c22dd23260bc21f4609b564cb)|`add find and sort`|\n|[50317b0](https://github.com/sagemath/sagetrac-mirror/commit/50317b0d2989ff06947b9436e08c4683ed896ff2)|`fixes to list_of_faces.pxi`|\n|[32cf17e](https://github.com/sagemath/sagetrac-mirror/commit/32cf17eed6197179af2a61a70577dafcbfb810ac)|`remove pxi file`|\n|[c81f438](https://github.com/sagemath/sagetrac-mirror/commit/c81f43879c59c6da2ebc3627a5e2c3b66c3aca8b)|`move not inlined functions to pyx file`|",
    "created_at": "2020-09-18T15:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605704",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                      |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------|
|[a369269](https://github.com/sagemath/sagetrac-mirror/commit/a369269092be18e407d994438599b8577a1eedb6)|`put imports in order`|
|[bb33866](https://github.com/sagemath/sagetrac-mirror/commit/bb3386679619b91dd9b02718025d1331cc9ed3cb)|`import instead of include`|
|[689bd4d](https://github.com/sagemath/sagetrac-mirror/commit/689bd4d4f649eacd6a3732463769a9eb6e892b4d)|`new data structure for a combinatorial face of a polyhedron`|
|[d644669](https://github.com/sagemath/sagetrac-mirror/commit/d644669fb758786c7f809c55cb8138ea7f64c54e)|`put imports in order`|
|[7cc7fcd](https://github.com/sagemath/sagetrac-mirror/commit/7cc7fcd302e729fcf95206a8eae3f5570a787310)|`added file`|
|[f1f9499](https://github.com/sagemath/sagetrac-mirror/commit/f1f9499743f4dc2d27e7e381ae344e073d4b52f2)|`face_list_t`|
|[02eabff](https://github.com/sagemath/sagetrac-mirror/commit/02eabff1b64b472c22dd23260bc21f4609b564cb)|`add find and sort`|
|[50317b0](https://github.com/sagemath/sagetrac-mirror/commit/50317b0d2989ff06947b9436e08c4683ed896ff2)|`fixes to list_of_faces.pxi`|
|[32cf17e](https://github.com/sagemath/sagetrac-mirror/commit/32cf17eed6197179af2a61a70577dafcbfb810ac)|`remove pxi file`|
|[c81f438](https://github.com/sagemath/sagetrac-mirror/commit/c81f43879c59c6da2ebc3627a5e2c3b66c3aca8b)|`move not inlined functions to pyx file`|



---

archive/issue_comments_605705.json:
```json
{
    "body": "Changing commit from \"aaa46d81bcf35da0d84c871d42fcb21bddb80322\" to \"c81f43879c59c6da2ebc3627a5e2c3b66c3aca8b\"",
    "created_at": "2020-09-18T15:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605705",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "aaa46d81bcf35da0d84c871d42fcb21bddb80322" to "c81f43879c59c6da2ebc3627a5e2c3b66c3aca8b"



---

archive/issue_comments_605706.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?\n\nTrivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`",
    "created_at": "2020-10-24T05:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605706",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>
The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?

Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`



---

archive/issue_comments_605707.json:
```json
{
    "body": "Changing commit from \"c81f43879c59c6da2ebc3627a5e2c3b66c3aca8b\" to \"7a40b9ae38b4f7bb76121ec294f8479fed7b8cde\"",
    "created_at": "2020-10-26T07:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605707",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c81f43879c59c6da2ebc3627a5e2c3b66c3aca8b" to "7a40b9ae38b4f7bb76121ec294f8479fed7b8cde"



---

archive/issue_comments_605708.json:
```json
{
    "body": "<a id='comment:4'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[7a40b9a](https://github.com/sagemath/sagetrac-mirror/commit/7a40b9ae38b4f7bb76121ec294f8479fed7b8cde)|`redundant exit; removed semicolon`|",
    "created_at": "2020-10-26T07:14:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605708",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[7a40b9a](https://github.com/sagemath/sagetrac-mirror/commit/7a40b9ae38b4f7bb76121ec294f8479fed7b8cde)|`redundant exit; removed semicolon`|



---

archive/issue_comments_605709.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [tscrim](#comment%3A3):\n> The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?\n> \n> Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`\n> \n\n\nDone.\n\nThe `return` is still needed, but only in one place (out of two). In `sort_faces_list` it is indeed redundant. A few lines down it is still present.",
    "created_at": "2020-10-26T07:18:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605709",
    "user": "https://github.com/kliem"
}
```

<a id='comment:5'></a>
Replying to [tscrim](#comment%3A3):
> The `cdef void sort_faces_list(face_list_t faces):` seems strange. I don't see why there needs to be a `return` in the `if` because there is no remainder of the function. Did something get lost?
> 
> Trivial, but not C `:P` in `cdef inline size_t get_next_level_fused`: `faces.n_faces -= 1;`
> 


Done.

The `return` is still needed, but only in one place (out of two). In `sort_faces_list` it is indeed redundant. A few lines down it is still present.



---

archive/issue_comments_605710.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Travis Scrimshaw\"",
    "created_at": "2020-10-27T00:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605710",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Travis Scrimshaw"



---

archive/issue_comments_605711.json:
```json
{
    "body": "<a id='comment:6'></a>\nI agree that it is needed for `_sort_faces_loop`.\n\nThank you. LGTM.",
    "created_at": "2020-10-27T00:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605711",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:6'></a>
I agree that it is needed for `_sort_faces_loop`.

Thank you. LGTM.



---

archive/issue_comments_605712.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-27T00:18:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605712",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_605713.json:
```json
{
    "body": "Changing branch from \"u/gh-kliem/data_structure_for_face_list\" to \"7a40b9ae38b4f7bb76121ec294f8479fed7b8cde\"",
    "created_at": "2020-11-01T00:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605713",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/gh-kliem/data_structure_for_face_list" to "7a40b9ae38b4f7bb76121ec294f8479fed7b8cde"



---

archive/issue_comments_605714.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-01T00:42:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30599#issuecomment-605714",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_089679.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-01T00:42:59Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30599",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30599#event-89679"
}
```
