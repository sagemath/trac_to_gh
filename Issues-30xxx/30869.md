# Issue 30869: Some computation hangs in Multizeta

archive/issues_030632.json:
```json
{
    "body": "```\nsage: Z = Multizeta\nsage: 12*Z(4,4) == 3/2*(Z(6,2) * Z(2,6))  # hangs\n```\nPossibly related\n\n```\nsage: (Z(6,2) * Z(2,6)).phi_as_vector()  # hangs\n```\n\nCC:  @fchapoton\n\nBranch/Commit: 494d12426796fe663401ab69f8bf3cdcbc912f76\n\nReviewer: Fr\u00e9d\u00e9ric Chapoton\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30869\n\n",
    "closed_at": "2020-11-22T15:06:05Z",
    "created_at": "2020-11-07T08:26:49Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Some computation hangs in Multizeta",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30869",
    "user": "https://github.com/videlec"
}
```
```
sage: Z = Multizeta
sage: 12*Z(4,4) == 3/2*(Z(6,2) * Z(2,6))  # hangs
```
Possibly related

```
sage: (Z(6,2) * Z(2,6)).phi_as_vector()  # hangs
```

CC:  @fchapoton

Branch/Commit: 494d12426796fe663401ab69f8bf3cdcbc912f76

Reviewer: Frédéric Chapoton

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30869





---

archive/issue_comments_612150.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n ```\n-sage: Z = Multizeta                                                                            \n+sage: Z = Multizeta\n sage: 12*Z(4,4) == 3/2*(Z(6,2) * Z(2,6))\n ```\n``````\n",
    "created_at": "2020-11-07T08:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612150",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
 ```
-sage: Z = Multizeta                                                                            
+sage: Z = Multizeta
 sage: 12*Z(4,4) == 3/2*(Z(6,2) * Z(2,6))
 ```
``````




---

archive/issue_comments_612151.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,9 @@\n ```\n sage: Z = Multizeta\n-sage: 12*Z(4,4) == 3/2*(Z(6,2) * Z(2,6))\n+sage: 12*Z(4,4) == 3/2*(Z(6,2) * Z(2,6))  # hangs\n ```\n+Possibly related\n+\n+```\n+sage: (Z(6,2) * Z(2,6)).phi_as_vector()  # hangs\n+```\n``````\n",
    "created_at": "2020-11-07T08:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612151",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,9 @@
 ```
 sage: Z = Multizeta
-sage: 12*Z(4,4) == 3/2*(Z(6,2) * Z(2,6))
+sage: 12*Z(4,4) == 3/2*(Z(6,2) * Z(2,6))  # hangs
 ```
+Possibly related
+
+```
+sage: (Z(6,2) * Z(2,6)).phi_as_vector()  # hangs
+```
``````




---

archive/issue_comments_612152.json:
```json
{
    "body": "<a id='comment:3'></a>Weight 8+8 = 16, what would you expect ? of course it hangs !\n\nThe code is working, but has certainly not been optimised. I agree that it is quite slow as soon as the weight gets large.",
    "created_at": "2020-11-07T09:32:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612152",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>Weight 8+8 = 16, what would you expect ? of course it hangs !

The code is working, but has certainly not been optimised. I agree that it is quite slow as soon as the weight gets large.



---

archive/issue_comments_612153.json:
```json
{
    "body": "<a id='comment:4'></a>My bad... I wrote a `*` for a `+`.\n\n```\nsage: Z = Multizeta\nsage: 12*Z(4,4) == 3/2*(Z(6,2) + Z(2,6))\nTrue\n```\nThough, what I wrote in the ticket description is trivially wrong because the weight 8 component is non-zero. I will use this ticket to speed that up.",
    "created_at": "2020-11-07T10:55:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612153",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>My bad... I wrote a `*` for a `+`.

```
sage: Z = Multizeta
sage: 12*Z(4,4) == 3/2*(Z(6,2) + Z(2,6))
True
```
Though, what I wrote in the ticket description is trivially wrong because the weight 8 component is non-zero. I will use this ticket to speed that up.



---

archive/issue_comments_612154.json:
```json
{
    "body": "<a id='comment:5'></a>beware that there is already a positive reviwed ticket changing this file\n\n#30851",
    "created_at": "2020-11-07T10:56:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612154",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>beware that there is already a positive reviwed ticket changing this file

#30851



---

archive/issue_comments_612155.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-10T19:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612155",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_612156.json:
```json
{
    "body": "Changing commit from \"\" to \"701256935a7f7ac8d077f541155b6a9572a4d440\"",
    "created_at": "2020-11-10T19:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612156",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "701256935a7f7ac8d077f541155b6a9572a4d440"



---

archive/issue_comments_612157.json:
```json
{
    "body": "<a id='comment:6'></a>voila une vague tentative\n\n---\nNew commits:",
    "created_at": "2020-11-10T19:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612157",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>voila une vague tentative

---
New commits:



---

archive/issue_comments_612158.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/30869\"",
    "created_at": "2020-11-10T19:33:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612158",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/30869"



---

archive/issue_comments_612159.json:
```json
{
    "body": "<a id='comment:7'></a>New commits:",
    "created_at": "2020-11-11T18:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612159",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>New commits:



---

archive/issue_comments_612160.json:
```json
{
    "body": "Changing branch from \"u/chapoton/30869\" to \"u/vdelecroix/30869\"",
    "created_at": "2020-11-11T18:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612160",
    "user": "https://github.com/videlec"
}
```

Changing branch from "u/chapoton/30869" to "u/vdelecroix/30869"



---

archive/issue_comments_612161.json:
```json
{
    "body": "Changing commit from \"701256935a7f7ac8d077f541155b6a9572a4d440\" to \"494d12426796fe663401ab69f8bf3cdcbc912f76\"",
    "created_at": "2020-11-11T18:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612161",
    "user": "https://github.com/videlec"
}
```

Changing commit from "701256935a7f7ac8d077f541155b6a9572a4d440" to "494d12426796fe663401ab69f8bf3cdcbc912f76"



---

archive/issue_comments_612162.json:
```json
{
    "body": "<a id='comment:8'></a>More reasonable version fixing also coercion and zerology.\n\nBTW: why do we have the two representations mzv and iterated? These are exactly the same algebras.",
    "created_at": "2020-11-11T18:20:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612162",
    "user": "https://github.com/videlec"
}
```

<a id='comment:8'></a>More reasonable version fixing also coercion and zerology.

BTW: why do we have the two representations mzv and iterated? These are exactly the same algebras.



---

archive/issue_comments_612163.json:
```json
{
    "body": "<a id='comment:9'></a>Merci. Ca m'a l'air tr\u00e8s bien. On va attendre qu'un patchbot y jette un oeil.",
    "created_at": "2020-11-11T19:14:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612163",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>Merci. Ca m'a l'air très bien. On va attendre qu'un patchbot y jette un oeil.



---

archive/issue_comments_612164.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2020-11-11T20:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612164",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "" to "Vincent Delecroix, Frédéric Chapoton"



---

archive/issue_comments_612165.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2020-11-11T20:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612165",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "" to "Vincent Delecroix, Frédéric Chapoton"



---

archive/issue_comments_612166.json:
```json
{
    "body": "Changing author from \"Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton\" to \"Vincent Delecroix\"",
    "created_at": "2020-11-11T20:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612166",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "Vincent Delecroix, Frédéric Chapoton" to "Vincent Delecroix"



---

archive/issue_comments_612167.json:
```json
{
    "body": "Changing reviewer from \"Vincent Delecroix, Fr\u00e9d\u00e9ric Chapoton\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2020-11-11T20:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612167",
    "user": "https://github.com/fchapoton"
}
```

Changing reviewer from "Vincent Delecroix, Frédéric Chapoton" to "Frédéric Chapoton"



---

archive/issue_comments_612168.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-12T07:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612168",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_612169.json:
```json
{
    "body": "<a id='comment:12'></a>ok, les bots sont moralement verts. Allons-y",
    "created_at": "2020-11-12T07:34:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612169",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:12'></a>ok, les bots sont moralement verts. Allons-y



---

archive/issue_comments_612170.json:
```json
{
    "body": "<a id='comment:13'></a>follow up: J'ai remarqu\u00e9 des trucs bizarres avec les multiplicatios et divisions\n\n```\nsage: float(2) * Multizeta(4)\n2.0*\u03b6(4)\nsage: parent(_).base_ring()\nRational Field\nsage: Multizeta(4) / 2.5\n2/5*\u03b6(4)\n```",
    "created_at": "2020-11-12T08:55:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612170",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>follow up: J'ai remarqué des trucs bizarres avec les multiplicatios et divisions

```
sage: float(2) * Multizeta(4)
2.0*ζ(4)
sage: parent(_).base_ring()
Rational Field
sage: Multizeta(4) / 2.5
2/5*ζ(4)
```



---

archive/issue_comments_612171.json:
```json
{
    "body": "<a id='comment:14'></a>Par curioit\u00e9, tu t'en sers vraiment, ou c'est juste pour essayer ?",
    "created_at": "2020-11-12T09:04:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612171",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>Par curioité, tu t'en sers vraiment, ou c'est juste pour essayer ?



---

archive/issue_comments_612172.json:
```json
{
    "body": "<a id='comment:15'></a>Je me sers de `Multizetas(QQ)` de mani\u00e8re intensive. En voulant une faire approximation num\u00e9rique je me suis aper\u00e7u de ces trucs bizarres.",
    "created_at": "2020-11-12T09:09:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612172",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>Je me sers de `Multizetas(QQ)` de manière intensive. En voulant une faire approximation numérique je me suis aperçu de ces trucs bizarres.



---

archive/issue_comments_612173.json:
```json
{
    "body": "<a id='comment:16'></a>ok, cool. Je suis content",
    "created_at": "2020-11-12T09:09:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612173",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>ok, cool. Je suis content



---

archive/issue_comments_612174.json:
```json
{
    "body": "<a id='comment:17'></a>c'est un vieux bug, voir #18487, qui touche CombinatorialFreeModule en g\u00e9n\u00e9ral\n\nReplying to [comment:13 vdelecroix]:\n> follow up: J'ai remarqu\u00e9 des trucs bizarres avec les multiplicatios et divisions\n> \n> ```\n> sage: float(2) * Multizeta(4)\n> 2.0*\u03b6(4)\n> sage: parent(_).base_ring()\n> Rational Field\n> sage: Multizeta(4) / 2.5\n> 2/5*\u03b6(4)\n> ```",
    "created_at": "2020-11-12T14:07:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612174",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:17'></a>c'est un vieux bug, voir #18487, qui touche CombinatorialFreeModule en général

Replying to [comment:13 vdelecroix]:
> follow up: J'ai remarqué des trucs bizarres avec les multiplicatios et divisions
> 
> ```
> sage: float(2) * Multizeta(4)
> 2.0*ζ(4)
> sage: parent(_).base_ring()
> Rational Field
> sage: Multizeta(4) / 2.5
> 2/5*ζ(4)
> ```



---

archive/issue_events_080555.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:06:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30869#event-80555"
}
```



---

archive/issue_comments_612175.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/30869\" to \"494d12426796fe663401ab69f8bf3cdcbc912f76\"",
    "created_at": "2020-11-22T15:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612175",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/30869" to "494d12426796fe663401ab69f8bf3cdcbc912f76"



---

archive/issue_comments_612176.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-22T15:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30869#issuecomment-612176",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
