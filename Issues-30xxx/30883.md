# Issue 30883: Update instructions for conda to use miniforge

archive/issues_030646.json:
```json
{
    "body": "Recommend Miniforge for installing Sage: works on more platforms\nthan Miniconda and Anaconda and uses conda-forge by default.\n\n**CC:**  @mkoeppe @dimpase @saraedum @slel\n\n**Keywords:** conda\n\n**Branch/Commit:** [485eb7eb1be642b3aadd05745bceb98f9bc86d11](https://github.com/sagemath/sagetrac-mirror/commit/485eb7eb1be642b3aadd05745bceb98f9bc86d11)\n\n**Reviewer:** Dima Pasechnik, Isuru Fernando\n\n**Author:** Isuru Fernando, Samuel Leli\u00e8vre\n\nIssue created by migration from https://trac.sagemath.org/ticket/30883\n\n",
    "closed_at": "2020-11-22T15:05:51Z",
    "created_at": "2020-11-10T17:59:50Z",
    "labels": [
        "component: documentation",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Update instructions for conda to use miniforge",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30883",
    "user": "https://github.com/isuruf"
}
```
Recommend Miniforge for installing Sage: works on more platforms
than Miniconda and Anaconda and uses conda-forge by default.

**CC:**  @mkoeppe @dimpase @saraedum @slel

**Keywords:** conda

**Branch/Commit:** [485eb7eb1be642b3aadd05745bceb98f9bc86d11](https://github.com/sagemath/sagetrac-mirror/commit/485eb7eb1be642b3aadd05745bceb98f9bc86d11)

**Reviewer:** Dima Pasechnik, Isuru Fernando

**Author:** Isuru Fernando, Samuel Lelièvre

Issue created by migration from https://trac.sagemath.org/ticket/30883





---

archive/issue_comments_585339.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-11-10T17:59:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585339",
    "user": "https://github.com/isuruf"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_585340.json:
```json
{
    "body": "<a id='comment:2'></a>\nby the way, is there a way to install optional Sage packages, such as gap_packages ?",
    "created_at": "2020-11-10T18:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585340",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>
by the way, is there a way to install optional Sage packages, such as gap_packages ?



---

archive/issue_comments_585341.json:
```json
{
    "body": "<a id='comment:3'></a>\nNot all optional packages are there, but you can use `conda install gap` to install all gap packages. `conda install sage` comes with only `gap-defaults` which is the standard set of packages that sage require.",
    "created_at": "2020-11-10T18:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585341",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:3'></a>
Not all optional packages are there, but you can use `conda install gap` to install all gap packages. `conda install sage` comes with only `gap-defaults` which is the standard set of packages that sage require.



---

archive/issue_comments_585342.json:
```json
{
    "body": "<a id='comment:4'></a>\nIt installs, but is somewhat broken:\n\n```\nConfirm changes: [Y/n] \nFinished e-antic                              (00m:00s)             117 KB    253 KB/s\nFinished libsemigroups                        (00m:00s)               2 MB      2 MB/s\nFinished normaliz                             (00m:01s)               4 MB      3 MB/s\nFinished gap                                  (01m:06s)             191 MB      9 MB/s\nPreparing transaction: done\nVerifying transaction: done\nExecuting transaction: done\n(sage) dima@x86_64-apple-darwin13 ~ % sage --gap\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   GAP 4.10.2 of 19-Jun-2019\n \u2502  GAP  \u2502   https://www.gap-system.org\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   Architecture: 64\n Configuration:  gmp 6.2.0, readline\n Loading the library and packages ...\n Packages:   AClib 1.3.1, Alnuth 3.1.1, AtlasRep 2.1.0, AutoDoc 2019.05.20, AutPGrp 1.10, Browse 1.8.8, Carat 2.2.3, CRISP 1.4.4, Cryst 4.1.19, CrystCat 1.1.9, CTblLib 1.2.2, FactInt 1.6.2, FGA 1.4.0, \n             Forms 1.2.5, GAPDoc 1.6.2, genss 1.6.5, IO 4.6.0, IRREDSOL 1.4, LAGUNA 3.9.3, orb 4.8.2, Polenta 1.3.8, Polycyclic 2.14, PrimGrp 3.3.2, RadiRoot 2.8, recog 1.3.2, ResClasses 4.7.2, \n             SmallGrp 1.3, Sophus 1.24, SpinSym 1.5.1, TomLib 1.2.8, TransGrp 2.0.4, utils 0.63\n Try '??help' for help. See also '?copyright', '?cite' and '?authors'\ngap> LoadPackage(\"semigroups\");\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLoading  GRAPE 4.8.2 (GRaph Algorithms using PErmutation groups)\nby Leonard H. Soicher (http://www.maths.qmul.ac.uk/~lsoicher/).\nHomepage: https://gap-packages.github.io/grape\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nLoading  Digraphs 0.15.2 (Digraphs - Methods for digraphs)\nby Jan De Beule (http://homepages.vub.ac.be/~jdbeule/),\n   Julius Jonusas (http://www-groups.mcs.st-andrews.ac.uk/~julius/),\n   James Mitchell (http://goo.gl/ZtViV6),\n   Michael Torpey (http://www-groups.mcs.st-andrews.ac.uk/~mct25/), and\n   Wilf Wilson (http://wilf.me).\nHomepage: https://gap-packages.github.io/Digraphs\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n#W dlopen() error: dlopen(/Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so, 9): Library not loaded: /usr/local/miniconda/conda-bld/gap-split_1565064241547/work/pk\\\ng/semigroups-3.1.3/libsemigroups/../bin/lib/libsemigroups.0.dylib\n  Referenced from: /Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so\n  Reason: image not found\nError, module '/Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so' not found in\n  if not LOAD_DYN( arg[1], false ) then\n    Error( \"no support for dynamic loading\" );\nfi; at /Users/dima/opt/miniconda3/envs/sage/share/gap/lib/files.gd:583 called from \n<function \"LoadDynamicModule\">( <arguments> )\n called from read-eval loop at /Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/init.g:26\nError, was not in any namespace at /Users/dima/opt/miniconda3/envs/sage/share/gap/lib/variable.g:291 called from\nLEAVE_NAMESPACE(  ); at /Users/dima/opt/miniconda3/envs/sage/share/gap/lib/package.gi:1253 called from\nReadPackage( pkgname, \"init.g\" ); at /Users/dima/opt/miniconda3/envs/sage/share/gap/lib/package.gi:1616 called from\n<function \"LoadPackage\">( <arguments> )\n called from read-eval loop at *stdin*:1\nyou can 'quit;' to quit to outer loop, or\nyou can 'return;' to continue\nbrk> \n```\nThe dylib in question has ended up here:\n\n```\n~/opt/miniconda3/pkgs/gap-4.10.2-he9bb3db_4/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so\n~/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so\n~/opt/miniconda3/pkgs/libsemigroups-0.6.7-h6de7cb9_0/lib/libsemigroups.0.dylib\n~/opt/miniconda3/envs/sage/lib/libsemigroups.0.dylib\n```",
    "created_at": "2020-11-10T19:00:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585342",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:4'></a>
It installs, but is somewhat broken:

```
Confirm changes: [Y/n] 
Finished e-antic                              (00m:00s)             117 KB    253 KB/s
Finished libsemigroups                        (00m:00s)               2 MB      2 MB/s
Finished normaliz                             (00m:01s)               4 MB      3 MB/s
Finished gap                                  (01m:06s)             191 MB      9 MB/s
Preparing transaction: done
Verifying transaction: done
Executing transaction: done
(sage) dima@x86_64-apple-darwin13 ~ % sage --gap
 ┌───────┐   GAP 4.10.2 of 19-Jun-2019
 │  GAP  │   https://www.gap-system.org
 └───────┘   Architecture: 64
 Configuration:  gmp 6.2.0, readline
 Loading the library and packages ...
 Packages:   AClib 1.3.1, Alnuth 3.1.1, AtlasRep 2.1.0, AutoDoc 2019.05.20, AutPGrp 1.10, Browse 1.8.8, Carat 2.2.3, CRISP 1.4.4, Cryst 4.1.19, CrystCat 1.1.9, CTblLib 1.2.2, FactInt 1.6.2, FGA 1.4.0, 
             Forms 1.2.5, GAPDoc 1.6.2, genss 1.6.5, IO 4.6.0, IRREDSOL 1.4, LAGUNA 3.9.3, orb 4.8.2, Polenta 1.3.8, Polycyclic 2.14, PrimGrp 3.3.2, RadiRoot 2.8, recog 1.3.2, ResClasses 4.7.2, 
             SmallGrp 1.3, Sophus 1.24, SpinSym 1.5.1, TomLib 1.2.8, TransGrp 2.0.4, utils 0.63
 Try '??help' for help. See also '?copyright', '?cite' and '?authors'
gap> LoadPackage("semigroups");
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Loading  GRAPE 4.8.2 (GRaph Algorithms using PErmutation groups)
by Leonard H. Soicher (http://www.maths.qmul.ac.uk/~lsoicher/).
Homepage: https://gap-packages.github.io/grape
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
Loading  Digraphs 0.15.2 (Digraphs - Methods for digraphs)
by Jan De Beule (http://homepages.vub.ac.be/~jdbeule/),
   Julius Jonusas (http://www-groups.mcs.st-andrews.ac.uk/~julius/),
   James Mitchell (http://goo.gl/ZtViV6),
   Michael Torpey (http://www-groups.mcs.st-andrews.ac.uk/~mct25/), and
   Wilf Wilson (http://wilf.me).
Homepage: https://gap-packages.github.io/Digraphs
─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
#W dlopen() error: dlopen(/Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so, 9): Library not loaded: /usr/local/miniconda/conda-bld/gap-split_1565064241547/work/pk\
g/semigroups-3.1.3/libsemigroups/../bin/lib/libsemigroups.0.dylib
  Referenced from: /Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so
  Reason: image not found
Error, module '/Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so' not found in
  if not LOAD_DYN( arg[1], false ) then
    Error( "no support for dynamic loading" );
fi; at /Users/dima/opt/miniconda3/envs/sage/share/gap/lib/files.gd:583 called from 
<function "LoadDynamicModule">( <arguments> )
 called from read-eval loop at /Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/init.g:26
Error, was not in any namespace at /Users/dima/opt/miniconda3/envs/sage/share/gap/lib/variable.g:291 called from
LEAVE_NAMESPACE(  ); at /Users/dima/opt/miniconda3/envs/sage/share/gap/lib/package.gi:1253 called from
ReadPackage( pkgname, "init.g" ); at /Users/dima/opt/miniconda3/envs/sage/share/gap/lib/package.gi:1616 called from
<function "LoadPackage">( <arguments> )
 called from read-eval loop at *stdin*:1
you can 'quit;' to quit to outer loop, or
you can 'return;' to continue
brk> 
```
The dylib in question has ended up here:

```
~/opt/miniconda3/pkgs/gap-4.10.2-he9bb3db_4/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so
~/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so
~/opt/miniconda3/pkgs/libsemigroups-0.6.7-h6de7cb9_0/lib/libsemigroups.0.dylib
~/opt/miniconda3/envs/sage/lib/libsemigroups.0.dylib
```



---

archive/issue_comments_585343.json:
```json
{
    "body": "<a id='comment:5'></a>\nThis was fixed with gap 4.11, but sage 9.2 requires gap 4.10",
    "created_at": "2020-11-10T19:19:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585343",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:5'></a>
This was fixed with gap 4.11, but sage 9.2 requires gap 4.10



---

archive/issue_comments_585344.json:
```json
{
    "body": "<a id='comment:6'></a>\nCan you try `install_name_tool -change /usr/local/miniconda/conda-bld/gap-split_1565064241547/work/pkg/semigroups-3.1.3/libsemigroups/../bin/lib/libsemigroups.0.dylib /Users/dima/opt/miniconda3/pkgs/libsemigroups-0.6.7-h6de7cb9_0/lib/libsemigroups.0.dylib /Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so`",
    "created_at": "2020-11-10T19:38:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585344",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:6'></a>
Can you try `install_name_tool -change /usr/local/miniconda/conda-bld/gap-split_1565064241547/work/pkg/semigroups-3.1.3/libsemigroups/../bin/lib/libsemigroups.0.dylib /Users/dima/opt/miniconda3/pkgs/libsemigroups-0.6.7-h6de7cb9_0/lib/libsemigroups.0.dylib /Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so`



---

archive/issue_comments_585345.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [isuruf](#comment%3A6):\n> Can you try `install_name_tool -change /usr/local/miniconda/conda-bld/gap-split_1565064241547/work/pkg/semigroups-3.1.3/libsemigroups/../bin/lib/libsemigroups.0.dylib /Users/dima/opt/miniconda3/pkgs/libsemigroups-0.6.7-h6de7cb9_0/lib/libsemigroups.0.dylib /Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so`\n\n\nthis fixes the problem, thanks",
    "created_at": "2020-11-10T20:00:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585345",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>
Replying to [isuruf](#comment%3A6):
> Can you try `install_name_tool -change /usr/local/miniconda/conda-bld/gap-split_1565064241547/work/pkg/semigroups-3.1.3/libsemigroups/../bin/lib/libsemigroups.0.dylib /Users/dima/opt/miniconda3/pkgs/libsemigroups-0.6.7-h6de7cb9_0/lib/libsemigroups.0.dylib /Users/dima/opt/miniconda3/envs/sage/share/gap/pkg/semigroups-3.1.3/bin/64/semigroups.so`


this fixes the problem, thanks



---

archive/issue_comments_585346.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [isuruf](#comment%3A5):\n> This was fixed with gap 4.11, but sage 9.2 requires gap 4.10\n\n\nyou have my blessings to update conda to use gap 4.11. #29314 should have been merged ages ago. :-)",
    "created_at": "2020-11-10T20:02:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585346",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:8'></a>
Replying to [isuruf](#comment%3A5):
> This was fixed with gap 4.11, but sage 9.2 requires gap 4.10


you have my blessings to update conda to use gap 4.11. #29314 should have been merged ages ago. :-)



---

archive/issue_comments_585347.json:
```json
{
    "body": "<a id='comment:9'></a>\nBy the way, I also tried Conda's GAP outside of Sage, which happens to be version 4.11, but it is a bit broken:\n\n```\n% gap\n \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   GAP 4.11.0 of 29-Feb-2020\n \u2502  GAP  \u2502   https://www.gap-system.org\n \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   Architecture: 64\n Configuration:  gmp 6.2.0, GASMAN, readline\n Loading the library and packages ...\n#W dlopen() error: dlopen(/Users/dima/opt/miniconda3/share/gap/pkg/Browse/bin/64/ncurses.so, 9): Library not loaded: @rpath/libpanel.6.dylib\n  Referenced from: /Users/dima/opt/miniconda3/share/gap/pkg/Browse/bin/64/ncurses.so\n  Reason: image not found\nError, module '/Users/dima/opt/miniconda3/share/gap/pkg/Browse/bin/64/ncurses.so' not found in\n  LOAD_DYN( arg[1], false ) at /Users/dima/opt/miniconda3/share/gap/lib/files.gd:587 called from \n<function \"LoadDynamicModule\">( <arguments> )\n called from read-eval loop at /Users/dima/opt/miniconda3/share/gap/pkg/Browse/init.g:34\nError, was not in any namespace at /Users/dima/opt/miniconda3/share/gap/lib/variable.g:292 called from\nLEAVE_NAMESPACE(  ); at /Users/dima/opt/miniconda3/share/gap/lib/package.gi:1303 called from\nReadPackage( pkgname, \"init.g\" ); at /Users/dima/opt/miniconda3/share/gap/lib/package.gi:1670 called from\nLoadPackage( name, false ) at /Users/dima/opt/miniconda3/share/gap/lib/package.gi:1980 called from\nfunc(  ); at /Users/dima/opt/miniconda3/share/gap/lib/system.g:220 called from\n<function \"CallAndInstallPostRestore\">( <arguments> )\n called from read-eval loop at /Users/dima/opt/miniconda3/share/gap/lib/init.g:733\nyou can 'quit;' to quit to outer loop, or\nyou can 'return;' to continue\nbrk> \n```",
    "created_at": "2020-11-11T22:46:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585347",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:9'></a>
By the way, I also tried Conda's GAP outside of Sage, which happens to be version 4.11, but it is a bit broken:

```
% gap
 ┌───────┐   GAP 4.11.0 of 29-Feb-2020
 │  GAP  │   https://www.gap-system.org
 └───────┘   Architecture: 64
 Configuration:  gmp 6.2.0, GASMAN, readline
 Loading the library and packages ...
#W dlopen() error: dlopen(/Users/dima/opt/miniconda3/share/gap/pkg/Browse/bin/64/ncurses.so, 9): Library not loaded: @rpath/libpanel.6.dylib
  Referenced from: /Users/dima/opt/miniconda3/share/gap/pkg/Browse/bin/64/ncurses.so
  Reason: image not found
Error, module '/Users/dima/opt/miniconda3/share/gap/pkg/Browse/bin/64/ncurses.so' not found in
  LOAD_DYN( arg[1], false ) at /Users/dima/opt/miniconda3/share/gap/lib/files.gd:587 called from 
<function "LoadDynamicModule">( <arguments> )
 called from read-eval loop at /Users/dima/opt/miniconda3/share/gap/pkg/Browse/init.g:34
Error, was not in any namespace at /Users/dima/opt/miniconda3/share/gap/lib/variable.g:292 called from
LEAVE_NAMESPACE(  ); at /Users/dima/opt/miniconda3/share/gap/lib/package.gi:1303 called from
ReadPackage( pkgname, "init.g" ); at /Users/dima/opt/miniconda3/share/gap/lib/package.gi:1670 called from
LoadPackage( name, false ) at /Users/dima/opt/miniconda3/share/gap/lib/package.gi:1980 called from
func(  ); at /Users/dima/opt/miniconda3/share/gap/lib/system.g:220 called from
<function "CallAndInstallPostRestore">( <arguments> )
 called from read-eval loop at /Users/dima/opt/miniconda3/share/gap/lib/init.g:733
you can 'quit;' to quit to outer loop, or
you can 'return;' to continue
brk> 
```



---

archive/issue_comments_585348.json:
```json
{
    "body": "**Reviewer:** Dima Pasechnik",
    "created_at": "2020-11-11T22:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585348",
    "user": "https://github.com/dimpase"
}
```

**Reviewer:** Dima Pasechnik



---

archive/issue_comments_585349.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-11-11T22:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585349",
    "user": "https://github.com/dimpase"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_585350.json:
```json
{
    "body": "<a id='comment:10'></a>\nthe branch itself is good to go.",
    "created_at": "2020-11-11T22:47:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585350",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>
the branch itself is good to go.



---

archive/issue_comments_585351.json:
```json
{
    "body": "<a id='comment:11'></a>\nThanks. Can you open an issue at https://github.com/conda-forge/gap-feedstock/ about gap 4.11?",
    "created_at": "2020-11-11T22:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585351",
    "user": "https://github.com/isuruf"
}
```

<a id='comment:11'></a>
Thanks. Can you open an issue at https://github.com/conda-forge/gap-feedstock/ about gap 4.11?



---

archive/issue_comments_585352.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [isuruf](#comment%3A11):\n> Thanks. Can you open an issue at https://github.com/conda-forge/gap-feedstock/ about gap 4.11?\n  \ndone:\nhttps://github.com/conda-forge/gap-feedstock/issues/41",
    "created_at": "2020-11-11T23:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585352",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:12'></a>
Replying to [isuruf](#comment%3A11):
> Thanks. Can you open an issue at https://github.com/conda-forge/gap-feedstock/ about gap 4.11?
  
done:
https://github.com/conda-forge/gap-feedstock/issues/41



---

archive/issue_comments_585353.json:
```json
{
    "body": "<a id='comment:13'></a>\nHow about rewriting the whole section as follows,\neither here or on a follow-up ticket.\n\n```\nSageMath can be installed via Conda from the\n`conda-forge <https://conda-forge.org>`_ conda channel.\n\nThis works on Linux and macOS on ``x86_64`` processors,\nand on Linux on ``aarch64`` processors (using Miniforge).\n\nThis requires a working Conda installation: either Miniforge, Miniconda\nor Anaconda. If you don't have one yet, we recommend installing\n`Miniforge <https://github.com/conda-forge/miniforge#miniforge3>`_.\n\nMiniforge uses conda-forge as the default channel. If you are\nusing Miniconda or Anaconda, set it up to use conda-forge:\n\n* Add the conda-forge channel: ``conda config --add channels conda-forge``\n* Change channel priority to strict: ``conda config --set channel_priority strict``\n\nOptionally, use `mamba <https://github.com/mamba-org/mamba>`_\nwhich uses a faster dependency solver than `conda`.\n\n.. code-block:: shell\n\n    conda install mamba\n\nCreate a new conda environment containing SageMath, either with ``mamba`` or ``conda``:\n\n.. code-block:: shell\n\n    mamba create -n sage sage python=X\n    conda create -n sage sage python=X\n\nwhere ``X`` is version of Python, e.g. ``3.8``.\n\nTo use Sage from there,\n\n* Enter the new environment: ``conda activate sage``\n* Start SageMath: ``sage``\n```",
    "created_at": "2020-11-14T12:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585353",
    "user": "https://github.com/slel"
}
```

<a id='comment:13'></a>
How about rewriting the whole section as follows,
either here or on a follow-up ticket.

```
SageMath can be installed via Conda from the
`conda-forge <https://conda-forge.org>`_ conda channel.

This works on Linux and macOS on ``x86_64`` processors,
and on Linux on ``aarch64`` processors (using Miniforge).

This requires a working Conda installation: either Miniforge, Miniconda
or Anaconda. If you don't have one yet, we recommend installing
`Miniforge <https://github.com/conda-forge/miniforge#miniforge3>`_.

Miniforge uses conda-forge as the default channel. If you are
using Miniconda or Anaconda, set it up to use conda-forge:

* Add the conda-forge channel: ``conda config --add channels conda-forge``
* Change channel priority to strict: ``conda config --set channel_priority strict``

Optionally, use `mamba <https://github.com/mamba-org/mamba>`_
which uses a faster dependency solver than `conda`.

.. code-block:: shell

    conda install mamba

Create a new conda environment containing SageMath, either with ``mamba`` or ``conda``:

.. code-block:: shell

    mamba create -n sage sage python=X
    conda create -n sage sage python=X

where ``X`` is version of Python, e.g. ``3.8``.

To use Sage from there,

* Enter the new environment: ``conda activate sage``
* Start SageMath: ``sage``
```



---

archive/issue_comments_585354.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"conda\".",
    "created_at": "2020-11-14T12:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585354",
    "user": "https://github.com/slel"
}
```

**Changing keywords** from "" to "conda".



---

archive/issue_comments_585355.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,2 @@\n-\n+Recommend Miniforge for installing Sage: works on more platforms\n+than Miniconda and Anaconda and uses conda-forge by default.\n``````\n",
    "created_at": "2020-11-14T12:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585355",
    "user": "https://github.com/slel"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,2 @@
-
+Recommend Miniforge for installing Sage: works on more platforms
+than Miniconda and Anaconda and uses conda-forge by default.
``````




---

archive/issue_comments_585356.json:
```json
{
    "body": "<a id='comment:14'></a>\nAnd should we add something like the following?\n\n```\nTo do Sage development using Conda, see\n`https://wiki.sagemath.org/Conda`_.\n```",
    "created_at": "2020-11-14T12:59:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585356",
    "user": "https://github.com/slel"
}
```

<a id='comment:14'></a>
And should we add something like the following?

```
To do Sage development using Conda, see
`https://wiki.sagemath.org/Conda`_.
```



---

archive/issue_comments_585357.json:
```json
{
    "body": "<a id='comment:15'></a>\nwell, update this branch, I'll be happy to review it",
    "created_at": "2020-11-14T14:08:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585357",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:15'></a>
well, update this branch, I'll be happy to review it



---

archive/issue_comments_585358.json:
```json
{
    "body": "**Changing branch** from \"[u/isuruf/miniforge](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/miniforge)\" to \"[u/slelievre/30883](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/30883)\".",
    "created_at": "2020-11-14T16:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585358",
    "user": "https://github.com/slel"
}
```

**Changing branch** from "[u/isuruf/miniforge](https://github.com/sagemath/sagetrac-mirror/tree/u/isuruf/miniforge)" to "[u/slelievre/30883](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/30883)".



---

archive/issue_comments_585359.json:
```json
{
    "body": "**Changing commit** from \"[d1a865b1f06506f4e7be6a3d5f1343e4327e7bff](https://github.com/sagemath/sagetrac-mirror/commit/d1a865b1f06506f4e7be6a3d5f1343e4327e7bff)\" to \"[6577ec21910c0881a60eabcb9678e61f6a40f918](https://github.com/sagemath/sagetrac-mirror/commit/6577ec21910c0881a60eabcb9678e61f6a40f918)\".",
    "created_at": "2020-11-14T16:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585359",
    "user": "https://github.com/slel"
}
```

**Changing commit** from "[d1a865b1f06506f4e7be6a3d5f1343e4327e7bff](https://github.com/sagemath/sagetrac-mirror/commit/d1a865b1f06506f4e7be6a3d5f1343e4327e7bff)" to "[6577ec21910c0881a60eabcb9678e61f6a40f918](https://github.com/sagemath/sagetrac-mirror/commit/6577ec21910c0881a60eabcb9678e61f6a40f918)".



---

archive/issue_comments_585360.json:
```json
{
    "body": "<a id='comment:16'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6577ec21910c0881a60eabcb9678e61f6a40f918\">6577ec2</a></td><td><code>30883: Recommend miniforge in conda install instructions</code></td></tr></table>\n",
    "created_at": "2020-11-14T16:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585360",
    "user": "https://github.com/slel"
}
```

<a id='comment:16'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6577ec21910c0881a60eabcb9678e61f6a40f918">6577ec2</a></td><td><code>30883: Recommend miniforge in conda install instructions</code></td></tr></table>




---

archive/issue_comments_585361.json:
```json
{
    "body": "**Changing status** from positive_review to needs_review.",
    "created_at": "2020-11-14T16:42:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585361",
    "user": "https://github.com/slel"
}
```

**Changing status** from positive_review to needs_review.



---

archive/issue_comments_585362.json:
```json
{
    "body": "<a id='comment:17'></a>\nwhy is the last URL\nin the new commit not \"hidden\"?",
    "created_at": "2020-11-14T20:01:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585362",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>
why is the last URL
in the new commit not "hidden"?



---

archive/issue_comments_585363.json:
```json
{
    "body": "**Changing commit** from \"[6577ec21910c0881a60eabcb9678e61f6a40f918](https://github.com/sagemath/sagetrac-mirror/commit/6577ec21910c0881a60eabcb9678e61f6a40f918)\" to \"[485eb7eb1be642b3aadd05745bceb98f9bc86d11](https://github.com/sagemath/sagetrac-mirror/commit/485eb7eb1be642b3aadd05745bceb98f9bc86d11)\".",
    "created_at": "2020-11-14T22:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585363",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6577ec21910c0881a60eabcb9678e61f6a40f918](https://github.com/sagemath/sagetrac-mirror/commit/6577ec21910c0881a60eabcb9678e61f6a40f918)" to "[485eb7eb1be642b3aadd05745bceb98f9bc86d11](https://github.com/sagemath/sagetrac-mirror/commit/485eb7eb1be642b3aadd05745bceb98f9bc86d11)".



---

archive/issue_comments_585364.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/485eb7eb1be642b3aadd05745bceb98f9bc86d11\">485eb7e</a></td><td><code>30883: hypertext link to Sage wiki Conda page</code></td></tr></table>\n",
    "created_at": "2020-11-14T22:25:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585364",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/485eb7eb1be642b3aadd05745bceb98f9bc86d11">485eb7e</a></td><td><code>30883: hypertext link to Sage wiki Conda page</code></td></tr></table>




---

archive/issue_comments_585365.json:
```json
{
    "body": "<a id='comment:19'></a>\nBetter?",
    "created_at": "2020-11-14T22:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585365",
    "user": "https://github.com/slel"
}
```

<a id='comment:19'></a>
Better?



---

archive/issue_comments_585366.json:
```json
{
    "body": "**Changing author** from \"Isuru Fernando\" to \"Isuru Fernando, Samuel Leli\u00e8vre\".",
    "created_at": "2020-11-14T22:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585366",
    "user": "https://github.com/isuruf"
}
```

**Changing author** from "Isuru Fernando" to "Isuru Fernando, Samuel Lelièvre".



---

archive/issue_comments_585367.json:
```json
{
    "body": "**Changing reviewer** from \"Dima Pasechnik\" to \"Dima Pasechnik, Isuru Fernando\".",
    "created_at": "2020-11-14T22:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585367",
    "user": "https://github.com/isuruf"
}
```

**Changing reviewer** from "Dima Pasechnik" to "Dima Pasechnik, Isuru Fernando".



---

archive/issue_comments_585368.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-11-14T22:27:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585368",
    "user": "https://github.com/isuruf"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_090509.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-22T15:05:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30883#event-90509"
}
```



---

archive/issue_comments_585369.json:
```json
{
    "body": "**Changing branch** from \"[u/slelievre/30883](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/30883)\" to \"[485eb7eb1be642b3aadd05745bceb98f9bc86d11](https://github.com/sagemath/sagetrac-mirror/commit/485eb7eb1be642b3aadd05745bceb98f9bc86d11)\".",
    "created_at": "2020-11-22T15:05:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30883",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30883#issuecomment-585369",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/slelievre/30883](https://github.com/sagemath/sagetrac-mirror/tree/u/slelievre/30883)" to "[485eb7eb1be642b3aadd05745bceb98f9bc86d11](https://github.com/sagemath/sagetrac-mirror/commit/485eb7eb1be642b3aadd05745bceb98f9bc86d11)".
