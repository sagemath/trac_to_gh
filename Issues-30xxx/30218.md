# Issue 30218: Category InnerProductSpaces

archive/issues_029981.json:
```json
{
    "body": "CC:  @tscrim @orlitzky @egourgoulhon @mjungmath @kcrisman\n\n(follow-up from #30092)\n\n\nWe define a category `InnerProductSpaces` with \n- parent method `dual` (which returns `self`),\n- element method `inner_product`.\n\n**A complication for complex vector spaces:** `FreeModule` defines:\n- `dot_product` - which ignores `inner_product_matrix` and does not conjugate\n- `hermitian_inner_product` - which ignores `inner_product_matrix` but conjugates the left factor (`self`)\n- `inner_product` - which uses `inner_product_matrix` but does not conjugate.\n\nPerhaps we need to add an extra parameter `inner_product_hermitian` to `FreeModule`. For a complex base ring, the module would only be added to the category of `InnerProductSpaces` if this is `True`.\n\n\n`MatrixSpace` elements currently do not have `inner_product`. \n\n\n\nReferences:\n- #10683 ... where `hermitian_inner_product` was introduced\n- [numpy.inner](https://numpy.org/doc/stable/reference/generated/numpy.inner.html) and [numpy.dot](https://numpy.org/doc/stable/reference/generated/numpy.dot.html#numpy.dot), [numpy.tensordot](https://numpy.org/doc/stable/reference/generated/numpy.tensordot.html#numpy.tensordot), [numpy.einsum](https://numpy.org/doc/stable/reference/generated/numpy.einsum.html#numpy.einsum) do not conjugate.\n- [numpy.vdot](https://numpy.org/doc/stable/reference/generated/numpy.vdot.html#numpy.vdot) conjugates the left factor; and also handles the inner product of matrices in the same way.\n- SymPy's [Matrix.dot](https://docs.sympy.org/latest/modules/matrices/matrices.html#sympy.matrices.matrices.MatrixBase.dot) has parameters `hermitian` and `conjugate_convention` that control if and how factors are conjugated.\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30218\n\n",
    "created_at": "2020-07-25T21:05:53Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "Category InnerProductSpaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30218",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @tscrim @orlitzky @egourgoulhon @mjungmath @kcrisman

(follow-up from #30092)


We define a category `InnerProductSpaces` with 
- parent method `dual` (which returns `self`),
- element method `inner_product`.

**A complication for complex vector spaces:** `FreeModule` defines:
- `dot_product` - which ignores `inner_product_matrix` and does not conjugate
- `hermitian_inner_product` - which ignores `inner_product_matrix` but conjugates the left factor (`self`)
- `inner_product` - which uses `inner_product_matrix` but does not conjugate.

Perhaps we need to add an extra parameter `inner_product_hermitian` to `FreeModule`. For a complex base ring, the module would only be added to the category of `InnerProductSpaces` if this is `True`.


`MatrixSpace` elements currently do not have `inner_product`. 



References:
- #10683 ... where `hermitian_inner_product` was introduced
- [numpy.inner](https://numpy.org/doc/stable/reference/generated/numpy.inner.html) and [numpy.dot](https://numpy.org/doc/stable/reference/generated/numpy.dot.html#numpy.dot), [numpy.tensordot](https://numpy.org/doc/stable/reference/generated/numpy.tensordot.html#numpy.tensordot), [numpy.einsum](https://numpy.org/doc/stable/reference/generated/numpy.einsum.html#numpy.einsum) do not conjugate.
- [numpy.vdot](https://numpy.org/doc/stable/reference/generated/numpy.vdot.html#numpy.vdot) conjugates the left factor; and also handles the inner product of matrices in the same way.
- SymPy's [Matrix.dot](https://docs.sympy.org/latest/modules/matrices/matrices.html#sympy.matrices.matrices.MatrixBase.dot) has parameters `hermitian` and `conjugate_convention` that control if and how factors are conjugated.



Issue created by migration from https://trac.sagemath.org/ticket/30218





---

archive/issue_events_078065.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-29T16:37:33Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78065"
}
```



---

archive/issue_comments_425465.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30218#issuecomment-425465",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_078066.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78066"
}
```



---

archive/issue_events_078067.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78067"
}
```



---

archive/issue_comments_425466.json:
```json
{
    "body": "This is half of #2711, and probably obsoletes #29437.",
    "created_at": "2021-02-25T21:10:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30218#issuecomment-425466",
    "user": "https://github.com/orlitzky"
}
```

This is half of #2711, and probably obsoletes #29437.



---

archive/issue_events_078068.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78068"
}
```



---

archive/issue_events_078069.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:16:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78069"
}
```



---

archive/issue_comments_425467.json:
```json
{
    "body": "Replying to [comment:5 mjo]:\n> This is half of #2711, and probably obsoletes #29437.\n\n\nOn the other hand #29437 has a commit. I don't see one here.",
    "created_at": "2021-08-19T22:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30218#issuecomment-425467",
    "user": "https://github.com/slel"
}
```

Replying to [comment:5 mjo]:
> This is half of #2711, and probably obsoletes #29437.


On the other hand #29437 has a commit. I don't see one here.



---

archive/issue_events_078070.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78070"
}
```



---

archive/issue_events_078071.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78071"
}
```



---

archive/issue_events_078072.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78072"
}
```



---

archive/issue_events_078073.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78073"
}
```



---

archive/issue_events_078074.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78074"
}
```



---

archive/issue_events_078075.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30218",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30218#event-78075"
}
```
