# Issue 30996: Categories for Homset of Manifolds do not meet

archive/issues_030996.json:
```json
{
    "body": "CC:  @tscrim @egourgoulhon\n\nHere is a minimal example:\n\n```\nsage: R3 = EuclideanSpace(3) \n....: S2 = R3.sphere(coordinates='stereographic'); S2                           \n2-sphere S^2 of radius 1 smoothly embedded in the Euclidean space E^3                                                   \nsage: I = S2.identity_map()                                                     \nsage: iota = S2.embedding()                                                     \nsage: iota * I                                                                  \n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-5-2ed3e7f8e656> in <module>\n----> 1 iota * I\n\n~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map.__mul__ (build/cythonized/sage/categories/map.c:7680)()\n    895         if right.codomain() != self.domain():\n    896             raise TypeError(\"self (=%s) domain must equal right (=%s) codomain\" % (self, right))\n--> 897         return self._composition(right)\n    898 \n    899     def _composition(self, right):\n\n~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map._composition (build/cythonized/sage/categories/map.c:7854)()\n    935         \"\"\"\n    936         category = self.category_for()._meet_(right.category_for())\n--> 937         H = homset.Hom(right.domain(), self._codomain, category)\n    938         return self._composition_(right, H)\n    939 \n\n~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/homset.py in Hom(X, Y, category, check)\n    416                     # available for the following error message. It simply\n    417                     # belongs to the wrong category.\n--> 418                     raise ValueError(\"{} is not in {}\".format(O, category))\n    419 \n    420         # Construct H\n\nValueError: Euclidean space E^3 is not in Join of Category of compact topological spaces and Category of smooth manifolds over Real Field with 53 bits of precision and Category of complete metric spaces\n```\n\nIssue created by migration from https://trac.sagemath.org/ticket/31233\n\n",
    "closed_at": "2021-01-24T10:37:09Z",
    "created_at": "2021-01-13T18:36:59Z",
    "labels": [
        "component: manifolds",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Categories for Homset of Manifolds do not meet",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30996",
    "user": "https://github.com/mjungmath"
}
```
CC:  @tscrim @egourgoulhon

Here is a minimal example:

```
sage: R3 = EuclideanSpace(3) 
....: S2 = R3.sphere(coordinates='stereographic'); S2                           
2-sphere S^2 of radius 1 smoothly embedded in the Euclidean space E^3                                                   
sage: I = S2.identity_map()                                                     
sage: iota = S2.embedding()                                                     
sage: iota * I                                                                  
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-5-2ed3e7f8e656> in <module>
----> 1 iota * I

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map.__mul__ (build/cythonized/sage/categories/map.c:7680)()
    895         if right.codomain() != self.domain():
    896             raise TypeError("self (=%s) domain must equal right (=%s) codomain" % (self, right))
--> 897         return self._composition(right)
    898 
    899     def _composition(self, right):

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/map.pyx in sage.categories.map.Map._composition (build/cythonized/sage/categories/map.c:7854)()
    935         """
    936         category = self.category_for()._meet_(right.category_for())
--> 937         H = homset.Hom(right.domain(), self._codomain, category)
    938         return self._composition_(right, H)
    939 

~/Projekte/sage-devel/local/lib/python3.8/site-packages/sage/categories/homset.py in Hom(X, Y, category, check)
    416                     # available for the following error message. It simply
    417                     # belongs to the wrong category.
--> 418                     raise ValueError("{} is not in {}".format(O, category))
    419 
    420         # Construct H

ValueError: Euclidean space E^3 is not in Join of Category of compact topological spaces and Category of smooth manifolds over Real Field with 53 bits of precision and Category of complete metric spaces
```

Issue created by migration from https://trac.sagemath.org/ticket/31233





---

archive/issue_comments_442152.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-01-13T19:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442152",
    "user": "https://github.com/mjungmath"
}
```

New commits:



---

archive/issue_comments_442153.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-13T19:01:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442153",
    "user": "https://github.com/mjungmath"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_442154.json:
```json
{
    "body": "There are some failed doctests in `integrated_curve.py` on `__recude__`. However, I think this is the proper way to do it. Just overwrite the docstrings?",
    "created_at": "2021-01-13T20:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442154",
    "user": "https://github.com/mjungmath"
}
```

There are some failed doctests in `integrated_curve.py` on `__recude__`. However, I think this is the proper way to do it. Just overwrite the docstrings?



---

archive/issue_comments_442155.json:
```json
{
    "body": "It depends on what the failures are. In this case, it seems like the best thing is to just change them.\n\nThis is probably the right solution. It feels slightly strange to weaken the type of morphism, but this doesn't make so much sense at the category level I think.",
    "created_at": "2021-01-14T05:20:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442155",
    "user": "https://github.com/tscrim"
}
```

It depends on what the failures are. In this case, it seems like the best thing is to just change them.

This is probably the right solution. It feels slightly strange to weaken the type of morphism, but this doesn't make so much sense at the category level I think.



---

archive/issue_comments_442156.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-14T08:59:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_442157.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-14T13:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_442158.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-14T16:36:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_442159.json:
```json
{
    "body": "Even mathematically it makes more sense to restrict the categories.\n\nThis should be it. Wait for green patchbot.",
    "created_at": "2021-01-14T16:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442159",
    "user": "https://github.com/mjungmath"
}
```

Even mathematically it makes more sense to restrict the categories.

This should be it. Wait for green patchbot.



---

archive/issue_comments_442160.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-01-15T03:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442160",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_442161.json:
```json
{
    "body": "LGTM.",
    "created_at": "2021-01-15T03:00:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442161",
    "user": "https://github.com/tscrim"
}
```

LGTM.



---

archive/issue_comments_442162.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-01-15T09:37:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442162",
    "user": "https://github.com/mjungmath"
}
```

Thanks!



---

archive/issue_events_081636.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T10:37:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30996#event-81636"
}
```



---

archive/issue_comments_442163.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-01-24T10:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30996",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30996#issuecomment-442163",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
