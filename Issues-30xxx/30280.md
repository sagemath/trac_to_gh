# Issue 30280: Immutability of Affine Connections

archive/issues_030043.json:
```json
{
    "assignees": [],
    "body": "See #30261.\n\nIn this ticket, we introduce immutability to affine connections. Also, we fix the buggy `hash` function.\n\nDepends on #30285\n\nBranch/Commit: **[28431c0](https://github.com/sagemath/sagetrac-mirror/commit/28431c0ca5b094e7e269125286ffba7338d43306)**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Michael Jung**\n\nComponent: **manifolds**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30280_\n\n",
    "closed_at": "2020-08-10T18:50:10Z",
    "created_at": "2020-08-03T16:47:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Immutability of Affine Connections",
    "type": "issue",
    "updated_at": "2020-08-10T18:50:10Z",
    "url": "https://github.com/sagemath/sage/issues/30280",
    "user": "https://github.com/mjungmath"
}
```
See #30261.

In this ticket, we introduce immutability to affine connections. Also, we fix the buggy `hash` function.

Depends on #30285

Branch/Commit: **[28431c0](https://github.com/sagemath/sagetrac-mirror/commit/28431c0ca5b094e7e269125286ffba7338d43306)**

Reviewer: **Matthias Koeppe**

Author: **Michael Jung**

Component: **manifolds**

_Issue created by migration from https://trac.sagemath.org/ticket/30280_





---

archive/issue_events_417124.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-03T16:47:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417124"
}
```



---

archive/issue_events_417125.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-03T16:47:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417125"
}
```



---

archive/issue_comments_480415.json:
```json
{
    "body": "Dependencies: **#30281**",
    "created_at": "2020-08-03T16:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480415",
    "user": "https://github.com/mjungmath"
}
```

Dependencies: **#30281**



---

archive/issue_comments_480416.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+See #30261.\n \n+In this ticket, we introduce immutability to affine connections. Also, we fix the buggy `hash` function.\n``````\n",
    "created_at": "2020-08-03T16:58:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480416",
    "user": "https://github.com/mjungmath"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+See #30261.
 
+In this ticket, we introduce immutability to affine connections. Also, we fix the buggy `hash` function.
``````




---

archive/issue_events_417126.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-03T16:58:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20manifolds",
    "label_color": "0000ff",
    "label_name": "c: manifolds",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417126"
}
```



---

archive/issue_events_417127.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-03T16:58:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417127"
}
```



---

archive/issue_comments_480417.json:
```json
{
    "body": "Branch: **[u/gh-mjungmath/immutability_of_affine_connections](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/immutability_of_affine_connections)**",
    "created_at": "2020-08-03T18:27:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480417",
    "user": "https://github.com/mjungmath"
}
```

Branch: **[u/gh-mjungmath/immutability_of_affine_connections](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/immutability_of_affine_connections)**



---

archive/issue_comments_480418.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nTwo things are strange here. First, the test suite starts a pickling test, that didn't happen before. Secondly, for some reason `is_immutable()` does not invoke properly. The doctests fail.\n\nI have uploaded my code. Can someone please take a short look?\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0230f0bccfb3ca11db0e77633530ced20ba0ba8\">f0230f0</a></td><td><code>Trac #30281: `__reduce__` method removed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c11d29ca935d3a4b3f60d0a250fc98236118f5f6\">c11d29c</a></td><td><code>Trac #30280: immutability for affine connections</code></td></tr></table>\n",
    "created_at": "2020-08-03T18:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480418",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:3" align="right">comment:3</div>

Two things are strange here. First, the test suite starts a pickling test, that didn't happen before. Secondly, for some reason `is_immutable()` does not invoke properly. The doctests fail.

I have uploaded my code. Can someone please take a short look?

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0230f0bccfb3ca11db0e77633530ced20ba0ba8">f0230f0</a></td><td><code>Trac #30281: `__reduce__` method removed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c11d29ca935d3a4b3f60d0a250fc98236118f5f6">c11d29c</a></td><td><code>Trac #30280: immutability for affine connections</code></td></tr></table>




---

archive/issue_comments_480419.json:
```json
{
    "body": "Commit: **[c11d29c](https://github.com/sagemath/sagetrac-mirror/commit/c11d29ca935d3a4b3f60d0a250fc98236118f5f6)**",
    "created_at": "2020-08-03T18:28:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480419",
    "user": "https://github.com/mjungmath"
}
```

Commit: **[c11d29c](https://github.com/sagemath/sagetrac-mirror/commit/c11d29ca935d3a4b3f60d0a250fc98236118f5f6)**



---

archive/issue_comments_480420.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5156c5e1a28f7c3c78e3c638567fdcbd32a3f78c\">5156c5e</a></td><td><code>Trac #30280: Mutability inheritance removed + hash function improved</code></td></tr></table>\n",
    "created_at": "2020-08-03T22:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480420",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5156c5e1a28f7c3c78e3c638567fdcbd32a3f78c">5156c5e</a></td><td><code>Trac #30280: Mutability inheritance removed + hash function improved</code></td></tr></table>




---

archive/issue_comments_480421.json:
```json
{
    "body": "Changed commit from **[c11d29c](https://github.com/sagemath/sagetrac-mirror/commit/c11d29ca935d3a4b3f60d0a250fc98236118f5f6)** to **[5156c5e](https://github.com/sagemath/sagetrac-mirror/commit/5156c5e1a28f7c3c78e3c638567fdcbd32a3f78c)**",
    "created_at": "2020-08-03T22:22:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480421",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c11d29c](https://github.com/sagemath/sagetrac-mirror/commit/c11d29ca935d3a4b3f60d0a250fc98236118f5f6)** to **[5156c5e](https://github.com/sagemath/sagetrac-mirror/commit/5156c5e1a28f7c3c78e3c638567fdcbd32a3f78c)**



---

archive/issue_comments_480422.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI have no idea what the problem was. Until this is resolved, I propose to remove the inheritance and implement the immutability manually, see last commit.",
    "created_at": "2020-08-03T22:31:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480422",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:5" align="right">comment:5</div>

I have no idea what the problem was. Until this is resolved, I propose to remove the inheritance and implement the immutability manually, see last commit.



---

archive/issue_comments_480423.json:
```json
{
    "body": "Author: **Michael Jung**",
    "created_at": "2020-08-04T07:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480423",
    "user": "https://github.com/mjungmath"
}
```

Author: **Michael Jung**



---

archive/issue_events_417128.json:
```json
{
    "actor": "https://github.com/mjungmath",
    "created_at": "2020-08-04T07:54:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417128"
}
```



---

archive/issue_comments_480424.json:
```json
{
    "body": "Changed dependencies from **#30281** to none",
    "created_at": "2020-08-04T07:54:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480424",
    "user": "https://github.com/mjungmath"
}
```

Changed dependencies from **#30281** to none



---

archive/issue_comments_480425.json:
```json
{
    "body": "Changed commit from **[5156c5e](https://github.com/sagemath/sagetrac-mirror/commit/5156c5e1a28f7c3c78e3c638567fdcbd32a3f78c)** to **[20d31b3](https://github.com/sagemath/sagetrac-mirror/commit/20d31b32c281968092d81ac945de48d677285027)**",
    "created_at": "2020-08-04T08:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480425",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[5156c5e](https://github.com/sagemath/sagetrac-mirror/commit/5156c5e1a28f7c3c78e3c638567fdcbd32a3f78c)** to **[20d31b3](https://github.com/sagemath/sagetrac-mirror/commit/20d31b32c281968092d81ac945de48d677285027)**



---

archive/issue_comments_480426.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20d31b32c281968092d81ac945de48d677285027\">20d31b3</a></td><td><code>Trac #30280: removing __reduce__from mutability revert</code></td></tr></table>\n",
    "created_at": "2020-08-04T08:22:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480426",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20d31b32c281968092d81ac945de48d677285027">20d31b3</a></td><td><code>Trac #30280: removing __reduce__from mutability revert</code></td></tr></table>




---

archive/issue_comments_480427.json:
```json
{
    "body": "Changed commit from **[20d31b3](https://github.com/sagemath/sagetrac-mirror/commit/20d31b32c281968092d81ac945de48d677285027)** to **[b885ec8](https://github.com/sagemath/sagetrac-mirror/commit/b885ec8fe8a8eac2cb913addfc38e2be262d9860)**",
    "created_at": "2020-08-04T15:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480427",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[20d31b3](https://github.com/sagemath/sagetrac-mirror/commit/20d31b32c281968092d81ac945de48d677285027)** to **[b885ec8](https://github.com/sagemath/sagetrac-mirror/commit/b885ec8fe8a8eac2cb913addfc38e2be262d9860)**



---

archive/issue_comments_480428.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b885ec8fe8a8eac2cb913addfc38e2be262d9860\">b885ec8</a></td><td><code>Trac #30280: doctests fixed</code></td></tr></table>\n",
    "created_at": "2020-08-04T15:14:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480428",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b885ec8fe8a8eac2cb913addfc38e2be262d9860">b885ec8</a></td><td><code>Trac #30280: doctests fixed</code></td></tr></table>




---

archive/issue_comments_480429.json:
```json
{
    "body": "Dependencies: **#30285**",
    "created_at": "2020-08-04T16:42:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480429",
    "user": "https://github.com/mjungmath"
}
```

Dependencies: **#30285**



---

archive/issue_comments_480430.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b1ef171687fbd1b935e36fa9177920e11eebd79\">3b1ef17</a></td><td><code>Trac #30285: copy method added</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d347f5456707c9a8538781fa1e7da6b37e04f24\">9d347f5</a></td><td><code>Trac #30280: copy method merged + documentation improved</code></td></tr></table>\n",
    "created_at": "2020-08-04T16:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480430",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b1ef171687fbd1b935e36fa9177920e11eebd79">3b1ef17</a></td><td><code>Trac #30285: copy method added</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d347f5456707c9a8538781fa1e7da6b37e04f24">9d347f5</a></td><td><code>Trac #30280: copy method merged + documentation improved</code></td></tr></table>




---

archive/issue_comments_480431.json:
```json
{
    "body": "Changed commit from **[b885ec8](https://github.com/sagemath/sagetrac-mirror/commit/b885ec8fe8a8eac2cb913addfc38e2be262d9860)** to **[9d347f5](https://github.com/sagemath/sagetrac-mirror/commit/9d347f5456707c9a8538781fa1e7da6b37e04f24)**",
    "created_at": "2020-08-04T16:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480431",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[b885ec8](https://github.com/sagemath/sagetrac-mirror/commit/b885ec8fe8a8eac2cb913addfc38e2be262d9860)** to **[9d347f5](https://github.com/sagemath/sagetrac-mirror/commit/9d347f5456707c9a8538781fa1e7da6b37e04f24)**



---

archive/issue_comments_480432.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI think it would be better to rebase it, removing the reverted commit and the reverting commit.",
    "created_at": "2020-08-04T21:50:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480432",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

I think it would be better to rebase it, removing the reverted commit and the reverting commit.



---

archive/issue_comments_480433.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dfa1d097eb43fa294fbc22576bc50382cd16085\">6dfa1d0</a></td><td><code>Trac #30280: immutability for affine connections</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc07910b52d55d4bc9074ab4fe99603783ef2e21\">fc07910</a></td><td><code>Trac #30280: Mutability inheritance removed + hash function improved</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75b02c46a046468a990eaa1f0c8ac142392fdaab\">75b02c4</a></td><td><code>Trac #30280: doctests fixed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/920bb12550d79dce214d2b83aa1ce9bc34f2dbee\">920bb12</a></td><td><code>Trac #30285: copy method added</code></td></tr></table>\n",
    "created_at": "2020-08-04T22:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480433",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dfa1d097eb43fa294fbc22576bc50382cd16085">6dfa1d0</a></td><td><code>Trac #30280: immutability for affine connections</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc07910b52d55d4bc9074ab4fe99603783ef2e21">fc07910</a></td><td><code>Trac #30280: Mutability inheritance removed + hash function improved</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75b02c46a046468a990eaa1f0c8ac142392fdaab">75b02c4</a></td><td><code>Trac #30280: doctests fixed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/920bb12550d79dce214d2b83aa1ce9bc34f2dbee">920bb12</a></td><td><code>Trac #30285: copy method added</code></td></tr></table>




---

archive/issue_comments_480434.json:
```json
{
    "body": "Changed commit from **[9d347f5](https://github.com/sagemath/sagetrac-mirror/commit/9d347f5456707c9a8538781fa1e7da6b37e04f24)** to **[920bb12](https://github.com/sagemath/sagetrac-mirror/commit/920bb12550d79dce214d2b83aa1ce9bc34f2dbee)**",
    "created_at": "2020-08-04T22:13:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480434",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9d347f5](https://github.com/sagemath/sagetrac-mirror/commit/9d347f5456707c9a8538781fa1e7da6b37e04f24)** to **[920bb12](https://github.com/sagemath/sagetrac-mirror/commit/920bb12550d79dce214d2b83aa1ce9bc34f2dbee)**



---

archive/issue_comments_480435.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@mkoeppe](#comment:12):\n> I think it would be better to rebase it, removing the reverted commit and the reverting commit.\n\nLike this? I hope everything worked out during the rebase.",
    "created_at": "2020-08-04T22:13:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480435",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@mkoeppe](#comment:12):
> I think it would be better to rebase it, removing the reverted commit and the reverting commit.

Like this? I hope everything worked out during the rebase.



---

archive/issue_comments_480436.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNo, apparently not...I hate rebasing...",
    "created_at": "2020-08-04T22:15:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480436",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:15" align="right">comment:15</div>

No, apparently not...I hate rebasing...



---

archive/issue_comments_480437.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0230f0bccfb3ca11db0e77633530ced20ba0ba8\">f0230f0</a></td><td><code>Trac #30281: `__reduce__` method removed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c11d29ca935d3a4b3f60d0a250fc98236118f5f6\">c11d29c</a></td><td><code>Trac #30280: immutability for affine connections</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5156c5e1a28f7c3c78e3c638567fdcbd32a3f78c\">5156c5e</a></td><td><code>Trac #30280: Mutability inheritance removed + hash function improved</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20d31b32c281968092d81ac945de48d677285027\">20d31b3</a></td><td><code>Trac #30280: removing __reduce__from mutability revert</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b885ec8fe8a8eac2cb913addfc38e2be262d9860\">b885ec8</a></td><td><code>Trac #30280: doctests fixed</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b1ef171687fbd1b935e36fa9177920e11eebd79\">3b1ef17</a></td><td><code>Trac #30285: copy method added</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d347f5456707c9a8538781fa1e7da6b37e04f24\">9d347f5</a></td><td><code>Trac #30280: copy method merged + documentation improved</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8e28ebca601c3ea3017b3af80bc022bbf860e0c1\">8e28ebc</a></td><td><code>Merge commit '9d347f5456707' into t/30280/immutability_of_affine_connections</code></td></tr></table>\n",
    "created_at": "2020-08-04T22:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480437",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0230f0bccfb3ca11db0e77633530ced20ba0ba8">f0230f0</a></td><td><code>Trac #30281: `__reduce__` method removed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c11d29ca935d3a4b3f60d0a250fc98236118f5f6">c11d29c</a></td><td><code>Trac #30280: immutability for affine connections</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5156c5e1a28f7c3c78e3c638567fdcbd32a3f78c">5156c5e</a></td><td><code>Trac #30280: Mutability inheritance removed + hash function improved</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20d31b32c281968092d81ac945de48d677285027">20d31b3</a></td><td><code>Trac #30280: removing __reduce__from mutability revert</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b885ec8fe8a8eac2cb913addfc38e2be262d9860">b885ec8</a></td><td><code>Trac #30280: doctests fixed</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b1ef171687fbd1b935e36fa9177920e11eebd79">3b1ef17</a></td><td><code>Trac #30285: copy method added</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d347f5456707c9a8538781fa1e7da6b37e04f24">9d347f5</a></td><td><code>Trac #30280: copy method merged + documentation improved</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8e28ebca601c3ea3017b3af80bc022bbf860e0c1">8e28ebc</a></td><td><code>Merge commit '9d347f5456707' into t/30280/immutability_of_affine_connections</code></td></tr></table>




---

archive/issue_comments_480438.json:
```json
{
    "body": "Changed commit from **[920bb12](https://github.com/sagemath/sagetrac-mirror/commit/920bb12550d79dce214d2b83aa1ce9bc34f2dbee)** to **[8e28ebc](https://github.com/sagemath/sagetrac-mirror/commit/8e28ebca601c3ea3017b3af80bc022bbf860e0c1)**",
    "created_at": "2020-08-04T22:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480438",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[920bb12](https://github.com/sagemath/sagetrac-mirror/commit/920bb12550d79dce214d2b83aa1ce9bc34f2dbee)** to **[8e28ebc](https://github.com/sagemath/sagetrac-mirror/commit/8e28ebca601c3ea3017b3af80bc022bbf860e0c1)**



---

archive/issue_comments_480439.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nDamn it...",
    "created_at": "2020-08-04T22:19:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480439",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:17" align="right">comment:17</div>

Damn it...



---

archive/issue_comments_480440.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nCan you fix this? Please? :-/\n\nI don't even know what went wrong during the rebase. The last commit is somehow missing, but it shouldn't.\n\nThen I messed it up by merging that last commit again. That was stupid.",
    "created_at": "2020-08-04T22:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480440",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:18" align="right">comment:18</div>

Can you fix this? Please? :-/

I don't even know what went wrong during the rebase. The last commit is somehow missing, but it shouldn't.

Then I messed it up by merging that last commit again. That was stupid.



---

archive/issue_comments_480441.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nSure, let me take a look",
    "created_at": "2020-08-04T22:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480441",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Sure, let me take a look



---

archive/issue_comments_480442.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThank you! :)",
    "created_at": "2020-08-04T23:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480442",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:20" align="right">comment:20</div>

Thank you! :)



---

archive/issue_comments_480443.json:
```json
{
    "body": "Changed branch from **[u/gh-mjungmath/immutability_of_affine_connections](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/immutability_of_affine_connections)** to **[u/mkoeppe/immutability_of_affine_connections](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/immutability_of_affine_connections)**",
    "created_at": "2020-08-05T00:29:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480443",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/gh-mjungmath/immutability_of_affine_connections](https://github.com/sagemath/sagetrac-mirror/tree/u/gh-mjungmath/immutability_of_affine_connections)** to **[u/mkoeppe/immutability_of_affine_connections](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/immutability_of_affine_connections)**



---

archive/issue_events_417129.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-05T00:30:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417129"
}
```



---

archive/issue_events_417130.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-05T00:30:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417130"
}
```



---

archive/issue_comments_480444.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2020-08-05T00:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480444",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_comments_480445.json:
```json
{
    "body": "Changed commit from **[8e28ebc](https://github.com/sagemath/sagetrac-mirror/commit/8e28ebca601c3ea3017b3af80bc022bbf860e0c1)** to **[28431c0](https://github.com/sagemath/sagetrac-mirror/commit/28431c0ca5b094e7e269125286ffba7338d43306)**",
    "created_at": "2020-08-05T00:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480445",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[8e28ebc](https://github.com/sagemath/sagetrac-mirror/commit/8e28ebca601c3ea3017b3af80bc022bbf860e0c1)** to **[28431c0](https://github.com/sagemath/sagetrac-mirror/commit/28431c0ca5b094e7e269125286ffba7338d43306)**



---

archive/issue_comments_480446.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/28431c0ca5b094e7e269125286ffba7338d43306\">28431c0</a></td><td><code>Trac #30280: immutability for affine connections</code></td></tr></table>\n",
    "created_at": "2020-08-05T00:30:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480446",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/28431c0ca5b094e7e269125286ffba7338d43306">28431c0</a></td><td><code>Trac #30280: immutability for affine connections</code></td></tr></table>




---

archive/issue_comments_480447.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThanks! May I ask how you did it?",
    "created_at": "2020-08-05T05:56:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480447",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:23" align="right">comment:23</div>

Thanks! May I ask how you did it?



---

archive/issue_comments_480448.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI got really weird merge conflicts when trying to do `git rebase -i`, so I just squashed everything on top of #30285 by doing `git trac fetch 30285 && git reset FETCH_HEAD && git commit -a`.",
    "created_at": "2020-08-05T14:19:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480448",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

I got really weird merge conflicts when trying to do `git rebase -i`, so I just squashed everything on top of #30285 by doing `git trac fetch 30285 && git reset FETCH_HEAD && git commit -a`.



---

archive/issue_events_417131.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-10T18:50:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417131"
}
```



---

archive/issue_events_417132.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "d423d08e7dd46186732664b3ee46d43fac03ecf5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-10T18:50:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30280#event-417132"
}
```



---

archive/issue_comments_480449.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/immutability_of_affine_connections](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/immutability_of_affine_connections)** to **[28431c0](https://github.com/sagemath/sagetrac-mirror/commit/28431c0ca5b094e7e269125286ffba7338d43306)**",
    "created_at": "2020-08-10T18:50:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30280#issuecomment-480449",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/immutability_of_affine_connections](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/immutability_of_affine_connections)** to **[28431c0](https://github.com/sagemath/sagetrac-mirror/commit/28431c0ca5b094e7e269125286ffba7338d43306)**
