# Issue 30373: Parent methods tensor vs. tensor_product

archive/issues_030136.json:
```json
{
    "assignees": [],
    "body": "We unify the use of the methods `tensor` vs. `tensor_product` in parent classes.\n\nCurrent situation:\n\nCategory `ModulesWithBasis` provides a parent method `tensor` to construct a tensor product of modules.\n\n```\nsage: C = CombinatorialFreeModule(QQ, ['x', 'y'])                                                                                                                \nsage: C.tensor(C)                                                                                                                                                \nFree module generated by {'x', 'y'} over Rational Field # Free module generated by {'x', 'y'} over Rational Field\n```\nIt is not implemented completely for `FreeModule`\n\n```\nsage: V = FreeModule(QQ, 2)                                                                                                                                      \nsage: V.tensor(V)                                                                                                                                                \nAttributeError: type object 'FreeModule_ambient_field_with_category' has no attribute 'Tensor'\nsage: \n```\n\nIn contrast, `FiniteRankFreeModule` (which is not in `ModulesWithBasis`) uses a parent method `tensor` to construct elements.\n\n```\nsage: F = FiniteRankFreeModule(QQ, 2)\nsage: F.tensor((2, 2))                                                                                                                                           \nType-(2,2) tensor on the 2-dimensional vector space over the Rational Field\n```\n\n`FilteredVectorSpace` has both `tensor` (from `ModulesWithBasis`) and `tensor_product`, but only the latter works.\n\n```\nsage: FV = FilteredVectorSpace(2)                                                                                                                                \nsage: FV.tensor_product(FV)                                                                                                                                      \nQQ^4\nsage: FV.tensor(FV)                                                                                                                                              \nAttributeError: type object 'FilteredVectorSpace_class_with_category' has no attribute 'Tensor'\n```\nThe same is true for `FreeQuadraticModule_integer_symmetric`:\n\n```\nsage: L = IntegralLattice(Matrix(ZZ, 2, [2,1,1,-2]))                                                                                                             \nsage: L.tensor_product(L)                                                                                                                                        \nLattice of degree 4 and rank 4 over Integer Ring\nStandard basis \nInner product matrix:\n[ 4  2  2  1]\n[ 2 -4  1 -2]\n[ 2  1 -4 -2]\n[ 1 -2 -2  4]\nsage: L.tensor(L)                                                                                                                                                \nAttributeError: type object 'FreeQuadraticModule_integer_symmetric_with_categor' has no attribute 'Tensor'\n```\n\n\n**The proposed solution in this ticket** is to standardize on the method `tensor_product`, making `tensor` a deprecated alias.  \n\n`Modules` already has a `tensor_square` method, which `tensor_product` complements well.\n\nWe also add `tensor_power`.\n\nNo changes are made to the global `tensor` (unique instance of `TensorProductFunctor`).\n\nTickets:\n- #31276 Tensor Product Method for `FiniteRankFreeModule`\n- #34448 Put tensor modules of `FiniteRankFreeModule` in `Modules().TensorProducts()`\n- #34589 `VectorFieldModule`, `TensorFieldModule`, `DiffFormModule`: Add methods `tensor_product`, `tensor_power`, update category of `TensorFieldModule`\n\nSee also: #18349\n\nCC:  @tscrim @egourgoulhon @mjungmath @jhpalmieri @fchapoton\n\nBranch/Commit: **[u/mkoeppe/parent_methods_tensor_vs__tensor_product](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/parent_methods_tensor_vs__tensor_product) @ [`ed6a13f`](https://github.com/sagemath/sagetrac-mirror/commit/ed6a13f70d74e4b85765067989e6228893346860)**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **linear algebra**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30373_\n\n",
    "created_at": "2020-08-16T00:12:20Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.9",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Parent methods tensor vs. tensor_product",
    "type": "issue",
    "updated_at": "2023-01-07T21:39:40Z",
    "url": "https://github.com/sagemath/sage/issues/30373",
    "user": "https://github.com/mkoeppe"
}
```
We unify the use of the methods `tensor` vs. `tensor_product` in parent classes.

Current situation:

Category `ModulesWithBasis` provides a parent method `tensor` to construct a tensor product of modules.

```
sage: C = CombinatorialFreeModule(QQ, ['x', 'y'])                                                                                                                
sage: C.tensor(C)                                                                                                                                                
Free module generated by {'x', 'y'} over Rational Field # Free module generated by {'x', 'y'} over Rational Field
```
It is not implemented completely for `FreeModule`

```
sage: V = FreeModule(QQ, 2)                                                                                                                                      
sage: V.tensor(V)                                                                                                                                                
AttributeError: type object 'FreeModule_ambient_field_with_category' has no attribute 'Tensor'
sage: 
```

In contrast, `FiniteRankFreeModule` (which is not in `ModulesWithBasis`) uses a parent method `tensor` to construct elements.

```
sage: F = FiniteRankFreeModule(QQ, 2)
sage: F.tensor((2, 2))                                                                                                                                           
Type-(2,2) tensor on the 2-dimensional vector space over the Rational Field
```

`FilteredVectorSpace` has both `tensor` (from `ModulesWithBasis`) and `tensor_product`, but only the latter works.

```
sage: FV = FilteredVectorSpace(2)                                                                                                                                
sage: FV.tensor_product(FV)                                                                                                                                      
QQ^4
sage: FV.tensor(FV)                                                                                                                                              
AttributeError: type object 'FilteredVectorSpace_class_with_category' has no attribute 'Tensor'
```
The same is true for `FreeQuadraticModule_integer_symmetric`:

```
sage: L = IntegralLattice(Matrix(ZZ, 2, [2,1,1,-2]))                                                                                                             
sage: L.tensor_product(L)                                                                                                                                        
Lattice of degree 4 and rank 4 over Integer Ring
Standard basis 
Inner product matrix:
[ 4  2  2  1]
[ 2 -4  1 -2]
[ 2  1 -4 -2]
[ 1 -2 -2  4]
sage: L.tensor(L)                                                                                                                                                
AttributeError: type object 'FreeQuadraticModule_integer_symmetric_with_categor' has no attribute 'Tensor'
```


**The proposed solution in this ticket** is to standardize on the method `tensor_product`, making `tensor` a deprecated alias.  

`Modules` already has a `tensor_square` method, which `tensor_product` complements well.

We also add `tensor_power`.

No changes are made to the global `tensor` (unique instance of `TensorProductFunctor`).

Tickets:
- #31276 Tensor Product Method for `FiniteRankFreeModule`
- #34448 Put tensor modules of `FiniteRankFreeModule` in `Modules().TensorProducts()`
- #34589 `VectorFieldModule`, `TensorFieldModule`, `DiffFormModule`: Add methods `tensor_product`, `tensor_power`, update category of `TensorFieldModule`

See also: #18349

CC:  @tscrim @egourgoulhon @mjungmath @jhpalmieri @fchapoton

Branch/Commit: **[u/mkoeppe/parent_methods_tensor_vs__tensor_product](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/parent_methods_tensor_vs__tensor_product) @ [`ed6a13f`](https://github.com/sagemath/sagetrac-mirror/commit/ed6a13f70d74e4b85765067989e6228893346860)**

Author: **Matthias Koeppe**

Component: **linear algebra**

_Issue created by migration from https://trac.sagemath.org/ticket/30373_





---

archive/issue_events_415430.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-16T00:12:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415430"
}
```



---

archive/issue_events_415431.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-16T00:12:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20linear%20algebra",
    "label_color": "0000ff",
    "label_name": "c: linear algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415431"
}
```



---

archive/issue_events_415432.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-16T00:12:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415432"
}
```



---

archive/issue_events_415433.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-16T00:12:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415433"
}
```



---

archive/issue_comments_483205.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -50,3 +50,11 @@\n AttributeError: type object 'FreeQuadraticModule_integer_symmetric_with_categor' has no attribute 'Tensor'\n ```\n \n+\n+The proposed solution in this ticket is to standardize on `tensor_product`, making `tensor` a deprecated alias.  \n+\n+`Modules` already has a `tensor_square` method, which `tensor_product` complements well.\n+\n+We also add `tensor_power`.\n+\n+\n``````\n",
    "created_at": "2020-08-16T00:39:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483205",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -50,3 +50,11 @@
 AttributeError: type object 'FreeQuadraticModule_integer_symmetric_with_categor' has no attribute 'Tensor'
 ```
 
+
+The proposed solution in this ticket is to standardize on `tensor_product`, making `tensor` a deprecated alias.  
+
+`Modules` already has a `tensor_square` method, which `tensor_product` complements well.
+
+We also add `tensor_power`.
+
+
``````




---

archive/issue_comments_483206.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We unify the use of `tensor` vs. `tensor_product` in parent classes.\n+We unify the use of the methods `tensor` vs. `tensor_product` in parent classes.\n \n Current situation:\n \n@@ -51,10 +51,10 @@\n ```\n \n \n-The proposed solution in this ticket is to standardize on `tensor_product`, making `tensor` a deprecated alias.  \n+The proposed solution in this ticket is to standardize on the method `tensor_product`, making `tensor` a deprecated alias.  \n \n `Modules` already has a `tensor_square` method, which `tensor_product` complements well.\n \n We also add `tensor_power`.\n \n-\n+No changes are made to the global `tensor` (unique instance of `TensorProductFunctor`).\n``````\n",
    "created_at": "2020-08-16T00:51:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483206",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We unify the use of `tensor` vs. `tensor_product` in parent classes.
+We unify the use of the methods `tensor` vs. `tensor_product` in parent classes.
 
 Current situation:
 
@@ -51,10 +51,10 @@
 ```
 
 
-The proposed solution in this ticket is to standardize on `tensor_product`, making `tensor` a deprecated alias.  
+The proposed solution in this ticket is to standardize on the method `tensor_product`, making `tensor` a deprecated alias.  
 
 `Modules` already has a `tensor_square` method, which `tensor_product` complements well.
 
 We also add `tensor_power`.
 
-
+No changes are made to the global `tensor` (unique instance of `TensorProductFunctor`).
``````




---

archive/issue_events_415434.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415434"
}
```



---

archive/issue_events_415435.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415435"
}
```



---

archive/issue_comments_483207.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -58,3 +58,5 @@\n We also add `tensor_power`.\n \n No changes are made to the global `tensor` (unique instance of `TensorProductFunctor`).\n+\n+See also: #18349\n``````\n",
    "created_at": "2020-11-29T23:44:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483207",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -58,3 +58,5 @@
 We also add `tensor_power`.
 
 No changes are made to the global `tensor` (unique instance of `TensorProductFunctor`).
+
+See also: #18349
``````




---

archive/issue_comments_483208.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nA few other things to think about:\n- In the first example, `C.tensor(C, C)` works as expected. In contrast, the `tensor` function doesn't take multiple inputs, but instead an iterable: `tensor([C,C,C])` instead of `tensor(C, C, C)`. I would prefer a consistent syntax.\n- What about tensoring elements together? Right now the `tensor` function works on elements, although the documentation doesn't make this clear. I am happy for this to continue, but again, the syntax is different for `tensor([a,b,c])` vs. `a.tensor(b,c)`.",
    "created_at": "2021-01-20T18:43:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483208",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:6" align="right">comment:6</div>

A few other things to think about:
- In the first example, `C.tensor(C, C)` works as expected. In contrast, the `tensor` function doesn't take multiple inputs, but instead an iterable: `tensor([C,C,C])` instead of `tensor(C, C, C)`. I would prefer a consistent syntax.
- What about tensoring elements together? Right now the `tensor` function works on elements, although the documentation doesn't make this clear. I am happy for this to continue, but again, the syntax is different for `tensor([a,b,c])` vs. `a.tensor(b,c)`.



---

archive/issue_comments_483209.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jhpalmieri](#comment%3A6):\n> A few other things to think about:\n> - In the first example, `C.tensor(C, C)` works as expected. In contrast, the `tensor` function doesn't take multiple inputs, but instead an iterable: `tensor([C,C,C])` instead of `tensor(C, C, C)`. I would prefer a consistent syntax.\n\n+1. I don't have a strong opinion which one we choose. Multiple inputs feels more flexible (and doesn't need an additional bracket).\n\n> - What about tensoring elements together? Right now the `tensor` function works on elements, although the documentation doesn't make this clear. I am happy for this to continue, but again, the syntax is different for `tensor([a,b,c])` vs. `a.tensor(b,c)`.\n\nI like that behavior, too. However, it feels to me like this behavior was not intended and just works because the element provides a `tensor` method (that's probably why it's not mentioned in the documentation). From a mathematical-categorial viewpoint this behavior is anyway unexpected (functors usually do not act on objects of objects).\n\nIf we want to promote this, which I would agree with, the syntax should indeed be the same.\n\nThis might also be a good opportunity to introduce the `@` notation you have proposed in [here](https://github.com/sagemath/sage/issues/30244#comment:3) which I really like (so +1 from my side, too).\n\nAs for `FiniteRankFreeModule`, introducing methods like `tensor_product` and `tensor_power` is readily done (I already finished the former).\n\nSo, should we split the task into several pieces, and I provide the `FiniteRankFreeModule` add-on? You just have to tell me which syntax you prefer.",
    "created_at": "2021-01-21T18:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483209",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jhpalmieri](#comment%3A6):
> A few other things to think about:
> - In the first example, `C.tensor(C, C)` works as expected. In contrast, the `tensor` function doesn't take multiple inputs, but instead an iterable: `tensor([C,C,C])` instead of `tensor(C, C, C)`. I would prefer a consistent syntax.

+1. I don't have a strong opinion which one we choose. Multiple inputs feels more flexible (and doesn't need an additional bracket).

> - What about tensoring elements together? Right now the `tensor` function works on elements, although the documentation doesn't make this clear. I am happy for this to continue, but again, the syntax is different for `tensor([a,b,c])` vs. `a.tensor(b,c)`.

I like that behavior, too. However, it feels to me like this behavior was not intended and just works because the element provides a `tensor` method (that's probably why it's not mentioned in the documentation). From a mathematical-categorial viewpoint this behavior is anyway unexpected (functors usually do not act on objects of objects).

If we want to promote this, which I would agree with, the syntax should indeed be the same.

This might also be a good opportunity to introduce the `@` notation you have proposed in [here](https://github.com/sagemath/sage/issues/30244#comment:3) which I really like (so +1 from my side, too).

As for `FiniteRankFreeModule`, introducing methods like `tensor_product` and `tensor_power` is readily done (I already finished the former).

So, should we split the task into several pieces, and I provide the `FiniteRankFreeModule` add-on? You just have to tell me which syntax you prefer.



---

archive/issue_comments_483210.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@mjungmath](#comment%3A7):\n> This might also be a good opportunity to introduce the `@` notation you have proposed in [here](https://github.com/sagemath/sage/issues/30244#comment:3) which I really like (so +1 from my side, too).\n\n-1 on this - as per discussion in #30244, `@` should be for tensor contraction, not tensor product",
    "created_at": "2021-01-21T18:10:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483210",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@mjungmath](#comment%3A7):
> This might also be a good opportunity to introduce the `@` notation you have proposed in [here](https://github.com/sagemath/sage/issues/30244#comment:3) which I really like (so +1 from my side, too).

-1 on this - as per discussion in #30244, `@` should be for tensor contraction, not tensor product



---

archive/issue_comments_483211.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@mkoeppe](#comment%3A8):\n> Replying to [@mjungmath](#comment%3A7):\n> > This might also be a good opportunity to introduce the `@` notation you have proposed in [here](https://github.com/sagemath/sage/issues/30244#comment:3) which I really like (so +1 from my side, too).\n\n> \n> -1 on this - as per discussion in #30244, `@` should be for tensor contraction, not tensor product\n\nBut the idea in principle remains, doesn't it? What about `#` instead? That's already the symbol for tensor products as in `categories/tensor.py`.\n\nArrrg, that's commenting...",
    "created_at": "2021-01-21T18:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483211",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@mkoeppe](#comment%3A8):
> Replying to [@mjungmath](#comment%3A7):
> > This might also be a good opportunity to introduce the `@` notation you have proposed in [here](https://github.com/sagemath/sage/issues/30244#comment:3) which I really like (so +1 from my side, too).

> 
> -1 on this - as per discussion in #30244, `@` should be for tensor contraction, not tensor product

But the idea in principle remains, doesn't it? What about `#` instead? That's already the symbol for tensor products as in `categories/tensor.py`.

Arrrg, that's commenting...



---

archive/issue_comments_483212.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nPython has only a fixed set of binary operators available. One can resort to overloading something that's rarely used otherwise. In #30244 I suggested `&` as a possibility, but I am not sure if it's a good idea.",
    "created_at": "2021-01-21T18:18:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483212",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:10" align="right">comment:10</div>

Python has only a fixed set of binary operators available. One can resort to overloading something that's rarely used otherwise. In #30244 I suggested `&` as a possibility, but I am not sure if it's a good idea.



---

archive/issue_comments_483213.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@mkoeppe](#comment%3A10):\n> Python has only a fixed set of binary operators available. One can resort to overloading something that's rarely used otherwise. In #30244 I suggested `&` as a possibility, but I am not sure if it's a good idea.\n\nIt feels rather uncanonical. But tensor products seem to be used quite frequently, so if there's no better bet...\n\nWhat's your opinion on the syntax?\n\nShould I open another ticket to provide `tensor_product`, `tensor_power` for `FiniteRankFreeModule` or just push it into here as open branch?",
    "created_at": "2021-01-21T18:21:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483213",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@mkoeppe](#comment%3A10):
> Python has only a fixed set of binary operators available. One can resort to overloading something that's rarely used otherwise. In #30244 I suggested `&` as a possibility, but I am not sure if it's a good idea.

It feels rather uncanonical. But tensor products seem to be used quite frequently, so if there's no better bet...

What's your opinion on the syntax?

Should I open another ticket to provide `tensor_product`, `tensor_power` for `FiniteRankFreeModule` or just push it into here as open branch?



---

archive/issue_comments_483214.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nWe should make people use the unicode `\u2297` for tensor product.\n\nMore seriously, if we can switch the syntax to `tensor(a,b,c,...)` with no extra brackets, that would be nice. I don't know if any of the tensor constructors take optional arguments, so I don't know how hard that would be to implement.",
    "created_at": "2021-01-21T18:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483214",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

We should make people use the unicode `⊗` for tensor product.

More seriously, if we can switch the syntax to `tensor(a,b,c,...)` with no extra brackets, that would be nice. I don't know if any of the tensor constructors take optional arguments, so I don't know how hard that would be to implement.



---

archive/issue_comments_483215.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI've opened a ticket for the `FiniteRankFreeModule` case: #31276.",
    "created_at": "2021-01-21T21:15:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483215",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:13" align="right">comment:13</div>

I've opened a ticket for the `FiniteRankFreeModule` case: #31276.



---

archive/issue_comments_483216.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMultiple inputs can also be really annoying when you want to create a list dynamically as you then have to add a `*` and possibly extra parentheses. The easiest thing to do is to support both behaviors. This is simple enough to implement.\n\nThe tensor unicode would be good, except it would depend on how the Python interpreter takes that. Most likely, we would need to implement another find-replace case in the preparser to go to some overloaded infix operator such as `&`.",
    "created_at": "2021-01-22T01:12:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483216",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

Multiple inputs can also be really annoying when you want to create a list dynamically as you then have to add a `*` and possibly extra parentheses. The easiest thing to do is to support both behaviors. This is simple enough to implement.

The tensor unicode would be good, except it would depend on how the Python interpreter takes that. Most likely, we would need to implement another find-replace case in the preparser to go to some overloaded infix operator such as `&`.



---

archive/issue_comments_483217.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSpeaking of shortcuts for operations: what about using `^` for the wedge product? There is nothing more appropriate than that!\n\nIf that meets your approval, I'll open a ticket for this.",
    "created_at": "2021-01-22T23:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483217",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:15" align="right">comment:15</div>

Speaking of shortcuts for operations: what about using `^` for the wedge product? There is nothing more appropriate than that!

If that meets your approval, I'll open a ticket for this.



---

archive/issue_comments_483218.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI find it too easily confused with the exponentiation operator, so I would not like to see it featured prominently in doctests.",
    "created_at": "2021-01-23T00:02:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483218",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

I find it too easily confused with the exponentiation operator, so I would not like to see it featured prominently in doctests.



---

archive/issue_comments_483219.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSo far, the `^` is not supported for exterior algebras:\n\n```\nsage: M = FiniteRankFreeModule(QQ, 3)\nsage: AM = M.dual_exterior_power(2)\nsage: a = AM.an_element()\nsage: a^2\nTraceback (most recent call last)\n...\nTypeError: unsupported operand parent(s) for ^: '2nd exterior power of the dual of the 3-dimensional vector space over the Rational Field' and 'Integer Ring'\n```\n\nBut I agree. One would rather expect `a^3 == a.wedge(a).wedge(a)` if supported.\n\nMh, one minute ago, I thought it was an ingenious idea. :D",
    "created_at": "2021-01-23T00:22:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483219",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:17" align="right">comment:17</div>

So far, the `^` is not supported for exterior algebras:

```
sage: M = FiniteRankFreeModule(QQ, 3)
sage: AM = M.dual_exterior_power(2)
sage: a = AM.an_element()
sage: a^2
Traceback (most recent call last)
...
TypeError: unsupported operand parent(s) for ^: '2nd exterior power of the dual of the 3-dimensional vector space over the Rational Field' and 'Integer Ring'
```

But I agree. One would rather expect `a^3 == a.wedge(a).wedge(a)` if supported.

Mh, one minute ago, I thought it was an ingenious idea. :D



---

archive/issue_comments_483220.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@jhpalmieri](#comment%3A16):\n> I find it too easily confused with the exponentiation operator, so I would not like to see it featured prominently in doctests.\n\nHowever, I think it would be a nice syntactic sugar since `a ^ b`, for a,b in an exterior algebra, as exponentiation does not make sense.",
    "created_at": "2021-01-23T05:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483220",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@jhpalmieri](#comment%3A16):
> I find it too easily confused with the exponentiation operator, so I would not like to see it featured prominently in doctests.

However, I think it would be a nice syntactic sugar since `a ^ b`, for a,b in an exterior algebra, as exponentiation does not make sense.



---

archive/issue_comments_483221.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@tscrim](#comment%3A18):\n> Replying to [@jhpalmieri](#comment%3A16):\n> > I find it too easily confused with the exponentiation operator, so I would not like to see it featured prominently in doctests.\n\n> \n> However, I think it would be a nice syntactic sugar since `a ^ b`, for a,b in an exterior algebra, as exponentiation does not make sense.\n\nHow do we treat `^` with integers then? As a wedge product, this is the simple multiplication. And I still agree, that this case can easily be confused with the exponential since exponentiation is the standard behavior of Sage anywhere else.",
    "created_at": "2021-01-23T09:48:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483221",
    "user": "https://github.com/mjungmath"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@tscrim](#comment%3A18):
> Replying to [@jhpalmieri](#comment%3A16):
> > I find it too easily confused with the exponentiation operator, so I would not like to see it featured prominently in doctests.

> 
> However, I think it would be a nice syntactic sugar since `a ^ b`, for a,b in an exterior algebra, as exponentiation does not make sense.

How do we treat `^` with integers then? As a wedge product, this is the simple multiplication. And I still agree, that this case can easily be confused with the exponential since exponentiation is the standard behavior of Sage anywhere else.



---

archive/issue_comments_483222.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jhpalmieri](#comment%3A12):\n> We should make people use the unicode `\u2297` for tensor product.\n\nA relevant ticket here: #30473",
    "created_at": "2021-01-23T10:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483222",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jhpalmieri](#comment%3A12):
> We should make people use the unicode `⊗` for tensor product.

A relevant ticket here: #30473



---

archive/issue_comments_483223.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@mjungmath](#comment%3A19):\n> Replying to [@tscrim](#comment%3A18):\n> > \n> > However, I think it would be a nice syntactic sugar since `a ^ b`, for a,b in an exterior algebra, as exponentiation does not make sense.\n\n> \n> How do we treat `^` with integers then? As a wedge product, this is the simple multiplication. And I still agree, that this case can easily be confused with the exponential since exponentiation is the standard behavior of Sage anywhere else.\n\n+1 (and IMHO `a^b` looks too far from a wedge product).",
    "created_at": "2021-01-23T10:29:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483223",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@mjungmath](#comment%3A19):
> Replying to [@tscrim](#comment%3A18):
> > 
> > However, I think it would be a nice syntactic sugar since `a ^ b`, for a,b in an exterior algebra, as exponentiation does not make sense.

> 
> How do we treat `^` with integers then? As a wedge product, this is the simple multiplication. And I still agree, that this case can easily be confused with the exponential since exponentiation is the standard behavior of Sage anywhere else.

+1 (and IMHO `a^b` looks too far from a wedge product).



---

archive/issue_events_415436.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415436"
}
```



---

archive/issue_events_415437.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415437"
}
```



---

archive/issue_comments_483224.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483224",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_415438.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415438"
}
```



---

archive/issue_events_415439.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415439"
}
```



---

archive/issue_events_415440.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415440"
}
```



---

archive/issue_events_415441.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415441"
}
```



---

archive/issue_events_415442.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415442"
}
```



---

archive/issue_events_415443.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415443"
}
```



---

archive/issue_comments_483225.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -51,7 +51,7 @@\n ```\n \n \n-The proposed solution in this ticket is to standardize on the method `tensor_product`, making `tensor` a deprecated alias.  \n+**The proposed solution in this ticket** is to standardize on the method `tensor_product`, making `tensor` a deprecated alias.  \n \n `Modules` already has a `tensor_square` method, which `tensor_product` complements well.\n \n@@ -59,4 +59,7 @@\n \n No changes are made to the global `tensor` (unique instance of `TensorProductFunctor`).\n \n+Tickets:\n+- #31276 Tensor Product Method for `FiniteRankFreeModule`\n+\n See also: #18349\n``````\n",
    "created_at": "2022-08-23T07:25:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483225",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -51,7 +51,7 @@
 ```
 
 
-The proposed solution in this ticket is to standardize on the method `tensor_product`, making `tensor` a deprecated alias.  
+**The proposed solution in this ticket** is to standardize on the method `tensor_product`, making `tensor` a deprecated alias.  
 
 `Modules` already has a `tensor_square` method, which `tensor_product` complements well.
 
@@ -59,4 +59,7 @@
 
 No changes are made to the global `tensor` (unique instance of `TensorProductFunctor`).
 
+Tickets:
+- #31276 Tensor Product Method for `FiniteRankFreeModule`
+
 See also: #18349
``````




---

archive/issue_comments_483226.json:
```json
{
    "body": "Branch: **[u/mkoeppe/parent_methods_tensor_vs__tensor_product](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/parent_methods_tensor_vs__tensor_product)**",
    "created_at": "2022-08-23T16:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483226",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/parent_methods_tensor_vs__tensor_product](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/parent_methods_tensor_vs__tensor_product)**



---

archive/issue_comments_483227.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae72687fc0d7063c15337e7b05fa217c8f88e279\"><code>ae72687</code></a></td><td><code>sage.categories: tensor -> tensor_product</code></td></tr></table>\n",
    "created_at": "2022-08-23T16:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483227",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae72687fc0d7063c15337e7b05fa217c8f88e279"><code>ae72687</code></a></td><td><code>sage.categories: tensor -> tensor_product</code></td></tr></table>




---

archive/issue_comments_483228.json:
```json
{
    "body": "Commit: **[`ae72687`](https://github.com/sagemath/sagetrac-mirror/commit/ae72687fc0d7063c15337e7b05fa217c8f88e279)**",
    "created_at": "2022-08-23T16:50:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483228",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`ae72687`](https://github.com/sagemath/sagetrac-mirror/commit/ae72687fc0d7063c15337e7b05fa217c8f88e279)**



---

archive/issue_comments_483229.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/802673235d19ab3ed19dfff800c0e6bd385af0a0\"><code>8026732</code></a></td><td><code>sage.categories: tensor -> tensor_product</code></td></tr></table>\n",
    "created_at": "2022-08-23T17:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483229",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/802673235d19ab3ed19dfff800c0e6bd385af0a0"><code>8026732</code></a></td><td><code>sage.categories: tensor -> tensor_product</code></td></tr></table>




---

archive/issue_comments_483230.json:
```json
{
    "body": "Changed commit from **[`ae72687`](https://github.com/sagemath/sagetrac-mirror/commit/ae72687fc0d7063c15337e7b05fa217c8f88e279)** to **[`8026732`](https://github.com/sagemath/sagetrac-mirror/commit/802673235d19ab3ed19dfff800c0e6bd385af0a0)**",
    "created_at": "2022-08-23T17:10:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483230",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ae72687`](https://github.com/sagemath/sagetrac-mirror/commit/ae72687fc0d7063c15337e7b05fa217c8f88e279)** to **[`8026732`](https://github.com/sagemath/sagetrac-mirror/commit/802673235d19ab3ed19dfff800c0e6bd385af0a0)**



---

archive/issue_comments_483231.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLooks like the element classes also need to get `tensor_product` methods.\n\nI'd welcome comments in this early stage whether this is going in a good direction",
    "created_at": "2022-08-23T17:18:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483231",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Looks like the element classes also need to get `tensor_product` methods.

I'd welcome comments in this early stage whether this is going in a good direction



---

archive/issue_comments_483232.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@mkoeppe](#comment%3A31):\n> Looks like the element classes also need to get `tensor_product` methods.\n> \n> I'd welcome comments in this early stage whether this is going in a good direction\n\nFWIW, in `FiniteRankFreeModule`'s, the element tensor product is implemented via the operator `*`, i.e. via the method `__mul__`.",
    "created_at": "2022-08-23T20:39:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483232",
    "user": "https://github.com/egourgoulhon"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@mkoeppe](#comment%3A31):
> Looks like the element classes also need to get `tensor_product` methods.
> 
> I'd welcome comments in this early stage whether this is going in a good direction

FWIW, in `FiniteRankFreeModule`'s, the element tensor product is implemented via the operator `*`, i.e. via the method `__mul__`.



---

archive/issue_comments_483233.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -21,6 +21,7 @@\n In contrast, `FiniteRankFreeModule` (which is not in `ModulesWithBasis`) uses a parent method `tensor` to construct elements.\n \n ```\n+sage: F = FiniteRankFreeModule(QQ, 2)\n sage: F.tensor((2, 2))                                                                                                                                           \n Type-(2,2) tensor on the 2-dimensional vector space over the Rational Field\n ```\n``````\n",
    "created_at": "2022-08-23T20:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483233",
    "user": "https://github.com/egourgoulhon"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -21,6 +21,7 @@
 In contrast, `FiniteRankFreeModule` (which is not in `ModulesWithBasis`) uses a parent method `tensor` to construct elements.
 
 ```
+sage: F = FiniteRankFreeModule(QQ, 2)
 sage: F.tensor((2, 2))                                                                                                                                           
 Type-(2,2) tensor on the 2-dimensional vector space over the Rational Field
 ```
``````




---

archive/issue_comments_483234.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -63,4 +63,7 @@\n Tickets:\n - #31276 Tensor Product Method for `FiniteRankFreeModule`\n \n+Follow-up:\n+- #34448 Put tensor modules of `FiniteRankFreeModule` in `Modules().TensorProducts()`\n+\n See also: #18349\n``````\n",
    "created_at": "2022-08-29T02:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483234",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -63,4 +63,7 @@
 Tickets:
 - #31276 Tensor Product Method for `FiniteRankFreeModule`
 
+Follow-up:
+- #34448 Put tensor modules of `FiniteRankFreeModule` in `Modules().TensorProducts()`
+
 See also: #18349
``````




---

archive/issue_events_415444.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415444"
}
```



---

archive/issue_events_415445.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415445"
}
```



---

archive/issue_comments_483235.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThe branch of #34448 shows the necessary workarounds in `sage.tensors` if we wanted to keep `tensor` (not `tensor_product`) as the name of the method that implements the action of `TensorProductFunctor`: The method `FiniteRankFreeModule.tensor` would have to double both as that and as the method that construct an element.\n\nAny thoughts which of the 2 ways to go?",
    "created_at": "2022-09-04T19:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483235",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

The branch of #34448 shows the necessary workarounds in `sage.tensors` if we wanted to keep `tensor` (not `tensor_product`) as the name of the method that implements the action of `TensorProductFunctor`: The method `FiniteRankFreeModule.tensor` would have to double both as that and as the method that construct an element.

Any thoughts which of the 2 ways to go?



---

archive/issue_comments_483236.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nThe  `tensor()` method is something used by the `tensor` functor as the hook within each class to build the tensor product IIRC. So it is a little more special of a method.",
    "created_at": "2022-09-04T23:31:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483236",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:37" align="right">comment:37</div>

The  `tensor()` method is something used by the `tensor` functor as the hook within each class to build the tensor product IIRC. So it is a little more special of a method.



---

archive/issue_comments_483237.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nYes, exactly. The branch here on the ticket changes it:\n\n```\ndiff --git a/src/sage/categories/tensor.py b/src/sage/categories/tensor.py\nindex 67c4e64..18109d0 100644\n--- a/src/sage/categories/tensor.py\n+++ b/src/sage/categories/tensor.py\n@@ -48,7 +48,7 @@ class TensorProductFunctor(CovariantFunctorialConstruction):\n \n         sage: TestSuite(tensor).run()\n     \"\"\"\n-    _functor_name = \"tensor\"\n+    _functor_name = \"tensor_product\"\n     _functor_category = \"TensorProducts\"\n     symbol = \" # \"\n     unicode_symbol = f\" {unicode_otimes} \"\n```",
    "created_at": "2022-09-04T23:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483237",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:38" align="right">comment:38</div>

Yes, exactly. The branch here on the ticket changes it:

```
diff --git a/src/sage/categories/tensor.py b/src/sage/categories/tensor.py
index 67c4e64..18109d0 100644
--- a/src/sage/categories/tensor.py
+++ b/src/sage/categories/tensor.py
@@ -48,7 +48,7 @@ class TensorProductFunctor(CovariantFunctorialConstruction):
 
         sage: TestSuite(tensor).run()
     """
-    _functor_name = "tensor"
+    _functor_name = "tensor_product"
     _functor_category = "TensorProducts"
     symbol = " # "
     unicode_symbol = f" {unicode_otimes} "
```



---

archive/issue_comments_483238.json:
```json
{
    "body": "<div id=\"comment:39\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9de134f47c63d1a0e4153cbf72d7143afcde6dd5\"><code>9de134f</code></a></td><td><code>ModulesWithBasis.ParentMethods: Rename tensor to tensor_product, with deprecation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/785c197cfab3b15c3fb677b242a601dd9659041c\"><code>785c197</code></a></td><td><code>sage.categories: tensor -> tensor_product</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77cd5222b088e358c832e01c07960363ec46fb51\"><code>77cd522</code></a></td><td><code>Also rename element methods from tensor to tensor_product</code></td></tr></table>\n",
    "created_at": "2022-09-05T00:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483238",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9de134f47c63d1a0e4153cbf72d7143afcde6dd5"><code>9de134f</code></a></td><td><code>ModulesWithBasis.ParentMethods: Rename tensor to tensor_product, with deprecation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/785c197cfab3b15c3fb677b242a601dd9659041c"><code>785c197</code></a></td><td><code>sage.categories: tensor -> tensor_product</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77cd5222b088e358c832e01c07960363ec46fb51"><code>77cd522</code></a></td><td><code>Also rename element methods from tensor to tensor_product</code></td></tr></table>




---

archive/issue_comments_483239.json:
```json
{
    "body": "Changed commit from **[`8026732`](https://github.com/sagemath/sagetrac-mirror/commit/802673235d19ab3ed19dfff800c0e6bd385af0a0)** to **[`77cd522`](https://github.com/sagemath/sagetrac-mirror/commit/77cd5222b088e358c832e01c07960363ec46fb51)**",
    "created_at": "2022-09-05T00:16:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483239",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8026732`](https://github.com/sagemath/sagetrac-mirror/commit/802673235d19ab3ed19dfff800c0e6bd385af0a0)** to **[`77cd522`](https://github.com/sagemath/sagetrac-mirror/commit/77cd5222b088e358c832e01c07960363ec46fb51)**



---

archive/issue_comments_483240.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI see. It wasn\u2019t entirely clear that was the proposal.\n\nI am maybe marginally in favor of `tensor` since we say \u201cA tensor B\u201d and it would create slightly tension with the functor being called `tensor` In the global namespace. For the middle example, another way out of this would be to check the types of the input.\n\nIMO, the last two examples in the ticket description perhaps should fail because the result doesn\u2019t know about its tensor product construction. Yes, `QQ^2 (x) QQ^2 = QQ^2 (+) QQ^2 = QQ^4`, where `=` means isomorphic as `QQ`-vector spaces here, but there are two separate canonical projections onto `QQ^2` in the middle case and a functoral way to lift up `QQ^2` endomorphisms in the first case. There are also different structures if we have additional structure, such as a grading. TL;DR they are losing information that the result of `tensor` (Perhaps implicitly) is assuming is preserved.",
    "created_at": "2022-09-05T00:18:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483240",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:40" align="right">comment:40</div>

I see. It wasn’t entirely clear that was the proposal.

I am maybe marginally in favor of `tensor` since we say “A tensor B” and it would create slightly tension with the functor being called `tensor` In the global namespace. For the middle example, another way out of this would be to check the types of the input.

IMO, the last two examples in the ticket description perhaps should fail because the result doesn’t know about its tensor product construction. Yes, `QQ^2 (x) QQ^2 = QQ^2 (+) QQ^2 = QQ^4`, where `=` means isomorphic as `QQ`-vector spaces here, but there are two separate canonical projections onto `QQ^2` in the middle case and a functoral way to lift up `QQ^2` endomorphisms in the first case. There are also different structures if we have additional structure, such as a grading. TL;DR they are losing information that the result of `tensor` (Perhaps implicitly) is assuming is preserved.



---

archive/issue_comments_483241.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThe problem is that we have the clash with `FiniteRankFreeModule.tensor`.",
    "created_at": "2022-09-05T00:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483241",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

The problem is that we have the clash with `FiniteRankFreeModule.tensor`.



---

archive/issue_comments_483242.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [Travis Scrimshaw](#comment%3A40):\n> For the middle example, another way out of this would be to check the types of the input.\n\nAh, I see that is what you referred to already.",
    "created_at": "2022-09-05T00:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483242",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [Travis Scrimshaw](#comment%3A40):
> For the middle example, another way out of this would be to check the types of the input.

Ah, I see that is what you referred to already.



---

archive/issue_comments_483243.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nSo yes, in the branch of #34448 I fix the clash by checking types. But I'm not sure if this a clean enough solution.",
    "created_at": "2022-09-05T00:35:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483243",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

So yes, in the branch of #34448 I fix the clash by checking types. But I'm not sure if this a clean enough solution.



---

archive/issue_comments_483244.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb0f26c1e242feea9784d0c30d67327dece4a386\"><code>bb0f26c</code></a></td><td><code>src/sage/homology/chain_complex.py: Add missing import</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/719de1e7d5140ce0648ff380d65d9e7c548e2f0e\"><code>719de1e</code></a></td><td><code>git grep -l '[.]tensor(' | xargs sed -i.bak 's/[.]tensor(/.tensor_product(/'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aebe837783b1d621db3c2e54874b086935aaa6f5\"><code>aebe837</code></a></td><td><code>src/sage/categories/modules_with_basis.py: Restore 'tensor' in documentation of deprecated tensor methods</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3d6f44eba9b07ef50f1d9a582575f4b8cf96bffc\"><code>3d6f44e</code></a></td><td><code>Fix up tensor -> tensor_product changes</code></td></tr></table>\n",
    "created_at": "2022-09-05T00:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483244",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb0f26c1e242feea9784d0c30d67327dece4a386"><code>bb0f26c</code></a></td><td><code>src/sage/homology/chain_complex.py: Add missing import</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/719de1e7d5140ce0648ff380d65d9e7c548e2f0e"><code>719de1e</code></a></td><td><code>git grep -l '[.]tensor(' | xargs sed -i.bak 's/[.]tensor(/.tensor_product(/'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aebe837783b1d621db3c2e54874b086935aaa6f5"><code>aebe837</code></a></td><td><code>src/sage/categories/modules_with_basis.py: Restore 'tensor' in documentation of deprecated tensor methods</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3d6f44eba9b07ef50f1d9a582575f4b8cf96bffc"><code>3d6f44e</code></a></td><td><code>Fix up tensor -> tensor_product changes</code></td></tr></table>




---

archive/issue_comments_483245.json:
```json
{
    "body": "Changed commit from **[`77cd522`](https://github.com/sagemath/sagetrac-mirror/commit/77cd5222b088e358c832e01c07960363ec46fb51)** to **[`3d6f44e`](https://github.com/sagemath/sagetrac-mirror/commit/3d6f44eba9b07ef50f1d9a582575f4b8cf96bffc)**",
    "created_at": "2022-09-05T00:38:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483245",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`77cd522`](https://github.com/sagemath/sagetrac-mirror/commit/77cd5222b088e358c832e01c07960363ec46fb51)** to **[`3d6f44e`](https://github.com/sagemath/sagetrac-mirror/commit/3d6f44eba9b07ef50f1d9a582575f4b8cf96bffc)**



---

archive/issue_comments_483246.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nReplying to [Travis Scrimshaw](#comment%3A40):\n> IMO, the last two examples in the ticket description perhaps should fail because the result doesn\u2019t know about its tensor product construction. \n\nI haven't looked at these examples in detail, but your explanation makes sense. Nothing for this ticket though.",
    "created_at": "2022-09-05T00:40:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483246",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:45" align="right">comment:45</div>

Replying to [Travis Scrimshaw](#comment%3A40):
> IMO, the last two examples in the ticket description perhaps should fail because the result doesn’t know about its tensor product construction. 

I haven't looked at these examples in detail, but your explanation makes sense. Nothing for this ticket though.



---

archive/issue_comments_483247.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A43):\n> So yes, in the branch of #34448 I fix the clash by checking types. But I'm not sure if this a clean enough solution.\n\nIndeed, it is not the most clean solution, but it is a side effect of English (and Python) that we cannot easily distinguish between \u201ca tensor in\u201d and \u201cthe tensor with\u201d in such a concise way.",
    "created_at": "2022-09-05T00:43:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483247",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [Matthias Köppe](#comment%3A43):
> So yes, in the branch of #34448 I fix the clash by checking types. But I'm not sure if this a clean enough solution.

Indeed, it is not the most clean solution, but it is a side effect of English (and Python) that we cannot easily distinguish between “a tensor in” and “the tensor with” in such a concise way.



---

archive/issue_comments_483248.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nReplying to [Travis Scrimshaw](#comment%3A40):\n> I am maybe marginally in favor of `tensor` since we say \u201cA tensor B\u201d and it would create slightly tension with the functor being called `tensor` In the global namespace. \n\nWe could of course make `tensor` a non-deprecated alias and document that classes are allowed to overload it for additional idiomatic uses.",
    "created_at": "2022-09-05T00:43:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483248",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:47" align="right">comment:47</div>

Replying to [Travis Scrimshaw](#comment%3A40):
> I am maybe marginally in favor of `tensor` since we say “A tensor B” and it would create slightly tension with the functor being called `tensor` In the global namespace. 

We could of course make `tensor` a non-deprecated alias and document that classes are allowed to overload it for additional idiomatic uses.



---

archive/issue_comments_483249.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A45):\n> Replying to [Travis Scrimshaw](#comment%3A40):\n> > IMO, the last two examples in the ticket description perhaps should fail because the result doesn\u2019t know about its tensor product construction. \n\n> \n> I haven't looked at these examples in detail, but your explanation makes sense. Nothing for this ticket though.\n\nIf we rename it to `tensor_product`, then it starts working in a way that is incompatible with the tensor functor. It\u2019s not a really big problem, but it could run into subtleties with `tensor([C, FV])` versus `tensor([FV, C])` with one of them working (and returning a wrong answer depending on the implementation that I haven\u2019t checked) and the other not.",
    "created_at": "2022-09-05T00:45:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483249",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [Matthias Köppe](#comment%3A45):
> Replying to [Travis Scrimshaw](#comment%3A40):
> > IMO, the last two examples in the ticket description perhaps should fail because the result doesn’t know about its tensor product construction. 

> 
> I haven't looked at these examples in detail, but your explanation makes sense. Nothing for this ticket though.

If we rename it to `tensor_product`, then it starts working in a way that is incompatible with the tensor functor. It’s not a really big problem, but it could run into subtleties with `tensor([C, FV])` versus `tensor([FV, C])` with one of them working (and returning a wrong answer depending on the implementation that I haven’t checked) and the other not.



---

archive/issue_comments_483250.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nHm? No, the tensor functor calls the method given in its `_functor_name`. That's what the change in [comment:38](#comment%3A38) is for.",
    "created_at": "2022-09-05T00:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483250",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:49" align="right">comment:49</div>

Hm? No, the tensor functor calls the method given in its `_functor_name`. That's what the change in [comment:38](#comment%3A38) is for.



---

archive/issue_comments_483251.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nOh, I think I get what you are saying: These two examples are undisciplined tensor products that don't comply with the guarantees of the functor?",
    "created_at": "2022-09-05T00:49:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483251",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:50" align="right">comment:50</div>

Oh, I think I get what you are saying: These two examples are undisciplined tensor products that don't comply with the guarantees of the functor?



---

archive/issue_comments_483252.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A49):\n> Hm? No, the tensor functor calls the method given in its `_functor_name`. That's what the change in [comment:38](#comment%3A38) is for.\n\nRight, and `FV` and `L` from the description have a `tensor_product` method already. This could potentially take a CFM `C` and return, say, a filtered vector space (with the right methods), but not the other way around. Even if both worked (which is also possible), they would result in very different implementations. Although since tensor products in general are not \u201ccommutative,\u201d we can wave it away, but it would mean more brittle code.",
    "created_at": "2022-09-05T00:54:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483252",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [Matthias Köppe](#comment%3A49):
> Hm? No, the tensor functor calls the method given in its `_functor_name`. That's what the change in [comment:38](#comment%3A38) is for.

Right, and `FV` and `L` from the description have a `tensor_product` method already. This could potentially take a CFM `C` and return, say, a filtered vector space (with the right methods), but not the other way around. Even if both worked (which is also possible), they would result in very different implementations. Although since tensor products in general are not “commutative,” we can wave it away, but it would mean more brittle code.



---

archive/issue_comments_483253.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A50):\n> Oh, I think I get what you are saying: These two examples are undisciplined tensor products that don't comply with the guarantees of the functor?\n\nYes, that\u2019s right. Sorry if I wasn\u2019t explaining clearly enough.",
    "created_at": "2022-09-05T00:55:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483253",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:52" align="right">comment:52</div>

Replying to [Matthias Köppe](#comment%3A50):
> Oh, I think I get what you are saying: These two examples are undisciplined tensor products that don't comply with the guarantees of the functor?

Yes, that’s right. Sorry if I wasn’t explaining clearly enough.



---

archive/issue_comments_483254.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nBy the way, `FilteredVectorSpace` appears to be the only consumer of `sage.modules.tensor_operations`, which can probably be eliminated",
    "created_at": "2022-09-05T00:57:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483254",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:53" align="right">comment:53</div>

By the way, `FilteredVectorSpace` appears to be the only consumer of `sage.modules.tensor_operations`, which can probably be eliminated



---

archive/issue_comments_483255.json:
```json
{
    "body": "Changed commit from **[`3d6f44e`](https://github.com/sagemath/sagetrac-mirror/commit/3d6f44eba9b07ef50f1d9a582575f4b8cf96bffc)** to **[`c90acc6`](https://github.com/sagemath/sagetrac-mirror/commit/c90acc69aa87ea49f4c4bd138c98b728a640b482)**",
    "created_at": "2022-09-05T03:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483255",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3d6f44e`](https://github.com/sagemath/sagetrac-mirror/commit/3d6f44eba9b07ef50f1d9a582575f4b8cf96bffc)** to **[`c90acc6`](https://github.com/sagemath/sagetrac-mirror/commit/c90acc69aa87ea49f4c4bd138c98b728a640b482)**



---

archive/issue_comments_483256.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c90acc69aa87ea49f4c4bd138c98b728a640b482\"><code>c90acc6</code></a></td><td><code>src/sage/modules/filtered_vector_space.py (FilteredVectorSpace_class.tensor_product): Check whether other is a filtered vector space</code></td></tr></table>\n",
    "created_at": "2022-09-05T03:17:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483256",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c90acc69aa87ea49f4c4bd138c98b728a640b482"><code>c90acc6</code></a></td><td><code>src/sage/modules/filtered_vector_space.py (FilteredVectorSpace_class.tensor_product): Check whether other is a filtered vector space</code></td></tr></table>




---

archive/issue_comments_483257.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nHere's an attempt",
    "created_at": "2022-09-05T03:17:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483257",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:55" align="right">comment:55</div>

Here's an attempt



---

archive/issue_comments_483258.json:
```json
{
    "body": "Author: **Matthais Koeppe**",
    "created_at": "2022-09-05T03:37:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483258",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthais Koeppe**



---

archive/issue_comments_483259.json:
```json
{
    "body": "Changed author from **Matthais Koeppe** to **Matthias Koeppe**",
    "created_at": "2022-09-05T04:11:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483259",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Matthais Koeppe** to **Matthias Koeppe**



---

archive/issue_comments_483260.json:
```json
{
    "body": "Changed commit from **[`c90acc6`](https://github.com/sagemath/sagetrac-mirror/commit/c90acc69aa87ea49f4c4bd138c98b728a640b482)** to **[`b98c5df`](https://github.com/sagemath/sagetrac-mirror/commit/b98c5dfd4db840204774a4c71dfe81d597434c72)**",
    "created_at": "2022-09-05T05:00:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483260",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c90acc6`](https://github.com/sagemath/sagetrac-mirror/commit/c90acc69aa87ea49f4c4bd138c98b728a640b482)** to **[`b98c5df`](https://github.com/sagemath/sagetrac-mirror/commit/b98c5dfd4db840204774a4c71dfe81d597434c72)**



---

archive/issue_comments_483261.json:
```json
{
    "body": "<div id=\"comment:58\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b98c5dfd4db840204774a4c71dfe81d597434c72\"><code>b98c5df</code></a></td><td><code>ModulesWithBasis.tensor_product: Fall back to trying to use the construction of the factors</code></td></tr></table>\n",
    "created_at": "2022-09-05T05:00:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483261",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:58"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b98c5dfd4db840204774a4c71dfe81d597434c72"><code>b98c5df</code></a></td><td><code>ModulesWithBasis.tensor_product: Fall back to trying to use the construction of the factors</code></td></tr></table>




---

archive/issue_comments_483262.json:
```json
{
    "body": "<div id=\"comment:59\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed6a13f70d74e4b85765067989e6228893346860\"><code>ed6a13f</code></a></td><td><code>src/sage/categories/modules_with_basis.py: Update doctests</code></td></tr></table>\n",
    "created_at": "2022-09-05T05:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483262",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:59"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed6a13f70d74e4b85765067989e6228893346860"><code>ed6a13f</code></a></td><td><code>src/sage/categories/modules_with_basis.py: Update doctests</code></td></tr></table>




---

archive/issue_comments_483263.json:
```json
{
    "body": "Changed commit from **[`b98c5df`](https://github.com/sagemath/sagetrac-mirror/commit/b98c5dfd4db840204774a4c71dfe81d597434c72)** to **[`ed6a13f`](https://github.com/sagemath/sagetrac-mirror/commit/ed6a13f70d74e4b85765067989e6228893346860)**",
    "created_at": "2022-09-05T05:51:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483263",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b98c5df`](https://github.com/sagemath/sagetrac-mirror/commit/b98c5dfd4db840204774a4c71dfe81d597434c72)** to **[`ed6a13f`](https://github.com/sagemath/sagetrac-mirror/commit/ed6a13f70d74e4b85765067989e6228893346860)**



---

archive/issue_comments_483264.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI don\u2019t like this fallback for two reasons:\n\n1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn\u2019t know how it was built as a tensor product.\n2. (More of a worry since I haven\u2019t checked it.) It returns an object that suggests there is less structure than their might be because of a lack of an implementation. Does this preserve the algebra structure when we take a tensor product of algebras?",
    "created_at": "2022-09-05T13:50:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483264",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:60" align="right">comment:60</div>

I don’t like this fallback for two reasons:

1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn’t know how it was built as a tensor product.
2. (More of a worry since I haven’t checked it.) It returns an object that suggests there is less structure than their might be because of a lack of an implementation. Does this preserve the algebra structure when we take a tensor product of algebras?



---

archive/issue_comments_483265.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nReplying to [Travis Scrimshaw](#comment%3A60):\n> I don\u2019t like this fallback for two reasons:\n> \n> 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn\u2019t know how it was built as a tensor product.\n\nThe result doesn't have to know because it does not advertise itself as a tensor product.",
    "created_at": "2022-09-05T13:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483265",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:61" align="right">comment:61</div>

Replying to [Travis Scrimshaw](#comment%3A60):
> I don’t like this fallback for two reasons:
> 
> 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn’t know how it was built as a tensor product.

The result doesn't have to know because it does not advertise itself as a tensor product.



---

archive/issue_comments_483266.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A61):\n> Replying to [Travis Scrimshaw](#comment%3A60):\n> > I don\u2019t like this fallback for two reasons:\n> > \n> > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn\u2019t know how it was built as a tensor product.\n\n> \n> The result doesn't have to know because it does not advertise itself as a tensor product.\n\nThat is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.",
    "created_at": "2022-09-05T14:04:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483266",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [Matthias Köppe](#comment%3A61):
> Replying to [Travis Scrimshaw](#comment%3A60):
> > I don’t like this fallback for two reasons:
> > 
> > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn’t know how it was built as a tensor product.

> 
> The result doesn't have to know because it does not advertise itself as a tensor product.

That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.



---

archive/issue_comments_483267.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nLet me put it another way, the result is not in the codomain of the functor.",
    "created_at": "2022-09-05T14:05:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483267",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:63" align="right">comment:63</div>

Let me put it another way, the result is not in the codomain of the functor.



---

archive/issue_comments_483268.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [Travis Scrimshaw](#comment%3A62):\n> Replying to [Matthias K\u00f6ppe](#comment%3A61):\n> > Replying to [Travis Scrimshaw](#comment%3A60):\n> > > I don\u2019t like this fallback for two reasons:\n> > > \n> > > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn\u2019t know how it was built as a tensor product.\n\n> > \n> > The result doesn't have to know because it does not advertise itself as a tensor product.\n\n> \n> That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.\n\nSuppose as a user I want to construct it anyway. What should I do then?",
    "created_at": "2022-09-05T14:06:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483268",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [Travis Scrimshaw](#comment%3A62):
> Replying to [Matthias Köppe](#comment%3A61):
> > Replying to [Travis Scrimshaw](#comment%3A60):
> > > I don’t like this fallback for two reasons:
> > > 
> > > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn’t know how it was built as a tensor product.

> > 
> > The result doesn't have to know because it does not advertise itself as a tensor product.

> 
> That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.

Suppose as a user I want to construct it anyway. What should I do then?



---

archive/issue_comments_483269.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nReplying to [Travis Scrimshaw](#comment%3A63):\n> Let me put it another way, the result is not in the codomain of the functor.\n\nI think you're conflating mathematical structure with implementation here.",
    "created_at": "2022-09-05T14:07:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483269",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:65" align="right">comment:65</div>

Replying to [Travis Scrimshaw](#comment%3A63):
> Let me put it another way, the result is not in the codomain of the functor.

I think you're conflating mathematical structure with implementation here.



---

archive/issue_comments_483270.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A64):\n> Replying to [Travis Scrimshaw](#comment%3A62):\n> > Replying to [Matthias K\u00f6ppe](#comment%3A61):\n> > > Replying to [Travis Scrimshaw](#comment%3A60):\n> > > > I don\u2019t like this fallback for two reasons:\n> > > > \n> > > > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn\u2019t know how it was built as a tensor product.\n\n> > > \n> > > The result doesn't have to know because it does not advertise itself as a tensor product.\n\n> > \n> > That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.\n\n> \n> Suppose as a user I want to construct it anyway. What should I do then?\n\nThe class needs to have its own hook separate from the hook that the functor uses.",
    "created_at": "2022-09-05T14:09:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483270",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [Matthias Köppe](#comment%3A64):
> Replying to [Travis Scrimshaw](#comment%3A62):
> > Replying to [Matthias Köppe](#comment%3A61):
> > > Replying to [Travis Scrimshaw](#comment%3A60):
> > > > I don’t like this fallback for two reasons:
> > > > 
> > > > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn’t know how it was built as a tensor product.

> > > 
> > > The result doesn't have to know because it does not advertise itself as a tensor product.

> > 
> > That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.

> 
> Suppose as a user I want to construct it anyway. What should I do then?

The class needs to have its own hook separate from the hook that the functor uses.



---

archive/issue_comments_483271.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A65):\n> Replying to [Travis Scrimshaw](#comment%3A63):\n> > Let me put it another way, the result is not in the codomain of the functor.\n\n> \n> I think you're conflating mathematical structure with implementation here.\n\nHow so? The result does not know it is a tensor product of modules, and there is no canonical way to deconstruct a vector space into a tensor product. For example, a 1-dimensional module could be a `n`-fold tensor product of itself `n` times. There are no canonical isomorphisms between these spaces. These are also not even isomorphic as graded vector spaces in general either (one needs a grading shift).",
    "created_at": "2022-09-05T14:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483271",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [Matthias Köppe](#comment%3A65):
> Replying to [Travis Scrimshaw](#comment%3A63):
> > Let me put it another way, the result is not in the codomain of the functor.

> 
> I think you're conflating mathematical structure with implementation here.

How so? The result does not know it is a tensor product of modules, and there is no canonical way to deconstruct a vector space into a tensor product. For example, a 1-dimensional module could be a `n`-fold tensor product of itself `n` times. There are no canonical isomorphisms between these spaces. These are also not even isomorphic as graded vector spaces in general either (one needs a grading shift).



---

archive/issue_comments_483272.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nMathematically an object *is* a tensor product if there *exists* a construction of it using the tensor functor.\n\nIn an implementation, we generally cannot know if something exists. An object is marked *as* a tensor product when the implementation has marked it as such. Like everything, this is subject to the implementation restrictions.",
    "created_at": "2022-09-05T14:20:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483272",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:68" align="right">comment:68</div>

Mathematically an object *is* a tensor product if there *exists* a construction of it using the tensor functor.

In an implementation, we generally cannot know if something exists. An object is marked *as* a tensor product when the implementation has marked it as such. Like everything, this is subject to the implementation restrictions.



---

archive/issue_comments_483273.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nReplying to [Travis Scrimshaw](#comment%3A66):\n> Replying to [Matthias K\u00f6ppe](#comment%3A64):\n> > Replying to [Travis Scrimshaw](#comment%3A62):\n> > > Replying to [Matthias K\u00f6ppe](#comment%3A61):\n> > > > Replying to [Travis Scrimshaw](#comment%3A60):\n> > > > > I don\u2019t like this fallback for two reasons:\n> > > > > \n> > > > > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn\u2019t know how it was built as a tensor product.\n\n> > > > \n> > > > The result doesn't have to know because it does not advertise itself as a tensor product.\n\n> > > \n> > > That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.\n\n> > \n> > Suppose as a user I want to construct it anyway. What should I do then?\n\n> \n> The class needs to have its own hook separate from the hook that the functor uses.\n\nNo, as a user. Suppose there is no such specific implementation. What should the user do?",
    "created_at": "2022-09-05T14:22:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483273",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:69" align="right">comment:69</div>

Replying to [Travis Scrimshaw](#comment%3A66):
> Replying to [Matthias Köppe](#comment%3A64):
> > Replying to [Travis Scrimshaw](#comment%3A62):
> > > Replying to [Matthias Köppe](#comment%3A61):
> > > > Replying to [Travis Scrimshaw](#comment%3A60):
> > > > > I don’t like this fallback for two reasons:
> > > > > 
> > > > > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn’t know how it was built as a tensor product.

> > > > 
> > > > The result doesn't have to know because it does not advertise itself as a tensor product.

> > > 
> > > That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.

> > 
> > Suppose as a user I want to construct it anyway. What should I do then?

> 
> The class needs to have its own hook separate from the hook that the functor uses.

No, as a user. Suppose there is no such specific implementation. What should the user do?



---

archive/issue_comments_483274.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A68):\n> Mathematically an object *is* a tensor product if there *exists* a construction of it using the tensor functor.\n\nThen every object is a tensor product since we can always tensor with a 1-dimensional module. If we wanted to talk in that level of generality, there is no category of tensor products, Cartesean products, etc.\n\n> In an implementation, we generally cannot know if something exists. An object is marked *as* a tensor product when the implementation has marked it as such. Like everything, this is subject to the implementation restrictions.\n\nIndeed, the category also contains some implementation requirements. (I would argue the tensor products category is the category with a distinguished tensor product construction, parallel to `ModulesWithBasis`.) Consequently, the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category\u2019s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.\n\nMore concretely, if I had code that does:\n\n```python\nT = tensor([V,W])\nfor F in T.tensor_factors():\n     print(F)\n```\nThis should work whenever `T` is constructed because the codomain is `Cat.TensorProducts()`, where `Cat` is the meet of the categories of `V` and `W`. However, with changing the name, the functor now would work but the code would fail with `FilteredVectorSpace`s.",
    "created_at": "2022-09-07T04:43:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483274",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:70" align="right">comment:70</div>

Replying to [Matthias Köppe](#comment%3A68):
> Mathematically an object *is* a tensor product if there *exists* a construction of it using the tensor functor.

Then every object is a tensor product since we can always tensor with a 1-dimensional module. If we wanted to talk in that level of generality, there is no category of tensor products, Cartesean products, etc.

> In an implementation, we generally cannot know if something exists. An object is marked *as* a tensor product when the implementation has marked it as such. Like everything, this is subject to the implementation restrictions.

Indeed, the category also contains some implementation requirements. (I would argue the tensor products category is the category with a distinguished tensor product construction, parallel to `ModulesWithBasis`.) Consequently, the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category’s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.

More concretely, if I had code that does:

```python
T = tensor([V,W])
for F in T.tensor_factors():
     print(F)
```
This should work whenever `T` is constructed because the codomain is `Cat.TensorProducts()`, where `Cat` is the meet of the categories of `V` and `W`. However, with changing the name, the functor now would work but the code would fail with `FilteredVectorSpace`s.



---

archive/issue_comments_483275.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A69):\n> Replying to [Travis Scrimshaw](#comment%3A66):\n> > Replying to [Matthias K\u00f6ppe](#comment%3A64):\n> > > Replying to [Travis Scrimshaw](#comment%3A62):\n> > > > Replying to [Matthias K\u00f6ppe](#comment%3A61):\n> > > > > Replying to [Travis Scrimshaw](#comment%3A60):\n> > > > > > I don\u2019t like this fallback for two reasons:\n> > > > > > \n> > > > > > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn\u2019t know how it was built as a tensor product.\n\n> > > > > \n> > > > > The result doesn't have to know because it does not advertise itself as a tensor product.\n\n> > > > \n> > > > That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.\n\n> > > \n> > > Suppose as a user I want to construct it anyway. What should I do then?\n\n> > \n> > The class needs to have its own hook separate from the hook that the functor uses.\n\n> \n> No, as a user. Suppose there is no such specific implementation. What should the user do?\n\nMy guess is stop wishing for magical coding fairies and implement it. There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. (Another version: How do you build a matrix from a tensor product of two matrices? There are two main ways to do this that are equivalent as they amount to choosing a different order of the isomorphism.) If a class `Foo` wants to know that a tensor product of two of itself can again be realized as an object `Foo`, then it needs to implement that and chose a specific isomorphism.",
    "created_at": "2022-09-07T04:50:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483275",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:71" align="right">comment:71</div>

Replying to [Matthias Köppe](#comment%3A69):
> Replying to [Travis Scrimshaw](#comment%3A66):
> > Replying to [Matthias Köppe](#comment%3A64):
> > > Replying to [Travis Scrimshaw](#comment%3A62):
> > > > Replying to [Matthias Köppe](#comment%3A61):
> > > > > Replying to [Travis Scrimshaw](#comment%3A60):
> > > > > > I don’t like this fallback for two reasons:
> > > > > > 
> > > > > > 1. It runs into the same problem with `FilteredVectorSpace.tensor_product` I gave in [comment:40](#comment%3A40), it doesn’t know how it was built as a tensor product.

> > > > > 
> > > > > The result doesn't have to know because it does not advertise itself as a tensor product.

> > > > 
> > > > That is the problem. If I build an object as a tensor product (via the `tensor` functor), then it should know that because I wanted it to know that explicitly. It should advertise itself as a tensor product.

> > > 
> > > Suppose as a user I want to construct it anyway. What should I do then?

> > 
> > The class needs to have its own hook separate from the hook that the functor uses.

> 
> No, as a user. Suppose there is no such specific implementation. What should the user do?

My guess is stop wishing for magical coding fairies and implement it. There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. (Another version: How do you build a matrix from a tensor product of two matrices? There are two main ways to do this that are equivalent as they amount to choosing a different order of the isomorphism.) If a class `Foo` wants to know that a tensor product of two of itself can again be realized as an object `Foo`, then it needs to implement that and chose a specific isomorphism.



---

archive/issue_comments_483276.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\nReplying to [Travis Scrimshaw](#comment%3A70):\n> the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category\u2019s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.\n\nNo, I think this is too strict to be useful.",
    "created_at": "2022-09-07T04:51:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483276",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:72" align="right">comment:72</div>

Replying to [Travis Scrimshaw](#comment%3A70):
> the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category’s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.

No, I think this is too strict to be useful.



---

archive/issue_comments_483277.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nReplying to [Travis Scrimshaw](#comment%3A71):\n> Replying to [Matthias K\u00f6ppe](#comment%3A69):\n> > No, as a user. Suppose there is no such specific implementation. What should the user do?\n\n> \n> My guess is stop wishing for magical coding fairies and implement it. \n\nNo, no, users wouldn't like to be talked to like that.",
    "created_at": "2022-09-07T04:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483277",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:73" align="right">comment:73</div>

Replying to [Travis Scrimshaw](#comment%3A71):
> Replying to [Matthias Köppe](#comment%3A69):
> > No, as a user. Suppose there is no such specific implementation. What should the user do?

> 
> My guess is stop wishing for magical coding fairies and implement it. 

No, no, users wouldn't like to be talked to like that.



---

archive/issue_comments_483278.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nWe often want to identify 1-fold tensor products with the base module -- and the base module won't have the `tensor_factors` method. For example, this is what `sage.tensor.modules` and `sage.manifolds.differentiable` do.",
    "created_at": "2022-09-07T04:59:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483278",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:74" align="right">comment:74</div>

We often want to identify 1-fold tensor products with the base module -- and the base module won't have the `tensor_factors` method. For example, this is what `sage.tensor.modules` and `sage.manifolds.differentiable` do.



---

archive/issue_comments_483279.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A72):\n> Replying to [Travis Scrimshaw](#comment%3A70):\n> > the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category\u2019s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.\n\n> \n> No, I think this is too strict to be useful. \n\nThat an object in the codomain of a functor (or any morphism) must support what is required by that codomain (and should be an object such that `X in Cat` returns `True`)? I find this to actually be quite useful as I can expect certain properties to be there.\n\nConsider the equivalent scenario: I have a function `f: ZZ -> QQ[\u2018s\u2019]` that returned `0` as an integer and all non-zero elements as polynomials. You now have to write special checks for `0` rather than have it behave uniformly.",
    "created_at": "2022-09-07T05:06:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483279",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:75" align="right">comment:75</div>

Replying to [Matthias Köppe](#comment%3A72):
> Replying to [Travis Scrimshaw](#comment%3A70):
> > the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category’s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.

> 
> No, I think this is too strict to be useful. 

That an object in the codomain of a functor (or any morphism) must support what is required by that codomain (and should be an object such that `X in Cat` returns `True`)? I find this to actually be quite useful as I can expect certain properties to be there.

Consider the equivalent scenario: I have a function `f: ZZ -> QQ[‘s’]` that returned `0` as an integer and all non-zero elements as polynomials. You now have to write special checks for `0` rather than have it behave uniformly.



---

archive/issue_comments_483280.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [Travis Scrimshaw](#comment%3A75):\n> Replying to [Matthias K\u00f6ppe](#comment%3A72):\n> > Replying to [Travis Scrimshaw](#comment%3A70):\n> > > the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category\u2019s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.\n\n> > \n> > No, I think this is too strict to be useful. \n\n> \n> That an object in the codomain of a functor (or any morphism) must support what is required by that codomain (and should be an object such that `X in Cat` returns `True`)? I find this to actually be quite useful as I can expect certain properties to be there.\n\nThere's always a tradeoff. Identifications such as the ones that I mentioned in [comment:74](#comment%3A74) are also quite useful.",
    "created_at": "2022-09-07T05:11:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483280",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [Travis Scrimshaw](#comment%3A75):
> Replying to [Matthias Köppe](#comment%3A72):
> > Replying to [Travis Scrimshaw](#comment%3A70):
> > > the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category’s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.

> > 
> > No, I think this is too strict to be useful. 

> 
> That an object in the codomain of a functor (or any morphism) must support what is required by that codomain (and should be an object such that `X in Cat` returns `True`)? I find this to actually be quite useful as I can expect certain properties to be there.

There's always a tradeoff. Identifications such as the ones that I mentioned in [comment:74](#comment%3A74) are also quite useful.



---

archive/issue_comments_483281.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A73):\n> Replying to [Travis Scrimshaw](#comment%3A71):\n> > Replying to [Matthias K\u00f6ppe](#comment%3A69):\n> > > No, as a user. Suppose there is no such specific implementation. What should the user do?\n\n> > \n> > My guess is stop wishing for magical coding fairies and implement it. \n\n> \n> No, no, users wouldn't like to be talked to like that.\n\nOf course I wouldn\u2019t necessarily tell them in that way. However, unless somebody actually writes the code, then it doesn\u2019t magically come into existence. Unfortunately, this is not the Dire Straights song \u201cMoney for Nothing\u201d; Also Hell is full of 10 year olds who wished for exactly the same thing with the holophonor.\n\nIn this case, I believe it is impossible to implement in the level of generality you want because it amounts to making a canonical choice where there is not one.",
    "created_at": "2022-09-07T05:15:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483281",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:77" align="right">comment:77</div>

Replying to [Matthias Köppe](#comment%3A73):
> Replying to [Travis Scrimshaw](#comment%3A71):
> > Replying to [Matthias Köppe](#comment%3A69):
> > > No, as a user. Suppose there is no such specific implementation. What should the user do?

> > 
> > My guess is stop wishing for magical coding fairies and implement it. 

> 
> No, no, users wouldn't like to be talked to like that.

Of course I wouldn’t necessarily tell them in that way. However, unless somebody actually writes the code, then it doesn’t magically come into existence. Unfortunately, this is not the Dire Straights song “Money for Nothing”; Also Hell is full of 10 year olds who wished for exactly the same thing with the holophonor.

In this case, I believe it is impossible to implement in the level of generality you want because it amounts to making a canonical choice where there is not one.



---

archive/issue_comments_483282.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nReplying to [Travis Scrimshaw](#comment%3A71):\n> There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. \n\nIt does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.",
    "created_at": "2022-09-07T05:17:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483282",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:78" align="right">comment:78</div>

Replying to [Travis Scrimshaw](#comment%3A71):
> There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. 

It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.



---

archive/issue_comments_483283.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A76):\n> Replying to [Travis Scrimshaw](#comment%3A75):\n> > Replying to [Matthias K\u00f6ppe](#comment%3A72):\n> > > Replying to [Travis Scrimshaw](#comment%3A70):\n> > > > the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category\u2019s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.\n\n> > > \n> > > No, I think this is too strict to be useful. \n\n> > \n> > That an object in the codomain of a functor (or any morphism) must support what is required by that codomain (and should be an object such that `X in Cat` returns `True`)? I find this to actually be quite useful as I can expect certain properties to be there.\n\n> \n> There's always a tradeoff. Identifications such as the ones that I mentioned in [comment:74](#comment%3A74) are also quite useful. \n\nI agree that they are useful, but you need a canonical way to do it in general. The point is that you are making an identification based upon a specific choice of isomorphism. Individual classes are allowed to make that choice, which you are implicitly doing when you have either a `as_foo()` method or `Foo(T)` in your code.",
    "created_at": "2022-09-07T05:18:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483283",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:79" align="right">comment:79</div>

Replying to [Matthias Köppe](#comment%3A76):
> Replying to [Travis Scrimshaw](#comment%3A75):
> > Replying to [Matthias Köppe](#comment%3A72):
> > > Replying to [Travis Scrimshaw](#comment%3A70):
> > > > the result of the functor is promising certain implementation details with its codomain: such objects have methods via the category’s `ParentMethods` and provide an implementation of the corresponding `@abstract_methods`.

> > > 
> > > No, I think this is too strict to be useful. 

> > 
> > That an object in the codomain of a functor (or any morphism) must support what is required by that codomain (and should be an object such that `X in Cat` returns `True`)? I find this to actually be quite useful as I can expect certain properties to be there.

> 
> There's always a tradeoff. Identifications such as the ones that I mentioned in [comment:74](#comment%3A74) are also quite useful. 

I agree that they are useful, but you need a canonical way to do it in general. The point is that you are making an identification based upon a specific choice of isomorphism. Individual classes are allowed to make that choice, which you are implicitly doing when you have either a `as_foo()` method or `Foo(T)` in your code.



---

archive/issue_comments_483284.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A78):\n> Replying to [Travis Scrimshaw](#comment%3A71):\n> > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. \n\n> \n> It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.\n\nBut that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.",
    "created_at": "2022-09-07T05:19:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483284",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:80" align="right">comment:80</div>

Replying to [Matthias Köppe](#comment%3A78):
> Replying to [Travis Scrimshaw](#comment%3A71):
> > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. 

> 
> It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.

But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.



---

archive/issue_comments_483285.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\nI think in [comment:79](#comment%3A79) you replied to the wrong comment.",
    "created_at": "2022-09-07T05:23:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483285",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:81" align="right">comment:81</div>

I think in [comment:79](#comment%3A79) you replied to the wrong comment.



---

archive/issue_comments_483286.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A81):\n> I think in [comment:79](#comment%3A79) you replied to the wrong comment.\n\nIt applies to both [comment:76](#comment%3A76) and [comment:74](#comment%3A74). I just chose the more recent one.",
    "created_at": "2022-09-07T05:27:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483286",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:82" align="right">comment:82</div>

Replying to [Matthias Köppe](#comment%3A81):
> I think in [comment:79](#comment%3A79) you replied to the wrong comment.

It applies to both [comment:76](#comment%3A76) and [comment:74](#comment%3A74). I just chose the more recent one.



---

archive/issue_comments_483287.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [Travis Scrimshaw](#comment%3A80):\n> Replying to [Matthias K\u00f6ppe](#comment%3A78):\n> > Replying to [Travis Scrimshaw](#comment%3A71):\n> > > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. \n\n> > \n> > It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.\n\n> But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.\n\nNo, I don't think this resembles anything what I'm asking for. I think we've lost the context somewhere on the way here.",
    "created_at": "2022-09-07T05:29:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483287",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [Travis Scrimshaw](#comment%3A80):
> Replying to [Matthias Köppe](#comment%3A78):
> > Replying to [Travis Scrimshaw](#comment%3A71):
> > > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. 

> > 
> > It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.

> But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.

No, I don't think this resembles anything what I'm asking for. I think we've lost the context somewhere on the way here.



---

archive/issue_comments_483288.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nReplying to [Travis Scrimshaw](#comment%3A82):\n> Replying to [Matthias K\u00f6ppe](#comment%3A81):\n> > I think in [comment:79](#comment%3A79) you replied to the wrong comment.\n\n> \n> It applies to both [comment:76](#comment%3A76) and [comment:74](#comment%3A74). I just chose the more recent one.\n\nWait, you are concerned about the identification of a module M with its 1-fold tensor product not being canonical?",
    "created_at": "2022-09-07T05:30:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483288",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

Replying to [Travis Scrimshaw](#comment%3A82):
> Replying to [Matthias Köppe](#comment%3A81):
> > I think in [comment:79](#comment%3A79) you replied to the wrong comment.

> 
> It applies to both [comment:76](#comment%3A76) and [comment:74](#comment%3A74). I just chose the more recent one.

Wait, you are concerned about the identification of a module M with its 1-fold tensor product not being canonical?



---

archive/issue_comments_483289.json:
```json
{
    "body": "<div id=\"comment:85\" align=\"right\">comment:85</div>\n\nFor the question of 1-fold tensor products, there's by the way an old ticket: #18349",
    "created_at": "2022-09-07T05:39:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483289",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:85" align="right">comment:85</div>

For the question of 1-fold tensor products, there's by the way an old ticket: #18349



---

archive/issue_comments_483290.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A83):\n> Replying to [Travis Scrimshaw](#comment%3A80):\n> > Replying to [Matthias K\u00f6ppe](#comment%3A78):\n> > > Replying to [Travis Scrimshaw](#comment%3A71):\n> > > > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. \n\n> > > \n> > > It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.\n\n> > But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.\n\n> \n> No, I don't think this resembles anything what I'm asking for. I think we've lost the context somewhere on the way here.\n\nSorry, that was a bad phrasing on my part. You are asking for returning **R**<sup>6</sup> to be okay, which you have had to make a (non-canonical) choice of a isomorphism that they user has no control over. The tensor product category has a special distinguished choice of construction as a tensor product, analogous to `ModulesWithBasis` being modules with a distinguished choice of a basis.",
    "created_at": "2022-09-07T05:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483290",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:86" align="right">comment:86</div>

Replying to [Matthias Köppe](#comment%3A83):
> Replying to [Travis Scrimshaw](#comment%3A80):
> > Replying to [Matthias Köppe](#comment%3A78):
> > > Replying to [Travis Scrimshaw](#comment%3A71):
> > > > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. 

> > > 
> > > It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.

> > But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.

> 
> No, I don't think this resembles anything what I'm asking for. I think we've lost the context somewhere on the way here.

Sorry, that was a bad phrasing on my part. You are asking for returning **R**<sup>6</sup> to be okay, which you have had to make a (non-canonical) choice of a isomorphism that they user has no control over. The tensor product category has a special distinguished choice of construction as a tensor product, analogous to `ModulesWithBasis` being modules with a distinguished choice of a basis.



---

archive/issue_comments_483291.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A84):\n> Replying to [Travis Scrimshaw](#comment%3A82):\n> > Replying to [Matthias K\u00f6ppe](#comment%3A81):\n> > > I think in [comment:79](#comment%3A79) you replied to the wrong comment.\n\n> > \n> > It applies to both [comment:76](#comment%3A76) and [comment:74](#comment%3A74). I just chose the more recent one.\n\n> \n> Wait, you are concerned about the identification of a module M with its 1-fold tensor product not being canonical?\n\nNot specifically for the 1-fold tensor products, but more generally. This code is expected to work for arbitrary tensor products with no special cases, right? (I can also tell you about the troubles I\u2019ve had with `PartitionTuples` of length 1 versus `Partitions`, which motivates my desire for uniformity.)",
    "created_at": "2022-09-07T06:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483291",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:87" align="right">comment:87</div>

Replying to [Matthias Köppe](#comment%3A84):
> Replying to [Travis Scrimshaw](#comment%3A82):
> > Replying to [Matthias Köppe](#comment%3A81):
> > > I think in [comment:79](#comment%3A79) you replied to the wrong comment.

> > 
> > It applies to both [comment:76](#comment%3A76) and [comment:74](#comment%3A74). I just chose the more recent one.

> 
> Wait, you are concerned about the identification of a module M with its 1-fold tensor product not being canonical?

Not specifically for the 1-fold tensor products, but more generally. This code is expected to work for arbitrary tensor products with no special cases, right? (I can also tell you about the troubles I’ve had with `PartitionTuples` of length 1 versus `Partitions`, which motivates my desire for uniformity.)



---

archive/issue_comments_483292.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nReplying to [Travis Scrimshaw](#comment%3A86):\n> Replying to [Matthias K\u00f6ppe](#comment%3A83):\n> > Replying to [Travis Scrimshaw](#comment%3A80):\n> > > Replying to [Matthias K\u00f6ppe](#comment%3A78):\n> > > > Replying to [Travis Scrimshaw](#comment%3A71):\n> > > > > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. \n\n> > > > \n> > > > It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.\n\n> > > But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.\n\n> > \n> > No, I don't think this resembles anything what I'm asking for. I think we've lost the context somewhere on the way here.\n\n> \n> Sorry, that was a bad phrasing on my part. You are asking for returning **R**<sup>6</sup> to be okay\n\nNo",
    "created_at": "2022-09-07T15:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483292",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:88" align="right">comment:88</div>

Replying to [Travis Scrimshaw](#comment%3A86):
> Replying to [Matthias Köppe](#comment%3A83):
> > Replying to [Travis Scrimshaw](#comment%3A80):
> > > Replying to [Matthias Köppe](#comment%3A78):
> > > > Replying to [Travis Scrimshaw](#comment%3A71):
> > > > > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. 

> > > > 
> > > > It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.

> > > But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.

> > 
> > No, I don't think this resembles anything what I'm asking for. I think we've lost the context somewhere on the way here.

> 
> Sorry, that was a bad phrasing on my part. You are asking for returning **R**<sup>6</sup> to be okay

No



---

archive/issue_comments_483293.json:
```json
{
    "body": "<div id=\"comment:89\" align=\"right\">comment:89</div>\n\nReplying to [Travis Scrimshaw](#comment%3A77):\n> Unfortunately, this is not the Dire Straights song \u201cMoney for Nothing\u201d\n\nI do appreciate the attempt to engage in intergenerational dialogue",
    "created_at": "2022-09-07T15:32:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483293",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:89" align="right">comment:89</div>

Replying to [Travis Scrimshaw](#comment%3A77):
> Unfortunately, this is not the Dire Straights song “Money for Nothing”

I do appreciate the attempt to engage in intergenerational dialogue



---

archive/issue_comments_483294.json:
```json
{
    "body": "<div id=\"comment:90\" align=\"right\">comment:90</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A88):\n> Replying to [Travis Scrimshaw](#comment%3A86):\n> > Replying to [Matthias K\u00f6ppe](#comment%3A83):\n> > > Replying to [Travis Scrimshaw](#comment%3A80):\n> > > > Replying to [Matthias K\u00f6ppe](#comment%3A78):\n> > > > > Replying to [Travis Scrimshaw](#comment%3A71):\n> > > > > > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. \n\n> > > > > \n> > > > > It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.\n\n> > > > But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.\n\n> > > \n> > > No, I don't think this resembles anything what I'm asking for. I think we've lost the context somewhere on the way here.\n\n> > \n> > Sorry, that was a bad phrasing on my part. You are asking for returning **R**<sup>6</sup> to be okay\n\n> \n> No\n\nThen if you rename the functor hook to `tensor_product`, then `FilteredVectorSpace`'s method of that name would have a bug.",
    "created_at": "2022-09-07T23:19:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483294",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:90" align="right">comment:90</div>

Replying to [Matthias Köppe](#comment%3A88):
> Replying to [Travis Scrimshaw](#comment%3A86):
> > Replying to [Matthias Köppe](#comment%3A83):
> > > Replying to [Travis Scrimshaw](#comment%3A80):
> > > > Replying to [Matthias Köppe](#comment%3A78):
> > > > > Replying to [Travis Scrimshaw](#comment%3A71):
> > > > > > There is no generic way to give a tensor product the structure of a specific type of module. This essentially amounts to saying there is a canonical isomorphism between, e.g., **R**<sup>2</sup> (x) **R**<sup>3</sup> = **R**<sup>6</sup>. 

> > > > > 
> > > > > It does not have to be canonical to be useful. And in fact one wouldn't construct that but rather construct a free module whose basis is indexed by the cartesian product of the input index sets.

> > > > But that is doing what is mandated by the category. It is holding onto the knowledge of how it is constructed. What you are asking for is something to return the equivalent of **R**<sup>6</sup>.

> > > 
> > > No, I don't think this resembles anything what I'm asking for. I think we've lost the context somewhere on the way here.

> > 
> > Sorry, that was a bad phrasing on my part. You are asking for returning **R**<sup>6</sup> to be okay

> 
> No

Then if you rename the functor hook to `tensor_product`, then `FilteredVectorSpace`'s method of that name would have a bug.



---

archive/issue_comments_483295.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [Matthias K\u00f6ppe](#comment%3A89):\n> Replying to [Travis Scrimshaw](#comment%3A77):\n> > Unfortunately, this is not the Dire Straights song \u201cMoney for Nothing\u201d\n\n> \n> I do appreciate the attempt to engage in intergenerational dialogue\n\nActually, that is music I like. `;)` Or should I say I appreciate that there's \"No One Like You\" that I appreciate to have these discussions with.",
    "created_at": "2022-09-07T23:24:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483295",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [Matthias Köppe](#comment%3A89):
> Replying to [Travis Scrimshaw](#comment%3A77):
> > Unfortunately, this is not the Dire Straights song “Money for Nothing”

> 
> I do appreciate the attempt to engage in intergenerational dialogue

Actually, that is music I like. `;)` Or should I say I appreciate that there's "No One Like You" that I appreciate to have these discussions with.



---

archive/issue_comments_483296.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -62,8 +62,7 @@\n \n Tickets:\n - #31276 Tensor Product Method for `FiniteRankFreeModule`\n-\n-Follow-up:\n - #34448 Put tensor modules of `FiniteRankFreeModule` in `Modules().TensorProducts()`\n+- #34589 `VectorFieldModule`, `TensorFieldModule`, `DiffFormModule`: Add methods `tensor_product`, `tensor_power`, update category of `TensorFieldModule`\n \n See also: #18349\n``````\n",
    "created_at": "2022-10-02T18:46:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30373#issuecomment-483296",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -62,8 +62,7 @@
 
 Tickets:
 - #31276 Tensor Product Method for `FiniteRankFreeModule`
-
-Follow-up:
 - #34448 Put tensor modules of `FiniteRankFreeModule` in `Modules().TensorProducts()`
+- #34589 `VectorFieldModule`, `TensorFieldModule`, `DiffFormModule`: Add methods `tensor_product`, `tensor_power`, update category of `TensorFieldModule`
 
 See also: #18349
``````




---

archive/issue_events_415446.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T21:39:40Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415446"
}
```



---

archive/issue_events_415447.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-07T21:39:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30373",
    "milestone_number": null,
    "milestone_title": "sage-9.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30373#event-415447"
}
```
