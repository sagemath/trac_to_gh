# Issue 30648: sage --package download is broken

archive/issues_030411.json:
```json
{
    "body": "\n```\n$ sage --package download cbc\nTraceback (most recent call last):\n  File \"/home/slabbe/GitBox/sage/build/bin/sage-package\", line 42, in <module>\n    run()\n  File \"/home/slabbe/GitBox/sage/build/bin/../sage_bootstrap/cmdline.py\", line 318, in run\n    app.download_cls(args.package_name, args.allow_upstream)\nTypeError: download_cls() takes exactly 2 arguments (3 given)\n```\n\n**Branch:** [e4635137337490ce452945728c8667f3f51b5b40](https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** S\u00e9bastien Labb\u00e9\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30648\n\n",
    "closed_at": "2020-11-15T22:47:26Z",
    "created_at": "2020-09-23T18:56:29Z",
    "labels": [
        "component: distribution",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "sage --package download is broken",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30648",
    "user": "https://github.com/seblabbe"
}
```

```
$ sage --package download cbc
Traceback (most recent call last):
  File "/home/slabbe/GitBox/sage/build/bin/sage-package", line 42, in <module>
    run()
  File "/home/slabbe/GitBox/sage/build/bin/../sage_bootstrap/cmdline.py", line 318, in run
    app.download_cls(args.package_name, args.allow_upstream)
TypeError: download_cls() takes exactly 2 arguments (3 given)
```

**Branch:** [e4635137337490ce452945728c8667f3f51b5b40](https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40)

**Reviewer:** Matthias Koeppe

**Author:** Sébastien Labbé

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/30648





---

archive/issue_comments_606790.json:
```json
{
    "body": "<a id='comment:1'></a>\nLooks like I broke this when adding the `upstream_url` feature. I'll looking into fixing it",
    "created_at": "2020-09-23T18:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606790",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:1'></a>
Looks like I broke this when adding the `upstream_url` feature. I'll looking into fixing it



---

archive/issue_comments_606791.json:
```json
{
    "body": "<a id='comment:2'></a>\ndoing this change:\n\n```diff\n- app.download_cls(args.package_name, args.allow_upstream)\n+ app.download(args.package_name, args.allow_upstream)\n```\nfixed it on my side",
    "created_at": "2020-09-23T19:03:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606791",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:2'></a>
doing this change:

```diff
- app.download_cls(args.package_name, args.allow_upstream)
+ app.download(args.package_name, args.allow_upstream)
```
fixed it on my side



---

archive/issue_comments_606792.json:
```json
{
    "body": "<a id='comment:3'></a>\nI don't know if this is the correct fix.\n\nI don't know if there are similar error in the file.\n\nI just know that this change allowed me to download the tarball I was looking for.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40\">e463513</a></td><td><code>30648: download_cls -> download</code></td></tr></table>\n",
    "created_at": "2020-09-24T12:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606792",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:3'></a>
I don't know if this is the correct fix.

I don't know if there are similar error in the file.

I just know that this change allowed me to download the tarball I was looking for.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40">e463513</a></td><td><code>30648: download_cls -> download</code></td></tr></table>




---

archive/issue_comments_606793.json:
```json
{
    "body": "**Author:** S\u00e9bastien Labb\u00e9",
    "created_at": "2020-09-24T12:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606793",
    "user": "https://github.com/seblabbe"
}
```

**Author:** Sébastien Labbé



---

archive/issue_comments_606794.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2020-09-24T12:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606794",
    "user": "https://github.com/seblabbe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_606795.json:
```json
{
    "body": "**Commit:** [e4635137337490ce452945728c8667f3f51b5b40](https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40)",
    "created_at": "2020-09-24T12:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606795",
    "user": "https://github.com/seblabbe"
}
```

**Commit:** [e4635137337490ce452945728c8667f3f51b5b40](https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40)



---

archive/issue_comments_606796.json:
```json
{
    "body": "**Branch:** [u/slabbe/30648](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/30648)",
    "created_at": "2020-09-24T12:06:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606796",
    "user": "https://github.com/seblabbe"
}
```

**Branch:** [u/slabbe/30648](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/30648)



---

archive/issue_events_089830.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30648#event-89830"
}
```



---

archive/issue_comments_606797.json:
```json
{
    "body": "<a id='comment:5'></a>\na gentle ping",
    "created_at": "2020-11-02T15:09:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606797",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:5'></a>
a gentle ping



---

archive/issue_comments_606798.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2020-11-02T18:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606798",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_606799.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2020-11-02T18:43:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606799",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_606800.json:
```json
{
    "body": "<a id='comment:7'></a>\nthanks for the review",
    "created_at": "2020-11-03T16:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606800",
    "user": "https://github.com/seblabbe"
}
```

<a id='comment:7'></a>
thanks for the review



---

archive/issue_events_089831.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-15T22:47:26Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30648#event-89831"
}
```



---

archive/issue_comments_606801.json:
```json
{
    "body": "**Changing branch** from \"[u/slabbe/30648](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/30648)\" to \"[e4635137337490ce452945728c8667f3f51b5b40](https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40)\".",
    "created_at": "2020-11-15T22:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606801",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/slabbe/30648](https://github.com/sagemath/sagetrac-mirror/tree/u/slabbe/30648)" to "[e4635137337490ce452945728c8667f3f51b5b40](https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40)".



---

archive/issue_comments_606802.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2020-11-15T22:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606802",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_606803.json:
```json
{
    "body": "<a id='comment:9'></a>\nFollow-up in #30865",
    "created_at": "2020-11-19T18:56:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606803",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Follow-up in #30865



---

archive/issue_comments_606804.json:
```json
{
    "body": "**Changing commit** from \"[e4635137337490ce452945728c8667f3f51b5b40](https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40)\" to \"\".",
    "created_at": "2020-11-19T18:56:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30648",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30648#issuecomment-606804",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[e4635137337490ce452945728c8667f3f51b5b40](https://github.com/sagemath/sagetrac-mirror/commit/e4635137337490ce452945728c8667f3f51b5b40)" to "".
