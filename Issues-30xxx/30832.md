# Issue 30832: Connect RealSet to sage.manifolds

archive/issues_030595.json:
```json
{
    "body": "Instances of `RealSet` that are finite unions of open intervals should be connected in some way to `sage.manifolds`, in particular to `OpenInterval` and `RealLine` (which are both in the global namespace).\n\nIn this ticket, we add functionality to initialize a `RealSet` from instances of `OpenInterval` and `RealLine`, as well as from their topological closures (#31644)\n\n\n\nCC:  @mjungmath @egourgoulhon @tscrim\n\nBranch/Commit: 81b43f4bb4d337f3cb1cf59c2d866fddab51b6b2\n\nReviewer: Michael Jung\n\nAuthor: Matthias Koeppe\n\nDependencies: #31644, #31877\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30832\n\n",
    "closed_at": "2021-07-01T20:45:09Z",
    "created_at": "2020-10-26T20:09:41Z",
    "labels": [
        "component: manifolds"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.4",
    "title": "Connect RealSet to sage.manifolds",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30832",
    "user": "https://github.com/mkoeppe"
}
```
Instances of `RealSet` that are finite unions of open intervals should be connected in some way to `sage.manifolds`, in particular to `OpenInterval` and `RealLine` (which are both in the global namespace).

In this ticket, we add functionality to initialize a `RealSet` from instances of `OpenInterval` and `RealLine`, as well as from their topological closures (#31644)



CC:  @mjungmath @egourgoulhon @tscrim

Branch/Commit: 81b43f4bb4d337f3cb1cf59c2d866fddab51b6b2

Reviewer: Michael Jung

Author: Matthias Koeppe

Dependencies: #31644, #31877

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30832





---

archive/issue_comments_436558.json:
```json
{
    "body": "<a id='comment:2'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436558",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_080454.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30832#event-80454"
}
```



---

archive/issue_comments_436559.json:
```json
{
    "body": "<a id='comment:5'></a>Last 10 new commits:",
    "created_at": "2021-05-29T19:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436559",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Last 10 new commits:



---

archive/issue_comments_436560.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-05-29T19:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436560",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_436561.json:
```json
{
    "body": "<a id='comment:6'></a>Restricted to open intervals (not closures), this is nothing but the forgetful functor from manifolds into sets. Perhaps it is a good idea to add this functor somehow?\n\nOther than that it looks good! Let's wait for the patchbot.",
    "created_at": "2021-05-29T21:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436561",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:6'></a>Restricted to open intervals (not closures), this is nothing but the forgetful functor from manifolds into sets. Perhaps it is a good idea to add this functor somehow?

Other than that it looks good! Let's wait for the patchbot.



---

archive/issue_comments_436562.json:
```json
{
    "body": "<a id='comment:7'></a>... or rather from manifolds to topological spaces (see #31877).\n\nDo we have forgetful functors anywhere already?",
    "created_at": "2021-05-29T22:06:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436562",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>... or rather from manifolds to topological spaces (see #31877).

Do we have forgetful functors anywhere already?



---

archive/issue_comments_436563.json:
```json
{
    "body": "<a id='comment:8'></a>We may also want to consider \n- adding a method `RealSet.as_manifold_subset`\n- extending the `RealSet` constructors (default constructor and `RealSet.open` etc.) so that they can build manifold objects; for example if `structure` or `name` is passed; then perhaps the global bindings `RealLine` and `OpenInterval` can be deprecated.",
    "created_at": "2021-05-30T02:25:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436563",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>We may also want to consider 
- adding a method `RealSet.as_manifold_subset`
- extending the `RealSet` constructors (default constructor and `RealSet.open` etc.) so that they can build manifold objects; for example if `structure` or `name` is passed; then perhaps the global bindings `RealLine` and `OpenInterval` can be deprecated.



---

archive/issue_comments_436564.json:
```json
{
    "body": "<a id='comment:9'></a>Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.",
    "created_at": "2021-05-30T09:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436564",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:9'></a>Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.



---

archive/issue_comments_436565.json:
```json
{
    "body": "<a id='comment:10'></a>Moreover, you represented closed or clopen intervals by a topological closure, which is fine for now. But as soon as we have manifolds with boundary, we probably want them to be represented by those objects/instances instead (or as well).",
    "created_at": "2021-05-30T09:23:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436565",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:10'></a>Moreover, you represented closed or clopen intervals by a topological closure, which is fine for now. But as soon as we have manifolds with boundary, we probably want them to be represented by those objects/instances instead (or as well).



---

archive/issue_comments_436566.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-05-30T09:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436566",
    "user": "https://github.com/mjungmath"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_436567.json:
```json
{
    "body": "<a id='comment:11'></a>LGTM",
    "created_at": "2021-05-30T09:42:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436567",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:11'></a>LGTM



---

archive/issue_comments_436568.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:9 gh-mjungmath]:\n> Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.\n\n\nYes, it does. You can initialize a `RealSet` using several `OpenInterval` instances, and it will take the union.",
    "created_at": "2021-05-30T16:55:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436568",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>Replying to [comment:9 gh-mjungmath]:
> Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.


Yes, it does. You can initialize a `RealSet` using several `OpenInterval` instances, and it will take the union.



---

archive/issue_comments_436569.json:
```json
{
    "body": "<a id='comment:13'></a>Thanks for the review!",
    "created_at": "2021-05-30T16:56:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436569",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Thanks for the review!



---

archive/issue_comments_436570.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:12 mkoeppe]:\n> Replying to [comment:9 gh-mjungmath]:\n> > Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.\n\n> \n> Yes, it does. You can initialize a `RealSet` using several `OpenInterval` instances, and it will take the union.\n\n\nThat is not what I mean. There are no unions of `OpenInterval` on the manifold level yet. This is, for example, important for a potential `RealSet.as_manifold_subset`.",
    "created_at": "2021-05-30T18:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436570",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:14'></a>Replying to [comment:12 mkoeppe]:
> Replying to [comment:9 gh-mjungmath]:
> > Notice that `RealSet` supports unions of intervals whereas `OpenInterval` does not.

> 
> Yes, it does. You can initialize a `RealSet` using several `OpenInterval` instances, and it will take the union.


That is not what I mean. There are no unions of `OpenInterval` on the manifold level yet. This is, for example, important for a potential `RealSet.as_manifold_subset`.



---

archive/issue_comments_436571.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 gh-mjungmath]:\n> There are no unions of `OpenInterval` on the manifold level yet. This is, for example, important for a potential `RealSet.as_manifold_subset`.\n\n\nIf you create `OpenInterval` instances with the same `ambient_interval` set, then you can take unions.\n\n```\nsage: I02 = OpenInterval(0, 2, ambient_interval=RealLine())\nsage: I13 = OpenInterval(1, 3, ambient_interval=RealLine())\nsage: I02.union(I13)\nOpen subset (0, 2)_union_(1, 3) of the Real number line R\n```",
    "created_at": "2021-05-30T18:50:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436571",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>Replying to [comment:14 gh-mjungmath]:
> There are no unions of `OpenInterval` on the manifold level yet. This is, for example, important for a potential `RealSet.as_manifold_subset`.


If you create `OpenInterval` instances with the same `ambient_interval` set, then you can take unions.

```
sage: I02 = OpenInterval(0, 2, ambient_interval=RealLine())
sage: I13 = OpenInterval(1, 3, ambient_interval=RealLine())
sage: I02.union(I13)
Open subset (0, 2)_union_(1, 3) of the Real number line R
```



---

archive/issue_comments_436572.json:
```json
{
    "body": "<a id='comment:16'></a>Right, but\n\n```\nsage: I02 = OpenInterval(0, 2, ambient_interval=RealLine())\nsage: I13 = OpenInterval(1, 3, ambient_interval=RealLine())\nsage: U = I02.union(I13)\nsage: RealSet(U)\n```\n\nwon't work, no?",
    "created_at": "2021-05-30T19:03:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436572",
    "user": "https://github.com/mjungmath"
}
```

<a id='comment:16'></a>Right, but

```
sage: I02 = OpenInterval(0, 2, ambient_interval=RealLine())
sage: I13 = OpenInterval(1, 3, ambient_interval=RealLine())
sage: U = I02.union(I13)
sage: RealSet(U)
```

won't work, no?



---

archive/issue_comments_436573.json:
```json
{
    "body": "<a id='comment:17'></a>Good catch...",
    "created_at": "2021-05-30T19:05:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436573",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Good catch...



---

archive/issue_comments_436574.json:
```json
{
    "body": "<a id='comment:18'></a>Folllow up in #31878.",
    "created_at": "2021-05-30T19:16:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436574",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Folllow up in #31878.



---

archive/issue_comments_436575.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:7 mkoeppe]:\n> ... or rather from manifolds to topological spaces (see #31877).\n> \n> Do we have forgetful functors anywhere already?\n\n\n`categories.functor.ForgetfulFunctor`",
    "created_at": "2021-05-30T23:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436575",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>Replying to [comment:7 mkoeppe]:
> ... or rather from manifolds to topological spaces (see #31877).
> 
> Do we have forgetful functors anywhere already?


`categories.functor.ForgetfulFunctor`



---

archive/issue_comments_436576.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:",
    "created_at": "2021-06-19T18:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436576",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. Last 10 new commits:



---

archive/issue_comments_436577.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-06-19T18:24:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436577",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_436578.json:
```json
{
    "body": "<a id='comment:21'></a>Trivial merge with updated dependency",
    "created_at": "2021-06-19T18:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436578",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>Trivial merge with updated dependency



---

archive/issue_comments_436579.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-19T18:24:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436579",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_436580.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-06-19T21:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436580",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_436581.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-06-19T21:10:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436581",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_436582.json:
```json
{
    "body": "<a id='comment:24'></a>Another trivial merge to remove a merge conflict",
    "created_at": "2021-06-19T21:11:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436582",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Another trivial merge to remove a merge conflict



---

archive/issue_comments_436583.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-19T21:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436583",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_436584.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-07-01T20:45:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30832#issuecomment-436584",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_080455.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-07-01T20:45:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30832",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30832#event-80455"
}
```
