# Issue 30613: No Future

archive/issues_030613.json:
```json
{
    "body": "CC:  @fchapoton @mkoeppe @slel\n\nThe `__future__` import statements were part of the Python2-to-Python3 migration scaffolding. Since it is unlikely we will move back to supporting Python 2, we should remove those.\n\nThis ticket only deals with files within `SAGE_ROOT/src/sage`.\n\nDescription of commits:\n- the first commit is a raw removal of the `__future__` import statements\n- the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion\n- the third commit fixes a doctest\n- the fourth commit removes the automatic addition of `__future__` complieflags from the doctest framework\n\nAfter applying the branch, you might have to rebuild `psutil` and `sympy`.\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/30850\n\n",
    "closed_at": "2020-12-05T22:13:16Z",
    "created_at": "2020-11-02T10:30:30Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "No Future",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30613",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```
CC:  @fchapoton @mkoeppe @slel

The `__future__` import statements were part of the Python2-to-Python3 migration scaffolding. Since it is unlikely we will move back to supporting Python 2, we should remove those.

This ticket only deals with files within `SAGE_ROOT/src/sage`.

Description of commits:
- the first commit is a raw removal of the `__future__` import statements
- the second commit removes the `del absolute_import,...` statements that were here to avoid those to appear in the tab completion
- the third commit fixes a doctest
- the fourth commit removes the automatic addition of `__future__` complieflags from the doctest framework

After applying the branch, you might have to rebuild `psutil` and `sympy`.



Issue created by migration from https://trac.sagemath.org/ticket/30850





---

archive/issue_comments_437097.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-11-02T12:26:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437097",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

New commits:



---

archive/issue_comments_437098.json:
```json
{
    "body": "Doctests pass on my computer, let us see if patchbots can handle it without rebuilding `psutil` and `sympy`.",
    "created_at": "2020-11-02T15:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437098",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Doctests pass on my computer, let us see if patchbots can handle it without rebuilding `psutil` and `sympy`.



---

archive/issue_comments_437099.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-11-02T15:34:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437099",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_437100.json:
```json
{
    "body": "patchbot will not run, because this is \"unsafe\" (changes outside of src/sage)",
    "created_at": "2020-11-02T17:07:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437100",
    "user": "https://github.com/fchapoton"
}
```

patchbot will not run, because this is "unsafe" (changes outside of src/sage)



---

archive/issue_comments_437101.json:
```json
{
    "body": "OK i see.",
    "created_at": "2020-11-02T17:29:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437101",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

OK i see.



---

archive/issue_comments_437102.json:
```json
{
    "body": "maybe there is a way to use github actions to test this ticket ?",
    "created_at": "2020-11-02T18:57:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437102",
    "user": "https://github.com/fchapoton"
}
```

maybe there is a way to use github actions to test this ticket ?



---

archive/issue_comments_437103.json:
```json
{
    "body": "Yes, you set a tag and push the tag to a [GitHub](GitHub) repository.",
    "created_at": "2020-11-02T19:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437103",
    "user": "https://github.com/mkoeppe"
}
```

Yes, you set a tag and push the tag to a [GitHub](GitHub) repository.



---

archive/issue_comments_437104.json:
```json
{
    "body": "All tests pass for me on OS X 10.15.7, using a system installation of Python 3.8.6.",
    "created_at": "2020-11-02T21:06:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437104",
    "user": "https://github.com/jhpalmieri"
}
```

All tests pass for me on OS X 10.15.7, using a system installation of Python 3.8.6.



---

archive/issue_comments_437105.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-11-10T14:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437105",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_437106.json:
```json
{
    "body": "does not apply on the latest beta => needs work",
    "created_at": "2020-11-10T14:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437106",
    "user": "https://github.com/fchapoton"
}
```

does not apply on the latest beta => needs work



---

archive/issue_comments_437107.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-11-10T15:11:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_437108.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-10T15:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437108",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_437109.json:
```json
{
    "body": "Merge done.",
    "created_at": "2020-11-10T15:12:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437109",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Merge done.



---

archive/issue_comments_437110.json:
```json
{
    "body": "I would suggest to make here only the changes in src/sage/ and keep the rest for another ticket. This would allow the patchbots to run.",
    "created_at": "2020-11-10T15:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437110",
    "user": "https://github.com/fchapoton"
}
```

I would suggest to make here only the changes in src/sage/ and keep the rest for another ticket. This would allow the patchbots to run.



---

archive/issue_comments_437111.json:
```json
{
    "body": "Running all the doctests with `-p 4` takes less than an hour on a laptop. I just did it.",
    "created_at": "2020-11-11T15:38:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437111",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Running all the doctests with `-p 4` takes less than an hour on a laptop. I just did it.



---

archive/issue_comments_437112.json:
```json
{
    "body": "I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.",
    "created_at": "2020-11-12T00:29:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437112",
    "user": "https://github.com/jhpalmieri"
}
```

I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.



---

archive/issue_comments_437113.json:
```json
{
    "body": "#29355 removes `src/bin/sage-pypkg-location` and #30867 removes `src/mac-app`. By merging now you can avoid later merge conflicts",
    "created_at": "2020-11-12T00:40:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437113",
    "user": "https://github.com/mkoeppe"
}
```

#29355 removes `src/bin/sage-pypkg-location` and #30867 removes `src/mac-app`. By merging now you can avoid later merge conflicts



---

archive/issue_comments_437114.json:
```json
{
    "body": "Likewise, #30846 moves `src/bin/sage-list-packages`",
    "created_at": "2020-11-12T00:41:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437114",
    "user": "https://github.com/mkoeppe"
}
```

Likewise, #30846 moves `src/bin/sage-list-packages`



---

archive/issue_comments_437115.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-11-17T19:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437115",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_437116.json:
```json
{
    "body": "Replying to [comment:15 jhpalmieri]:\n> I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.\n\n\nIndeed, and moreover also the 3.x series is introducing more `__future__` features, for example `from __future__ import annotations`: https://docs.python.org/3/library/__future__.html",
    "created_at": "2020-11-17T19:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437116",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:15 jhpalmieri]:
> I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.


Indeed, and moreover also the 3.x series is introducing more `__future__` features, for example `from __future__ import annotations`: https://docs.python.org/3/library/__future__.html



---

archive/issue_comments_437117.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-11-20T12:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437117",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_437118.json:
```json
{
    "body": "The current branch only touches files within `SAGE_ROOT/src/sage/`.",
    "created_at": "2020-11-20T12:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437118",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

The current branch only touches files within `SAGE_ROOT/src/sage/`.



---

archive/issue_comments_437119.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-11-20T12:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437119",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_437120.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-11-20T18:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437120",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_437121.json:
```json
{
    "body": "Merge conflict",
    "created_at": "2020-11-24T23:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437121",
    "user": "https://github.com/vbraun"
}
```

Merge conflict



---

archive/issue_comments_437122.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-11-24T23:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437122",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_437123.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-11-24T23:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437123",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_437124.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-11-24T23:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437124",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_080498.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-12-05T22:13:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30613#event-80498"
}
```



---

archive/issue_comments_437125.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-12-05T22:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30613#issuecomment-437125",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
