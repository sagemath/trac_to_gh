# Issue 30589: Upgrade Python to 3.9.1, pip to 20.3.3

archive/issues_030352.json:
```json
{
    "assignees": [],
    "body": "This contains the upgrade to Python 3.9.1\n\nTo test, use \n\n```\n./configure --without-system-python3 --enable-download-from-upstream-url\n```\n\n\nDepends on #31050\n\nCC:  @slel @jhpalmieri @fchapoton @dimpase @vbraun @kiwifb\n\nComponent: **packages: standard**\n\nAuthor: **Matthias Koeppe**\n\nBranch/Commit: **[`41d7e7a`](https://github.com/sagemath/sagetrac-mirror/commit/41d7e7a74441e5f9deb3e7a93adfccf486dde417)**\n\nReviewer: **John Palmieri, Samuel Leli\u00e8vre**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/30589_\n\n",
    "closed_at": "2021-01-24T10:38:12Z",
    "created_at": "2020-09-17T16:57:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade Python to 3.9.1, pip to 20.3.3",
    "type": "issue",
    "updated_at": "2021-01-24T10:38:12Z",
    "url": "https://github.com/sagemath/sage/issues/30589",
    "user": "https://github.com/mkoeppe"
}
```
This contains the upgrade to Python 3.9.1

To test, use 

```
./configure --without-system-python3 --enable-download-from-upstream-url
```


Depends on #31050

CC:  @slel @jhpalmieri @fchapoton @dimpase @vbraun @kiwifb

Component: **packages: standard**

Author: **Matthias Koeppe**

Branch/Commit: **[`41d7e7a`](https://github.com/sagemath/sagetrac-mirror/commit/41d7e7a74441e5f9deb3e7a93adfccf486dde417)**

Reviewer: **John Palmieri, Samuel Leli√®vre**

_Issue created by migration from https://trac.sagemath.org/ticket/30589_





---

archive/issue_events_418619.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-17T16:57:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418619"
}
```



---

archive/issue_events_418620.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-17T16:57:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418620"
}
```



---

archive/issue_events_418621.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-17T16:57:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418621"
}
```



---

archive/issue_events_418622.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-17T16:57:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418622"
}
```



---

archive/issue_comments_487943.json:
```json
{
    "body": "Dependencies: **#30184**",
    "created_at": "2020-09-17T16:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487943",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#30184**



---

archive/issue_comments_487944.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n This contains the experimental upgrade to Python 3.9 for testing ticket #30184 (Support Python 3.9)\n \n It is not intended for merging.\n+\n+Necessary changes to the library should go on #30184 (Support Python 3.9)\n``````\n",
    "created_at": "2020-09-17T17:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487944",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 This contains the experimental upgrade to Python 3.9 for testing ticket #30184 (Support Python 3.9)
 
 It is not intended for merging.
+
+Necessary changes to the library should go on #30184 (Support Python 3.9)
``````




---

archive/issue_comments_487945.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,10 @@\n \n It is not intended for merging.\n \n+To test, use \n+\n+```\n+./configure --without-system-python3 --enable-download-from-upstream-url\n+```\n+\n Necessary changes to the library should go on #30184 (Support Python 3.9)\n``````\n",
    "created_at": "2020-09-17T17:41:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487945",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,10 @@
 
 It is not intended for merging.
 
+To test, use 
+
+```
+./configure --without-system-python3 --enable-download-from-upstream-url
+```
+
 Necessary changes to the library should go on #30184 (Support Python 3.9)
``````




---

archive/issue_comments_487946.json:
```json
{
    "body": "Branch: **[u/mkoeppe/upgrade-python-3.9](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade-python-3.9)**",
    "created_at": "2020-09-17T18:05:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487946",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/upgrade-python-3.9](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade-python-3.9)**



---

archive/issue_comments_487947.json:
```json
{
    "body": "Commit: **[`e188c5e`](https://github.com/sagemath/sagetrac-mirror/commit/e188c5ecca99f7443cdca2d9441aabf200ab88aa)**",
    "created_at": "2020-09-17T22:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487947",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`e188c5e`](https://github.com/sagemath/sagetrac-mirror/commit/e188c5ecca99f7443cdca2d9441aabf200ab88aa)**



---

archive/issue_comments_487948.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e188c5ecca99f7443cdca2d9441aabf200ab88aa\"><code>e188c5e</code></a></td><td><code>src/sage/cpython/debugimpl.c: Disable _type_debug for Python 3.9</code></td></tr></table>\n",
    "created_at": "2020-09-17T22:29:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487948",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e188c5ecca99f7443cdca2d9441aabf200ab88aa"><code>e188c5e</code></a></td><td><code>src/sage/cpython/debugimpl.c: Disable _type_debug for Python 3.9</code></td></tr></table>




---

archive/issue_comments_487949.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3dd329f3489492aea29d18b294127de66c53307\"><code>d3dd329</code></a></td><td><code>Merge branch 't/30595/remove_deprecated_sage_libs_ppl' into t/30184/support_python_3_9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68ef4c5cfa839192dac41cd3188885cfca17c8ef\"><code>68ef4c5</code></a></td><td><code>src/sage/cpython/debugimpl.c: Disable _type_debug for Python 3.9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3cb5717d7383e02b235eb19bc520e75cd39e3ce\"><code>f3cb571</code></a></td><td><code>src/sage/all.py: Filter out Python 3.9 deprecation warnings from ast</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e16ded241acdfbc4dfc7c8601f4c64a95f6aa7c7\"><code>e16ded2</code></a></td><td><code>src/sage/symbolic/ring.pyx (isidentifier): Remove py2-only code, use of deprecated parser module</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27a57bc638d8cb876ef6f7aec4868b4939d6b3d2\"><code>27a57bc</code></a></td><td><code>src/sage/misc/sageinspect.py: Adjust doctest for sage_getsourcelines for Python 3.9 - decorators are now part of the definition</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/39416fb45c4545868030b3f92d16e57f9ae73752\"><code>39416fb</code></a></td><td><code>src/sage/misc/sageinspect.py (SageArgSpecVisitor): Relax doctest pattern for python 3.9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5548c0d6278b75e37c71243ea1dbbbddbe0cf717\"><code>5548c0d</code></a></td><td><code>src/sage/misc/latex.py (has_latex_attr): Relax doctest pattern for python 3.9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a9362e7173449822802aff4f72eb9bc9498d215\"><code>4a9362e</code></a></td><td><code>src/sage/combinat/root_system/pieri_factors.py: Use sorted in doctest for python 3.9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49eccd9521d9cdbe6cafbb30ceb784669461bc10\"><code>49eccd9</code></a></td><td><code>src/sage/geometry/polyhedron/palp_database.py: Relax doctest pattern for python 3.9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e89ab2f5596076ec659b43612b1a84beea03b81\"><code>5e89ab2</code></a></td><td><code>Merge branch 't/30184/support_python_3_9' into t/30589/upgrade-python-3.9</code></td></tr></table>\n",
    "created_at": "2020-09-18T00:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487949",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3dd329f3489492aea29d18b294127de66c53307"><code>d3dd329</code></a></td><td><code>Merge branch 't/30595/remove_deprecated_sage_libs_ppl' into t/30184/support_python_3_9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68ef4c5cfa839192dac41cd3188885cfca17c8ef"><code>68ef4c5</code></a></td><td><code>src/sage/cpython/debugimpl.c: Disable _type_debug for Python 3.9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3cb5717d7383e02b235eb19bc520e75cd39e3ce"><code>f3cb571</code></a></td><td><code>src/sage/all.py: Filter out Python 3.9 deprecation warnings from ast</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e16ded241acdfbc4dfc7c8601f4c64a95f6aa7c7"><code>e16ded2</code></a></td><td><code>src/sage/symbolic/ring.pyx (isidentifier): Remove py2-only code, use of deprecated parser module</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27a57bc638d8cb876ef6f7aec4868b4939d6b3d2"><code>27a57bc</code></a></td><td><code>src/sage/misc/sageinspect.py: Adjust doctest for sage_getsourcelines for Python 3.9 - decorators are now part of the definition</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/39416fb45c4545868030b3f92d16e57f9ae73752"><code>39416fb</code></a></td><td><code>src/sage/misc/sageinspect.py (SageArgSpecVisitor): Relax doctest pattern for python 3.9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5548c0d6278b75e37c71243ea1dbbbddbe0cf717"><code>5548c0d</code></a></td><td><code>src/sage/misc/latex.py (has_latex_attr): Relax doctest pattern for python 3.9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a9362e7173449822802aff4f72eb9bc9498d215"><code>4a9362e</code></a></td><td><code>src/sage/combinat/root_system/pieri_factors.py: Use sorted in doctest for python 3.9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49eccd9521d9cdbe6cafbb30ceb784669461bc10"><code>49eccd9</code></a></td><td><code>src/sage/geometry/polyhedron/palp_database.py: Relax doctest pattern for python 3.9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e89ab2f5596076ec659b43612b1a84beea03b81"><code>5e89ab2</code></a></td><td><code>Merge branch 't/30184/support_python_3_9' into t/30589/upgrade-python-3.9</code></td></tr></table>




---

archive/issue_comments_487950.json:
```json
{
    "body": "Changed commit from **[`e188c5e`](https://github.com/sagemath/sagetrac-mirror/commit/e188c5ecca99f7443cdca2d9441aabf200ab88aa)** to **[`5e89ab2`](https://github.com/sagemath/sagetrac-mirror/commit/5e89ab2f5596076ec659b43612b1a84beea03b81)**",
    "created_at": "2020-09-18T00:56:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487950",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e188c5e`](https://github.com/sagemath/sagetrac-mirror/commit/e188c5ecca99f7443cdca2d9441aabf200ab88aa)** to **[`5e89ab2`](https://github.com/sagemath/sagetrac-mirror/commit/5e89ab2f5596076ec659b43612b1a84beea03b81)**



---

archive/issue_comments_487951.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b21ed975edf54eff10c22a2298fc6097f5c39317\"><code>b21ed97</code></a></td><td><code>build/pkgs/python3/spkg-configure.m4: Ensure that PYTHON_FOR_VENV is a full path</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49aa061ad6390da770c566c642dad2982d99d29f\"><code>49aa061</code></a></td><td><code>Revert \"build/pkgs/python3/spkg-configure.m4: Use 'python >= 3.7'; keep checking for 'python3.8, python3.7'\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8b77cd3fdbb96ed85cb34367e59967d9031f612\"><code>a8b77cd</code></a></td><td><code>Revert \"only test python3, to be 3.7 or 3.8\"</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9403629235ffb078c0eda9a46154d882c62760b2\"><code>9403629</code></a></td><td><code>build/bin/sage-system-python: Work around LC_ALL=C</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff0dbc622b8b3f4ce467a0324c3fdbd134df24e3\"><code>ff0dbc6</code></a></td><td><code>build/sage_bootstrap/uncompress/tar_file.py: Fix encoding to utf-8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f05a110c45fcc5ad4d745adc1a2197f320050fb5\"><code>f05a110</code></a></td><td><code>Merge branch 't/30008/after__30053__sphinx_3_1_2_does_not_build_on_ubuntu__trusty_xenial_bionic___debian_jessie__centos_7__again_' into t/30576/public/30576</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/945c8c58b23cf7b8e5c15cb69c0ac4dbcd184cb5\"><code>945c8c5</code></a></td><td><code>build/bin/sage-site (--docbuild): Set an English locale suuch as C.utf-8, but not the C locale, to ensure correct operation on Python 3.6</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8906897f6f752673eaf2c099ec4d398e5a5fc5dd\"><code>8906897</code></a></td><td><code>Merge branch 't/30576/public/30576' into t/30546/build/py3x_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/60137bc815d4f897d0ce3507efa89b17c9f1c4c6\"><code>60137bc</code></a></td><td><code>Merge branch 't/30546/build/py3x_conf' into t/30184/support_python_3_9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/316ae6d4881978bfcf7ed16c8f2dc2a568e930d8\"><code>316ae6d</code></a></td><td><code>Merge branch 't/30184/support_python_3_9' into t/30589/upgrade-python-3.9</code></td></tr></table>\n",
    "created_at": "2020-09-24T18:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487951",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b21ed975edf54eff10c22a2298fc6097f5c39317"><code>b21ed97</code></a></td><td><code>build/pkgs/python3/spkg-configure.m4: Ensure that PYTHON_FOR_VENV is a full path</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49aa061ad6390da770c566c642dad2982d99d29f"><code>49aa061</code></a></td><td><code>Revert "build/pkgs/python3/spkg-configure.m4: Use 'python >= 3.7'; keep checking for 'python3.8, python3.7'"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8b77cd3fdbb96ed85cb34367e59967d9031f612"><code>a8b77cd</code></a></td><td><code>Revert "only test python3, to be 3.7 or 3.8"</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9403629235ffb078c0eda9a46154d882c62760b2"><code>9403629</code></a></td><td><code>build/bin/sage-system-python: Work around LC_ALL=C</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff0dbc622b8b3f4ce467a0324c3fdbd134df24e3"><code>ff0dbc6</code></a></td><td><code>build/sage_bootstrap/uncompress/tar_file.py: Fix encoding to utf-8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f05a110c45fcc5ad4d745adc1a2197f320050fb5"><code>f05a110</code></a></td><td><code>Merge branch 't/30008/after__30053__sphinx_3_1_2_does_not_build_on_ubuntu__trusty_xenial_bionic___debian_jessie__centos_7__again_' into t/30576/public/30576</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/945c8c58b23cf7b8e5c15cb69c0ac4dbcd184cb5"><code>945c8c5</code></a></td><td><code>build/bin/sage-site (--docbuild): Set an English locale suuch as C.utf-8, but not the C locale, to ensure correct operation on Python 3.6</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8906897f6f752673eaf2c099ec4d398e5a5fc5dd"><code>8906897</code></a></td><td><code>Merge branch 't/30576/public/30576' into t/30546/build/py3x_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/60137bc815d4f897d0ce3507efa89b17c9f1c4c6"><code>60137bc</code></a></td><td><code>Merge branch 't/30546/build/py3x_conf' into t/30184/support_python_3_9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/316ae6d4881978bfcf7ed16c8f2dc2a568e930d8"><code>316ae6d</code></a></td><td><code>Merge branch 't/30184/support_python_3_9' into t/30589/upgrade-python-3.9</code></td></tr></table>




---

archive/issue_comments_487952.json:
```json
{
    "body": "Changed commit from **[`5e89ab2`](https://github.com/sagemath/sagetrac-mirror/commit/5e89ab2f5596076ec659b43612b1a84beea03b81)** to **[`316ae6d`](https://github.com/sagemath/sagetrac-mirror/commit/316ae6d4881978bfcf7ed16c8f2dc2a568e930d8)**",
    "created_at": "2020-09-24T18:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487952",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5e89ab2`](https://github.com/sagemath/sagetrac-mirror/commit/5e89ab2f5596076ec659b43612b1a84beea03b81)** to **[`316ae6d`](https://github.com/sagemath/sagetrac-mirror/commit/316ae6d4881978bfcf7ed16c8f2dc2a568e930d8)**



---

archive/issue_comments_487953.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ca586938cbdd91114a10dd3364201c8076412485\"><code>ca58693</code></a></td><td><code>build/pkgs/pillow/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a747c48eca1be0104c202e4922e5386aa794d08\"><code>5a747c4</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Remove pip2 support</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ee21109dfb001feec2b032c197defb91cc75783\"><code>9ee2110</code></a></td><td><code>build/bin/sage-dist-helpers: Also use $sudo for storing the wheel file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7aac84ab4dd86ad6203a99eb82371c1d2a46363\"><code>d7aac84</code></a></td><td><code>src/doc/en/developer/packaging.rst: Update sdh_... documentation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b7c7a04d658838ce511e352edb9c03f42c4a7f2\"><code>9b7c7a0</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Fix typo in comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4135e8b236d2e5491b3ee96cbd00196dc5b6e036\"><code>4135e8b</code></a></td><td><code>build/bin/sage-pip-install: Remove an outdated comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2e707561ab3044221b57151ae4cc67d502fe9f8\"><code>f2e7075</code></a></td><td><code>Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a2dbb8d4f4a7cb203fd9ee0b8b2d8d6ca093da9c\"><code>a2dbb8d</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30546/build/py3x_conf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c756edbd6d5f88dbb7b2c89169044daf23fb012\"><code>8c756ed</code></a></td><td><code>Merge branch 't/30546/build/py3x_conf' into t/30184/support_python_3_9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5cf1bafb7692df61b243eec6fb58a09e8c2738ca\"><code>5cf1baf</code></a></td><td><code>Merge branch 't/30184/support_python_3_9' into t/30589/upgrade-python-3.9</code></td></tr></table>\n",
    "created_at": "2020-09-24T18:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487953",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ca586938cbdd91114a10dd3364201c8076412485"><code>ca58693</code></a></td><td><code>build/pkgs/pillow/spkg-install.in: Install via bdist_wheel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a747c48eca1be0104c202e4922e5386aa794d08"><code>5a747c4</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Remove pip2 support</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ee21109dfb001feec2b032c197defb91cc75783"><code>9ee2110</code></a></td><td><code>build/bin/sage-dist-helpers: Also use $sudo for storing the wheel file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7aac84ab4dd86ad6203a99eb82371c1d2a46363"><code>d7aac84</code></a></td><td><code>src/doc/en/developer/packaging.rst: Update sdh_... documentation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b7c7a04d658838ce511e352edb9c03f42c4a7f2"><code>9b7c7a0</code></a></td><td><code>build/bin/sage-pip-{install,uninstall}: Fix typo in comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4135e8b236d2e5491b3ee96cbd00196dc5b6e036"><code>4135e8b</code></a></td><td><code>build/bin/sage-pip-install: Remove an outdated comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2e707561ab3044221b57151ae4cc67d502fe9f8"><code>f2e7075</code></a></td><td><code>Merge tag '9.2.beta13' into t/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a2dbb8d4f4a7cb203fd9ee0b8b2d8d6ca093da9c"><code>a2dbb8d</code></a></td><td><code>Merge branch 't/29500/install_all_python_packages_via_pip_wheel__create_pep_503_simple_repository_for_wheels' into t/30546/build/py3x_conf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c756edbd6d5f88dbb7b2c89169044daf23fb012"><code>8c756ed</code></a></td><td><code>Merge branch 't/30546/build/py3x_conf' into t/30184/support_python_3_9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5cf1bafb7692df61b243eec6fb58a09e8c2738ca"><code>5cf1baf</code></a></td><td><code>Merge branch 't/30184/support_python_3_9' into t/30589/upgrade-python-3.9</code></td></tr></table>




---

archive/issue_comments_487954.json:
```json
{
    "body": "Changed commit from **[`316ae6d`](https://github.com/sagemath/sagetrac-mirror/commit/316ae6d4881978bfcf7ed16c8f2dc2a568e930d8)** to **[`5cf1baf`](https://github.com/sagemath/sagetrac-mirror/commit/5cf1bafb7692df61b243eec6fb58a09e8c2738ca)**",
    "created_at": "2020-09-24T18:59:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487954",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`316ae6d`](https://github.com/sagemath/sagetrac-mirror/commit/316ae6d4881978bfcf7ed16c8f2dc2a568e930d8)** to **[`5cf1baf`](https://github.com/sagemath/sagetrac-mirror/commit/5cf1bafb7692df61b243eec6fb58a09e8c2738ca)**



---

archive/issue_comments_487955.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f19d9a4a356da5e4b068dc52c321e703c2648da3\"><code>f19d9a4</code></a></td><td><code>allow absolute names as arguments to --with-python</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f7d5886e28b7c23be3c6efbce4686e8c43ea664\"><code>4f7d588</code></a></td><td><code>Merge branch 't/30546/build/py3x_conf' into t/30184/support_python_3_9</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b3c1dc1ee94b0b0cd3dd0b9ebd04ff188d26ac98\"><code>b3c1dc1</code></a></td><td><code>Merge branch 't/30184/support_python_3_9' into t/30589/upgrade-python-3.9</code></td></tr></table>\n",
    "created_at": "2020-09-25T01:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487955",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f19d9a4a356da5e4b068dc52c321e703c2648da3"><code>f19d9a4</code></a></td><td><code>allow absolute names as arguments to --with-python</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f7d5886e28b7c23be3c6efbce4686e8c43ea664"><code>4f7d588</code></a></td><td><code>Merge branch 't/30546/build/py3x_conf' into t/30184/support_python_3_9</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b3c1dc1ee94b0b0cd3dd0b9ebd04ff188d26ac98"><code>b3c1dc1</code></a></td><td><code>Merge branch 't/30184/support_python_3_9' into t/30589/upgrade-python-3.9</code></td></tr></table>




---

archive/issue_comments_487956.json:
```json
{
    "body": "Changed commit from **[`5cf1baf`](https://github.com/sagemath/sagetrac-mirror/commit/5cf1bafb7692df61b243eec6fb58a09e8c2738ca)** to **[`b3c1dc1`](https://github.com/sagemath/sagetrac-mirror/commit/b3c1dc1ee94b0b0cd3dd0b9ebd04ff188d26ac98)**",
    "created_at": "2020-09-25T01:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487956",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5cf1baf`](https://github.com/sagemath/sagetrac-mirror/commit/5cf1bafb7692df61b243eec6fb58a09e8c2738ca)** to **[`b3c1dc1`](https://github.com/sagemath/sagetrac-mirror/commit/b3c1dc1ee94b0b0cd3dd0b9ebd04ff188d26ac98)**



---

archive/issue_comments_487957.json:
```json
{
    "body": "Changed commit from **[`b3c1dc1`](https://github.com/sagemath/sagetrac-mirror/commit/b3c1dc1ee94b0b0cd3dd0b9ebd04ff188d26ac98)** to **[`6d3a0fa`](https://github.com/sagemath/sagetrac-mirror/commit/6d3a0fa8249fb72dbaac0539787e870582b9cb42)**",
    "created_at": "2020-10-06T00:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487957",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b3c1dc1`](https://github.com/sagemath/sagetrac-mirror/commit/b3c1dc1ee94b0b0cd3dd0b9ebd04ff188d26ac98)** to **[`6d3a0fa`](https://github.com/sagemath/sagetrac-mirror/commit/6d3a0fa8249fb72dbaac0539787e870582b9cb42)**



---

archive/issue_comments_487958.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/255d22ba66b39bbdad30a960aed8ba658c7f0b3a\"><code>255d22b</code></a></td><td><code>build/pkgs/python3: Update to 3.9.0rc2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6d3a0fa8249fb72dbaac0539787e870582b9cb42\"><code>6d3a0fa</code></a></td><td><code>build/pkgs/python3: Update to 3.9.0</code></td></tr></table>\n",
    "created_at": "2020-10-06T00:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487958",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/255d22ba66b39bbdad30a960aed8ba658c7f0b3a"><code>255d22b</code></a></td><td><code>build/pkgs/python3: Update to 3.9.0rc2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6d3a0fa8249fb72dbaac0539787e870582b9cb42"><code>6d3a0fa</code></a></td><td><code>build/pkgs/python3: Update to 3.9.0</code></td></tr></table>




---

archive/issue_events_418623.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-06T00:08:30Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "title_is": "Test ticket: Python 3.9.0",
    "title_was": "Test ticket: Python 3.9.0rc2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418623"
}
```



---

archive/issue_comments_487959.json:
```json
{
    "body": "Changed dependencies from **#30184** to none",
    "created_at": "2020-10-06T00:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487959",
    "user": "https://github.com/mkoeppe"
}
```

Changed dependencies from **#30184** to none



---

archive/issue_comments_487960.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n-This contains the experimental upgrade to Python 3.9 for testing ticket #30184 (Support Python 3.9)\n+This contains the upgrade to Python 3.9.0 for testing ticket #30184 (Support Python 3.9)\n \n-It is not intended for merging.\n+It is not intended for merging - we should stay on 3.8.5 for a while\n \n To test, use \n \n``````\n",
    "created_at": "2020-10-06T00:08:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487960",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
-This contains the experimental upgrade to Python 3.9 for testing ticket #30184 (Support Python 3.9)
+This contains the upgrade to Python 3.9.0 for testing ticket #30184 (Support Python 3.9)
 
-It is not intended for merging.
+It is not intended for merging - we should stay on 3.8.5 for a while
 
 To test, use 
 
``````




---

archive/issue_comments_487961.json:
```json
{
    "body": "Reviewer: **https://github.com/mkoeppe/sage/actions/runs/290402434**",
    "created_at": "2020-10-06T00:20:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487961",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **https://github.com/mkoeppe/sage/actions/runs/290402434**



---

archive/issue_comments_487962.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n3.9.1 is out https://www.python.org/downloads/release/python-391/\nRelease Date: Dec. 7, 2020\n\n\"3.9.1 is the first version of Python to support macOS 11 Big Sur. With Xcode 11 and later it is now possible to build \u201cUniversal 2\u201d binaries which work on Apple Silicon. We are providing such an installer as the macos11.0 variant. This installer can be deployed back to older versions, tested down to OS X 10.9. As we are waiting for an updated version of pip, please consider the macos11.0 installer experimental.\"",
    "created_at": "2020-12-15T17:20:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487962",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

3.9.1 is out https://www.python.org/downloads/release/python-391/
Release Date: Dec. 7, 2020

"3.9.1 is the first version of Python to support macOS 11 Big Sur. With Xcode 11 and later it is now possible to build ‚ÄúUniversal 2‚Äù binaries which work on Apple Silicon. We are providing such an installer as the macos11.0 variant. This installer can be deployed back to older versions, tested down to OS X 10.9. As we are waiting for an updated version of pip, please consider the macos11.0 installer experimental."



---

archive/issue_comments_487963.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nNot sure which updated version of pip they are referring to. 20.3 (2020-11-30) lists \"Add support for MacOS Big Sur compatibility tags. (#9138)\" https://pip.pypa.io/en/stable/news/#id15\n\nNo new news items regarding Big Sur in 20.3.3 (2020-12-15)",
    "created_at": "2020-12-15T17:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487963",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Not sure which updated version of pip they are referring to. 20.3 (2020-11-30) lists "Add support for MacOS Big Sur compatibility tags. (#9138)" https://pip.pypa.io/en/stable/news/#id15

No new news items regarding Big Sur in 20.3.3 (2020-12-15)



---

archive/issue_comments_487964.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29aee87fc01f6fce3cc4356c98f27c44e4ce2b5b\"><code>29aee87</code></a></td><td><code>build/pkgs/python3: Update to 3.9.0rc2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e61d464292262d80c43895c64fce4f48a6895822\"><code>e61d464</code></a></td><td><code>build/pkgs/python3: Update to 3.9.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f8bb56d16600c8cfe1bab1d127f3931ca280dff0\"><code>f8bb56d</code></a></td><td><code>build/pkgs/python3: Update to 3.9.1</code></td></tr></table>\n",
    "created_at": "2020-12-16T01:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487964",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29aee87fc01f6fce3cc4356c98f27c44e4ce2b5b"><code>29aee87</code></a></td><td><code>build/pkgs/python3: Update to 3.9.0rc2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e61d464292262d80c43895c64fce4f48a6895822"><code>e61d464</code></a></td><td><code>build/pkgs/python3: Update to 3.9.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f8bb56d16600c8cfe1bab1d127f3931ca280dff0"><code>f8bb56d</code></a></td><td><code>build/pkgs/python3: Update to 3.9.1</code></td></tr></table>




---

archive/issue_comments_487965.json:
```json
{
    "body": "Changed commit from **[`6d3a0fa`](https://github.com/sagemath/sagetrac-mirror/commit/6d3a0fa8249fb72dbaac0539787e870582b9cb42)** to **[`f8bb56d`](https://github.com/sagemath/sagetrac-mirror/commit/f8bb56d16600c8cfe1bab1d127f3931ca280dff0)**",
    "created_at": "2020-12-16T01:51:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487965",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6d3a0fa`](https://github.com/sagemath/sagetrac-mirror/commit/6d3a0fa8249fb72dbaac0539787e870582b9cb42)** to **[`f8bb56d`](https://github.com/sagemath/sagetrac-mirror/commit/f8bb56d16600c8cfe1bab1d127f3931ca280dff0)**



---

archive/issue_events_418624.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-16T01:55:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418624"
}
```



---

archive/issue_events_418625.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-16T01:55:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418625"
}
```



---

archive/issue_comments_487966.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/290402434** to **https://github.com/mkoeppe/sage/actions/runs/424627107**",
    "created_at": "2020-12-16T01:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487966",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/290402434** to **https://github.com/mkoeppe/sage/actions/runs/424627107**



---

archive/issue_comments_487967.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,4 @@\n-This contains the upgrade to Python 3.9.0 for testing ticket #30184 (Support Python 3.9)\n-\n-It is not intended for merging - we should stay on 3.8.5 for a while\n+This contains the upgrade to Python 3.9.1\n \n To test, use \n \n@@ -8,4 +6,3 @@\n ./configure --without-system-python3 --enable-download-from-upstream-url\n ```\n \n-Necessary changes to the library should go on #30184 (Support Python 3.9)\n``````\n",
    "created_at": "2020-12-16T01:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487967",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,4 @@
-This contains the upgrade to Python 3.9.0 for testing ticket #30184 (Support Python 3.9)
-
-It is not intended for merging - we should stay on 3.8.5 for a while
+This contains the upgrade to Python 3.9.1
 
 To test, use 
 
@@ -8,4 +6,3 @@
 ./configure --without-system-python3 --enable-download-from-upstream-url
 ```
 
-Necessary changes to the library should go on #30184 (Support Python 3.9)
``````




---

archive/issue_events_418626.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-16T01:55:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "title_is": "Upgrade Python to 3.9.1",
    "title_was": "Test ticket: Python 3.9.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418626"
}
```



---

archive/issue_comments_487968.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nIf this works (and I'll test it out soon), it should be a blocker, since I can't build Sage's Python 3.8 on Big Sur.",
    "created_at": "2020-12-16T06:07:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487968",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:17" align="right">comment:17</div>

If this works (and I'll test it out soon), it should be a blocker, since I can't build Sage's Python 3.8 on Big Sur.



---

archive/issue_comments_487969.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThis builds for me on Big Sur. With the old version of `wheel`, I (not surprisingly) hit the problem fixed by #31050. With an updated `wheel`, `gmpy2` still fails to build, with this error:\n\n```\nSuccessfully built gmpy2\nRemoved build tracker: '/private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-dw7p5f40'\nUsing pip 20.2.3 from /Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip (python 3.9)\nNon-user install because site-packages writeable\nIgnoring indexes: https://pypi.org/simple\nCreated temporary directory: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-ephem-wheel-cache-nd6d05pj\nCreated temporary directory: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4\nInitialized build tracking at /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4\nCreated build tracker: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4\nEntered build tracker: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4\nCreated temporary directory: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-install-82a1edim\nERROR: gmpy2-2.1.0b5-cp39-cp39-macosx_10_9_x86_64.whl is not a supported wheel on this platform.\nException information:\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/cli/base_command.py\", line 228, in _main\n    status = self.run(options, args)\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/cli/req_command.py\", line 182, in wrapper\n    return func(self, options, args)\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/commands/install.py\", line 323, in run\n    requirement_set = resolver.resolve(\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/resolution/legacy/resolver.py\", line 173, in resolve\n    requirement_set.add_requirement(req)\n  File \"/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/req/req_set.py\", line 104, in add_requirement\n    raise InstallationError(\npip._internal.exceptions.InstallationError: gmpy2-2.1.0b5-cp39-cp39-macosx_10_9_x86_64.whl is not a supported wheel on this platform.\nRemoved build tracker: '/private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4'\nError: installing with pip3 failed\n```\nLooks like a problem with MACOSX_DEPLOYMENT_TARGET.",
    "created_at": "2020-12-16T18:15:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487969",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

This builds for me on Big Sur. With the old version of `wheel`, I (not surprisingly) hit the problem fixed by #31050. With an updated `wheel`, `gmpy2` still fails to build, with this error:

```
Successfully built gmpy2
Removed build tracker: '/private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-dw7p5f40'
Using pip 20.2.3 from /Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip (python 3.9)
Non-user install because site-packages writeable
Ignoring indexes: https://pypi.org/simple
Created temporary directory: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-ephem-wheel-cache-nd6d05pj
Created temporary directory: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4
Initialized build tracking at /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4
Created build tracker: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4
Entered build tracker: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4
Created temporary directory: /private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-install-82a1edim
ERROR: gmpy2-2.1.0b5-cp39-cp39-macosx_10_9_x86_64.whl is not a supported wheel on this platform.
Exception information:
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/cli/base_command.py", line 228, in _main
    status = self.run(options, args)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/cli/req_command.py", line 182, in wrapper
    return func(self, options, args)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/commands/install.py", line 323, in run
    requirement_set = resolver.resolve(
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/resolution/legacy/resolver.py", line 173, in resolve
    requirement_set.add_requirement(req)
  File "/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib/python3.9/site-packages/pip/_internal/req/req_set.py", line 104, in add_requirement
    raise InstallationError(
pip._internal.exceptions.InstallationError: gmpy2-2.1.0b5-cp39-cp39-macosx_10_9_x86_64.whl is not a supported wheel on this platform.
Removed build tracker: '/private/var/folders/z6/yjw_7s357yx3_mhh81__lplc0000gn/T/pip-req-tracker-d9f2exe4'
Error: installing with pip3 failed
```
Looks like a problem with MACOSX_DEPLOYMENT_TARGET.



---

archive/issue_comments_487970.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWe should probably also update to latest `pip`",
    "created_at": "2020-12-16T19:11:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487970",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

We should probably also update to latest `pip`



---

archive/issue_comments_487971.json:
```json
{
    "body": "Dependencies: **#31050**",
    "created_at": "2020-12-16T19:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487971",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#31050**



---

archive/issue_comments_487972.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0e3513fcb3e2efa1832db8bd7957a93ad75b215c\"><code>0e3513f</code></a></td><td><code>build/pkgs/pip: Update to 20.3.3</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6dc8e7c5b5c13e714d3313ba8973ff75b6fc172e\"><code>6dc8e7c</code></a></td><td><code>trac 31050: upgrade wheel to 0.36.2</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/41d7e7a74441e5f9deb3e7a93adfccf486dde417\"><code>41d7e7a</code></a></td><td><code>Merge branch 'u/jhpalmieri/new_wheel' of git://trac.sagemath.org/sage into t/30589/upgrade-python-3.9</code></td></tr></table>\n",
    "created_at": "2020-12-16T19:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487972",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0e3513fcb3e2efa1832db8bd7957a93ad75b215c"><code>0e3513f</code></a></td><td><code>build/pkgs/pip: Update to 20.3.3</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6dc8e7c5b5c13e714d3313ba8973ff75b6fc172e"><code>6dc8e7c</code></a></td><td><code>trac 31050: upgrade wheel to 0.36.2</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/41d7e7a74441e5f9deb3e7a93adfccf486dde417"><code>41d7e7a</code></a></td><td><code>Merge branch 'u/jhpalmieri/new_wheel' of git://trac.sagemath.org/sage into t/30589/upgrade-python-3.9</code></td></tr></table>




---

archive/issue_comments_487973.json:
```json
{
    "body": "Changed commit from **[`f8bb56d`](https://github.com/sagemath/sagetrac-mirror/commit/f8bb56d16600c8cfe1bab1d127f3931ca280dff0)** to **[`41d7e7a`](https://github.com/sagemath/sagetrac-mirror/commit/41d7e7a74441e5f9deb3e7a93adfccf486dde417)**",
    "created_at": "2020-12-16T19:20:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487973",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f8bb56d`](https://github.com/sagemath/sagetrac-mirror/commit/f8bb56d16600c8cfe1bab1d127f3931ca280dff0)** to **[`41d7e7a`](https://github.com/sagemath/sagetrac-mirror/commit/41d7e7a74441e5f9deb3e7a93adfccf486dde417)**



---

archive/issue_comments_487974.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2020-12-16T19:21:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487974",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_418627.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-16T19:21:14Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "title_is": "Upgrade Python to 3.9.1, pip to 20.3.3",
    "title_was": "Upgrade Python to 3.9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418627"
}
```



---

archive/issue_comments_487975.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nGreat, with the new `pip` and new `wheel`, everything works until I hit `scipy`. The error is not one I remember seeing before:\n\n```\n  /usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib build/temp.macosx-10.9-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.12_1/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib -Lbuild/temp.macosx-10.9-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-10.9-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so\n  ld: library not found for -lSystem\n  collect2: error: ld returned 1 exit status\n  error: Command \"/usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib build/temp.macosx-10.9-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.12_1/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib -Lbuild/temp.macosx-10.9-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-10.9-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so\" failed with exit status 1\n  Building wheel for scipy (PEP 517): finished with status 'error'\n  ERROR: Failed building wheel for scipy\n```\nI'm guessing that this should be dealt with separately.\n\nI would like to give this a positive review, but since I can't build Sage, I also can't build the documentation or run doctests. So for now I will have to leave the rest of the review to others.",
    "created_at": "2020-12-16T22:18:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487975",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:23" align="right">comment:23</div>

Great, with the new `pip` and new `wheel`, everything works until I hit `scipy`. The error is not one I remember seeing before:

```
  /usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib build/temp.macosx-10.9-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.12_1/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib -Lbuild/temp.macosx-10.9-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-10.9-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so
  ld: library not found for -lSystem
  collect2: error: ld returned 1 exit status
  error: Command "/usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib build/temp.macosx-10.9-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.12_1/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta3/local/lib -Lbuild/temp.macosx-10.9-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-10.9-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so" failed with exit status 1
  Building wheel for scipy (PEP 517): finished with status 'error'
  ERROR: Failed building wheel for scipy
```
I'm guessing that this should be dealt with separately.

I would like to give this a positive review, but since I can't build Sage, I also can't build the documentation or run doctests. So for now I will have to leave the rest of the review to others.



---

archive/issue_comments_487976.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/424627107** to **https://github.com/mkoeppe/sage/actions/runs/426748847**",
    "created_at": "2020-12-16T22:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487976",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/424627107** to **https://github.com/mkoeppe/sage/actions/runs/426748847**



---

archive/issue_comments_487977.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nWe can also try to throw in an upgrade of `setuptools`...",
    "created_at": "2020-12-16T22:54:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487977",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:25" align="right">comment:25</div>

We can also try to throw in an upgrade of `setuptools`...



---

archive/issue_events_418628.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-17T17:18:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418628"
}
```



---

archive/issue_comments_487978.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jhpalmieri](#comment%3A17):\n> If this works (and I'll test it out soon), it should be a blocker, since I can't build Sage's Python 3.8 on Big Sur.\n\nBut doesn't the python3 from XCode work?",
    "created_at": "2020-12-17T17:20:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487978",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jhpalmieri](#comment%3A17):
> If this works (and I'll test it out soon), it should be a blocker, since I can't build Sage's Python 3.8 on Big Sur.

But doesn't the python3 from XCode work?



---

archive/issue_comments_487979.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nRight now homebrew's python3 is shadowing Xcode's, so I don't know. I would rather not uninstall homebrew's since it is used by other homebrew packages that I want to keep.\n\nI have bigger issues right now: I can make almost no progress building Sage with 9.3.beta4. For example, with #31050 merged with beta4, `gmpy2` fails to build:\n\n```\n  Compiling with an SDK that doesn't seem to exist: /Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk\n  Please check your Xcode installation\n  gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -I/usr/local/include -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk -I/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk/usr/include -I/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk/System/Library/Frameworks/Tk.framework/Versions/8.5/Headers -O2 -g -I./src -I/usr/local/include -I/usr/local/opt/openssl@1.1/include -I/usr/local/opt/sqlite/include -I/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/include -I/usr/local/Cellar/python@3.9/3.9.1/Frameworks/Python.framework/Versions/3.9/include/python3.9 -c src/gmpy2.c -o build/temp.macosx-11-x86_64-3.9/src/gmpy2.o -DSHARED=1\n  clang: warning: no such sysroot directory: '/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk' [-Wmissing-sysroot]\n  In file included from src/gmpy2.c:445:\n  /usr/local/Cellar/python@3.9/3.9.1/Frameworks/Python.framework/Versions/3.9/include/python3.9/Python.h:25:10: fatal error: 'stdio.h' file not found\n  #include <stdio.h>\n```\nIs my command-line tools installation broken? It is certainly true that the named `sysroot` directory does not exist, but instead it's `.../MacOSX11.1.sdk`. Where is that path stored? I've tried uninstalling and reinstalling the command-line tools, uninstalling and reinstalling homebrew and its packages, but no luck.\n\nIn contrast, with just #31050 (which was based on beta3), I see the following in the `gmpy2` log file:\n\n```\n  gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -I/usr/local/include -I/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk/usr/include -I/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk/System/Library/Frameworks/Tk.framework/Versions/8.5/Headers -I./src -I/usr/local/include -I/usr/local/opt/openssl@1.1/include -I/usr/local/opt/sqlite/include -I/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/include -I/usr/local/Cellar/python@3.9/3.9.1/Frameworks/Python.framework/Versions/3.9/include/python3.9 -c src/gmpy2.c -o build/temp.macosx-11-x86_64-3.9/src/gmpy2.o -DSHARED=1\n```\n(same wrong path given to `-I`) but `gmpy2` builds successfully.\n\nSeparately, on a machine running Catalina, I'm having problems with `cypari`...",
    "created_at": "2020-12-17T19:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487979",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

Right now homebrew's python3 is shadowing Xcode's, so I don't know. I would rather not uninstall homebrew's since it is used by other homebrew packages that I want to keep.

I have bigger issues right now: I can make almost no progress building Sage with 9.3.beta4. For example, with #31050 merged with beta4, `gmpy2` fails to build:

```
  Compiling with an SDK that doesn't seem to exist: /Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk
  Please check your Xcode installation
  gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -I/usr/local/include -isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk -I/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk/usr/include -I/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk/System/Library/Frameworks/Tk.framework/Versions/8.5/Headers -O2 -g -I./src -I/usr/local/include -I/usr/local/opt/openssl@1.1/include -I/usr/local/opt/sqlite/include -I/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/include -I/usr/local/Cellar/python@3.9/3.9.1/Frameworks/Python.framework/Versions/3.9/include/python3.9 -c src/gmpy2.c -o build/temp.macosx-11-x86_64-3.9/src/gmpy2.o -DSHARED=1
  clang: warning: no such sysroot directory: '/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk' [-Wmissing-sysroot]
  In file included from src/gmpy2.c:445:
  /usr/local/Cellar/python@3.9/3.9.1/Frameworks/Python.framework/Versions/3.9/include/python3.9/Python.h:25:10: fatal error: 'stdio.h' file not found
  #include <stdio.h>
```
Is my command-line tools installation broken? It is certainly true that the named `sysroot` directory does not exist, but instead it's `.../MacOSX11.1.sdk`. Where is that path stored? I've tried uninstalling and reinstalling the command-line tools, uninstalling and reinstalling homebrew and its packages, but no luck.

In contrast, with just #31050 (which was based on beta3), I see the following in the `gmpy2` log file:

```
  gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -fno-common -dynamic -DNDEBUG -g -fwrapv -O3 -Wall -I/usr/local/include -I/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk/usr/include -I/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk/System/Library/Frameworks/Tk.framework/Versions/8.5/Headers -I./src -I/usr/local/include -I/usr/local/opt/openssl@1.1/include -I/usr/local/opt/sqlite/include -I/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/include -I/usr/local/Cellar/python@3.9/3.9.1/Frameworks/Python.framework/Versions/3.9/include/python3.9 -c src/gmpy2.c -o build/temp.macosx-11-x86_64-3.9/src/gmpy2.o -DSHARED=1
```
(same wrong path given to `-I`) but `gmpy2` builds successfully.

Separately, on a machine running Catalina, I'm having problems with `cypari`...



---

archive/issue_comments_487980.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nIn a (working) Homebrew installation on Catalina, I don't have these `/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk` paths used by the tools - ie.\ngcc/clang  is installed in \n`InstalledDir: /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin`\nand not in `/Library/...`.\n\nThis can be seen in config.log",
    "created_at": "2020-12-18T22:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487980",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">comment:29</div>

In a (working) Homebrew installation on Catalina, I don't have these `/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk` paths used by the tools - ie.
gcc/clang  is installed in 
`InstalledDir: /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin`
and not in `/Library/...`.

This can be seen in config.log



---

archive/issue_comments_487981.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\n`config.log` is a good place to look. I see that `gfortran -v` prints that it is configured using `--with-sysroot=/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk`. I reinstalled homebrew's gcc but it didn't help. Any ideas how this is path determined? What does `gfortran -v` say for you?\n\n(For `gcc/clang`, I see `InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin`.)",
    "created_at": "2020-12-18T23:02:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487981",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:30" align="right">comment:30</div>

`config.log` is a good place to look. I see that `gfortran -v` prints that it is configured using `--with-sysroot=/Library/Developer/CommandLineTools/SDKs/MacOSX11.0.sdk`. I reinstalled homebrew's gcc but it didn't help. Any ideas how this is path determined? What does `gfortran -v` say for you?

(For `gcc/clang`, I see `InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin`.)



---

archive/issue_comments_487982.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nWell, this is probably not the right thing to do in the long term, but I created a symlink connecting `MacOSX11.1.sdk` to `MacOSX11.0.sdk`. The build still fails on `scipy` with\n\n```\n  /usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib build/temp.macosx-11-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.13/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/lib -L/usr/local/opt/openssl@1.1/lib -L/usr/local/opt/sqlite/lib -Lbuild/temp.macosx-11-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-11-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so\n  gfortran: warning: couldn't understand version 11\n  ld: library not found for -lgcc_s.10.4\n  collect2: error: ld returned 1 exit status\n  error: Command \"/usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib build/temp.macosx-11-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.13/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/lib -L/usr/local/opt/openssl@1.1/lib -L/usr/local/opt/sqlite/lib -Lbuild/temp.macosx-11-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-11-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so\" failed with exit status 1\n  Building wheel for scipy (PEP 517): finished with status 'error'\n  ERROR: Failed building wheel for scipy\n```\nbut the other problems seem to be solved.",
    "created_at": "2020-12-19T04:47:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487982",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

Well, this is probably not the right thing to do in the long term, but I created a symlink connecting `MacOSX11.1.sdk` to `MacOSX11.0.sdk`. The build still fails on `scipy` with

```
  /usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib build/temp.macosx-11-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.13/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/lib -L/usr/local/opt/openssl@1.1/lib -L/usr/local/opt/sqlite/lib -Lbuild/temp.macosx-11-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-11-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so
  gfortran: warning: couldn't understand version 11
  ld: library not found for -lgcc_s.10.4
  collect2: error: ld returned 1 exit status
  error: Command "/usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib build/temp.macosx-11-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.13/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/lib -L/usr/local/opt/openssl@1.1/lib -L/usr/local/opt/sqlite/lib -Lbuild/temp.macosx-11-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-11-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so" failed with exit status 1
  Building wheel for scipy (PEP 517): finished with status 'error'
  ERROR: Failed building wheel for scipy
```
but the other problems seem to be solved.



---

archive/issue_comments_487983.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nReplying to [@jhpalmieri](#comment%3A31):\n> Well, this is probably not the right thing to do in the long term, but I created a symlink connecting `MacOSX11.1.sdk` to `MacOSX11.0.sdk`. The build still fails on `scipy` with\n> \n> ```\n>   /usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib build/temp.macosx-11-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.13/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/lib -L/usr/local/opt/openssl@1.1/lib -L/usr/local/opt/sqlite/lib -Lbuild/temp.macosx-11-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-11-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so\n>   gfortran: warning: couldn't understand version 11\n>   ld: library not found for -lgcc_s.10.4\n>   collect2: error: ld returned 1 exit status\n>   error: Command \"/usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib build/temp.macosx-11-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.13/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/lib -L/usr/local/opt/openssl@1.1/lib -L/usr/local/opt/sqlite/lib -Lbuild/temp.macosx-11-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-11-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so\" failed with exit status 1\n>   Building wheel for scipy (PEP 517): finished with status 'error'\n>   ERROR: Failed building wheel for scipy\n> ```\n> but the other problems seem to be solved.\n\nscipy probably needs an update, and/or a hack:\nhttps://github.com/scipy/scipy/issues/13102#issuecomment-744473479",
    "created_at": "2020-12-21T09:51:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487983",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:32" align="right">comment:32</div>

Replying to [@jhpalmieri](#comment%3A31):
> Well, this is probably not the right thing to do in the long term, but I created a symlink connecting `MacOSX11.1.sdk` to `MacOSX11.0.sdk`. The build still fails on `scipy` with
> 
> ```
>   /usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib build/temp.macosx-11-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.13/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/lib -L/usr/local/opt/openssl@1.1/lib -L/usr/local/opt/sqlite/lib -Lbuild/temp.macosx-11-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-11-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so
>   gfortran: warning: couldn't understand version 11
>   ld: library not found for -lgcc_s.10.4
>   collect2: error: ld returned 1 exit status
>   error: Command "/usr/local/bin/gfortran -Wall -g -Wall -g -undefined dynamic_lookup -bundle -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage/sage_builds/TESTING/TEMP/sage-9.3.beta4/local/lib build/temp.macosx-11-x86_64-3.9/scipy/integrate/_quadpackmodule.o -L/usr/local/Cellar/openblas/0.3.13/lib -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0 -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/Cellar/gcc/10.2.0/lib/gcc/10/gcc/x86_64-apple-darwin20/10.2.0/../../.. -L/usr/local/lib -L/usr/local/opt/openssl@1.1/lib -L/usr/local/opt/sqlite/lib -Lbuild/temp.macosx-11-x86_64-3.9 -lquadpack -lmach -lopenblas -lopenblas -lgfortran -o build/lib.macosx-11-x86_64-3.9/scipy/integrate/_quadpack.cpython-39-darwin.so" failed with exit status 1
>   Building wheel for scipy (PEP 517): finished with status 'error'
>   ERROR: Failed building wheel for scipy
> ```
> but the other problems seem to be solved.

scipy probably needs an update, and/or a hack:
https://github.com/scipy/scipy/issues/13102#issuecomment-744473479



---

archive/issue_comments_487984.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI'm not clever enough to figure out how to hack `scipy` so it builds. If I issue the command `export SYSTEM_VERSION_COMPAT=1` globally before building Sage, then `cython` doesn't build. If I just issue it in the `scipy` spkg-install script, then `scipy` doesn't build with the same error as in [comment:31](#comment%3A31).\n\nEdit: the error with `cython` after executing `export SYSTEM_VERSION_COMPAT=1`:\n\n```\nERROR: Cython-0.29.21-cp39-cp39-macosx_11_0_x86_64.whl is not a supported wheel on this platform.\n```\nThis is with this ticket and an updated `setuptools` and `setuptools_scm`.",
    "created_at": "2020-12-22T04:03:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487984",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:33" align="right">comment:33</div>

I'm not clever enough to figure out how to hack `scipy` so it builds. If I issue the command `export SYSTEM_VERSION_COMPAT=1` globally before building Sage, then `cython` doesn't build. If I just issue it in the `scipy` spkg-install script, then `scipy` doesn't build with the same error as in [comment:31](#comment%3A31).

Edit: the error with `cython` after executing `export SYSTEM_VERSION_COMPAT=1`:

```
ERROR: Cython-0.29.21-cp39-cp39-macosx_11_0_x86_64.whl is not a supported wheel on this platform.
```
This is with this ticket and an updated `setuptools` and `setuptools_scm`.



---

archive/issue_comments_487985.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nI guess we should move my derailment of the discussion to #30651.",
    "created_at": "2020-12-22T06:17:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487985",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:34" align="right">comment:34</div>

I guess we should move my derailment of the discussion to #30651.



---

archive/issue_events_418629.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-27T19:45:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418629"
}
```



---

archive/issue_events_418630.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-12-27T19:45:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20critical%20/%202",
    "label_color": "ff7700",
    "label_name": "p: critical / 2",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418630"
}
```



---

archive/issue_comments_487986.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nDoes someone have time to review this ticket? The tests have already run successfully.\n\nNote that an update to latest 3.8.x is not a good alternative:\n\n  https://www.python.org/downloads/release/python-387/\n  Python 3.8.7 - Release Date: Dec. 21, 2020\n  macOS 11 Big Sur not fully supported\n\n  Python 3.8.7 is not yet fully supported on macOS 11 Big Sur. It will install on macOS 11 Big Sur and will run on Apple Silicon Macs using Rosetta 2 translation. However, a few features do not work correctly, most noticeably those involving searching for system libraries (vs user libraries) such as ctypes.util.find_library() and in Distutils. This limitation affects both Apple Silicon and Intel processors. We are looking into improving the situation for Python 3.8.8.",
    "created_at": "2020-12-27T19:45:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487986",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Does someone have time to review this ticket? The tests have already run successfully.

Note that an update to latest 3.8.x is not a good alternative:

  https://www.python.org/downloads/release/python-387/
  Python 3.8.7 - Release Date: Dec. 21, 2020
  macOS 11 Big Sur not fully supported

  Python 3.8.7 is not yet fully supported on macOS 11 Big Sur. It will install on macOS 11 Big Sur and will run on Apple Silicon Macs using Rosetta 2 translation. However, a few features do not work correctly, most noticeably those involving searching for system libraries (vs user libraries) such as ctypes.util.find_library() and in Distutils. This limitation affects both Apple Silicon and Intel processors. We are looking into improving the situation for Python 3.8.8.



---

archive/issue_comments_487987.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nOn macOS 10.14.6 with lots of Homebrew packages,\nsuccessfully ran\n\n```bash\n$ git trac checkout 30589\n$ source .homebrew-build-env\n$ ./bootstrap -q\n$ ./configure --without-system-python3 --enable-download-from-upstream-url -q\n$ make -s V=0\n```\nresulting in a build of Sage 9.3.beta4 based on Python 3.9.1.\n\nBut something that worked for another Sage install currently at 9.3.beta5:\n\n```bash\n$ V=0 sage -i pynormaliz\n```\nfailed here while attempting to build e-antic.",
    "created_at": "2021-01-03T10:15:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487987",
    "user": "https://github.com/slel"
}
```

<div id="comment:38" align="right">comment:38</div>

On macOS 10.14.6 with lots of Homebrew packages,
successfully ran

```bash
$ git trac checkout 30589
$ source .homebrew-build-env
$ ./bootstrap -q
$ ./configure --without-system-python3 --enable-download-from-upstream-url -q
$ make -s V=0
```
resulting in a build of Sage 9.3.beta4 based on Python 3.9.1.

But something that worked for another Sage install currently at 9.3.beta5:

```bash
$ V=0 sage -i pynormaliz
```
failed here while attempting to build e-antic.



---

archive/issue_comments_487988.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOn OS X Big Sur + various homebrew packages, if I use\n\n```\n% ./configure --with-system-python3=no --enable-download-from-upstream-url \n```\nthen Sage builds (if I also incorporate various other changes from #30651), but I get doctest failures of the form\n\n```\nFile \"src/sage/misc/sagedoc.py\", line 646, in sage.misc.sagedoc.format\nFailed example:\n    cython('\\n'.join(cython_code))\nExpected nothing\nGot:\n    ld: warning: dylib (/usr/local/lib/libmpfr.dylib) was built for newer macOS version (11.0) than being linked (10.9)\n    ld: warning: dylib (/usr/local/lib/libgmp.dylib) was built for newer macOS version (11.0) than being linked (10.9)\n    ld: warning: dylib (/usr/local/lib/libgmpxx.dylib) was built for newer macOS version (11.0) than being linked (10.9)\n    ld: warning: dylib (/usr/local/lib/libgsl.dylib) was built for newer macOS version (11.0) than being linked (10.9)\n    ld: warning: dylib (/usr/local/lib/libntl.dylib) was built for newer macOS version (11.0) than being linked (10.9)\n```\nWe could (a) not worry about these for now, (b) filter out these warnings, (c) tinker with `MACOSX_DEPLOYMENT_TARGET`, or (d) something else. I don't have an opinion about which way to go.",
    "created_at": "2021-01-06T03:05:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487988",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:39" align="right">comment:39</div>

On OS X Big Sur + various homebrew packages, if I use

```
% ./configure --with-system-python3=no --enable-download-from-upstream-url 
```
then Sage builds (if I also incorporate various other changes from #30651), but I get doctest failures of the form

```
File "src/sage/misc/sagedoc.py", line 646, in sage.misc.sagedoc.format
Failed example:
    cython('\n'.join(cython_code))
Expected nothing
Got:
    ld: warning: dylib (/usr/local/lib/libmpfr.dylib) was built for newer macOS version (11.0) than being linked (10.9)
    ld: warning: dylib (/usr/local/lib/libgmp.dylib) was built for newer macOS version (11.0) than being linked (10.9)
    ld: warning: dylib (/usr/local/lib/libgmpxx.dylib) was built for newer macOS version (11.0) than being linked (10.9)
    ld: warning: dylib (/usr/local/lib/libgsl.dylib) was built for newer macOS version (11.0) than being linked (10.9)
    ld: warning: dylib (/usr/local/lib/libntl.dylib) was built for newer macOS version (11.0) than being linked (10.9)
```
We could (a) not worry about these for now, (b) filter out these warnings, (c) tinker with `MACOSX_DEPLOYMENT_TARGET`, or (d) something else. I don't have an opinion about which way to go.



---

archive/issue_comments_487989.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nThese linker warnings are annoying and I think we should filter them out for the doctests. I think it should be a separate ticket. I think I have seen them on other platforms too.",
    "created_at": "2021-01-07T21:40:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487989",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:40" align="right">comment:40</div>

These linker warnings are annoying and I think we should filter them out for the doctests. I think it should be a separate ticket. I think I have seen them on other platforms too.



---

archive/issue_comments_487990.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nThis is now #31204",
    "created_at": "2021-01-07T21:44:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487990",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:41" align="right">comment:41</div>

This is now #31204



---

archive/issue_comments_487991.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nReplying to [@slel](#comment%3A38):\n> But something that worked for another Sage install currently at 9.3.beta5:\n> \n> ```bash\n> $ V=0 sage -i pynormaliz\n> ```\n> failed here while attempting to build e-antic.\n\nIs this on homebrew too?",
    "created_at": "2021-01-07T21:44:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487991",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

Replying to [@slel](#comment%3A38):
> But something that worked for another Sage install currently at 9.3.beta5:
> 
> ```bash
> $ V=0 sage -i pynormaliz
> ```
> failed here while attempting to build e-antic.

Is this on homebrew too?



---

archive/issue_comments_487992.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nIn any case, let's worry about optional packages like e-antic later.\n\nLet's get this in please.",
    "created_at": "2021-01-11T03:10:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487992",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:43" align="right">comment:43</div>

In any case, let's worry about optional packages like e-antic later.

Let's get this in please.



---

archive/issue_comments_487993.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nSure, let's proceed.",
    "created_at": "2021-01-11T19:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487993",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:44" align="right">comment:44</div>

Sure, let's proceed.



---

archive/issue_events_418631.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-01-11T19:00:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418631"
}
```



---

archive/issue_events_418632.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2021-01-11T19:00:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418632"
}
```



---

archive/issue_comments_487994.json:
```json
{
    "body": "Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/426748847** to **John Palmieri, Samuel Leli\u00e8vre**",
    "created_at": "2021-01-11T19:00:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487994",
    "user": "https://github.com/jhpalmieri"
}
```

Changed reviewer from **https://github.com/mkoeppe/sage/actions/runs/426748847** to **John Palmieri, Samuel Leli√®vre**



---

archive/issue_comments_487995.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/upgrade-python-3.9](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade-python-3.9)** to **[`41d7e7a`](https://github.com/sagemath/sagetrac-mirror/commit/41d7e7a74441e5f9deb3e7a93adfccf486dde417)**",
    "created_at": "2021-01-24T10:38:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30589#issuecomment-487995",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/upgrade-python-3.9](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/upgrade-python-3.9)** to **[`41d7e7a`](https://github.com/sagemath/sagetrac-mirror/commit/41d7e7a74441e5f9deb3e7a93adfccf486dde417)**



---

archive/issue_events_418633.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2021-01-24T10:38:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418633"
}
```



---

archive/issue_events_418634.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a549452a4b4f830be20e64ad7a21096fd68d4301",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2021-01-24T10:38:12Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30589",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30589#event-418634"
}
```
