# Issue 30657: Fix up "sage -p"

archive/issues_030420.json:
```json
{
    "body": "```\n$ ./sage -p sagetex\nFound local metadata for sagetex-3.5\nUsing cached file /Users/mkoeppe/s/sage/sage-rebasing/upstream/sagetex-3.5.tar.gz\nmkdir: : No such file or directory\n************************************************************************\nError creating directory \n************************************************************************\n```\n\n\nCC:  @jhpalmieri @orlitzky\n\nReviewer: Michael Orlitzky\n\nAuthor: Matthias Koeppe\n\nBranch: 8ee7ee29ea4686a968846df1621f52adcd8f4173\n\nDependencies: #29500\n\nCommit: 8ee7ee29ea4686a968846df1621f52adcd8f4173\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30657\n\n",
    "closed_at": "2020-10-05T20:13:29Z",
    "created_at": "2020-09-24T21:51:59Z",
    "labels": [
        "component: build",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Fix up \"sage -p\"",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30657",
    "user": "https://github.com/mkoeppe"
}
```
```
$ ./sage -p sagetex
Found local metadata for sagetex-3.5
Using cached file /Users/mkoeppe/s/sage/sage-rebasing/upstream/sagetex-3.5.tar.gz
mkdir: : No such file or directory
************************************************************************
Error creating directory 
************************************************************************
```


CC:  @jhpalmieri @orlitzky

Reviewer: Michael Orlitzky

Author: Matthias Koeppe

Branch: 8ee7ee29ea4686a968846df1621f52adcd8f4173

Dependencies: #29500

Commit: 8ee7ee29ea4686a968846df1621f52adcd8f4173

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30657





---

archive/issue_comments_433444.json:
```json
{
    "body": "<a id='comment:2'></a>Branch is on top of #29500 because it touches the same code\n\n---\nLast 10 new commits:",
    "created_at": "2020-09-24T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433444",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>Branch is on top of #29500 because it touches the same code

---
Last 10 new commits:



---

archive/issue_comments_433445.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-09-24T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433445",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_433446.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-09-25T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433446",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433447.json:
```json
{
    "body": "<a id='comment:5'></a>Looks OK I guess. The `build/bin/sage-spkg` script obviously needs these variables set, so it makes sense to move them \"up\" out of `build/make/install` where they are not used directly.",
    "created_at": "2020-09-25T13:40:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433447",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:5'></a>Looks OK I guess. The `build/bin/sage-spkg` script obviously needs these variables set, so it makes sense to move them "up" out of `build/make/install` where they are not used directly.



---

archive/issue_comments_433448.json:
```json
{
    "body": "<a id='comment:6'></a>Thanks.",
    "created_at": "2020-09-25T14:39:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433448",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>Thanks.



---

archive/issue_comments_433449.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-10-01T23:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433449",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_433450.json:
```json
{
    "body": "<a id='comment:7'></a>Fails while building `sage_conf-none` for me... do incremental builds work?",
    "created_at": "2020-10-01T23:16:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433450",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>Fails while building `sage_conf-none` for me... do incremental builds work?



---

archive/issue_comments_433451.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-10-02T02:05:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433451",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_433452.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-10-02T02:06:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433452",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_433453.json:
```json
{
    "body": "<a id='comment:10'></a>The new commit is reverted on the #29386 branch, but looks good for now.",
    "created_at": "2020-10-02T13:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433453",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:10'></a>The new commit is reverted on the #29386 branch, but looks good for now.



---

archive/issue_comments_433454.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-10-02T13:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433454",
    "user": "https://github.com/orlitzky"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_433455.json:
```json
{
    "body": "<a id='comment:11'></a>Thanks!",
    "created_at": "2020-10-02T18:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433455",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Thanks!



---

archive/issue_events_079746.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-10-05T20:13:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30657#event-79746"
}
```



---

archive/issue_comments_433456.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-10-05T20:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30657",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30657#issuecomment-433456",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
