# Issue 30176: Update matplotlib to 3.3

archive/issues_029939.json:
```json
{
    "body": "Brings lots of deprecation warnings on every plot() call, due to OldScalarFormatter deprecation.\n\nDepends on pillow for all image formats now.\n\nCC:  @jhpalmieri @kiwifb @mkoeppe @timokau @egourgoulhon @antonio-rojas @zlscherr\n\nUpstream: Fixed upstream, but not in a stable release.\n\nReviewer: Matthias Koeppe\n\nAuthor: Antonio Rojas\n\nBranch: 73af14a4f1f1453cab53d882f7cb2ac5d7d39d41\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30176\n\n",
    "closed_at": "2020-08-09T08:47:29Z",
    "created_at": "2020-07-19T20:42:55Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Update matplotlib to 3.3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30176",
    "user": "https://github.com/antonio-rojas"
}
```
Brings lots of deprecation warnings on every plot() call, due to OldScalarFormatter deprecation.

Depends on pillow for all image formats now.

CC:  @jhpalmieri @kiwifb @mkoeppe @timokau @egourgoulhon @antonio-rojas @zlscherr

Upstream: Fixed upstream, but not in a stable release.

Reviewer: Matthias Koeppe

Author: Antonio Rojas

Branch: 73af14a4f1f1453cab53d882f7cb2ac5d7d39d41

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30176





---

archive/issue_comments_593091.json:
```json
{
    "body": "Changing branch from \"\" to \"u/arojas/update_matplotlib_to_3_3\"",
    "created_at": "2020-07-19T20:44:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593091",
    "user": "https://github.com/antonio-rojas"
}
```

Changing branch from "" to "u/arojas/update_matplotlib_to_3_3"



---

archive/issue_comments_593092.json:
```json
{
    "body": "Changing commit from \"\" to \"cdf20ea78ad840e812ae72ebb0d2e61ad229a797\"",
    "created_at": "2020-07-19T20:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593092",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "cdf20ea78ad840e812ae72ebb0d2e61ad229a797"



---

archive/issue_comments_593093.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-19T20:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593093",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593094.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-19T21:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593094",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593095.json:
```json
{
    "body": "Changing commit from \"cdf20ea78ad840e812ae72ebb0d2e61ad229a797\" to \"80f12fa1968173d15da1d6224d3f868fa80b6f70\"",
    "created_at": "2020-07-19T21:03:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593095",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "cdf20ea78ad840e812ae72ebb0d2e61ad229a797" to "80f12fa1968173d15da1d6224d3f868fa80b6f70"



---

archive/issue_comments_593096.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to packages: standard.",
    "created_at": "2020-07-19T21:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593096",
    "user": "https://github.com/antonio-rojas"
}
```

Changing component from PLEASE CHANGE to packages: standard.



---

archive/issue_comments_593097.json:
```json
{
    "body": "Changing author from \"\" to \"Antonio Rojas\"",
    "created_at": "2020-07-19T21:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593097",
    "user": "https://github.com/antonio-rojas"
}
```

Changing author from "" to "Antonio Rojas"



---

archive/issue_comments_593098.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n+Brings lots of deprecation warnings on every plot() call, due to OldScalarFormatter deprecation.\n \n+Depends on pillow for all image formats now.\n``````\n",
    "created_at": "2020-07-19T21:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593098",
    "user": "https://github.com/antonio-rojas"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
+Brings lots of deprecation warnings on every plot() call, due to OldScalarFormatter deprecation.
 
+Depends on pillow for all image formats now.
``````




---

archive/issue_comments_593099.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to enhancement.",
    "created_at": "2020-07-19T21:10:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593099",
    "user": "https://github.com/antonio-rojas"
}
```

Changing type from PLEASE CHANGE to enhancement.



---

archive/issue_comments_593100.json:
```json
{
    "body": "<a id='comment:5'></a>Still 3 test failures, all looking like\n\n```\nFile \"/usr/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py\", line 1030, in sage.geometry.polyhedron.plot.Projection.render_2d\nFailed example:\n    q1.plot() + q2.plot() + q3.plot() + q4.plot()\nExpected:\n    Graphics object consisting of 17 graphics primitives\nGot:\n    doctest:warning\n      File \"/usr/bin/sage-runtests\", line 177, in <module>\n        err = DC.run()\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/control.py\", line 1196, in run\n        self.run_doctests()\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/control.py\", line 897, in run_doctests\n        self.dispatcher.dispatch()\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2038, in dispatch\n        self.parallel_dispatch()\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1933, in parallel_dispatch\n        w.start()  # This might take some time\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2205, in start\n        super(DocTestWorker, self).start()\n      File \"/usr/lib/python3.8/multiprocessing/process.py\", line 121, in start\n        self._popen = self._Popen(self)\n      File \"/usr/lib/python3.8/multiprocessing/context.py\", line 224, in _Popen\n        return _default_context.get_context().Process._Popen(process_obj)\n      File \"/usr/lib/python3.8/multiprocessing/context.py\", line 277, in _Popen\n        return Popen(process_obj)\n      File \"/usr/lib/python3.8/multiprocessing/popen_fork.py\", line 19, in __init__\n        self._launch(process_obj)\n      File \"/usr/lib/python3.8/multiprocessing/popen_fork.py\", line 75, in _launch\n        code = process_obj._bootstrap(parent_sentinel=child_r)\n      File \"/usr/lib/python3.8/multiprocessing/process.py\", line 315, in _bootstrap\n        self.run()\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2177, in run\n        task(self.options, self.outtmpfile, msgpipe, self.result_queue)\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2506, in __call__\n        doctests, extras = self._run(runner, options, results)\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 2552, in _run\n        result = runner.run(test)\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 905, in run\n        return self._run(test, compileflags, out)\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 707, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib/python3.8/site-packages/sage/doctest/forker.py\", line 1131, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.geometry.polyhedron.plot.Projection.render_2d[8]>\", line 1, in <module>\n        q1.plot() + q2.plot() + q3.plot() + q4.plot()\n      File \"/usr/lib/python3.8/site-packages/sage/repl/rich_output/display_manager.py\", line 811, in displayhook\n        plain_text, rich_output = self._rich_output_formatter(obj, dict())\n      File \"/usr/lib/python3.8/site-packages/sage/repl/rich_output/display_manager.py\", line 625, in _rich_output_formatter\n        rich_output = self._call_rich_repr(obj, rich_repr_kwds)\n      File \"/usr/lib/python3.8/site-packages/sage/repl/rich_output/display_manager.py\", line 590, in _call_rich_repr\n        warnings.warn(\n      File \"/usr/lib/python3.8/warnings.py\", line 109, in _showwarnmsg\n        sw(msg.message, msg.category, msg.filename, msg.lineno,\n    :\n    sage.repl.rich_output.display_manager.RichReprWarning: Exception in _rich_repr_ while displaying object: The first element of 'code' must be equal to 'MOVETO' (1).  Your first code is 79\n    Graphics object consisting of 17 graphics primitives\n**********************************************************************\n```",
    "created_at": "2020-07-19T21:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593100",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:5'></a>Still 3 test failures, all looking like

```
File "/usr/lib/python3.8/site-packages/sage/geometry/polyhedron/plot.py", line 1030, in sage.geometry.polyhedron.plot.Projection.render_2d
Failed example:
    q1.plot() + q2.plot() + q3.plot() + q4.plot()
Expected:
    Graphics object consisting of 17 graphics primitives
Got:
    doctest:warning
      File "/usr/bin/sage-runtests", line 177, in <module>
        err = DC.run()
      File "/usr/lib/python3.8/site-packages/sage/doctest/control.py", line 1196, in run
        self.run_doctests()
      File "/usr/lib/python3.8/site-packages/sage/doctest/control.py", line 897, in run_doctests
        self.dispatcher.dispatch()
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 2038, in dispatch
        self.parallel_dispatch()
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 1933, in parallel_dispatch
        w.start()  # This might take some time
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 2205, in start
        super(DocTestWorker, self).start()
      File "/usr/lib/python3.8/multiprocessing/process.py", line 121, in start
        self._popen = self._Popen(self)
      File "/usr/lib/python3.8/multiprocessing/context.py", line 224, in _Popen
        return _default_context.get_context().Process._Popen(process_obj)
      File "/usr/lib/python3.8/multiprocessing/context.py", line 277, in _Popen
        return Popen(process_obj)
      File "/usr/lib/python3.8/multiprocessing/popen_fork.py", line 19, in __init__
        self._launch(process_obj)
      File "/usr/lib/python3.8/multiprocessing/popen_fork.py", line 75, in _launch
        code = process_obj._bootstrap(parent_sentinel=child_r)
      File "/usr/lib/python3.8/multiprocessing/process.py", line 315, in _bootstrap
        self.run()
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 2177, in run
        task(self.options, self.outtmpfile, msgpipe, self.result_queue)
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 2506, in __call__
        doctests, extras = self._run(runner, options, results)
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 2552, in _run
        result = runner.run(test)
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 905, in run
        return self._run(test, compileflags, out)
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 707, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib/python3.8/site-packages/sage/doctest/forker.py", line 1131, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.geometry.polyhedron.plot.Projection.render_2d[8]>", line 1, in <module>
        q1.plot() + q2.plot() + q3.plot() + q4.plot()
      File "/usr/lib/python3.8/site-packages/sage/repl/rich_output/display_manager.py", line 811, in displayhook
        plain_text, rich_output = self._rich_output_formatter(obj, dict())
      File "/usr/lib/python3.8/site-packages/sage/repl/rich_output/display_manager.py", line 625, in _rich_output_formatter
        rich_output = self._call_rich_repr(obj, rich_repr_kwds)
      File "/usr/lib/python3.8/site-packages/sage/repl/rich_output/display_manager.py", line 590, in _call_rich_repr
        warnings.warn(
      File "/usr/lib/python3.8/warnings.py", line 109, in _showwarnmsg
        sw(msg.message, msg.category, msg.filename, msg.lineno,
    :
    sage.repl.rich_output.display_manager.RichReprWarning: Exception in _rich_repr_ while displaying object: The first element of 'code' must be equal to 'MOVETO' (1).  Your first code is 79
    Graphics object consisting of 17 graphics primitives
**********************************************************************
```



---

archive/issue_comments_593101.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2020-07-20T13:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593101",
    "user": "https://github.com/antonio-rojas"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_593102.json:
```json
{
    "body": "<a id='comment:6'></a>Reported upstream: https://github.com/matplotlib/matplotlib/issues/17975",
    "created_at": "2020-07-20T13:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593102",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:6'></a>Reported upstream: https://github.com/matplotlib/matplotlib/issues/17975



---

archive/issue_comments_593103.json:
```json
{
    "body": "<a id='comment:7'></a>Upstream seems to have addressed it in https://github.com/matplotlib/matplotlib/pull/17982",
    "created_at": "2020-07-22T04:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593103",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>Upstream seems to have addressed it in https://github.com/matplotlib/matplotlib/pull/17982



---

archive/issue_comments_593104.json:
```json
{
    "body": "Changing commit from \"80f12fa1968173d15da1d6224d3f868fa80b6f70\" to \"dbdecd971e452c5c7f4d77b8a51ea613a98743fc\"",
    "created_at": "2020-07-22T06:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593104",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "80f12fa1968173d15da1d6224d3f868fa80b6f70" to "dbdecd971e452c5c7f4d77b8a51ea613a98743fc"



---

archive/issue_comments_593105.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-22T06:50:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593105",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593106.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-22T06:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593106",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593107.json:
```json
{
    "body": "Changing commit from \"dbdecd971e452c5c7f4d77b8a51ea613a98743fc\" to \"fd2a9b8ce1bf5198e70592621754426500149a8b\"",
    "created_at": "2020-07-22T06:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "dbdecd971e452c5c7f4d77b8a51ea613a98743fc" to "fd2a9b8ce1bf5198e70592621754426500149a8b"



---

archive/issue_comments_593108.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-07-22T06:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593108",
    "user": "https://github.com/antonio-rojas"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_593109.json:
```json
{
    "body": "<a id='comment:10'></a>No more test failures on Arch -> needs review",
    "created_at": "2020-07-22T06:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593109",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:10'></a>No more test failures on Arch -> needs review



---

archive/issue_comments_593110.json:
```json
{
    "body": "Changing upstream from \"Reported upstream. No feedback yet.\" to \"Fixed upstream, but not in a stable release.\"",
    "created_at": "2020-07-22T06:56:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593110",
    "user": "https://github.com/antonio-rojas"
}
```

Changing upstream from "Reported upstream. No feedback yet." to "Fixed upstream, but not in a stable release."



---

archive/issue_comments_593111.json:
```json
{
    "body": "<a id='comment:11'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/178114621",
    "created_at": "2020-07-22T07:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593111",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/178114621



---

archive/issue_comments_593112.json:
```json
{
    "body": "Changing commit from \"fd2a9b8ce1bf5198e70592621754426500149a8b\" to \"ad67266c7e84156d8a0ab9f9beb14fada29a3553\"",
    "created_at": "2020-07-22T11:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593112",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "fd2a9b8ce1bf5198e70592621754426500149a8b" to "ad67266c7e84156d8a0ab9f9beb14fada29a3553"



---

archive/issue_comments_593113.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-22T11:13:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593113",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593114.json:
```json
{
    "body": "<a id='comment:13'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/179391787",
    "created_at": "2020-07-23T05:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593114",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/179391787



---

archive/issue_comments_593115.json:
```json
{
    "body": "<a id='comment:14'></a>Fails on all platforms. For example https://github.com/mkoeppe/sage/runs/901333269\n\n```\n    error: Failed to download FreeType. Please download one of ['https://downloads.sourceforge.net/project/freetype/freetype2/2.6.1/freetype-2.6.1.tar.gz', 'https://download.savannah.gnu.org/releases/freetype/freetype-2.6.1.tar.gz'] and extract it into build/freetype-2.6.1 at the top-level of the source repository.\n    Running setup.py install for matplotlib: finished with status 'error'\nERROR: Command errored out with exit status 1: /sage/local/bin/python3 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '\"'\"'/tmp/pip-req-build-_2y953_j/setup.py'\"'\"'; __file__='\"'\"'/tmp/pip-req-build-_2y953_j/setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' --no-user-cfg install --record /tmp/pip-record-v8gxera1/install-record.txt --single-version-externally-managed --root /sage/local/var/tmp/sage/build/matplotlib-3.3.0.p0/inst --compile --install-headers /sage/local/var/tmp/sage/build/matplotlib-3.3.0.p0/inst/sage/local/include/python3.7m/matplotlib Check the logs for full command output.\nException information:\nTraceback (most recent call last):\n  File \"/sage/local/lib/python3.7/site-packages/pip/_internal/req/req_install.py\", line 841, in install\n    req_description=str(self.req),\n  File \"/sage/local/lib/python3.7/site-packages/pip/_internal/operations/install/legacy.py\", line 86, in install\n    raise LegacyInstallFailure\n```",
    "created_at": "2020-07-24T04:58:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593115",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Fails on all platforms. For example https://github.com/mkoeppe/sage/runs/901333269

```
    error: Failed to download FreeType. Please download one of ['https://downloads.sourceforge.net/project/freetype/freetype2/2.6.1/freetype-2.6.1.tar.gz', 'https://download.savannah.gnu.org/releases/freetype/freetype-2.6.1.tar.gz'] and extract it into build/freetype-2.6.1 at the top-level of the source repository.
    Running setup.py install for matplotlib: finished with status 'error'
ERROR: Command errored out with exit status 1: /sage/local/bin/python3 -u -c 'import sys, setuptools, tokenize; sys.argv[0] = '"'"'/tmp/pip-req-build-_2y953_j/setup.py'"'"'; __file__='"'"'/tmp/pip-req-build-_2y953_j/setup.py'"'"';f=getattr(tokenize, '"'"'open'"'"', open)(__file__);code=f.read().replace('"'"'\r\n'"'"', '"'"'\n'"'"');f.close();exec(compile(code, __file__, '"'"'exec'"'"'))' --no-user-cfg install --record /tmp/pip-record-v8gxera1/install-record.txt --single-version-externally-managed --root /sage/local/var/tmp/sage/build/matplotlib-3.3.0.p0/inst --compile --install-headers /sage/local/var/tmp/sage/build/matplotlib-3.3.0.p0/inst/sage/local/include/python3.7m/matplotlib Check the logs for full command output.
Exception information:
Traceback (most recent call last):
  File "/sage/local/lib/python3.7/site-packages/pip/_internal/req/req_install.py", line 841, in install
    req_description=str(self.req),
  File "/sage/local/lib/python3.7/site-packages/pip/_internal/operations/install/legacy.py", line 86, in install
    raise LegacyInstallFailure
```



---

archive/issue_comments_593116.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-07-24T04:58:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593116",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_593117.json:
```json
{
    "body": "<a id='comment:16'></a>https://github.com/matplotlib/matplotlib/blob/v3.3.x/INSTALL.rst:\n\"By default ... Matplotlib downloads and builds its own copy of FreeType ... and uses its own copy of Qhull.\nTo force Matplotlib to use a copy of FreeType or Qhull already installed in your system, create a `setup.cfg` file ....\"",
    "created_at": "2020-07-24T05:04:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593117",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:16'></a>https://github.com/matplotlib/matplotlib/blob/v3.3.x/INSTALL.rst:
"By default ... Matplotlib downloads and builds its own copy of FreeType ... and uses its own copy of Qhull.
To force Matplotlib to use a copy of FreeType or Qhull already installed in your system, create a `setup.cfg` file ...."



---

archive/issue_comments_593118.json:
```json
{
    "body": "<a id='comment:17'></a>should we make qhull standard and build matplotlib against it?",
    "created_at": "2020-07-24T07:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593118",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:17'></a>should we make qhull standard and build matplotlib against it?



---

archive/issue_comments_593119.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [arojas](#comment%3A17):\n> should we make qhull standard and build matplotlib against it?\n\n+1",
    "created_at": "2020-07-24T15:51:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593119",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>Replying to [arojas](#comment%3A17):
> should we make qhull standard and build matplotlib against it?

+1



---

archive/issue_comments_593120.json:
```json
{
    "body": "<a id='comment:19'></a>Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.",
    "created_at": "2020-07-24T16:52:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593120",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.



---

archive/issue_comments_593121.json:
```json
{
    "body": "Changing commit from \"ad67266c7e84156d8a0ab9f9beb14fada29a3553\" to \"8e489da53591788d8f45c580b5057d022dcc8dd3\"",
    "created_at": "2020-07-24T20:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593121",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ad67266c7e84156d8a0ab9f9beb14fada29a3553" to "8e489da53591788d8f45c580b5057d022dcc8dd3"



---

archive/issue_comments_593122.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-24T20:39:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593123.json:
```json
{
    "body": "Changing commit from \"8e489da53591788d8f45c580b5057d022dcc8dd3\" to \"79249f7592d18afd0d7685298d598406b4e11bda\"",
    "created_at": "2020-07-24T20:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593123",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "8e489da53591788d8f45c580b5057d022dcc8dd3" to "79249f7592d18afd0d7685298d598406b4e11bda"



---

archive/issue_comments_593124.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-07-24T20:45:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593124",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593125.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [mkoeppe](#comment%3A19):\n> Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.\n\n\nIt would also need cmake to become standard",
    "created_at": "2020-07-24T20:45:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593125",
    "user": "https://github.com/antonio-rojas"
}
```

<a id='comment:22'></a>Replying to [mkoeppe](#comment%3A19):
> Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.


It would also need cmake to become standard



---

archive/issue_comments_593126.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-07-24T20:45:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593126",
    "user": "https://github.com/antonio-rojas"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_593127.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [arojas](#comment%3A17):\n> should we make qhull standard and build matplotlib against it?\n\n\nWhy not just keep using matplotlib's version of qhull? Or conditionally do this if qhull is not available on the system?",
    "created_at": "2020-07-24T20:50:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593127",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'></a>Replying to [arojas](#comment%3A17):
> should we make qhull standard and build matplotlib against it?


Why not just keep using matplotlib's version of qhull? Or conditionally do this if qhull is not available on the system?



---

archive/issue_comments_593128.json:
```json
{
    "body": "<a id='comment:25'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/181664763",
    "created_at": "2020-07-24T20:52:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593128",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Tests run at https://github.com/mkoeppe/sage/actions/runs/181664763



---

archive/issue_comments_593129.json:
```json
{
    "body": "<a id='comment:26'></a>Replying to [arojas](#comment%3A22):\n> Replying to [mkoeppe](#comment%3A19):\n> > Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.\n\n> \n> It would also need cmake to become standard\n\n\nIs matplotlib using cmake now?",
    "created_at": "2020-07-24T20:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593129",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>Replying to [arojas](#comment%3A22):
> Replying to [mkoeppe](#comment%3A19):
> > Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.

> 
> It would also need cmake to become standard


Is matplotlib using cmake now?



---

archive/issue_comments_593130.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [mkoeppe](#comment%3A26):\n> Replying to [arojas](#comment%3A22):\n> > Replying to [mkoeppe](#comment%3A19):\n> > > Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.\n\n> > \n> > It would also need cmake to become standard\n\n> \n> Is matplotlib using cmake now?\n\n\nNo, qhull uses it, or at least our spkg does.",
    "created_at": "2020-07-24T20:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593130",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:27'></a>Replying to [mkoeppe](#comment%3A26):
> Replying to [arojas](#comment%3A22):
> > Replying to [mkoeppe](#comment%3A19):
> > > Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.

> > 
> > It would also need cmake to become standard

> 
> Is matplotlib using cmake now?


No, qhull uses it, or at least our spkg does.



---

archive/issue_comments_593131.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [mkoeppe](#comment%3A26):\n> Replying to [arojas](#comment%3A22):\n> > Replying to [mkoeppe](#comment%3A19):\n> > > Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.\n\n> > \n> > It would also need cmake to become standard\n\n> \n> Is matplotlib using cmake now?\n\n\nqhull is.",
    "created_at": "2020-07-24T20:56:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593131",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:28'></a>Replying to [mkoeppe](#comment%3A26):
> Replying to [arojas](#comment%3A22):
> > Replying to [mkoeppe](#comment%3A19):
> > > Of course, dealing with qhull is not very important and could be done on a follow up ticket. But the FreeType dependency needs to be fixed for this upgrade.

> > 
> > It would also need cmake to become standard

> 
> Is matplotlib using cmake now?


qhull is.



---

archive/issue_comments_593132.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [jhpalmieri](#comment%3A24):\n> Replying to [arojas](#comment%3A17):\n> > should we make qhull standard and build matplotlib against it?\n\n> \n> Why not just keep using matplotlib's version of qhull? Or conditionally do this if qhull is not available on the system?\n> \n\n\nUnbundling is considered a good thing in general. About `qhull`, being able to use an external version of it in matplotlib has flip-floped. It wasn't possible in some previous releases. Matplotlib is the only package currently using qhull so I am not considering it a priority. If there were more of them, that would be more of a motivation.",
    "created_at": "2020-07-24T21:00:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593132",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:29'></a>Replying to [jhpalmieri](#comment%3A24):
> Replying to [arojas](#comment%3A17):
> > should we make qhull standard and build matplotlib against it?

> 
> Why not just keep using matplotlib's version of qhull? Or conditionally do this if qhull is not available on the system?
> 


Unbundling is considered a good thing in general. About `qhull`, being able to use an external version of it in matplotlib has flip-floped. It wasn't possible in some previous releases. Matplotlib is the only package currently using qhull so I am not considering it a priority. If there were more of them, that would be more of a motivation.



---

archive/issue_comments_593133.json:
```json
{
    "body": "<a id='comment:30'></a>Although the [most recent qhull](http://www.qhull.org/download/qhull-2020-src-8.0.0.tgz) may not require `cmake`. It comes with a `Makefile`, but I am not necessarily the best person to evaluate whether it can be used in place of building with `cmake`.",
    "created_at": "2020-07-24T21:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593133",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:30'></a>Although the [most recent qhull](http://www.qhull.org/download/qhull-2020-src-8.0.0.tgz) may not require `cmake`. It comes with a `Makefile`, but I am not necessarily the best person to evaluate whether it can be used in place of building with `cmake`.



---

archive/issue_comments_593134.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2020-07-25T18:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593134",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_593135.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [mkoeppe](#comment%3A25):\n> Tests run at https://github.com/mkoeppe/sage/actions/runs/181664763\n\n\nThis looks clean on all platforms.\n\nI think it would be better if the changed multigraphics doctest was adjusted to be more tolerant instead of just updating the result.\n\nNevertheless, a positive review from my side.",
    "created_at": "2020-07-25T18:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593135",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>Replying to [mkoeppe](#comment%3A25):
> Tests run at https://github.com/mkoeppe/sage/actions/runs/181664763


This looks clean on all platforms.

I think it would be better if the changed multigraphics doctest was adjusted to be more tolerant instead of just updating the result.

Nevertheless, a positive review from my side.



---

archive/issue_comments_593136.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-25T18:26:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593136",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_593137.json:
```json
{
    "body": "<a id='comment:32'></a>There is numerical noise on various buildbots, e.g.\n\n```\n**********************************************************************\nFile \"src/sage/plot/multigraphics.py\", line 1297, in sage.plot.multigraphics.GraphicsArray.position\nFailed example:\n    G.position(0)  # tol 1.0e-13\nExpected:\n    (0.025045451349937315,\n     0.03415488992713045,\n     0.4489880779745068,\n     0.9345951100728696)\nGot:\n    (0.02494779509993732,\n     0.03415488992713045,\n     0.44913456234950677,\n     0.9345951100728696)\nTolerance exceeded in 2 of 4:\n    0.025045451349937315 vs 0.02494779509993732, tolerance 4e-3 > 1e-13\n    0.4489880779745068 vs 0.44913456234950677, tolerance 4e-4 > 1e-13\n**********************************************************************\nFile \"src/sage/plot/multigraphics.py\", line 1302, in sage.plot.multigraphics.GraphicsArray.position\nFailed example:\n    G.position(1)  # tol 1.0e-13\nExpected:\n    (0.5170637412999687,\n     0.20212705964722733,\n     0.4489880779745068,\n     0.5986507706326758)\nGot:\n    (0.5170149131749686,\n     0.20202940339722741,\n     0.44913456234950666,\n     0.5988460831326756)\nTolerance exceeded in 4 of 4:\n    0.5170637412999687 vs 0.5170149131749686, tolerance 1e-4 > 1e-13\n    0.20212705964722733 vs 0.20202940339722741, tolerance 5e-4 > 1e-13\n    0.4489880779745068 vs 0.44913456234950666, tolerance 4e-4 > 1e-13\n    0.5986507706326758 vs 0.5988460831326756, tolerance 4e-4 > 1e-13\n**********************************************************************\n1 item had failures:\n   2 of   6 in sage.plot.multigraphics.GraphicsArray.position\n    [192 tests, 2 failures, 20.75 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/plot/multigraphics.py  # 2 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-07-27T20:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593137",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:32'></a>There is numerical noise on various buildbots, e.g.

```
**********************************************************************
File "src/sage/plot/multigraphics.py", line 1297, in sage.plot.multigraphics.GraphicsArray.position
Failed example:
    G.position(0)  # tol 1.0e-13
Expected:
    (0.025045451349937315,
     0.03415488992713045,
     0.4489880779745068,
     0.9345951100728696)
Got:
    (0.02494779509993732,
     0.03415488992713045,
     0.44913456234950677,
     0.9345951100728696)
Tolerance exceeded in 2 of 4:
    0.025045451349937315 vs 0.02494779509993732, tolerance 4e-3 > 1e-13
    0.4489880779745068 vs 0.44913456234950677, tolerance 4e-4 > 1e-13
**********************************************************************
File "src/sage/plot/multigraphics.py", line 1302, in sage.plot.multigraphics.GraphicsArray.position
Failed example:
    G.position(1)  # tol 1.0e-13
Expected:
    (0.5170637412999687,
     0.20212705964722733,
     0.4489880779745068,
     0.5986507706326758)
Got:
    (0.5170149131749686,
     0.20202940339722741,
     0.44913456234950666,
     0.5988460831326756)
Tolerance exceeded in 4 of 4:
    0.5170637412999687 vs 0.5170149131749686, tolerance 1e-4 > 1e-13
    0.20212705964722733 vs 0.20202940339722741, tolerance 5e-4 > 1e-13
    0.4489880779745068 vs 0.44913456234950666, tolerance 4e-4 > 1e-13
    0.5986507706326758 vs 0.5988460831326756, tolerance 4e-4 > 1e-13
**********************************************************************
1 item had failures:
   2 of   6 in sage.plot.multigraphics.GraphicsArray.position
    [192 tests, 2 failures, 20.75 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/plot/multigraphics.py  # 2 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_593138.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-07-27T20:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593138",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_593139.json:
```json
{
    "body": "<a id='comment:33'></a>\n```\n**********************************************************************\nFile \"src/sage/plot/multigraphics.py\", line 1297, in sage.plot.multigraphics.GraphicsArray.position\nFailed example:\n    G.position(0)  # tol 1.0e-13\nExpected:\n    (0.025045451349937315,\n     0.03415488992713045,\n     0.4489880779745068,\n     0.9345951100728696)\nGot:\n    (0.02494779509993732,\n     0.03415488992713045,\n     0.44913456234950677,\n     0.9345951100728696)\nTolerance exceeded in 2 of 4:\n    0.025045451349937315 vs 0.02494779509993732, tolerance 4e-3 > 1e-13\n    0.4489880779745068 vs 0.44913456234950677, tolerance 4e-4 > 1e-13\n**********************************************************************\nFile \"src/sage/plot/multigraphics.py\", line 1302, in sage.plot.multigraphics.GraphicsArray.position\nFailed example:\n    G.position(1)  # tol 1.0e-13\nExpected:\n    (0.5170637412999687,\n     0.20212705964722733,\n     0.4489880779745068,\n     0.5986507706326758)\nGot:\n    (0.5170149131749686,\n     0.20202940339722741,\n     0.44913456234950666,\n     0.5988460831326756)\nTolerance exceeded in 4 of 4:\n    0.5170637412999687 vs 0.5170149131749686, tolerance 1e-4 > 1e-13\n    0.20212705964722733 vs 0.20202940339722741, tolerance 5e-4 > 1e-13\n    0.4489880779745068 vs 0.44913456234950666, tolerance 4e-4 > 1e-13\n    0.5986507706326758 vs 0.5988460831326756, tolerance 4e-4 > 1e-13\n**********************************************************************\n1 item had failures:\n   2 of   6 in sage.plot.multigraphics.GraphicsArray.position\n    [192 tests, 2 failures, 27.84 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/plot/multigraphics.py  # 2 doctests failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-07-27T20:37:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593139",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>
```
**********************************************************************
File "src/sage/plot/multigraphics.py", line 1297, in sage.plot.multigraphics.GraphicsArray.position
Failed example:
    G.position(0)  # tol 1.0e-13
Expected:
    (0.025045451349937315,
     0.03415488992713045,
     0.4489880779745068,
     0.9345951100728696)
Got:
    (0.02494779509993732,
     0.03415488992713045,
     0.44913456234950677,
     0.9345951100728696)
Tolerance exceeded in 2 of 4:
    0.025045451349937315 vs 0.02494779509993732, tolerance 4e-3 > 1e-13
    0.4489880779745068 vs 0.44913456234950677, tolerance 4e-4 > 1e-13
**********************************************************************
File "src/sage/plot/multigraphics.py", line 1302, in sage.plot.multigraphics.GraphicsArray.position
Failed example:
    G.position(1)  # tol 1.0e-13
Expected:
    (0.5170637412999687,
     0.20212705964722733,
     0.4489880779745068,
     0.5986507706326758)
Got:
    (0.5170149131749686,
     0.20202940339722741,
     0.44913456234950666,
     0.5988460831326756)
Tolerance exceeded in 4 of 4:
    0.5170637412999687 vs 0.5170149131749686, tolerance 1e-4 > 1e-13
    0.20212705964722733 vs 0.20202940339722741, tolerance 5e-4 > 1e-13
    0.4489880779745068 vs 0.44913456234950666, tolerance 4e-4 > 1e-13
    0.5986507706326758 vs 0.5988460831326756, tolerance 4e-4 > 1e-13
**********************************************************************
1 item had failures:
   2 of   6 in sage.plot.multigraphics.GraphicsArray.position
    [192 tests, 2 failures, 27.84 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/plot/multigraphics.py  # 2 doctests failed
----------------------------------------------------------------------
```



---

archive/issue_comments_593140.json:
```json
{
    "body": "<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-01T08:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593140",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593141.json:
```json
{
    "body": "Changing commit from \"79249f7592d18afd0d7685298d598406b4e11bda\" to \"20ecd183f2fb656fe97fd1d7b6ce9d3824081d74\"",
    "created_at": "2020-08-01T08:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593141",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "79249f7592d18afd0d7685298d598406b4e11bda" to "20ecd183f2fb656fe97fd1d7b6ce9d3824081d74"



---

archive/issue_comments_593142.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-01T08:24:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593142",
    "user": "https://github.com/antonio-rojas"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_593143.json:
```json
{
    "body": "<a id='comment:37'></a>\n```\n**********************************************************************\nFile \"src/sage/plot/multigraphics.py\", line 1297, in sage.plot.multigraphics.GraphicsArray.position\nFailed example:\n    G.position(0)  # tol 1.0e-3\nExpected:\n    (0.025045451349937315,\n     0.03415488992713045,\n     0.4489880779745068,\n     0.9345951100728696)\nGot:\n    (0.02494779509993732,\n     0.03415488992713045,\n     0.44913456234950677,\n     0.9345951100728696)\nTolerance exceeded in 1 of 4:\n    0.025045451349937315 vs 0.02494779509993732, tolerance 4e-3 > 1e-3\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.plot.multigraphics.GraphicsArray.position\n    [192 tests, 1 failure, 33.68 s]\n----------------------------------------------------------------------\nsage -t --long --random-seed=0 src/sage/plot/multigraphics.py  # 1 doctest failed\n----------------------------------------------------------------------\n```",
    "created_at": "2020-08-06T21:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593143",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:37'></a>
```
**********************************************************************
File "src/sage/plot/multigraphics.py", line 1297, in sage.plot.multigraphics.GraphicsArray.position
Failed example:
    G.position(0)  # tol 1.0e-3
Expected:
    (0.025045451349937315,
     0.03415488992713045,
     0.4489880779745068,
     0.9345951100728696)
Got:
    (0.02494779509993732,
     0.03415488992713045,
     0.44913456234950677,
     0.9345951100728696)
Tolerance exceeded in 1 of 4:
    0.025045451349937315 vs 0.02494779509993732, tolerance 4e-3 > 1e-3
**********************************************************************
1 item had failures:
   1 of   6 in sage.plot.multigraphics.GraphicsArray.position
    [192 tests, 1 failure, 33.68 s]
----------------------------------------------------------------------
sage -t --long --random-seed=0 src/sage/plot/multigraphics.py  # 1 doctest failed
----------------------------------------------------------------------
```



---

archive/issue_comments_593144.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-08-06T21:45:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593144",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_593145.json:
```json
{
    "body": "<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-07T09:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593145",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_593146.json:
```json
{
    "body": "Changing commit from \"20ecd183f2fb656fe97fd1d7b6ce9d3824081d74\" to \"73af14a4f1f1453cab53d882f7cb2ac5d7d39d41\"",
    "created_at": "2020-08-07T09:15:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593146",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "20ecd183f2fb656fe97fd1d7b6ce9d3824081d74" to "73af14a4f1f1453cab53d882f7cb2ac5d7d39d41"



---

archive/issue_comments_593147.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-08-07T09:16:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593147",
    "user": "https://github.com/antonio-rojas"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_events_077847.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-09T08:47:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30176#event-77847"
}
```



---

archive/issue_comments_593148.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-09T08:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593148",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_593149.json:
```json
{
    "body": "Changing branch from \"u/arojas/update_matplotlib_to_3_3\" to \"73af14a4f1f1453cab53d882f7cb2ac5d7d39d41\"",
    "created_at": "2020-08-09T08:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593149",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/arojas/update_matplotlib_to_3_3" to "73af14a4f1f1453cab53d882f7cb2ac5d7d39d41"



---

archive/issue_comments_593150.json:
```json
{
    "body": "Changing commit from \"73af14a4f1f1453cab53d882f7cb2ac5d7d39d41\" to \"\"",
    "created_at": "2020-12-15T14:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593150",
    "user": "https://github.com/kcrisman"
}
```

Changing commit from "73af14a4f1f1453cab53d882f7cb2ac5d7d39d41" to ""



---

archive/issue_comments_593151.json:
```json
{
    "body": "<a id='comment:41'></a>Hi!  Is it possible that this change is responsible for the difference between the following two images?\n\n* [This one](https://opentext.uleth.ca/apex-standard/images/img_sketch1c.svg)\n* [This one](https://16913697885453631822.googlegroups.com/attach/9538235d19b10/img_sketch1c.svg?part=0.1&view=1&vt=ANaJVrGjnIDaV7eWDiVRwnImxBhO2LClXYxNTLe-9OBHaeiSulY6a_0WItVZbBtUH76EEqwIZs-vqF9NnF32b0k-n7sqwgiDzZCMRpJakCI4j8a_n1BfLJU)\n\nNotice that not only is the image slightly narrower, but the labels now all have default of one place beyond the decimal point, which in the past was not desired for the evident reasons we see here.  That might be good for scientific plotting, but not for mathematical plotting.",
    "created_at": "2020-12-15T14:03:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593151",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:41'></a>Hi!  Is it possible that this change is responsible for the difference between the following two images?

* [This one](https://opentext.uleth.ca/apex-standard/images/img_sketch1c.svg)
* [This one](https://16913697885453631822.googlegroups.com/attach/9538235d19b10/img_sketch1c.svg?part=0.1&view=1&vt=ANaJVrGjnIDaV7eWDiVRwnImxBhO2LClXYxNTLe-9OBHaeiSulY6a_0WItVZbBtUH76EEqwIZs-vqF9NnF32b0k-n7sqwgiDzZCMRpJakCI4j8a_n1BfLJU)

Notice that not only is the image slightly narrower, but the labels now all have default of one place beyond the decimal point, which in the past was not desired for the evident reasons we see here.  That might be good for scientific plotting, but not for mathematical plotting.



---

archive/issue_comments_593152.json:
```json
{
    "body": "<a id='comment:42'></a>(Note that [this explanation of the difference](https://matplotlib.org/2.0.0/examples/pylab_examples/newscalarformatter_demo.html) doesn't really seem to have any examples relevant to this situation.)",
    "created_at": "2020-12-15T14:08:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593152",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:42'></a>(Note that [this explanation of the difference](https://matplotlib.org/2.0.0/examples/pylab_examples/newscalarformatter_demo.html) doesn't really seem to have any examples relevant to this situation.)



---

archive/issue_comments_593153.json:
```json
{
    "body": "<a id='comment:43'></a>Follow-up on qhull in #31148",
    "created_at": "2021-01-02T20:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30176",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30176#issuecomment-593153",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Follow-up on qhull in #31148
