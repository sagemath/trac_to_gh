# Issue 30361: Add pyright config and linting documentation

archive/issues_030124.json:
```json
{
    "body": "This PR provides a minimal configuration for the static typing checker [pyright](https://github.com/microsoft/pyright). In #29775 typing for the manifolds package is added. As this is currently the only place where typing is used, it's the only source folder for pyright.\n\nThere are also quite a few other [code check options](https://github.com/microsoft/pyright/blob/master/docs/configuration.md). These seem to cover similar rules as pyflakes and pycodestyle. Since these two checker have problems with typings (at least in the versions that they are currently used in the patchbot), it might be worthwhile to investigate if they can be completely replaced by pyright.\n\nCC:  @mkoeppe @fchapoton @mjungmath @kliem\n\nReviewer: Matthias Koeppe, Dima Pasechnik\n\nAuthor: Tobias Diez\n\nBranch: 7049f391cabc30574ec07e7f217774eaffcc09f5\n\nDependencies: #30408\n\nCommit: 7049f391cabc30574ec07e7f217774eaffcc09f5\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30361\n\n",
    "closed_at": "2020-11-07T16:23:08Z",
    "created_at": "2020-08-14T20:51:09Z",
    "labels": [
        "component: build",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.3",
    "title": "Add pyright config and linting documentation",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30361",
    "user": "https://github.com/tobiasdiez"
}
```
This PR provides a minimal configuration for the static typing checker [pyright](https://github.com/microsoft/pyright). In #29775 typing for the manifolds package is added. As this is currently the only place where typing is used, it's the only source folder for pyright.

There are also quite a few other [code check options](https://github.com/microsoft/pyright/blob/master/docs/configuration.md). These seem to cover similar rules as pyflakes and pycodestyle. Since these two checker have problems with typings (at least in the versions that they are currently used in the patchbot), it might be worthwhile to investigate if they can be completely replaced by pyright.

CC:  @mkoeppe @fchapoton @mjungmath @kliem

Reviewer: Matthias Koeppe, Dima Pasechnik

Author: Tobias Diez

Branch: 7049f391cabc30574ec07e7f217774eaffcc09f5

Dependencies: #30408

Commit: 7049f391cabc30574ec07e7f217774eaffcc09f5

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30361





---

archive/issue_comments_428001.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2020-08-14T20:57:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428001",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_428002.json:
```json
{
    "body": "<a id='comment:3'></a>It would be nice to be able to replicate the style that the current patchbot plugins enforce using these other tools. That would allow developers to form an informed opinion on what tools we should be focusing on...",
    "created_at": "2020-08-14T23:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428002",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>It would be nice to be able to replicate the style that the current patchbot plugins enforce using these other tools. That would allow developers to form an informed opinion on what tools we should be focusing on...



---

archive/issue_comments_428003.json:
```json
{
    "body": "<a id='comment:4'></a>Pyright is in the first place a static type checker, something that pyflakes does not do (or at least is not designed to do). \n\nNot that this PR only adds the config file, which aids the developer if he chooses to use pyright locally. It doesn't say that it needs to be used, or is integrated in the build workflow. That can be decided later. Given that pyright relies on node and has superior performance over alternatives as myphy, I could imagine that its good to be used in the build workflow and by developers that use VS code. Python-puristic developers propbably prefer a checker that can be installed via pip.\n\n\nSo I would propose to keep this PR as simple as possible, just add the config file for those people that want to use pyright, and add alternatives / integration with the build workflow later.",
    "created_at": "2020-08-16T13:22:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428003",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:4'></a>Pyright is in the first place a static type checker, something that pyflakes does not do (or at least is not designed to do). 

Not that this PR only adds the config file, which aids the developer if he chooses to use pyright locally. It doesn't say that it needs to be used, or is integrated in the build workflow. That can be decided later. Given that pyright relies on node and has superior performance over alternatives as myphy, I could imagine that its good to be used in the build workflow and by developers that use VS code. Python-puristic developers propbably prefer a checker that can be installed via pip.


So I would propose to keep this PR as simple as possible, just add the config file for those people that want to use pyright, and add alternatives / integration with the build workflow later.



---

archive/issue_comments_428004.json:
```json
{
    "body": "<a id='comment:5'></a>Could you include a comment at the top of this config file with a pointer to documentation or something?",
    "created_at": "2020-08-16T13:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428004",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>Could you include a comment at the top of this config file with a pointer to documentation or something?



---

archive/issue_comments_428005.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-18T08:51:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428005",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428006.json:
```json
{
    "body": "<a id='comment:7'></a>It's not possible to add comments to json files. But from the name of the file it should be rather clear that it belongs to pyright.\n\nI've extended the pyright config a bit. There are no errors (for the manifolds part), but about 200 warnings. Some of them are false positives due to issues of pyright with cython / lazy import (reported as https://github.com/microsoft/pyright/issues/954 and https://github.com/microsoft/pyright/issues/952), but mostly they are valid things that should be fixed (e.g. possibly unbound variables). If you run pyright across the whole sage code, then there are 400 errors and 20k warnings.\n\nI've also fixed one small issue where a getter was used instead of a setter.",
    "created_at": "2020-08-18T08:59:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428006",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:7'></a>It's not possible to add comments to json files. But from the name of the file it should be rather clear that it belongs to pyright.

I've extended the pyright config a bit. There are no errors (for the manifolds part), but about 200 warnings. Some of them are false positives due to issues of pyright with cython / lazy import (reported as https://github.com/microsoft/pyright/issues/954 and https://github.com/microsoft/pyright/issues/952), but mostly they are valid things that should be fixed (e.g. possibly unbound variables). If you run pyright across the whole sage code, then there are 400 errors and 20k warnings.

I've also fixed one small issue where a getter was used instead of a setter.



---

archive/issue_comments_428007.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-18T08:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428007",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_428008.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-18T13:46:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428008",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428009.json:
```json
{
    "body": "<a id='comment:10'></a>How about adding a little section in the developer's guide?",
    "created_at": "2020-08-18T13:47:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428009",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>How about adding a little section in the developer's guide?



---

archive/issue_comments_428010.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-18T15:01:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428010",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428011.json:
```json
{
    "body": "<a id='comment:12'></a>Done, anything else to do?",
    "created_at": "2020-08-20T11:42:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428011",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:12'></a>Done, anything else to do?



---

archive/issue_comments_428012.json:
```json
{
    "body": "<a id='comment:13'></a>Could you move this new text to the section that I created? `src/doc/en/developer/tools.rst`?",
    "created_at": "2020-08-20T12:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428012",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:13'></a>Could you move this new text to the section that I created? `src/doc/en/developer/tools.rst`?



---

archive/issue_comments_428013.json:
```json
{
    "body": "<a id='comment:14'></a>Also I was hoping for more hands-on documentation -- show what users need to install & type rather than just sending people to the tool's documentation",
    "created_at": "2020-08-20T12:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428013",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>Also I was hoping for more hands-on documentation -- show what users need to install & type rather than just sending people to the tool's documentation



---

archive/issue_comments_428014.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-20T18:51:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428014",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428015.json:
```json
{
    "body": "<a id='comment:16'></a>Ohh, sorry, I've overlooked that you've already created a new file for it. Thanks!\nI've now expanded the documentation.",
    "created_at": "2020-08-20T18:52:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428015",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:16'></a>Ohh, sorry, I've overlooked that you've already created a new file for it. Thanks!
I've now expanded the documentation.



---

archive/issue_comments_428016.json:
```json
{
    "body": "<a id='comment:17'></a>Please take a look at #30410 as a possible interface to be advertised in the documentation.",
    "created_at": "2020-08-20T22:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428016",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:17'></a>Please take a look at #30410 as a possible interface to be advertised in the documentation.



---

archive/issue_comments_428017.json:
```json
{
    "body": "<a id='comment:19'></a>I think it's a good idea to have a consistent interface for running linters and other checks . Thus I welcome the idea of #30410. However, this is rather unrelated to this ticket so I reversed the dependencies.",
    "created_at": "2020-08-21T10:38:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428017",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:19'></a>I think it's a good idea to have a consistent interface for running linters and other checks . Thus I welcome the idea of #30410. However, this is rather unrelated to this ticket so I reversed the dependencies.



---

archive/issue_comments_428018.json:
```json
{
    "body": "<a id='comment:21'></a>pyflakes documentation needs more work",
    "created_at": "2020-08-21T16:18:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428018",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>pyflakes documentation needs more work



---

archive/issue_comments_428019.json:
```json
{
    "body": "<a id='comment:22'></a>Yeah, I agree but the aim of this ticket wasn't to document the whole lint and testing infrastructure of sage ;-). So let's do this at #30415.",
    "created_at": "2020-08-21T17:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428019",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:22'></a>Yeah, I agree but the aim of this ticket wasn't to document the whole lint and testing infrastructure of sage ;-). So let's do this at #30415.



---

archive/issue_comments_428020.json:
```json
{
    "body": "<a id='comment:23'></a>If you just remove the \"......\" and the docbuild passes without errors, this is a positive review",
    "created_at": "2020-08-21T17:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428020",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>If you just remove the "......" and the docbuild passes without errors, this is a positive review



---

archive/issue_comments_428021.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-21T17:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428021",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428022.json:
```json
{
    "body": "<a id='comment:26'></a>I've removed the dots (previously I thought they have to be there in restructuredtext ;-))\n\n---\nNew commits:",
    "created_at": "2020-08-21T17:45:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428022",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:26'></a>I've removed the dots (previously I thought they have to be there in restructuredtext ;-))

---
New commits:



---

archive/issue_comments_428023.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-23T23:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428023",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_428024.json:
```json
{
    "body": "<a id='comment:27'></a>\n```\n[dochtml] [manifolds]   File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/matplotlib/sphinxext/plot_directive.py\", line 472, in run_code\n[dochtml] [manifolds]     exec(code, ns)\n[dochtml] [manifolds]   File \"<string>\", line 11, in <module>\n[dochtml] [manifolds]   File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/misc/decorators.py\", line 492, in wrapper\n[dochtml] [manifolds]     return func(*args, **options)\n[dochtml] [manifolds]   File \"/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/manifolds/chart.py\", line 2931, in plot\n[dochtml] [manifolds]     resu.set_aspect_ratio(1)\n[dochtml] [manifolds] AttributeError: 'Graphics3dGroup' object has no attribute 'set_aspect_ratio'\n[dochtml] [manifolds] The inventory files are in local/share/doc/sage/inventory/en/reference/manifolds.\n```",
    "created_at": "2020-08-23T23:29:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428024",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
```
[dochtml] [manifolds]   File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/matplotlib/sphinxext/plot_directive.py", line 472, in run_code
[dochtml] [manifolds]     exec(code, ns)
[dochtml] [manifolds]   File "<string>", line 11, in <module>
[dochtml] [manifolds]   File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/misc/decorators.py", line 492, in wrapper
[dochtml] [manifolds]     return func(*args, **options)
[dochtml] [manifolds]   File "/Users/mkoeppe/s/sage/sage-rebasing/local/lib/python3.7/site-packages/sage/manifolds/chart.py", line 2931, in plot
[dochtml] [manifolds]     resu.set_aspect_ratio(1)
[dochtml] [manifolds] AttributeError: 'Graphics3dGroup' object has no attribute 'set_aspect_ratio'
[dochtml] [manifolds] The inventory files are in local/share/doc/sage/inventory/en/reference/manifolds.
```



---

archive/issue_comments_428025.json:
```json
{
    "body": "<a id='comment:28'></a>Good that you found this mistake. I've now reverted my changes to the chart.py file.",
    "created_at": "2020-08-24T19:36:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428025",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:28'></a>Good that you found this mistake. I've now reverted my changes to the chart.py file.



---

archive/issue_comments_428026.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-24T19:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428026",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_428027.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-24T19:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428027",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428028.json:
```json
{
    "body": "<a id='comment:31'></a>\n```\n[dochtml] OSError: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/doc/en/developer/tools.rst:17: WARNING: Unexpected indentation.\n[dochtml] \n```",
    "created_at": "2020-08-24T22:03:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428028",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:31'></a>
```
[dochtml] OSError: /Users/mkoeppe/s/sage/sage-rebasing/worktree-algebraic-2018-spring/src/doc/en/developer/tools.rst:17: WARNING: Unexpected indentation.
[dochtml] 
```



---

archive/issue_comments_428029.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-24T22:04:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428029",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_428030.json:
```json
{
    "body": "<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-25T12:38:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428030",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:33'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428031.json:
```json
{
    "body": "<a id='comment:34'></a>The indention should be fixed now. At least I hope so, as I couldn't find any documentation on how to test/validate rst files.",
    "created_at": "2020-08-25T12:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428031",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:34'></a>The indention should be fixed now. At least I hope so, as I couldn't find any documentation on how to test/validate rst files.



---

archive/issue_comments_428032.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-25T12:40:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428032",
    "user": "https://github.com/tobiasdiez"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_428033.json:
```json
{
    "body": "<a id='comment:35'></a>The only way to validate it is to build the documentation using `make doc-html`...\n\nIt would actually be great to have a quick validation which we could plug into tox",
    "created_at": "2020-08-25T16:04:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428033",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>The only way to validate it is to build the documentation using `make doc-html`...

It would actually be great to have a quick validation which we could plug into tox



---

archive/issue_comments_428034.json:
```json
{
    "body": "<a id='comment:36'></a>patchbot is green, positive review",
    "created_at": "2020-08-26T23:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428034",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>patchbot is green, positive review



---

archive/issue_comments_428035.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-26T23:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428035",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_428036.json:
```json
{
    "body": "<a id='comment:37'></a>Some types info has been added in a new code in recent tickets by gh-Ivo-Maffei, e.g. in #30337\n\n\nDoes this mean that `pyrightconfig.json` has to be modified accordingly?",
    "created_at": "2020-08-27T08:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428036",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>Some types info has been added in a new code in recent tickets by gh-Ivo-Maffei, e.g. in #30337


Does this mean that `pyrightconfig.json` has to be modified accordingly?



---

archive/issue_comments_428037.json:
```json
{
    "body": "<a id='comment:38'></a>Since pyright is currently not used in the patchbot (or something similar), the configuration file is only important for people that use pyright locally in their development. I would thus suggest that as soon as a bit of typing information has been added in a certain package, than this package should be added to the pyright include statement.\n\nThe long term goal should be to set pyrights rules to strict and have all of sage's code tested for each code contribution. I'm not sure what's the most practical way to achieve this.",
    "created_at": "2020-08-27T12:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428037",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:38'></a>Since pyright is currently not used in the patchbot (or something similar), the configuration file is only important for people that use pyright locally in their development. I would thus suggest that as soon as a bit of typing information has been added in a certain package, than this package should be added to the pyright include statement.

The long term goal should be to set pyrights rules to strict and have all of sage's code tested for each code contribution. I'm not sure what's the most practical way to achieve this.



---

archive/issue_comments_428038.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-09-04T22:56:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428038",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_428039.json:
```json
{
    "body": "<a id='comment:39'></a>PDF docs don't build",
    "created_at": "2020-09-04T22:56:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428039",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:39'></a>PDF docs don't build



---

archive/issue_comments_428040.json:
```json
{
    "body": "<a id='comment:40'></a>The error is \n\n```\n[docpdf] ! You can't use `macro parameter character #' in math mode.\n[docpdf] l.7363 ...n <https://github.com/microsoft/pyright#\n[docpdf]                                                   installation>\\) for details.\n[docpdf] ? \n[docpdf] ! Emergency stop.\n```",
    "created_at": "2020-09-05T07:46:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428040",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:40'></a>The error is 

```
[docpdf] ! You can't use `macro parameter character #' in math mode.
[docpdf] l.7363 ...n <https://github.com/microsoft/pyright#
[docpdf]                                                   installation>\) for details.
[docpdf] ? 
[docpdf] ! Emergency stop.
```



---

archive/issue_comments_428041.json:
```json
{
    "body": "<a id='comment:41'></a>Ok, but what is wrong with this link? Should I remove the `#installation` part?",
    "created_at": "2020-09-05T07:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428041",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:41'></a>Ok, but what is wrong with this link? Should I remove the `#installation` part?



---

archive/issue_comments_428042.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-09-05T07:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428042",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_428043.json:
```json
{
    "body": "<a id='comment:43'></a>a typical issue of weird rst syntax (missing `_`)\n\ncf https://docutils.sourceforge.io/docs/user/rst/quickref.html#hyperlink-targets",
    "created_at": "2020-09-05T07:59:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428043",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>a typical issue of weird rst syntax (missing `_`)

cf https://docutils.sourceforge.io/docs/user/rst/quickref.html#hyperlink-targets



---

archive/issue_comments_428044.json:
```json
{
    "body": "<a id='comment:44'></a>Thanks!",
    "created_at": "2020-09-05T08:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428044",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:44'></a>Thanks!



---

archive/issue_comments_428045.json:
```json
{
    "body": "<a id='comment:45'></a>I'm still checking that the pdf docs build (it requires a more complete install of TexLive than I have, and so takes a while)",
    "created_at": "2020-09-05T11:39:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428045",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>I'm still checking that the pdf docs build (it requires a more complete install of TexLive than I have, and so takes a while)



---

archive/issue_comments_428046.json:
```json
{
    "body": "<a id='comment:46'></a>OK, alles gut/goed, een kleine taaloefening voor \\usepackage{babel}",
    "created_at": "2020-09-05T12:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428046",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:46'></a>OK, alles gut/goed, een kleine taaloefening voor \usepackage{babel}



---

archive/issue_comments_428047.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-09-05T12:51:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428047",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_428048.json:
```json
{
    "body": "<a id='comment:47'></a>Is there anything that needs to be done from my side for this to be merged?",
    "created_at": "2020-09-27T19:27:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428048",
    "user": "https://github.com/tobiasdiez"
}
```

<a id='comment:47'></a>Is there anything that needs to be done from my side for this to be merged?



---

archive/issue_comments_428049.json:
```json
{
    "body": "<a id='comment:48'></a>patience, please",
    "created_at": "2020-09-27T20:10:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428049",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:48'></a>patience, please



---

archive/issue_events_078641.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-10-24T20:15:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30361#event-78641"
}
```



---

archive/issue_events_078642.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-11-07T16:23:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30361#event-78642"
}
```



---

archive/issue_comments_428050.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-11-07T16:23:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30361",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30361#issuecomment-428050",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
