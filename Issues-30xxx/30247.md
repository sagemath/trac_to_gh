# Issue 30247: memory efficient implementation of Wiener index

archive/issues_030010.json:
```json
{
    "assignees": [],
    "body": "We improve the implementation of Wiener index for (weighted) (di)graphs by avoiding to compute and store into memory the full distance matrix. This way we can compute this index for larger graphs.\n\n\n**CC:**  @vipul79321 @kliem\n\n**Keywords:** gsoc2020\n\n**Branch/Commit:** [acf7647264eef0b9909fa8c9955a2a4d874f53c4](https://github.com/sagemath/sagetrac-mirror/commit/acf7647264eef0b9909fa8c9955a2a4d874f53c4)\n\n**Reviewer:** Vipul Gupta, Jonathan Kliem\n\n**Author:** David Coudert, Vipul Gupta\n\nIssue created by migration from https://trac.sagemath.org/ticket/30247\n\n",
    "closed_at": "2020-08-20T22:23:10Z",
    "created_at": "2020-07-29T12:48:03Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "memory efficient implementation of Wiener index",
    "type": "issue",
    "updated_at": "2020-08-20T22:23:10Z",
    "url": "https://github.com/sagemath/sage/issues/30247",
    "user": "https://github.com/dcoudert"
}
```
We improve the implementation of Wiener index for (weighted) (di)graphs by avoiding to compute and store into memory the full distance matrix. This way we can compute this index for larger graphs.


**CC:**  @vipul79321 @kliem

**Keywords:** gsoc2020

**Branch/Commit:** [acf7647264eef0b9909fa8c9955a2a4d874f53c4](https://github.com/sagemath/sagetrac-mirror/commit/acf7647264eef0b9909fa8c9955a2a4d874f53c4)

**Reviewer:** Vipul Gupta, Jonathan Kliem

**Author:** David Coudert, Vipul Gupta

Issue created by migration from https://trac.sagemath.org/ticket/30247





---

archive/issue_comments_482530.json:
```json
{
    "body": "**Branch:** [public/graphs/30247_wiener](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30247_wiener)",
    "created_at": "2020-07-29T13:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482530",
    "user": "https://github.com/dcoudert"
}
```

**Branch:** [public/graphs/30247_wiener](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30247_wiener)



---

archive/issue_events_270388.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-07-29T13:08:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270388"
}
```



---

archive/issue_comments_482531.json:
```json
{
    "body": "**Commit:** [6452967541645e827e3bf54b6bb0e013d2dd0c77](https://github.com/sagemath/sagetrac-mirror/commit/6452967541645e827e3bf54b6bb0e013d2dd0c77)",
    "created_at": "2020-07-29T13:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482531",
    "user": "https://github.com/dcoudert"
}
```

**Commit:** [6452967541645e827e3bf54b6bb0e013d2dd0c77](https://github.com/sagemath/sagetrac-mirror/commit/6452967541645e827e3bf54b6bb0e013d2dd0c77)



---

archive/issue_comments_482532.json:
```json
{
    "body": "<a id='comment:1'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6452967541645e827e3bf54b6bb0e013d2dd0c77\">6452967</a></td><td><code>trac #30247: better wiener index</code></td></tr></table>\n",
    "created_at": "2020-07-29T13:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482532",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:1'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6452967541645e827e3bf54b6bb0e013d2dd0c77">6452967</a></td><td><code>trac #30247: better wiener index</code></td></tr></table>




---

archive/issue_comments_482533.json:
```json
{
    "body": "<a id='comment:2'></a>\nWithout this patch\n\n```\nsage: G = graphs.Grid2dGraph(10, 10)\nsage: %time G.wiener_index()\nCPU times: user 1.66 ms, sys: 938 \u00b5s, total: 2.6 ms\nWall time: 4.58 ms\n33000\nsage: G = graphs.Grid2dGraph(20, 20)\nsage: %time G.wiener_index()\nCPU times: user 4.4 ms, sys: 162 \u00b5s, total: 4.56 ms\nWall time: 4.59 ms\n1064000\nsage: G = graphs.Grid2dGraph(50, 50)\nsage: %time G.wiener_index()\nCPU times: user 79.4 ms, sys: 8.78 ms, total: 88.2 ms\nWall time: 88.8 ms\n104125000\n```\n\nWith this patch\n\n```\nsage: G = graphs.Grid2dGraph(10, 10)\nsage: %time G.wiener_index()\nCPU times: user 1.12 ms, sys: 497 \u00b5s, total: 1.62 ms\nWall time: 3.28 ms\n33000\nsage: G = graphs.Grid2dGraph(20, 20)\nsage: %time G.wiener_index()\nCPU times: user 4.64 ms, sys: 165 \u00b5s, total: 4.8 ms\nWall time: 4.87 ms\n1064000\nsage: G = graphs.Grid2dGraph(50, 50)\nsage: %time G.wiener_index()\nCPU times: user 62.1 ms, sys: 1.66 ms, total: 63.8 ms\nWall time: 63.4 ms\n104125000\n```",
    "created_at": "2020-07-29T13:12:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482533",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:2'></a>
Without this patch

```
sage: G = graphs.Grid2dGraph(10, 10)
sage: %time G.wiener_index()
CPU times: user 1.66 ms, sys: 938 µs, total: 2.6 ms
Wall time: 4.58 ms
33000
sage: G = graphs.Grid2dGraph(20, 20)
sage: %time G.wiener_index()
CPU times: user 4.4 ms, sys: 162 µs, total: 4.56 ms
Wall time: 4.59 ms
1064000
sage: G = graphs.Grid2dGraph(50, 50)
sage: %time G.wiener_index()
CPU times: user 79.4 ms, sys: 8.78 ms, total: 88.2 ms
Wall time: 88.8 ms
104125000
```

With this patch

```
sage: G = graphs.Grid2dGraph(10, 10)
sage: %time G.wiener_index()
CPU times: user 1.12 ms, sys: 497 µs, total: 1.62 ms
Wall time: 3.28 ms
33000
sage: G = graphs.Grid2dGraph(20, 20)
sage: %time G.wiener_index()
CPU times: user 4.64 ms, sys: 165 µs, total: 4.8 ms
Wall time: 4.87 ms
1064000
sage: G = graphs.Grid2dGraph(50, 50)
sage: %time G.wiener_index()
CPU times: user 62.1 ms, sys: 1.66 ms, total: 63.8 ms
Wall time: 63.4 ms
104125000
```



---

archive/issue_comments_482534.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e29852c6fa0651426ed4d1cef346946446a23ee3\">e29852c</a></td><td><code>trac #30247: small corrections for directed graphs</code></td></tr></table>\n",
    "created_at": "2020-07-29T17:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482534",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e29852c6fa0651426ed4d1cef346946446a23ee3">e29852c</a></td><td><code>trac #30247: small corrections for directed graphs</code></td></tr></table>




---

archive/issue_comments_482535.json:
```json
{
    "body": "**Changing commit** from \"[6452967541645e827e3bf54b6bb0e013d2dd0c77](https://github.com/sagemath/sagetrac-mirror/commit/6452967541645e827e3bf54b6bb0e013d2dd0c77)\" to \"[e29852c6fa0651426ed4d1cef346946446a23ee3](https://github.com/sagemath/sagetrac-mirror/commit/e29852c6fa0651426ed4d1cef346946446a23ee3)\".",
    "created_at": "2020-07-29T17:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482535",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[6452967541645e827e3bf54b6bb0e013d2dd0c77](https://github.com/sagemath/sagetrac-mirror/commit/6452967541645e827e3bf54b6bb0e013d2dd0c77)" to "[e29852c6fa0651426ed4d1cef346946446a23ee3](https://github.com/sagemath/sagetrac-mirror/commit/e29852c6fa0651426ed4d1cef346946446a23ee3)".



---

archive/issue_comments_482536.json:
```json
{
    "body": "<a id='comment:4'></a>\nI did a small correction for directed graphs in `wiener_index` and `average_distance`, and added a test.\n\nI let the weighted case open.",
    "created_at": "2020-07-29T17:14:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482536",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:4'></a>
I did a small correction for directed graphs in `wiener_index` and `average_distance`, and added a test.

I let the weighted case open.



---

archive/issue_comments_482537.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [@dcoudert](#comment%3A4):\n> I did a small correction for directed graphs in `wiener_index` and `average_distance`, and added a test.\n> \n> I let the weighted case open.\n\nI can work on implementing the weighted version of `wiener_index` method in `boost_graph.pyx`.",
    "created_at": "2020-07-29T18:00:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482537",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:5'></a>
Replying to [@dcoudert](#comment%3A4):
> I did a small correction for directed graphs in `wiener_index` and `average_distance`, and added a test.
> 
> I let the weighted case open.

I can work on implementing the weighted version of `wiener_index` method in `boost_graph.pyx`.



---

archive/issue_comments_482538.json:
```json
{
    "body": "<a id='comment:6'></a>\nFeel free to do it. As you can see, it is interesting as now we can go for larger graphs and consume little memory.",
    "created_at": "2020-07-30T09:31:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482538",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>
Feel free to do it. As you can see, it is interesting as now we can go for larger graphs and consume little memory.



---

archive/issue_comments_482539.json:
```json
{
    "body": "**Changing commit** from \"[e29852c6fa0651426ed4d1cef346946446a23ee3](https://github.com/sagemath/sagetrac-mirror/commit/e29852c6fa0651426ed4d1cef346946446a23ee3)\" to \"[adb47288348163272b7766e65dffc76dabfecb2b](https://github.com/sagemath/sagetrac-mirror/commit/adb47288348163272b7766e65dffc76dabfecb2b)\".",
    "created_at": "2020-07-30T18:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482539",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e29852c6fa0651426ed4d1cef346946446a23ee3](https://github.com/sagemath/sagetrac-mirror/commit/e29852c6fa0651426ed4d1cef346946446a23ee3)" to "[adb47288348163272b7766e65dffc76dabfecb2b](https://github.com/sagemath/sagetrac-mirror/commit/adb47288348163272b7766e65dffc76dabfecb2b)".



---

archive/issue_comments_482540.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/adb47288348163272b7766e65dffc76dabfecb2b\">adb4728</a></td><td><code>method added for weighted graphs</code></td></tr></table>\n",
    "created_at": "2020-07-30T18:22:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482540",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/adb47288348163272b7766e65dffc76dabfecb2b">adb4728</a></td><td><code>method added for weighted graphs</code></td></tr></table>




---

archive/issue_comments_482541.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,2 @@\n-We improve the implementation of Wiener index for unweighted graphs by avoiding to compute and store into memory the full distance matrix. This way we can compute this index for larger graphs.\n+We improve the implementation of Wiener index for (weighted) (di)graphs by avoiding to compute and store into memory the full distance matrix. This way we can compute this index for larger graphs.\n \n``````\n",
    "created_at": "2020-07-30T18:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482541",
    "user": "https://github.com/vipul79321"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,2 @@
-We improve the implementation of Wiener index for unweighted graphs by avoiding to compute and store into memory the full distance matrix. This way we can compute this index for larger graphs.
+We improve the implementation of Wiener index for (weighted) (di)graphs by avoiding to compute and store into memory the full distance matrix. This way we can compute this index for larger graphs.
 
``````




---

archive/issue_comments_482542.json:
```json
{
    "body": "<a id='comment:8'></a>\n* I have one question, why bellman-ford is not an option for algorithm in `wiener_index`, `shortest_path_all_pairs` etc.\n\n* Also, due to use of `correct_type` in `shortest_paths`, `johnson_shortest_paths`, `floyd_warshall_shortest_path` in `boost_graph.pyx`. There is non-uniformity in output. For e.g. (20, 20.0 etc). I propose we should open another ticket with the purpose of removing `correct_type` code (as it generally fails, discussed in comment 17 of #30188) and modify affected doc-tests.\n\nBest\n\nVipul",
    "created_at": "2020-07-30T18:29:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482542",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:8'></a>
* I have one question, why bellman-ford is not an option for algorithm in `wiener_index`, `shortest_path_all_pairs` etc.

* Also, due to use of `correct_type` in `shortest_paths`, `johnson_shortest_paths`, `floyd_warshall_shortest_path` in `boost_graph.pyx`. There is non-uniformity in output. For e.g. (20, 20.0 etc). I propose we should open another ticket with the purpose of removing `correct_type` code (as it generally fails, discussed in comment 17 of #30188) and modify affected doc-tests.

Best

Vipul



---

archive/issue_comments_482543.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"gsoc2020\".",
    "created_at": "2020-07-30T18:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482543",
    "user": "https://github.com/vipul79321"
}
```

**Changing keywords** from "" to "gsoc2020".



---

archive/issue_comments_482544.json:
```json
{
    "body": "**Changing author** from \"David Coudert\" to \"David Coudert, Vipul Gupta\".",
    "created_at": "2020-07-30T18:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482544",
    "user": "https://github.com/vipul79321"
}
```

**Changing author** from "David Coudert" to "David Coudert, Vipul Gupta".



---

archive/issue_comments_482545.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [@vipul79321](#comment%3A8):\n> * I have one question, why bellman-ford is not an option for algorithm in `wiener_index`, `shortest_path_all_pairs` etc.\n\nCertainly because the usage of the list of algorithms has not been updated. No specific reason I think.\n \n> * Also, due to use of `correct_type` in `shortest_paths`, `johnson_shortest_paths`, `floyd_warshall_shortest_path` in `boost_graph.pyx`. There is non-uniformity in output. For e.g. (20, 20.0 etc). I propose we should open another ticket with the purpose of removing `correct_type` code (as it generally fails, discussed in comment 17 of #30188) and modify affected doc-tests.\n\nAre you sure it's always failing ? The key questions are: \n- are distances computation with boost always done on double ? \n- what's the impact on methods using the results ?\n\nIn general, it's important to be able to return the correct type, but we can also document the fact that some algorithm are able to return only double, double or int, or any type. For instance, using a pure Python code, we should be able to compute distances over rationals and more generally any type supporting addition and with a total ordering of its elements. But using boost, it's not possible.\n\n\n\nCan you update examples in boost and `generic_graph.py` to force using boost on the circuit.",
    "created_at": "2020-07-31T09:29:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482545",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:10'></a>
Replying to [@vipul79321](#comment%3A8):
> * I have one question, why bellman-ford is not an option for algorithm in `wiener_index`, `shortest_path_all_pairs` etc.

Certainly because the usage of the list of algorithms has not been updated. No specific reason I think.
 
> * Also, due to use of `correct_type` in `shortest_paths`, `johnson_shortest_paths`, `floyd_warshall_shortest_path` in `boost_graph.pyx`. There is non-uniformity in output. For e.g. (20, 20.0 etc). I propose we should open another ticket with the purpose of removing `correct_type` code (as it generally fails, discussed in comment 17 of #30188) and modify affected doc-tests.

Are you sure it's always failing ? The key questions are: 
- are distances computation with boost always done on double ? 
- what's the impact on methods using the results ?

In general, it's important to be able to return the correct type, but we can also document the fact that some algorithm are able to return only double, double or int, or any type. For instance, using a pure Python code, we should be able to compute distances over rationals and more generally any type supporting addition and with a total ordering of its elements. But using boost, it's not possible.



Can you update examples in boost and `generic_graph.py` to force using boost on the circuit.



---

archive/issue_comments_482546.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b2a415512e32d32fe0523dd9f404bc1fa9a3f183\">b2a4155</a></td><td><code>made doc test use boost, added bellman-ford in algorithm list</code></td></tr></table>\n",
    "created_at": "2020-07-31T17:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482546",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b2a415512e32d32fe0523dd9f404bc1fa9a3f183">b2a4155</a></td><td><code>made doc test use boost, added bellman-ford in algorithm list</code></td></tr></table>




---

archive/issue_comments_482547.json:
```json
{
    "body": "**Changing commit** from \"[adb47288348163272b7766e65dffc76dabfecb2b](https://github.com/sagemath/sagetrac-mirror/commit/adb47288348163272b7766e65dffc76dabfecb2b)\" to \"[b2a415512e32d32fe0523dd9f404bc1fa9a3f183](https://github.com/sagemath/sagetrac-mirror/commit/b2a415512e32d32fe0523dd9f404bc1fa9a3f183)\".",
    "created_at": "2020-07-31T17:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482547",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[adb47288348163272b7766e65dffc76dabfecb2b](https://github.com/sagemath/sagetrac-mirror/commit/adb47288348163272b7766e65dffc76dabfecb2b)" to "[b2a415512e32d32fe0523dd9f404bc1fa9a3f183](https://github.com/sagemath/sagetrac-mirror/commit/b2a415512e32d32fe0523dd9f404bc1fa9a3f183)".



---

archive/issue_comments_482548.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [@dcoudert](#comment%3A10):\n> Are you sure it's always failing ?\n\nIt fails for this basic scenario when edge weights are both integer and non-integer. See this for instance - \n\n```\nsage: from sage.graphs.base.boost_graph import shortest_paths\nsage: G = Graph([(0,1,2), (1,2,3.3)], weighted=True)\nsage: shortest_paths(G,0)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-4-ca5ef018db1e> in <module>()\n----> 1 shortest_paths(G,Integer(0))\n\n/home/vipul/sage/local/lib/python3.7/site-packages/sage/graphs/base/boost_graph.pyx in sage.graphs.base.boost_graph.shortest_paths (build/cythonized/sage/graphs/base/boost_graph.cpp:12344)()\n    819 \n    820 \n--> 821 cpdef shortest_paths(g, start, weight_function=None, algorithm=None):\n    822     r\"\"\"\n    823     Compute the shortest paths from ``start`` to all other vertices.\n\n/home/vipul/sage/local/lib/python3.7/site-packages/sage/graphs/base/boost_graph.pyx in sage.graphs.base.boost_graph.shortest_paths (build/cythonized/sage/graphs/base/boost_graph.cpp:12130)()\n   1012         if result.distances[v] != sys.float_info.max:\n   1013             w = int_to_v[v]\n-> 1014             dist[w] = correct_type(result.distances[v])\n   1015             pred[w] = int_to_v[result.predecessors[v]] if result.predecessors[v] != v else None\n   1016     return (dist, pred)\n\n/home/vipul/sage/local/lib/python3.7/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__init__ (build/cythonized/sage/rings/integer.c:6091)()\n    684                     mpz_set_pylong(self.value, n)\n    685                 else:\n--> 686                     raise TypeError(\"Cannot convert non-integral float to integer\")\n    687 \n    688             elif isinstance(x, pari_gen):\n\nTypeError: Cannot convert non-integral float to integer\n\n```\n\n---\n\n\n> The key questions are: \n> 1).are distances computation with boost always done on double ? \n\nYes. See this piece of code in `boost_interface.cpp` - \n\n```\ntypedef struct {\n    std::vector<double> distances; // An array with all distances from the starting vertex\n    std::vector<v_index> predecessors; // For each vertex v, the first vertex in a shortest\n                                  // path from the starting vertex to v.\n} result_distances;\n```\n\n> 2). what's the impact on methods using the results ?\n\nSorry, I didnt understand what you mean.\n\n---\n\n> In general, it's important to be able to return the correct type, but we can also document the fact that some algorithm are able to return only double, double or int, or any type. For instance, using a pure Python code, we should be able to compute distances over rationals and more generally any type supporting addition and with a total ordering of its elements. But using boost, it's not possible.\n> \n\nYeah, We can mention that in documentation, because with boost we can only get double values. \n\n\n---\n\nCurrently, I dont have any scenario where `vector[double]` will fails. For e.g., I tried it with non-rational edge weights (pi or e) and it gave ans as double approximation, which is better than nothing. See this, for example\n\n```\nsage: from sage.graphs.base.boost_graph import wiener_index\nsage: G = Graph([(0,1,pi)], weighted=True)\nsage: wiener_index(G)\n3.141592653589793\n```",
    "created_at": "2020-07-31T18:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482548",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:12'></a>
Replying to [@dcoudert](#comment%3A10):
> Are you sure it's always failing ?

It fails for this basic scenario when edge weights are both integer and non-integer. See this for instance - 

```
sage: from sage.graphs.base.boost_graph import shortest_paths
sage: G = Graph([(0,1,2), (1,2,3.3)], weighted=True)
sage: shortest_paths(G,0)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-4-ca5ef018db1e> in <module>()
----> 1 shortest_paths(G,Integer(0))

/home/vipul/sage/local/lib/python3.7/site-packages/sage/graphs/base/boost_graph.pyx in sage.graphs.base.boost_graph.shortest_paths (build/cythonized/sage/graphs/base/boost_graph.cpp:12344)()
    819 
    820 
--> 821 cpdef shortest_paths(g, start, weight_function=None, algorithm=None):
    822     r"""
    823     Compute the shortest paths from ``start`` to all other vertices.

/home/vipul/sage/local/lib/python3.7/site-packages/sage/graphs/base/boost_graph.pyx in sage.graphs.base.boost_graph.shortest_paths (build/cythonized/sage/graphs/base/boost_graph.cpp:12130)()
   1012         if result.distances[v] != sys.float_info.max:
   1013             w = int_to_v[v]
-> 1014             dist[w] = correct_type(result.distances[v])
   1015             pred[w] = int_to_v[result.predecessors[v]] if result.predecessors[v] != v else None
   1016     return (dist, pred)

/home/vipul/sage/local/lib/python3.7/site-packages/sage/rings/integer.pyx in sage.rings.integer.Integer.__init__ (build/cythonized/sage/rings/integer.c:6091)()
    684                     mpz_set_pylong(self.value, n)
    685                 else:
--> 686                     raise TypeError("Cannot convert non-integral float to integer")
    687 
    688             elif isinstance(x, pari_gen):

TypeError: Cannot convert non-integral float to integer

```

---


> The key questions are: 
> 1).are distances computation with boost always done on double ? 

Yes. See this piece of code in `boost_interface.cpp` - 

```
typedef struct {
    std::vector<double> distances; // An array with all distances from the starting vertex
    std::vector<v_index> predecessors; // For each vertex v, the first vertex in a shortest
                                  // path from the starting vertex to v.
} result_distances;
```

> 2). what's the impact on methods using the results ?

Sorry, I didnt understand what you mean.

---

> In general, it's important to be able to return the correct type, but we can also document the fact that some algorithm are able to return only double, double or int, or any type. For instance, using a pure Python code, we should be able to compute distances over rationals and more generally any type supporting addition and with a total ordering of its elements. But using boost, it's not possible.
> 

Yeah, We can mention that in documentation, because with boost we can only get double values. 


---

Currently, I dont have any scenario where `vector[double]` will fails. For e.g., I tried it with non-rational edge weights (pi or e) and it gave ans as double approximation, which is better than nothing. See this, for example

```
sage: from sage.graphs.base.boost_graph import wiener_index
sage: G = Graph([(0,1,pi)], weighted=True)
sage: wiener_index(G)
3.141592653589793
```



---

archive/issue_comments_482549.json:
```json
{
    "body": "<a id='comment:13'></a>\nOK. If we document properly that the returned values with boost are always double, then I'm Ok to remove the correct type stuff.\n\n> > 2). what's the impact on methods using the results ?\n\n> \n> Sorry, I didnt understand what you mean.\n\nDo we have methods calling distance computation with boost and assuming that the returned value is an int ?\nIt may happen with unweighted graphs as we then assume weight 1.\n\n> Currently, I dont have any scenario where `vector[double]` will fails. For e.g., I tried it with non-rational edge weights (pi or e) and it gave ans as double approximation, which is better than nothing. See this, for example\n> \n> ```\n> sage: from sage.graphs.base.boost_graph import wiener_index\n> sage: G = Graph([(0,1,pi)], weighted=True)\n> sage: wiener_index(G)\n> 3.141592653589793\n> ```\n> \n\nIn such case, the weights are converted to double. So a user expecting a results with pi must use another method. For instance:\n\n```\nsage: G = Graph([(0, 1, pi), (1, 2, e), (2, 3, sage: G = Graph([(0, 1, pi), (1, 2, e), (2, 3, sqrt(2))])\nsage: G.edges()\n[(0, 1, pi), (1, 2, e), (2, 3, sqrt(2))]\nsage: sum(G.edge_labels())\npi + sqrt(2) + e\nsage: G.weighted(True)\nsage: G.shortest_path_all_pairs(by_weight=True, algorithm='Floyd-Warshall-Python')\n({0: {0: 0, 1: pi, 2: pi + e, 3: pi + sqrt(2) + e},\n  1: {1: 0, 0: pi, 2: e, 3: sqrt(2) + e},\n  2: {2: 0, 1: e, 3: sqrt(2), 0: pi + e},\n  3: {3: 0, 2: sqrt(2), 0: pi + sqrt(2) + e, 1: sqrt(2) + e}},\n {0: {0: None, 1: 0, 2: 1, 3: 2},\n  1: {1: None, 0: 1, 2: 1, 3: 2},\n  2: {2: None, 1: 2, 3: 2, 0: 1},\n  3: {3: None, 2: 3, 0: 1, 1: 2}})\n```\nBut so far we have an error for wiener index:\n\n```\nsage: G.wiener_index(by_weight=True, algorithm='Floyd-Warshall-Python')\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-8-e3251b3d7fb4> in <module>()\n----> 1 G.wiener_index(by_weight=True, algorithm='Floyd-Warshall-Python')\n\n/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py in wiener_index(self, by_weight, algorithm, weight_function, check_weight)\n  16853             total += sum(u.values())\n  16854 \n> 16855         return total // 2\n  16856 \n  16857     def average_distance(self, by_weight=False, algorithm=None,\n\nTypeError: unsupported operand type(s) for //: 'sage.symbolic.expression.Expression' and 'int'\n```\nso we must change from `//` to `/`",
    "created_at": "2020-08-01T09:14:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482549",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:13'></a>
OK. If we document properly that the returned values with boost are always double, then I'm Ok to remove the correct type stuff.

> > 2). what's the impact on methods using the results ?

> 
> Sorry, I didnt understand what you mean.

Do we have methods calling distance computation with boost and assuming that the returned value is an int ?
It may happen with unweighted graphs as we then assume weight 1.

> Currently, I dont have any scenario where `vector[double]` will fails. For e.g., I tried it with non-rational edge weights (pi or e) and it gave ans as double approximation, which is better than nothing. See this, for example
> 
> ```
> sage: from sage.graphs.base.boost_graph import wiener_index
> sage: G = Graph([(0,1,pi)], weighted=True)
> sage: wiener_index(G)
> 3.141592653589793
> ```
> 

In such case, the weights are converted to double. So a user expecting a results with pi must use another method. For instance:

```
sage: G = Graph([(0, 1, pi), (1, 2, e), (2, 3, sage: G = Graph([(0, 1, pi), (1, 2, e), (2, 3, sqrt(2))])
sage: G.edges()
[(0, 1, pi), (1, 2, e), (2, 3, sqrt(2))]
sage: sum(G.edge_labels())
pi + sqrt(2) + e
sage: G.weighted(True)
sage: G.shortest_path_all_pairs(by_weight=True, algorithm='Floyd-Warshall-Python')
({0: {0: 0, 1: pi, 2: pi + e, 3: pi + sqrt(2) + e},
  1: {1: 0, 0: pi, 2: e, 3: sqrt(2) + e},
  2: {2: 0, 1: e, 3: sqrt(2), 0: pi + e},
  3: {3: 0, 2: sqrt(2), 0: pi + sqrt(2) + e, 1: sqrt(2) + e}},
 {0: {0: None, 1: 0, 2: 1, 3: 2},
  1: {1: None, 0: 1, 2: 1, 3: 2},
  2: {2: None, 1: 2, 3: 2, 0: 1},
  3: {3: None, 2: 3, 0: 1, 1: 2}})
```
But so far we have an error for wiener index:

```
sage: G.wiener_index(by_weight=True, algorithm='Floyd-Warshall-Python')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-8-e3251b3d7fb4> in <module>()
----> 1 G.wiener_index(by_weight=True, algorithm='Floyd-Warshall-Python')

/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/graphs/generic_graph.py in wiener_index(self, by_weight, algorithm, weight_function, check_weight)
  16853             total += sum(u.values())
  16854 
> 16855         return total // 2
  16856 
  16857     def average_distance(self, by_weight=False, algorithm=None,

TypeError: unsupported operand type(s) for //: 'sage.symbolic.expression.Expression' and 'int'
```
so we must change from `//` to `/`



---

archive/issue_comments_482550.json:
```json
{
    "body": "**Changing commit** from \"[b2a415512e32d32fe0523dd9f404bc1fa9a3f183](https://github.com/sagemath/sagetrac-mirror/commit/b2a415512e32d32fe0523dd9f404bc1fa9a3f183)\" to \"[736f3dfb36b7ad4293fb6043131b2ea0e5095ac2](https://github.com/sagemath/sagetrac-mirror/commit/736f3dfb36b7ad4293fb6043131b2ea0e5095ac2)\".",
    "created_at": "2020-08-03T16:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482550",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b2a415512e32d32fe0523dd9f404bc1fa9a3f183](https://github.com/sagemath/sagetrac-mirror/commit/b2a415512e32d32fe0523dd9f404bc1fa9a3f183)" to "[736f3dfb36b7ad4293fb6043131b2ea0e5095ac2](https://github.com/sagemath/sagetrac-mirror/commit/736f3dfb36b7ad4293fb6043131b2ea0e5095ac2)".



---

archive/issue_comments_482551.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/736f3dfb36b7ad4293fb6043131b2ea0e5095ac2\">736f3df</a></td><td><code>/ added instead of //</code></td></tr></table>\n",
    "created_at": "2020-08-03T16:54:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482551",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/736f3dfb36b7ad4293fb6043131b2ea0e5095ac2">736f3df</a></td><td><code>/ added instead of //</code></td></tr></table>




---

archive/issue_comments_482552.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [@dcoudert](#comment%3A13):\n> so we must change from `//` to `/`\n\nDone. I have tried to add a note in `wiener_index` method to mention that boost algorithms will return double version of wiener_index. Is it sufficient ?\n\nP.S - There is already an example to show this in documentation.",
    "created_at": "2020-08-03T16:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482552",
    "user": "https://github.com/vipul79321"
}
```

<a id='comment:15'></a>
Replying to [@dcoudert](#comment%3A13):
> so we must change from `//` to `/`

Done. I have tried to add a note in `wiener_index` method to mention that boost algorithms will return double version of wiener_index. Is it sufficient ?

P.S - There is already an example to show this in documentation.



---

archive/issue_comments_482553.json:
```json
{
    "body": "<a id='comment:16'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/673f8634b683bd0744007cb706f6d20eee82be7e\">673f863</a></td><td><code>trac #30247: fix merge conflict with 9.2.beta7</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4067d78662a268aa658a65bb43d3c873f7154218\">4067d78</a></td><td><code>trac #30247: minor corrections</code></td></tr></table>\n",
    "created_at": "2020-08-03T17:46:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482553",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/673f8634b683bd0744007cb706f6d20eee82be7e">673f863</a></td><td><code>trac #30247: fix merge conflict with 9.2.beta7</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4067d78662a268aa658a65bb43d3c873f7154218">4067d78</a></td><td><code>trac #30247: minor corrections</code></td></tr></table>




---

archive/issue_comments_482554.json:
```json
{
    "body": "**Changing commit** from \"[736f3dfb36b7ad4293fb6043131b2ea0e5095ac2](https://github.com/sagemath/sagetrac-mirror/commit/736f3dfb36b7ad4293fb6043131b2ea0e5095ac2)\" to \"[4067d78662a268aa658a65bb43d3c873f7154218](https://github.com/sagemath/sagetrac-mirror/commit/4067d78662a268aa658a65bb43d3c873f7154218)\".",
    "created_at": "2020-08-03T17:46:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482554",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[736f3dfb36b7ad4293fb6043131b2ea0e5095ac2](https://github.com/sagemath/sagetrac-mirror/commit/736f3dfb36b7ad4293fb6043131b2ea0e5095ac2)" to "[4067d78662a268aa658a65bb43d3c873f7154218](https://github.com/sagemath/sagetrac-mirror/commit/4067d78662a268aa658a65bb43d3c873f7154218)".



---

archive/issue_comments_482555.json:
```json
{
    "body": "<a id='comment:17'></a>\nI rebased on last beta, fixed merge conflicts, and did a minor correction. We are almost done.",
    "created_at": "2020-08-03T17:47:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482555",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:17'></a>
I rebased on last beta, fixed merge conflicts, and did a minor correction. We are almost done.



---

archive/issue_comments_482556.json:
```json
{
    "body": "<a id='comment:18'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c751ae4abcae024ab2b754523003539a3d95d2fe\">c751ae4</a></td><td><code>trac #30247: fix docbuild</code></td></tr></table>\n",
    "created_at": "2020-08-07T17:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482556",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c751ae4abcae024ab2b754523003539a3d95d2fe">c751ae4</a></td><td><code>trac #30247: fix docbuild</code></td></tr></table>




---

archive/issue_comments_482557.json:
```json
{
    "body": "**Changing commit** from \"[4067d78662a268aa658a65bb43d3c873f7154218](https://github.com/sagemath/sagetrac-mirror/commit/4067d78662a268aa658a65bb43d3c873f7154218)\" to \"[c751ae4abcae024ab2b754523003539a3d95d2fe](https://github.com/sagemath/sagetrac-mirror/commit/c751ae4abcae024ab2b754523003539a3d95d2fe)\".",
    "created_at": "2020-08-07T17:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482557",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[4067d78662a268aa658a65bb43d3c873f7154218](https://github.com/sagemath/sagetrac-mirror/commit/4067d78662a268aa658a65bb43d3c873f7154218)" to "[c751ae4abcae024ab2b754523003539a3d95d2fe](https://github.com/sagemath/sagetrac-mirror/commit/c751ae4abcae024ab2b754523003539a3d95d2fe)".



---

archive/issue_comments_482558.json:
```json
{
    "body": "<a id='comment:19'></a>\nI slightly changed the documentation to fix issue reported by the patchbot. I removed the alternative definition that we don't use.",
    "created_at": "2020-08-07T17:08:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482558",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:19'></a>
I slightly changed the documentation to fix issue reported by the patchbot. I removed the alternative definition that we don't use.



---

archive/issue_comments_482559.json:
```json
{
    "body": "**Changing commit** from \"[c751ae4abcae024ab2b754523003539a3d95d2fe](https://github.com/sagemath/sagetrac-mirror/commit/c751ae4abcae024ab2b754523003539a3d95d2fe)\" to \"[fb3a4330998026304e5d63ae2233d79ae7dc0312](https://github.com/sagemath/sagetrac-mirror/commit/fb3a4330998026304e5d63ae2233d79ae7dc0312)\".",
    "created_at": "2020-08-08T09:27:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482559",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[c751ae4abcae024ab2b754523003539a3d95d2fe](https://github.com/sagemath/sagetrac-mirror/commit/c751ae4abcae024ab2b754523003539a3d95d2fe)" to "[fb3a4330998026304e5d63ae2233d79ae7dc0312](https://github.com/sagemath/sagetrac-mirror/commit/fb3a4330998026304e5d63ae2233d79ae7dc0312)".



---

archive/issue_comments_482560.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb3a4330998026304e5d63ae2233d79ae7dc0312\">fb3a433</a></td><td><code>trac #30247: improve type of returned value</code></td></tr></table>\n",
    "created_at": "2020-08-08T09:27:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482560",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb3a4330998026304e5d63ae2233d79ae7dc0312">fb3a433</a></td><td><code>trac #30247: improve type of returned value</code></td></tr></table>




---

archive/issue_comments_482561.json:
```json
{
    "body": "<a id='comment:21'></a>\nIn order to fix the doctest errors reported by the patchbot, I improved the handling of returned value. Now we get an integer value whenever possible.",
    "created_at": "2020-08-08T09:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482561",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:21'></a>
In order to fix the doctest errors reported by the patchbot, I improved the handling of returned value. Now we get an integer value whenever possible.



---

archive/issue_comments_482562.json:
```json
{
    "body": "<a id='comment:22'></a>\nFor me this ticket is good to go, but we need an external opinion / reviewer. Thanks.",
    "created_at": "2020-08-12T15:05:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482562",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:22'></a>
For me this ticket is good to go, but we need an external opinion / reviewer. Thanks.



---

archive/issue_comments_482563.json:
```json
{
    "body": "<a id='comment:23'></a>\n- There are some alignment issues and I would propose something like this:\n\n```diff\n-                       raise RuntimeError(\"Dijkstra algorithm does not \"\n-                                           \"work with negative weights, \"\n-                                           \"use Bellman-Ford instead\")\n+                       raise RuntimeError(\"Dijkstra algorithm does not \"\n+                                          \"work with negative weights, \"\n+                                          \"use Bellman-Ford instead\")\n```\n\n```diff\n                         raise RuntimeError(\"Dijkstra algorithm does not \"\n-                                          \"work with negative weights, \"\n+                                           \"work with negative weights, \"\n                                            \"use Bellman-Ford instead\")\n```\n\n```diff\n             WI = wiener_index(self, algorithm=algorithm,\n+                              weight_function=weight_function,\n+                              check_weight=check_weight)\n-                                weight_function=weight_function,\n-                                check_weight=check_weight)\n```\n\n```diff\n         elif (not self.is_connected()\n-            or (self.is_directed() and not self.is_strongly_connected())):\n+                or (self.is_directed() and not self.is_strongly_connected())):\n             from sage.rings.infinity import Infinity\n```\n\n```diff\n-            distances = self.shortest_path_all_pairs(by_weight=by_weight,\n-                            algorithm=algorithm, weight_function=weight_function,\n-                            check_weight=check_weight)[0]\n+            distances = self.shortest_path_all_pairs(\n+                by_weight=by_weight, algorithm=algorithm,\n+                weight_function=weight_function, check_weight=check_weight)[0]\n```\n\n- It would be nice to doctest the error messages (running Dijkstra with negative weights, Bellman-Ford with negative cycle, unknown algorithm, empty or one element graph).\n\n- Is the Wiener index really undefined for an empty or one element graph. Shouldn't it be rather `0`?\n\n- `if WI in QQ:`. This doesn't appear to be a good check to me:\n\n```\nsage: float(2.sqrt()) in QQ                                                                                                                                                         \nTrue\n```\n  So I think this will always return a rational?\n- It seems like you excluded `Dijkstra_NetworkX` from the party. Does it perform much worse than `Dijkstra_Boost`? It would also be memory efficient, if you skip the part of creating the double dictionary and then summing it up.",
    "created_at": "2020-08-13T07:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482563",
    "user": "https://github.com/kliem"
}
```

<a id='comment:23'></a>
- There are some alignment issues and I would propose something like this:

```diff
-                       raise RuntimeError("Dijkstra algorithm does not "
-                                           "work with negative weights, "
-                                           "use Bellman-Ford instead")
+                       raise RuntimeError("Dijkstra algorithm does not "
+                                          "work with negative weights, "
+                                          "use Bellman-Ford instead")
```

```diff
                         raise RuntimeError("Dijkstra algorithm does not "
-                                          "work with negative weights, "
+                                           "work with negative weights, "
                                            "use Bellman-Ford instead")
```

```diff
             WI = wiener_index(self, algorithm=algorithm,
+                              weight_function=weight_function,
+                              check_weight=check_weight)
-                                weight_function=weight_function,
-                                check_weight=check_weight)
```

```diff
         elif (not self.is_connected()
-            or (self.is_directed() and not self.is_strongly_connected())):
+                or (self.is_directed() and not self.is_strongly_connected())):
             from sage.rings.infinity import Infinity
```

```diff
-            distances = self.shortest_path_all_pairs(by_weight=by_weight,
-                            algorithm=algorithm, weight_function=weight_function,
-                            check_weight=check_weight)[0]
+            distances = self.shortest_path_all_pairs(
+                by_weight=by_weight, algorithm=algorithm,
+                weight_function=weight_function, check_weight=check_weight)[0]
```

- It would be nice to doctest the error messages (running Dijkstra with negative weights, Bellman-Ford with negative cycle, unknown algorithm, empty or one element graph).

- Is the Wiener index really undefined for an empty or one element graph. Shouldn't it be rather `0`?

- `if WI in QQ:`. This doesn't appear to be a good check to me:

```
sage: float(2.sqrt()) in QQ                                                                                                                                                         
True
```
  So I think this will always return a rational?
- It seems like you excluded `Dijkstra_NetworkX` from the party. Does it perform much worse than `Dijkstra_Boost`? It would also be memory efficient, if you skip the part of creating the double dictionary and then summing it up.



---

archive/issue_comments_482564.json:
```json
{
    "body": "**Changing commit** from \"[fb3a4330998026304e5d63ae2233d79ae7dc0312](https://github.com/sagemath/sagetrac-mirror/commit/fb3a4330998026304e5d63ae2233d79ae7dc0312)\" to \"[49472e3823a9aeed671f9a662a1cc72831396ab2](https://github.com/sagemath/sagetrac-mirror/commit/49472e3823a9aeed671f9a662a1cc72831396ab2)\".",
    "created_at": "2020-08-13T09:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482564",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[fb3a4330998026304e5d63ae2233d79ae7dc0312](https://github.com/sagemath/sagetrac-mirror/commit/fb3a4330998026304e5d63ae2233d79ae7dc0312)" to "[49472e3823a9aeed671f9a662a1cc72831396ab2](https://github.com/sagemath/sagetrac-mirror/commit/49472e3823a9aeed671f9a662a1cc72831396ab2)".



---

archive/issue_comments_482565.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c18eb320bf81f0222ee731b5520639fb455389e\">0c18eb3</a></td><td><code>trac #30247: merged with 9.2.beta8</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49472e3823a9aeed671f9a662a1cc72831396ab2\">49472e3</a></td><td><code>trac #30247: implement review comments</code></td></tr></table>\n",
    "created_at": "2020-08-13T09:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482565",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c18eb320bf81f0222ee731b5520639fb455389e">0c18eb3</a></td><td><code>trac #30247: merged with 9.2.beta8</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49472e3823a9aeed671f9a662a1cc72831396ab2">49472e3</a></td><td><code>trac #30247: implement review comments</code></td></tr></table>




---

archive/issue_comments_482566.json:
```json
{
    "body": "<a id='comment:25'></a>\nI made the changes except:\n\n- empty or one element graphs, the usual small case issue in graph theory (often not well defined). The previous choice was to let these cases undefined. For one element graphs, we could answer 0, but for the empty graph, it's certainly a user choice. \nI tried with networkx and get:\n\n```\nsage: import networkx                                                                                                                                                             \nsage: G = Graph()                                                                                                                                                                 \nsage: gnx = G.networkx_graph()                                                                                                                                                    \nsage: networkx.wiener_index(gnx)                                                                                                                                                  \n---------------------------------------------------------------------------\nNetworkXPointlessConcept                  Traceback (most recent call last)\n<ipython-input-4-0fae33b2819e> in <module>\n----> 1 networkx.wiener_index(gnx)\n\n~/sage/local/lib/python3.7/site-packages/networkx/algorithms/wiener.py in wiener_index(G, weight)\n     79     is_directed = G.is_directed()\n     80     if (is_directed and not is_strongly_connected(G)) or \\\n---> 81             (not is_directed and not is_connected(G)):\n     82         return float('inf')\n     83     total = sum(chaini(p.values() for v, p in spl(G, weight=weight)))\n\n</Users/dcoudert/sage/local/lib/python3.7/site-packages/decorator.py:decorator-gen-299> in is_connected(G)\n\n~/sage/local/lib/python3.7/site-packages/networkx/utils/decorators.py in _not_implemented_for(not_implement_for_func, *args, **kwargs)\n     80             raise nx.NetworkXNotImplemented(msg)\n     81         else:\n---> 82             return not_implement_for_func(*args, **kwargs)\n     83     return _not_implemented_for\n     84 \n\n~/sage/local/lib/python3.7/site-packages/networkx/algorithms/components/connected.py in is_connected(G)\n    145     if len(G) == 0:\n    146         raise nx.NetworkXPointlessConcept('Connectivity is undefined ',\n--> 147                                           'for the null graph.')\n    148     return sum(1 for node in _plain_bfs(G, arbitrary_element(G))) == len(G)\n    149 \n\nNetworkXPointlessConcept: ('Connectivity is undefined ', 'for the null graph.')\nsage: G = Graph(1)                                                                                                                                                                \nsage: gnx = G.networkx_graph()                                                                                                                                                    \nsage: networkx.wiener_index(gnx)                                                                                                                                                  \n0.0\n```\nDo you think I should do like networkx and return 0 for one element graphs ?\n\n\n- for `if WI in QQ`, I changed to `if WI in ZZ`. Should be better.\n\n- I added `Dijkstra_NetworkX`, but I don't see how a pure Python method could be faster than a C++ one. \n\n  Actually, we have too many methods for computing shortest paths and distances and this is not well documented. Ideally, we should create a specific documentation page describing  the various methods with advantages and limitations.\n\n- for the double dictionary, it's a side effect of the fact that we have too much ways of computing distances. So for some algorithms, it's currently the only way.\n\n  A long term objective is to create a `DistancesView` hiding internal representations, and so avoiding double dictionary. The difficulty is to handle the different types of values (integer, floats, rational, etc.). It could even have a lazy mode to avoid computing distances from a vertex if never asked (again a difficulty: how / when to raise errors like negative weight cycle?).",
    "created_at": "2020-08-13T10:13:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482566",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>
I made the changes except:

- empty or one element graphs, the usual small case issue in graph theory (often not well defined). The previous choice was to let these cases undefined. For one element graphs, we could answer 0, but for the empty graph, it's certainly a user choice. 
I tried with networkx and get:

```
sage: import networkx                                                                                                                                                             
sage: G = Graph()                                                                                                                                                                 
sage: gnx = G.networkx_graph()                                                                                                                                                    
sage: networkx.wiener_index(gnx)                                                                                                                                                  
---------------------------------------------------------------------------
NetworkXPointlessConcept                  Traceback (most recent call last)
<ipython-input-4-0fae33b2819e> in <module>
----> 1 networkx.wiener_index(gnx)

~/sage/local/lib/python3.7/site-packages/networkx/algorithms/wiener.py in wiener_index(G, weight)
     79     is_directed = G.is_directed()
     80     if (is_directed and not is_strongly_connected(G)) or \
---> 81             (not is_directed and not is_connected(G)):
     82         return float('inf')
     83     total = sum(chaini(p.values() for v, p in spl(G, weight=weight)))

</Users/dcoudert/sage/local/lib/python3.7/site-packages/decorator.py:decorator-gen-299> in is_connected(G)

~/sage/local/lib/python3.7/site-packages/networkx/utils/decorators.py in _not_implemented_for(not_implement_for_func, *args, **kwargs)
     80             raise nx.NetworkXNotImplemented(msg)
     81         else:
---> 82             return not_implement_for_func(*args, **kwargs)
     83     return _not_implemented_for
     84 

~/sage/local/lib/python3.7/site-packages/networkx/algorithms/components/connected.py in is_connected(G)
    145     if len(G) == 0:
    146         raise nx.NetworkXPointlessConcept('Connectivity is undefined ',
--> 147                                           'for the null graph.')
    148     return sum(1 for node in _plain_bfs(G, arbitrary_element(G))) == len(G)
    149 

NetworkXPointlessConcept: ('Connectivity is undefined ', 'for the null graph.')
sage: G = Graph(1)                                                                                                                                                                
sage: gnx = G.networkx_graph()                                                                                                                                                    
sage: networkx.wiener_index(gnx)                                                                                                                                                  
0.0
```
Do you think I should do like networkx and return 0 for one element graphs ?


- for `if WI in QQ`, I changed to `if WI in ZZ`. Should be better.

- I added `Dijkstra_NetworkX`, but I don't see how a pure Python method could be faster than a C++ one. 

  Actually, we have too many methods for computing shortest paths and distances and this is not well documented. Ideally, we should create a specific documentation page describing  the various methods with advantages and limitations.

- for the double dictionary, it's a side effect of the fact that we have too much ways of computing distances. So for some algorithms, it's currently the only way.

  A long term objective is to create a `DistancesView` hiding internal representations, and so avoiding double dictionary. The difficulty is to handle the different types of values (integer, floats, rational, etc.). It could even have a lazy mode to avoid computing distances from a vertex if never asked (again a difficulty: how / when to raise errors like negative weight cycle?).



---

archive/issue_comments_482567.json:
```json
{
    "body": "**Changing commit** from \"[49472e3823a9aeed671f9a662a1cc72831396ab2](https://github.com/sagemath/sagetrac-mirror/commit/49472e3823a9aeed671f9a662a1cc72831396ab2)\" to \"[8bbf19559e6033ede935fd8d32a3e3cecd606453](https://github.com/sagemath/sagetrac-mirror/commit/8bbf19559e6033ede935fd8d32a3e3cecd606453)\".",
    "created_at": "2020-08-14T14:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482567",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[49472e3823a9aeed671f9a662a1cc72831396ab2](https://github.com/sagemath/sagetrac-mirror/commit/49472e3823a9aeed671f9a662a1cc72831396ab2)" to "[8bbf19559e6033ede935fd8d32a3e3cecd606453](https://github.com/sagemath/sagetrac-mirror/commit/8bbf19559e6033ede935fd8d32a3e3cecd606453)".



---

archive/issue_comments_482568.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8bbf19559e6033ede935fd8d32a3e3cecd606453\">8bbf195</a></td><td><code>trac #30247: set wiener index of one vertex graph to 0</code></td></tr></table>\n",
    "created_at": "2020-08-14T14:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482568",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8bbf19559e6033ede935fd8d32a3e3cecd606453">8bbf195</a></td><td><code>trac #30247: set wiener index of one vertex graph to 0</code></td></tr></table>




---

archive/issue_comments_482569.json:
```json
{
    "body": "<a id='comment:27'></a>\nI let wiener index of empty graph undefined and set the 0 the wiener index of one vertex graphs.",
    "created_at": "2020-08-14T14:08:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482569",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:27'></a>
I let wiener index of empty graph undefined and set the 0 the wiener index of one vertex graphs.



---

archive/issue_comments_482570.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bfc181fbde45e92fb292413015b4f44d19603a95\">bfc181f</a></td><td><code>trac #30247: catch new exception appearing with boost 1.7.3</code></td></tr></table>\n",
    "created_at": "2020-08-14T14:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482570",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bfc181fbde45e92fb292413015b4f44d19603a95">bfc181f</a></td><td><code>trac #30247: catch new exception appearing with boost 1.7.3</code></td></tr></table>




---

archive/issue_comments_482571.json:
```json
{
    "body": "**Changing commit** from \"[8bbf19559e6033ede935fd8d32a3e3cecd606453](https://github.com/sagemath/sagetrac-mirror/commit/8bbf19559e6033ede935fd8d32a3e3cecd606453)\" to \"[bfc181fbde45e92fb292413015b4f44d19603a95](https://github.com/sagemath/sagetrac-mirror/commit/bfc181fbde45e92fb292413015b4f44d19603a95)\".",
    "created_at": "2020-08-14T14:17:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482571",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[8bbf19559e6033ede935fd8d32a3e3cecd606453](https://github.com/sagemath/sagetrac-mirror/commit/8bbf19559e6033ede935fd8d32a3e3cecd606453)" to "[bfc181fbde45e92fb292413015b4f44d19603a95](https://github.com/sagemath/sagetrac-mirror/commit/bfc181fbde45e92fb292413015b4f44d19603a95)".



---

archive/issue_comments_482572.json:
```json
{
    "body": "<a id='comment:29'></a>\nthis last commit fix a new error appearing when using boost 1.7.3 (I have a new laptop with it). With boost 1.7.2, we don't have this error.\n\n```\nFile \"src/sage/graphs/base/boost_graph.pyx\", line 2674, in sage.graphs.base.boost_graph.wiener_index\nFailed example:\n    wiener_index(g, algorithm=\"Dijkstra\", weight_function=weight_of)\nExpected:\n    Traceback (most recent call last):\n    ...\n    RuntimeError: Dijkstra algorithm does not work with negative weights, use Bellman-Ford instead\nGot:\n    libc++abi.dylib: terminating with uncaught exception of type boost::wrapexcept<boost::negative_edge>: The graph may not contain an edge with negative weight.\n    Traceback (most recent call last):\n      File \"sage/graphs/base/boost_graph.pyx\", line 2762, in sage.graphs.base.boost_graph.wiener_index (build/cythonized/sage/graphs/base/boost_graph.cpp:28864)\n        sig_on()\n    RuntimeError: Aborted\n    <BLANKLINE>\n    During handling of the above exception, another exception occurred:\n    <BLANKLINE>\n    Traceback (most recent call last):\n      File \"/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 715, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py\", line 1139, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.graphs.base.boost_graph.wiener_index[13]>\", line 1, in <module>\n        wiener_index(g, algorithm=\"Dijkstra\", weight_function=weight_of)\n      File \"sage/graphs/base/boost_graph.pyx\", line 2604, in sage.graphs.base.boost_graph.wiener_index (build/cythonized/sage/graphs/base/boost_graph.cpp:29336)\n        cpdef wiener_index(g, algorithm=None, weight_function=None, check_weight=True):\n      File \"sage/graphs/base/boost_graph.pyx\", line 2770, in sage.graphs.base.boost_graph.wiener_index (build/cythonized/sage/graphs/base/boost_graph.cpp:28966)\n        raise RuntimeError(msg)\n    RuntimeError: Aborted\n```",
    "created_at": "2020-08-14T14:22:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482572",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:29'></a>
this last commit fix a new error appearing when using boost 1.7.3 (I have a new laptop with it). With boost 1.7.2, we don't have this error.

```
File "src/sage/graphs/base/boost_graph.pyx", line 2674, in sage.graphs.base.boost_graph.wiener_index
Failed example:
    wiener_index(g, algorithm="Dijkstra", weight_function=weight_of)
Expected:
    Traceback (most recent call last):
    ...
    RuntimeError: Dijkstra algorithm does not work with negative weights, use Bellman-Ford instead
Got:
    libc++abi.dylib: terminating with uncaught exception of type boost::wrapexcept<boost::negative_edge>: The graph may not contain an edge with negative weight.
    Traceback (most recent call last):
      File "sage/graphs/base/boost_graph.pyx", line 2762, in sage.graphs.base.boost_graph.wiener_index (build/cythonized/sage/graphs/base/boost_graph.cpp:28864)
        sig_on()
    RuntimeError: Aborted
    <BLANKLINE>
    During handling of the above exception, another exception occurred:
    <BLANKLINE>
    Traceback (most recent call last):
      File "/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 715, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/dcoudert/sage/local/lib/python3.7/site-packages/sage/doctest/forker.py", line 1139, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.graphs.base.boost_graph.wiener_index[13]>", line 1, in <module>
        wiener_index(g, algorithm="Dijkstra", weight_function=weight_of)
      File "sage/graphs/base/boost_graph.pyx", line 2604, in sage.graphs.base.boost_graph.wiener_index (build/cythonized/sage/graphs/base/boost_graph.cpp:29336)
        cpdef wiener_index(g, algorithm=None, weight_function=None, check_weight=True):
      File "sage/graphs/base/boost_graph.pyx", line 2770, in sage.graphs.base.boost_graph.wiener_index (build/cythonized/sage/graphs/base/boost_graph.cpp:28966)
        raise RuntimeError(msg)
    RuntimeError: Aborted
```



---

archive/issue_comments_482573.json:
```json
{
    "body": "<a id='comment:30'></a>\nBuild error\n\n```\n[sagelib-9.2.beta8] /srv/public/kliem/sage/local/include/boost/mpl/assert.hpp:188:21: warning: unnecessary parentheses in declaration of \u2018assert_arg\u2019 [-Wparentheses]\n[sagelib-9.2.beta8]  failed ************ (Pred::************\n[sagelib-9.2.beta8]                      ^\n[sagelib-9.2.beta8] /srv/public/kliem/sage/local/include/boost/mpl/assert.hpp:193:21: warning: unnecessary parentheses in declaration of \u2018assert_not_arg\u2019 [-Wparentheses]\n[sagelib-9.2.beta8]  failed ************ (boost::mpl::not_<Pred>::************\n[sagelib-9.2.beta8]                      ^\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c: In function \u2018__pyx_f_4sage_6graphs_19distances_all_pairs_diameter_DHV\u2019:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c:843:40: warning: \u2018__pyx_v_idx\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n[sagelib-9.2.beta8]    #define likely(x)   __builtin_expect(!!(x), 1)\n[sagelib-9.2.beta8]                                         ^\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c:16252:8: note: \u2018__pyx_v_idx\u2019 was declared here\n[sagelib-9.2.beta8]  size_t __pyx_v_idx;\n[sagelib-9.2.beta8]         ^~~~~~~~~~~\n[sagelib-9.2.beta8] In file included from build/cythonized/sage/graphs/base/boost_graph.cpp:668:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp: In member function \u2018result_distances BoostGraph<OutEdgeListS, VertexListS, DirectedS, EdgeListS, EdgeProperty>::dijkstra_shortest_paths(v_index)\u2019:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:26: error: \u2018wrapexcept\u2019 in namespace \u2018boost\u2019 does not name a template type\n[sagelib-9.2.beta8]           } catch (boost::wrapexcept<boost::negative_edge> e) {\n[sagelib-9.2.beta8]                           ^~~~~~~~~~\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:36: error: expected \u2018)\u2019 before \u2018<\u2019 token\n[sagelib-9.2.beta8]           } catch (boost::wrapexcept<boost::negative_edge> e) {\n[sagelib-9.2.beta8]                   ~                 ^\n[sagelib-9.2.beta8]                                     )\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:36: error: expected \u2018{\u2019 before \u2018<\u2019 token\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:36: error: expected primary-expression before \u2018<\u2019 token\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:57: error: expected primary-expression before \u2018>\u2019 token\n[sagelib-9.2.beta8]           } catch (boost::wrapexcept<boost::negative_edge> e) {\n[sagelib-9.2.beta8]                                                          ^\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:59: error: \u2018e\u2019 was not declared in this scope\n[sagelib-9.2.beta8]           } catch (boost::wrapexcept<boost::negative_edge> e) {\n[sagelib-9.2.beta8]                                                            ^\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp: In function \u2018PyObject* __pyx_f_4sage_6graphs_4base_11boost_graph_diameter_DHV(PyObject*, int, __pyx_opt_args_4sage_6graphs_4base_11boost_graph_diameter_DHV*)\u2019:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:22823:35: warning: comparison of integer expressions of different signedness: \u2018size_t\u2019 {aka \u2018long unsigned int\u2019} and \u2018int\u2019 [-Wsign-compare]\n[sagelib-9.2.beta8]    for (__pyx_t_16 = 0; __pyx_t_16 < __pyx_t_15; __pyx_t_16+=1) {\n[sagelib-9.2.beta8]                         ~~~~~~~~~~~^~~~~~~~~~~~\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp: In function \u2018PyObject* __pyx_f_4sage_6graphs_4base_11boost_graph_wiener_index(PyObject*, int, __pyx_opt_args_4sage_6graphs_4base_11boost_graph_wiener_index*)\u2019:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:28348:35: warning: comparison of integer expressions of different signedness: \u2018v_index\u2019 {aka \u2018int\u2019} and \u2018unsigned int\u2019 [-Wsign-compare]\n[sagelib-9.2.beta8]    for (__pyx_t_14 = 0; __pyx_t_14 < __pyx_t_17; __pyx_t_14+=1) {\n[sagelib-9.2.beta8]                         ~~~~~~~~~~~^~~~~~~~~~~~\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:29099:46: warning: comparison of integer expressions of different signedness: \u2018v_index\u2019 {aka \u2018int\u2019} and \u2018unsigned int\u2019 [-Wsign-compare]\n[sagelib-9.2.beta8]      for (__pyx_t_35 = __pyx_t_33; __pyx_t_35 < __pyx_t_34; __pyx_t_35+=1) {\n[sagelib-9.2.beta8]                                    ~~~~~~~~~~~^~~~~~~~~~~~\n[sagelib-9.2.beta8] In file included from build/cythonized/sage/graphs/base/boost_graph.cpp:668:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp: In instantiation of \u2018result_distances BoostGraph<OutEdgeListS, VertexListS, DirectedS, EdgeListS, EdgeProperty>::dijkstra_shortest_paths(v_index) [with OutEdgeListS = boost::vecS; VertexListS = boost::vecS; DirectedS = boost::directedS; EdgeListS = boost::vecS; EdgeProperty = boost::property<boost::edge_weight_t, double>; v_index = int]\u2019:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:11682:82:   required from here\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:243:12: warning: catching polymorphic type \u2018class boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::negative_edge> >\u2019 by value [-Wcatch-value=]\n[sagelib-9.2.beta8]           } catch (boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::negative_edge> > e) {\n[sagelib-9.2.beta8]             ^~~~~\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp: In instantiation of \u2018result_distances BoostGraph<OutEdgeListS, VertexListS, DirectedS, EdgeListS, EdgeProperty>::dijkstra_shortest_paths(v_index) [with OutEdgeListS = boost::vecS; VertexListS = boost::vecS; DirectedS = boost::undirectedS; EdgeListS = boost::vecS; EdgeProperty = boost::property<boost::edge_weight_t, double>; v_index = int]\u2019:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:11746:82:   required from here\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:243:12: warning: catching polymorphic type \u2018class boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::negative_edge> >\u2019 by value [-Wcatch-value=]\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c: In function \u2018__pyx_pw_4sage_6graphs_19distances_all_pairs_9eccentricity\u2019:\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c:843:40: warning: \u2018__pyx_v_idx\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n[sagelib-9.2.beta8]    #define likely(x)   __builtin_expect(!!(x), 1)\n[sagelib-9.2.beta8]                                         ^\n[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c:12598:8: note: \u2018__pyx_v_idx\u2019 was declared here\n[sagelib-9.2.beta8]  size_t __pyx_v_idx;\n[sagelib-9.2.beta8]         ^~~~~~~~~~~\n[sagelib-9.2.beta8] gcc -pthread -shared -L/srv/public/kliem/sage/local/lib -Wl,-rpath,/srv/public/kliem/sage/local/lib -L. -L/srv/public/kliem/sage/local/lib -Wl,-rpath,/srv/public/kliem/sage/local/lib -Wl,-rpath-link,/srv/public/kliem/sage/local/lib -L/srv/public/kliem/sage/local/lib -Wl,-rpath,/srv/public/kliem/sage/local/lib -march=native -O2 -g build/temp.linux-x86_64-3.7/build/cythonized/sage/graphs/distances_all_pairs.o -L/srv/public/kliem/sage/local/lib -lgmp -lpython3.7m -o build/lib.linux-x86_64-3.7/sage/graphs/distances_all_pairs.cpython-37m-x86_64-linux-gnu.so -lpari\n```",
    "created_at": "2020-08-15T07:57:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482573",
    "user": "https://github.com/kliem"
}
```

<a id='comment:30'></a>
Build error

```
[sagelib-9.2.beta8] /srv/public/kliem/sage/local/include/boost/mpl/assert.hpp:188:21: warning: unnecessary parentheses in declaration of ‘assert_arg’ [-Wparentheses]
[sagelib-9.2.beta8]  failed ************ (Pred::************
[sagelib-9.2.beta8]                      ^
[sagelib-9.2.beta8] /srv/public/kliem/sage/local/include/boost/mpl/assert.hpp:193:21: warning: unnecessary parentheses in declaration of ‘assert_not_arg’ [-Wparentheses]
[sagelib-9.2.beta8]  failed ************ (boost::mpl::not_<Pred>::************
[sagelib-9.2.beta8]                      ^
[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c: In function ‘__pyx_f_4sage_6graphs_19distances_all_pairs_diameter_DHV’:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c:843:40: warning: ‘__pyx_v_idx’ may be used uninitialized in this function [-Wmaybe-uninitialized]
[sagelib-9.2.beta8]    #define likely(x)   __builtin_expect(!!(x), 1)
[sagelib-9.2.beta8]                                         ^
[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c:16252:8: note: ‘__pyx_v_idx’ was declared here
[sagelib-9.2.beta8]  size_t __pyx_v_idx;
[sagelib-9.2.beta8]         ^~~~~~~~~~~
[sagelib-9.2.beta8] In file included from build/cythonized/sage/graphs/base/boost_graph.cpp:668:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp: In member function ‘result_distances BoostGraph<OutEdgeListS, VertexListS, DirectedS, EdgeListS, EdgeProperty>::dijkstra_shortest_paths(v_index)’:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:26: error: ‘wrapexcept’ in namespace ‘boost’ does not name a template type
[sagelib-9.2.beta8]           } catch (boost::wrapexcept<boost::negative_edge> e) {
[sagelib-9.2.beta8]                           ^~~~~~~~~~
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:36: error: expected ‘)’ before ‘<’ token
[sagelib-9.2.beta8]           } catch (boost::wrapexcept<boost::negative_edge> e) {
[sagelib-9.2.beta8]                   ~                 ^
[sagelib-9.2.beta8]                                     )
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:36: error: expected ‘{’ before ‘<’ token
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:36: error: expected primary-expression before ‘<’ token
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:57: error: expected primary-expression before ‘>’ token
[sagelib-9.2.beta8]           } catch (boost::wrapexcept<boost::negative_edge> e) {
[sagelib-9.2.beta8]                                                          ^
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:245:59: error: ‘e’ was not declared in this scope
[sagelib-9.2.beta8]           } catch (boost::wrapexcept<boost::negative_edge> e) {
[sagelib-9.2.beta8]                                                            ^
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp: In function ‘PyObject* __pyx_f_4sage_6graphs_4base_11boost_graph_diameter_DHV(PyObject*, int, __pyx_opt_args_4sage_6graphs_4base_11boost_graph_diameter_DHV*)’:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:22823:35: warning: comparison of integer expressions of different signedness: ‘size_t’ {aka ‘long unsigned int’} and ‘int’ [-Wsign-compare]
[sagelib-9.2.beta8]    for (__pyx_t_16 = 0; __pyx_t_16 < __pyx_t_15; __pyx_t_16+=1) {
[sagelib-9.2.beta8]                         ~~~~~~~~~~~^~~~~~~~~~~~
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp: In function ‘PyObject* __pyx_f_4sage_6graphs_4base_11boost_graph_wiener_index(PyObject*, int, __pyx_opt_args_4sage_6graphs_4base_11boost_graph_wiener_index*)’:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:28348:35: warning: comparison of integer expressions of different signedness: ‘v_index’ {aka ‘int’} and ‘unsigned int’ [-Wsign-compare]
[sagelib-9.2.beta8]    for (__pyx_t_14 = 0; __pyx_t_14 < __pyx_t_17; __pyx_t_14+=1) {
[sagelib-9.2.beta8]                         ~~~~~~~~~~~^~~~~~~~~~~~
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:29099:46: warning: comparison of integer expressions of different signedness: ‘v_index’ {aka ‘int’} and ‘unsigned int’ [-Wsign-compare]
[sagelib-9.2.beta8]      for (__pyx_t_35 = __pyx_t_33; __pyx_t_35 < __pyx_t_34; __pyx_t_35+=1) {
[sagelib-9.2.beta8]                                    ~~~~~~~~~~~^~~~~~~~~~~~
[sagelib-9.2.beta8] In file included from build/cythonized/sage/graphs/base/boost_graph.cpp:668:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp: In instantiation of ‘result_distances BoostGraph<OutEdgeListS, VertexListS, DirectedS, EdgeListS, EdgeProperty>::dijkstra_shortest_paths(v_index) [with OutEdgeListS = boost::vecS; VertexListS = boost::vecS; DirectedS = boost::directedS; EdgeListS = boost::vecS; EdgeProperty = boost::property<boost::edge_weight_t, double>; v_index = int]’:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:11682:82:   required from here
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:243:12: warning: catching polymorphic type ‘class boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::negative_edge> >’ by value [-Wcatch-value=]
[sagelib-9.2.beta8]           } catch (boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::negative_edge> > e) {
[sagelib-9.2.beta8]             ^~~~~
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp: In instantiation of ‘result_distances BoostGraph<OutEdgeListS, VertexListS, DirectedS, EdgeListS, EdgeProperty>::dijkstra_shortest_paths(v_index) [with OutEdgeListS = boost::vecS; VertexListS = boost::vecS; DirectedS = boost::undirectedS; EdgeListS = boost::vecS; EdgeProperty = boost::property<boost::edge_weight_t, double>; v_index = int]’:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_graph.cpp:11746:82:   required from here
[sagelib-9.2.beta8] build/cythonized/sage/graphs/base/boost_interface.cpp:243:12: warning: catching polymorphic type ‘class boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::negative_edge> >’ by value [-Wcatch-value=]
[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c: In function ‘__pyx_pw_4sage_6graphs_19distances_all_pairs_9eccentricity’:
[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c:843:40: warning: ‘__pyx_v_idx’ may be used uninitialized in this function [-Wmaybe-uninitialized]
[sagelib-9.2.beta8]    #define likely(x)   __builtin_expect(!!(x), 1)
[sagelib-9.2.beta8]                                         ^
[sagelib-9.2.beta8] build/cythonized/sage/graphs/distances_all_pairs.c:12598:8: note: ‘__pyx_v_idx’ was declared here
[sagelib-9.2.beta8]  size_t __pyx_v_idx;
[sagelib-9.2.beta8]         ^~~~~~~~~~~
[sagelib-9.2.beta8] gcc -pthread -shared -L/srv/public/kliem/sage/local/lib -Wl,-rpath,/srv/public/kliem/sage/local/lib -L. -L/srv/public/kliem/sage/local/lib -Wl,-rpath,/srv/public/kliem/sage/local/lib -Wl,-rpath-link,/srv/public/kliem/sage/local/lib -L/srv/public/kliem/sage/local/lib -Wl,-rpath,/srv/public/kliem/sage/local/lib -march=native -O2 -g build/temp.linux-x86_64-3.7/build/cythonized/sage/graphs/distances_all_pairs.o -L/srv/public/kliem/sage/local/lib -lgmp -lpython3.7m -o build/lib.linux-x86_64-3.7/sage/graphs/distances_all_pairs.cpython-37m-x86_64-linux-gnu.so -lpari
```



---

archive/issue_events_270389.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-08-15T07:57:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270389"
}
```



---

archive/issue_events_270390.json:
```json
{
    "actor": "https://github.com/kliem",
    "created_at": "2020-08-15T07:57:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270390"
}
```



---

archive/issue_comments_482574.json:
```json
{
    "body": "**Changing commit** from \"[bfc181fbde45e92fb292413015b4f44d19603a95](https://github.com/sagemath/sagetrac-mirror/commit/bfc181fbde45e92fb292413015b4f44d19603a95)\" to \"[acf7647264eef0b9909fa8c9955a2a4d874f53c4](https://github.com/sagemath/sagetrac-mirror/commit/acf7647264eef0b9909fa8c9955a2a4d874f53c4)\".",
    "created_at": "2020-08-15T09:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482574",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[bfc181fbde45e92fb292413015b4f44d19603a95](https://github.com/sagemath/sagetrac-mirror/commit/bfc181fbde45e92fb292413015b4f44d19603a95)" to "[acf7647264eef0b9909fa8c9955a2a4d874f53c4](https://github.com/sagemath/sagetrac-mirror/commit/acf7647264eef0b9909fa8c9955a2a4d874f53c4)".



---

archive/issue_comments_482575.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acf7647264eef0b9909fa8c9955a2a4d874f53c4\">acf7647</a></td><td><code>trac #30247: improved checking of weights and algorithms</code></td></tr></table>\n",
    "created_at": "2020-08-15T09:26:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482575",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acf7647264eef0b9909fa8c9955a2a4d874f53c4">acf7647</a></td><td><code>trac #30247: improved checking of weights and algorithms</code></td></tr></table>




---

archive/issue_comments_482576.json:
```json
{
    "body": "<a id='comment:32'></a>\nThis version is much simpler, avoids modifying the boost interface, and I expect more robust.",
    "created_at": "2020-08-15T09:28:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482576",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:32'></a>
This version is much simpler, avoids modifying the boost interface, and I expect more robust.



---

archive/issue_events_270391.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-15T09:28:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270391"
}
```



---

archive/issue_events_270392.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-15T09:28:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270392"
}
```



---

archive/issue_events_270393.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-15T09:28:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270393"
}
```



---

archive/issue_events_270394.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-15T09:28:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270394"
}
```



---

archive/issue_comments_482577.json:
```json
{
    "body": "<a id='comment:34'></a>\noups, wrong button ;)",
    "created_at": "2020-08-15T09:28:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482577",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:34'></a>
oups, wrong button ;)



---

archive/issue_events_270395.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-15T09:28:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270395"
}
```



---

archive/issue_events_270396.json:
```json
{
    "actor": "https://github.com/dcoudert",
    "created_at": "2020-08-15T09:28:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270396"
}
```



---

archive/issue_events_270397.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-08-18T11:35:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270397"
}
```



---

archive/issue_events_270398.json:
```json
{
    "actor": "https://github.com/vipul79321",
    "created_at": "2020-08-18T11:35:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270398"
}
```



---

archive/issue_comments_482578.json:
```json
{
    "body": "**Reviewer:** Vipul Gupta",
    "created_at": "2020-08-18T11:51:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482578",
    "user": "https://github.com/dcoudert"
}
```

**Reviewer:** Vipul Gupta



---

archive/issue_comments_482579.json:
```json
{
    "body": "<a id='comment:37'></a>\nThanks for making the suggested changes. I didn't get around to finally reviewing it, but I wrote don't anything that somewhat bothered me.",
    "created_at": "2020-08-18T12:11:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482579",
    "user": "https://github.com/kliem"
}
```

<a id='comment:37'></a>
Thanks for making the suggested changes. I didn't get around to finally reviewing it, but I wrote don't anything that somewhat bothered me.



---

archive/issue_comments_482580.json:
```json
{
    "body": "<a id='comment:38'></a>\nThank you. Do not hesitate to add your name as reviewer.",
    "created_at": "2020-08-18T12:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482580",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:38'></a>
Thank you. Do not hesitate to add your name as reviewer.



---

archive/issue_comments_482581.json:
```json
{
    "body": "**Changing reviewer** from \"Vipul Gupta\" to \"Vipul Gupta, Jonathan Kliem\".",
    "created_at": "2020-08-18T12:22:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482581",
    "user": "https://github.com/kliem"
}
```

**Changing reviewer** from "Vipul Gupta" to "Vipul Gupta, Jonathan Kliem".



---

archive/issue_events_270399.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-20T22:23:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270399"
}
```



---

archive/issue_events_270400.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9fed3e96e61a4aed16e300f29f1a9714e1760248",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-08-20T22:23:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/30247#event-270400"
}
```



---

archive/issue_comments_482582.json:
```json
{
    "body": "**Changing branch** from \"[public/graphs/30247_wiener](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30247_wiener)\" to \"[acf7647264eef0b9909fa8c9955a2a4d874f53c4](https://github.com/sagemath/sagetrac-mirror/commit/acf7647264eef0b9909fa8c9955a2a4d874f53c4)\".",
    "created_at": "2020-08-20T22:23:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/30247",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/30247#issuecomment-482582",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/graphs/30247_wiener](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/30247_wiener)" to "[acf7647264eef0b9909fa8c9955a2a4d874f53c4](https://github.com/sagemath/sagetrac-mirror/commit/acf7647264eef0b9909fa8c9955a2a4d874f53c4)".
