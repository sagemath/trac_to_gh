# Issue 30355: Graphs: simple bipartite double method added to undirected graphs

archive/issues_030118.json:
```json
{
    "body": "The bipartite double of a graph is its tensor product with the graph K_2.\nA simple method `bipartite_double(extended=False)` is added to the undirected graph class in order to compute the bipartite double and the extended bipartite double of a graph.\n\nCC:  @dimpase\n\nBranch/Commit: 2d6c8ba82b07f2314d3456f9a3d26e14913c1869\n\nReviewer: David Coudert\n\nAuthor: Ivo Maffei\n\nDependencies: #30240\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/30355\n\n",
    "closed_at": "2020-08-23T17:50:45Z",
    "created_at": "2020-08-14T13:31:21Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "Graphs: simple bipartite double method added to undirected graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/30355",
    "user": "https://github.com/Ivo-Maffei"
}
```
The bipartite double of a graph is its tensor product with the graph K_2.
A simple method `bipartite_double(extended=False)` is added to the undirected graph class in order to compute the bipartite double and the extended bipartite double of a graph.

CC:  @dimpase

Branch/Commit: 2d6c8ba82b07f2314d3456f9a3d26e14913c1869

Reviewer: David Coudert

Author: Ivo Maffei

Dependencies: #30240

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/30355





---

archive/issue_comments_597889.json:
```json
{
    "body": "<a id='comment:1'></a>The dependency on #30240 is only needed to avoid a merge conflict in the master bibliography",
    "created_at": "2020-08-14T13:31:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597889",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:1'></a>The dependency on #30240 is only needed to avoid a merge conflict in the master bibliography



---

archive/issue_comments_597890.json:
```json
{
    "body": "Changing commit from \"\" to \"13dc48a0786ca495912bd8cd2838dc571ddc836c\"",
    "created_at": "2020-08-14T13:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597890",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing commit from "" to "13dc48a0786ca495912bd8cd2838dc571ddc836c"



---

archive/issue_comments_597891.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-08-14T13:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597891",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_597892.json:
```json
{
    "body": "Changing branch from \"\" to \"public/graphs/30355\"",
    "created_at": "2020-08-14T13:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597892",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing branch from "" to "public/graphs/30355"



---

archive/issue_comments_597893.json:
```json
{
    "body": "<a id='comment:2'></a>Last 10 new commits:",
    "created_at": "2020-08-14T13:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597893",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:2'></a>Last 10 new commits:



---

archive/issue_comments_597894.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Coudert\"",
    "created_at": "2020-08-14T14:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597894",
    "user": "https://github.com/dcoudert"
}
```

Changing reviewer from "" to "David Coudert"



---

archive/issue_comments_597895.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-08-14T14:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597895",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_597896.json:
```json
{
    "body": "<a id='comment:3'></a>Several comments:\n- no need to add dependency on #30240 here\n\n- small changes\n\n```diff\n-        The bipartite double of a graph `G` has vertices\n-        `\\{ (v,0), (v,1) : v \\in G\\}` and for any edge `(u, v)` in `G`\n-        we have edges `((u,0),(v,1))` and `((u,1),(v,0))`.\n-        Note that this is the tensor product of `G` with `K_2`.\n-        See :\n+        The bipartite double of a graph `G` has vertex set\n+        `\\{ (v,0), (v,1) : v \\in G\\}` and for any edge `(u, v)` in `G`\n+        it has edges `((u,0),(v,1))` and `((u,1),(v,0))`.\n+        Note that this is the tensor product of `G` with `K_2`.\n```\n\n- input\n\n```diff\n-        - ``extended`` -- boolean (optional); if ``True`` return the extended\n-          bipartite double, else the bipartite double. Default: ``False``.\n+        - ``extended`` -- boolean (default: ``False``); Whether to return the extended\n+          bipartite double, or only the bipartite double (default)\n```\n\n- it is not important to mention and test that the input graph is untouched. You return a new graph, no?\n\n- instead of a `REFERENCES:` block, use a `.. SEEALSO::` block (check other methods)\n\n- `TETS` -> `TESTS`\n\n- no need to import the complete graph generator, simply use `Graph([(0, 1)])`\n\n- simpler code\n\n```diff\n-        if extended:\n-            for v in self:\n-                v1 = (v, 0)\n-                v2 = (v, 1)\n-\n-                G.add_edge((v1, v2))\n+        if extended:\n+            G.add_edges(((v, 0), (v, 1)) for v in self)\n```\n\n- What if self is the empty graph ? a 1 vertex graph ? a disconnected graph ?\n\n- instead of testing for equality (`sage: H == G.tensor_product(graphs.CompleteGraph(2))`), it might be better to check if the graphs are isomorphismic.",
    "created_at": "2020-08-14T14:43:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597896",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:3'></a>Several comments:
- no need to add dependency on #30240 here

- small changes

```diff
-        The bipartite double of a graph `G` has vertices
-        `\{ (v,0), (v,1) : v \in G\}` and for any edge `(u, v)` in `G`
-        we have edges `((u,0),(v,1))` and `((u,1),(v,0))`.
-        Note that this is the tensor product of `G` with `K_2`.
-        See :
+        The bipartite double of a graph `G` has vertex set
+        `\{ (v,0), (v,1) : v \in G\}` and for any edge `(u, v)` in `G`
+        it has edges `((u,0),(v,1))` and `((u,1),(v,0))`.
+        Note that this is the tensor product of `G` with `K_2`.
```

- input

```diff
-        - ``extended`` -- boolean (optional); if ``True`` return the extended
-          bipartite double, else the bipartite double. Default: ``False``.
+        - ``extended`` -- boolean (default: ``False``); Whether to return the extended
+          bipartite double, or only the bipartite double (default)
```

- it is not important to mention and test that the input graph is untouched. You return a new graph, no?

- instead of a `REFERENCES:` block, use a `.. SEEALSO::` block (check other methods)

- `TETS` -> `TESTS`

- no need to import the complete graph generator, simply use `Graph([(0, 1)])`

- simpler code

```diff
-        if extended:
-            for v in self:
-                v1 = (v, 0)
-                v2 = (v, 1)
-
-                G.add_edge((v1, v2))
+        if extended:
+            G.add_edges(((v, 0), (v, 1)) for v in self)
```

- What if self is the empty graph ? a 1 vertex graph ? a disconnected graph ?

- instead of testing for equality (`sage: H == G.tensor_product(graphs.CompleteGraph(2))`), it might be better to check if the graphs are isomorphismic.



---

archive/issue_comments_597897.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-08-14T17:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597897",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_597898.json:
```json
{
    "body": "Changing commit from \"13dc48a0786ca495912bd8cd2838dc571ddc836c\" to \"2d6c8ba82b07f2314d3456f9a3d26e14913c1869\"",
    "created_at": "2020-08-14T17:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597898",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "13dc48a0786ca495912bd8cd2838dc571ddc836c" to "2d6c8ba82b07f2314d3456f9a3d26e14913c1869"



---

archive/issue_comments_597899.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-08-14T17:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597899",
    "user": "https://github.com/Ivo-Maffei"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_597900.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:3 dcoudert]:\n> - no need to add dependency on #30240 here\n \nI based this branch on #30240 because otherwise the reference [VDKT2016] would not work.\nI could add it to the master bibliography again, but I think this will cause a merge conflict with #30240.\n\n> - it is not important to mention and test that the input graph is untouched. You return a new graph, no?\n \nI mentioned it in the `OUTPUT` section. I could stress it in a `.. NOTE::` block, if you wish.\n\n> - What if self is the empty graph ? a 1 vertex graph ? a disconnected graph ?\n \nI added this cases in the `TESTS` and `EXAMPLES` sections. Should I also discuss them somewhere else?",
    "created_at": "2020-08-14T17:29:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597900",
    "user": "https://github.com/Ivo-Maffei"
}
```

<a id='comment:5'></a>Replying to [comment:3 dcoudert]:
> - no need to add dependency on #30240 here
 
I based this branch on #30240 because otherwise the reference [VDKT2016] would not work.
I could add it to the master bibliography again, but I think this will cause a merge conflict with #30240.

> - it is not important to mention and test that the input graph is untouched. You return a new graph, no?
 
I mentioned it in the `OUTPUT` section. I could stress it in a `.. NOTE::` block, if you wish.

> - What if self is the empty graph ? a 1 vertex graph ? a disconnected graph ?
 
I added this cases in the `TESTS` and `EXAMPLES` sections. Should I also discuss them somewhere else?



---

archive/issue_comments_597901.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-08-15T07:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597901",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_597902.json:
```json
{
    "body": "<a id='comment:6'></a>LGTM.",
    "created_at": "2020-08-15T07:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597902",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>LGTM.



---

archive/issue_comments_597903.json:
```json
{
    "body": "Changing branch from \"public/graphs/30355\" to \"2d6c8ba82b07f2314d3456f9a3d26e14913c1869\"",
    "created_at": "2020-08-23T17:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597903",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/graphs/30355" to "2d6c8ba82b07f2314d3456f9a3d26e14913c1869"



---

archive/issue_comments_597904.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-08-23T17:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/30355#issuecomment-597904",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_078634.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-08-23T17:50:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/30355",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/30355#event-78634"
}
```
