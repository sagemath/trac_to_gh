# Issue 31284: cygwin: numpy not portable despite using SAGE_FAT_BINARY=yes

Issue created by migration from https://trac.sagemath.org/ticket/31521

Original creator: mkoeppe

Original creation time: 2021-03-19 16:49:15

CC:  embray @kliem dimpase vbraun

Follow up from #29537.



---

Comment by mkoeppe created at 2021-03-24 19:21:00

On macOS, with `SAGE_FAT_BINARY=yes`, I just got:

```
    [numpy-1.19.5]   Running from numpy source directory.
    [numpy-1.19.5]   Cythonizing sources
    [numpy-1.19.5]   usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
    [numpy-1.19.5]      or: setup.py --help [cmd1 cmd2 ...]
    [numpy-1.19.5]      or: setup.py --help-commands
    [numpy-1.19.5]      or: setup.py cmd --help
    [numpy-1.19.5]
    [numpy-1.19.5]   error: option --cpu-dispatch not recognized
    [numpy-1.19.5]   ********************************************************************************
    [numpy-1.19.5]   Error building a wheel for numpy-1.19.5
```



---

Comment by mkoeppe created at 2021-03-24 19:26:33

Indeed, `--cpu-dispatch` has only been introduced in the 1.20.x series. We are still at 1.19.5. 

Wondering how this has possibly passed in previous tests?!


---

Comment by mkoeppe created at 2021-03-24 20:14:12

And I guess the prefix `SAGE_` can be removed in the variable names in sage_conf...


---

Comment by @kliem created at 2021-03-24 20:27:10

Reverting for now until numpy is updated.
----
New commits:


---

Comment by @kliem created at 2021-03-24 20:27:10

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-03-24 20:33:14

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-03-24 20:33:14

Changing component from porting: Cygwin to packages: standard.


---

Comment by mkoeppe created at 2021-03-24 20:33:14

Thanks!

But we'll need another ticket then to actually fix the nonportability of the build...


---

Comment by mkoeppe created at 2021-03-26 16:24:52

Replying to [comment:6 mkoeppe]:
> But we'll need another ticket then to actually fix the nonportability of the build...

That's now #31565.


---

Comment by vbraun created at 2021-03-28 08:38:35

Resolution: fixed
