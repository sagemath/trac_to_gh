# Issue 26045: Avoid comparison of vertex labels in MIP (Step 2)

Issue created by migration from https://trac.sagemath.org/ticket/26282

Original creator: dcoudert

Original creation time: 2018-09-14 11:09:46

CC:  tscrim chapoton

Avoid comparison of vertex labels in `graph.py`.


---

Comment by dcoudert created at 2018-09-14 11:33:50

Changing status from new to needs_review.


---

Comment by dcoudert created at 2018-09-14 11:33:50

New commits:


---

Comment by git created at 2018-09-15 17:03:44

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2018-09-16 09:02:03

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2018-09-16 09:05:20

I change `frozenset` wrappers from lambda to def. Should I try to do the same for remaining lambda statements like this ?

```
weight = lambda x: x if x in RR else 1
```



---

Comment by tscrim created at 2018-10-03 21:23:37

I think you can get rid of 

```
        def B(e):
            return b[frozenset(e)]
```


```
        def R(e):
            return r[frozenset(e)]
```


```
        def S(e):
            return frozenset(e)
```

as they are not simplifying the code (or changing the readability IMO.

I would still use `six.iteritems` for better memory usage:

```diff
-        g_mad = g.subgraph([v for v,l in six.iteritems(p.get_values(d)) if l>m ])
+        d_val = p.get_values(d)
+        g_mad = g.subgraph([v for v,l in d_val.items() if l > m ])
```

In general, I don't get the point of that change.

More standard convention and faster:

```diff
-lists = dict((v, []) for v in self)
+lists = {v: [] for v in self}
```


```
sage: %timeit dict((i,-1) for i in range(100))
100000 loops, best of 3: 16.6 µs per loop
sage: %timeit {i:-1 for i in range(100)}
100000 loops, best of 3: 11.7 µs per loop
```


`not fuv in L` -> `fuv not in L`.


---

Comment by git created at 2018-10-04 07:04:18

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by dcoudert created at 2018-10-04 07:07:57

I have implemented all your comments.


---

Comment by tscrim created at 2018-10-04 07:48:29

Thanks. LGTM.


---

Comment by tscrim created at 2018-10-04 07:48:29

Changing status from needs_review to positive_review.


---

Comment by dcoudert created at 2018-10-04 07:53:26

Thank you !


---

Comment by vbraun created at 2018-10-05 16:57:00

Resolution: fixed
