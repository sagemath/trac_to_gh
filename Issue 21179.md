# Issue 21179: Add jupyter_gap_wrapper package

archive/issues_021179.json:
```json
{
    "body": "CC:  nthiery dimpase\n\nThis package provides a Jupyter kernel for GAP. See https://github.com/gap-packages/jupyter-gap\n\nIssue created by migration from https://trac.sagemath.org/ticket/21416\n\n",
    "created_at": "2016-09-05T07:28:03Z",
    "labels": [
        "packages: optional",
        "major",
        "enhancement"
    ],
    "title": "Add jupyter_gap_wrapper package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21179",
    "user": "jdemeyer"
}
```
CC:  nthiery dimpase

This package provides a Jupyter kernel for GAP. See https://github.com/gap-packages/jupyter-gap

Issue created by migration from https://trac.sagemath.org/ticket/21416





---

archive/issue_comments_293521.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-02-13T14:42:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293521",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_293522.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2017-02-13T14:52:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293522",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_293523.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-02-13T14:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293523",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_293524.json:
```json
{
    "body": "I wonder why this cannot be a package of type `pip`.",
    "created_at": "2017-02-22T15:05:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293524",
    "user": "dimpase"
}
```

I wonder why this cannot be a package of type `pip`.



---

archive/issue_comments_293525.json:
```json
{
    "body": "Anyhow, this appears to work. I'll check this on OSX, too.",
    "created_at": "2017-02-22T16:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293525",
    "user": "dimpase"
}
```

Anyhow, this appears to work. I'll check this on OSX, too.



---

archive/issue_comments_293526.json:
```json
{
    "body": "for some reason, the log is very chatty (on OSX):\n\n```\n[IPKernelApp] ERROR | (u'json part: {\"result\" : {\"data\" : {\"text/html\" : \"Reference: <a target=\\\\\"_blank\\\\\" href=\\\\\"https://cloud.gap-system.org/doc/ref/chap40.html#X87677B0787B4461A\\\\\">AutomorphismGroup</a><br/>AutPGrp (not loaded): <a target=\\\\\"_blank\\\\\" href=\\\\\"https://cloud.gap-system.org/pkg/autpgrp/htm/CHAP002.htm\\\\\">AutomorphismGroup</a><br/>GUAVA (not loaded): <a target=\\\\\"_blank\\\\\" href=\\\\\"https://cloud.gap-system.org/pkg/guava-3.13/doc/chap4.html#X87677B0787B4461A\\\\\">AutomorphismGroup</a><br/>Reference: <a target=\\\\\"_blank\\\\\" href=\\\\\"https://cloud.gap-system.org/doc/ref/chap45.html#X7A19DF1E7E841074\\\\\">AutomorphismGroup for groups with pcgs</a><br/>AutPGrp (not loaded): <a target=\\\\\"_blank\\\\\" href=\\\\\"https://cloud.gap-system.org/pkg/autpgrp/htm/CHAP003.htm\\\\\">AutomorphismGroupPGroup</a><br/>HAP (not loaded): <a target=\\\\\"_blank\\\\\" href=\\\\\"https://cloud.gap-system.org/pkg/Hap1.11/doc/chap23.html#X7B54B8CA841C517B\\\\\">AutomorphismGroupAsCatOneGroup</a><br/>\"},\"source\" : \"gap\",\"json\" : true},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'rest part: ',)\n[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand(\"a := AutomorphismGroup(G); ;\");',)\n[IPKernelApp] ERROR | (u'reply {\"result\" : {\"name\" : \"stdout\",\"text\" : \"<group with 4 generators>\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'json part: {\"result\" : {\"name\" : \"stdout\",\"text\" : \"<group with 4 generators>\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'rest part: ',)\n[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand(\"SylowSubgroup(a,2); ;\");',)\n[IPKernelApp] ERROR | (u'reply {\"result\" : {\"name\" : \"stdout\",\"text\" : \"<group>\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'json part: {\"result\" : {\"name\" : \"stdout\",\"text\" : \"<group>\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'rest part: ',)\n[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand(\"s := SylowSubgroup(a,2); ;\");',)\n[IPKernelApp] ERROR | (u'reply {\"result\" : {\"name\" : \"stdout\",\"text\" : \"<group>\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'json part: {\"result\" : {\"name\" : \"stdout\",\"text\" : \"<group>\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'rest part: ',)\n[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand(\"Order(s); ;\");',)\n[IPKernelApp] ERROR | (u'reply {\"result\" : {\"name\" : \"stdout\",\"text\" : \"32\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'json part: {\"result\" : {\"name\" : \"stdout\",\"text\" : \"32\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'rest part: ',)\n[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand(\"IdGroup(s); ;\");',)\n[IPKernelApp] ERROR | (u'reply {\"result\" : {\"name\" : \"stdout\",\"text\" : \"[ 32, 43 ]\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'json part: {\"result\" : {\"name\" : \"stdout\",\"text\" : \"[ 32, 43 ]\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'rest part: ',)\n[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand(\"List(LowerCentralSeries(s), Order); ;\");',)\n[IPKernelApp] ERROR | (u'reply {\"result\" : {\"name\" : \"stdout\",\"text\" : \"[ 32, 4, 2, 1 ]\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'json part: {\"result\" : {\"name\" : \"stdout\",\"text\" : \"[ 32, 4, 2, 1 ]\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'rest part: ',)\n```\n\n\nit still all seems to work, but it's good to understand how harmless this is.",
    "created_at": "2017-02-23T10:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293526",
    "user": "dimpase"
}
```

for some reason, the log is very chatty (on OSX):

```
[IPKernelApp] ERROR | (u'json part: {"result" : {"data" : {"text/html" : "Reference: <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/doc/ref/chap40.html#X87677B0787B4461A\\">AutomorphismGroup</a><br/>AutPGrp (not loaded): <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/pkg/autpgrp/htm/CHAP002.htm\\">AutomorphismGroup</a><br/>GUAVA (not loaded): <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/pkg/guava-3.13/doc/chap4.html#X87677B0787B4461A\\">AutomorphismGroup</a><br/>Reference: <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/doc/ref/chap45.html#X7A19DF1E7E841074\\">AutomorphismGroup for groups with pcgs</a><br/>AutPGrp (not loaded): <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/pkg/autpgrp/htm/CHAP003.htm\\">AutomorphismGroupPGroup</a><br/>HAP (not loaded): <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/pkg/Hap1.11/doc/chap23.html#X7B54B8CA841C517B\\">AutomorphismGroupAsCatOneGroup</a><br/>"},"source" : "gap","json" : true},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("a := AutomorphismGroup(G); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "<group with 4 generators>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "<group with 4 generators>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("SylowSubgroup(a,2); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "<group>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "<group>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("s := SylowSubgroup(a,2); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "<group>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "<group>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("Order(s); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "32"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "32"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("IdGroup(s); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "[ 32, 43 ]"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "[ 32, 43 ]"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("List(LowerCentralSeries(s), Order); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "[ 32, 4, 2, 1 ]"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "[ 32, 4, 2, 1 ]"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
```


it still all seems to work, but it's good to understand how harmless this is.



---

archive/issue_comments_293527.json:
```json
{
    "body": "same picture on Linux; here I open a new jupyter notebook and evaluate `g:=SymmetricGroup(6);`\n\n\n```\n        http://localhost:8888/?token=301f73a3b3d0dc134012907a7430e55612e3049b811f07b2\n[19710:19710:0224/145625.946823:ERROR:child_thread_impl.cc(762)] Request for unknown Channel-associated interface: ui::mojom::GpuMain\nCreated new window in existing browser session.\n[I 14:56:29.795 NotebookApp] Accepting one-time-token-authenticated connection from ::1\n[I 14:56:36.234 NotebookApp] Creating new notebook in \n[I 14:56:36.760 NotebookApp] Kernel started: 17affbdf-63c3-49fa-ac3e-2e9dd3d2e64f\n[IPKernelApp] ERROR | ('starting GAP: gap',)\n[IPKernelApp] ERROR | UNKNOWN MESSAGE TYPE: u'comm_open'\n[IPKernelApp] ERROR | UNKNOWN MESSAGE TYPE: u'comm_open'\n[W 14:56:38.367 NotebookApp] 404 GET /static/components/codemirror/mode/gap/gap.js (::1) 9.64ms referer=http://localhost:8888/notebooks/Untitled1.ipynb?kernel_name=gap\n[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand(\"g:=SymmetricGroup(6); ;\");',)\n[IPKernelApp] ERROR | (u'reply {\"result\" : {\"name\" : \"stdout\",\"text\" : \"Sym( [ 1 .. 6 ] )\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'json part: {\"result\" : {\"name\" : \"stdout\",\"text\" : \"Sym( [ 1 .. 6 ] )\"},\"status\" : \"ok\"}',)\n[IPKernelApp] ERROR | (u'rest part: ',)\n```\n\n\nit looks as if json parsing is a problem here. Wrong json or wrong parser?",
    "created_at": "2017-02-24T15:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293527",
    "user": "dimpase"
}
```

same picture on Linux; here I open a new jupyter notebook and evaluate `g:=SymmetricGroup(6);`


```
        http://localhost:8888/?token=301f73a3b3d0dc134012907a7430e55612e3049b811f07b2
[19710:19710:0224/145625.946823:ERROR:child_thread_impl.cc(762)] Request for unknown Channel-associated interface: ui::mojom::GpuMain
Created new window in existing browser session.
[I 14:56:29.795 NotebookApp] Accepting one-time-token-authenticated connection from ::1
[I 14:56:36.234 NotebookApp] Creating new notebook in 
[I 14:56:36.760 NotebookApp] Kernel started: 17affbdf-63c3-49fa-ac3e-2e9dd3d2e64f
[IPKernelApp] ERROR | ('starting GAP: gap',)
[IPKernelApp] ERROR | UNKNOWN MESSAGE TYPE: u'comm_open'
[IPKernelApp] ERROR | UNKNOWN MESSAGE TYPE: u'comm_open'
[W 14:56:38.367 NotebookApp] 404 GET /static/components/codemirror/mode/gap/gap.js (::1) 9.64ms referer=http://localhost:8888/notebooks/Untitled1.ipynb?kernel_name=gap
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("g:=SymmetricGroup(6); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "Sym( [ 1 .. 6 ] )"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "Sym( [ 1 .. 6 ] )"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
```


it looks as if json parsing is a problem here. Wrong json or wrong parser?



---

archive/issue_comments_293528.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2017-02-24T15:17:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293528",
    "user": "dimpase"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_293529.json:
```json
{
    "body": "Upstream acknowledges bug but doesn't care...",
    "created_at": "2017-03-01T15:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293529",
    "user": "jdemeyer"
}
```

Upstream acknowledges bug but doesn't care...



---

archive/issue_comments_293530.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2017-03-01T15:24:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293530",
    "user": "jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_293531.json:
```json
{
    "body": "according to https://github.com/gap-packages/jupyter-kernel-gap/issues/36\nthis kernel is abandoned by upstream. Apparenly upstream has or is working on another way to hook GAP onto jupyter.",
    "created_at": "2017-04-27T17:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293531",
    "user": "dimpase"
}
```

according to https://github.com/gap-packages/jupyter-kernel-gap/issues/36
this kernel is abandoned by upstream. Apparenly upstream has or is working on another way to hook GAP onto jupyter.



---

archive/issue_comments_293532.json:
```json
{
    "body": "Replying to [comment:14 dimpase]:\n> according to https://github.com/gap-packages/jupyter-kernel-gap/issues/36\n> this kernel is abandoned by upstream.\n\nTrue, but I don't see why that means that we shouldn't merge it in Sage. There are several abandoned projects in Sage already, even as standard packages.",
    "created_at": "2017-04-27T19:30:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293532",
    "user": "jdemeyer"
}
```

Replying to [comment:14 dimpase]:
> according to https://github.com/gap-packages/jupyter-kernel-gap/issues/36
> this kernel is abandoned by upstream.

True, but I don't see why that means that we shouldn't merge it in Sage. There are several abandoned projects in Sage already, even as standard packages.



---

archive/issue_comments_293533.json:
```json
{
    "body": "+1. What would be bad would be to introduce the feature, and then later have to remove it because it does not work anymore. Here upstream is very motivated by the feature, and has gone a long way toward the newer implementation with libgap being planned for next GAP release.\n\nSo we can expect the new implementation to come along in the coming months. And for now the current implementation works and is useful.\n\nI'll double check with Markus that he is ok to expose the current implementation.",
    "created_at": "2017-04-28T08:02:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293533",
    "user": "nthiery"
}
```

+1. What would be bad would be to introduce the feature, and then later have to remove it because it does not work anymore. Here upstream is very motivated by the feature, and has gone a long way toward the newer implementation with libgap being planned for next GAP release.

So we can expect the new implementation to come along in the coming months. And for now the current implementation works and is useful.

I'll double check with Markus that he is ok to expose the current implementation.



---

archive/issue_comments_293534.json:
```json
{
    "body": "Markus's answer: absolutely, its available, it should be used. I'm not keen to spend a lot of time on maintenance, since I'd rather get the new kernel to work.",
    "created_at": "2017-04-28T10:19:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293534",
    "user": "nthiery"
}
```

Markus's answer: absolutely, its available, it should be used. I'm not keen to spend a lot of time on maintenance, since I'd rather get the new kernel to work.



---

archive/issue_comments_293535.json:
```json
{
    "body": "So please review this ticket then :-)",
    "created_at": "2017-04-28T10:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293535",
    "user": "jdemeyer"
}
```

So please review this ticket then :-)



---

archive/issue_comments_293536.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-04-28T10:28:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293536",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_293537.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-04-29T23:30:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293537",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_293538.json:
```json
{
    "body": "Instruction of how to install the optional package:\n\n```\nsage -i gap_jupyter\n```\n",
    "created_at": "2018-01-26T22:01:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21179",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21179#issuecomment-293538",
    "user": "slelievre"
}
```

Instruction of how to install the optional package:

```
sage -i gap_jupyter
```

