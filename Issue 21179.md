# Issue 21179: Add jupyter_gap_wrapper package

Issue created by migration from https://trac.sagemath.org/ticket/21416

Original creator: jdemeyer

Original creation time: 2016-09-05 07:28:03

CC:  nthiery dimpase

This package provides a Jupyter kernel for GAP. See https://github.com/gap-packages/jupyter-gap


---

Comment by jdemeyer created at 2017-02-13 14:42:33

New commits:


---

Comment by git created at 2017-02-13 14:52:16

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by jdemeyer created at 2017-02-13 14:52:33

Changing status from new to needs_review.


---

Comment by dimpase created at 2017-02-22 15:05:00

I wonder why this cannot be a package of type `pip`.


---

Comment by dimpase created at 2017-02-22 16:00:13

Anyhow, this appears to work. I'll check this on OSX, too.


---

Comment by dimpase created at 2017-02-23 10:53:58

for some reason, the log is very chatty (on OSX):

```
[IPKernelApp] ERROR | (u'json part: {"result" : {"data" : {"text/html" : "Reference: <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/doc/ref/chap40.html#X87677B0787B4461A\\">AutomorphismGroup</a><br/>AutPGrp (not loaded): <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/pkg/autpgrp/htm/CHAP002.htm\\">AutomorphismGroup</a><br/>GUAVA (not loaded): <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/pkg/guava-3.13/doc/chap4.html#X87677B0787B4461A\\">AutomorphismGroup</a><br/>Reference: <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/doc/ref/chap45.html#X7A19DF1E7E841074\\">AutomorphismGroup for groups with pcgs</a><br/>AutPGrp (not loaded): <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/pkg/autpgrp/htm/CHAP003.htm\\">AutomorphismGroupPGroup</a><br/>HAP (not loaded): <a target=\\"_blank\\" href=\\"https://cloud.gap-system.org/pkg/Hap1.11/doc/chap23.html#X7B54B8CA841C517B\\">AutomorphismGroupAsCatOneGroup</a><br/>"},"source" : "gap","json" : true},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("a := AutomorphismGroup(G); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "<group with 4 generators>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "<group with 4 generators>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("SylowSubgroup(a,2); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "<group>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "<group>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("s := SylowSubgroup(a,2); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "<group>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "<group>"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("Order(s); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "32"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "32"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("IdGroup(s); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "[ 32, 43 ]"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "[ 32, 43 ]"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("List(LowerCentralSeries(s), Order); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "[ 32, 4, 2, 1 ]"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "[ 32, 4, 2, 1 ]"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
```


it still all seems to work, but it's good to understand how harmless this is.


---

Comment by dimpase created at 2017-02-24 15:17:15

same picture on Linux; here I open a new jupyter notebook and evaluate `g:=SymmetricGroup(6);`


```
        http://localhost:8888/?token=301f73a3b3d0dc134012907a7430e55612e3049b811f07b2
[19710:19710:0224/145625.946823:ERROR:child_thread_impl.cc(762)] Request for unknown Channel-associated interface: ui::mojom::GpuMain
Created new window in existing browser session.
[I 14:56:29.795 NotebookApp] Accepting one-time-token-authenticated connection from ::1
[I 14:56:36.234 NotebookApp] Creating new notebook in 
[I 14:56:36.760 NotebookApp] Kernel started: 17affbdf-63c3-49fa-ac3e-2e9dd3d2e64f
[IPKernelApp] ERROR | ('starting GAP: gap',)
[IPKernelApp] ERROR | UNKNOWN MESSAGE TYPE: u'comm_open'
[IPKernelApp] ERROR | UNKNOWN MESSAGE TYPE: u'comm_open'
[W 14:56:38.367 NotebookApp] 404 GET /static/components/codemirror/mode/gap/gap.js (::1) 9.64ms referer=http://localhost:8888/notebooks/Untitled1.ipynb?kernel_name=gap
[IPKernelApp] ERROR | (u'command JUPYTER_RunCommand("g:=SymmetricGroup(6); ;");',)
[IPKernelApp] ERROR | (u'reply {"result" : {"name" : "stdout","text" : "Sym( [ 1 .. 6 ] )"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'json part: {"result" : {"name" : "stdout","text" : "Sym( [ 1 .. 6 ] )"},"status" : "ok"}',)
[IPKernelApp] ERROR | (u'rest part: ',)
```


it looks as if json parsing is a problem here. Wrong json or wrong parser?


---

Comment by dimpase created at 2017-02-24 15:17:15

Changing status from needs_review to needs_info.


---

Comment by jdemeyer created at 2017-03-01 15:24:40

Upstream acknowledges bug but doesn't care...


---

Comment by jdemeyer created at 2017-03-01 15:24:40

Changing status from needs_info to needs_review.


---

Comment by dimpase created at 2017-04-27 17:40:46

according to https://github.com/gap-packages/jupyter-kernel-gap/issues/36
this kernel is abandoned by upstream. Apparenly upstream has or is working on another way to hook GAP onto jupyter.


---

Comment by jdemeyer created at 2017-04-27 19:30:57

Replying to [comment:14 dimpase]:
> according to https://github.com/gap-packages/jupyter-kernel-gap/issues/36
> this kernel is abandoned by upstream.

True, but I don't see why that means that we shouldn't merge it in Sage. There are several abandoned projects in Sage already, even as standard packages.


---

Comment by nthiery created at 2017-04-28 08:02:35

+1. What would be bad would be to introduce the feature, and then later have to remove it because it does not work anymore. Here upstream is very motivated by the feature, and has gone a long way toward the newer implementation with libgap being planned for next GAP release.

So we can expect the new implementation to come along in the coming months. And for now the current implementation works and is useful.

I'll double check with Markus that he is ok to expose the current implementation.


---

Comment by nthiery created at 2017-04-28 10:19:19

Markus's answer: absolutely, its available, it should be used. I'm not keen to spend a lot of time on maintenance, since I'd rather get the new kernel to work.


---

Comment by jdemeyer created at 2017-04-28 10:21:07

So please review this ticket then :-)


---

Comment by dimpase created at 2017-04-28 10:28:23

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-04-29 23:30:12

Resolution: fixed


---

Comment by slelievre created at 2018-01-26 22:01:25

Instruction of how to install the optional package:

```
sage -i gap_jupyter
```

