# Issue 18561: Jucys-Murphy Elements for Brauer Algebra

archive/issues_018561.json:
```json
{
    "body": "CC:  @alauve @srdoty @saliola @tscrim\n\nKeywords: days65, partition algebra, diagram algebra, jucys-murphy\n\nNazarov's 1996 paper titled \"Young's Orthogonal Form for Brauer's Centralizer Algebra,\" outlines a form for the Jucys-Murphy elements that are analogous to the JM elements for the symmetric group algebra. Implementing these into Sage would require a few lines of code but would prove very useful for work done with the Brauer algebra.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18798\n\n",
    "created_at": "2015-06-26T18:14:58Z",
    "labels": [
        "PLEASE CHANGE",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.10",
    "title": "Jucys-Murphy Elements for Brauer Algebra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18561",
    "user": "@ghseeli"
}
```
CC:  @alauve @srdoty @saliola @tscrim

Keywords: days65, partition algebra, diagram algebra, jucys-murphy

Nazarov's 1996 paper titled "Young's Orthogonal Form for Brauer's Centralizer Algebra," outlines a form for the Jucys-Murphy elements that are analogous to the JM elements for the symmetric group algebra. Implementing these into Sage would require a few lines of code but would prove very useful for work done with the Brauer algebra.

Issue created by migration from https://trac.sagemath.org/ticket/18798





---

archive/issue_comments_252446.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to algebra.",
    "created_at": "2015-06-26T18:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252446",
    "user": "@ghseeli"
}
```

Changing component from PLEASE CHANGE to algebra.



---

archive/issue_comments_252447.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-07-23T01:34:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252447",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252448.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2015-10-15T00:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252448",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_252449.json:
```json
{
    "body": "Sorry, this git history is hard to read! The only change this ticket should include over 18762 is the `jucys_murphy` method within the `BrauerAlgebra` class.",
    "created_at": "2015-10-15T00:19:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252449",
    "user": "@ghseeli"
}
```

Sorry, this git history is hard to read! The only change this ticket should include over 18762 is the `jucys_murphy` method within the `BrauerAlgebra` class.



---

archive/issue_comments_252450.json:
```json
{
    "body": "Is this ready for review? A few things from a quick lookover: Make the reference key `[N]` longer to avoid potential conflicts and docstrings should be declarative (so it will start with `Return`).",
    "created_at": "2015-10-15T04:02:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252450",
    "user": "@tscrim"
}
```

Is this ready for review? A few things from a quick lookover: Make the reference key `[N]` longer to avoid potential conflicts and docstrings should be declarative (so it will start with `Return`).



---

archive/issue_comments_252451.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-16T00:40:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252451",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252452.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-10-16T00:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252452",
    "user": "@ghseeli"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_252453.json:
```json
{
    "body": "Yeah, this is ready for review. Thank you for the suggestions thus far!",
    "created_at": "2015-10-16T00:41:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252453",
    "user": "@ghseeli"
}
```

Yeah, this is ready for review. Thank you for the suggestions thus far!



---

archive/issue_comments_252454.json:
```json
{
    "body": "A couple of suggestions:\n\n```diff\n     def jucys_murphy(self, j):\n         r\"\"\"\n-        Return a generalized Jucys-Murphy elements for the Brauer algebra.\n-        These are outlined in [Naz]_.\n+        Return the ``j``-th generalized Jucys-Murphy element of ``self``.\n \n+        Could you give a more detailed description of how the elements are defined?\n+\n         REFERENCES:\n \n         .. [Naz] Maxim Nazarov, Young's Orthogonal Form for Brauer's Centralizer\n-               Algebra. Journal of Algebra 182 (1996), 664--693.\n+           Algebra. Journal of Algebra 182 (1996), 664--693.\n \n         EXAMPLES:\n \n             sage: z = var('z')\n             sage: B = BrauerAlgebra(3,z)\n             sage: B.jucys_murphy(1)\n             1/2*z - 1/2\n             sage: B.jucys_murphy(3)\n-            -B{{-3, -2}, {-1, 1}, {2, 3}} - B{{-3, -1}, {-2, 2}, {1, 3}} + B{{-3, 1}, {-2, 2}, {-1, 3}} + B{{-3, 2}, {-2, 3}, {-1, 1}} + (1/2*z-1/2)*B{{-3, 3}, {-2, 2}, {-1, 1}}\n+            -B{{-3, -2}, {-1, 1}, {2, 3}} - B{{-3, -1}, {-2, 2}, {1, 3}}\n+            + B{{-3, 1}, {-2, 2}, {-1, 3}} + B{{-3, 2}, {-2, 3}, {-1, 1}}\n+            + (1/2*z-1/2)*B{{-3, 3}, {-2, 2}, {-1, 1}}\n         \"\"\"\n-        B = self\n-        return (B._q-1)/2 + sum(B([[i,-j],[j,-i]]) - B([[i,j],[-i,-j]]) for i in range(1,j))\n+        I = self._indices\n+        one = self.base_ring().one()\n+        return ((self._q-1)/2\n+                + self._from_dict({I([[i,-j],[j,-i]]): one for i in range(1,j)}, remove_zeros=False)\n+                - self._from_dict({I([[i,j],[-i,-j]]): one for i in range(1,j)}, remove_zeros=False))\n```\n\nDo you think we should also make this a cached method? What about when `j > n`, what happens then (or is it even defined)?",
    "created_at": "2015-10-16T19:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252454",
    "user": "@tscrim"
}
```

A couple of suggestions:

```diff
     def jucys_murphy(self, j):
         r"""
-        Return a generalized Jucys-Murphy elements for the Brauer algebra.
-        These are outlined in [Naz]_.
+        Return the ``j``-th generalized Jucys-Murphy element of ``self``.
 
+        Could you give a more detailed description of how the elements are defined?
+
         REFERENCES:
 
         .. [Naz] Maxim Nazarov, Young's Orthogonal Form for Brauer's Centralizer
-               Algebra. Journal of Algebra 182 (1996), 664--693.
+           Algebra. Journal of Algebra 182 (1996), 664--693.
 
         EXAMPLES:
 
             sage: z = var('z')
             sage: B = BrauerAlgebra(3,z)
             sage: B.jucys_murphy(1)
             1/2*z - 1/2
             sage: B.jucys_murphy(3)
-            -B{{-3, -2}, {-1, 1}, {2, 3}} - B{{-3, -1}, {-2, 2}, {1, 3}} + B{{-3, 1}, {-2, 2}, {-1, 3}} + B{{-3, 2}, {-2, 3}, {-1, 1}} + (1/2*z-1/2)*B{{-3, 3}, {-2, 2}, {-1, 1}}
+            -B{{-3, -2}, {-1, 1}, {2, 3}} - B{{-3, -1}, {-2, 2}, {1, 3}}
+            + B{{-3, 1}, {-2, 2}, {-1, 3}} + B{{-3, 2}, {-2, 3}, {-1, 1}}
+            + (1/2*z-1/2)*B{{-3, 3}, {-2, 2}, {-1, 1}}
         """
-        B = self
-        return (B._q-1)/2 + sum(B([[i,-j],[j,-i]]) - B([[i,j],[-i,-j]]) for i in range(1,j))
+        I = self._indices
+        one = self.base_ring().one()
+        return ((self._q-1)/2
+                + self._from_dict({I([[i,-j],[j,-i]]): one for i in range(1,j)}, remove_zeros=False)
+                - self._from_dict({I([[i,j],[-i,-j]]): one for i in range(1,j)}, remove_zeros=False))
```

Do you think we should also make this a cached method? What about when `j > n`, what happens then (or is it even defined)?



---

archive/issue_comments_252455.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-10-17T19:00:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252455",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_252456.json:
```json
{
    "body": "Alright, I added a small explanation to the docstring, and also took into account the one element of base ring. However, the problem with your `_from_dict` rewrite is that it does not pass the doctests. This is because when you call the element constructor, it \"fills in\" information you don't give it, but the `BrauerDiagram` class does not do this. Is there a reason to prefer using the `_from_dict` approach? Finally, I believe it probably could be a cached method, although it also isn't a terribly intense computation.",
    "created_at": "2015-10-17T19:05:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252456",
    "user": "@ghseeli"
}
```

Alright, I added a small explanation to the docstring, and also took into account the one element of base ring. However, the problem with your `_from_dict` rewrite is that it does not pass the doctests. This is because when you call the element constructor, it "fills in" information you don't give it, but the `BrauerDiagram` class does not do this. Is there a reason to prefer using the `_from_dict` approach? Finally, I believe it probably could be a cached method, although it also isn't a terribly intense computation.



---

archive/issue_comments_252457.json:
```json
{
    "body": "I made some minor tweaks to the documentation. The reason why I use the `_from_dict` to avoid the coercion framework, and it has a two-fold advantage of being faster and not invoking the coercion framework (which has in the past led to annoying consequences). My changes also fix a bug that the first Jucys-Murphy element was not in the Brauer algebra. If you're happy with my changes, then you can set a positive review.\n----\nNew commits:",
    "created_at": "2015-10-17T21:27:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252457",
    "user": "@tscrim"
}
```

I made some minor tweaks to the documentation. The reason why I use the `_from_dict` to avoid the coercion framework, and it has a two-fold advantage of being faster and not invoking the coercion framework (which has in the past led to annoying consequences). My changes also fix a bug that the first Jucys-Murphy element was not in the Brauer algebra. If you're happy with my changes, then you can set a positive review.
----
New commits:



---

archive/issue_comments_252458.json:
```json
{
    "body": "Alright. I am satisfied with these changes. Good catch on the first element!",
    "created_at": "2015-10-18T20:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252458",
    "user": "@ghseeli"
}
```

Alright. I am satisfied with these changes. Good catch on the first element!



---

archive/issue_comments_252459.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-10-18T20:15:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252459",
    "user": "@ghseeli"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_252460.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-10-20T22:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18561",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18561#issuecomment-252460",
    "user": "@vbraun"
}
```

Resolution: fixed
