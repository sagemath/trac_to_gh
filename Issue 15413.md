# Issue 15413: Permutations and symmetric group algebra: getting rid of 'mult' global in seminormal form

Issue created by migration from Trac.

Original creator: darij

Original creation time: 2014-01-09 02:53:22

CC:  andrew.mathas mhansen tscrim sage-combinat

Keywords: permutation, sage-combinat, descent algebra, symmetric group, seminormal form

This is a sequel to #15174. The purpose of this ticket is to get rid of all uses of the `PermutationOptions['mult']` global variable which determines how the product of two permutations is defined. Getting rid of the variable itself (#14885) will be tougher.

Specifically, my branch does the following:

- All methods related to the seminormal form in `sage/combinat/symmetric_group_algebra.py` now no longer rely on `PermutationOptions['mult']`. Instead, the ones among them that used to have their result depend on `'mult'` now take an optional keyword `'mult'` (defaulting to `l2r`, not to the global setting -- not sure if this is good?).

- The exposed seminormal-form methods now are documented. The documentation might look weird and might also be wrong at times, since my acquaintance with the seminormal form is half a day old (sorry, Andrew, for procrastinating on this!!) and since the methods were obviously written with British multiplication in mind (`pq` = first `p` then `q`) whereas I'm using continental multiplication (`pq` = first `q` then `p`). I hope someone experienced can review this, because I'm not actually sure I made anything better...

- Descent algebra documentation has been corrected at a few points. The errors were my own and were due to me not knowing that Sage uses British multiplication. (Ceterum censeo, the continental convention is still the right one.)

- A few minor speedups and doc improvements on the permutation code.


---

Comment by darij created at 2014-01-09 02:54:57

Changing status from new to needs_review.


---

Comment by git created at 2014-01-24 17:40:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2014-01-24 17:41:43

I've pushed some more changes, correcting my own doc and adding three retract maps to lower symmetric groups (I am experimenting around with them myself).


---

Comment by git created at 2014-02-21 23:47:09

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-02-21 23:51:19

I've made some more tweaks which should be faster for larger `n`, and as well as standardized-ish (well...made into my standard) the references in `permutation.py`. I can't comment about the accuracy of the seminormal doc, but from my (quick) read-over it looks good. So up to that and my changes, it's a positive review from me.


---

Comment by git created at 2014-02-22 00:42:57

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2014-02-22 00:44:24

Ooops, there seems to be something wrong with my understanding of git. Manual override in progress.

Meanwhile, `@`Travis: thanks for your fixes; these are all good.


---

Comment by darij created at 2014-02-22 00:50:59

EDIT: oops, these commits here should really be removed.

Anyway, what remains to be done here is a review of the changes pertaining to the seminormal form, and of my latest commit (cc05d00).


---

Comment by git created at 2014-02-22 00:55:05

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by darij created at 2014-02-22 00:56:14

push --force complete, the branch should be sane now. Sorry for the mess.


---

Comment by git created at 2014-03-03 23:13:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2014-03-03 23:15:36

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2014-03-03 23:17:32

Looks good to me from the reference I found (modulo the added warning). I made some other minor tweaks, so if you're happy with my changes, then its positive review.

....unless, Andrew, we made a mistake in the seminormal doc....


---

Comment by darij created at 2014-03-03 23:27:28

If you could please replace `\delta_{TV}` by `\delta_{T,V}` both times, I'd be happy (=pos_rev). (I don't want to do this right now because I'm make-docing on a different branch.)

Thanks a lot for the review! Looks like we're mostly done with the permutation order then.

Wow, did I really call the group algebra of S_5 "SGA5"? Lol, that wasn't even intended.


---

Comment by andrew.mathas created at 2014-03-03 23:44:09

Replying to [comment:15 darij]:
> If you could please replace `\delta_{TV}` by `\delta_{T,V}` both times, I'd be happy (=pos_rev). (I don't want to do this right now because I'm make-docing on a different branch.)
> 
> Thanks a lot for the review! Looks like we're mostly done with the permutation order then.
> 
> Wow, did I really call the group algebra of S_5 "SGA5"? Lol, that wasn't even intended.

I prefer `\delta_{TV}` myself:)

I just pulled up the documentation on seminormal representations. It doesn't seem to say very much. What did you want me to check?

Andrew


---

Comment by git created at 2014-03-04 03:29:49

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2014-03-04 03:32:15

I've just made my change and a couple more (all cosmetic). I don't like notations which break if some variables are more than a character long...

If you could check whether the way the seminormal-basis-related methods currently are effected by the `mult` variable is sane (in particular, has anything to do with the way this is done in literature), I'd be very thankful. I'm leaving the patch as needs-review for this reason; if you have no comment, I'll make it positive-review. Thanks a lot!


---

Comment by git created at 2014-03-14 14:36:50

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2014-03-31 03:28:51

Any comments, Andrew?


---

Comment by andrew.mathas created at 2014-04-01 00:23:46

`@`darij Sorry, I haven't looked at this (or your query on MO), and I doubt that I will have time to do this any time soon. 

I just tried reading quickly through the latest patch but I didn't see anything related to how the `mult` variable interacts with the seminormal form. All I noticed was the unusual choice of reference:) My guess is that if I looked at this code properly then I'd probably want to rewrite it from scratch as I seem to remember that the seminormal form code in sage is far more computationally intensive than it needs to be (working with the seminormal form is very different from working with the primitive idempotents whereas last time I looked at this code it confused these two problems). 

If everyone else is happy with the changes then I suggest you just give it a positive review rather than waiting for me to have time to look at it properly.


---

Comment by tscrim created at 2014-04-01 00:41:58

Well, the seminormal basis probably should be implemented as a proper parent class anyways. So on the basis of your comment, I'm going to give this a positive review. Thanks Andrew.


---

Comment by tscrim created at 2014-04-01 00:41:58

Changing status from needs_review to positive_review.


---

Comment by git created at 2014-04-01 00:53:55

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2014-04-01 00:53:55

Changing status from positive_review to needs_review.


---

Comment by darij created at 2014-04-01 00:54:09

Oops, I just started fixing the doc. Anyway, Travis, can you look at the last couple edits? I hope the doctests will come handy when the method is improved. Thanks a lot!

Andrew, do you think the YJM element formulae provide a quicker way to the seminormals? I could implement those right away.

EDIT: Travis: why as its own class?


---

Comment by andrew.mathas created at 2014-04-01 02:37:40

Hi Darij,

To work with the seminormal form you don't need to compute the idempotents at all. Rather you just need a basis `{ v_t }` together with an implementation of the action

```
s_r v_t = 1/\rho_r(t)v_t + (1+\rho_r(t))/\rho_r(t) v_{s_r t},
```

where `\pho_r(t)=c_{r+1}(t)-c_r(t)` is the axial distance from `r` to `r+1` inside the tableau `t`. Here I use the convention that `v_{s_r t}=0` if `s_rt` is not standard.

Of course, there are many other equivalent ways to write down the seminormal form, but this is my favourite version because it is very symmetric and it is defined over the rationals.

The action of the idempotents on this basis of the semisimple Specht is easy: 
`F_s v_t=\delta_[st} v_t`
This follows because `L_r v_t = c_r(t)v_t`, for all `r`. 

It is only when you need to work with the idempotents `F_t`, given explicitly as elements of the group algebra, that you ever need to use these formulas.

Andrew


---

Comment by darij created at 2014-04-01 02:39:28

Oh! But I meant the seminormal form for the group algebra. What you're talking is the seminormal form for its representations. IIRC Tom Denton was working on the latter when I was in Toronto two weeks ago; you might want to talk to him.


---

Comment by tscrim created at 2014-04-01 18:03:19

Hey Darij,

Your changes LGTM.

We'd want it's own class so it can be a proper parent. Thus we could do coercions and multiplications with that basis. Think like how Sym works, but perhaps we wouldn't use the multiple realizations framework since there is a natural basis (IMO, but I'm not anywhere close an expert in this field).

Perhaps we should open up a follow-up ticket which does that, and follow Andrew's favorite construction?

To both, do you think there is any more work to be done here?


---

Comment by darij created at 2014-04-01 20:09:02

Changing status from needs_review to positive_review.


---

Comment by darij created at 2014-04-01 20:09:51

Thank you a lot, Travis!

I guess there are now two things to do:

- a parent for the seminormal basis of QSn, and

- an implementation of the seminormal basis of a single QSn-module.

We might want to open two separate tickets... (Tom Denton should be cc'ed on the second.)


---

Comment by vbraun created at 2014-04-01 23:53:51

Changing status from positive_review to needs_work.


---

Comment by vbraun created at 2014-04-01 23:53:51

Documentation doesn't build


---

Comment by git created at 2014-04-02 00:12:37

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by darij created at 2014-04-02 00:13:15

A reference had a hyphen instead of a dash; sorry for that. Fixed!


---

Comment by darij created at 2014-04-02 00:13:15

Changing status from needs_work to positive_review.


---

Comment by git created at 2014-04-02 00:14:40

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by git created at 2014-04-02 00:14:40

Changing status from positive_review to needs_review.


---

Comment by darij created at 2014-04-02 00:14:55

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2014-04-04 15:55:33

Resolution: fixed
