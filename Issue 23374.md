# Issue 23374: Fix coercion in polynomial division

Issue created by migration from https://trac.sagemath.org/ticket/23611

Original creator: jdemeyer

Original creation time: 2017-08-11 14:58:51

CC:  tscrim


```
sage: R.<x> = QQ[]
sage: int(1)/x
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-2-a6961ce87e39> in <module>()
----> 1 int(Integer(1))/x

/usr/local/src/sage-git/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__div__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23814)()
   2101 
   2102     def __div__(self, other):
-> 2103         return PyNumber_TrueDivide(self, other)
   2104 
   2105     def __pow__(self, right, modulus):

/usr/local/src/sage-git/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial.__truediv__ (build/cythonized/sage/rings/polynomial/polynomial_element.c:23465)()
   2092         """
   2093         try:
-> 2094             if not isinstance(right, Element) or right.parent() != self.parent():
   2095                 R = self.parent().base_ring()
   2096                 x = R._coerce_(right)

AttributeError: 'int' object has no attribute 'parent'
```



---

Comment by tscrim created at 2017-08-11 15:07:42

I can review this when it is ready. (Addendum, I am assuming you are working on a fix since you put your name as the author.)


---

Comment by jdemeyer created at 2017-08-11 16:01:11

New commits:


---

Comment by jdemeyer created at 2017-08-11 16:01:11

Changing status from new to needs_review.


---

Comment by tscrim created at 2017-08-12 02:40:35

LGTM. This also nets about a 5-10% speedup when doing division involving a (univariate) polynomial in all of the examples I tried too.


---

Comment by tscrim created at 2017-08-12 02:40:35

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-08-13 09:44:55

Resolution: fixed
