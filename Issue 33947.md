# Issue 33947: from_lehmer_cocode

Issue created by migration from https://trac.sagemath.org/ticket/34184

Original creator: nadialafreniere

Original creation time: 2022-07-14 17:46:06

CC:  â€‹jessicapalencia tscrim mantepse

Keywords: permutations

New feature to make it possible to get a permutation from its Lehmer cocode. A function to get the Lehmer cocode of a given permutation already exists.


---

Comment by jessicapalencia created at 2022-08-04 18:20:10

Looks good. You could add the following code that exists in the from_lehmer_code function to take care of the case where it's an empty permutation:

    if parent is None:
        parent = Permutations()
    return parent(p)

After you add that, you could move the status to 'needs review' and someone could review it. (I don't have a working development version of Sage at the moment, so I can't do a full review.)


---

Comment by nadialafreniere created at 2022-08-04 18:39:14

Thanks, Jessica, for looking at it!
I think that what you suggested is taken into account by the input of the function. In `from_lehmer_code`, the default for the parent is `None`, whereas I set the default for the parent to be `Permutations()` here. Isn't that doing the same?


---

Comment by jessicapalencia created at 2022-08-04 19:56:41

Changing status from new to needs_review.


---

Comment by jessicapalencia created at 2022-08-04 19:56:41

I didn't see that. Yes, then I think the function looks good as-is. I'll set it to 'needs review'.


---

Comment by tscrim created at 2022-08-08 06:26:55

I don't think you should assume that `lehmer` is a list. So I would replace

```diff
-    lehmer.reverse()
-    open_spots = list(range(1,len(lehmer)+1))
-    for ivi in lehmer:
-        p.append(open_spots.pop(len(lehmer)-i-ivi))
+    ell = len(lehmer)
+    open_spots = list(range(1,ell+1))
+    for ivi in reversed(lehmer):
+        p.append(open_spots.pop(ell-i-ivi))
         i += 1
```

(You could also limit the subtractions by doing `i = ell` and `i -= 1` instead.)


---

Comment by git created at 2022-08-09 15:05:13

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-10-21 18:39:57

so, good to go, maybe ? Travis, do you agree ?


---

Comment by tscrim created at 2022-10-22 06:41:48

Yes. Sorry for not noticing the update; I didn't get an email when the push was done.


---

Comment by tscrim created at 2022-10-22 06:41:48

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-10-30 10:31:01

Resolution: fixed
