# Issue 33947: from_lehmer_cocode

archive/issues_033947.json:
```json
{
    "body": "CC:  @jessicapalencia @tscrim @mantepse\n\nKeywords: permutations\n\nNew feature to make it possible to get a permutation from its Lehmer cocode. A function to get the Lehmer cocode of a given permutation already exists.\n\nIssue created by migration from https://trac.sagemath.org/ticket/34184\n\n",
    "created_at": "2022-07-14T17:46:06Z",
    "labels": [
        "combinatorics",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "from_lehmer_cocode",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/33947",
    "user": "@nadialafreniere"
}
```
CC:  @jessicapalencia @tscrim @mantepse

Keywords: permutations

New feature to make it possible to get a permutation from its Lehmer cocode. A function to get the Lehmer cocode of a given permutation already exists.

Issue created by migration from https://trac.sagemath.org/ticket/34184





---

archive/issue_comments_482057.json:
```json
{
    "body": "Looks good. You could add the following code that exists in the from_lehmer_code function to take care of the case where it's an empty permutation:\n\n    if parent is None:\n        parent = Permutations()\n    return parent(p)\n\nAfter you add that, you could move the status to 'needs review' and someone could review it. (I don't have a working development version of Sage at the moment, so I can't do a full review.)",
    "created_at": "2022-08-04T18:20:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482057",
    "user": "@jessicapalencia"
}
```

Looks good. You could add the following code that exists in the from_lehmer_code function to take care of the case where it's an empty permutation:

    if parent is None:
        parent = Permutations()
    return parent(p)

After you add that, you could move the status to 'needs review' and someone could review it. (I don't have a working development version of Sage at the moment, so I can't do a full review.)



---

archive/issue_comments_482058.json:
```json
{
    "body": "Thanks, Jessica, for looking at it!\nI think that what you suggested is taken into account by the input of the function. In `from_lehmer_code`, the default for the parent is `None`, whereas I set the default for the parent to be `Permutations()` here. Isn't that doing the same?",
    "created_at": "2022-08-04T18:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482058",
    "user": "@nadialafreniere"
}
```

Thanks, Jessica, for looking at it!
I think that what you suggested is taken into account by the input of the function. In `from_lehmer_code`, the default for the parent is `None`, whereas I set the default for the parent to be `Permutations()` here. Isn't that doing the same?



---

archive/issue_comments_482059.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-08-04T19:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482059",
    "user": "@jessicapalencia"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_482060.json:
```json
{
    "body": "I didn't see that. Yes, then I think the function looks good as-is. I'll set it to 'needs review'.",
    "created_at": "2022-08-04T19:56:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482060",
    "user": "@jessicapalencia"
}
```

I didn't see that. Yes, then I think the function looks good as-is. I'll set it to 'needs review'.



---

archive/issue_comments_482061.json:
```json
{
    "body": "I don't think you should assume that `lehmer` is a list. So I would replace\n\n```diff\n-    lehmer.reverse()\n-    open_spots = list(range(1,len(lehmer)+1))\n-    for ivi in lehmer:\n-        p.append(open_spots.pop(len(lehmer)-i-ivi))\n+    ell = len(lehmer)\n+    open_spots = list(range(1,ell+1))\n+    for ivi in reversed(lehmer):\n+        p.append(open_spots.pop(ell-i-ivi))\n         i += 1\n```\n\n(You could also limit the subtractions by doing `i = ell` and `i -= 1` instead.)",
    "created_at": "2022-08-08T06:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482061",
    "user": "@tscrim"
}
```

I don't think you should assume that `lehmer` is a list. So I would replace

```diff
-    lehmer.reverse()
-    open_spots = list(range(1,len(lehmer)+1))
-    for ivi in lehmer:
-        p.append(open_spots.pop(len(lehmer)-i-ivi))
+    ell = len(lehmer)
+    open_spots = list(range(1,ell+1))
+    for ivi in reversed(lehmer):
+        p.append(open_spots.pop(ell-i-ivi))
         i += 1
```

(You could also limit the subtractions by doing `i = ell` and `i -= 1` instead.)



---

archive/issue_comments_482062.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-08-09T15:05:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482062",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_482063.json:
```json
{
    "body": "so, good to go, maybe ? Travis, do you agree ?",
    "created_at": "2022-10-21T18:39:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482063",
    "user": "@fchapoton"
}
```

so, good to go, maybe ? Travis, do you agree ?



---

archive/issue_comments_482064.json:
```json
{
    "body": "Yes. Sorry for not noticing the update; I didn't get an email when the push was done.",
    "created_at": "2022-10-22T06:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482064",
    "user": "@tscrim"
}
```

Yes. Sorry for not noticing the update; I didn't get an email when the push was done.



---

archive/issue_comments_482065.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-10-22T06:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482065",
    "user": "@tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_482066.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2022-10-30T10:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/33947",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/33947#issuecomment-482066",
    "user": "@vbraun"
}
```

Resolution: fixed
