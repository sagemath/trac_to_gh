# Issue 13280: Refactor sage-location

archive/issues_013280.json:
```json
{
    "body": "Assignee: tdb\n\nSome various clean-up of `sage-location`.\n\nIssue created by migration from https://trac.sagemath.org/ticket/13452\n\n",
    "created_at": "2012-09-12T15:28:38Z",
    "labels": [
        "relocation",
        "major",
        "enhancement"
    ],
    "title": "Refactor sage-location",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/13280",
    "user": "jdemeyer"
}
```
Assignee: tdb

Some various clean-up of `sage-location`.

Issue created by migration from https://trac.sagemath.org/ticket/13452





---

archive/issue_comments_163028.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2012-09-16T17:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163028",
    "user": "jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_163029.json:
```json
{
    "body": "According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`. Since you are already touching those lines, do you think we could set the `location_file` to `SAGE_LOCAL/var/lib/sage/current-location.txt` (and similarly for `cflags_file`)?",
    "created_at": "2012-09-16T21:04:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163029",
    "user": "ohanar"
}
```

According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`. Since you are already touching those lines, do you think we could set the `location_file` to `SAGE_LOCAL/var/lib/sage/current-location.txt` (and similarly for `cflags_file`)?



---

archive/issue_comments_163030.json:
```json
{
    "body": "Replying to [comment:6 ohanar]:\n> According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`. Since you are already touching those lines, do you think we could set the `location_file` to `SAGE_LOCAL/var/lib/sage/current-location.txt` (and similarly for `cflags_file`)?\n\nNot on this ticket.",
    "created_at": "2012-09-16T21:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163030",
    "user": "jdemeyer"
}
```

Replying to [comment:6 ohanar]:
> According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`. Since you are already touching those lines, do you think we could set the `location_file` to `SAGE_LOCAL/var/lib/sage/current-location.txt` (and similarly for `cflags_file`)?

Not on this ticket.



---

archive/issue_comments_163031.json:
```json
{
    "body": "Replying to [comment:6 ohanar]:\n> According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`.\nI don't think there is `/usr/var` or `/usr/local/var`.  I would vote for `local/etc` instead (which does exist, although it's rarely used).",
    "created_at": "2012-09-16T21:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163031",
    "user": "jdemeyer"
}
```

Replying to [comment:6 ohanar]:
> According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`.
I don't think there is `/usr/var` or `/usr/local/var`.  I would vote for `local/etc` instead (which does exist, although it's rarely used).



---

archive/issue_comments_163032.json:
```json
{
    "body": "Replying to [comment:8 jdemeyer]:\n> Replying to [comment:6 ohanar]:\n> > According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`.\n> I don't think there is `/usr/var` or `/usr/local/var`.  I would vote for `local/etc` instead (which does exist, although it's rarely used).\n-1, `etc` should be used for text configuration -- these files aren't configuration files, they are storing state information (which is precisely what `var/lib` is for).\n\nAt least according to the FHS, there shouldn't be an `/usr/etc` either. The FHS doesn't really cover prefixed environments, so I think it is fair to use relevant directories in `/` when necessary. (For instance, IMO, `SAGE_ROOT/ipython/*` should probably be installed into `SAGE_LOCAL/etc` somewhere).",
    "created_at": "2012-09-16T22:05:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163032",
    "user": "ohanar"
}
```

Replying to [comment:8 jdemeyer]:
> Replying to [comment:6 ohanar]:
> > According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`.
> I don't think there is `/usr/var` or `/usr/local/var`.  I would vote for `local/etc` instead (which does exist, although it's rarely used).
-1, `etc` should be used for text configuration -- these files aren't configuration files, they are storing state information (which is precisely what `var/lib` is for).

At least according to the FHS, there shouldn't be an `/usr/etc` either. The FHS doesn't really cover prefixed environments, so I think it is fair to use relevant directories in `/` when necessary. (For instance, IMO, `SAGE_ROOT/ipython/*` should probably be installed into `SAGE_LOCAL/etc` somewhere).



---

archive/issue_comments_163033.json:
```json
{
    "body": "Replying to [comment:9 ohanar]:\n> -1, `etc` should be used for text configuration -- these files aren't configuration files, they are storing state information (which is precisely what `var/lib` is for).\n> \n> At least according to the FHS, there shouldn't be an `/usr/etc` either. The FHS doesn't really cover prefixed environments, so I think it is fair to use relevant directories in `/` when necessary. (For instance, IMO, `SAGE_ROOT/ipython/*` should probably be installed into `SAGE_LOCAL/etc` somewhere).\n\nOK, `/usr/etc` isn't official either, so that part of the argument is moot.\n\nStill (I know, bikeshedding) I think the description of `etc` as read-only configuration files fits these files much better than `var`'s \"state information\".  It's something which under normal usage of Sage does not change.  It's equally read-only as the content of `$SAGE_ROOT/local/bin`.\n\nRegardless, I prefer not to change this in this ticket because other tickets depend on it.  I'd rather finish #5155 first and then think about where to put these files.",
    "created_at": "2012-09-17T14:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163033",
    "user": "jdemeyer"
}
```

Replying to [comment:9 ohanar]:
> -1, `etc` should be used for text configuration -- these files aren't configuration files, they are storing state information (which is precisely what `var/lib` is for).
> 
> At least according to the FHS, there shouldn't be an `/usr/etc` either. The FHS doesn't really cover prefixed environments, so I think it is fair to use relevant directories in `/` when necessary. (For instance, IMO, `SAGE_ROOT/ipython/*` should probably be installed into `SAGE_LOCAL/etc` somewhere).

OK, `/usr/etc` isn't official either, so that part of the argument is moot.

Still (I know, bikeshedding) I think the description of `etc` as read-only configuration files fits these files much better than `var`'s "state information".  It's something which under normal usage of Sage does not change.  It's equally read-only as the content of `$SAGE_ROOT/local/bin`.

Regardless, I prefer not to change this in this ticket because other tickets depend on it.  I'd rather finish #5155 first and then think about where to put these files.



---

archive/issue_comments_163034.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2012-11-12T10:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163034",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_163035.json:
```json
{
    "body": "Attachment [13452_sage_location.patch](tarball://root/attachments/some-uuid/ticket13452/13452_sage_location.patch) by dimpase created at 2012-11-12 10:52:52\n\nVery nice. I noticed quite a speedup upon trying to move installations around.",
    "created_at": "2012-11-12T10:52:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163035",
    "user": "dimpase"
}
```

Attachment [13452_sage_location.patch](tarball://root/attachments/some-uuid/ticket13452/13452_sage_location.patch) by dimpase created at 2012-11-12 10:52:52

Very nice. I noticed quite a speedup upon trying to move installations around.



---

archive/issue_comments_163036.json:
```json
{
    "body": "Replying to [comment:11 dimpase]:\n> I noticed quite a speedup upon trying to move installations around.\nA speed-up was never the intention of this ticket. Perhaps the speed-up is because files are opened only once instead of twice?",
    "created_at": "2012-11-12T10:58:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163036",
    "user": "jdemeyer"
}
```

Replying to [comment:11 dimpase]:
> I noticed quite a speedup upon trying to move installations around.
A speed-up was never the intention of this ticket. Perhaps the speed-up is because files are opened only once instead of twice?



---

archive/issue_comments_163037.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2012-11-14T08:30:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/13280",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/13280#issuecomment-163037",
    "user": "jdemeyer"
}
```

Resolution: fixed
