# Issue 13280: Refactor sage-location

Issue created by migration from https://trac.sagemath.org/ticket/13452

Original creator: jdemeyer

Original creation time: 2012-09-12 15:28:38

Assignee: tdb

Some various clean-up of `sage-location`.


---

Comment by jdemeyer created at 2012-09-16 17:42:30

Changing status from new to needs_review.


---

Comment by ohanar created at 2012-09-16 21:04:19

According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`. Since you are already touching those lines, do you think we could set the `location_file` to `SAGE_LOCAL/var/lib/sage/current-location.txt` (and similarly for `cflags_file`)?


---

Comment by jdemeyer created at 2012-09-16 21:26:24

Replying to [comment:6 ohanar]:
> According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`. Since you are already touching those lines, do you think we could set the `location_file` to `SAGE_LOCAL/var/lib/sage/current-location.txt` (and similarly for `cflags_file`)?

Not on this ticket.


---

Comment by jdemeyer created at 2012-09-16 21:29:01

Replying to [comment:6 ohanar]:
> According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`.
I don't think there is `/usr/var` or `/usr/local/var`.  I would vote for `local/etc` instead (which does exist, although it's rarely used).


---

Comment by ohanar created at 2012-09-16 22:05:21

Replying to [comment:8 jdemeyer]:
> Replying to [comment:6 ohanar]:
> > According to the FHS, the `location_file` and `cflags_file` should live in `SAGE_LOCAL/var/lib`.
> I don't think there is `/usr/var` or `/usr/local/var`.  I would vote for `local/etc` instead (which does exist, although it's rarely used).
-1, `etc` should be used for text configuration -- these files aren't configuration files, they are storing state information (which is precisely what `var/lib` is for).

At least according to the FHS, there shouldn't be an `/usr/etc` either. The FHS doesn't really cover prefixed environments, so I think it is fair to use relevant directories in `/` when necessary. (For instance, IMO, `SAGE_ROOT/ipython/*` should probably be installed into `SAGE_LOCAL/etc` somewhere).


---

Comment by jdemeyer created at 2012-09-17 14:52:00

Replying to [comment:9 ohanar]:
> -1, `etc` should be used for text configuration -- these files aren't configuration files, they are storing state information (which is precisely what `var/lib` is for).
> 
> At least according to the FHS, there shouldn't be an `/usr/etc` either. The FHS doesn't really cover prefixed environments, so I think it is fair to use relevant directories in `/` when necessary. (For instance, IMO, `SAGE_ROOT/ipython/*` should probably be installed into `SAGE_LOCAL/etc` somewhere).

OK, `/usr/etc` isn't official either, so that part of the argument is moot.

Still (I know, bikeshedding) I think the description of `etc` as read-only configuration files fits these files much better than `var`'s "state information".  It's something which under normal usage of Sage does not change.  It's equally read-only as the content of `$SAGE_ROOT/local/bin`.

Regardless, I prefer not to change this in this ticket because other tickets depend on it.  I'd rather finish #5155 first and then think about where to put these files.


---

Comment by dimpase created at 2012-11-12 10:52:52

Changing status from needs_review to positive_review.


---

Attachment

Very nice. I noticed quite a speedup upon trying to move installations around.


---

Comment by jdemeyer created at 2012-11-12 10:58:31

Replying to [comment:11 dimpase]:
> I noticed quite a speedup upon trying to move installations around.
A speed-up was never the intention of this ticket. Perhaps the speed-up is because files are opened only once instead of twice?


---

Comment by jdemeyer created at 2012-11-14 08:30:26

Resolution: fixed
