# Issue 16114: Move SearchForest code to sage/sets/recursively_enumerated_set.pyx

Issue created by migration from Trac.

Original creator: slabbe

Original creation time: 2014-05-13 19:51:48

CC:  tscrim slelievre

Move the code of `SearchForest` from `sage/combinat/backtrack.py` to `sage/sets/recursively_enumerated_set.pyx` into a class named `RecursivelyEnumeratedSet_forest`.

This is a follow up of #6637.


---

Comment by hivert created at 2015-12-14 21:37:53

I just added some old doc from Nathann and myself which is worth being integrated when cleaning this up.
----
Last 10 new commits:


---

Comment by tscrim created at 2016-01-02 02:44:02

I would like to squeeze out some more speed of the `SearchForest` code, so I'm interested in this. I made #13580 a dependency since that is likely a lot closer than this is to getting into Sage. If you disagree, then we can reverse the order of the dependencies and I'd do the review once this is ready.


---

Comment by slabbe created at 2016-04-08 08:30:34

The actual branch contains many commits from the #13580, so I can't see what is the goal of the branch put here and how it is related to this ticket.


---

Comment by git created at 2016-04-08 08:50:27

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:


---

Comment by hivert created at 2016-04-08 08:54:20

Replying to [comment:5 slabbe]:
> The actual branch contains many commits from the #13580, so I can't see what is the goal of the branch put here and how it is related to this ticket.

I just rebased this ticket on top of #13580 the code contains only an explanation of what `SearchForest` does with a nice picture from Nathann, Nicolas and nyself. It should be integrated during the move and the documentation cleanup.


---

Comment by tscrim created at 2016-04-08 20:41:20

Something else that we should do while-we-are-at-it, we should consider using `collections.deque` since it supports fast popping from both ends (`list` can become really slow when popping at the front, but `deque` is still twice as slow popping at the front).


---

Comment by nthiery created at 2017-01-13 10:13:03

Now that #13580 is in, the current branch contains just a small
self-contained documentation improvement. It seems worth and easy to
integrate soon, but somehow unrelated to this ticket, right?

Shall we create a separate ticket for that documentation chunk?

And refocus this one on moving the SearchForest code to
sage/sets/recursively_enumerated_set.pyx (more than by just a single
alias)?


---

Comment by slabbe created at 2017-01-17 10:43:40

Replying to [comment:9 nthiery]:
> Now that #13580 is in, the current branch contains just a small
> self-contained documentation improvement. It seems worth and easy to
> integrate soon, but somehow unrelated to this ticket, right?
> 
> Shall we create a separate ticket for that documentation chunk?

Please yes.

> And refocus this one on moving the SearchForest code to
> sage/sets/recursively_enumerated_set.pyx (more than by just a single
> alias)?

Yes.


---

Comment by mkoeppe created at 2020-06-17 04:37:54

Replying to [comment:10 slabbe]:
> Replying to [comment:9 nthiery]:
> > Now that #13580 is in, the current branch contains just a small
> > self-contained documentation improvement. It seems worth and easy to
> > integrate soon, but somehow unrelated to this ticket, right?
> > 
> > Shall we create a separate ticket for that documentation chunk?
> 
> Please yes.

This is now #29882.


---

Comment by mkoeppe created at 2020-06-17 05:22:11

Moved it, now need to clean up some lazy_import business
----
New commits:


---

Comment by git created at 2020-06-17 05:34:18

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by mkoeppe created at 2020-06-17 05:35:58

Let's see what the patchbot has to say.

I have made not made any attempt to cythonize anything; this is really just pure Python code moved into the pyx file.


---

Comment by mkoeppe created at 2020-06-17 05:35:58

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2020-06-17 05:37:55

Also, I added a `lazy_import` for `SearchForest` but it seems that `SearchForest` was already deprecated -- perhaps now it can be removed completely?


---

Comment by mkoeppe created at 2020-06-17 05:39:31

(deprecation in #6637, 6 years ago)


---

Comment by git created at 2020-06-17 05:44:52

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2020-06-17 05:47:08

Also `TransitiveIdeal` and `TransitiveIdealGraded` were deprecated in #6637.


---

Comment by git created at 2020-06-17 06:03:47

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by vdelecroix created at 2020-06-17 06:49:52

It seems to me that with your changes `SearchForest` does not exist anymore. If so, you must add a lazy import with deprecation warning in `backtrack.py`. The `SearchForest` was documented as a deprecated class but was not making any deprecation warning when used.


---

Comment by mkoeppe created at 2020-06-17 06:58:02

That's right, these deprecated classes are deleted.

The deprecation happened in #6637 and announced on the ticket, I guess before deprecation warnings were invented?


---

Comment by vdelecroix created at 2020-06-17 11:59:17

This is somehow annoying. Let us hope that nobody uses it in her code.


---

Comment by vdelecroix created at 2020-06-17 11:59:17

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2020-06-17 14:50:52

Thanks!


---

Comment by slelievre created at 2020-06-18 01:10:03

In the same general area, any interest in #22184 and #27537 anyone?


---

Comment by vbraun created at 2020-06-22 22:34:39

Resolution: fixed


---

Comment by slabbe created at 2020-06-24 19:44:13

Thanks for finishing this task.I feel ashame I never finished it myself.

As a further todo, I think it will be nice to have


```diff
-class RecursivelyEnumeratedSet_forest(Parent):
+class RecursivelyEnumeratedSet_forest(RecursivelyEnumeratedSet_generic):
```


There are few methods like `to_digraph` from the generic class that I like to use but are currently not available for the `forest` type.


---

Comment by slabbe created at 2020-07-28 12:42:58

A follow-up ticket is here: #30238
