# Issue 27876: List of completely split primes is incomplete

archive/issues_027876.json:
```json
{
    "body": "CC:  @koffie @slel @mckenziewest\n\nKeywords: number fields, splitting of primes\n\nFor number fields, the method `completely_split_primes` may be incomplete.\n\n## Example\n\n```python\n  K.<a> = QuadraticField(17)\n  K.completely_split_primes(20)\n  [13, 19]\n```\n\n\nHowever,\n\n```python\n  K.<a> = QuadraticField(17)\n  K.ideal(2).factor()\n  (Fractional ideal (-1/2*a - 3/2)) * (Fractional ideal (-1/2*a + 3/2))\n```\n\n\nThe reason is that the factorization of the defining polynomial mod p does \nnot always give the correct answer.\nIt does in all but finitely many cases, the exception being primes that divide\nthe index of ZZ[a] in the ring of integers of K.\n\nA possible solution would be to use the function \n`K.ideal(p).factor()` and determine the length\nof the splitting (at least for those finitely many primes\nin case we can easily determine those primes).\n\nIssue created by migration from https://trac.sagemath.org/ticket/28113\n\n",
    "created_at": "2019-07-04T11:53:19Z",
    "labels": [
        "number fields",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "List of completely split primes is incomplete",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/27876",
    "user": "ehlen"
}
```
CC:  @koffie @slel @mckenziewest

Keywords: number fields, splitting of primes

For number fields, the method `completely_split_primes` may be incomplete.

## Example

```python
  K.<a> = QuadraticField(17)
  K.completely_split_primes(20)
  [13, 19]
```


However,

```python
  K.<a> = QuadraticField(17)
  K.ideal(2).factor()
  (Fractional ideal (-1/2*a - 3/2)) * (Fractional ideal (-1/2*a + 3/2))
```


The reason is that the factorization of the defining polynomial mod p does 
not always give the correct answer.
It does in all but finitely many cases, the exception being primes that divide
the index of ZZ[a] in the ring of integers of K.

A possible solution would be to use the function 
`K.ideal(p).factor()` and determine the length
of the splitting (at least for those finitely many primes
in case we can easily determine those primes).

Issue created by migration from https://trac.sagemath.org/ticket/28113





---

archive/issue_comments_393728.json:
```json
{
    "body": "Ticket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27876#issuecomment-393728",
    "user": "@embray"
}
```

Ticket retargeted after milestone closed



---

archive/issue_comments_393729.json:
```json
{
    "body": "Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.",
    "created_at": "2020-05-01T04:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27876#issuecomment-393729",
    "user": "@mkoeppe"
}
```

Moving tickets to milestone sage-9.2 based on a review of last modification date, branch status, and severity.



---

archive/issue_comments_393730.json:
```json
{
    "body": "Moving to 9.4, as 9.3 has been released.",
    "created_at": "2021-05-10T17:42:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27876#issuecomment-393730",
    "user": "@mkoeppe"
}
```

Moving to 9.4, as 9.3 has been released.



---

archive/issue_comments_393731.json:
```json
{
    "body": "Reported again at #32982. The example there\nmight serve as a doctest here.",
    "created_at": "2021-12-07T14:55:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27876#issuecomment-393731",
    "user": "@slel"
}
```

Reported again at #32982. The example there
might serve as a doctest here.



---

archive/issue_comments_393732.json:
```json
{
    "body": "CC-ing the code author",
    "created_at": "2022-03-31T11:50:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/27876",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/27876#issuecomment-393732",
    "user": "@dimpase"
}
```

CC-ing the code author
