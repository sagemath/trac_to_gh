# Issue 30528: Adapt to deprecation of seeding based on hashing in Python 3.9

Issue created by migration from https://trac.sagemath.org/ticket/30765

Original creator: slelievre

Original creation time: 2020-10-13 21:29:46

CC:  fbissey mkoeppe slelievre

Keywords: seed, hash, pbori, polybori, randompoly, deprecation

This causes a doctest failure in Sage 9.2.rc0 using Python 3.9:

```
sage -t --long --random-seed=0 src/sage/rings/polynomial/pbori/randompoly.py
**********************************************************************
File "src/sage/rings/polynomial/pbori/randompoly.py", line 46, in sage.rings.polynomial.pbori.randompoly.?
Failed example:
    s=sparse_random_system(r, number_of_polynomials = 20, variables_per_polynomial = 3, degree=2, random_seed=123)
    DeprecationWarning: Seeding based on hashing is deprecated
    since Python 3.9 and will be removed in a subsequent version. The only 
    supported seed types are: None, int, float, str, bytes, and bytearray.
```


First discussed at #30184 (comments 25, 33, 40, 55).


---

Comment by slelievre created at 2020-10-13 22:40:25

Possible workaround: silence the deprecation warning for now,
as we did in other cases.

See for instance:

- #30768: Restore deprecation warnings for imports from collections vs collections.abc


---

Comment by chapoton created at 2020-11-02 19:49:44

I have made some general cleanup of pbori/

I have forced the seeds to be `int`. Would you please tell me if this removes the warning ?
----
New commits:


---

Comment by chapoton created at 2020-11-03 14:12:37

Changing status from new to needs_review.


---

Comment by dimpase created at 2020-11-06 22:02:41

this does work with Python 3.9.0 - it does fix that warning.


---

Comment by dimpase created at 2020-11-06 22:06:55

Changing status from needs_review to positive_review.


---

Comment by dimpase created at 2020-11-06 22:06:55

lgtm


---

Comment by vbraun created at 2020-11-07 19:22:33

Merge conflict


---

Comment by vbraun created at 2020-11-07 19:22:33

Changing status from positive_review to needs_work.


---

Comment by dimpase created at 2020-11-07 22:36:51

Changing status from needs_work to needs_review.


---

Comment by dimpase created at 2020-11-07 22:36:51

rebased over the latest beta
----
New commits:


---

Comment by git created at 2020-11-08 08:11:53

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2020-11-08 08:33:13

Changing status from needs_review to positive_review.


---

Comment by chapoton created at 2020-11-08 08:33:13

ok, I changed a few more details in the doc of fglm.

I will allow myself to set this back to positive.


---

Comment by git created at 2020-11-08 13:06:31

Changing status from positive_review to needs_review.


---

Comment by git created at 2020-11-08 13:06:31

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by dimpase created at 2020-11-08 13:14:39

ok, this works, too.


---

Comment by dimpase created at 2020-11-08 13:14:39

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-11-20 22:14:59

Resolution: fixed
