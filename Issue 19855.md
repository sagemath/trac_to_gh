# Issue 19855: Inconsistent doc for Graph.matching()

archive/issues_019855.json:
```json
{
    "body": "CC:  tscrim ncohen\n\nKeywords: matching, graph\n\nIn the method Graph.matching(), the doc says:\n\n```\n- ``use_edge_labels`` -- boolean (default: ``False``)\n```\n\nBut in fact `use_edge_labels` is set to True by default.\n\nQuestion: Should the doc be changed or should the default value be changed?\n\nCurrently working with Sage version 7.1.beta3\n\nIssue created by migration from https://trac.sagemath.org/ticket/20092\n\n",
    "created_at": "2016-02-21T17:23:26Z",
    "labels": [
        "graph theory",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Inconsistent doc for Graph.matching()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/19855",
    "user": "egunawan"
}
```
CC:  tscrim ncohen

Keywords: matching, graph

In the method Graph.matching(), the doc says:

```
- ``use_edge_labels`` -- boolean (default: ``False``)
```

But in fact `use_edge_labels` is set to True by default.

Question: Should the doc be changed or should the default value be changed?

Currently working with Sage version 7.1.beta3

Issue created by migration from https://trac.sagemath.org/ticket/20092





---

archive/issue_comments_272892.json:
```json
{
    "body": "To me, having it fixed in any way is good for as long as it is fixed. I would personally enforce in the code what the doc says, for I expect graph functions to not try to understand the labels unless I explicitly want it to. I'm likely to have my edges labelled with things that make sense to me (color classes for example) and that would not make any sense if understood as a weight.\n\nThough that's only me.\n\nNathann",
    "created_at": "2016-02-21T18:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272892",
    "user": "ncohen"
}
```

To me, having it fixed in any way is good for as long as it is fixed. I would personally enforce in the code what the doc says, for I expect graph functions to not try to understand the labels unless I explicitly want it to. I'm likely to have my edges labelled with things that make sense to me (color classes for example) and that would not make any sense if understood as a weight.

Though that's only me.

Nathann



---

archive/issue_comments_272893.json:
```json
{
    "body": "IMO the least surprising thing (i.e., least likely to break 3rd party code) is to change the default listed in doc so that it matches the code. However, given the extra data that needs to be processed and Nathann's comment (plus my own personal use cases), I think the best thing to do is just change the default value to `False`.",
    "created_at": "2016-02-23T23:05:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272893",
    "user": "tscrim"
}
```

IMO the least surprising thing (i.e., least likely to break 3rd party code) is to change the default listed in doc so that it matches the code. However, given the extra data that needs to be processed and Nathann's comment (plus my own personal use cases), I think the best thing to do is just change the default value to `False`.



---

archive/issue_comments_272894.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-02-29T00:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272894",
    "user": "egunawan"
}
```

New commits:



---

archive/issue_comments_272895.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-02-29T00:30:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272895",
    "user": "egunawan"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_272896.json:
```json
{
    "body": "Can you explain what the bug was (including the code which resulted in the bug)? Also could you explain this change to me? I don't see the point in creating a new graph and if this is necessary, why don't you cal `copy`?\n\n```diff\n-                g = self.networkx_graph(copy=False)\n+                g = Graph(self.edges(labels=False))\n+                g = g.networkx_graph(copy=False)\n```\n\nAlso I don't think this change is good\n\n```diff\n-                    return Integer(len(d)/2)\n+                    return len(d)/2\n```\n\nas now the output is not guaranteed to be a Sage integer. We try to make sure python `int`s don't escape to the user.",
    "created_at": "2016-02-29T06:20:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272896",
    "user": "tscrim"
}
```

Can you explain what the bug was (including the code which resulted in the bug)? Also could you explain this change to me? I don't see the point in creating a new graph and if this is necessary, why don't you cal `copy`?

```diff
-                g = self.networkx_graph(copy=False)
+                g = Graph(self.edges(labels=False))
+                g = g.networkx_graph(copy=False)
```

Also I don't think this change is good

```diff
-                    return Integer(len(d)/2)
+                    return len(d)/2
```

as now the output is not guaranteed to be a Sage integer. We try to make sure python `int`s don't escape to the user.



---

archive/issue_comments_272897.json:
```json
{
    "body": "This is the bug: currently the method takes into account the weights of the edges, if `use_edge_labels=False`:\n\n```\nsage: g=Graph([(0,1),(1,2),(2,3)])\nsage: g.matching()\n[(0, 1, None), (2, 3, None)]\n\nsage: gw=Graph([(0,1,1),(1,2,99),(2,3,1)])\nsage: gw.matching(use_edge_labels=False)\n[(1, 2, 99)]\n```\n",
    "created_at": "2016-02-29T06:58:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272897",
    "user": "egunawan"
}
```

This is the bug: currently the method takes into account the weights of the edges, if `use_edge_labels=False`:

```
sage: g=Graph([(0,1),(1,2),(2,3)])
sage: g.matching()
[(0, 1, None), (2, 3, None)]

sage: gw=Graph([(0,1,1),(1,2,99),(2,3,1)])
sage: gw.matching(use_edge_labels=False)
[(1, 2, 99)]
```




---

archive/issue_comments_272898.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-02-29T06:58:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272898",
    "user": "egunawan"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_272899.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-02-29T07:08:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272899",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_272900.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2016-03-02T15:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272900",
    "user": "tscrim"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_272901.json:
```json
{
    "body": "I made some changes (and rebased to 7.1.beta5) to improve the speed/memory usage, standardize the doc, and make the output types more consistent/compatible. If you agree with my changes, then you can set a positive review.\n----\nNew commits:",
    "created_at": "2016-03-02T15:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272901",
    "user": "tscrim"
}
```

I made some changes (and rebased to 7.1.beta5) to improve the speed/memory usage, standardize the doc, and make the output types more consistent/compatible. If you agree with my changes, then you can set a positive review.
----
New commits:



---

archive/issue_comments_272902.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-03-02T15:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272902",
    "user": "tscrim"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_272903.json:
```json
{
    "body": "ok, let it be",
    "created_at": "2017-01-05T12:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272903",
    "user": "chapoton"
}
```

ok, let it be



---

archive/issue_comments_272904.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-05T12:49:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272904",
    "user": "chapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_272905.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-18T20:39:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/19855",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/19855#issuecomment-272905",
    "user": "vbraun"
}
```

Resolution: fixed
