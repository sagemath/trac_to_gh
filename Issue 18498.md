# Issue 18498: MixedIntegerLinearProgram: Reconstruct exact rational basic solution

archive/issues_018498.json:
```json
{
    "body": "CC:  @yuan-zhou @nathanncohen @dimpase\n\nKeywords: lp\n\nSometimes one can use a fast numerical LP solver to solve a problem to \"optimality\", \nthen reconstruct the primal and dual solution in rational arithmetic (or over whatever base_ring was used...) and in this way prove that this basis is indeed optimal. \nMixedIntegerLinearProgram should support this mode of operation.\n\n#18685 provides the necessary basis-status functions (for the GLPK backend).\n#18688 provides a solver-independent interface to these functions.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18735\n\n",
    "created_at": "2015-06-19T03:41:42Z",
    "labels": [
        "component: numerical"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "MixedIntegerLinearProgram: Reconstruct exact rational basic solution",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18498",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @yuan-zhou @nathanncohen @dimpase

Keywords: lp

Sometimes one can use a fast numerical LP solver to solve a problem to "optimality", 
then reconstruct the primal and dual solution in rational arithmetic (or over whatever base_ring was used...) and in this way prove that this basis is indeed optimal. 
MixedIntegerLinearProgram should support this mode of operation.

#18685 provides the necessary basis-status functions (for the GLPK backend).
#18688 provides a solver-independent interface to these functions.

Issue created by migration from https://trac.sagemath.org/ticket/18735





---

archive/issue_comments_251146.json:
```json
{
    "body": "Is `ppl` (`ppl`LP backend, which works with exact arithmetic) too slow for you?",
    "created_at": "2015-06-20T06:33:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251146",
    "user": "https://github.com/dimpase"
}
```

Is `ppl` (`ppl`LP backend, which works with exact arithmetic) too slow for you?



---

archive/issue_comments_251147.json:
```json
{
    "body": "On the other hand, a solver-independent way to get an optimal dual solution is very much welcome, as this is lacking currently, and often needed.",
    "created_at": "2015-06-20T06:42:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251147",
    "user": "https://github.com/dimpase"
}
```

On the other hand, a solver-independent way to get an optimal dual solution is very much welcome, as this is lacking currently, and often needed.



---

archive/issue_comments_251148.json:
```json
{
    "body": "Replying to [comment:2 dimpase]:\n> Is `ppl` (`ppl`LP backend, which works with exact arithmetic) too slow for you?\n\nDima, ppl's implementation of the double description method is very good, but its LP solver is not suitable for problems of even moderate sizes.",
    "created_at": "2015-06-22T21:46:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251148",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:2 dimpase]:
> Is `ppl` (`ppl`LP backend, which works with exact arithmetic) too slow for you?

Dima, ppl's implementation of the double description method is very good, but its LP solver is not suitable for problems of even moderate sizes.



---

archive/issue_comments_251149.json:
```json
{
    "body": "Replying to [comment:5 mkoeppe]:\n> Replying to [comment:2 dimpase]:\n> > Is `ppl` (`ppl`LP backend, which works with exact arithmetic) too slow for you?\n> \n> Dima, ppl's implementation of the double description method is very good, but its LP solver is not suitable for problems of even moderate sizes.\n\nWould you mind providing an example of PPL choking on an LP doable in exact arithmetic by another solver? We use PPL's LP solver in  `codesize_upper_bound(...,algorithm=\"LP\")` and never saw a problem... (Although perhaps the difficulty from entry sizes dominate the the one from the dimension in this case).",
    "created_at": "2015-06-23T08:19:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251149",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:5 mkoeppe]:
> Replying to [comment:2 dimpase]:
> > Is `ppl` (`ppl`LP backend, which works with exact arithmetic) too slow for you?
> 
> Dima, ppl's implementation of the double description method is very good, but its LP solver is not suitable for problems of even moderate sizes.

Would you mind providing an example of PPL choking on an LP doable in exact arithmetic by another solver? We use PPL's LP solver in  `codesize_upper_bound(...,algorithm="LP")` and never saw a problem... (Although perhaps the difficulty from entry sizes dominate the the one from the dimension in this case).



---

archive/issue_comments_251150.json:
```json
{
    "body": "Replying to [comment:6 dimpase]:\n> Would you mind providing an example of PPL choking on an LP doable in exact arithmetic by another solver? We use PPL's LP solver in  `codesize_upper_bound(...,algorithm=\"LP\")` and never saw a problem... (Although perhaps the difficulty from entry sizes dominate the the one from the dimension in this case).\n\nIn our experiments here, we don't actually have numerical difficulties with floating-point based solvers; we just want to be sure that we have an exact optimal solution. With #18764 (glp_exact; please review) we have now run some tests to compare performance:\n\n\n```\n                                glp_simplex                glp_simplex+glp_exact\n   glp_simplex    glp_exact     +glp_exact    ppl          + reconstruction in Sage\n10  4.20            51.92             7.78    207.07          289.00\n11  5.08            58.49             9.43    3451.42         574.72\n12  7.55           101.72            11.32    1252.91         808.73\n13  7.21           279.08            13.57    1424.28        1019.95\n14  8.41           562.97            15.91    7343.37        1628.54\n15 13.10           550.46            18.48    3667.93        2550.94\n```\n\n\nAs you can see, PPL is much slower than pure glp_exact, and orders of magnitudes slower than glp_simplex followed by glp_exact.\n\nHowever, currently when we try to reconstruct the solution from the combinatorial basis information, Sage's super slow matrix functions over the rationals get us back to roughly the same order of magnitude as PPL.\n\nIt would be interesting to know how the solvers perform on the kind of LPs that you have in mind.",
    "created_at": "2015-06-26T21:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251150",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:6 dimpase]:
> Would you mind providing an example of PPL choking on an LP doable in exact arithmetic by another solver? We use PPL's LP solver in  `codesize_upper_bound(...,algorithm="LP")` and never saw a problem... (Although perhaps the difficulty from entry sizes dominate the the one from the dimension in this case).

In our experiments here, we don't actually have numerical difficulties with floating-point based solvers; we just want to be sure that we have an exact optimal solution. With #18764 (glp_exact; please review) we have now run some tests to compare performance:


```
                                glp_simplex                glp_simplex+glp_exact
   glp_simplex    glp_exact     +glp_exact    ppl          + reconstruction in Sage
10  4.20            51.92             7.78    207.07          289.00
11  5.08            58.49             9.43    3451.42         574.72
12  7.55           101.72            11.32    1252.91         808.73
13  7.21           279.08            13.57    1424.28        1019.95
14  8.41           562.97            15.91    7343.37        1628.54
15 13.10           550.46            18.48    3667.93        2550.94
```


As you can see, PPL is much slower than pure glp_exact, and orders of magnitudes slower than glp_simplex followed by glp_exact.

However, currently when we try to reconstruct the solution from the combinatorial basis information, Sage's super slow matrix functions over the rationals get us back to roughly the same order of magnitude as PPL.

It would be interesting to know how the solvers perform on the kind of LPs that you have in mind.



---

archive/issue_comments_251151.json:
```json
{
    "body": "Replying to [comment:7 mkoeppe]:\n\n> It would be interesting to know how the solvers perform on the kind of LPs that you have in mind.\n\nLPs I get would be not possible to even enter into a solver without long integers/rationals.\nThat's e.g. behind this function call:\n\n```\nsage:  codesize_upper_bound(70,8,2,algorithm=\"LP\")\n9695943911863423\n```\n\nmore explicitly, you can do\n\n```\nsage: v,p,r=delsarte_bound_hamming_space(70,8,2,return_data=True)\nsage: p\nMixed Integer Program  ( maximization, 71 variables, 148 constraints )\n```\n\nconstrains of `p` have entries as big as  112186277816662845432.",
    "created_at": "2015-06-29T10:39:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251151",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:7 mkoeppe]:

> It would be interesting to know how the solvers perform on the kind of LPs that you have in mind.

LPs I get would be not possible to even enter into a solver without long integers/rationals.
That's e.g. behind this function call:

```
sage:  codesize_upper_bound(70,8,2,algorithm="LP")
9695943911863423
```

more explicitly, you can do

```
sage: v,p,r=delsarte_bound_hamming_space(70,8,2,return_data=True)
sage: p
Mixed Integer Program  ( maximization, 71 variables, 148 constraints )
```

constrains of `p` have entries as big as  112186277816662845432.



---

archive/issue_comments_251152.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2016-04-06T03:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251152",
    "user": "https://github.com/mkoeppe"
}
```

Last 10 new commits:



---

archive/issue_comments_251153.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-08-10T18:58:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251154.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-30T01:25:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251155.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-30T01:46:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251155",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251156.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-31T09:03:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251156",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251157.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-31T12:42:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251157",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251158.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2021-02-03T05:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_251159.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-02-03T05:02:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251159",
    "user": "https://github.com/yuan-zhou"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_251160.json:
```json
{
    "body": "I don't like the changes to `src/sage/numerical/interactive_simplex_method.py` too much. \n\nInstead of extending `InteractiveLPProblemStandardForm.run_revised_simplex_method`, I think it's better to use the \"run_simplex_method\" method of the current_dictionary (a revised dictionary) directly.\n\nSame amount of code, but would avoid making `interactive_simplex_method` more complicated.",
    "created_at": "2021-02-03T05:30:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251160",
    "user": "https://github.com/mkoeppe"
}
```

I don't like the changes to `src/sage/numerical/interactive_simplex_method.py` too much. 

Instead of extending `InteractiveLPProblemStandardForm.run_revised_simplex_method`, I think it's better to use the "run_simplex_method" method of the current_dictionary (a revised dictionary) directly.

Same amount of code, but would avoid making `interactive_simplex_method` more complicated.



---

archive/issue_comments_251161.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-03T06:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251161",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251162.json:
```json
{
    "body": "Replying to [comment:25 mkoeppe]:\n> I don't like the changes to `src/sage/numerical/interactive_simplex_method.py` too much. \n> \n> Instead of extending `InteractiveLPProblemStandardForm.run_revised_simplex_method`, I think it's better to use the \"run_simplex_method\" method of the current_dictionary (a revised dictionary) directly.\n> \n> Same amount of code, but would avoid making `interactive_simplex_method` more complicated. \n\nGood idea. Done.",
    "created_at": "2021-02-03T06:20:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251162",
    "user": "https://github.com/yuan-zhou"
}
```

Replying to [comment:25 mkoeppe]:
> I don't like the changes to `src/sage/numerical/interactive_simplex_method.py` too much. 
> 
> Instead of extending `InteractiveLPProblemStandardForm.run_revised_simplex_method`, I think it's better to use the "run_simplex_method" method of the current_dictionary (a revised dictionary) directly.
> 
> Same amount of code, but would avoid making `interactive_simplex_method` more complicated. 

Good idea. Done.



---

archive/issue_comments_251163.json:
```json
{
    "body": "Also, I think it would be better to avoid changing the `solve` interface:\n\n```\n-    cpdef int solve(self) except -1:\n+    cpdef int solve(self,  basic_variables=[]) except -1:\n```\n\nSetting an initial basis could be done in a new method perhaps called `warmstart(basic_variables)` or `set_basis(basic_variables)`",
    "created_at": "2021-02-04T03:31:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251163",
    "user": "https://github.com/mkoeppe"
}
```

Also, I think it would be better to avoid changing the `solve` interface:

```
-    cpdef int solve(self) except -1:
+    cpdef int solve(self,  basic_variables=[]) except -1:
```

Setting an initial basis could be done in a new method perhaps called `warmstart(basic_variables)` or `set_basis(basic_variables)`



---

archive/issue_comments_251164.json:
```json
{
    "body": "And note that generic backend already defines getter methods for the basis status `is_variable_basic`, `is_variable_nonbasic_at_lower_bound`, `is_slack_variable_basic`, `is_slack_variable_nonbasic_at_lower_bound` - all of which use variable/row indices.\n\nSo this interface:\n\n```\n+            ``basic_variables`` can be one of the following:\n+\n+            - a list of indices. The indices (starting at 1) correspond to that of the vector formed by `self.interactive_lp_problem().decision_variables()` and `self.interactive_lp_problem().slack_variables()`. Remark that `self.interactive_lp_problem()` can have more variables and constraints than that of `self` if `self` has free variables or `==` constraints.\n+\n+            - a list of the names of the variables in `self.interactive_lp_problem()`.\n```\n\nlooks a bit out of place.",
    "created_at": "2021-02-04T03:37:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251164",
    "user": "https://github.com/mkoeppe"
}
```

And note that generic backend already defines getter methods for the basis status `is_variable_basic`, `is_variable_nonbasic_at_lower_bound`, `is_slack_variable_basic`, `is_slack_variable_nonbasic_at_lower_bound` - all of which use variable/row indices.

So this interface:

```
+            ``basic_variables`` can be one of the following:
+
+            - a list of indices. The indices (starting at 1) correspond to that of the vector formed by `self.interactive_lp_problem().decision_variables()` and `self.interactive_lp_problem().slack_variables()`. Remark that `self.interactive_lp_problem()` can have more variables and constraints than that of `self` if `self` has free variables or `==` constraints.
+
+            - a list of the names of the variables in `self.interactive_lp_problem()`.
```

looks a bit out of place.



---

archive/issue_comments_251165.json:
```json
{
    "body": "What would be a better input form? Remove the second option and take only a list of indices? \n\nIt is tricky because the indices here correspond to the variables in the `interactive_lp_problem().standard_form()`, and they not necessarily the same as the indices for `is_variable_basic` etc. which correspond to `interactive_lp_problem()`. See the following example.\n\n```\nfrom sage.numerical.backends.generic_backend import get_solver\nh = get_solver(solver = (\"InteractiveLP\"))\nh.add_variables(1, lower_bound=None, upper_bound=None);\nh.add_variables(1, lower_bound=0, upper_bound=None);\nh.add_linear_constraint([(0,2),(1,-1)],-1,None)\nh.add_linear_constraint([(0,1),(1,-1)],None, 1)\nh.add_linear_constraint([(0,1),(1,1)],2,2)\nh.set_objective([0,-1])\nlp = h.interactive_lp_problem(); view(lp)\nst = lp.standard_form(); view(st)\nR = st.coordinate_ring(); R\n```\n\nReplying to [comment:29 mkoeppe]:\n> And note that generic backend already defines getter methods for the basis status `is_variable_basic`, `is_variable_nonbasic_at_lower_bound`, `is_slack_variable_basic`, `is_slack_variable_nonbasic_at_lower_bound` - all of which use variable/row indices.\n> \n> So this interface:\n> {{{\n> +            ``basic_variables`` can be one of the following:\n> +\n> +            - a list of indices. The indices (starting at 1) correspond to that of the vector formed by `self.interactive_lp_problem().decision_variables()` and `self.interactive_lp_problem().slack_variables()`. Remark that `self.interactive_lp_problem()` can have more variables and constraints than that of `self` if `self` has free variables or `==` constraints.\n> +\n> +            - a list of the names of the variables in `self.interactive_lp_problem()`.\n> }}}\n> looks a bit out of place.",
    "created_at": "2021-02-04T20:56:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251165",
    "user": "https://github.com/yuan-zhou"
}
```

What would be a better input form? Remove the second option and take only a list of indices? 

It is tricky because the indices here correspond to the variables in the `interactive_lp_problem().standard_form()`, and they not necessarily the same as the indices for `is_variable_basic` etc. which correspond to `interactive_lp_problem()`. See the following example.

```
from sage.numerical.backends.generic_backend import get_solver
h = get_solver(solver = ("InteractiveLP"))
h.add_variables(1, lower_bound=None, upper_bound=None);
h.add_variables(1, lower_bound=0, upper_bound=None);
h.add_linear_constraint([(0,2),(1,-1)],-1,None)
h.add_linear_constraint([(0,1),(1,-1)],None, 1)
h.add_linear_constraint([(0,1),(1,1)],2,2)
h.set_objective([0,-1])
lp = h.interactive_lp_problem(); view(lp)
st = lp.standard_form(); view(st)
R = st.coordinate_ring(); R
```

Replying to [comment:29 mkoeppe]:
> And note that generic backend already defines getter methods for the basis status `is_variable_basic`, `is_variable_nonbasic_at_lower_bound`, `is_slack_variable_basic`, `is_slack_variable_nonbasic_at_lower_bound` - all of which use variable/row indices.
> 
> So this interface:
> {{{
> +            ``basic_variables`` can be one of the following:
> +
> +            - a list of indices. The indices (starting at 1) correspond to that of the vector formed by `self.interactive_lp_problem().decision_variables()` and `self.interactive_lp_problem().slack_variables()`. Remark that `self.interactive_lp_problem()` can have more variables and constraints than that of `self` if `self` has free variables or `==` constraints.
> +
> +            - a list of the names of the variables in `self.interactive_lp_problem()`.
> }}}
> looks a bit out of place.



---

archive/issue_comments_251166.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-02-05T21:35:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251166",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_251167.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-02-08T03:16:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251167",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251168.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-02-08T03:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251168",
    "user": "https://github.com/yuan-zhou"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_251169.json:
```json
{
    "body": "Replying to [comment:28 mkoeppe]:\n> Also, I think it would be better to avoid changing the `solve` interface:\n> {{{\n> -    cpdef int solve(self) except -1:\n> +    cpdef int solve(self,  basic_variables=[]) except -1:\n> }}}\n> Setting an initial basis could be done in a new method perhaps called `warmstart(basic_variables)` or `set_basis(basic_variables)`\n> \n> \n\nInteractiveLPBackend now has a new method `set_dictionary` and a new attribute `current_dictionary`. I didn't name it `set_basis`, to avoid confusion between the basic variables in a dictionary and those of the generic backend.",
    "created_at": "2021-02-08T03:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251169",
    "user": "https://github.com/yuan-zhou"
}
```

Replying to [comment:28 mkoeppe]:
> Also, I think it would be better to avoid changing the `solve` interface:
> {{{
> -    cpdef int solve(self) except -1:
> +    cpdef int solve(self,  basic_variables=[]) except -1:
> }}}
> Setting an initial basis could be done in a new method perhaps called `warmstart(basic_variables)` or `set_basis(basic_variables)`
> 
> 

InteractiveLPBackend now has a new method `set_dictionary` and a new attribute `current_dictionary`. I didn't name it `set_basis`, to avoid confusion between the basic variables in a dictionary and those of the generic backend.



---

archive/issue_comments_251170.json:
```json
{
    "body": "I still have concerns about the new interface as well. The problem now is that `set_basis` is not defined for any backend other than `InteractiveLPBackend` (and also its interface refers to internal details of that).\n\nBut more importantly, there should be at least one example that illustrates that this new backend does something useful.",
    "created_at": "2021-02-08T04:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251170",
    "user": "https://github.com/mkoeppe"
}
```

I still have concerns about the new interface as well. The problem now is that `set_basis` is not defined for any backend other than `InteractiveLPBackend` (and also its interface refers to internal details of that).

But more importantly, there should be at least one example that illustrates that this new backend does something useful.



---

archive/issue_comments_251171.json:
```json
{
    "body": "Replying to [comment:34 mkoeppe]:\n> I still have concerns about the new interface as well. The problem now is that `set_basis` is not defined for any backend other than `InteractiveLPBackend` (and also its interface refers to internal details of that).\n\nDo you mean `set_dictionary`? It has a different interface than `set_basis` (in #18688 to be written) since the `interactive_simplex_method` is indeed very special in running the simplex method on the standard form where more auxiliary variables are introduced. I couldn't think of a way to unify `InteractiveLPBackend.set_dictionary` with other backends' set basis methods.\n\n> But more importantly, there should be at least one example that illustrates that this new backend does something useful.\n\nTrue. The current implementation enables what the first paragraph of this ticket states, by using `solver = (\"GLPK\", \"InteractiveLP\")` as in the examples in `solve`. However, it is hard to argue with doctests that this new hybrid backend is useful. Shall we close the ticket with the tag \"wontfix\" as in #18804?",
    "created_at": "2021-02-08T05:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251171",
    "user": "https://github.com/yuan-zhou"
}
```

Replying to [comment:34 mkoeppe]:
> I still have concerns about the new interface as well. The problem now is that `set_basis` is not defined for any backend other than `InteractiveLPBackend` (and also its interface refers to internal details of that).

Do you mean `set_dictionary`? It has a different interface than `set_basis` (in #18688 to be written) since the `interactive_simplex_method` is indeed very special in running the simplex method on the standard form where more auxiliary variables are introduced. I couldn't think of a way to unify `InteractiveLPBackend.set_dictionary` with other backends' set basis methods.

> But more importantly, there should be at least one example that illustrates that this new backend does something useful.

True. The current implementation enables what the first paragraph of this ticket states, by using `solver = ("GLPK", "InteractiveLP")` as in the examples in `solve`. However, it is hard to argue with doctests that this new hybrid backend is useful. Shall we close the ticket with the tag "wontfix" as in #18804?



---

archive/issue_comments_251172.json:
```json
{
    "body": "Replying to [comment:35 yzh]:\n> Replying to [comment:34 mkoeppe]:\n> > I still have concerns about the new interface as well. The problem now is that `set_basis` is not defined for any backend other than `InteractiveLPBackend` (and also its interface refers to internal details of that).\n> \n> Do you mean `set_dictionary`?\n\nYes, that's what I meant.",
    "created_at": "2021-02-08T05:28:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251172",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:35 yzh]:
> Replying to [comment:34 mkoeppe]:
> > I still have concerns about the new interface as well. The problem now is that `set_basis` is not defined for any backend other than `InteractiveLPBackend` (and also its interface refers to internal details of that).
> 
> Do you mean `set_dictionary`?

Yes, that's what I meant.



---

archive/issue_comments_251173.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-03-15T22:07:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251173",
    "user": "https://github.com/mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_251174.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-03-28T18:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251174",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251175.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251175",
    "user": "https://github.com/mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_251176.json:
```json
{
    "body": "please rebase",
    "created_at": "2021-12-04T17:23:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251176",
    "user": "https://github.com/dimpase"
}
```

please rebase



---

archive/issue_comments_251177.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-12-04T17:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251177",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_251178.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2022-04-11T05:19:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251178",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_251179.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-11T06:18:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251179",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_251180.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2022-04-11T07:29:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18498",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18498#issuecomment-251180",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:
