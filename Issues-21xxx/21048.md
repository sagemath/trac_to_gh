# Issue 21048: Graph plotting: vertex colors

archive/issues_020811.json:
```json
{
    "body": "This is a first part of #13827.\n\nCurrently setting a color for one vertex will change default pink to blue in other vertices. This patch will correct it. Also we make it possible to set a default color with `vertex_color` and have some vertices colored differently with `vertex_colors`. To test try for example\n\n```\nsage: g=graphs.PetersenGraph()\nsage: g.show()\nsage: g.show(vertex_color='green')\nsage: g.show(vertex_colors={'red': [0,1], 'blue': [3,4]})\nsage: g.show(vertex_color='green', vertex_colors={'red': [0,1], 'blue': [3,4]})\nsage: g.show(vertex_colors='green')\n```\n\n\nCC:  @paulmasson krcisman @tscrim\n\nReviewer: Paul Masson\n\nAuthor: Jori M\u00e4ntysalo\n\nBranch: 34be2bb7941f2e6f343b9c88ef42e02d7ba77522\n\nCommit: 34be2bb7941f2e6f343b9c88ef42e02d7ba77522\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21048\n\n",
    "closed_at": "2016-07-25T20:13:16Z",
    "created_at": "2016-07-18T11:41:15Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "Graph plotting: vertex colors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21048",
    "user": "https://github.com/jm58660"
}
```
This is a first part of #13827.

Currently setting a color for one vertex will change default pink to blue in other vertices. This patch will correct it. Also we make it possible to set a default color with `vertex_color` and have some vertices colored differently with `vertex_colors`. To test try for example

```
sage: g=graphs.PetersenGraph()
sage: g.show()
sage: g.show(vertex_color='green')
sage: g.show(vertex_colors={'red': [0,1], 'blue': [3,4]})
sage: g.show(vertex_color='green', vertex_colors={'red': [0,1], 'blue': [3,4]})
sage: g.show(vertex_colors='green')
```


CC:  @paulmasson krcisman @tscrim

Reviewer: Paul Masson

Author: Jori MÃ¤ntysalo

Branch: 34be2bb7941f2e6f343b9c88ef42e02d7ba77522

Commit: 34be2bb7941f2e6f343b9c88ef42e02d7ba77522

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21048





---

archive/issue_comments_287255.json:
```json
{
    "body": "<a id='comment:2'></a>On a way to more customizable graph plotting.\n\n---\nNew commits:",
    "created_at": "2016-07-18T11:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287255",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>On a way to more customizable graph plotting.

---
New commits:



---

archive/issue_comments_287256.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-18T11:44:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287256",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_287257.json:
```json
{
    "body": "<a id='comment:3'></a>Doctests pass. Documentation builds. Example runs as expected.\n\nIt looks like you took out some default rainbow coloring in the code. Since this is a part of Sage I'm unlikely to use much, I would like to understand the impact this will have on other users. While it's certainly better to have more control over the coloring, how many people are likely to complain if the rainbow coloring is gone?",
    "created_at": "2016-07-19T03:34:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287257",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:3'></a>Doctests pass. Documentation builds. Example runs as expected.

It looks like you took out some default rainbow coloring in the code. Since this is a part of Sage I'm unlikely to use much, I would like to understand the impact this will have on other users. While it's certainly better to have more control over the coloring, how many people are likely to complain if the rainbow coloring is gone?



---

archive/issue_comments_287258.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 paulmasson]:\n\n> It looks like you took out some default rainbow coloring in the code.\n\n\nI was not able to run that part of code. It seems to refer `partition`-option. However, currently\n\n```\ng = graphs.PetersenGraph()\ng.show(partition=[[1,2],[3,4]])\n```\n\nhave same problem of changing default color for non-listed vertices. With this patch they will stay pink, and also you can say\n\n```\ng.show(partition=[[1,2],[3,4]], vertex_color='gray')\n```",
    "created_at": "2016-07-19T06:48:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287258",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'></a>Replying to [comment:3 paulmasson]:

> It looks like you took out some default rainbow coloring in the code.


I was not able to run that part of code. It seems to refer `partition`-option. However, currently

```
g = graphs.PetersenGraph()
g.show(partition=[[1,2],[3,4]])
```

have same problem of changing default color for non-listed vertices. With this patch they will stay pink, and also you can say

```
g.show(partition=[[1,2],[3,4]], vertex_color='gray')
```



---

archive/issue_comments_287259.json:
```json
{
    "body": "<a id='comment:5'></a>Sidenote, there was also a plain error in documentation: \"If a vertex is not listed, it looks invisible on the resulting plot (it does not get drawn).\" was not true, and is not after this patch.",
    "created_at": "2016-07-19T07:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287259",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>Sidenote, there was also a plain error in documentation: "If a vertex is not listed, it looks invisible on the resulting plot (it does not get drawn)." was not true, and is not after this patch.



---

archive/issue_comments_287260.json:
```json
{
    "body": "<a id='comment:6'></a>The current code doesn't appear to have a default color. Nonlisted vertices are given a random color, not a default color. This ticket modifies that behavior.\n\nIf that is a good idea then I'm fine with it, but I would rather have some additional input. Nathann Cohen wrote the original coloring code in 2009, so I'd like to hear from him or interested others on this change.",
    "created_at": "2016-07-19T19:49:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287260",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:6'></a>The current code doesn't appear to have a default color. Nonlisted vertices are given a random color, not a default color. This ticket modifies that behavior.

If that is a good idea then I'm fine with it, but I would rather have some additional input. Nathann Cohen wrote the original coloring code in 2009, so I'd like to hear from him or interested others on this change.



---

archive/issue_comments_287261.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 paulmasson]:\n> The current code doesn't appear to have a default color. Nonlisted vertices are given a random color, not a default color.\n\n\nKind of, but always same color. Setting a color of one vertex to blue or green make others red, setting a color to red make others light blue etc.\n\n> If that is a good idea then I'm fine with it, but I would rather have some additional input. Nathann Cohen wrote the original coloring code in 2009, so I'd like to hear from him or interested others on this change.\n\n\nMe too, but Nathann faded from developers some time ago. `:=(` See for example https://groups.google.com/forum/#!topic/sage-devel/-Z5kXJv6ZQA",
    "created_at": "2016-07-20T01:06:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287261",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:7'></a>Replying to [comment:6 paulmasson]:
> The current code doesn't appear to have a default color. Nonlisted vertices are given a random color, not a default color.


Kind of, but always same color. Setting a color of one vertex to blue or green make others red, setting a color to red make others light blue etc.

> If that is a good idea then I'm fine with it, but I would rather have some additional input. Nathann Cohen wrote the original coloring code in 2009, so I'd like to hear from him or interested others on this change.


Me too, but Nathann faded from developers some time ago. `:=(` See for example https://groups.google.com/forum/#!topic/sage-devel/-Z5kXJv6ZQA



---

archive/issue_comments_287262.json:
```json
{
    "body": "<a id='comment:8'></a>Jori, I started reading sage-devel some time after that thread, so thanks for sharing. I've seen some other comments since then about the same topic but didn't realize it was such an issue. I've removed him from this ticket.\n\nI'd like to wait a couple days to see if Karl-Dieter or Travis want to chime in. If we don't hear from them soon then I'll set positive review. I certainly don't want to deter an active developer!",
    "created_at": "2016-07-20T01:59:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287262",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:8'></a>Jori, I started reading sage-devel some time after that thread, so thanks for sharing. I've seen some other comments since then about the same topic but didn't realize it was such an issue. I've removed him from this ticket.

I'd like to wait a couple days to see if Karl-Dieter or Travis want to chime in. If we don't hear from them soon then I'll set positive review. I certainly don't want to deter an active developer!



---

archive/issue_comments_287263.json:
```json
{
    "body": "<a id='comment:9'></a>I don't have a real preference for this because I never really use it. If you want additional input, you're probably best posting to sage-devel.",
    "created_at": "2016-07-20T03:02:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287263",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>I don't have a real preference for this because I never really use it. If you want additional input, you're probably best posting to sage-devel.



---

archive/issue_comments_287264.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-21T21:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287264",
    "user": "https://github.com/paulmasson"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_287265.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-07-22T18:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287265",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_287266.json:
```json
{
    "body": "<a id='comment:11'></a>\n```\nsage -t --long src/sage/combinat/words/finite_word.py\n**********************************************************************\nFile \"src/sage/combinat/words/finite_word.py\", line 116, in sage.combinat.words.finite_word\nFailed example:\n    st.show(word_labels=True)\nExpected nothing\nGot:\n    doctest:270: DeprecationWarning: Use of vertex_colors=<string> is deprecated, use vertex_color=<string> and/or vertex_colors=<dict>.\n    See http://trac.sagemath.org/21048 for details.\n**********************************************************************\n1 item had failures:\n   1 of  56 in sage.combinat.words.finite_word\n    [1244 tests, 1 failure, 11.63 s]\nsage -t --long src/sage/combinat/words/suffix_trees.py\n**********************************************************************\nFile \"src/sage/combinat/words/suffix_trees.py\", line 867, in sage.combinat.words.suffix_trees.ImplicitSuffixTree.?\nFailed example:\n    ImplicitSuffixTree(Word('cacao')).plot(word_labels=True)\nExpected:\n    Graphics object consisting of 23 graphics primitives\nGot:\n    doctest:270: DeprecationWarning: Use of vertex_colors=<string> is deprecated, use vertex_color=<string> and/or vertex_colors=<dict>.\n    See http://trac.sagemath.org/21048 for details.\n    Graphics object consisting of 23 graphics primitives\n**********************************************************************\n1 item had failures:\n   1 of   7 in sage.combinat.words.suffix_trees.ImplicitSuffixTree.?\n    [245 tests, 1 failure, 3.03 s]\n```",
    "created_at": "2016-07-22T18:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287266",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:11'></a>
```
sage -t --long src/sage/combinat/words/finite_word.py
**********************************************************************
File "src/sage/combinat/words/finite_word.py", line 116, in sage.combinat.words.finite_word
Failed example:
    st.show(word_labels=True)
Expected nothing
Got:
    doctest:270: DeprecationWarning: Use of vertex_colors=<string> is deprecated, use vertex_color=<string> and/or vertex_colors=<dict>.
    See http://trac.sagemath.org/21048 for details.
**********************************************************************
1 item had failures:
   1 of  56 in sage.combinat.words.finite_word
    [1244 tests, 1 failure, 11.63 s]
sage -t --long src/sage/combinat/words/suffix_trees.py
**********************************************************************
File "src/sage/combinat/words/suffix_trees.py", line 867, in sage.combinat.words.suffix_trees.ImplicitSuffixTree.?
Failed example:
    ImplicitSuffixTree(Word('cacao')).plot(word_labels=True)
Expected:
    Graphics object consisting of 23 graphics primitives
Got:
    doctest:270: DeprecationWarning: Use of vertex_colors=<string> is deprecated, use vertex_color=<string> and/or vertex_colors=<dict>.
    See http://trac.sagemath.org/21048 for details.
    Graphics object consisting of 23 graphics primitives
**********************************************************************
1 item had failures:
   1 of   7 in sage.combinat.words.suffix_trees.ImplicitSuffixTree.?
    [245 tests, 1 failure, 3.03 s]
```



---

archive/issue_comments_287267.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-23T08:05:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287267",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_287268.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-07-23T08:08:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287268",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_287269.json:
```json
{
    "body": "<a id='comment:13'></a>Badly corrected, but at least works. I guess words- and posets-directories should be checked when graph plotting is ready.",
    "created_at": "2016-07-23T08:08:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287269",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:13'></a>Badly corrected, but at least works. I guess words- and posets-directories should be checked when graph plotting is ready.



---

archive/issue_comments_287270.json:
```json
{
    "body": "<a id='comment:14'></a>`vertex_colors` is defined as a dicitionary in `suffix_trees.py` as it should be, so the changes you made aren't the best. The problem is the misspelling `veretex_colors` on line 885. Please revert the changes you just made and correct that spelling. I've already tested this and it solves both doctest failures.",
    "created_at": "2016-07-23T20:20:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287270",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:14'></a>`vertex_colors` is defined as a dicitionary in `suffix_trees.py` as it should be, so the changes you made aren't the best. The problem is the misspelling `veretex_colors` on line 885. Please revert the changes you just made and correct that spelling. I've already tested this and it solves both doctest failures.



---

archive/issue_comments_287271.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-24T06:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287271",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_287272.json:
```json
{
    "body": "<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-07-24T06:26:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287272",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_287273.json:
```json
{
    "body": "<a id='comment:17'></a>I was blind.",
    "created_at": "2016-07-24T06:39:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287273",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:17'></a>I was blind.



---

archive/issue_comments_287274.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-24T19:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287274",
    "user": "https://github.com/paulmasson"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_287275.json:
```json
{
    "body": "<a id='comment:18'></a>All doctests pass in `combinat/words` and `combinat/posets`",
    "created_at": "2016-07-24T19:56:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287275",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:18'></a>All doctests pass in `combinat/words` and `combinat/posets`



---

archive/issue_events_056255.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-25T20:13:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21048#event-56255"
}
```



---

archive/issue_comments_287276.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-25T20:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21048",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21048#issuecomment-287276",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
