# Issue 21957: Singular does not build shared libraries on Cygwin / Windows

archive/issues_021720.json:
```json
{
    "assignees": [],
    "body": "This is a followup to #21848 on the more specific issue that Singular does not build shared libraries on Windows.\n\nI think this was a problem even before Singular 4, but it didn't specifically cause any problems in testing.\n\nUpstream pull request: https://github.com/Singular/Sources/pull/808\n\nDepends on #22425\n\nKeywords: **singular cygwin windows**\n\nBranch/Commit: **[u/embray/cygwin/ticket-21957](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-21957) @ [`13d032a`](https://github.com/sagemath/sagetrac-mirror/commit/13d032a13ac64f0e78cfa67d3d6105866a414ea0)**\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\nReviewer: **Erik Bray**\n\nComponent: **porting: Cygwin**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21957_\n\n",
    "closed_at": "2017-04-03T12:22:45Z",
    "created_at": "2016-11-24T11:11:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
        "https://github.com/sagemath/sage/labels/wontfix"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Singular does not build shared libraries on Cygwin / Windows",
    "type": "issue",
    "updated_at": "2017-04-03T12:22:45Z",
    "url": "https://github.com/sagemath/sage/issues/21957",
    "user": "https://github.com/embray"
}
```
This is a followup to #21848 on the more specific issue that Singular does not build shared libraries on Windows.

I think this was a problem even before Singular 4, but it didn't specifically cause any problems in testing.

Upstream pull request: https://github.com/Singular/Sources/pull/808

Depends on #22425

Keywords: **singular cygwin windows**

Branch/Commit: **[u/embray/cygwin/ticket-21957](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-21957) @ [`13d032a`](https://github.com/sagemath/sagetrac-mirror/commit/13d032a13ac64f0e78cfa67d3d6105866a414ea0)**

Upstream: **Fixed upstream, but not in a stable release.**

Reviewer: **Erik Bray**

Component: **porting: Cygwin**

_Issue created by migration from https://trac.sagemath.org/ticket/21957_





---

archive/issue_events_307732.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-24T11:11:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307732"
}
```



---

archive/issue_events_307733.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-24T11:11:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20cygwin",
    "label_color": "000080",
    "label_name": "c: porting: cygwin",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307733"
}
```



---

archive/issue_events_307734.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-24T11:11:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307734"
}
```



---

archive/issue_events_307735.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-24T11:11:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307735"
}
```



---

archive/issue_comments_323574.json:
```json
{
    "body": "Changed keywords from none to **singular cygwin windows**",
    "created_at": "2016-11-24T11:11:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323574",
    "user": "https://github.com/embray"
}
```

Changed keywords from none to **singular cygwin windows**



---

archive/issue_comments_323575.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n I think this was a problem even before Singular 4, but it didn't specifically cause any problems in testing.\n \n-I *have* gotten it working and now just need to clean up my work and prepare a patch to submit upstream.\n+Upstream pull request: https://github.com/Singular/Sources/pull/808\n``````\n",
    "created_at": "2016-12-02T10:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323575",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 I think this was a problem even before Singular 4, but it didn't specifically cause any problems in testing.
 
-I *have* gotten it working and now just need to clean up my work and prepare a patch to submit upstream.
+Upstream pull request: https://github.com/Singular/Sources/pull/808
``````




---

archive/issue_comments_323576.json:
```json
{
    "body": "Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**",
    "created_at": "2016-12-02T10:34:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323576",
    "user": "https://github.com/embray"
}
```

Changed upstream from **Not yet reported upstream; Will do shortly.** to **Reported upstream. No feedback yet.**



---

archive/issue_comments_323577.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**",
    "created_at": "2017-02-02T12:32:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323577",
    "user": "https://github.com/embray"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Reported upstream. Developers acknowledge bug.**



---

archive/issue_comments_323578.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2017-02-07T17:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323578",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_comments_323579.json:
```json
{
    "body": "Commit: **[`13d032a`](https://github.com/sagemath/sagetrac-mirror/commit/13d032a13ac64f0e78cfa67d3d6105866a414ea0)**",
    "created_at": "2017-02-07T17:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323579",
    "user": "https://github.com/embray"
}
```

Commit: **[`13d032a`](https://github.com/sagemath/sagetrac-mirror/commit/13d032a13ac64f0e78cfa67d3d6105866a414ea0)**



---

archive/issue_events_307736.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-02-07T17:24:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307736"
}
```



---

archive/issue_events_307737.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-02-07T17:24:51Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307737"
}
```



---

archive/issue_events_307738.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-02-07T17:24:51Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307738"
}
```



---

archive/issue_comments_323580.json:
```json
{
    "body": "Branch: **[u/embray/cygwin/ticket-21957](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-21957)**",
    "created_at": "2017-02-07T17:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323580",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/cygwin/ticket-21957](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/cygwin/ticket-21957)**



---

archive/issue_comments_323581.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nHere are some patches to Singular based on the current version of my upstream PR.  This works for me, and shouldn't break anything on any other platforms, so I'd like to move forward with it regardless what the eventual upstream solution is.  Right now this is one of the biggest blockers on Cygwin.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13d032a13ac64f0e78cfa67d3d6105866a414ea0\"><code>13d032a</code></a></td><td><code>Adds patches (pre- and post-autogen) to Singular to enabling building shared libs on Windows</code></td></tr></table>\n",
    "created_at": "2017-02-07T17:24:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323581",
    "user": "https://github.com/embray"
}
```

<div id="comment:4" align="right">comment:4</div>

Here are some patches to Singular based on the current version of my upstream PR.  This works for me, and shouldn't break anything on any other platforms, so I'd like to move forward with it regardless what the eventual upstream solution is.  Right now this is one of the biggest blockers on Cygwin.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13d032a13ac64f0e78cfa67d3d6105866a414ea0"><code>13d032a</code></a></td><td><code>Adds patches (pre- and post-autogen) to Singular to enabling building shared libs on Windows</code></td></tr></table>




---

archive/issue_comments_323582.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI see that this has been merged upstream. Do you know if it's in #22425?",
    "created_at": "2017-03-14T18:25:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323582",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">comment:5</div>

I see that this has been merged upstream. Do you know if it's in #22425?



---

archive/issue_comments_323583.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIt might be?? How could I tell?",
    "created_at": "2017-03-16T22:20:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323583",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">comment:6</div>

It might be?? How could I tell?



---

archive/issue_comments_323584.json:
```json
{
    "body": "Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2017-03-16T22:21:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323584",
    "user": "https://github.com/embray"
}
```

Changed upstream from **Reported upstream. Developers acknowledge bug.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_323585.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nTo answer my own question I looked at the tarball in #22425, and it looks like it does indeed include my patches.  So if #22425 is merged soon it would obviate the need for including this patch.",
    "created_at": "2017-03-16T22:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323585",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">comment:8</div>

To answer my own question I looked at the tarball in #22425, and it looks like it does indeed include my patches.  So if #22425 is merged soon it would obviate the need for including this patch.



---

archive/issue_comments_323586.json:
```json
{
    "body": "Dependencies: **#22425**",
    "created_at": "2017-03-16T22:24:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323586",
    "user": "https://github.com/embray"
}
```

Dependencies: **#22425**



---

archive/issue_comments_323587.json:
```json
{
    "body": "Changed author from **Erik Bray** to none",
    "created_at": "2017-03-17T08:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323587",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Erik Bray** to none



---

archive/issue_events_307739.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-17T08:59:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307739"
}
```



---

archive/issue_events_307740.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-17T08:59:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307740"
}
```



---

archive/issue_comments_323588.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2017-03-17T08:59:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323588",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Erik Bray**



---

archive/issue_events_307741.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-17T08:59:23Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307741"
}
```



---

archive/issue_events_307742.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-17T08:59:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307742"
}
```



---

archive/issue_events_307743.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-17T08:59:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307743"
}
```



---

archive/issue_events_307744.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-03T12:22:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/wontfix",
    "label_color": "a6a6a6",
    "label_name": "wontfix",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307744"
}
```



---

archive/issue_comments_323589.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nClosing as resolved.",
    "created_at": "2017-04-03T12:22:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21957#issuecomment-323589",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">comment:10</div>

Closing as resolved.



---

archive/issue_events_307745.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-03T12:22:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307745"
}
```



---

archive/issue_events_307746.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-04-03T12:22:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21957",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21957#event-307746"
}
```
