# Issue 21769: Adding Baum-Sweet Word

archive/issues_021532.json:
```json
{
    "body": "Add the Baum-Sweet word to word_generators.\n\nInformation on the Baum-Sweet word can be found at https://en.wikipedia.org/wiki/Baum%E2%80%93Sweet_sequence\n\n\nCC:  @videlec @seblabbe\n\nKeywords: words, combinat, combinatorics, days79\n\nBranch/Commit: cc3c8b0ccda7162e7941bb30c31c3b9379cead05\n\nReviewer: Vincent Delecroix\n\nAuthor: Marco Cognetta\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21769\n\n",
    "closed_at": "2016-11-24T23:41:04Z",
    "created_at": "2016-10-26T05:49:29Z",
    "labels": [
        "component: combinatorics",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Adding Baum-Sweet Word",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21769",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```
Add the Baum-Sweet word to word_generators.

Information on the Baum-Sweet word can be found at https://en.wikipedia.org/wiki/Baum%E2%80%93Sweet_sequence


CC:  @videlec @seblabbe

Keywords: words, combinat, combinatorics, days79

Branch/Commit: cc3c8b0ccda7162e7941bb30c31c3b9379cead05

Reviewer: Vincent Delecroix

Author: Marco Cognetta

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21769





---

archive/issue_comments_401813.json:
```json
{
    "body": "<a id='comment:1'></a>You can pass in words:\n\n```\nsage: d = {Word('00'):Word('0000'), Word('01'):Word('1001'),\n....:      Word('10'):Word('0100'), Word('11'):Word('1101')}\nsage: WordMorphism(d)\nWordMorphism: 00->0000, 01->1001, 10->0100, 11->1101\n```\nHowever, it is a bit cumbersome.\n\nI'm not an expert enough on words to say if this is a valid morphism or not, but at least my na\u00efve thought (i.e., equating to a morphism of a free monoid) is the domain must be letters. So I would expect this assumption in the code. Vincent, perhaps you can comment more on this?",
    "created_at": "2016-10-26T14:59:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401813",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'></a>You can pass in words:

```
sage: d = {Word('00'):Word('0000'), Word('01'):Word('1001'),
....:      Word('10'):Word('0100'), Word('11'):Word('1101')}
sage: WordMorphism(d)
WordMorphism: 00->0000, 01->1001, 10->0100, 11->1101
```
However, it is a bit cumbersome.

I'm not an expert enough on words to say if this is a valid morphism or not, but at least my naïve thought (i.e., equating to a morphism of a free monoid) is the domain must be letters. So I would expect this assumption in the code. Vincent, perhaps you can comment more on this?



---

archive/issue_comments_401814.json:
```json
{
    "body": "<a id='comment:2'></a>The alphabet can be anything, including strings of length two. The syntax `\"00->0000,01->1001,10->0100,11->1101\"` is only a wrapper to ease self-evident definitions (imagine if the alphabet contains the string '->'...), so it won't work when there is an ambiguity, which is good. We wight be a bit more flexible, but we should not guess in case of ambiguity.\n\nBe careful by the way that Travis's proposition lead to a morphism  with domain `Finite words over {word: 00, word: 01, word: 10, word: 11}` and codomain `Finite words over {'0', '1'}` (you might have expected the codomain to be `Finite words over {word: 00, word: 01, word: 10, word: 11}`, but how could Sage guess?).",
    "created_at": "2016-10-26T16:22:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401814",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:2'></a>The alphabet can be anything, including strings of length two. The syntax `"00->0000,01->1001,10->0100,11->1101"` is only a wrapper to ease self-evident definitions (imagine if the alphabet contains the string '->'...), so it won't work when there is an ambiguity, which is good. We wight be a bit more flexible, but we should not guess in case of ambiguity.

Be careful by the way that Travis's proposition lead to a morphism  with domain `Finite words over {word: 00, word: 01, word: 10, word: 11}` and codomain `Finite words over {'0', '1'}` (you might have expected the codomain to be `Finite words over {word: 00, word: 01, word: 10, word: 11}`, but how could Sage guess?).



---

archive/issue_comments_401815.json:
```json
{
    "body": "<a id='comment:3'></a>Thanks for the info. Just to be clear, how would you recommend implementing the morphism that I mentioned in the ticket?",
    "created_at": "2016-10-26T16:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401815",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

<a id='comment:3'></a>Thanks for the info. Just to be clear, how would you recommend implementing the morphism that I mentioned in the ticket?



---

archive/issue_comments_401816.json:
```json
{
    "body": "<a id='comment:4'></a>From the ticket description, I don't undersand what is your morphism. Could you be more specific about the domain and the codomain. In Sage a word morphism is a semigroup morphism from a free monoid to another.",
    "created_at": "2016-10-27T11:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401816",
    "user": "https://github.com/videlec"
}
```

<a id='comment:4'></a>From the ticket description, I don't undersand what is your morphism. Could you be more specific about the domain and the codomain. In Sage a word morphism is a semigroup morphism from a free monoid to another.



---

archive/issue_comments_401817.json:
```json
{
    "body": "<a id='comment:5'></a>Here is the motivation that I had when I made this ticket: https://en.wikipedia.org/wiki/Baum%E2%80%93Sweet_sequence\n\nI think that it would be possible to do this by doing something like\n\n```\na->aa\nb->ca\nc->ba\nd->db\n```\n\nand then just change a to 00, b to 01, c to 10, and d to 11.",
    "created_at": "2016-10-27T12:23:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401817",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

<a id='comment:5'></a>Here is the motivation that I had when I made this ticket: https://en.wikipedia.org/wiki/Baum%E2%80%93Sweet_sequence

I think that it would be possible to do this by doing something like

```
a->aa
b->ca
c->ba
d->db
```

and then just change a to 00, b to 01, c to 10, and d to 11.



---

archive/issue_comments_401818.json:
```json
{
    "body": "<a id='comment:6'></a>Indeed it is a morphic but not purely morphic word. And the precise commands to generate the sequence\n\n```\nsage: p = WordMorphism('a->00,b->01,c->10,d->11')\nsage: s = WordMorphism('a->aa,b->ca,c->ba,d->db')\nsage: p(s.fixed_point('d'))\nword: 1101100001000000100000000000000001000000...\n```",
    "created_at": "2016-10-27T13:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401818",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>Indeed it is a morphic but not purely morphic word. And the precise commands to generate the sequence

```
sage: p = WordMorphism('a->00,b->01,c->10,d->11')
sage: s = WordMorphism('a->aa,b->ca,c->ba,d->db')
sage: p(s.fixed_point('d'))
word: 1101100001000000100000000000000001000000...
```



---

archive/issue_comments_401819.json:
```json
{
    "body": "<a id='comment:7'></a>I would suggest to either:\n- close this ticket as won't fix\n- or add a `baum_sweet`\u00a0to `words` so that one can do\n\n```\nsage: words.baum_sweet()\nword: 1101100001000000100000000000000001000000...\n```",
    "created_at": "2016-10-27T14:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401819",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>I would suggest to either:
- close this ticket as won't fix
- or add a `baum_sweet` to `words` so that one can do

```
sage: words.baum_sweet()
word: 1101100001000000100000000000000001000000...
```



---

archive/issue_comments_401820.json:
```json
{
    "body": "<a id='comment:8'></a>I will add it to the generators in the next day or so.\n\nThanks for the help.",
    "created_at": "2016-10-27T14:28:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401820",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

<a id='comment:8'></a>I will add it to the generators in the next day or so.

Thanks for the help.



---

archive/issue_comments_401821.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mcognetta/wordmorphism_does_not_allow_elements_of_length___1_in_the_domain\"",
    "created_at": "2016-10-31T07:56:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401821",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

Changing branch from "" to "u/mcognetta/wordmorphism_does_not_allow_elements_of_length___1_in_the_domain"



---

archive/issue_comments_401822.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-31T07:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401822",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_401823.json:
```json
{
    "body": "Changing commit from \"\" to \"3812f358f4e4cc4bcf3b4ead073d16c6c781737e\"",
    "created_at": "2016-10-31T07:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401823",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

Changing commit from "" to "3812f358f4e4cc4bcf3b4ead073d16c6c781737e"



---

archive/issue_comments_401824.json:
```json
{
    "body": "<a id='comment:10'></a>Changed the name of the ticket to reflect what it actually does and added a patch to add the Baum-Sweet Word to word_generators.py\n\n---\nNew commits:",
    "created_at": "2016-10-31T07:58:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401824",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

<a id='comment:10'></a>Changed the name of the ticket to reflect what it actually does and added a patch to add the Baum-Sweet Word to word_generators.py

---
New commits:



---

archive/issue_comments_401825.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-31T09:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401825",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_401826.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2016-10-31T09:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401826",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_401827.json:
```json
{
    "body": "<a id='comment:11'></a>Dear Marco,\n\n1) The sequence you used does not coincide with wikipedia at the seventh position\n\n```\n1, 1, 0, 1, 1, 0, 0, 0 # in the ticket\n1, 1, 0, 1, 1, 0, 0, 1 # on wikipedia\n```\n  there is something wrong with the substitution definition.\n\n2) You should say that the Baum-Sweet word is on the alphabet `{0, 1}`.\n\n3) You should add a reference to wikipedia (see for example `finite_word.py` line 3568 on how to do that).\n\n4) I do not like calling `f: 00 -> 0000, 01 -> 1001, etc` a morphism. The reason is that you consider the alphabet `{0,1}` and `f` is not a morphism of the free monoid `{0, 1}*`. It is a morphism of the submodules of words of even length that is generated by `{00, 01, 10, 11}` ( it is a free monoid on these four generators). Either you say that it is a morphism on this specific submonoid or you say something more vague such as \"rewriting rule\".",
    "created_at": "2016-10-31T09:16:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401827",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>Dear Marco,

1) The sequence you used does not coincide with wikipedia at the seventh position

```
1, 1, 0, 1, 1, 0, 0, 0 # in the ticket
1, 1, 0, 1, 1, 0, 0, 1 # on wikipedia
```
  there is something wrong with the substitution definition.

2) You should say that the Baum-Sweet word is on the alphabet `{0, 1}`.

3) You should add a reference to wikipedia (see for example `finite_word.py` line 3568 on how to do that).

4) I do not like calling `f: 00 -> 0000, 01 -> 1001, etc` a morphism. The reason is that you consider the alphabet `{0,1}` and `f` is not a morphism of the free monoid `{0, 1}*`. It is a morphism of the submodules of words of even length that is generated by `{00, 01, 10, 11}` ( it is a free monoid on these four generators). Either you say that it is a morphism on this specific submonoid or you say something more vague such as "rewriting rule".



---

archive/issue_comments_401828.json:
```json
{
    "body": "<a id='comment:12'></a>Thanks for catching that and the other advice.\n\nJust to be clear, \n>It is a morphism of the __submodule__ of words of even length that is generated by {00, 01, 10, 11}\n\n\nDid you mean submonoid?\n\nIf so, would\n\n```\nThe Baum-Sweet Sequence is an infinite word over the alphabet `\\{0,1\\}` defined as a\nfixed point of the following morphism over the submodule of words of even length\ngenerated by `\\{00,01,10,11\\}`:\n```\n\nbe sufficient or should I just write it is a word over `\\{0,1\\}` with the following string substitution rules...",
    "created_at": "2016-10-31T10:47:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401828",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

<a id='comment:12'></a>Thanks for catching that and the other advice.

Just to be clear, 
>It is a morphism of the __submodule__ of words of even length that is generated by {00, 01, 10, 11}


Did you mean submonoid?

If so, would

```
The Baum-Sweet Sequence is an infinite word over the alphabet `\{0,1\}` defined as a
fixed point of the following morphism over the submodule of words of even length
generated by `\{00,01,10,11\}`:
```

be sufficient or should I just write it is a word over `\{0,1\}` with the following string substitution rules...



---

archive/issue_comments_401829.json:
```json
{
    "body": "<a id='comment:13'></a>Replying to [comment:12 mcognetta]:\n> Thanks for catching that and the other advice.\n> \n> Just to be clear, \n> >It is a morphism of the __submodule__ of words of even length that is generated by {00, 01, 10, 11}\n\n> \n> Did you mean submonoid?\n\n\nYes. Sorry.\n\n> If so, would\n> \n> ```\n> The Baum-Sweet Sequence is an infinite word over the alphabet `\\{0,1\\}` defined as a\n> fixed point of the following morphism over the submodule of words of even length\n> generated by `\\{00,01,10,11\\}`:\n> ```\n\n\nThis is a bit formal but precise.\n \n> be sufficient or should I just write it is a word over `\\{0,1\\}` with the following string substitution rules...\n\n\nThis is less formal but less precise... up to you.\n\nIf it was me, I would actually use the second formulation first and then make a remark about the fact that this substitution rule could be define as a morphism on the submonoid of words of even length.",
    "created_at": "2016-10-31T11:10:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401829",
    "user": "https://github.com/videlec"
}
```

<a id='comment:13'></a>Replying to [comment:12 mcognetta]:
> Thanks for catching that and the other advice.
> 
> Just to be clear, 
> >It is a morphism of the __submodule__ of words of even length that is generated by {00, 01, 10, 11}

> 
> Did you mean submonoid?


Yes. Sorry.

> If so, would
> 
> ```
> The Baum-Sweet Sequence is an infinite word over the alphabet `\{0,1\}` defined as a
> fixed point of the following morphism over the submodule of words of even length
> generated by `\{00,01,10,11\}`:
> ```


This is a bit formal but precise.
 
> be sufficient or should I just write it is a word over `\{0,1\}` with the following string substitution rules...


This is less formal but less precise... up to you.

If it was me, I would actually use the second formulation first and then make a remark about the fact that this substitution rule could be define as a morphism on the submonoid of words of even length.



---

archive/issue_comments_401830.json:
```json
{
    "body": "<a id='comment:14'></a>That was what I was considering also.\n\nThanks for the help.",
    "created_at": "2016-10-31T11:13:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401830",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

<a id='comment:14'></a>That was what I was considering also.

Thanks for the help.



---

archive/issue_comments_401831.json:
```json
{
    "body": "Changing commit from \"3812f358f4e4cc4bcf3b4ead073d16c6c781737e\" to \"22d56e3828500d55a1b6f948f77d8470b1bf11eb\"",
    "created_at": "2016-10-31T12:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401831",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3812f358f4e4cc4bcf3b4ead073d16c6c781737e" to "22d56e3828500d55a1b6f948f77d8470b1bf11eb"



---

archive/issue_comments_401832.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-31T12:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401832",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_401833.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-31T12:11:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401833",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_401834.json:
```json
{
    "body": "<a id='comment:17'></a>Nicer. There is no need to have twice the substitution rules in the documentation. You can just write\n\n```\nThe substitution rule above can be considered as a morphism\non the submonoid of `\\{0,1\\}` generated by `\\{00,01,10,11\\}`\n(which is a free monoid on these generators).\n```\n(and be careful you wrote \"submodule\")\n\nIt would be nice to illustrate some of the properties of the sequence in the `EXAMPLES` section. For example\n\n```\nsage: w = words.BaumSweetWord()\nsage: f = lambda n: '1' if all(len(x)%2 == 0 for x in ''.join(map(str,ZZ(n).digits(2))).split('1')) else '0'\nsage: all(f(i) == w[i] for i in range(100))\nTrue\n```\nThough I do not like so much the definition of `f` given above.",
    "created_at": "2016-10-31T12:26:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401834",
    "user": "https://github.com/videlec"
}
```

<a id='comment:17'></a>Nicer. There is no need to have twice the substitution rules in the documentation. You can just write

```
The substitution rule above can be considered as a morphism
on the submonoid of `\{0,1\}` generated by `\{00,01,10,11\}`
(which is a free monoid on these generators).
```
(and be careful you wrote "submodule")

It would be nice to illustrate some of the properties of the sequence in the `EXAMPLES` section. For example

```
sage: w = words.BaumSweetWord()
sage: f = lambda n: '1' if all(len(x)%2 == 0 for x in ''.join(map(str,ZZ(n).digits(2))).split('1')) else '0'
sage: all(f(i) == w[i] for i in range(100))
True
```
Though I do not like so much the definition of `f` given above.



---

archive/issue_comments_401835.json:
```json
{
    "body": "Hi, sorry, I had a visitor last week and I was not working during the weekend... In this comment, I am replying only to the description of the ticket:\n\nReplying to [ticket:21769 mcognetta]:\n> WordMorphism fails with morphisms that have domains with elements of greater than length 1.\n\n\nI do not agree, letters can be anything that is hashable:\n\n```\nsage: m = WordMorphism({\n....: (0,0):[(0,0),(0,0)], \n....: (0,1):[(1,0),(0,1)], \n....: (1,0):[(0,1),(0,0)], \n....: (1,1):[(1,1),(0,1)]})\n....: \nsage: \nsage: m\nWordMorphism: (0, 0)->(0, 0),(0, 0), (0, 1)->(1, 0),(0, 1), (1, 0)->(0, 1),(0, 0), (1, 1)->(1, 1),(0, 1)\nsage: m([(0,0)])\nword: (0, 0),(0, 0)\nsage: m([(0,0),(1,0),(0,1)])\nword: (0, 0),(0, 0),(0, 1),(0, 0),(1, 0),(0, 1)\nsage: m([(0,0),(1,0),(0,1),(1,1),(1,1)])\nword: (0, 0),(0, 0),(0, 1),(0, 0),(1, 0),(0, 1),(1, 1),(0, 1),(1, 1),(0, 1)\nsage: m.fixed_point((0,0))\nword: (0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),...\n```\n\nBut then those letter of arbitrary length are still considered as of length 1. Is this what you want?\n\n```\nsage: w = m([(0,0)])\nsage: w\nword: (0, 0),(0, 0)\nsage: w.length()\n2\n```\n\n> There is also some unfortunate behavior if you try to define the morphism as a dict.\n\n\nIn the documentation, you will see that the images must be defined as a list. For example, Thue Morse morphism can be defined like this using a dict:\n\n```\nsage: WordMorphism({0:[0,1], 1:[1,0]})\nWordMorphism: 0->01, 1->10\n```\n\nTherefore, I do not see what you are expecting from this part of the description of the ticket:\n\n> {{{\n> sage: WordMorphism({00:0000,01:1001,10:0100,11:1101})\n> DeprecationWarning: use 0o as octal prefix instead of 0\n> If you do not want this number to be interpreted as octal, remove the leading zeros.\n> See http://trac.sagemath.org/17413 for details.\n>   exec(code_obj, self.user_global_ns, self.user_ns)\n> WordMorphism: 0->0, 1->1001, 10->64, 11->1101\n> }}}\n\n\nNote also that leading zero are intepreted as octal system in Python:\n\n```\nsage: 0100\n64\n```\n\n> It makes sense why the above example does not work, but it would be nice if one could do it this way.\n\n\nWhat do you mean by \"this way\"? Because I do not think that we want to change the fact that 0100 is 64 in Python...\n\nA morphism is a function which satisfies f(uv) = f(u)f(v). Therefore, defining the images on the letters is sufficient. Maybe what you want to implement is something more general (like a substitution). If yes, I think it would be easier to implement as a new Python class in a new file substitution.py, instead of generalizing morphism.py.\n\nWould it be possible that the description of the ticket be updated to what is now the current goal of the ticket? Thank you!",
    "created_at": "2016-10-31T12:42:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401835",
    "user": "https://github.com/seblabbe"
}
```

Hi, sorry, I had a visitor last week and I was not working during the weekend... In this comment, I am replying only to the description of the ticket:

Replying to [ticket:21769 mcognetta]:
> WordMorphism fails with morphisms that have domains with elements of greater than length 1.


I do not agree, letters can be anything that is hashable:

```
sage: m = WordMorphism({
....: (0,0):[(0,0),(0,0)], 
....: (0,1):[(1,0),(0,1)], 
....: (1,0):[(0,1),(0,0)], 
....: (1,1):[(1,1),(0,1)]})
....: 
sage: 
sage: m
WordMorphism: (0, 0)->(0, 0),(0, 0), (0, 1)->(1, 0),(0, 1), (1, 0)->(0, 1),(0, 0), (1, 1)->(1, 1),(0, 1)
sage: m([(0,0)])
word: (0, 0),(0, 0)
sage: m([(0,0),(1,0),(0,1)])
word: (0, 0),(0, 0),(0, 1),(0, 0),(1, 0),(0, 1)
sage: m([(0,0),(1,0),(0,1),(1,1),(1,1)])
word: (0, 0),(0, 0),(0, 1),(0, 0),(1, 0),(0, 1),(1, 1),(0, 1),(1, 1),(0, 1)
sage: m.fixed_point((0,0))
word: (0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),(0, 0),...
```

But then those letter of arbitrary length are still considered as of length 1. Is this what you want?

```
sage: w = m([(0,0)])
sage: w
word: (0, 0),(0, 0)
sage: w.length()
2
```

> There is also some unfortunate behavior if you try to define the morphism as a dict.


In the documentation, you will see that the images must be defined as a list. For example, Thue Morse morphism can be defined like this using a dict:

```
sage: WordMorphism({0:[0,1], 1:[1,0]})
WordMorphism: 0->01, 1->10
```

Therefore, I do not see what you are expecting from this part of the description of the ticket:

> {{{
> sage: WordMorphism({00:0000,01:1001,10:0100,11:1101})
> DeprecationWarning: use 0o as octal prefix instead of 0
> If you do not want this number to be interpreted as octal, remove the leading zeros.
> See http://trac.sagemath.org/17413 for details.
>   exec(code_obj, self.user_global_ns, self.user_ns)
> WordMorphism: 0->0, 1->1001, 10->64, 11->1101
> }}}


Note also that leading zero are intepreted as octal system in Python:

```
sage: 0100
64
```

> It makes sense why the above example does not work, but it would be nice if one could do it this way.


What do you mean by "this way"? Because I do not think that we want to change the fact that 0100 is 64 in Python...

A morphism is a function which satisfies f(uv) = f(u)f(v). Therefore, defining the images on the letters is sufficient. Maybe what you want to implement is something more general (like a substitution). If yes, I think it would be easier to implement as a new Python class in a new file substitution.py, instead of generalizing morphism.py.

Would it be possible that the description of the ticket be updated to what is now the current goal of the ticket? Thank you!



---

archive/issue_comments_401836.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 slabbe]:\n> Hi, sorry, I had a visitor last week and I was not working during the weekend... In this comment, I am replying only to the description of the ticket:\n> \n> Replying to [ticket:21769 mcognetta]:\n> A morphism is a function which satisfies f(uv) = f(u)f(v). Therefore, defining the images on the letters is sufficient. Maybe what you want to implement is something more general (like a substitution). If yes, I think it would be easier to implement as a new Python class in a new file substitution.py, instead of generalizing morphism.py.\n\n\nIt would be nice to support morphisms with domain being a submoinoid of the free monoid like we have here: the monoid generated by {00, 01, 10, 11}\u00a0which is the even length words. In this context, the Baum-Sweet sequence is a fixed point! But it is beyond the scope of this ticket.",
    "created_at": "2016-10-31T13:00:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401836",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>Replying to [comment:18 slabbe]:
> Hi, sorry, I had a visitor last week and I was not working during the weekend... In this comment, I am replying only to the description of the ticket:
> 
> Replying to [ticket:21769 mcognetta]:
> A morphism is a function which satisfies f(uv) = f(u)f(v). Therefore, defining the images on the letters is sufficient. Maybe what you want to implement is something more general (like a substitution). If yes, I think it would be easier to implement as a new Python class in a new file substitution.py, instead of generalizing morphism.py.


It would be nice to support morphisms with domain being a submoinoid of the free monoid like we have here: the monoid generated by {00, 01, 10, 11} which is the even length words. In this context, the Baum-Sweet sequence is a fixed point! But it is beyond the scope of this ticket.



---

archive/issue_comments_401837.json:
```json
{
    "body": "Changing commit from \"22d56e3828500d55a1b6f948f77d8470b1bf11eb\" to \"b1aef84b1de0a55db584a9834222d3b00eb92e48\"",
    "created_at": "2016-11-06T12:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401837",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "22d56e3828500d55a1b6f948f77d8470b1bf11eb" to "b1aef84b1de0a55db584a9834222d3b00eb92e48"



---

archive/issue_comments_401838.json:
```json
{
    "body": "<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-06T12:14:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401838",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_401839.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n+Add the Baum-Sweet word to word_generators.\n+\n+Information on the Baum-Sweet word can be found at https://en.wikipedia.org/wiki/Baum%E2%80%93Sweet_sequence\n+\n+---\n+**The following is from the original ticket before it was modified.**\n+\n WordMorphism fails with morphisms that have domains with elements of greater than length 1.\n For example, the morphism below:\n \n``````\n",
    "created_at": "2016-11-06T12:23:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401839",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
+Add the Baum-Sweet word to word_generators.
+
+Information on the Baum-Sweet word can be found at https://en.wikipedia.org/wiki/Baum%E2%80%93Sweet_sequence
+
+---
+**The following is from the original ticket before it was modified.**
+
 WordMorphism fails with morphisms that have domains with elements of greater than length 1.
 For example, the morphism below:
 
``````




---

archive/issue_comments_401840.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-08T17:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401840",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_401841.json:
```json
{
    "body": "<a id='comment:22'></a>Good! Thanks for the addition. Next time do not forget to add your complete to the \"Authors\" field of the ticket (I did it).",
    "created_at": "2016-11-08T17:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401841",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>Good! Thanks for the addition. Next time do not forget to add your complete to the "Authors" field of the ticket (I did it).



---

archive/issue_comments_401842.json:
```json
{
    "body": "Changing author from \"\" to \"Marco Cognetta\"",
    "created_at": "2016-11-08T17:59:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401842",
    "user": "https://github.com/videlec"
}
```

Changing author from "" to "Marco Cognetta"



---

archive/issue_comments_401843.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-11-10T20:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401843",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_401844.json:
```json
{
    "body": "<a id='comment:23'></a>\n```\n[dochtml] OSError: [combinat ] /home/sage/sage/local/lib/python2.7/site-packages/sage/combinat/words/word_generators.py:docstring of sage.combinat.words.word_generators.WordGenerator.BaumSweetWord:39: WARNING: Explicit markup ends without a blank line; unexpected unindent.\n```",
    "created_at": "2016-11-10T20:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401844",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:23'></a>
```
[dochtml] OSError: [combinat ] /home/sage/sage/local/lib/python2.7/site-packages/sage/combinat/words/word_generators.py:docstring of sage.combinat.words.word_generators.WordGenerator.BaumSweetWord:39: WARNING: Explicit markup ends without a blank line; unexpected unindent.
```



---

archive/issue_comments_401845.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-17T05:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401845",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_401846.json:
```json
{
    "body": "Changing commit from \"b1aef84b1de0a55db584a9834222d3b00eb92e48\" to \"cc3c8b0ccda7162e7941bb30c31c3b9379cead05\"",
    "created_at": "2016-11-17T05:57:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401846",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b1aef84b1de0a55db584a9834222d3b00eb92e48" to "cc3c8b0ccda7162e7941bb30c31c3b9379cead05"



---

archive/issue_comments_401847.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-17T05:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401847",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_401848.json:
```json
{
    "body": "<a id='comment:25'></a>Added an extra line after my ..MATH:: markup section and the warning went away and built the docs correctly.",
    "created_at": "2016-11-17T05:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401848",
    "user": "https://trac.sagemath.org/admin/accounts/users/mcognetta"
}
```

<a id='comment:25'></a>Added an extra line after my ..MATH:: markup section and the warning went away and built the docs correctly.



---

archive/issue_comments_401849.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-22T15:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401849",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_401850.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2016-11-22T15:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401850",
    "user": "https://github.com/tscrim"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_401851.json:
```json
{
    "body": "Changing keywords from \"words, combinat, combinatorics\" to \"words, combinat, combinatorics, days79\".",
    "created_at": "2016-11-22T15:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401851",
    "user": "https://github.com/tscrim"
}
```

Changing keywords from "words, combinat, combinatorics" to "words, combinat, combinatorics, days79".



---

archive/issue_comments_401852.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,49 +2,3 @@\n \n Information on the Baum-Sweet word can be found at https://en.wikipedia.org/wiki/Baum%E2%80%93Sweet_sequence\n \n----\n-**The following is from the original ticket before it was modified.**\n-\n-WordMorphism fails with morphisms that have domains with elements of greater than length 1.\n-For example, the morphism below:\n-\n-\n-00\u21920000\n-\n-01\u21921001\n-\n-10\u21920100\n-\n-11\u21921101\n-\n-One fix for this could be checking if the language of domain of the morphism is prefix-free (if it is, the morphism should still be valid) or if every element in the domain is the same length.\n-\n-Example:\n-\n-```\n-sage: WordMorphism(\"00->0000,01->1001,10->0100,11->1101\")\n-ValueError: The second and third characters must be '->' (not '0-')\n-```\n-\n-There is also some unfortunate behavior if you try to define the morphism as a dict.\n-\n-```\n-sage: WordMorphism({00:0000,01:1001,10:0100,11:1101})\n-DeprecationWarning: use 0o as octal prefix instead of 0\n-If you do not want this number to be interpreted as octal, remove the leading zeros.\n-See http://trac.sagemath.org/17413 for details.\n-  exec(code_obj, self.user_global_ns, self.user_ns)\n-WordMorphism: 0->0, 1->1001, 10->64, 11->1101\n-```\n-\n-It makes sense why the above example does not work, but it would be nice if one could do it this way.\n-\n-I tried to mess around with it a few more times to see if there was a way of doing it without modifying the underlying code but I didn't get anywhere. I was trying to use patterns used in the examples as that would be what most users would go off of.\n-\n-```\n-sage: WordMorphism({(0,0):(0,0,0,0),(0,1):(1,0,0,1),(1,0):(0,1,0,0),(1,1):(1,1,0,1)})\n-WordMorphism: (0, 0)->0000, (0, 1)->1001, (1, 0)->0100, (1, 1)->1101\n-```\n-\n-\n-I'd like to work on this if this is deemed something that should be fixed.\n``````\n",
    "created_at": "2016-11-22T15:29:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401852",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,49 +2,3 @@
 
 Information on the Baum-Sweet word can be found at https://en.wikipedia.org/wiki/Baum%E2%80%93Sweet_sequence
 
----
-**The following is from the original ticket before it was modified.**
-
-WordMorphism fails with morphisms that have domains with elements of greater than length 1.
-For example, the morphism below:
-
-
-00→0000
-
-01→1001
-
-10→0100
-
-11→1101
-
-One fix for this could be checking if the language of domain of the morphism is prefix-free (if it is, the morphism should still be valid) or if every element in the domain is the same length.
-
-Example:
-
-```
-sage: WordMorphism("00->0000,01->1001,10->0100,11->1101")
-ValueError: The second and third characters must be '->' (not '0-')
-```
-
-There is also some unfortunate behavior if you try to define the morphism as a dict.
-
-```
-sage: WordMorphism({00:0000,01:1001,10:0100,11:1101})
-DeprecationWarning: use 0o as octal prefix instead of 0
-If you do not want this number to be interpreted as octal, remove the leading zeros.
-See http://trac.sagemath.org/17413 for details.
-  exec(code_obj, self.user_global_ns, self.user_ns)
-WordMorphism: 0->0, 1->1001, 10->64, 11->1101
-```
-
-It makes sense why the above example does not work, but it would be nice if one could do it this way.
-
-I tried to mess around with it a few more times to see if there was a way of doing it without modifying the underlying code but I didn't get anywhere. I was trying to use patterns used in the examples as that would be what most users would go off of.
-
-```
-sage: WordMorphism({(0,0):(0,0,0,0),(0,1):(1,0,0,1),(1,0):(0,1,0,0),(1,1):(1,1,0,1)})
-WordMorphism: (0, 0)->0000, (0, 1)->1001, (1, 0)->0100, (1, 1)->1101
-```
-
-
-I'd like to work on this if this is deemed something that should be fixed.
``````




---

archive/issue_comments_401853.json:
```json
{
    "body": "Changing branch from \"u/mcognetta/wordmorphism_does_not_allow_elements_of_length___1_in_the_domain\" to \"cc3c8b0ccda7162e7941bb30c31c3b9379cead05\"",
    "created_at": "2016-11-24T23:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401853",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mcognetta/wordmorphism_does_not_allow_elements_of_length___1_in_the_domain" to "cc3c8b0ccda7162e7941bb30c31c3b9379cead05"



---

archive/issue_comments_401854.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-24T23:41:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21769#issuecomment-401854",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057586.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-24T23:41:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21769",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21769#event-57586"
}
```
