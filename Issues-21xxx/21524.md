# Issue 21524: configure.ac: write build/make/Makefile within an AC_CONFIG_FILE, not during main configure

archive/issues_021287.json:
```json
{
    "assignees": [],
    "body": "`build/make/Makefile` should be written by `config.status` within an `AC_CONFIG_FILE` template, not at `configure` time.\n\nDepends on #24729\nDepends on #24703\n\nBranch: **[2a99185](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)**\n\nReviewer: **Julian R\u00fcth**\n\nAuthor: **Erik Bray**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21524_\n\n",
    "closed_at": "2018-03-12T19:42:39Z",
    "created_at": "2016-09-17T23:53:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "configure.ac: write build/make/Makefile within an AC_CONFIG_FILE, not during main configure",
    "type": "issue",
    "updated_at": "2018-06-08T08:36:08Z",
    "url": "https://github.com/sagemath/sage/issues/21524",
    "user": "https://github.com/mkoeppe"
}
```
`build/make/Makefile` should be written by `config.status` within an `AC_CONFIG_FILE` template, not at `configure` time.

Depends on #24729
Depends on #24703

Branch: **[2a99185](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)**

Reviewer: **Julian RÃ¼th**

Author: **Erik Bray**

_Issue created by migration from https://trac.sagemath.org/ticket/21524_





---

archive/issue_events_284382.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-17T23:53:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284382"
}
```



---

archive/issue_events_284383.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-17T23:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20build%3A%20configure",
    "label_color": "000080",
    "label_name": "component: build: configure",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284383"
}
```



---

archive/issue_events_284384.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-17T23:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284384"
}
```



---

archive/issue_events_284385.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-17T23:53:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284385"
}
```



---

archive/issue_comments_318502.json:
```json
{
    "body": "The title \"Get rid of file descriptor 7 hack\" is different from the description \"build/make/Makefile should be written within an AC_CONFIG_COMMANDS procedure\". Do you want to fix both things here? Can you please clarify?\n\nAnd honestly, I think there is nothing wrong with the \"file descriptor 7 hack\". `autoconf` itself uses similar hacks internally.",
    "created_at": "2016-09-18T11:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318502",
    "user": "https://github.com/jdemeyer"
}
```

The title "Get rid of file descriptor 7 hack" is different from the description "build/make/Makefile should be written within an AC_CONFIG_COMMANDS procedure". Do you want to fix both things here? Can you please clarify?

And honestly, I think there is nothing wrong with the "file descriptor 7 hack". `autoconf` itself uses similar hacks internally.



---

archive/issue_comments_318503.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">Comment 2</div>\n\nI've updated the title",
    "created_at": "2016-09-18T17:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318503",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2" align="right">Comment 2</div>

I've updated the title



---

archive/issue_events_284386.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-18T17:37:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "title_is": "configure.ac: write build/make/Makefile within an AC_CONFIG_COMMANDS, not during main configure",
    "title_was": "configure.ac: Get rid of file descriptor 7 hack",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284386"
}
```



---

archive/issue_comments_318504.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nI agree, there's nothing wrong with using a file descriptor to write to a file ;)",
    "created_at": "2016-09-18T20:29:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318504",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3" align="right">Comment 3</div>

I agree, there's nothing wrong with using a file descriptor to write to a file ;)



---

archive/issue_comments_318505.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n-build/make/Makefile should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. \n+`build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. \n \n+Marking this as dependent on #21479 just because that that ticket changes the same part of `configure.ac`.\n``````\n",
    "created_at": "2016-09-18T20:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318505",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
-build/make/Makefile should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. 
+`build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. 
 
+Marking this as dependent on #21479 just because that that ticket changes the same part of `configure.ac`.
``````




---

archive/issue_comments_318506.json:
```json
{
    "body": "Dependencies: **#21479**",
    "created_at": "2016-09-18T20:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318506",
    "user": "https://github.com/mkoeppe"
}
```

Dependencies: **#21479**



---

archive/issue_comments_318507.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n `build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. \n \n-Marking this as dependent on #21479 just because that that ticket changes the same part of `configure.ac`.\n+Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.\n``````\n",
    "created_at": "2016-09-18T20:32:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318507",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 `build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. 
 
-Marking this as dependent on #21479 just because that that ticket changes the same part of `configure.ac`.
+Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.
``````




---

archive/issue_comments_318508.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nDoes it necessarily need to use `AC_CONFIG_COMMANDS`?  Most of the stuff that writes `build/make/Makefile` could just as easily be moved into its own macro in a separate file in the `m4/` directory.\n\nAs I see it the main goal here is to simplify the configure.ac by moving more functionality into separate files.  But moving the existing code into an m4 macro would take less work, and has the advantage that it would have full access to any other variables set in other parts of the `configure` script, without having to explicitly pass them on to an external command.",
    "created_at": "2017-07-19T11:57:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318508",
    "user": "https://github.com/embray"
}
```

<div id="comment:6" align="right">Comment 6</div>

Does it necessarily need to use `AC_CONFIG_COMMANDS`?  Most of the stuff that writes `build/make/Makefile` could just as easily be moved into its own macro in a separate file in the `m4/` directory.

As I see it the main goal here is to simplify the configure.ac by moving more functionality into separate files.  But moving the existing code into an m4 macro would take less work, and has the advantage that it would have full access to any other variables set in other parts of the `configure` script, without having to explicitly pass them on to an external command.



---

archive/issue_comments_318509.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nOn second thought, I can see why this way would be better, as it's more in spirit with how configure is supposed to work w.r.t. generating files.  I'll have to give that some more thought.  Maybe there aren't so many variables that need to be passed in.",
    "created_at": "2017-07-19T12:39:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318509",
    "user": "https://github.com/embray"
}
```

<div id="comment:7" align="right">Comment 7</div>

On second thought, I can see why this way would be better, as it's more in spirit with how configure is supposed to work w.r.t. generating files.  I'll have to give that some more thought.  Maybe there aren't so many variables that need to be passed in.



---

archive/issue_comments_318510.json:
```json
{
    "body": "Branch: **[u/embray/build/makefile-in](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/makefile-in)**",
    "created_at": "2017-07-20T15:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318510",
    "user": "https://github.com/embray"
}
```

Branch: **[u/embray/build/makefile-in](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/makefile-in)**



---

archive/issue_comments_318511.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-`build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. \n+`build/make/Makefile` should be written within an AC_CONFIG_FILE template, not at configure time. \n \n Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.\n``````\n",
    "created_at": "2017-07-20T15:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318511",
    "user": "https://github.com/embray"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-`build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. 
+`build/make/Makefile` should be written within an AC_CONFIG_FILE template, not at configure time. 
 
 Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.
``````




---

archive/issue_events_284387.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "title_is": "configure.ac: write build/make/Makefile within an AC_CONFIG_FILE, not during main configure",
    "title_was": "configure.ac: write build/make/Makefile within an AC_CONFIG_COMMANDS, not during main configure",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284387"
}
```



---

archive/issue_events_284388.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284388"
}
```



---

archive/issue_events_284389.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284389"
}
```



---

archive/issue_comments_318512.json:
```json
{
    "body": "Commit: **[db428a3](https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574)**",
    "created_at": "2017-07-20T15:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318512",
    "user": "https://github.com/embray"
}
```

Commit: **[db428a3](https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574)**



---

archive/issue_comments_318513.json:
```json
{
    "body": "Author: **Erik Bray**",
    "created_at": "2017-07-20T15:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318513",
    "user": "https://github.com/embray"
}
```

Author: **Erik Bray**



---

archive/issue_events_284390.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284390"
}
```



---

archive/issue_events_284391.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284391"
}
```



---

archive/issue_comments_318514.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nHere's my proposed solution to this (I updated the ticket to mention `AC_CONFIG_FILE` since that's what this uses).\n\nThis adds a `build/make/Makefile.in` template that is used to generated `build/make/Makefile` in `config.status`.  The `configure` script now just collects values for some variables that are inserted into the Makefile template.  I tried to keep as much actual Makefile syntax out of the output variables as possible, sticking mostly to just lists of package names that are operated over.  Most of the rules for building packages are generated by the Makefile itself in `$(eval ...)` loops.  The end result I think is actually cleaner and easier to understand.\n\nIf any of this should be controversial, it may be the use of some more advanced GNU make constructs, the portability of which I'm not sure.  This was tested with GNU make 3.81 (about 11 years old), and 4.2.1 (very recent).  That said, it's using some relatively advanced GNU make features that may not be available in other makes.  I think it's still *better*, but if need be more of the Makefile generation could be pushed back into `configure`, but still provided via output variables, instead of writing directly to a file.\n\nIncreased the priority since I have other build system work that would likely depend on this, and also because it makes some non-trivial performance improvements, especially on Cygwin.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b034b3a5f6c7073e8a3bc2acbd5584f4f7189854\">b034b3a</a></td><td><code>Fix minor bug in the conway_polynomials dependencies; it should just list the bare package name</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f88d3cbc08ccee5edbe1b4be78e69ae81acacb8b\">f88d3cb</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574\">db428a3</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>\n",
    "created_at": "2017-07-20T15:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318514",
    "user": "https://github.com/embray"
}
```

<div id="comment:8" align="right">Comment 8</div>

Here's my proposed solution to this (I updated the ticket to mention `AC_CONFIG_FILE` since that's what this uses).

This adds a `build/make/Makefile.in` template that is used to generated `build/make/Makefile` in `config.status`.  The `configure` script now just collects values for some variables that are inserted into the Makefile template.  I tried to keep as much actual Makefile syntax out of the output variables as possible, sticking mostly to just lists of package names that are operated over.  Most of the rules for building packages are generated by the Makefile itself in `$(eval ...)` loops.  The end result I think is actually cleaner and easier to understand.

If any of this should be controversial, it may be the use of some more advanced GNU make constructs, the portability of which I'm not sure.  This was tested with GNU make 3.81 (about 11 years old), and 4.2.1 (very recent).  That said, it's using some relatively advanced GNU make features that may not be available in other makes.  I think it's still *better*, but if need be more of the Makefile generation could be pushed back into `configure`, but still provided via output variables, instead of writing directly to a file.

Increased the priority since I have other build system work that would likely depend on this, and also because it makes some non-trivial performance improvements, especially on Cygwin.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b034b3a5f6c7073e8a3bc2acbd5584f4f7189854">b034b3a</a></td><td><code>Fix minor bug in the conway_polynomials dependencies; it should just list the bare package name</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f88d3cbc08ccee5edbe1b4be78e69ae81acacb8b">f88d3cb</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574">db428a3</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>




---

archive/issue_events_284392.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:26:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284392"
}
```



---

archive/issue_comments_318515.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nWeird that the patchbot is failing due to Numpy of all things.  I wonder if it has something more to do with the fact that it's building in a temp dir (since this is an \"unsafe\" ticket) than anything to do with the patch itself, but I'll have to see if I can reproduce...\n\n```\n[numpy-1.12.1] Traceback (most recent call last):\n[numpy-1.12.1]   File \"<stdin>\", line 3, in <module>\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/__init__.py\", line 142, in <module>\n[numpy-1.12.1]     from . import add_newdocs\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/add_newdocs.py\", line 13, in <module>\n[numpy-1.12.1]     from numpy.lib import add_newdoc\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/lib/__init__.py\", line 18, in <module>\n[numpy-1.12.1]     from .polynomial import *\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/lib/polynomial.py\", line 20, in <module>\n[numpy-1.12.1]     from numpy.linalg import eigvals, lstsq, inv\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/__init__.py\", line 51, in <module>\n[numpy-1.12.1]     from .linalg import *\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/linalg.py\", line 29, in <module>\n[numpy-1.12.1]     from numpy.linalg import lapack_lite, _umath_linalg\n[numpy-1.12.1] ImportError: /tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/lapack_lite.so: undefined symbol: zungqr_\n```",
    "created_at": "2017-09-08T08:14:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318515",
    "user": "https://github.com/embray"
}
```

<div id="comment:10" align="right">Comment 10</div>

Weird that the patchbot is failing due to Numpy of all things.  I wonder if it has something more to do with the fact that it's building in a temp dir (since this is an "unsafe" ticket) than anything to do with the patch itself, but I'll have to see if I can reproduce...

```
[numpy-1.12.1] Traceback (most recent call last):
[numpy-1.12.1]   File "<stdin>", line 3, in <module>
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/__init__.py", line 142, in <module>
[numpy-1.12.1]     from . import add_newdocs
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/add_newdocs.py", line 13, in <module>
[numpy-1.12.1]     from numpy.lib import add_newdoc
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/lib/__init__.py", line 18, in <module>
[numpy-1.12.1]     from .polynomial import *
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/lib/polynomial.py", line 20, in <module>
[numpy-1.12.1]     from numpy.linalg import eigvals, lstsq, inv
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/__init__.py", line 51, in <module>
[numpy-1.12.1]     from .linalg import *
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/linalg.py", line 29, in <module>
[numpy-1.12.1]     from numpy.linalg import lapack_lite, _umath_linalg
[numpy-1.12.1] ImportError: /tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/lapack_lite.so: undefined symbol: zungqr_
```



---

archive/issue_events_284393.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:27:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone_number": null,
    "milestone_title": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284393"
}
```



---

archive/issue_events_284394.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:27:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone_number": null,
    "milestone_title": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284394"
}
```



---

archive/issue_comments_318516.json:
```json
{
    "body": "Work Issues: **merge conflicts**",
    "created_at": "2018-01-14T01:56:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318516",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **merge conflicts**



---

archive/issue_events_284395.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-01-14T01:56:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284395"
}
```



---

archive/issue_events_284396.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-01-14T01:56:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284396"
}
```



---

archive/issue_comments_318517.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f96a65a68d57543681ac80b2787e624fd2e6b7c\">3f96a65</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d\">14c2577</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>\n",
    "created_at": "2018-01-16T17:11:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318517",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13" align="right">Comment 13</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f96a65a68d57543681ac80b2787e624fd2e6b7c">3f96a65</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d">14c2577</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>




---

archive/issue_comments_318518.json:
```json
{
    "body": "Changed commit from **[db428a3](https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574)** to **[14c2577](https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d)**",
    "created_at": "2018-01-16T17:11:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318518",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[db428a3](https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574)** to **[14c2577](https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d)**



---

archive/issue_events_284397.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T17:14:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284397"
}
```



---

archive/issue_events_284398.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T17:14:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284398"
}
```



---

archive/issue_comments_318519.json:
```json
{
    "body": "Changed commit from **[14c2577](https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d)** to **[3ba565f](https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508)**",
    "created_at": "2018-01-30T11:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318519",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[14c2577](https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d)** to **[3ba565f](https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508)**



---

archive/issue_comments_318520.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c16cc93a810a01384d88d9ca8cabb0e2f656850\">3c16cc9</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508\">3ba565f</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>\n",
    "created_at": "2018-01-30T11:57:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318520",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c16cc93a810a01384d88d9ca8cabb0e2f656850">3c16cc9</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508">3ba565f</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>




---

archive/issue_comments_318521.json:
```json
{
    "body": "Changed work issues from **merge conflicts** to none",
    "created_at": "2018-01-30T11:58:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318521",
    "user": "https://github.com/embray"
}
```

Changed work issues from **merge conflicts** to none



---

archive/issue_comments_318522.json:
```json
{
    "body": "Changed dependencies from **#21479** to none",
    "created_at": "2018-01-30T11:58:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318522",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#21479** to none



---

archive/issue_comments_318523.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nWhy? This makes the `Makefile` much harder to understand for no obvious benefit...",
    "created_at": "2018-01-30T15:56:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318523",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">Comment 17</div>

Why? This makes the `Makefile` much harder to understand for no obvious benefit...



---

archive/issue_comments_318524.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nPersonally, I find this horrible. I highly value the debuggability of an explicit `Makefile`.\n\nOf course, that's a very subjective thing so I'm keeping the needs_review status.",
    "created_at": "2018-01-30T16:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318524",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">Comment 18</div>

Personally, I find this horrible. I highly value the debuggability of an explicit `Makefile`.

Of course, that's a very subjective thing so I'm keeping the needs_review status.



---

archive/issue_comments_318525.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-`build/make/Makefile` should be written within an AC_CONFIG_FILE template, not at configure time. \n-\n-Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.\n+`build/make/Makefile` should be written by `config.status` within an `AC_CONFIG_FILE` template, not at `configure` time.\n``````\n",
    "created_at": "2018-01-30T16:03:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318525",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-`build/make/Makefile` should be written within an AC_CONFIG_FILE template, not at configure time. 
-
-Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.
+`build/make/Makefile` should be written by `config.status` within an `AC_CONFIG_FILE` template, not at `configure` time.
``````




---

archive/issue_comments_318526.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nI explained all of this in my e-mail...",
    "created_at": "2018-01-30T17:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318526",
    "user": "https://github.com/embray"
}
```

<div id="comment:19" align="right">Comment 19</div>

I explained all of this in my e-mail...



---

archive/issue_comments_318527.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nAllow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.",
    "created_at": "2018-01-31T15:01:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318527",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">Comment 20</div>

Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.



---

archive/issue_comments_318528.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nI think the proposed changes are an improvement. I find the proposed setup easier to read, understand, and modify than the previous echos in configure. It also feels closer to the intended way of using autoconf. I am not sure if the resulting Makefile is harder to read, I don't really see why, in any case, I can see why we would like to get rid of the `echo` hack which makes it quite annoying to edit `configure` imho.\n\nSome comments (apart from these minor issues, I would not mind setting this to positive review):\n\n* I might be totally misunderstanding something but the following comment does not actually apply to the `Makefile.in`, does it?\n\n```\n+# This file has been automatically generated by\n+#   /home/embray/src/sagemath/sage/config.status\n+# You should not edit it by hand\n```\n    I think that some general comment about sage-the-distribution would be nice here and some comment on what transforms this file to which other file.\n* I don't really understand the following comment\n\n```\n+    # If $need_to_install_{PKG_NAME} is set to no, then set inst_<pkgname> to\n+    # some dummy file to skip the installation.\n```\n    So, I guess `pkgname` and `PKG_NAME` are the same? But where is `inst_<pkgname>` being set below? (Only indirectly in `Makefile.in`, right?)\n* I don't see where you are obscuring anything here. (You copied it over and it should probably go into the `.in` file.)\n\n```\n+    # Below we have to obscure A\"\"M_V_at, or autoconf would complain:\n+    # \"error: possibly undefined macro: A\"\"M_V_at\"\n```\n* I would like the `configure.ac` to contain a `#` comment at the top which explains how this all works, in particular how this differs from a standard autoconf/automake setup.",
    "created_at": "2018-01-31T15:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318528",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:21" align="right">Comment 21</div>

I think the proposed changes are an improvement. I find the proposed setup easier to read, understand, and modify than the previous echos in configure. It also feels closer to the intended way of using autoconf. I am not sure if the resulting Makefile is harder to read, I don't really see why, in any case, I can see why we would like to get rid of the `echo` hack which makes it quite annoying to edit `configure` imho.

Some comments (apart from these minor issues, I would not mind setting this to positive review):

* I might be totally misunderstanding something but the following comment does not actually apply to the `Makefile.in`, does it?

```
+# This file has been automatically generated by
+#   /home/embray/src/sagemath/sage/config.status
+# You should not edit it by hand
```
    I think that some general comment about sage-the-distribution would be nice here and some comment on what transforms this file to which other file.
* I don't really understand the following comment

```
+    # If $need_to_install_{PKG_NAME} is set to no, then set inst_<pkgname> to
+    # some dummy file to skip the installation.
```
    So, I guess `pkgname` and `PKG_NAME` are the same? But where is `inst_<pkgname>` being set below? (Only indirectly in `Makefile.in`, right?)
* I don't see where you are obscuring anything here. (You copied it over and it should probably go into the `.in` file.)

```
+    # Below we have to obscure A""M_V_at, or autoconf would complain:
+    # "error: possibly undefined macro: A""M_V_at"
```
* I would like the `configure.ac` to contain a `#` comment at the top which explains how this all works, in particular how this differs from a standard autoconf/automake setup.



---

archive/issue_comments_318529.json:
```json
{
    "body": "Reviewer: **Julian R\u00fcth**",
    "created_at": "2018-01-31T15:01:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318529",
    "user": "https://github.com/saraedum"
}
```

Reviewer: **Julian RÃ¼th**



---

archive/issue_comments_318530.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nI think this should be for followup ticket. It's taken about half a year to get from Erik's commits to somebody reviewing this. If we do a complete rewrite of this, I think this is going to take forever. (Btw, you agreed to fix up #20382 11 months ago. It's easy to get distracted and not move at all\u2026. We should not strive for absolute perfection here but go with improvements that introduce good code. And then get better in the next iteration\u2026)\n\nReplying to [@jdemeyer](#comment%3A20):\n> Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.",
    "created_at": "2018-01-31T15:11:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318530",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:22" align="right">Comment 22</div>

I think this should be for followup ticket. It's taken about half a year to get from Erik's commits to somebody reviewing this. If we do a complete rewrite of this, I think this is going to take forever. (Btw, you agreed to fix up #20382 11 months ago. It's easy to get distracted and not move at allâ¦. We should not strive for absolute perfection here but go with improvements that introduce good code. And then get better in the next iterationâ¦)

Replying to [@jdemeyer](#comment%3A20):
> Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.



---

archive/issue_comments_318531.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@jdemeyer](#comment%3A20):\n> Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.\n\nIt's funny you suggest that.  I've actually been working off-and-on in my spare time on my own Python implementation of make.  It has a name but until I feel ready to post the code it's a secret :-)  It supports POSIX-compatible Makefiles but it also has its own pure-Python format that lets you write make rules in Python, including all the high-level constructs thereof.\n\nIn the meantime I don't really see how that would solve anything though.",
    "created_at": "2018-01-31T15:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318531",
    "user": "https://github.com/embray"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@jdemeyer](#comment%3A20):
> Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.

It's funny you suggest that.  I've actually been working off-and-on in my spare time on my own Python implementation of make.  It has a name but until I feel ready to post the code it's a secret :-)  It supports POSIX-compatible Makefiles but it also has its own pure-Python format that lets you write make rules in Python, including all the high-level constructs thereof.

In the meantime I don't really see how that would solve anything though.



---

archive/issue_comments_318532.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@embray](#comment%3A23):\n> In the meantime I don't really see how that would solve anything though.\n\nIt would solve exactly the same issues as the ones that you are fixing in your branch, just in a different way.",
    "created_at": "2018-01-31T16:03:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318532",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@embray](#comment%3A23):
> In the meantime I don't really see how that would solve anything though.

It would solve exactly the same issues as the ones that you are fixing in your branch, just in a different way.



---

archive/issue_comments_318533.json:
```json
{
    "body": "Work Issues: **minor documentation issues**",
    "created_at": "2018-01-31T16:03:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318533",
    "user": "https://github.com/saraedum"
}
```

Work Issues: **minor documentation issues**



---

archive/issue_comments_318534.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@embray](#comment%3A23):\n> It's funny you suggest that.  I've actually been working off-and-on in my spare time on my own Python implementation of make.\n\nI would be more interested in the converse: turn any Python `setup.py` into `Makefile` rules.",
    "created_at": "2018-01-31T16:04:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318534",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@embray](#comment%3A23):
> It's funny you suggest that.  I've actually been working off-and-on in my spare time on my own Python implementation of make.

I would be more interested in the converse: turn any Python `setup.py` into `Makefile` rules.



---

archive/issue_comments_318535.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nIt would still be much slower just by involving Python.  It would still be an (actual!) abuse of autoconf.",
    "created_at": "2018-01-31T16:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318535",
    "user": "https://github.com/embray"
}
```

<div id="comment:27" align="right">Comment 27</div>

It would still be much slower just by involving Python.  It would still be an (actual!) abuse of autoconf.



---

archive/issue_comments_318536.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@saraedum](#comment%3A21):\n> Some comments (apart from these minor issues, I would not mind setting this to positive review):\n> \n> * I might be totally misunderstanding something but the following comment does not actually apply to the `Makefile.in`, does it?\n> \n> ```\n> +# This file has been automatically generated by\n> +#   /home/embray/src/sagemath/sage/config.status\n> +# You should not edit it by hand\n> ```\n\nOops, I'm not sure how that got there since I wrote this six months ago :) It might be that I started from editing a generated file exactly as it says not to do. But let me double-check that `config.status` isn't *actually* putting that there because that would be a bug, and a bad one at that.\n\n>     I think that some general comment about sage-the-distribution would be nice here and some comment on what transforms this file to which other file.\n\nThat would help, though I'm not sure where to put it.  It would be nice to have some documentation about though, as it took me a while to wrap my head around too. It's a bit hard to follow that the top-level `Makefile` calls `build/make/install` which calls `make` again but with `build/make/Makefile`, which in turn calls `sage-spkg` to actually build/install packages.  I don't have too much of a problem with that aspect of the process but it's not obvious.\n\n> * I don't really understand the following comment\n> \n> ```\n> +    # If $need_to_install_{PKG_NAME} is set to no, then set inst_<pkgname> to\n> +    # some dummy file to skip the installation.\n> ```\n>     So, I guess `pkgname` and `PKG_NAME` are the same? But where is `inst_<pkgname>` being set below? (Only indirectly in `Makefile.in`, right?)\n\nYes, maybe this could be spelled more consistently.\n\nThis definitely deserves better documentation (most of how this works is carried over from the existing Makefile--I really didn't change much...)  The actual physical (as in, a real file) targets associate with each package are the \"stamp\" files installed to `$SAGE_LOCAL/var/lib/sage/installed/<pkg_name>-<pkg_version>`.  Within the Makefile the paths to these files are stored in variables named `$(inst_<pkg_name>)`.\n\nWhat this is referring to is that for packages which are not actually installed into Sage (e.g. we use the system version), instead of pointing to a real stamp file, the `$(inst_<pkg_name>)` just points to a dummy file indicating \"yes, this dependency is satisfied\".  This way we don't need to *remove* that package as a dependency of any other package.  It's just trivially satisfied.\n\nAnyways, I'll see if I can make that comment clearer.\n\n> * I don't see where you are obscuring anything here. (You copied it over and it should probably go into the `.in` file.)\n> \n> ```\n> +    # Below we have to obscure A\"\"M_V_at, or autoconf would complain:\n> +    # \"error: possibly undefined macro: A\"\"M_V_at\"\n> ```\n\nCarried over from the original configure.ac.  It's not relevant now anywhere so can just be deleted.\n\n> * I would like the `configure.ac` to contain a `#` comment at the top which explains how this all works, in particular how this differs from a standard autoconf/automake setup.\n\nOkay, maybe that's a decent place to put it...",
    "created_at": "2018-01-31T16:51:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318536",
    "user": "https://github.com/embray"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@saraedum](#comment%3A21):
> Some comments (apart from these minor issues, I would not mind setting this to positive review):
> 
> * I might be totally misunderstanding something but the following comment does not actually apply to the `Makefile.in`, does it?
> 
> ```
> +# This file has been automatically generated by
> +#   /home/embray/src/sagemath/sage/config.status
> +# You should not edit it by hand
> ```

Oops, I'm not sure how that got there since I wrote this six months ago :) It might be that I started from editing a generated file exactly as it says not to do. But let me double-check that `config.status` isn't *actually* putting that there because that would be a bug, and a bad one at that.

>     I think that some general comment about sage-the-distribution would be nice here and some comment on what transforms this file to which other file.

That would help, though I'm not sure where to put it.  It would be nice to have some documentation about though, as it took me a while to wrap my head around too. It's a bit hard to follow that the top-level `Makefile` calls `build/make/install` which calls `make` again but with `build/make/Makefile`, which in turn calls `sage-spkg` to actually build/install packages.  I don't have too much of a problem with that aspect of the process but it's not obvious.

> * I don't really understand the following comment
> 
> ```
> +    # If $need_to_install_{PKG_NAME} is set to no, then set inst_<pkgname> to
> +    # some dummy file to skip the installation.
> ```
>     So, I guess `pkgname` and `PKG_NAME` are the same? But where is `inst_<pkgname>` being set below? (Only indirectly in `Makefile.in`, right?)

Yes, maybe this could be spelled more consistently.

This definitely deserves better documentation (most of how this works is carried over from the existing Makefile--I really didn't change much...)  The actual physical (as in, a real file) targets associate with each package are the "stamp" files installed to `$SAGE_LOCAL/var/lib/sage/installed/<pkg_name>-<pkg_version>`.  Within the Makefile the paths to these files are stored in variables named `$(inst_<pkg_name>)`.

What this is referring to is that for packages which are not actually installed into Sage (e.g. we use the system version), instead of pointing to a real stamp file, the `$(inst_<pkg_name>)` just points to a dummy file indicating "yes, this dependency is satisfied".  This way we don't need to *remove* that package as a dependency of any other package.  It's just trivially satisfied.

Anyways, I'll see if I can make that comment clearer.

> * I don't see where you are obscuring anything here. (You copied it over and it should probably go into the `.in` file.)
> 
> ```
> +    # Below we have to obscure A""M_V_at, or autoconf would complain:
> +    # "error: possibly undefined macro: A""M_V_at"
> ```

Carried over from the original configure.ac.  It's not relevant now anywhere so can just be deleted.

> * I would like the `configure.ac` to contain a `#` comment at the top which explains how this all works, in particular how this differs from a standard autoconf/automake setup.

Okay, maybe that's a decent place to put it...



---

archive/issue_events_284399.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-31T16:52:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284399"
}
```



---

archive/issue_events_284400.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-31T16:52:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284400"
}
```



---

archive/issue_comments_318537.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nWhile I agree that the templates are a bit incomprehensible, overall I like this change. The separation between configure.ac and Makefile.in makes it more clear what the build is trying to do, with less of a focus on how it's done. I think that in the future, it will be easier to replace chunks of either file, because we won't have to worry about unintended side effects buried in the shell code.\n\nOther ideas:\n\n1. Our Makefile.in is now GNU-Make-specific. Should we call it GNUMakefile.in to avoid insane errors on systems where \"make\" isn't GNU?\n2. We should detect `SHELL` rather than setting it to /bin/bash, because there are systems where it lives in e.g. /usr/bin/bash (https://www.freedesktop.org/wiki/Software/systemd/TheCaseForTheUsrMerge/)\n3. Is Bash needed for the makefile at all? If we replace \"source\" with \".\", does anything else crash with POSIX sh?",
    "created_at": "2018-01-31T21:39:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318537",
    "user": "https://github.com/orlitzky"
}
```

<div id="comment:30" align="right">Comment 30</div>

While I agree that the templates are a bit incomprehensible, overall I like this change. The separation between configure.ac and Makefile.in makes it more clear what the build is trying to do, with less of a focus on how it's done. I think that in the future, it will be easier to replace chunks of either file, because we won't have to worry about unintended side effects buried in the shell code.

Other ideas:

1. Our Makefile.in is now GNU-Make-specific. Should we call it GNUMakefile.in to avoid insane errors on systems where "make" isn't GNU?
2. We should detect `SHELL` rather than setting it to /bin/bash, because there are systems where it lives in e.g. /usr/bin/bash (https://www.freedesktop.org/wiki/Software/systemd/TheCaseForTheUsrMerge/)
3. Is Bash needed for the makefile at all? If we replace "source" with ".", does anything else crash with POSIX sh?



---

archive/issue_comments_318538.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@embray](#comment%3A27):\n> It would still be much slower just by involving Python.\n\nWhy do you think that? It just needs to read of bunch of files and do some string manipulation. It should be easy.\n\n> It would still be an (actual!) abuse of autoconf.\n\nI'm not denying that...\n\nStill, I think it would be fast, work well and produce readable output. So I think that you should at least seriously consider it.",
    "created_at": "2018-02-01T11:49:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318538",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@embray](#comment%3A27):
> It would still be much slower just by involving Python.

Why do you think that? It just needs to read of bunch of files and do some string manipulation. It should be easy.

> It would still be an (actual!) abuse of autoconf.

I'm not denying that...

Still, I think it would be fast, work well and produce readable output. So I think that you should at least seriously consider it.



---

archive/issue_comments_318539.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nLet's give this a try for now (modulo other review comments). I sympathize with your concerns but I strongly *suspect* that they will prove overstated.  If it turns into a concrete problem somehow then I'll reconsider.",
    "created_at": "2018-02-01T12:29:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318539",
    "user": "https://github.com/embray"
}
```

<div id="comment:32" align="right">Comment 32</div>

Let's give this a try for now (modulo other review comments). I sympathize with your concerns but I strongly *suspect* that they will prove overstated.  If it turns into a concrete problem somehow then I'll reconsider.



---

archive/issue_comments_318540.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@orlitzky](#comment%3A30):\n> While I agree that the templates are a bit incomprehensible, overall I like this change. The separation between configure.ac and Makefile.in makes it more clear what the build is trying to do, with less of a focus on how it's done. I think that in the future, it will be easier to replace chunks of either file, because we won't have to worry about unintended side effects buried in the shell code.\n\nI'm going to try to do a bit of reformatting to make it a little easier to read.\n\n> Other ideas:\n> \n> 1. Our Makefile.in is now GNU-Make-specific. Should we call it GNUMakefile.in to avoid insane errors on systems where \"make\" isn't GNU?\n\nOne thing I'll point out that I haven't explicitly mentioned yet: I asked a few people about this before doing the work (I forget who) but at the time everyone seemed to agree that it would be fine to require GNU make, as there are other packages in Sage that require it, so building the full Sage-the-distribution doesn't work with any other make implementation anyways.\n\nI suppose we could do that though.\n\n> 2. We should detect `SHELL` rather than setting it to /bin/bash, because there are systems where it lives in e.g. /usr/bin/bash (https://www.freedesktop.org/wiki/Software/systemd/TheCaseForTheUsrMerge/)\n\nRight; originally we had <code> SHELL = \\`command -v bash\\` </code> here.  I'll fix that.\n\n> 3. Is Bash needed for the makefile at all? If we replace \"source\" with \".\", does anything else crash with POSIX sh?\n\nI'm not sure it's necessarily strictly needed for the makefile itself, but it in turn calls scripts that require bash, so I don't see any advantage in not just forcing bash in the makefile as well.",
    "created_at": "2018-02-01T12:40:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318540",
    "user": "https://github.com/embray"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@orlitzky](#comment%3A30):
> While I agree that the templates are a bit incomprehensible, overall I like this change. The separation between configure.ac and Makefile.in makes it more clear what the build is trying to do, with less of a focus on how it's done. I think that in the future, it will be easier to replace chunks of either file, because we won't have to worry about unintended side effects buried in the shell code.

I'm going to try to do a bit of reformatting to make it a little easier to read.

> Other ideas:
> 
> 1. Our Makefile.in is now GNU-Make-specific. Should we call it GNUMakefile.in to avoid insane errors on systems where "make" isn't GNU?

One thing I'll point out that I haven't explicitly mentioned yet: I asked a few people about this before doing the work (I forget who) but at the time everyone seemed to agree that it would be fine to require GNU make, as there are other packages in Sage that require it, so building the full Sage-the-distribution doesn't work with any other make implementation anyways.

I suppose we could do that though.

> 2. We should detect `SHELL` rather than setting it to /bin/bash, because there are systems where it lives in e.g. /usr/bin/bash (https://www.freedesktop.org/wiki/Software/systemd/TheCaseForTheUsrMerge/)

Right; originally we had <code> SHELL = \`command -v bash\` </code> here.  I'll fix that.

> 3. Is Bash needed for the makefile at all? If we replace "source" with ".", does anything else crash with POSIX sh?

I'm not sure it's necessarily strictly needed for the makefile itself, but it in turn calls scripts that require bash, so I don't see any advantage in not just forcing bash in the makefile as well.



---

archive/issue_comments_318541.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nOne other issue I noticed while working on cleaning this up and adding better debugging tools, is that this doesn't currently handle order-only prerequisites correctly.  This was definitely obscured before, but will be easy to fix.",
    "created_at": "2018-02-01T13:07:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318541",
    "user": "https://github.com/embray"
}
```

<div id="comment:34" align="right">Comment 34</div>

One other issue I noticed while working on cleaning this up and adding better debugging tools, is that this doesn't currently handle order-only prerequisites correctly.  This was definitely obscured before, but will be easy to fix.



---

archive/issue_comments_318542.json:
```json
{
    "body": "Changed commit from **[3ba565f](https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508)** to **[9ce84c8](https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142)**",
    "created_at": "2018-02-01T14:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318542",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3ba565f](https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508)** to **[9ce84c8](https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142)**



---

archive/issue_comments_318543.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d12016de449d7f54de3872f631e442b1c3efbfe\">0d12016</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142\">9ce84c8</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr></table>\n",
    "created_at": "2018-02-01T14:18:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318543",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:35" align="right">Comment 35</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d12016de449d7f54de3872f631e442b1c3efbfe">0d12016</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142">9ce84c8</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr></table>




---

archive/issue_comments_318544.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nLast commit made the templates look a bit less noisy.  For example, before:\n\n```\ndefine NORMAL_PACKAGE_templ\n$$(INST)/$(1)-$$(vers_$(1)): $$(foreach dep,$$(deps_$(1)),$$(inst_$$(dep)))\n\t+$(AM_V_at)sage-logger -p '$(SAGE_SPKG) $(1)-$$(vers_$(1))' '$(SAGE_LOGS)/$(1)-$$(vers_$(1)).log'\n \n$(1): $$(INST)/$(1)-$$(vers_$(1))\n \n$(1)-clean:\n\trm -rf $$(INST)/$(1)-$$(vers_$(1))\nendef\n```\n\nand after:\n\n```\ndefine NORMAL_PACKAGE_templ\n$$(INST)/$(1)-$(2): $(3)\n\t+$(AM_V_at)sage-logger -p '$$(SAGE_SPKG) $(1)-$(2)' '$$(SAGE_LOGS)/$(1)-$(2).log'\n \n$(1): $$(INST)/$(1)-$(2)\n \n$(1)-clean:\n\trm -rf $$(INST)/$(1)-$(2)\nendef\n```\n\nI also added the `DEBUG_RULES` flag that I mentioned on sage-devel.  If you run the generated makefile in dry-run mode with this flag defined you can see exactly what the templates are outputting:\n\n```\n$ make -f build/make/Makefile -n DEBUG_RULES=1\n# Rules for standard packages\n$(INST)/4ti2-1.6.7:   $(inst_zlib)  $(inst_mpir)  $(inst_glpk)\n        +sage-logger -p '$(SAGE_SPKG) 4ti2-1.6.7' '$(SAGE_LOGS)/4ti2-1.6.7.log'\n\n4ti2: $(INST)/4ti2-1.6.7\n\n4ti2-clean:\n        rm -rf $(INST)/4ti2-1.6.7\n\n$(INST)/alabaster-0.7.10:   $(inst_python2)  |  $(inst_pip)\n        +sage-logger -p '$(SAGE_SPKG) alabaster-0.7.10' '$(SAGE_LOGS)/alabaster-0.7.10.log'\n...\n```",
    "created_at": "2018-02-01T14:25:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318544",
    "user": "https://github.com/embray"
}
```

<div id="comment:36" align="right">Comment 36</div>

Last commit made the templates look a bit less noisy.  For example, before:

```
define NORMAL_PACKAGE_templ
$$(INST)/$(1)-$$(vers_$(1)): $$(foreach dep,$$(deps_$(1)),$$(inst_$$(dep)))
	+$(AM_V_at)sage-logger -p '$(SAGE_SPKG) $(1)-$$(vers_$(1))' '$(SAGE_LOGS)/$(1)-$$(vers_$(1)).log'
 
$(1): $$(INST)/$(1)-$$(vers_$(1))
 
$(1)-clean:
	rm -rf $$(INST)/$(1)-$$(vers_$(1))
endef
```

and after:

```
define NORMAL_PACKAGE_templ
$$(INST)/$(1)-$(2): $(3)
	+$(AM_V_at)sage-logger -p '$$(SAGE_SPKG) $(1)-$(2)' '$$(SAGE_LOGS)/$(1)-$(2).log'
 
$(1): $$(INST)/$(1)-$(2)
 
$(1)-clean:
	rm -rf $$(INST)/$(1)-$(2)
endef
```

I also added the `DEBUG_RULES` flag that I mentioned on sage-devel.  If you run the generated makefile in dry-run mode with this flag defined you can see exactly what the templates are outputting:

```
$ make -f build/make/Makefile -n DEBUG_RULES=1
# Rules for standard packages
$(INST)/4ti2-1.6.7:   $(inst_zlib)  $(inst_mpir)  $(inst_glpk)
        +sage-logger -p '$(SAGE_SPKG) 4ti2-1.6.7' '$(SAGE_LOGS)/4ti2-1.6.7.log'

4ti2: $(INST)/4ti2-1.6.7

4ti2-clean:
        rm -rf $(INST)/4ti2-1.6.7

$(INST)/alabaster-0.7.10:   $(inst_python2)  |  $(inst_pip)
        +sage-logger -p '$(SAGE_SPKG) alabaster-0.7.10' '$(SAGE_LOGS)/alabaster-0.7.10.log'
...
```



---

archive/issue_comments_318545.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e\">fc063dc</a></td><td><code>Get SHELL from autoconf</code></td></tr></table>\n",
    "created_at": "2018-02-01T14:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318545",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:37" align="right">Comment 37</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e">fc063dc</a></td><td><code>Get SHELL from autoconf</code></td></tr></table>




---

archive/issue_comments_318546.json:
```json
{
    "body": "Changed commit from **[9ce84c8](https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142)** to **[fc063dc](https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e)**",
    "created_at": "2018-02-01T14:39:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318546",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[9ce84c8](https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142)** to **[fc063dc](https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e)**



---

archive/issue_comments_318547.json:
```json
{
    "body": "Changed commit from **[fc063dc](https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e)** to **[d17e494](https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec)**",
    "created_at": "2018-02-01T15:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318547",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fc063dc](https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e)** to **[d17e494](https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec)**



---

archive/issue_comments_318548.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d796901c5700d3a801660cc6afad48348a254f9e\">d796901</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec\">d17e494</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr></table>\n",
    "created_at": "2018-02-01T15:13:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318548",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38" align="right">Comment 38</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d796901c5700d3a801660cc6afad48348a254f9e">d796901</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec">d17e494</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr></table>




---

archive/issue_comments_318549.json:
```json
{
    "body": "Changed commit from **[d17e494](https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec)** to **[7668fcd](https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb)**",
    "created_at": "2018-02-01T16:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318549",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d17e494](https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec)** to **[7668fcd](https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb)**



---

archive/issue_comments_318550.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb\">7668fcd</a></td><td><code>Fix sage -i</code></td></tr></table>\n",
    "created_at": "2018-02-01T16:26:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318550",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:39" align="right">Comment 39</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb">7668fcd</a></td><td><code>Fix sage -i</code></td></tr></table>




---

archive/issue_comments_318551.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@embray](#comment%3A32):\n> I sympathize with your concerns but I strongly *suspect* that they will prove overstated.\n\nI really hope that you are right and that this won't turn in a \"I told you so\" scenario.\n\nI'll stop protesting for now. There is not much to discuss further anyway, we each know the other's opinions.",
    "created_at": "2018-02-01T17:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318551",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@embray](#comment%3A32):
> I sympathize with your concerns but I strongly *suspect* that they will prove overstated.

I really hope that you are right and that this won't turn in a "I told you so" scenario.

I'll stop protesting for now. There is not much to discuss further anyway, we each know the other's opinions.



---

archive/issue_comments_318552.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@jdemeyer](#comment%3A40):\n> Replying to [@embray](#comment%3A32):\n> > I sympathize with your concerns but I strongly *suspect* that they will prove overstated.\n\n> \n> I really hope that you are right and that this won't turn in a \"I told you so\" scenario.\n\nIf it does, I promise that I'll graciously accept that you were right :)",
    "created_at": "2018-02-02T12:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318552",
    "user": "https://github.com/embray"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@jdemeyer](#comment%3A40):
> Replying to [@embray](#comment%3A32):
> > I sympathize with your concerns but I strongly *suspect* that they will prove overstated.

> 
> I really hope that you are right and that this won't turn in a "I told you so" scenario.

If it does, I promise that I'll graciously accept that you were right :)



---

archive/issue_events_284401.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-02T12:33:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284401"
}
```



---

archive/issue_events_284402.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-02T12:33:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284402"
}
```



---

archive/issue_comments_318553.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nAlso, I think that I've addressed most of the other review comments so far....",
    "created_at": "2018-02-02T12:33:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318553",
    "user": "https://github.com/embray"
}
```

<div id="comment:42" align="right">Comment 42</div>

Also, I think that I've addressed most of the other review comments so far....



---

archive/issue_comments_318554.json:
```json
{
    "body": "Changed commit from **[7668fcd](https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb)** to **[735fd36](https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e)**",
    "created_at": "2018-02-16T16:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318554",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[7668fcd](https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb)** to **[735fd36](https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e)**



---

archive/issue_comments_318555.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b4f40ee915f683991cb4ece6314c9a242b5792c\">4b4f40e</a></td><td><code>Add --with-python=3 configure flag to replace SAGE_PYTHON3=yes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b36d3e9948a31333ee3cfc4c960016bdde1543a\">0b36d3e</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e86ea4c2d62ec820d9603ae25d75df6a74527a43\">e86ea4c</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/586eb4aeec4bf01a816fea3938316b0459383846\">586eb4a</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a04d716ebb3ab3aacf5965019ad53a30cbba710\">1a04d71</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dbf15b3a718d98abe8c0e0969384bebc6810f73\">4dbf15b</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cddac9ce7118d3fc73439afa9f51a2cc08d16d7\">7cddac9</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d88907015b27ea59d5ba16c08cb140aa9a98397c\">d889070</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e\">735fd36</a></td><td><code>Fix sage -i</code></td></tr></table>\n",
    "created_at": "2018-02-16T16:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318555",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:43" align="right">Comment 43</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b4f40ee915f683991cb4ece6314c9a242b5792c">4b4f40e</a></td><td><code>Add --with-python=3 configure flag to replace SAGE_PYTHON3=yes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b36d3e9948a31333ee3cfc4c960016bdde1543a">0b36d3e</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e86ea4c2d62ec820d9603ae25d75df6a74527a43">e86ea4c</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/586eb4aeec4bf01a816fea3938316b0459383846">586eb4a</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a04d716ebb3ab3aacf5965019ad53a30cbba710">1a04d71</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dbf15b3a718d98abe8c0e0969384bebc6810f73">4dbf15b</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cddac9ce7118d3fc73439afa9f51a2cc08d16d7">7cddac9</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d88907015b27ea59d5ba16c08cb140aa9a98397c">d889070</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e">735fd36</a></td><td><code>Fix sage -i</code></td></tr></table>




---

archive/issue_comments_318556.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nRebased to incorporate #24729",
    "created_at": "2018-02-16T16:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318556",
    "user": "https://github.com/embray"
}
```

<div id="comment:44" align="right">Comment 44</div>

Rebased to incorporate #24729



---

archive/issue_comments_318557.json:
```json
{
    "body": "Dependencies: **#24729**",
    "created_at": "2018-02-16T16:33:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318557",
    "user": "https://github.com/embray"
}
```

Dependencies: **#24729**



---

archive/issue_comments_318558.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/057b434babb6ec6eaa7bae4afad4255a7481b1af\">057b434</a></td><td><code>Everything should be rebuilt after GCC upgrade</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4056a0d9eeea7ed21b38160e16f747283b35da03\">4056a0d</a></td><td><code>Merge branch 'u/jdemeyer/everything_should_be_rebuilt_after_gcc_upgrade' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/025804c0334418c027b4e7076c39b58a3a8d2195\">025804c</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83bc9fcc704eaa46944258e41ee6862e14a0644e\">83bc9fc</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87c738972cd468217223f25a957fe73b15e4e15f\">87c7389</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/283ec7b0f95ec3cb36e30d2f5d7c8b0fcc4da0e1\">283ec7b</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b512ddc38ff5e9009024dc6798f252d07a2de81\">3b512dd</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a9fff3500696764dc207b84a0fd471cd2f51cd2\">7a9fff3</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/869f57a45f3adcffca503a8c1a7df90cac94fe20\">869f57a</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80\">1c02a0e</a></td><td><code>Fix sage -i</code></td></tr></table>\n",
    "created_at": "2018-02-19T16:54:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318558",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45" align="right">Comment 45</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/057b434babb6ec6eaa7bae4afad4255a7481b1af">057b434</a></td><td><code>Everything should be rebuilt after GCC upgrade</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4056a0d9eeea7ed21b38160e16f747283b35da03">4056a0d</a></td><td><code>Merge branch 'u/jdemeyer/everything_should_be_rebuilt_after_gcc_upgrade' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/025804c0334418c027b4e7076c39b58a3a8d2195">025804c</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83bc9fcc704eaa46944258e41ee6862e14a0644e">83bc9fc</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87c738972cd468217223f25a957fe73b15e4e15f">87c7389</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/283ec7b0f95ec3cb36e30d2f5d7c8b0fcc4da0e1">283ec7b</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b512ddc38ff5e9009024dc6798f252d07a2de81">3b512dd</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a9fff3500696764dc207b84a0fd471cd2f51cd2">7a9fff3</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/869f57a45f3adcffca503a8c1a7df90cac94fe20">869f57a</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80">1c02a0e</a></td><td><code>Fix sage -i</code></td></tr></table>




---

archive/issue_comments_318559.json:
```json
{
    "body": "Changed commit from **[735fd36](https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e)** to **[1c02a0e](https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80)**",
    "created_at": "2018-02-19T16:54:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318559",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[735fd36](https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e)** to **[1c02a0e](https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80)**



---

archive/issue_comments_318560.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nRebased again and incorporated #24703.",
    "created_at": "2018-02-19T16:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318560",
    "user": "https://github.com/embray"
}
```

<div id="comment:46" align="right">Comment 46</div>

Rebased again and incorporated #24703.



---

archive/issue_comments_318561.json:
```json
{
    "body": "Changed dependencies from **#24729** to **#24729, #24703**",
    "created_at": "2018-02-19T16:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318561",
    "user": "https://github.com/embray"
}
```

Changed dependencies from **#24729** to **#24729, #24703**



---

archive/issue_comments_318562.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nneeds rebase",
    "created_at": "2018-03-03T07:41:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318562",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:47" align="right">Comment 47</div>

needs rebase



---

archive/issue_events_284403.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-03T07:41:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284403"
}
```



---

archive/issue_events_284404.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-03T07:41:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284404"
}
```



---

archive/issue_comments_318563.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b94974dd7e41d9d4e9a62da65c2ce691ccf2ffe\">5b94974</a></td><td><code>Everything should be rebuilt after GCC upgrade</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54f3a48beb504d652a6d95c87d4e126e1cc6133c\">54f3a48</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdeca46c3ca2dfad3e3f3b4e5e9cbd87fa4b453f\">bdeca46</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1150f957cc33b68724473340753d576239411ea1\">1150f95</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/505db024a02b85d32f82050e39e62902796746b7\">505db02</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c61dba41fb8c132d14b76b6081e9196a4f0e26f4\">c61dba4</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eefce2c4e7f271227419cef5bb72cd10d91ea0d8\">eefce2c</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d77e6870e8006e8eb58e08f622dba760d2d8fd05\">d77e687</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700\">6f99aab</a></td><td><code>Fix sage -i</code></td></tr></table>\n",
    "created_at": "2018-03-05T11:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318563",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:48" align="right">Comment 48</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b94974dd7e41d9d4e9a62da65c2ce691ccf2ffe">5b94974</a></td><td><code>Everything should be rebuilt after GCC upgrade</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54f3a48beb504d652a6d95c87d4e126e1cc6133c">54f3a48</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdeca46c3ca2dfad3e3f3b4e5e9cbd87fa4b453f">bdeca46</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1150f957cc33b68724473340753d576239411ea1">1150f95</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/505db024a02b85d32f82050e39e62902796746b7">505db02</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c61dba41fb8c132d14b76b6081e9196a4f0e26f4">c61dba4</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eefce2c4e7f271227419cef5bb72cd10d91ea0d8">eefce2c</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d77e6870e8006e8eb58e08f622dba760d2d8fd05">d77e687</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700">6f99aab</a></td><td><code>Fix sage -i</code></td></tr></table>




---

archive/issue_comments_318564.json:
```json
{
    "body": "Changed commit from **[1c02a0e](https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80)** to **[6f99aab](https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700)**",
    "created_at": "2018-03-05T11:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318564",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1c02a0e](https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80)** to **[6f99aab](https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700)**



---

archive/issue_comments_318565.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nThe longer this stays open the harder it is to keep it maintained because it will conflict with anything that modifies `configure.ac`.",
    "created_at": "2018-03-05T11:06:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318565",
    "user": "https://github.com/embray"
}
```

<div id="comment:49" align="right">Comment 49</div>

The longer this stays open the harder it is to keep it maintained because it will conflict with anything that modifies `configure.ac`.



---

archive/issue_events_284405.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-05T11:06:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284405"
}
```



---

archive/issue_events_284406.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-05T11:06:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284406"
}
```



---

archive/issue_comments_318566.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\nOk. Reviewing this now\u2026",
    "created_at": "2018-03-05T12:33:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318566",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:50" align="right">Comment 50</div>

Ok. Reviewing this nowâ¦



---

archive/issue_comments_318567.json:
```json
{
    "body": "Changed work issues from **minor documentation issues** to none",
    "created_at": "2018-03-05T12:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318567",
    "user": "https://github.com/saraedum"
}
```

Changed work issues from **minor documentation issues** to none



---

archive/issue_comments_318568.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nThanks for this very nice summary in the README. If you have checked that this actually works, feel free to set this to positive review.",
    "created_at": "2018-03-05T12:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318568",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:51" align="right">Comment 51</div>

Thanks for this very nice summary in the README. If you have checked that this actually works, feel free to set this to positive review.



---

archive/issue_comments_318569.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nThere's one last change I would like to make, though it shouldn't substantially alter anything.  I just want to move all the stuff that collects the packages into its own macro, and move it to a separate file.\n\nI already did this in another branch, but it doesn't make particular sense to leave out of this ticket.",
    "created_at": "2018-03-06T12:40:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318569",
    "user": "https://github.com/embray"
}
```

<div id="comment:52" align="right">Comment 52</div>

There's one last change I would like to make, though it shouldn't substantially alter anything.  I just want to move all the stuff that collects the packages into its own macro, and move it to a separate file.

I already did this in another branch, but it doesn't make particular sense to leave out of this ticket.



---

archive/issue_comments_318570.json:
```json
{
    "body": "Changed commit from **[6f99aab](https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700)** to **[bb9ff43](https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7)**",
    "created_at": "2018-03-06T13:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318570",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[6f99aab](https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700)** to **[bb9ff43](https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7)**



---

archive/issue_comments_318571.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7\">bb9ff43</a></td><td><code>Moved the code that collects up SPKG info into a single SAGE_SPKG_COLLECT macro, along with additional documentation thereof.</code></td></tr></table>\n",
    "created_at": "2018-03-06T13:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318571",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53" align="right">Comment 53</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7">bb9ff43</a></td><td><code>Moved the code that collects up SPKG info into a single SAGE_SPKG_COLLECT macro, along with additional documentation thereof.</code></td></tr></table>




---

archive/issue_comments_318572.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nWill be interesting to see how the buildbots do with this.",
    "created_at": "2018-03-06T13:07:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318572",
    "user": "https://github.com/embray"
}
```

<div id="comment:54" align="right">Comment 54</div>

Will be interesting to see how the buildbots do with this.



---

archive/issue_events_284407.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T13:07:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284407"
}
```



---

archive/issue_events_284408.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T13:07:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284408"
}
```



---

archive/issue_events_284409.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T14:01:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284409"
}
```



---

archive/issue_events_284410.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T14:01:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284410"
}
```



---

archive/issue_comments_318573.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\nThere appears to be a bug in outputting the package versions during the configure checks.  This might have been introduced in my last rebase...",
    "created_at": "2018-03-06T14:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318573",
    "user": "https://github.com/embray"
}
```

<div id="comment:55" align="right">Comment 55</div>

There appears to be a bug in outputting the package versions during the configure checks.  This might have been introduced in my last rebase...



---

archive/issue_comments_318574.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050\">2a99185</a></td><td><code>This should be quoted to prevent the $1 from being expanded as an argument to the m4 macro</code></td></tr></table>\n",
    "created_at": "2018-03-06T14:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318574",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:56" align="right">Comment 56</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050">2a99185</a></td><td><code>This should be quoted to prevent the $1 from being expanded as an argument to the m4 macro</code></td></tr></table>




---

archive/issue_comments_318575.json:
```json
{
    "body": "Changed commit from **[bb9ff43](https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7)** to **[2a99185](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)**",
    "created_at": "2018-03-06T14:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318575",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bb9ff43](https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7)** to **[2a99185](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)**



---

archive/issue_events_284411.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T14:05:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284411"
}
```



---

archive/issue_events_284412.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T14:05:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284412"
}
```



---

archive/issue_comments_318576.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">Comment 58</div>\n\nOk. Your recent changes look good to me.",
    "created_at": "2018-03-07T11:14:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318576",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:58" align="right">Comment 58</div>

Ok. Your recent changes look good to me.



---

archive/issue_comments_318577.json:
```json
{
    "body": "Changed branch from **[u/embray/build/makefile-in](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/makefile-in)** to **[2a99185](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)**",
    "created_at": "2018-03-08T00:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318577",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/embray/build/makefile-in](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/makefile-in)** to **[2a99185](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)**



---

archive/issue_events_284413.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-08T00:02:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284413"
}
```



---

archive/issue_events_284414.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "15fbaa620fe70a4c0d8c49ab042c68820ceae14d",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-03-08T00:02:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284414"
}
```



---

archive/issue_comments_318578.json:
```json
{
    "body": "Changed commit from **[2a99185](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)** to none",
    "created_at": "2018-03-12T18:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318578",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[2a99185](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)** to none



---

archive/issue_comments_318579.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">Comment 60</div>\n\nThis completely breaks upgrading Sage, it seems to me. On three different OS X machines with 8.2.beta7 installed, upgrading to 8.2.beta8, or in particular just using this branch, results in a bad `build/make/Makefile`: lines like\n\n```\ndeps_4ti2 =  $(SAGE_LOCAL)/bin/gcczlib $(MP_LIBRARY) glpk\ndeps_alabaster =  $(SAGE_LOCAL)/bin/gcc$(PYTHON) | pip\ndeps_appnope =  $(SAGE_LOCAL)/bin/gcc$(PYTHON) | pip\n```\nPlease fix this.",
    "created_at": "2018-03-12T18:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318579",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:60" align="right">Comment 60</div>

This completely breaks upgrading Sage, it seems to me. On three different OS X machines with 8.2.beta7 installed, upgrading to 8.2.beta8, or in particular just using this branch, results in a bad `build/make/Makefile`: lines like

```
deps_4ti2 =  $(SAGE_LOCAL)/bin/gcczlib $(MP_LIBRARY) glpk
deps_alabaster =  $(SAGE_LOCAL)/bin/gcc$(PYTHON) | pip
deps_appnope =  $(SAGE_LOCAL)/bin/gcc$(PYTHON) | pip
```
Please fix this.



---

archive/issue_comments_318580.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">Comment 61</div>\n\nIndeed, it looks like a bug introduced upon the last rebase.  I didn't catch it because it only affects if you are using Sage's `gcc` spkg.",
    "created_at": "2018-03-12T19:25:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318580",
    "user": "https://github.com/embray"
}
```

<div id="comment:61" align="right">Comment 61</div>

Indeed, it looks like a bug introduced upon the last rebase.  I didn't catch it because it only affects if you are using Sage's `gcc` spkg.



---

archive/issue_comments_318581.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">Comment 62</div>\n\nActually it appears the problem might come from #24703 in the first place, since it seems to misplace the space in the `GCC_DEP` variable...",
    "created_at": "2018-03-12T19:30:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318581",
    "user": "https://github.com/embray"
}
```

<div id="comment:62" align="right">Comment 62</div>

Actually it appears the problem might come from #24703 in the first place, since it seems to misplace the space in the `GCC_DEP` variable...



---

archive/issue_comments_318582.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">Comment 63</div>\n\nReplying to [@embray](#comment%3A62):\n> Actually it appears the problem might come from #24703 in the first place, since it seems to misplace the space in the `GCC_DEP` variable...\n\nI take that back--the missing space is in my code.",
    "created_at": "2018-03-12T19:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318582",
    "user": "https://github.com/embray"
}
```

<div id="comment:63" align="right">Comment 63</div>

Replying to [@embray](#comment%3A62):
> Actually it appears the problem might come from #24703 in the first place, since it seems to misplace the space in the `GCC_DEP` variable...

I take that back--the missing space is in my code.



---

archive/issue_events_284415.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-12T19:35:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284415"
}
```



---

archive/issue_events_284416.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-12T19:42:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284416"
}
```



---

archive/issue_events_284417.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-12T19:42:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-284417"
}
```



---

archive/issue_comments_318583.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">Comment 65</div>\n\nYou cannot just re-open a ticket. Only the release manager should do that.",
    "created_at": "2018-03-12T19:42:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318583",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:65" align="right">Comment 65</div>

You cannot just re-open a ticket. Only the release manager should do that.



---

archive/issue_comments_318584.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">Comment 66</div>\n\nEspecially this ticket must not be re-opened since it has already been released. Just open a new ticket to fix it.",
    "created_at": "2018-03-12T19:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318584",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:66" align="right">Comment 66</div>

Especially this ticket must not be re-opened since it has already been released. Just open a new ticket to fix it.



---

archive/issue_comments_318585.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">Comment 67</div>\n\nIt's not in the latest beta yet.",
    "created_at": "2018-03-12T19:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318585",
    "user": "https://github.com/embray"
}
```

<div id="comment:67" align="right">Comment 67</div>

It's not in the latest beta yet.



---

archive/issue_comments_318586.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">Comment 68</div>\n\nOops, apparently it is.  If I had thought otherwise I wouldn't have reopened.  Strange--I just checked too any I didn't see it.",
    "created_at": "2018-03-12T19:51:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318586",
    "user": "https://github.com/embray"
}
```

<div id="comment:68" align="right">Comment 68</div>

Oops, apparently it is.  If I had thought otherwise I wouldn't have reopened.  Strange--I just checked too any I didn't see it.



---

archive/issue_comments_318587.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">Comment 69</div>\n\nFollowup in #24961.",
    "created_at": "2018-03-12T19:54:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318587",
    "user": "https://github.com/embray"
}
```

<div id="comment:69" align="right">Comment 69</div>

Followup in #24961.



---

archive/issue_comments_318588.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">Comment 70</div>\n\nThanks for the quick diagnosis, by the way!",
    "created_at": "2018-03-13T02:25:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318588",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:70" align="right">Comment 70</div>

Thanks for the quick diagnosis, by the way!



---

archive/issue_comments_318589.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">Comment 71</div>\n\nReplying to [@jhpalmieri](#comment%3A70):\n> Thanks for the quick diagnosis, by the way!\n\nNo, thank you for pointing it out.",
    "created_at": "2018-03-13T14:39:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318589",
    "user": "https://github.com/embray"
}
```

<div id="comment:71" align="right">Comment 71</div>

Replying to [@jhpalmieri](#comment%3A70):
> Thanks for the quick diagnosis, by the way!

No, thank you for pointing it out.



---

archive/issue_comments_318590.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">Comment 72</div>\n\nWhy is this making changes to `build/pkgs/gcc/spkg-install`? That might have broken building Sage from scratch if GCC is built.",
    "created_at": "2018-03-17T07:35:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318590",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:72" align="right">Comment 72</div>

Why is this making changes to `build/pkgs/gcc/spkg-install`? That might have broken building Sage from scratch if GCC is built.



---

archive/issue_comments_318591.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">Comment 73</div>\n\nThis might have broken `$(SAGERUNTIME)`: #24995",
    "created_at": "2018-03-17T18:18:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318591",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:73" align="right">Comment 73</div>

This might have broken `$(SAGERUNTIME)`: #24995



---

archive/issue_comments_318592.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">Comment 74</div>\n\nReplying to [@jdemeyer](#comment%3A72):\n> Why is this making changes to `build/pkgs/gcc/spkg-install`? That might have broken building Sage from scratch if GCC is built.\n\nI just noticed this comment.  That was *not* intentional.  Probably a mis-resolved conflict (though I don't know why since I never made any edits to that file in the first place).",
    "created_at": "2018-03-21T16:52:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318592",
    "user": "https://github.com/embray"
}
```

<div id="comment:74" align="right">Comment 74</div>

Replying to [@jdemeyer](#comment%3A72):
> Why is this making changes to `build/pkgs/gcc/spkg-install`? That might have broken building Sage from scratch if GCC is built.

I just noticed this comment.  That was *not* intentional.  Probably a mis-resolved conflict (though I don't know why since I never made any edits to that file in the first place).



---

archive/issue_comments_318593.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">Comment 75</div>\n\n`DUMMY_PACKAGES` seems broken: #25188",
    "created_at": "2018-04-17T09:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318593",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:75" align="right">Comment 75</div>

`DUMMY_PACKAGES` seems broken: #25188



---

archive/issue_comments_318594.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">Comment 76</div>\n\nWhat was the purpose of this change:\n\n```diff\n@@ -58,11 +58,11 @@ all-sage: \\\n # option to make forces all targets to be built unconditionally)\n download-for-sdist: base\n        env SAGE_INSTALL_FETCH_ONLY=yes $(MAKE) -B SAGERUNTIME= \\\n-               $(SDIST_PACKAGES)\n+               $(SDIST_PACKAGE_INSTS)\n \n```\n\nIt has broken sdists, see #25319.",
    "created_at": "2018-06-08T08:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318594",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:76" align="right">Comment 76</div>

What was the purpose of this change:

```diff
@@ -58,11 +58,11 @@ all-sage: \
 # option to make forces all targets to be built unconditionally)
 download-for-sdist: base
        env SAGE_INSTALL_FETCH_ONLY=yes $(MAKE) -B SAGERUNTIME= \
-               $(SDIST_PACKAGES)
+               $(SDIST_PACKAGE_INSTS)
 
```

It has broken sdists, see #25319.
