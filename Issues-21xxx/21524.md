# Issue 21524: configure.ac: write build/make/Makefile within an AC_CONFIG_FILE, not during main configure

archive/issues_021287.json:
```json
{
    "body": "`build/make/Makefile` should be written by `config.status` within an `AC_CONFIG_FILE` template, not at `configure` time.\n\nDepends on #24729\n\nDepends on #24703\n\n**Branch:** [2a991859c7fdb62357a0136c6c6df8902e677050](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)\n\n**Reviewer:** Julian R\u00fcth\n\n**Author:** Erik Bray\n\nIssue created by migration from https://trac.sagemath.org/ticket/21524\n\n",
    "closed_at": "2018-03-12T19:42:39Z",
    "created_at": "2016-09-17T23:53:45Z",
    "labels": [
        "component: build: configure",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.2",
    "title": "configure.ac: write build/make/Makefile within an AC_CONFIG_FILE, not during main configure",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/21524",
    "user": "https://github.com/mkoeppe"
}
```
`build/make/Makefile` should be written by `config.status` within an `AC_CONFIG_FILE` template, not at `configure` time.

Depends on #24729

Depends on #24703

**Branch:** [2a991859c7fdb62357a0136c6c6df8902e677050](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)

**Reviewer:** Julian RÃ¼th

**Author:** Erik Bray

Issue created by migration from https://trac.sagemath.org/ticket/21524





---

archive/issue_comments_318401.json:
```json
{
    "body": "The title \"Get rid of file descriptor 7 hack\" is different from the description \"build/make/Makefile should be written within an AC_CONFIG_COMMANDS procedure\". Do you want to fix both things here? Can you please clarify?\n\nAnd honestly, I think there is nothing wrong with the \"file descriptor 7 hack\". `autoconf` itself uses similar hacks internally.",
    "created_at": "2016-09-18T11:13:19Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318401",
    "user": "https://github.com/jdemeyer"
}
```

The title "Get rid of file descriptor 7 hack" is different from the description "build/make/Makefile should be written within an AC_CONFIG_COMMANDS procedure". Do you want to fix both things here? Can you please clarify?

And honestly, I think there is nothing wrong with the "file descriptor 7 hack". `autoconf` itself uses similar hacks internally.



---

archive/issue_comments_318402.json:
```json
{
    "body": "<a id='comment:2'></a>\nI've updated the title",
    "created_at": "2016-09-18T17:37:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318402",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
I've updated the title



---

archive/issue_events_192882.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-18T17:37:49Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "rename": {
        "from": "configure.ac: Get rid of file descriptor 7 hack",
        "to": "configure.ac: write build/make/Makefile within an AC_CONFIG_COMMANDS, not during main configure"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192882"
}
```



---

archive/issue_comments_318403.json:
```json
{
    "body": "<a id='comment:3'></a>\nI agree, there's nothing wrong with using a file descriptor to write to a file ;)",
    "created_at": "2016-09-18T20:29:46Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318403",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
I agree, there's nothing wrong with using a file descriptor to write to a file ;)



---

archive/issue_comments_318404.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,3 @@\n-build/make/Makefile should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. \n+`build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. \n \n+Marking this as dependent on #21479 just because that that ticket changes the same part of `configure.ac`.\n``````\n",
    "created_at": "2016-09-18T20:32:08Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318404",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,3 @@
-build/make/Makefile should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. 
+`build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. 
 
+Marking this as dependent on #21479 just because that that ticket changes the same part of `configure.ac`.
``````




---

archive/issue_comments_318405.json:
```json
{
    "body": "**Dependencies:** #21479",
    "created_at": "2016-09-18T20:32:08Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318405",
    "user": "https://github.com/mkoeppe"
}
```

**Dependencies:** #21479



---

archive/issue_comments_318406.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n `build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. \n \n-Marking this as dependent on #21479 just because that that ticket changes the same part of `configure.ac`.\n+Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.\n``````\n",
    "created_at": "2016-09-18T20:32:22Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318406",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 `build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. 
 
-Marking this as dependent on #21479 just because that that ticket changes the same part of `configure.ac`.
+Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.
``````




---

archive/issue_comments_318407.json:
```json
{
    "body": "<a id='comment:6'></a>\nDoes it necessarily need to use `AC_CONFIG_COMMANDS`?  Most of the stuff that writes `build/make/Makefile` could just as easily be moved into its own macro in a separate file in the `m4/` directory.\n\nAs I see it the main goal here is to simplify the configure.ac by moving more functionality into separate files.  But moving the existing code into an m4 macro would take less work, and has the advantage that it would have full access to any other variables set in other parts of the `configure` script, without having to explicitly pass them on to an external command.",
    "created_at": "2017-07-19T11:57:17Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318407",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
Does it necessarily need to use `AC_CONFIG_COMMANDS`?  Most of the stuff that writes `build/make/Makefile` could just as easily be moved into its own macro in a separate file in the `m4/` directory.

As I see it the main goal here is to simplify the configure.ac by moving more functionality into separate files.  But moving the existing code into an m4 macro would take less work, and has the advantage that it would have full access to any other variables set in other parts of the `configure` script, without having to explicitly pass them on to an external command.



---

archive/issue_comments_318408.json:
```json
{
    "body": "<a id='comment:7'></a>\nOn second thought, I can see why this way would be better, as it's more in spirit with how configure is supposed to work w.r.t. generating files.  I'll have to give that some more thought.  Maybe there aren't so many variables that need to be passed in.",
    "created_at": "2017-07-19T12:39:48Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318408",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
On second thought, I can see why this way would be better, as it's more in spirit with how configure is supposed to work w.r.t. generating files.  I'll have to give that some more thought.  Maybe there aren't so many variables that need to be passed in.



---

archive/issue_comments_318409.json:
```json
{
    "body": "**Branch:** [u/embray/build/makefile-in](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/makefile-in)",
    "created_at": "2017-07-20T15:25:56Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318409",
    "user": "https://github.com/embray"
}
```

**Branch:** [u/embray/build/makefile-in](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/makefile-in)



---

archive/issue_comments_318410.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-`build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. \n+`build/make/Makefile` should be written within an AC_CONFIG_FILE template, not at configure time. \n \n Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.\n``````\n",
    "created_at": "2017-07-20T15:25:56Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318410",
    "user": "https://github.com/embray"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-`build/make/Makefile` should be written within an AC_CONFIG_COMMANDS procedure, not at configure time. 
+`build/make/Makefile` should be written within an AC_CONFIG_FILE template, not at configure time. 
 
 Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.
``````




---

archive/issue_events_192883.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "rename": {
        "from": "configure.ac: write build/make/Makefile within an AC_CONFIG_COMMANDS, not during main configure",
        "to": "configure.ac: write build/make/Makefile within an AC_CONFIG_FILE, not during main configure"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192883"
}
```



---

archive/issue_events_192884.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192884"
}
```



---

archive/issue_events_192885.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192885"
}
```



---

archive/issue_comments_318411.json:
```json
{
    "body": "**Commit:** [db428a360b0b8b0322744186c3a690bb38386574](https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574)",
    "created_at": "2017-07-20T15:25:56Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318411",
    "user": "https://github.com/embray"
}
```

**Commit:** [db428a360b0b8b0322744186c3a690bb38386574](https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574)



---

archive/issue_comments_318412.json:
```json
{
    "body": "**Author:** Erik Bray",
    "created_at": "2017-07-20T15:25:56Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318412",
    "user": "https://github.com/embray"
}
```

**Author:** Erik Bray



---

archive/issue_events_192886.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:25:56Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192886"
}
```



---

archive/issue_comments_318413.json:
```json
{
    "body": "<a id='comment:8'></a>\nHere's my proposed solution to this (I updated the ticket to mention `AC_CONFIG_FILE` since that's what this uses).\n\nThis adds a `build/make/Makefile.in` template that is used to generated `build/make/Makefile` in `config.status`.  The `configure` script now just collects values for some variables that are inserted into the Makefile template.  I tried to keep as much actual Makefile syntax out of the output variables as possible, sticking mostly to just lists of package names that are operated over.  Most of the rules for building packages are generated by the Makefile itself in `$(eval ...)` loops.  The end result I think is actually cleaner and easier to understand.\n\nIf any of this should be controversial, it may be the use of some more advanced GNU make constructs, the portability of which I'm not sure.  This was tested with GNU make 3.81 (about 11 years old), and 4.2.1 (very recent).  That said, it's using some relatively advanced GNU make features that may not be available in other makes.  I think it's still *better*, but if need be more of the Makefile generation could be pushed back into `configure`, but still provided via output variables, instead of writing directly to a file.\n\nIncreased the priority since I have other build system work that would likely depend on this, and also because it makes some non-trivial performance improvements, especially on Cygwin.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b034b3a5f6c7073e8a3bc2acbd5584f4f7189854\">b034b3a</a></td><td><code>Fix minor bug in the conway_polynomials dependencies; it should just list the bare package name</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f88d3cbc08ccee5edbe1b4be78e69ae81acacb8b\">f88d3cb</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574\">db428a3</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>\n",
    "created_at": "2017-07-20T15:25:56Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318413",
    "user": "https://github.com/embray"
}
```

<a id='comment:8'></a>
Here's my proposed solution to this (I updated the ticket to mention `AC_CONFIG_FILE` since that's what this uses).

This adds a `build/make/Makefile.in` template that is used to generated `build/make/Makefile` in `config.status`.  The `configure` script now just collects values for some variables that are inserted into the Makefile template.  I tried to keep as much actual Makefile syntax out of the output variables as possible, sticking mostly to just lists of package names that are operated over.  Most of the rules for building packages are generated by the Makefile itself in `$(eval ...)` loops.  The end result I think is actually cleaner and easier to understand.

If any of this should be controversial, it may be the use of some more advanced GNU make constructs, the portability of which I'm not sure.  This was tested with GNU make 3.81 (about 11 years old), and 4.2.1 (very recent).  That said, it's using some relatively advanced GNU make features that may not be available in other makes.  I think it's still *better*, but if need be more of the Makefile generation could be pushed back into `configure`, but still provided via output variables, instead of writing directly to a file.

Increased the priority since I have other build system work that would likely depend on this, and also because it makes some non-trivial performance improvements, especially on Cygwin.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b034b3a5f6c7073e8a3bc2acbd5584f4f7189854">b034b3a</a></td><td><code>Fix minor bug in the conway_polynomials dependencies; it should just list the bare package name</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f88d3cbc08ccee5edbe1b4be78e69ae81acacb8b">f88d3cb</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574">db428a3</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>




---

archive/issue_events_192887.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-07-20T15:26:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192887"
}
```



---

archive/issue_comments_318414.json:
```json
{
    "body": "<a id='comment:10'></a>\nWeird that the patchbot is failing due to Numpy of all things.  I wonder if it has something more to do with the fact that it's building in a temp dir (since this is an \"unsafe\" ticket) than anything to do with the patch itself, but I'll have to see if I can reproduce...\n\n```\n[numpy-1.12.1] Traceback (most recent call last):\n[numpy-1.12.1]   File \"<stdin>\", line 3, in <module>\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/__init__.py\", line 142, in <module>\n[numpy-1.12.1]     from . import add_newdocs\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/add_newdocs.py\", line 13, in <module>\n[numpy-1.12.1]     from numpy.lib import add_newdoc\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/lib/__init__.py\", line 18, in <module>\n[numpy-1.12.1]     from .polynomial import *\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/lib/polynomial.py\", line 20, in <module>\n[numpy-1.12.1]     from numpy.linalg import eigvals, lstsq, inv\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/__init__.py\", line 51, in <module>\n[numpy-1.12.1]     from .linalg import *\n[numpy-1.12.1]   File \"/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/linalg.py\", line 29, in <module>\n[numpy-1.12.1]     from numpy.linalg import lapack_lite, _umath_linalg\n[numpy-1.12.1] ImportError: /tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/lapack_lite.so: undefined symbol: zungqr_\n```",
    "created_at": "2017-09-08T08:14:10Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318414",
    "user": "https://github.com/embray"
}
```

<a id='comment:10'></a>
Weird that the patchbot is failing due to Numpy of all things.  I wonder if it has something more to do with the fact that it's building in a temp dir (since this is an "unsafe" ticket) than anything to do with the patch itself, but I'll have to see if I can reproduce...

```
[numpy-1.12.1] Traceback (most recent call last):
[numpy-1.12.1]   File "<stdin>", line 3, in <module>
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/__init__.py", line 142, in <module>
[numpy-1.12.1]     from . import add_newdocs
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/add_newdocs.py", line 13, in <module>
[numpy-1.12.1]     from numpy.lib import add_newdoc
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/lib/__init__.py", line 18, in <module>
[numpy-1.12.1]     from .polynomial import *
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/lib/polynomial.py", line 20, in <module>
[numpy-1.12.1]     from numpy.linalg import eigvals, lstsq, inv
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/__init__.py", line 51, in <module>
[numpy-1.12.1]     from .linalg import *
[numpy-1.12.1]   File "/tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/linalg.py", line 29, in <module>
[numpy-1.12.1]     from numpy.linalg import lapack_lite, _umath_linalg
[numpy-1.12.1] ImportError: /tmp/tmp4YcJD2-sage-git-temp-21524/local/lib/python2.7/site-packages/numpy/linalg/lapack_lite.so: undefined symbol: zungqr_
```



---

archive/issue_events_192888.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:27:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192888"
}
```



---

archive/issue_events_192889.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-12-12T08:27:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "milestone": "sage-8.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192889"
}
```



---

archive/issue_comments_318415.json:
```json
{
    "body": "**Work Issues:** merge conflicts",
    "created_at": "2018-01-14T01:56:53Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318415",
    "user": "https://github.com/saraedum"
}
```

**Work Issues:** merge conflicts



---

archive/issue_events_192890.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-01-14T01:56:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192890"
}
```



---

archive/issue_events_192891.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2018-01-14T01:56:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192891"
}
```



---

archive/issue_comments_318416.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f96a65a68d57543681ac80b2787e624fd2e6b7c\">3f96a65</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d\">14c2577</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>\n",
    "created_at": "2018-01-16T17:11:07Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318416",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f96a65a68d57543681ac80b2787e624fd2e6b7c">3f96a65</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d">14c2577</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>




---

archive/issue_comments_318417.json:
```json
{
    "body": "**Changing commit** from \"[db428a360b0b8b0322744186c3a690bb38386574](https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574)\" to \"[14c25774d47d58979525b77af85df28b94e2223d](https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d)\".",
    "created_at": "2018-01-16T17:11:07Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318417",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[db428a360b0b8b0322744186c3a690bb38386574](https://github.com/sagemath/sagetrac-mirror/commit/db428a360b0b8b0322744186c3a690bb38386574)" to "[14c25774d47d58979525b77af85df28b94e2223d](https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d)".



---

archive/issue_events_192892.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T17:14:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192892"
}
```



---

archive/issue_events_192893.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-16T17:14:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192893"
}
```



---

archive/issue_comments_318418.json:
```json
{
    "body": "**Changing commit** from \"[14c25774d47d58979525b77af85df28b94e2223d](https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d)\" to \"[3ba565f3f2ddf5382a4c7a728b720bc132f6d508](https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508)\".",
    "created_at": "2018-01-30T11:57:07Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318418",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[14c25774d47d58979525b77af85df28b94e2223d](https://github.com/sagemath/sagetrac-mirror/commit/14c25774d47d58979525b77af85df28b94e2223d)" to "[3ba565f3f2ddf5382a4c7a728b720bc132f6d508](https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508)".



---

archive/issue_comments_318419.json:
```json
{
    "body": "<a id='comment:15'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3c16cc93a810a01384d88d9ca8cabb0e2f656850\">3c16cc9</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508\">3ba565f</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>\n",
    "created_at": "2018-01-30T11:57:07Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318419",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3c16cc93a810a01384d88d9ca8cabb0e2f656850">3c16cc9</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508">3ba565f</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr></table>




---

archive/issue_comments_318420.json:
```json
{
    "body": "**Changing work issues** from \"merge conflicts\" to \"\".",
    "created_at": "2018-01-30T11:58:16Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318420",
    "user": "https://github.com/embray"
}
```

**Changing work issues** from "merge conflicts" to "".



---

archive/issue_comments_318421.json:
```json
{
    "body": "**Changing dependencies** from \"#21479\" to \"\".",
    "created_at": "2018-01-30T11:58:16Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318421",
    "user": "https://github.com/embray"
}
```

**Changing dependencies** from "#21479" to "".



---

archive/issue_comments_318422.json:
```json
{
    "body": "<a id='comment:17'></a>\nWhy? This makes the `Makefile` much harder to understand for no obvious benefit...",
    "created_at": "2018-01-30T15:56:20Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318422",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
Why? This makes the `Makefile` much harder to understand for no obvious benefit...



---

archive/issue_comments_318423.json:
```json
{
    "body": "<a id='comment:18'></a>\nPersonally, I find this horrible. I highly value the debuggability of an explicit `Makefile`.\n\nOf course, that's a very subjective thing so I'm keeping the needs_review status.",
    "created_at": "2018-01-30T16:03:50Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318423",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Personally, I find this horrible. I highly value the debuggability of an explicit `Makefile`.

Of course, that's a very subjective thing so I'm keeping the needs_review status.



---

archive/issue_comments_318424.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1 @@\n-`build/make/Makefile` should be written within an AC_CONFIG_FILE template, not at configure time. \n-\n-Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.\n+`build/make/Makefile` should be written by `config.status` within an `AC_CONFIG_FILE` template, not at `configure` time.\n``````\n",
    "created_at": "2018-01-30T16:03:50Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318424",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1 @@
-`build/make/Makefile` should be written within an AC_CONFIG_FILE template, not at configure time. 
-
-Marking this as dependent on #21479 just because that ticket changes the same part of `configure.ac`.
+`build/make/Makefile` should be written by `config.status` within an `AC_CONFIG_FILE` template, not at `configure` time.
``````




---

archive/issue_comments_318425.json:
```json
{
    "body": "<a id='comment:19'></a>\nI explained all of this in my e-mail...",
    "created_at": "2018-01-30T17:25:15Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318425",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
I explained all of this in my e-mail...



---

archive/issue_comments_318426.json:
```json
{
    "body": "<a id='comment:20'></a>\nAllow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.",
    "created_at": "2018-01-31T15:01:19Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318426",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.



---

archive/issue_comments_318427.json:
```json
{
    "body": "<a id='comment:21'></a>\nI think the proposed changes are an improvement. I find the proposed setup easier to read, understand, and modify than the previous echos in configure. It also feels closer to the intended way of using autoconf. I am not sure if the resulting Makefile is harder to read, I don't really see why, in any case, I can see why we would like to get rid of the `echo` hack which makes it quite annoying to edit `configure` imho.\n\nSome comments (apart from these minor issues, I would not mind setting this to positive review):\n\n* I might be totally misunderstanding something but the following comment does not actually apply to the `Makefile.in`, does it?\n\n```\n+# This file has been automatically generated by\n+#   /home/embray/src/sagemath/sage/config.status\n+# You should not edit it by hand\n```\n    I think that some general comment about sage-the-distribution would be nice here and some comment on what transforms this file to which other file.\n* I don't really understand the following comment\n\n```\n+    # If $need_to_install_{PKG_NAME} is set to no, then set inst_<pkgname> to\n+    # some dummy file to skip the installation.\n```\n    So, I guess `pkgname` and `PKG_NAME` are the same? But where is `inst_<pkgname>` being set below? (Only indirectly in `Makefile.in`, right?)\n* I don't see where you are obscuring anything here. (You copied it over and it should probably go into the `.in` file.)\n\n```\n+    # Below we have to obscure A\"\"M_V_at, or autoconf would complain:\n+    # \"error: possibly undefined macro: A\"\"M_V_at\"\n```\n* I would like the `configure.ac` to contain a `#` comment at the top which explains how this all works, in particular how this differs from a standard autoconf/automake setup.",
    "created_at": "2018-01-31T15:01:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318427",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:21'></a>
I think the proposed changes are an improvement. I find the proposed setup easier to read, understand, and modify than the previous echos in configure. It also feels closer to the intended way of using autoconf. I am not sure if the resulting Makefile is harder to read, I don't really see why, in any case, I can see why we would like to get rid of the `echo` hack which makes it quite annoying to edit `configure` imho.

Some comments (apart from these minor issues, I would not mind setting this to positive review):

* I might be totally misunderstanding something but the following comment does not actually apply to the `Makefile.in`, does it?

```
+# This file has been automatically generated by
+#   /home/embray/src/sagemath/sage/config.status
+# You should not edit it by hand
```
    I think that some general comment about sage-the-distribution would be nice here and some comment on what transforms this file to which other file.
* I don't really understand the following comment

```
+    # If $need_to_install_{PKG_NAME} is set to no, then set inst_<pkgname> to
+    # some dummy file to skip the installation.
```
    So, I guess `pkgname` and `PKG_NAME` are the same? But where is `inst_<pkgname>` being set below? (Only indirectly in `Makefile.in`, right?)
* I don't see where you are obscuring anything here. (You copied it over and it should probably go into the `.in` file.)

```
+    # Below we have to obscure A""M_V_at, or autoconf would complain:
+    # "error: possibly undefined macro: A""M_V_at"
```
* I would like the `configure.ac` to contain a `#` comment at the top which explains how this all works, in particular how this differs from a standard autoconf/automake setup.



---

archive/issue_comments_318428.json:
```json
{
    "body": "**Reviewer:** Julian R\u00fcth",
    "created_at": "2018-01-31T15:01:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318428",
    "user": "https://github.com/saraedum"
}
```

**Reviewer:** Julian RÃ¼th



---

archive/issue_comments_318429.json:
```json
{
    "body": "<a id='comment:22'></a>\nI think this should be for followup ticket. It's taken about half a year to get from Erik's commits to somebody reviewing this. If we do a complete rewrite of this, I think this is going to take forever. (Btw, you agreed to fix up #20382 11 months ago. It's easy to get distracted and not move at all\u2026. We should not strive for absolute perfection here but go with improvements that introduce good code. And then get better in the next iteration\u2026)\n\nReplying to [jdemeyer](#comment%3A20):\n> Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.\n",
    "created_at": "2018-01-31T15:11:27Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318429",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:22'></a>
I think this should be for followup ticket. It's taken about half a year to get from Erik's commits to somebody reviewing this. If we do a complete rewrite of this, I think this is going to take forever. (Btw, you agreed to fix up #20382 11 months ago. It's easy to get distracted and not move at allâ¦. We should not strive for absolute perfection here but go with improvements that introduce good code. And then get better in the next iterationâ¦)

Replying to [jdemeyer](#comment%3A20):
> Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.




---

archive/issue_comments_318430.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [jdemeyer](#comment%3A20):\n> Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.\n\n\nIt's funny you suggest that.  I've actually been working off-and-on in my spare time on my own Python implementation of make.  It has a name but until I feel ready to post the code it's a secret :-)  It supports POSIX-compatible Makefiles but it also has its own pure-Python format that lets you write make rules in Python, including all the high-level constructs thereof.\n\nIn the meantime I don't really see how that would solve anything though.",
    "created_at": "2018-01-31T15:57:55Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318430",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'></a>
Replying to [jdemeyer](#comment%3A20):
> Allow me to reboot this discussion in a hopefully constructive way... what would you think of using some high-level programming like Python to write the `build/make/Makefile`? That would solve the problem that `configure.ac` is a slow mess. On the other hand, we could write actual `Makefile` rules instead of using macros.


It's funny you suggest that.  I've actually been working off-and-on in my spare time on my own Python implementation of make.  It has a name but until I feel ready to post the code it's a secret :-)  It supports POSIX-compatible Makefiles but it also has its own pure-Python format that lets you write make rules in Python, including all the high-level constructs thereof.

In the meantime I don't really see how that would solve anything though.



---

archive/issue_comments_318431.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [embray](#comment%3A23):\n> In the meantime I don't really see how that would solve anything though.\n\n\nIt would solve exactly the same issues as the ones that you are fixing in your branch, just in a different way.",
    "created_at": "2018-01-31T16:03:10Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318431",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
Replying to [embray](#comment%3A23):
> In the meantime I don't really see how that would solve anything though.


It would solve exactly the same issues as the ones that you are fixing in your branch, just in a different way.



---

archive/issue_comments_318432.json:
```json
{
    "body": "**Work Issues:** minor documentation issues",
    "created_at": "2018-01-31T16:03:30Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318432",
    "user": "https://github.com/saraedum"
}
```

**Work Issues:** minor documentation issues



---

archive/issue_comments_318433.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [embray](#comment%3A23):\n> It's funny you suggest that.  I've actually been working off-and-on in my spare time on my own Python implementation of make.\n\n\nI would be more interested in the converse: turn any Python `setup.py` into `Makefile` rules.",
    "created_at": "2018-01-31T16:04:21Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318433",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
Replying to [embray](#comment%3A23):
> It's funny you suggest that.  I've actually been working off-and-on in my spare time on my own Python implementation of make.


I would be more interested in the converse: turn any Python `setup.py` into `Makefile` rules.



---

archive/issue_comments_318434.json:
```json
{
    "body": "<a id='comment:27'></a>\nIt would still be much slower just by involving Python.  It would still be an (actual!) abuse of autoconf.",
    "created_at": "2018-01-31T16:34:12Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318434",
    "user": "https://github.com/embray"
}
```

<a id='comment:27'></a>
It would still be much slower just by involving Python.  It would still be an (actual!) abuse of autoconf.



---

archive/issue_comments_318435.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [saraedum](#comment%3A21):\n> Some comments (apart from these minor issues, I would not mind setting this to positive review):\n> \n> * I might be totally misunderstanding something but the following comment does not actually apply to the `Makefile.in`, does it?\n> \n> ```\n> +# This file has been automatically generated by\n> +#   /home/embray/src/sagemath/sage/config.status\n> +# You should not edit it by hand\n> ```\n\n\nOops, I'm not sure how that got there since I wrote this six months ago :) It might be that I started from editing a generated file exactly as it says not to do. But let me double-check that `config.status` isn't *actually* putting that there because that would be a bug, and a bad one at that.\n\n>     I think that some general comment about sage-the-distribution would be nice here and some comment on what transforms this file to which other file.\n\n\nThat would help, though I'm not sure where to put it.  It would be nice to have some documentation about though, as it took me a while to wrap my head around too. It's a bit hard to follow that the top-level `Makefile` calls `build/make/install` which calls `make` again but with `build/make/Makefile`, which in turn calls `sage-spkg` to actually build/install packages.  I don't have too much of a problem with that aspect of the process but it's not obvious.\n\n> * I don't really understand the following comment\n> \n> ```\n> +    # If $need_to_install_{PKG_NAME} is set to no, then set inst_<pkgname> to\n> +    # some dummy file to skip the installation.\n> ```\n>     So, I guess `pkgname` and `PKG_NAME` are the same? But where is `inst_<pkgname>` being set below? (Only indirectly in `Makefile.in`, right?)\n\n\nYes, maybe this could be spelled more consistently.\n\nThis definitely deserves better documentation (most of how this works is carried over from the existing Makefile--I really didn't change much...)  The actual physical (as in, a real file) targets associate with each package are the \"stamp\" files installed to `$SAGE_LOCAL/var/lib/sage/installed/<pkg_name>-<pkg_version>`.  Within the Makefile the paths to these files are stored in variables named `$(inst_<pkg_name>)`.\n\nWhat this is referring to is that for packages which are not actually installed into Sage (e.g. we use the system version), instead of pointing to a real stamp file, the `$(inst_<pkg_name>)` just points to a dummy file indicating \"yes, this dependency is satisfied\".  This way we don't need to *remove* that package as a dependency of any other package.  It's just trivially satisfied.\n\nAnyways, I'll see if I can make that comment clearer.\n\n> * I don't see where you are obscuring anything here. (You copied it over and it should probably go into the `.in` file.)\n> \n> ```\n> +    # Below we have to obscure A\"\"M_V_at, or autoconf would complain:\n> +    # \"error: possibly undefined macro: A\"\"M_V_at\"\n> ```\n\n\nCarried over from the original configure.ac.  It's not relevant now anywhere so can just be deleted.\n\n> * I would like the `configure.ac` to contain a `#` comment at the top which explains how this all works, in particular how this differs from a standard autoconf/automake setup.\n\n\nOkay, maybe that's a decent place to put it...",
    "created_at": "2018-01-31T16:51:22Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318435",
    "user": "https://github.com/embray"
}
```

<a id='comment:28'></a>
Replying to [saraedum](#comment%3A21):
> Some comments (apart from these minor issues, I would not mind setting this to positive review):
> 
> * I might be totally misunderstanding something but the following comment does not actually apply to the `Makefile.in`, does it?
> 
> ```
> +# This file has been automatically generated by
> +#   /home/embray/src/sagemath/sage/config.status
> +# You should not edit it by hand
> ```


Oops, I'm not sure how that got there since I wrote this six months ago :) It might be that I started from editing a generated file exactly as it says not to do. But let me double-check that `config.status` isn't *actually* putting that there because that would be a bug, and a bad one at that.

>     I think that some general comment about sage-the-distribution would be nice here and some comment on what transforms this file to which other file.


That would help, though I'm not sure where to put it.  It would be nice to have some documentation about though, as it took me a while to wrap my head around too. It's a bit hard to follow that the top-level `Makefile` calls `build/make/install` which calls `make` again but with `build/make/Makefile`, which in turn calls `sage-spkg` to actually build/install packages.  I don't have too much of a problem with that aspect of the process but it's not obvious.

> * I don't really understand the following comment
> 
> ```
> +    # If $need_to_install_{PKG_NAME} is set to no, then set inst_<pkgname> to
> +    # some dummy file to skip the installation.
> ```
>     So, I guess `pkgname` and `PKG_NAME` are the same? But where is `inst_<pkgname>` being set below? (Only indirectly in `Makefile.in`, right?)


Yes, maybe this could be spelled more consistently.

This definitely deserves better documentation (most of how this works is carried over from the existing Makefile--I really didn't change much...)  The actual physical (as in, a real file) targets associate with each package are the "stamp" files installed to `$SAGE_LOCAL/var/lib/sage/installed/<pkg_name>-<pkg_version>`.  Within the Makefile the paths to these files are stored in variables named `$(inst_<pkg_name>)`.

What this is referring to is that for packages which are not actually installed into Sage (e.g. we use the system version), instead of pointing to a real stamp file, the `$(inst_<pkg_name>)` just points to a dummy file indicating "yes, this dependency is satisfied".  This way we don't need to *remove* that package as a dependency of any other package.  It's just trivially satisfied.

Anyways, I'll see if I can make that comment clearer.

> * I don't see where you are obscuring anything here. (You copied it over and it should probably go into the `.in` file.)
> 
> ```
> +    # Below we have to obscure A""M_V_at, or autoconf would complain:
> +    # "error: possibly undefined macro: A""M_V_at"
> ```


Carried over from the original configure.ac.  It's not relevant now anywhere so can just be deleted.

> * I would like the `configure.ac` to contain a `#` comment at the top which explains how this all works, in particular how this differs from a standard autoconf/automake setup.


Okay, maybe that's a decent place to put it...



---

archive/issue_events_192894.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-31T16:52:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192894"
}
```



---

archive/issue_events_192895.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-01-31T16:52:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192895"
}
```



---

archive/issue_comments_318436.json:
```json
{
    "body": "<a id='comment:30'></a>\nWhile I agree that the templates are a bit incomprehensible, overall I like this change. The separation between configure.ac and Makefile.in makes it more clear what the build is trying to do, with less of a focus on how it's done. I think that in the future, it will be easier to replace chunks of either file, because we won't have to worry about unintended side effects buried in the shell code.\n\nOther ideas:\n\n1. Our Makefile.in is now GNU-Make-specific. Should we call it GNUMakefile.in to avoid insane errors on systems where \"make\" isn't GNU?\n2. We should detect `SHELL` rather than setting it to /bin/bash, because there are systems where it lives in e.g. /usr/bin/bash (https://www.freedesktop.org/wiki/Software/systemd/TheCaseForTheUsrMerge/)\n3. Is Bash needed for the makefile at all? If we replace \"source\" with \".\", does anything else crash with POSIX sh?",
    "created_at": "2018-01-31T21:39:54Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318436",
    "user": "https://github.com/orlitzky"
}
```

<a id='comment:30'></a>
While I agree that the templates are a bit incomprehensible, overall I like this change. The separation between configure.ac and Makefile.in makes it more clear what the build is trying to do, with less of a focus on how it's done. I think that in the future, it will be easier to replace chunks of either file, because we won't have to worry about unintended side effects buried in the shell code.

Other ideas:

1. Our Makefile.in is now GNU-Make-specific. Should we call it GNUMakefile.in to avoid insane errors on systems where "make" isn't GNU?
2. We should detect `SHELL` rather than setting it to /bin/bash, because there are systems where it lives in e.g. /usr/bin/bash (https://www.freedesktop.org/wiki/Software/systemd/TheCaseForTheUsrMerge/)
3. Is Bash needed for the makefile at all? If we replace "source" with ".", does anything else crash with POSIX sh?



---

archive/issue_comments_318437.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [embray](#comment%3A27):\n> It would still be much slower just by involving Python.\n\n\nWhy do you think that? It just needs to read of bunch of files and do some string manipulation. It should be easy.\n\n> It would still be an (actual!) abuse of autoconf.\n\n\nI'm not denying that...\n\nStill, I think it would be fast, work well and produce readable output. So I think that you should at least seriously consider it.",
    "created_at": "2018-02-01T11:49:44Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318437",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>
Replying to [embray](#comment%3A27):
> It would still be much slower just by involving Python.


Why do you think that? It just needs to read of bunch of files and do some string manipulation. It should be easy.

> It would still be an (actual!) abuse of autoconf.


I'm not denying that...

Still, I think it would be fast, work well and produce readable output. So I think that you should at least seriously consider it.



---

archive/issue_comments_318438.json:
```json
{
    "body": "<a id='comment:32'></a>\nLet's give this a try for now (modulo other review comments). I sympathize with your concerns but I strongly *suspect* that they will prove overstated.  If it turns into a concrete problem somehow then I'll reconsider.",
    "created_at": "2018-02-01T12:29:50Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318438",
    "user": "https://github.com/embray"
}
```

<a id='comment:32'></a>
Let's give this a try for now (modulo other review comments). I sympathize with your concerns but I strongly *suspect* that they will prove overstated.  If it turns into a concrete problem somehow then I'll reconsider.



---

archive/issue_comments_318439.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [mjo](#comment%3A30):\n> While I agree that the templates are a bit incomprehensible, overall I like this change. The separation between configure.ac and Makefile.in makes it more clear what the build is trying to do, with less of a focus on how it's done. I think that in the future, it will be easier to replace chunks of either file, because we won't have to worry about unintended side effects buried in the shell code.\n\n\nI'm going to try to do a bit of reformatting to make it a little easier to read.\n\n> Other ideas:\n> \n> 1. Our Makefile.in is now GNU-Make-specific. Should we call it GNUMakefile.in to avoid insane errors on systems where \"make\" isn't GNU?\n\n\nOne thing I'll point out that I haven't explicitly mentioned yet: I asked a few people about this before doing the work (I forget who) but at the time everyone seemed to agree that it would be fine to require GNU make, as there are other packages in Sage that require it, so building the full Sage-the-distribution doesn't work with any other make implementation anyways.\n\nI suppose we could do that though.\n\n> 2. We should detect `SHELL` rather than setting it to /bin/bash, because there are systems where it lives in e.g. /usr/bin/bash (https://www.freedesktop.org/wiki/Software/systemd/TheCaseForTheUsrMerge/)\n\n\nRight; originally we had <code> SHELL = \\`command -v bash\\` </code> here.  I'll fix that.\n\n> 3. Is Bash needed for the makefile at all? If we replace \"source\" with \".\", does anything else crash with POSIX sh?\n\n\nI'm not sure it's necessarily strictly needed for the makefile itself, but it in turn calls scripts that require bash, so I don't see any advantage in not just forcing bash in the makefile as well.",
    "created_at": "2018-02-01T12:40:45Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318439",
    "user": "https://github.com/embray"
}
```

<a id='comment:33'></a>
Replying to [mjo](#comment%3A30):
> While I agree that the templates are a bit incomprehensible, overall I like this change. The separation between configure.ac and Makefile.in makes it more clear what the build is trying to do, with less of a focus on how it's done. I think that in the future, it will be easier to replace chunks of either file, because we won't have to worry about unintended side effects buried in the shell code.


I'm going to try to do a bit of reformatting to make it a little easier to read.

> Other ideas:
> 
> 1. Our Makefile.in is now GNU-Make-specific. Should we call it GNUMakefile.in to avoid insane errors on systems where "make" isn't GNU?


One thing I'll point out that I haven't explicitly mentioned yet: I asked a few people about this before doing the work (I forget who) but at the time everyone seemed to agree that it would be fine to require GNU make, as there are other packages in Sage that require it, so building the full Sage-the-distribution doesn't work with any other make implementation anyways.

I suppose we could do that though.

> 2. We should detect `SHELL` rather than setting it to /bin/bash, because there are systems where it lives in e.g. /usr/bin/bash (https://www.freedesktop.org/wiki/Software/systemd/TheCaseForTheUsrMerge/)


Right; originally we had <code> SHELL = \`command -v bash\` </code> here.  I'll fix that.

> 3. Is Bash needed for the makefile at all? If we replace "source" with ".", does anything else crash with POSIX sh?


I'm not sure it's necessarily strictly needed for the makefile itself, but it in turn calls scripts that require bash, so I don't see any advantage in not just forcing bash in the makefile as well.



---

archive/issue_comments_318440.json:
```json
{
    "body": "<a id='comment:34'></a>\nOne other issue I noticed while working on cleaning this up and adding better debugging tools, is that this doesn't currently handle order-only prerequisites correctly.  This was definitely obscured before, but will be easy to fix.",
    "created_at": "2018-02-01T13:07:19Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318440",
    "user": "https://github.com/embray"
}
```

<a id='comment:34'></a>
One other issue I noticed while working on cleaning this up and adding better debugging tools, is that this doesn't currently handle order-only prerequisites correctly.  This was definitely obscured before, but will be easy to fix.



---

archive/issue_comments_318441.json:
```json
{
    "body": "**Changing commit** from \"[3ba565f3f2ddf5382a4c7a728b720bc132f6d508](https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508)\" to \"[9ce84c855f234835a6a925052b1f325815aaa142](https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142)\".",
    "created_at": "2018-02-01T14:18:44Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318441",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[3ba565f3f2ddf5382a4c7a728b720bc132f6d508](https://github.com/sagemath/sagetrac-mirror/commit/3ba565f3f2ddf5382a4c7a728b720bc132f6d508)" to "[9ce84c855f234835a6a925052b1f325815aaa142](https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142)".



---

archive/issue_comments_318442.json:
```json
{
    "body": "<a id='comment:35'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d12016de449d7f54de3872f631e442b1c3efbfe\">0d12016</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142\">9ce84c8</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr></table>\n",
    "created_at": "2018-02-01T14:18:44Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318442",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:35'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d12016de449d7f54de3872f631e442b1c3efbfe">0d12016</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142">9ce84c8</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr></table>




---

archive/issue_comments_318443.json:
```json
{
    "body": "<a id='comment:36'></a>\nLast commit made the templates look a bit less noisy.  For example, before:\n\n```\ndefine NORMAL_PACKAGE_templ\n$$(INST)/$(1)-$$(vers_$(1)): $$(foreach dep,$$(deps_$(1)),$$(inst_$$(dep)))\n\t+$(AM_V_at)sage-logger -p '$(SAGE_SPKG) $(1)-$$(vers_$(1))' '$(SAGE_LOGS)/$(1)-$$(vers_$(1)).log'\n \n$(1): $$(INST)/$(1)-$$(vers_$(1))\n \n$(1)-clean:\n\trm -rf $$(INST)/$(1)-$$(vers_$(1))\nendef\n```\n\nand after:\n\n```\ndefine NORMAL_PACKAGE_templ\n$$(INST)/$(1)-$(2): $(3)\n\t+$(AM_V_at)sage-logger -p '$$(SAGE_SPKG) $(1)-$(2)' '$$(SAGE_LOGS)/$(1)-$(2).log'\n \n$(1): $$(INST)/$(1)-$(2)\n \n$(1)-clean:\n\trm -rf $$(INST)/$(1)-$(2)\nendef\n```\n\nI also added the `DEBUG_RULES` flag that I mentioned on sage-devel.  If you run the generated makefile in dry-run mode with this flag defined you can see exactly what the templates are outputting:\n\n```\n$ make -f build/make/Makefile -n DEBUG_RULES=1\n# Rules for standard packages\n$(INST)/4ti2-1.6.7:   $(inst_zlib)  $(inst_mpir)  $(inst_glpk)\n        +sage-logger -p '$(SAGE_SPKG) 4ti2-1.6.7' '$(SAGE_LOGS)/4ti2-1.6.7.log'\n\n4ti2: $(INST)/4ti2-1.6.7\n\n4ti2-clean:\n        rm -rf $(INST)/4ti2-1.6.7\n\n$(INST)/alabaster-0.7.10:   $(inst_python2)  |  $(inst_pip)\n        +sage-logger -p '$(SAGE_SPKG) alabaster-0.7.10' '$(SAGE_LOGS)/alabaster-0.7.10.log'\n...\n```",
    "created_at": "2018-02-01T14:25:43Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318443",
    "user": "https://github.com/embray"
}
```

<a id='comment:36'></a>
Last commit made the templates look a bit less noisy.  For example, before:

```
define NORMAL_PACKAGE_templ
$$(INST)/$(1)-$$(vers_$(1)): $$(foreach dep,$$(deps_$(1)),$$(inst_$$(dep)))
	+$(AM_V_at)sage-logger -p '$(SAGE_SPKG) $(1)-$$(vers_$(1))' '$(SAGE_LOGS)/$(1)-$$(vers_$(1)).log'
 
$(1): $$(INST)/$(1)-$$(vers_$(1))
 
$(1)-clean:
	rm -rf $$(INST)/$(1)-$$(vers_$(1))
endef
```

and after:

```
define NORMAL_PACKAGE_templ
$$(INST)/$(1)-$(2): $(3)
	+$(AM_V_at)sage-logger -p '$$(SAGE_SPKG) $(1)-$(2)' '$$(SAGE_LOGS)/$(1)-$(2).log'
 
$(1): $$(INST)/$(1)-$(2)
 
$(1)-clean:
	rm -rf $$(INST)/$(1)-$(2)
endef
```

I also added the `DEBUG_RULES` flag that I mentioned on sage-devel.  If you run the generated makefile in dry-run mode with this flag defined you can see exactly what the templates are outputting:

```
$ make -f build/make/Makefile -n DEBUG_RULES=1
# Rules for standard packages
$(INST)/4ti2-1.6.7:   $(inst_zlib)  $(inst_mpir)  $(inst_glpk)
        +sage-logger -p '$(SAGE_SPKG) 4ti2-1.6.7' '$(SAGE_LOGS)/4ti2-1.6.7.log'

4ti2: $(INST)/4ti2-1.6.7

4ti2-clean:
        rm -rf $(INST)/4ti2-1.6.7

$(INST)/alabaster-0.7.10:   $(inst_python2)  |  $(inst_pip)
        +sage-logger -p '$(SAGE_SPKG) alabaster-0.7.10' '$(SAGE_LOGS)/alabaster-0.7.10.log'
...
```



---

archive/issue_comments_318444.json:
```json
{
    "body": "<a id='comment:37'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e\">fc063dc</a></td><td><code>Get SHELL from autoconf</code></td></tr></table>\n",
    "created_at": "2018-02-01T14:39:57Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318444",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:37'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e">fc063dc</a></td><td><code>Get SHELL from autoconf</code></td></tr></table>




---

archive/issue_comments_318445.json:
```json
{
    "body": "**Changing commit** from \"[9ce84c855f234835a6a925052b1f325815aaa142](https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142)\" to \"[fc063dcc313ae28b78e4e0030487a2f7a5bbff4e](https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e)\".",
    "created_at": "2018-02-01T14:39:57Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318445",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9ce84c855f234835a6a925052b1f325815aaa142](https://github.com/sagemath/sagetrac-mirror/commit/9ce84c855f234835a6a925052b1f325815aaa142)" to "[fc063dcc313ae28b78e4e0030487a2f7a5bbff4e](https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e)".



---

archive/issue_comments_318446.json:
```json
{
    "body": "**Changing commit** from \"[fc063dcc313ae28b78e4e0030487a2f7a5bbff4e](https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e)\" to \"[d17e494018a226a4019626d47fc631c9b60fe6ec](https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec)\".",
    "created_at": "2018-02-01T15:13:42Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318446",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fc063dcc313ae28b78e4e0030487a2f7a5bbff4e](https://github.com/sagemath/sagetrac-mirror/commit/fc063dcc313ae28b78e4e0030487a2f7a5bbff4e)" to "[d17e494018a226a4019626d47fc631c9b60fe6ec](https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec)".



---

archive/issue_comments_318447.json:
```json
{
    "body": "<a id='comment:38'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d796901c5700d3a801660cc6afad48348a254f9e\">d796901</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec\">d17e494</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr></table>\n",
    "created_at": "2018-02-01T15:13:42Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:38'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d796901c5700d3a801660cc6afad48348a254f9e">d796901</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec">d17e494</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr></table>




---

archive/issue_comments_318448.json:
```json
{
    "body": "**Changing commit** from \"[d17e494018a226a4019626d47fc631c9b60fe6ec](https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec)\" to \"[7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb](https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb)\".",
    "created_at": "2018-02-01T16:26:14Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[d17e494018a226a4019626d47fc631c9b60fe6ec](https://github.com/sagemath/sagetrac-mirror/commit/d17e494018a226a4019626d47fc631c9b60fe6ec)" to "[7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb](https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb)".



---

archive/issue_comments_318449.json:
```json
{
    "body": "<a id='comment:39'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb\">7668fcd</a></td><td><code>Fix sage -i</code></td></tr></table>\n",
    "created_at": "2018-02-01T16:26:14Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318449",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb">7668fcd</a></td><td><code>Fix sage -i</code></td></tr></table>




---

archive/issue_comments_318450.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [embray](#comment%3A32):\n> I sympathize with your concerns but I strongly *suspect* that they will prove overstated.\n\n\nI really hope that you are right and that this won't turn in a \"I told you so\" scenario.\n\nI'll stop protesting for now. There is not much to discuss further anyway, we each know the other's opinions.",
    "created_at": "2018-02-01T17:28:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318450",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>
Replying to [embray](#comment%3A32):
> I sympathize with your concerns but I strongly *suspect* that they will prove overstated.


I really hope that you are right and that this won't turn in a "I told you so" scenario.

I'll stop protesting for now. There is not much to discuss further anyway, we each know the other's opinions.



---

archive/issue_comments_318451.json:
```json
{
    "body": "<a id='comment:41'></a>\nReplying to [jdemeyer](#comment%3A40):\n> Replying to [embray](#comment%3A32):\n> > I sympathize with your concerns but I strongly *suspect* that they will prove overstated.\n\n> \n> I really hope that you are right and that this won't turn in a \"I told you so\" scenario.\n\n\nIf it does, I promise that I'll graciously accept that you were right :)",
    "created_at": "2018-02-02T12:32:55Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318451",
    "user": "https://github.com/embray"
}
```

<a id='comment:41'></a>
Replying to [jdemeyer](#comment%3A40):
> Replying to [embray](#comment%3A32):
> > I sympathize with your concerns but I strongly *suspect* that they will prove overstated.

> 
> I really hope that you are right and that this won't turn in a "I told you so" scenario.


If it does, I promise that I'll graciously accept that you were right :)



---

archive/issue_events_192896.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-02T12:33:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192896"
}
```



---

archive/issue_events_192897.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-02-02T12:33:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192897"
}
```



---

archive/issue_comments_318452.json:
```json
{
    "body": "<a id='comment:42'></a>\nAlso, I think that I've addressed most of the other review comments so far....",
    "created_at": "2018-02-02T12:33:41Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318452",
    "user": "https://github.com/embray"
}
```

<a id='comment:42'></a>
Also, I think that I've addressed most of the other review comments so far....



---

archive/issue_comments_318453.json:
```json
{
    "body": "**Changing commit** from \"[7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb](https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb)\" to \"[735fd36d2e9db5de174d1166f569370ec6811d2e](https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e)\".",
    "created_at": "2018-02-16T16:33:18Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318453",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb](https://github.com/sagemath/sagetrac-mirror/commit/7668fcd56bbc31f1f57d7f1862d9ed4e5f96dddb)" to "[735fd36d2e9db5de174d1166f569370ec6811d2e](https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e)".



---

archive/issue_comments_318454.json:
```json
{
    "body": "<a id='comment:43'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b4f40ee915f683991cb4ece6314c9a242b5792c\">4b4f40e</a></td><td><code>Add --with-python=3 configure flag to replace SAGE_PYTHON3=yes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b36d3e9948a31333ee3cfc4c960016bdde1543a\">0b36d3e</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e86ea4c2d62ec820d9603ae25d75df6a74527a43\">e86ea4c</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/586eb4aeec4bf01a816fea3938316b0459383846\">586eb4a</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a04d716ebb3ab3aacf5965019ad53a30cbba710\">1a04d71</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4dbf15b3a718d98abe8c0e0969384bebc6810f73\">4dbf15b</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7cddac9ce7118d3fc73439afa9f51a2cc08d16d7\">7cddac9</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d88907015b27ea59d5ba16c08cb140aa9a98397c\">d889070</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e\">735fd36</a></td><td><code>Fix sage -i</code></td></tr></table>\n",
    "created_at": "2018-02-16T16:33:18Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318454",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:43'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b4f40ee915f683991cb4ece6314c9a242b5792c">4b4f40e</a></td><td><code>Add --with-python=3 configure flag to replace SAGE_PYTHON3=yes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b36d3e9948a31333ee3cfc4c960016bdde1543a">0b36d3e</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e86ea4c2d62ec820d9603ae25d75df6a74527a43">e86ea4c</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/586eb4aeec4bf01a816fea3938316b0459383846">586eb4a</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a04d716ebb3ab3aacf5965019ad53a30cbba710">1a04d71</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4dbf15b3a718d98abe8c0e0969384bebc6810f73">4dbf15b</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7cddac9ce7118d3fc73439afa9f51a2cc08d16d7">7cddac9</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d88907015b27ea59d5ba16c08cb140aa9a98397c">d889070</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e">735fd36</a></td><td><code>Fix sage -i</code></td></tr></table>




---

archive/issue_comments_318455.json:
```json
{
    "body": "<a id='comment:44'></a>\nRebased to incorporate #24729",
    "created_at": "2018-02-16T16:33:40Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318455",
    "user": "https://github.com/embray"
}
```

<a id='comment:44'></a>
Rebased to incorporate #24729



---

archive/issue_comments_318456.json:
```json
{
    "body": "**Dependencies:** #24729",
    "created_at": "2018-02-16T16:33:40Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318456",
    "user": "https://github.com/embray"
}
```

**Dependencies:** #24729



---

archive/issue_comments_318457.json:
```json
{
    "body": "<a id='comment:45'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/057b434babb6ec6eaa7bae4afad4255a7481b1af\">057b434</a></td><td><code>Everything should be rebuilt after GCC upgrade</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4056a0d9eeea7ed21b38160e16f747283b35da03\">4056a0d</a></td><td><code>Merge branch 'u/jdemeyer/everything_should_be_rebuilt_after_gcc_upgrade' into HEAD</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/025804c0334418c027b4e7076c39b58a3a8d2195\">025804c</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83bc9fcc704eaa46944258e41ee6862e14a0644e\">83bc9fc</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87c738972cd468217223f25a957fe73b15e4e15f\">87c7389</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/283ec7b0f95ec3cb36e30d2f5d7c8b0fcc4da0e1\">283ec7b</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b512ddc38ff5e9009024dc6798f252d07a2de81\">3b512dd</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a9fff3500696764dc207b84a0fd471cd2f51cd2\">7a9fff3</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/869f57a45f3adcffca503a8c1a7df90cac94fe20\">869f57a</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80\">1c02a0e</a></td><td><code>Fix sage -i</code></td></tr></table>\n",
    "created_at": "2018-02-19T16:54:40Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318457",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:45'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/057b434babb6ec6eaa7bae4afad4255a7481b1af">057b434</a></td><td><code>Everything should be rebuilt after GCC upgrade</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4056a0d9eeea7ed21b38160e16f747283b35da03">4056a0d</a></td><td><code>Merge branch 'u/jdemeyer/everything_should_be_rebuilt_after_gcc_upgrade' into HEAD</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/025804c0334418c027b4e7076c39b58a3a8d2195">025804c</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83bc9fcc704eaa46944258e41ee6862e14a0644e">83bc9fc</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87c738972cd468217223f25a957fe73b15e4e15f">87c7389</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/283ec7b0f95ec3cb36e30d2f5d7c8b0fcc4da0e1">283ec7b</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b512ddc38ff5e9009024dc6798f252d07a2de81">3b512dd</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a9fff3500696764dc207b84a0fd471cd2f51cd2">7a9fff3</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/869f57a45f3adcffca503a8c1a7df90cac94fe20">869f57a</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80">1c02a0e</a></td><td><code>Fix sage -i</code></td></tr></table>




---

archive/issue_comments_318458.json:
```json
{
    "body": "**Changing commit** from \"[735fd36d2e9db5de174d1166f569370ec6811d2e](https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e)\" to \"[1c02a0eb70081bd3b422c1e64beea37cf090fd80](https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80)\".",
    "created_at": "2018-02-19T16:54:40Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[735fd36d2e9db5de174d1166f569370ec6811d2e](https://github.com/sagemath/sagetrac-mirror/commit/735fd36d2e9db5de174d1166f569370ec6811d2e)" to "[1c02a0eb70081bd3b422c1e64beea37cf090fd80](https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80)".



---

archive/issue_comments_318459.json:
```json
{
    "body": "<a id='comment:46'></a>\nRebased again and incorporated #24703.",
    "created_at": "2018-02-19T16:55:09Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318459",
    "user": "https://github.com/embray"
}
```

<a id='comment:46'></a>
Rebased again and incorporated #24703.



---

archive/issue_comments_318460.json:
```json
{
    "body": "**Changing dependencies** from \"#24729\" to \"#24729, #24703\".",
    "created_at": "2018-02-19T16:55:09Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318460",
    "user": "https://github.com/embray"
}
```

**Changing dependencies** from "#24729" to "#24729, #24703".



---

archive/issue_comments_318461.json:
```json
{
    "body": "<a id='comment:47'></a>\nneeds rebase",
    "created_at": "2018-03-03T07:41:10Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318461",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:47'></a>
needs rebase



---

archive/issue_events_192898.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-03T07:41:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192898"
}
```



---

archive/issue_events_192899.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2018-03-03T07:41:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192899"
}
```



---

archive/issue_comments_318462.json:
```json
{
    "body": "<a id='comment:48'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5b94974dd7e41d9d4e9a62da65c2ce691ccf2ffe\">5b94974</a></td><td><code>Everything should be rebuilt after GCC upgrade</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54f3a48beb504d652a6d95c87d4e126e1cc6133c\">54f3a48</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bdeca46c3ca2dfad3e3f3b4e5e9cbd87fa4b453f\">bdeca46</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1150f957cc33b68724473340753d576239411ea1\">1150f95</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/505db024a02b85d32f82050e39e62902796746b7\">505db02</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c61dba41fb8c132d14b76b6081e9196a4f0e26f4\">c61dba4</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eefce2c4e7f271227419cef5bb72cd10d91ea0d8\">eefce2c</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d77e6870e8006e8eb58e08f622dba760d2d8fd05\">d77e687</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700\">6f99aab</a></td><td><code>Fix sage -i</code></td></tr></table>\n",
    "created_at": "2018-03-05T11:05:34Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318462",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:48'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5b94974dd7e41d9d4e9a62da65c2ce691ccf2ffe">5b94974</a></td><td><code>Everything should be rebuilt after GCC upgrade</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54f3a48beb504d652a6d95c87d4e126e1cc6133c">54f3a48</a></td><td><code>Use AC_CONFIG_FILES + AC_OUTPUT to generate build/make/Makefile</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bdeca46c3ca2dfad3e3f3b4e5e9cbd87fa4b453f">bdeca46</a></td><td><code>Further rewrite of configure.ac to do away with the multiple</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1150f957cc33b68724473340753d576239411ea1">1150f95</a></td><td><code>Remove some bogus comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/505db024a02b85d32f82050e39e62902796746b7">505db02</a></td><td><code>Improved (?) documentation of the Makefile.in template.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c61dba41fb8c132d14b76b6081e9196a4f0e26f4">c61dba4</a></td><td><code>Get SHELL from autoconf</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eefce2c4e7f271227419cef5bb72cd10d91ea0d8">eefce2c</a></td><td><code>Delete redundant AC_CONFIG_MACRO_DIR</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d77e6870e8006e8eb58e08f622dba760d2d8fd05">d77e687</a></td><td><code>Added a little bit more information about the build system and how it works, at a high level</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700">6f99aab</a></td><td><code>Fix sage -i</code></td></tr></table>




---

archive/issue_comments_318463.json:
```json
{
    "body": "**Changing commit** from \"[1c02a0eb70081bd3b422c1e64beea37cf090fd80](https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80)\" to \"[6f99aab93d722fbfd3cd82e752b88ec697b77700](https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700)\".",
    "created_at": "2018-03-05T11:05:34Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318463",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1c02a0eb70081bd3b422c1e64beea37cf090fd80](https://github.com/sagemath/sagetrac-mirror/commit/1c02a0eb70081bd3b422c1e64beea37cf090fd80)" to "[6f99aab93d722fbfd3cd82e752b88ec697b77700](https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700)".



---

archive/issue_comments_318464.json:
```json
{
    "body": "<a id='comment:49'></a>\nThe longer this stays open the harder it is to keep it maintained because it will conflict with anything that modifies `configure.ac`.",
    "created_at": "2018-03-05T11:06:16Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318464",
    "user": "https://github.com/embray"
}
```

<a id='comment:49'></a>
The longer this stays open the harder it is to keep it maintained because it will conflict with anything that modifies `configure.ac`.



---

archive/issue_events_192900.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-05T11:06:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192900"
}
```



---

archive/issue_events_192901.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-05T11:06:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192901"
}
```



---

archive/issue_comments_318465.json:
```json
{
    "body": "<a id='comment:50'></a>\nOk. Reviewing this now\u2026",
    "created_at": "2018-03-05T12:33:37Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318465",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:50'></a>
Ok. Reviewing this nowâ¦



---

archive/issue_comments_318466.json:
```json
{
    "body": "**Changing work issues** from \"minor documentation issues\" to \"\".",
    "created_at": "2018-03-05T12:42:48Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318466",
    "user": "https://github.com/saraedum"
}
```

**Changing work issues** from "minor documentation issues" to "".



---

archive/issue_comments_318467.json:
```json
{
    "body": "<a id='comment:51'></a>\nThanks for this very nice summary in the README. If you have checked that this actually works, feel free to set this to positive review.",
    "created_at": "2018-03-05T12:42:48Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318467",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:51'></a>
Thanks for this very nice summary in the README. If you have checked that this actually works, feel free to set this to positive review.



---

archive/issue_comments_318468.json:
```json
{
    "body": "<a id='comment:52'></a>\nThere's one last change I would like to make, though it shouldn't substantially alter anything.  I just want to move all the stuff that collects the packages into its own macro, and move it to a separate file.\n\nI already did this in another branch, but it doesn't make particular sense to leave out of this ticket.",
    "created_at": "2018-03-06T12:40:11Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318468",
    "user": "https://github.com/embray"
}
```

<a id='comment:52'></a>
There's one last change I would like to make, though it shouldn't substantially alter anything.  I just want to move all the stuff that collects the packages into its own macro, and move it to a separate file.

I already did this in another branch, but it doesn't make particular sense to leave out of this ticket.



---

archive/issue_comments_318469.json:
```json
{
    "body": "**Changing commit** from \"[6f99aab93d722fbfd3cd82e752b88ec697b77700](https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700)\" to \"[bb9ff43ee1cec2564794acef45d354659314afa7](https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7)\".",
    "created_at": "2018-03-06T13:05:36Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[6f99aab93d722fbfd3cd82e752b88ec697b77700](https://github.com/sagemath/sagetrac-mirror/commit/6f99aab93d722fbfd3cd82e752b88ec697b77700)" to "[bb9ff43ee1cec2564794acef45d354659314afa7](https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7)".



---

archive/issue_comments_318470.json:
```json
{
    "body": "<a id='comment:53'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7\">bb9ff43</a></td><td><code>Moved the code that collects up SPKG info into a single SAGE_SPKG_COLLECT macro, along with additional documentation thereof.</code></td></tr></table>\n",
    "created_at": "2018-03-06T13:05:36Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318470",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:53'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7">bb9ff43</a></td><td><code>Moved the code that collects up SPKG info into a single SAGE_SPKG_COLLECT macro, along with additional documentation thereof.</code></td></tr></table>




---

archive/issue_comments_318471.json:
```json
{
    "body": "<a id='comment:54'></a>\nWill be interesting to see how the buildbots do with this.",
    "created_at": "2018-03-06T13:07:34Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318471",
    "user": "https://github.com/embray"
}
```

<a id='comment:54'></a>
Will be interesting to see how the buildbots do with this.



---

archive/issue_events_192902.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T13:07:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192902"
}
```



---

archive/issue_events_192903.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T13:07:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192903"
}
```



---

archive/issue_events_192904.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T14:01:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192904"
}
```



---

archive/issue_events_192905.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T14:01:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192905"
}
```



---

archive/issue_comments_318472.json:
```json
{
    "body": "<a id='comment:55'></a>\nThere appears to be a bug in outputting the package versions during the configure checks.  This might have been introduced in my last rebase...",
    "created_at": "2018-03-06T14:01:53Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318472",
    "user": "https://github.com/embray"
}
```

<a id='comment:55'></a>
There appears to be a bug in outputting the package versions during the configure checks.  This might have been introduced in my last rebase...



---

archive/issue_comments_318473.json:
```json
{
    "body": "<a id='comment:56'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050\">2a99185</a></td><td><code>This should be quoted to prevent the $1 from being expanded as an argument to the m4 macro</code></td></tr></table>\n",
    "created_at": "2018-03-06T14:04:40Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318473",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:56'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050">2a99185</a></td><td><code>This should be quoted to prevent the $1 from being expanded as an argument to the m4 macro</code></td></tr></table>




---

archive/issue_comments_318474.json:
```json
{
    "body": "**Changing commit** from \"[bb9ff43ee1cec2564794acef45d354659314afa7](https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7)\" to \"[2a991859c7fdb62357a0136c6c6df8902e677050](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)\".",
    "created_at": "2018-03-06T14:04:40Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318474",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[bb9ff43ee1cec2564794acef45d354659314afa7](https://github.com/sagemath/sagetrac-mirror/commit/bb9ff43ee1cec2564794acef45d354659314afa7)" to "[2a991859c7fdb62357a0136c6c6df8902e677050](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)".



---

archive/issue_events_192906.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T14:05:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192906"
}
```



---

archive/issue_events_192907.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-06T14:05:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192907"
}
```



---

archive/issue_comments_318475.json:
```json
{
    "body": "<a id='comment:58'></a>\nOk. Your recent changes look good to me.",
    "created_at": "2018-03-07T11:14:47Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318475",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:58'></a>
Ok. Your recent changes look good to me.



---

archive/issue_comments_318476.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/build/makefile-in](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/makefile-in)\" to \"[2a991859c7fdb62357a0136c6c6df8902e677050](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)\".",
    "created_at": "2018-03-08T00:02:51Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318476",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/build/makefile-in](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/build/makefile-in)" to "[2a991859c7fdb62357a0136c6c6df8902e677050](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)".



---

archive/issue_events_192908.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-03-08T00:02:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192908"
}
```



---

archive/issue_events_192909.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "15fbaa620fe70a4c0d8c49ab042c68820ceae14d",
    "created_at": "2018-03-08T00:02:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192909"
}
```



---

archive/issue_comments_318477.json:
```json
{
    "body": "**Changing commit** from \"[2a991859c7fdb62357a0136c6c6df8902e677050](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)\" to \"\".",
    "created_at": "2018-03-12T18:54:51Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318477",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[2a991859c7fdb62357a0136c6c6df8902e677050](https://github.com/sagemath/sagetrac-mirror/commit/2a991859c7fdb62357a0136c6c6df8902e677050)" to "".



---

archive/issue_comments_318478.json:
```json
{
    "body": "<a id='comment:60'></a>\nThis completely breaks upgrading Sage, it seems to me. On three different OS X machines with 8.2.beta7 installed, upgrading to 8.2.beta8, or in particular just using this branch, results in a bad `build/make/Makefile`: lines like\n\n```\ndeps_4ti2 =  $(SAGE_LOCAL)/bin/gcczlib $(MP_LIBRARY) glpk\ndeps_alabaster =  $(SAGE_LOCAL)/bin/gcc$(PYTHON) | pip\ndeps_appnope =  $(SAGE_LOCAL)/bin/gcc$(PYTHON) | pip\n```\nPlease fix this.",
    "created_at": "2018-03-12T18:54:51Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318478",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:60'></a>
This completely breaks upgrading Sage, it seems to me. On three different OS X machines with 8.2.beta7 installed, upgrading to 8.2.beta8, or in particular just using this branch, results in a bad `build/make/Makefile`: lines like

```
deps_4ti2 =  $(SAGE_LOCAL)/bin/gcczlib $(MP_LIBRARY) glpk
deps_alabaster =  $(SAGE_LOCAL)/bin/gcc$(PYTHON) | pip
deps_appnope =  $(SAGE_LOCAL)/bin/gcc$(PYTHON) | pip
```
Please fix this.



---

archive/issue_comments_318479.json:
```json
{
    "body": "<a id='comment:61'></a>\nIndeed, it looks like a bug introduced upon the last rebase.  I didn't catch it because it only affects if you are using Sage's `gcc` spkg.",
    "created_at": "2018-03-12T19:25:31Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318479",
    "user": "https://github.com/embray"
}
```

<a id='comment:61'></a>
Indeed, it looks like a bug introduced upon the last rebase.  I didn't catch it because it only affects if you are using Sage's `gcc` spkg.



---

archive/issue_comments_318480.json:
```json
{
    "body": "<a id='comment:62'></a>\nActually it appears the problem might come from #24703 in the first place, since it seems to misplace the space in the `GCC_DEP` variable...",
    "created_at": "2018-03-12T19:30:42Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318480",
    "user": "https://github.com/embray"
}
```

<a id='comment:62'></a>
Actually it appears the problem might come from #24703 in the first place, since it seems to misplace the space in the `GCC_DEP` variable...



---

archive/issue_comments_318481.json:
```json
{
    "body": "<a id='comment:63'></a>\nReplying to [embray](#comment%3A62):\n> Actually it appears the problem might come from #24703 in the first place, since it seems to misplace the space in the `GCC_DEP` variable...\n\n\nI take that back--the missing space is in my code.",
    "created_at": "2018-03-12T19:31:53Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318481",
    "user": "https://github.com/embray"
}
```

<a id='comment:63'></a>
Replying to [embray](#comment%3A62):
> Actually it appears the problem might come from #24703 in the first place, since it seems to misplace the space in the `GCC_DEP` variable...


I take that back--the missing space is in my code.



---

archive/issue_events_192910.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2018-03-12T19:35:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192910"
}
```



---

archive/issue_events_192911.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-03-12T19:42:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192911"
}
```



---

archive/issue_events_192912.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "commit_id": "15fbaa620fe70a4c0d8c49ab042c68820ceae14d",
    "created_at": "2018-03-12T19:42:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21524#event-192912"
}
```



---

archive/issue_comments_318482.json:
```json
{
    "body": "<a id='comment:65'></a>\nYou cannot just re-open a ticket. Only the release manager should do that.",
    "created_at": "2018-03-12T19:42:39Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318482",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'></a>
You cannot just re-open a ticket. Only the release manager should do that.



---

archive/issue_comments_318483.json:
```json
{
    "body": "<a id='comment:66'></a>\nEspecially this ticket must not be re-opened since it has already been released. Just open a new ticket to fix it.",
    "created_at": "2018-03-12T19:48:47Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318483",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:66'></a>
Especially this ticket must not be re-opened since it has already been released. Just open a new ticket to fix it.



---

archive/issue_comments_318484.json:
```json
{
    "body": "<a id='comment:67'></a>\nIt's not in the latest beta yet.",
    "created_at": "2018-03-12T19:49:35Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318484",
    "user": "https://github.com/embray"
}
```

<a id='comment:67'></a>
It's not in the latest beta yet.



---

archive/issue_comments_318485.json:
```json
{
    "body": "<a id='comment:68'></a>\nOops, apparently it is.  If I had thought otherwise I wouldn't have reopened.  Strange--I just checked too any I didn't see it.",
    "created_at": "2018-03-12T19:51:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318485",
    "user": "https://github.com/embray"
}
```

<a id='comment:68'></a>
Oops, apparently it is.  If I had thought otherwise I wouldn't have reopened.  Strange--I just checked too any I didn't see it.



---

archive/issue_comments_318486.json:
```json
{
    "body": "<a id='comment:69'></a>\nFollowup in #24961.",
    "created_at": "2018-03-12T19:54:41Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318486",
    "user": "https://github.com/embray"
}
```

<a id='comment:69'></a>
Followup in #24961.



---

archive/issue_comments_318487.json:
```json
{
    "body": "<a id='comment:70'></a>\nThanks for the quick diagnosis, by the way!",
    "created_at": "2018-03-13T02:25:35Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318487",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:70'></a>
Thanks for the quick diagnosis, by the way!



---

archive/issue_comments_318488.json:
```json
{
    "body": "<a id='comment:71'></a>\nReplying to [jhpalmieri](#comment%3A70):\n> Thanks for the quick diagnosis, by the way!\n\n\nNo, thank you for pointing it out.",
    "created_at": "2018-03-13T14:39:04Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318488",
    "user": "https://github.com/embray"
}
```

<a id='comment:71'></a>
Replying to [jhpalmieri](#comment%3A70):
> Thanks for the quick diagnosis, by the way!


No, thank you for pointing it out.



---

archive/issue_comments_318489.json:
```json
{
    "body": "<a id='comment:72'></a>\nWhy is this making changes to `build/pkgs/gcc/spkg-install`? That might have broken building Sage from scratch if GCC is built.",
    "created_at": "2018-03-17T07:35:11Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318489",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:72'></a>
Why is this making changes to `build/pkgs/gcc/spkg-install`? That might have broken building Sage from scratch if GCC is built.



---

archive/issue_comments_318490.json:
```json
{
    "body": "<a id='comment:73'></a>\nThis might have broken `$(SAGERUNTIME)`: #24995",
    "created_at": "2018-03-17T18:18:54Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318490",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:73'></a>
This might have broken `$(SAGERUNTIME)`: #24995



---

archive/issue_comments_318491.json:
```json
{
    "body": "<a id='comment:74'></a>\nReplying to [jdemeyer](#comment%3A72):\n> Why is this making changes to `build/pkgs/gcc/spkg-install`? That might have broken building Sage from scratch if GCC is built.\n\n\nI just noticed this comment.  That was *not* intentional.  Probably a mis-resolved conflict (though I don't know why since I never made any edits to that file in the first place).",
    "created_at": "2018-03-21T16:52:39Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318491",
    "user": "https://github.com/embray"
}
```

<a id='comment:74'></a>
Replying to [jdemeyer](#comment%3A72):
> Why is this making changes to `build/pkgs/gcc/spkg-install`? That might have broken building Sage from scratch if GCC is built.


I just noticed this comment.  That was *not* intentional.  Probably a mis-resolved conflict (though I don't know why since I never made any edits to that file in the first place).



---

archive/issue_comments_318492.json:
```json
{
    "body": "<a id='comment:75'></a>\n`DUMMY_PACKAGES` seems broken: #25188",
    "created_at": "2018-04-17T09:54:06Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318492",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:75'></a>
`DUMMY_PACKAGES` seems broken: #25188



---

archive/issue_comments_318493.json:
```json
{
    "body": "<a id='comment:76'></a>\nWhat was the purpose of this change:\n\n```diff\n@@ -58,11 +58,11 @@ all-sage: \\\n # option to make forces all targets to be built unconditionally)\n download-for-sdist: base\n        env SAGE_INSTALL_FETCH_ONLY=yes $(MAKE) -B SAGERUNTIME= \\\n-               $(SDIST_PACKAGES)\n+               $(SDIST_PACKAGE_INSTS)\n \n```\n\nIt has broken sdists, see #25319.",
    "created_at": "2018-06-08T08:36:08Z",
    "issue": "https://github.com/sagemath/sage/issues/21524",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21524#issuecomment-318493",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:76'></a>
What was the purpose of this change:

```diff
@@ -58,11 +58,11 @@ all-sage: \
 # option to make forces all targets to be built unconditionally)
 download-for-sdist: base
        env SAGE_INSTALL_FETCH_ONLY=yes $(MAKE) -B SAGERUNTIME= \
-               $(SDIST_PACKAGES)
+               $(SDIST_PACKAGE_INSTS)
 
```

It has broken sdists, see #25319.
