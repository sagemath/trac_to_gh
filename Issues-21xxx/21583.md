# Issue 21583: py3 replace xrange by range in doctests of all cython files

archive/issues_021346.json:
```json
{
    "body": "as a step towards python3\n\n(recall that xrange must stay in the cython code)\n\nin one file with very large ranges, import six.moves.range in the doctests\n\nBranch/Commit: 34ed271a1edd912cbd3f06bc7e2d54e1aa8ed5c3\n\nReviewer: Jeroen Demeyer, Ralf Stephan\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21583\n\n",
    "closed_at": "2016-10-05T22:41:52Z",
    "created_at": "2016-09-24T16:42:31Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "py3 replace xrange by range in doctests of all cython files",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21583",
    "user": "https://github.com/fchapoton"
}
```
as a step towards python3

(recall that xrange must stay in the cython code)

in one file with very large ranges, import six.moves.range in the doctests

Branch/Commit: 34ed271a1edd912cbd3f06bc7e2d54e1aa8ed5c3

Reviewer: Jeroen Demeyer, Ralf Stephan

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21583





---

archive/issue_comments_315185.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-09-24T16:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315185",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_315186.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2016-09-24T16:43:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315186",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_315187.json:
```json
{
    "body": "<a id='comment:2'></a>When this `xrange(...)` is passed to some Sage function, this actually changes what is being tested. For loops, I agree with this change. But doing this mass replacement everywhere, I don't agree.",
    "created_at": "2016-09-27T08:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315187",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>When this `xrange(...)` is passed to some Sage function, this actually changes what is being tested. For loops, I agree with this change. But doing this mass replacement everywhere, I don't agree.



---

archive/issue_comments_315188.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-27T08:52:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315188",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_315189.json:
```json
{
    "body": "<a id='comment:3'></a>could you name the files where you have objections, please ?",
    "created_at": "2016-09-28T09:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315189",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>could you name the files where you have objections, please ?



---

archive/issue_comments_315190.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 chapoton]:\n> could you name the files where you have objections, please ?\n\n\nAll replacements `xrange() -> range()` which are done in a **looping construct** are fine. This means replacements in code like `for i in xrange(n)` or in `[f(x) for x in xrange(n)]`.\n\nEverything else (for example, the `matrix()` calls) should be investigated more carefully, preferably in a different ticket.",
    "created_at": "2016-09-28T10:34:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315190",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Replying to [comment:3 chapoton]:
> could you name the files where you have objections, please ?


All replacements `xrange() -> range()` which are done in a **looping construct** are fine. This means replacements in code like `for i in xrange(n)` or in `[f(x) for x in xrange(n)]`.

Everything else (for example, the `matrix()` calls) should be investigated more carefully, preferably in a different ticket.



---

archive/issue_comments_315191.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-28T18:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315191",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315192.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-28T18:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315192",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_315193.json:
```json
{
    "body": "<a id='comment:6'></a>is this what you required ?",
    "created_at": "2016-09-28T18:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315193",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>is this what you required ?



---

archive/issue_comments_315194.json:
```json
{
    "body": "<a id='comment:7'></a>I guess so, but I need to check in more detail.\n\nFor the `matrix()` calls, you can use `six.moves.range` instead of `xrange` because those are equivalent in Python 2.",
    "created_at": "2016-09-29T07:55:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315194",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>I guess so, but I need to check in more detail.

For the `matrix()` calls, you can use `six.moves.range` instead of `xrange` because those are equivalent in Python 2.



---

archive/issue_comments_315195.json:
```json
{
    "body": "<a id='comment:8'></a>Branch as is is looking good, patchbot happy. Feel positive after cosmetics.",
    "created_at": "2016-09-29T08:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315195",
    "user": "https://github.com/rwst"
}
```

<a id='comment:8'></a>Branch as is is looking good, patchbot happy. Feel positive after cosmetics.



---

archive/issue_comments_315196.json:
```json
{
    "body": "<a id='comment:9'></a>is this a positive review ?",
    "created_at": "2016-09-29T17:05:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315196",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>is this a positive review ?



---

archive/issue_comments_315197.json:
```json
{
    "body": "<a id='comment:10'></a>Yes, regardless if you use six. I couldn't have set positive myself if you wanted to do that.",
    "created_at": "2016-09-29T17:17:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315197",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>Yes, regardless if you use six. I couldn't have set positive myself if you wanted to do that.



---

archive/issue_comments_315198.json:
```json
{
    "body": "<a id='comment:11'></a>This is also **not** a loop:\n\n```diff\n-            sage: l = lazy_list(iter(xrange(10000)))\n+            sage: l = lazy_list(iter(range(10000)))\n```",
    "created_at": "2016-09-30T11:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315198",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>This is also **not** a loop:

```diff
-            sage: l = lazy_list(iter(xrange(10000)))
+            sage: l = lazy_list(iter(range(10000)))
```



---

archive/issue_comments_315199.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-30T11:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315199",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_315200.json:
```json
{
    "body": "<a id='comment:12'></a>If you undo the change from [comment:11], you can set this to positive_review.",
    "created_at": "2016-09-30T11:43:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315200",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>If you undo the change from [comment:11], you can set this to positive_review.



---

archive/issue_comments_315201.json:
```json
{
    "body": "<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-30T13:48:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315201",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_315202.json:
```json
{
    "body": "<a id='comment:14'></a>done, thanks",
    "created_at": "2016-09-30T13:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315202",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:14'></a>done, thanks



---

archive/issue_comments_315203.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-09-30T13:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315203",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_315204.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-10-05T22:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21583#issuecomment-315204",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057273.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-05T22:41:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21583",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21583#event-57273"
}
```
