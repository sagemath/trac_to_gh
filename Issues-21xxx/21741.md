# Issue 21741: Errors on empty graph

archive/issues_021504.json:
```json
{
    "body": "For example\n\n```\nG = Graph()\nknown_kaboom = ['is_prime', 'layout_graphviz']\nerrors = []\nfor f in [y for y in dir(G) if y[0] != '_']:\n    if f in known_kaboom:\n        continue\n    try:\n        attrcall(f)(G)\n    except TypeError as e:\n        if \"takes exactly\" in e.message:\n            continue\n    except Exception as e:\n        print(f, e)\n        print\n        errors.append(f)\n        continue\nerrors\n```\n\nshows some errors on empty graph (or more general in a corner case: `eulerian_circuit` on any graph without edges). Correct them.\n\n\nBranch/Commit: d0dccde88cc72d7a0d8acb936c1c2559a9e4c2b4\n\nReviewer: Thierry Monteil, Peleg Michaeli, David Coudert\n\nAuthor: Jori M\u00e4ntysalo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21741\n\n",
    "closed_at": "2017-02-11T10:22:42Z",
    "created_at": "2016-10-22T15:05:18Z",
    "labels": [
        "component: graph theory",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Errors on empty graph",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21741",
    "user": "https://github.com/jm58660"
}
```
For example

```
G = Graph()
known_kaboom = ['is_prime', 'layout_graphviz']
errors = []
for f in [y for y in dir(G) if y[0] != '_']:
    if f in known_kaboom:
        continue
    try:
        attrcall(f)(G)
    except TypeError as e:
        if "takes exactly" in e.message:
            continue
    except Exception as e:
        print(f, e)
        print
        errors.append(f)
        continue
errors
```

shows some errors on empty graph (or more general in a corner case: `eulerian_circuit` on any graph without edges). Correct them.


Branch/Commit: d0dccde88cc72d7a0d8acb936c1c2559a9e4c2b4

Reviewer: Thierry Monteil, Peleg Michaeli, David Coudert

Author: Jori MÃ¤ntysalo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21741





---

archive/issue_comments_298120.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-22T17:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298120",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298121.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-22T18:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298121",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298122.json:
```json
{
    "body": "<a id='comment:4'></a>This patch corrects most of those. No function called on the empty graph should now crash the worksheet.",
    "created_at": "2016-10-22T18:13:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298122",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:4'></a>This patch corrects most of those. No function called on the empty graph should now crash the worksheet.



---

archive/issue_comments_298123.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-22T18:13:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298123",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_298124.json:
```json
{
    "body": "<a id='comment:5'></a>You should systematically add doctest for such typical corner case (in the `TESTS:` section), or they will reappear.",
    "created_at": "2016-10-22T18:37:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298124",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:5'></a>You should systematically add doctest for such typical corner case (in the `TESTS:` section), or they will reappear.



---

archive/issue_comments_298125.json:
```json
{
    "body": "<a id='comment:6'></a>Replying to [comment:5 tmonteil]:\n> You should systematically add doctest for such typical corner case (in the `TESTS:` section), or they will reappear.\n\n\nTrue, but that should done in every function, not just for those I now modified.\n\nMaybe at the same time when checking docstrings. There are too many \"Returns\" vs. \"Return\", \"Return if the graph...\" vs. \"Tests whether the graph\" etc, and also some indentation errors.",
    "created_at": "2016-10-22T20:05:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298125",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>Replying to [comment:5 tmonteil]:
> You should systematically add doctest for such typical corner case (in the `TESTS:` section), or they will reappear.


True, but that should done in every function, not just for those I now modified.

Maybe at the same time when checking docstrings. There are too many "Returns" vs. "Return", "Return if the graph..." vs. "Tests whether the graph" etc, and also some indentation errors.



---

archive/issue_comments_298126.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 jmantysalo]:\n> Replying to [comment:5 tmonteil]:\n> > You should systematically add doctest for such typical corner case (in the `TESTS:` section), or they will reappear.\n\n> \n> True, but that should done in every function, not just for those I now modified.\n\n\nSure, if you feel the energy of doing this in this ticket, that would be amazing. Otherwise, adding tests related to the changes of behaviours introduced to this ticket would be enough to close this one and then open a follow-up for the other things. I guess it is up to you and your available time.",
    "created_at": "2016-10-24T08:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298126",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:7'></a>Replying to [comment:6 jmantysalo]:
> Replying to [comment:5 tmonteil]:
> > You should systematically add doctest for such typical corner case (in the `TESTS:` section), or they will reappear.

> 
> True, but that should done in every function, not just for those I now modified.


Sure, if you feel the energy of doing this in this ticket, that would be amazing. Otherwise, adding tests related to the changes of behaviours introduced to this ticket would be enough to close this one and then open a follow-up for the other things. I guess it is up to you and your available time.



---

archive/issue_comments_298127.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-24T08:57:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298127",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_298128.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 tmonteil]:\n> Replying to [comment:6 jmantysalo]:\n> > Replying to [comment:5 tmonteil]:\n> > > You should systematically add doctest for such typical corner case (in the `TESTS:` section), or they will reappear.\n\n> > \n> > True, but that should done in every function, not just for those I now modified.\n\n> \n> Sure, if you feel the energy of doing this in this ticket, that would be amazing. Otherwise, adding tests related to the changes of behaviours introduced to this ticket would be enough to close this one and then open a follow-up for the other things. I guess it is up to you and your available time.\n\n\nIn one ticket, no. That would make too much conflicts.\n\nI'll add tests to this set of bug corrections.",
    "created_at": "2016-10-24T10:31:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298128",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'></a>Replying to [comment:7 tmonteil]:
> Replying to [comment:6 jmantysalo]:
> > Replying to [comment:5 tmonteil]:
> > > You should systematically add doctest for such typical corner case (in the `TESTS:` section), or they will reappear.

> > 
> > True, but that should done in every function, not just for those I now modified.

> 
> Sure, if you feel the energy of doing this in this ticket, that would be amazing. Otherwise, adding tests related to the changes of behaviours introduced to this ticket would be enough to close this one and then open a follow-up for the other things. I guess it is up to you and your available time.


In one ticket, no. That would make too much conflicts.

I'll add tests to this set of bug corrections.



---

archive/issue_comments_298129.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-24T11:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298129",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298130.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-24T11:12:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298130",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_298131.json:
```json
{
    "body": "<a id='comment:11'></a>Just pinging.",
    "created_at": "2016-11-18T20:29:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298131",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'></a>Just pinging.



---

archive/issue_comments_298132.json:
```json
{
    "body": "<a id='comment:12'></a>I don't like these lines:\n\n```diff\n+        if self.size() == 0:\n+            raise ValueError(\"can't get a random vertex from the empty graph\")\n```\n\nThere are graphs with no edges which are not the empty graph.\n\nPerhaps you wanted to put there `self.order()` instead?",
    "created_at": "2016-11-28T20:35:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298132",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:12'></a>I don't like these lines:

```diff
+        if self.size() == 0:
+            raise ValueError("can't get a random vertex from the empty graph")
```

There are graphs with no edges which are not the empty graph.

Perhaps you wanted to put there `self.order()` instead?



---

archive/issue_comments_298133.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-28T20:36:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298133",
    "user": "https://github.com/pelegm"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_298134.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-29T06:47:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298134",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298135.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-29T06:53:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298135",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298136.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:12 pelegm]:\n> {{{#!diff\n> +        if self.size() == 0:\n> +            raise ValueError(\"can't get a random vertex from the empty graph\")\n> }}}\n\n\nMy bad, corrected. Thanks!",
    "created_at": "2016-11-29T07:20:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298136",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:16'></a>Replying to [comment:12 pelegm]:
> {{{#!diff
> +        if self.size() == 0:
> +            raise ValueError("can't get a random vertex from the empty graph")
> }}}


My bad, corrected. Thanks!



---

archive/issue_comments_298137.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-29T10:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298137",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_298138.json:
```json
{
    "body": "<a id='comment:18'></a>The following:\n\n```python\nsage: g = graphs.EmptyGraph()\nsage: g.maximum_average_degree()\n```\nstill raises\n\n```pytb\nTraceback (most recent call last):\n  File \"<ipython-input-8-5411948f9b78>\", line 1, in <module>\n    g.maximum_average_degree()\n  File \"/home/peleg/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py\", line 4643, in maximum_average_degree\n    m = 1/(10 *Integer(g.order()))\n  File \"sage/rings/integer.pyx\", line 1858, in sage.rings.integer.Integer.__div__ (build/cythonized/sage/rings/integer.c:13037)\n    return coercion_model.bin_op(left, right, operator.div)\n  File \"sage/structure/coerce.pyx\", line 1055, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:9327)\n    return PyObject_CallObject(op, xy)\n  File \"sage/rings/integer.pyx\", line 1843, in sage.rings.integer.Integer.__div__ (build/cythonized/sage/rings/integer.c:12871)\n    raise ZeroDivisionError(\"rational division by zero\")\nZeroDivisionError: rational division by zero\n```\n\nPerhaps we wish to fix that as well in this ticket?",
    "created_at": "2016-11-30T20:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298138",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:18'></a>The following:

```python
sage: g = graphs.EmptyGraph()
sage: g.maximum_average_degree()
```
still raises

```pytb
Traceback (most recent call last):
  File "<ipython-input-8-5411948f9b78>", line 1, in <module>
    g.maximum_average_degree()
  File "/home/peleg/sage/local/lib/python2.7/site-packages/sage/graphs/graph.py", line 4643, in maximum_average_degree
    m = 1/(10 *Integer(g.order()))
  File "sage/rings/integer.pyx", line 1858, in sage.rings.integer.Integer.__div__ (build/cythonized/sage/rings/integer.c:13037)
    return coercion_model.bin_op(left, right, operator.div)
  File "sage/structure/coerce.pyx", line 1055, in sage.structure.coerce.CoercionModel_cache_maps.bin_op (build/cythonized/sage/structure/coerce.c:9327)
    return PyObject_CallObject(op, xy)
  File "sage/rings/integer.pyx", line 1843, in sage.rings.integer.Integer.__div__ (build/cythonized/sage/rings/integer.c:12871)
    raise ZeroDivisionError("rational division by zero")
ZeroDivisionError: rational division by zero
```

Perhaps we wish to fix that as well in this ticket?



---

archive/issue_comments_298139.json:
```json
{
    "body": "<a id='comment:19'></a>Some other failures (here `g` is the empty graph).\n\n1. `g.average_degree()` (both this and `g.maximum_average_degree()` may raise, perhaps, `ZeroDivisionError`, but in this case a more informative error would be helpful probably)\n2. `g.bridges()` raises `StopIteration`.  Should probably return an empty list.\n3. `g.density()` returns 0.  This should probably raise an error instead (`ZeroDivisionError`?) or return NaN.\n4. The diameter and radius methods for the null graph currently raise a `ValueError`. Shouldn't they return plus or minus inifnity, as they represent the minimum and the maximum of some function, taken over an empty set?\n5. `g.gomory_hu_tree` raises `StopIteration`.\n6. About your fix in finding Hamilton cycles: I don't think that the problem of finding a Hamilton cycle is not well defined for graphs with less than 2 vertices.  I just think that these graphs are not Hamiltonian.  If one tries the method `g.hamiltonian cycle` on `PetersenGraph`, for example, the error raised is `EmptySetError: The given graph is not Hamiltonian`.  I don't think there should be a difference between the responses.  Not sure `EmptySetError` is the best response; but if this is the response for the Petersen graph, it should be the response for 0/1-vertex graphs as well, as these graphs simply do not have a Hamilton cycle (as thry do not even have cycles!).\n7. Same goes for `g.is_hamiltonian()`.\n8. In the function `is_weakly_chordal` you have added a test for `is_long_hole_free`. Seems to be a copy-paste error. Make sure you fix and test both.\n9. Not sure about that: but isn't the empty graph vertex transitive?\n10. The number of faces of the empty graph is no 0, but rather 1 - or undefined.  A matter of taste probably.  See also #22003.\n21. `g.show3d` raises an unrelated error: `AttributeError: 'int' object has no attribute 'show'`.\n\nFinally, should we add the alias `NullGraph` to `EmptyGraph`?",
    "created_at": "2016-11-30T21:12:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298139",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:19'></a>Some other failures (here `g` is the empty graph).

1. `g.average_degree()` (both this and `g.maximum_average_degree()` may raise, perhaps, `ZeroDivisionError`, but in this case a more informative error would be helpful probably)
2. `g.bridges()` raises `StopIteration`.  Should probably return an empty list.
3. `g.density()` returns 0.  This should probably raise an error instead (`ZeroDivisionError`?) or return NaN.
4. The diameter and radius methods for the null graph currently raise a `ValueError`. Shouldn't they return plus or minus inifnity, as they represent the minimum and the maximum of some function, taken over an empty set?
5. `g.gomory_hu_tree` raises `StopIteration`.
6. About your fix in finding Hamilton cycles: I don't think that the problem of finding a Hamilton cycle is not well defined for graphs with less than 2 vertices.  I just think that these graphs are not Hamiltonian.  If one tries the method `g.hamiltonian cycle` on `PetersenGraph`, for example, the error raised is `EmptySetError: The given graph is not Hamiltonian`.  I don't think there should be a difference between the responses.  Not sure `EmptySetError` is the best response; but if this is the response for the Petersen graph, it should be the response for 0/1-vertex graphs as well, as these graphs simply do not have a Hamilton cycle (as thry do not even have cycles!).
7. Same goes for `g.is_hamiltonian()`.
8. In the function `is_weakly_chordal` you have added a test for `is_long_hole_free`. Seems to be a copy-paste error. Make sure you fix and test both.
9. Not sure about that: but isn't the empty graph vertex transitive?
10. The number of faces of the empty graph is no 0, but rather 1 - or undefined.  A matter of taste probably.  See also #22003.
21. `g.show3d` raises an unrelated error: `AttributeError: 'int' object has no attribute 'show'`.

Finally, should we add the alias `NullGraph` to `EmptyGraph`?



---

archive/issue_comments_298140.json:
```json
{
    "body": "<a id='comment:20'></a>I can do those, but shall it be on another ticket? This one already has high propability of clashing with some other change.",
    "created_at": "2016-11-30T22:37:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298140",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:20'></a>I can do those, but shall it be on another ticket? This one already has high propability of clashing with some other change.



---

archive/issue_comments_298141.json:
```json
{
    "body": "<a id='comment:21'></a>Comments **1**-**5** seems to be very much related to this ticket, but I see no real harm in opening a new ticket for them.\n\nComments **6**-**8** are directly related to your patch, so they should be probably discussed (and/or fixed) in this ticket.\n\nComments **9**-**11** are really different stuff. It might be better to open a new ticket(s) for these. I'll do that.\n\nDon't be afraid of merge commits.  These can be handled.",
    "created_at": "2016-12-01T07:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298141",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:21'></a>Comments **1**-**5** seems to be very much related to this ticket, but I see no real harm in opening a new ticket for them.

Comments **6**-**8** are directly related to your patch, so they should be probably discussed (and/or fixed) in this ticket.

Comments **9**-**11** are really different stuff. It might be better to open a new ticket(s) for these. I'll do that.

Don't be afraid of merge commits.  These can be handled.



---

archive/issue_comments_298142.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 pelegm]:\n\n> Comments **6**-**8** are directly related to your patch, so they should be probably discussed (and/or fixed) in this ticket.\n\n\nOK, I'll check them.\n\n> Don't be afraid of merge commits.  These can be handled.\n\n\nYes, but it is irritating.",
    "created_at": "2016-12-01T07:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298142",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:22'></a>Replying to [comment:21 pelegm]:

> Comments **6**-**8** are directly related to your patch, so they should be probably discussed (and/or fixed) in this ticket.


OK, I'll check them.

> Don't be afraid of merge commits.  These can be handled.


Yes, but it is irritating.



---

archive/issue_comments_298143.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-12-01T07:33:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298143",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_298144.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-01T11:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298144",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298145.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:19 pelegm]:\n> 6. About your fix in finding Hamilton cycles: I don't think that the problem of finding a Hamilton cycle is not well defined for graphs with less than 2 vertices.  I just think that these graphs are not Hamiltonian.\n\n\nOK, here is a patch that makse those graphs to return False.\n\nHowever, I do not know that much about graphs. Hence I hope someone else also to comment on this. I suppose there has been some reason for making them to raise an exception.\n\n> 8. In the function `is_weakly_chordal` you have added a test for `is_long_hole_free`. Seems to be a copy-paste error. Make sure you fix and test both.\n\n\nYes, my error. Corrected.",
    "created_at": "2016-12-01T11:43:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298145",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:24'></a>Replying to [comment:19 pelegm]:
> 6. About your fix in finding Hamilton cycles: I don't think that the problem of finding a Hamilton cycle is not well defined for graphs with less than 2 vertices.  I just think that these graphs are not Hamiltonian.


OK, here is a patch that makse those graphs to return False.

However, I do not know that much about graphs. Hence I hope someone else also to comment on this. I suppose there has been some reason for making them to raise an exception.

> 8. In the function `is_weakly_chordal` you have added a test for `is_long_hole_free`. Seems to be a copy-paste error. Make sure you fix and test both.


Yes, my error. Corrected.



---

archive/issue_comments_298146.json:
```json
{
    "body": "<a id='comment:25'></a>Looks better to me. I suggest we will wait indeed for another review.",
    "created_at": "2016-12-01T12:03:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298146",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:25'></a>Looks better to me. I suggest we will wait indeed for another review.



---

archive/issue_comments_298147.json:
```json
{
    "body": "<a id='comment:26'></a>Ticket #10206 fix empty graph issue for method `find_hamiltonian` of `generic_graph_pyx.pyx`.",
    "created_at": "2016-12-03T15:06:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298147",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:26'></a>Ticket #10206 fix empty graph issue for method `find_hamiltonian` of `generic_graph_pyx.pyx`.



---

archive/issue_comments_298148.json:
```json
{
    "body": "<a id='comment:27'></a>This ticket passes all tests (on `src/sage/graphs/`) and solves many issues.\nHowever, for `max_cut`, you could also check the graph of order 1.\n\n```\nsage: Graph(0).max_cut()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n...\nValueError: max cut is not defined for the empty graph\nsage: Graph(1).max_cut()\n---------------------------------------------------------------------------\nMIPSolverException                        Traceback (most recent call last)\n...\nMIPSolverException: CPLEX: The problem has no feasible solution\nsage: Graph(2).max_cut()\n0\n```",
    "created_at": "2016-12-03T19:05:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298148",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:27'></a>This ticket passes all tests (on `src/sage/graphs/`) and solves many issues.
However, for `max_cut`, you could also check the graph of order 1.

```
sage: Graph(0).max_cut()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
...
ValueError: max cut is not defined for the empty graph
sage: Graph(1).max_cut()
---------------------------------------------------------------------------
MIPSolverException                        Traceback (most recent call last)
...
MIPSolverException: CPLEX: The problem has no feasible solution
sage: Graph(2).max_cut()
0
```



---

archive/issue_comments_298149.json:
```json
{
    "body": "<a id='comment:28'></a>OK, so I wait for #10206 to get closed and then run the test set again with one-element graph.",
    "created_at": "2016-12-04T20:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298149",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:28'></a>OK, so I wait for #10206 to get closed and then run the test set again with one-element graph.



---

archive/issue_comments_298150.json:
```json
{
    "body": "<a id='comment:29'></a>See also discussion at #15060.",
    "created_at": "2017-01-08T21:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298150",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:29'></a>See also discussion at #15060.



---

archive/issue_comments_298151.json:
```json
{
    "body": "<a id='comment:30'></a>Well, #10206 is now closed :)",
    "created_at": "2017-02-03T13:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298151",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:30'></a>Well, #10206 is now closed :)



---

archive/issue_comments_298152.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:30 pelegm]:\n> Well, #10206 is now closed :)\n\n\nYep. So time to merge... Job I don't like.\n\nWill be ready either today or next week.",
    "created_at": "2017-02-03T13:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298152",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:31'></a>Replying to [comment:30 pelegm]:
> Well, #10206 is now closed :)


Yep. So time to merge... Job I don't like.

Will be ready either today or next week.



---

archive/issue_comments_298153.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-06T08:12:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298153",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298154.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:31 jmantysalo]:\n\n> Will be ready either today or next week.\n\n\nDone. Compiling and testing now.",
    "created_at": "2017-02-06T08:21:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298154",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:33'></a>Replying to [comment:31 jmantysalo]:

> Will be ready either today or next week.


Done. Compiling and testing now.



---

archive/issue_comments_298155.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-02-06T08:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298155",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_298156.json:
```json
{
    "body": "<a id='comment:35'></a>Some remarks/questions:\n* In `traveling_salesman_problem` you have different treatments for a graph of order 1 without edges and a graph of order 1 with multiple loops. Why this choice?\n* `The empty graph is defined be not a Cayley graph` -> `The empty graph is defined to be not a Cayley graph` or `by definition the empty graph is not a Cayley graph` ?",
    "created_at": "2017-02-06T09:29:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298156",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:35'></a>Some remarks/questions:
* In `traveling_salesman_problem` you have different treatments for a graph of order 1 without edges and a graph of order 1 with multiple loops. Why this choice?
* `The empty graph is defined be not a Cayley graph` -> `The empty graph is defined to be not a Cayley graph` or `by definition the empty graph is not a Cayley graph` ?



---

archive/issue_comments_298157.json:
```json
{
    "body": "<a id='comment:36'></a>Replying to [comment:35 dcoudert]:\n\n> * In `traveling_salesman_problem` you have different treatments for a graph of order 1 without edges and a graph of order 1 with multiple loops. Why this choice?\n\n\nI guess I did not think this at all. How should TSP behave on graph with loops?",
    "created_at": "2017-02-06T09:55:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298157",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:36'></a>Replying to [comment:35 dcoudert]:

> * In `traveling_salesman_problem` you have different treatments for a graph of order 1 without edges and a graph of order 1 with multiple loops. Why this choice?


I guess I did not think this at all. How should TSP behave on graph with loops?



---

archive/issue_comments_298158.json:
```json
{
    "body": "<a id='comment:37'></a>When you have 2 or more vertices, loops are useless (loops are removed in the code). But honestly I don't know what to do with a graph of order 1 with a loop. The `not well defined` error message was good, no? I think that the expected behavior depends on the model/situation.",
    "created_at": "2017-02-06T10:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298158",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:37'></a>When you have 2 or more vertices, loops are useless (loops are removed in the code). But honestly I don't know what to do with a graph of order 1 with a loop. The `not well defined` error message was good, no? I think that the expected behavior depends on the model/situation.



---

archive/issue_comments_298159.json:
```json
{
    "body": "<a id='comment:38'></a>Now I re-read this. But\n\n```\nsage: g = Graph(1, loops=True, multiedges=True)\nsage: g.traveling_salesman_problem()\nEmptySetError: the given graph is not Hamiltonian\nsage: g.add_edge(0, 0); g.add_edge(0, 0)\nsage: g.traveling_salesman_problem()\nEmptySetError: the given graph is not Hamiltonian\n```\n\nSo the error message is the same. Do you mean that the error message should begin with \"the\" and not \"The\" in all cases?",
    "created_at": "2017-02-07T06:32:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298159",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:38'></a>Now I re-read this. But

```
sage: g = Graph(1, loops=True, multiedges=True)
sage: g.traveling_salesman_problem()
EmptySetError: the given graph is not Hamiltonian
sage: g.add_edge(0, 0); g.add_edge(0, 0)
sage: g.traveling_salesman_problem()
EmptySetError: the given graph is not Hamiltonian
```

So the error message is the same. Do you mean that the error message should begin with "the" and not "The" in all cases?



---

archive/issue_comments_298160.json:
```json
{
    "body": "<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-07T06:33:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298160",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:39'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_298161.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-02-07T07:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298161",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_298162.json:
```json
{
    "body": "<a id='comment:40'></a>I confused myself between methods `is_hamiltonian` and `traveling_salesman_problem`. I checked again and it's OK.\n\nConcerning error messages, I saw in other tickets that messages should start with `the` instead of `The` and that endpoint should be removed. This is correct here.\n\nThis patch passes all tests on `src/sage/graphs`, so for me it's good to go.",
    "created_at": "2017-02-07T07:45:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298162",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:40'></a>I confused myself between methods `is_hamiltonian` and `traveling_salesman_problem`. I checked again and it's OK.

Concerning error messages, I saw in other tickets that messages should start with `the` instead of `The` and that endpoint should be removed. This is correct here.

This patch passes all tests on `src/sage/graphs`, so for me it's good to go.



---

archive/issue_comments_298163.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-02-11T10:22:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21741#issuecomment-298163",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057559.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-02-11T10:22:42Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21741",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21741#event-57559"
}
```
