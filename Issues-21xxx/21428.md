# Issue 21428: AssertionError plotting real part of complex function with float coefficients

archive/issues_021191.json:
```json
{
    "body": "Attempting this plot produces the error:\n\n```\nsage: plot(real(sqrt(x - 1.*I)), (x,0,1))\n...\n/Users/Masson/Downloads/GitHub/sage/src/sage/symbolic/pynac.pyx in sage.symbolic.pynac.py_atan2 (/Users/Masson/Downloads/GitHub/sage/src/build/cythonized/sage/symbolic/pynac.cpp:18694)()\n   1740     from sage.symbolic.constants import pi\n   1741     parent = parent_c(x)\n-> 1742     assert parent is parent_c(y)\n   1743     if parent is ZZ:\n   1744         parent = RR\n\nAssertionError: \n```\n\nReported in this [ask](https://ask.sagemath.org/question/34735/atan2-assertionerror-while-plotting-complex-squareroot-function/) question.\n\n**Branch/Commit:** [8c1e1ebcd96e48c8be6a9b79382e864c9daad059](https://github.com/sagemath/sagetrac-mirror/commit/8c1e1ebcd96e48c8be6a9b79382e864c9daad059)\n\n**Reviewer:** Paul Masson, Ralf Stephan\n\n**Author:** Ralf Stephan, Paul Masson\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21428\n\n",
    "closed_at": "2016-12-05T22:35:05Z",
    "created_at": "2016-09-06T02:13:27Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "AssertionError plotting real part of complex function with float coefficients",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21428",
    "user": "https://github.com/paulmasson"
}
```
Attempting this plot produces the error:

```
sage: plot(real(sqrt(x - 1.*I)), (x,0,1))
...
/Users/Masson/Downloads/GitHub/sage/src/sage/symbolic/pynac.pyx in sage.symbolic.pynac.py_atan2 (/Users/Masson/Downloads/GitHub/sage/src/build/cythonized/sage/symbolic/pynac.cpp:18694)()
   1740     from sage.symbolic.constants import pi
   1741     parent = parent_c(x)
-> 1742     assert parent is parent_c(y)
   1743     if parent is ZZ:
   1744         parent = RR

AssertionError: 
```

Reported in this [ask](https://ask.sagemath.org/question/34735/atan2-assertionerror-while-plotting-complex-squareroot-function/) question.

**Branch/Commit:** [8c1e1ebcd96e48c8be6a9b79382e864c9daad059](https://github.com/sagemath/sagetrac-mirror/commit/8c1e1ebcd96e48c8be6a9b79382e864c9daad059)

**Reviewer:** Paul Masson, Ralf Stephan

**Author:** Ralf Stephan, Paul Masson

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/21428





---

archive/issue_comments_397032.json:
```json
{
    "body": "**Branch:** [u/rws/assertionerror_plotting_real_part_of_complex_function_with_float_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/assertionerror_plotting_real_part_of_complex_function_with_float_coefficients)",
    "created_at": "2016-09-18T08:43:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397032",
    "user": "https://github.com/rwst"
}
```

**Branch:** [u/rws/assertionerror_plotting_real_part_of_complex_function_with_float_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/assertionerror_plotting_real_part_of_complex_function_with_float_coefficients)



---

archive/issue_comments_397033.json:
```json
{
    "body": "**Commit:** [13e72f347581f2836b5a9bbaef21035b2af4cbc7](https://github.com/sagemath/sagetrac-mirror/commit/13e72f347581f2836b5a9bbaef21035b2af4cbc7)",
    "created_at": "2016-09-18T08:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397033",
    "user": "https://github.com/rwst"
}
```

**Commit:** [13e72f347581f2836b5a9bbaef21035b2af4cbc7](https://github.com/sagemath/sagetrac-mirror/commit/13e72f347581f2836b5a9bbaef21035b2af4cbc7)



---

archive/issue_comments_397034.json:
```json
{
    "body": "<a id='comment:2'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13e72f347581f2836b5a9bbaef21035b2af4cbc7\">13e72f3</a></td><td><code>21428: be permissive in py_atan2</code></td></tr></table>\n",
    "created_at": "2016-09-18T08:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397034",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13e72f347581f2836b5a9bbaef21035b2af4cbc7">13e72f3</a></td><td><code>21428: be permissive in py_atan2</code></td></tr></table>




---

archive/issue_comments_397035.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2016-09-18T08:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397035",
    "user": "https://github.com/rwst"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_397036.json:
```json
{
    "body": "**Author:** Ralf Stephan",
    "created_at": "2016-09-18T08:43:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397036",
    "user": "https://github.com/rwst"
}
```

**Author:** Ralf Stephan



---

archive/issue_comments_397037.json:
```json
{
    "body": "<a id='comment:3'></a>\nSolves the plot problem, but needs doctests for arguments with different parents to illustrate the change.\n\nAlso, there are uncommitted changes for Pynac 0.6.9.1 that get included when this branch is checked out. They belong on another branch and ticket.",
    "created_at": "2016-09-18T21:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397037",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:3'></a>
Solves the plot problem, but needs doctests for arguments with different parents to illustrate the change.

Also, there are uncommitted changes for Pynac 0.6.9.1 that get included when this branch is checked out. They belong on another branch and ticket.



---

archive/issue_comments_397038.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-09-18T21:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397038",
    "user": "https://github.com/paulmasson"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_397039.json:
```json
{
    "body": "**Reviewer:** Paul Masson",
    "created_at": "2016-09-18T21:28:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397039",
    "user": "https://github.com/paulmasson"
}
```

**Reviewer:** Paul Masson



---

archive/issue_comments_397040.json:
```json
{
    "body": "<a id='comment:4'></a>\nThis simple change is likely to have future repercussions. Wouldn't it make more sense to determine both parents and use whichever is more general?",
    "created_at": "2016-09-18T21:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397040",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:4'></a>
This simple change is likely to have future repercussions. Wouldn't it make more sense to determine both parents and use whichever is more general?



---

archive/issue_comments_397041.json:
```json
{
    "body": "**Changing branch** from \"[u/rws/assertionerror_plotting_real_part_of_complex_function_with_float_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/assertionerror_plotting_real_part_of_complex_function_with_float_coefficients)\" to \"\".",
    "created_at": "2016-09-19T07:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397041",
    "user": "https://github.com/rwst"
}
```

**Changing branch** from "[u/rws/assertionerror_plotting_real_part_of_complex_function_with_float_coefficients](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/assertionerror_plotting_real_part_of_complex_function_with_float_coefficients)" to "".



---

archive/issue_comments_397042.json:
```json
{
    "body": "**Changing commit** from \"[13e72f347581f2836b5a9bbaef21035b2af4cbc7](https://github.com/sagemath/sagetrac-mirror/commit/13e72f347581f2836b5a9bbaef21035b2af4cbc7)\" to \"\".",
    "created_at": "2016-09-19T07:59:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397042",
    "user": "https://github.com/rwst"
}
```

**Changing commit** from "[13e72f347581f2836b5a9bbaef21035b2af4cbc7](https://github.com/sagemath/sagetrac-mirror/commit/13e72f347581f2836b5a9bbaef21035b2af4cbc7)" to "".



---

archive/issue_comments_397043.json:
```json
{
    "body": "**Branch:** [u/paulmasson/21428](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/21428)",
    "created_at": "2016-10-06T21:49:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397043",
    "user": "https://github.com/paulmasson"
}
```

**Branch:** [u/paulmasson/21428](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/21428)



---

archive/issue_comments_397044.json:
```json
{
    "body": "<a id='comment:7'></a>\nThis modification allows plotting to function without invalidating existing doctests.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/791b564fdfd53186df76f6d7dbb4cf059d1aab28\">791b564</a></td><td><code>Allow plotting to function</code></td></tr></table>\n",
    "created_at": "2016-10-06T21:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397044",
    "user": "https://github.com/paulmasson"
}
```

<a id='comment:7'></a>
This modification allows plotting to function without invalidating existing doctests.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/791b564fdfd53186df76f6d7dbb4cf059d1aab28">791b564</a></td><td><code>Allow plotting to function</code></td></tr></table>




---

archive/issue_comments_397045.json:
```json
{
    "body": "**Commit:** [791b564fdfd53186df76f6d7dbb4cf059d1aab28](https://github.com/sagemath/sagetrac-mirror/commit/791b564fdfd53186df76f6d7dbb4cf059d1aab28)",
    "created_at": "2016-10-06T21:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397045",
    "user": "https://github.com/paulmasson"
}
```

**Commit:** [791b564fdfd53186df76f6d7dbb4cf059d1aab28](https://github.com/sagemath/sagetrac-mirror/commit/791b564fdfd53186df76f6d7dbb4cf059d1aab28)



---

archive/issue_comments_397046.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-10-06T21:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397046",
    "user": "https://github.com/paulmasson"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_397047.json:
```json
{
    "body": "**Changing author** from \"Ralf Stephan\" to \"Ralf Stephan, Paul Masson\".",
    "created_at": "2016-10-06T21:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397047",
    "user": "https://github.com/paulmasson"
}
```

**Changing author** from "Ralf Stephan" to "Ralf Stephan, Paul Masson".



---

archive/issue_comments_397048.json:
```json
{
    "body": "**Changing commit** from \"[791b564fdfd53186df76f6d7dbb4cf059d1aab28](https://github.com/sagemath/sagetrac-mirror/commit/791b564fdfd53186df76f6d7dbb4cf059d1aab28)\" to \"[45a6b64db5302d8aaf6a17bd85f300c47c53e0d5](https://github.com/sagemath/sagetrac-mirror/commit/45a6b64db5302d8aaf6a17bd85f300c47c53e0d5)\".",
    "created_at": "2016-11-13T23:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397048",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[791b564fdfd53186df76f6d7dbb4cf059d1aab28](https://github.com/sagemath/sagetrac-mirror/commit/791b564fdfd53186df76f6d7dbb4cf059d1aab28)" to "[45a6b64db5302d8aaf6a17bd85f300c47c53e0d5](https://github.com/sagemath/sagetrac-mirror/commit/45a6b64db5302d8aaf6a17bd85f300c47c53e0d5)".



---

archive/issue_comments_397049.json:
```json
{
    "body": "<a id='comment:8'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/45a6b64db5302d8aaf6a17bd85f300c47c53e0d5\">45a6b64</a></td><td><code>Merge develop</code></td></tr></table>\n",
    "created_at": "2016-11-13T23:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397049",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/45a6b64db5302d8aaf6a17bd85f300c47c53e0d5">45a6b64</a></td><td><code>Merge develop</code></td></tr></table>




---

archive/issue_comments_397050.json:
```json
{
    "body": "**Changing branch** from \"[u/paulmasson/21428](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/21428)\" to \"[u/paulmasson/21428-1](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/21428-1)\".",
    "created_at": "2016-11-14T00:13:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397050",
    "user": "https://github.com/paulmasson"
}
```

**Changing branch** from "[u/paulmasson/21428](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/21428)" to "[u/paulmasson/21428-1](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/21428-1)".



---

archive/issue_comments_397051.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-12-04T08:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397051",
    "user": "https://github.com/rwst"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_397052.json:
```json
{
    "body": "**Changing reviewer** from \"Paul Masson\" to \"Paul Masson, Ralf Stephan\".",
    "created_at": "2016-12-04T08:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397052",
    "user": "https://github.com/rwst"
}
```

**Changing reviewer** from "Paul Masson" to "Paul Masson, Ralf Stephan".



---

archive/issue_comments_397053.json:
```json
{
    "body": "<a id='comment:10'></a>\nI think this is okay, and it tests fine with ptestlong.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c1e1ebcd96e48c8be6a9b79382e864c9daad059\">8c1e1eb</a></td><td><code>Allow plotting to function</code></td></tr></table>\n",
    "created_at": "2016-12-04T08:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397053",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>
I think this is okay, and it tests fine with ptestlong.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c1e1ebcd96e48c8be6a9b79382e864c9daad059">8c1e1eb</a></td><td><code>Allow plotting to function</code></td></tr></table>




---

archive/issue_comments_397054.json:
```json
{
    "body": "**Changing commit** from \"[45a6b64db5302d8aaf6a17bd85f300c47c53e0d5](https://github.com/sagemath/sagetrac-mirror/commit/45a6b64db5302d8aaf6a17bd85f300c47c53e0d5)\" to \"[8c1e1ebcd96e48c8be6a9b79382e864c9daad059](https://github.com/sagemath/sagetrac-mirror/commit/8c1e1ebcd96e48c8be6a9b79382e864c9daad059)\".",
    "created_at": "2016-12-04T08:59:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397054",
    "user": "https://github.com/rwst"
}
```

**Changing commit** from "[45a6b64db5302d8aaf6a17bd85f300c47c53e0d5](https://github.com/sagemath/sagetrac-mirror/commit/45a6b64db5302d8aaf6a17bd85f300c47c53e0d5)" to "[8c1e1ebcd96e48c8be6a9b79382e864c9daad059](https://github.com/sagemath/sagetrac-mirror/commit/8c1e1ebcd96e48c8be6a9b79382e864c9daad059)".



---

archive/issue_events_064757.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-05T22:35:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21428#event-64757"
}
```



---

archive/issue_comments_397055.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2016-12-05T22:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397055",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_397056.json:
```json
{
    "body": "**Changing branch** from \"[u/paulmasson/21428-1](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/21428-1)\" to \"[8c1e1ebcd96e48c8be6a9b79382e864c9daad059](https://github.com/sagemath/sagetrac-mirror/commit/8c1e1ebcd96e48c8be6a9b79382e864c9daad059)\".",
    "created_at": "2016-12-05T22:35:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21428",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21428#issuecomment-397056",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/paulmasson/21428-1](https://github.com/sagemath/sagetrac-mirror/tree/u/paulmasson/21428-1)" to "[8c1e1ebcd96e48c8be6a9b79382e864c9daad059](https://github.com/sagemath/sagetrac-mirror/commit/8c1e1ebcd96e48c8be6a9b79382e864c9daad059)".
