# Issue 21012: doctest in game theory requires nash

archive/issues_020775.json:
```json
{
    "body": "On a fresh install of Sage with the package lrslib installed many doctests in `game_theory` fail.\n\n```\nRunning doctests with ID 2016-07-13-05-05-59-2a599c24.\nGit branch: patchbot/ticket_merged\nUsing --optional=4ti2,bliss,cbc,database_gap,gap_packages,igraph,lrslib,mpir,normaliz,nose,ore_algebra,patchbot,plantri,python2,qepcad,saclib,sage,threejs,tides\nDoctesting 9 files.\nsage -t --long --warn-long 62.7 game_theory/catalog_normal_form_games.py\n**********************************************************************\nFile \"game_theory/catalog_normal_form_games.py\", line 12, in sage.game_theory.catalog_normal_form_games\nFailed example:\n    g.obtain_nash()\nException raised:\n    Traceback (most recent call last):\n      File \"/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.game_theory.catalog_normal_form_games[2]>\", line 1, in <module>\n        g.obtain_nash()\n      File \"/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/game_theory/normal_form_game.py\", line 1328, in obtain_nash\n        return self._solve_lrs(maximization)\n      File \"/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/game_theory/normal_form_game.py\", line 1400, in _solve_lrs\n        process = Popen(['nash', g1_name, g2_name], stdout=PIPE)\n      File \"/home/vincent/sage_patchbot/local/lib/python/subprocess.py\", line 710, in __init__\n        errread, errwrite)\n      File \"/home/vincent/sage_patchbot/local/lib/python/subprocess.py\", line 1335, in _execute_child\n        raise child_exception\n    OSError: [Errno 2] No such file or directory\n**********************************************************************\n...\n----------------------------------------------------------------------\nsage -t --long --warn-long 62.7 game_theory/catalog_normal_form_games.py  # 19 doctests failed\nsage -t --long --warn-long 62.7 game_theory/normal_form_game.py  # 19 doctests failed\nsage -t --long --warn-long 62.7 game_theory/parser.py  # 10 doctests failed\n```\nThe reason is that the package `lrslib`, with version 061, renamed the `nash` executable to `lrsnash`.\n\nCC:  @drvinceknight @jdemeyer @kcrisman @mkoeppe\n\nBranch/Commit: [c09907134044a860f427bc87f0f4a68ff929bd71](https://github.com/sagemath/sagetrac-mirror/commit/c09907134044a860f427bc87f0f4a68ff929bd71)\n\nReviewer: Matthias Koeppe\n\nAuthor: Vincent Delecroix\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21012\n\n",
    "closed_at": "2016-07-16T20:06:45Z",
    "created_at": "2016-07-13T03:30:33Z",
    "labels": [
        "component: packages: optional",
        "critical",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "doctest in game theory requires nash",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21012",
    "user": "https://github.com/videlec"
}
```
On a fresh install of Sage with the package lrslib installed many doctests in `game_theory` fail.

```
Running doctests with ID 2016-07-13-05-05-59-2a599c24.
Git branch: patchbot/ticket_merged
Using --optional=4ti2,bliss,cbc,database_gap,gap_packages,igraph,lrslib,mpir,normaliz,nose,ore_algebra,patchbot,plantri,python2,qepcad,saclib,sage,threejs,tides
Doctesting 9 files.
sage -t --long --warn-long 62.7 game_theory/catalog_normal_form_games.py
**********************************************************************
File "game_theory/catalog_normal_form_games.py", line 12, in sage.game_theory.catalog_normal_form_games
Failed example:
    g.obtain_nash()
Exception raised:
    Traceback (most recent call last):
      File "/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.game_theory.catalog_normal_form_games[2]>", line 1, in <module>
        g.obtain_nash()
      File "/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/game_theory/normal_form_game.py", line 1328, in obtain_nash
        return self._solve_lrs(maximization)
      File "/home/vincent/sage_patchbot/local/lib/python2.7/site-packages/sage/game_theory/normal_form_game.py", line 1400, in _solve_lrs
        process = Popen(['nash', g1_name, g2_name], stdout=PIPE)
      File "/home/vincent/sage_patchbot/local/lib/python/subprocess.py", line 710, in __init__
        errread, errwrite)
      File "/home/vincent/sage_patchbot/local/lib/python/subprocess.py", line 1335, in _execute_child
        raise child_exception
    OSError: [Errno 2] No such file or directory
**********************************************************************
...
----------------------------------------------------------------------
sage -t --long --warn-long 62.7 game_theory/catalog_normal_form_games.py  # 19 doctests failed
sage -t --long --warn-long 62.7 game_theory/normal_form_game.py  # 19 doctests failed
sage -t --long --warn-long 62.7 game_theory/parser.py  # 10 doctests failed
```
The reason is that the package `lrslib`, with version 061, renamed the `nash` executable to `lrsnash`.

CC:  @drvinceknight @jdemeyer @kcrisman @mkoeppe

Branch/Commit: [c09907134044a860f427bc87f0f4a68ff929bd71](https://github.com/sagemath/sagetrac-mirror/commit/c09907134044a860f427bc87f0f4a68ff929bd71)

Reviewer: Matthias Koeppe

Author: Vincent Delecroix

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21012





---

archive/issue_comments_387076.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vdelecroix/21012\"",
    "created_at": "2016-07-13T14:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387076",
    "user": "https://github.com/videlec"
}
```

Changing branch from "" to "u/vdelecroix/21012"



---

archive/issue_comments_387077.json:
```json
{
    "body": "Changing commit from \"\" to \"22b6b22ee1d8be4571d415cfa92c5d66ca87259f\"",
    "created_at": "2016-07-13T14:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387077",
    "user": "https://github.com/videlec"
}
```

Changing commit from "" to "22b6b22ee1d8be4571d415cfa92c5d66ca87259f"



---

archive/issue_comments_387078.json:
```json
{
    "body": "Changing author from \"\" to \"Vincent Delecroix\"",
    "created_at": "2016-07-13T14:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387078",
    "user": "https://github.com/videlec"
}
```

Changing author from "" to "Vincent Delecroix"



---

archive/issue_comments_387079.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[22b6b22](https://github.com/sagemath/sagetrac-mirror/commit/22b6b22ee1d8be4571d415cfa92c5d66ca87259f)|`Trac 21012: nash -> lrsnash`|",
    "created_at": "2016-07-13T14:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387079",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[22b6b22](https://github.com/sagemath/sagetrac-mirror/commit/22b6b22ee1d8be4571d415cfa92c5d66ca87259f)|`Trac 21012: nash -> lrsnash`|



---

archive/issue_comments_387080.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-13T14:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387080",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_387081.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[9c77dec](https://github.com/sagemath/sagetrac-mirror/commit/9c77decc2034880af4ced72628379db394928f79)|`Trac 21012: fix two doctests`|",
    "created_at": "2016-07-13T14:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387081",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[9c77dec](https://github.com/sagemath/sagetrac-mirror/commit/9c77decc2034880af4ced72628379db394928f79)|`Trac 21012: fix two doctests`|



---

archive/issue_comments_387082.json:
```json
{
    "body": "Changing commit from \"22b6b22ee1d8be4571d415cfa92c5d66ca87259f\" to \"9c77decc2034880af4ced72628379db394928f79\"",
    "created_at": "2016-07-13T14:15:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387082",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "22b6b22ee1d8be4571d415cfa92c5d66ca87259f" to "9c77decc2034880af4ced72628379db394928f79"



---

archive/issue_comments_387083.json:
```json
{
    "body": "Changing commit from \"9c77decc2034880af4ced72628379db394928f79\" to \"c09907134044a860f427bc87f0f4a68ff929bd71\"",
    "created_at": "2016-07-13T14:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387083",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9c77decc2034880af4ced72628379db394928f79" to "c09907134044a860f427bc87f0f4a68ff929bd71"



---

archive/issue_comments_387084.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|\n|[c099071](https://github.com/sagemath/sagetrac-mirror/commit/c09907134044a860f427bc87f0f4a68ff929bd71)|`Trac 21012: fix doctests`|",
    "created_at": "2016-07-13T14:20:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------|
|[c099071](https://github.com/sagemath/sagetrac-mirror/commit/c09907134044a860f427bc87f0f4a68ff929bd71)|`Trac 21012: fix doctests`|



---

archive/issue_comments_387085.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -34,4 +34,4 @@\n sage -t --long --warn-long 62.7 game_theory/normal_form_game.py  # 19 doctests failed\n sage -t --long --warn-long 62.7 game_theory/parser.py  # 10 doctests failed\n ```\n-The reason is that the package `lrslib` provides the binary `lrsnash` but not `nash`. And the latter is used in called in `_solve_lrs` in the source code. Hence either the optional tag `# optional - lrslib` is wrong or `lrsnash` should be used.\n+The reason is that the package `lrslib`, with version 061, renamed the `nash` executable to `lrsnash`.\n``````\n",
    "created_at": "2016-07-15T10:21:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387085",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -34,4 +34,4 @@
 sage -t --long --warn-long 62.7 game_theory/normal_form_game.py  # 19 doctests failed
 sage -t --long --warn-long 62.7 game_theory/parser.py  # 10 doctests failed
 ```
-The reason is that the package `lrslib` provides the binary `lrsnash` but not `nash`. And the latter is used in called in `_solve_lrs` in the source code. Hence either the optional tag `# optional - lrslib` is wrong or `lrsnash` should be used.
+The reason is that the package `lrslib`, with version 061, renamed the `nash` executable to `lrsnash`.
``````




---

archive/issue_comments_387086.json:
```json
{
    "body": "<a id='comment:5'></a>\nThanks for catching this. I've updated the description.",
    "created_at": "2016-07-15T10:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387086",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>
Thanks for catching this. I've updated the description.



---

archive/issue_comments_387087.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-15T10:31:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387087",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_387088.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Matthias Koeppe\"",
    "created_at": "2016-07-15T10:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387088",
    "user": "https://github.com/mkoeppe"
}
```

Changing reviewer from "" to "Matthias Koeppe"



---

archive/issue_comments_387089.json:
```json
{
    "body": "<a id='comment:7'></a>\nSee also #20969",
    "created_at": "2016-07-16T12:15:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387089",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:7'></a>
See also #20969



---

archive/issue_comments_387090.json:
```json
{
    "body": "Changing branch from \"u/vdelecroix/21012\" to \"c09907134044a860f427bc87f0f4a68ff929bd71\"",
    "created_at": "2016-07-16T20:06:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387090",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vdelecroix/21012" to "c09907134044a860f427bc87f0f4a68ff929bd71"



---

archive/issue_events_063898.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-16T20:06:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21012#event-63898"
}
```



---

archive/issue_comments_387091.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-07-16T20:06:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21012",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21012#issuecomment-387091",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
