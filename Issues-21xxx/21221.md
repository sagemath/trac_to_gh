# Issue 21221: update fplll to version 5.x

archive/issues_020984.json:
```json
{
    "assignees": [],
    "body": "Once fplll 5.0.0 is out we should upgrade:\n\n- upgrade the SPKG\n- add fpylll\n- drop the current custom fplll interface\n\nSee https://groups.google.com/forum/#!topic/sage-devel/v_g81diO2pU for discussion\n\n**SPKGS**\n\n- fplll https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz\n- fpylll https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz\n\nDepends on #17635\n\nCC:  @sagetrac-tmonteil @jpflori @ClementPernet @jdemeyer\n\nBranch: **[`848f211`](https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03)**\n\nReviewer: **Jean-Pierre Flori, Thierry Monteil**\n\nAuthor: **Martin Albrecht**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21221_\n\n",
    "closed_at": "2016-10-03T22:41:49Z",
    "created_at": "2016-08-11T11:05:32Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "update fplll to version 5.x",
    "type": "issue",
    "updated_at": "2016-10-10T08:53:20Z",
    "url": "https://github.com/sagemath/sage/issues/21221",
    "user": "https://github.com/malb"
}
```
Once fplll 5.0.0 is out we should upgrade:

- upgrade the SPKG
- add fpylll
- drop the current custom fplll interface

See https://groups.google.com/forum/#!topic/sage-devel/v_g81diO2pU for discussion

**SPKGS**

- fplll https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz
- fpylll https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz

Depends on #17635

CC:  @sagetrac-tmonteil @jpflori @ClementPernet @jdemeyer

Branch: **[`848f211`](https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03)**

Reviewer: **Jean-Pierre Flori, Thierry Monteil**

Author: **Martin Albrecht**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/21221_





---

archive/issue_events_298347.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2016-08-11T11:05:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298347"
}
```



---

archive/issue_events_298348.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2016-08-11T11:05:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298348"
}
```



---

archive/issue_events_298349.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2016-08-11T11:05:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298349"
}
```



---

archive/issue_comments_309770.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d646b8b6e24f1b216b25e8e61ced8f9c7c622270\">d646b8b</a></td><td><code>fplll 5.0.1 & drop sage.libs.fplll</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e34070f93bde771dcf1993826d552a74e8fdd546\">e34070f</a></td><td><code>add fpylll</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b0a9f1d0b0870c6e855d2109264a8b7e90e1baf\">7b0a9f1</a></td><td><code>A.LLL() and A.BKZ() using fpylll</code></td></tr></table>\n",
    "created_at": "2016-08-26T18:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309770",
    "user": "https://github.com/malb"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d646b8b6e24f1b216b25e8e61ced8f9c7c622270">d646b8b</a></td><td><code>fplll 5.0.1 & drop sage.libs.fplll</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e34070f93bde771dcf1993826d552a74e8fdd546">e34070f</a></td><td><code>add fpylll</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b0a9f1d0b0870c6e855d2109264a8b7e90e1baf">7b0a9f1</a></td><td><code>A.LLL() and A.BKZ() using fpylll</code></td></tr></table>




---

archive/issue_comments_309771.json:
```json
{
    "body": "Author: **Martin Albrecht**",
    "created_at": "2016-08-26T18:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309771",
    "user": "https://github.com/malb"
}
```

Author: **Martin Albrecht**



---

archive/issue_comments_309772.json:
```json
{
    "body": "Commit: **[`7b0a9f1`](https://github.com/sagemath/sagetrac-mirror/commit/7b0a9f1d0b0870c6e855d2109264a8b7e90e1baf)**",
    "created_at": "2016-08-26T18:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309772",
    "user": "https://github.com/malb"
}
```

Commit: **[`7b0a9f1`](https://github.com/sagemath/sagetrac-mirror/commit/7b0a9f1d0b0870c6e855d2109264a8b7e90e1baf)**



---

archive/issue_comments_309773.json:
```json
{
    "body": "Branch: **[u/malb/t21221-fplll5](https://github.com/sagemath/sagetrac-mirror/tree/u/malb/t21221-fplll5)**",
    "created_at": "2016-08-26T18:01:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309773",
    "user": "https://github.com/malb"
}
```

Branch: **[u/malb/t21221-fplll5](https://github.com/sagemath/sagetrac-mirror/tree/u/malb/t21221-fplll5)**



---

archive/issue_comments_309774.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,3 +5,8 @@\n - drop the current custom fplll interface\n \n See https://groups.google.com/forum/#!topic/sage-devel/v_g81diO2pU for discussion\n+\n+*SPKGS*\n+\n+- fplll https://github.com/fplll/fplll/releases/download/5.0.1/fplll-5.0.1.tar.gz\n+- fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2dev.tar.gz\n``````\n",
    "created_at": "2016-08-26T18:02:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309774",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,3 +5,8 @@
 - drop the current custom fplll interface
 
 See https://groups.google.com/forum/#!topic/sage-devel/v_g81diO2pU for discussion
+
+*SPKGS*
+
+- fplll https://github.com/fplll/fplll/releases/download/5.0.1/fplll-5.0.1.tar.gz
+- fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2dev.tar.gz
``````




---

archive/issue_comments_309775.json:
```json
{
    "body": "Changed commit from **[`7b0a9f1`](https://github.com/sagemath/sagetrac-mirror/commit/7b0a9f1d0b0870c6e855d2109264a8b7e90e1baf)** to **[`d3df341`](https://github.com/sagemath/sagetrac-mirror/commit/d3df34187889563414c98d405681c51ca6cd1035)**",
    "created_at": "2016-08-27T10:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309775",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7b0a9f1`](https://github.com/sagemath/sagetrac-mirror/commit/7b0a9f1d0b0870c6e855d2109264a8b7e90e1baf)** to **[`d3df341`](https://github.com/sagemath/sagetrac-mirror/commit/d3df34187889563414c98d405681c51ca6cd1035)**



---

archive/issue_comments_309776.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/debb5a135dd98cc5dfe6e279466acec2b945e890\">debb5a1</a></td><td><code>fix doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3df34187889563414c98d405681c51ca6cd1035\">d3df341</a></td><td><code>formatting</code></td></tr></table>\n",
    "created_at": "2016-08-27T10:23:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309776",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/debb5a135dd98cc5dfe6e279466acec2b945e890">debb5a1</a></td><td><code>fix doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3df34187889563414c98d405681c51ca6cd1035">d3df341</a></td><td><code>formatting</code></td></tr></table>




---

archive/issue_comments_309777.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nEverything should be in place now. Waiting for https://github.com/fplll/fplll/pull/189 being merged to cut a new release. Then this ticket should be good to go.",
    "created_at": "2016-08-27T10:25:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309777",
    "user": "https://github.com/malb"
}
```

<div id="comment:6" align="right">comment:6</div>

Everything should be in place now. Waiting for https://github.com/fplll/fplll/pull/189 being merged to cut a new release. Then this ticket should be good to go.



---

archive/issue_comments_309778.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7bd03e0a1d843df29f1c71654a3bd1a39410921e\">7bd03e0</a></td><td><code>fplll 5.0.2</code></td></tr></table>\n",
    "created_at": "2016-09-01T11:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309778",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7bd03e0a1d843df29f1c71654a3bd1a39410921e">7bd03e0</a></td><td><code>fplll 5.0.2</code></td></tr></table>




---

archive/issue_comments_309779.json:
```json
{
    "body": "Changed commit from **[`d3df341`](https://github.com/sagemath/sagetrac-mirror/commit/d3df34187889563414c98d405681c51ca6cd1035)** to **[`7bd03e0`](https://github.com/sagemath/sagetrac-mirror/commit/7bd03e0a1d843df29f1c71654a3bd1a39410921e)**",
    "created_at": "2016-09-01T11:47:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309779",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d3df341`](https://github.com/sagemath/sagetrac-mirror/commit/d3df34187889563414c98d405681c51ca6cd1035)** to **[`7bd03e0`](https://github.com/sagemath/sagetrac-mirror/commit/7bd03e0a1d843df29f1c71654a3bd1a39410921e)**



---

archive/issue_comments_309780.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n \n See https://groups.google.com/forum/#!topic/sage-devel/v_g81diO2pU for discussion\n \n-*SPKGS*\n+**SPKGS**\n \n-- fplll https://github.com/fplll/fplll/releases/download/5.0.1/fplll-5.0.1.tar.gz\n+- fplll https://github.com/fplll/fplll/releases/download/5.0.2/fplll-5.0.2.tar.gz\n - fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2dev.tar.gz\n``````\n",
    "created_at": "2016-09-01T11:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309780",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
 
 See https://groups.google.com/forum/#!topic/sage-devel/v_g81diO2pU for discussion
 
-*SPKGS*
+**SPKGS**
 
-- fplll https://github.com/fplll/fplll/releases/download/5.0.1/fplll-5.0.1.tar.gz
+- fplll https://github.com/fplll/fplll/releases/download/5.0.2/fplll-5.0.2.tar.gz
 - fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2dev.tar.gz
``````




---

archive/issue_comments_309781.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nShould be good to go now.",
    "created_at": "2016-09-01T11:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309781",
    "user": "https://github.com/malb"
}
```

<div id="comment:8" align="right">comment:8</div>

Should be good to go now.



---

archive/issue_events_298350.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2016-09-01T11:48:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298350"
}
```



---

archive/issue_comments_309782.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nChanges look good to me.\nBut `fplll`fails to build on a linux/POWER7:\n\n```\n[fplll-5.0.2] In file included from bkz_param.cpp:4:0:\n[fplll-5.0.2] io/json.hpp: In constructor 'nlohmann::basic_json<ObjectType, Arra\nyType, StringType, BooleanType, NumberIntegerType, NumberUnsignedType, NumberFlo\natType, AllocatorType>::basic_json() [with ObjectType = std::map; ArrayType = st\nd::vector; StringType = std::basic_string<char>; BooleanType = bool; NumberInteg\nerType = long int; NumberUnsignedType = long unsigned int; NumberFloatType = dou\nble; AllocatorType = std::allocator]':\n[fplll-5.0.2] io/json.hpp:1062:5: error: conversion from 'nlohmann::basic_json<>\n::value_t' to non-scalar type 'nlohmann::basic_json<>::type_data_t' requested\n[fplll-5.0.2]      basic_json() = default;\n[fplll-5.0.2]      ^\n[fplll-5.0.2] bkz_param.cpp: In function 'std::vector<fplll::Strategy> fplll::lo\nad_strategies_json(const string&)':\n[fplll-5.0.2] bkz_param.cpp:79:8: note: synthesized method 'nlohmann::basic_json\n<ObjectType, ArrayType, StringType, BooleanType, NumberIntegerType, NumberUnsign\nedType, NumberFloatType, AllocatorType>::basic_json() [with ObjectType = std::ma\np; ArrayType = std::vector; StringType = std::basic_string<char>; BooleanType = \nbool; NumberIntegerType = long int; NumberUnsignedType = long unsigned int; Numb\nerFloatType = double; AllocatorType = std::allocator]' first required here\n[fplll-5.0.2]    json js;\n```",
    "created_at": "2016-09-01T12:35:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309782",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

Changes look good to me.
But `fplll`fails to build on a linux/POWER7:

```
[fplll-5.0.2] In file included from bkz_param.cpp:4:0:
[fplll-5.0.2] io/json.hpp: In constructor 'nlohmann::basic_json<ObjectType, Arra
yType, StringType, BooleanType, NumberIntegerType, NumberUnsignedType, NumberFlo
atType, AllocatorType>::basic_json() [with ObjectType = std::map; ArrayType = st
d::vector; StringType = std::basic_string<char>; BooleanType = bool; NumberInteg
erType = long int; NumberUnsignedType = long unsigned int; NumberFloatType = dou
ble; AllocatorType = std::allocator]':
[fplll-5.0.2] io/json.hpp:1062:5: error: conversion from 'nlohmann::basic_json<>
::value_t' to non-scalar type 'nlohmann::basic_json<>::type_data_t' requested
[fplll-5.0.2]      basic_json() = default;
[fplll-5.0.2]      ^
[fplll-5.0.2] bkz_param.cpp: In function 'std::vector<fplll::Strategy> fplll::lo
ad_strategies_json(const string&)':
[fplll-5.0.2] bkz_param.cpp:79:8: note: synthesized method 'nlohmann::basic_json
<ObjectType, ArrayType, StringType, BooleanType, NumberIntegerType, NumberUnsign
edType, NumberFloatType, AllocatorType>::basic_json() [with ObjectType = std::ma
p; ArrayType = std::vector; StringType = std::basic_string<char>; BooleanType = 
bool; NumberIntegerType = long int; NumberUnsignedType = long unsigned int; Numb
erFloatType = double; AllocatorType = std::allocator]' first required here
[fplll-5.0.2]    json js;
```



---

archive/issue_comments_309783.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nLooks like:\n* https://github.com/nlohmann/json/issues/259#issuecomment-223776640",
    "created_at": "2016-09-01T12:39:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309783",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

Looks like:
* https://github.com/nlohmann/json/issues/259#issuecomment-223776640



---

archive/issue_events_298351.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-01T12:41:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298351"
}
```



---

archive/issue_comments_309784.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI'm indeed using GCC 4.8, but as reported there it also make clang choke and a more recent version of json probably makes the problem disappear as the involved types have been suppressed/modified.",
    "created_at": "2016-09-01T12:41:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309784",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:11" align="right">comment:11</div>

I'm indeed using GCC 4.8, but as reported there it also make clang choke and a more recent version of json probably makes the problem disappear as the involved types have been suppressed/modified.



---

archive/issue_events_298352.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-01T12:41:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298352"
}
```



---

archive/issue_events_298353.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-01T12:41:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298353"
}
```



---

archive/issue_comments_309785.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThanks for tracking it down. Can you try with the new `json.hpp` from https://github.com/nlohmann/json/blob/develop/src/json.hpp so check if it fixes your problem? I'd then update on my end.\n\nJust dump `json.hpp` in `fplll/fplll/io`.",
    "created_at": "2016-09-01T13:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309785",
    "user": "https://github.com/malb"
}
```

<div id="comment:12" align="right">comment:12</div>

Thanks for tracking it down. Can you try with the new `json.hpp` from https://github.com/nlohmann/json/blob/develop/src/json.hpp so check if it fixes your problem? I'd then update on my end.

Just dump `json.hpp` in `fplll/fplll/io`.



---

archive/issue_comments_309786.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nWith the latest `json.hpp` it just errors out without trying saying that the compiler (GCC 4.8) is unsupported. Nice.",
    "created_at": "2016-09-01T17:09:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309786",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

With the latest `json.hpp` it just errors out without trying saying that the compiler (GCC 4.8) is unsupported. Nice.



---

archive/issue_comments_309787.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nFYI, forcing `json.hpp` to give GCC 4.8.3 a try, it compiles seemingly fine.",
    "created_at": "2016-09-01T20:13:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309787",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:14" align="right">comment:14</div>

FYI, forcing `json.hpp` to give GCC 4.8.3 a try, it compiles seemingly fine.



---

archive/issue_comments_309788.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHi, so to clarify: if we update `json.hpp` and drop its GCC 4.8 check then it seems to compile on your linux/POWER7 box?",
    "created_at": "2016-09-01T22:46:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309788",
    "user": "https://github.com/malb"
}
```

<div id="comment:15" align="right">comment:15</div>

Hi, so to clarify: if we update `json.hpp` and drop its GCC 4.8 check then it seems to compile on your linux/POWER7 box?



---

archive/issue_comments_309789.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nYes exactly.",
    "created_at": "2016-09-02T06:11:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309789",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:16" align="right">comment:16</div>

Yes exactly.



---

archive/issue_comments_309790.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nJust note it does not check for 4.8 but for >= 4.9.",
    "created_at": "2016-09-02T06:12:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309790",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:17" align="right">comment:17</div>

Just note it does not check for 4.8 but for >= 4.9.



---

archive/issue_comments_309791.json:
```json
{
    "body": "Changed commit from **[`7bd03e0`](https://github.com/sagemath/sagetrac-mirror/commit/7bd03e0a1d843df29f1c71654a3bd1a39410921e)** to **[`83a78f0`](https://github.com/sagemath/sagetrac-mirror/commit/83a78f0ea53991c5ada939e50a95b0530d4bc8d4)**",
    "created_at": "2016-09-05T12:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309791",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7bd03e0`](https://github.com/sagemath/sagetrac-mirror/commit/7bd03e0a1d843df29f1c71654a3bd1a39410921e)** to **[`83a78f0`](https://github.com/sagemath/sagetrac-mirror/commit/83a78f0ea53991c5ada939e50a95b0530d4bc8d4)**



---

archive/issue_comments_309792.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83a78f0ea53991c5ada939e50a95b0530d4bc8d4\">83a78f0</a></td><td><code>fpylll depends on sagelib</code></td></tr></table>\n",
    "created_at": "2016-09-05T12:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309792",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83a78f0ea53991c5ada939e50a95b0530d4bc8d4">83a78f0</a></td><td><code>fpylll depends on sagelib</code></td></tr></table>




---

archive/issue_comments_309793.json:
```json
{
    "body": "<div id=\"comment:19\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f986fe12472ccd88c79a7691cf2235fe4ca2bb0b\">f986fe1</a></td><td><code>update to new fplll/fpylll upstream releases</code></td></tr></table>\n",
    "created_at": "2016-09-08T08:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309793",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:19"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f986fe12472ccd88c79a7691cf2235fe4ca2bb0b">f986fe1</a></td><td><code>update to new fplll/fpylll upstream releases</code></td></tr></table>




---

archive/issue_comments_309794.json:
```json
{
    "body": "Changed commit from **[`83a78f0`](https://github.com/sagemath/sagetrac-mirror/commit/83a78f0ea53991c5ada939e50a95b0530d4bc8d4)** to **[`f986fe1`](https://github.com/sagemath/sagetrac-mirror/commit/f986fe12472ccd88c79a7691cf2235fe4ca2bb0b)**",
    "created_at": "2016-09-08T08:04:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309794",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`83a78f0`](https://github.com/sagemath/sagetrac-mirror/commit/83a78f0ea53991c5ada939e50a95b0530d4bc8d4)** to **[`f986fe1`](https://github.com/sagemath/sagetrac-mirror/commit/f986fe12472ccd88c79a7691cf2235fe4ca2bb0b)**



---

archive/issue_events_298354.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2016-09-08T08:05:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298354"
}
```



---

archive/issue_events_298355.json:
```json
{
    "actor": "https://github.com/malb",
    "created_at": "2016-09-08T08:05:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298355"
}
```



---

archive/issue_comments_309795.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,5 +8,5 @@\n \n **SPKGS**\n \n-- fplll https://github.com/fplll/fplll/releases/download/5.0.2/fplll-5.0.2.tar.gz\n-- fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2dev.tar.gz\n+- fplll https://github.com/fplll/fplll/releases/download/5.0.2/fplll-5.0.3rc0.tar.gz\n+- fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2.1dev.tar.gz\n``````\n",
    "created_at": "2016-09-08T08:05:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309795",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,5 +8,5 @@
 
 **SPKGS**
 
-- fplll https://github.com/fplll/fplll/releases/download/5.0.2/fplll-5.0.2.tar.gz
-- fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2dev.tar.gz
+- fplll https://github.com/fplll/fplll/releases/download/5.0.2/fplll-5.0.3rc0.tar.gz
+- fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2.1dev.tar.gz
``````




---

archive/issue_comments_309796.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nUpdated to new upstream versions, now supporting GCC 4.8. Thanks.",
    "created_at": "2016-09-08T08:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309796",
    "user": "https://github.com/malb"
}
```

<div id="comment:21" align="right">comment:21</div>

Updated to new upstream versions, now supporting GCC 4.8. Thanks.



---

archive/issue_comments_309797.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,5 +8,5 @@\n \n **SPKGS**\n \n-- fplll https://github.com/fplll/fplll/releases/download/5.0.2/fplll-5.0.3rc0.tar.gz\n-- fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2.1dev.tar.gz\n+- fplll https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz\n+- fpylll https://github.com/fplll/fpylll/releases/download/0.2.1dev/fpylll-0.2.1dev.tar.gz\n``````\n",
    "created_at": "2016-09-08T09:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309797",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,5 +8,5 @@
 
 **SPKGS**
 
-- fplll https://github.com/fplll/fplll/releases/download/5.0.2/fplll-5.0.3rc0.tar.gz
-- fpylll https://github.com/fplll/fpylll/releases/download/0.2dev/fpylll-0.2.1dev.tar.gz
+- fplll https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz
+- fpylll https://github.com/fplll/fpylll/releases/download/0.2.1dev/fpylll-0.2.1dev.tar.gz
``````




---

archive/issue_comments_309798.json:
```json
{
    "body": "Reviewer: **Jean-Pierre Flori**",
    "created_at": "2016-09-08T09:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309798",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **Jean-Pierre Flori**



---

archive/issue_comments_309799.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n(I fixed the links in the ticket description.)\n\nIt seems the new Linbox from #17635 (closed) fails to build on top of this:\n\n```\n[linbox-1.4.2]  #include <fplll/dpe.h>\n```",
    "created_at": "2016-09-08T09:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309799",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:22" align="right">comment:22</div>

(I fixed the links in the ticket description.)

It seems the new Linbox from #17635 (closed) fails to build on top of this:

```
[linbox-1.4.2]  #include <fplll/dpe.h>
```



---

archive/issue_comments_309800.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nCC'ing Cl\u00e9ment for the Linbox/FPLLL interaction.",
    "created_at": "2016-09-08T09:23:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309800",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:23" align="right">comment:23</div>

CC'ing Cl√©ment for the Linbox/FPLLL interaction.



---

archive/issue_comments_309801.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAt the moment we can just add a Linbox patch here to include from the `nr` subdir.",
    "created_at": "2016-09-08T09:31:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309801",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:24" align="right">comment:24</div>

At the moment we can just add a Linbox patch here to include from the `nr` subdir.



---

archive/issue_comments_309802.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nUnfortunately, that's not enough:\n\n```\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl: In function 'void LinBox::ll\nlReduceInBase(LinBox::BlasMatrix<_Field>&, LinBox::BlasMatrix<_Field>&, const Li\nnBox::latticeMethod::latticeFPLLL&)':\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:342:35: error: 'class fplll::\nZZ_mat<__mpz_struct [1]>' has no member named 'Set'\n[linbox-1.4.2]                                  B.Set((int)i,(int)j,x);\n[linbox-1.4.2]                                    ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:5: error: 'proved' is not\n a member of 'fplll'\n[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:21: error: expected prima\nry-expression before ',' token  \n[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:22: error: expected prima\nry-expression before 'double'   \n[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                       ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:22: error: expected ';' b\nefore 'double'\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:351:5: error: 'lllMethod' was not declared in this scope\n[linbox-1.4.2]      lllMethod.LLL();\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:5: error: 'wrapper' is not a member of 'fplll'\n...\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:351:5: error: 'lllMethod' was not declared in this scope\n[linbox-1.4.2]      lllMethod.LLL();\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:5: error: 'wrapper' is not a member of 'fplll'\n[linbox-1.4.2]      fplll::wrapper lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:20: error: expected ';' before 'lllMethod'\n[linbox-1.4.2]      fplll::wrapper lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                     ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:358:5: error: 'lllMethod' was not declared in this scope\n[linbox-1.4.2]      lllMethod.LLL();\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:5: error: 'heuristic' is not a member of 'fplll'\n[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:24: error: expected primary-expression before ',' token  \n[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                         ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:25: error: expected primary-expression before 'double'   \n[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                          ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:25: error: expected ';' before 'double'\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:366:5: error: 'lllMethod' was not declared in this scope\n[linbox-1.4.2]      lllMethod.LLL();\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:376:23: error: 'class fplll::ZZ_mat<__mpz_struct [1]>' has no member named 'Get'\n[linbox-1.4.2]      H.setEntry(i,j, B.Get(i,j) );\n```",
    "created_at": "2016-09-08T09:37:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309802",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:25" align="right">comment:25</div>

Unfortunately, that's not enough:

```
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl: In function 'void LinBox::ll
lReduceInBase(LinBox::BlasMatrix<_Field>&, LinBox::BlasMatrix<_Field>&, const Li
nBox::latticeMethod::latticeFPLLL&)':
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:342:35: error: 'class fplll::
ZZ_mat<__mpz_struct [1]>' has no member named 'Set'
[linbox-1.4.2]                                  B.Set((int)i,(int)j,x);
[linbox-1.4.2]                                    ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:5: error: 'proved' is not
 a member of 'fplll'
[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:21: error: expected prima
ry-expression before ',' token  
[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:22: error: expected prima
ry-expression before 'double'   
[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                       ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:22: error: expected ';' b
efore 'double'
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:351:5: error: 'lllMethod' was not declared in this scope
[linbox-1.4.2]      lllMethod.LLL();
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:5: error: 'wrapper' is not a member of 'fplll'
...
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:351:5: error: 'lllMethod' was not declared in this scope
[linbox-1.4.2]      lllMethod.LLL();
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:5: error: 'wrapper' is not a member of 'fplll'
[linbox-1.4.2]      fplll::wrapper lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:20: error: expected ';' before 'lllMethod'
[linbox-1.4.2]      fplll::wrapper lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                     ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:358:5: error: 'lllMethod' was not declared in this scope
[linbox-1.4.2]      lllMethod.LLL();
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:5: error: 'heuristic' is not a member of 'fplll'
[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:24: error: expected primary-expression before ',' token  
[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                         ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:25: error: expected primary-expression before 'double'   
[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                          ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:25: error: expected ';' before 'double'
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:366:5: error: 'lllMethod' was not declared in this scope
[linbox-1.4.2]      lllMethod.LLL();
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:376:23: error: 'class fplll::ZZ_mat<__mpz_struct [1]>' has no member named 'Get'
[linbox-1.4.2]      H.setEntry(i,j, B.Get(i,j) );
```



---

archive/issue_comments_309803.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIf fixing this really requires a lot of work in Linbox, we could just disable fplll in Linbox waiting for a Linbox fix... if that's an option.",
    "created_at": "2016-09-08T09:39:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309803",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:26" align="right">comment:26</div>

If fixing this really requires a lot of work in Linbox, we could just disable fplll in Linbox waiting for a Linbox fix... if that's an option.



---

archive/issue_comments_309804.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@jpflori](#comment:26):\n> we could just disable fplll in Linbox waiting for a Linbox fix... if that's an option.\n\nThis sounds like the most reasonable choice.\nI don't think any linbox dependency on fplll is actually exposed to sage at the moment. The hook was kept for the future.",
    "created_at": "2016-09-08T09:54:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309804",
    "user": "https://github.com/ClementPernet"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@jpflori](#comment:26):
> we could just disable fplll in Linbox waiting for a Linbox fix... if that's an option.

This sounds like the most reasonable choice.
I don't think any linbox dependency on fplll is actually exposed to sage at the moment. The hook was kept for the future.



---

archive/issue_comments_309805.json:
```json
{
    "body": "Changed commit from **[`f986fe1`](https://github.com/sagemath/sagetrac-mirror/commit/f986fe12472ccd88c79a7691cf2235fe4ca2bb0b)** to **[`cc8a95f`](https://github.com/sagemath/sagetrac-mirror/commit/cc8a95f7624eac7c17ac123aebb4ac64e4ef2ab2)**",
    "created_at": "2016-09-08T16:13:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309805",
    "user": "https://github.com/jpflori"
}
```

Changed commit from **[`f986fe1`](https://github.com/sagemath/sagetrac-mirror/commit/f986fe12472ccd88c79a7691cf2235fe4ca2bb0b)** to **[`cc8a95f`](https://github.com/sagemath/sagetrac-mirror/commit/cc8a95f7624eac7c17ac123aebb4ac64e4ef2ab2)**



---

archive/issue_events_298356.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-08T16:13:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298356"
}
```



---

archive/issue_events_298357.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-08T16:13:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298357"
}
```



---

archive/issue_comments_309806.json:
```json
{
    "body": "Changed branch from **[u/malb/t21221-fplll5](https://github.com/sagemath/sagetrac-mirror/tree/u/malb/t21221-fplll5)** to **[public/fplll5](https://github.com/sagemath/sagetrac-mirror/tree/public/fplll5)**",
    "created_at": "2016-09-08T16:13:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309806",
    "user": "https://github.com/jpflori"
}
```

Changed branch from **[u/malb/t21221-fplll5](https://github.com/sagemath/sagetrac-mirror/tree/u/malb/t21221-fplll5)** to **[public/fplll5](https://github.com/sagemath/sagetrac-mirror/tree/public/fplll5)**



---

archive/issue_comments_309807.json:
```json
{
    "body": "Dependencies: **#17635**",
    "created_at": "2016-09-08T16:13:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309807",
    "user": "https://github.com/jpflori"
}
```

Dependencies: **#17635**



---

archive/issue_comments_309808.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWith this strategy everything looks ok.\nLet the patchbots (or Volker?) do their testing jobs.\n\n---\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/98cc68c6c7af5d2788c832eec7c9182b69c52005\">98cc68c</a></td><td><code>Only try relevant extension for OS when loading libSingular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/399f051511572037fb4d2de79d44df09b34f08b0\">399f051</a></td><td><code>Add cddlib as a dependency and make gfanlib building explicit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c\">797c539</a></td><td><code>Improve the cleaning</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75e383ad8f14f28142deb33f7c14364e20517a88\">75e383a</a></td><td><code>use Singular.pc almost everywhere</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0f55ea2018b9fb3dc587cb20d90141063fc5852\">a0f55ea</a></td><td><code>Singular.pc is now used everywhere. plural.pyx doesn't need givaro or readline or m anymore.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55447da99460780f883b220cfd1a205aa3be3c90\">55447da</a></td><td><code>Do not build (a second time) libfactory when building Singular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5c10aeb455e0d1b348f1b564a64ead88ebe18f0\">e5c10ae</a></td><td><code>Cleaner removal of files.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29077a76c6db047aba433a150cc8074eee82ef58\">29077a7</a></td><td><code>Use wildcards for singular and letterplace in module_list.py.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f366df4ebb492ffda69255236380d6a05b67d7ec\">f366df4</a></td><td><code>Merge branch 'singular4' into fplll5</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cc8a95f7624eac7c17ac123aebb4ac64e4ef2ab2\">cc8a95f</a></td><td><code>Let Linbox build by disabling its fplll linking.</code></td></tr></table>\n",
    "created_at": "2016-09-08T16:13:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309808",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:28" align="right">comment:28</div>

With this strategy everything looks ok.
Let the patchbots (or Volker?) do their testing jobs.

---
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/98cc68c6c7af5d2788c832eec7c9182b69c52005">98cc68c</a></td><td><code>Only try relevant extension for OS when loading libSingular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/399f051511572037fb4d2de79d44df09b34f08b0">399f051</a></td><td><code>Add cddlib as a dependency and make gfanlib building explicit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/797c53949b2725028e41275c08cb909554fedf3c">797c539</a></td><td><code>Improve the cleaning</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75e383ad8f14f28142deb33f7c14364e20517a88">75e383a</a></td><td><code>use Singular.pc almost everywhere</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0f55ea2018b9fb3dc587cb20d90141063fc5852">a0f55ea</a></td><td><code>Singular.pc is now used everywhere. plural.pyx doesn't need givaro or readline or m anymore.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55447da99460780f883b220cfd1a205aa3be3c90">55447da</a></td><td><code>Do not build (a second time) libfactory when building Singular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5c10aeb455e0d1b348f1b564a64ead88ebe18f0">e5c10ae</a></td><td><code>Cleaner removal of files.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29077a76c6db047aba433a150cc8074eee82ef58">29077a7</a></td><td><code>Use wildcards for singular and letterplace in module_list.py.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f366df4ebb492ffda69255236380d6a05b67d7ec">f366df4</a></td><td><code>Merge branch 'singular4' into fplll5</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cc8a95f7624eac7c17ac123aebb4ac64e4ef2ab2">cc8a95f</a></td><td><code>Let Linbox build by disabling its fplll linking.</code></td></tr></table>




---

archive/issue_comments_309809.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nOops, it seems I pushed a wrong branch.\nI'll do a force push in a few seconds, sorry about that...",
    "created_at": "2016-09-08T16:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309809",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:29" align="right">comment:29</div>

Oops, it seems I pushed a wrong branch.
I'll do a force push in a few seconds, sorry about that...



---

archive/issue_events_298358.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-09-08T16:15:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298358"
}
```



---

archive/issue_events_298359.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-09-08T16:15:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298359"
}
```



---

archive/issue_comments_309810.json:
```json
{
    "body": "Changed commit from **[`cc8a95f`](https://github.com/sagemath/sagetrac-mirror/commit/cc8a95f7624eac7c17ac123aebb4ac64e4ef2ab2)** to **[`3f2d20c`](https://github.com/sagemath/sagetrac-mirror/commit/3f2d20c8c232770e63442b38e818e7b50133bd85)**",
    "created_at": "2016-09-08T16:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309810",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cc8a95f`](https://github.com/sagemath/sagetrac-mirror/commit/cc8a95f7624eac7c17ac123aebb4ac64e4ef2ab2)** to **[`3f2d20c`](https://github.com/sagemath/sagetrac-mirror/commit/3f2d20c8c232770e63442b38e818e7b50133bd85)**



---

archive/issue_comments_309811.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dc1fd84b1fcbf1f3a1491f546fa1d2126b62ac7\">2dc1fd8</a></td><td><code>Merge remote-tracking branch 'trac/develop' into fplll</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f2d20c8c232770e63442b38e818e7b50133bd85\">3f2d20c</a></td><td><code>Let Linbox build by disabling its fplll linking.</code></td></tr></table>\n",
    "created_at": "2016-09-08T16:15:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309811",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dc1fd84b1fcbf1f3a1491f546fa1d2126b62ac7">2dc1fd8</a></td><td><code>Merge remote-tracking branch 'trac/develop' into fplll</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f2d20c8c232770e63442b38e818e7b50133bd85">3f2d20c</a></td><td><code>Let Linbox build by disabling its fplll linking.</code></td></tr></table>




---

archive/issue_comments_309812.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nSorry for the mess, here's a clean branch where I only merged `trac/develop` and disabled fplll linking wihtin linbox.",
    "created_at": "2016-09-08T16:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309812",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:31" align="right">comment:31</div>

Sorry for the mess, here's a clean branch where I only merged `trac/develop` and disabled fplll linking wihtin linbox.



---

archive/issue_events_298360.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-08T16:16:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298360"
}
```



---

archive/issue_events_298361.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-08T16:16:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298361"
}
```



---

archive/issue_comments_309813.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI started the tests before the last changes of Jean-Pierre, but i got doctests failure on 32bit system, which i guess will still be here after applying the last two commits too.\n\n```\nsage -t --long --warn-long 124.3 src/sage/modules/free_module_integer.py\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 78, in sage.modules.free_module_integer.IntegerLattice\nFailed example:\n    IntegerLattice(A)\nExpected:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  1 -1  0 -3  0  0  1  2 -2]\n    [-1  2 -1 -1  2 -2  1 -1  0 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-2 -3 -2  0  0  1 -1  1  3 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\nGot:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 1 -2  1  1 -2  2 -1  1  0  1]\n    [ 0  2 -2  2 -1 -2  1  0 -1 -2]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-3 -2 -3  2  2 -1  0  0  0 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 95, in sage.modules.free_module_integer.IntegerLattice\nFailed example:\n    sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True, lattice=True)\nExpected:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  1 -1  0 -3  0  0  1  2 -2]\n    [-1  2 -1 -1  2 -2  1 -1  0 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-2 -3 -2  0  0  1 -1  1  3 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\nGot:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 1 -2  1  1 -2  2 -1  1  0  1]\n    [ 0  2 -2  2 -1 -2  1  0 -1 -2]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-3 -2 -3  2  2 -1  0  0  0 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 203, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer\nFailed example:\n    L = IntegerLattice(sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True)); L\nExpected:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  1 -1  0 -3  0  0  1  2 -2]\n    [-1  2 -1 -1  2 -2  1 -1  0 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-2 -3 -2  0  0  1 -1  1  3 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\nGot:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 1 -2  1  1 -2  2 -1  1  0  1]\n    [ 0  2 -2  2 -1 -2  1  0 -1 -2]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-3 -2 -3  2  2 -1  0  0  0 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 513, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ\nFailed example:\n    L.reduced_basis[0]\nExpected:\n    (-1, 0, 0, 0, 0, 0, 1, 0, -1, 0, 0, 0, 0, 0, -2, 0, 0, 0, 0, 0,\n     -1, 1, 0, 1, 1, 0, 0, 0, 3, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0)\nGot:\n    (1, 0, 0, 0, 0, -1, 1, 1, 0, 0, 1, -1, -1, -1, 0, 0, 0, 0, 0, -1, 0, 0, 1, 0, 0, 0, 0, 0, -1, 0, -1, 1, 1, -1, 1, 2, 0, 0, -1, -1)\n**********************************************************************\n```\n\nConcerning `src/sage/matrix/matrix_integer_dense.pyx` i have a `Timed out (and interrupt failed)` without further explanations, i will run the tests by hand one by one.\n\nI put it in \"need info\" not \"need work\" because i have to test the very last commit on a fresh install to confirm the issue, this might take some time since the VM is a bit slow.",
    "created_at": "2016-09-08T22:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309813",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:33" align="right">comment:33</div>

I started the tests before the last changes of Jean-Pierre, but i got doctests failure on 32bit system, which i guess will still be here after applying the last two commits too.

```
sage -t --long --warn-long 124.3 src/sage/modules/free_module_integer.py
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 78, in sage.modules.free_module_integer.IntegerLattice
Failed example:
    IntegerLattice(A)
Expected:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  1 -1  0 -3  0  0  1  2 -2]
    [-1  2 -1 -1  2 -2  1 -1  0 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-2 -3 -2  0  0  1 -1  1  3 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
Got:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 1 -2  1  1 -2  2 -1  1  0  1]
    [ 0  2 -2  2 -1 -2  1  0 -1 -2]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-3 -2 -3  2  2 -1  0  0  0 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 95, in sage.modules.free_module_integer.IntegerLattice
Failed example:
    sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True, lattice=True)
Expected:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  1 -1  0 -3  0  0  1  2 -2]
    [-1  2 -1 -1  2 -2  1 -1  0 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-2 -3 -2  0  0  1 -1  1  3 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
Got:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 1 -2  1  1 -2  2 -1  1  0  1]
    [ 0  2 -2  2 -1 -2  1  0 -1 -2]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-3 -2 -3  2  2 -1  0  0  0 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 203, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer
Failed example:
    L = IntegerLattice(sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True)); L
Expected:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  1 -1  0 -3  0  0  1  2 -2]
    [-1  2 -1 -1  2 -2  1 -1  0 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-2 -3 -2  0  0  1 -1  1  3 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
Got:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 1 -2  1  1 -2  2 -1  1  0  1]
    [ 0  2 -2  2 -1 -2  1  0 -1 -2]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-3 -2 -3  2  2 -1  0  0  0 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 513, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ
Failed example:
    L.reduced_basis[0]
Expected:
    (-1, 0, 0, 0, 0, 0, 1, 0, -1, 0, 0, 0, 0, 0, -2, 0, 0, 0, 0, 0,
     -1, 1, 0, 1, 1, 0, 0, 0, 3, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0)
Got:
    (1, 0, 0, 0, 0, -1, 1, 1, 0, 0, 1, -1, -1, -1, 0, 0, 0, 0, 0, -1, 0, 0, 1, 0, 0, 0, 0, 0, -1, 0, -1, 1, 1, -1, 1, 2, 0, 0, -1, -1)
**********************************************************************
```

Concerning `src/sage/matrix/matrix_integer_dense.pyx` i have a `Timed out (and interrupt failed)` without further explanations, i will run the tests by hand one by one.

I put it in "need info" not "need work" because i have to test the very last commit on a fresh install to confirm the issue, this might take some time since the VM is a bit slow.



---

archive/issue_events_298362.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2016-09-08T22:44:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298362"
}
```



---

archive/issue_events_298363.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2016-09-08T22:44:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298363"
}
```



---

archive/issue_comments_309814.json:
```json
{
    "body": "Changed reviewer from **Jean-Pierre Flori** to **Jean-Pierre Flori, Thierry Monteil**",
    "created_at": "2016-09-08T22:44:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309814",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

Changed reviewer from **Jean-Pierre Flori** to **Jean-Pierre Flori, Thierry Monteil**



---

archive/issue_comments_309815.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nLooks like you're getting a different LLL reduced basis. Mhh, no idea why 32 bit systems might be different, we might have to wait to see what the patchbots report.",
    "created_at": "2016-09-09T09:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309815",
    "user": "https://github.com/malb"
}
```

<div id="comment:34" align="right">comment:34</div>

Looks like you're getting a different LLL reduced basis. Mhh, no idea why 32 bit systems might be different, we might have to wait to see what the patchbots report.



---

archive/issue_comments_309816.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWill the patchbots do anything if this is not positive_review?",
    "created_at": "2016-09-09T11:35:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309816",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:35" align="right">comment:35</div>

Will the patchbots do anything if this is not positive_review?



---

archive/issue_comments_309817.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nOn my fresh retry, i got the same failures (but no problem for `src/sage/matrix/matrix_integer_dense.pyx` which were probably due to some optional pkgs).\n\nReplying to [@malb](#comment:34):\n> Looks like you're getting a different LLL reduced basis. Mhh, no idea\n> why 32 bit systems might be different, we might have to wait to see what\n> the patchbots report.\n\nI do not know either, especially since LLL is deterministic, so perhaps is there some non-constant-length variable in the floating-point part of the code ?\n\nUsually, the arch is sufficient to separate such behaviours (e.g. on my 64bit daily laptop, the tests are OK), and we can make specific tests for them.\n\nBut before settling down a `#32bit` doctest with those values, we should check that the bases are indeed LLL-reduced (it could be an explicit part of the test by the way).\n\nFor double checking, note that apart from my patchbot (actually a qemulated Pentium III), arando is the other running 32bit arch, which is run by Jeroen, so we could ask him to tell that patchbot to focus on that ticket.\n\nReplying to [@jpflori](#comment:35):\n> Will the patchbots do anything if this is not positive_review?\n\nYes, since the patchbots are more a tool to help reviewing than to help releasing (for which the buildbot helps). Actually, being in `needs_review` gives you more chance to get some patchbots looking at your code (so let me put the ticket to `needs_review`, just to motivate some of those): https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/patchbot.py#L420 Note that you can force the re-test with the `?kick` trick : https://patchbot.sagemath.org/ticket/21221/?kick (this is why there is `retry: True` now, i clicked on that link yesterday).",
    "created_at": "2016-09-09T12:12:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309817",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:36" align="right">comment:36</div>

On my fresh retry, i got the same failures (but no problem for `src/sage/matrix/matrix_integer_dense.pyx` which were probably due to some optional pkgs).

Replying to [@malb](#comment:34):
> Looks like you're getting a different LLL reduced basis. Mhh, no idea
> why 32 bit systems might be different, we might have to wait to see what
> the patchbots report.

I do not know either, especially since LLL is deterministic, so perhaps is there some non-constant-length variable in the floating-point part of the code ?

Usually, the arch is sufficient to separate such behaviours (e.g. on my 64bit daily laptop, the tests are OK), and we can make specific tests for them.

But before settling down a `#32bit` doctest with those values, we should check that the bases are indeed LLL-reduced (it could be an explicit part of the test by the way).

For double checking, note that apart from my patchbot (actually a qemulated Pentium III), arando is the other running 32bit arch, which is run by Jeroen, so we could ask him to tell that patchbot to focus on that ticket.

Replying to [@jpflori](#comment:35):
> Will the patchbots do anything if this is not positive_review?

Yes, since the patchbots are more a tool to help reviewing than to help releasing (for which the buildbot helps). Actually, being in `needs_review` gives you more chance to get some patchbots looking at your code (so let me put the ticket to `needs_review`, just to motivate some of those): https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/patchbot.py#L420 Note that you can force the re-test with the `?kick` trick : https://patchbot.sagemath.org/ticket/21221/?kick (this is why there is `retry: True` now, i clicked on that link yesterday).



---

archive/issue_events_298364.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2016-09-09T12:12:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298364"
}
```



---

archive/issue_events_298365.json:
```json
{
    "actor": "https://github.com/sagetrac-tmonteil",
    "created_at": "2016-09-09T12:12:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298365"
}
```



---

archive/issue_comments_309818.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nI can reproduce it in a 32-bit virtual machine:\n\n```python\nsage: from sage.modules.free_module_integer import IntegerLattice\nsage: A = sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True)\nsage: copy(A).LLL(algorithm=\"fpLLL:proved\", fp=\"rr\")[3]\n(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)\nsage: copy(A).LLL(algorithm=\"fpLLL:proved\", fp=\"fp\")[3]\n(0, 1, 0, -3, 0, 0, 0, 0, 3, -1)\n```\n\nOn a 64-bit system:\n\n```python\nsage: copy(A).LLL(algorithm=\"fpLLL:proved\", fp=\"fp\")[3]\n(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)\nsage: copy(A).LLL(algorithm=\"fpLLL:proved\", fp=\"rr\")[3]\n(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)\n```\n\nNote that the last outputs differ. In either case the output is LLL reduced (I'm not in favour of adding that test to the doctest though, since LLL-reducedness is not the main point there, thus it would be a bit distracting).\n\nA cheap workaround is to simply pick a different seed for the doctest.",
    "created_at": "2016-09-10T11:08:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309818",
    "user": "https://github.com/malb"
}
```

<div id="comment:37" align="right">comment:37</div>

I can reproduce it in a 32-bit virtual machine:

```python
sage: from sage.modules.free_module_integer import IntegerLattice
sage: A = sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True)
sage: copy(A).LLL(algorithm="fpLLL:proved", fp="rr")[3]
(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)
sage: copy(A).LLL(algorithm="fpLLL:proved", fp="fp")[3]
(0, 1, 0, -3, 0, 0, 0, 0, 3, -1)
```

On a 64-bit system:

```python
sage: copy(A).LLL(algorithm="fpLLL:proved", fp="fp")[3]
(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)
sage: copy(A).LLL(algorithm="fpLLL:proved", fp="rr")[3]
(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)
```

Note that the last outputs differ. In either case the output is LLL reduced (I'm not in favour of adding that test to the doctest though, since LLL-reducedness is not the main point there, thus it would be a bit distracting).

A cheap workaround is to simply pick a different seed for the doctest.



---

archive/issue_comments_309819.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c4fa878505265cd2a45a58f182b99e41d0530c64\">c4fa878</a></td><td><code>unify 32-bit and 64-bit doctest outputs</code></td></tr></table>\n",
    "created_at": "2016-09-10T11:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309819",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c4fa878505265cd2a45a58f182b99e41d0530c64">c4fa878</a></td><td><code>unify 32-bit and 64-bit doctest outputs</code></td></tr></table>




---

archive/issue_comments_309820.json:
```json
{
    "body": "Changed commit from **[`3f2d20c`](https://github.com/sagemath/sagetrac-mirror/commit/3f2d20c8c232770e63442b38e818e7b50133bd85)** to **[`c4fa878`](https://github.com/sagemath/sagetrac-mirror/commit/c4fa878505265cd2a45a58f182b99e41d0530c64)**",
    "created_at": "2016-09-10T11:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309820",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3f2d20c`](https://github.com/sagemath/sagetrac-mirror/commit/3f2d20c8c232770e63442b38e818e7b50133bd85)** to **[`c4fa878`](https://github.com/sagemath/sagetrac-mirror/commit/c4fa878505265cd2a45a58f182b99e41d0530c64)**



---

archive/issue_comments_309821.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nThis seems to have done the trick.",
    "created_at": "2016-09-10T11:20:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309821",
    "user": "https://github.com/malb"
}
```

<div id="comment:39" align="right">comment:39</div>

This seems to have done the trick.



---

archive/issue_comments_309822.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nMaybe we should still document that even with the same seed, the LLL reduction, although deterministic, might give different results on 32 and 64 platforms (different roundng for floats?) ?",
    "created_at": "2016-09-12T08:32:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309822",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:40" align="right">comment:40</div>

Maybe we should still document that even with the same seed, the LLL reduction, although deterministic, might give different results on 32 and 64 platforms (different roundng for floats?) ?



---

archive/issue_comments_309823.json:
```json
{
    "body": "Changed commit from **[`c4fa878`](https://github.com/sagemath/sagetrac-mirror/commit/c4fa878505265cd2a45a58f182b99e41d0530c64)** to **[`1a15357`](https://github.com/sagemath/sagetrac-mirror/commit/1a15357fb2e19e014bb313f514aad7528a4c89e3)**",
    "created_at": "2016-09-12T10:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309823",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c4fa878`](https://github.com/sagemath/sagetrac-mirror/commit/c4fa878505265cd2a45a58f182b99e41d0530c64)** to **[`1a15357`](https://github.com/sagemath/sagetrac-mirror/commit/1a15357fb2e19e014bb313f514aad7528a4c89e3)**



---

archive/issue_comments_309824.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a15357fb2e19e014bb313f514aad7528a4c89e3\">1a15357</a></td><td><code>add warning about different LLL answers</code></td></tr></table>\n",
    "created_at": "2016-09-12T10:35:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309824",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a15357fb2e19e014bb313f514aad7528a4c89e3">1a15357</a></td><td><code>add warning about different LLL answers</code></td></tr></table>




---

archive/issue_events_298366.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-12T11:48:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298366"
}
```



---

archive/issue_events_298367.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-09-12T11:48:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298367"
}
```



---

archive/issue_comments_309825.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nGood to go for me.",
    "created_at": "2016-09-12T11:48:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309825",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:42" align="right">comment:42</div>

Good to go for me.



---

archive/issue_comments_309826.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nWaiting for Volker's run report. But in sage-on-gentoo, I couldn't get the test suite for `fpylll` to run successfully when it was built using `sagelib`. I decided to hard disable it until I figure if it's broken on my side only or it is for everyone. Actually the `fpylll` tarball that is linked in this ticket doesn't include the test suite or does it?",
    "created_at": "2016-09-13T05:47:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309826",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:43" align="right">comment:43</div>

Waiting for Volker's run report. But in sage-on-gentoo, I couldn't get the test suite for `fpylll` to run successfully when it was built using `sagelib`. I decided to hard disable it until I figure if it's broken on my side only or it is for everyone. Actually the `fpylll` tarball that is linked in this ticket doesn't include the test suite or does it?



---

archive/issue_comments_309827.json:
```json
{
    "body": "Changed commit from **[`1a15357`](https://github.com/sagemath/sagetrac-mirror/commit/1a15357fb2e19e014bb313f514aad7528a4c89e3)** to **[`d194317`](https://github.com/sagemath/sagetrac-mirror/commit/d194317e800984cdda95a99d4b33d43c88496410)**",
    "created_at": "2016-09-13T16:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309827",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1a15357`](https://github.com/sagemath/sagetrac-mirror/commit/1a15357fb2e19e014bb313f514aad7528a4c89e3)** to **[`d194317`](https://github.com/sagemath/sagetrac-mirror/commit/d194317e800984cdda95a99d4b33d43c88496410)**



---

archive/issue_events_298368.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-09-13T16:09:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298368"
}
```



---

archive/issue_events_298369.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-09-13T16:09:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298369"
}
```



---

archive/issue_comments_309828.json:
```json
{
    "body": "<div id=\"comment:44\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d194317e800984cdda95a99d4b33d43c88496410\">d194317</a></td><td><code>fpylll 0.2.2dev</code></td></tr></table>\n",
    "created_at": "2016-09-13T16:09:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309828",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:44"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d194317e800984cdda95a99d4b33d43c88496410">d194317</a></td><td><code>fpylll 0.2.2dev</code></td></tr></table>




---

archive/issue_comments_309829.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,4 +9,4 @@\n **SPKGS**\n \n - fplll https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz\n-- fpylll https://github.com/fplll/fpylll/releases/download/0.2.1dev/fpylll-0.2.1dev.tar.gz\n+- fpylll https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz\n``````\n",
    "created_at": "2016-09-13T16:10:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309829",
    "user": "https://github.com/malb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,4 +9,4 @@
 **SPKGS**
 
 - fplll https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz
-- fpylll https://github.com/fplll/fpylll/releases/download/0.2.1dev/fpylll-0.2.1dev.tar.gz
+- fpylll https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz
``````




---

archive/issue_comments_309830.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nPushed fpylll 0.2.2dev which ships the testsuite and doesn't rely on environment variables.",
    "created_at": "2016-09-13T16:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309830",
    "user": "https://github.com/malb"
}
```

<div id="comment:46" align="right">comment:46</div>

Pushed fpylll 0.2.2dev which ships the testsuite and doesn't rely on environment variables.



---

archive/issue_comments_309831.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI am not sure that was fair to push that particular upgrade while Volker has already started to test stuff on the bot.\n\nAt least the change is minimal and `fpylll` doesn't currently have a `spkg-check` nor do we have `py.test` in the \"vanilla\" sage tree to run it. But I do, so I have concerns because it looks to me that `fpylll` has had its test suite run without sage with python 2.7 and 3.5 but it looks like its test suite when built against sage is sage testsuite itself. Just for fun \n\n```\n>>> Test phase: dev-python/fpylll-0.2.1\n * python2_7: running distutils-r1_run_phase python_test\n=============================================================================== test session starts ===============================================================================\nplatform linux2 -- Python 2.7.10, pytest-2.8.7, py-1.4.30, pluggy-0.3.1 -- /usr/bin/python2.7\ncachedir: .cache\nrootdir: /scratch2/portage/dev-python/fpylll-0.2.1/work/fpylll-0.2.1dev, inifile: \ncollecting ... collected 17 items / 1 errors\n\ntests/test_bkz_python.py::test_bkz_init FAILED\ntests/test_bkz_python.py::test_simple_bkz_call FAILED\ntests/test_bkz_python.py::test_bkz_call FAILED\ntests/test_gso.py::test_gso_init /scratch2/portage/dev-python/fpylll-0.2.1/temp/environment: line 2590:  5851 Segmentation fault      py.test -v\n * python3_4: running distutils-r1_run_phase python_test\n=============================================================================== test session starts ===============================================================================\nplatform linux -- Python 3.4.3, pytest-2.8.7, py-1.4.30, pluggy-0.3.1 -- /usr/bin/python3.4\ncachedir: .cache\nrootdir: /scratch2/portage/dev-python/fpylll-0.2.1/work/fpylll-0.2.1dev, inifile: \ncollecting ... collected 19 items\n\ntests/test_bkz.py::test_bkz_init PASSED\ntests/test_bkz.py::test_bkz_bkz PASSED\ntests/test_bkz_python.py::test_bkz_init PASSED\ntests/test_bkz_python.py::test_simple_bkz_call PASSED\ntests/test_bkz_python.py::test_bkz_call PASSED\ntests/test_gso.py::test_gso_init PASSED\ntests/test_gso.py::test_gso_d PASSED\ntests/test_gso.py::test_gso_int_gram_enabled PASSED\ntests/test_gso.py::test_gso_update_gso PASSED\ntests/test_lll.py::test_lll_init PASSED\ntests/test_lll.py::test_lll_lll PASSED\ntests/test_numpy.py::test_dump_mu PASSED\ntests/test_numpy.py::test_dump_r PASSED\ntests/test_precision.py::test_precision PASSED\ntests/test_pruner.py::test_pruner_gso PASSED\ntests/test_pruner.py::test_pruner_vec PASSED\ntests/test_random.py::test_randomize PASSED\ntests/test_simple_bkz.py::test_simple_bkz_init PASSED\ntests/test_simple_bkz.py::test_simple_bkz_reduction PASSED\n\n=========================================================================== 19 passed in 59.30 seconds ============================================================================\n```\npython3.4 results to show what happens when not built against sage.\n\n\nI am not sure how `SAGERUNTIME` is generated but `fpylll` needs to be in it. From the look of it, it is generated so it is probably OK.\n\n`fpylll` needs to be build against sagelib and sagelib needs `fpylll` to run. From my packaging point of view that means that\n* I will have to split the building of the documentation in its own package, again. Otherwise I have circular dependencies that cannot be satisfied\n* I can forget about ever achieving a state where I can take a package for sage and do build, test and install __in that order__. From now on there is no hope for testing sage before it is fully installed. Looking around it seems very common in python packages, it looks like testing before installing on the same machine is old school.",
    "created_at": "2016-09-13T21:57:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309831",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:47" align="right">comment:47</div>

I am not sure that was fair to push that particular upgrade while Volker has already started to test stuff on the bot.

At least the change is minimal and `fpylll` doesn't currently have a `spkg-check` nor do we have `py.test` in the "vanilla" sage tree to run it. But I do, so I have concerns because it looks to me that `fpylll` has had its test suite run without sage with python 2.7 and 3.5 but it looks like its test suite when built against sage is sage testsuite itself. Just for fun 

```
>>> Test phase: dev-python/fpylll-0.2.1
 * python2_7: running distutils-r1_run_phase python_test
=============================================================================== test session starts ===============================================================================
platform linux2 -- Python 2.7.10, pytest-2.8.7, py-1.4.30, pluggy-0.3.1 -- /usr/bin/python2.7
cachedir: .cache
rootdir: /scratch2/portage/dev-python/fpylll-0.2.1/work/fpylll-0.2.1dev, inifile: 
collecting ... collected 17 items / 1 errors

tests/test_bkz_python.py::test_bkz_init FAILED
tests/test_bkz_python.py::test_simple_bkz_call FAILED
tests/test_bkz_python.py::test_bkz_call FAILED
tests/test_gso.py::test_gso_init /scratch2/portage/dev-python/fpylll-0.2.1/temp/environment: line 2590:  5851 Segmentation fault      py.test -v
 * python3_4: running distutils-r1_run_phase python_test
=============================================================================== test session starts ===============================================================================
platform linux -- Python 3.4.3, pytest-2.8.7, py-1.4.30, pluggy-0.3.1 -- /usr/bin/python3.4
cachedir: .cache
rootdir: /scratch2/portage/dev-python/fpylll-0.2.1/work/fpylll-0.2.1dev, inifile: 
collecting ... collected 19 items

tests/test_bkz.py::test_bkz_init PASSED
tests/test_bkz.py::test_bkz_bkz PASSED
tests/test_bkz_python.py::test_bkz_init PASSED
tests/test_bkz_python.py::test_simple_bkz_call PASSED
tests/test_bkz_python.py::test_bkz_call PASSED
tests/test_gso.py::test_gso_init PASSED
tests/test_gso.py::test_gso_d PASSED
tests/test_gso.py::test_gso_int_gram_enabled PASSED
tests/test_gso.py::test_gso_update_gso PASSED
tests/test_lll.py::test_lll_init PASSED
tests/test_lll.py::test_lll_lll PASSED
tests/test_numpy.py::test_dump_mu PASSED
tests/test_numpy.py::test_dump_r PASSED
tests/test_precision.py::test_precision PASSED
tests/test_pruner.py::test_pruner_gso PASSED
tests/test_pruner.py::test_pruner_vec PASSED
tests/test_random.py::test_randomize PASSED
tests/test_simple_bkz.py::test_simple_bkz_init PASSED
tests/test_simple_bkz.py::test_simple_bkz_reduction PASSED

=========================================================================== 19 passed in 59.30 seconds ============================================================================
```
python3.4 results to show what happens when not built against sage.


I am not sure how `SAGERUNTIME` is generated but `fpylll` needs to be in it. From the look of it, it is generated so it is probably OK.

`fpylll` needs to be build against sagelib and sagelib needs `fpylll` to run. From my packaging point of view that means that
* I will have to split the building of the documentation in its own package, again. Otherwise I have circular dependencies that cannot be satisfied
* I can forget about ever achieving a state where I can take a package for sage and do build, test and install __in that order__. From now on there is no hope for testing sage before it is fully installed. Looking around it seems very common in python packages, it looks like testing before installing on the same machine is old school.



---

archive/issue_comments_309832.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@kiwifb](#comment:47):\n> * I will have to split the building of the documentation in its own package, again. Otherwise I have circular dependencies that cannot be satisfied\n\nOK I won't have to split for now. Documentation builds fine without `fpylll` installed. Should future documentation make plots that depends directly or indirectly from `fpylll` and the split will have to happen.",
    "created_at": "2016-09-14T02:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309832",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@kiwifb](#comment:47):
> * I will have to split the building of the documentation in its own package, again. Otherwise I have circular dependencies that cannot be satisfied

OK I won't have to split for now. Documentation builds fine without `fpylll` installed. Should future documentation make plots that depends directly or indirectly from `fpylll` and the split will have to happen.



---

archive/issue_comments_309833.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nI'm getting some failures on OSX:\n\n```\nsage -t --long src/sage/matrix/matrix_integer_dense.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix_integer_dense.pyx\", line 2726, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?\nFailed example:\n    A.BKZ()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[1]>\", line 1, in <module>\n        A.BKZ()\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/matrix/matrix_integer_dense.pyx\", line 2732, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?\nFailed example:\n    A.BKZ(use_givens=True)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[3]>\", line 1, in <module>\n        A.BKZ(use_givens=True)\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/matrix/matrix_integer_dense.pyx\", line 2738, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?\nFailed example:\n    A.BKZ(fp=\"fp\")\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[5]>\", line 1, in <module>\n        A.BKZ(fp=\"fp\")\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\n1 item had failures:\n   3 of  67 in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?\n    [573 tests, 3 failures, 21.83 s]\n```\nand\n\n```\nsage -t --long src/sage/modules/free_module_integer.py\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 216, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer\nFailed example:\n    L.shortest_vector()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer[2]>\", line 1, in <module>\n        L.shortest_vector()\n      File \"sage/misc/cachefunc.pyx\", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)\n        w = self._instance_call(*args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)\n        return self.f(self._instance, *args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 633, in shortest_vector\n        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))\n      File \"src/fpylll/fplll/svpcvp.pyx\", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)\n      File \"src/cysignals/signals.pyx\", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)\n    RuntimeError: Aborted\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 454, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ\nFailed example:\n    L.BKZ(block_size=10)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ[6]>\", line 1, in <module>\n        L.BKZ(block_size=Integer(10))\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 466, in BKZ\n        basis = [v for v in basis.BKZ(*args, **kwds) if v]\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 457, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ\nFailed example:\n    min(v.norm().n() for v in L.reduced_basis)\nExpected:\n    4.12310562561766\nGot:\n    5.19615242270663\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 510, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ\nFailed example:\n    L.HKZ()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ[2]>\", line 1, in <module>\n        L.HKZ()\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 516, in HKZ\n        return self.BKZ(block_size=self.rank())\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 466, in BKZ\n        basis = [v for v in basis.BKZ(*args, **kwds) if v]\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 513, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ\nFailed example:\n    L.reduced_basis[0]\nExpected:\n    (0, 0, -1, -1, 0, 0, -1, 1, 0, 0, -1, 1, 1, 0, 0, 1, 1, 1, -1, 0, 0, 1, -1, 0, 0, -1, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 1, 0, 0, -2)\nGot:\n    (-1, 0, 0, 2, 0, 0, 0, 0, -1, 1, 0, -1, 0, 1, 1, 0, 0, -2, 0, 1, 1, 1, 0, -1, 1, -1, -1, 0, -1, -1, -1, 1, -1, 0, 0, 0, 0, 0, 0, 0)\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 605, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector\nFailed example:\n    L.shortest_vector().norm().n()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector[4]>\", line 1, in <module>\n        L.shortest_vector().norm().n()\n      File \"sage/misc/cachefunc.pyx\", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)\n        w = self._instance_call(*args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)\n        return self.f(self._instance, *args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 633, in shortest_vector\n        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))\n      File \"src/fpylll/fplll/svpcvp.pyx\", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)\n      File \"src/cysignals/signals.pyx\", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)\n    RuntimeError: Aborted\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 660, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis\nFailed example:\n    v = L.shortest_vector(update_reduced_basis=False)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis[4]>\", line 1, in <module>\n        v = L.shortest_vector(update_reduced_basis=False)\n      File \"sage/misc/cachefunc.pyx\", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)\n        w = self._instance_call(*args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)\n        return self.f(self._instance, *args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 633, in shortest_vector\n        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))\n      File \"src/fpylll/fplll/svpcvp.pyx\", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)\n      File \"src/cysignals/signals.pyx\", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)\n    RuntimeError: Aborted\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 661, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis\nFailed example:\n    L.update_reduced_basis(v)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis[5]>\", line 1, in <module>\n        L.update_reduced_basis(v)\n    NameError: name 'v' is not defined\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 662, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis\nFailed example:\n    bool(L.reduced_basis[0].norm() < B[0].norm())\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n5 items had failures:\n   1 of   4 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer\n   2 of   9 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ\n   2 of   5 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ\n   1 of  11 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector\n   3 of   8 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis\n    [97 tests, 9 failures, 63.26 s]\n```",
    "created_at": "2016-09-14T16:40:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309833",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:49" align="right">comment:49</div>

I'm getting some failures on OSX:

```
sage -t --long src/sage/matrix/matrix_integer_dense.pyx
**********************************************************************
File "src/sage/matrix/matrix_integer_dense.pyx", line 2726, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?
Failed example:
    A.BKZ()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[1]>", line 1, in <module>
        A.BKZ()
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/matrix/matrix_integer_dense.pyx", line 2732, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?
Failed example:
    A.BKZ(use_givens=True)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[3]>", line 1, in <module>
        A.BKZ(use_givens=True)
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/matrix/matrix_integer_dense.pyx", line 2738, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?
Failed example:
    A.BKZ(fp="fp")
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[5]>", line 1, in <module>
        A.BKZ(fp="fp")
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
1 item had failures:
   3 of  67 in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?
    [573 tests, 3 failures, 21.83 s]
```
and

```
sage -t --long src/sage/modules/free_module_integer.py
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 216, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer
Failed example:
    L.shortest_vector()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer[2]>", line 1, in <module>
        L.shortest_vector()
      File "sage/misc/cachefunc.pyx", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)
        w = self._instance_call(*args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)
        return self.f(self._instance, *args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 633, in shortest_vector
        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))
      File "src/fpylll/fplll/svpcvp.pyx", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)
      File "src/cysignals/signals.pyx", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)
    RuntimeError: Aborted
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 454, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ
Failed example:
    L.BKZ(block_size=10)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ[6]>", line 1, in <module>
        L.BKZ(block_size=Integer(10))
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 466, in BKZ
        basis = [v for v in basis.BKZ(*args, **kwds) if v]
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 457, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ
Failed example:
    min(v.norm().n() for v in L.reduced_basis)
Expected:
    4.12310562561766
Got:
    5.19615242270663
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 510, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ
Failed example:
    L.HKZ()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ[2]>", line 1, in <module>
        L.HKZ()
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 516, in HKZ
        return self.BKZ(block_size=self.rank())
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 466, in BKZ
        basis = [v for v in basis.BKZ(*args, **kwds) if v]
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 513, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ
Failed example:
    L.reduced_basis[0]
Expected:
    (0, 0, -1, -1, 0, 0, -1, 1, 0, 0, -1, 1, 1, 0, 0, 1, 1, 1, -1, 0, 0, 1, -1, 0, 0, -1, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 1, 0, 0, -2)
Got:
    (-1, 0, 0, 2, 0, 0, 0, 0, -1, 1, 0, -1, 0, 1, 1, 0, 0, -2, 0, 1, 1, 1, 0, -1, 1, -1, -1, 0, -1, -1, -1, 1, -1, 0, 0, 0, 0, 0, 0, 0)
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 605, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector
Failed example:
    L.shortest_vector().norm().n()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector[4]>", line 1, in <module>
        L.shortest_vector().norm().n()
      File "sage/misc/cachefunc.pyx", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)
        w = self._instance_call(*args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)
        return self.f(self._instance, *args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 633, in shortest_vector
        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))
      File "src/fpylll/fplll/svpcvp.pyx", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)
      File "src/cysignals/signals.pyx", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)
    RuntimeError: Aborted
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 660, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis
Failed example:
    v = L.shortest_vector(update_reduced_basis=False)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis[4]>", line 1, in <module>
        v = L.shortest_vector(update_reduced_basis=False)
      File "sage/misc/cachefunc.pyx", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)
        w = self._instance_call(*args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)
        return self.f(self._instance, *args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 633, in shortest_vector
        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))
      File "src/fpylll/fplll/svpcvp.pyx", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)
      File "src/cysignals/signals.pyx", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)
    RuntimeError: Aborted
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 661, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis
Failed example:
    L.update_reduced_basis(v)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis[5]>", line 1, in <module>
        L.update_reduced_basis(v)
    NameError: name 'v' is not defined
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 662, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis
Failed example:
    bool(L.reduced_basis[0].norm() < B[0].norm())
Expected:
    True
Got:
    False
**********************************************************************
5 items had failures:
   1 of   4 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer
   2 of   9 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ
   2 of   5 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ
   1 of  11 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector
   3 of   8 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis
    [97 tests, 9 failures, 63.26 s]
```



---

archive/issue_events_298370.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-14T16:40:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298370"
}
```



---

archive/issue_events_298371.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-14T16:40:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298371"
}
```



---

archive/issue_comments_309834.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@kiwifb](#comment:47):\n> I am not sure that was fair to push that particular upgrade while Volker has already started to test stuff on the bot.\n\nSorry, I didn't mean to create more work, rather less.",
    "created_at": "2016-09-15T08:02:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309834",
    "user": "https://github.com/malb"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@kiwifb](#comment:47):
> I am not sure that was fair to push that particular upgrade while Volker has already started to test stuff on the bot.

Sorry, I didn't mean to create more work, rather less.



---

archive/issue_comments_309835.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nMhh, wo we still have SSH access to an OS X box. It's hard to tell from here what may have caused it. I'll also ask on our fplll-devel mailinglist if people have OSX boxes.",
    "created_at": "2016-09-15T08:03:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309835",
    "user": "https://github.com/malb"
}
```

<div id="comment:51" align="right">comment:51</div>

Mhh, wo we still have SSH access to an OS X box. It's hard to tell from here what may have caused it. I'll also ask on our fplll-devel mailinglist if people have OSX boxes.



---

archive/issue_comments_309836.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nLooking at the failures, they look like the kind of failures I used to get. Was there maybe a mixup somewhere and an old branch was tested?",
    "created_at": "2016-09-15T15:17:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309836",
    "user": "https://github.com/malb"
}
```

<div id="comment:52" align="right">comment:52</div>

Looking at the failures, they look like the kind of failures I used to get. Was there maybe a mixup somewhere and an old branch was tested?



---

archive/issue_comments_309837.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nI may try a build now that I finished my clang exploration.",
    "created_at": "2016-09-15T21:54:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309837",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:53" align="right">comment:53</div>

I may try a build now that I finished my clang exploration.



---

archive/issue_comments_309838.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nHi there, @kiwifb did you end up building this? @vbraun, anything I should do to trigger a re-test?",
    "created_at": "2016-09-20T14:49:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309838",
    "user": "https://github.com/malb"
}
```

<div id="comment:54" align="right">comment:54</div>

Hi there, @kiwifb did you end up building this? @vbraun, anything I should do to trigger a re-test?



---

archive/issue_comments_309839.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nReplying to [@malb](#comment:54):\n> Hi there, @kiwifb did you end up building this? @vbraun, anything I should do to trigger a re-test?\n\nI did a try twice. Each time I ended up with a mountain of doctests failing for some apparently unrelated reason. I decided to try again from a pristine tree but I haven't got time to do another attempt yet.",
    "created_at": "2016-09-20T21:08:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309839",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:55" align="right">comment:55</div>

Replying to [@malb](#comment:54):
> Hi there, @kiwifb did you end up building this? @vbraun, anything I should do to trigger a re-test?

I did a try twice. Each time I ended up with a mountain of doctests failing for some apparently unrelated reason. I decided to try again from a pristine tree but I haven't got time to do another attempt yet.



---

archive/issue_events_298372.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-20T21:56:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298372"
}
```



---

archive/issue_events_298373.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-20T21:56:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298373"
}
```



---

archive/issue_comments_309840.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nI can try again ...",
    "created_at": "2016-09-20T21:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309840",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:56" align="right">comment:56</div>

I can try again ...



---

archive/issue_comments_309841.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nIts definitely still happening on OSX...",
    "created_at": "2016-09-21T06:51:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309841",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:57" align="right">comment:57</div>

Its definitely still happening on OSX...



---

archive/issue_events_298374.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-21T06:51:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298374"
}
```



---

archive/issue_events_298375.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-21T06:51:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298375"
}
```



---

archive/issue_comments_309842.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nThanks & sorry for the noise. I'll dig up an OS X box and debug there.",
    "created_at": "2016-09-21T08:13:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309842",
    "user": "https://github.com/malb"
}
```

<div id="comment:58" align="right">comment:58</div>

Thanks & sorry for the noise. I'll dig up an OS X box and debug there.



---

archive/issue_comments_309843.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nThis is strange: I built & tested on an OS X box now and all tests passed. Using\n- branch: public/fplll5\n- fplll: https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz\n- fpylll: https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz\n\nNot sure what to do about this now. Any suggestions?",
    "created_at": "2016-09-23T08:13:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309843",
    "user": "https://github.com/malb"
}
```

<div id="comment:59" align="right">comment:59</div>

This is strange: I built & tested on an OS X box now and all tests passed. Using
- branch: public/fplll5
- fplll: https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz
- fpylll: https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz

Not sure what to do about this now. Any suggestions?



---

archive/issue_comments_309844.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nApart from getting access to the problematic machine, no...",
    "created_at": "2016-09-23T08:18:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309844",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:60" align="right">comment:60</div>

Apart from getting access to the problematic machine, no...



---

archive/issue_comments_309845.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nOn a second OSX box I'm now seeing:\n\n```\nImportError: dlopen(/Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so, 2): Symbol not found: __ZN5fplll14EnumerationDynINS_5FP_NRIA1_10dpe_structEEE16process_solutionEd\n\nReferenced from: /Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so\n\nExpected in: flat namespace\n in /Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so\n```\n\nAny OSX experts out there who can make sense of this? More details at https://github.com/fplll/fplll/issues/205",
    "created_at": "2016-09-25T15:46:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309845",
    "user": "https://github.com/malb"
}
```

<div id="comment:61" align="right">comment:61</div>

On a second OSX box I'm now seeing:

```
ImportError: dlopen(/Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so, 2): Symbol not found: __ZN5fplll14EnumerationDynINS_5FP_NRIA1_10dpe_structEEE16process_solutionEd

Referenced from: /Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so

Expected in: flat namespace
 in /Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so
```

Any OSX experts out there who can make sense of this? More details at https://github.com/fplll/fplll/issues/205



---

archive/issue_comments_309846.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nIt seems this is caused by some bad interaction with brew. Starting from a system without homebrew and installing everything in Sage instead, I don't run into this problem. Running doctests now.",
    "created_at": "2016-09-26T08:47:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309846",
    "user": "https://github.com/malb"
}
```

<div id="comment:62" align="right">comment:62</div>

It seems this is caused by some bad interaction with brew. Starting from a system without homebrew and installing everything in Sage instead, I don't run into this problem. Running doctests now.



---

archive/issue_comments_309847.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nDoctests pass, so I still cannot reproduce the buildbot failues.",
    "created_at": "2016-09-26T12:09:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309847",
    "user": "https://github.com/malb"
}
```

<div id="comment:63" align="right">comment:63</div>

Doctests pass, so I still cannot reproduce the buildbot failues.



---

archive/issue_comments_309848.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nI'm currently building on the build bot and will try to reproduce.",
    "created_at": "2016-09-27T09:04:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309848",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:64" align="right">comment:64</div>

I'm currently building on the build bot and will try to reproduce.



---

archive/issue_comments_309849.json:
```json
{
    "body": "<div id=\"comment:65\" align=\"right\">comment:65</div>\n\nSo on the OS X buildbot, the current branch is ok as far as the two files mentioned by Volker are cocnerned.\nI'll now merge with develop to see what changes.",
    "created_at": "2016-09-27T14:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309849",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:65" align="right">comment:65</div>

So on the OS X buildbot, the current branch is ok as far as the two files mentioned by Volker are cocnerned.
I'll now merge with develop to see what changes.



---

archive/issue_comments_309850.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nHum, just merging trac/develop and issuing make, the tests still pass...\nNow trying to make distclean and make.",
    "created_at": "2016-09-28T10:13:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309850",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:66" align="right">comment:66</div>

Hum, just merging trac/develop and issuing make, the tests still pass...
Now trying to make distclean and make.



---

archive/issue_comments_309851.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nOk I can now reproduce it.\nMaybe openblas related?",
    "created_at": "2016-09-28T12:24:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309851",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:67" align="right">comment:67</div>

Ok I can now reproduce it.
Maybe openblas related?



---

archive/issue_comments_309852.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nTo reproduce, I'd merge trac/develop, `make distclean` and `make`? I'll give that a try.",
    "created_at": "2016-09-28T12:34:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309852",
    "user": "https://github.com/malb"
}
```

<div id="comment:68" align="right">comment:68</div>

To reproduce, I'd merge trac/develop, `make distclean` and `make`? I'll give that a try.



---

archive/issue_comments_309853.json:
```json
{
    "body": "<div id=\"comment:69\" align=\"right\">comment:69</div>\n\nfplll doesn't use any blas, btw, so that shouldn't be it.",
    "created_at": "2016-09-28T12:35:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309853",
    "user": "https://github.com/malb"
}
```

<div id="comment:69" align="right">comment:69</div>

fplll doesn't use any blas, btw, so that shouldn't be it.



---

archive/issue_comments_309854.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\nYes indeed, but I was looking for an easy culprit.\nAnd it has nothing to do with the problem here.\nDoing `make distclean; configure --with-blas=atlas; make` leads to the same errors.",
    "created_at": "2016-09-28T15:13:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309854",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:70" align="right">comment:70</div>

Yes indeed, but I was looking for an easy culprit.
And it has nothing to do with the problem here.
Doing `make distclean; configure --with-blas=atlas; make` leads to the same errors.



---

archive/issue_comments_309855.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nWait, I don't see the same errors as Volker, at least with the latest build.\nIt seems `fpylll` got built before `sagelib` and the interface to sage ismissing.\nStrange.",
    "created_at": "2016-09-28T15:15:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309855",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:71" align="right">comment:71</div>

Wait, I don't see the same errors as Volker, at least with the latest build.
It seems `fpylll` got built before `sagelib` and the interface to sage ismissing.
Strange.



---

archive/issue_comments_309856.json:
```json
{
    "body": "<div id=\"comment:72\" align=\"right\">comment:72</div>\n\n(And I'm using the correct branch where `sagelib` is in the `dependencies` file for `fpylll`.)",
    "created_at": "2016-09-28T15:18:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309856",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:72" align="right">comment:72</div>

(And I'm using the correct branch where `sagelib` is in the `dependencies` file for `fpylll`.)



---

archive/issue_comments_309857.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nForcing the recompilation of `fpylll` solved my issues... no more errors...",
    "created_at": "2016-09-28T15:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309857",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:73" align="right">comment:73</div>

Forcing the recompilation of `fpylll` solved my issues... no more errors...



---

archive/issue_comments_309858.json:
```json
{
    "body": "<div id=\"comment:74\" align=\"right\">comment:74</div>\n\nMhhh, `sagelib` is not the right thing to put as a `dependency`?",
    "created_at": "2016-09-29T07:33:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309858",
    "user": "https://github.com/malb"
}
```

<div id="comment:74" align="right">comment:74</div>

Mhhh, `sagelib` is not the right thing to put as a `dependency`?



---

archive/issue_comments_309859.json:
```json
{
    "body": "<div id=\"comment:75\" align=\"right\">comment:75</div>\n\nIt seems you're right.\nPutting `sagelib` in `dependencies` turns into `inst_sagelib` in `build/make/Makefile` and this target does not exist.\nThe creation process of that Makefile should be modified.\nOr the field in the dependency file...",
    "created_at": "2016-09-29T07:47:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309859",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:75" align="right">comment:75</div>

It seems you're right.
Putting `sagelib` in `dependencies` turns into `inst_sagelib` in `build/make/Makefile` and this target does not exist.
The creation process of that Makefile should be modified.
Or the field in the dependency file...



---

archive/issue_comments_309860.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nOr put `| $(SAGERUNTIME)` in `dependencies`.",
    "created_at": "2016-09-29T08:00:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309860",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:76" align="right">comment:76</div>

Or put `| $(SAGERUNTIME)` in `dependencies`.



---

archive/issue_comments_309861.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nThe conway_polynomials package depends on sage runtime if you want an example.",
    "created_at": "2016-09-29T08:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309861",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:77" align="right">comment:77</div>

The conway_polynomials package depends on sage runtime if you want an example.



---

archive/issue_comments_309862.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nAnd maybe don't put it as an order only dependency in case fpylll must be recompiled if anything in the integer matrix class changes.",
    "created_at": "2016-09-29T08:53:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309862",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:78" align="right">comment:78</div>

And maybe don't put it as an order only dependency in case fpylll must be recompiled if anything in the integer matrix class changes.



---

archive/issue_comments_309863.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nBut `SAGERUNTIME` is a phony target so it surely does not matter.",
    "created_at": "2016-09-29T09:42:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309863",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:79" align="right">comment:79</div>

But `SAGERUNTIME` is a phony target so it surely does not matter.



---

archive/issue_comments_309864.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nWith a properly built Sage I get no segfault.\nSo maybe Volker setup ended up in broken state.",
    "created_at": "2016-09-29T10:45:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309864",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:80" align="right">comment:80</div>

With a properly built Sage I get no segfault.
So maybe Volker setup ended up in broken state.



---

archive/issue_comments_309865.json:
```json
{
    "body": "<div id=\"comment:81\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03\">848f211</a></td><td><code>add dependency on SAGERUNTIME</code></td></tr></table>\n",
    "created_at": "2016-09-29T17:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309865",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:81"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03">848f211</a></td><td><code>add dependency on SAGERUNTIME</code></td></tr></table>




---

archive/issue_comments_309866.json:
```json
{
    "body": "Changed commit from **[`d194317`](https://github.com/sagemath/sagetrac-mirror/commit/d194317e800984cdda95a99d4b33d43c88496410)** to **[`848f211`](https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03)**",
    "created_at": "2016-09-29T17:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309866",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d194317`](https://github.com/sagemath/sagetrac-mirror/commit/d194317e800984cdda95a99d4b33d43c88496410)** to **[`848f211`](https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03)**



---

archive/issue_events_298376.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-29T17:15:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298376"
}
```



---

archive/issue_events_298377.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-29T17:15:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298377"
}
```



---

archive/issue_comments_309867.json:
```json
{
    "body": "Changed branch from **[public/fplll5](https://github.com/sagemath/sagetrac-mirror/tree/public/fplll5)** to **[`848f211`](https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03)**",
    "created_at": "2016-10-03T22:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309867",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/fplll5](https://github.com/sagemath/sagetrac-mirror/tree/public/fplll5)** to **[`848f211`](https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03)**



---

archive/issue_events_298378.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-03T22:41:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298378"
}
```



---

archive/issue_events_298379.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1a20fd99e641b58c3c727f34cfaeb909abd83793",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-10-03T22:41:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21221#event-298379"
}
```



---

archive/issue_comments_309868.json:
```json
{
    "body": "Changed commit from **[`848f211`](https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03)** to none",
    "created_at": "2016-10-10T08:53:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309868",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`848f211`](https://github.com/sagemath/sagetrac-mirror/commit/848f2119c022070058e9fbae813d8fbd0a0a4c03)** to none



---

archive/issue_comments_309869.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nBreakage: #21675",
    "created_at": "2016-10-10T08:53:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21221#issuecomment-309869",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:84" align="right">comment:84</div>

Breakage: #21675
