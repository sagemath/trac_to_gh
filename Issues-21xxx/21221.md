# Issue 21221: update fplll to version 5.x

archive/issues_020984.json:
```json
{
    "body": "CC:  tmonteil jpflori @ClementPernet @jdemeyer\n\nOnce fplll 5.0.0 is out we should upgrade:\n\n- upgrade the SPKG\n- add fpylll\n- drop the current custom fplll interface\n\nSee https://groups.google.com/forum/#!topic/sage-devel/v_g81diO2pU for discussion\n\n**SPKGS**\n\n- fplll https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz\n- fpylll https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz\n\nIssue created by migration from https://trac.sagemath.org/ticket/21221\n\n",
    "closed_at": "2016-10-03T22:41:49Z",
    "created_at": "2016-08-11T11:05:32Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "update fplll to version 5.x",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21221",
    "user": "https://github.com/malb"
}
```
CC:  tmonteil jpflori @ClementPernet @jdemeyer

Once fplll 5.0.0 is out we should upgrade:

- upgrade the SPKG
- add fpylll
- drop the current custom fplll interface

See https://groups.google.com/forum/#!topic/sage-devel/v_g81diO2pU for discussion

**SPKGS**

- fplll https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz
- fpylll https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz

Issue created by migration from https://trac.sagemath.org/ticket/21221





---

archive/issue_comments_290055.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-08-26T18:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290055",
    "user": "https://github.com/malb"
}
```

New commits:



---

archive/issue_comments_290056.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-27T10:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290056",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290057.json:
```json
{
    "body": "Everything should be in place now. Waiting for https://github.com/fplll/fplll/pull/189 being merged to cut a new release. Then this ticket should be good to go.",
    "created_at": "2016-08-27T10:25:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290057",
    "user": "https://github.com/malb"
}
```

Everything should be in place now. Waiting for https://github.com/fplll/fplll/pull/189 being merged to cut a new release. Then this ticket should be good to go.



---

archive/issue_comments_290058.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-01T11:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290058",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290059.json:
```json
{
    "body": "Should be good to go now.",
    "created_at": "2016-09-01T11:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290059",
    "user": "https://github.com/malb"
}
```

Should be good to go now.



---

archive/issue_comments_290060.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-09-01T11:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290060",
    "user": "https://github.com/malb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_290061.json:
```json
{
    "body": "Changes look good to me.\nBut `fplll`fails to build on a linux/POWER7:\n\n```\n[fplll-5.0.2] In file included from bkz_param.cpp:4:0:\n[fplll-5.0.2] io/json.hpp: In constructor 'nlohmann::basic_json<ObjectType, Arra\nyType, StringType, BooleanType, NumberIntegerType, NumberUnsignedType, NumberFlo\natType, AllocatorType>::basic_json() [with ObjectType = std::map; ArrayType = st\nd::vector; StringType = std::basic_string<char>; BooleanType = bool; NumberInteg\nerType = long int; NumberUnsignedType = long unsigned int; NumberFloatType = dou\nble; AllocatorType = std::allocator]':\n[fplll-5.0.2] io/json.hpp:1062:5: error: conversion from 'nlohmann::basic_json<>\n::value_t' to non-scalar type 'nlohmann::basic_json<>::type_data_t' requested\n[fplll-5.0.2]      basic_json() = default;\n[fplll-5.0.2]      ^\n[fplll-5.0.2] bkz_param.cpp: In function 'std::vector<fplll::Strategy> fplll::lo\nad_strategies_json(const string&)':\n[fplll-5.0.2] bkz_param.cpp:79:8: note: synthesized method 'nlohmann::basic_json\n<ObjectType, ArrayType, StringType, BooleanType, NumberIntegerType, NumberUnsign\nedType, NumberFloatType, AllocatorType>::basic_json() [with ObjectType = std::ma\np; ArrayType = std::vector; StringType = std::basic_string<char>; BooleanType = \nbool; NumberIntegerType = long int; NumberUnsignedType = long unsigned int; Numb\nerFloatType = double; AllocatorType = std::allocator]' first required here\n[fplll-5.0.2]    json js;\n```",
    "created_at": "2016-09-01T12:35:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290061",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changes look good to me.
But `fplll`fails to build on a linux/POWER7:

```
[fplll-5.0.2] In file included from bkz_param.cpp:4:0:
[fplll-5.0.2] io/json.hpp: In constructor 'nlohmann::basic_json<ObjectType, Arra
yType, StringType, BooleanType, NumberIntegerType, NumberUnsignedType, NumberFlo
atType, AllocatorType>::basic_json() [with ObjectType = std::map; ArrayType = st
d::vector; StringType = std::basic_string<char>; BooleanType = bool; NumberInteg
erType = long int; NumberUnsignedType = long unsigned int; NumberFloatType = dou
ble; AllocatorType = std::allocator]':
[fplll-5.0.2] io/json.hpp:1062:5: error: conversion from 'nlohmann::basic_json<>
::value_t' to non-scalar type 'nlohmann::basic_json<>::type_data_t' requested
[fplll-5.0.2]      basic_json() = default;
[fplll-5.0.2]      ^
[fplll-5.0.2] bkz_param.cpp: In function 'std::vector<fplll::Strategy> fplll::lo
ad_strategies_json(const string&)':
[fplll-5.0.2] bkz_param.cpp:79:8: note: synthesized method 'nlohmann::basic_json
<ObjectType, ArrayType, StringType, BooleanType, NumberIntegerType, NumberUnsign
edType, NumberFloatType, AllocatorType>::basic_json() [with ObjectType = std::ma
p; ArrayType = std::vector; StringType = std::basic_string<char>; BooleanType = 
bool; NumberIntegerType = long int; NumberUnsignedType = long unsigned int; Numb
erFloatType = double; AllocatorType = std::allocator]' first required here
[fplll-5.0.2]    json js;
```



---

archive/issue_comments_290062.json:
```json
{
    "body": "Looks like:\n* https://github.com/nlohmann/json/issues/259#issuecomment-223776640",
    "created_at": "2016-09-01T12:39:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290062",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Looks like:
* https://github.com/nlohmann/json/issues/259#issuecomment-223776640



---

archive/issue_events_056581.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-09-01T12:41:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21221#event-56581"
}
```



---

archive/issue_comments_290063.json:
```json
{
    "body": "I'm indeed using GCC 4.8, but as reported there it also make clang choke and a more recent version of json probably makes the problem disappear as the involved types have been suppressed/modified.",
    "created_at": "2016-09-01T12:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290063",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I'm indeed using GCC 4.8, but as reported there it also make clang choke and a more recent version of json probably makes the problem disappear as the involved types have been suppressed/modified.



---

archive/issue_comments_290064.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-01T12:41:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290064",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290065.json:
```json
{
    "body": "Thanks for tracking it down. Can you try with the new `json.hpp` from https://github.com/nlohmann/json/blob/develop/src/json.hpp so check if it fixes your problem? I'd then update on my end.\n\nJust dump `json.hpp` in `fplll/fplll/io`.",
    "created_at": "2016-09-01T13:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290065",
    "user": "https://github.com/malb"
}
```

Thanks for tracking it down. Can you try with the new `json.hpp` from https://github.com/nlohmann/json/blob/develop/src/json.hpp so check if it fixes your problem? I'd then update on my end.

Just dump `json.hpp` in `fplll/fplll/io`.



---

archive/issue_comments_290066.json:
```json
{
    "body": "With the latest `json.hpp` it just errors out without trying saying that the compiler (GCC 4.8) is unsupported. Nice.",
    "created_at": "2016-09-01T17:09:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290066",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

With the latest `json.hpp` it just errors out without trying saying that the compiler (GCC 4.8) is unsupported. Nice.



---

archive/issue_comments_290067.json:
```json
{
    "body": "FYI, forcing `json.hpp` to give GCC 4.8.3 a try, it compiles seemingly fine.",
    "created_at": "2016-09-01T20:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290067",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

FYI, forcing `json.hpp` to give GCC 4.8.3 a try, it compiles seemingly fine.



---

archive/issue_comments_290068.json:
```json
{
    "body": "Hi, so to clarify: if we update `json.hpp` and drop its GCC 4.8 check then it seems to compile on your linux/POWER7 box?",
    "created_at": "2016-09-01T22:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290068",
    "user": "https://github.com/malb"
}
```

Hi, so to clarify: if we update `json.hpp` and drop its GCC 4.8 check then it seems to compile on your linux/POWER7 box?



---

archive/issue_comments_290069.json:
```json
{
    "body": "Yes exactly.",
    "created_at": "2016-09-02T06:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290069",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Yes exactly.



---

archive/issue_comments_290070.json:
```json
{
    "body": "Just note it does not check for 4.8 but for >= 4.9.",
    "created_at": "2016-09-02T06:12:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290070",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Just note it does not check for 4.8 but for >= 4.9.



---

archive/issue_comments_290071.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-05T12:26:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290071",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290072.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-08T08:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290072",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290073.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-08T08:05:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290073",
    "user": "https://github.com/malb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_290074.json:
```json
{
    "body": "Updated to new upstream versions, now supporting GCC 4.8. Thanks.",
    "created_at": "2016-09-08T08:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290074",
    "user": "https://github.com/malb"
}
```

Updated to new upstream versions, now supporting GCC 4.8. Thanks.



---

archive/issue_comments_290075.json:
```json
{
    "body": "(I fixed the links in the ticket description.)\n\nIt seems the new Linbox from #17635 (closed) fails to build on top of this:\n\n```\n[linbox-1.4.2]  #include <fplll/dpe.h>\n```",
    "created_at": "2016-09-08T09:22:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290075",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

(I fixed the links in the ticket description.)

It seems the new Linbox from #17635 (closed) fails to build on top of this:

```
[linbox-1.4.2]  #include <fplll/dpe.h>
```



---

archive/issue_comments_290076.json:
```json
{
    "body": "CC'ing Cl\u00e9ment for the Linbox/FPLLL interaction.",
    "created_at": "2016-09-08T09:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290076",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

CC'ing Clément for the Linbox/FPLLL interaction.



---

archive/issue_comments_290077.json:
```json
{
    "body": "At the moment we can just add a Linbox patch here to include from the `nr` subdir.",
    "created_at": "2016-09-08T09:31:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290077",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

At the moment we can just add a Linbox patch here to include from the `nr` subdir.



---

archive/issue_comments_290078.json:
```json
{
    "body": "Unfortunately, that's not enough:\n\n```\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl: In function 'void LinBox::ll\nlReduceInBase(LinBox::BlasMatrix<_Field>&, LinBox::BlasMatrix<_Field>&, const Li\nnBox::latticeMethod::latticeFPLLL&)':\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:342:35: error: 'class fplll::\nZZ_mat<__mpz_struct [1]>' has no member named 'Set'\n[linbox-1.4.2]                                  B.Set((int)i,(int)j,x);\n[linbox-1.4.2]                                    ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:5: error: 'proved' is not\n a member of 'fplll'\n[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:21: error: expected prima\nry-expression before ',' token  \n[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:22: error: expected prima\nry-expression before 'double'   \n[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                       ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:22: error: expected ';' b\nefore 'double'\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:351:5: error: 'lllMethod' was not declared in this scope\n[linbox-1.4.2]      lllMethod.LLL();\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:5: error: 'wrapper' is not a member of 'fplll'\n...\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:351:5: error: 'lllMethod' was not declared in this scope\n[linbox-1.4.2]      lllMethod.LLL();\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:5: error: 'wrapper' is not a member of 'fplll'\n[linbox-1.4.2]      fplll::wrapper lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:20: error: expected ';' before 'lllMethod'\n[linbox-1.4.2]      fplll::wrapper lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                     ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:358:5: error: 'lllMethod' was not declared in this scope\n[linbox-1.4.2]      lllMethod.LLL();\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:5: error: 'heuristic' is not a member of 'fplll'\n[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:24: error: expected primary-expression before ',' token  \n[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                         ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:25: error: expected primary-expression before 'double'   \n[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),\n[linbox-1.4.2]                          ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:25: error: expected ';' before 'double'\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:366:5: error: 'lllMethod' was not declared in this scope\n[linbox-1.4.2]      lllMethod.LLL();\n[linbox-1.4.2]      ^\n[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:376:23: error: 'class fplll::ZZ_mat<__mpz_struct [1]>' has no member named 'Get'\n[linbox-1.4.2]      H.setEntry(i,j, B.Get(i,j) );\n```",
    "created_at": "2016-09-08T09:37:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290078",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Unfortunately, that's not enough:

```
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl: In function 'void LinBox::ll
lReduceInBase(LinBox::BlasMatrix<_Field>&, LinBox::BlasMatrix<_Field>&, const Li
nBox::latticeMethod::latticeFPLLL&)':
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:342:35: error: 'class fplll::
ZZ_mat<__mpz_struct [1]>' has no member named 'Set'
[linbox-1.4.2]                                  B.Set((int)i,(int)j,x);
[linbox-1.4.2]                                    ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:5: error: 'proved' is not
 a member of 'fplll'
[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:21: error: expected prima
ry-expression before ',' token  
[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:22: error: expected prima
ry-expression before 'double'   
[linbox-1.4.2]      fplll::proved<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                       ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:349:22: error: expected ';' b
efore 'double'
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:351:5: error: 'lllMethod' was not declared in this scope
[linbox-1.4.2]      lllMethod.LLL();
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:5: error: 'wrapper' is not a member of 'fplll'
...
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:351:5: error: 'lllMethod' was not declared in this scope
[linbox-1.4.2]      lllMethod.LLL();
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:5: error: 'wrapper' is not a member of 'fplll'
[linbox-1.4.2]      fplll::wrapper lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:356:20: error: expected ';' before 'lllMethod'
[linbox-1.4.2]      fplll::wrapper lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                     ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:358:5: error: 'lllMethod' was not declared in this scope
[linbox-1.4.2]      lllMethod.LLL();
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:5: error: 'heuristic' is not a member of 'fplll'
[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:24: error: expected primary-expression before ',' token  
[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                         ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:25: error: expected primary-expression before 'double'   
[linbox-1.4.2]      fplll::heuristic<ZT,double> lllMethod(&B,meth.getPrecision(),
[linbox-1.4.2]                          ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:363:25: error: expected ';' before 'double'
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:366:5: error: 'lllMethod' was not declared in this scope
[linbox-1.4.2]      lllMethod.LLL();
[linbox-1.4.2]      ^
[linbox-1.4.2] ../../linbox/algorithms/lattice.inl:376:23: error: 'class fplll::ZZ_mat<__mpz_struct [1]>' has no member named 'Get'
[linbox-1.4.2]      H.setEntry(i,j, B.Get(i,j) );
```



---

archive/issue_comments_290079.json:
```json
{
    "body": "If fixing this really requires a lot of work in Linbox, we could just disable fplll in Linbox waiting for a Linbox fix... if that's an option.",
    "created_at": "2016-09-08T09:39:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290079",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

If fixing this really requires a lot of work in Linbox, we could just disable fplll in Linbox waiting for a Linbox fix... if that's an option.



---

archive/issue_comments_290080.json:
```json
{
    "body": "Replying to [comment:26 jpflori]:\n> we could just disable fplll in Linbox waiting for a Linbox fix... if that's an option.\n\n\nThis sounds like the most reasonable choice.\nI don't think any linbox dependency on fplll is actually exposed to sage at the moment. The hook was kept for the future.",
    "created_at": "2016-09-08T09:54:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290080",
    "user": "https://github.com/ClementPernet"
}
```

Replying to [comment:26 jpflori]:
> we could just disable fplll in Linbox waiting for a Linbox fix... if that's an option.


This sounds like the most reasonable choice.
I don't think any linbox dependency on fplll is actually exposed to sage at the moment. The hook was kept for the future.



---

archive/issue_comments_290081.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-08T16:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290081",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_290082.json:
```json
{
    "body": "With this strategy everything looks ok.\nLet the patchbots (or Volker?) do their testing jobs.\n\n---\nLast 10 new commits:",
    "created_at": "2016-09-08T16:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290082",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

With this strategy everything looks ok.
Let the patchbots (or Volker?) do their testing jobs.

---
Last 10 new commits:



---

archive/issue_comments_290083.json:
```json
{
    "body": "Oops, it seems I pushed a wrong branch.\nI'll do a force push in a few seconds, sorry about that...",
    "created_at": "2016-09-08T16:13:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290083",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Oops, it seems I pushed a wrong branch.
I'll do a force push in a few seconds, sorry about that...



---

archive/issue_comments_290084.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-09-08T16:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_290085.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:",
    "created_at": "2016-09-08T16:15:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. This was a forced push. New commits:



---

archive/issue_comments_290086.json:
```json
{
    "body": "Sorry for the mess, here's a clean branch where I only merged `trac/develop` and disabled fplll linking wihtin linbox.",
    "created_at": "2016-09-08T16:16:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290086",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Sorry for the mess, here's a clean branch where I only merged `trac/develop` and disabled fplll linking wihtin linbox.



---

archive/issue_comments_290087.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-08T16:16:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290087",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_290088.json:
```json
{
    "body": "I started the tests before the last changes of Jean-Pierre, but i got doctests failure on 32bit system, which i guess will still be here after applying the last two commits too.\n\n```\nsage -t --long --warn-long 124.3 src/sage/modules/free_module_integer.py\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 78, in sage.modules.free_module_integer.IntegerLattice\nFailed example:\n    IntegerLattice(A)\nExpected:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  1 -1  0 -3  0  0  1  2 -2]\n    [-1  2 -1 -1  2 -2  1 -1  0 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-2 -3 -2  0  0  1 -1  1  3 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\nGot:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 1 -2  1  1 -2  2 -1  1  0  1]\n    [ 0  2 -2  2 -1 -2  1  0 -1 -2]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-3 -2 -3  2  2 -1  0  0  0 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 95, in sage.modules.free_module_integer.IntegerLattice\nFailed example:\n    sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True, lattice=True)\nExpected:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  1 -1  0 -3  0  0  1  2 -2]\n    [-1  2 -1 -1  2 -2  1 -1  0 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-2 -3 -2  0  0  1 -1  1  3 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\nGot:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 1 -2  1  1 -2  2 -1  1  0  1]\n    [ 0  2 -2  2 -1 -2  1  0 -1 -2]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-3 -2 -3  2  2 -1  0  0  0 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 203, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer\nFailed example:\n    L = IntegerLattice(sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True)); L\nExpected:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  1 -1  0 -3  0  0  1  2 -2]\n    [-1  2 -1 -1  2 -2  1 -1  0 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-2 -3 -2  0  0  1 -1  1  3 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\nGot:\n    Free module of degree 10 and rank 10 over Integer Ring\n    User basis matrix:\n    [ 0  1  2  0  1  2 -1  0 -1 -1]\n    [ 1 -2  1  1 -2  2 -1  1  0  1]\n    [ 0  2 -2  2 -1 -2  1  0 -1 -2]\n    [ 0  1  0 -3  0  0  0  0  3 -1]\n    [ 1  0 -4  2  0  1 -2 -1  0  0]\n    [ 2  3  0  1  1  0 -2  3  0  0]\n    [-3 -2 -3  2  2 -1  0  0  0 -2]\n    [-3  0 -1  0 -2 -1 -2  1 -1  1]\n    [ 1  4 -1  1  2  2  1  0  3  1]\n    [-1 -1  0 -3 -1  2  2  3 -1  0]\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 513, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ\nFailed example:\n    L.reduced_basis[0]\nExpected:\n    (-1, 0, 0, 0, 0, 0, 1, 0, -1, 0, 0, 0, 0, 0, -2, 0, 0, 0, 0, 0,\n     -1, 1, 0, 1, 1, 0, 0, 0, 3, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0)\nGot:\n    (1, 0, 0, 0, 0, -1, 1, 1, 0, 0, 1, -1, -1, -1, 0, 0, 0, 0, 0, -1, 0, 0, 1, 0, 0, 0, 0, 0, -1, 0, -1, 1, 1, -1, 1, 2, 0, 0, -1, -1)\n**********************************************************************\n```\n\nConcerning `src/sage/matrix/matrix_integer_dense.pyx` i have a `Timed out (and interrupt failed)` without further explanations, i will run the tests by hand one by one.\n\nI put it in \"need info\" not \"need work\" because i have to test the very last commit on a fresh install to confirm the issue, this might take some time since the VM is a bit slow.",
    "created_at": "2016-09-08T22:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290088",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

I started the tests before the last changes of Jean-Pierre, but i got doctests failure on 32bit system, which i guess will still be here after applying the last two commits too.

```
sage -t --long --warn-long 124.3 src/sage/modules/free_module_integer.py
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 78, in sage.modules.free_module_integer.IntegerLattice
Failed example:
    IntegerLattice(A)
Expected:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  1 -1  0 -3  0  0  1  2 -2]
    [-1  2 -1 -1  2 -2  1 -1  0 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-2 -3 -2  0  0  1 -1  1  3 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
Got:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 1 -2  1  1 -2  2 -1  1  0  1]
    [ 0  2 -2  2 -1 -2  1  0 -1 -2]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-3 -2 -3  2  2 -1  0  0  0 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 95, in sage.modules.free_module_integer.IntegerLattice
Failed example:
    sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True, lattice=True)
Expected:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  1 -1  0 -3  0  0  1  2 -2]
    [-1  2 -1 -1  2 -2  1 -1  0 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-2 -3 -2  0  0  1 -1  1  3 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
Got:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 1 -2  1  1 -2  2 -1  1  0  1]
    [ 0  2 -2  2 -1 -2  1  0 -1 -2]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-3 -2 -3  2  2 -1  0  0  0 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 203, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer
Failed example:
    L = IntegerLattice(sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True)); L
Expected:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  1 -1  0 -3  0  0  1  2 -2]
    [-1  2 -1 -1  2 -2  1 -1  0 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-2 -3 -2  0  0  1 -1  1  3 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
Got:
    Free module of degree 10 and rank 10 over Integer Ring
    User basis matrix:
    [ 0  1  2  0  1  2 -1  0 -1 -1]
    [ 1 -2  1  1 -2  2 -1  1  0  1]
    [ 0  2 -2  2 -1 -2  1  0 -1 -2]
    [ 0  1  0 -3  0  0  0  0  3 -1]
    [ 1  0 -4  2  0  1 -2 -1  0  0]
    [ 2  3  0  1  1  0 -2  3  0  0]
    [-3 -2 -3  2  2 -1  0  0  0 -2]
    [-3  0 -1  0 -2 -1 -2  1 -1  1]
    [ 1  4 -1  1  2  2  1  0  3  1]
    [-1 -1  0 -3 -1  2  2  3 -1  0]
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 513, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ
Failed example:
    L.reduced_basis[0]
Expected:
    (-1, 0, 0, 0, 0, 0, 1, 0, -1, 0, 0, 0, 0, 0, -2, 0, 0, 0, 0, 0,
     -1, 1, 0, 1, 1, 0, 0, 0, 3, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0)
Got:
    (1, 0, 0, 0, 0, -1, 1, 1, 0, 0, 1, -1, -1, -1, 0, 0, 0, 0, 0, -1, 0, 0, 1, 0, 0, 0, 0, 0, -1, 0, -1, 1, 1, -1, 1, 2, 0, 0, -1, -1)
**********************************************************************
```

Concerning `src/sage/matrix/matrix_integer_dense.pyx` i have a `Timed out (and interrupt failed)` without further explanations, i will run the tests by hand one by one.

I put it in "need info" not "need work" because i have to test the very last commit on a fresh install to confirm the issue, this might take some time since the VM is a bit slow.



---

archive/issue_comments_290089.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2016-09-08T22:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290089",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_290090.json:
```json
{
    "body": "Looks like you're getting a different LLL reduced basis. Mhh, no idea why 32 bit systems might be different, we might have to wait to see what the patchbots report.",
    "created_at": "2016-09-09T09:03:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290090",
    "user": "https://github.com/malb"
}
```

Looks like you're getting a different LLL reduced basis. Mhh, no idea why 32 bit systems might be different, we might have to wait to see what the patchbots report.



---

archive/issue_comments_290091.json:
```json
{
    "body": "Will the patchbots do anything if this is not positive_review?",
    "created_at": "2016-09-09T11:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290091",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Will the patchbots do anything if this is not positive_review?



---

archive/issue_comments_290092.json:
```json
{
    "body": "On my fresh retry, i got the same failures (but no problem for `src/sage/matrix/matrix_integer_dense.pyx` which were probably due to some optional pkgs).\n\nReplying to [comment:34 malb]:\n> Looks like you're getting a different LLL reduced basis. Mhh, no idea\n> why 32 bit systems might be different, we might have to wait to see what\n> the patchbots report.\n\n\nI do not know either, especially since LLL is deterministic, so perhaps is there some non-constant-length variable in the floating-point part of the code ?\n\nUsually, the arch is sufficient to separate such behaviours (e.g. on my 64bit daily laptop, the tests are OK), and we can make specific tests for them.\n\nBut before settling down a `#32bit` doctest with those values, we should check that the bases are indeed LLL-reduced (it could be an explicit part of the test by the way).\n\nFor double checking, note that apart from my patchbot (actually a qemulated Pentium III), arando is the other running 32bit arch, which is run by Jeroen, so we could ask him to tell that patchbot to focus on that ticket.\n\nReplying to [comment:35 jpflori]:\n> Will the patchbots do anything if this is not positive_review?\n\n\nYes, since the patchbots are more a tool to help reviewing than to help releasing (for which the buildbot helps). Actually, being in `needs_review` gives you more chance to get some patchbots looking at your code (so let me put the ticket to `needs_review`, just to motivate some of those): https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/patchbot.py#L420 Note that you can force the re-test with the `?kick` trick : https://patchbot.sagemath.org/ticket/21221/?kick (this is why there is `retry: True` now, i clicked on that link yesterday).",
    "created_at": "2016-09-09T12:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290092",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

On my fresh retry, i got the same failures (but no problem for `src/sage/matrix/matrix_integer_dense.pyx` which were probably due to some optional pkgs).

Replying to [comment:34 malb]:
> Looks like you're getting a different LLL reduced basis. Mhh, no idea
> why 32 bit systems might be different, we might have to wait to see what
> the patchbots report.


I do not know either, especially since LLL is deterministic, so perhaps is there some non-constant-length variable in the floating-point part of the code ?

Usually, the arch is sufficient to separate such behaviours (e.g. on my 64bit daily laptop, the tests are OK), and we can make specific tests for them.

But before settling down a `#32bit` doctest with those values, we should check that the bases are indeed LLL-reduced (it could be an explicit part of the test by the way).

For double checking, note that apart from my patchbot (actually a qemulated Pentium III), arando is the other running 32bit arch, which is run by Jeroen, so we could ask him to tell that patchbot to focus on that ticket.

Replying to [comment:35 jpflori]:
> Will the patchbots do anything if this is not positive_review?


Yes, since the patchbots are more a tool to help reviewing than to help releasing (for which the buildbot helps). Actually, being in `needs_review` gives you more chance to get some patchbots looking at your code (so let me put the ticket to `needs_review`, just to motivate some of those): https://github.com/sagemath/sage-patchbot/blob/master/sage_patchbot/patchbot.py#L420 Note that you can force the re-test with the `?kick` trick : https://patchbot.sagemath.org/ticket/21221/?kick (this is why there is `retry: True` now, i clicked on that link yesterday).



---

archive/issue_comments_290093.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2016-09-09T12:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290093",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_290094.json:
```json
{
    "body": "I can reproduce it in a 32-bit virtual machine:\n\n```python\nsage: from sage.modules.free_module_integer import IntegerLattice\nsage: A = sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True)\nsage: copy(A).LLL(algorithm=\"fpLLL:proved\", fp=\"rr\")[3]\n(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)\nsage: copy(A).LLL(algorithm=\"fpLLL:proved\", fp=\"fp\")[3]\n(0, 1, 0, -3, 0, 0, 0, 0, 3, -1)\n```\n\nOn a 64-bit system:\n\n```python\nsage: copy(A).LLL(algorithm=\"fpLLL:proved\", fp=\"fp\")[3]\n(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)\nsage: copy(A).LLL(algorithm=\"fpLLL:proved\", fp=\"rr\")[3]\n(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)\n```\n\nNote that the last outputs differ. In either case the output is LLL reduced (I'm not in favour of adding that test to the doctest though, since LLL-reducedness is not the main point there, thus it would be a bit distracting).\n\nA cheap workaround is to simply pick a different seed for the doctest.",
    "created_at": "2016-09-10T11:08:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290094",
    "user": "https://github.com/malb"
}
```

I can reproduce it in a 32-bit virtual machine:

```python
sage: from sage.modules.free_module_integer import IntegerLattice
sage: A = sage.crypto.gen_lattice(type='modular', m=10, seed=42, dual=True)
sage: copy(A).LLL(algorithm="fpLLL:proved", fp="rr")[3]
(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)
sage: copy(A).LLL(algorithm="fpLLL:proved", fp="fp")[3]
(0, 1, 0, -3, 0, 0, 0, 0, 3, -1)
```

On a 64-bit system:

```python
sage: copy(A).LLL(algorithm="fpLLL:proved", fp="fp")[3]
(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)
sage: copy(A).LLL(algorithm="fpLLL:proved", fp="rr")[3]
(-1, 2, -1, -1, 2, -2, 1, -1, 0, -1)
```

Note that the last outputs differ. In either case the output is LLL reduced (I'm not in favour of adding that test to the doctest though, since LLL-reducedness is not the main point there, thus it would be a bit distracting).

A cheap workaround is to simply pick a different seed for the doctest.



---

archive/issue_comments_290095.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-10T11:19:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290095",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290096.json:
```json
{
    "body": "This seems to have done the trick.",
    "created_at": "2016-09-10T11:20:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290096",
    "user": "https://github.com/malb"
}
```

This seems to have done the trick.



---

archive/issue_comments_290097.json:
```json
{
    "body": "Maybe we should still document that even with the same seed, the LLL reduction, although deterministic, might give different results on 32 and 64 platforms (different roundng for floats?) ?",
    "created_at": "2016-09-12T08:32:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290097",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Maybe we should still document that even with the same seed, the LLL reduction, although deterministic, might give different results on 32 and 64 platforms (different roundng for floats?) ?



---

archive/issue_comments_290098.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-12T10:35:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290098",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290099.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-12T11:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290099",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_290100.json:
```json
{
    "body": "Good to go for me.",
    "created_at": "2016-09-12T11:48:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290100",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Good to go for me.



---

archive/issue_comments_290101.json:
```json
{
    "body": "Waiting for Volker's run report. But in sage-on-gentoo, I couldn't get the test suite for `fpylll` to run successfully when it was built using `sagelib`. I decided to hard disable it until I figure if it's broken on my side only or it is for everyone. Actually the `fpylll` tarball that is linked in this ticket doesn't include the test suite or does it?",
    "created_at": "2016-09-13T05:47:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290101",
    "user": "https://github.com/kiwifb"
}
```

Waiting for Volker's run report. But in sage-on-gentoo, I couldn't get the test suite for `fpylll` to run successfully when it was built using `sagelib`. I decided to hard disable it until I figure if it's broken on my side only or it is for everyone. Actually the `fpylll` tarball that is linked in this ticket doesn't include the test suite or does it?



---

archive/issue_comments_290102.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-09-13T16:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290102",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_290103.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2016-09-13T16:09:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290103",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_290104.json:
```json
{
    "body": "Pushed fpylll 0.2.2dev which ships the testsuite and doesn't rely on environment variables.",
    "created_at": "2016-09-13T16:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290104",
    "user": "https://github.com/malb"
}
```

Pushed fpylll 0.2.2dev which ships the testsuite and doesn't rely on environment variables.



---

archive/issue_comments_290105.json:
```json
{
    "body": "I am not sure that was fair to push that particular upgrade while Volker has already started to test stuff on the bot.\n\nAt least the change is minimal and `fpylll` doesn't currently have a `spkg-check` nor do we have `py.test` in the \"vanilla\" sage tree to run it. But I do, so I have concerns because it looks to me that `fpylll` has had its test suite run without sage with python 2.7 and 3.5 but it looks like its test suite when built against sage is sage testsuite itself. Just for fun \n\n```\n>>> Test phase: dev-python/fpylll-0.2.1\n * python2_7: running distutils-r1_run_phase python_test\n=============================================================================== test session starts ===============================================================================\nplatform linux2 -- Python 2.7.10, pytest-2.8.7, py-1.4.30, pluggy-0.3.1 -- /usr/bin/python2.7\ncachedir: .cache\nrootdir: /scratch2/portage/dev-python/fpylll-0.2.1/work/fpylll-0.2.1dev, inifile: \ncollecting ... collected 17 items / 1 errors\n\ntests/test_bkz_python.py::test_bkz_init FAILED\ntests/test_bkz_python.py::test_simple_bkz_call FAILED\ntests/test_bkz_python.py::test_bkz_call FAILED\ntests/test_gso.py::test_gso_init /scratch2/portage/dev-python/fpylll-0.2.1/temp/environment: line 2590:  5851 Segmentation fault      py.test -v\n * python3_4: running distutils-r1_run_phase python_test\n=============================================================================== test session starts ===============================================================================\nplatform linux -- Python 3.4.3, pytest-2.8.7, py-1.4.30, pluggy-0.3.1 -- /usr/bin/python3.4\ncachedir: .cache\nrootdir: /scratch2/portage/dev-python/fpylll-0.2.1/work/fpylll-0.2.1dev, inifile: \ncollecting ... collected 19 items\n\ntests/test_bkz.py::test_bkz_init PASSED\ntests/test_bkz.py::test_bkz_bkz PASSED\ntests/test_bkz_python.py::test_bkz_init PASSED\ntests/test_bkz_python.py::test_simple_bkz_call PASSED\ntests/test_bkz_python.py::test_bkz_call PASSED\ntests/test_gso.py::test_gso_init PASSED\ntests/test_gso.py::test_gso_d PASSED\ntests/test_gso.py::test_gso_int_gram_enabled PASSED\ntests/test_gso.py::test_gso_update_gso PASSED\ntests/test_lll.py::test_lll_init PASSED\ntests/test_lll.py::test_lll_lll PASSED\ntests/test_numpy.py::test_dump_mu PASSED\ntests/test_numpy.py::test_dump_r PASSED\ntests/test_precision.py::test_precision PASSED\ntests/test_pruner.py::test_pruner_gso PASSED\ntests/test_pruner.py::test_pruner_vec PASSED\ntests/test_random.py::test_randomize PASSED\ntests/test_simple_bkz.py::test_simple_bkz_init PASSED\ntests/test_simple_bkz.py::test_simple_bkz_reduction PASSED\n\n=========================================================================== 19 passed in 59.30 seconds ============================================================================\n```\npython3.4 results to show what happens when not built against sage.\n\n\nI am not sure how `SAGERUNTIME` is generated but `fpylll` needs to be in it. From the look of it, it is generated so it is probably OK.\n\n`fpylll` needs to be build against sagelib and sagelib needs `fpylll` to run. From my packaging point of view that means that\n* I will have to split the building of the documentation in its own package, again. Otherwise I have circular dependencies that cannot be satisfied\n* I can forget about ever achieving a state where I can take a package for sage and do build, test and install __in that order__. From now on there is no hope for testing sage before it is fully installed. Looking around it seems very common in python packages, it looks like testing before installing on the same machine is old school.",
    "created_at": "2016-09-13T21:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290105",
    "user": "https://github.com/kiwifb"
}
```

I am not sure that was fair to push that particular upgrade while Volker has already started to test stuff on the bot.

At least the change is minimal and `fpylll` doesn't currently have a `spkg-check` nor do we have `py.test` in the "vanilla" sage tree to run it. But I do, so I have concerns because it looks to me that `fpylll` has had its test suite run without sage with python 2.7 and 3.5 but it looks like its test suite when built against sage is sage testsuite itself. Just for fun 

```
>>> Test phase: dev-python/fpylll-0.2.1
 * python2_7: running distutils-r1_run_phase python_test
=============================================================================== test session starts ===============================================================================
platform linux2 -- Python 2.7.10, pytest-2.8.7, py-1.4.30, pluggy-0.3.1 -- /usr/bin/python2.7
cachedir: .cache
rootdir: /scratch2/portage/dev-python/fpylll-0.2.1/work/fpylll-0.2.1dev, inifile: 
collecting ... collected 17 items / 1 errors

tests/test_bkz_python.py::test_bkz_init FAILED
tests/test_bkz_python.py::test_simple_bkz_call FAILED
tests/test_bkz_python.py::test_bkz_call FAILED
tests/test_gso.py::test_gso_init /scratch2/portage/dev-python/fpylll-0.2.1/temp/environment: line 2590:  5851 Segmentation fault      py.test -v
 * python3_4: running distutils-r1_run_phase python_test
=============================================================================== test session starts ===============================================================================
platform linux -- Python 3.4.3, pytest-2.8.7, py-1.4.30, pluggy-0.3.1 -- /usr/bin/python3.4
cachedir: .cache
rootdir: /scratch2/portage/dev-python/fpylll-0.2.1/work/fpylll-0.2.1dev, inifile: 
collecting ... collected 19 items

tests/test_bkz.py::test_bkz_init PASSED
tests/test_bkz.py::test_bkz_bkz PASSED
tests/test_bkz_python.py::test_bkz_init PASSED
tests/test_bkz_python.py::test_simple_bkz_call PASSED
tests/test_bkz_python.py::test_bkz_call PASSED
tests/test_gso.py::test_gso_init PASSED
tests/test_gso.py::test_gso_d PASSED
tests/test_gso.py::test_gso_int_gram_enabled PASSED
tests/test_gso.py::test_gso_update_gso PASSED
tests/test_lll.py::test_lll_init PASSED
tests/test_lll.py::test_lll_lll PASSED
tests/test_numpy.py::test_dump_mu PASSED
tests/test_numpy.py::test_dump_r PASSED
tests/test_precision.py::test_precision PASSED
tests/test_pruner.py::test_pruner_gso PASSED
tests/test_pruner.py::test_pruner_vec PASSED
tests/test_random.py::test_randomize PASSED
tests/test_simple_bkz.py::test_simple_bkz_init PASSED
tests/test_simple_bkz.py::test_simple_bkz_reduction PASSED

=========================================================================== 19 passed in 59.30 seconds ============================================================================
```
python3.4 results to show what happens when not built against sage.


I am not sure how `SAGERUNTIME` is generated but `fpylll` needs to be in it. From the look of it, it is generated so it is probably OK.

`fpylll` needs to be build against sagelib and sagelib needs `fpylll` to run. From my packaging point of view that means that
* I will have to split the building of the documentation in its own package, again. Otherwise I have circular dependencies that cannot be satisfied
* I can forget about ever achieving a state where I can take a package for sage and do build, test and install __in that order__. From now on there is no hope for testing sage before it is fully installed. Looking around it seems very common in python packages, it looks like testing before installing on the same machine is old school.



---

archive/issue_comments_290106.json:
```json
{
    "body": "Replying to [comment:47 fbissey]:\n> * I will have to split the building of the documentation in its own package, again. Otherwise I have circular dependencies that cannot be satisfied\n\n\nOK I won't have to split for now. Documentation builds fine without `fpylll` installed. Should future documentation make plots that depends directly or indirectly from `fpylll` and the split will have to happen.",
    "created_at": "2016-09-14T02:56:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290106",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:47 fbissey]:
> * I will have to split the building of the documentation in its own package, again. Otherwise I have circular dependencies that cannot be satisfied


OK I won't have to split for now. Documentation builds fine without `fpylll` installed. Should future documentation make plots that depends directly or indirectly from `fpylll` and the split will have to happen.



---

archive/issue_comments_290107.json:
```json
{
    "body": "I'm getting some failures on OSX:\n\n```\nsage -t --long src/sage/matrix/matrix_integer_dense.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix_integer_dense.pyx\", line 2726, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?\nFailed example:\n    A.BKZ()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[1]>\", line 1, in <module>\n        A.BKZ()\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/matrix/matrix_integer_dense.pyx\", line 2732, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?\nFailed example:\n    A.BKZ(use_givens=True)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[3]>\", line 1, in <module>\n        A.BKZ(use_givens=True)\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/matrix/matrix_integer_dense.pyx\", line 2738, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?\nFailed example:\n    A.BKZ(fp=\"fp\")\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[5]>\", line 1, in <module>\n        A.BKZ(fp=\"fp\")\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\n1 item had failures:\n   3 of  67 in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?\n    [573 tests, 3 failures, 21.83 s]\n```\nand\n\n```\nsage -t --long src/sage/modules/free_module_integer.py\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 216, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer\nFailed example:\n    L.shortest_vector()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer[2]>\", line 1, in <module>\n        L.shortest_vector()\n      File \"sage/misc/cachefunc.pyx\", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)\n        w = self._instance_call(*args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)\n        return self.f(self._instance, *args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 633, in shortest_vector\n        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))\n      File \"src/fpylll/fplll/svpcvp.pyx\", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)\n      File \"src/cysignals/signals.pyx\", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)\n    RuntimeError: Aborted\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 454, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ\nFailed example:\n    L.BKZ(block_size=10)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ[6]>\", line 1, in <module>\n        L.BKZ(block_size=Integer(10))\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 466, in BKZ\n        basis = [v for v in basis.BKZ(*args, **kwds) if v]\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 457, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ\nFailed example:\n    min(v.norm().n() for v in L.reduced_basis)\nExpected:\n    4.12310562561766\nGot:\n    5.19615242270663\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 510, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ\nFailed example:\n    L.HKZ()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ[2]>\", line 1, in <module>\n        L.HKZ()\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 516, in HKZ\n        return self.BKZ(block_size=self.rank())\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 466, in BKZ\n        basis = [v for v in basis.BKZ(*args, **kwds) if v]\n      File \"sage/matrix/matrix_integer_dense.pyx\", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)\n        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),\n      File \"src/fpylll/fplll/bkz.pyx\", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)\n    SignalError: Segmentation fault\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 513, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ\nFailed example:\n    L.reduced_basis[0]\nExpected:\n    (0, 0, -1, -1, 0, 0, -1, 1, 0, 0, -1, 1, 1, 0, 0, 1, 1, 1, -1, 0, 0, 1, -1, 0, 0, -1, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 1, 0, 0, -2)\nGot:\n    (-1, 0, 0, 2, 0, 0, 0, 0, -1, 1, 0, -1, 0, 1, 1, 0, 0, -2, 0, 1, 1, 1, 0, -1, 1, -1, -1, 0, -1, -1, -1, 1, -1, 0, 0, 0, 0, 0, 0, 0)\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 605, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector\nFailed example:\n    L.shortest_vector().norm().n()\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector[4]>\", line 1, in <module>\n        L.shortest_vector().norm().n()\n      File \"sage/misc/cachefunc.pyx\", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)\n        w = self._instance_call(*args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)\n        return self.f(self._instance, *args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 633, in shortest_vector\n        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))\n      File \"src/fpylll/fplll/svpcvp.pyx\", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)\n      File \"src/cysignals/signals.pyx\", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)\n    RuntimeError: Aborted\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 660, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis\nFailed example:\n    v = L.shortest_vector(update_reduced_basis=False)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis[4]>\", line 1, in <module>\n        v = L.shortest_vector(update_reduced_basis=False)\n      File \"sage/misc/cachefunc.pyx\", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)\n        w = self._instance_call(*args, **kwds)\n      File \"sage/misc/cachefunc.pyx\", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)\n        return self.f(self._instance, *args, **kwds)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py\", line 633, in shortest_vector\n        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))\n      File \"src/fpylll/fplll/svpcvp.pyx\", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)\n      File \"src/cysignals/signals.pyx\", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)\n    RuntimeError: Aborted\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 661, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis\nFailed example:\n    L.update_reduced_basis(v)\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis[5]>\", line 1, in <module>\n        L.update_reduced_basis(v)\n    NameError: name 'v' is not defined\n**********************************************************************\nFile \"src/sage/modules/free_module_integer.py\", line 662, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis\nFailed example:\n    bool(L.reduced_basis[0].norm() < B[0].norm())\nExpected:\n    True\nGot:\n    False\n**********************************************************************\n5 items had failures:\n   1 of   4 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer\n   2 of   9 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ\n   2 of   5 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ\n   1 of  11 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector\n   3 of   8 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis\n    [97 tests, 9 failures, 63.26 s]\n```",
    "created_at": "2016-09-14T16:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290107",
    "user": "https://github.com/vbraun"
}
```

I'm getting some failures on OSX:

```
sage -t --long src/sage/matrix/matrix_integer_dense.pyx
**********************************************************************
File "src/sage/matrix/matrix_integer_dense.pyx", line 2726, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?
Failed example:
    A.BKZ()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[1]>", line 1, in <module>
        A.BKZ()
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/matrix/matrix_integer_dense.pyx", line 2732, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?
Failed example:
    A.BKZ(use_givens=True)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[3]>", line 1, in <module>
        A.BKZ(use_givens=True)
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/matrix/matrix_integer_dense.pyx", line 2738, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?
Failed example:
    A.BKZ(fp="fp")
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.matrix.matrix_integer_dense.Matrix_integer_dense.?[5]>", line 1, in <module>
        A.BKZ(fp="fp")
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
1 item had failures:
   3 of  67 in sage.matrix.matrix_integer_dense.Matrix_integer_dense.?
    [573 tests, 3 failures, 21.83 s]
```
and

```
sage -t --long src/sage/modules/free_module_integer.py
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 216, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer
Failed example:
    L.shortest_vector()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer[2]>", line 1, in <module>
        L.shortest_vector()
      File "sage/misc/cachefunc.pyx", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)
        w = self._instance_call(*args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)
        return self.f(self._instance, *args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 633, in shortest_vector
        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))
      File "src/fpylll/fplll/svpcvp.pyx", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)
      File "src/cysignals/signals.pyx", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)
    RuntimeError: Aborted
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 454, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ
Failed example:
    L.BKZ(block_size=10)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ[6]>", line 1, in <module>
        L.BKZ(block_size=Integer(10))
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 466, in BKZ
        basis = [v for v in basis.BKZ(*args, **kwds) if v]
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 457, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ
Failed example:
    min(v.norm().n() for v in L.reduced_basis)
Expected:
    4.12310562561766
Got:
    5.19615242270663
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 510, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ
Failed example:
    L.HKZ()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ[2]>", line 1, in <module>
        L.HKZ()
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 516, in HKZ
        return self.BKZ(block_size=self.rank())
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 466, in BKZ
        basis = [v for v in basis.BKZ(*args, **kwds) if v]
      File "sage/matrix/matrix_integer_dense.pyx", line 2856, in sage.matrix.matrix_integer_dense.Matrix_integer_dense.BKZ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/matrix/matrix_integer_dense.cpp:25723)
        BKZ.reduction(A, BKZ.Param(block_size=block_size, delta=delta, **kwds),
      File "src/fpylll/fplll/bkz.pyx", line 742, in fpylll.fplll.bkz.bkz_reduction (build/src/fpylll/fplll/bkz.cpp:8192)
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1457)
    SignalError: Segmentation fault
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 513, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ
Failed example:
    L.reduced_basis[0]
Expected:
    (0, 0, -1, -1, 0, 0, -1, 1, 0, 0, -1, 1, 1, 0, 0, 1, 1, 1, -1, 0, 0, 1, -1, 0, 0, -1, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 1, 0, 0, -2)
Got:
    (-1, 0, 0, 2, 0, 0, 0, 0, -1, 1, 0, -1, 0, 1, 1, 0, 0, -2, 0, 1, 1, 1, 0, -1, 1, -1, -1, 0, -1, -1, -1, 1, -1, 0, 0, 0, 0, 0, 0, 0)
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 605, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector
Failed example:
    L.shortest_vector().norm().n()
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector[4]>", line 1, in <module>
        L.shortest_vector().norm().n()
      File "sage/misc/cachefunc.pyx", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)
        w = self._instance_call(*args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)
        return self.f(self._instance, *args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 633, in shortest_vector
        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))
      File "src/fpylll/fplll/svpcvp.pyx", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)
      File "src/cysignals/signals.pyx", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)
    RuntimeError: Aborted
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 660, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis
Failed example:
    v = L.shortest_vector(update_reduced_basis=False)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis[4]>", line 1, in <module>
        v = L.shortest_vector(update_reduced_basis=False)
      File "sage/misc/cachefunc.pyx", line 2038, in sage.misc.cachefunc.CachedMethodCaller.__call__ (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:10183)
        w = self._instance_call(*args, **kwds)
      File "sage/misc/cachefunc.pyx", line 1914, in sage.misc.cachefunc.CachedMethodCaller._instance_call (/Users/buildslave-sage/slave/sage_git/build/src/build/cythonized/sage/misc/cachefunc.c:9647)
        return self.f(self._instance, *args, **kwds)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/modules/free_module_integer.py", line 633, in shortest_vector
        w = vector(ZZ, SVP.shortest_vector(L, *args, **kwds))
      File "src/fpylll/fplll/svpcvp.pyx", line 71, in fpylll.fplll.svpcvp.shortest_vector (build/src/fpylll/fplll/svpcvp.cpp:3122)
      File "src/cysignals/signals.pyx", line 102, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1273)
    RuntimeError: Aborted
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 661, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis
Failed example:
    L.update_reduced_basis(v)
Exception raised:
    Traceback (most recent call last):
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/Users/buildslave-sage/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis[5]>", line 1, in <module>
        L.update_reduced_basis(v)
    NameError: name 'v' is not defined
**********************************************************************
File "src/sage/modules/free_module_integer.py", line 662, in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis
Failed example:
    bool(L.reduced_basis[0].norm() < B[0].norm())
Expected:
    True
Got:
    False
**********************************************************************
5 items had failures:
   1 of   4 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer
   2 of   9 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.BKZ
   2 of   5 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.HKZ
   1 of  11 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.shortest_vector
   3 of   8 in sage.modules.free_module_integer.FreeModule_submodule_with_basis_integer.update_reduced_basis
    [97 tests, 9 failures, 63.26 s]
```



---

archive/issue_comments_290108.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-14T16:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290108",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_290109.json:
```json
{
    "body": "Replying to [comment:47 fbissey]:\n> I am not sure that was fair to push that particular upgrade while Volker has already started to test stuff on the bot.\n\n\nSorry, I didn't mean to create more work, rather less.",
    "created_at": "2016-09-15T08:02:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290109",
    "user": "https://github.com/malb"
}
```

Replying to [comment:47 fbissey]:
> I am not sure that was fair to push that particular upgrade while Volker has already started to test stuff on the bot.


Sorry, I didn't mean to create more work, rather less.



---

archive/issue_comments_290110.json:
```json
{
    "body": "Mhh, wo we still have SSH access to an OS X box. It's hard to tell from here what may have caused it. I'll also ask on our fplll-devel mailinglist if people have OSX boxes.",
    "created_at": "2016-09-15T08:03:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290110",
    "user": "https://github.com/malb"
}
```

Mhh, wo we still have SSH access to an OS X box. It's hard to tell from here what may have caused it. I'll also ask on our fplll-devel mailinglist if people have OSX boxes.



---

archive/issue_comments_290111.json:
```json
{
    "body": "Looking at the failures, they look like the kind of failures I used to get. Was there maybe a mixup somewhere and an old branch was tested?",
    "created_at": "2016-09-15T15:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290111",
    "user": "https://github.com/malb"
}
```

Looking at the failures, they look like the kind of failures I used to get. Was there maybe a mixup somewhere and an old branch was tested?



---

archive/issue_comments_290112.json:
```json
{
    "body": "I may try a build now that I finished my clang exploration.",
    "created_at": "2016-09-15T21:54:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290112",
    "user": "https://github.com/kiwifb"
}
```

I may try a build now that I finished my clang exploration.



---

archive/issue_comments_290113.json:
```json
{
    "body": "Hi there, `@`fbissey did you end up building this? `@`vbraun, anything I should do to trigger a re-test?",
    "created_at": "2016-09-20T14:49:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290113",
    "user": "https://github.com/malb"
}
```

Hi there, `@`fbissey did you end up building this? `@`vbraun, anything I should do to trigger a re-test?



---

archive/issue_comments_290114.json:
```json
{
    "body": "Replying to [comment:54 malb]:\n> Hi there, `@`fbissey did you end up building this? `@`vbraun, anything I should do to trigger a re-test?\n\n\nI did a try twice. Each time I ended up with a mountain of doctests failing for some apparently unrelated reason. I decided to try again from a pristine tree but I haven't got time to do another attempt yet.",
    "created_at": "2016-09-20T21:08:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290114",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:54 malb]:
> Hi there, `@`fbissey did you end up building this? `@`vbraun, anything I should do to trigger a re-test?


I did a try twice. Each time I ended up with a mountain of doctests failing for some apparently unrelated reason. I decided to try again from a pristine tree but I haven't got time to do another attempt yet.



---

archive/issue_comments_290115.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-09-20T21:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290115",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_290116.json:
```json
{
    "body": "I can try again ...",
    "created_at": "2016-09-20T21:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290116",
    "user": "https://github.com/vbraun"
}
```

I can try again ...



---

archive/issue_comments_290117.json:
```json
{
    "body": "Its definitely still happening on OSX...",
    "created_at": "2016-09-21T06:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290117",
    "user": "https://github.com/vbraun"
}
```

Its definitely still happening on OSX...



---

archive/issue_comments_290118.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-09-21T06:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290118",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_290119.json:
```json
{
    "body": "Thanks & sorry for the noise. I'll dig up an OS X box and debug there.",
    "created_at": "2016-09-21T08:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290119",
    "user": "https://github.com/malb"
}
```

Thanks & sorry for the noise. I'll dig up an OS X box and debug there.



---

archive/issue_comments_290120.json:
```json
{
    "body": "This is strange: I built & tested on an OS X box now and all tests passed. Using\n- branch: public/fplll5\n- fplll: https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz\n- fpylll: https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz\n\nNot sure what to do about this now. Any suggestions?",
    "created_at": "2016-09-23T08:13:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290120",
    "user": "https://github.com/malb"
}
```

This is strange: I built & tested on an OS X box now and all tests passed. Using
- branch: public/fplll5
- fplll: https://github.com/fplll/fplll/releases/download/5.0.3rc0/fplll-5.0.3rc0.tar.gz
- fpylll: https://github.com/fplll/fpylll/releases/download/0.2.2dev/fpylll-0.2.2dev.tar.gz

Not sure what to do about this now. Any suggestions?



---

archive/issue_comments_290121.json:
```json
{
    "body": "Apart from getting access to the problematic machine, no...",
    "created_at": "2016-09-23T08:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290121",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Apart from getting access to the problematic machine, no...



---

archive/issue_comments_290122.json:
```json
{
    "body": "On a second OSX box I'm now seeing:\n\n```\nImportError: dlopen(/Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so, 2): Symbol not found: __ZN5fplll14EnumerationDynINS_5FP_NRIA1_10dpe_structEEE16process_solutionEd\n\nReferenced from: /Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so\n\nExpected in: flat namespace\n in /Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so\n```\n\nAny OSX experts out there who can make sense of this? More details at https://github.com/fplll/fplll/issues/205",
    "created_at": "2016-09-25T15:46:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290122",
    "user": "https://github.com/malb"
}
```

On a second OSX box I'm now seeing:

```
ImportError: dlopen(/Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so, 2): Symbol not found: __ZN5fplll14EnumerationDynINS_5FP_NRIA1_10dpe_structEEE16process_solutionEd

Referenced from: /Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so

Expected in: flat namespace
 in /Users/vagrant/fplll/lib/python2.7/site-packages/fpylll/fplll/enumeration.so
```

Any OSX experts out there who can make sense of this? More details at https://github.com/fplll/fplll/issues/205



---

archive/issue_comments_290123.json:
```json
{
    "body": "It seems this is caused by some bad interaction with brew. Starting from a system without homebrew and installing everything in Sage instead, I don't run into this problem. Running doctests now.",
    "created_at": "2016-09-26T08:47:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290123",
    "user": "https://github.com/malb"
}
```

It seems this is caused by some bad interaction with brew. Starting from a system without homebrew and installing everything in Sage instead, I don't run into this problem. Running doctests now.



---

archive/issue_comments_290124.json:
```json
{
    "body": "Doctests pass, so I still cannot reproduce the buildbot failues.",
    "created_at": "2016-09-26T12:09:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290124",
    "user": "https://github.com/malb"
}
```

Doctests pass, so I still cannot reproduce the buildbot failues.



---

archive/issue_comments_290125.json:
```json
{
    "body": "I'm currently building on the build bot and will try to reproduce.",
    "created_at": "2016-09-27T09:04:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290125",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I'm currently building on the build bot and will try to reproduce.



---

archive/issue_comments_290126.json:
```json
{
    "body": "So on the OS X buildbot, the current branch is ok as far as the two files mentioned by Volker are cocnerned.\nI'll now merge with develop to see what changes.",
    "created_at": "2016-09-27T14:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290126",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

So on the OS X buildbot, the current branch is ok as far as the two files mentioned by Volker are cocnerned.
I'll now merge with develop to see what changes.



---

archive/issue_comments_290127.json:
```json
{
    "body": "Hum, just merging trac/develop and issuing make, the tests still pass...\nNow trying to make distclean and make.",
    "created_at": "2016-09-28T10:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290127",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Hum, just merging trac/develop and issuing make, the tests still pass...
Now trying to make distclean and make.



---

archive/issue_comments_290128.json:
```json
{
    "body": "Ok I can now reproduce it.\nMaybe openblas related?",
    "created_at": "2016-09-28T12:24:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290128",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Ok I can now reproduce it.
Maybe openblas related?



---

archive/issue_comments_290129.json:
```json
{
    "body": "To reproduce, I'd merge trac/develop, `make distclean` and `make`? I'll give that a try.",
    "created_at": "2016-09-28T12:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290129",
    "user": "https://github.com/malb"
}
```

To reproduce, I'd merge trac/develop, `make distclean` and `make`? I'll give that a try.



---

archive/issue_comments_290130.json:
```json
{
    "body": "fplll doesn't use any blas, btw, so that shouldn't be it.",
    "created_at": "2016-09-28T12:35:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290130",
    "user": "https://github.com/malb"
}
```

fplll doesn't use any blas, btw, so that shouldn't be it.



---

archive/issue_comments_290131.json:
```json
{
    "body": "Yes indeed, but I was looking for an easy culprit.\nAnd it has nothing to do with the problem here.\nDoing `make distclean; configure --with-blas=atlas; make` leads to the same errors.",
    "created_at": "2016-09-28T15:13:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290131",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Yes indeed, but I was looking for an easy culprit.
And it has nothing to do with the problem here.
Doing `make distclean; configure --with-blas=atlas; make` leads to the same errors.



---

archive/issue_comments_290132.json:
```json
{
    "body": "Wait, I don't see the same errors as Volker, at least with the latest build.\nIt seems `fpylll` got built before `sagelib` and the interface to sage ismissing.\nStrange.",
    "created_at": "2016-09-28T15:15:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290132",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Wait, I don't see the same errors as Volker, at least with the latest build.
It seems `fpylll` got built before `sagelib` and the interface to sage ismissing.
Strange.



---

archive/issue_comments_290133.json:
```json
{
    "body": "(And I'm using the correct branch where `sagelib` is in the `dependencies` file for `fpylll`.)",
    "created_at": "2016-09-28T15:18:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290133",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

(And I'm using the correct branch where `sagelib` is in the `dependencies` file for `fpylll`.)



---

archive/issue_comments_290134.json:
```json
{
    "body": "Forcing the recompilation of `fpylll` solved my issues... no more errors...",
    "created_at": "2016-09-28T15:19:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290134",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Forcing the recompilation of `fpylll` solved my issues... no more errors...



---

archive/issue_comments_290135.json:
```json
{
    "body": "Mhhh, `sagelib` is not the right thing to put as a `dependency`?",
    "created_at": "2016-09-29T07:33:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290135",
    "user": "https://github.com/malb"
}
```

Mhhh, `sagelib` is not the right thing to put as a `dependency`?



---

archive/issue_comments_290136.json:
```json
{
    "body": "It seems you're right.\nPutting `sagelib` in `dependencies` turns into `inst_sagelib` in `build/make/Makefile` and this target does not exist.\nThe creation process of that Makefile should be modified.\nOr the field in the dependency file...",
    "created_at": "2016-09-29T07:47:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290136",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

It seems you're right.
Putting `sagelib` in `dependencies` turns into `inst_sagelib` in `build/make/Makefile` and this target does not exist.
The creation process of that Makefile should be modified.
Or the field in the dependency file...



---

archive/issue_comments_290137.json:
```json
{
    "body": "Or put `| $(SAGERUNTIME)` in `dependencies`.",
    "created_at": "2016-09-29T08:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290137",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Or put `| $(SAGERUNTIME)` in `dependencies`.



---

archive/issue_comments_290138.json:
```json
{
    "body": "The conway_polynomials package depends on sage runtime if you want an example.",
    "created_at": "2016-09-29T08:30:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290138",
    "user": "https://github.com/vbraun"
}
```

The conway_polynomials package depends on sage runtime if you want an example.



---

archive/issue_comments_290139.json:
```json
{
    "body": "And maybe don't put it as an order only dependency in case fpylll must be recompiled if anything in the integer matrix class changes.",
    "created_at": "2016-09-29T08:53:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290139",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

And maybe don't put it as an order only dependency in case fpylll must be recompiled if anything in the integer matrix class changes.



---

archive/issue_comments_290140.json:
```json
{
    "body": "But `SAGERUNTIME` is a phony target so it surely does not matter.",
    "created_at": "2016-09-29T09:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290140",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

But `SAGERUNTIME` is a phony target so it surely does not matter.



---

archive/issue_comments_290141.json:
```json
{
    "body": "With a properly built Sage I get no segfault.\nSo maybe Volker setup ended up in broken state.",
    "created_at": "2016-09-29T10:45:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290141",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

With a properly built Sage I get no segfault.
So maybe Volker setup ended up in broken state.



---

archive/issue_comments_290142.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-29T17:02:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290142",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_290143.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2016-09-29T17:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290143",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_290144.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-10-03T22:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290144",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_056582.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-03T22:41:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21221#event-56582"
}
```



---

archive/issue_comments_290145.json:
```json
{
    "body": "Breakage: #21675",
    "created_at": "2016-10-10T08:53:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21221",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21221#issuecomment-290145",
    "user": "https://github.com/jdemeyer"
}
```

Breakage: #21675
