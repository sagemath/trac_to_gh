# Issue 21270: Polyhedron RDF face lattice bug / intersection of polyhedra

archive/issues_021033.json:
```json
{
    "assignees": [
        "https://github.com/mo271"
    ],
    "body": "As noted first on #20570, current Sage is not able to plot some LPs with irrational data. This appears to be due to a bug in the Sage polyhedron code for RDF data (which InteractiveLP uses when the data are not rational).\n\n```\n            sage: poly = polytopes.regular_polygon(7)\n            sage: lp, x = poly.to_linear_program(solver='InteractiveLP', return_variable=True)\n            sage: lp.set_objective(x[0] + x[1])\n            sage: b = lp.get_backend()\n            sage: P = b.interactive_lp_problem()\n            sage: p = P.plot() ### ERROR\n            sage: p.show()\n```\n\n\n\nCC:  @fchapoton @mo271 @jplab\n\nKeywords: **polyhedron, days84**\n\nBranch/Commit: **[`736f8a3`](https://github.com/sagemath/sagetrac-mirror/commit/736f8a3f3dcba14b43f527e9ab3a1a82f40280fb)**\n\nReviewer: **Jean-Philippe Labb\u00e9**\n\nAuthor: **Moritz Firsching**\n\nComponent: **geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21270_\n\n",
    "closed_at": "2017-04-05T19:38:05Z",
    "created_at": "2016-08-17T20:13:58Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Polyhedron RDF face lattice bug / intersection of polyhedra",
    "type": "issue",
    "updated_at": "2017-04-05T19:38:05Z",
    "url": "https://github.com/sagemath/sage/issues/21270",
    "user": "https://github.com/mkoeppe"
}
```
As noted first on #20570, current Sage is not able to plot some LPs with irrational data. This appears to be due to a bug in the Sage polyhedron code for RDF data (which InteractiveLP uses when the data are not rational).

```
            sage: poly = polytopes.regular_polygon(7)
            sage: lp, x = poly.to_linear_program(solver='InteractiveLP', return_variable=True)
            sage: lp.set_objective(x[0] + x[1])
            sage: b = lp.get_backend()
            sage: P = b.interactive_lp_problem()
            sage: p = P.plot() ### ERROR
            sage: p.show()
```



CC:  @fchapoton @mo271 @jplab

Keywords: **polyhedron, days84**

Branch/Commit: **[`736f8a3`](https://github.com/sagemath/sagetrac-mirror/commit/736f8a3f3dcba14b43f527e9ab3a1a82f40280fb)**

Reviewer: **Jean-Philippe Labbé**

Author: **Moritz Firsching**

Component: **geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/21270_





---

archive/issue_events_296399.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-17T20:13:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296399"
}
```



---

archive/issue_events_296400.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-17T20:13:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296400"
}
```



---

archive/issue_events_296401.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-17T20:13:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296401"
}
```



---

archive/issue_events_296402.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-17T20:14:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20geometry",
    "label_color": "0000ff",
    "label_name": "c: geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296402"
}
```



---

archive/issue_comments_311028.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nmisleading comment deleted",
    "created_at": "2017-03-06T17:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311028",
    "user": "https://github.com/mo271"
}
```

<div id="comment:4" align="right">comment:4</div>

misleading comment deleted



---

archive/issue_comments_311029.json:
```json
{
    "body": "Changed keywords from none to **polyhedron, days84**",
    "created_at": "2017-03-06T17:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311029",
    "user": "https://github.com/mo271"
}
```

Changed keywords from none to **polyhedron, days84**



---

archive/issue_events_296403.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-03-06T17:41:36Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "subject": "https://github.com/mo271",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296403"
}
```



---

archive/issue_events_296404.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-03-06T18:00:43Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "title_is": "Polyhedron RDF face lattice bug",
    "title_was": "Polyhedron RDF plotting bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296404"
}
```



---

archive/issue_comments_311030.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nApperently something goes wrong when taking the intersection of a polyhedron in RDF and one in QQ:\nQ plays the role of box in the function `plot_feasible_set` of `interactive_simplex_method.py`.\n\n```\nsage: L=[[1349811595/3385908, -488029882/7345133],\n....:  [1349811595/3385908, 1349811595/5078862],\n....:  [-732044823/7345133, 1349811595/5078862],\n....:  [-732044823/7345133, -488029882/7345133]]\n....: \nsage: \nsage: Q=Polyhedron(L)\nsage: P=Polyhedron(polytopes.regular_polygon(7).vertices_list(), base_ring=RDF)\nsage: P.intersection(Q)\nA -1-dimensional polyhedron in RDF^2 defined as the convex hull of 7 vertices\nsage: Q.intersection(P)\nThe empty polyhedron in RDF^2\n```",
    "created_at": "2017-03-06T22:13:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311030",
    "user": "https://github.com/mo271"
}
```

<div id="comment:6" align="right">comment:6</div>

Apperently something goes wrong when taking the intersection of a polyhedron in RDF and one in QQ:
Q plays the role of box in the function `plot_feasible_set` of `interactive_simplex_method.py`.

```
sage: L=[[1349811595/3385908, -488029882/7345133],
....:  [1349811595/3385908, 1349811595/5078862],
....:  [-732044823/7345133, 1349811595/5078862],
....:  [-732044823/7345133, -488029882/7345133]]
....: 
sage: 
sage: Q=Polyhedron(L)
sage: P=Polyhedron(polytopes.regular_polygon(7).vertices_list(), base_ring=RDF)
sage: P.intersection(Q)
A -1-dimensional polyhedron in RDF^2 defined as the convex hull of 7 vertices
sage: Q.intersection(P)
The empty polyhedron in RDF^2
```



---

archive/issue_comments_311031.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHere is a smaller example of the failing intersection between QQ and RDF polyhedra:\n\n```\nsage: Q=Polyhedron(ieqs=[[-499999,1000000],[1499999,-1000000]])\nsage: P=Polyhedron(ieqs=[[0,1.0],[1.0,-1.0]], base_ring=RDF)\nsage: Q.intersection(P)\nThe empty polyhedron in RDF^1\nsage: P.intersection(Q)\nA 1-dimensional polyhedron in RDF^1 defined as the convex hull of 2 vertices\nsage: Q=Polyhedron(ieqs=[[-4999999,10000000],[14999999,-10000000]])\nsage: P.intersection(Q)\n``` \nThe last command then raises \n`ValueError: *Error: Numerical inconsistency is found.  Use the GMP exact arithmetic.`, which is better than a wrong result, I guess. In any case one should perhaps do the conversions of the base ring more explicitly.\n\n\nThe relevant function in base.py reads:\n\n```       \n        new_ieqs = self.inequalities() + other.inequalities()\n        new_eqns = self.equations() + other.equations()\n        parent = self.parent()\n        try:\n            return parent.element_class(parent, None, [new_ieqs, new_eqns])\n        except TypeError as msg:\n            if self.base_ring() is ZZ:\n                parent = parent.base_extend(QQ)\n                return parent.element_class(parent, None, [new_ieqs, new_eqns])\n            else:\n                raise TypeError(msg)\n```\nSo in the example above we have in the new_ieqs variable:\n\n```\n(An inequality (1.0) x + 0.0 >= 0,\n An inequality (-1.0) x + 1.0 >= 0,\n An inequality (-10000000) x + 14999999 >= 0,\n An inequality (10000000) x - 4999999 >= 0)\n```\nWhich leads to the unexpected behaviour",
    "created_at": "2017-03-06T23:23:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311031",
    "user": "https://github.com/mo271"
}
```

<div id="comment:7" align="right">comment:7</div>

Here is a smaller example of the failing intersection between QQ and RDF polyhedra:

```
sage: Q=Polyhedron(ieqs=[[-499999,1000000],[1499999,-1000000]])
sage: P=Polyhedron(ieqs=[[0,1.0],[1.0,-1.0]], base_ring=RDF)
sage: Q.intersection(P)
The empty polyhedron in RDF^1
sage: P.intersection(Q)
A 1-dimensional polyhedron in RDF^1 defined as the convex hull of 2 vertices
sage: Q=Polyhedron(ieqs=[[-4999999,10000000],[14999999,-10000000]])
sage: P.intersection(Q)
``` 
The last command then raises 
`ValueError: *Error: Numerical inconsistency is found.  Use the GMP exact arithmetic.`, which is better than a wrong result, I guess. In any case one should perhaps do the conversions of the base ring more explicitly.


The relevant function in base.py reads:

```       
        new_ieqs = self.inequalities() + other.inequalities()
        new_eqns = self.equations() + other.equations()
        parent = self.parent()
        try:
            return parent.element_class(parent, None, [new_ieqs, new_eqns])
        except TypeError as msg:
            if self.base_ring() is ZZ:
                parent = parent.base_extend(QQ)
                return parent.element_class(parent, None, [new_ieqs, new_eqns])
            else:
                raise TypeError(msg)
```
So in the example above we have in the new_ieqs variable:

```
(An inequality (1.0) x + 0.0 >= 0,
 An inequality (-1.0) x + 1.0 >= 0,
 An inequality (-10000000) x + 14999999 >= 0,
 An inequality (10000000) x - 4999999 >= 0)
```
Which leads to the unexpected behaviour



---

archive/issue_events_296405.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-03-06T23:23:02Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "title_is": "Polyhedron RDF face lattice bug / intersection of polyhedra",
    "title_was": "Polyhedron RDF face lattice bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296405"
}
```



---

archive/issue_comments_311032.json:
```json
{
    "body": "Branch: **[u/moritz/21270](https://github.com/sagemath/sagetrac-mirror/tree/u/moritz/21270)**",
    "created_at": "2017-03-07T17:18:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311032",
    "user": "https://github.com/mo271"
}
```

Branch: **[u/moritz/21270](https://github.com/sagemath/sagetrac-mirror/tree/u/moritz/21270)**



---

archive/issue_comments_311033.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis commit fixes the instances of the problem, that I added. \n\nThe original thing is still not working, but this is now another bug (more later).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83d5e8f9fc68d4dbaf09ed87db216a5cd3c24922\"><code>83d5e8f</code></a></td><td><code>normalizing for rational input, when converting polyhedra to RDF</code></td></tr></table>\n",
    "created_at": "2017-03-07T17:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311033",
    "user": "https://github.com/mo271"
}
```

<div id="comment:9" align="right">comment:9</div>

This commit fixes the instances of the problem, that I added. 

The original thing is still not working, but this is now another bug (more later).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83d5e8f9fc68d4dbaf09ed87db216a5cd3c24922"><code>83d5e8f</code></a></td><td><code>normalizing for rational input, when converting polyhedra to RDF</code></td></tr></table>




---

archive/issue_comments_311034.json:
```json
{
    "body": "Commit: **[`83d5e8f`](https://github.com/sagemath/sagetrac-mirror/commit/83d5e8f9fc68d4dbaf09ed87db216a5cd3c24922)**",
    "created_at": "2017-03-07T17:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311034",
    "user": "https://github.com/mo271"
}
```

Commit: **[`83d5e8f`](https://github.com/sagemath/sagetrac-mirror/commit/83d5e8f9fc68d4dbaf09ed87db216a5cd3c24922)**



---

archive/issue_comments_311035.json:
```json
{
    "body": "Changed commit from **[`83d5e8f`](https://github.com/sagemath/sagetrac-mirror/commit/83d5e8f9fc68d4dbaf09ed87db216a5cd3c24922)** to **[`3e1ebc0`](https://github.com/sagemath/sagetrac-mirror/commit/3e1ebc0c5746c5ee68e296c344ad1464f3d7e4e8)**",
    "created_at": "2017-03-07T17:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311035",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`83d5e8f`](https://github.com/sagemath/sagetrac-mirror/commit/83d5e8f9fc68d4dbaf09ed87db216a5cd3c24922)** to **[`3e1ebc0`](https://github.com/sagemath/sagetrac-mirror/commit/3e1ebc0c5746c5ee68e296c344ad1464f3d7e4e8)**



---

archive/issue_comments_311036.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e1ebc0c5746c5ee68e296c344ad1464f3d7e4e8\"><code>3e1ebc0</code></a></td><td><code>use the correct base ring</code></td></tr></table>\n",
    "created_at": "2017-03-07T17:28:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311036",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e1ebc0c5746c5ee68e296c344ad1464f3d7e4e8"><code>3e1ebc0</code></a></td><td><code>use the correct base ring</code></td></tr></table>




---

archive/issue_comments_311037.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nNow it works..",
    "created_at": "2017-03-07T17:29:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311037",
    "user": "https://github.com/mo271"
}
```

<div id="comment:11" align="right">comment:11</div>

Now it works..



---

archive/issue_comments_311038.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,7 @@\n             sage: lp.set_objective(x[0] + x[1])\n             sage: b = lp.get_backend()\n             sage: P = b.interactive_lp_problem()\n-            sage: p = P.plot()    ### ERROR\n-            sage: p.show()\n+            sage: p = P.plot(xmin=-3, xmax=8, ymin=-2, ymax=4) ### ERROR\n+            sage: p.show(dpi=400)\n ```\n \n``````\n",
    "created_at": "2017-03-09T20:44:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311038",
    "user": "https://github.com/mo271"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,7 @@
             sage: lp.set_objective(x[0] + x[1])
             sage: b = lp.get_backend()
             sage: P = b.interactive_lp_problem()
-            sage: p = P.plot()    ### ERROR
-            sage: p.show()
+            sage: p = P.plot(xmin=-3, xmax=8, ymin=-2, ymax=4) ### ERROR
+            sage: p.show(dpi=400)
 ```
 
``````




---

archive/issue_comments_311039.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI submitted a fix to this bug. \n\n\nExplanation:\nWhat went wrong was was happens if a polyhedron in `QQ` is intersection with a polyhedron in `RDF`; basically it takes the union of the inequalities. The inequalities are typically stored as linear inequality with coefficients in `ZZ`. Those coefficients can get very large and cause numerical trouble when converted to `RDF`. Thus it is advisable to convert the inequalities to `RDF` only after some renormalization. We choose to divide all terms of the inequality by the absolute values of the coefficient with the largest absolute value. (In case all the coefficients are zero, we leave it as is.)\n\nThis helped with the examples above. In the original question there was another problem: in the method `_solve` of the class `InteractiveLPProblem(` in the `interactive_simplex_method.py` file, taking the base ring to be something other than the base ring of the feasible region (which might have been coerced to something else) caused trouble. I changed this by simply setting \n\n```\nR = F.base_ring()\n```\n\nThen I was able to produce the plot.",
    "created_at": "2017-03-09T21:02:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311039",
    "user": "https://github.com/mo271"
}
```

<div id="comment:13" align="right">comment:13</div>

I submitted a fix to this bug. 


Explanation:
What went wrong was was happens if a polyhedron in `QQ` is intersection with a polyhedron in `RDF`; basically it takes the union of the inequalities. The inequalities are typically stored as linear inequality with coefficients in `ZZ`. Those coefficients can get very large and cause numerical trouble when converted to `RDF`. Thus it is advisable to convert the inequalities to `RDF` only after some renormalization. We choose to divide all terms of the inequality by the absolute values of the coefficient with the largest absolute value. (In case all the coefficients are zero, we leave it as is.)

This helped with the examples above. In the original question there was another problem: in the method `_solve` of the class `InteractiveLPProblem(` in the `interactive_simplex_method.py` file, taking the base ring to be something other than the base ring of the feasible region (which might have been coerced to something else) caused trouble. I changed this by simply setting 

```
R = F.base_ring()
```

Then I was able to produce the plot.



---

archive/issue_comments_311040.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,7 +6,8 @@\n             sage: lp.set_objective(x[0] + x[1])\n             sage: b = lp.get_backend()\n             sage: P = b.interactive_lp_problem()\n-            sage: p = P.plot(xmin=-3, xmax=8, ymin=-2, ymax=4) ### ERROR\n-            sage: p.show(dpi=400)\n+            sage: p = P.plot() ### ERROR\n+            sage: p.show()\n ```\n \n+\n``````\n",
    "created_at": "2017-03-09T21:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311040",
    "user": "https://github.com/mo271"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,7 +6,8 @@
             sage: lp.set_objective(x[0] + x[1])
             sage: b = lp.get_backend()
             sage: P = b.interactive_lp_problem()
-            sage: p = P.plot(xmin=-3, xmax=8, ymin=-2, ymax=4) ### ERROR
-            sage: p.show(dpi=400)
+            sage: p = P.plot() ### ERROR
+            sage: p.show()
 ```
 
+
``````




---

archive/issue_comments_311041.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nBy the way a better plotting result is obtained by \n\n``` \nsage: p = P.plot(xmin=-3, xmax=8, ymin=-2, ymax=4) \nsage: p.show(dpi=500)\n```\nBut giving an explicit bounding box circumvents the first problem..",
    "created_at": "2017-03-09T21:07:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311041",
    "user": "https://github.com/mo271"
}
```

<div id="comment:15" align="right">comment:15</div>

By the way a better plotting result is obtained by 

``` 
sage: p = P.plot(xmin=-3, xmax=8, ymin=-2, ymax=4) 
sage: p.show(dpi=500)
```
But giving an explicit bounding box circumvents the first problem..



---

archive/issue_comments_311042.json:
```json
{
    "body": "Changed commit from **[`3e1ebc0`](https://github.com/sagemath/sagetrac-mirror/commit/3e1ebc0c5746c5ee68e296c344ad1464f3d7e4e8)** to **[`85bb29e`](https://github.com/sagemath/sagetrac-mirror/commit/85bb29e255626dce99c63987158f5982000a0525)**",
    "created_at": "2017-03-09T21:07:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311042",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3e1ebc0`](https://github.com/sagemath/sagetrac-mirror/commit/3e1ebc0c5746c5ee68e296c344ad1464f3d7e4e8)** to **[`85bb29e`](https://github.com/sagemath/sagetrac-mirror/commit/85bb29e255626dce99c63987158f5982000a0525)**



---

archive/issue_comments_311043.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/85bb29e255626dce99c63987158f5982000a0525\"><code>85bb29e</code></a></td><td><code>added doctests</code></td></tr></table>\n",
    "created_at": "2017-03-09T21:07:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311043",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/85bb29e255626dce99c63987158f5982000a0525"><code>85bb29e</code></a></td><td><code>added doctests</code></td></tr></table>




---

archive/issue_events_296406.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-03-09T21:08:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296406"
}
```



---

archive/issue_comments_311044.json:
```json
{
    "body": "Author: **Moritz Firsching**",
    "created_at": "2017-03-09T21:09:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311044",
    "user": "https://github.com/mo271"
}
```

Author: **Moritz Firsching**



---

archive/issue_comments_311045.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nThere seems to be a merge conflict. Could you rebase it?",
    "created_at": "2017-03-15T15:58:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311045",
    "user": "https://github.com/jplab"
}
```

<div id="comment:19" align="right">comment:19</div>

There seems to be a merge conflict. Could you rebase it?



---

archive/issue_events_296407.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-03-15T15:58:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296407"
}
```



---

archive/issue_events_296408.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2017-03-15T15:58:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296408"
}
```



---

archive/issue_comments_311046.json:
```json
{
    "body": "Changed commit from **[`85bb29e`](https://github.com/sagemath/sagetrac-mirror/commit/85bb29e255626dce99c63987158f5982000a0525)** to **[`455e83e`](https://github.com/sagemath/sagetrac-mirror/commit/455e83e035fc7acb18d5ad565ae10a77d68c7d2d)**",
    "created_at": "2017-03-16T20:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311046",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`85bb29e`](https://github.com/sagemath/sagetrac-mirror/commit/85bb29e255626dce99c63987158f5982000a0525)** to **[`455e83e`](https://github.com/sagemath/sagetrac-mirror/commit/455e83e035fc7acb18d5ad565ae10a77d68c7d2d)**



---

archive/issue_comments_311047.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3274eca2b5028af92eec82f694d3efd2686bb7b8\"><code>3274eca</code></a></td><td><code>normalizing for rational input, when converting polyhedra to RDF</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef00c9aeaa91dcc756102702de8bc84dedde2f65\"><code>ef00c9a</code></a></td><td><code>use the correct base ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/54ff7b8848bf99b4c24d039058875a68f4bc7e60\"><code>54ff7b8</code></a></td><td><code>added doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/455e83e035fc7acb18d5ad565ae10a77d68c7d2d\"><code>455e83e</code></a></td><td><code>indentation of docstring</code></td></tr></table>\n",
    "created_at": "2017-03-16T20:50:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311047",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3274eca2b5028af92eec82f694d3efd2686bb7b8"><code>3274eca</code></a></td><td><code>normalizing for rational input, when converting polyhedra to RDF</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef00c9aeaa91dcc756102702de8bc84dedde2f65"><code>ef00c9a</code></a></td><td><code>use the correct base ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/54ff7b8848bf99b4c24d039058875a68f4bc7e60"><code>54ff7b8</code></a></td><td><code>added doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/455e83e035fc7acb18d5ad565ae10a77d68c7d2d"><code>455e83e</code></a></td><td><code>indentation of docstring</code></td></tr></table>




---

archive/issue_comments_311048.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis should now merge cleanly. (There was just an issue with some trailing whitespace that I had removed in a line that was changed in rc0.)",
    "created_at": "2017-03-16T20:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311048",
    "user": "https://github.com/mo271"
}
```

<div id="comment:22" align="right">comment:22</div>

This should now merge cleanly. (There was just an issue with some trailing whitespace that I had removed in a line that was changed in rc0.)



---

archive/issue_events_296409.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-03-16T20:51:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296409"
}
```



---

archive/issue_events_296410.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-03-16T20:51:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296410"
}
```



---

archive/issue_comments_311049.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nHi Moritz,\n\nThere are a couple of missing spaces between binary operator.\n\nLet's see what the bot thinks.",
    "created_at": "2017-03-17T14:47:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311049",
    "user": "https://github.com/jplab"
}
```

<div id="comment:23" align="right">comment:23</div>

Hi Moritz,

There are a couple of missing spaces between binary operator.

Let's see what the bot thinks.



---

archive/issue_comments_311050.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nHi Moritz,\n\nThe bot is happy and it looks good to me. If you correct the 3 spacing around operators in the `parent.py`, you can set it to positive review on my behalf.",
    "created_at": "2017-03-30T09:21:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311050",
    "user": "https://github.com/jplab"
}
```

<div id="comment:24" align="right">comment:24</div>

Hi Moritz,

The bot is happy and it looks good to me. If you correct the 3 spacing around operators in the `parent.py`, you can set it to positive review on my behalf.



---

archive/issue_comments_311051.json:
```json
{
    "body": "Reviewer: **Jean-Philippe Labb\u00e9**",
    "created_at": "2017-03-30T09:22:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311051",
    "user": "https://github.com/jplab"
}
```

Reviewer: **Jean-Philippe Labbé**



---

archive/issue_comments_311052.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc1dd36fef52ab666cd75678d5d868b936dc6182\"><code>bc1dd36</code></a></td><td><code>normalizing for rational input, when converting polyhedra to RDF</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/abdfa7ec84b68824cfb60b911e2d0c14e0c1c2e1\"><code>abdfa7e</code></a></td><td><code>use the correct base ring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ca25df07d19fe7e1061c2e3a09801df65268fea\"><code>1ca25df</code></a></td><td><code>added doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6c628edb71d16e64fa79b456339ed75a53722f66\"><code>6c628ed</code></a></td><td><code>indentation of docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/736f8a3f3dcba14b43f527e9ab3a1a82f40280fb\"><code>736f8a3</code></a></td><td><code>rebase and whitespace</code></td></tr></table>\n",
    "created_at": "2017-03-30T18:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311052",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc1dd36fef52ab666cd75678d5d868b936dc6182"><code>bc1dd36</code></a></td><td><code>normalizing for rational input, when converting polyhedra to RDF</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/abdfa7ec84b68824cfb60b911e2d0c14e0c1c2e1"><code>abdfa7e</code></a></td><td><code>use the correct base ring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ca25df07d19fe7e1061c2e3a09801df65268fea"><code>1ca25df</code></a></td><td><code>added doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6c628edb71d16e64fa79b456339ed75a53722f66"><code>6c628ed</code></a></td><td><code>indentation of docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/736f8a3f3dcba14b43f527e9ab3a1a82f40280fb"><code>736f8a3</code></a></td><td><code>rebase and whitespace</code></td></tr></table>




---

archive/issue_comments_311053.json:
```json
{
    "body": "Changed commit from **[`455e83e`](https://github.com/sagemath/sagetrac-mirror/commit/455e83e035fc7acb18d5ad565ae10a77d68c7d2d)** to **[`736f8a3`](https://github.com/sagemath/sagetrac-mirror/commit/736f8a3f3dcba14b43f527e9ab3a1a82f40280fb)**",
    "created_at": "2017-03-30T18:16:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311053",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`455e83e`](https://github.com/sagemath/sagetrac-mirror/commit/455e83e035fc7acb18d5ad565ae10a77d68c7d2d)** to **[`736f8a3`](https://github.com/sagemath/sagetrac-mirror/commit/736f8a3f3dcba14b43f527e9ab3a1a82f40280fb)**



---

archive/issue_comments_311054.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThank for your review, JP!",
    "created_at": "2017-03-30T18:20:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311054",
    "user": "https://github.com/mo271"
}
```

<div id="comment:27" align="right">comment:27</div>

Thank for your review, JP!



---

archive/issue_events_296411.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-04-02T20:16:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296411"
}
```



---

archive/issue_events_296412.json:
```json
{
    "actor": "https://github.com/mo271",
    "created_at": "2017-04-02T20:16:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296412"
}
```



---

archive/issue_comments_311055.json:
```json
{
    "body": "Changed branch from **[u/moritz/21270](https://github.com/sagemath/sagetrac-mirror/tree/u/moritz/21270)** to **[`736f8a3`](https://github.com/sagemath/sagetrac-mirror/commit/736f8a3f3dcba14b43f527e9ab3a1a82f40280fb)**",
    "created_at": "2017-04-05T19:38:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21270#issuecomment-311055",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/moritz/21270](https://github.com/sagemath/sagetrac-mirror/tree/u/moritz/21270)** to **[`736f8a3`](https://github.com/sagemath/sagetrac-mirror/commit/736f8a3f3dcba14b43f527e9ab3a1a82f40280fb)**



---

archive/issue_events_296413.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-05T19:38:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296413"
}
```



---

archive/issue_events_296414.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "30033d7580edd1589eb6af9fd4497e84163a856a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-04-05T19:38:05Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21270",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21270#event-296414"
}
```
