# Issue 21452: simplify/speed up {Integer,Rational}.__cinit__()

archive/issues_021215.json:
```json
{
    "body": "Before:\n\n```\nsage: a = ZZ(1)\nsage: timeit('a+a', number=10^6, repeat=20)\n1000000 loops, best of 20: 59.5 ns per loop\nsage: a = QQ(1)\nsage: timeit('a+a', number=10^6, repeat=20)\n1000000 loops, best of 20: 420 ns per loop\n```\n\nAfter:\n\n```\nsage: a = ZZ(1)\nsage: timeit('a+a', number=10^6, repeat=20)\n1000000 loops, best of 20: 58.7 ns per loop\nsage: a = QQ(1)\nsage: timeit('a+a', number=10^6, repeat=20)\n1000000 loops, best of 20: 403 ns per loop\n```\n\nBranch/Commit: c226b250f64ac621a8eb5866e88e04d613a63305\n\nReviewer: Jeroen Demeyer\n\nAuthor: Marc Mezzarobba\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21452\n\n",
    "closed_at": "2016-09-10T09:00:09Z",
    "created_at": "2016-09-08T16:30:53Z",
    "labels": [
        "component: performance"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "simplify/speed up {Integer,Rational}.__cinit__()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21452",
    "user": "https://github.com/mezzarobba"
}
```
Before:

```
sage: a = ZZ(1)
sage: timeit('a+a', number=10^6, repeat=20)
1000000 loops, best of 20: 59.5 ns per loop
sage: a = QQ(1)
sage: timeit('a+a', number=10^6, repeat=20)
1000000 loops, best of 20: 420 ns per loop
```

After:

```
sage: a = ZZ(1)
sage: timeit('a+a', number=10^6, repeat=20)
1000000 loops, best of 20: 58.7 ns per loop
sage: a = QQ(1)
sage: timeit('a+a', number=10^6, repeat=20)
1000000 loops, best of 20: 403 ns per loop
```

Branch/Commit: c226b250f64ac621a8eb5866e88e04d613a63305

Reviewer: Jeroen Demeyer

Author: Marc Mezzarobba

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21452





---

archive/issue_comments_389615.json:
```json
{
    "body": "<a id='comment:1'></a>\nWith my limited knowledge of Cython, I'm not sure why it seems to help that much more in the case of rationals, or if this is the right thing to do at all (though the generated code looks okay to me).\n\n---\nNew commits:\n|                                                                                                                                          |                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[c226b25](https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305)|`#21452 simplify/speed up {Integer,Rational}.__cinit__`|",
    "created_at": "2016-09-08T16:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389615",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:1'></a>
With my limited knowledge of Cython, I'm not sure why it seems to help that much more in the case of rationals, or if this is the right thing to do at all (though the generated code looks okay to me).

---
New commits:
|                                                                                                                                          |                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[c226b25](https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305)|`#21452 simplify/speed up {Integer,Rational}.__cinit__`|



---

archive/issue_comments_389616.json:
```json
{
    "body": "Changing branch from \"\" to \"u/mmezzarobba/rat_cinit\"",
    "created_at": "2016-09-08T16:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389616",
    "user": "https://github.com/mezzarobba"
}
```

Changing branch from "" to "u/mmezzarobba/rat_cinit"



---

archive/issue_comments_389617.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-09-08T16:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389617",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_389618.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,21 @@\n+Before:\n \n+```\n+sage: a = ZZ(1)\n+sage: timeit('a+a', number=10^6, repeat=20)\n+1000000 loops, best of 20: 59.5 ns per loop\n+sage: a = QQ(1)\n+sage: timeit('a+a', number=10^6, repeat=20)\n+1000000 loops, best of 20: 420 ns per loop\n+```\n+\n+After:\n+\n+```\n+sage: a = ZZ(1)\n+sage: timeit('a+a', number=10^6, repeat=20)\n+1000000 loops, best of 20: 58.7 ns per loop\n+sage: a = QQ(1)\n+sage: timeit('a+a', number=10^6, repeat=20)\n+1000000 loops, best of 20: 403 ns per loop\n+```\n``````\n",
    "created_at": "2016-09-08T16:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389618",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,21 @@
+Before:
 
+```
+sage: a = ZZ(1)
+sage: timeit('a+a', number=10^6, repeat=20)
+1000000 loops, best of 20: 59.5 ns per loop
+sage: a = QQ(1)
+sage: timeit('a+a', number=10^6, repeat=20)
+1000000 loops, best of 20: 420 ns per loop
+```
+
+After:
+
+```
+sage: a = ZZ(1)
+sage: timeit('a+a', number=10^6, repeat=20)
+1000000 loops, best of 20: 58.7 ns per loop
+sage: a = QQ(1)
+sage: timeit('a+a', number=10^6, repeat=20)
+1000000 loops, best of 20: 403 ns per loop
+```
``````




---

archive/issue_comments_389619.json:
```json
{
    "body": "Changing commit from \"\" to \"c226b250f64ac621a8eb5866e88e04d613a63305\"",
    "created_at": "2016-09-08T16:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389619",
    "user": "https://github.com/mezzarobba"
}
```

Changing commit from "" to "c226b250f64ac621a8eb5866e88e04d613a63305"



---

archive/issue_comments_389620.json:
```json
{
    "body": "Changing author from \"\" to \"Marc Mezzarobba\"",
    "created_at": "2016-09-08T16:36:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389620",
    "user": "https://github.com/mezzarobba"
}
```

Changing author from "" to "Marc Mezzarobba"



---

archive/issue_comments_389621.json:
```json
{
    "body": "<a id='comment:2'></a>\nWhy call this object `the_integer_ring` instead of `ZZ`?",
    "created_at": "2016-09-08T18:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389621",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>
Why call this object `the_integer_ring` instead of `ZZ`?



---

archive/issue_comments_389622.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [jdemeyer](#comment%3A2):\n> Why call this object `the_integer_ring` instead of `ZZ`?\n\n\nI don't know, I kept the name and didn't really look at the rest of the file or anything.",
    "created_at": "2016-09-08T18:39:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389622",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'></a>
Replying to [jdemeyer](#comment%3A2):
> Why call this object `the_integer_ring` instead of `ZZ`?


I don't know, I kept the name and didn't really look at the rest of the file or anything.



---

archive/issue_comments_389623.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-09T07:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389623",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_389624.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2016-09-09T07:35:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389624",
    "user": "https://github.com/jdemeyer"
}
```

Changing reviewer from "" to "Jeroen Demeyer"



---

archive/issue_comments_389625.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-09-10T09:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389625",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_389626.json:
```json
{
    "body": "Changing branch from \"u/mmezzarobba/rat_cinit\" to \"c226b250f64ac621a8eb5866e88e04d613a63305\"",
    "created_at": "2016-09-10T09:00:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21452#issuecomment-389626",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/mmezzarobba/rat_cinit" to "c226b250f64ac621a8eb5866e88e04d613a63305"



---

archive/issue_events_072598.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-10T09:00:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21452",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21452#event-72598"
}
```
