# Issue 21452: simplify/speed up {Integer,Rational}.__cinit__()

archive/issues_021215.json:
```json
{
    "assignees": [],
    "body": "Before:\n\n```\nsage: a = ZZ(1)\nsage: timeit('a+a', number=10^6, repeat=20)\n1000000 loops, best of 20: 59.5 ns per loop\nsage: a = QQ(1)\nsage: timeit('a+a', number=10^6, repeat=20)\n1000000 loops, best of 20: 420 ns per loop\n```\n\nAfter:\n\n```\nsage: a = ZZ(1)\nsage: timeit('a+a', number=10^6, repeat=20)\n1000000 loops, best of 20: 58.7 ns per loop\nsage: a = QQ(1)\nsage: timeit('a+a', number=10^6, repeat=20)\n1000000 loops, best of 20: 403 ns per loop\n```\n\nBranch/Commit: **[c226b25](https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Marc Mezzarobba**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21452_\n\n",
    "closed_at": "2016-09-10T09:00:09Z",
    "created_at": "2016-09-08T16:30:53Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/performance",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "simplify/speed up {Integer,Rational}.__cinit__()",
    "type": "issue",
    "updated_at": "2016-09-10T09:00:09Z",
    "url": "https://github.com/sagemath/sage/issues/21452",
    "user": "https://github.com/mezzarobba"
}
```
Before:

```
sage: a = ZZ(1)
sage: timeit('a+a', number=10^6, repeat=20)
1000000 loops, best of 20: 59.5 ns per loop
sage: a = QQ(1)
sage: timeit('a+a', number=10^6, repeat=20)
1000000 loops, best of 20: 420 ns per loop
```

After:

```
sage: a = ZZ(1)
sage: timeit('a+a', number=10^6, repeat=20)
1000000 loops, best of 20: 58.7 ns per loop
sage: a = QQ(1)
sage: timeit('a+a', number=10^6, repeat=20)
1000000 loops, best of 20: 403 ns per loop
```

Branch/Commit: **[c226b25](https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305)**

Reviewer: **Jeroen Demeyer**

Author: **Marc Mezzarobba**

_Issue created by migration from https://trac.sagemath.org/ticket/21452_





---

archive/issue_events_283418.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-08T16:30:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283418"
}
```



---

archive/issue_events_283419.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-08T16:30:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283419"
}
```



---

archive/issue_comments_317011.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nWith my limited knowledge of Cython, I'm not sure why it seems to help that much more in the case of rationals, or if this is the right thing to do at all (though the generated code looks okay to me).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305\">c226b25</a></td><td><code>#21452 simplify/speed up {Integer,Rational}.__cinit__</code></td></tr></table>\n",
    "created_at": "2016-09-08T16:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317011",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:1'>Comment 1:</a>
With my limited knowledge of Cython, I'm not sure why it seems to help that much more in the case of rationals, or if this is the right thing to do at all (though the generated code looks okay to me).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305">c226b25</a></td><td><code>#21452 simplify/speed up {Integer,Rational}.__cinit__</code></td></tr></table>




---

archive/issue_events_283420.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-08T16:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "label": "https://github.com/sagemath/sage/labels/performance",
    "label_color": "696969",
    "label_name": "performance",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283420"
}
```



---

archive/issue_comments_317012.json:
```json
{
    "body": "Branch: **[u/mmezzarobba/rat_cinit](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/rat_cinit)**",
    "created_at": "2016-09-08T16:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317012",
    "user": "https://github.com/mezzarobba"
}
```

Branch: **[u/mmezzarobba/rat_cinit](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/rat_cinit)**



---

archive/issue_events_283421.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-08T16:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283421"
}
```



---

archive/issue_comments_317013.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,21 @@\n+Before:\n \n+```\n+sage: a = ZZ(1)\n+sage: timeit('a+a', number=10^6, repeat=20)\n+1000000 loops, best of 20: 59.5 ns per loop\n+sage: a = QQ(1)\n+sage: timeit('a+a', number=10^6, repeat=20)\n+1000000 loops, best of 20: 420 ns per loop\n+```\n+\n+After:\n+\n+```\n+sage: a = ZZ(1)\n+sage: timeit('a+a', number=10^6, repeat=20)\n+1000000 loops, best of 20: 58.7 ns per loop\n+sage: a = QQ(1)\n+sage: timeit('a+a', number=10^6, repeat=20)\n+1000000 loops, best of 20: 403 ns per loop\n+```\n``````\n",
    "created_at": "2016-09-08T16:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317013",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,21 @@
+Before:
 
+```
+sage: a = ZZ(1)
+sage: timeit('a+a', number=10^6, repeat=20)
+1000000 loops, best of 20: 59.5 ns per loop
+sage: a = QQ(1)
+sage: timeit('a+a', number=10^6, repeat=20)
+1000000 loops, best of 20: 420 ns per loop
+```
+
+After:
+
+```
+sage: a = ZZ(1)
+sage: timeit('a+a', number=10^6, repeat=20)
+1000000 loops, best of 20: 58.7 ns per loop
+sage: a = QQ(1)
+sage: timeit('a+a', number=10^6, repeat=20)
+1000000 loops, best of 20: 403 ns per loop
+```
``````




---

archive/issue_comments_317014.json:
```json
{
    "body": "Commit: **[c226b25](https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305)**",
    "created_at": "2016-09-08T16:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317014",
    "user": "https://github.com/mezzarobba"
}
```

Commit: **[c226b25](https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305)**



---

archive/issue_events_283422.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-08T16:36:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283422"
}
```



---

archive/issue_comments_317015.json:
```json
{
    "body": "Author: **Marc Mezzarobba**",
    "created_at": "2016-09-08T16:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317015",
    "user": "https://github.com/mezzarobba"
}
```

Author: **Marc Mezzarobba**



---

archive/issue_comments_317016.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nWhy call this object `the_integer_ring` instead of `ZZ`?",
    "created_at": "2016-09-08T18:26:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317016",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'>Comment 2:</a>
Why call this object `the_integer_ring` instead of `ZZ`?



---

archive/issue_comments_317017.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nReplying to [@jdemeyer](#comment%3A2):\n> Why call this object `the_integer_ring` instead of `ZZ`?\n\nI don't know, I kept the name and didn't really look at the rest of the file or anything.",
    "created_at": "2016-09-08T18:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317017",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:3'>Comment 3:</a>
Replying to [@jdemeyer](#comment%3A2):
> Why call this object `the_integer_ring` instead of `ZZ`?

I don't know, I kept the name and didn't really look at the rest of the file or anything.



---

archive/issue_events_283423.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-09-09T07:35:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283423"
}
```



---

archive/issue_events_283424.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-09-09T07:35:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283424"
}
```



---

archive/issue_comments_317018.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-09-09T07:35:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317018",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_317019.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/rat_cinit](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/rat_cinit)** to **[c226b25](https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305)**",
    "created_at": "2016-09-10T09:00:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21452#issuecomment-317019",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/rat_cinit](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/rat_cinit)** to **[c226b25](https://github.com/sagemath/sagetrac-mirror/commit/c226b250f64ac621a8eb5866e88e04d613a63305)**



---

archive/issue_events_283425.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-10T09:00:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283425"
}
```



---

archive/issue_events_283426.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "966f2399e6d0ccc1f422c1622184a15c8fbac758",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-09-10T09:00:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21452",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21452#event-283426"
}
```
