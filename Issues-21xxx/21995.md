# Issue 21995: Fix comparison operators of PoorManMap

archive/issues_021758.json:
```json
{
    "body": "PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.\n\nThis ticket implements `__eq__`, `__ne__`, and `__hash__` and makes these not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.\n\nBranch/Commit: 7776c1644f1fef5c35a8cf6dd76dd45711692e51\n\nReviewer: David Roe\n\nAuthor: Julian R\u00fcth\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21995\n\n",
    "closed_at": "2016-12-14T23:15:49Z",
    "created_at": "2016-11-29T23:29:19Z",
    "labels": [
        "component: categories",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Fix comparison operators of PoorManMap",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21995",
    "user": "https://github.com/saraedum"
}
```
PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.

This ticket implements `__eq__`, `__ne__`, and `__hash__` and makes these not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.

Branch/Commit: 7776c1644f1fef5c35a8cf6dd76dd45711692e51

Reviewer: David Roe

Author: Julian RÃ¼th

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21995





---

archive/issue_comments_401209.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/fix_comparison_operators_of_poormanmap\"",
    "created_at": "2016-11-29T23:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401209",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/fix_comparison_operators_of_poormanmap"



---

archive/issue_comments_401210.json:
```json
{
    "body": "Changing commit from \"\" to \"0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8\"",
    "created_at": "2016-11-29T23:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401210",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "" to "0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8"



---

archive/issue_comments_401211.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew commits:\n|                                                                                                                                          |                                                 |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|\n|[0d0f55d](https://github.com/sagemath/sagetrac-mirror/commit/0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8)|`Implement _richcmp_ and __hash__ for PoorManMap`|",
    "created_at": "2016-11-29T23:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401211",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:2'></a>
New commits:
|                                                                                                                                          |                                                 |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------|
|[0d0f55d](https://github.com/sagemath/sagetrac-mirror/commit/0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8)|`Implement _richcmp_ and __hash__ for PoorManMap`|



---

archive/issue_comments_401212.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n PoorManMap currently only implements `__eq__` but not `__hash__` nor `__neq__`.\n \n-This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `__eq__` not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.\n+This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.\n``````\n",
    "created_at": "2016-11-29T23:35:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401212",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 PoorManMap currently only implements `__eq__` but not `__hash__` nor `__neq__`.
 
-This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `__eq__` not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.
+This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.
``````




---

archive/issue_comments_401213.json:
```json
{
    "body": "<a id='comment:3'></a>\nI still have to wait for my sage to build to check that this actually works.",
    "created_at": "2016-11-29T23:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401213",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:3'></a>
I still have to wait for my sage to build to check that this actually works.



---

archive/issue_comments_401214.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-29T23:42:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401214",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_401215.json:
```json
{
    "body": "<a id='comment:4'></a>\nI just realized that PoorManMap is inherited from PoorManMapCompose. Got to fix that one as well.",
    "created_at": "2016-11-29T23:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401215",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:4'></a>
I just realized that PoorManMap is inherited from PoorManMapCompose. Got to fix that one as well.



---

archive/issue_comments_401216.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-29T23:43:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401216",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_401217.json:
```json
{
    "body": "Changing commit from \"0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8\" to \"3f20aaa44c15ff93b816fe787742ad60d390f37c\"",
    "created_at": "2016-11-29T23:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401217",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8" to "3f20aaa44c15ff93b816fe787742ad60d390f37c"



---

archive/issue_comments_401218.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[40a6d5b](https://github.com/sagemath/sagetrac-mirror/commit/40a6d5b21f7530d934c7b5c2b599ead3c9272e4f)|`a PoorManMap is unequal to anything else`|\n|[3f20aaa](https://github.com/sagemath/sagetrac-mirror/commit/3f20aaa44c15ff93b816fe787742ad60d390f37c)|`Make PoorManComposeMap correctly inherit from PoorManMap`|",
    "created_at": "2016-11-29T23:58:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401218",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[40a6d5b](https://github.com/sagemath/sagetrac-mirror/commit/40a6d5b21f7530d934c7b5c2b599ead3c9272e4f)|`a PoorManMap is unequal to anything else`|
|[3f20aaa](https://github.com/sagemath/sagetrac-mirror/commit/3f20aaa44c15ff93b816fe787742ad60d390f37c)|`Make PoorManComposeMap correctly inherit from PoorManMap`|



---

archive/issue_comments_401219.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-30T00:01:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401219",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_401220.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-30T01:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401220",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_401221.json:
```json
{
    "body": "<a id='comment:7'></a>\nXavier Caruso proposed to simplify this by integrating the compose map logic into `PoorManMap`.",
    "created_at": "2016-11-30T01:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401221",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>
Xavier Caruso proposed to simplify this by integrating the compose map logic into `PoorManMap`.



---

archive/issue_comments_401222.json:
```json
{
    "body": "Changing commit from \"3f20aaa44c15ff93b816fe787742ad60d390f37c\" to \"554bae8ecb9e67741de85f6b71aca09a173a1519\"",
    "created_at": "2016-11-30T02:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3f20aaa44c15ff93b816fe787742ad60d390f37c" to "554bae8ecb9e67741de85f6b71aca09a173a1519"



---

archive/issue_comments_401223.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n|[554bae8](https://github.com/sagemath/sagetrac-mirror/commit/554bae8ecb9e67741de85f6b71aca09a173a1519)|`Removed PoorManComposeMap`|",
    "created_at": "2016-11-30T02:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401223",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
|[554bae8](https://github.com/sagemath/sagetrac-mirror/commit/554bae8ecb9e67741de85f6b71aca09a173a1519)|`Removed PoorManComposeMap`|



---

archive/issue_comments_401224.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-30T02:05:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401224",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_401225.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-PoorManMap currently only implements `__eq__` but not `__hash__` nor `__neq__`.\n+PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.\n \n This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.\n``````\n",
    "created_at": "2016-11-30T02:32:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401225",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-PoorManMap currently only implements `__eq__` but not `__hash__` nor `__neq__`.
+PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.
 
 This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.
``````




---

archive/issue_comments_401226.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.\n \n-This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.\n+This ticket implements `__eq__`, `__ne__`, and `__hash__` and makes these not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.\n``````\n",
    "created_at": "2016-11-30T02:33:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401226",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.
 
-This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.
+This ticket implements `__eq__`, `__ne__`, and `__hash__` and makes these not rely on comparison of `__dict__` which does not work anymore when introducing ``@`cached_method`s in PoorManMap, see #21894.
``````




---

archive/issue_comments_401227.json:
```json
{
    "body": "<a id='comment:12'></a>\nLooks good to me.",
    "created_at": "2016-11-30T03:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401227",
    "user": "https://github.com/roed314"
}
```

<a id='comment:12'></a>
Looks good to me.



---

archive/issue_comments_401228.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-30T03:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401228",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_401229.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Roe\"",
    "created_at": "2016-11-30T03:06:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401229",
    "user": "https://github.com/roed314"
}
```

Changing reviewer from "" to "David Roe"



---

archive/issue_comments_401230.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[736fb42](https://github.com/sagemath/sagetrac-mirror/commit/736fb42902d2436dabbd0d6dbfed9154af151804)|`Change license of poor_man_map to GPLv2+`|",
    "created_at": "2016-11-30T03:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401230",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[736fb42](https://github.com/sagemath/sagetrac-mirror/commit/736fb42902d2436dabbd0d6dbfed9154af151804)|`Change license of poor_man_map to GPLv2+`|



---

archive/issue_comments_401231.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-11-30T03:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401231",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_401232.json:
```json
{
    "body": "Changing commit from \"554bae8ecb9e67741de85f6b71aca09a173a1519\" to \"736fb42902d2436dabbd0d6dbfed9154af151804\"",
    "created_at": "2016-11-30T03:28:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401232",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "554bae8ecb9e67741de85f6b71aca09a173a1519" to "736fb42902d2436dabbd0d6dbfed9154af151804"



---

archive/issue_comments_401233.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-30T03:30:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401233",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_401234.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2016-11-30T05:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401234",
    "user": "https://github.com/xcaruso"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_401235.json:
```json
{
    "body": "<a id='comment:16'></a>\n(Sorry, I got troubles with my Internet connexion yesterday.)\n\nI've just a remark: shouldn't we check that self.domain() == other.codomain() (if the are both defined) in the composition? Besides, the example you give in the doctest is a kind of weird since the composite f*g does not take {2,3,4} to itself. (I suppose you wanted to write g*f... this proves that an additional checking is not unnecessary.)",
    "created_at": "2016-11-30T05:51:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401235",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:16'></a>
(Sorry, I got troubles with my Internet connexion yesterday.)

I've just a remark: shouldn't we check that self.domain() == other.codomain() (if the are both defined) in the composition? Besides, the example you give in the doctest is a kind of weird since the composite f*g does not take {2,3,4} to itself. (I suppose you wanted to write g*f... this proves that an additional checking is not unnecessary.)



---

archive/issue_comments_401236.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-11-30T05:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401236",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_401237.json:
```json
{
    "body": "<a id='comment:18'></a>\nMostly to cc myself, but there should not be periods at the ends of each of the `INPUT:`s.",
    "created_at": "2016-11-30T17:43:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401237",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>
Mostly to cc myself, but there should not be periods at the ends of each of the `INPUT:`s.



---

archive/issue_comments_401238.json:
```json
{
    "body": "<a id='comment:19'></a>\ntscrim: I agree. But there's actually an example for that here http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content",
    "created_at": "2016-11-30T17:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401238",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'></a>
tscrim: I agree. But there's actually an example for that here http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content



---

archive/issue_comments_401239.json:
```json
{
    "body": "<a id='comment:20'></a>\n*grumbles as bangs head into desk* That explains the uptake in (grammatically incorrect) periods. Looking further, there are a couple of other things to fix there too. I will fix all of that on a separate ticket.",
    "created_at": "2016-11-30T17:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401239",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>
*grumbles as bangs head into desk* That explains the uptake in (grammatically incorrect) periods. Looking further, there are a couple of other things to fix there too. I will fix all of that on a separate ticket.



---

archive/issue_comments_401240.json:
```json
{
    "body": "Changing commit from \"736fb42902d2436dabbd0d6dbfed9154af151804\" to \"db76a47e3c0d47e17f59ca97555a92bd0b593ac9\"",
    "created_at": "2016-11-30T19:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401240",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "736fb42902d2436dabbd0d6dbfed9154af151804" to "db76a47e3c0d47e17f59ca97555a92bd0b593ac9"



---

archive/issue_comments_401241.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|\n|[db76a47](https://github.com/sagemath/sagetrac-mirror/commit/db76a47e3c0d47e17f59ca97555a92bd0b593ac9)|`remove incorrect periods from docstring`|",
    "created_at": "2016-11-30T19:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401241",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------|
|[db76a47](https://github.com/sagemath/sagetrac-mirror/commit/db76a47e3c0d47e17f59ca97555a92bd0b593ac9)|`remove incorrect periods from docstring`|



---

archive/issue_comments_401242.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [caruso](#comment%3A16):\n> I've just a remark: shouldn't we check that self.domain() == other.codomain() (if the are both defined) in the composition? Besides, the example you give in the doctest is a kind of weird since the composite f*g does not take {2,3,4} to itself. (I suppose you wanted to write g*f... this proves that an additional checking is not unnecessary.)\n\n\nOops. I fixed that doctest. And I also added some checks when the domains and codomains are parents. But if they are just iterables, I am not sure what to do? Checking for equality seems to restrictive: for `f*g`, the codomain of `g` should be contained in the domain of `f` but they do not have to be equal I think. In any case, comparing them (whether for equality or containment) is quite costly, i.e., O(cardinality) at best. And I would need to special case if the (co)domain is an iterable because then it could well be infinite.\nWhat do you think?",
    "created_at": "2016-11-30T19:53:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401242",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:22'></a>
Replying to [caruso](#comment%3A16):
> I've just a remark: shouldn't we check that self.domain() == other.codomain() (if the are both defined) in the composition? Besides, the example you give in the doctest is a kind of weird since the composite f*g does not take {2,3,4} to itself. (I suppose you wanted to write g*f... this proves that an additional checking is not unnecessary.)


Oops. I fixed that doctest. And I also added some checks when the domains and codomains are parents. But if they are just iterables, I am not sure what to do? Checking for equality seems to restrictive: for `f*g`, the codomain of `g` should be contained in the domain of `f` but they do not have to be equal I think. In any case, comparing them (whether for equality or containment) is quite costly, i.e., O(cardinality) at best. And I would need to special case if the (co)domain is an iterable because then it could well be infinite.
What do you think?



---

archive/issue_comments_401243.json:
```json
{
    "body": "<a id='comment:23'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------|\n|[282b237](https://github.com/sagemath/sagetrac-mirror/commit/282b2374d824790a18b18f158697941315d53b7a)|`remove tab`|\n|[66952f4](https://github.com/sagemath/sagetrac-mirror/commit/66952f42878728c4132b2dba3aba045569b147b0)|`Check compatibility of morphisms when composing`|",
    "created_at": "2016-11-30T19:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401243",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |            |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------|
|[282b237](https://github.com/sagemath/sagetrac-mirror/commit/282b2374d824790a18b18f158697941315d53b7a)|`remove tab`|
|[66952f4](https://github.com/sagemath/sagetrac-mirror/commit/66952f42878728c4132b2dba3aba045569b147b0)|`Check compatibility of morphisms when composing`|



---

archive/issue_comments_401244.json:
```json
{
    "body": "Changing commit from \"db76a47e3c0d47e17f59ca97555a92bd0b593ac9\" to \"66952f42878728c4132b2dba3aba045569b147b0\"",
    "created_at": "2016-11-30T19:53:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401244",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "db76a47e3c0d47e17f59ca97555a92bd0b593ac9" to "66952f42878728c4132b2dba3aba045569b147b0"



---

archive/issue_comments_401245.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-30T19:54:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401245",
    "user": "https://github.com/saraedum"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_401246.json:
```json
{
    "body": "<a id='comment:25'></a>\nLooks fine to me.\n\nJust a small remark: in the doctest of `__call__`, it's better to use g*f than f*g.",
    "created_at": "2016-12-03T19:57:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401246",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:25'></a>
Looks fine to me.

Just a small remark: in the doctest of `__call__`, it's better to use g*f than f*g.



---

archive/issue_comments_401247.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|\n|[7776c16](https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51)|`Fix doctest`|",
    "created_at": "2016-12-13T21:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------|
|[7776c16](https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51)|`Fix doctest`|



---

archive/issue_comments_401248.json:
```json
{
    "body": "Changing commit from \"66952f42878728c4132b2dba3aba045569b147b0\" to \"7776c1644f1fef5c35a8cf6dd76dd45711692e51\"",
    "created_at": "2016-12-13T21:26:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401248",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "66952f42878728c4132b2dba3aba045569b147b0" to "7776c1644f1fef5c35a8cf6dd76dd45711692e51"



---

archive/issue_comments_401249.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-12-13T21:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401249",
    "user": "https://github.com/xcaruso"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_401250.json:
```json
{
    "body": "<a id='comment:27'></a>\nOk, thanks. That's nice.",
    "created_at": "2016-12-13T21:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401250",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:27'></a>
Ok, thanks. That's nice.



---

archive/issue_comments_401251.json:
```json
{
    "body": "Changing branch from \"u/saraedum/fix_comparison_operators_of_poormanmap\" to \"7776c1644f1fef5c35a8cf6dd76dd45711692e51\"",
    "created_at": "2016-12-14T23:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401251",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/saraedum/fix_comparison_operators_of_poormanmap" to "7776c1644f1fef5c35a8cf6dd76dd45711692e51"



---

archive/issue_events_073701.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-14T23:15:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21995#event-73701"
}
```



---

archive/issue_comments_401252.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-12-14T23:15:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21995#issuecomment-401252",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
