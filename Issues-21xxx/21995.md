# Issue 21995: Fix comparison operators of PoorManMap

archive/issues_021758.json:
```json
{
    "assignees": [],
    "body": "PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.\n\nThis ticket implements `__eq__`, `__ne__`, and `__hash__` and makes these not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.\n\nBranch/Commit: **[`7776c16`](https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51)**\n\nReviewer: **David Roe**\n\nAuthor: **Julian R\u00fcth**\n\nComponent: **categories**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21995_\n\n",
    "closed_at": "2016-12-14T23:15:49Z",
    "created_at": "2016-11-29T23:29:19Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20categories",
        "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Fix comparison operators of PoorManMap",
    "type": "issue",
    "updated_at": "2016-12-14T23:15:49Z",
    "url": "https://github.com/sagemath/sage/issues/21995",
    "user": "https://github.com/saraedum"
}
```
PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.

This ticket implements `__eq__`, `__ne__`, and `__hash__` and makes these not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.

Branch/Commit: **[`7776c16`](https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51)**

Reviewer: **David Roe**

Author: **Julian RÃ¼th**

Component: **categories**

_Issue created by migration from https://trac.sagemath.org/ticket/21995_





---

archive/issue_events_309575.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-29T23:29:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309575"
}
```



---

archive/issue_events_309576.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-29T23:29:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20categories",
    "label_color": "0000ff",
    "label_name": "c: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309576"
}
```



---

archive/issue_events_309577.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-29T23:29:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/p%3A%204%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p: 4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309577"
}
```



---

archive/issue_events_309578.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-29T23:29:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309578"
}
```



---

archive/issue_comments_323928.json:
```json
{
    "body": "Branch: **[u/saraedum/fix_comparison_operators_of_poormanmap](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/fix_comparison_operators_of_poormanmap)**",
    "created_at": "2016-11-29T23:32:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323928",
    "user": "https://github.com/saraedum"
}
```

Branch: **[u/saraedum/fix_comparison_operators_of_poormanmap](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/fix_comparison_operators_of_poormanmap)**



---

archive/issue_comments_323929.json:
```json
{
    "body": "Commit: **[`0d0f55d`](https://github.com/sagemath/sagetrac-mirror/commit/0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8)**",
    "created_at": "2016-11-29T23:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323929",
    "user": "https://github.com/saraedum"
}
```

Commit: **[`0d0f55d`](https://github.com/sagemath/sagetrac-mirror/commit/0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8)**



---

archive/issue_comments_323930.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8\"><code>0d0f55d</code></a></td><td><code>Implement `_richcmp_` and `__hash__` for PoorManMap</code></td></tr></table>\n",
    "created_at": "2016-11-29T23:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323930",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8"><code>0d0f55d</code></a></td><td><code>Implement `_richcmp_` and `__hash__` for PoorManMap</code></td></tr></table>




---

archive/issue_comments_323931.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n PoorManMap currently only implements `__eq__` but not `__hash__` nor `__neq__`.\n \n-This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `__eq__` not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.\n+This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.\n``````\n",
    "created_at": "2016-11-29T23:35:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323931",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 PoorManMap currently only implements `__eq__` but not `__hash__` nor `__neq__`.
 
-This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `__eq__` not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.
+This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.
``````




---

archive/issue_comments_323932.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI still have to wait for my sage to build to check that this actually works.",
    "created_at": "2016-11-29T23:42:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323932",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:3" align="right">comment:3</div>

I still have to wait for my sage to build to check that this actually works.



---

archive/issue_events_309579.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-29T23:42:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309579"
}
```



---

archive/issue_comments_323933.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI just realized that PoorManMap is inherited from PoorManMapCompose. Got to fix that one as well.",
    "created_at": "2016-11-29T23:43:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323933",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:4" align="right">comment:4</div>

I just realized that PoorManMap is inherited from PoorManMapCompose. Got to fix that one as well.



---

archive/issue_events_309580.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-29T23:43:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309580"
}
```



---

archive/issue_events_309581.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-29T23:43:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309581"
}
```



---

archive/issue_comments_323934.json:
```json
{
    "body": "Changed commit from **[`0d0f55d`](https://github.com/sagemath/sagetrac-mirror/commit/0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8)** to **[`3f20aaa`](https://github.com/sagemath/sagetrac-mirror/commit/3f20aaa44c15ff93b816fe787742ad60d390f37c)**",
    "created_at": "2016-11-29T23:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0d0f55d`](https://github.com/sagemath/sagetrac-mirror/commit/0d0f55d089dd299bfd36b6b441f142e2fbdd8fd8)** to **[`3f20aaa`](https://github.com/sagemath/sagetrac-mirror/commit/3f20aaa44c15ff93b816fe787742ad60d390f37c)**



---

archive/issue_comments_323935.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/40a6d5b21f7530d934c7b5c2b599ead3c9272e4f\"><code>40a6d5b</code></a></td><td><code>a PoorManMap is unequal to anything else</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3f20aaa44c15ff93b816fe787742ad60d390f37c\"><code>3f20aaa</code></a></td><td><code>Make PoorManComposeMap correctly inherit from PoorManMap</code></td></tr></table>\n",
    "created_at": "2016-11-29T23:58:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/40a6d5b21f7530d934c7b5c2b599ead3c9272e4f"><code>40a6d5b</code></a></td><td><code>a PoorManMap is unequal to anything else</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3f20aaa44c15ff93b816fe787742ad60d390f37c"><code>3f20aaa</code></a></td><td><code>Make PoorManComposeMap correctly inherit from PoorManMap</code></td></tr></table>




---

archive/issue_events_309582.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-30T00:01:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309582"
}
```



---

archive/issue_events_309583.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-30T00:01:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309583"
}
```



---

archive/issue_events_309584.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-30T01:46:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309584"
}
```



---

archive/issue_events_309585.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-30T01:46:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309585"
}
```



---

archive/issue_comments_323936.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nXavier Caruso proposed to simplify this by integrating the compose map logic into `PoorManMap`.",
    "created_at": "2016-11-30T01:46:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323936",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:7" align="right">comment:7</div>

Xavier Caruso proposed to simplify this by integrating the compose map logic into `PoorManMap`.



---

archive/issue_comments_323937.json:
```json
{
    "body": "Changed commit from **[`3f20aaa`](https://github.com/sagemath/sagetrac-mirror/commit/3f20aaa44c15ff93b816fe787742ad60d390f37c)** to **[`554bae8`](https://github.com/sagemath/sagetrac-mirror/commit/554bae8ecb9e67741de85f6b71aca09a173a1519)**",
    "created_at": "2016-11-30T02:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323937",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3f20aaa`](https://github.com/sagemath/sagetrac-mirror/commit/3f20aaa44c15ff93b816fe787742ad60d390f37c)** to **[`554bae8`](https://github.com/sagemath/sagetrac-mirror/commit/554bae8ecb9e67741de85f6b71aca09a173a1519)**



---

archive/issue_comments_323938.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/554bae8ecb9e67741de85f6b71aca09a173a1519\"><code>554bae8</code></a></td><td><code>Removed PoorManComposeMap</code></td></tr></table>\n",
    "created_at": "2016-11-30T02:05:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323938",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/554bae8ecb9e67741de85f6b71aca09a173a1519"><code>554bae8</code></a></td><td><code>Removed PoorManComposeMap</code></td></tr></table>




---

archive/issue_events_309586.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-30T02:05:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309586"
}
```



---

archive/issue_events_309587.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-30T02:05:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309587"
}
```



---

archive/issue_comments_323939.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n-PoorManMap currently only implements `__eq__` but not `__hash__` nor `__neq__`.\n+PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.\n \n This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.\n``````\n",
    "created_at": "2016-11-30T02:32:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323939",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
-PoorManMap currently only implements `__eq__` but not `__hash__` nor `__neq__`.
+PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.
 
 This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.
``````




---

archive/issue_comments_323940.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,3 @@\n PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.\n \n-This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.\n+This ticket implements `__eq__`, `__ne__`, and `__hash__` and makes these not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.\n``````\n",
    "created_at": "2016-11-30T02:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323940",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,3 @@
 PoorManMap currently only implements `__eq__` but not `__hash__` nor `__ne__`.
 
-This ticket implements `_richcmp_` and `__hash__` instead of `__eq__` and makes `_richcmp_` not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.
+This ticket implements `__eq__`, `__ne__`, and `__hash__` and makes these not rely on comparison of `__dict__` which does not work anymore when introducing `@cached_method`s in PoorManMap, see #21894.
``````




---

archive/issue_comments_323941.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nLooks good to me.",
    "created_at": "2016-11-30T03:06:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323941",
    "user": "https://github.com/roed314"
}
```

<div id="comment:12" align="right">comment:12</div>

Looks good to me.



---

archive/issue_events_309588.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2016-11-30T03:06:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309588"
}
```



---

archive/issue_events_309589.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2016-11-30T03:06:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309589"
}
```



---

archive/issue_comments_323942.json:
```json
{
    "body": "Reviewer: **David Roe**",
    "created_at": "2016-11-30T03:06:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323942",
    "user": "https://github.com/roed314"
}
```

Reviewer: **David Roe**



---

archive/issue_comments_323943.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/736fb42902d2436dabbd0d6dbfed9154af151804\"><code>736fb42</code></a></td><td><code>Change license of poor_man_map to GPLv2+</code></td></tr></table>\n",
    "created_at": "2016-11-30T03:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323943",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/736fb42902d2436dabbd0d6dbfed9154af151804"><code>736fb42</code></a></td><td><code>Change license of poor_man_map to GPLv2+</code></td></tr></table>




---

archive/issue_events_309590.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-11-30T03:28:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309590"
}
```



---

archive/issue_events_309591.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-11-30T03:28:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309591"
}
```



---

archive/issue_comments_323944.json:
```json
{
    "body": "Changed commit from **[`554bae8`](https://github.com/sagemath/sagetrac-mirror/commit/554bae8ecb9e67741de85f6b71aca09a173a1519)** to **[`736fb42`](https://github.com/sagemath/sagetrac-mirror/commit/736fb42902d2436dabbd0d6dbfed9154af151804)**",
    "created_at": "2016-11-30T03:28:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323944",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`554bae8`](https://github.com/sagemath/sagetrac-mirror/commit/554bae8ecb9e67741de85f6b71aca09a173a1519)** to **[`736fb42`](https://github.com/sagemath/sagetrac-mirror/commit/736fb42902d2436dabbd0d6dbfed9154af151804)**



---

archive/issue_events_309592.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2016-11-30T03:30:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309592"
}
```



---

archive/issue_events_309593.json:
```json
{
    "actor": "https://github.com/roed314",
    "created_at": "2016-11-30T03:30:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309593"
}
```



---

archive/issue_events_309594.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2016-11-30T05:51:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309594"
}
```



---

archive/issue_events_309595.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2016-11-30T05:51:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309595"
}
```



---

archive/issue_comments_323945.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\n(Sorry, I got troubles with my Internet connexion yesterday.)\n\nI've just a remark: shouldn't we check that self.domain() == other.codomain() (if the are both defined) in the composition? Besides, the example you give in the doctest is a kind of weird since the composite f*g does not take {2,3,4} to itself. (I suppose you wanted to write g*f... this proves that an additional checking is not unnecessary.)",
    "created_at": "2016-11-30T05:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323945",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:16" align="right">comment:16</div>

(Sorry, I got troubles with my Internet connexion yesterday.)

I've just a remark: shouldn't we check that self.domain() == other.codomain() (if the are both defined) in the composition? Besides, the example you give in the doctest is a kind of weird since the composite f*g does not take {2,3,4} to itself. (I suppose you wanted to write g*f... this proves that an additional checking is not unnecessary.)



---

archive/issue_events_309596.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2016-11-30T05:56:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309596"
}
```



---

archive/issue_events_309597.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2016-11-30T05:56:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309597"
}
```



---

archive/issue_comments_323946.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nMostly to cc myself, but there should not be periods at the ends of each of the `INPUT:`s.",
    "created_at": "2016-11-30T17:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323946",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Mostly to cc myself, but there should not be periods at the ends of each of the `INPUT:`s.



---

archive/issue_comments_323947.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\ntscrim: I agree. But there's actually an example for that here http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content",
    "created_at": "2016-11-30T17:50:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323947",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:19" align="right">comment:19</div>

tscrim: I agree. But there's actually an example for that here http://doc.sagemath.org/html/en/developer/coding_basics.html#the-docstring-of-a-function-content



---

archive/issue_comments_323948.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\n*grumbles as bangs head into desk* That explains the uptake in (grammatically incorrect) periods. Looking further, there are a couple of other things to fix there too. I will fix all of that on a separate ticket.",
    "created_at": "2016-11-30T17:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323948",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

*grumbles as bangs head into desk* That explains the uptake in (grammatically incorrect) periods. Looking further, there are a couple of other things to fix there too. I will fix all of that on a separate ticket.



---

archive/issue_comments_323949.json:
```json
{
    "body": "Changed commit from **[`736fb42`](https://github.com/sagemath/sagetrac-mirror/commit/736fb42902d2436dabbd0d6dbfed9154af151804)** to **[`db76a47`](https://github.com/sagemath/sagetrac-mirror/commit/db76a47e3c0d47e17f59ca97555a92bd0b593ac9)**",
    "created_at": "2016-11-30T19:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323949",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`736fb42`](https://github.com/sagemath/sagetrac-mirror/commit/736fb42902d2436dabbd0d6dbfed9154af151804)** to **[`db76a47`](https://github.com/sagemath/sagetrac-mirror/commit/db76a47e3c0d47e17f59ca97555a92bd0b593ac9)**



---

archive/issue_comments_323950.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/db76a47e3c0d47e17f59ca97555a92bd0b593ac9\"><code>db76a47</code></a></td><td><code>remove incorrect periods from docstring</code></td></tr></table>\n",
    "created_at": "2016-11-30T19:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323950",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/db76a47e3c0d47e17f59ca97555a92bd0b593ac9"><code>db76a47</code></a></td><td><code>remove incorrect periods from docstring</code></td></tr></table>




---

archive/issue_comments_323951.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@xcaruso](#comment:16):\n> I've just a remark: shouldn't we check that self.domain() == other.codomain() (if the are both defined) in the composition? Besides, the example you give in the doctest is a kind of weird since the composite f*g does not take {2,3,4} to itself. (I suppose you wanted to write g*f... this proves that an additional checking is not unnecessary.)\n\nOops. I fixed that doctest. And I also added some checks when the domains and codomains are parents. But if they are just iterables, I am not sure what to do? Checking for equality seems to restrictive: for `f*g`, the codomain of `g` should be contained in the domain of `f` but they do not have to be equal I think. In any case, comparing them (whether for equality or containment) is quite costly, i.e., O(cardinality) at best. And I would need to special case if the (co)domain is an iterable because then it could well be infinite.\nWhat do you think?",
    "created_at": "2016-11-30T19:53:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323951",
    "user": "https://github.com/saraedum"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@xcaruso](#comment:16):
> I've just a remark: shouldn't we check that self.domain() == other.codomain() (if the are both defined) in the composition? Besides, the example you give in the doctest is a kind of weird since the composite f*g does not take {2,3,4} to itself. (I suppose you wanted to write g*f... this proves that an additional checking is not unnecessary.)

Oops. I fixed that doctest. And I also added some checks when the domains and codomains are parents. But if they are just iterables, I am not sure what to do? Checking for equality seems to restrictive: for `f*g`, the codomain of `g` should be contained in the domain of `f` but they do not have to be equal I think. In any case, comparing them (whether for equality or containment) is quite costly, i.e., O(cardinality) at best. And I would need to special case if the (co)domain is an iterable because then it could well be infinite.
What do you think?



---

archive/issue_comments_323952.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/282b2374d824790a18b18f158697941315d53b7a\"><code>282b237</code></a></td><td><code>remove tab</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66952f42878728c4132b2dba3aba045569b147b0\"><code>66952f4</code></a></td><td><code>Check compatibility of morphisms when composing</code></td></tr></table>\n",
    "created_at": "2016-11-30T19:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323952",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/282b2374d824790a18b18f158697941315d53b7a"><code>282b237</code></a></td><td><code>remove tab</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66952f42878728c4132b2dba3aba045569b147b0"><code>66952f4</code></a></td><td><code>Check compatibility of morphisms when composing</code></td></tr></table>




---

archive/issue_comments_323953.json:
```json
{
    "body": "Changed commit from **[`db76a47`](https://github.com/sagemath/sagetrac-mirror/commit/db76a47e3c0d47e17f59ca97555a92bd0b593ac9)** to **[`66952f4`](https://github.com/sagemath/sagetrac-mirror/commit/66952f42878728c4132b2dba3aba045569b147b0)**",
    "created_at": "2016-11-30T19:53:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323953",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`db76a47`](https://github.com/sagemath/sagetrac-mirror/commit/db76a47e3c0d47e17f59ca97555a92bd0b593ac9)** to **[`66952f4`](https://github.com/sagemath/sagetrac-mirror/commit/66952f42878728c4132b2dba3aba045569b147b0)**



---

archive/issue_events_309598.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-30T19:54:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309598"
}
```



---

archive/issue_events_309599.json:
```json
{
    "actor": "https://github.com/saraedum",
    "created_at": "2016-11-30T19:54:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309599"
}
```



---

archive/issue_comments_323954.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nLooks fine to me.\n\nJust a small remark: in the doctest of `__call__`, it's better to use g*f than f*g.",
    "created_at": "2016-12-03T19:57:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323954",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:25" align="right">comment:25</div>

Looks fine to me.

Just a small remark: in the doctest of `__call__`, it's better to use g*f than f*g.



---

archive/issue_comments_323955.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51\"><code>7776c16</code></a></td><td><code>Fix doctest</code></td></tr></table>\n",
    "created_at": "2016-12-13T21:26:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323955",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51"><code>7776c16</code></a></td><td><code>Fix doctest</code></td></tr></table>




---

archive/issue_comments_323956.json:
```json
{
    "body": "Changed commit from **[`66952f4`](https://github.com/sagemath/sagetrac-mirror/commit/66952f42878728c4132b2dba3aba045569b147b0)** to **[`7776c16`](https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51)**",
    "created_at": "2016-12-13T21:26:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323956",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`66952f4`](https://github.com/sagemath/sagetrac-mirror/commit/66952f42878728c4132b2dba3aba045569b147b0)** to **[`7776c16`](https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51)**



---

archive/issue_events_309600.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2016-12-13T21:30:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309600"
}
```



---

archive/issue_events_309601.json:
```json
{
    "actor": "https://github.com/xcaruso",
    "created_at": "2016-12-13T21:30:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309601"
}
```



---

archive/issue_comments_323957.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nOk, thanks. That's nice.",
    "created_at": "2016-12-13T21:30:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323957",
    "user": "https://github.com/xcaruso"
}
```

<div id="comment:27" align="right">comment:27</div>

Ok, thanks. That's nice.



---

archive/issue_comments_323958.json:
```json
{
    "body": "Changed branch from **[u/saraedum/fix_comparison_operators_of_poormanmap](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/fix_comparison_operators_of_poormanmap)** to **[`7776c16`](https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51)**",
    "created_at": "2016-12-14T23:15:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21995#issuecomment-323958",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/saraedum/fix_comparison_operators_of_poormanmap](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/fix_comparison_operators_of_poormanmap)** to **[`7776c16`](https://github.com/sagemath/sagetrac-mirror/commit/7776c1644f1fef5c35a8cf6dd76dd45711692e51)**



---

archive/issue_events_309602.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-14T23:15:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309602"
}
```



---

archive/issue_events_309603.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0da750ff9483cb4611838dfa007ae998d0b5ba2a",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-12-14T23:15:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21995",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21995#event-309603"
}
```
