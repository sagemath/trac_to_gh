# Issue 21529: Bug in factoring of general symbolic expressions

archive/issues_021292.json:
```json
{
    "body": "```\nsage: (sin(x)^2-1).factor()\n(sin(x) + 1)*(sin(x) - 1)\nsage: f(x) = function('f')(x)\nsage: (f(x)^2-1).factor()\n(f(x) + 1)*(f(x) - 1)\nsage: f(x).diff(x)\ndiff(f(x), x)\nsage: (f(x).diff(x)^2-1).factor()\n...\nNotImplementedError: derivative\n\nsage: SR((f(x).diff(x)^2-1)._maxima_().factor())\n(diff(f(x), x) + 1)*(diff(f(x), x) - 1)\n```\n`factor()` falls back to Maxima if it cannot convert the expression to a polynomial. It fails to catch `NotImplementedError` from `expression_conversion.py` however.\n\nBranch/Commit: 2ea5c311b98ac13518df9b873dcc139e4b65697d\n\nReviewer: Marc Mezzarobba\n\nAuthor: Ralf Stephan\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21529\n\n",
    "closed_at": "2016-09-21T20:15:37Z",
    "created_at": "2016-09-18T13:24:48Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Bug in factoring of general symbolic expressions",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21529",
    "user": "https://github.com/rwst"
}
```
```
sage: (sin(x)^2-1).factor()
(sin(x) + 1)*(sin(x) - 1)
sage: f(x) = function('f')(x)
sage: (f(x)^2-1).factor()
(f(x) + 1)*(f(x) - 1)
sage: f(x).diff(x)
diff(f(x), x)
sage: (f(x).diff(x)^2-1).factor()
...
NotImplementedError: derivative

sage: SR((f(x).diff(x)^2-1)._maxima_().factor())
(diff(f(x), x) + 1)*(diff(f(x), x) - 1)
```
`factor()` falls back to Maxima if it cannot convert the expression to a polynomial. It fails to catch `NotImplementedError` from `expression_conversion.py` however.

Branch/Commit: 2ea5c311b98ac13518df9b873dcc139e4b65697d

Reviewer: Marc Mezzarobba

Author: Ralf Stephan

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21529





---

archive/issue_comments_295194.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-09-18T13:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21529#issuecomment-295194",
    "user": "https://github.com/rwst"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_295195.json:
```json
{
    "body": "<a id='comment:2'></a>New commits:",
    "created_at": "2016-09-18T13:34:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21529#issuecomment-295195",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>New commits:



---

archive/issue_comments_295196.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-20T08:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21529#issuecomment-295196",
    "user": "https://github.com/mezzarobba"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_057143.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-21T20:15:37Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21529",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21529#event-57143"
}
```



---

archive/issue_comments_295197.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-09-21T20:15:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21529",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21529#issuecomment-295197",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
