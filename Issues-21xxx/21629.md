# Issue 21629: matrix norm fails

archive/issues_021392.json:
```json
{
    "body": "This happens in [SageMath](SageMath) version 7.4.beta6:\n\n```\nsage: matrix.diagonal((0,0,0)).norm()\n---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n...\nAttributeError: 'sage.matrix.matrix_generic_sparse.Matrix_generic_sparse' object has no attribute 'SVD'\n```\nAlso:\n\n```\nsage: matrix.diagonal((0,0,0)).norm(p='frob')\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n...\nTypeError: base_ring (=Category of objects) must be a ring\n```\n\n\nCC:  @tscrim\n\nKeywords: matrix, norm, svd\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nBranch: u/chapoton/21629\n\nStatus: new\n\nCommit: 446b3b12cfbc2eebb81546dbf8a50410687c5346\n\nIssue created by migration from https://trac.sagemath.org/ticket/21629\n\n",
    "created_at": "2016-10-03T14:20:30Z",
    "labels": [
        "component: linear algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "matrix norm fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21629",
    "user": "https://github.com/cnassau"
}
```
This happens in [SageMath](SageMath) version 7.4.beta6:

```
sage: matrix.diagonal((0,0,0)).norm()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
...
AttributeError: 'sage.matrix.matrix_generic_sparse.Matrix_generic_sparse' object has no attribute 'SVD'
```
Also:

```
sage: matrix.diagonal((0,0,0)).norm(p='frob')
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
...
TypeError: base_ring (=Category of objects) must be a ring
```


CC:  @tscrim

Keywords: matrix, norm, svd

Author: Frédéric Chapoton

Branch: u/chapoton/21629

Status: new

Commit: 446b3b12cfbc2eebb81546dbf8a50410687c5346

Issue created by migration from https://trac.sagemath.org/ticket/21629





---

archive/issue_comments_399111.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -7,3 +7,13 @@\n ...\n AttributeError: 'sage.matrix.matrix_generic_sparse.Matrix_generic_sparse' object has no attribute 'SVD'\n ```\n+Also:\n+\n+```\n+sage: matrix.diagonal((0,0,0)).norm(p='frob')\n+---------------------------------------------------------------------------\n+TypeError                                 Traceback (most recent call last)\n+...\n+TypeError: base_ring (=Category of objects) must be a ring\n+```\n+\n``````\n",
    "created_at": "2016-10-03T15:09:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21629#issuecomment-399111",
    "user": "https://github.com/cnassau"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -7,3 +7,13 @@
 ...
 AttributeError: 'sage.matrix.matrix_generic_sparse.Matrix_generic_sparse' object has no attribute 'SVD'
 ```
+Also:
+
+```
+sage: matrix.diagonal((0,0,0)).norm(p='frob')
+---------------------------------------------------------------------------
+TypeError                                 Traceback (most recent call last)
+...
+TypeError: base_ring (=Category of objects) must be a ring
+```
+
``````




---

archive/issue_comments_399112.json:
```json
{
    "body": "<a id='comment:2'></a>This is cause by sparseness.\n\n```\nsage: D = matrix.diagonal((0,0,0))\nsage: D.dense_matrix().norm()\n0.0\nsage: D.dense_matrix().norm(p='frob')\n0.0\n```",
    "created_at": "2019-11-01T15:00:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21629#issuecomment-399112",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>This is cause by sparseness.

```
sage: D = matrix.diagonal((0,0,0))
sage: D.dense_matrix().norm()
0.0
sage: D.dense_matrix().norm(p='frob')
0.0
```



---

archive/issue_comments_399113.json:
```json
{
    "body": "<a id='comment:3'></a>The other error comes from here:\n\n```\nsage: D = matrix.diagonal((0,0,0))\nsage: D.apply_map(abs)\n```\nand even from\n\n```\nsage: D = matrix.diagonal((0,0,0))\nsage: D.apply_map(lambda t:t)\n```",
    "created_at": "2019-11-01T16:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21629#issuecomment-399113",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>The other error comes from here:

```
sage: D = matrix.diagonal((0,0,0))
sage: D.apply_map(abs)
```
and even from

```
sage: D = matrix.diagonal((0,0,0))
sage: D.apply_map(lambda t:t)
```



---

archive/issue_comments_399114.json:
```json
{
    "body": "Changing commit from \"\" to \"446b3b12cfbc2eebb81546dbf8a50410687c5346\"",
    "created_at": "2019-11-01T17:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21629#issuecomment-399114",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "446b3b12cfbc2eebb81546dbf8a50410687c5346"



---

archive/issue_comments_399115.json:
```json
{
    "body": "Changing author from \"\" to \"Fr\u00e9d\u00e9ric Chapoton\"",
    "created_at": "2019-11-01T17:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21629#issuecomment-399115",
    "user": "https://github.com/fchapoton"
}
```

Changing author from "" to "Frédéric Chapoton"



---

archive/issue_comments_399116.json:
```json
{
    "body": "<a id='comment:4'></a>here is a fix for one of the 2 problems.\n\n---\nNew commits:",
    "created_at": "2019-11-01T17:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21629#issuecomment-399116",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>here is a fix for one of the 2 problems.

---
New commits:



---

archive/issue_comments_399117.json:
```json
{
    "body": "Changing branch from \"\" to \"u/chapoton/21629\"",
    "created_at": "2019-11-01T17:23:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21629#issuecomment-399117",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "u/chapoton/21629"



---

archive/issue_comments_399118.json:
```json
{
    "body": "<a id='comment:5'></a>Replying to [comment:4 chapoton]:\n> here is a fix for one of the 2 problems.\n> \n> ---\n> New commits:\n> |                                                                                                                                          |                                                       |\n> |------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n> |[446b3b1](https://git.sagemath.org/sage.git/commit?id=446b3b12cfbc2eebb81546dbf8a50410687c5346)|`trac 21629 fix for apply_map of empty sparse matrices`|\n\n\nThis has also been fixed in #29214, so only the first problem remains.",
    "created_at": "2020-03-18T17:32:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21629",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21629#issuecomment-399118",
    "user": "https://github.com/mwageringel"
}
```

<a id='comment:5'></a>Replying to [comment:4 chapoton]:
> here is a fix for one of the 2 problems.
> 
> ---
> New commits:
> |                                                                                                                                          |                                                       |
> |------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
> |[446b3b1](https://git.sagemath.org/sage.git/commit?id=446b3b12cfbc2eebb81546dbf8a50410687c5346)|`trac 21629 fix for apply_map of empty sparse matrices`|


This has also been fixed in #29214, so only the first problem remains.
