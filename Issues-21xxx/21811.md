# Issue 21811: libecl does not install with libffi 3.3 (e.g. on OpenSuSE gcc5-7, Debian 11, etc)

archive/issues_021574.json:
```json
{
    "assignees": [],
    "body": "Compile on OpenSuSE 42.2/15.1 with gcc stops at\n\n```\n[ecl-16.1.2.p2] gcc -DECLDIR=\"\\\"/home/ralf/sage/local/lib/ecl-16.1.2\\\"\" -I. -I/h\nome/ralf/sage/local/var/tmp/sage/build/ecl-16.1.2.p2/src/build -I/home/ralf/sage\n/local/var/tmp/sage/build/ecl-16.1.2.p2/src/src/c -I../ecl/gc -DECL_API -DECL_NO\n_LEGACY   -I/home/ralf/sage/local/include  -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 \n-g -O2  -fPIC -Dlinux -c -o ffi.o ffi.o.c\n[ecl-16.1.2.p2] /home/ralf/sage/local/var/tmp/sage/build/ecl-16.1.2.p2/src/src/c\n/ffi.d:148:44: error: 'FFI_SYSV' undeclared here (not in a function)\n[ecl-16.1.2.p2] Makefile:85: recipe for target 'ffi.o' failed\n```\n\nThe package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h\n\nIt turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if `__x86_64__` is defined because the `__x86_64__` case preceeds the default case (where FFI_SYSV is defined as well). ECL however has this in `src/c/ffi.d`:\n\n```\n#ifdef HAVE_LIBFFI\nstatic struct {\n        const cl_object symbol;\n        ffi_abi abi;\n} ecl_foreign_cc_table[] = {\n        {@':default', FFI_DEFAULT_ABI},\n#ifdef X86_WIN32\n        {@':cdecl', FFI_SYSV},\n        {@':sysv', FFI_SYSV},\n        {@':stdcall', FFI_STDCALL},\n#elif defined(X86_WIN64)\n        {@':win64', FFI_WIN64},\n#elif defined(X86_ANY) || defined(X86) || defined(X86_64)\n        {@':cdecl', FFI_SYSV},\n        {@':sysv', FFI_SYSV},\n        {@':unix64', FFI_UNIX64},\n#endif\n};\n```\n\nReported as https://gitlab.com/embeddable-common-lisp/ecl/issues/302\n\nThe workaround would be to deinstall the OpenSuSE package libffi-devel-gcc5 which falls back to installing an earlier version of libffi-devel. Ultimately this must be resolved in libecl/libffi however.\n\nAnother workaround is using `SAGE_INSTALL_GCC=yes` when making Sage.\n\nLog is attached to #21804.\n\nSee also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU\n\nCC:  crmafra@gmail.com @mkoeppe @kiwifb\n\nBranch/Commit: **[`72c7696`](https://github.com/sagemath/sagetrac-mirror/commit/72c76961846da1ee6280053b2443d9407b2546fc)**\n\nUpstream: **Fixed upstream, but not in a stable release.**\n\nReviewer: **Matthias Koeppe**\n\nAuthor: **Dima Pasechnik**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21811_\n\n",
    "closed_at": "2020-02-10T20:06:06Z",
    "created_at": "2016-11-03T14:49:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "libecl does not install with libffi 3.3 (e.g. on OpenSuSE gcc5-7, Debian 11, etc)",
    "type": "issue",
    "updated_at": "2020-02-10T20:06:06Z",
    "url": "https://github.com/sagemath/sage/issues/21811",
    "user": "https://github.com/rwst"
}
```
Compile on OpenSuSE 42.2/15.1 with gcc stops at

```
[ecl-16.1.2.p2] gcc -DECLDIR="\"/home/ralf/sage/local/lib/ecl-16.1.2\"" -I. -I/h
ome/ralf/sage/local/var/tmp/sage/build/ecl-16.1.2.p2/src/build -I/home/ralf/sage
/local/var/tmp/sage/build/ecl-16.1.2.p2/src/src/c -I../ecl/gc -DECL_API -DECL_NO
_LEGACY   -I/home/ralf/sage/local/include  -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 
-g -O2  -fPIC -Dlinux -c -o ffi.o ffi.o.c
[ecl-16.1.2.p2] /home/ralf/sage/local/var/tmp/sage/build/ecl-16.1.2.p2/src/src/c
/ffi.d:148:44: error: 'FFI_SYSV' undeclared here (not in a function)
[ecl-16.1.2.p2] Makefile:85: recipe for target 'ffi.o' failed
```

The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h

It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if `__x86_64__` is defined because the `__x86_64__` case preceeds the default case (where FFI_SYSV is defined as well). ECL however has this in `src/c/ffi.d`:

```
#ifdef HAVE_LIBFFI
static struct {
        const cl_object symbol;
        ffi_abi abi;
} ecl_foreign_cc_table[] = {
        {@':default', FFI_DEFAULT_ABI},
#ifdef X86_WIN32
        {@':cdecl', FFI_SYSV},
        {@':sysv', FFI_SYSV},
        {@':stdcall', FFI_STDCALL},
#elif defined(X86_WIN64)
        {@':win64', FFI_WIN64},
#elif defined(X86_ANY) || defined(X86) || defined(X86_64)
        {@':cdecl', FFI_SYSV},
        {@':sysv', FFI_SYSV},
        {@':unix64', FFI_UNIX64},
#endif
};
```

Reported as https://gitlab.com/embeddable-common-lisp/ecl/issues/302

The workaround would be to deinstall the OpenSuSE package libffi-devel-gcc5 which falls back to installing an earlier version of libffi-devel. Ultimately this must be resolved in libecl/libffi however.

Another workaround is using `SAGE_INSTALL_GCC=yes` when making Sage.

Log is attached to #21804.

See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU

CC:  crmafra@gmail.com @mkoeppe @kiwifb

Branch/Commit: **[`72c7696`](https://github.com/sagemath/sagetrac-mirror/commit/72c76961846da1ee6280053b2443d9407b2546fc)**

Upstream: **Fixed upstream, but not in a stable release.**

Reviewer: **Matthias Koeppe**

Author: **Dima Pasechnik**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/21811_





---

archive/issue_events_305932.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-03T14:49:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305932"
}
```



---

archive/issue_events_305933.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-03T14:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305933"
}
```



---

archive/issue_events_305934.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-03T14:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305934"
}
```



---

archive/issue_events_305935.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-03T14:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305935"
}
```



---

archive/issue_comments_320961.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,6 +11,8 @@\n [ecl-16.1.2.p2] Makefile:85: recipe for target 'ffi.o' failed\n ```\n \n+The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h\n+\n Log is attached to #21804.\n \n See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU\n``````\n",
    "created_at": "2016-11-03T14:57:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320961",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,6 +11,8 @@
 [ecl-16.1.2.p2] Makefile:85: recipe for target 'ffi.o' failed
 ```
 
+The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h
+
 Log is attached to #21804.
 
 See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU
``````




---

archive/issue_comments_320962.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,6 +13,8 @@\n \n The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h\n \n+It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if X86_64 is defined because the X86_64 case preceeds the default case (where FFI_SYSV is defined as well).\n+\n Log is attached to #21804.\n \n See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU\n``````\n",
    "created_at": "2016-11-03T15:49:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320962",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,6 +13,8 @@
 
 The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h
 
+It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if X86_64 is defined because the X86_64 case preceeds the default case (where FFI_SYSV is defined as well).
+
 Log is attached to #21804.
 
 See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU
``````




---

archive/issue_comments_320963.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,30 @@\n \n The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h\n \n-It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if X86_64 is defined because the X86_64 case preceeds the default case (where FFI_SYSV is defined as well).\n+It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if X86_64 is defined because the X86_64 case preceeds the default case (where FFI_SYSV is defined as well). ECL however has this in `src/c/ffi.d`:\n+\n+```\n+#ifdef HAVE_LIBFFI\n+static struct {\n+        const cl_object symbol;\n+        ffi_abi abi;\n+} ecl_foreign_cc_table[] = {\n+        {@':default', FFI_DEFAULT_ABI},\n+#ifdef X86_WIN32\n+        {@':cdecl', FFI_SYSV},\n+        {@':sysv', FFI_SYSV},\n+        {@':stdcall', FFI_STDCALL},\n+#elif defined(X86_WIN64)\n+        {@':win64', FFI_WIN64},\n+#elif defined(X86_ANY) || defined(X86) || defined(X86_64)\n+        {@':cdecl', FFI_SYSV},\n+        {@':sysv', FFI_SYSV},\n+        {@':unix64', FFI_UNIX64},\n+#endif\n+};\n+```\n+\n+https://github.com/libffi/libffi/blob/master/src/x86/ffitarget.h#L87\n \n Log is attached to #21804.\n \n``````\n",
    "created_at": "2016-11-03T15:56:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320963",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,30 @@
 
 The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h
 
-It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if X86_64 is defined because the X86_64 case preceeds the default case (where FFI_SYSV is defined as well).
+It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if X86_64 is defined because the X86_64 case preceeds the default case (where FFI_SYSV is defined as well). ECL however has this in `src/c/ffi.d`:
+
+```
+#ifdef HAVE_LIBFFI
+static struct {
+        const cl_object symbol;
+        ffi_abi abi;
+} ecl_foreign_cc_table[] = {
+        {@':default', FFI_DEFAULT_ABI},
+#ifdef X86_WIN32
+        {@':cdecl', FFI_SYSV},
+        {@':sysv', FFI_SYSV},
+        {@':stdcall', FFI_STDCALL},
+#elif defined(X86_WIN64)
+        {@':win64', FFI_WIN64},
+#elif defined(X86_ANY) || defined(X86) || defined(X86_64)
+        {@':cdecl', FFI_SYSV},
+        {@':sysv', FFI_SYSV},
+        {@':unix64', FFI_UNIX64},
+#endif
+};
+```
+
+https://github.com/libffi/libffi/blob/master/src/x86/ffitarget.h#L87
 
 Log is attached to #21804.
 
``````




---

archive/issue_comments_320964.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThe incompatible libffi change happened here:\n\n```\ncommit ef76205647bca77796882d31f6ab5e889f461f07\nAuthor: Richard Henderson <rth@twiddle.net>\nDate:   Thu Oct 30 12:13:31 2014 -0700\n\n    x86: Tidy ffi_abi\n    \n    The x86_64 unix port only handles one ABI; don't define all of the\n    other symbols.  The UNIX64 symbol retains the same value.\n    \n    The i386 ports ought to have the same symbols, even if we can't yet\n    unify the values without incrementing the libffi soname.\n```\n\nThis means all libffi versions from 3.2 up are incompatible.",
    "created_at": "2016-11-03T16:10:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320964",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

The incompatible libffi change happened here:

```
commit ef76205647bca77796882d31f6ab5e889f461f07
Author: Richard Henderson <rth@twiddle.net>
Date:   Thu Oct 30 12:13:31 2014 -0700

    x86: Tidy ffi_abi
    
    The x86_64 unix port only handles one ABI; don't define all of the
    other symbols.  The UNIX64 symbol retains the same value.
    
    The i386 ports ought to have the same symbols, even if we can't yet
    unify the values without incrementing the libffi soname.
```

This means all libffi versions from 3.2 up are incompatible.



---

archive/issue_comments_320965.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n \n The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h\n \n-It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if X86_64 is defined because the X86_64 case preceeds the default case (where FFI_SYSV is defined as well). ECL however has this in `src/c/ffi.d`:\n+It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if `__x86_64__` is defined because the `__x86_64__` case preceeds the default case (where FFI_SYSV is defined as well). ECL however has this in `src/c/ffi.d`:\n \n ```\n #ifdef HAVE_LIBFFI\n@@ -35,6 +35,7 @@\n #endif\n };\n ```\n+(The macro `__x86_64__` gets somewhere copied to `X86_64`)\n \n https://github.com/libffi/libffi/blob/master/src/x86/ffitarget.h#L87\n \n``````\n",
    "created_at": "2016-11-03T16:36:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320965",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 
 The package libffi-devel-gcc5 is installed. The file `/usr/include/ffi.h` does not contain FFI_SYSV but the file ffitarget.h does and it is included unconditionally in ffi.h
 
-It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if X86_64 is defined because the X86_64 case preceeds the default case (where FFI_SYSV is defined as well). ECL however has this in `src/c/ffi.d`:
+It turns out the reason for the failure on OpenSuSE is that in ffitarget.h FFI_SYSV is not defined if `__x86_64__` is defined because the `__x86_64__` case preceeds the default case (where FFI_SYSV is defined as well). ECL however has this in `src/c/ffi.d`:
 
 ```
 #ifdef HAVE_LIBFFI
@@ -35,6 +35,7 @@
 #endif
 };
 ```
+(The macro `__x86_64__` gets somewhere copied to `X86_64`)
 
 https://github.com/libffi/libffi/blob/master/src/x86/ffitarget.h#L87
 
``````




---

archive/issue_comments_320966.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHave you reported this upstream?",
    "created_at": "2016-11-03T17:31:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320966",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">comment:6</div>

Have you reported this upstream?



---

archive/issue_comments_320967.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWhat would be upstream here? Libffi or libecl? Remember also that it shows only on OpenSUSE so maybe we're missing something about these flags.",
    "created_at": "2016-11-03T17:50:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320967",
    "user": "https://github.com/rwst"
}
```

<div id="comment:7" align="right">comment:7</div>

What would be upstream here? Libffi or libecl? Remember also that it shows only on OpenSUSE so maybe we're missing something about these flags.



---

archive/issue_comments_320968.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI know nothing about ffi nor ecl but I think this should be reported to ecl.",
    "created_at": "2016-11-03T19:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320968",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I know nothing about ffi nor ecl but I think this should be reported to ecl.



---

archive/issue_comments_320969.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\ngiven that libffi is used all over the place, including CPython, it's most probably ECL-specific issue, or OpenSUSE-specific issue...",
    "created_at": "2016-11-03T22:17:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320969",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">comment:9</div>

given that libffi is used all over the place, including CPython, it's most probably ECL-specific issue, or OpenSUSE-specific issue...



---

archive/issue_comments_320970.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -37,7 +37,7 @@\n ```\n (The macro `__x86_64__` gets somewhere copied to `X86_64`)\n \n-https://github.com/libffi/libffi/blob/master/src/x86/ffitarget.h#L87\n+Reported as https://gitlab.com/embeddable-common-lisp/ecl/issues/302\n \n Log is attached to #21804.\n \n``````\n",
    "created_at": "2016-11-04T07:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320970",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -37,7 +37,7 @@
 ```
 (The macro `__x86_64__` gets somewhere copied to `X86_64`)
 
-https://github.com/libffi/libffi/blob/master/src/x86/ffitarget.h#L87
+Reported as https://gitlab.com/embeddable-common-lisp/ecl/issues/302
 
 Log is attached to #21804.
 
``````




---

archive/issue_comments_320971.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2016-11-04T07:47:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320971",
    "user": "https://github.com/rwst"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_320972.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -39,6 +39,8 @@\n \n Reported as https://gitlab.com/embeddable-common-lisp/ecl/issues/302\n \n+The workaround would be to deinstall the OpenSuSE package libffi-devel-gcc5 which falls back to installing an earlier version of libffi-devel. Ultimately this must be resolved in libecl/libffi however.\n+\n Log is attached to #21804.\n \n See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU\n``````\n",
    "created_at": "2016-11-05T08:15:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320972",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -39,6 +39,8 @@
 
 Reported as https://gitlab.com/embeddable-common-lisp/ecl/issues/302
 
+The workaround would be to deinstall the OpenSuSE package libffi-devel-gcc5 which falls back to installing an earlier version of libffi-devel. Ultimately this must be resolved in libecl/libffi however.
+
 Log is attached to #21804.
 
 See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU
``````




---

archive/issue_comments_320973.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -35,12 +35,13 @@\n #endif\n };\n ```\n-(The macro `__x86_64__` gets somewhere copied to `X86_64`)\n \n Reported as https://gitlab.com/embeddable-common-lisp/ecl/issues/302\n \n The workaround would be to deinstall the OpenSuSE package libffi-devel-gcc5 which falls back to installing an earlier version of libffi-devel. Ultimately this must be resolved in libecl/libffi however.\n \n+Another workaround is using `SAGE_INTERNAL_GCC=yes` when making Sage.\n+\n Log is attached to #21804.\n \n See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU\n``````\n",
    "created_at": "2016-11-05T14:43:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320973",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -35,12 +35,13 @@
 #endif
 };
 ```
-(The macro `__x86_64__` gets somewhere copied to `X86_64`)
 
 Reported as https://gitlab.com/embeddable-common-lisp/ecl/issues/302
 
 The workaround would be to deinstall the OpenSuSE package libffi-devel-gcc5 which falls back to installing an earlier version of libffi-devel. Ultimately this must be resolved in libecl/libffi however.
 
+Another workaround is using `SAGE_INTERNAL_GCC=yes` when making Sage.
+
 Log is attached to #21804.
 
 See also https://groups.google.com/forum/#!topic/sage-devel/_doJLj5GIEU
``````




---

archive/issue_comments_320974.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -40,7 +40,7 @@\n \n The workaround would be to deinstall the OpenSuSE package libffi-devel-gcc5 which falls back to installing an earlier version of libffi-devel. Ultimately this must be resolved in libecl/libffi however.\n \n-Another workaround is using `SAGE_INTERNAL_GCC=yes` when making Sage.\n+Another workaround is using `SAGE_INSTALL_GCC=yes` when making Sage.\n \n Log is attached to #21804.\n \n``````\n",
    "created_at": "2016-11-17T09:17:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320974",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -40,7 +40,7 @@
 
 The workaround would be to deinstall the OpenSuSE package libffi-devel-gcc5 which falls back to installing an earlier version of libffi-devel. Ultimately this must be resolved in libecl/libffi however.
 
-Another workaround is using `SAGE_INTERNAL_GCC=yes` when making Sage.
+Another workaround is using `SAGE_INSTALL_GCC=yes` when making Sage.
 
 Log is attached to #21804.
 
``````




---

archive/issue_comments_320975.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nis this still relevant (the OS most probably has been updated...)",
    "created_at": "2019-05-28T13:01:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320975",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:15" align="right">comment:15</div>

is this still relevant (the OS most probably has been updated...)



---

archive/issue_comments_320976.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@dimpase](#comment:15):\n> is this still relevant (the OS most probably has been updated...)\n\nIt is still relevant. I am using the modern openSUSE Leap 15.0 and compiling sage gives the same error as in this bug report (a google search on the error led me here).\nI had to uninstall libffi-devel from openSUSE.",
    "created_at": "2019-05-28T14:06:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320976",
    "user": "https://github.com/sagetrac-mafra"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@dimpase](#comment:15):
> is this still relevant (the OS most probably has been updated...)

It is still relevant. I am using the modern openSUSE Leap 15.0 and compiling sage gives the same error as in this bug report (a google search on the error led me here).
I had to uninstall libffi-devel from openSUSE.



---

archive/issue_comments_320977.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOne thing in the ticket description is buffling - that building Sage's gcc package is another workaround. As well, the topic still says gcc5 - aren't you on gcc7 meanwhile?\n\nSo all this needs an update, I suppose.",
    "created_at": "2019-05-28T20:45:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320977",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:17" align="right">comment:17</div>

One thing in the ticket description is buffling - that building Sage's gcc package is another workaround. As well, the topic still says gcc5 - aren't you on gcc7 meanwhile?

So all this needs an update, I suppose.



---

archive/issue_comments_320978.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nConfirm this happens on OpenSuSE Leap 15.1/gcc-7.4.1 as well, and the deinstall workaround is still valid.",
    "created_at": "2019-08-27T07:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320978",
    "user": "https://github.com/rwst"
}
```

<div id="comment:18" align="right">comment:18</div>

Confirm this happens on OpenSuSE Leap 15.1/gcc-7.4.1 as well, and the deinstall workaround is still valid.



---

archive/issue_events_305936.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2019-08-27T07:32:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305936"
}
```



---

archive/issue_events_305937.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2019-08-27T07:32:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305937"
}
```



---

archive/issue_comments_320979.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Compile on OpenSuSE 42.2 with gcc set to gcc5 stops at\n+Compile on OpenSuSE 42.2/15.1 with gcc stops at\n \n ```\n [ecl-16.1.2.p2] gcc -DECLDIR=\"\\\"/home/ralf/sage/local/lib/ecl-16.1.2\\\"\" -I. -I/h\n``````\n",
    "created_at": "2019-08-27T07:32:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320979",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Compile on OpenSuSE 42.2 with gcc set to gcc5 stops at
+Compile on OpenSuSE 42.2/15.1 with gcc stops at
 
 ```
 [ecl-16.1.2.p2] gcc -DECLDIR="\"/home/ralf/sage/local/lib/ecl-16.1.2\"" -I. -I/h
``````




---

archive/issue_events_305938.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2019-08-27T07:32:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305938"
}
```



---

archive/issue_events_305939.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2019-08-27T07:32:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/p%3A%202%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p: 2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305939"
}
```



---

archive/issue_events_305940.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2019-08-27T07:32:48Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "title_is": "libecl does not install with OpenSuSE gcc5-7",
    "title_was": "libecl does not install with OpenSuSE gcc5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305940"
}
```



---

archive/issue_comments_320980.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\ndoes it help to build Sage's libffi, rather than use the system's one?\n(i.e., do `./sage -f libffi` followed by a rebuild?) \n\n---\n\nUPDATE - no, it does not, according to\nhttps://groups.google.com/d/msg/sage-devel/h0BhI2HPUb0/tEXci95CAgAJ",
    "created_at": "2019-08-27T07:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320980",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:19" align="right">comment:19</div>

does it help to build Sage's libffi, rather than use the system's one?
(i.e., do `./sage -f libffi` followed by a rebuild?) 

---

UPDATE - no, it does not, according to
https://groups.google.com/d/msg/sage-devel/h0BhI2HPUb0/tEXci95CAgAJ



---

archive/issue_comments_320981.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI'm seeing the same issue on NixOS since the recent (https://github.com/libffi/libffi/releases) libffi v3.3 update. More specifically, git-bisect shows https://github.com/libffi/libffi/commit/982b89c01aca99c7bc229914fc1521f96930919b to be responsible. The headers were formerly installed in the lib dir, and are how (correctly) installed in the include dir.\n\nIts possible that OpenSuSE had already adopted a patch to fix this. Can anybody else confirm that ecl fails with libffi v3.3?",
    "created_at": "2019-12-14T12:30:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320981",
    "user": "https://github.com/timokau"
}
```

<div id="comment:20" align="right">comment:20</div>

I'm seeing the same issue on NixOS since the recent (https://github.com/libffi/libffi/releases) libffi v3.3 update. More specifically, git-bisect shows https://github.com/libffi/libffi/commit/982b89c01aca99c7bc229914fc1521f96930919b to be responsible. The headers were formerly installed in the lib dir, and are how (correctly) installed in the include dir.

Its possible that OpenSuSE had already adopted a patch to fix this. Can anybody else confirm that ecl fails with libffi v3.3?



---

archive/issue_comments_320982.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI made a mistake when bisecting. Now I also end up at the same commit @rwst reported a couple of years ago. I was able to fix it by replacing the usage of FFI_SYSV as suggested by gentoo: https://wiki.gentoo.org/wiki/Libffi_3.3_porting_notes/FFI_SYSV\n\nCuriously enough, gentoo hasn't patched ecl themselves yet. But they haven't marked libffi 3.3 as stable either yet.",
    "created_at": "2019-12-16T22:01:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320982",
    "user": "https://github.com/timokau"
}
```

<div id="comment:21" align="right">comment:21</div>

I made a mistake when bisecting. Now I also end up at the same commit @rwst reported a couple of years ago. I was able to fix it by replacing the usage of FFI_SYSV as suggested by gentoo: https://wiki.gentoo.org/wiki/Libffi_3.3_porting_notes/FFI_SYSV

Curiously enough, gentoo hasn't patched ecl themselves yet. But they haven't marked libffi 3.3 as stable either yet.



---

archive/issue_comments_320983.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nTicket retargeted after milestone closed",
    "created_at": "2019-12-30T14:48:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320983",
    "user": "https://github.com/embray"
}
```

<div id="comment:22" align="right">comment:22</div>

Ticket retargeted after milestone closed



---

archive/issue_events_305941.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "milestone_number": null,
    "milestone_title": "sage-8.9",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305941"
}
```



---

archive/issue_events_305942.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-12-30T14:48:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "milestone_number": null,
    "milestone_title": "sage-9.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305942"
}
```



---

archive/issue_comments_320984.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nWe're going to fix the Sage side of this on #29128 (ECL must get the prefix of libffi intallation, so that the good one can be used).",
    "created_at": "2020-01-31T22:53:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320984",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

We're going to fix the Sage side of this on #29128 (ECL must get the prefix of libffi intallation, so that the good one can be used).



---

archive/issue_comments_320985.json:
```json
{
    "body": "Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**",
    "created_at": "2020-02-03T17:15:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320985",
    "user": "https://github.com/dimpase"
}
```

Changed upstream from **Reported upstream. No feedback yet.** to **Fixed upstream, but not in a stable release.**



---

archive/issue_comments_320986.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nSee https://gitlab.com/embeddable-common-lisp/ecl/commit/b2f09b4809441a92d6c11a2b39d5399580e56ae7\n\nfor upstream fix, pointed by https://gitlab.com/embeddable-common-lisp/ecl/issues/302",
    "created_at": "2020-02-03T17:20:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320986",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:25" align="right">comment:25</div>

See https://gitlab.com/embeddable-common-lisp/ecl/commit/b2f09b4809441a92d6c11a2b39d5399580e56ae7

for upstream fix, pointed by https://gitlab.com/embeddable-common-lisp/ecl/issues/302



---

archive/issue_comments_320987.json:
```json
{
    "body": "Author: **Dima Pasechnik**",
    "created_at": "2020-02-03T18:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320987",
    "user": "https://github.com/dimpase"
}
```

Author: **Dima Pasechnik**



---

archive/issue_events_305943.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-02-03T18:24:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305943"
}
```



---

archive/issue_comments_320988.json:
```json
{
    "body": "Branch: **[u/dimpase/packages/ecl/ffi_abi_libffi33.patch](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/ecl/ffi_abi_libffi33.patch)**",
    "created_at": "2020-02-03T18:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320988",
    "user": "https://github.com/dimpase"
}
```

Branch: **[u/dimpase/packages/ecl/ffi_abi_libffi33.patch](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/ecl/ffi_abi_libffi33.patch)**



---

archive/issue_comments_320989.json:
```json
{
    "body": "Commit: **[`72c7696`](https://github.com/sagemath/sagetrac-mirror/commit/72c76961846da1ee6280053b2443d9407b2546fc)**",
    "created_at": "2020-02-03T18:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320989",
    "user": "https://github.com/dimpase"
}
```

Commit: **[`72c7696`](https://github.com/sagemath/sagetrac-mirror/commit/72c76961846da1ee6280053b2443d9407b2546fc)**



---

archive/issue_comments_320990.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nI'll close  #29128 as won't fix and work here instead. \n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72c76961846da1ee6280053b2443d9407b2546fc\">72c7696</a></td><td><code>allow use of libffi version >= 3.3 by ECL</code></td></tr></table>\n",
    "created_at": "2020-02-03T18:24:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320990",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

I'll close  #29128 as won't fix and work here instead. 

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72c76961846da1ee6280053b2443d9407b2546fc">72c7696</a></td><td><code>allow use of libffi version >= 3.3 by ECL</code></td></tr></table>




---

archive/issue_comments_320991.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\ntested with system libffi 3.3 on Debian 11 (x86_64), as well as on various x86_64 and i386 linuxis with libffi 3.2.",
    "created_at": "2020-02-03T23:35:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320991",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">comment:27</div>

tested with system libffi 3.3 on Debian 11 (x86_64), as well as on various x86_64 and i386 linuxis with libffi 3.2.



---

archive/issue_events_305944.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2020-02-04T10:12:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "title_is": "libecl does not install with libffi 3.3 (e.g. on OpenSuSE gcc5-7, Debian 11, etc)",
    "title_was": "libecl does not install with OpenSuSE gcc5-7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305944"
}
```



---

archive/issue_comments_320992.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nTesting at https://github.com/mkoeppe/sage/pull/2",
    "created_at": "2020-02-06T15:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320992",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Testing at https://github.com/mkoeppe/sage/pull/2



---

archive/issue_comments_320993.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nand at https://github.com/mkoeppe/sage/actions/runs/35630769",
    "created_at": "2020-02-06T21:04:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320993",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

and at https://github.com/mkoeppe/sage/actions/runs/35630769



---

archive/issue_comments_320994.json:
```json
{
    "body": "Reviewer: **Matthias Koeppe**",
    "created_at": "2020-02-07T20:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320994",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Matthias Koeppe**



---

archive/issue_events_305945.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-07T20:02:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305945"
}
```



---

archive/issue_events_305946.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-07T20:02:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305946"
}
```



---

archive/issue_comments_320995.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nLooking good.",
    "created_at": "2020-02-07T20:02:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320995",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:31" align="right">comment:31</div>

Looking good.



---

archive/issue_comments_320996.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nFWIW, I just checked that 9.1.beta3 + #21811 can be built after `make distclean` On Debian testing running on core i7 + 16 GB RAM.\n\nHTH,",
    "created_at": "2020-02-08T20:33:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320996",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:32" align="right">comment:32</div>

FWIW, I just checked that 9.1.beta3 + #21811 can be built after `make distclean` On Debian testing running on core i7 + 16 GB RAM.

HTH,



---

archive/issue_comments_320997.json:
```json
{
    "body": "Changed branch from **[u/dimpase/packages/ecl/ffi_abi_libffi33.patch](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/ecl/ffi_abi_libffi33.patch)** to **[`72c7696`](https://github.com/sagemath/sagetrac-mirror/commit/72c76961846da1ee6280053b2443d9407b2546fc)**",
    "created_at": "2020-02-10T20:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21811#issuecomment-320997",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/dimpase/packages/ecl/ffi_abi_libffi33.patch](https://github.com/sagemath/sagetrac-mirror/tree/u/dimpase/packages/ecl/ffi_abi_libffi33.patch)** to **[`72c7696`](https://github.com/sagemath/sagetrac-mirror/commit/72c76961846da1ee6280053b2443d9407b2546fc)**



---

archive/issue_events_305947.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-02-10T20:06:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305947"
}
```



---

archive/issue_events_305948.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "ed7bc14f751a76ad88c506cd33beb7f3e1030ff5",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2020-02-10T20:06:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21811",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21811#event-305948"
}
```
