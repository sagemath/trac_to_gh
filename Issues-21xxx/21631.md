# Issue 21631: Update Singular to 4.0.3p4

archive/issues_021394.json:
```json
{
    "assignees": [],
    "body": "This new version does not needed autoreconfing.\nNonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.\n\nRepackaged tarball at:\nhttps://perso.telecom-paristech.fr/~flori/singular-4.0.3p4.tar.bz2\n\nDepends on #17254\n\nCC:  @johnperry-math @kwankyu @vbraun @jdemeyer\n\nKeywords: **Singular upgrade**\n\nBranch: **[`ff7c145`](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Jean-Pierre Flori**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21631_\n\n",
    "closed_at": "2016-11-02T19:20:16Z",
    "created_at": "2016-10-03T18:55:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Update Singular to 4.0.3p4",
    "type": "issue",
    "updated_at": "2016-11-12T08:08:56Z",
    "url": "https://github.com/sagemath/sage/issues/21631",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```
This new version does not needed autoreconfing.
Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.

Repackaged tarball at:
https://perso.telecom-paristech.fr/~flori/singular-4.0.3p4.tar.bz2

Depends on #17254

CC:  @johnperry-math @kwankyu @vbraun @jdemeyer

Keywords: **Singular upgrade**

Branch: **[`ff7c145`](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)**

Reviewer: **François Bissey**

Author: **Jean-Pierre Flori**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/21631_





---

archive/issue_events_301040.json:
```json
{
    "actor": "https://github.com/sagetrac-jakobkroeker",
    "created_at": "2016-10-03T18:55:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301040"
}
```



---

archive/issue_events_301041.json:
```json
{
    "actor": "https://github.com/sagetrac-jakobkroeker",
    "created_at": "2016-10-03T18:55:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301041"
}
```



---

archive/issue_events_301042.json:
```json
{
    "actor": "https://github.com/sagetrac-jakobkroeker",
    "created_at": "2016-10-03T18:55:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301042"
}
```



---

archive/issue_events_301043.json:
```json
{
    "actor": "https://github.com/sagetrac-jakobkroeker",
    "created_at": "2016-10-03T18:55:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301043"
}
```



---

archive/issue_comments_317867.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nnow xalloc should be autoconfigured upstream, see\nhttps://github.com/Singular/Sources/pull/795",
    "created_at": "2016-10-04T19:59:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317867",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<div id="comment:1" align="right">comment:1</div>

now xalloc should be autoconfigured upstream, see
https://github.com/Singular/Sources/pull/795



---

archive/issue_comments_317868.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nNew upstream tarball:\n* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p4.tar.gz\n\n4.0.4 should be out soon including a fix needed for NTL 10+.",
    "created_at": "2016-10-19T12:15:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317868",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:2" align="right">comment:2</div>

New upstream tarball:
* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p4.tar.gz

4.0.4 should be out soon including a fix needed for NTL 10+.



---

archive/issue_comments_317869.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,2 @@\n-to use xalloc in debug mode (SAGE_DEBUG=yes),\n-Singular4 has to be repackaged since at least the \n-folder 'xalloc' is not autoconfigured. This is unfortunate.\n-\n-\n-=> fix the issue in such a way that it will be accepted upstream\n+This new version does not needed autoreconfing.\n+Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.\n``````\n",
    "created_at": "2016-10-24T13:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317869",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,2 @@
-to use xalloc in debug mode (SAGE_DEBUG=yes),
-Singular4 has to be repackaged since at least the 
-folder 'xalloc' is not autoconfigured. This is unfortunate.
-
-
-=> fix the issue in such a way that it will be accepted upstream
+This new version does not needed autoreconfing.
+Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.
``````




---

archive/issue_events_301044.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-24T13:11:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301044"
}
```



---

archive/issue_events_301045.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-24T13:11:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301045"
}
```



---

archive/issue_events_301046.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-24T13:11:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "title_is": "Update Singular to 4.0.3p4",
    "title_was": "avoid repackaging of Singular4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301046"
}
```



---

archive/issue_comments_317870.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nThere is also the segfault mentioned by Fran\u00e7ois at [#21676 comment:11](https://github.com/sagemath/sage/issues/21676#comment:11) when calling singular kernel function.\n\nAt the time of cleaning up, it seems we end up with a ring set to NULL and call p_Delete with that at \n* https://github.com/Singular/Sources/blob/spielwiese/libpolys/polys/simpleideals.cc#L133",
    "created_at": "2016-10-24T13:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317870",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:3" align="right">comment:3</div>

There is also the segfault mentioned by François at [#21676 comment:11](https://github.com/sagemath/sage/issues/21676#comment:11) when calling singular kernel function.

At the time of cleaning up, it seems we end up with a ring set to NULL and call p_Delete with that at 
* https://github.com/Singular/Sources/blob/spielwiese/libpolys/polys/simpleideals.cc#L133



---

archive/issue_comments_317871.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nWith the previous version merge with trac/develop, no issue.",
    "created_at": "2016-10-24T13:33:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317871",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:4" align="right">comment:4</div>

With the previous version merge with trac/develop, no issue.



---

archive/issue_comments_317872.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@jpflori](#comment:4):\n> With the previous version merge with trac/develop, no issue.\n\nWhat do you mean by this?",
    "created_at": "2016-10-24T20:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317872",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@jpflori](#comment:4):
> With the previous version merge with trac/develop, no issue.

What do you mean by this?



---

archive/issue_comments_317873.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nSorry, I typed too fast.\nThis makes no sense.\nThe singular update to 4.0.3p3 + fixes is currently in trac/develop.",
    "created_at": "2016-10-24T20:20:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317873",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:6" align="right">comment:6</div>

Sorry, I typed too fast.
This makes no sense.
The singular update to 4.0.3p3 + fixes is currently in trac/develop.



---

archive/issue_comments_317874.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIn sage-on-gentoo I actually shipped 7.4 with singular 4.0.3p3 which indeed works fine. So the behavior with 4.0.3p4 was a big shock.",
    "created_at": "2016-10-24T20:23:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317874",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:7" align="right">comment:7</div>

In sage-on-gentoo I actually shipped 7.4 with singular 4.0.3p3 which indeed works fine. So the behavior with 4.0.3p4 was a big shock.



---

archive/issue_comments_317875.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nYes the issue arises when deallocating from singular the args passed to the mres function (I would say a list of vectors with ring set to NULL).\nDidn't find out yet what changed.\nHopefully I'll be successfull tomorrow.",
    "created_at": "2016-10-24T20:29:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317875",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">comment:8</div>

Yes the issue arises when deallocating from singular the args passed to the mres function (I would say a list of vectors with ring set to NULL).
Didn't find out yet what changed.
Hopefully I'll be successfull tomorrow.



---

archive/issue_comments_317876.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHere is what changed:\n* in 4.0.3p3 `sleftv::CleanUp` was called from `iiExpr2Arith` with ring set and then once again in Sage's `handle_call` method without a ring set but on a empty `sleftv` which just did nothing\n* in 4.0.3p4 it is only called the second time on a non-empty `leftv` without a ring set and boom.",
    "created_at": "2016-10-25T09:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317876",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:9" align="right">comment:9</div>

Here is what changed:
* in 4.0.3p3 `sleftv::CleanUp` was called from `iiExpr2Arith` with ring set and then once again in Sage's `handle_call` method without a ring set but on a empty `sleftv` which just did nothing
* in 4.0.3p4 it is only called the second time on a non-empty `leftv` without a ring set and boom.



---

archive/issue_comments_317877.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nHere you go:\n* https://github.com/Singular/Sources/commit/86ce458e1269a1d57e682c12b9154dd1f1459354",
    "created_at": "2016-10-25T10:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317877",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:10" align="right">comment:10</div>

Here you go:
* https://github.com/Singular/Sources/commit/86ce458e1269a1d57e682c12b9154dd1f1459354



---

archive/issue_comments_317878.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nAsk for advice here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/BKGa51UV-hw",
    "created_at": "2016-10-25T10:12:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317878",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:11" align="right">comment:11</div>

Ask for advice here:
* https://groups.google.com/forum/#!topic/libsingular-devel/BKGa51UV-hw



---

archive/issue_comments_317879.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,5 @@\n This new version does not needed autoreconfing.\n Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.\n+\n+Repackaged tarball at:\n+https://perso.telecom-paristech.fr/~flori/singular-4.0.3p4.tar.bz2\n``````\n",
    "created_at": "2016-10-25T10:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317879",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,5 @@
 This new version does not needed autoreconfing.
 Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.
+
+Repackaged tarball at:
+https://perso.telecom-paristech.fr/~flori/singular-4.0.3p4.tar.bz2
``````




---

archive/issue_comments_317880.json:
```json
{
    "body": "Branch: **[public/singular403p4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular403p4)**",
    "created_at": "2016-10-25T10:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317880",
    "user": "https://github.com/jpflori"
}
```

Branch: **[public/singular403p4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular403p4)**



---

archive/issue_comments_317881.json:
```json
{
    "body": "Commit: **[`b191d91`](https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8)**",
    "created_at": "2016-10-25T10:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317881",
    "user": "https://github.com/jpflori"
}
```

Commit: **[`b191d91`](https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8)**



---

archive/issue_comments_317882.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4378994d331a5c09cf12a14dec2954f054571d79\"><code>4378994</code></a></td><td><code>Update singular to 4.0.3p4.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8\"><code>b191d91</code></a></td><td><code>Don't clean up args to singular function without a ring set.</code></td></tr></table>\n",
    "created_at": "2016-10-25T10:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317882",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:12"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4378994d331a5c09cf12a14dec2954f054571d79"><code>4378994</code></a></td><td><code>Update singular to 4.0.3p4.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8"><code>b191d91</code></a></td><td><code>Don't clean up args to singular function without a ring set.</code></td></tr></table>




---

archive/issue_comments_317883.json:
```json
{
    "body": "Author: **Jean-Pierre Flori**",
    "created_at": "2016-10-25T10:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317883",
    "user": "https://github.com/jpflori"
}
```

Author: **Jean-Pierre Flori**



---

archive/issue_comments_317884.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16\"><code>657fac9</code></a></td><td><code>Different Singular printing for ordering.</code></td></tr></table>\n",
    "created_at": "2016-10-25T14:22:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317884",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16"><code>657fac9</code></a></td><td><code>Different Singular printing for ordering.</code></td></tr></table>




---

archive/issue_comments_317885.json:
```json
{
    "body": "Changed commit from **[`b191d91`](https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8)** to **[`657fac9`](https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16)**",
    "created_at": "2016-10-25T14:22:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317885",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b191d91`](https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8)** to **[`657fac9`](https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16)**



---

archive/issue_comments_317886.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nStill issues with matrix ordering...\nMaybe my comment here:\n* [#17254 comment:157](https://github.com/sagemath/sage/issues/17254#comment:157)\nWas not so wrong.\nBut there is also\n* [#17254 comment:196](https://github.com/sagemath/sage/issues/17254#comment:196)\nand\n* [#17254 comment:199](https://github.com/sagemath/sage/issues/17254#comment:199)\n\nSee also:\n* https://groups.google.com/forum/#!topic/libsingular-devel/jregxl-k8Mw",
    "created_at": "2016-10-25T14:28:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317886",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:14" align="right">comment:14</div>

Still issues with matrix ordering...
Maybe my comment here:
* [#17254 comment:157](https://github.com/sagemath/sage/issues/17254#comment:157)
Was not so wrong.
But there is also
* [#17254 comment:196](https://github.com/sagemath/sage/issues/17254#comment:196)
and
* [#17254 comment:199](https://github.com/sagemath/sage/issues/17254#comment:199)

See also:
* https://groups.google.com/forum/#!topic/libsingular-devel/jregxl-k8Mw



---

archive/issue_comments_317887.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nLooks like both issues about \"local/mixed\" and total degree are related to this commit:\n* https://github.com/Singular/Sources/commit/45f4b2d83e0b667a78f6a5d22c428bf88f28fca7\nand commits following it.\nNow the `p_WTotalDegree` function gives negative results so the Sage hackish code returns `-1`.",
    "created_at": "2016-10-25T14:53:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317887",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:15" align="right">comment:15</div>

Looks like both issues about "local/mixed" and total degree are related to this commit:
* https://github.com/Singular/Sources/commit/45f4b2d83e0b667a78f6a5d22c428bf88f28fca7
and commits following it.
Now the `p_WTotalDegree` function gives negative results so the Sage hackish code returns `-1`.



---

archive/issue_comments_317888.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIn fact we now end up in a \"very bad\" block because of the matrix entries set to `0`:\n* https://github.com/Singular/Sources/commit/0d91221c4a45f7a2621d280d09e628b3e963a60d#diff-d09c8493af07f5c7209a8ad3ce8842feR3826\n\n```\n+          else\n+          {\n+            // very bad:\n+            nonpos++;\n+            nonneg++;\n+            found=1;\n+          }\n```\nwhich leads to `OrdSgn = -1` (and `MixedOrd = 1`) whereas before we had `OrdSgn = -1`.\n\nNot sure what should happen when matrix ordering has zeros inside.\nCC'ing knowledgeable people...",
    "created_at": "2016-10-25T15:01:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317888",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:16" align="right">comment:16</div>

In fact we now end up in a "very bad" block because of the matrix entries set to `0`:
* https://github.com/Singular/Sources/commit/0d91221c4a45f7a2621d280d09e628b3e963a60d#diff-d09c8493af07f5c7209a8ad3ce8842feR3826

```
+          else
+          {
+            // very bad:
+            nonpos++;
+            nonneg++;
+            found=1;
+          }
```
which leads to `OrdSgn = -1` (and `MixedOrd = 1`) whereas before we had `OrdSgn = -1`.

Not sure what should happen when matrix ordering has zeros inside.
CC'ing knowledgeable people...



---

archive/issue_comments_317889.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nOpened\n* https://groups.google.com/forum/#!topic/libsingular-devel/OjJUi3zw04E\nfor discussion.",
    "created_at": "2016-10-25T15:12:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317889",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:17" align="right">comment:17</div>

Opened
* https://groups.google.com/forum/#!topic/libsingular-devel/OjJUi3zw04E
for discussion.



---

archive/issue_comments_317890.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nThere is also:\n* https://groups.google.com/forum/#!topic/libsingular-devel/dulzKFTF3g8\nsuggesting to use `p_FDeg` or p_LDeg`.",
    "created_at": "2016-10-25T15:18:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317890",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:18" align="right">comment:18</div>

There is also:
* https://groups.google.com/forum/#!topic/libsingular-devel/dulzKFTF3g8
suggesting to use `p_FDeg` or p_LDeg`.



---

archive/issue_comments_317891.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jpflori](#comment:16):\n> Not sure what should happen when matrix ordering has zeros inside.\n\nIf the first nonzero element in each column is positive, the ordering is global. From the comments, it says they look at \"other blocks.\" I don't remember offhand how wvhdl works in this case (not sure I ever knew) but it's not clear to me they're looking further down the column than the first row. If not, that would be a bug.",
    "created_at": "2016-10-25T15:26:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317891",
    "user": "https://github.com/johnperry-math"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jpflori](#comment:16):
> Not sure what should happen when matrix ordering has zeros inside.

If the first nonzero element in each column is positive, the ordering is global. From the comments, it says they look at "other blocks." I don't remember offhand how wvhdl works in this case (not sure I ever knew) but it's not clear to me they're looking further down the column than the first row. If not, that would be a bug.



---

archive/issue_comments_317892.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nWhat is sure is that in the case\n\n```\n            sage: tord = TermOrder(matrix([3,0,1,1,1,0,1,0,0]))\n```\nsingular gets a `OrdSgn = -1` now.\n\nAnd I get\n\n```\nsage: tord=TermOrder(matrix([3,0,1,1,1,0,1,0,0]))\nsage: R.<x,y,z> = PolynomialRing(QQ,3,order=tord)\nsage: x.parent()._singular_()\n\npolynomial ring, over a field, mixed ordering\n//   characteristic : 0\n//   number of vars : 3\n//        block   1 : ordering M\n//                  : names    x y z\n//                  : weights  3 0 1\n//                  : weights  1 1 0\n//                  : weights  1 0 0\n//        block   2 : ordering C\nsage: \n```",
    "created_at": "2016-10-25T15:45:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317892",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:20" align="right">comment:20</div>

What is sure is that in the case

```
            sage: tord = TermOrder(matrix([3,0,1,1,1,0,1,0,0]))
```
singular gets a `OrdSgn = -1` now.

And I get

```
sage: tord=TermOrder(matrix([3,0,1,1,1,0,1,0,0]))
sage: R.<x,y,z> = PolynomialRing(QQ,3,order=tord)
sage: x.parent()._singular_()

polynomial ring, over a field, mixed ordering
//   characteristic : 0
//   number of vars : 3
//        block   1 : ordering M
//                  : names    x y z
//                  : weights  3 0 1
//                  : weights  1 1 0
//                  : weights  1 0 0
//        block   2 : ordering C
sage: 
```



---

archive/issue_comments_317893.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nIt also depends on what you mean by positive...",
    "created_at": "2016-10-25T15:46:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317893",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:21" align="right">comment:21</div>

It also depends on what you mean by positive...



---

archive/issue_comments_317894.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nForm the \"very bad\" snippet, any zero entry (in at least the first row) makes it a mixed ordering.",
    "created_at": "2016-10-25T15:49:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317894",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:22" align="right">comment:22</div>

Form the "very bad" snippet, any zero entry (in at least the first row) makes it a mixed ordering.



---

archive/issue_comments_317895.json:
```json
{
    "body": "Changed commit from **[`657fac9`](https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16)** to **[`eef0dc4`](https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee)**",
    "created_at": "2016-10-25T16:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317895",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`657fac9`](https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16)** to **[`eef0dc4`](https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee)**



---

archive/issue_comments_317896.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee\"><code>eef0dc4</code></a></td><td><code>Use Singular p_WDegree for weighted degree.</code></td></tr></table>\n",
    "created_at": "2016-10-25T16:33:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317896",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee"><code>eef0dc4</code></a></td><td><code>Use Singular p_WDegree for weighted degree.</code></td></tr></table>




---

archive/issue_events_301047.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-25T18:16:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301047"
}
```



---

archive/issue_comments_317897.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nIt seems most failing doctests are gone.\n* `Fatal: Memory exhausted` in `sage -t --long src/sage/modular/local_comp/type_space.py` which might be unrelated.",
    "created_at": "2016-10-25T18:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317897",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:24" align="right">comment:24</div>

It seems most failing doctests are gone.
* `Fatal: Memory exhausted` in `sage -t --long src/sage/modular/local_comp/type_space.py` which might be unrelated.



---

archive/issue_comments_317898.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI can confirm the above issue also happends without the update to 4.0.3p4 so it should not prevent this ticket from being merged.",
    "created_at": "2016-10-26T14:54:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317898",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:25" align="right">comment:25</div>

I can confirm the above issue also happends without the update to 4.0.3p4 so it should not prevent this ticket from being merged.



---

archive/issue_comments_317899.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n1. I think it's better to keep the touching in `spkg-src` instead of moving it to `spkg-install`.\n\n2. Why this change? You don't seem to use the newly-cimported stuff\n\n```diff\ndiff --git a/src/sage/libs/singular/polynomial.pyx b/src/sage/libs/singular/polynomial.pyx\nindex e243fae..83b5104 100644\n--- a/src/sage/libs/singular/polynomial.pyx\n+++ b/src/sage/libs/singular/polynomial.pyx\n@@ -22,7 +22,7 @@ plusminus_pattern = re.compile(\"([^\\(^])([\\+\\-])\")\n from sage.libs.singular.decl cimport number, ideal\n from sage.libs.singular.decl cimport currRing, rChangeCurrRing\n from sage.libs.singular.decl cimport p_Copy, p_Add_q, p_Neg, pp_Mult_nn, p_GetCoeff, p_IsConstant, p_Cmp, pNext\n-from sage.libs.singular.decl cimport p_GetMaxExp, pp_Mult_qq, pPower, p_String, p_GetExp, p_Deg, p_Totaldegree, p_WTotaldegree, p_WDegree\n+from sage.libs.singular.decl cimport p_GetMaxExp, pp_Mult_qq, pPower, p_String, p_GetExp, p_Deg, p_Totaldegree, p_WTotaldegree, p_WDegree, p_LDeg, p_FDeg\n from sage.libs.singular.decl cimport n_Delete, idInit, fast_map_common_subexp, id_Delete\n from sage.libs.singular.decl cimport omAlloc0, omStrDup, omFree\n from sage.libs.singular.decl cimport p_GetComp, p_SetComp\n```\n\n3. Remove this: `#return p_Deg(p, r)`",
    "created_at": "2016-10-26T17:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317899",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">comment:26</div>

1. I think it's better to keep the touching in `spkg-src` instead of moving it to `spkg-install`.

2. Why this change? You don't seem to use the newly-cimported stuff

```diff
diff --git a/src/sage/libs/singular/polynomial.pyx b/src/sage/libs/singular/polynomial.pyx
index e243fae..83b5104 100644
--- a/src/sage/libs/singular/polynomial.pyx
+++ b/src/sage/libs/singular/polynomial.pyx
@@ -22,7 +22,7 @@ plusminus_pattern = re.compile("([^\(^])([\+\-])")
 from sage.libs.singular.decl cimport number, ideal
 from sage.libs.singular.decl cimport currRing, rChangeCurrRing
 from sage.libs.singular.decl cimport p_Copy, p_Add_q, p_Neg, pp_Mult_nn, p_GetCoeff, p_IsConstant, p_Cmp, pNext
-from sage.libs.singular.decl cimport p_GetMaxExp, pp_Mult_qq, pPower, p_String, p_GetExp, p_Deg, p_Totaldegree, p_WTotaldegree, p_WDegree
+from sage.libs.singular.decl cimport p_GetMaxExp, pp_Mult_qq, pPower, p_String, p_GetExp, p_Deg, p_Totaldegree, p_WTotaldegree, p_WDegree, p_LDeg, p_FDeg
 from sage.libs.singular.decl cimport n_Delete, idInit, fast_map_common_subexp, id_Delete
 from sage.libs.singular.decl cimport omAlloc0, omStrDup, omFree
 from sage.libs.singular.decl cimport p_GetComp, p_SetComp
```

3. Remove this: `#return p_Deg(p, r)`



---

archive/issue_events_301048.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:42:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301048"
}
```



---

archive/issue_events_301049.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:42:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301049"
}
```



---

archive/issue_events_301050.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:42:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301050"
}
```



---

archive/issue_events_301051.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:42:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301051"
}
```



---

archive/issue_comments_317900.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nThe current patch works for me to solve the segfault problems. Pending the revisions asked by Jeroen, I am ok with this.",
    "created_at": "2016-10-27T09:55:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317900",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

The current patch works for me to solve the segfault problems. Pending the revisions asked by Jeroen, I am ok with this.



---

archive/issue_comments_317901.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95\"><code>10b99df</code></a></td><td><code>Remove unused Singular degree related stuff.</code></td></tr></table>\n",
    "created_at": "2016-10-27T10:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317901",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95"><code>10b99df</code></a></td><td><code>Remove unused Singular degree related stuff.</code></td></tr></table>




---

archive/issue_comments_317902.json:
```json
{
    "body": "Changed commit from **[`eef0dc4`](https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee)** to **[`10b99df`](https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95)**",
    "created_at": "2016-10-27T10:23:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317902",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`eef0dc4`](https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee)** to **[`10b99df`](https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95)**



---

archive/issue_comments_317903.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nPoints 2 and 3 addressed.\n\nI can go with point 1 but that means repackaging the tarball.\nWill the patchbots and Volker be happy?",
    "created_at": "2016-10-27T10:30:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317903",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:29" align="right">comment:29</div>

Points 2 and 3 addressed.

I can go with point 1 but that means repackaging the tarball.
Will the patchbots and Volker be happy?



---

archive/issue_comments_317904.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nI've reported the issue here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/OdaD7HctT9Q",
    "created_at": "2016-10-27T10:35:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317904",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:30" align="right">comment:30</div>

I've reported the issue here:
* https://groups.google.com/forum/#!topic/libsingular-devel/OdaD7HctT9Q



---

archive/issue_comments_317905.json:
```json
{
    "body": "<div id=\"comment:31\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac\"><code>ff7c145</code></a></td><td><code>Touch Singular autotools files in spkg-src.</code></td></tr></table>\n",
    "created_at": "2016-10-27T11:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317905",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac"><code>ff7c145</code></a></td><td><code>Touch Singular autotools files in spkg-src.</code></td></tr></table>




---

archive/issue_comments_317906.json:
```json
{
    "body": "Changed commit from **[`10b99df`](https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95)** to **[`ff7c145`](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)**",
    "created_at": "2016-10-27T11:48:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317906",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`10b99df`](https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95)** to **[`ff7c145`](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)**



---

archive/issue_comments_317907.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nDealt with point 1.\nThe tarball changed.",
    "created_at": "2016-10-27T11:50:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317907",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:32" align="right">comment:32</div>

Dealt with point 1.
The tarball changed.



---

archive/issue_events_301052.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-27T11:50:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301052"
}
```



---

archive/issue_events_301053.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-27T11:50:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301053"
}
```



---

archive/issue_comments_317908.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@jpflori](#comment:29):\n> Points 2 and 3 addressed.\n> \n> I can go with point 1 but that means repackaging the tarball.\n> Will the patchbots and Volker be happy?\n\nDepends whether or not he already uploaded it on the mirrors or not. This hasn't got through his develop branch on github so probably not.\n\nPutting it to positive review.",
    "created_at": "2016-10-31T04:08:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317908",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@jpflori](#comment:29):
> Points 2 and 3 addressed.
> 
> I can go with point 1 but that means repackaging the tarball.
> Will the patchbots and Volker be happy?

Depends whether or not he already uploaded it on the mirrors or not. This hasn't got through his develop branch on github so probably not.

Putting it to positive review.



---

archive/issue_events_301054.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-31T04:08:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301054"
}
```



---

archive/issue_events_301055.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-31T04:08:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301055"
}
```



---

archive/issue_events_301056.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-31T04:39:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301056"
}
```



---

archive/issue_events_301057.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-31T04:39:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301057"
}
```



---

archive/issue_comments_317909.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nStop! I thought this release was supposed to have the fix for ntl 10+. But it isn't there, in the tarball or the patches directory. Do we want to proceed with that?",
    "created_at": "2016-10-31T04:39:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317909",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:34" align="right">comment:34</div>

Stop! I thought this release was supposed to have the fix for ntl 10+. But it isn't there, in the tarball or the patches directory. Do we want to proceed with that?



---

archive/issue_events_301058.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-31T09:43:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301058"
}
```



---

archive/issue_events_301059.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-31T09:43:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301059"
}
```



---

archive/issue_comments_317910.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2016-10-31T09:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317910",
    "user": "https://github.com/jpflori"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_317911.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nI'd say we merge now and add a patch in the ntl10 ticket #21676.\nMore work will also be needed for a better debug mode #21624 but I need Hans' feedback on that one as there might be some bugs in singular itself.",
    "created_at": "2016-10-31T09:43:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317911",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:35" align="right">comment:35</div>

I'd say we merge now and add a patch in the ntl10 ticket #21676.
More work will also be needed for a better debug mode #21624 but I need Hans' feedback on that one as there might be some bugs in singular itself.



---

archive/issue_comments_317912.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nThere are now a lot more warnings in debug mode but I'll leave that to you in #21624",
    "created_at": "2016-11-02T19:18:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317912",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:36" align="right">comment:36</div>

There are now a lot more warnings in debug mode but I'll leave that to you in #21624



---

archive/issue_events_301060.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-02T19:20:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301060"
}
```



---

archive/issue_events_301061.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3885e95ef1cd6e5aa6a271f0ea5101311f9c536f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-02T19:20:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-301061"
}
```



---

archive/issue_comments_317913.json:
```json
{
    "body": "Changed branch from **[public/singular403p4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular403p4)** to **[`ff7c145`](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)**",
    "created_at": "2016-11-02T19:20:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317913",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/singular403p4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular403p4)** to **[`ff7c145`](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)**



---

archive/issue_comments_317914.json:
```json
{
    "body": "Changed commit from **[`ff7c145`](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)** to none",
    "created_at": "2016-11-12T01:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317914",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`ff7c145`](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)** to none



---

archive/issue_comments_317915.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nSee #21865 for a followup.",
    "created_at": "2016-11-12T01:10:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317915",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:38" align="right">comment:38</div>

See #21865 for a followup.



---

archive/issue_comments_317916.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nDid somebody verify that all patches which are removed in this ticket are actually upstreamed in this Singular version? If not, we might have an easy fix for #21865.",
    "created_at": "2016-11-12T08:08:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-317916",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">comment:39</div>

Did somebody verify that all patches which are removed in this ticket are actually upstreamed in this Singular version? If not, we might have an easy fix for #21865.
