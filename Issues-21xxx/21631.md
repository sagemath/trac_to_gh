# Issue 21631: Update Singular to 4.0.3p4

archive/issues_021394.json:
```json
{
    "body": "This new version does not needed autoreconfing.\nNonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.\n\nRepackaged tarball at:\nhttps://perso.telecom-paristech.fr/~flori/singular-4.0.3p4.tar.bz2\n\nDepends on #17254\n\n**CC:**  @johnperry-math @kwankyu @vbraun @jdemeyer\n\n**Keywords:** Singular upgrade\n\n**Branch:** [ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Jean-Pierre Flori\n\nIssue created by migration from https://trac.sagemath.org/ticket/21631\n\n",
    "closed_at": "2016-11-02T19:20:16Z",
    "created_at": "2016-10-03T18:55:45Z",
    "labels": [
        "component: packages: standard",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "title": "Update Singular to 4.0.3p4",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/21631",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```
This new version does not needed autoreconfing.
Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.

Repackaged tarball at:
https://perso.telecom-paristech.fr/~flori/singular-4.0.3p4.tar.bz2

Depends on #17254

**CC:**  @johnperry-math @kwankyu @vbraun @jdemeyer

**Keywords:** Singular upgrade

**Branch:** [ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)

**Reviewer:** François Bissey

**Author:** Jean-Pierre Flori

Issue created by migration from https://trac.sagemath.org/ticket/21631





---

archive/issue_comments_320430.json:
```json
{
    "body": "<a id='comment:1'></a>\nnow xalloc should be autoconfigured upstream, see\nhttps://github.com/Singular/Sources/pull/795",
    "created_at": "2016-10-04T19:59:32Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320430",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:1'></a>
now xalloc should be autoconfigured upstream, see
https://github.com/Singular/Sources/pull/795



---

archive/issue_comments_320431.json:
```json
{
    "body": "<a id='comment:2'></a>\nNew upstream tarball:\n* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p4.tar.gz\n\n4.0.4 should be out soon including a fix needed for NTL 10+.",
    "created_at": "2016-10-19T12:15:27Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320431",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:2'></a>
New upstream tarball:
* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-0-3/singular-4.0.3p4.tar.gz

4.0.4 should be out soon including a fix needed for NTL 10+.



---

archive/issue_comments_320432.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,6 +1,2 @@\n-to use xalloc in debug mode (SAGE_DEBUG=yes),\n-Singular4 has to be repackaged since at least the \n-folder 'xalloc' is not autoconfigured. This is unfortunate.\n-\n-\n-=> fix the issue in such a way that it will be accepted upstream\n+This new version does not needed autoreconfing.\n+Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.\n``````\n",
    "created_at": "2016-10-24T13:11:00Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320432",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,6 +1,2 @@
-to use xalloc in debug mode (SAGE_DEBUG=yes),
-Singular4 has to be repackaged since at least the 
-folder 'xalloc' is not autoconfigured. This is unfortunate.
-
-
-=> fix the issue in such a way that it will be accepted upstream
+This new version does not needed autoreconfing.
+Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.
``````




---

archive/issue_events_193839.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-10-24T13:11:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "minor",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193839"
}
```



---

archive/issue_events_193840.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-10-24T13:11:00Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "rename": {
        "from": "avoid repackaging of Singular4",
        "to": "Update Singular to 4.0.3p4"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193840"
}
```



---

archive/issue_comments_320433.json:
```json
{
    "body": "<a id='comment:3'></a>\nThere is also the segfault mentioned by Fran\u00e7ois at [#21676 comment:11](https://github.com/sagemath/sage/issues/21676#comment:11) when calling singular kernel function.\n\nAt the time of cleaning up, it seems we end up with a ring set to NULL and call p_Delete with that at \n* https://github.com/Singular/Sources/blob/spielwiese/libpolys/polys/simpleideals.cc#L133",
    "created_at": "2016-10-24T13:11:00Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320433",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:3'></a>
There is also the segfault mentioned by François at [#21676 comment:11](https://github.com/sagemath/sage/issues/21676#comment:11) when calling singular kernel function.

At the time of cleaning up, it seems we end up with a ring set to NULL and call p_Delete with that at 
* https://github.com/Singular/Sources/blob/spielwiese/libpolys/polys/simpleideals.cc#L133



---

archive/issue_comments_320434.json:
```json
{
    "body": "<a id='comment:4'></a>\nWith the previous version merge with trac/develop, no issue.",
    "created_at": "2016-10-24T13:33:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320434",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>
With the previous version merge with trac/develop, no issue.



---

archive/issue_comments_320435.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [jpflori](#comment%3A4):\n> With the previous version merge with trac/develop, no issue.\n\n\nWhat do you mean by this?",
    "created_at": "2016-10-24T20:10:20Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320435",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>
Replying to [jpflori](#comment%3A4):
> With the previous version merge with trac/develop, no issue.


What do you mean by this?



---

archive/issue_comments_320436.json:
```json
{
    "body": "<a id='comment:6'></a>\nSorry, I typed too fast.\nThis makes no sense.\nThe singular update to 4.0.3p3 + fixes is currently in trac/develop.",
    "created_at": "2016-10-24T20:20:18Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320436",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>
Sorry, I typed too fast.
This makes no sense.
The singular update to 4.0.3p3 + fixes is currently in trac/develop.



---

archive/issue_comments_320437.json:
```json
{
    "body": "<a id='comment:7'></a>\nIn sage-on-gentoo I actually shipped 7.4 with singular 4.0.3p3 which indeed works fine. So the behavior with 4.0.3p4 was a big shock.",
    "created_at": "2016-10-24T20:23:47Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320437",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:7'></a>
In sage-on-gentoo I actually shipped 7.4 with singular 4.0.3p3 which indeed works fine. So the behavior with 4.0.3p4 was a big shock.



---

archive/issue_comments_320438.json:
```json
{
    "body": "<a id='comment:8'></a>\nYes the issue arises when deallocating from singular the args passed to the mres function (I would say a list of vectors with ring set to NULL).\nDidn't find out yet what changed.\nHopefully I'll be successfull tomorrow.",
    "created_at": "2016-10-24T20:29:17Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320438",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
Yes the issue arises when deallocating from singular the args passed to the mres function (I would say a list of vectors with ring set to NULL).
Didn't find out yet what changed.
Hopefully I'll be successfull tomorrow.



---

archive/issue_comments_320439.json:
```json
{
    "body": "<a id='comment:9'></a>\nHere is what changed:\n* in 4.0.3p3 `sleftv::CleanUp` was called from `iiExpr2Arith` with ring set and then once again in Sage's `handle_call` method without a ring set but on a empty `sleftv` which just did nothing\n* in 4.0.3p4 it is only called the second time on a non-empty `leftv` without a ring set and boom.",
    "created_at": "2016-10-25T09:59:30Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320439",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
Here is what changed:
* in 4.0.3p3 `sleftv::CleanUp` was called from `iiExpr2Arith` with ring set and then once again in Sage's `handle_call` method without a ring set but on a empty `sleftv` which just did nothing
* in 4.0.3p4 it is only called the second time on a non-empty `leftv` without a ring set and boom.



---

archive/issue_comments_320440.json:
```json
{
    "body": "<a id='comment:10'></a>\nHere you go:\n* https://github.com/Singular/Sources/commit/86ce458e1269a1d57e682c12b9154dd1f1459354",
    "created_at": "2016-10-25T10:04:34Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320440",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>
Here you go:
* https://github.com/Singular/Sources/commit/86ce458e1269a1d57e682c12b9154dd1f1459354



---

archive/issue_comments_320441.json:
```json
{
    "body": "<a id='comment:11'></a>\nAsk for advice here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/BKGa51UV-hw",
    "created_at": "2016-10-25T10:12:11Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320441",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:11'></a>
Ask for advice here:
* https://groups.google.com/forum/#!topic/libsingular-devel/BKGa51UV-hw



---

archive/issue_comments_320442.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,2 +1,5 @@\n This new version does not needed autoreconfing.\n Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.\n+\n+Repackaged tarball at:\n+https://perso.telecom-paristech.fr/~flori/singular-4.0.3p4.tar.bz2\n``````\n",
    "created_at": "2016-10-25T10:24:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320442",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,2 +1,5 @@
 This new version does not needed autoreconfing.
 Nonetheless we still need to ship in the doc and to touch the autotools files due to timestamp issues.
+
+Repackaged tarball at:
+https://perso.telecom-paristech.fr/~flori/singular-4.0.3p4.tar.bz2
``````




---

archive/issue_comments_320443.json:
```json
{
    "body": "**Branch:** [public/singular403p4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular403p4)",
    "created_at": "2016-10-25T10:24:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320443",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Branch:** [public/singular403p4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular403p4)



---

archive/issue_comments_320444.json:
```json
{
    "body": "**Commit:** [b191d91876f6a5fb20a9c67c5ba19ed992b017a8](https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8)",
    "created_at": "2016-10-25T10:24:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320444",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Commit:** [b191d91876f6a5fb20a9c67c5ba19ed992b017a8](https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8)



---

archive/issue_comments_320445.json:
```json
{
    "body": "<a id='comment:12'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4378994d331a5c09cf12a14dec2954f054571d79\">4378994</a></td><td><code>Update singular to 4.0.3p4.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8\">b191d91</a></td><td><code>Don't clean up args to singular function without a ring set.</code></td></tr></table>\n",
    "created_at": "2016-10-25T10:24:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320445",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:12'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4378994d331a5c09cf12a14dec2954f054571d79">4378994</a></td><td><code>Update singular to 4.0.3p4.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8">b191d91</a></td><td><code>Don't clean up args to singular function without a ring set.</code></td></tr></table>




---

archive/issue_comments_320446.json:
```json
{
    "body": "**Author:** Jean-Pierre Flori",
    "created_at": "2016-10-25T10:24:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320446",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Author:** Jean-Pierre Flori



---

archive/issue_comments_320447.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16\">657fac9</a></td><td><code>Different Singular printing for ordering.</code></td></tr></table>\n",
    "created_at": "2016-10-25T14:22:11Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320447",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16">657fac9</a></td><td><code>Different Singular printing for ordering.</code></td></tr></table>




---

archive/issue_comments_320448.json:
```json
{
    "body": "**Changing commit** from \"[b191d91876f6a5fb20a9c67c5ba19ed992b017a8](https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8)\" to \"[657fac98979ec0c04ae06935c095441673dffc16](https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16)\".",
    "created_at": "2016-10-25T14:22:11Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320448",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[b191d91876f6a5fb20a9c67c5ba19ed992b017a8](https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8)" to "[657fac98979ec0c04ae06935c095441673dffc16](https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16)".



---

archive/issue_comments_320449.json:
```json
{
    "body": "<a id='comment:14'></a>\nStill issues with matrix ordering...\nMaybe my comment here:\n* [#17254 comment:157](https://github.com/sagemath/sage/issues/17254#comment:157)\nWas not so wrong.\nBut there is also\n* [#17254 comment:196](https://github.com/sagemath/sage/issues/17254#comment:196)\nand\n* [#17254 comment:199](https://github.com/sagemath/sage/issues/17254#comment:199)\n\nSee also:\n* https://groups.google.com/forum/#!topic/libsingular-devel/jregxl-k8Mw",
    "created_at": "2016-10-25T14:28:46Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320449",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
Still issues with matrix ordering...
Maybe my comment here:
* [#17254 comment:157](https://github.com/sagemath/sage/issues/17254#comment:157)
Was not so wrong.
But there is also
* [#17254 comment:196](https://github.com/sagemath/sage/issues/17254#comment:196)
and
* [#17254 comment:199](https://github.com/sagemath/sage/issues/17254#comment:199)

See also:
* https://groups.google.com/forum/#!topic/libsingular-devel/jregxl-k8Mw



---

archive/issue_comments_320450.json:
```json
{
    "body": "<a id='comment:15'></a>\nLooks like both issues about \"local/mixed\" and total degree are related to this commit:\n* https://github.com/Singular/Sources/commit/45f4b2d83e0b667a78f6a5d22c428bf88f28fca7\nand commits following it.\nNow the `p_WTotalDegree` function gives negative results so the Sage hackish code returns `-1`.",
    "created_at": "2016-10-25T14:53:30Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320450",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:15'></a>
Looks like both issues about "local/mixed" and total degree are related to this commit:
* https://github.com/Singular/Sources/commit/45f4b2d83e0b667a78f6a5d22c428bf88f28fca7
and commits following it.
Now the `p_WTotalDegree` function gives negative results so the Sage hackish code returns `-1`.



---

archive/issue_comments_320451.json:
```json
{
    "body": "<a id='comment:16'></a>\nIn fact we now end up in a \"very bad\" block because of the matrix entries set to `0`:\n* https://github.com/Singular/Sources/commit/0d91221c4a45f7a2621d280d09e628b3e963a60d#diff-d09c8493af07f5c7209a8ad3ce8842feR3826\n\n```\n+          else\n+          {\n+            // very bad:\n+            nonpos++;\n+            nonneg++;\n+            found=1;\n+          }\n```\nwhich leads to `OrdSgn = -1` (and `MixedOrd = 1`) whereas before we had `OrdSgn = -1`.\n\nNot sure what should happen when matrix ordering has zeros inside.\nCC'ing knowledgeable people...",
    "created_at": "2016-10-25T15:01:44Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320451",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:16'></a>
In fact we now end up in a "very bad" block because of the matrix entries set to `0`:
* https://github.com/Singular/Sources/commit/0d91221c4a45f7a2621d280d09e628b3e963a60d#diff-d09c8493af07f5c7209a8ad3ce8842feR3826

```
+          else
+          {
+            // very bad:
+            nonpos++;
+            nonneg++;
+            found=1;
+          }
```
which leads to `OrdSgn = -1` (and `MixedOrd = 1`) whereas before we had `OrdSgn = -1`.

Not sure what should happen when matrix ordering has zeros inside.
CC'ing knowledgeable people...



---

archive/issue_comments_320452.json:
```json
{
    "body": "<a id='comment:17'></a>\nOpened\n* https://groups.google.com/forum/#!topic/libsingular-devel/OjJUi3zw04E\nfor discussion.",
    "created_at": "2016-10-25T15:12:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320452",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:17'></a>
Opened
* https://groups.google.com/forum/#!topic/libsingular-devel/OjJUi3zw04E
for discussion.



---

archive/issue_comments_320453.json:
```json
{
    "body": "<a id='comment:18'></a>\nThere is also:\n* https://groups.google.com/forum/#!topic/libsingular-devel/dulzKFTF3g8\nsuggesting to use `p_FDeg` or p_LDeg`.",
    "created_at": "2016-10-25T15:18:32Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320453",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:18'></a>
There is also:
* https://groups.google.com/forum/#!topic/libsingular-devel/dulzKFTF3g8
suggesting to use `p_FDeg` or p_LDeg`.



---

archive/issue_comments_320454.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [jpflori](#comment%3A16):\n> Not sure what should happen when matrix ordering has zeros inside.\n\n\nIf the first nonzero element in each column is positive, the ordering is global. From the comments, it says they look at \"other blocks.\" I don't remember offhand how wvhdl works in this case (not sure I ever knew) but it's not clear to me they're looking further down the column than the first row. If not, that would be a bug.",
    "created_at": "2016-10-25T15:26:44Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320454",
    "user": "https://github.com/johnperry-math"
}
```

<a id='comment:19'></a>
Replying to [jpflori](#comment%3A16):
> Not sure what should happen when matrix ordering has zeros inside.


If the first nonzero element in each column is positive, the ordering is global. From the comments, it says they look at "other blocks." I don't remember offhand how wvhdl works in this case (not sure I ever knew) but it's not clear to me they're looking further down the column than the first row. If not, that would be a bug.



---

archive/issue_comments_320455.json:
```json
{
    "body": "<a id='comment:20'></a>\nWhat is sure is that in the case\n\n```\n            sage: tord = TermOrder(matrix([3,0,1,1,1,0,1,0,0]))\n```\nsingular gets a `OrdSgn = -1` now.\n\nAnd I get\n\n```\nsage: tord=TermOrder(matrix([3,0,1,1,1,0,1,0,0]))\nsage: R.<x,y,z> = PolynomialRing(QQ,3,order=tord)\nsage: x.parent()._singular_()\n\npolynomial ring, over a field, mixed ordering\n//   characteristic : 0\n//   number of vars : 3\n//        block   1 : ordering M\n//                  : names    x y z\n//                  : weights  3 0 1\n//                  : weights  1 1 0\n//                  : weights  1 0 0\n//        block   2 : ordering C\nsage: \n```",
    "created_at": "2016-10-25T15:45:35Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320455",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:20'></a>
What is sure is that in the case

```
            sage: tord = TermOrder(matrix([3,0,1,1,1,0,1,0,0]))
```
singular gets a `OrdSgn = -1` now.

And I get

```
sage: tord=TermOrder(matrix([3,0,1,1,1,0,1,0,0]))
sage: R.<x,y,z> = PolynomialRing(QQ,3,order=tord)
sage: x.parent()._singular_()

polynomial ring, over a field, mixed ordering
//   characteristic : 0
//   number of vars : 3
//        block   1 : ordering M
//                  : names    x y z
//                  : weights  3 0 1
//                  : weights  1 1 0
//                  : weights  1 0 0
//        block   2 : ordering C
sage: 
```



---

archive/issue_comments_320456.json:
```json
{
    "body": "<a id='comment:21'></a>\nIt also depends on what you mean by positive...",
    "created_at": "2016-10-25T15:46:43Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320456",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>
It also depends on what you mean by positive...



---

archive/issue_comments_320457.json:
```json
{
    "body": "<a id='comment:22'></a>\nForm the \"very bad\" snippet, any zero entry (in at least the first row) makes it a mixed ordering.",
    "created_at": "2016-10-25T15:49:21Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320457",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:22'></a>
Form the "very bad" snippet, any zero entry (in at least the first row) makes it a mixed ordering.



---

archive/issue_comments_320458.json:
```json
{
    "body": "**Changing commit** from \"[657fac98979ec0c04ae06935c095441673dffc16](https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16)\" to \"[eef0dc45ee2cb571a9117d1cde5b63aa12747fee](https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee)\".",
    "created_at": "2016-10-25T16:33:57Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320458",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[657fac98979ec0c04ae06935c095441673dffc16](https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16)" to "[eef0dc45ee2cb571a9117d1cde5b63aa12747fee](https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee)".



---

archive/issue_comments_320459.json:
```json
{
    "body": "<a id='comment:23'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee\">eef0dc4</a></td><td><code>Use Singular p_WDegree for weighted degree.</code></td></tr></table>\n",
    "created_at": "2016-10-25T16:33:57Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320459",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee">eef0dc4</a></td><td><code>Use Singular p_WDegree for weighted degree.</code></td></tr></table>




---

archive/issue_events_193841.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-10-25T18:16:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193841"
}
```



---

archive/issue_comments_320460.json:
```json
{
    "body": "<a id='comment:24'></a>\nIt seems most failing doctests are gone.\n* `Fatal: Memory exhausted` in `sage -t --long src/sage/modular/local_comp/type_space.py` which might be unrelated.",
    "created_at": "2016-10-25T18:16:51Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320460",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:24'></a>
It seems most failing doctests are gone.
* `Fatal: Memory exhausted` in `sage -t --long src/sage/modular/local_comp/type_space.py` which might be unrelated.



---

archive/issue_comments_320461.json:
```json
{
    "body": "<a id='comment:25'></a>\nI can confirm the above issue also happends without the update to 4.0.3p4 so it should not prevent this ticket from being merged.",
    "created_at": "2016-10-26T14:54:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320461",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>
I can confirm the above issue also happends without the update to 4.0.3p4 so it should not prevent this ticket from being merged.



---

archive/issue_comments_320462.json:
```json
{
    "body": "<a id='comment:26'></a>\n1. I think it's better to keep the touching in `spkg-src` instead of moving it to `spkg-install`.\n\n2. Why this change? You don't seem to use the newly-cimported stuff\n\n```diff\ndiff --git a/src/sage/libs/singular/polynomial.pyx b/src/sage/libs/singular/polynomial.pyx\nindex e243fae..83b5104 100644\n--- a/src/sage/libs/singular/polynomial.pyx\n+++ b/src/sage/libs/singular/polynomial.pyx\n@@ -22,7 +22,7 @@ plusminus_pattern = re.compile(\"([^\\(^])([\\+\\-])\")\n from sage.libs.singular.decl cimport number, ideal\n from sage.libs.singular.decl cimport currRing, rChangeCurrRing\n from sage.libs.singular.decl cimport p_Copy, p_Add_q, p_Neg, pp_Mult_nn, p_GetCoeff, p_IsConstant, p_Cmp, pNext\n-from sage.libs.singular.decl cimport p_GetMaxExp, pp_Mult_qq, pPower, p_String, p_GetExp, p_Deg, p_Totaldegree, p_WTotaldegree, p_WDegree\n+from sage.libs.singular.decl cimport p_GetMaxExp, pp_Mult_qq, pPower, p_String, p_GetExp, p_Deg, p_Totaldegree, p_WTotaldegree, p_WDegree, p_LDeg, p_FDeg\n from sage.libs.singular.decl cimport n_Delete, idInit, fast_map_common_subexp, id_Delete\n from sage.libs.singular.decl cimport omAlloc0, omStrDup, omFree\n from sage.libs.singular.decl cimport p_GetComp, p_SetComp\n```\n\n3. Remove this: `#return p_Deg(p, r)`",
    "created_at": "2016-10-26T17:42:07Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320462",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
1. I think it's better to keep the touching in `spkg-src` instead of moving it to `spkg-install`.

2. Why this change? You don't seem to use the newly-cimported stuff

```diff
diff --git a/src/sage/libs/singular/polynomial.pyx b/src/sage/libs/singular/polynomial.pyx
index e243fae..83b5104 100644
--- a/src/sage/libs/singular/polynomial.pyx
+++ b/src/sage/libs/singular/polynomial.pyx
@@ -22,7 +22,7 @@ plusminus_pattern = re.compile("([^\(^])([\+\-])")
 from sage.libs.singular.decl cimport number, ideal
 from sage.libs.singular.decl cimport currRing, rChangeCurrRing
 from sage.libs.singular.decl cimport p_Copy, p_Add_q, p_Neg, pp_Mult_nn, p_GetCoeff, p_IsConstant, p_Cmp, pNext
-from sage.libs.singular.decl cimport p_GetMaxExp, pp_Mult_qq, pPower, p_String, p_GetExp, p_Deg, p_Totaldegree, p_WTotaldegree, p_WDegree
+from sage.libs.singular.decl cimport p_GetMaxExp, pp_Mult_qq, pPower, p_String, p_GetExp, p_Deg, p_Totaldegree, p_WTotaldegree, p_WDegree, p_LDeg, p_FDeg
 from sage.libs.singular.decl cimport n_Delete, idInit, fast_map_common_subexp, id_Delete
 from sage.libs.singular.decl cimport omAlloc0, omStrDup, omFree
 from sage.libs.singular.decl cimport p_GetComp, p_SetComp
```

3. Remove this: `#return p_Deg(p, r)`



---

archive/issue_events_193842.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:42:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193842"
}
```



---

archive/issue_events_193843.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:42:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193843"
}
```



---

archive/issue_events_193844.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:42:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193844"
}
```



---

archive/issue_events_193845.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T17:42:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193845"
}
```



---

archive/issue_comments_320463.json:
```json
{
    "body": "<a id='comment:27'></a>\nThe current patch works for me to solve the segfault problems. Pending the revisions asked by Jeroen, I am ok with this.",
    "created_at": "2016-10-27T09:55:46Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320463",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:27'></a>
The current patch works for me to solve the segfault problems. Pending the revisions asked by Jeroen, I am ok with this.



---

archive/issue_comments_320464.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95\">10b99df</a></td><td><code>Remove unused Singular degree related stuff.</code></td></tr></table>\n",
    "created_at": "2016-10-27T10:23:15Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320464",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95">10b99df</a></td><td><code>Remove unused Singular degree related stuff.</code></td></tr></table>




---

archive/issue_comments_320465.json:
```json
{
    "body": "**Changing commit** from \"[eef0dc45ee2cb571a9117d1cde5b63aa12747fee](https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee)\" to \"[10b99dfed109be4ea19b16a5634f9cdf298c6a95](https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95)\".",
    "created_at": "2016-10-27T10:23:15Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320465",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[eef0dc45ee2cb571a9117d1cde5b63aa12747fee](https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee)" to "[10b99dfed109be4ea19b16a5634f9cdf298c6a95](https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95)".



---

archive/issue_comments_320466.json:
```json
{
    "body": "<a id='comment:29'></a>\nPoints 2 and 3 addressed.\n\nI can go with point 1 but that means repackaging the tarball.\nWill the patchbots and Volker be happy?",
    "created_at": "2016-10-27T10:30:18Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320466",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:29'></a>
Points 2 and 3 addressed.

I can go with point 1 but that means repackaging the tarball.
Will the patchbots and Volker be happy?



---

archive/issue_comments_320467.json:
```json
{
    "body": "<a id='comment:30'></a>\nI've reported the issue here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/OdaD7HctT9Q",
    "created_at": "2016-10-27T10:35:25Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320467",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:30'></a>
I've reported the issue here:
* https://groups.google.com/forum/#!topic/libsingular-devel/OdaD7HctT9Q



---

archive/issue_comments_320468.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac\">ff7c145</a></td><td><code>Touch Singular autotools files in spkg-src.</code></td></tr></table>\n",
    "created_at": "2016-10-27T11:48:47Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320468",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac">ff7c145</a></td><td><code>Touch Singular autotools files in spkg-src.</code></td></tr></table>




---

archive/issue_comments_320469.json:
```json
{
    "body": "**Changing commit** from \"[10b99dfed109be4ea19b16a5634f9cdf298c6a95](https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95)\" to \"[ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)\".",
    "created_at": "2016-10-27T11:48:47Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320469",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[10b99dfed109be4ea19b16a5634f9cdf298c6a95](https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95)" to "[ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)".



---

archive/issue_comments_320470.json:
```json
{
    "body": "<a id='comment:32'></a>\nDealt with point 1.\nThe tarball changed.",
    "created_at": "2016-10-27T11:50:05Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320470",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:32'></a>
Dealt with point 1.
The tarball changed.



---

archive/issue_events_193846.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-10-27T11:50:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193846"
}
```



---

archive/issue_events_193847.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-10-27T11:50:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193847"
}
```



---

archive/issue_comments_320471.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [jpflori](#comment%3A29):\n> Points 2 and 3 addressed.\n> \n> I can go with point 1 but that means repackaging the tarball.\n> Will the patchbots and Volker be happy?\n\nDepends whether or not he already uploaded it on the mirrors or not. This hasn't got through his develop branch on github so probably not.\n\nPutting it to positive review.",
    "created_at": "2016-10-31T04:08:19Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320471",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:33'></a>
Replying to [jpflori](#comment%3A29):
> Points 2 and 3 addressed.
> 
> I can go with point 1 but that means repackaging the tarball.
> Will the patchbots and Volker be happy?

Depends whether or not he already uploaded it on the mirrors or not. This hasn't got through his develop branch on github so probably not.

Putting it to positive review.



---

archive/issue_events_193848.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-31T04:08:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193848"
}
```



---

archive/issue_events_193849.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-31T04:08:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193849"
}
```



---

archive/issue_events_193850.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-31T04:39:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193850"
}
```



---

archive/issue_events_193851.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-31T04:39:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193851"
}
```



---

archive/issue_comments_320472.json:
```json
{
    "body": "<a id='comment:34'></a>\nStop! I thought this release was supposed to have the fix for ntl 10+. But it isn't there, in the tarball or the patches directory. Do we want to proceed with that?",
    "created_at": "2016-10-31T04:39:39Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320472",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:34'></a>
Stop! I thought this release was supposed to have the fix for ntl 10+. But it isn't there, in the tarball or the patches directory. Do we want to proceed with that?



---

archive/issue_events_193852.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-10-31T09:43:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "needs info",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193852"
}
```



---

archive/issue_events_193853.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2016-10-31T09:43:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193853"
}
```



---

archive/issue_comments_320473.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2016-10-31T09:43:54Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320473",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Reviewer:** François Bissey



---

archive/issue_comments_320474.json:
```json
{
    "body": "<a id='comment:35'></a>\nI'd say we merge now and add a patch in the ntl10 ticket #21676.\nMore work will also be needed for a better debug mode #21624 but I need Hans' feedback on that one as there might be some bugs in singular itself.",
    "created_at": "2016-10-31T09:43:54Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320474",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:35'></a>
I'd say we merge now and add a patch in the ntl10 ticket #21676.
More work will also be needed for a better debug mode #21624 but I need Hans' feedback on that one as there might be some bugs in singular itself.



---

archive/issue_comments_320475.json:
```json
{
    "body": "<a id='comment:36'></a>\nThere are now a lot more warnings in debug mode but I'll leave that to you in #21624",
    "created_at": "2016-11-02T19:18:16Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320475",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:36'></a>
There are now a lot more warnings in debug mode but I'll leave that to you in #21624



---

archive/issue_events_193854.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-02T19:20:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193854"
}
```



---

archive/issue_events_193855.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3885e95ef1cd6e5aa6a271f0ea5101311f9c536f",
    "created_at": "2016-11-02T19:20:16Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21631#event-193855"
}
```



---

archive/issue_comments_320476.json:
```json
{
    "body": "**Changing branch** from \"[public/singular403p4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular403p4)\" to \"[ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)\".",
    "created_at": "2016-11-02T19:20:16Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320476",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/singular403p4](https://github.com/sagemath/sagetrac-mirror/tree/public/singular403p4)" to "[ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)".



---

archive/issue_comments_320477.json:
```json
{
    "body": "**Changing commit** from \"[ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)\" to \"\".",
    "created_at": "2016-11-12T01:10:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320477",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac](https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac)" to "".



---

archive/issue_comments_320478.json:
```json
{
    "body": "<a id='comment:38'></a>\nSee #21865 for a followup.",
    "created_at": "2016-11-12T01:10:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320478",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:38'></a>
See #21865 for a followup.



---

archive/issue_comments_320479.json:
```json
{
    "body": "<a id='comment:39'></a>\nDid somebody verify that all patches which are removed in this ticket are actually upstreamed in this Singular version? If not, we might have an easy fix for #21865.",
    "created_at": "2016-11-12T08:08:56Z",
    "issue": "https://github.com/sagemath/sage/issues/21631",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21631#issuecomment-320479",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
Did somebody verify that all patches which are removed in this ticket are actually upstreamed in this Singular version? If not, we might have an easy fix for #21865.
