# Issue 21879: Implement is_injective for ring homomorphisms

archive/issues_021642.json:
```json
{
    "body": "Currently, `is_injective` is almost never implemented:\n\n```\nsage: ZZ.hom(QQ).is_injective()\nNotImplementedError\nsage: QQ.hom(QQ).is_injective()\nNotImplementedError\n```\nThis makes the method `is_subring` mostly useless since its default implementation relies on `is_injective` of the \"natural map\":\n\n```\nsage: GF(3).is_subring(GF(9))\nNotImplementedError\n```\nThe changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n\nNote that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21880.\n\nCC:  @roed314 @xcaruso\n\nKeywords: Rings, injectivity, is_injective, MorphismMethods, is_subring\n\nBranch/Commit: 2f641e23f91a98b333ab106b69590d95a79e59e5\n\nReviewer: David Roe\n\nAuthor: Julian R\u00fcth\n\nDependencies: #21893, #19820, #21895\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21879\n\n",
    "closed_at": "2017-03-27T20:42:49Z",
    "created_at": "2016-11-15T06:18:10Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Implement is_injective for ring homomorphisms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21879",
    "user": "https://github.com/saraedum"
}
```
Currently, `is_injective` is almost never implemented:

```
sage: ZZ.hom(QQ).is_injective()
NotImplementedError
sage: QQ.hom(QQ).is_injective()
NotImplementedError
```
This makes the method `is_subring` mostly useless since its default implementation relies on `is_injective` of the "natural map":

```
sage: GF(3).is_subring(GF(9))
NotImplementedError
```
The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)

Note that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21880.

CC:  @roed314 @xcaruso

Keywords: Rings, injectivity, is_injective, MorphismMethods, is_subring

Branch/Commit: 2f641e23f91a98b333ab106b69590d95a79e59e5

Reviewer: David Roe

Author: Julian Rüth

Dependencies: #21893, #19820, #21895

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21879





---

archive/issue_comments_404633.json:
```json
{
    "body": "Changing author from \"\" to \"Julian R\u00fcth\"",
    "created_at": "2016-11-15T06:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404633",
    "user": "https://github.com/saraedum"
}
```

Changing author from "" to "Julian Rüth"



---

archive/issue_comments_404634.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,6 +14,8 @@\n ```\n The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n \n+Note that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21872.\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/21879\n``````\n",
    "created_at": "2016-11-15T06:22:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404634",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,6 +14,8 @@
 ```
 The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)
 
+Note that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21872.
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/21879
``````




---

archive/issue_comments_404635.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Currently, `is_injective` is almost never implemented:\n \n+```\n+sage: ZZ.hom(QQ).is_injective()\n+NotImplementedError\n+sage: QQ.hom(QQ).is_injective()\n+NotImplementedError\n+```\n+This makes the method `is_subring` essentially useless since it relies on `is_injective` of the \"natural map\":\n+\n+```\n+sage: GF(3).is_subring(GF(9))\n+NotImplementedError\n+```\n+The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n+\n+Note that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21880.\n \n Comment: 1\n \n``````\n",
    "created_at": "2016-11-15T06:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404635",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Currently, `is_injective` is almost never implemented:
 
+```
+sage: ZZ.hom(QQ).is_injective()
+NotImplementedError
+sage: QQ.hom(QQ).is_injective()
+NotImplementedError
+```
+This makes the method `is_subring` essentially useless since it relies on `is_injective` of the "natural map":
+
+```
+sage: GF(3).is_subring(GF(9))
+NotImplementedError
+```
+The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)
+
+Note that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21880.
 
 Comment: 1
 
``````




---

archive/issue_comments_404636.json:
```json
{
    "body": "Changing branch from \"\" to \"u/saraedum/implement_is_injective_for_ring_homomorphisms\"",
    "created_at": "2016-11-15T08:08:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404636",
    "user": "https://github.com/saraedum"
}
```

Changing branch from "" to "u/saraedum/implement_is_injective_for_ring_homomorphisms"



---

archive/issue_comments_404637.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-15T08:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404637",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_404638.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2016-11-15T08:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404638",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_404639.json:
```json
{
    "body": "Changing commit from \"\" to \"1a5fac4f83cb9e09a81acce74e0857245b315e87\"",
    "created_at": "2016-11-15T08:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404639",
    "user": "https://github.com/saraedum"
}
```

Changing commit from "" to "1a5fac4f83cb9e09a81acce74e0857245b315e87"



---

archive/issue_comments_404640.json:
```json
{
    "body": "Changing commit from \"1a5fac4f83cb9e09a81acce74e0857245b315e87\" to \"689028182d31068228562360264e86af492aadf9\"",
    "created_at": "2016-11-15T08:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404640",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "1a5fac4f83cb9e09a81acce74e0857245b315e87" to "689028182d31068228562360264e86af492aadf9"



---

archive/issue_comments_404641.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-11-15T08:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404641",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_404642.json:
```json
{
    "body": "<a id='comment:7'></a>Note that `is_injective` is now faster even for the one case where it just returned `True` before.\n\n```\nsage: K.<x> = FunctionField(QQ)\nsage: f = K.hom(x)\nsage: %timeit f.is_injective()\n```\nWent down from 182ns to 76ns (which is of course due to the ``@`cached_method`.) Without it, it goes up to 13\u00b5s.",
    "created_at": "2016-11-15T08:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404642",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>Note that `is_injective` is now faster even for the one case where it just returned `True` before.

```
sage: K.<x> = FunctionField(QQ)
sage: f = K.hom(x)
sage: %timeit f.is_injective()
```
Went down from 182ns to 76ns (which is of course due to the ``@`cached_method`.) Without it, it goes up to 13µs.



---

archive/issue_comments_404643.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Currently, `is_injective` is almost never implemented:\n \n+```\n+sage: ZZ.hom(QQ).is_injective()\n+NotImplementedError\n+sage: QQ.hom(QQ).is_injective()\n+NotImplementedError\n+```\n+This makes the method `is_subring` mostly useless since its default implementation relies on `is_injective` of the \"natural map\":\n+\n+```\n+sage: GF(3).is_subring(GF(9))\n+NotImplementedError\n+```\n+The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n+\n+Note that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21880.\n \n Comment: 1\n \n``````\n",
    "created_at": "2016-11-15T08:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404643",
    "user": "https://github.com/saraedum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Currently, `is_injective` is almost never implemented:
 
+```
+sage: ZZ.hom(QQ).is_injective()
+NotImplementedError
+sage: QQ.hom(QQ).is_injective()
+NotImplementedError
+```
+This makes the method `is_subring` mostly useless since its default implementation relies on `is_injective` of the "natural map":
+
+```
+sage: GF(3).is_subring(GF(9))
+NotImplementedError
+```
+The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)
+
+Note that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21880.
 
 Comment: 1
 
``````




---

archive/issue_comments_404644.json:
```json
{
    "body": "Changing commit from \"689028182d31068228562360264e86af492aadf9\" to \"363ece8ce62dc8cb7a510607d0f34778adc4b74f\"",
    "created_at": "2016-11-15T08:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404644",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "689028182d31068228562360264e86af492aadf9" to "363ece8ce62dc8cb7a510607d0f34778adc4b74f"



---

archive/issue_comments_404645.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-15T08:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404645",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_404646.json:
```json
{
    "body": "Changing commit from \"363ece8ce62dc8cb7a510607d0f34778adc4b74f\" to \"2f641e23f91a98b333ab106b69590d95a79e59e5\"",
    "created_at": "2016-11-18T00:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404646",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "363ece8ce62dc8cb7a510607d0f34778adc4b74f" to "2f641e23f91a98b333ab106b69590d95a79e59e5"



---

archive/issue_comments_404647.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-18T00:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404647",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_404648.json:
```json
{
    "body": "<a id='comment:12'></a>New commits:",
    "created_at": "2016-11-18T03:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404648",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:12'></a>New commits:



---

archive/issue_comments_404649.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#21893\"",
    "created_at": "2016-11-18T03:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404649",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "" to "#21893"



---

archive/issue_comments_404650.json:
```json
{
    "body": "<a id='comment:13'></a>Assuming that the patchbot is happy, I am.",
    "created_at": "2016-11-18T04:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404650",
    "user": "https://github.com/roed314"
}
```

<a id='comment:13'></a>Assuming that the patchbot is happy, I am.



---

archive/issue_comments_404651.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-18T04:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404651",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_404652.json:
```json
{
    "body": "Changing reviewer from \"\" to \"David Roe\"",
    "created_at": "2016-11-18T04:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404652",
    "user": "https://github.com/roed314"
}
```

Changing reviewer from "" to "David Roe"



---

archive/issue_comments_404653.json:
```json
{
    "body": "Changing dependencies from \"#21893\" to \"#21893, #21894, #21895\"",
    "created_at": "2016-11-18T04:35:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404653",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#21893" to "#21893, #21894, #21895"



---

archive/issue_comments_404654.json:
```json
{
    "body": "<a id='comment:15'></a>Actually, only one of #21894 and #21895 is a dependency. Either one makes the patchbot happy.",
    "created_at": "2016-11-18T04:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404654",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:15'></a>Actually, only one of #21894 and #21895 is a dependency. Either one makes the patchbot happy.



---

archive/issue_comments_404655.json:
```json
{
    "body": "<a id='comment:16'></a>You should just figure out what you actually want to depend on. This ticket will not be merged until all dependencies are merged.",
    "created_at": "2016-11-19T22:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404655",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>You should just figure out what you actually want to depend on. This ticket will not be merged until all dependencies are merged.



---

archive/issue_comments_404656.json:
```json
{
    "body": "<a id='comment:17'></a>vbraun: I know. I will remove one of the dependencies as soon as the other one is merged.",
    "created_at": "2016-11-19T23:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404656",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:17'></a>vbraun: I know. I will remove one of the dependencies as soon as the other one is merged.



---

archive/issue_comments_404657.json:
```json
{
    "body": "<a id='comment:18'></a>So, should the #21894 dependency be removed?",
    "created_at": "2016-11-30T00:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404657",
    "user": "https://github.com/roed314"
}
```

<a id='comment:18'></a>So, should the #21894 dependency be removed?



---

archive/issue_comments_404658.json:
```json
{
    "body": "<a id='comment:19'></a>Yes, I can replace it with a easier one.",
    "created_at": "2016-11-30T01:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404658",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'></a>Yes, I can replace it with a easier one.



---

archive/issue_comments_404659.json:
```json
{
    "body": "Changing dependencies from \"#21893, #21894, #21895\" to \"#21893, #19820, #21895\"",
    "created_at": "2016-11-30T02:23:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404659",
    "user": "https://github.com/saraedum"
}
```

Changing dependencies from "#21893, #21894, #21895" to "#21893, #19820, #21895"



---

archive/issue_comments_404660.json:
```json
{
    "body": "<a id='comment:20'></a>We do not need the full #21894. #19820 is enough to pass the doctests. Alternatively, the revert of https://git.sagemath.org/sage.git/commit?id=86b4868e9deb41940e3bed2a3289276bd7557a52 would also be enough but I think that #19820 is a more fundamental fix to the underlying problem (broken `__eq__` implementations.)",
    "created_at": "2016-11-30T02:23:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404660",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:20'></a>We do not need the full #21894. #19820 is enough to pass the doctests. Alternatively, the revert of https://git.sagemath.org/sage.git/commit?id=86b4868e9deb41940e3bed2a3289276bd7557a52 would also be enough but I think that #19820 is a more fundamental fix to the underlying problem (broken `__eq__` implementations.)



---

archive/issue_events_057760.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:42:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21879#event-57760"
}
```



---

archive/issue_comments_404661.json:
```json
{
    "body": "Changing branch from \"u/saraedum/implement_is_injective_for_ring_homomorphisms\" to \"2f641e23f91a98b333ab106b69590d95a79e59e5\"",
    "created_at": "2017-03-27T20:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404661",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/saraedum/implement_is_injective_for_ring_homomorphisms" to "2f641e23f91a98b333ab106b69590d95a79e59e5"



---

archive/issue_comments_404662.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-27T20:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-404662",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
