# Issue 21879: Implement is_injective for ring homomorphisms

archive/issues_021642.json:
```json
{
    "body": "Currently, `is_injective` is almost never implemented:\n\n```\nsage: ZZ.hom(QQ).is_injective()\nNotImplementedError\nsage: QQ.hom(QQ).is_injective()\nNotImplementedError\n```\nThis makes the method `is_subring` mostly useless since its default implementation relies on `is_injective` of the \"natural map\":\n\n```\nsage: GF(3).is_subring(GF(9))\nNotImplementedError\n```\nThe changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n\nNote that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21880.\n\nCC:  @roed314 @xcaruso\n\nKeywords: Rings, injectivity, is_injective, MorphismMethods, is_subring\n\nBranch/Commit: 2f641e23f91a98b333ab106b69590d95a79e59e5\n\nReviewer: David Roe\n\nAuthor: Julian R\u00fcth\n\nDependencies: #21893, #19820, #21895\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21879\n\n",
    "closed_at": "2017-03-27T20:42:49Z",
    "created_at": "2016-11-15T06:18:10Z",
    "labels": [
        "component: categories"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Implement is_injective for ring homomorphisms",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21879",
    "user": "https://github.com/saraedum"
}
```
Currently, `is_injective` is almost never implemented:

```
sage: ZZ.hom(QQ).is_injective()
NotImplementedError
sage: QQ.hom(QQ).is_injective()
NotImplementedError
```
This makes the method `is_subring` mostly useless since its default implementation relies on `is_injective` of the "natural map":

```
sage: GF(3).is_subring(GF(9))
NotImplementedError
```
The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)

Note that `is_injective` is not shown in the tab completion anymore. A problem that is fixed in #21880.

CC:  @roed314 @xcaruso

Keywords: Rings, injectivity, is_injective, MorphismMethods, is_subring

Branch/Commit: 2f641e23f91a98b333ab106b69590d95a79e59e5

Reviewer: David Roe

Author: Julian Rüth

Dependencies: #21893, #19820, #21895

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21879





---

archive/issue_comments_319995.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -14,6 +14,8 @@\n \\`\\`\\`\n The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n \n+Note that \\`is_injective\\` is not shown in the tab completion anymore. A problem that is fixed in #21872.\n+\n Comment: 1\n \n Issue created by migration from https://trac.sagemath.org/ticket/21879\n```\n",
    "created_at": "2016-11-15T06:22:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-319995",
    "user": "https://github.com/saraedum"
}
```

Description changed:
```diff
--- 
+++ 
@@ -14,6 +14,8 @@
 \`\`\`
 The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)
 
+Note that \`is_injective\` is not shown in the tab completion anymore. A problem that is fixed in #21872.
+
 Comment: 1
 
 Issue created by migration from https://trac.sagemath.org/ticket/21879
```




---

archive/issue_comments_319996.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Currently, \\`is_injective\\` is almost never implemented:\n \n+\\`\\`\\`\n+sage: ZZ.hom(QQ).is_injective()\n+NotImplementedError\n+sage: QQ.hom(QQ).is_injective()\n+NotImplementedError\n+\\`\\`\\`\n+This makes the method \\`is_subring\\` essentially useless since it relies on \\`is_injective\\` of the \"natural map\":\n+\n+\\`\\`\\`\n+sage: GF(3).is_subring(GF(9))\n+NotImplementedError\n+\\`\\`\\`\n+The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n+\n+Note that \\`is_injective\\` is not shown in the tab completion anymore. A problem that is fixed in #21880.\n \n Comment: 1\n \n```\n",
    "created_at": "2016-11-15T06:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-319996",
    "user": "https://github.com/saraedum"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Currently, \`is_injective\` is almost never implemented:
 
+\`\`\`
+sage: ZZ.hom(QQ).is_injective()
+NotImplementedError
+sage: QQ.hom(QQ).is_injective()
+NotImplementedError
+\`\`\`
+This makes the method \`is_subring\` essentially useless since it relies on \`is_injective\` of the "natural map":
+
+\`\`\`
+sage: GF(3).is_subring(GF(9))
+NotImplementedError
+\`\`\`
+The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)
+
+Note that \`is_injective\` is not shown in the tab completion anymore. A problem that is fixed in #21880.
 
 Comment: 1
 
```




---

archive/issue_comments_319997.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-15T08:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-319997",
    "user": "https://github.com/saraedum"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_319998.json:
```json
{
    "body": "<a id='comment:5'></a>New commits:",
    "created_at": "2016-11-15T08:08:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-319998",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:5'></a>New commits:



---

archive/issue_comments_319999.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-11-15T08:15:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-319999",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_320000.json:
```json
{
    "body": "<a id='comment:7'></a>Note that `is_injective` is now faster even for the one case where it just returned `True` before.\n\n```\nsage: K.<x> = FunctionField(QQ)\nsage: f = K.hom(x)\nsage: %timeit f.is_injective()\n```\nWent down from 182ns to 76ns (which is of course due to the ``@`cached_method`.) Without it, it goes up to 13\u00b5s.",
    "created_at": "2016-11-15T08:22:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320000",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>Note that `is_injective` is now faster even for the one case where it just returned `True` before.

```
sage: K.<x> = FunctionField(QQ)
sage: f = K.hom(x)
sage: %timeit f.is_injective()
```
Went down from 182ns to 76ns (which is of course due to the ``@`cached_method`.) Without it, it goes up to 13µs.



---

archive/issue_comments_320001.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,20 @@\n+Currently, \\`is_injective\\` is almost never implemented:\n \n+\\`\\`\\`\n+sage: ZZ.hom(QQ).is_injective()\n+NotImplementedError\n+sage: QQ.hom(QQ).is_injective()\n+NotImplementedError\n+\\`\\`\\`\n+This makes the method \\`is_subring\\` mostly useless since its default implementation relies on \\`is_injective\\` of the \"natural map\":\n+\n+\\`\\`\\`\n+sage: GF(3).is_subring(GF(9))\n+NotImplementedError\n+\\`\\`\\`\n+The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, \u2026.)\n+\n+Note that \\`is_injective\\` is not shown in the tab completion anymore. A problem that is fixed in #21880.\n \n Comment: 1\n \n```\n",
    "created_at": "2016-11-15T08:25:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320001",
    "user": "https://github.com/saraedum"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,20 @@
+Currently, \`is_injective\` is almost never implemented:
 
+\`\`\`
+sage: ZZ.hom(QQ).is_injective()
+NotImplementedError
+sage: QQ.hom(QQ).is_injective()
+NotImplementedError
+\`\`\`
+This makes the method \`is_subring\` mostly useless since its default implementation relies on \`is_injective\` of the "natural map":
+
+\`\`\`
+sage: GF(3).is_subring(GF(9))
+NotImplementedError
+\`\`\`
+The changes introduced here, implement it as a method of the morphisms in the category of Rings where we can handle many common cases of morphisms (domain is a field, ….)
+
+Note that \`is_injective\` is not shown in the tab completion anymore. A problem that is fixed in #21880.
 
 Comment: 1
 
```




---

archive/issue_comments_320002.json:
```json
{
    "body": "<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-15T08:38:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320002",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_320003.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-18T00:40:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320003",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_320004.json:
```json
{
    "body": "<a id='comment:12'></a>New commits:",
    "created_at": "2016-11-18T03:32:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320004",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:12'></a>New commits:



---

archive/issue_comments_320005.json:
```json
{
    "body": "<a id='comment:13'></a>Assuming that the patchbot is happy, I am.",
    "created_at": "2016-11-18T04:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320005",
    "user": "https://github.com/roed314"
}
```

<a id='comment:13'></a>Assuming that the patchbot is happy, I am.



---

archive/issue_comments_320006.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-18T04:13:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320006",
    "user": "https://github.com/roed314"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_320007.json:
```json
{
    "body": "<a id='comment:15'></a>Actually, only one of #21894 and #21895 is a dependency. Either one makes the patchbot happy.",
    "created_at": "2016-11-18T04:35:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320007",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:15'></a>Actually, only one of #21894 and #21895 is a dependency. Either one makes the patchbot happy.



---

archive/issue_comments_320008.json:
```json
{
    "body": "<a id='comment:16'></a>You should just figure out what you actually want to depend on. This ticket will not be merged until all dependencies are merged.",
    "created_at": "2016-11-19T22:31:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320008",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>You should just figure out what you actually want to depend on. This ticket will not be merged until all dependencies are merged.



---

archive/issue_comments_320009.json:
```json
{
    "body": "<a id='comment:17'></a>vbraun: I know. I will remove one of the dependencies as soon as the other one is merged.",
    "created_at": "2016-11-19T23:24:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320009",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:17'></a>vbraun: I know. I will remove one of the dependencies as soon as the other one is merged.



---

archive/issue_comments_320010.json:
```json
{
    "body": "<a id='comment:18'></a>So, should the #21894 dependency be removed?",
    "created_at": "2016-11-30T00:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320010",
    "user": "https://github.com/roed314"
}
```

<a id='comment:18'></a>So, should the #21894 dependency be removed?



---

archive/issue_comments_320011.json:
```json
{
    "body": "<a id='comment:19'></a>Yes, I can replace it with a easier one.",
    "created_at": "2016-11-30T01:44:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320011",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'></a>Yes, I can replace it with a easier one.



---

archive/issue_comments_320012.json:
```json
{
    "body": "<a id='comment:20'></a>We do not need the full #21894. #19820 is enough to pass the doctests. Alternatively, the revert of https://git.sagemath.org/sage.git/commit?id=86b4868e9deb41940e3bed2a3289276bd7557a52 would also be enough but I think that #19820 is a more fundamental fix to the underlying problem (broken `__eq__` implementations.)",
    "created_at": "2016-11-30T02:23:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320012",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:20'></a>We do not need the full #21894. #19820 is enough to pass the doctests. Alternatively, the revert of https://git.sagemath.org/sage.git/commit?id=86b4868e9deb41940e3bed2a3289276bd7557a52 would also be enough but I think that #19820 is a more fundamental fix to the underlying problem (broken `__eq__` implementations.)



---

archive/issue_events_057760.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:42:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21879#event-57760"
}
```



---

archive/issue_comments_320013.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-27T20:42:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21879",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21879#issuecomment-320013",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
