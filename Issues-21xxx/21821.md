# Issue 21821: Avoid Sage-specific variables in autogen/pari

archive/issues_021584.json:
```json
{
    "assignees": [],
    "body": "In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.\n\nCC:  @defeo\n\nComponent: **interfaces**\n\nAuthor: **Jeroen Demeyer**\n\nBranch: **[`bc8a323`](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**\n\nReviewer: **Erik Bray**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21821_\n\n",
    "closed_at": "2016-11-09T18:16:10Z",
    "created_at": "2016-11-04T15:01:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Avoid Sage-specific variables in autogen/pari",
    "type": "issue",
    "updated_at": "2016-11-13T22:49:29Z",
    "url": "https://github.com/sagemath/sage/issues/21821",
    "user": "https://github.com/jdemeyer"
}
```
In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.

CC:  @defeo

Component: **interfaces**

Author: **Jeroen Demeyer**

Branch: **[`bc8a323`](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**

Reviewer: **Erik Bray**

_Issue created by migration from https://trac.sagemath.org/ticket/21821_





---

archive/issue_events_303340.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303340"
}
```



---

archive/issue_events_303341.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303341"
}
```



---

archive/issue_events_303342.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303342"
}
```



---

archive/issue_events_303343.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303343"
}
```



---

archive/issue_events_303344.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "title_is": "Do not hardcode path of pari.desc",
    "title_was": "Do not hardcode location to pari.desc",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303344"
}
```



---

archive/issue_comments_321039.json:
```json
{
    "body": "Changed dependencies from **#21820** to none",
    "created_at": "2016-11-04T15:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321039",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21820** to none



---

archive/issue_comments_321040.json:
```json
{
    "body": "Branch: **[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)**",
    "created_at": "2016-11-04T18:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321040",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)**



---

archive/issue_events_303345.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T18:26:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303345"
}
```



---

archive/issue_comments_321041.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4\"><code>0553d6b</code></a></td><td><code>Do not hardcode path of pari.desc</code></td></tr></table>\n",
    "created_at": "2016-11-04T18:26:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321041",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4"><code>0553d6b</code></a></td><td><code>Do not hardcode path of pari.desc</code></td></tr></table>




---

archive/issue_comments_321042.json:
```json
{
    "body": "Commit: **[`0553d6b`](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)**",
    "created_at": "2016-11-04T18:26:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321042",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[`0553d6b`](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)**



---

archive/issue_comments_321043.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2016-11-04T18:26:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321043",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_321044.json:
```json
{
    "body": "<div id=\"comment:6\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5\"><code>ed1bfdd</code></a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T16:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321044",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:6"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5"><code>ed1bfdd</code></a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_321045.json:
```json
{
    "body": "Changed commit from **[`0553d6b`](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)** to **[`ed1bfdd`](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)**",
    "created_at": "2016-11-07T16:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321045",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0553d6b`](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)** to **[`ed1bfdd`](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)**



---

archive/issue_events_303346.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T16:40:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "title_is": "Do not hardcode path of pari.desc and don't use SAGE_SRC",
    "title_was": "Do not hardcode path of pari.desc",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303346"
}
```



---

archive/issue_events_303347.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:19:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303347"
}
```



---

archive/issue_events_303348.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:19:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303348"
}
```



---

archive/issue_comments_321046.json:
```json
{
    "body": "Changed commit from **[`ed1bfdd`](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)** to **[`c894625`](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)**",
    "created_at": "2016-11-07T18:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321046",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ed1bfdd`](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)** to **[`c894625`](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)**



---

archive/issue_comments_321047.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539\"><code>c894625</code></a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T18:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321047",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539"><code>c894625</code></a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_321048.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.\n``````\n",
    "created_at": "2016-11-07T18:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321048",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.
``````




---

archive/issue_events_303349.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:27:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "title_is": "Avoid Sage-specific variables in autogen/pari",
    "title_was": "Do not hardcode path of pari.desc and don't use SAGE_SRC",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303349"
}
```



---

archive/issue_comments_321049.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77\"><code>bc8a323</code></a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T18:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321049",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77"><code>bc8a323</code></a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_321050.json:
```json
{
    "body": "Changed commit from **[`c894625`](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)** to **[`bc8a323`](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**",
    "created_at": "2016-11-07T18:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321050",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c894625`](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)** to **[`bc8a323`](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**



---

archive/issue_events_303350.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:29:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303350"
}
```



---

archive/issue_events_303351.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:29:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303351"
}
```



---

archive/issue_comments_321051.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI think the `pari_share()` makes sense--I like that it uses whatever the appropriate `gp` is to get the right path.  Though I think this would make sense to have somewhere in sage itself, and be stored as a variable in `sage.env`, not just as a one-off in this code.\n\nI don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.  Of course, that's the typical case. But the code is not otherwise designed in such a way that that *must* be the case, nor do I think it necessarily should be.  I like the way it was done better.",
    "created_at": "2016-11-08T11:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321051",
    "user": "https://github.com/embray"
}
```

<div id="comment:13" align="right">comment:13</div>

I think the `pari_share()` makes sense--I like that it uses whatever the appropriate `gp` is to get the right path.  Though I think this would make sense to have somewhere in sage itself, and be stored as a variable in `sage.env`, not just as a one-off in this code.

I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.  Of course, that's the typical case. But the code is not otherwise designed in such a way that that *must* be the case, nor do I think it necessarily should be.  I like the way it was done better.



---

archive/issue_comments_321052.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nSo, what is your solution for `sage_src_pari()` which would be compatible with #21613?",
    "created_at": "2016-11-08T13:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321052",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:14" align="right">comment:14</div>

So, what is your solution for `sage_src_pari()` which would be compatible with #21613?



---

archive/issue_comments_321053.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@embray](#comment%3A13):\n> I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.\n\nLet me clarify: that code is only meant to be run during the *build* of Sage. And I do think it is a reasonable assumption that the current working directory at build time is the  source directory (*). Most `setup.py` files make that assumption, so if you see this `sage_setup` stuff as an extension of `setup.py`, it makes perfect sense.\n\n(*) To be very precise, let's define the source directory as the directory containing `setup.py`, which is `$SAGE_SRC = $SAGE_ROOT/src` in Sage.",
    "created_at": "2016-11-08T13:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321053",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@embray](#comment%3A13):
> I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.

Let me clarify: that code is only meant to be run during the *build* of Sage. And I do think it is a reasonable assumption that the current working directory at build time is the  source directory (*). Most `setup.py` files make that assumption, so if you see this `sage_setup` stuff as an extension of `setup.py`, it makes perfect sense.

(*) To be very precise, let's define the source directory as the directory containing `setup.py`, which is `$SAGE_SRC = $SAGE_ROOT/src` in Sage.



---

archive/issue_comments_321054.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nHmm, I agree with you, but what bothers me then is that `sage_setup` is *installed* at all, if it's only meant as a supplement to `setup.py` (and that being the case, we could also vastly simplify the `setup.py` by moving things like distutils commands into `sage_setup` as well, which wouldn't be a bad idea anyways).\n\nTo follow up, I feel like if `sage_setup` can be installed, then it should also in principle work outside a build context.  I think it would be better if it simply weren't installed at all, but I think there are reasons it is--especially for `sage_setup.docbuild` (but then maybe that should be moved either into the `sage` package itself, or into its own package).",
    "created_at": "2016-11-08T14:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321054",
    "user": "https://github.com/embray"
}
```

<div id="comment:16" align="right">comment:16</div>

Hmm, I agree with you, but what bothers me then is that `sage_setup` is *installed* at all, if it's only meant as a supplement to `setup.py` (and that being the case, we could also vastly simplify the `setup.py` by moving things like distutils commands into `sage_setup` as well, which wouldn't be a bad idea anyways).

To follow up, I feel like if `sage_setup` can be installed, then it should also in principle work outside a build context.  I think it would be better if it simply weren't installed at all, but I think there are reasons it is--especially for `sage_setup.docbuild` (but then maybe that should be moved either into the `sage` package itself, or into its own package).



---

archive/issue_comments_321055.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nPut another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here unless everything in `sage_setup` is consistently designed to only be used at build time.",
    "created_at": "2016-11-08T14:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321055",
    "user": "https://github.com/embray"
}
```

<div id="comment:17" align="right">comment:17</div>

Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here unless everything in `sage_setup` is consistently designed to only be used at build time.



---

archive/issue_comments_321056.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nMaybe `sage_setup` is installed just for testing, such that it can be imported in doctests?",
    "created_at": "2016-11-08T14:37:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321056",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

Maybe `sage_setup` is installed just for testing, such that it can be imported in doctests?



---

archive/issue_comments_321057.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\n`sage_setup` was created in #16431. Already there, it was installed.",
    "created_at": "2016-11-08T14:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321057",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:19" align="right">comment:19</div>

`sage_setup` was created in #16431. Already there, it was installed.



---

archive/issue_comments_321058.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@embray](#comment%3A17):\n> Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here\n\nI see it as part of push towards less Sage-specific things in the Sage build system, see also #15105 and #21507 in general.",
    "created_at": "2016-11-08T14:43:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321058",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@embray](#comment%3A17):
> Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here

I see it as part of push towards less Sage-specific things in the Sage build system, see also #15105 and #21507 in general.



---

archive/issue_comments_321059.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nOk, I think I agree in general.  I *don't* think `sage_setup` should be installed at all, at least not by default.  I'll open a new issue for that.",
    "created_at": "2016-11-08T14:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321059",
    "user": "https://github.com/embray"
}
```

<div id="comment:21" align="right">comment:21</div>

Ok, I think I agree in general.  I *don't* think `sage_setup` should be installed at all, at least not by default.  I'll open a new issue for that.



---

archive/issue_comments_321060.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2016-11-08T14:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321060",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_events_303352.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-08T14:59:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303352"
}
```



---

archive/issue_events_303353.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-08T14:59:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303353"
}
```



---

archive/issue_comments_321061.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)** to **[`bc8a323`](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**",
    "created_at": "2016-11-09T18:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321061",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)** to **[`bc8a323`](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**



---

archive/issue_events_303354.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-09T18:16:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303354"
}
```



---

archive/issue_events_303355.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8a1dd7967e0f7cfb08e405016c1dfd8a93cffdd3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-09T18:16:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-303355"
}
```



---

archive/issue_comments_321062.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe following line that was added here is apparently not compatible with python 3:\n\n```\nout = gp.communicate(\"print(default(datadir))\")[0]\n```\nSee https://groups.google.com/forum/#!topic/sage-devel/eSYPSfZOb9k",
    "created_at": "2016-11-13T18:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321062",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:23" align="right">comment:23</div>

The following line that was added here is apparently not compatible with python 3:

```
out = gp.communicate("print(default(datadir))")[0]
```
See https://groups.google.com/forum/#!topic/sage-devel/eSYPSfZOb9k



---

archive/issue_comments_321063.json:
```json
{
    "body": "Changed commit from **[`bc8a323`](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)** to none",
    "created_at": "2016-11-13T18:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321063",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[`bc8a323`](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)** to none



---

archive/issue_comments_321064.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nReplying to [@fchapoton](#comment%3A23):\n\nyes, it should be bytes, not string, i.e. try this:\n\n```\nout = gp.communicate(b'print(default(datadir))')[0]\n```\n\n(don't know how to make this version-agnostic...)",
    "created_at": "2016-11-13T20:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321064",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:24" align="right">comment:24</div>

Replying to [@fchapoton](#comment%3A23):

yes, it should be bytes, not string, i.e. try this:

```
out = gp.communicate(b'print(default(datadir))')[0]
```

(don't know how to make this version-agnostic...)



---

archive/issue_comments_321065.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nThe `b\"\"` syntax is supported in Python 2.7.",
    "created_at": "2016-11-13T21:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321065",
    "user": "https://github.com/defeo"
}
```

<div id="comment:25" align="right">comment:25</div>

The `b""` syntax is supported in Python 2.7.



---

archive/issue_comments_321066.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@defeo](#comment%3A25):\n> The `b\"\"` syntax is supported in Python 2.7.\n\nAh, OK, it has no effect in Python2. Yes, this would be the good fix then.",
    "created_at": "2016-11-13T21:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321066",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@defeo](#comment%3A25):
> The `b""` syntax is supported in Python 2.7.

Ah, OK, it has no effect in Python2. Yes, this would be the good fix then.



---

archive/issue_comments_321067.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nI created #21874.",
    "created_at": "2016-11-13T22:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-321067",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

I created #21874.
