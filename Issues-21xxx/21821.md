# Issue 21821: Avoid Sage-specific variables in autogen/pari

archive/issues_021584.json:
```json
{
    "body": "In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.\n\n**CC:**  @defeo\n\n**Branch:** [bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)\n\n**Reviewer:** Erik Bray\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/21821\n\n",
    "closed_at": "2016-11-09T18:16:10Z",
    "created_at": "2016-11-04T15:01:08Z",
    "labels": [
        "component: interfaces",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "title": "Avoid Sage-specific variables in autogen/pari",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/21821",
    "user": "https://github.com/jdemeyer"
}
```
In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.

**CC:**  @defeo

**Branch:** [bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)

**Reviewer:** Erik Bray

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/21821





---

archive/issue_events_195347.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "rename": {
        "from": "Do not hardcode location to pari.desc",
        "to": "Do not hardcode path of pari.desc"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195347"
}
```



---

archive/issue_comments_323604.json:
```json
{
    "body": "**Changing dependencies** from \"#21820\" to \"\".",
    "created_at": "2016-11-04T15:13:05Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323604",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#21820" to "".



---

archive/issue_comments_323605.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)",
    "created_at": "2016-11-04T18:23:13Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323605",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)



---

archive/issue_events_195348.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T18:26:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195348"
}
```



---

archive/issue_comments_323606.json:
```json
{
    "body": "<a id='comment:4'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4\">0553d6b</a></td><td><code>Do not hardcode path of pari.desc</code></td></tr></table>\n",
    "created_at": "2016-11-04T18:26:20Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323606",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4">0553d6b</a></td><td><code>Do not hardcode path of pari.desc</code></td></tr></table>




---

archive/issue_comments_323607.json:
```json
{
    "body": "**Commit:** [0553d6b4892e82a731a50a46c445487042541bc4](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)",
    "created_at": "2016-11-04T18:26:20Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323607",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [0553d6b4892e82a731a50a46c445487042541bc4](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)



---

archive/issue_comments_323608.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2016-11-04T18:26:54Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323608",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_323609.json:
```json
{
    "body": "<a id='comment:6'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5\">ed1bfdd</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T16:37:52Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323609",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5">ed1bfdd</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_323610.json:
```json
{
    "body": "**Changing commit** from \"[0553d6b4892e82a731a50a46c445487042541bc4](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)\" to \"[ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)\".",
    "created_at": "2016-11-07T16:37:52Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323610",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[0553d6b4892e82a731a50a46c445487042541bc4](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)" to "[ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)".



---

archive/issue_events_195349.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T16:40:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "rename": {
        "from": "Do not hardcode path of pari.desc",
        "to": "Do not hardcode path of pari.desc and don't use SAGE_SRC"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195349"
}
```



---

archive/issue_events_195350.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:19:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195350"
}
```



---

archive/issue_events_195351.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:19:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195351"
}
```



---

archive/issue_comments_323611.json:
```json
{
    "body": "**Changing commit** from \"[ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)\" to \"[c8946252439f15f6f67927074639eb2b1e98b539](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)\".",
    "created_at": "2016-11-07T18:25:53Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323611",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)" to "[c8946252439f15f6f67927074639eb2b1e98b539](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)".



---

archive/issue_comments_323612.json:
```json
{
    "body": "<a id='comment:9'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539\">c894625</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T18:25:53Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323612",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539">c894625</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_323613.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.\n``````\n",
    "created_at": "2016-11-07T18:27:56Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323613",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.
``````




---

archive/issue_events_195352.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:27:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "rename": {
        "from": "Do not hardcode path of pari.desc and don't use SAGE_SRC",
        "to": "Avoid Sage-specific variables in autogen/pari"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195352"
}
```



---

archive/issue_comments_323614.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77\">bc8a323</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T18:29:14Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323614",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77">bc8a323</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_323615.json:
```json
{
    "body": "**Changing commit** from \"[c8946252439f15f6f67927074639eb2b1e98b539](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)\" to \"[bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)\".",
    "created_at": "2016-11-07T18:29:14Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323615",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[c8946252439f15f6f67927074639eb2b1e98b539](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)" to "[bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)".



---

archive/issue_events_195353.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:29:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195353"
}
```



---

archive/issue_events_195354.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:29:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195354"
}
```



---

archive/issue_comments_323616.json:
```json
{
    "body": "<a id='comment:13'></a>\nI think the `pari_share()` makes sense--I like that it uses whatever the appropriate `gp` is to get the right path.  Though I think this would make sense to have somewhere in sage itself, and be stored as a variable in `sage.env`, not just as a one-off in this code.\n\nI don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.  Of course, that's the typical case. But the code is not otherwise designed in such a way that that *must* be the case, nor do I think it necessarily should be.  I like the way it was done better.",
    "created_at": "2016-11-08T11:14:36Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323616",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>
I think the `pari_share()` makes sense--I like that it uses whatever the appropriate `gp` is to get the right path.  Though I think this would make sense to have somewhere in sage itself, and be stored as a variable in `sage.env`, not just as a one-off in this code.

I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.  Of course, that's the typical case. But the code is not otherwise designed in such a way that that *must* be the case, nor do I think it necessarily should be.  I like the way it was done better.



---

archive/issue_comments_323617.json:
```json
{
    "body": "<a id='comment:14'></a>\nSo, what is your solution for `sage_src_pari()` which would be compatible with #21613?",
    "created_at": "2016-11-08T13:02:18Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323617",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>
So, what is your solution for `sage_src_pari()` which would be compatible with #21613?



---

archive/issue_comments_323618.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [embray](#comment%3A13):\n> I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.\n\nLet me clarify: that code is only meant to be run during the *build* of Sage. And I do think it is a reasonable assumption that the current working directory at build time is the  source directory (*). Most `setup.py` files make that assumption, so if you see this `sage_setup` stuff as an extension of `setup.py`, it makes perfect sense.\n\n(*) To be very precise, let's define the source directory as the directory containing `setup.py`, which is `$SAGE_SRC = $SAGE_ROOT/src` in Sage.",
    "created_at": "2016-11-08T13:07:41Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323618",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Replying to [embray](#comment%3A13):
> I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.

Let me clarify: that code is only meant to be run during the *build* of Sage. And I do think it is a reasonable assumption that the current working directory at build time is the  source directory (*). Most `setup.py` files make that assumption, so if you see this `sage_setup` stuff as an extension of `setup.py`, it makes perfect sense.

(*) To be very precise, let's define the source directory as the directory containing `setup.py`, which is `$SAGE_SRC = $SAGE_ROOT/src` in Sage.



---

archive/issue_comments_323619.json:
```json
{
    "body": "<a id='comment:16'></a>\nHmm, I agree with you, but what bothers me then is that `sage_setup` is *installed* at all, if it's only meant as a supplement to `setup.py` (and that being the case, we could also vastly simplify the `setup.py` by moving things like distutils commands into `sage_setup` as well, which wouldn't be a bad idea anyways).\n\nTo follow up, I feel like if `sage_setup` can be installed, then it should also in principle work outside a build context.  I think it would be better if it simply weren't installed at all, but I think there are reasons it is--especially for `sage_setup.docbuild` (but then maybe that should be moved either into the `sage` package itself, or into its own package).",
    "created_at": "2016-11-08T14:31:18Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323619",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'></a>
Hmm, I agree with you, but what bothers me then is that `sage_setup` is *installed* at all, if it's only meant as a supplement to `setup.py` (and that being the case, we could also vastly simplify the `setup.py` by moving things like distutils commands into `sage_setup` as well, which wouldn't be a bad idea anyways).

To follow up, I feel like if `sage_setup` can be installed, then it should also in principle work outside a build context.  I think it would be better if it simply weren't installed at all, but I think there are reasons it is--especially for `sage_setup.docbuild` (but then maybe that should be moved either into the `sage` package itself, or into its own package).



---

archive/issue_comments_323620.json:
```json
{
    "body": "<a id='comment:17'></a>\nPut another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here unless everything in `sage_setup` is consistently designed to only be used at build time.",
    "created_at": "2016-11-08T14:36:09Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323620",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>
Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here unless everything in `sage_setup` is consistently designed to only be used at build time.



---

archive/issue_comments_323621.json:
```json
{
    "body": "<a id='comment:18'></a>\nMaybe `sage_setup` is installed just for testing, such that it can be imported in doctests?",
    "created_at": "2016-11-08T14:37:46Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323621",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'></a>
Maybe `sage_setup` is installed just for testing, such that it can be imported in doctests?



---

archive/issue_comments_323622.json:
```json
{
    "body": "<a id='comment:19'></a>\n`sage_setup` was created in #16431. Already there, it was installed.",
    "created_at": "2016-11-08T14:40:21Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323622",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
`sage_setup` was created in #16431. Already there, it was installed.



---

archive/issue_comments_323623.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [embray](#comment%3A17):\n> Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here\n\nI see it as part of push towards less Sage-specific things in the Sage build system, see also #15105 and #21507 in general.",
    "created_at": "2016-11-08T14:43:06Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323623",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Replying to [embray](#comment%3A17):
> Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here

I see it as part of push towards less Sage-specific things in the Sage build system, see also #15105 and #21507 in general.



---

archive/issue_comments_323624.json:
```json
{
    "body": "<a id='comment:21'></a>\nOk, I think I agree in general.  I *don't* think `sage_setup` should be installed at all, at least not by default.  I'll open a new issue for that.",
    "created_at": "2016-11-08T14:59:50Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323624",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>
Ok, I think I agree in general.  I *don't* think `sage_setup` should be installed at all, at least not by default.  I'll open a new issue for that.



---

archive/issue_comments_323625.json:
```json
{
    "body": "**Reviewer:** Erik Bray",
    "created_at": "2016-11-08T14:59:50Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323625",
    "user": "https://github.com/embray"
}
```

**Reviewer:** Erik Bray



---

archive/issue_events_195355.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-08T14:59:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195355"
}
```



---

archive/issue_events_195356.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-08T14:59:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195356"
}
```



---

archive/issue_comments_323626.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)\" to \"[bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)\".",
    "created_at": "2016-11-09T18:16:10Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323626",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)" to "[bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)".



---

archive/issue_events_195357.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-09T18:16:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195357"
}
```



---

archive/issue_events_195358.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8a1dd7967e0f7cfb08e405016c1dfd8a93cffdd3",
    "created_at": "2016-11-09T18:16:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-195358"
}
```



---

archive/issue_comments_323627.json:
```json
{
    "body": "<a id='comment:23'></a>\nThe following line that was added here is apparently not compatible with python 3:\n\n```\nout = gp.communicate(\"print(default(datadir))\")[0]\n```\nSee https://groups.google.com/forum/#!topic/sage-devel/eSYPSfZOb9k",
    "created_at": "2016-11-13T18:30:53Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323627",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'></a>
The following line that was added here is apparently not compatible with python 3:

```
out = gp.communicate("print(default(datadir))")[0]
```
See https://groups.google.com/forum/#!topic/sage-devel/eSYPSfZOb9k



---

archive/issue_comments_323628.json:
```json
{
    "body": "**Changing commit** from \"[bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)\" to \"\".",
    "created_at": "2016-11-13T18:30:53Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323628",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)" to "".



---

archive/issue_comments_323629.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [chapoton](#comment%3A23):\n\nyes, it should be bytes, not string, i.e. try this:\n\n```\nout = gp.communicate(b'print(default(datadir))')[0]\n```\n\n(don't know how to make this version-agnostic...)",
    "created_at": "2016-11-13T20:53:19Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323629",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>
Replying to [chapoton](#comment%3A23):

yes, it should be bytes, not string, i.e. try this:

```
out = gp.communicate(b'print(default(datadir))')[0]
```

(don't know how to make this version-agnostic...)



---

archive/issue_comments_323630.json:
```json
{
    "body": "<a id='comment:25'></a>\nThe `b\"\"` syntax is supported in Python 2.7.",
    "created_at": "2016-11-13T21:07:11Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323630",
    "user": "https://github.com/defeo"
}
```

<a id='comment:25'></a>
The `b""` syntax is supported in Python 2.7.



---

archive/issue_comments_323631.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [defeo](#comment%3A25):\n> The `b\"\"` syntax is supported in Python 2.7.\n\nAh, OK, it has no effect in Python2. Yes, this would be the good fix then.",
    "created_at": "2016-11-13T21:42:12Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323631",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'></a>
Replying to [defeo](#comment%3A25):
> The `b""` syntax is supported in Python 2.7.

Ah, OK, it has no effect in Python2. Yes, this would be the good fix then.



---

archive/issue_comments_323632.json:
```json
{
    "body": "<a id='comment:27'></a>\nI created #21874.",
    "created_at": "2016-11-13T22:49:29Z",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323632",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
I created #21874.
