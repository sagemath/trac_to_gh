# Issue 21821: Avoid Sage-specific variables in autogen/pari

archive/issues_021584.json:
```json
{
    "assignees": [],
    "body": "In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.\n\nCC:  @defeo\n\nBranch: **[bc8a323](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**\n\nReviewer: **Erik Bray**\n\nAuthor: **Jeroen Demeyer**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21821_\n\n",
    "closed_at": "2016-11-09T18:16:10Z",
    "created_at": "2016-11-04T15:01:08Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Avoid Sage-specific variables in autogen/pari",
    "type": "issue",
    "updated_at": "2016-11-13T22:49:29Z",
    "url": "https://github.com/sagemath/sage/issues/21821",
    "user": "https://github.com/jdemeyer"
}
```
In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.

CC:  @defeo

Branch: **[bc8a323](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**

Reviewer: **Erik Bray**

Author: **Jeroen Demeyer**

_Issue created by migration from https://trac.sagemath.org/ticket/21821_





---

archive/issue_events_277763.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:08Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277763"
}
```



---

archive/issue_events_277764.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277764"
}
```



---

archive/issue_events_277765.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277765"
}
```



---

archive/issue_events_277766.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277766"
}
```



---

archive/issue_events_277767.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T15:01:47Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "title_is": "Do not hardcode path of pari.desc",
    "title_was": "Do not hardcode location to pari.desc",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277767"
}
```



---

archive/issue_comments_323707.json:
```json
{
    "body": "Changed dependencies from **#21820** to none",
    "created_at": "2016-11-04T15:13:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323707",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21820** to none



---

archive/issue_comments_323708.json:
```json
{
    "body": "Branch: **[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)**",
    "created_at": "2016-11-04T18:23:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323708",
    "user": "https://github.com/jdemeyer"
}
```

Branch: **[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)**



---

archive/issue_events_277768.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T18:26:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277768"
}
```



---

archive/issue_comments_323709.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4\">0553d6b</a></td><td><code>Do not hardcode path of pari.desc</code></td></tr></table>\n",
    "created_at": "2016-11-04T18:26:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323709",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'>Comment 4:</a>
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4">0553d6b</a></td><td><code>Do not hardcode path of pari.desc</code></td></tr></table>




---

archive/issue_comments_323710.json:
```json
{
    "body": "Commit: **[0553d6b](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)**",
    "created_at": "2016-11-04T18:26:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323710",
    "user": "https://github.com/jdemeyer"
}
```

Commit: **[0553d6b](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)**



---

archive/issue_comments_323711.json:
```json
{
    "body": "Author: **Jeroen Demeyer**",
    "created_at": "2016-11-04T18:26:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323711",
    "user": "https://github.com/jdemeyer"
}
```

Author: **Jeroen Demeyer**



---

archive/issue_comments_323712.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5\">ed1bfdd</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T16:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323712",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5">ed1bfdd</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_323713.json:
```json
{
    "body": "Changed commit from **[0553d6b](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)** to **[ed1bfdd](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)**",
    "created_at": "2016-11-07T16:37:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323713",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0553d6b](https://github.com/sagemath/sagetrac-mirror/commit/0553d6b4892e82a731a50a46c445487042541bc4)** to **[ed1bfdd](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)**



---

archive/issue_events_277769.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T16:40:46Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "title_is": "Do not hardcode path of pari.desc and don't use SAGE_SRC",
    "title_was": "Do not hardcode path of pari.desc",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277769"
}
```



---

archive/issue_events_277770.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:19:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277770"
}
```



---

archive/issue_events_277771.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:19:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277771"
}
```



---

archive/issue_comments_323714.json:
```json
{
    "body": "Changed commit from **[ed1bfdd](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)** to **[c894625](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)**",
    "created_at": "2016-11-07T18:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323714",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ed1bfdd](https://github.com/sagemath/sagetrac-mirror/commit/ed1bfdd68ee1c7dd57737bb40f5172d560c8a2d5)** to **[c894625](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)**



---

archive/issue_comments_323715.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539\">c894625</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T18:25:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323715",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:9'>Comment 9:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539">c894625</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_323716.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.\n``````\n",
    "created_at": "2016-11-07T18:27:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323716",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+In `src/sage_setup/autogen/pari`: do not hardcode the path of `pari.desc` and don't use `SAGE_SRC`.
``````




---

archive/issue_events_277772.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:27:56Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "title_is": "Avoid Sage-specific variables in autogen/pari",
    "title_was": "Do not hardcode path of pari.desc and don't use SAGE_SRC",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277772"
}
```



---

archive/issue_comments_323717.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77\">bc8a323</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>\n",
    "created_at": "2016-11-07T18:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323717",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:11'>Comment 11:</a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77">bc8a323</a></td><td><code>Don't use SAGE_SRC in sage_src_pari()</code></td></tr></table>




---

archive/issue_comments_323718.json:
```json
{
    "body": "Changed commit from **[c894625](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)** to **[bc8a323](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**",
    "created_at": "2016-11-07T18:29:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323718",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c894625](https://github.com/sagemath/sagetrac-mirror/commit/c8946252439f15f6f67927074639eb2b1e98b539)** to **[bc8a323](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**



---

archive/issue_events_277773.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:29:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277773"
}
```



---

archive/issue_events_277774.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T18:29:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277774"
}
```



---

archive/issue_comments_323719.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nI think the `pari_share()` makes sense--I like that it uses whatever the appropriate `gp` is to get the right path.  Though I think this would make sense to have somewhere in sage itself, and be stored as a variable in `sage.env`, not just as a one-off in this code.\n\nI don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.  Of course, that's the typical case. But the code is not otherwise designed in such a way that that *must* be the case, nor do I think it necessarily should be.  I like the way it was done better.",
    "created_at": "2016-11-08T11:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323719",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'>Comment 13:</a>
I think the `pari_share()` makes sense--I like that it uses whatever the appropriate `gp` is to get the right path.  Though I think this would make sense to have somewhere in sage itself, and be stored as a variable in `sage.env`, not just as a one-off in this code.

I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.  Of course, that's the typical case. But the code is not otherwise designed in such a way that that *must* be the case, nor do I think it necessarily should be.  I like the way it was done better.



---

archive/issue_comments_323720.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nSo, what is your solution for `sage_src_pari()` which would be compatible with #21613?",
    "created_at": "2016-11-08T13:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323720",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'>Comment 14:</a>
So, what is your solution for `sage_src_pari()` which would be compatible with #21613?



---

archive/issue_comments_323721.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nReplying to [@embray](#comment%3A13):\n> I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.\n\nLet me clarify: that code is only meant to be run during the *build* of Sage. And I do think it is a reasonable assumption that the current working directory at build time is the  source directory (*). Most `setup.py` files make that assumption, so if you see this `sage_setup` stuff as an extension of `setup.py`, it makes perfect sense.\n\n(*) To be very precise, let's define the source directory as the directory containing `setup.py`, which is `$SAGE_SRC = $SAGE_ROOT/src` in Sage.",
    "created_at": "2016-11-08T13:07:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323721",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>Comment 15:</a>
Replying to [@embray](#comment%3A13):
> I don't think the change to `sage_src_pari()` makes sense because it makes the assumption that the code is being run directly from the sage source tree.

Let me clarify: that code is only meant to be run during the *build* of Sage. And I do think it is a reasonable assumption that the current working directory at build time is the  source directory (*). Most `setup.py` files make that assumption, so if you see this `sage_setup` stuff as an extension of `setup.py`, it makes perfect sense.

(*) To be very precise, let's define the source directory as the directory containing `setup.py`, which is `$SAGE_SRC = $SAGE_ROOT/src` in Sage.



---

archive/issue_comments_323722.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nHmm, I agree with you, but what bothers me then is that `sage_setup` is *installed* at all, if it's only meant as a supplement to `setup.py` (and that being the case, we could also vastly simplify the `setup.py` by moving things like distutils commands into `sage_setup` as well, which wouldn't be a bad idea anyways).\n\nTo follow up, I feel like if `sage_setup` can be installed, then it should also in principle work outside a build context.  I think it would be better if it simply weren't installed at all, but I think there are reasons it is--especially for `sage_setup.docbuild` (but then maybe that should be moved either into the `sage` package itself, or into its own package).",
    "created_at": "2016-11-08T14:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323722",
    "user": "https://github.com/embray"
}
```

<a id='comment:16'>Comment 16:</a>
Hmm, I agree with you, but what bothers me then is that `sage_setup` is *installed* at all, if it's only meant as a supplement to `setup.py` (and that being the case, we could also vastly simplify the `setup.py` by moving things like distutils commands into `sage_setup` as well, which wouldn't be a bad idea anyways).

To follow up, I feel like if `sage_setup` can be installed, then it should also in principle work outside a build context.  I think it would be better if it simply weren't installed at all, but I think there are reasons it is--especially for `sage_setup.docbuild` (but then maybe that should be moved either into the `sage` package itself, or into its own package).



---

archive/issue_comments_323723.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nPut another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here unless everything in `sage_setup` is consistently designed to only be used at build time.",
    "created_at": "2016-11-08T14:36:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323723",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'>Comment 17:</a>
Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here unless everything in `sage_setup` is consistently designed to only be used at build time.



---

archive/issue_comments_323724.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nMaybe `sage_setup` is installed just for testing, such that it can be imported in doctests?",
    "created_at": "2016-11-08T14:37:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323724",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:18'>Comment 18:</a>
Maybe `sage_setup` is installed just for testing, such that it can be imported in doctests?



---

archive/issue_comments_323725.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\n`sage_setup` was created in #16431. Already there, it was installed.",
    "created_at": "2016-11-08T14:40:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323725",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'>Comment 19:</a>
`sage_setup` was created in #16431. Already there, it was installed.



---

archive/issue_comments_323726.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nReplying to [@embray](#comment%3A17):\n> Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here\n\nI see it as part of push towards less Sage-specific things in the Sage build system, see also #15105 and #21507 in general.",
    "created_at": "2016-11-08T14:43:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323726",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'>Comment 20:</a>
Replying to [@embray](#comment%3A17):
> Put another way, I'm not sure what the advantage is to *not* using `SAGE_SRC` here

I see it as part of push towards less Sage-specific things in the Sage build system, see also #15105 and #21507 in general.



---

archive/issue_comments_323727.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nOk, I think I agree in general.  I *don't* think `sage_setup` should be installed at all, at least not by default.  I'll open a new issue for that.",
    "created_at": "2016-11-08T14:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323727",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'>Comment 21:</a>
Ok, I think I agree in general.  I *don't* think `sage_setup` should be installed at all, at least not by default.  I'll open a new issue for that.



---

archive/issue_comments_323728.json:
```json
{
    "body": "Reviewer: **Erik Bray**",
    "created_at": "2016-11-08T14:59:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323728",
    "user": "https://github.com/embray"
}
```

Reviewer: **Erik Bray**



---

archive/issue_events_277775.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-08T14:59:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277775"
}
```



---

archive/issue_events_277776.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-08T14:59:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277776"
}
```



---

archive/issue_comments_323729.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)** to **[bc8a323](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**",
    "created_at": "2016-11-09T18:16:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323729",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/do_not_hardcode_path_of_pari_desc](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/do_not_hardcode_path_of_pari_desc)** to **[bc8a323](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)**



---

archive/issue_events_277777.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-09T18:16:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277777"
}
```



---

archive/issue_events_277778.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "8a1dd7967e0f7cfb08e405016c1dfd8a93cffdd3",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-09T18:16:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21821#event-277778"
}
```



---

archive/issue_comments_323730.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nThe following line that was added here is apparently not compatible with python 3:\n\n```\nout = gp.communicate(\"print(default(datadir))\")[0]\n```\nSee https://groups.google.com/forum/#!topic/sage-devel/eSYPSfZOb9k",
    "created_at": "2016-11-13T18:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323730",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:23'>Comment 23:</a>
The following line that was added here is apparently not compatible with python 3:

```
out = gp.communicate("print(default(datadir))")[0]
```
See https://groups.google.com/forum/#!topic/sage-devel/eSYPSfZOb9k



---

archive/issue_comments_323731.json:
```json
{
    "body": "Changed commit from **[bc8a323](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)** to none",
    "created_at": "2016-11-13T18:30:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323731",
    "user": "https://github.com/fchapoton"
}
```

Changed commit from **[bc8a323](https://github.com/sagemath/sagetrac-mirror/commit/bc8a3233c86fea1cb4ee11e7a6a71a12fd9d9e77)** to none



---

archive/issue_comments_323732.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nReplying to [@fchapoton](#comment%3A23):\n\nyes, it should be bytes, not string, i.e. try this:\n\n```\nout = gp.communicate(b'print(default(datadir))')[0]\n```\n\n(don't know how to make this version-agnostic...)",
    "created_at": "2016-11-13T20:53:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323732",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'>Comment 24:</a>
Replying to [@fchapoton](#comment%3A23):

yes, it should be bytes, not string, i.e. try this:

```
out = gp.communicate(b'print(default(datadir))')[0]
```

(don't know how to make this version-agnostic...)



---

archive/issue_comments_323733.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nThe `b\"\"` syntax is supported in Python 2.7.",
    "created_at": "2016-11-13T21:07:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323733",
    "user": "https://github.com/defeo"
}
```

<a id='comment:25'>Comment 25:</a>
The `b""` syntax is supported in Python 2.7.



---

archive/issue_comments_323734.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nReplying to [@defeo](#comment%3A25):\n> The `b\"\"` syntax is supported in Python 2.7.\n\nAh, OK, it has no effect in Python2. Yes, this would be the good fix then.",
    "created_at": "2016-11-13T21:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323734",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:26'>Comment 26:</a>
Replying to [@defeo](#comment%3A25):
> The `b""` syntax is supported in Python 2.7.

Ah, OK, it has no effect in Python2. Yes, this would be the good fix then.



---

archive/issue_comments_323735.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nI created #21874.",
    "created_at": "2016-11-13T22:49:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21821",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21821#issuecomment-323735",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'>Comment 27:</a>
I created #21874.
