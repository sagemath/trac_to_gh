# Issue 21433: pushout and unique parent for finite fields

archive/issues_021196.json:
```json
{
    "body": "I think that this is a bug:\n\n```\n    sage: K = GF(5^2); K\n    Finite Field in z2 of size 5^2\n    sage: L = GF(5^4); L\n    Finite Field in z4 of size 5^4\n    sage: from sage.categories.pushout import pushout\n    sage: P = pushout(K,L); P\n    Finite Field in z4 of size 5^4\n    sage: P is L\n    False\n```\n\n**CC:**  @defeo @nthiery @jdemeyer @roed314 @malb @pjbruin\n\n**Keywords:** coercion, category, unique parent, finite fields, sd86.5\n\n**Branch/Commit:** [15642289dab2f4918ca65ca20a56f64272b5620c](https://github.com/sagemath/sagetrac-mirror/commit/15642289dab2f4918ca65ca20a56f64272b5620c)\n\n**Reviewer:** Julian R\u00fcth\n\n**Author:** Xavier Caruso, Travis Scrimshaw\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21433\n\n",
    "closed_at": "2017-06-13T06:51:46Z",
    "created_at": "2016-09-06T09:18:28Z",
    "labels": [
        "component: finite rings",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "pushout and unique parent for finite fields",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21433",
    "user": "https://github.com/xcaruso"
}
```
I think that this is a bug:

```
    sage: K = GF(5^2); K
    Finite Field in z2 of size 5^2
    sage: L = GF(5^4); L
    Finite Field in z4 of size 5^4
    sage: from sage.categories.pushout import pushout
    sage: P = pushout(K,L); P
    Finite Field in z4 of size 5^4
    sage: P is L
    False
```

**CC:**  @defeo @nthiery @jdemeyer @roed314 @malb @pjbruin

**Keywords:** coercion, category, unique parent, finite fields, sd86.5

**Branch/Commit:** [15642289dab2f4918ca65ca20a56f64272b5620c](https://github.com/sagemath/sagetrac-mirror/commit/15642289dab2f4918ca65ca20a56f64272b5620c)

**Reviewer:** Julian Rüth

**Author:** Xavier Caruso, Travis Scrimshaw

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/21433





---

archive/issue_comments_397168.json:
```json
{
    "body": "<a id='comment:1'></a>\nI had a closer look at this issue. Here is what happens: the function `pushout` recreates the finite field with the extra attribute `structure=None` which becomes part of the key used in `UniqueFactory`. Actually the key is built from all attributes including those that are not used or have no meaning. E.g.:\n\n```\n    sage: K = GF(5^2)\n    sage: L = GF(5^2, irrelevant_attribute='Hello')\n    sage: K is L\n    False\n```\n\nI would gladly remove the component `str(kwds)` from the key (see `sage.rings.finite_rings.finite_field_constructor:549`). Any comment?",
    "created_at": "2016-09-06T11:26:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397168",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:1'></a>
I had a closer look at this issue. Here is what happens: the function `pushout` recreates the finite field with the extra attribute `structure=None` which becomes part of the key used in `UniqueFactory`. Actually the key is built from all attributes including those that are not used or have no meaning. E.g.:

```
    sage: K = GF(5^2)
    sage: L = GF(5^2, irrelevant_attribute='Hello')
    sage: K is L
    False
```

I would gladly remove the component `str(kwds)` from the key (see `sage.rings.finite_rings.finite_field_constructor:549`). Any comment?



---

archive/issue_comments_397169.json:
```json
{
    "body": "**Branch:** [u/caruso/21433/key_finite_field_constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/21433/key_finite_field_constructor)",
    "created_at": "2016-09-07T22:53:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397169",
    "user": "https://github.com/xcaruso"
}
```

**Branch:** [u/caruso/21433/key_finite_field_constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/21433/key_finite_field_constructor)



---

archive/issue_comments_397170.json:
```json
{
    "body": "**Commit:** [9f748bdac2d036d5a95c66043db45a8e7d4fb64f](https://github.com/sagemath/sagetrac-mirror/commit/9f748bdac2d036d5a95c66043db45a8e7d4fb64f)",
    "created_at": "2016-09-07T22:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397170",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Commit:** [9f748bdac2d036d5a95c66043db45a8e7d4fb64f](https://github.com/sagemath/sagetrac-mirror/commit/9f748bdac2d036d5a95c66043db45a8e7d4fb64f)



---

archive/issue_comments_397171.json:
```json
{
    "body": "<a id='comment:3'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f748bdac2d036d5a95c66043db45a8e7d4fb64f\">9f748bd</a></td><td><code>Remove str(kwds) from the key in FiniteFieldFactory</code></td></tr></table>\n",
    "created_at": "2016-09-07T22:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397171",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f748bdac2d036d5a95c66043db45a8e7d4fb64f">9f748bd</a></td><td><code>Remove str(kwds) from the key in FiniteFieldFactory</code></td></tr></table>




---

archive/issue_comments_397172.json:
```json
{
    "body": "**Changing commit** from \"[9f748bdac2d036d5a95c66043db45a8e7d4fb64f](https://github.com/sagemath/sagetrac-mirror/commit/9f748bdac2d036d5a95c66043db45a8e7d4fb64f)\" to \"[10cf5a365ba93059f2d6729f04d2b9bb136225ee](https://github.com/sagemath/sagetrac-mirror/commit/10cf5a365ba93059f2d6729f04d2b9bb136225ee)\".",
    "created_at": "2016-09-07T23:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397172",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9f748bdac2d036d5a95c66043db45a8e7d4fb64f](https://github.com/sagemath/sagetrac-mirror/commit/9f748bdac2d036d5a95c66043db45a8e7d4fb64f)" to "[10cf5a365ba93059f2d6729f04d2b9bb136225ee](https://github.com/sagemath/sagetrac-mirror/commit/10cf5a365ba93059f2d6729f04d2b9bb136225ee)".



---

archive/issue_comments_397173.json:
```json
{
    "body": "<a id='comment:4'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10cf5a365ba93059f2d6729f04d2b9bb136225ee\">10cf5a3</a></td><td><code>Removed only named attributes whose value is None...</code></td></tr></table>\n",
    "created_at": "2016-09-07T23:22:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397173",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10cf5a365ba93059f2d6729f04d2b9bb136225ee">10cf5a3</a></td><td><code>Removed only named attributes whose value is None...</code></td></tr></table>




---

archive/issue_comments_397174.json:
```json
{
    "body": "<a id='comment:5'></a>\nMy proposal was too coarse and broke many doctests.\n\nMy new weaker suggestion is to remove from the key only the named attributes whose value is None (cf patch implemented in the current branch).\n\nTicket set to needs_review.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10cf5a365ba93059f2d6729f04d2b9bb136225ee\">10cf5a3</a></td><td><code>Removed only named attributes whose value is None...</code></td></tr></table>\n",
    "created_at": "2016-09-07T23:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397174",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:5'></a>
My proposal was too coarse and broke many doctests.

My new weaker suggestion is to remove from the key only the named attributes whose value is None (cf patch implemented in the current branch).

Ticket set to needs_review.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10cf5a365ba93059f2d6729f04d2b9bb136225ee">10cf5a3</a></td><td><code>Removed only named attributes whose value is None...</code></td></tr></table>




---

archive/issue_comments_397175.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2016-09-07T23:27:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397175",
    "user": "https://github.com/xcaruso"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_397176.json:
```json
{
    "body": "**Author:** Xavier Caruso",
    "created_at": "2016-09-08T01:17:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397176",
    "user": "https://github.com/saraedum"
}
```

**Author:** Xavier Caruso



---

archive/issue_comments_397177.json:
```json
{
    "body": "<a id='comment:7'></a>\nIsn't using `str(...)` in a key a questionable idea anyway? Is this just a hack to work around the fact that a `dict` is not hashable?\n\nDropping the `None`s is just assuming that these are the default values, right? Wouldn't it be better to add the default values explicitly to the key?",
    "created_at": "2016-09-08T01:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397177",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:7'></a>
Isn't using `str(...)` in a key a questionable idea anyway? Is this just a hack to work around the fact that a `dict` is not hashable?

Dropping the `None`s is just assuming that these are the default values, right? Wouldn't it be better to add the default values explicitly to the key?



---

archive/issue_comments_397178.json:
```json
{
    "body": "**Reviewer:** Julian R\u00fcth",
    "created_at": "2016-09-08T01:21:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397178",
    "user": "https://github.com/saraedum"
}
```

**Reviewer:** Julian Rüth



---

archive/issue_comments_397179.json:
```json
{
    "body": "**Changing status** from needs_review to needs_info.",
    "created_at": "2016-09-08T01:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397179",
    "user": "https://github.com/saraedum"
}
```

**Changing status** from needs_review to needs_info.



---

archive/issue_comments_397180.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [saraedum](#comment%3A7):\n> Dropping the `None`s is just assuming that these are the default values, right? Wouldn't it be better to add the default values explicitly to the key?\n\n\nAs far as I understand, the point is that we don't know - or more exactly we don't want to precise at this point - what kind of attributes can arise and thus a fortiori we don't know their default values.\n\nFor example, the Givaro library accepts an attribute `repr` (for specifying the internal representation of the elements of the finite field). Of course, two Givaro finite fields with different `repr` option cannot be equal, so that `repr` should definitely be a part of the key.\n\nAnother option would be to make the list of all possible attributes and only include them in the key.",
    "created_at": "2016-09-08T08:08:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397180",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:9'></a>
Replying to [saraedum](#comment%3A7):
> Dropping the `None`s is just assuming that these are the default values, right? Wouldn't it be better to add the default values explicitly to the key?


As far as I understand, the point is that we don't know - or more exactly we don't want to precise at this point - what kind of attributes can arise and thus a fortiori we don't know their default values.

For example, the Givaro library accepts an attribute `repr` (for specifying the internal representation of the elements of the finite field). Of course, two Givaro finite fields with different `repr` option cannot be equal, so that `repr` should definitely be a part of the key.

Another option would be to make the list of all possible attributes and only include them in the key.



---

archive/issue_comments_397181.json:
```json
{
    "body": "**Changing branch** from \"[u/caruso/21433/key_finite_field_constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/21433/key_finite_field_constructor)\" to \"[u/saraedum/21433/key_finite_field_constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/21433/key_finite_field_constructor)\".",
    "created_at": "2016-09-24T19:37:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397181",
    "user": "https://github.com/saraedum"
}
```

**Changing branch** from "[u/caruso/21433/key_finite_field_constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/caruso/21433/key_finite_field_constructor)" to "[u/saraedum/21433/key_finite_field_constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/21433/key_finite_field_constructor)".



---

archive/issue_comments_397182.json:
```json
{
    "body": "<a id='comment:11'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33b4cb3d995ffed71b5ac828c14ead535764f73f\">33b4cb3</a></td><td><code>Less aggressive key generation for finite fields</code></td></tr></table>\n",
    "created_at": "2016-09-24T19:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397182",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33b4cb3d995ffed71b5ac828c14ead535764f73f">33b4cb3</a></td><td><code>Less aggressive key generation for finite fields</code></td></tr></table>




---

archive/issue_comments_397183.json:
```json
{
    "body": "**Changing commit** from \"[10cf5a365ba93059f2d6729f04d2b9bb136225ee](https://github.com/sagemath/sagetrac-mirror/commit/10cf5a365ba93059f2d6729f04d2b9bb136225ee)\" to \"[33b4cb3d995ffed71b5ac828c14ead535764f73f](https://github.com/sagemath/sagetrac-mirror/commit/33b4cb3d995ffed71b5ac828c14ead535764f73f)\".",
    "created_at": "2016-09-24T19:52:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397183",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[10cf5a365ba93059f2d6729f04d2b9bb136225ee](https://github.com/sagemath/sagetrac-mirror/commit/10cf5a365ba93059f2d6729f04d2b9bb136225ee)" to "[33b4cb3d995ffed71b5ac828c14ead535764f73f](https://github.com/sagemath/sagetrac-mirror/commit/33b4cb3d995ffed71b5ac828c14ead535764f73f)".



---

archive/issue_comments_397184.json:
```json
{
    "body": "<a id='comment:12'></a>\nSorry for holding up this simple fix. I know this is frustrating. I'll try to be more responsive.\n\nWhat do you think about just removing the attributes that we know to cause trouble here?",
    "created_at": "2016-09-24T21:21:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397184",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:12'></a>
Sorry for holding up this simple fix. I know this is frustrating. I'll try to be more responsive.

What do you think about just removing the attributes that we know to cause trouble here?



---

archive/issue_comments_397185.json:
```json
{
    "body": "<a id='comment:13'></a>\nI agree with this solution.",
    "created_at": "2017-05-26T07:18:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397185",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:13'></a>
I agree with this solution.



---

archive/issue_comments_397186.json:
```json
{
    "body": "**Changing status** from needs_info to needs_work.",
    "created_at": "2017-05-26T13:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397186",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_info to needs_work.



---

archive/issue_events_064764.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2017-05-26T13:35:40Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21433#event-64764"
}
```



---

archive/issue_comments_397187.json:
```json
{
    "body": "<a id='comment:14'></a>\nI do not like this solution as this has a code smell. Instead, I would add `structure` to `create_key_and_extra_args` and say we explicitly ignore it in the documentation (saying we include it for compatibility with `AlgebraicExtensionFunctor`. Another possibility that comes to mind is remove `structures` from `AlgebraicExtensionFunctor` and create a new subclass that also handles `structures` specifically for number fields. Last option I can think of would be for `AlgebraicExtensionFunctor` to not pass along `structures` when it does not contain any information.",
    "created_at": "2017-05-26T13:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397187",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
I do not like this solution as this has a code smell. Instead, I would add `structure` to `create_key_and_extra_args` and say we explicitly ignore it in the documentation (saying we include it for compatibility with `AlgebraicExtensionFunctor`. Another possibility that comes to mind is remove `structures` from `AlgebraicExtensionFunctor` and create a new subclass that also handles `structures` specifically for number fields. Last option I can think of would be for `AlgebraicExtensionFunctor` to not pass along `structures` when it does not contain any information.



---

archive/issue_comments_397188.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [tscrim](#comment%3A14):\n> I do not like this solution as this has a code smell. Instead, I would add `structure` to `create_key_and_extra_args` and say we explicitly ignore it in the documentation (saying we include it for compatibility with `AlgebraicExtensionFunctor`.\n\nI do not how understand how what we do differs from this. Is it about the explict mention of the AlgebraicExtensionFunctor? I would not want to add it to the method interface explicitly since it has no effect.",
    "created_at": "2017-06-06T22:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397188",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:15'></a>
Replying to [tscrim](#comment%3A14):
> I do not like this solution as this has a code smell. Instead, I would add `structure` to `create_key_and_extra_args` and say we explicitly ignore it in the documentation (saying we include it for compatibility with `AlgebraicExtensionFunctor`.

I do not how understand how what we do differs from this. Is it about the explict mention of the AlgebraicExtensionFunctor? I would not want to add it to the method interface explicitly since it has no effect.



---

archive/issue_comments_397189.json:
```json
{
    "body": "**Changing keywords** from \"coercion, category, unique parent, finite fields\" to \"coercion, category, unique parent, finite fields, sd86.5\".",
    "created_at": "2017-06-06T22:16:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397189",
    "user": "https://github.com/saraedum"
}
```

**Changing keywords** from "coercion, category, unique parent, finite fields" to "coercion, category, unique parent, finite fields, sd86.5".



---

archive/issue_comments_397190.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2017-06-06T22:16:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397190",
    "user": "https://github.com/saraedum"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_397191.json:
```json
{
    "body": "<a id='comment:18'></a>\nThe biggest difference is it becomes an explicit keyword that is handled in all cases by truly ignoring the value. It is also cleaner code in the sense that the interface is more uniform (i.e., it is implicitly expecting to receive such a keyword at some point).",
    "created_at": "2017-06-07T12:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397191",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>
The biggest difference is it becomes an explicit keyword that is handled in all cases by truly ignoring the value. It is also cleaner code in the sense that the interface is more uniform (i.e., it is implicitly expecting to receive such a keyword at some point).



---

archive/issue_comments_397192.json:
```json
{
    "body": "<a id='comment:19'></a>\nFeel free to make that change but I do not see the need to do so. Since we are ignoring the keyword anyway, I think it is equally confusing to have it explicitly in the interface.",
    "created_at": "2017-06-10T01:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397192",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:19'></a>
Feel free to make that change but I do not see the need to do so. Since we are ignoring the keyword anyway, I think it is equally confusing to have it explicitly in the interface.



---

archive/issue_comments_397193.json:
```json
{
    "body": "<a id='comment:20'></a>\n\n```\nFile \"src/sage/rings/finite_rings/finite_field_constructor.py\", line 482, in sage.rings.finite_rings.finite_field_constructor.FiniteFieldFactory.?\nFailed example:\n    GF.create_key_and_extra_args(9, 'a', structure=None)\nExpected:\n    ((9, ('a',), x^2 + 2*x + 2, 'givaro', '{}', 3, 2, True), {}\nGot:\n    ((9, ('a',), x^2 + 2*x + 2, 'givaro', '{}', 3, 2, True), {})\n```",
    "created_at": "2017-06-10T07:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397193",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:20'></a>

```
File "src/sage/rings/finite_rings/finite_field_constructor.py", line 482, in sage.rings.finite_rings.finite_field_constructor.FiniteFieldFactory.?
Failed example:
    GF.create_key_and_extra_args(9, 'a', structure=None)
Expected:
    ((9, ('a',), x^2 + 2*x + 2, 'givaro', '{}', 3, 2, True), {}
Got:
    ((9, ('a',), x^2 + 2*x + 2, 'givaro', '{}', 3, 2, True), {})
```



---

archive/issue_comments_397194.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2017-06-10T07:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397194",
    "user": "https://github.com/saraedum"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_397195.json:
```json
{
    "body": "**Work_Issues:** failing doctest",
    "created_at": "2017-06-10T07:14:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397195",
    "user": "https://github.com/saraedum"
}
```

**Work_Issues:** failing doctest



---

archive/issue_comments_397196.json:
```json
{
    "body": "<a id='comment:21'></a>\nThis needs to better handle the extra keyword arguments and their defaults. I see a good way forward on how to do that. I will also fix that doctest.",
    "created_at": "2017-06-10T22:56:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397196",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'></a>
This needs to better handle the extra keyword arguments and their defaults. I see a good way forward on how to do that. I will also fix that doctest.



---

archive/issue_comments_397197.json:
```json
{
    "body": "**Changing commit** from \"[33b4cb3d995ffed71b5ac828c14ead535764f73f](https://github.com/sagemath/sagetrac-mirror/commit/33b4cb3d995ffed71b5ac828c14ead535764f73f)\" to \"[ba4f80510e7de4b7e37ae83ffa999279bb990a22](https://github.com/sagemath/sagetrac-mirror/commit/ba4f80510e7de4b7e37ae83ffa999279bb990a22)\".",
    "created_at": "2017-06-10T23:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397197",
    "user": "https://github.com/tscrim"
}
```

**Changing commit** from "[33b4cb3d995ffed71b5ac828c14ead535764f73f](https://github.com/sagemath/sagetrac-mirror/commit/33b4cb3d995ffed71b5ac828c14ead535764f73f)" to "[ba4f80510e7de4b7e37ae83ffa999279bb990a22](https://github.com/sagemath/sagetrac-mirror/commit/ba4f80510e7de4b7e37ae83ffa999279bb990a22)".



---

archive/issue_comments_397198.json:
```json
{
    "body": "**Changing author** from \"Xavier Caruso\" to \"Xavier Caruso, Travis Scrimshaw\".",
    "created_at": "2017-06-10T23:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397198",
    "user": "https://github.com/tscrim"
}
```

**Changing author** from "Xavier Caruso" to "Xavier Caruso, Travis Scrimshaw".



---

archive/issue_comments_397199.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2017-06-10T23:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397199",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_397200.json:
```json
{
    "body": "<a id='comment:22'></a>\nThe last commit now means we do not had oddities like:\n\n```\nsage: GF(25, impl='givaro') is GF(25, impl='givaro', repr='poly')\nFalse\n```\nIt also means we no longer accept junk keywords that makes different keys (i.e., this now raises a `TypeError`):\n\n```\nsage: GF(25) is GF(25, foo='bar')\nFalse\n```\nI was tempted to have `elem_cache` and `repr` raise an error when the implementation is not givaro, but because `elem_cache` was listed as an argument, I decided to just ignore it for backwards compatibility.\n\nIMO, what we really should be using is `UniqueRepresentation` and letting subclasses handle this through their `__classcall__` and `__classcall_private__`. However, that is a much more invasive change and this is on the path towards that.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89c4cef40cf14578da7dd309c591744aae801ef7\">89c4cef</a></td><td><code>Merge branch 'u/saraedum/21433/key_finite_field_constructor' of git://trac.sagemath.org/sage into public/finite_fields/pushout_unique_parents-21433</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/764ba527112a9c383d4262a190ef57b7cf1af95b\">764ba52</a></td><td><code>Explicitly ignore structure argument.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4c73bbad339cc4ebee31aa2ec625b4a292fb2552\">4c73bba</a></td><td><code>Removed unused _kwargs attribute.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba4f80510e7de4b7e37ae83ffa999279bb990a22\">ba4f805</a></td><td><code>Be very explicit about the keyword arguments for GF factory keys.</code></td></tr></table>\n",
    "created_at": "2017-06-10T23:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397200",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:22'></a>
The last commit now means we do not had oddities like:

```
sage: GF(25, impl='givaro') is GF(25, impl='givaro', repr='poly')
False
```
It also means we no longer accept junk keywords that makes different keys (i.e., this now raises a `TypeError`):

```
sage: GF(25) is GF(25, foo='bar')
False
```
I was tempted to have `elem_cache` and `repr` raise an error when the implementation is not givaro, but because `elem_cache` was listed as an argument, I decided to just ignore it for backwards compatibility.

IMO, what we really should be using is `UniqueRepresentation` and letting subclasses handle this through their `__classcall__` and `__classcall_private__`. However, that is a much more invasive change and this is on the path towards that.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89c4cef40cf14578da7dd309c591744aae801ef7">89c4cef</a></td><td><code>Merge branch 'u/saraedum/21433/key_finite_field_constructor' of git://trac.sagemath.org/sage into public/finite_fields/pushout_unique_parents-21433</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/764ba527112a9c383d4262a190ef57b7cf1af95b">764ba52</a></td><td><code>Explicitly ignore structure argument.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4c73bbad339cc4ebee31aa2ec625b4a292fb2552">4c73bba</a></td><td><code>Removed unused _kwargs attribute.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba4f80510e7de4b7e37ae83ffa999279bb990a22">ba4f805</a></td><td><code>Be very explicit about the keyword arguments for GF factory keys.</code></td></tr></table>




---

archive/issue_comments_397201.json:
```json
{
    "body": "**Changing work_issues** from \"failing doctest\" to \"\".",
    "created_at": "2017-06-10T23:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397201",
    "user": "https://github.com/tscrim"
}
```

**Changing work_issues** from "failing doctest" to "".



---

archive/issue_comments_397202.json:
```json
{
    "body": "**Changing branch** from \"[u/saraedum/21433/key_finite_field_constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/21433/key_finite_field_constructor)\" to \"[public/finite_fields/unique_parents-21433](https://github.com/sagemath/sagetrac-mirror/tree/public/finite_fields/unique_parents-21433)\".",
    "created_at": "2017-06-10T23:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397202",
    "user": "https://github.com/tscrim"
}
```

**Changing branch** from "[u/saraedum/21433/key_finite_field_constructor](https://github.com/sagemath/sagetrac-mirror/tree/u/saraedum/21433/key_finite_field_constructor)" to "[public/finite_fields/unique_parents-21433](https://github.com/sagemath/sagetrac-mirror/tree/public/finite_fields/unique_parents-21433)".



---

archive/issue_comments_397203.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2017-06-11T00:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397203",
    "user": "https://github.com/saraedum"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_397204.json:
```json
{
    "body": "<a id='comment:24'></a>\npositive review assuming that the patchbot likes it.",
    "created_at": "2017-06-11T00:44:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397204",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:24'></a>
positive review assuming that the patchbot likes it.



---

archive/issue_comments_397205.json:
```json
{
    "body": "<a id='comment:25'></a>\nYou can't set something to positive review assuming that the patchbot likes it and then not check it, WTF",
    "created_at": "2017-06-11T14:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397205",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
You can't set something to positive review assuming that the patchbot likes it and then not check it, WTF



---

archive/issue_comments_397206.json:
```json
{
    "body": "**Changing status** from positive_review to needs_work.",
    "created_at": "2017-06-11T14:27:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397206",
    "user": "https://github.com/vbraun"
}
```

**Changing status** from positive_review to needs_work.



---

archive/issue_comments_397207.json:
```json
{
    "body": "<a id='comment:26'></a>\nTravis, please feel free to set this to positive review once the doctests pass.\n\nVolker, I was not aware of that. I thought that passing doctests were a prerequisite for merging things. Not for positively reviewing things; in particular since there were hardly any patchbots left until a few days ago (when we started a couple of additional ones.) Sure the manual says that all tests should pass but it also tells me to build the reference manual which I can't because I have not enough RAM for that. In any case, I will be more careful with that in the future but I found \"wtf\" to be a slightly too strong remark here.",
    "created_at": "2017-06-11T16:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397207",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:26'></a>
Travis, please feel free to set this to positive review once the doctests pass.

Volker, I was not aware of that. I thought that passing doctests were a prerequisite for merging things. Not for positively reviewing things; in particular since there were hardly any patchbots left until a few days ago (when we started a couple of additional ones.) Sure the manual says that all tests should pass but it also tells me to build the reference manual which I can't because I have not enough RAM for that. In any case, I will be more careful with that in the future but I found "wtf" to be a slightly too strong remark here.



---

archive/issue_comments_397208.json:
```json
{
    "body": "**Work_Issues:** failing doctests",
    "created_at": "2017-06-11T16:38:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397208",
    "user": "https://github.com/saraedum"
}
```

**Work_Issues:** failing doctests



---

archive/issue_comments_397209.json:
```json
{
    "body": "<a id='comment:27'></a>\nSorry if it was worded too strongly; But actually working (including doctests) is a prerequistite for \"positive review\".",
    "created_at": "2017-06-11T17:20:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397209",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:27'></a>
Sorry if it was worded too strongly; But actually working (including doctests) is a prerequistite for "positive review".



---

archive/issue_comments_397210.json:
```json
{
    "body": "<a id='comment:28'></a>\nOk. Thanks for clarifying.",
    "created_at": "2017-06-11T18:37:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397210",
    "user": "https://github.com/saraedum"
}
```

<a id='comment:28'></a>
Ok. Thanks for clarifying.



---

archive/issue_comments_397211.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15642289dab2f4918ca65ca20a56f64272b5620c\">1564228</a></td><td><code>Fixing doctests and handling of old pickles.</code></td></tr></table>\n",
    "created_at": "2017-06-11T22:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397211",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15642289dab2f4918ca65ca20a56f64272b5620c">1564228</a></td><td><code>Fixing doctests and handling of old pickles.</code></td></tr></table>




---

archive/issue_comments_397212.json:
```json
{
    "body": "**Changing commit** from \"[ba4f80510e7de4b7e37ae83ffa999279bb990a22](https://github.com/sagemath/sagetrac-mirror/commit/ba4f80510e7de4b7e37ae83ffa999279bb990a22)\" to \"[15642289dab2f4918ca65ca20a56f64272b5620c](https://github.com/sagemath/sagetrac-mirror/commit/15642289dab2f4918ca65ca20a56f64272b5620c)\".",
    "created_at": "2017-06-11T22:43:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397212",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[ba4f80510e7de4b7e37ae83ffa999279bb990a22](https://github.com/sagemath/sagetrac-mirror/commit/ba4f80510e7de4b7e37ae83ffa999279bb990a22)" to "[15642289dab2f4918ca65ca20a56f64272b5620c](https://github.com/sagemath/sagetrac-mirror/commit/15642289dab2f4918ca65ca20a56f64272b5620c)".



---

archive/issue_comments_397213.json:
```json
{
    "body": "**Changing work_issues** from \"failing doctests\" to \"\".",
    "created_at": "2017-06-11T22:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397213",
    "user": "https://github.com/tscrim"
}
```

**Changing work_issues** from "failing doctests" to "".



---

archive/issue_comments_397214.json:
```json
{
    "body": "**Changing status** from needs_work to positive_review.",
    "created_at": "2017-06-11T22:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397214",
    "user": "https://github.com/tscrim"
}
```

**Changing status** from needs_work to positive_review.



---

archive/issue_comments_397215.json:
```json
{
    "body": "<a id='comment:30'></a>\nAll tests now pass.",
    "created_at": "2017-06-11T22:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397215",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:30'></a>
All tests now pass.



---

archive/issue_comments_397216.json:
```json
{
    "body": "**Changing branch** from \"[public/finite_fields/unique_parents-21433](https://github.com/sagemath/sagetrac-mirror/tree/public/finite_fields/unique_parents-21433)\" to \"[15642289dab2f4918ca65ca20a56f64272b5620c](https://github.com/sagemath/sagetrac-mirror/commit/15642289dab2f4918ca65ca20a56f64272b5620c)\".",
    "created_at": "2017-06-13T06:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397216",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/finite_fields/unique_parents-21433](https://github.com/sagemath/sagetrac-mirror/tree/public/finite_fields/unique_parents-21433)" to "[15642289dab2f4918ca65ca20a56f64272b5620c](https://github.com/sagemath/sagetrac-mirror/commit/15642289dab2f4918ca65ca20a56f64272b5620c)".



---

archive/issue_comments_397217.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2017-06-13T06:51:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21433#issuecomment-397217",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_events_064765.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-06-13T06:51:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21433",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21433#event-64765"
}
```
