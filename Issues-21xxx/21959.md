# Issue 21959: Optional automatic injection of undefined variables into the global namespaces

archive/issues_021722.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nThe Sage Notebook interface allows automatic creation of undefined variables, which can be useful e.g. for quick calculus work.\n\nIt is listed as one of the blockers for moving completely to Jupyter in [the wiki](https://wiki.sagemath.org/IpythonNotebook)\n\nCC:  @kcrisman @robertwb @tscrim\n\nComponent: **misc**\n\nKeywords: **days79**\n\nAuthor: **Konstantin Kliakhandler**\n\nBranch/Commit: **[u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars) @ [`1e4d4fb`](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21959_\n\n",
    "created_at": "2016-11-24T13:40:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/c%3A%20calculus",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Optional automatic injection of undefined variables into the global namespaces",
    "type": "issue",
    "updated_at": "2022-12-29T01:37:47Z",
    "url": "https://github.com/sagemath/sage/issues/21959",
    "user": "https://github.com/sagetrac-Kosta"
}
```
<div id="comment:0"></div>

The Sage Notebook interface allows automatic creation of undefined variables, which can be useful e.g. for quick calculus work.

It is listed as one of the blockers for moving completely to Jupyter in [the wiki](https://wiki.sagemath.org/IpythonNotebook)

CC:  @kcrisman @robertwb @tscrim

Component: **misc**

Keywords: **days79**

Author: **Konstantin Kliakhandler**

Branch/Commit: **[u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars) @ [`1e4d4fb`](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)**

_Issue created by migration from https://trac.sagemath.org/ticket/21959_





---

archive/issue_events_305010.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T13:40:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-305010"
}
```



---

archive/issue_events_305011.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T13:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20minor%20/%204",
    "label_color": "ffe799",
    "label_name": "p: minor / 4",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-305011"
}
```



---

archive/issue_events_305012.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T13:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-305012"
}
```



---

archive/issue_comments_323510.json:
```json
{
    "body": "Branch: **[u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)**",
    "created_at": "2016-11-24T14:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323510",
    "user": "https://github.com/sagetrac-Kosta"
}
```

Branch: **[u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)**



---

archive/issue_comments_323511.json:
```json
{
    "body": "Commit: **[`3a2318b`](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)**",
    "created_at": "2016-11-24T14:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323511",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`3a2318b`](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)**



---

archive/issue_comments_323512.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106\"><code>3a2318b</code></a></td><td><code>Fix indentation issue.</code></td></tr></table>\n",
    "created_at": "2016-11-24T14:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323512",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106"><code>3a2318b</code></a></td><td><code>Fix indentation issue.</code></td></tr></table>




---

archive/issue_comments_323513.json:
```json
{
    "body": "Changed commit from **[`3a2318b`](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)** to **[`3e8f2aa`](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)**",
    "created_at": "2016-11-24T14:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323513",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3a2318b`](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)** to **[`3e8f2aa`](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)**



---

archive/issue_comments_323514.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14\"><code>3e8f2aa</code></a></td><td><code>Remove unneccesary import.</code></td></tr></table>\n",
    "created_at": "2016-11-24T14:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323514",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14"><code>3e8f2aa</code></a></td><td><code>Remove unneccesary import.</code></td></tr></table>




---

archive/issue_comments_323515.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d18f377b69045deb5d043915091f05b8e6e191a\"><code>1d18f37</code></a></td><td><code>Automatic variable injection.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106\"><code>3a2318b</code></a></td><td><code>Fix indentation issue.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14\"><code>3e8f2aa</code></a></td><td><code>Remove unneccesary import.</code></td></tr></table>\n",
    "created_at": "2016-11-24T14:49:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323515",
    "user": "https://github.com/sagetrac-Kosta"
}
```

<div id="comment:4"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d18f377b69045deb5d043915091f05b8e6e191a"><code>1d18f37</code></a></td><td><code>Automatic variable injection.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106"><code>3a2318b</code></a></td><td><code>Fix indentation issue.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14"><code>3e8f2aa</code></a></td><td><code>Remove unneccesary import.</code></td></tr></table>




---

archive/issue_events_305013.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T14:49:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-305013"
}
```



---

archive/issue_comments_323516.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nRight now this is implemented by patching ipython. A more permanent way would possibly be to add a post exception hook to ipython and then to use that hook, but for that ipython would need to accept such a modification first.",
    "created_at": "2016-11-24T14:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323516",
    "user": "https://github.com/sagetrac-Kosta"
}
```

<div id="comment:5" align="right">comment:5</div>

Right now this is implemented by patching ipython. A more permanent way would possibly be to add a post exception hook to ipython and then to use that hook, but for that ipython would need to accept such a modification first.



---

archive/issue_comments_323517.json:
```json
{
    "body": "Changed keywords from none to **days79**",
    "created_at": "2016-11-26T07:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323517",
    "user": "https://github.com/sagetrac-Kosta"
}
```

Changed keywords from none to **days79**



---

archive/issue_events_305014.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-26T07:33:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20calculus",
    "label_color": "0000ff",
    "label_name": "c: calculus",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-305014"
}
```



---

archive/issue_comments_323518.json:
```json
{
    "body": "Changed commit from **[`3e8f2aa`](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)** to **[`1e4d4fb`](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)**",
    "created_at": "2016-11-26T07:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323518",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3e8f2aa`](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)** to **[`1e4d4fb`](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)**



---

archive/issue_comments_323519.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee54c6f35f587dd0bec1ed1941ce1f95f19df3bf\"><code>ee54c6f</code></a></td><td><code>Use the existing ipython hooks.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c\"><code>1e4d4fb</code></a></td><td><code>Revert patch part, \"Automatic variable injection.\"</code></td></tr></table>\n",
    "created_at": "2016-11-26T07:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323519",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee54c6f35f587dd0bec1ed1941ce1f95f19df3bf"><code>ee54c6f</code></a></td><td><code>Use the existing ipython hooks.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c"><code>1e4d4fb</code></a></td><td><code>Revert patch part, "Automatic variable injection."</code></td></tr></table>




---

archive/issue_comments_323520.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nTurns out it wasn't necessary to modify ipython, since it already had the relevant hook available.",
    "created_at": "2016-11-26T07:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323520",
    "user": "https://github.com/sagetrac-Kosta"
}
```

<div id="comment:8" align="right">comment:8</div>

Turns out it wasn't necessary to modify ipython, since it already had the relevant hook available.



---

archive/issue_comments_323521.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nping?",
    "created_at": "2017-01-08T10:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323521",
    "user": "https://github.com/sagetrac-Kosta"
}
```

<div id="comment:9" align="right">comment:9</div>

ping?



---

archive/issue_comments_323522.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSorry for not getting back to you sooner on this. A few quick comments:\n\n- Indentation is 4 spaces.\n- You should have the 1-line description on the line after the `\"\"\"`.\n- Perhaps make the `Beware...` sentence in a `.. WARNING::` block?\n- It would be good to have doctests for every function and method.\n- Why are the tests in `__auto_vars` marked as `# not tested`?",
    "created_at": "2017-04-28T13:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-323522",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Sorry for not getting back to you sooner on this. A few quick comments:

- Indentation is 4 spaces.
- You should have the 1-line description on the line after the `"""`.
- Perhaps make the `Beware...` sentence in a `.. WARNING::` block?
- It would be good to have doctests for every function and method.
- Why are the tests in `__auto_vars` marked as `# not tested`?



---

archive/issue_events_305015.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2018-04-12T14:52:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-305015"
}
```



---

archive/issue_events_305016.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2018-04-12T14:52:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-305016"
}
```



---

archive/issue_events_305017.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:37:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-305017"
}
```
