# Issue 21959: Optional automatic injection of undefined variables into the global namespaces

archive/issues_021722.json:
```json
{
    "body": "The Sage Notebook interface allows automatic creation of undefined variables, which can be useful e.g. for quick calculus work.\n\nIt is listed as one of the blockers for moving completely to Jupyter in [the wiki](https://wiki.sagemath.org/IpythonNotebook)\n\nCC:  @kcrisman @robertwb @tscrim\n\nKeywords: days79,calculus\n\nBranch: [u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)\n\nCommit: [1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)\n\nAuthor: Konstantin Kliakhandler\n\nStatus: needs_work\n\nIssue created by migration from https://trac.sagemath.org/ticket/21959\n\n",
    "created_at": "2016-11-24T13:40:39Z",
    "labels": [
        "component: misc",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Optional automatic injection of undefined variables into the global namespaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21959",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```
The Sage Notebook interface allows automatic creation of undefined variables, which can be useful e.g. for quick calculus work.

It is listed as one of the blockers for moving completely to Jupyter in [the wiki](https://wiki.sagemath.org/IpythonNotebook)

CC:  @kcrisman @robertwb @tscrim

Keywords: days79,calculus

Branch: [u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)

Commit: [1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)

Author: Konstantin Kliakhandler

Status: needs_work

Issue created by migration from https://trac.sagemath.org/ticket/21959





---

archive/issue_comments_408811.json:
```json
{
    "body": "Branch: [u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)",
    "created_at": "2016-11-24T14:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408811",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Branch: [u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)



---

archive/issue_comments_408812.json:
```json
{
    "body": "Commit: [3a2318bd2f0b87bc1822a18c866edd357051e106](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)",
    "created_at": "2016-11-24T14:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408812",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Commit: [3a2318bd2f0b87bc1822a18c866edd357051e106](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)



---

archive/issue_comments_408813.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[3a2318b](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)|`Fix indentation issue.`|",
    "created_at": "2016-11-24T14:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408813",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[3a2318b](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)|`Fix indentation issue.`|



---

archive/issue_comments_408814.json:
```json
{
    "body": "<a id='comment:3'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|\n|[3e8f2aa](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)|`Remove unneccesary import.`|",
    "created_at": "2016-11-24T14:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408814",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------|
|[3e8f2aa](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)|`Remove unneccesary import.`|



---

archive/issue_comments_408815.json:
```json
{
    "body": "Changing commit from \"[3a2318bd2f0b87bc1822a18c866edd357051e106](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)\" to \"[3e8f2aab2a089974b5fe573be0adcca028634a14](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)\"",
    "created_at": "2016-11-24T14:48:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408815",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[3a2318bd2f0b87bc1822a18c866edd357051e106](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)" to "[3e8f2aab2a089974b5fe573be0adcca028634a14](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)"



---

archive/issue_comments_408816.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-24T14:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408816",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_408817.json:
```json
{
    "body": "<a id='comment:4'></a>\nNew commits:\n|                                                                                                                                          |                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[1d18f37](https://github.com/sagemath/sagetrac-mirror/commit/1d18f377b69045deb5d043915091f05b8e6e191a)|`Automatic variable injection.`|\n|[3a2318b](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)|`Fix indentation issue.`|\n|[3e8f2aa](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)|`Remove unneccesary import.`|",
    "created_at": "2016-11-24T14:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408817",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:4'></a>
New commits:
|                                                                                                                                          |                               |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[1d18f37](https://github.com/sagemath/sagetrac-mirror/commit/1d18f377b69045deb5d043915091f05b8e6e191a)|`Automatic variable injection.`|
|[3a2318b](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)|`Fix indentation issue.`|
|[3e8f2aa](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)|`Remove unneccesary import.`|



---

archive/issue_comments_408818.json:
```json
{
    "body": "<a id='comment:5'></a>\nRight now this is implemented by patching ipython. A more permanent way would possibly be to add a post exception hook to ipython and then to use that hook, but for that ipython would need to accept such a modification first.",
    "created_at": "2016-11-24T14:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408818",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:5'></a>
Right now this is implemented by patching ipython. A more permanent way would possibly be to add a post exception hook to ipython and then to use that hook, but for that ipython would need to accept such a modification first.



---

archive/issue_comments_408819.json:
```json
{
    "body": "Changing keywords from \"\" to \"days79,calculus\".",
    "created_at": "2016-11-26T07:33:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408819",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing keywords from "" to "days79,calculus".



---

archive/issue_comments_408820.json:
```json
{
    "body": "Changing commit from \"[3e8f2aab2a089974b5fe573be0adcca028634a14](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)\" to \"[1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)\"",
    "created_at": "2016-11-26T07:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408820",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "[3e8f2aab2a089974b5fe573be0adcca028634a14](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)" to "[1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)"



---

archive/issue_comments_408821.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                 |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|\n|[ee54c6f](https://github.com/sagemath/sagetrac-mirror/commit/ee54c6f35f587dd0bec1ed1941ce1f95f19df3bf)|`Use the existing ipython hooks.`|\n|[1e4d4fb](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)|`Revert patch part, \"Automatic variable injection.\"`|",
    "created_at": "2016-11-26T07:42:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408821",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                 |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------|
|[ee54c6f](https://github.com/sagemath/sagetrac-mirror/commit/ee54c6f35f587dd0bec1ed1941ce1f95f19df3bf)|`Use the existing ipython hooks.`|
|[1e4d4fb](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)|`Revert patch part, "Automatic variable injection."`|



---

archive/issue_comments_408822.json:
```json
{
    "body": "<a id='comment:8'></a>\nTurns out it wasn't necessary to modify ipython, since it already had the relevant hook available.",
    "created_at": "2016-11-26T07:47:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408822",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:8'></a>
Turns out it wasn't necessary to modify ipython, since it already had the relevant hook available.



---

archive/issue_comments_408823.json:
```json
{
    "body": "<a id='comment:9'></a>\nping?",
    "created_at": "2017-01-08T10:26:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408823",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:9'></a>
ping?



---

archive/issue_comments_408824.json:
```json
{
    "body": "<a id='comment:10'></a>\nSorry for not getting back to you sooner on this. A few quick comments:\n\n- Indentation is 4 spaces.\n- You should have the 1-line description on the line after the `\"\"\"`.\n- Perhaps make the `Beware...` sentence in a `.. WARNING::` block?\n- It would be good to have doctests for every function and method.\n- Why are the tests in `__auto_vars` marked as `# not tested`?",
    "created_at": "2017-04-28T13:18:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408824",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'></a>
Sorry for not getting back to you sooner on this. A few quick comments:

- Indentation is 4 spaces.
- You should have the 1-line description on the line after the `"""`.
- Perhaps make the `Beware...` sentence in a `.. WARNING::` block?
- It would be good to have doctests for every function and method.
- Why are the tests in `__auto_vars` marked as `# not tested`?



---

archive/issue_comments_408825.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-04-12T14:52:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21959#issuecomment-408825",
    "user": "https://github.com/jplab"
}
```

Changing status from needs_review to needs_work.
