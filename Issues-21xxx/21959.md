# Issue 21959: Optional automatic injection of undefined variables into the global namespaces

archive/issues_021722.json:
```json
{
    "assignees": [],
    "body": "The Sage Notebook interface allows automatic creation of undefined variables, which can be useful e.g. for quick calculus work.\n\nIt is listed as one of the blockers for moving completely to Jupyter in [the wiki](https://wiki.sagemath.org/IpythonNotebook)\n\n**CC:**  @kcrisman @robertwb @tscrim\n\n**Keywords:** days79, calculus\n\n**Branch:** [u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)\n\n**Commit:** [1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)\n\n**Author:** Konstantin Kliakhandler\n\nIssue created by migration from https://trac.sagemath.org/ticket/21959\n\n",
    "created_at": "2016-11-24T13:40:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20misc",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Optional automatic injection of undefined variables into the global namespaces",
    "type": "issue",
    "updated_at": "2018-04-12T14:52:34Z",
    "url": "https://github.com/sagemath/sage/issues/21959",
    "user": "https://github.com/sagetrac-Kosta"
}
```
The Sage Notebook interface allows automatic creation of undefined variables, which can be useful e.g. for quick calculus work.

It is listed as one of the blockers for moving completely to Jupyter in [the wiki](https://wiki.sagemath.org/IpythonNotebook)

**CC:**  @kcrisman @robertwb @tscrim

**Keywords:** days79, calculus

**Branch:** [u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)

**Commit:** [1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)

**Author:** Konstantin Kliakhandler

Issue created by migration from https://trac.sagemath.org/ticket/21959





---

archive/issue_events_266758.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T13:40:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-266758"
}
```



---

archive/issue_events_266759.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T13:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20misc",
    "label_color": "08517b",
    "label_name": "component: misc",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-266759"
}
```



---

archive/issue_events_266760.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T13:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/minor",
    "label_color": "ff0000",
    "label_name": "minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-266760"
}
```



---

archive/issue_events_266761.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T13:40:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-266761"
}
```



---

archive/issue_comments_326087.json:
```json
{
    "body": "**Branch:** [u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)",
    "created_at": "2016-11-24T14:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326087",
    "user": "https://github.com/sagetrac-Kosta"
}
```

**Branch:** [u/Kosta/auto_vars](https://github.com/sagemath/sagetrac-mirror/tree/u/Kosta/auto_vars)



---

archive/issue_comments_326088.json:
```json
{
    "body": "**Commit:** [3a2318bd2f0b87bc1822a18c866edd357051e106](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)",
    "created_at": "2016-11-24T14:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326088",
    "user": "https://github.com/sagetrac-git"
}
```

**Commit:** [3a2318bd2f0b87bc1822a18c866edd357051e106](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)



---

archive/issue_comments_326089.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106\">3a2318b</a></td><td><code>Fix indentation issue.</code></td></tr></table>\n",
    "created_at": "2016-11-24T14:47:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326089",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>**Comment 2:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106">3a2318b</a></td><td><code>Fix indentation issue.</code></td></tr></table>




---

archive/issue_comments_326090.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14\">3e8f2aa</a></td><td><code>Remove unneccesary import.</code></td></tr></table>\n",
    "created_at": "2016-11-24T14:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326090",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>**Comment 3:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14">3e8f2aa</a></td><td><code>Remove unneccesary import.</code></td></tr></table>




---

archive/issue_comments_326091.json:
```json
{
    "body": "**Changing commit** from \"[3a2318bd2f0b87bc1822a18c866edd357051e106](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)\" to \"[3e8f2aab2a089974b5fe573be0adcca028634a14](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)\".",
    "created_at": "2016-11-24T14:48:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326091",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3a2318bd2f0b87bc1822a18c866edd357051e106](https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106)" to "[3e8f2aab2a089974b5fe573be0adcca028634a14](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)".



---

archive/issue_events_266762.json:
```json
{
    "actor": "https://github.com/sagetrac-Kosta",
    "created_at": "2016-11-24T14:49:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-266762"
}
```



---

archive/issue_comments_326092.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d18f377b69045deb5d043915091f05b8e6e191a\">1d18f37</a></td><td><code>Automatic variable injection.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106\">3a2318b</a></td><td><code>Fix indentation issue.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14\">3e8f2aa</a></td><td><code>Remove unneccesary import.</code></td></tr></table>\n",
    "created_at": "2016-11-24T14:49:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326092",
    "user": "https://github.com/sagetrac-Kosta"
}
```

<a id='comment:4'>**Comment 4:**</a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d18f377b69045deb5d043915091f05b8e6e191a">1d18f37</a></td><td><code>Automatic variable injection.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a2318bd2f0b87bc1822a18c866edd357051e106">3a2318b</a></td><td><code>Fix indentation issue.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14">3e8f2aa</a></td><td><code>Remove unneccesary import.</code></td></tr></table>




---

archive/issue_comments_326093.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nRight now this is implemented by patching ipython. A more permanent way would possibly be to add a post exception hook to ipython and then to use that hook, but for that ipython would need to accept such a modification first.",
    "created_at": "2016-11-24T14:52:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326093",
    "user": "https://github.com/sagetrac-Kosta"
}
```

<a id='comment:5'>**Comment 5:**</a>
Right now this is implemented by patching ipython. A more permanent way would possibly be to add a post exception hook to ipython and then to use that hook, but for that ipython would need to accept such a modification first.



---

archive/issue_comments_326094.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"days79, calculus\".",
    "created_at": "2016-11-26T07:33:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326094",
    "user": "https://github.com/sagetrac-Kosta"
}
```

**Changing keywords** from "" to "days79, calculus".



---

archive/issue_comments_326095.json:
```json
{
    "body": "**Changing commit** from \"[3e8f2aab2a089974b5fe573be0adcca028634a14](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)\" to \"[1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)\".",
    "created_at": "2016-11-26T07:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326095",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3e8f2aab2a089974b5fe573be0adcca028634a14](https://github.com/sagemath/sagetrac-mirror/commit/3e8f2aab2a089974b5fe573be0adcca028634a14)" to "[1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c](https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c)".



---

archive/issue_comments_326096.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee54c6f35f587dd0bec1ed1941ce1f95f19df3bf\">ee54c6f</a></td><td><code>Use the existing ipython hooks.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c\">1e4d4fb</a></td><td><code>Revert patch part, \"Automatic variable injection.\"</code></td></tr></table>\n",
    "created_at": "2016-11-26T07:42:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326096",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:7'>**Comment 7:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee54c6f35f587dd0bec1ed1941ce1f95f19df3bf">ee54c6f</a></td><td><code>Use the existing ipython hooks.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e4d4fb2478d9b4a6dc2b93b4878c00a612eac6c">1e4d4fb</a></td><td><code>Revert patch part, "Automatic variable injection."</code></td></tr></table>




---

archive/issue_comments_326097.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nTurns out it wasn't necessary to modify ipython, since it already had the relevant hook available.",
    "created_at": "2016-11-26T07:47:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326097",
    "user": "https://github.com/sagetrac-Kosta"
}
```

<a id='comment:8'>**Comment 8:**</a>
Turns out it wasn't necessary to modify ipython, since it already had the relevant hook available.



---

archive/issue_comments_326098.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nping?",
    "created_at": "2017-01-08T10:26:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326098",
    "user": "https://github.com/sagetrac-Kosta"
}
```

<a id='comment:9'>**Comment 9:**</a>
ping?



---

archive/issue_comments_326099.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\nSorry for not getting back to you sooner on this. A few quick comments:\n\n- Indentation is 4 spaces.\n- You should have the 1-line description on the line after the `\"\"\"`.\n- Perhaps make the `Beware...` sentence in a `.. WARNING::` block?\n- It would be good to have doctests for every function and method.\n- Why are the tests in `__auto_vars` marked as `# not tested`?",
    "created_at": "2017-04-28T13:18:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21959#issuecomment-326099",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:10'>**Comment 10:**</a>
Sorry for not getting back to you sooner on this. A few quick comments:

- Indentation is 4 spaces.
- You should have the 1-line description on the line after the `"""`.
- Perhaps make the `Beware...` sentence in a `.. WARNING::` block?
- It would be good to have doctests for every function and method.
- Why are the tests in `__auto_vars` marked as `# not tested`?



---

archive/issue_events_266763.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2018-04-12T14:52:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-266763"
}
```



---

archive/issue_events_266764.json:
```json
{
    "actor": "https://github.com/jplab",
    "created_at": "2018-04-12T14:52:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21959",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21959#event-266764"
}
```
