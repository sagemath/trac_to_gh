# Issue 21393: Partial bindings for Arb polynomials with complex coefficients

archive/issues_021156.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\n(with plenty of opportunities for optimization, but already much better than the generic code)\n\nCC:  @cheuberg @fredrik-johansson @dkrenn\n\nComponent: **commutative algebra**\n\nAuthor: **Marc Mezzarobba**\n\nBranch/Commit: **[`70599cc`](https://github.com/sagemath/sagetrac-mirror/commit/70599cc29d18444b215254c1c540a5d86b3b2e2e)**\n\nReviewer: **Travis Scrimshaw**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21393_\n\n",
    "closed_at": "2016-12-05T00:44:29Z",
    "created_at": "2016-09-01T16:00:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Partial bindings for Arb polynomials with complex coefficients",
    "type": "issue",
    "updated_at": "2016-12-05T00:44:29Z",
    "url": "https://github.com/sagemath/sage/issues/21393",
    "user": "https://github.com/mezzarobba"
}
```
<div id="comment:0"></div>

(with plenty of opportunities for optimization, but already much better than the generic code)

CC:  @cheuberg @fredrik-johansson @dkrenn

Component: **commutative algebra**

Author: **Marc Mezzarobba**

Branch/Commit: **[`70599cc`](https://github.com/sagemath/sagetrac-mirror/commit/70599cc29d18444b215254c1c540a5d86b3b2e2e)**

Reviewer: **Travis Scrimshaw**

_Issue created by migration from https://trac.sagemath.org/ticket/21393_





---

archive/issue_events_297879.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-01T16:00:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297879"
}
```



---

archive/issue_events_297880.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-01T16:00:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20commutative%20algebra",
    "label_color": "0000ff",
    "label_name": "c: commutative algebra",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297880"
}
```



---

archive/issue_events_297881.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-01T16:00:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297881"
}
```



---

archive/issue_events_297882.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-01T16:00:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297882"
}
```



---

archive/issue_comments_313059.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb76ab16aa99926eb7ec5194c1ffc68696cd711b\"><code>bb76ab1</code></a></td><td><code>acb_poly: basic infrastructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d6e327de437f96c911dd5ccffbfda92ffea6564c\"><code>d6e327d</code></a></td><td><code>acb_poly: data structure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a92c564ed05af413cd354bc99114030c185345de\"><code>a92c564</code></a></td><td><code>acb_poly: basic arithmetic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5954d5641aa421a204b16d0ab9d4f50e2b162b9c\"><code>5954d56</code></a></td><td><code>acb_poly: initialization from other polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e928fb02120ac7b554d45ebd7ff1ec8e430fdcb2\"><code>e928fb0</code></a></td><td><code>acb_poly: basic syntactic methods (truncations, shifts...)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/533e9d7d67ef245adee1b09e4d56a40f24ec096e\"><code>533e9d7</code></a></td><td><code>acb_poly: evaluation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee4d8d8e2323e694936bfe98a1aa63bb2d381a97\"><code>ee4d8d8</code></a></td><td><code>Polynomial: add stubs for truncated operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d5ea3e9bd4b610bd6185aea20f38739d9557ece4\"><code>d5ea3e9</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr></table>\n",
    "created_at": "2016-09-04T08:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313059",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb76ab16aa99926eb7ec5194c1ffc68696cd711b"><code>bb76ab1</code></a></td><td><code>acb_poly: basic infrastructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d6e327de437f96c911dd5ccffbfda92ffea6564c"><code>d6e327d</code></a></td><td><code>acb_poly: data structure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a92c564ed05af413cd354bc99114030c185345de"><code>a92c564</code></a></td><td><code>acb_poly: basic arithmetic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5954d5641aa421a204b16d0ab9d4f50e2b162b9c"><code>5954d56</code></a></td><td><code>acb_poly: initialization from other polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e928fb02120ac7b554d45ebd7ff1ec8e430fdcb2"><code>e928fb0</code></a></td><td><code>acb_poly: basic syntactic methods (truncations, shifts...)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/533e9d7d67ef245adee1b09e4d56a40f24ec096e"><code>533e9d7</code></a></td><td><code>acb_poly: evaluation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee4d8d8e2323e694936bfe98a1aa63bb2d381a97"><code>ee4d8d8</code></a></td><td><code>Polynomial: add stubs for truncated operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d5ea3e9bd4b610bd6185aea20f38739d9557ece4"><code>d5ea3e9</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr></table>




---

archive/issue_comments_313060.json:
```json
{
    "body": "Changed commit from **[`1e75127`](https://github.com/sagemath/sagetrac-mirror/commit/1e75127e631389159325cf48679b5764611eab99)** to **[`d5ea3e9`](https://github.com/sagemath/sagetrac-mirror/commit/d5ea3e9bd4b610bd6185aea20f38739d9557ece4)**",
    "created_at": "2016-09-04T08:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313060",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1e75127`](https://github.com/sagemath/sagetrac-mirror/commit/1e75127e631389159325cf48679b5764611eab99)** to **[`d5ea3e9`](https://github.com/sagemath/sagetrac-mirror/commit/d5ea3e9bd4b610bd6185aea20f38739d9557ece4)**



---

archive/issue_comments_313061.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-WIP\n+(with plenty of opportunities for optimization, but already much better than the generic code)\n``````\n",
    "created_at": "2016-09-04T09:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313061",
    "user": "https://github.com/mezzarobba"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-WIP
+(with plenty of opportunities for optimization, but already much better than the generic code)
``````




---

archive/issue_comments_313062.json:
```json
{
    "body": "Author: **Marc Mezzarobba**",
    "created_at": "2016-09-04T09:05:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313062",
    "user": "https://github.com/mezzarobba"
}
```

Author: **Marc Mezzarobba**



---

archive/issue_events_297883.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-04T09:05:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297883"
}
```



---

archive/issue_comments_313063.json:
```json
{
    "body": "Changed commit from **[`d5ea3e9`](https://github.com/sagemath/sagetrac-mirror/commit/d5ea3e9bd4b610bd6185aea20f38739d9557ece4)** to **[`37fb10c`](https://github.com/sagemath/sagetrac-mirror/commit/37fb10c0c187e505fed986b73c9e8c47023a49ac)**",
    "created_at": "2016-09-05T12:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313063",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d5ea3e9`](https://github.com/sagemath/sagetrac-mirror/commit/d5ea3e9bd4b610bd6185aea20f38739d9557ece4)** to **[`37fb10c`](https://github.com/sagemath/sagetrac-mirror/commit/37fb10c0c187e505fed986b73c9e8c47023a49ac)**



---

archive/issue_comments_313064.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37fb10c0c187e505fed986b73c9e8c47023a49ac\"><code>37fb10c</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr></table>\n",
    "created_at": "2016-09-05T12:17:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313064",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37fb10c0c187e505fed986b73c9e8c47023a49ac"><code>37fb10c</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr></table>




---

archive/issue_events_297884.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-05T14:04:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "title_is": "Partial bindings for Arb polynomials with complex coefficients",
    "title_was": "Partial bindings for Ab polynomials with complex coefficients",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297884"
}
```



---

archive/issue_comments_313065.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nWhat is the point of all these methods raising `NotImplementedError`?",
    "created_at": "2016-09-13T21:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313065",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

What is the point of all these methods raising `NotImplementedError`?



---

archive/issue_comments_313066.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nYou could check that `power_trunc` does work where `_power_trunc` has some overflow.",
    "created_at": "2016-09-13T21:56:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313066",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

You could check that `power_trunc` does work where `_power_trunc` has some overflow.



---

archive/issue_events_297885.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-09-13T21:59:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297885"
}
```



---

archive/issue_events_297886.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-09-13T21:59:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297886"
}
```



---

archive/issue_comments_313067.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHi Vincent,\n\nThanks for your comments.\n\nReplying to [@videlec](#comment%3A5):\n> What is the point of all these methods raising `NotImplementedError`?\n\nDocumentation, mostly: I believe that every time a method can be implemented by several implementation variants of objects of some kind, there should be either a generic implementation or at least a stub raising `NotImplementedError` to specify the method name, arguments and semantics.\n\nReplying to [@videlec](#comment%3A6):\n> You could check that `power_trunc` does work where `_power_trunc` has some overflow.\n\nGuessing you're thinking of `pol.power_trunc(very_large, small)`: no, it doesn't, because `polynomial_element.Polynomial` calls `_cmp_` on the coefficients calls `_cmp_` to check for equality, and that doesn't work with balls. There's a general problem here that goes well beyond the scope of this ticket. I could perhaps redefine comparison methods for polynomials with ball coefficients as a workaround, but I'd prefer to keep that for a separate ticket if you don't mind.",
    "created_at": "2016-09-14T07:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313067",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:8" align="right">comment:8</div>

Hi Vincent,

Thanks for your comments.

Replying to [@videlec](#comment%3A5):
> What is the point of all these methods raising `NotImplementedError`?

Documentation, mostly: I believe that every time a method can be implemented by several implementation variants of objects of some kind, there should be either a generic implementation or at least a stub raising `NotImplementedError` to specify the method name, arguments and semantics.

Replying to [@videlec](#comment%3A6):
> You could check that `power_trunc` does work where `_power_trunc` has some overflow.

Guessing you're thinking of `pol.power_trunc(very_large, small)`: no, it doesn't, because `polynomial_element.Polynomial` calls `_cmp_` on the coefficients calls `_cmp_` to check for equality, and that doesn't work with balls. There's a general problem here that goes well beyond the scope of this ticket. I could perhaps redefine comparison methods for polynomials with ball coefficients as a workaround, but I'd prefer to keep that for a separate ticket if you don't mind.



---

archive/issue_events_297887.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-14T07:53:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297887"
}
```



---

archive/issue_events_297888.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-09-14T07:53:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297888"
}
```



---

archive/issue_comments_313068.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nHi Marc,\n\nReplying to [@mezzarobba](#comment%3A8):\n> Hi Vincent,\n> \n> Thanks for your comments.\n> \n> Replying to [@videlec](#comment%3A5):\n> > What is the point of all these methods raising `NotImplementedError`?\n> \n> \n> Documentation, mostly: I believe that every time a method can be implemented by several implementation variants of objects of some kind, there should be either a generic implementation or at least a stub raising `NotImplementedError` to specify the method name, arguments and semantics.\n\nThe problem with this approach is that you let these methods appear in the tab completion. With a well defined documentation. But these methods just not work. Not very user friendly.\n\n> Replying to [@videlec](#comment%3A6):\n> > You could check that `power_trunc` does work where `_power_trunc` has some overflow.\n> \n> \n> Guessing you're thinking of `pol.power_trunc(very_large, small)`: no, it doesn't, because `polynomial_element.Polynomial` calls `_cmp_` on the coefficients calls `_cmp_` to check for equality, and that doesn't work with balls. There's a general problem here that goes well beyond the scope of this ticket. I could perhaps redefine comparison methods for polynomials with ball coefficients as a workaround, but I'd prefer to keep that for a separate ticket if you don't mind.\n\nWhere in `power_trunc` you need to perform a call to `_cmp_`!? If some generic methods are broken, it should be mentioned somewhere. Or even overriden with `NotImplementedError`.",
    "created_at": "2016-09-14T07:59:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313068",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">comment:9</div>

Hi Marc,

Replying to [@mezzarobba](#comment%3A8):
> Hi Vincent,
> 
> Thanks for your comments.
> 
> Replying to [@videlec](#comment%3A5):
> > What is the point of all these methods raising `NotImplementedError`?
> 
> 
> Documentation, mostly: I believe that every time a method can be implemented by several implementation variants of objects of some kind, there should be either a generic implementation or at least a stub raising `NotImplementedError` to specify the method name, arguments and semantics.

The problem with this approach is that you let these methods appear in the tab completion. With a well defined documentation. But these methods just not work. Not very user friendly.

> Replying to [@videlec](#comment%3A6):
> > You could check that `power_trunc` does work where `_power_trunc` has some overflow.
> 
> 
> Guessing you're thinking of `pol.power_trunc(very_large, small)`: no, it doesn't, because `polynomial_element.Polynomial` calls `_cmp_` on the coefficients calls `_cmp_` to check for equality, and that doesn't work with balls. There's a general problem here that goes well beyond the scope of this ticket. I could perhaps redefine comparison methods for polynomials with ball coefficients as a workaround, but I'd prefer to keep that for a separate ticket if you don't mind.

Where in `power_trunc` you need to perform a call to `_cmp_`!? If some generic methods are broken, it should be mentioned somewhere. Or even overriden with `NotImplementedError`.



---

archive/issue_comments_313069.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/947a0325630de32d0baa35559b63bce240d5f186\"><code>947a032</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr></table>\n",
    "created_at": "2016-09-14T08:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313069",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/947a0325630de32d0baa35559b63bce240d5f186"><code>947a032</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr></table>




---

archive/issue_comments_313070.json:
```json
{
    "body": "Changed commit from **[`37fb10c`](https://github.com/sagemath/sagetrac-mirror/commit/37fb10c0c187e505fed986b73c9e8c47023a49ac)** to **[`947a032`](https://github.com/sagemath/sagetrac-mirror/commit/947a0325630de32d0baa35559b63bce240d5f186)**",
    "created_at": "2016-09-14T08:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313070",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`37fb10c`](https://github.com/sagemath/sagetrac-mirror/commit/37fb10c0c187e505fed986b73c9e8c47023a49ac)** to **[`947a032`](https://github.com/sagemath/sagetrac-mirror/commit/947a0325630de32d0baa35559b63bce240d5f186)**



---

archive/issue_comments_313071.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@videlec](#comment%3A9):\n> > Documentation, mostly: I believe that every time a method can be implemented by several implementation variants of objects of some kind, there should be either a generic implementation or at least a stub raising `NotImplementedError` to specify the method name, arguments and semantics.\n> \n> \n> The problem with this approach is that you let these methods appear in the tab completion. With a well defined documentation. But these methods just not work. Not very user friendly.\n\nI disagree: on the contrary, methods like `compose_trunc` are methods *of polynomials*, not of polynomials over whatever specific ring. They should ideally be implemented by all subclasses\u2014they just aren't yet. It is much, much better IMO to have a method that doesn't work in all cases but has a docstring specifying what it is supposed to do *whenever* it works (allowing in particular to write generic code) than to have methods that make sense in all cases come and go (or exist but be inconsistent with each other) depending, e.g., what ring you are working on!\n\nBesides, most of the stubs I added are for underscore methods, which the casual user isn't supposed to see in any case. That being said, I tried to improve the docstring of the public one to address your concern. What do you think?\n\n> Where in `power_trunc` you need to perform a call to `_cmp_`!? If some generic methods are broken, it should be mentioned somewhere. Or even overriden with `NotImplementedError`.\n\nWell, `generic_power_trunc` (which you wrote `:-)`) compares polynomials using `==`, which doesn't work over all coefficient rings, due to the way polynomial comparison is implemented\u2014and to the general mess with comparisons. That's an issue that affects lots of operations with objects with interval or ball coefficients, I don't think it makes much sense to try to document it every time...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/947a0325630de32d0baa35559b63bce240d5f186\"><code>947a032</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr></table>\n",
    "created_at": "2016-09-14T08:52:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313071",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@videlec](#comment%3A9):
> > Documentation, mostly: I believe that every time a method can be implemented by several implementation variants of objects of some kind, there should be either a generic implementation or at least a stub raising `NotImplementedError` to specify the method name, arguments and semantics.
> 
> 
> The problem with this approach is that you let these methods appear in the tab completion. With a well defined documentation. But these methods just not work. Not very user friendly.

I disagree: on the contrary, methods like `compose_trunc` are methods *of polynomials*, not of polynomials over whatever specific ring. They should ideally be implemented by all subclasses—they just aren't yet. It is much, much better IMO to have a method that doesn't work in all cases but has a docstring specifying what it is supposed to do *whenever* it works (allowing in particular to write generic code) than to have methods that make sense in all cases come and go (or exist but be inconsistent with each other) depending, e.g., what ring you are working on!

Besides, most of the stubs I added are for underscore methods, which the casual user isn't supposed to see in any case. That being said, I tried to improve the docstring of the public one to address your concern. What do you think?

> Where in `power_trunc` you need to perform a call to `_cmp_`!? If some generic methods are broken, it should be mentioned somewhere. Or even overriden with `NotImplementedError`.

Well, `generic_power_trunc` (which you wrote `:-)`) compares polynomials using `==`, which doesn't work over all coefficient rings, due to the way polynomial comparison is implemented—and to the general mess with comparisons. That's an issue that affects lots of operations with objects with interval or ball coefficients, I don't think it makes much sense to try to document it every time...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/947a0325630de32d0baa35559b63bce240d5f186"><code>947a032</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr></table>




---

archive/issue_comments_313072.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@mezzarobba](#comment%3A11):\n> Replying to [@videlec](#comment%3A9):\n> > > Documentation, mostly: I believe that every time a method can be implemented by several implementation variants of objects of some kind, there should be either a generic implementation or at least a stub raising `NotImplementedError` to specify the method name, arguments and semantics.\n> > \n> > \n> > The problem with this approach is that you let these methods appear in the tab completion. With a well defined documentation. But these methods just not work. Not very user friendly.\n> \n> \n> I disagree: on the contrary, methods like `compose_trunc` are methods *of polynomials*, not of polynomials over whatever specific ring. They should ideally be implemented by all subclasses\u2014they just aren't yet. It is much, much better IMO to have a method that doesn't work in all cases but has a docstring specifying what it is supposed to do *whenever* it works (allowing in particular to write generic code) than to have methods that make sense in all cases come and go (or exist but be inconsistent with each other) depending, e.g., what ring you are working on!\n> \n> Besides, most of the stubs I added are for underscore methods, which the casual user isn't supposed to see in any case. That being said, I tried to improve the docstring of the public one to address your concern. What do you think?\n\nAt the end, the difference is\n\n```\nsage: my_object.my_method()  # current version\nAttributeError\nsage: my_object.my_method()  # your version\nNotImplementedError\n```\nI do not see the real plus of what you did. The only reasonable way is to actually implement the generic version.\n\nThat being said, it is good that the base class defines the API for all the subclasses. But Python is not very suited for that purpose. I do not like methods that pretend to exist\n\n```\ndef is_riemann_conjecture_true(self):\n   r\"\"\"\n   Answers whether the Riemann conjecture is valid\n   \"\"\"\n   raise NotImplementedError\n```\n\n> > Where in `power_trunc` you need to perform a call to `_cmp_`!? If some generic methods are broken, it should be mentioned somewhere. Or even overriden with `NotImplementedError`.\n> \n> \n> Well, `generic_power_trunc` (which you wrote `:-)`) compares polynomials using `==`, which doesn't work over all coefficient rings, due to the way polynomial comparison is implemented\u2014and to the general mess with comparisons. That's an issue that affects lots of operations with objects with interval or ball coefficients, I don't think it makes much sense to try to document it every time...\n\nThere is only one comparison of polynomials at\n\n```\n# check for idempotence, and store the result otherwise\ncdef Polynomial a = p.truncate(prec)\ncdef Polynomial aa = a._mul_trunc_(a, prec)\nif aa == a:\n    return a\n```\nIf the answer is `False` for the comparison it does not matter at all.",
    "created_at": "2016-09-14T09:05:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313072",
    "user": "https://github.com/videlec"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@mezzarobba](#comment%3A11):
> Replying to [@videlec](#comment%3A9):
> > > Documentation, mostly: I believe that every time a method can be implemented by several implementation variants of objects of some kind, there should be either a generic implementation or at least a stub raising `NotImplementedError` to specify the method name, arguments and semantics.
> > 
> > 
> > The problem with this approach is that you let these methods appear in the tab completion. With a well defined documentation. But these methods just not work. Not very user friendly.
> 
> 
> I disagree: on the contrary, methods like `compose_trunc` are methods *of polynomials*, not of polynomials over whatever specific ring. They should ideally be implemented by all subclasses—they just aren't yet. It is much, much better IMO to have a method that doesn't work in all cases but has a docstring specifying what it is supposed to do *whenever* it works (allowing in particular to write generic code) than to have methods that make sense in all cases come and go (or exist but be inconsistent with each other) depending, e.g., what ring you are working on!
> 
> Besides, most of the stubs I added are for underscore methods, which the casual user isn't supposed to see in any case. That being said, I tried to improve the docstring of the public one to address your concern. What do you think?

At the end, the difference is

```
sage: my_object.my_method()  # current version
AttributeError
sage: my_object.my_method()  # your version
NotImplementedError
```
I do not see the real plus of what you did. The only reasonable way is to actually implement the generic version.

That being said, it is good that the base class defines the API for all the subclasses. But Python is not very suited for that purpose. I do not like methods that pretend to exist

```
def is_riemann_conjecture_true(self):
   r"""
   Answers whether the Riemann conjecture is valid
   """
   raise NotImplementedError
```

> > Where in `power_trunc` you need to perform a call to `_cmp_`!? If some generic methods are broken, it should be mentioned somewhere. Or even overriden with `NotImplementedError`.
> 
> 
> Well, `generic_power_trunc` (which you wrote `:-)`) compares polynomials using `==`, which doesn't work over all coefficient rings, due to the way polynomial comparison is implemented—and to the general mess with comparisons. That's an issue that affects lots of operations with objects with interval or ball coefficients, I don't think it makes much sense to try to document it every time...

There is only one comparison of polynomials at

```
# check for idempotence, and store the result otherwise
cdef Polynomial a = p.truncate(prec)
cdef Polynomial aa = a._mul_trunc_(a, prec)
if aa == a:
    return a
```
If the answer is `False` for the comparison it does not matter at all.



---

archive/issue_comments_313073.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@videlec](#comment%3A12):\n> At the end, the difference is\n> \n> ```\n> sage: my_object.my_method()  # current version\n> AttributeError\n> sage: my_object.my_method()  # your version\n> NotImplementedError\n> ```\n> I do not see the real plus of what you did.\n\nThe main point is to define the API\u2014both for the user and for implementers of subclasses, as you say yourself. Besides, to me, the first exception means \u201cthere's no such method\u201d, period, while the second one means \u201cthe method makes sense, but doesn't work yet in the case you asked for\u201d. It's no different from having a single generic implementation with several cases, only some of which are implemented.\n\n> That being said, it is good that the base class defines the API for all the subclasses. But Python is not very suited for that purpose.\n\nI agree with that `:-(`. And I'm not arguing that one should create such stub methods for things that are not implemented anywhere, only that, when one does implement something in one subclass with the intention that it could be generalized to other subclasses, it is a good idea to add a stub method in the common parent class where it makes sense (assuming there is one).",
    "created_at": "2016-09-14T11:03:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313073",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@videlec](#comment%3A12):
> At the end, the difference is
> 
> ```
> sage: my_object.my_method()  # current version
> AttributeError
> sage: my_object.my_method()  # your version
> NotImplementedError
> ```
> I do not see the real plus of what you did.

The main point is to define the API—both for the user and for implementers of subclasses, as you say yourself. Besides, to me, the first exception means “there's no such method”, period, while the second one means “the method makes sense, but doesn't work yet in the case you asked for”. It's no different from having a single generic implementation with several cases, only some of which are implemented.

> That being said, it is good that the base class defines the API for all the subclasses. But Python is not very suited for that purpose.

I agree with that `:-(`. And I'm not arguing that one should create such stub methods for things that are not implemented anywhere, only that, when one does implement something in one subclass with the intention that it could be generalized to other subclasses, it is a good idea to add a stub method in the common parent class where it makes sense (assuming there is one).



---

archive/issue_comments_313074.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nContinuing my reply to [vdelecroix](#comment%3A12):\n> There is only one comparison of polynomials at\n> \n> ```\n> # check for idempotence, and store the result otherwise\n> cdef Polynomial a = p.truncate(prec)\n> cdef Polynomial aa = a._mul_trunc_(a, prec)\n> if aa == a:\n>     return a\n> ```\n> If the answer is `False` for the comparison it does not matter at all.\n\nSure, but that's not the problem. What happens is the following.\n\n```\n/home/marc/co/sage/src/sage/structure/element.pyx in sage.structure.element.Element._richcmp_ (build/cythonized/sage/structure/element.c:9542)()\n    962         cdef int c\n    963         try:\n--> 964             c = left._cmp_(right)\n    965         except NotImplementedError:\n    966             # Check equality by id(), knowing that left is not right\n\n/home/marc/co/sage/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial._cmp_ (build/cythonized/sage/rings/polynomial/polynomial_element.c:10924)()\n    948         cdef int c\n    949         for i in reversed(range(d1+1)):\n--> 950             c = cmp(self[i], other[i])\n    951             if c: return c\n    952         return 0\n\n/home/marc/co/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__cmp__ (build/cythonized/sage/structure/element.c:9084)()\n    871             if (<Element>left)._richcmp_(right, Py_EQ):\n    872                 return 0\n--> 873             if (<Element>left)._richcmp_(right, Py_LT):\n    874                 return -1\n    875             if (<Element>left)._richcmp_(right, Py_GT):\n\n/home/marc/co/sage/src/sage/rings/complex_arb.pyx in sage.rings.complex_arb.ComplexBall._richcmp_ (build/cythonized/sage/rings/complex_arb.cpp:13232)()\n   1567 \n   1568         elif op == Py_GT or op == Py_GE or op == Py_LT or op == Py_LE:\n-> 1569             raise TypeError(\"No order is defined for ComplexBalls.\")\n   1570 \n   1571     def identical(self, ComplexBall other):\n\nTypeError: No order is defined for ComplexBalls.\n```\n\nI'd say the main issue is that `Polynomial` implements `_cmp_()` rather than `_eq_()`, and does so by calling `cmp()` on the coefficients, even though the coefficient ring may not be totally ordered. But I don't think that's easy to fix, and in any case that's out of scope for this ticket.",
    "created_at": "2016-09-14T12:29:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313074",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:14" align="right">comment:14</div>

Continuing my reply to [vdelecroix](#comment%3A12):
> There is only one comparison of polynomials at
> 
> ```
> # check for idempotence, and store the result otherwise
> cdef Polynomial a = p.truncate(prec)
> cdef Polynomial aa = a._mul_trunc_(a, prec)
> if aa == a:
>     return a
> ```
> If the answer is `False` for the comparison it does not matter at all.

Sure, but that's not the problem. What happens is the following.

```
/home/marc/co/sage/src/sage/structure/element.pyx in sage.structure.element.Element._richcmp_ (build/cythonized/sage/structure/element.c:9542)()
    962         cdef int c
    963         try:
--> 964             c = left._cmp_(right)
    965         except NotImplementedError:
    966             # Check equality by id(), knowing that left is not right

/home/marc/co/sage/src/sage/rings/polynomial/polynomial_element.pyx in sage.rings.polynomial.polynomial_element.Polynomial._cmp_ (build/cythonized/sage/rings/polynomial/polynomial_element.c:10924)()
    948         cdef int c
    949         for i in reversed(range(d1+1)):
--> 950             c = cmp(self[i], other[i])
    951             if c: return c
    952         return 0

/home/marc/co/sage/src/sage/structure/element.pyx in sage.structure.element.Element.__cmp__ (build/cythonized/sage/structure/element.c:9084)()
    871             if (<Element>left)._richcmp_(right, Py_EQ):
    872                 return 0
--> 873             if (<Element>left)._richcmp_(right, Py_LT):
    874                 return -1
    875             if (<Element>left)._richcmp_(right, Py_GT):

/home/marc/co/sage/src/sage/rings/complex_arb.pyx in sage.rings.complex_arb.ComplexBall._richcmp_ (build/cythonized/sage/rings/complex_arb.cpp:13232)()
   1567 
   1568         elif op == Py_GT or op == Py_GE or op == Py_LT or op == Py_LE:
-> 1569             raise TypeError("No order is defined for ComplexBalls.")
   1570 
   1571     def identical(self, ComplexBall other):

TypeError: No order is defined for ComplexBalls.
```

I'd say the main issue is that `Polynomial` implements `_cmp_()` rather than `_eq_()`, and does so by calling `cmp()` on the coefficients, even though the coefficient ring may not be totally ordered. But I don't think that's easy to fix, and in any case that's out of scope for this ticket.



---

archive/issue_comments_313075.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSome quick comments. Instead of just returning a `NotImplementedError`, you should mark them with the `@abstract_method` decorator. That way `TestSuite(foo).run()` will fail saying not all methods are implemented. The doctests would then give a quick example of the working implementation. It at least is somewhat of a way to help get Python to have useful ABCs defining the API.",
    "created_at": "2016-09-14T15:17:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313075",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Some quick comments. Instead of just returning a `NotImplementedError`, you should mark them with the `@abstract_method` decorator. That way `TestSuite(foo).run()` will fail saying not all methods are implemented. The doctests would then give a quick example of the working implementation. It at least is somewhat of a way to help get Python to have useful ABCs defining the API.



---

archive/issue_comments_313076.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nReplying to [@tscrim](#comment%3A15):\n> Some quick comments. Instead of just returning a `NotImplementedError`, you should mark them with the `@abstract_method` decorator. That way `TestSuite(foo).run()` will fail saying not all methods are implemented. The doctests would then give a quick example of the working implementation. It at least is somewhat of a way to help get Python to have useful ABCs defining the API.\n\nI'm not sure I understand: the documentation for `@abstract_method` says that (i) it is for methods that should be implemented by *all* concrete derived classes (ii) it prevents from using `obj.method?` to access the documentation, while what I think I want is a method (i) that may be implemented by some derived classes only, and (ii) whose docstring can be accessed in the most standard possible way.",
    "created_at": "2016-09-14T15:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313076",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:16" align="right">comment:16</div>

Replying to [@tscrim](#comment%3A15):
> Some quick comments. Instead of just returning a `NotImplementedError`, you should mark them with the `@abstract_method` decorator. That way `TestSuite(foo).run()` will fail saying not all methods are implemented. The doctests would then give a quick example of the working implementation. It at least is somewhat of a way to help get Python to have useful ABCs defining the API.

I'm not sure I understand: the documentation for `@abstract_method` says that (i) it is for methods that should be implemented by *all* concrete derived classes (ii) it prevents from using `obj.method?` to access the documentation, while what I think I want is a method (i) that may be implemented by some derived classes only, and (ii) whose docstring can be accessed in the most standard possible way.



---

archive/issue_comments_313077.json:
```json
{
    "body": "Changed commit from **[`947a032`](https://github.com/sagemath/sagetrac-mirror/commit/947a0325630de32d0baa35559b63bce240d5f186)** to **[`14f50c3`](https://github.com/sagemath/sagetrac-mirror/commit/14f50c32660ddf1e0daf8df444422d281e172eed)**",
    "created_at": "2016-10-11T15:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313077",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`947a032`](https://github.com/sagemath/sagetrac-mirror/commit/947a0325630de32d0baa35559b63bce240d5f186)** to **[`14f50c3`](https://github.com/sagemath/sagetrac-mirror/commit/14f50c32660ddf1e0daf8df444422d281e172eed)**



---

archive/issue_comments_313078.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86292df35f03f7d4237fe17f9ce77fdf619285fe\"><code>86292df</code></a></td><td><code>acb_poly: basic infrastructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/952f4b26b8699658d57156a7da7c679880d0c8c3\"><code>952f4b2</code></a></td><td><code>acb_poly: data structure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dbf3fcda9251364545754b733a85b43867dd5bae\"><code>dbf3fcd</code></a></td><td><code>acb_poly: basic arithmetic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb0b4ff0c4dffe630e46dcb589ce21fdec6102e9\"><code>eb0b4ff</code></a></td><td><code>acb_poly: initialization from other polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ad6cfb97cec5cb539e943e9e24725083b78b3df3\"><code>ad6cfb9</code></a></td><td><code>acb_poly: basic syntactic methods (truncations, shifts...)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f2256b5bbfb1fe8731275c2e4d8ed3eacee0c5e0\"><code>f2256b5</code></a></td><td><code>acb_poly: evaluation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c936c8a4180ad4244bd77467b44a469833905a77\"><code>c936c8a</code></a></td><td><code>Polynomial: add stubs for truncated operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4761e910003538796704aea6f0065843970306da\"><code>4761e91</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/14f50c32660ddf1e0daf8df444422d281e172eed\"><code>14f50c3</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr></table>\n",
    "created_at": "2016-10-11T15:06:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313078",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86292df35f03f7d4237fe17f9ce77fdf619285fe"><code>86292df</code></a></td><td><code>acb_poly: basic infrastructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/952f4b26b8699658d57156a7da7c679880d0c8c3"><code>952f4b2</code></a></td><td><code>acb_poly: data structure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dbf3fcda9251364545754b733a85b43867dd5bae"><code>dbf3fcd</code></a></td><td><code>acb_poly: basic arithmetic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb0b4ff0c4dffe630e46dcb589ce21fdec6102e9"><code>eb0b4ff</code></a></td><td><code>acb_poly: initialization from other polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ad6cfb97cec5cb539e943e9e24725083b78b3df3"><code>ad6cfb9</code></a></td><td><code>acb_poly: basic syntactic methods (truncations, shifts...)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f2256b5bbfb1fe8731275c2e4d8ed3eacee0c5e0"><code>f2256b5</code></a></td><td><code>acb_poly: evaluation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c936c8a4180ad4244bd77467b44a469833905a77"><code>c936c8a</code></a></td><td><code>Polynomial: add stubs for truncated operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4761e910003538796704aea6f0065843970306da"><code>4761e91</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/14f50c32660ddf1e0daf8df444422d281e172eed"><code>14f50c3</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr></table>




---

archive/issue_comments_313079.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@mezzarobba](#comment%3A16):\n> Replying to [@tscrim](#comment%3A15):\n> > Some quick comments. Instead of just returning a `NotImplementedError`, you should mark them with the `@abstract_method` decorator. That way `TestSuite(foo).run()` will fail saying not all methods are implemented. The doctests would then give a quick example of the working implementation. It at least is somewhat of a way to help get Python to have useful ABCs defining the API.\n> \n> \n> I'm not sure I understand: the documentation for `@abstract_method` says that (i) it is for methods that should be implemented by *all* concrete derived classes (ii) it prevents from using `obj.method?` to access the documentation, while what I think I want is a method (i) that may be implemented by some derived classes only, and (ii) whose docstring can be accessed in the most standard possible way.\n\nSorry for not responding, I seem to have missed your post. In regards to (i), you can do `@abstract_method(optional=True)` to make it not mandatory. Doing this gives you a way to check if it is implemented (`obj.method == NotImplemented`), which is distinct from if something further down throws a `NotImplementedError`. For (ii), that is only when `obj.method` is not implemented by a concrete class, but otherwise it prevents `?` from getting the doc (which, because it is not implemented, it should not IMO).\n\nHowever, all of those methods, implemented or not, do require at least one doctest.\n\nI also don't see why you need the `_acb_poly_*` methods in the `.pxd` file, you don't call them anywhere in the code.\n\nSimilarly, you don't have any of the `_*_series` methods implemented. If you're trying to set the API for polynomials, I think that is better done on a separate ticket (since you aren't adding those methods here).",
    "created_at": "2016-10-12T14:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313079",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@mezzarobba](#comment%3A16):
> Replying to [@tscrim](#comment%3A15):
> > Some quick comments. Instead of just returning a `NotImplementedError`, you should mark them with the `@abstract_method` decorator. That way `TestSuite(foo).run()` will fail saying not all methods are implemented. The doctests would then give a quick example of the working implementation. It at least is somewhat of a way to help get Python to have useful ABCs defining the API.
> 
> 
> I'm not sure I understand: the documentation for `@abstract_method` says that (i) it is for methods that should be implemented by *all* concrete derived classes (ii) it prevents from using `obj.method?` to access the documentation, while what I think I want is a method (i) that may be implemented by some derived classes only, and (ii) whose docstring can be accessed in the most standard possible way.

Sorry for not responding, I seem to have missed your post. In regards to (i), you can do `@abstract_method(optional=True)` to make it not mandatory. Doing this gives you a way to check if it is implemented (`obj.method == NotImplemented`), which is distinct from if something further down throws a `NotImplementedError`. For (ii), that is only when `obj.method` is not implemented by a concrete class, but otherwise it prevents `?` from getting the doc (which, because it is not implemented, it should not IMO).

However, all of those methods, implemented or not, do require at least one doctest.

I also don't see why you need the `_acb_poly_*` methods in the `.pxd` file, you don't call them anywhere in the code.

Similarly, you don't have any of the `_*_series` methods implemented. If you're trying to set the API for polynomials, I think that is better done on a separate ticket (since you aren't adding those methods here).



---

archive/issue_comments_313080.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acb6ac4ffd85d8fb9ebec903bde34c7e232a2c9f\"><code>acb6ac4</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>\n",
    "created_at": "2016-10-12T17:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313080",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acb6ac4ffd85d8fb9ebec903bde34c7e232a2c9f"><code>acb6ac4</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>




---

archive/issue_comments_313081.json:
```json
{
    "body": "Changed commit from **[`14f50c3`](https://github.com/sagemath/sagetrac-mirror/commit/14f50c32660ddf1e0daf8df444422d281e172eed)** to **[`acb6ac4`](https://github.com/sagemath/sagetrac-mirror/commit/acb6ac4ffd85d8fb9ebec903bde34c7e232a2c9f)**",
    "created_at": "2016-10-12T17:58:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313081",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`14f50c3`](https://github.com/sagemath/sagetrac-mirror/commit/14f50c32660ddf1e0daf8df444422d281e172eed)** to **[`acb6ac4`](https://github.com/sagemath/sagetrac-mirror/commit/acb6ac4ffd85d8fb9ebec903bde34c7e232a2c9f)**



---

archive/issue_comments_313082.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@tscrim](#comment%3A19):\n> Sorry for not responding, I seem to have missed your post. In regards to (i), you can do `@abstract_method(optional=True)` to make it not mandatory.\n\nOh, I didn't notice, thanks! However, `@abstract_method` doesn't seem to work on Cython code.\n\n> For (ii), that is only when `obj.method` is not implemented by a concrete class, but otherwise it prevents `?` from getting the doc (which, because it is not implemented, it should not IMO).\n\nI still disagree (because even in interactive use, I find it very important to know how general the methods you are calling are, what the siblings of the particular implementation you are calling are supposed to do, etc., so basically anything that makes this information more prominent is good to have from my point of view), but whatever.\n\n> However, all of those methods, implemented or not, do require at least one doctest.\n\nAdded. I sometimes wonder how sage survives with such policies `:-/`...\n\n> I also don't see why you need the `_acb_poly_*` methods in the `.pxd` file, you don't call them anywhere in the code.\n\nI'm not sure I understand. If you're talking about the `.pwd` file under `libs/`, I put the complete API of `acb_poly` there (with some stuff commented e.g. when it depended on types I didn't want to import for no reason).\n\n> Similarly, you don't have any of the `_*_series` methods implemented. If you're trying to set the API for polynomials, I think that is better done on a separate ticket (since you aren't adding those methods here).\n\nI just took the opportunity to take care of the `_*_series` methods that already were implemented in other subclasses of `Polynomial` (cf. the commit message).\n\nIMO the only thing that matters in the end are commits\u2014tickets are just there to organize the review. But if you or anyone is willing to review some (reasonably consistent!) subset of the commits on this ticket, please say so, and I'll split the ticket (or just drop the remaining commits).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acb6ac4ffd85d8fb9ebec903bde34c7e232a2c9f\"><code>acb6ac4</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>\n",
    "created_at": "2016-10-12T18:09:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313082",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@tscrim](#comment%3A19):
> Sorry for not responding, I seem to have missed your post. In regards to (i), you can do `@abstract_method(optional=True)` to make it not mandatory.

Oh, I didn't notice, thanks! However, `@abstract_method` doesn't seem to work on Cython code.

> For (ii), that is only when `obj.method` is not implemented by a concrete class, but otherwise it prevents `?` from getting the doc (which, because it is not implemented, it should not IMO).

I still disagree (because even in interactive use, I find it very important to know how general the methods you are calling are, what the siblings of the particular implementation you are calling are supposed to do, etc., so basically anything that makes this information more prominent is good to have from my point of view), but whatever.

> However, all of those methods, implemented or not, do require at least one doctest.

Added. I sometimes wonder how sage survives with such policies `:-/`...

> I also don't see why you need the `_acb_poly_*` methods in the `.pxd` file, you don't call them anywhere in the code.

I'm not sure I understand. If you're talking about the `.pwd` file under `libs/`, I put the complete API of `acb_poly` there (with some stuff commented e.g. when it depended on types I didn't want to import for no reason).

> Similarly, you don't have any of the `_*_series` methods implemented. If you're trying to set the API for polynomials, I think that is better done on a separate ticket (since you aren't adding those methods here).

I just took the opportunity to take care of the `_*_series` methods that already were implemented in other subclasses of `Polynomial` (cf. the commit message).

IMO the only thing that matters in the end are commits—tickets are just there to organize the review. But if you or anyone is willing to review some (reasonably consistent!) subset of the commits on this ticket, please say so, and I'll split the ticket (or just drop the remaining commits).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acb6ac4ffd85d8fb9ebec903bde34c7e232a2c9f"><code>acb6ac4</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>




---

archive/issue_comments_313083.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c43d4f20944d7b1fd455b867ba896ee10d014c2e\"><code>c43d4f2</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>\n",
    "created_at": "2016-10-13T15:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313083",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c43d4f20944d7b1fd455b867ba896ee10d014c2e"><code>c43d4f2</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>




---

archive/issue_comments_313084.json:
```json
{
    "body": "Changed commit from **[`acb6ac4`](https://github.com/sagemath/sagetrac-mirror/commit/acb6ac4ffd85d8fb9ebec903bde34c7e232a2c9f)** to **[`c43d4f2`](https://github.com/sagemath/sagetrac-mirror/commit/c43d4f20944d7b1fd455b867ba896ee10d014c2e)**",
    "created_at": "2016-10-13T15:49:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313084",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`acb6ac4`](https://github.com/sagemath/sagetrac-mirror/commit/acb6ac4ffd85d8fb9ebec903bde34c7e232a2c9f)** to **[`c43d4f2`](https://github.com/sagemath/sagetrac-mirror/commit/c43d4f20944d7b1fd455b867ba896ee10d014c2e)**



---

archive/issue_comments_313085.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@mezzarobba](#comment%3A21):\n> Replying to [@tscrim](#comment%3A19):\n> > Sorry for not responding, I seem to have missed your post. In regards to (i), you can do `@abstract_method(optional=True)` to make it not mandatory.\n> \n> \n> Oh, I didn't notice, thanks! However, `@abstract_method` doesn't seem to work on Cython code.\n\nAh, crap, that's right. You can simply remove them because they (currently) don't work.\n\n> > For (ii), that is only when `obj.method` is not implemented by a concrete class, but otherwise it prevents `?` from getting the doc (which, because it is not implemented, it should not IMO).\n> \n> \n> I still disagree (because even in interactive use, I find it very important to know how general the methods you are calling are, what the siblings of the particular implementation you are calling are supposed to do, etc., so basically anything that makes this information more prominent is good to have from my point of view), but whatever.\n\nWell, it's moot for this ticket anyways.\n\n> > However, all of those methods, implemented or not, do require at least one doctest.\n> \n> \n> Added. I sometimes wonder how sage survives with such policies `:-/`...\n\nWell, it usually is a simple thing to do at least, but I can relate.\n\n> > I also don't see why you need the `_acb_poly_*` methods in the `.pxd` file, you don't call them anywhere in the code.\n> \n> \n> I'm not sure I understand. If you're talking about the `.pwd` file under `libs/`, I put the complete API of `acb_poly` there (with some stuff commented e.g. when it depended on types I didn't want to import for no reason).\n\nYou only need to add things that you use into the `pxd` file since the library can handle its own internal calls. I think it makes it harder to maintain (more likely to get conflicts) and understand (more to sift through and confusing about what function to use).\n\n> > Similarly, you don't have any of the `_*_series` methods implemented. If you're trying to set the API for polynomials, I think that is better done on a separate ticket (since you aren't adding those methods here).\n> \n> \n> I just took the opportunity to take care of the `_*_series` methods that already were implemented in other subclasses of `Polynomial` (cf. the commit message).\n\nIt's not clear that these should be included as part of the API of all polynomials, especially since they are hidden methods. Are they called indirectly by some (public) method of the base polynomial class?\n\n> IMO the only thing that matters in the end are commits\u2014tickets are just there to organize the review. But if you or anyone is willing to review some (reasonably consistent!) subset of the commits on this ticket, please say so, and I'll split the ticket (or just drop the remaining commits).\n\nIt's a matter of locality of searching trac tickets, but it's not that big of a deal.",
    "created_at": "2016-10-13T18:33:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313085",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@mezzarobba](#comment%3A21):
> Replying to [@tscrim](#comment%3A19):
> > Sorry for not responding, I seem to have missed your post. In regards to (i), you can do `@abstract_method(optional=True)` to make it not mandatory.
> 
> 
> Oh, I didn't notice, thanks! However, `@abstract_method` doesn't seem to work on Cython code.

Ah, crap, that's right. You can simply remove them because they (currently) don't work.

> > For (ii), that is only when `obj.method` is not implemented by a concrete class, but otherwise it prevents `?` from getting the doc (which, because it is not implemented, it should not IMO).
> 
> 
> I still disagree (because even in interactive use, I find it very important to know how general the methods you are calling are, what the siblings of the particular implementation you are calling are supposed to do, etc., so basically anything that makes this information more prominent is good to have from my point of view), but whatever.

Well, it's moot for this ticket anyways.

> > However, all of those methods, implemented or not, do require at least one doctest.
> 
> 
> Added. I sometimes wonder how sage survives with such policies `:-/`...

Well, it usually is a simple thing to do at least, but I can relate.

> > I also don't see why you need the `_acb_poly_*` methods in the `.pxd` file, you don't call them anywhere in the code.
> 
> 
> I'm not sure I understand. If you're talking about the `.pwd` file under `libs/`, I put the complete API of `acb_poly` there (with some stuff commented e.g. when it depended on types I didn't want to import for no reason).

You only need to add things that you use into the `pxd` file since the library can handle its own internal calls. I think it makes it harder to maintain (more likely to get conflicts) and understand (more to sift through and confusing about what function to use).

> > Similarly, you don't have any of the `_*_series` methods implemented. If you're trying to set the API for polynomials, I think that is better done on a separate ticket (since you aren't adding those methods here).
> 
> 
> I just took the opportunity to take care of the `_*_series` methods that already were implemented in other subclasses of `Polynomial` (cf. the commit message).

It's not clear that these should be included as part of the API of all polynomials, especially since they are hidden methods. Are they called indirectly by some (public) method of the base polynomial class?

> IMO the only thing that matters in the end are commits—tickets are just there to organize the review. But if you or anyone is willing to review some (reasonably consistent!) subset of the commits on this ticket, please say so, and I'll split the ticket (or just drop the remaining commits).

It's a matter of locality of searching trac tickets, but it's not that big of a deal.



---

archive/issue_comments_313086.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/72dc8e20acb26aa305861effd938bb095c031b5d\"><code>72dc8e2</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>\n",
    "created_at": "2016-10-14T08:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313086",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/72dc8e20acb26aa305861effd938bb095c031b5d"><code>72dc8e2</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>




---

archive/issue_comments_313087.json:
```json
{
    "body": "Changed commit from **[`c43d4f2`](https://github.com/sagemath/sagetrac-mirror/commit/c43d4f20944d7b1fd455b867ba896ee10d014c2e)** to **[`72dc8e2`](https://github.com/sagemath/sagetrac-mirror/commit/72dc8e20acb26aa305861effd938bb095c031b5d)**",
    "created_at": "2016-10-14T08:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313087",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c43d4f2`](https://github.com/sagemath/sagetrac-mirror/commit/c43d4f20944d7b1fd455b867ba896ee10d014c2e)** to **[`72dc8e2`](https://github.com/sagemath/sagetrac-mirror/commit/72dc8e20acb26aa305861effd938bb095c031b5d)**



---

archive/issue_comments_313088.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@tscrim](#comment%3A23):\n> > > Sorry for not responding, I seem to have missed your post. In regards to (i), you can do `@abstract_method(optional=True)` to make it not mandatory.\n> > \n> > \n> > Oh, I didn't notice, thanks! However, `@abstract_method` doesn't seem to work on Cython code.\n> \n> \n> Ah, crap, that's right. You can simply remove them because they (currently) don't work.\n\nAs you prefer.\n\n> > I'm not sure I understand. If you're talking about the `.pwd` file under `libs/`, I put the complete API of `acb_poly` there (with some stuff commented e.g. when it depended on types I didn't want to import for no reason).\n> \n> \n> You only need to add things that you use into the `pxd` file since the library can handle its own internal calls. I think it makes it harder to maintain (more likely to get conflicts) and understand (more to sift through and confusing about what function to use).\n\nSorry, but I disagree again. We're talking about `.pxd` files *under `sage.libs`*: I believe these should reflect the API of the corresponding libraries or sub-libraries. I'm certainly planning to add more code using arb polynomials in the future, and I don't see the point of adding declarations from `acb_poly.h` one by one as I start to use them. Besides, users or external packages based on sage may very well want to call arb functions from cython too.\n\nIn fact, it would likely be a good idea to cut off these cython bindings from sage (once they are complete) and turn them into separate packages on which sage would depend (or work with the library developers to make them part of the upstream package), a bit like people seem to be doing with pari these days.\n\n> > > Similarly, you don't have any of the `_*_series` methods implemented. If you're trying to set the API for polynomials, I think that is better done on a separate ticket (since you aren't adding those methods here).\n> > \n> > \n> > I just took the opportunity to take care of the `_*_series` methods that already were implemented in other subclasses of `Polynomial` (cf. the commit message).\n> \n> \n> It's not clear that these should be included as part of the API of all polynomials, especially since they are hidden methods. Are they called indirectly by some (public) method of the base polynomial class?\n\nNot exactly, but they are called (or at least intended to be callable, I don't know how things are standing now) by power series classes. So they certainly are part of the (sage-internal) API of polynomials.\n\nThanks again for your comments!",
    "created_at": "2016-10-14T08:22:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313088",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@tscrim](#comment%3A23):
> > > Sorry for not responding, I seem to have missed your post. In regards to (i), you can do `@abstract_method(optional=True)` to make it not mandatory.
> > 
> > 
> > Oh, I didn't notice, thanks! However, `@abstract_method` doesn't seem to work on Cython code.
> 
> 
> Ah, crap, that's right. You can simply remove them because they (currently) don't work.

As you prefer.

> > I'm not sure I understand. If you're talking about the `.pwd` file under `libs/`, I put the complete API of `acb_poly` there (with some stuff commented e.g. when it depended on types I didn't want to import for no reason).
> 
> 
> You only need to add things that you use into the `pxd` file since the library can handle its own internal calls. I think it makes it harder to maintain (more likely to get conflicts) and understand (more to sift through and confusing about what function to use).

Sorry, but I disagree again. We're talking about `.pxd` files *under `sage.libs`*: I believe these should reflect the API of the corresponding libraries or sub-libraries. I'm certainly planning to add more code using arb polynomials in the future, and I don't see the point of adding declarations from `acb_poly.h` one by one as I start to use them. Besides, users or external packages based on sage may very well want to call arb functions from cython too.

In fact, it would likely be a good idea to cut off these cython bindings from sage (once they are complete) and turn them into separate packages on which sage would depend (or work with the library developers to make them part of the upstream package), a bit like people seem to be doing with pari these days.

> > > Similarly, you don't have any of the `_*_series` methods implemented. If you're trying to set the API for polynomials, I think that is better done on a separate ticket (since you aren't adding those methods here).
> > 
> > 
> > I just took the opportunity to take care of the `_*_series` methods that already were implemented in other subclasses of `Polynomial` (cf. the commit message).
> 
> 
> It's not clear that these should be included as part of the API of all polynomials, especially since they are hidden methods. Are they called indirectly by some (public) method of the base polynomial class?

Not exactly, but they are called (or at least intended to be callable, I don't know how things are standing now) by power series classes. So they certainly are part of the (sage-internal) API of polynomials.

Thanks again for your comments!



---

archive/issue_comments_313089.json:
```json
{
    "body": "Changed commit from **[`72dc8e2`](https://github.com/sagemath/sagetrac-mirror/commit/72dc8e20acb26aa305861effd938bb095c031b5d)** to **[`8967c92`](https://github.com/sagemath/sagetrac-mirror/commit/8967c92df5dbb1eb09a2d5cf54083bfa7bf97ebe)**",
    "created_at": "2016-11-17T09:05:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313089",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`72dc8e2`](https://github.com/sagemath/sagetrac-mirror/commit/72dc8e20acb26aa305861effd938bb095c031b5d)** to **[`8967c92`](https://github.com/sagemath/sagetrac-mirror/commit/8967c92df5dbb1eb09a2d5cf54083bfa7bf97ebe)**



---

archive/issue_comments_313090.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8646829ab85ded33dd05d0879d0146cba0454297\"><code>8646829</code></a></td><td><code>acb_poly: basic infrastructure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8ad07ca19896a253faad419fd833d0849cf73d5f\"><code>8ad07ca</code></a></td><td><code>acb_poly: data structure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0b3fedc2dc4772e9549aa883d5e9c3983337c344\"><code>0b3fedc</code></a></td><td><code>acb_poly: basic arithmetic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13a61670335da0fb2c344f8b9033cbf8c4be72d1\"><code>13a6167</code></a></td><td><code>acb_poly: initialization from other polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/36581f271fb6334ac9282f35cec5934d9fb0469e\"><code>36581f2</code></a></td><td><code>acb_poly: basic syntactic methods (truncations, shifts...)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af21b443366de76d10adee1ab75ea39198124f21\"><code>af21b44</code></a></td><td><code>acb_poly: evaluation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/021c5782cc638894d48c8110d4831f63d195ca67\"><code>021c578</code></a></td><td><code>Polynomial: add stubs for truncated operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9191574df6f3da00fee70f3a723b1c696da63635\"><code>9191574</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc8e75d96c9b8c95f599a846b70b4511b0632813\"><code>fc8e75d</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8967c92df5dbb1eb09a2d5cf54083bfa7bf97ebe\"><code>8967c92</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>\n",
    "created_at": "2016-11-17T09:05:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313090",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8646829ab85ded33dd05d0879d0146cba0454297"><code>8646829</code></a></td><td><code>acb_poly: basic infrastructure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8ad07ca19896a253faad419fd833d0849cf73d5f"><code>8ad07ca</code></a></td><td><code>acb_poly: data structure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0b3fedc2dc4772e9549aa883d5e9c3983337c344"><code>0b3fedc</code></a></td><td><code>acb_poly: basic arithmetic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13a61670335da0fb2c344f8b9033cbf8c4be72d1"><code>13a6167</code></a></td><td><code>acb_poly: initialization from other polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/36581f271fb6334ac9282f35cec5934d9fb0469e"><code>36581f2</code></a></td><td><code>acb_poly: basic syntactic methods (truncations, shifts...)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af21b443366de76d10adee1ab75ea39198124f21"><code>af21b44</code></a></td><td><code>acb_poly: evaluation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/021c5782cc638894d48c8110d4831f63d195ca67"><code>021c578</code></a></td><td><code>Polynomial: add stubs for truncated operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9191574df6f3da00fee70f3a723b1c696da63635"><code>9191574</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc8e75d96c9b8c95f599a846b70b4511b0632813"><code>fc8e75d</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8967c92df5dbb1eb09a2d5cf54083bfa7bf97ebe"><code>8967c92</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr></table>




---

archive/issue_comments_313091.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\n(Rebased on top of 7.5\u03b22, no other change.)",
    "created_at": "2016-11-17T09:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313091",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:27" align="right">comment:27</div>

(Rebased on top of 7.5β2, no other change.)



---

archive/issue_comments_313092.json:
```json
{
    "body": "Changed commit from **[`8967c92`](https://github.com/sagemath/sagetrac-mirror/commit/8967c92df5dbb1eb09a2d5cf54083bfa7bf97ebe)** to **[`ee24c3f`](https://github.com/sagemath/sagetrac-mirror/commit/ee24c3f12032295ed977acb43119bb4ccd27f881)**",
    "created_at": "2016-11-23T09:44:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313092",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8967c92`](https://github.com/sagemath/sagetrac-mirror/commit/8967c92df5dbb1eb09a2d5cf54083bfa7bf97ebe)** to **[`ee24c3f`](https://github.com/sagemath/sagetrac-mirror/commit/ee24c3f12032295ed977acb43119bb4ccd27f881)**



---

archive/issue_comments_313093.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ee24c3f12032295ed977acb43119bb4ccd27f881\"><code>ee24c3f</code></a></td><td><code>acb_poly: minor optimizations in __init__</code></td></tr></table>\n",
    "created_at": "2016-11-23T09:44:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313093",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ee24c3f12032295ed977acb43119bb4ccd27f881"><code>ee24c3f</code></a></td><td><code>acb_poly: minor optimizations in __init__</code></td></tr></table>




---

archive/issue_comments_313094.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThe py3 plugin complains about `dict.iteritems()`, but I don't think it is appropriate to replace it, since it appears in a context where Cython can optimize it (while it apparently doesn't optimize `items()` or `six.iteritems()`). Any advice?",
    "created_at": "2016-11-23T09:44:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313094",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:29" align="right">comment:29</div>

The py3 plugin complains about `dict.iteritems()`, but I don't think it is appropriate to replace it, since it appears in a context where Cython can optimize it (while it apparently doesn't optimize `items()` or `six.iteritems()`). Any advice?



---

archive/issue_comments_313095.json:
```json
{
    "body": "Changed commit from **[`ee24c3f`](https://github.com/sagemath/sagetrac-mirror/commit/ee24c3f12032295ed977acb43119bb4ccd27f881)** to **[`f266855`](https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45)**",
    "created_at": "2016-12-02T13:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313095",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ee24c3f`](https://github.com/sagemath/sagetrac-mirror/commit/ee24c3f12032295ed977acb43119bb4ccd27f881)** to **[`f266855`](https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45)**



---

archive/issue_comments_313096.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d8caae130f5fd876c93d4044eea3e289235775d\"><code>1d8caae</code></a></td><td><code>acb_poly: data structure</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a8d6f73642facfada5a95c71c3a942c4ebb43f37\"><code>a8d6f73</code></a></td><td><code>acb_poly: basic arithmetic</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a925ba98b99a65c779eb027a7df75eb6252456a2\"><code>a925ba9</code></a></td><td><code>acb_poly: initialization from other polynomials</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9d57543bd98607871a875ab07f2047542074bd1d\"><code>9d57543</code></a></td><td><code>acb_poly: basic syntactic methods (truncations, shifts...)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/62aa2e664a9a9be13d0bef19aa21975d755b7347\"><code>62aa2e6</code></a></td><td><code>acb_poly: evaluation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d811e2c4485c9e832c2008e199c50701dbad0dbe\"><code>d811e2c</code></a></td><td><code>Polynomial: add stubs for truncated operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/30d63ddf4e5ffa9f175c789e6bf664c2ecd291f3\"><code>30d63dd</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d89b0dea846e60af4572fa9071c29a61d6a79fb9\"><code>d89b0de</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/375aa2b7c8c2e6a9f18cfd495e6baedc6632fa8a\"><code>375aa2b</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45\"><code>f266855</code></a></td><td><code>acb_poly: minor optimizations in __init__</code></td></tr></table>\n",
    "created_at": "2016-12-02T13:52:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313096",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d8caae130f5fd876c93d4044eea3e289235775d"><code>1d8caae</code></a></td><td><code>acb_poly: data structure</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a8d6f73642facfada5a95c71c3a942c4ebb43f37"><code>a8d6f73</code></a></td><td><code>acb_poly: basic arithmetic</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a925ba98b99a65c779eb027a7df75eb6252456a2"><code>a925ba9</code></a></td><td><code>acb_poly: initialization from other polynomials</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9d57543bd98607871a875ab07f2047542074bd1d"><code>9d57543</code></a></td><td><code>acb_poly: basic syntactic methods (truncations, shifts...)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/62aa2e664a9a9be13d0bef19aa21975d755b7347"><code>62aa2e6</code></a></td><td><code>acb_poly: evaluation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d811e2c4485c9e832c2008e199c50701dbad0dbe"><code>d811e2c</code></a></td><td><code>Polynomial: add stubs for truncated operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/30d63ddf4e5ffa9f175c789e6bf664c2ecd291f3"><code>30d63dd</code></a></td><td><code>acb_poly: some truncated (= power series) operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d89b0dea846e60af4572fa9071c29a61d6a79fb9"><code>d89b0de</code></a></td><td><code>Improve doc for generic Polynomial.compose_trunc()</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/375aa2b7c8c2e6a9f18cfd495e6baedc6632fa8a"><code>375aa2b</code></a></td><td><code>Polynomial: better document stubs for truncated operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45"><code>f266855</code></a></td><td><code>acb_poly: minor optimizations in __init__</code></td></tr></table>




---

archive/issue_comments_313097.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nIIRC, `iteritems` is okay in Cython files with Python3. So I believe you can ignore that.\n\nI can accept the `_*_series` in that case. From looking at other files in `sage/libs`, I am okay with the `.pxd` file modulo the commented out lines: Either remove them or uncomment them.",
    "created_at": "2016-12-02T15:02:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313097",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:31" align="right">comment:31</div>

IIRC, `iteritems` is okay in Cython files with Python3. So I believe you can ignore that.

I can accept the `_*_series` in that case. From looking at other files in `sage/libs`, I am okay with the `.pxd` file modulo the commented out lines: Either remove them or uncomment them.



---

archive/issue_comments_313098.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nPS - Sorry for letting this drop off my radar.",
    "created_at": "2016-12-02T15:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313098",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:32" align="right">comment:32</div>

PS - Sorry for letting this drop off my radar.



---

archive/issue_comments_313099.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2016-12-02T15:02:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313099",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_297889.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-02T15:02:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297889"
}
```



---

archive/issue_events_297890.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-02T15:02:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297890"
}
```



---

archive/issue_comments_313100.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nReplying to [@tscrim](#comment%3A31):\n> I can accept the `_*_series` in that case. From looking at other files in `sage/libs`, I am okay with the `.pxd` file modulo the commented out lines: Either remove them or uncomment them.\n\nUncommenting them would require additional imports (that's why they were commented out), so I removed them. (This is inconsistent with what we did elsewhere under `sage/libs/arb`, however.)\n\nReplying to [@tscrim](#comment%3A32):\n> PS - Sorry for letting this drop off my radar.\n\nNo problem! And thanks a lot for the review.",
    "created_at": "2016-12-02T15:19:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313100",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:33" align="right">comment:33</div>

Replying to [@tscrim](#comment%3A31):
> I can accept the `_*_series` in that case. From looking at other files in `sage/libs`, I am okay with the `.pxd` file modulo the commented out lines: Either remove them or uncomment them.

Uncommenting them would require additional imports (that's why they were commented out), so I removed them. (This is inconsistent with what we did elsewhere under `sage/libs/arb`, however.)

Replying to [@tscrim](#comment%3A32):
> PS - Sorry for letting this drop off my radar.

No problem! And thanks a lot for the review.



---

archive/issue_comments_313101.json:
```json
{
    "body": "Changed commit from **[`f266855`](https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45)** to **[`d52bcb4`](https://github.com/sagemath/sagetrac-mirror/commit/d52bcb42bcc5008ffff0c82973e8b463e8db340d)**",
    "created_at": "2016-12-02T15:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313101",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f266855`](https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45)** to **[`d52bcb4`](https://github.com/sagemath/sagetrac-mirror/commit/d52bcb42bcc5008ffff0c82973e8b463e8db340d)**



---

archive/issue_comments_313102.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d52bcb42bcc5008ffff0c82973e8b463e8db340d\"><code>d52bcb4</code></a></td><td><code>acb_poly.pwd: remove commented out declarations</code></td></tr></table>\n",
    "created_at": "2016-12-02T15:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313102",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d52bcb42bcc5008ffff0c82973e8b463e8db340d"><code>d52bcb4</code></a></td><td><code>acb_poly.pwd: remove commented out declarations</code></td></tr></table>




---

archive/issue_comments_313103.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@mezzarobba](#comment%3A33):\n> Replying to [@tscrim](#comment%3A31):\n> > I can accept the `_*_series` in that case. From looking at other files in `sage/libs`, I am okay with the `.pxd` file modulo the commented out lines: Either remove them or uncomment them.\n> \n> \n> Uncommenting them would require additional imports (that's why they were commented out), so I removed them. (This is inconsistent with what we did elsewhere under `sage/libs/arb`, however.)\n\nI should have grep'ed rather than look by hand, and I see it in a few other places as well, e.g., `mpfr.pxd`. So you can revert that change and leave them in commented, sorry!",
    "created_at": "2016-12-02T15:26:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313103",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@mezzarobba](#comment%3A33):
> Replying to [@tscrim](#comment%3A31):
> > I can accept the `_*_series` in that case. From looking at other files in `sage/libs`, I am okay with the `.pxd` file modulo the commented out lines: Either remove them or uncomment them.
> 
> 
> Uncommenting them would require additional imports (that's why they were commented out), so I removed them. (This is inconsistent with what we did elsewhere under `sage/libs/arb`, however.)

I should have grep'ed rather than look by hand, and I see it in a few other places as well, e.g., `mpfr.pxd`. So you can revert that change and leave them in commented, sorry!



---

archive/issue_comments_313104.json:
```json
{
    "body": "<div id=\"comment:36\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-12-02T15:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313104",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:36"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_313105.json:
```json
{
    "body": "Changed commit from **[`d52bcb4`](https://github.com/sagemath/sagetrac-mirror/commit/d52bcb42bcc5008ffff0c82973e8b463e8db340d)** to **[`f266855`](https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45)**",
    "created_at": "2016-12-02T15:34:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313105",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d52bcb4`](https://github.com/sagemath/sagetrac-mirror/commit/d52bcb42bcc5008ffff0c82973e8b463e8db340d)** to **[`f266855`](https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45)**



---

archive/issue_comments_313106.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nDone.",
    "created_at": "2016-12-02T15:57:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313106",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:37" align="right">comment:37</div>

Done.



---

archive/issue_events_297891.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-02T16:20:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297891"
}
```



---

archive/issue_events_297892.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-12-02T16:20:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297892"
}
```



---

archive/issue_comments_313107.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nThank you.",
    "created_at": "2016-12-02T16:20:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313107",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">comment:38</div>

Thank you.



---

archive/issue_events_297893.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-03T08:14:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297893"
}
```



---

archive/issue_events_297894.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-03T08:14:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297894"
}
```



---

archive/issue_comments_313108.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOn 32-bit:\n\n```\n7019sage -t --long src/sage/rings/polynomial/polynomial_complex_arb.pyx\n7020**********************************************************************\n7021File \"src/sage/rings/polynomial/polynomial_complex_arb.pyx\", line 545, in sage.rings.polynomial.polynomial_complex_arb.Polynomial_complex_arb._power_trunc\n7022Failed example:\n7023    (x^2 + 1)._power_trunc(10^10, 3)\n7024Exception raised:\n7025    Traceback (most recent call last):\n7026      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 498, in _run\n7027        self.compile_and_execute(example, compiler, test.globs)\n7028      File \"/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py\", line 861, in compile_and_execute\n7029        exec(compiled, globs)\n7030      File \"<doctest sage.rings.polynomial.polynomial_complex_arb.Polynomial_complex_arb._power_trunc[1]>\", line 1, in <module>\n7031        (x**Integer(2) + Integer(1))._power_trunc(Integer(10)**Integer(10), Integer(3))\n7032      File \"sage/rings/polynomial/polynomial_complex_arb.pyx\", line 533, in sage.rings.polynomial.polynomial_complex_arb.Polynomial_complex_arb._power_trunc (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/rings/polynomial/polynomial_complex_arb.cpp:8624)\n7033        cpdef Polynomial _power_trunc(self, unsigned long expo, long n):\n7034    OverflowError: long int too large to convert\n7035**********************************************************************\n70361 item had failures:\n7037   1 of   6 in sage.rings.polynomial.polynomial_complex_arb.Polynomial_complex_arb._power_trunc\n7038    [113 tests, 1 failure, 0.31 s]\n```",
    "created_at": "2016-12-03T08:14:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313108",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:39" align="right">comment:39</div>

On 32-bit:

```
7019sage -t --long src/sage/rings/polynomial/polynomial_complex_arb.pyx
7020**********************************************************************
7021File "src/sage/rings/polynomial/polynomial_complex_arb.pyx", line 545, in sage.rings.polynomial.polynomial_complex_arb.Polynomial_complex_arb._power_trunc
7022Failed example:
7023    (x^2 + 1)._power_trunc(10^10, 3)
7024Exception raised:
7025    Traceback (most recent call last):
7026      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 498, in _run
7027        self.compile_and_execute(example, compiler, test.globs)
7028      File "/home/buildbot/slave/sage_git/build/local/lib/python2.7/site-packages/sage/doctest/forker.py", line 861, in compile_and_execute
7029        exec(compiled, globs)
7030      File "<doctest sage.rings.polynomial.polynomial_complex_arb.Polynomial_complex_arb._power_trunc[1]>", line 1, in <module>
7031        (x**Integer(2) + Integer(1))._power_trunc(Integer(10)**Integer(10), Integer(3))
7032      File "sage/rings/polynomial/polynomial_complex_arb.pyx", line 533, in sage.rings.polynomial.polynomial_complex_arb.Polynomial_complex_arb._power_trunc (/home/buildbot/slave/sage_git/build/src/build/cythonized/sage/rings/polynomial/polynomial_complex_arb.cpp:8624)
7033        cpdef Polynomial _power_trunc(self, unsigned long expo, long n):
7034    OverflowError: long int too large to convert
7035**********************************************************************
70361 item had failures:
7037   1 of   6 in sage.rings.polynomial.polynomial_complex_arb.Polynomial_complex_arb._power_trunc
7038    [113 tests, 1 failure, 0.31 s]
```



---

archive/issue_comments_313109.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70599cc29d18444b215254c1c540a5d86b3b2e2e\"><code>70599cc</code></a></td><td><code>acb_poly: fix doctest for 32-bit longs</code></td></tr></table>\n",
    "created_at": "2016-12-03T09:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313109",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70599cc29d18444b215254c1c540a5d86b3b2e2e"><code>70599cc</code></a></td><td><code>acb_poly: fix doctest for 32-bit longs</code></td></tr></table>




---

archive/issue_comments_313110.json:
```json
{
    "body": "Changed commit from **[`f266855`](https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45)** to **[`70599cc`](https://github.com/sagemath/sagetrac-mirror/commit/70599cc29d18444b215254c1c540a5d86b3b2e2e)**",
    "created_at": "2016-12-03T09:59:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313110",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f266855`](https://github.com/sagemath/sagetrac-mirror/commit/f266855b93527e116c8e777d75471eab4ea97f45)** to **[`70599cc`](https://github.com/sagemath/sagetrac-mirror/commit/70599cc29d18444b215254c1c540a5d86b3b2e2e)**



---

archive/issue_comments_313111.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@vbraun](#comment%3A39):\n> On 32-bit:\n\nOoops! Thank you for the notice. I think this can go back to `positive_review`, but please complain if you disagree.",
    "created_at": "2016-12-03T10:02:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313111",
    "user": "https://github.com/mezzarobba"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@vbraun](#comment%3A39):
> On 32-bit:

Ooops! Thank you for the notice. I think this can go back to `positive_review`, but please complain if you disagree.



---

archive/issue_events_297895.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-03T10:02:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297895"
}
```



---

archive/issue_events_297896.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2016-12-03T10:02:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297896"
}
```



---

archive/issue_events_297897.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-05T00:44:29Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297897"
}
```



---

archive/issue_events_297898.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "79ca17157ec081ba0dcd71a0530035644850125f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-12-05T00:44:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21393#event-297898"
}
```



---

archive/issue_comments_313112.json:
```json
{
    "body": "Changed branch from **[u/mmezzarobba/acb_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/acb_poly)** to **[`70599cc`](https://github.com/sagemath/sagetrac-mirror/commit/70599cc29d18444b215254c1c540a5d86b3b2e2e)**",
    "created_at": "2016-12-05T00:44:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21393",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21393#issuecomment-313112",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mmezzarobba/acb_poly](https://github.com/sagemath/sagetrac-mirror/tree/u/mmezzarobba/acb_poly)** to **[`70599cc`](https://github.com/sagemath/sagetrac-mirror/commit/70599cc29d18444b215254c1c540a5d86b3b2e2e)**
