# Issue 21723: Inconsistency in the interface between fields and vector spaces

archive/issues_021486.json:
```json
{
    "body": "There is an inconsistency in the interface between fields and vector spaces.\n\n```\nsage: F.<a>=GF(9)\nsage: V=F.vector_space()\nsage: V(a)\n(0, 1)\nsage: G.<b>=GF(3)\nsage: W=G.vector_space()\nsage: W(b)\n...\nTypeError: can't initialize vector from nonzero non-list\n\nThe cause is\n\nsage: a._vector_()\n(0, 1)\nsage: b._vector_()\n...\nAttributeError: 'sage.rings.finite_rings.integer_mod.IntegerMod_int' object has no attribute '_vector_'\n```\n\nAdding a `_vector_` method to the `GF(p)` elements will be a simple fix. \n\nAlong the way, we also clean up `_vector_` and `_matrix_` methods in the class `FinitePolyExtElement`. \n\nBranch/Commit: c1748cfb2971237d3bd8c6e49197479f500e9317\n\nReviewer: Travis Scrimshaw\n\nAuthor: Vincent Delecroix, Kwankyu Lee\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21723\n\n",
    "closed_at": "2016-11-02T19:19:55Z",
    "created_at": "2016-10-18T17:07:29Z",
    "labels": [
        "component: finite rings",
        "minor",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Inconsistency in the interface between fields and vector spaces",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21723",
    "user": "https://github.com/kwankyu"
}
```
There is an inconsistency in the interface between fields and vector spaces.

```
sage: F.<a>=GF(9)
sage: V=F.vector_space()
sage: V(a)
(0, 1)
sage: G.<b>=GF(3)
sage: W=G.vector_space()
sage: W(b)
...
TypeError: can't initialize vector from nonzero non-list

The cause is

sage: a._vector_()
(0, 1)
sage: b._vector_()
...
AttributeError: 'sage.rings.finite_rings.integer_mod.IntegerMod_int' object has no attribute '_vector_'
```

Adding a `_vector_` method to the `GF(p)` elements will be a simple fix. 

Along the way, we also clean up `_vector_` and `_matrix_` methods in the class `FinitePolyExtElement`. 

Branch/Commit: c1748cfb2971237d3bd8c6e49197479f500e9317

Reviewer: Travis Scrimshaw

Author: Vincent Delecroix, Kwankyu Lee

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21723





---

archive/issue_comments_317365.json:
```json
{
    "body": "<a id='comment:1'></a>Note that the following also works\n\n```\nsage: K = GF(9)\nsage: V = VectorSpace(K, 1)\nsage: V(K.an_element())\n(0)\n```\nHence I guess that a default `_vector_` at the category level would actually make sense.",
    "created_at": "2016-10-18T17:51:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317365",
    "user": "https://github.com/videlec"
}
```

<a id='comment:1'></a>Note that the following also works

```
sage: K = GF(9)
sage: V = VectorSpace(K, 1)
sage: V(K.an_element())
(0)
```
Hence I guess that a default `_vector_` at the category level would actually make sense.



---

archive/issue_comments_317366.json:
```json
{
    "body": "<a id='comment:2'></a>three lines fix... let us see how much it breaks Sage.\n\n---\nNew commits:",
    "created_at": "2016-10-18T18:07:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317366",
    "user": "https://github.com/videlec"
}
```

<a id='comment:2'></a>three lines fix... let us see how much it breaks Sage.

---
New commits:



---

archive/issue_comments_317367.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-18T21:20:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317367",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317368.json:
```json
{
    "body": "<a id='comment:4'></a>Two comments:\n\n(1) For elements of many other parents, the code is `k.vector_space()(lst)` where `k` is the parent. Hence for further consistency, we may consider add `vector_space` parent method as well. But then Rings category is not the right one...\n\n(2) The docstring does not have an initial one-line summary.",
    "created_at": "2016-10-19T02:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317368",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:4'></a>Two comments:

(1) For elements of many other parents, the code is `k.vector_space()(lst)` where `k` is the parent. Hence for further consistency, we may consider add `vector_space` parent method as well. But then Rings category is not the right one...

(2) The docstring does not have an initial one-line summary.



---

archive/issue_comments_317369.json:
```json
{
    "body": "<a id='comment:5'></a>I fear that using the category framework right might be complicated in reality, contrary to the theory.\n\nAn alternative (old-fashioned :-) path is to add `element_prime_modn.py`, in which we subclass `IntegerMod` for modulo p case and add `_vector_` method therein. I think this fits in the current organization of finite fields machinery. We may also need to add `vector_space` method to `FiniteField_prime_modn` class..",
    "created_at": "2016-10-19T03:35:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317369",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:5'></a>I fear that using the category framework right might be complicated in reality, contrary to the theory.

An alternative (old-fashioned :-) path is to add `element_prime_modn.py`, in which we subclass `IntegerMod` for modulo p case and add `_vector_` method therein. I think this fits in the current organization of finite fields machinery. We may also need to add `vector_space` method to `FiniteField_prime_modn` class..



---

archive/issue_comments_317370.json:
```json
{
    "body": "<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-19T07:46:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317370",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317371.json:
```json
{
    "body": "<a id='comment:7'></a>The `_vector_` method for elements has no link to the `vector_space` method for parents.\n\n> I fear that using the category framework right might be complicated in reality, contrary to the theory.\n\n\nThis is not an argument. Moreover using category allows to have these methods available for any rings or fields.",
    "created_at": "2016-10-19T07:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317371",
    "user": "https://github.com/videlec"
}
```

<a id='comment:7'></a>The `_vector_` method for elements has no link to the `vector_space` method for parents.

> I fear that using the category framework right might be complicated in reality, contrary to the theory.


This is not an argument. Moreover using category allows to have these methods available for any rings or fields.



---

archive/issue_comments_317372.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-19T07:51:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317372",
    "user": "https://github.com/videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_317373.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:7 vdelecroix]:\n> This is not an argument. Moreover using category allows to have these methods available for any rings or fields.\n\n\n`_vector_` is anyhow related with some vector space, the precise meaning of which would depend on the kind of rings. For GF(9), it is a 2-dimensional vector space over GF(3) while for GF(3), it is a vector space over itself. You implemented `_vector_` assuming that the parent ring is seen as a vector space over itself, disregarding the kind of of the ring. As a principle, methods in a category should be meaningful and useful for all parents in the category. So I think the Rings category is not the right category to put your `_vector_` implementation. On the other hand, it seems tricky to find the right category in the current Sage. [I expected finite fields belong to a finite-dimensional algebras category. But not true.]",
    "created_at": "2016-10-19T09:02:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317373",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:9'></a>Replying to [comment:7 vdelecroix]:
> This is not an argument. Moreover using category allows to have these methods available for any rings or fields.


`_vector_` is anyhow related with some vector space, the precise meaning of which would depend on the kind of rings. For GF(9), it is a 2-dimensional vector space over GF(3) while for GF(3), it is a vector space over itself. You implemented `_vector_` assuming that the parent ring is seen as a vector space over itself, disregarding the kind of of the ring. As a principle, methods in a category should be meaningful and useful for all parents in the category. So I think the Rings category is not the right category to put your `_vector_` implementation. On the other hand, it seems tricky to find the right category in the current Sage. [I expected finite fields belong to a finite-dimensional algebras category. But not true.]



---

archive/issue_comments_317374.json:
```json
{
    "body": "<a id='comment:10'></a>The part that was missing in the current implementation is the basic construction `ring -> one dimensional vector space over this ring`. This construction makes sense for any ring and hence makes sense in Sage category framework.\n\nYou are right that for *some* specific ring, there might be other natural vector spaces. In this case it is possible to add more specialized implementations. And this is exactly what is being done for finite fields.",
    "created_at": "2016-10-19T09:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317374",
    "user": "https://github.com/videlec"
}
```

<a id='comment:10'></a>The part that was missing in the current implementation is the basic construction `ring -> one dimensional vector space over this ring`. This construction makes sense for any ring and hence makes sense in Sage category framework.

You are right that for *some* specific ring, there might be other natural vector spaces. In this case it is possible to add more specialized implementations. And this is exactly what is being done for finite fields.



---

archive/issue_comments_317375.json:
```json
{
    "body": "<a id='comment:11'></a>And something more general that could be done is to see `GF(2^4)` as a vector space over `GF(2^2)`. But the current interface does not allow it.",
    "created_at": "2016-10-19T10:15:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317375",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>And something more general that could be done is to see `GF(2^4)` as a vector space over `GF(2^2)`. But the current interface does not allow it.



---

archive/issue_comments_317376.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-19T10:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317376",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317377.json:
```json
{
    "body": "<a id='comment:13'></a>(1) You added `vector_space` method to the fields category. How can this be useful at all? You can always construct the vector spaces directly by `QQ*n`.\n\n(2)  About `_matrix_` method: Its docstring says \"Return the matrix of right multiplication by the element on the power basis `1, x, x^2, \\ldots, x^{d-1}` for the field extension.  Thus the \\emph{rows} of this matrix give the images of each of the `x^i`.\" So we have\n\n```\nsage: b=a^10\nsage: v=b._vector_()\nsage: m=a._matrix_()\nsage: w=(a*b)._vector_()\nsage: m*v == w\nTrue\n```\n\nShouldn't this be called the \"matrix of left multiplication by the element a\"? And the columns of this matrix give the images of `x^i`?\n\n(3) The `reverse` argument for `_matrix_` method corresponds to `reverse`ed `_vector_`. Therefore I expect `m*v == w` still holds with reversed versions. But\n\n```\nsage: v=b._vector_(reverse=True)\nsage: m=a._matrix_(reverse=True)\nsage: w=(a*b)._vector_(reverse=True)\nsage: m*v == w\nFalse\nsage: m*v\n(1, 1, 1, 1)\nsage: w\n(1, 1, 1, 0)\nsage: \n```\nI think this is a bug. Why does transposing the matrix gives what we want? The correct way would be reversing all columns and all rows.\n\nBy the way, you changed the docstring for `reverse` argument. But the original one makes more sense.",
    "created_at": "2016-10-19T22:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317377",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:13'></a>(1) You added `vector_space` method to the fields category. How can this be useful at all? You can always construct the vector spaces directly by `QQ*n`.

(2)  About `_matrix_` method: Its docstring says "Return the matrix of right multiplication by the element on the power basis `1, x, x^2, \ldots, x^{d-1}` for the field extension.  Thus the \emph{rows} of this matrix give the images of each of the `x^i`." So we have

```
sage: b=a^10
sage: v=b._vector_()
sage: m=a._matrix_()
sage: w=(a*b)._vector_()
sage: m*v == w
True
```

Shouldn't this be called the "matrix of left multiplication by the element a"? And the columns of this matrix give the images of `x^i`?

(3) The `reverse` argument for `_matrix_` method corresponds to `reverse`ed `_vector_`. Therefore I expect `m*v == w` still holds with reversed versions. But

```
sage: v=b._vector_(reverse=True)
sage: m=a._matrix_(reverse=True)
sage: w=(a*b)._vector_(reverse=True)
sage: m*v == w
False
sage: m*v
(1, 1, 1, 1)
sage: w
(1, 1, 1, 0)
sage: 
```
I think this is a bug. Why does transposing the matrix gives what we want? The correct way would be reversing all columns and all rows.

By the way, you changed the docstring for `reverse` argument. But the original one makes more sense.



---

archive/issue_comments_317378.json:
```json
{
    "body": "<a id='comment:14'></a>Prime finite fields already have `vector_space` method.\n\n```\nsage: F=GF(3)\nsage: V=F.vector_space()\nsage: V([F.gen()])\n(1)\n```\nSo the bug dealt with the present ticket is just in the prime finite field. I still think that touching the Rings category is not the right way.",
    "created_at": "2016-10-19T22:18:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317378",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:14'></a>Prime finite fields already have `vector_space` method.

```
sage: F=GF(3)
sage: V=F.vector_space()
sage: V([F.gen()])
(1)
```
So the bug dealt with the present ticket is just in the prime finite field. I still think that touching the Rings category is not the right way.



---

archive/issue_comments_317379.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 klee]:\n> So the bug dealt with the present ticket is just in the prime finite field. I still think that touching the Rings category is not the right way.\n\n\nWhy?",
    "created_at": "2016-10-20T06:36:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317379",
    "user": "https://github.com/videlec"
}
```

<a id='comment:15'></a>Replying to [comment:14 klee]:
> So the bug dealt with the present ticket is just in the prime finite field. I still think that touching the Rings category is not the right way.


Why?



---

archive/issue_comments_317380.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:15 vdelecroix]:\n> Replying to [comment:14 klee]:\n> > So the bug dealt with the present ticket is just in the prime finite field. I still think that touching the Rings category is not the right way.\n\n> \n> Why?\n\n\nBefore:\n\n```\nsage: K.<a>=QQ.extension(x^2-2)\nsage: K.vector_space()\n\n(Vector space of dimension 2 over Rational Field, Isomorphism map:\n   From: Vector space of dimension 2 over Rational Field\n   To:   Number Field in a with defining polynomial x^2 - 2, Isomorphism map:\n   From: Number Field in a with defining polynomial x^2 - 2\n   To:   Vector space of dimension 2 over Rational Field)\nsage: a.vector()\n(0, 1)\nsage: vector(a)\n(0, 1)\n```\n\nAfter your patch:\n\n```\nsage: a.vector()\n(0, 1)\nsage: vector(a)\n(a)\n```\n\nSo `.vector()` and `._vector_()` should be context-sensitive.",
    "created_at": "2016-10-20T07:46:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317380",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:16'></a>Replying to [comment:15 vdelecroix]:
> Replying to [comment:14 klee]:
> > So the bug dealt with the present ticket is just in the prime finite field. I still think that touching the Rings category is not the right way.

> 
> Why?


Before:

```
sage: K.<a>=QQ.extension(x^2-2)
sage: K.vector_space()

(Vector space of dimension 2 over Rational Field, Isomorphism map:
   From: Vector space of dimension 2 over Rational Field
   To:   Number Field in a with defining polynomial x^2 - 2, Isomorphism map:
   From: Number Field in a with defining polynomial x^2 - 2
   To:   Vector space of dimension 2 over Rational Field)
sage: a.vector()
(0, 1)
sage: vector(a)
(0, 1)
```

After your patch:

```
sage: a.vector()
(0, 1)
sage: vector(a)
(a)
```

So `.vector()` and `._vector_()` should be context-sensitive.



---

archive/issue_comments_317381.json:
```json
{
    "body": "<a id='comment:17'></a>The `._vector_()` in that case should be an alias of `.vector()`. What the `vector(a)` is doing is calling `list(a)` and then interpreting that as a vector. I'm +1 for putting something generic in `Rings` since it helps realize that any ring is a 1-dim free module over itself. Although we should put some specification in the docstring; something along the lines of \"Return ``self`` as a vector in some natural module.\"",
    "created_at": "2016-10-20T14:00:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317381",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'></a>The `._vector_()` in that case should be an alias of `.vector()`. What the `vector(a)` is doing is calling `list(a)` and then interpreting that as a vector. I'm +1 for putting something generic in `Rings` since it helps realize that any ring is a 1-dim free module over itself. Although we should put some specification in the docstring; something along the lines of "Return ``self`` as a vector in some natural module."



---

archive/issue_comments_317382.json:
```json
{
    "body": "<a id='comment:18'></a>But as Kwankyu mentioned it is not what we want for field extensions. We should found a consistent way of doing the identification `ring = one-dimensional free module` but without overlap with the existing field extension business.",
    "created_at": "2016-10-20T14:04:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317382",
    "user": "https://github.com/videlec"
}
```

<a id='comment:18'></a>But as Kwankyu mentioned it is not what we want for field extensions. We should found a consistent way of doing the identification `ring = one-dimensional free module` but without overlap with the existing field extension business.



---

archive/issue_comments_317383.json:
```json
{
    "body": "<a id='comment:19'></a>It's a similar problem to what we have with `gens` being ambiguous, but for `gens`, we could get out of it by being more explicit about what type of generators. For `_vector_`, we don't have the option of specializing the name of the method, but we can be very careful with the specs. In particular, by saying \"some natural module,\" we give the option for subclasses to specify what that natural module is, which could change. So in the generic case, it is the 1-dim module over itself, but for field extensions, the natural module is the one over the base field.",
    "created_at": "2016-10-20T14:13:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317383",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>It's a similar problem to what we have with `gens` being ambiguous, but for `gens`, we could get out of it by being more explicit about what type of generators. For `_vector_`, we don't have the option of specializing the name of the method, but we can be very careful with the specs. In particular, by saying "some natural module," we give the option for subclasses to specify what that natural module is, which could change. So in the generic case, it is the 1-dim module over itself, but for field extensions, the natural module is the one over the base field.



---

archive/issue_comments_317384.json:
```json
{
    "body": "Alternative light-footed patch",
    "created_at": "2016-10-21T07:37:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317384",
    "user": "https://github.com/kwankyu"
}
```

Alternative light-footed patch



---

archive/issue_comments_317385.json:
```json
{
    "body": "<a id='comment:20'></a>Attachment [trac21723_klee.patch](tarball://root/attachments/some-uuid/ticket21723/trac21723_klee.patch) by @kwankyu created at 2016-10-21 07:51:37\n\nAdding `_vector_` to a category level would incur much work to make existing parents conform to the new organization. It may be possible and in the long run is a way to go. But in this particular case, I think that the gain is small compared to the needed efforts. \n\nI uploaded an alternative simple way to fix the bug. This just does a small thing to squeeze the bug. If you agree, then you may merge it with your other changes.",
    "created_at": "2016-10-21T07:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317385",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:20'></a>Attachment [trac21723_klee.patch](tarball://root/attachments/some-uuid/ticket21723/trac21723_klee.patch) by @kwankyu created at 2016-10-21 07:51:37

Adding `_vector_` to a category level would incur much work to make existing parents conform to the new organization. It may be possible and in the long run is a way to go. But in this particular case, I think that the gain is small compared to the needed efforts. 

I uploaded an alternative simple way to fix the bug. This just does a small thing to squeeze the bug. If you agree, then you may merge it with your other changes.



---

archive/issue_comments_317386.json:
```json
{
    "body": "<a id='comment:21'></a>I agree that your patch might fix the symptom. As discussed with Travis, the real problem is that `_vector_` and `vector` do not have a fixed semantic. I am in favor of including your patch in this ticket alone and try to fix the `_vector_`/`vector` issue in some other tickets. Travis?",
    "created_at": "2016-10-21T07:57:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317386",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>I agree that your patch might fix the symptom. As discussed with Travis, the real problem is that `_vector_` and `vector` do not have a fixed semantic. I am in favor of including your patch in this ticket alone and try to fix the `_vector_`/`vector` issue in some other tickets. Travis?



---

archive/issue_comments_317387.json:
```json
{
    "body": "<a id='comment:22'></a>#21737",
    "created_at": "2016-10-21T08:08:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317387",
    "user": "https://github.com/videlec"
}
```

<a id='comment:22'></a>#21737



---

archive/issue_comments_317388.json:
```json
{
    "body": "<a id='comment:23'></a>I like the changes you made to `_vector_` and `_matrix_` methods in `element_base.pyx` modulo my comments above. If you are ok, I may take it to fix the bug in `_matrix_` method that I mentioned above. Anyway, do you agree with my comments on the `_matrix_` method?",
    "created_at": "2016-10-21T08:17:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317388",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:23'></a>I like the changes you made to `_vector_` and `_matrix_` methods in `element_base.pyx` modulo my comments above. If you are ok, I may take it to fix the bug in `_matrix_` method that I mentioned above. Anyway, do you agree with my comments on the `_matrix_` method?



---

archive/issue_comments_317389.json:
```json
{
    "body": "Attachment [trac21723_matrix_.patch](tarball://root/attachments/some-uuid/ticket21723/trac21723_matrix_.patch) by @kwankyu created at 2016-10-21 10:02:24\n\nFix a bug in reversed _matrix_",
    "created_at": "2016-10-21T10:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317389",
    "user": "https://github.com/kwankyu"
}
```

Attachment [trac21723_matrix_.patch](tarball://root/attachments/some-uuid/ticket21723/trac21723_matrix_.patch) by @kwankyu created at 2016-10-21 10:02:24

Fix a bug in reversed _matrix_



---

archive/issue_comments_317390.json:
```json
{
    "body": "<a id='comment:24'></a>I'm good with moving the general problem to another ticket and fixing the symptom here. Kwankyu, could you upload your fix as a new branch?",
    "created_at": "2016-10-21T14:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317390",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:24'></a>I'm good with moving the general problem to another ticket and fixing the symptom here. Kwankyu, could you upload your fix as a new branch?



---

archive/issue_comments_317391.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-22T13:12:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317391",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317392.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -20,7 +20,9 @@\n AttributeError: 'sage.rings.finite_rings.integer_mod.IntegerMod_int' object has no attribute '_vector_'\n ```\n \n-Adding a `_vector_` method to the `GF(p)` elements will be a simple fix.\n+Adding a `_vector_` method to the `GF(p)` elements will be a simple fix. \n+\n+Along the way, we also clean up `_vector_` and `_matrix_` methods in the class `FinitePolyExtElement`. \n \n Comment: 1\n \n``````\n",
    "created_at": "2016-10-22T13:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317392",
    "user": "https://github.com/kwankyu"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -20,7 +20,9 @@
 AttributeError: 'sage.rings.finite_rings.integer_mod.IntegerMod_int' object has no attribute '_vector_'
 ```
 
-Adding a `_vector_` method to the `GF(p)` elements will be a simple fix.
+Adding a `_vector_` method to the `GF(p)` elements will be a simple fix. 
+
+Along the way, we also clean up `_vector_` and `_matrix_` methods in the class `FinitePolyExtElement`. 
 
 Comment: 1
 
``````




---

archive/issue_comments_317393.json:
```json
{
    "body": "<a id='comment:29'></a>One little thing: `Example::` -> `EXAMPLES::` and then I'm happy setting a positive review.",
    "created_at": "2016-10-22T19:55:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317393",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>One little thing: `Example::` -> `EXAMPLES::` and then I'm happy setting a positive review.



---

archive/issue_comments_317394.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-22T21:22:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317394",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317395.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-22T23:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317395",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317396.json:
```json
{
    "body": "<a id='comment:32'></a>Travis?",
    "created_at": "2016-10-25T10:19:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317396",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:32'></a>Travis?



---

archive/issue_comments_317397.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-10-25T12:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317397",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_317398.json:
```json
{
    "body": "<a id='comment:33'></a>Thanks.",
    "created_at": "2016-10-25T12:36:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317398",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:33'></a>Thanks.



---

archive/issue_events_057531.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-02T19:19:55Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21723#event-57531"
}
```



---

archive/issue_comments_317399.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-02T19:19:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21723",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21723#issuecomment-317399",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
