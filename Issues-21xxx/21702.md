# Issue 21702: Segfault with fraction field of multivariate ZZ polynomials as base ring of symmetric functions

archive/issues_021465.json:
```json
{
    "assignees": [],
    "body": "We have the following:\n\n```\nsage: SymmetricFunctions(FractionField(QQ['q','t']))\nSymmetric Functions over Fraction Field of Multivariate Polynomial Ring in q, t over Rational Field\nsage: SymmetricFunctions(FractionField(ZZ['q']))\nSymmetric Functions over Fraction Field of Univariate Polynomial Ring in q over Integer Ring\nsage: SymmetricFunctions(FractionField(ZZ['q','t']))\nSegmentation fault (core dumped)\n```\nHowever, the last one works with Sage 7.3.\n\nCC:  @kiwifb\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21702_\n\n",
    "closed_at": "2016-10-21T07:53:54Z",
    "created_at": "2016-10-14T03:51:25Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20cython",
        "https://github.com/sagemath/sage/labels/invalid",
        "https://github.com/sagemath/sage/labels/worksforme"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Segfault with fraction field of multivariate ZZ polynomials as base ring of symmetric functions",
    "type": "issue",
    "updated_at": "2016-10-21T07:53:54Z",
    "url": "https://github.com/sagemath/sage/issues/21702",
    "user": "https://github.com/tscrim"
}
```
We have the following:

```
sage: SymmetricFunctions(FractionField(QQ['q','t']))
Symmetric Functions over Fraction Field of Multivariate Polynomial Ring in q, t over Rational Field
sage: SymmetricFunctions(FractionField(ZZ['q']))
Symmetric Functions over Fraction Field of Univariate Polynomial Ring in q over Integer Ring
sage: SymmetricFunctions(FractionField(ZZ['q','t']))
Segmentation fault (core dumped)
```
However, the last one works with Sage 7.3.

CC:  @kiwifb

_Issue created by migration from https://trac.sagemath.org/ticket/21702_





---

archive/issue_events_286630.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-14T03:51:25Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286630"
}
```



---

archive/issue_events_286631.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-14T03:51:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20cython",
    "label_color": "000080",
    "label_name": "component: cython",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286631"
}
```



---

archive/issue_events_286632.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-14T03:51:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286632"
}
```



---

archive/issue_events_286633.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-14T03:51:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286633"
}
```



---

archive/issue_comments_321679.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nI don't think this is caused by #12439 as the trace goes through libsingular.",
    "created_at": "2016-10-14T03:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21702#issuecomment-321679",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:1" align="right">Comment 1</div>

I don't think this is caused by #12439 as the trace goes through libsingular.



---

archive/issue_events_286634.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-14T04:03:34Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "title_is": "Segfault with fraction field of multivariate ZZ polynomials as base ring of symmetric functions",
    "title_was": "symmetrica segfaults with fraction field of multivariate ZZ polynomials",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286634"
}
```



---

archive/issue_comments_321680.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\ntrace?",
    "created_at": "2016-10-14T04:05:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21702#issuecomment-321680",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">Comment 3</div>

trace?



---

archive/issue_comments_321681.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">Comment 4</div>\n\nAttachment: **[sym_trace.log](https://github.com/sagemath/sage/files/ticket21702/sym_trace.log)**\n\nAttached.",
    "created_at": "2016-10-14T04:12:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21702#issuecomment-321681",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">Comment 4</div>

Attachment: **[sym_trace.log](https://github.com/sagemath/sage/files/ticket21702/sym_trace.log)**

Attached.



---

archive/issue_comments_321682.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nWorks for me on Sage 7.4.rc1:\n\n```\nsage: SymmetricFunctions(FractionField(QQ['q','t']))\nSymmetric Functions over Fraction Field of Multivariate Polynomial Ring in q, t over Rational Field\nsage: SymmetricFunctions(FractionField(ZZ['q']))\nSymmetric Functions over Fraction Field of Univariate Polynomial Ring in q over Integer Ring\nsage: SymmetricFunctions(FractionField(ZZ['q','t']))\nSymmetric Functions over Fraction Field of Multivariate Polynomial Ring in q, t over Integer Ring\n```",
    "created_at": "2016-10-14T16:10:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21702#issuecomment-321682",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:5" align="right">Comment 5</div>

Works for me on Sage 7.4.rc1:

```
sage: SymmetricFunctions(FractionField(QQ['q','t']))
Symmetric Functions over Fraction Field of Multivariate Polynomial Ring in q, t over Rational Field
sage: SymmetricFunctions(FractionField(ZZ['q']))
Symmetric Functions over Fraction Field of Univariate Polynomial Ring in q over Integer Ring
sage: SymmetricFunctions(FractionField(ZZ['q','t']))
Symmetric Functions over Fraction Field of Multivariate Polynomial Ring in q, t over Integer Ring
```



---

archive/issue_comments_321683.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nThat's good to know but slightly unsettling at the same time. I forced a rebuild of symmetrica once I saw this, but I'm now convinced that is not the problem. Maybe it's something with the compiler? I used gcc 5.4.0 to build Sage. Although I guess we should wait to try and diagnose this further once `7.5.beta0` comes out, which should have Singular 4.",
    "created_at": "2016-10-14T18:25:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21702#issuecomment-321683",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">Comment 6</div>

That's good to know but slightly unsettling at the same time. I forced a rebuild of symmetrica once I saw this, but I'm now convinced that is not the problem. Maybe it's something with the compiler? I used gcc 5.4.0 to build Sage. Although I guess we should wait to try and diagnose this further once `7.5.beta0` comes out, which should have Singular 4.



---

archive/issue_events_286635.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-20T20:31:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286635"
}
```



---

archive/issue_events_286636.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-20T20:31:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "label": "https://github.com/sagemath/sage/labels/p2%20%E2%80%93%20critical",
    "label_color": "ff7700",
    "label_name": "p2 \u2013 critical",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286636"
}
```



---

archive/issue_events_286637.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-20T20:31:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286637"
}
```



---

archive/issue_events_286638.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-10-20T20:31:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286638"
}
```



---

archive/issue_comments_321684.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nHmm...this now is working for me now that I bumped to 7.4.rc2. I might have just done something to mess up my install when testing stuff... So perhaps we should just close this as invalid.",
    "created_at": "2016-10-20T20:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21702#issuecomment-321684",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">Comment 7</div>

Hmm...this now is working for me now that I bumped to 7.4.rc2. I might have just done something to mess up my install when testing stuff... So perhaps we should just close this as invalid.



---

archive/issue_events_286639.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-21T07:53:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286639"
}
```



---

archive/issue_events_286640.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-21T07:53:54Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286640"
}
```



---

archive/issue_events_286641.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-21T07:53:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21702",
    "label": "https://github.com/sagemath/sage/labels/worksforme",
    "label_color": "a6a6a6",
    "label_name": "worksforme",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21702#event-286641"
}
```
