# Issue 21963: Upgrade to pynac-0.7.2

archive/issues_021726.json:
```json
{
    "assignees": [],
    "body": "Pynac-0.7.2:\n* add libfactory interface; unconditionally replace GiNaC GCD with Singular (~~Giac GCD if available~~); this fixes #10284; it means that Singular is now another Pynac dependency\n* ~~reenable unconditional use of Giac if available (#21885)~~\n* fix zeta expansion around 1 (behackl) (#21899)\n* fix Giac GCD doctest fail\n* fix NaN unpickling (uncovered in #20939)\n* fix Flint underlinking (fbissey)\n* fix dilog problems (#19906)\n* fix Singular GCD interface\n* fix is_real(positive<sup>real</sup>) (#21940)\n* better error message with evalf of some orthogonal polys\n* improve pkg-config usage\n* add internal rising/falling factorial\n\n**Tarball**: https://github.com/pynac/pynac/releases/download/pynac-0.7.2/pynac-0.7.2.tar.bz2\n\n~~Needs to specifically tested on Debian/Ubuntu because of #21885.~~\n\nBranch/Commit: **[`6130c95`](https://github.com/sagemath/sagetrac-mirror/commit/6130c9586fe8c0ca8b80615aec4cb37604b0dbe6)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Ralf Stephan**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21963_\n\n",
    "closed_at": "2016-12-10T12:38:13Z",
    "created_at": "2016-11-24T15:32:39Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to pynac-0.7.2",
    "type": "issue",
    "updated_at": "2016-12-10T12:38:13Z",
    "url": "https://github.com/sagemath/sage/issues/21963",
    "user": "https://github.com/rwst"
}
```
Pynac-0.7.2:
* add libfactory interface; unconditionally replace GiNaC GCD with Singular (~~Giac GCD if available~~); this fixes #10284; it means that Singular is now another Pynac dependency
* ~~reenable unconditional use of Giac if available (#21885)~~
* fix zeta expansion around 1 (behackl) (#21899)
* fix Giac GCD doctest fail
* fix NaN unpickling (uncovered in #20939)
* fix Flint underlinking (fbissey)
* fix dilog problems (#19906)
* fix Singular GCD interface
* fix is_real(positive<sup>real</sup>) (#21940)
* better error message with evalf of some orthogonal polys
* improve pkg-config usage
* add internal rising/falling factorial

**Tarball**: https://github.com/pynac/pynac/releases/download/pynac-0.7.2/pynac-0.7.2.tar.bz2

~~Needs to specifically tested on Debian/Ubuntu because of #21885.~~

Branch/Commit: **[`6130c95`](https://github.com/sagemath/sagetrac-mirror/commit/6130c9586fe8c0ca8b80615aec4cb37604b0dbe6)**

Reviewer: **François Bissey**

Author: **Ralf Stephan**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/21963_





---

archive/issue_events_305046.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-24T15:32:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305046"
}
```



---

archive/issue_events_305047.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-24T15:32:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305047"
}
```



---

archive/issue_events_305048.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-24T15:32:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305048"
}
```



---

archive/issue_events_305049.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-24T15:32:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305049"
}
```



---

archive/issue_comments_323541.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,6 @@\n Pynac-0.7.1:\n * add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac still optional); this fixes #10284; it means that Singular is now another Pynac dependency\n+* reenable unconditional use of Giac if available (#21885)\n * fix zeta expansion around 1 (behackl)\n * fix Giac GCD doctest fail\n * fix NaN unpickling (uncovered in #20939)\n``````\n",
    "created_at": "2016-11-24T15:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323541",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,6 @@
 Pynac-0.7.1:
 * add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac still optional); this fixes #10284; it means that Singular is now another Pynac dependency
+* reenable unconditional use of Giac if available (#21885)
 * fix zeta expansion around 1 (behackl)
 * fix Giac GCD doctest fail
 * fix NaN unpickling (uncovered in #20939)
``````




---

archive/issue_comments_323542.json:
```json
{
    "body": "Branch: **[u/rws/upgrade_to_pynac_0_7_1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/upgrade_to_pynac_0_7_1)**",
    "created_at": "2016-11-24T16:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323542",
    "user": "https://github.com/rwst"
}
```

Branch: **[u/rws/upgrade_to_pynac_0_7_1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/upgrade_to_pynac_0_7_1)**



---

archive/issue_comments_323543.json:
```json
{
    "body": "Author: **Ralf Stephan**",
    "created_at": "2016-11-24T16:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323543",
    "user": "https://github.com/rwst"
}
```

Author: **Ralf Stephan**



---

archive/issue_comments_323544.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/431bd363d5160f417e1fe686e2c35deaaaf5a4f3\"><code>431bd36</code></a></td><td><code>update version/chksum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17a471f478fb0023294cf3c9e3e2b54a95e4a453\"><code>17a471f</code></a></td><td><code>always set CXXFLAGS=-g -O3; always build/link to Giac if available</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0d8872d5b9cb198e2fed0180507b90797790ed5\"><code>f0d8872</code></a></td><td><code>Singular dependency</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/83ce083acbf54c6744ab60340ed20eab5d4ce1f3\"><code>83ce083</code></a></td><td><code>specify namespace in Sage/Pynac interface because of name clash</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87d3c90fadd640ae9443afea10f0767836624f31\"><code>87d3c90</code></a></td><td><code>enable/restate GCD doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/738b8a0462099021dc590ae397c5d7b690c9c256\"><code>738b8a0</code></a></td><td><code>doctest changes because of zeta series fix</code></td></tr></table>\n",
    "created_at": "2016-11-24T16:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323544",
    "user": "https://github.com/rwst"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/431bd363d5160f417e1fe686e2c35deaaaf5a4f3"><code>431bd36</code></a></td><td><code>update version/chksum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17a471f478fb0023294cf3c9e3e2b54a95e4a453"><code>17a471f</code></a></td><td><code>always set CXXFLAGS=-g -O3; always build/link to Giac if available</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0d8872d5b9cb198e2fed0180507b90797790ed5"><code>f0d8872</code></a></td><td><code>Singular dependency</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/83ce083acbf54c6744ab60340ed20eab5d4ce1f3"><code>83ce083</code></a></td><td><code>specify namespace in Sage/Pynac interface because of name clash</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87d3c90fadd640ae9443afea10f0767836624f31"><code>87d3c90</code></a></td><td><code>enable/restate GCD doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/738b8a0462099021dc590ae397c5d7b690c9c256"><code>738b8a0</code></a></td><td><code>doctest changes because of zeta series fix</code></td></tr></table>




---

archive/issue_comments_323545.json:
```json
{
    "body": "Commit: **[`738b8a0`](https://github.com/sagemath/sagetrac-mirror/commit/738b8a0462099021dc590ae397c5d7b690c9c256)**",
    "created_at": "2016-11-24T16:02:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323545",
    "user": "https://github.com/rwst"
}
```

Commit: **[`738b8a0`](https://github.com/sagemath/sagetrac-mirror/commit/738b8a0462099021dc590ae397c5d7b690c9c256)**



---

archive/issue_events_305050.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-24T16:02:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305050"
}
```



---

archive/issue_comments_323546.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,5 @@\n * add internal rising/falling factorial\n \n https://github.com/pynac/pynac/releases/download/pynac-0.7.1/pynac-0.7.1.tar.bz2\n+\n+Needs to specifically tested on Debian/Ubuntu because of #21885.\n``````\n",
    "created_at": "2016-11-24T16:04:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323546",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,5 @@
 * add internal rising/falling factorial
 
 https://github.com/pynac/pynac/releases/download/pynac-0.7.1/pynac-0.7.1.tar.bz2
+
+Needs to specifically tested on Debian/Ubuntu because of #21885.
``````




---

archive/issue_comments_323547.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,7 @@\n Pynac-0.7.1:\n * add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac still optional); this fixes #10284; it means that Singular is now another Pynac dependency\n * reenable unconditional use of Giac if available (#21885)\n-* fix zeta expansion around 1 (behackl)\n+* fix zeta expansion around 1 (behackl) (#21899)\n * fix Giac GCD doctest fail\n * fix NaN unpickling (uncovered in #20939)\n * fix Flint underlinking (fbissey)\n``````\n",
    "created_at": "2016-11-24T16:06:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323547",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,7 @@
 Pynac-0.7.1:
 * add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac still optional); this fixes #10284; it means that Singular is now another Pynac dependency
 * reenable unconditional use of Giac if available (#21885)
-* fix zeta expansion around 1 (behackl)
+* fix zeta expansion around 1 (behackl) (#21899)
 * fix Giac GCD doctest fail
 * fix NaN unpickling (uncovered in #20939)
 * fix Flint underlinking (fbissey)
``````




---

archive/issue_comments_323548.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Pynac-0.7.1:\n-* add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac still optional); this fixes #10284; it means that Singular is now another Pynac dependency\n+* add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac GCD if available); this fixes #10284; it means that Singular is now another Pynac dependency\n * reenable unconditional use of Giac if available (#21885)\n * fix zeta expansion around 1 (behackl) (#21899)\n * fix Giac GCD doctest fail\n``````\n",
    "created_at": "2016-11-24T16:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323548",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Pynac-0.7.1:
-* add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac still optional); this fixes #10284; it means that Singular is now another Pynac dependency
+* add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac GCD if available); this fixes #10284; it means that Singular is now another Pynac dependency
 * reenable unconditional use of Giac if available (#21885)
 * fix zeta expansion around 1 (behackl) (#21899)
 * fix Giac GCD doctest fail
``````




---

archive/issue_comments_323549.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74ef6bfd97152198ad6108342baa1819ed401acc\"><code>74ef6bf</code></a></td><td><code>Merge branch 'develop' into t/21963/upgrade_to_pynac_0_7_1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d219c67392cc58790d04bdfb9fdbbcdd26b3c9ff\"><code>d219c67</code></a></td><td><code>complete NaN handling in interface</code></td></tr></table>\n",
    "created_at": "2016-11-25T08:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323549",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74ef6bfd97152198ad6108342baa1819ed401acc"><code>74ef6bf</code></a></td><td><code>Merge branch 'develop' into t/21963/upgrade_to_pynac_0_7_1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d219c67392cc58790d04bdfb9fdbbcdd26b3c9ff"><code>d219c67</code></a></td><td><code>complete NaN handling in interface</code></td></tr></table>




---

archive/issue_comments_323550.json:
```json
{
    "body": "Changed commit from **[`738b8a0`](https://github.com/sagemath/sagetrac-mirror/commit/738b8a0462099021dc590ae397c5d7b690c9c256)** to **[`d219c67`](https://github.com/sagemath/sagetrac-mirror/commit/d219c67392cc58790d04bdfb9fdbbcdd26b3c9ff)**",
    "created_at": "2016-11-25T08:47:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323550",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`738b8a0`](https://github.com/sagemath/sagetrac-mirror/commit/738b8a0462099021dc590ae397c5d7b690c9c256)** to **[`d219c67`](https://github.com/sagemath/sagetrac-mirror/commit/d219c67392cc58790d04bdfb9fdbbcdd26b3c9ff)**



---

archive/issue_comments_323551.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nHi ralf, I think that with this pynac the giac spkg must be a dependency.\n\nIndeed, I have tried to build sage on a system which have also a version of giac that I am not allowed to remove (and no control of how it was built). In my case it was bernard parisse's binary package installed by root. So this version of libgiac was built with all options and with libao support, but the libao headers were not installed on my system.\n\nBut now when building sage, pynac found this unexpected giac and the built was broken because of libao problems.\n\nThen installing also the giac spkg and the built of sage is going further (although I have not finshed yet)",
    "created_at": "2016-11-25T14:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323551",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:8" align="right">comment:8</div>

Hi ralf, I think that with this pynac the giac spkg must be a dependency.

Indeed, I have tried to build sage on a system which have also a version of giac that I am not allowed to remove (and no control of how it was built). In my case it was bernard parisse's binary package installed by root. So this version of libgiac was built with all options and with libao support, but the libao headers were not installed on my system.

But now when building sage, pynac found this unexpected giac and the built was broken because of libao problems.

Then installing also the giac spkg and the built of sage is going further (although I have not finshed yet)



---

archive/issue_comments_323552.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThanks for the effort Fr\u00e9d\u00e9ric.\n\nGiac is not a standard package so can be no dependency. Pynac needs to detect such Giac versions that cannot be linked to. As I think this is more tricky we will disable Giac again and reenable in a later version when a solution is found.",
    "created_at": "2016-11-25T15:55:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323552",
    "user": "https://github.com/rwst"
}
```

<div id="comment:9" align="right">comment:9</div>

Thanks for the effort Frédéric.

Giac is not a standard package so can be no dependency. Pynac needs to detect such Giac versions that cannot be linked to. As I think this is more tricky we will disable Giac again and reenable in a later version when a solution is found.



---

archive/issue_comments_323553.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9521c4074e338fc0c42d257453cfb3b7e8cfc076\"><code>9521c40</code></a></td><td><code>21963: disable Giac because of problems with versions outside Sage</code></td></tr></table>\n",
    "created_at": "2016-11-25T16:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323553",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9521c4074e338fc0c42d257453cfb3b7e8cfc076"><code>9521c40</code></a></td><td><code>21963: disable Giac because of problems with versions outside Sage</code></td></tr></table>




---

archive/issue_comments_323554.json:
```json
{
    "body": "Changed commit from **[`d219c67`](https://github.com/sagemath/sagetrac-mirror/commit/d219c67392cc58790d04bdfb9fdbbcdd26b3c9ff)** to **[`9521c40`](https://github.com/sagemath/sagetrac-mirror/commit/9521c4074e338fc0c42d257453cfb3b7e8cfc076)**",
    "created_at": "2016-11-25T16:00:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323554",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d219c67`](https://github.com/sagemath/sagetrac-mirror/commit/d219c67392cc58790d04bdfb9fdbbcdd26b3c9ff)** to **[`9521c40`](https://github.com/sagemath/sagetrac-mirror/commit/9521c4074e338fc0c42d257453cfb3b7e8cfc076)**



---

archive/issue_comments_323555.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n Pynac-0.7.1:\n-* add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac GCD if available); this fixes #10284; it means that Singular is now another Pynac dependency\n-* reenable unconditional use of Giac if available (#21885)\n+* add libfactory interface; unconditionally replace GiNaC GCD with Singular (~~Giac GCD if available~~); this fixes #10284; it means that Singular is now another Pynac dependency\n+* ~~reenable unconditional use of Giac if available (#21885)~~\n * fix zeta expansion around 1 (behackl) (#21899)\n * fix Giac GCD doctest fail\n * fix NaN unpickling (uncovered in #20939)\n@@ -9,4 +9,4 @@\n \n https://github.com/pynac/pynac/releases/download/pynac-0.7.1/pynac-0.7.1.tar.bz2\n \n-Needs to specifically tested on Debian/Ubuntu because of #21885.\n+~~Needs to specifically tested on Debian/Ubuntu because of #21885.~~\n``````\n",
    "created_at": "2016-11-25T16:03:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323555",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 Pynac-0.7.1:
-* add libfactory interface; unconditionally replace GiNaC GCD with Singular (Giac GCD if available); this fixes #10284; it means that Singular is now another Pynac dependency
-* reenable unconditional use of Giac if available (#21885)
+* add libfactory interface; unconditionally replace GiNaC GCD with Singular (~~Giac GCD if available~~); this fixes #10284; it means that Singular is now another Pynac dependency
+* ~~reenable unconditional use of Giac if available (#21885)~~
 * fix zeta expansion around 1 (behackl) (#21899)
 * fix Giac GCD doctest fail
 * fix NaN unpickling (uncovered in #20939)
@@ -9,4 +9,4 @@
 
 https://github.com/pynac/pynac/releases/download/pynac-0.7.1/pynac-0.7.1.tar.bz2
 
-Needs to specifically tested on Debian/Ubuntu because of #21885.
+~~Needs to specifically tested on Debian/Ubuntu because of #21885.~~
``````




---

archive/issue_events_305051.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-26T09:14:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305051"
}
```



---

archive/issue_events_305052.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-11-26T09:14:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305052"
}
```



---

archive/issue_comments_323556.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nProblems in the Singular interface were found. A new version is necessary.",
    "created_at": "2016-11-26T09:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323556",
    "user": "https://github.com/rwst"
}
```

<div id="comment:12" align="right">comment:12</div>

Problems in the Singular interface were found. A new version is necessary.



---

archive/issue_comments_323557.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@rwst](#comment:9):\n> Thanks for the effort Fr\u00e9d\u00e9ric.\n> \n> Giac is not a standard package so can be no dependency. Pynac needs to detect such Giac versions that cannot be linked to. As I think this is more tricky we will disable Giac again and reenable in a later version when a solution is found.\n> \n\nI don't know the procedure for giac to become a standard package, but it may be the more natural solution. I can see that Francois Bissey is already updating giac often in sage-on-gentoo:\nhttp://gpo.zugaina.org/sci-mathematics/giac/ChangeLog\n\n\nAbout the broken built I can give more details:\nThe point is that my system have a:\n/usr/lib/libgiac.la file containing this line:\n\n```\n# Libraries that this one depends upon.\ndependency_libs=' -lntl -lpari -lgsl -lgslcblas -lrt -lpthread -lao -lblas -ldl -lpng -lmpfi -lmpfr -lgmp'\n```\nand the pynac built broke there:\n\n```\n  CXXLD    libpynac.la\n/usr/bin/ld: cannot find -lao\ncollect2: error: ld returned 1 exit status\nMakefile:496: recipe for target 'libpynac.la' failed\n```\nNow I am testing the following:\nI put a copy of this libgiac.la in your ginac dir but removed the -lao and -lblas tags.\nThen I can build pynac without the giac spkg on this system and I have:\n\n```\nzeta(han)$ ldd local/lib/libpynac.so.9\n\tlinux-vdso.so.1 (0x00007ffe10db9000)\n\tlibpython2.7.so.1.0 => /home/han/dev/sage-brouillon/local/lib/libpython2.7.so.1.0 (0x00007f1027917000)\n\tlibfactory-4.0.3.so => /home/han/dev/sage-brouillon/local/lib/libfactory-4.0.3.so (0x00007f1027555000)\n\tlibflint.so.13 => /home/han/dev/sage-brouillon/local/lib/libflint.so.13 (0x00007f1026e8b000)\n\tlibgmp.so.16 => /home/han/dev/sage-brouillon/local/lib/libgmp.so.16 (0x00007f1026c17000)\n\tlibstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f102690c000)\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f102660b000)\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f1026260000)\n\tlibgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f102604a000)\n\tlibpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f1025e2d000)\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f1025c29000)\n\tlibutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007f1025a26000)\n\tlibsingular_resources-4.0.3.so => /home/han/dev/sage-brouillon/local/lib/libsingular_resources-4.0.3.so (0x00007f1025821000)\n\tlibomalloc-0.9.6.so => /home/han/dev/sage-brouillon/local/lib/libomalloc-0.9.6.so (0x00007f1025617000)\n\tlibmpfr.so.4 => /home/han/dev/sage-brouillon/local/lib/libmpfr.so.4 (0x00007f10253bb000)\n\tlibntl.so.31 => /home/han/dev/sage-brouillon/local/lib/libntl.so.31 (0x00007f1024f8b000)\n\t/lib64/ld-linux-x86-64.so.2 (0x00007f102813b000)\n\tlibgf2x.so.1 => /home/han/dev/sage-brouillon/local/lib/libgf2x.so.1 (0x00007f1024d73000)\n```\nso it doesn't seem to be linked with this external giac?",
    "created_at": "2016-11-26T11:18:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323557",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@rwst](#comment:9):
> Thanks for the effort Frédéric.
> 
> Giac is not a standard package so can be no dependency. Pynac needs to detect such Giac versions that cannot be linked to. As I think this is more tricky we will disable Giac again and reenable in a later version when a solution is found.
> 

I don't know the procedure for giac to become a standard package, but it may be the more natural solution. I can see that Francois Bissey is already updating giac often in sage-on-gentoo:
http://gpo.zugaina.org/sci-mathematics/giac/ChangeLog


About the broken built I can give more details:
The point is that my system have a:
/usr/lib/libgiac.la file containing this line:

```
# Libraries that this one depends upon.
dependency_libs=' -lntl -lpari -lgsl -lgslcblas -lrt -lpthread -lao -lblas -ldl -lpng -lmpfi -lmpfr -lgmp'
```
and the pynac built broke there:

```
  CXXLD    libpynac.la
/usr/bin/ld: cannot find -lao
collect2: error: ld returned 1 exit status
Makefile:496: recipe for target 'libpynac.la' failed
```
Now I am testing the following:
I put a copy of this libgiac.la in your ginac dir but removed the -lao and -lblas tags.
Then I can build pynac without the giac spkg on this system and I have:

```
zeta(han)$ ldd local/lib/libpynac.so.9
	linux-vdso.so.1 (0x00007ffe10db9000)
	libpython2.7.so.1.0 => /home/han/dev/sage-brouillon/local/lib/libpython2.7.so.1.0 (0x00007f1027917000)
	libfactory-4.0.3.so => /home/han/dev/sage-brouillon/local/lib/libfactory-4.0.3.so (0x00007f1027555000)
	libflint.so.13 => /home/han/dev/sage-brouillon/local/lib/libflint.so.13 (0x00007f1026e8b000)
	libgmp.so.16 => /home/han/dev/sage-brouillon/local/lib/libgmp.so.16 (0x00007f1026c17000)
	libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f102690c000)
	libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f102660b000)
	libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f1026260000)
	libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f102604a000)
	libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f1025e2d000)
	libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f1025c29000)
	libutil.so.1 => /lib/x86_64-linux-gnu/libutil.so.1 (0x00007f1025a26000)
	libsingular_resources-4.0.3.so => /home/han/dev/sage-brouillon/local/lib/libsingular_resources-4.0.3.so (0x00007f1025821000)
	libomalloc-0.9.6.so => /home/han/dev/sage-brouillon/local/lib/libomalloc-0.9.6.so (0x00007f1025617000)
	libmpfr.so.4 => /home/han/dev/sage-brouillon/local/lib/libmpfr.so.4 (0x00007f10253bb000)
	libntl.so.31 => /home/han/dev/sage-brouillon/local/lib/libntl.so.31 (0x00007f1024f8b000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f102813b000)
	libgf2x.so.1 => /home/han/dev/sage-brouillon/local/lib/libgf2x.so.1 (0x00007f1024d73000)
```
so it doesn't seem to be linked with this external giac?



---

archive/issue_comments_323558.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nBloody `.la` files. They shouldn't be shipped. If `giac` is made a standard sage package it should be found and used before the system one thanks to `CPATH` and `RPATH` settings. The configure script should detect whether or not `giac` can be used.\n\nI inspected `giac`'s headers and it doesn't include `libao` headers in any way. But without `libao` dev package you probably don't have `libao.so` installed. \n\nAfter thinking about it I find curious that you have `libgiac.so` available on your system but not `libao.so`. `libgiac.so` should be in a dev package and that dev package should pull all the dependent dev packages otherwise it cannot be working. Was `giac` installed manually (not with the package manager) by your admin?",
    "created_at": "2016-11-26T20:00:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323558",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

Bloody `.la` files. They shouldn't be shipped. If `giac` is made a standard sage package it should be found and used before the system one thanks to `CPATH` and `RPATH` settings. The configure script should detect whether or not `giac` can be used.

I inspected `giac`'s headers and it doesn't include `libao` headers in any way. But without `libao` dev package you probably don't have `libao.so` installed. 

After thinking about it I find curious that you have `libgiac.so` available on your system but not `libao.so`. `libgiac.so` should be in a dev package and that dev package should pull all the dependent dev packages otherwise it cannot be working. Was `giac` installed manually (not with the package manager) by your admin?



---

archive/issue_comments_323559.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThere are other small minor problems with `pynac`'s `.pc` file. Now that you depend on `flint`, there should be a `-lflint` somewhere in the `.pc` file. If you use `factory` I would recommend to pull its configuration from `factory.pc` rather than what you do now. Then `factory` would have to be added in `pynac.pc` as a `Requires:` line (as a bonus it looks like `factory` depends on `flint` unconditionally so you would get `-lflint` for free from `factory.pc` in the output of `pkg-config --libs pynac`). I may be able to work on those problems from Tuesday.",
    "created_at": "2016-11-26T20:10:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323559",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

There are other small minor problems with `pynac`'s `.pc` file. Now that you depend on `flint`, there should be a `-lflint` somewhere in the `.pc` file. If you use `factory` I would recommend to pull its configuration from `factory.pc` rather than what you do now. Then `factory` would have to be added in `pynac.pc` as a `Requires:` line (as a bonus it looks like `factory` depends on `flint` unconditionally so you would get `-lflint` for free from `factory.pc` in the output of `pkg-config --libs pynac`). I may be able to work on those problems from Tuesday.



---

archive/issue_comments_323560.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThat would be awesome. The next release will take some time anyway.",
    "created_at": "2016-11-27T06:58:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323560",
    "user": "https://github.com/rwst"
}
```

<div id="comment:16" align="right">comment:16</div>

That would be awesome. The next release will take some time anyway.



---

archive/issue_comments_323561.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@kiwifb](#comment:14):\n> Bloody `.la` files. They shouldn't be shipped.\n\nIt seems that a broken libtool is the cause: https://lists.fedoraproject.org/pipermail/devel/2010-November/146343.html\nMaybe the `ld` flag `-no-add-needed` when compiling giac has an effect but that wouldn't affect existing `.la` files.\n\nThe other alternative, removing or changing the `.la` file before linking would be an idea but that looks unusual or hackish.",
    "created_at": "2016-12-01T16:45:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323561",
    "user": "https://github.com/rwst"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@kiwifb](#comment:14):
> Bloody `.la` files. They shouldn't be shipped.

It seems that a broken libtool is the cause: https://lists.fedoraproject.org/pipermail/devel/2010-November/146343.html
Maybe the `ld` flag `-no-add-needed` when compiling giac has an effect but that wouldn't affect existing `.la` files.

The other alternative, removing or changing the `.la` file before linking would be an idea but that looks unusual or hackish.



---

archive/issue_comments_323562.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nSo the safe method seems in `configure` to detect `-lao` in the `.la` file and disable Giac in case.",
    "created_at": "2016-12-01T16:49:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323562",
    "user": "https://github.com/rwst"
}
```

<div id="comment:18" align="right">comment:18</div>

So the safe method seems in `configure` to detect `-lao` in the `.la` file and disable Giac in case.



---

archive/issue_comments_323563.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nPossibly, but I think there is something broken in the system where the problem was shown. Applications and the `giac` binaries don't need `libgiac.so` or `libao.so`. They use `libgiac.so.0` and `libao.so.X` (X is 4 for me). `libgiac.so` should only be available in a `giac-xxx-dev` or `giac-xxx-devel` package. This one in turn should pull the required dev/devel packages for the dependencies.\n\nIf it doesn't currently work that way, whoever built the package logic had it wrong.",
    "created_at": "2016-12-01T20:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323563",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:19" align="right">comment:19</div>

Possibly, but I think there is something broken in the system where the problem was shown. Applications and the `giac` binaries don't need `libgiac.so` or `libao.so`. They use `libgiac.so.0` and `libao.so.X` (X is 4 for me). `libgiac.so` should only be available in a `giac-xxx-dev` or `giac-xxx-devel` package. This one in turn should pull the required dev/devel packages for the dependencies.

If it doesn't currently work that way, whoever built the package logic had it wrong.



---

archive/issue_comments_323564.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI think that no problems were reported with the giac spkg installed before pynac built, even if there is a system wide (broken or not) libgiac.\nI guess that in all reported cases the libgiac in /usr/lib was from B. Parisse's binary package:\nhttp://www-fourier.ujf-grenoble.fr/~parisse/debian/\n(but it may happen often, for example when people also want xcas; I think it is also on sagemath cloud)\n\nindeed it is an all in one package with libgiac.so linked to libao.so.4. But I think we could have more problems than just the libao-dev not installed. For instance it is built with some gcc<5 and I have problems with strings if I use gcc5 without a CXXFLAGS with -D_GLIBCXX_USE_CXX11_ABI=0 with parisse's package and the giac spkg not installed.\n\nSo you should also test in your configure a small program with a giac::gen initialized with a string.\nEx:\n\n```\nAC_LANG_PROGRAM([#include <giac/giac.h>], \n    [giac::context ct;\n     giac::gen g(std::string(\"0\"),&ct);])\n\n```\n\nNB: Sorry my ldd in comment 13 was not correct, unfortunately if I built pynac without the giac spkg but with parisse's giac .deb (with a modified libgiac.la in ginac/ and with gcc4.9) then pynac is linked to this /usr/lib/libgiac...\n\nIf I remember some discussion someone also wanted pynac to not be linked to an external library so that you can make binary distributions of sage so I think that you should enable giac only with the spkg or in distrib like fedora where you have  a offical package.",
    "created_at": "2016-12-02T00:02:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323564",
    "user": "https://github.com/frederichan-IMJPRG"
}
```

<div id="comment:20" align="right">comment:20</div>

I think that no problems were reported with the giac spkg installed before pynac built, even if there is a system wide (broken or not) libgiac.
I guess that in all reported cases the libgiac in /usr/lib was from B. Parisse's binary package:
http://www-fourier.ujf-grenoble.fr/~parisse/debian/
(but it may happen often, for example when people also want xcas; I think it is also on sagemath cloud)

indeed it is an all in one package with libgiac.so linked to libao.so.4. But I think we could have more problems than just the libao-dev not installed. For instance it is built with some gcc<5 and I have problems with strings if I use gcc5 without a CXXFLAGS with -D_GLIBCXX_USE_CXX11_ABI=0 with parisse's package and the giac spkg not installed.

So you should also test in your configure a small program with a giac::gen initialized with a string.
Ex:

```
AC_LANG_PROGRAM([#include <giac/giac.h>], 
    [giac::context ct;
     giac::gen g(std::string("0"),&ct);])

```

NB: Sorry my ldd in comment 13 was not correct, unfortunately if I built pynac without the giac spkg but with parisse's giac .deb (with a modified libgiac.la in ginac/ and with gcc4.9) then pynac is linked to this /usr/lib/libgiac...

If I remember some discussion someone also wanted pynac to not be linked to an external library so that you can make binary distributions of sage so I think that you should enable giac only with the spkg or in distrib like fedora where you have  a offical package.



---

archive/issue_comments_323565.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@frederichan-IMJPRG](#comment:20):\n> I think that no problems were reported with the giac spkg installed before pynac built, even if there is a system wide (broken or not) libgiac.\n> I guess that in all reported cases the libgiac in /usr/lib was from B. Parisse's binary package:\n> http://www-fourier.ujf-grenoble.fr/~parisse/debian/\n> (but it may happen often, for example when people also want xcas; I think it is also on sagemath cloud)\n> \n\nI am not surprised.\n\n\n> indeed it is an all in one package with libgiac.so linked to libao.so.4. But I think we could have more problems than just the libao-dev not installed. For instance it is built with some gcc<5 and I have problems with strings if I use gcc5 without a CXXFLAGS with -D_GLIBCXX_USE_CXX11_ABI=0 with parisse's package and the giac spkg not installed.\n> \n\nABI problem, yes that's hard.\n\n> So you should also test in your configure a small program with a giac::gen initialized with a string.\n> Ex:\n> \n> ```\n> AC_LANG_PROGRAM([#include <giac/giac.h>], \n>     [giac::context ct;\n>      giac::gen g(std::string(\"0\"),&ct);])\n> \n> ```\n> \n\nThat looks a good idea to me.\n\n> NB: Sorry my ldd in comment 13 was not correct, unfortunately if I built pynac without the giac spkg but with parisse's giac .deb (with a modified libgiac.la in ginac/ and with gcc4.9) then pynac is linked to this /usr/lib/libgiac...\n> \n> If I remember some discussion someone also wanted pynac to not be linked to an external library so that you can make binary distributions of sage so I think that you should enable giac only with the spkg or in distrib like fedora where you have  a offical package.\n\nI am the one who actually said it should happen that way at the sage binary package level.",
    "created_at": "2016-12-02T00:07:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323565",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@frederichan-IMJPRG](#comment:20):
> I think that no problems were reported with the giac spkg installed before pynac built, even if there is a system wide (broken or not) libgiac.
> I guess that in all reported cases the libgiac in /usr/lib was from B. Parisse's binary package:
> http://www-fourier.ujf-grenoble.fr/~parisse/debian/
> (but it may happen often, for example when people also want xcas; I think it is also on sagemath cloud)
> 

I am not surprised.


> indeed it is an all in one package with libgiac.so linked to libao.so.4. But I think we could have more problems than just the libao-dev not installed. For instance it is built with some gcc<5 and I have problems with strings if I use gcc5 without a CXXFLAGS with -D_GLIBCXX_USE_CXX11_ABI=0 with parisse's package and the giac spkg not installed.
> 

ABI problem, yes that's hard.

> So you should also test in your configure a small program with a giac::gen initialized with a string.
> Ex:
> 
> ```
> AC_LANG_PROGRAM([#include <giac/giac.h>], 
>     [giac::context ct;
>      giac::gen g(std::string("0"),&ct);])
> 
> ```
> 

That looks a good idea to me.

> NB: Sorry my ldd in comment 13 was not correct, unfortunately if I built pynac without the giac spkg but with parisse's giac .deb (with a modified libgiac.la in ginac/ and with gcc4.9) then pynac is linked to this /usr/lib/libgiac...
> 
> If I remember some discussion someone also wanted pynac to not be linked to an external library so that you can make binary distributions of sage so I think that you should enable giac only with the spkg or in distrib like fedora where you have  a offical package.

I am the one who actually said it should happen that way at the sage binary package level.



---

archive/issue_comments_323566.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,8 +5,13 @@\n * fix Giac GCD doctest fail\n * fix NaN unpickling (uncovered in #20939)\n * fix Flint underlinking (fbissey)\n+* fix dilog problems (#19906)\n+* fix Singular GCD interface\n+* fix is_real(positive^real) (#21940)\n+* better error message with evalf of some orthogonal polys\n+* improve pkg-config usage\n * add internal rising/falling factorial\n \n-https://github.com/pynac/pynac/releases/download/pynac-0.7.1/pynac-0.7.1.tar.bz2\n+https://github.com/pynac/pynac/releases/download/pynac-0.7.2/pynac-0.7.2.tar.bz2\n \n ~~Needs to specifically tested on Debian/Ubuntu because of #21885.~~\n``````\n",
    "created_at": "2016-12-06T15:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323566",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,8 +5,13 @@
 * fix Giac GCD doctest fail
 * fix NaN unpickling (uncovered in #20939)
 * fix Flint underlinking (fbissey)
+* fix dilog problems (#19906)
+* fix Singular GCD interface
+* fix is_real(positive^real) (#21940)
+* better error message with evalf of some orthogonal polys
+* improve pkg-config usage
 * add internal rising/falling factorial
 
-https://github.com/pynac/pynac/releases/download/pynac-0.7.1/pynac-0.7.1.tar.bz2
+https://github.com/pynac/pynac/releases/download/pynac-0.7.2/pynac-0.7.2.tar.bz2
 
 ~~Needs to specifically tested on Debian/Ubuntu because of #21885.~~
``````




---

archive/issue_events_305053.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-12-06T15:36:04Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "title_is": "Upgrade to pynac-0.7.2",
    "title_was": "Upgrade to pynac-0.7.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305053"
}
```



---

archive/issue_comments_323567.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a9756d8facb8d614b0f8d05be72a3e306e0bf6d\"><code>3a9756d</code></a></td><td><code>Merge branch 'develop' into t/21963/upgrade_to_pynac_0_7_1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff3b3557726e240c5c3ee5130e321da156f89822\"><code>ff3b355</code></a></td><td><code>update version/chksum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f18936aaaf143414686305a9ad45bee241a8c972\"><code>f18936a</code></a></td><td><code>additional doctest changes</code></td></tr></table>\n",
    "created_at": "2016-12-06T15:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323567",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a9756d8facb8d614b0f8d05be72a3e306e0bf6d"><code>3a9756d</code></a></td><td><code>Merge branch 'develop' into t/21963/upgrade_to_pynac_0_7_1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff3b3557726e240c5c3ee5130e321da156f89822"><code>ff3b355</code></a></td><td><code>update version/chksum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f18936aaaf143414686305a9ad45bee241a8c972"><code>f18936a</code></a></td><td><code>additional doctest changes</code></td></tr></table>




---

archive/issue_comments_323568.json:
```json
{
    "body": "Changed commit from **[`9521c40`](https://github.com/sagemath/sagetrac-mirror/commit/9521c4074e338fc0c42d257453cfb3b7e8cfc076)** to **[`f18936a`](https://github.com/sagemath/sagetrac-mirror/commit/f18936aaaf143414686305a9ad45bee241a8c972)**",
    "created_at": "2016-12-06T15:41:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323568",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9521c40`](https://github.com/sagemath/sagetrac-mirror/commit/9521c4074e338fc0c42d257453cfb3b7e8cfc076)** to **[`f18936a`](https://github.com/sagemath/sagetrac-mirror/commit/f18936aaaf143414686305a9ad45bee241a8c972)**



---

archive/issue_comments_323569.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a9756d8facb8d614b0f8d05be72a3e306e0bf6d\"><code>3a9756d</code></a></td><td><code>Merge branch 'develop' into t/21963/upgrade_to_pynac_0_7_1</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff3b3557726e240c5c3ee5130e321da156f89822\"><code>ff3b355</code></a></td><td><code>update version/chksum</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f18936aaaf143414686305a9ad45bee241a8c972\"><code>f18936a</code></a></td><td><code>additional doctest changes</code></td></tr></table>\n",
    "created_at": "2016-12-06T15:42:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323569",
    "user": "https://github.com/rwst"
}
```

<div id="comment:24"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a9756d8facb8d614b0f8d05be72a3e306e0bf6d"><code>3a9756d</code></a></td><td><code>Merge branch 'develop' into t/21963/upgrade_to_pynac_0_7_1</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff3b3557726e240c5c3ee5130e321da156f89822"><code>ff3b355</code></a></td><td><code>update version/chksum</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f18936aaaf143414686305a9ad45bee241a8c972"><code>f18936a</code></a></td><td><code>additional doctest changes</code></td></tr></table>




---

archive/issue_events_305054.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-12-06T15:42:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305054"
}
```



---

archive/issue_events_305055.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-12-06T15:42:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305055"
}
```



---

archive/issue_comments_323570.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-Pynac-0.7.1:\n+Pynac-0.7.2:\n * add libfactory interface; unconditionally replace GiNaC GCD with Singular (~~Giac GCD if available~~); this fixes #10284; it means that Singular is now another Pynac dependency\n * ~~reenable unconditional use of Giac if available (#21885)~~\n * fix zeta expansion around 1 (behackl) (#21899)\n@@ -7,7 +7,7 @@\n * fix Flint underlinking (fbissey)\n * fix dilog problems (#19906)\n * fix Singular GCD interface\n-* fix is_real(positive^real) (#21940)\n+* fix is_real(positive<sup>real</sup>) (#21940)\n * better error message with evalf of some orthogonal polys\n * improve pkg-config usage\n * add internal rising/falling factorial\n``````\n",
    "created_at": "2016-12-06T15:44:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323570",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-Pynac-0.7.1:
+Pynac-0.7.2:
 * add libfactory interface; unconditionally replace GiNaC GCD with Singular (~~Giac GCD if available~~); this fixes #10284; it means that Singular is now another Pynac dependency
 * ~~reenable unconditional use of Giac if available (#21885)~~
 * fix zeta expansion around 1 (behackl) (#21899)
@@ -7,7 +7,7 @@
 * fix Flint underlinking (fbissey)
 * fix dilog problems (#19906)
 * fix Singular GCD interface
-* fix is_real(positive^real) (#21940)
+* fix is_real(positive<sup>real</sup>) (#21940)
 * better error message with evalf of some orthogonal polys
 * improve pkg-config usage
 * add internal rising/falling factorial
``````




---

archive/issue_events_305056.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-12-08T01:58:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305056"
}
```



---

archive/issue_events_305057.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-12-08T01:58:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305057"
}
```



---

archive/issue_comments_323571.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nDependency needs to include `pkgconf` as the `pkg-config` command needs to be there at configuration time.",
    "created_at": "2016-12-08T01:58:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323571",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

Dependency needs to include `pkgconf` as the `pkg-config` command needs to be there at configuration time.



---

archive/issue_comments_323572.json:
```json
{
    "body": "Changed commit from **[`f18936a`](https://github.com/sagemath/sagetrac-mirror/commit/f18936aaaf143414686305a9ad45bee241a8c972)** to **[`6130c95`](https://github.com/sagemath/sagetrac-mirror/commit/6130c9586fe8c0ca8b80615aec4cb37604b0dbe6)**",
    "created_at": "2016-12-09T08:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323572",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f18936a`](https://github.com/sagemath/sagetrac-mirror/commit/f18936aaaf143414686305a9ad45bee241a8c972)** to **[`6130c95`](https://github.com/sagemath/sagetrac-mirror/commit/6130c9586fe8c0ca8b80615aec4cb37604b0dbe6)**



---

archive/issue_comments_323573.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6130c9586fe8c0ca8b80615aec4cb37604b0dbe6\"><code>6130c95</code></a></td><td><code>21963: pkgconf dependency</code></td></tr></table>\n",
    "created_at": "2016-12-09T08:19:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323573",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6130c9586fe8c0ca8b80615aec4cb37604b0dbe6"><code>6130c95</code></a></td><td><code>21963: pkgconf dependency</code></td></tr></table>




---

archive/issue_events_305058.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-12-09T08:19:50Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305058"
}
```



---

archive/issue_events_305059.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-12-09T08:19:50Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305059"
}
```



---

archive/issue_comments_323574.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2016-12-09T09:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323574",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_323575.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,6 +12,6 @@\n * improve pkg-config usage\n * add internal rising/falling factorial\n \n-https://github.com/pynac/pynac/releases/download/pynac-0.7.2/pynac-0.7.2.tar.bz2\n+**Tarball**: https://github.com/pynac/pynac/releases/download/pynac-0.7.2/pynac-0.7.2.tar.bz2\n \n ~~Needs to specifically tested on Debian/Ubuntu because of #21885.~~\n``````\n",
    "created_at": "2016-12-09T09:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323575",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,6 +12,6 @@
 * improve pkg-config usage
 * add internal rising/falling factorial
 
-https://github.com/pynac/pynac/releases/download/pynac-0.7.2/pynac-0.7.2.tar.bz2
+**Tarball**: https://github.com/pynac/pynac/releases/download/pynac-0.7.2/pynac-0.7.2.tar.bz2
 
 ~~Needs to specifically tested on Debian/Ubuntu because of #21885.~~
``````




---

archive/issue_comments_323576.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThe bot will take care of testing debian/ubuntu I guess. But yes one of the next step will be more robust detection of a working `giac` which may be a standard package in 7.5....",
    "created_at": "2016-12-09T09:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323576",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

The bot will take care of testing debian/ubuntu I guess. But yes one of the next step will be more robust detection of a working `giac` which may be a standard package in 7.5....



---

archive/issue_events_305060.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-12-09T09:02:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305060"
}
```



---

archive/issue_events_305061.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-12-09T09:02:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305061"
}
```



---

archive/issue_comments_323577.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThanks. Unfortunately I didn't switch on the Giac support in Pynac in this ticket so anything Giac (with it being standard package now) will have to wait for the next Pynac release.",
    "created_at": "2016-12-10T06:46:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323577",
    "user": "https://github.com/rwst"
}
```

<div id="comment:30" align="right">comment:30</div>

Thanks. Unfortunately I didn't switch on the Giac support in Pynac in this ticket so anything Giac (with it being standard package now) will have to wait for the next Pynac release.



---

archive/issue_comments_323578.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@rwst](#comment:30):\n> Thanks. Unfortunately I didn't switch on the Giac support in Pynac in this ticket so anything Giac (with it being standard package now) will have to wait for the next Pynac release.\n\nThat's OK. In my opinion there are two more things to do before switching `giac` on properly. 1) more robust detection so we definitely don't get non-working version. That will help distros mostly since the availability of `giac` as standard in sage solves the problem of the poisonous debian one. 2) More changes are needed in `pynac.pc` - will need to add the library there as well when enabled.",
    "created_at": "2016-12-10T07:54:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323578",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@rwst](#comment:30):
> Thanks. Unfortunately I didn't switch on the Giac support in Pynac in this ticket so anything Giac (with it being standard package now) will have to wait for the next Pynac release.

That's OK. In my opinion there are two more things to do before switching `giac` on properly. 1) more robust detection so we definitely don't get non-working version. That will help distros mostly since the availability of `giac` as standard in sage solves the problem of the poisonous debian one. 2) More changes are needed in `pynac.pc` - will need to add the library there as well when enabled.



---

archive/issue_events_305062.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-10T12:38:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305062"
}
```



---

archive/issue_events_305063.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "46769b6f6440f6fa018d944b1261e22529059412",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-12-10T12:38:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21963#event-305063"
}
```



---

archive/issue_comments_323579.json:
```json
{
    "body": "Changed branch from **[u/rws/upgrade_to_pynac_0_7_1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/upgrade_to_pynac_0_7_1)** to **[`6130c95`](https://github.com/sagemath/sagetrac-mirror/commit/6130c9586fe8c0ca8b80615aec4cb37604b0dbe6)**",
    "created_at": "2016-12-10T12:38:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21963",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21963#issuecomment-323579",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/rws/upgrade_to_pynac_0_7_1](https://github.com/sagemath/sagetrac-mirror/tree/u/rws/upgrade_to_pynac_0_7_1)** to **[`6130c95`](https://github.com/sagemath/sagetrac-mirror/commit/6130c9586fe8c0ca8b80615aec4cb37604b0dbe6)**
