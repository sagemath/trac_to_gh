# Issue 21813: LatticePosets: Add skeleton

archive/issues_021576.json:
```json
{
    "assignees": [],
    "body": "Add a function to get the skeleton of a pseudocomplemented lattice.\n\nCC:  @fchapoton\n\nBranch/Commit: **[`ce64c2b`](https://github.com/sagemath/sagetrac-mirror/commit/ce64c2b03ad35b1b78548e30b2bd3ce7744d47c2)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jori M\u00e4ntysalo**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21813_\n\n",
    "closed_at": "2016-11-08T23:42:06Z",
    "created_at": "2016-11-04T09:39:44Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LatticePosets: Add skeleton",
    "type": "issue",
    "updated_at": "2016-11-08T23:42:06Z",
    "url": "https://github.com/sagemath/sage/issues/21813",
    "user": "https://github.com/jm58660"
}
```
Add a function to get the skeleton of a pseudocomplemented lattice.

CC:  @fchapoton

Branch/Commit: **[`ce64c2b`](https://github.com/sagemath/sagetrac-mirror/commit/ce64c2b03ad35b1b78548e30b2bd3ce7744d47c2)**

Reviewer: **Travis Scrimshaw**

Author: **Jori MÃ¤ntysalo**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/21813_





---

archive/issue_events_305966.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-04T09:39:44Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305966"
}
```



---

archive/issue_events_305967.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-04T09:39:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305967"
}
```



---

archive/issue_events_305968.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-04T09:39:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305968"
}
```



---

archive/issue_events_305969.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-04T09:39:44Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305969"
}
```



---

archive/issue_comments_321016.json:
```json
{
    "body": "Branch: **[u/jmantysalo/latticeposets__add_skeleton](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposets__add_skeleton)**",
    "created_at": "2016-11-04T09:50:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321016",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/latticeposets__add_skeleton](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposets__add_skeleton)**



---

archive/issue_comments_321017.json:
```json
{
    "body": "Commit: **[`90f0066`](https://github.com/sagemath/sagetrac-mirror/commit/90f00668b6cc6a6a0ecfe828f0221b9fc91c8a56)**",
    "created_at": "2016-11-04T10:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321017",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`90f0066`](https://github.com/sagemath/sagetrac-mirror/commit/90f00668b6cc6a6a0ecfe828f0221b9fc91c8a56)**



---

archive/issue_comments_321018.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/90f00668b6cc6a6a0ecfe828f0221b9fc91c8a56\">90f0066</a></td><td><code>Correct doctest for non-pseudocomplemented lattice.</code></td></tr></table>\n",
    "created_at": "2016-11-04T10:20:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321018",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/90f00668b6cc6a6a0ecfe828f0221b9fc91c8a56">90f0066</a></td><td><code>Correct doctest for non-pseudocomplemented lattice.</code></td></tr></table>




---

archive/issue_events_305970.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-04T10:21:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305970"
}
```



---

archive/issue_comments_321019.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIMO, a better way to do\n\n```python\n        pseudocomplements = [self.pseudocomplement(e) for e in self]\n        if None in pseudocomplements:\n            raise ValueError(\"lattice is not pseudocomplemented\")\n```\nwould be\n\n```python\n        pseudocomplements = []\n        for e in self:\n            p = self.pseudocomplement(e)\n            if p is None:\n                raise ValueError(\"lattice is not pseudocomplemented\")\n            pseudocomplements.append(p)\n```\nbecause it will error out faster if there is a problem.",
    "created_at": "2016-11-04T14:11:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321019",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

IMO, a better way to do

```python
        pseudocomplements = [self.pseudocomplement(e) for e in self]
        if None in pseudocomplements:
            raise ValueError("lattice is not pseudocomplemented")
```
would be

```python
        pseudocomplements = []
        for e in self:
            p = self.pseudocomplement(e)
            if p is None:
                raise ValueError("lattice is not pseudocomplemented")
            pseudocomplements.append(p)
```
because it will error out faster if there is a problem.



---

archive/issue_comments_321020.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@tscrim](#comment:4):\n\n> - - because it will error out faster if there is a problem.\n\nCan be done, of course, but are you sure about this? It means optimizing for a part that should not be run often. (`is_pseudcomplemented()` has short-circuit evaluation, of course.)\n\nTo compare, I have not thinked speed at all when making this. There might be some easy way to compute the skeleton much faster.",
    "created_at": "2016-11-04T15:50:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321020",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@tscrim](#comment:4):

> - - because it will error out faster if there is a problem.

Can be done, of course, but are you sure about this? It means optimizing for a part that should not be run often. (`is_pseudcomplemented()` has short-circuit evaluation, of course.)

To compare, I have not thinked speed at all when making this. There might be some easy way to compute the skeleton much faster.



---

archive/issue_comments_321021.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nMore subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?",
    "created_at": "2016-11-04T16:36:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321021",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?



---

archive/issue_comments_321022.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@tscrim](#comment:6):\n> More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?\n\nCan be done. Actually the code could first make vertical decomposition, take the lowest part and compute skeleton for that. If an element `e` is comparable to every other element and is not the bottom element, then the pseudocomplement for every element `\\ge e` is the bottom element.\n\nWhat more to optimize? Not useful but very interesting question!",
    "created_at": "2016-11-04T17:13:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321022",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@tscrim](#comment:6):
> More subjective, I think it also makes the code easier to read and is only marginally slower due to Python being Python. Actually, is there some way to push the computation to the Hasse diagram?

Can be done. Actually the code could first make vertical decomposition, take the lowest part and compute skeleton for that. If an element `e` is comparable to every other element and is not the bottom element, then the pseudocomplement for every element `\ge e` is the bottom element.

What more to optimize? Not useful but very interesting question!



---

archive/issue_comments_321023.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2437363ec7d0b6374d02dc9391457c77334ed35d\">2437363</a></td><td><code>Move skeleton() to hasse_diagram.py.</code></td></tr></table>\n",
    "created_at": "2016-11-05T12:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321023",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2437363ec7d0b6374d02dc9391457c77334ed35d">2437363</a></td><td><code>Move skeleton() to hasse_diagram.py.</code></td></tr></table>




---

archive/issue_comments_321024.json:
```json
{
    "body": "Changed commit from **[`90f0066`](https://github.com/sagemath/sagetrac-mirror/commit/90f00668b6cc6a6a0ecfe828f0221b9fc91c8a56)** to **[`2437363`](https://github.com/sagemath/sagetrac-mirror/commit/2437363ec7d0b6374d02dc9391457c77334ed35d)**",
    "created_at": "2016-11-05T12:56:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321024",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`90f0066`](https://github.com/sagemath/sagetrac-mirror/commit/90f00668b6cc6a6a0ecfe828f0221b9fc91c8a56)** to **[`2437363`](https://github.com/sagemath/sagetrac-mirror/commit/2437363ec7d0b6374d02dc9391457c77334ed35d)**



---

archive/issue_comments_321025.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@tscrim](#comment:6):\n>  Actually, is there some way to push the computation to the Hasse diagram?\n\nHow about this?",
    "created_at": "2016-11-05T12:59:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321025",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@tscrim](#comment:6):
>  Actually, is there some way to push the computation to the Hasse diagram?

How about this?



---

archive/issue_comments_321026.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nSame as [comment:4](#comment:4), but I guess you're still against that?\n\nAlso, I don't like `See posets.py for definition.` You should put an explicit link to the method where it is defined. At the very least, you should put a link <code>:mod:\\`path.to.file\\`</code>.",
    "created_at": "2016-11-05T16:34:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321026",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:10" align="right">comment:10</div>

Same as [comment:4](#comment:4), but I guess you're still against that?

Also, I don't like `See posets.py for definition.` You should put an explicit link to the method where it is defined. At the very least, you should put a link <code>:mod:\`path.to.file\`</code>.



---

archive/issue_comments_321027.json:
```json
{
    "body": "Changed commit from **[`2437363`](https://github.com/sagemath/sagetrac-mirror/commit/2437363ec7d0b6374d02dc9391457c77334ed35d)** to **[`ce64c2b`](https://github.com/sagemath/sagetrac-mirror/commit/ce64c2b03ad35b1b78548e30b2bd3ce7744d47c2)**",
    "created_at": "2016-11-06T07:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321027",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2437363`](https://github.com/sagemath/sagetrac-mirror/commit/2437363ec7d0b6374d02dc9391457c77334ed35d)** to **[`ce64c2b`](https://github.com/sagemath/sagetrac-mirror/commit/ce64c2b03ad35b1b78548e30b2bd3ce7744d47c2)**



---

archive/issue_comments_321028.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce64c2b03ad35b1b78548e30b2bd3ce7744d47c2\">ce64c2b</a></td><td><code>Minor changes.</code></td></tr></table>\n",
    "created_at": "2016-11-06T07:25:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321028",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce64c2b03ad35b1b78548e30b2bd3ce7744d47c2">ce64c2b</a></td><td><code>Minor changes.</code></td></tr></table>




---

archive/issue_comments_321029.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@tscrim](#comment:6):\n> More subjective, I think it also makes the code easier to read - -\n\nI think it is harder to read... But whatever. Here is a version with explicit loop.",
    "created_at": "2016-11-06T07:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321029",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@tscrim](#comment:6):
> More subjective, I think it also makes the code easier to read - -

I think it is harder to read... But whatever. Here is a version with explicit loop.



---

archive/issue_comments_321030.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThanks. Although I just wanted to make sure you considered it or had a counterargument. Positive review.",
    "created_at": "2016-11-06T14:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321030",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

Thanks. Although I just wanted to make sure you considered it or had a counterargument. Positive review.



---

archive/issue_events_305971.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-11-06T14:30:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305971"
}
```



---

archive/issue_events_305972.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-11-06T14:30:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305972"
}
```



---

archive/issue_comments_321031.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2016-11-06T14:30:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321031",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_events_305973.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-08T23:42:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305973"
}
```



---

archive/issue_events_305974.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "10c588d35221d1462d9532d9c2c8303d33d2760f",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-08T23:42:06Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21813#event-305974"
}
```



---

archive/issue_comments_321032.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/latticeposets__add_skeleton](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposets__add_skeleton)** to **[`ce64c2b`](https://github.com/sagemath/sagetrac-mirror/commit/ce64c2b03ad35b1b78548e30b2bd3ce7744d47c2)**",
    "created_at": "2016-11-08T23:42:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21813",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21813#issuecomment-321032",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jmantysalo/latticeposets__add_skeleton](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/latticeposets__add_skeleton)** to **[`ce64c2b`](https://github.com/sagemath/sagetrac-mirror/commit/ce64c2b03ad35b1b78548e30b2bd3ce7744d47c2)**
