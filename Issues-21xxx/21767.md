# Issue 21767: Package libcurl (and curl) as a standard package

archive/issues_021530.json:
```json
{
    "body": "Rationale : R (standard package) requires libcurl (and possibly the curl executable), but stopped to package it with version 3.3.0.\n\nSee [discussion](https://groups.google.com/forum/#!topic/sage-devel/9gun2Wo6zGM) on sage-devel.\n\n**Tarball**: https://curl.haxx.se/download/curl-7.53.1.tar.bz2\n\nAssignee: @EmmanuelCharpentier\n\nCC:  jpflori @jdemeyer @jhpalmieri @vbraun\n\nKeywords: r-project, days85\n\nBranch/Commit: 4c7d5eb846d40287f9fb69ddff18d2e00ae9f6d9\n\nStopgaps: use clang and --with-darwinssl on OSX\n\nReviewer: Jean-Pierre Flori, Jeroen Demeyer, Dima Pasechnik\n\nAuthor: Emmanuel Charpentier, Jean-Pierre Flori\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21767\n\n",
    "closed_at": "2017-03-27T20:43:10Z",
    "created_at": "2016-10-25T19:24:41Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Package libcurl (and curl) as a standard package",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21767",
    "user": "https://github.com/EmmanuelCharpentier"
}
```
Rationale : R (standard package) requires libcurl (and possibly the curl executable), but stopped to package it with version 3.3.0.

See [discussion](https://groups.google.com/forum/#!topic/sage-devel/9gun2Wo6zGM) on sage-devel.

**Tarball**: https://curl.haxx.se/download/curl-7.53.1.tar.bz2

Assignee: @EmmanuelCharpentier

CC:  jpflori @jdemeyer @jhpalmieri @vbraun

Keywords: r-project, days85

Branch/Commit: 4c7d5eb846d40287f9fb69ddff18d2e00ae9f6d9

Stopgaps: use clang and --with-darwinssl on OSX

Reviewer: Jean-Pierre Flori, Jeroen Demeyer, Dima Pasechnik

Author: Emmanuel Charpentier, Jean-Pierre Flori

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21767





---

archive/issue_comments_317953.json:
```json
{
    "body": "<a id='comment:1'></a>Plan :\n\n* Create a package that builds and installs curl unconditionnally. Test that.\n* Immediately after, patch it to add a detection of an usable systemwide version, and do not install if such a version is found.",
    "created_at": "2016-10-25T19:26:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317953",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:1'></a>Plan :

* Create a package that builds and installs curl unconditionnally. Test that.
* Immediately after, patch it to add a detection of an usable systemwide version, and do not install if such a version is found.



---

archive/issue_comments_317954.json:
```json
{
    "body": "<a id='comment:3'></a>This initial packaging :\n* builds with no error on top of 7.5beta0\n* passes its own test suite successfully.\n\nThe resulting Sage passes testlong with no errors (not even transient, for a marvel...\n\nMarking `needs_review`. See the thread on `sage-devel` for discussion of conditional installation.\n\n---\nNew commits:",
    "created_at": "2016-10-25T21:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317954",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:3'></a>This initial packaging :
* builds with no error on top of 7.5beta0
* passes its own test suite successfully.

The resulting Sage passes testlong with no errors (not even transient, for a marvel...

Marking `needs_review`. See the thread on `sage-devel` for discussion of conditional installation.

---
New commits:



---

archive/issue_comments_317955.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-25T21:44:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317955",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_317956.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,9 +2,7 @@\n \n See [discussion](https://groups.google.com/forum/#!topic/sage-devel/9gun2Wo6zGM) on sage-devel.\n \n-Original tarball is [here](https://curl.haxx.se/download/curl-7.50.3.tar.gz)\n-\n-Keywords: r-project\n+**Tarball**: https://curl.haxx.se/download/curl-7.50.3.tar.gz\n \n Comment: 1\n \n``````\n",
    "created_at": "2016-10-26T07:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317956",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,9 +2,7 @@
 
 See [discussion](https://groups.google.com/forum/#!topic/sage-devel/9gun2Wo6zGM) on sage-devel.
 
-Original tarball is [here](https://curl.haxx.se/download/curl-7.50.3.tar.gz)
-
-Keywords: r-project
+**Tarball**: https://curl.haxx.se/download/curl-7.50.3.tar.gz
 
 Comment: 1
 
``````




---

archive/issue_comments_317957.json:
```json
{
    "body": "<a id='comment:4'></a>Author name please...",
    "created_at": "2016-10-26T07:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317957",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Author name please...



---

archive/issue_comments_317958.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2016-10-26T07:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317958",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_317959.json:
```json
{
    "body": "<a id='comment:5'></a>I don't like this style of logging:\n\n```\nCC       libcurl_la-curl_gethostname.lo\n```\nI like to see the `gcc` command-line to figure out what is going on.\n\nUsually, this can be changed by passing `V=1` to the `make` command line (see for example `build/pkgs/libfplll/spkg-install`)",
    "created_at": "2016-10-26T07:27:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317959",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>I don't like this style of logging:

```
CC       libcurl_la-curl_gethostname.lo
```
I like to see the `gcc` command-line to figure out what is going on.

Usually, this can be changed by passing `V=1` to the `make` command line (see for example `build/pkgs/libfplll/spkg-install`)



---

archive/issue_comments_317960.json:
```json
{
    "body": "<a id='comment:6'></a>Would be nice to have the standard pieces of code to check we are in a Sage shell and to apply potential patches.",
    "created_at": "2016-10-26T10:25:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317960",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>Would be nice to have the standard pieces of code to check we are in a Sage shell and to apply potential patches.



---

archive/issue_comments_317961.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-10-26T10:25:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317961",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_317962.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:5 jdemeyer]:\n> I don't like this style of logging:\n> \n> ```\n> CC       libcurl_la-curl_gethostname.lo\n> ```\n> I like to see the `gcc` command-line to figure out what is going on.\n> \n> Usually, this can be changed by passing `V=1` to the `make` command line (see for example `build/pkgs/libfplll/spkg-install`)\n\n\nDoable. On your head be it...",
    "created_at": "2016-10-26T10:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317962",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:7'></a>Replying to [comment:5 jdemeyer]:
> I don't like this style of logging:
> 
> ```
> CC       libcurl_la-curl_gethostname.lo
> ```
> I like to see the `gcc` command-line to figure out what is going on.
> 
> Usually, this can be changed by passing `V=1` to the `make` command line (see for example `build/pkgs/libfplll/spkg-install`)


Doable. On your head be it...



---

archive/issue_comments_317963.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:4 jdemeyer]:\n> Author name please...\n\n\nDone",
    "created_at": "2016-10-26T10:31:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317963",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:8'></a>Replying to [comment:4 jdemeyer]:
> Author name please...


Done



---

archive/issue_comments_317964.json:
```json
{
    "body": "<a id='comment:9'></a>Replying to [comment:6 jpflori]:\n\nCould you clarify :\n> Would be nice to have the standard pieces of code to check we are in a Sage shell\n\n\n??? What\"'s that ?  A simple hint might be to `test ! X$SAGE_ROOT = X `, but you seem to have something more sophisticated in head.\n\n> and to apply potential patches.\n\n\n??? Clarification required. What are \"potential patches\" ?",
    "created_at": "2016-10-26T10:36:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317964",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:9'></a>Replying to [comment:6 jpflori]:

Could you clarify :
> Would be nice to have the standard pieces of code to check we are in a Sage shell


??? What"'s that ?  A simple hint might be to `test ! X$SAGE_ROOT = X `, but you seem to have something more sophisticated in head.

> and to apply potential patches.


??? Clarification required. What are "potential patches" ?



---

archive/issue_comments_317965.json:
```json
{
    "body": "<a id='comment:10'></a>Replying to [comment:9 charpent]:\n> Replying to [comment:6 jpflori]:\n> \n> Could you clarify :\n> > Would be nice to have the standard pieces of code to check we are in a Sage shell\n\n> \n> ??? What\"'s that ?  A simple hint might be to `test ! X$SAGE_ROOT = X `, but you seem to have something more sophisticated in head.\n\nhttps://github.com/sagemath/sage/blob/master/build/pkgs/ecl/spkg-install#L3\n\n> \n> > and to apply potential patches.\n\n> \n> ??? Clarification required. What are \"potential patches\" ?\n\nhttps://github.com/sagemath/sage/blob/master/build/pkgs/ecl/spkg-install#L13",
    "created_at": "2016-10-26T11:13:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317965",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>Replying to [comment:9 charpent]:
> Replying to [comment:6 jpflori]:
> 
> Could you clarify :
> > Would be nice to have the standard pieces of code to check we are in a Sage shell

> 
> ??? What"'s that ?  A simple hint might be to `test ! X$SAGE_ROOT = X `, but you seem to have something more sophisticated in head.

https://github.com/sagemath/sage/blob/master/build/pkgs/ecl/spkg-install#L3

> 
> > and to apply potential patches.

> 
> ??? Clarification required. What are "potential patches" ?

https://github.com/sagemath/sage/blob/master/build/pkgs/ecl/spkg-install#L13



---

archive/issue_comments_317966.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:7 charpent]:\n> Doable. On your head be it...\n\n\nWhat do you mean with this?",
    "created_at": "2016-10-26T11:15:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317966",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:11'></a>Replying to [comment:7 charpent]:
> Doable. On your head be it...


What do you mean with this?



---

archive/issue_comments_317967.json:
```json
{
    "body": "<a id='comment:12'></a>Replying to [comment:10 jpflori]:\n> https://github.com/sagemath/sage/blob/master/build/pkgs/ecl/spkg-install#L13\n\n\nPlease don't, see #20692 instead.",
    "created_at": "2016-10-26T11:15:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317967",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>Replying to [comment:10 jpflori]:
> https://github.com/sagemath/sage/blob/master/build/pkgs/ecl/spkg-install#L13


Please don't, see #20692 instead.



---

archive/issue_comments_317968.json:
```json
{
    "body": "<a id='comment:13'></a>The package builds fine.",
    "created_at": "2016-10-26T11:16:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317968",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>The package builds fine.



---

archive/issue_comments_317969.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:11 jdemeyer]:\n> Replying to [comment:7 charpent]:\n> > Doable. On your head be it...\n  \n> \n> What do you mean with this?\n\n\nNothing rude, be assured ! (sorry if that sounded rude...). I just mean that I'm not very fond of miles-log logs, where the relevant information doesn't stand out (common problem with, for example, LaTeX).",
    "created_at": "2016-10-26T11:52:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317969",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:14'></a>Replying to [comment:11 jdemeyer]:
> Replying to [comment:7 charpent]:
> > Doable. On your head be it...
  
> 
> What do you mean with this?


Nothing rude, be assured ! (sorry if that sounded rude...). I just mean that I'm not very fond of miles-log logs, where the relevant information doesn't stand out (common problem with, for example, LaTeX).



---

archive/issue_comments_317970.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-26T17:07:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317970",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317971.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-26T17:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317971",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317972.json:
```json
{
    "body": "<a id='comment:16'></a>In this branch :\n* Sage shell checking\n* verbose compilation\n* patching (and empty patches directory), [Sage Maintainer's Guide](http://doc.sagemath.org/html/en/developer/packaging.html#patching-sources) style.\n\nThis builds and passes the package's own test suite without errors ; the resulting Sage passes ptestlong with the usual transient error on `simplicial_complex.py`, which passes succesfully standalone.\n\nRe: #20692 : This ticket has been in the works for 5 months and still depends on two other tickets. I'd rather not wait for it to be merged in Sage before getting the damn `curl` in Sage : `R` depends on it, and updating it begins to be a matter of some (slight) urgency : more and more `R` packages can no longer be installed under 2.4.2...  That doesn't mean I won't revise the way to patch things when #20692 is merged.\n\nAnyway, the point is moot for now : there are **no** patches...\n\n==>`needs_review`",
    "created_at": "2016-10-26T17:25:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317972",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:16'></a>In this branch :
* Sage shell checking
* verbose compilation
* patching (and empty patches directory), [Sage Maintainer's Guide](http://doc.sagemath.org/html/en/developer/packaging.html#patching-sources) style.

This builds and passes the package's own test suite without errors ; the resulting Sage passes ptestlong with the usual transient error on `simplicial_complex.py`, which passes succesfully standalone.

Re: #20692 : This ticket has been in the works for 5 months and still depends on two other tickets. I'd rather not wait for it to be merged in Sage before getting the damn `curl` in Sage : `R` depends on it, and updating it begins to be a matter of some (slight) urgency : more and more `R` packages can no longer be installed under 2.4.2...  That doesn't mean I won't revise the way to patch things when #20692 is merged.

Anyway, the point is moot for now : there are **no** patches...

==>`needs_review`



---

archive/issue_comments_317973.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:14 charpent]:\n> I just mean that I'm not very fond of miles-log logs, where the relevant information doesn't stand out\n\n\nAt least the relevant information **exists** in the log.",
    "created_at": "2016-10-26T17:31:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317973",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>Replying to [comment:14 charpent]:
> I just mean that I'm not very fond of miles-log logs, where the relevant information doesn't stand out


At least the relevant information **exists** in the log.



---

archive/issue_comments_317974.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:17 jdemeyer]:\n> Replying to [comment:14 charpent]:\n> > I just mean that I'm not very fond of miles-log logs, where the relevant information doesn't stand out\n\n> \n> At least the relevant information **exists** in the log.\n\n\nIndeed. I can see your point : it's mainly a `grep` vs `vgrep` (non-)issue ; probably coming from our respective initial curricula (a surgeon (even a dental one) needs to see (literally) a lot of things at once ; details can (usually) wait. Hence my preference for breadth-first searches).",
    "created_at": "2016-10-26T17:48:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317974",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:18'></a>Replying to [comment:17 jdemeyer]:
> Replying to [comment:14 charpent]:
> > I just mean that I'm not very fond of miles-log logs, where the relevant information doesn't stand out

> 
> At least the relevant information **exists** in the log.


Indeed. I can see your point : it's mainly a `grep` vs `vgrep` (non-)issue ; probably coming from our respective initial curricula (a surgeon (even a dental one) needs to see (literally) a lot of things at once ; details can (usually) wait. Hence my preference for breadth-first searches).



---

archive/issue_comments_317975.json:
```json
{
    "body": "<a id='comment:19'></a>The HTTPS/openssl issue is still an issue.",
    "created_at": "2016-10-26T17:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317975",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:19'></a>The HTTPS/openssl issue is still an issue.



---

archive/issue_comments_317976.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-26T18:01:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317976",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_317977.json:
```json
{
    "body": "<a id='comment:21'></a>Without patching I fear the only solution is to make curl and R optional.\nGroumpf.",
    "created_at": "2016-10-26T18:16:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317977",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>Without patching I fear the only solution is to make curl and R optional.
Groumpf.



---

archive/issue_comments_317978.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:20 jdemeyer]:\n\nAs compiled, curl supports https. You can check this with `curl-config --protocols`.\n\nThe issue raised by Volker is valid, but has little to do with the present issue (nor with R's update...).\n\nFurthermore, I think we shouldn't try to solve locally a systemwide problem.",
    "created_at": "2016-10-26T19:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317978",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:22'></a>Replying to [comment:20 jdemeyer]:

As compiled, curl supports https. You can check this with `curl-config --protocols`.

The issue raised by Volker is valid, but has little to do with the present issue (nor with R's update...).

Furthermore, I think we shouldn't try to solve locally a systemwide problem.



---

archive/issue_comments_317979.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:21 jpflori]:\n> Without patching I fear the only solution is to make curl and R optional.\n> Groumpf.\n\n\nCare to explain ? I'm a dentist of very little mind, and have trouble following you.",
    "created_at": "2016-10-26T19:05:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317979",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:23'></a>Replying to [comment:21 jpflori]:
> Without patching I fear the only solution is to make curl and R optional.
> Groumpf.


Care to explain ? I'm a dentist of very little mind, and have trouble following you.



---

archive/issue_comments_317980.json:
```json
{
    "body": "<a id='comment:24'></a>IIRC we cannot automatically install openssl bc of license issues...\nHence no https support in curl and then R does not want to build.",
    "created_at": "2016-10-26T19:40:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317980",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:24'></a>IIRC we cannot automatically install openssl bc of license issues...
Hence no https support in curl and then R does not want to build.



---

archive/issue_comments_317981.json:
```json
{
    "body": "<a id='comment:25'></a>I guess you get https support because you have openssl and its headers installed.",
    "created_at": "2016-10-26T19:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317981",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:25'></a>I guess you get https support because you have openssl and its headers installed.



---

archive/issue_comments_317982.json:
```json
{
    "body": "<a id='comment:26'></a>And openssl is not a dependency of sage ATM.",
    "created_at": "2016-10-26T19:44:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317982",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:26'></a>And openssl is not a dependency of sage ATM.



---

archive/issue_comments_317983.json:
```json
{
    "body": "<a id='comment:27'></a>Replying to [comment:26 jpflori]:\n> And openssl is not a dependency of sage ATM.\n\n\nTherefore, the obvious solution is to add OpenSSL as a prerequisite to Sage. (easy patch : two words in the main README.md...).\n\nWould *that* be a problem ?\n\nShould we open a discussion on sage-devel ?",
    "created_at": "2016-10-26T19:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317983",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:27'></a>Replying to [comment:26 jpflori]:
> And openssl is not a dependency of sage ATM.


Therefore, the obvious solution is to add OpenSSL as a prerequisite to Sage. (easy patch : two words in the main README.md...).

Would *that* be a problem ?

Should we open a discussion on sage-devel ?



---

archive/issue_comments_317984.json:
```json
{
    "body": "<a id='comment:28'></a>Or add curl (with SSL support) as a prerequisite to Sage. How widely installed are `curl` and `OpenSSL`? OS X seems to include `curl` and `libcurl`, and also `libssl` (but is that the same as OpenSSL? or is it at least good enough?). What about the various linux distributions?",
    "created_at": "2016-10-26T20:08:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317984",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>Or add curl (with SSL support) as a prerequisite to Sage. How widely installed are `curl` and `OpenSSL`? OS X seems to include `curl` and `libcurl`, and also `libssl` (but is that the same as OpenSSL? or is it at least good enough?). What about the various linux distributions?



---

archive/issue_comments_317985.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:28 jhpalmieri]:\n> Or add curl (with SSL support) as a prerequisite to Sage. How widely installed are `curl` and `OpenSSL`? OS X seems to include `curl` and `libcurl`, and also `libssl` (but is that the same as OpenSSL? or is it at least good enough?). What about the various linux distributions?\n\n\nI would guess that `curl` itself is widely available, but maybe not with \"development headers\" that many distros package separately.",
    "created_at": "2016-10-26T21:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317985",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>Replying to [comment:28 jhpalmieri]:
> Or add curl (with SSL support) as a prerequisite to Sage. How widely installed are `curl` and `OpenSSL`? OS X seems to include `curl` and `libcurl`, and also `libssl` (but is that the same as OpenSSL? or is it at least good enough?). What about the various linux distributions?


I would guess that `curl` itself is widely available, but maybe not with "development headers" that many distros package separately.



---

archive/issue_comments_317986.json:
```json
{
    "body": "<a id='comment:30'></a>As I tried to explain [comment:12], please remove this patch block (especially given that there are no patches):\n\n```\n# Patch sources.\nfor patch in ../patches/*.patch; do\n    [ -r \"$patch\" ] || continue  # Skip non-existing or non-readable patches\n    patch -p1 <\"$patch\"\n    if [ $? -ne 0 ]; then\n        echo >&2 \"Error applying '$patch'\"\n        exit 1\n    fi\ndone\n```",
    "created_at": "2016-10-26T21:07:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317986",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>As I tried to explain [comment:12], please remove this patch block (especially given that there are no patches):

```
# Patch sources.
for patch in ../patches/*.patch; do
    [ -r "$patch" ] || continue  # Skip non-existing or non-readable patches
    patch -p1 <"$patch"
    if [ $? -ne 0 ]; then
        echo >&2 "Error applying '$patch'"
        exit 1
    fi
done
```



---

archive/issue_comments_317987.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:16 charpent]:\n> I'd rather not wait for it to be merged in Sage before getting the damn `curl` in Sage\n\n\nI never said that you need to depend on that ticket. If you remove the \"patching\" block, it will work with or without #20692.",
    "created_at": "2016-10-26T21:10:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317987",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:31'></a>Replying to [comment:16 charpent]:
> I'd rather not wait for it to be merged in Sage before getting the damn `curl` in Sage


I never said that you need to depend on that ticket. If you remove the "patching" block, it will work with or without #20692.



---

archive/issue_comments_317988.json:
```json
{
    "body": "<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-27T06:31:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317988",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:32'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_317989.json:
```json
{
    "body": "<a id='comment:33'></a>Replying to [comment:32 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                           |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|\n> |[81e3341](https://git.sagemath.org/sage.git/commit/?id=81e3341358690d10e8ec0d14e1d7e53b8b8bf16c)|`Removed patches handling.`|\n\n\nBuilds OK, passes its test suite.",
    "created_at": "2016-10-27T06:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317989",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:33'></a>Replying to [comment:32 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                           |
> |-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------|
> |[81e3341](https://git.sagemath.org/sage.git/commit/?id=81e3341358690d10e8ec0d14e1d7e53b8b8bf16c)|`Removed patches handling.`|


Builds OK, passes its test suite.



---

archive/issue_comments_317990.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-27T06:33:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317990",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317991.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-27T06:56:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317991",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_317992.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:34 jdemeyer]:\n\nCare to explain ?",
    "created_at": "2016-10-27T07:08:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317992",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:35'></a>Replying to [comment:34 jdemeyer]:

Care to explain ?



---

archive/issue_comments_317993.json:
```json
{
    "body": "<a id='comment:36'></a>[comment:19]",
    "created_at": "2016-10-27T07:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317993",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>[comment:19]



---

archive/issue_comments_317994.json:
```json
{
    "body": "<a id='comment:37'></a>Some old discussions that might enlighten you:\n* https://groups.google.com/forum/#!searchin/sage-devel/openssl|sort:relevance/sage-devel/mbGbpRz96q0/8nsKRNyLs3oJ (OpenSSL license issue)\n* https://groups.google.com/forum/#!searchin/sage-devel/openssl|sort:relevance/sage-devel/Jl11JxIb2E8/-1NrQmjbMKIJ (why GnuTLS which is GPL is not a drop in replacement)",
    "created_at": "2016-10-27T07:42:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317994",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:37'></a>Some old discussions that might enlighten you:
* https://groups.google.com/forum/#!searchin/sage-devel/openssl|sort:relevance/sage-devel/mbGbpRz96q0/8nsKRNyLs3oJ (OpenSSL license issue)
* https://groups.google.com/forum/#!searchin/sage-devel/openssl|sort:relevance/sage-devel/Jl11JxIb2E8/-1NrQmjbMKIJ (why GnuTLS which is GPL is not a drop in replacement)



---

archive/issue_comments_317995.json:
```json
{
    "body": "<a id='comment:38'></a>Discussion at:\n* https://groups.google.com/forum/#!topic/sage-devel/QaBdHSNJuKg",
    "created_at": "2016-10-27T09:50:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317995",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:38'></a>Discussion at:
* https://groups.google.com/forum/#!topic/sage-devel/QaBdHSNJuKg



---

archive/issue_comments_317996.json:
```json
{
    "body": "<a id='comment:39'></a>Replying to [comment:38 jpflori]:\n> Discussion at:\n> * https://groups.google.com/forum/#!topic/sage-devel/QaBdHSNJuKg\n\n\nThanks for the heads-up. It's important, and I'm afraid that the full size of the problem hasn't yet been considered : the R ecosystem is much larger (by about 3-4 magnitudes) than some seem to think...",
    "created_at": "2016-10-27T10:30:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317996",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:39'></a>Replying to [comment:38 jpflori]:
> Discussion at:
> * https://groups.google.com/forum/#!topic/sage-devel/QaBdHSNJuKg


Thanks for the heads-up. It's important, and I'm afraid that the full size of the problem hasn't yet been considered : the R ecosystem is much larger (by about 3-4 magnitudes) than some seem to think...



---

archive/issue_comments_317997.json:
```json
{
    "body": "<a id='comment:40'></a>`@`Volker: I've added a fat mode to avoid a lot of stuff curl might be tempted to use.\nI did not touch the SSL/TLS options. Should I?\n\n---\nNew commits:",
    "created_at": "2016-11-02T14:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317997",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:40'></a>`@`Volker: I've added a fat mode to avoid a lot of stuff curl might be tempted to use.
I did not touch the SSL/TLS options. Should I?

---
New commits:



---

archive/issue_comments_317998.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-02T14:45:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317998",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_317999.json:
```json
{
    "body": "<a id='comment:41'></a>I think that the (pseudo-)legal considerations which motivated last month's [saga](https://groups.google.com/forum/#!topic/sage-devel/QaBdHSNJuKg) leave us few options.\n\nI looked a bit closer to the idea of using an `rpy2`-based new interface to an external `R`. This is doable, but not in the short term.\n\nI am under the impression that the current (pexpect) interface won't work reliably with a system R (especially on \"exotic\" systems such as cygwin and the Mac). Therefore, depending on a systemwide installation for R is out of the question in the short term. We need an interim solution.\n\nMy current plan is :\n* Mark this ticket (#21767) as invalid/won't fix, forthe (pseudo-)legal reasons discussed in the saga.\n* Document in the REAME.md and various places in the [Installation guide](http://doc.sagemath.org/html/en/installation/index.html) that **Sage** depends on `libcurl` and building it depends on `libcurl`'s development files.\n* Make `xz` (existing package) and `pcre` (proposed new package) standard packages (see #21744 and #21770 respectively).\n* patch the `R install-spkg` to test for the existence and correct capabilities of libcurl before starting to install ; display an explicitly Sage-centered message and fail if not found / not correct.\n* make `R` depend on `xz` and `pcre`\n\nOnly *after* this interim solution works, envision the much larger task of creating a new interface.\n\nJean-Pierre : I think that omitting `https` requirement for R is a *very* bad idea : I do not know how longer R users will be able to depend on http-only repositories ; and, as I said before, R practical use is highly dependent of access to the 9000+ R packages in existence.\n\nAdvice required. Do you think useful to open an new discussion on [sage-devel](https://groups.google.com/forum/#!forum/sage-devel) ?\n\nNote 1 : the patchbot test of #21744 is marked \"pending\". What does that mean ?\n\nNote 2 : the patchbot test of #21770 fails repeatedly due to thye source tarball being unavailable on Sage standard repositories. What should I do ? The (ftp) address of the original tarball is in the ticket's header.",
    "created_at": "2016-11-20T20:36:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-317999",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:41'></a>I think that the (pseudo-)legal considerations which motivated last month's [saga](https://groups.google.com/forum/#!topic/sage-devel/QaBdHSNJuKg) leave us few options.

I looked a bit closer to the idea of using an `rpy2`-based new interface to an external `R`. This is doable, but not in the short term.

I am under the impression that the current (pexpect) interface won't work reliably with a system R (especially on "exotic" systems such as cygwin and the Mac). Therefore, depending on a systemwide installation for R is out of the question in the short term. We need an interim solution.

My current plan is :
* Mark this ticket (#21767) as invalid/won't fix, forthe (pseudo-)legal reasons discussed in the saga.
* Document in the REAME.md and various places in the [Installation guide](http://doc.sagemath.org/html/en/installation/index.html) that **Sage** depends on `libcurl` and building it depends on `libcurl`'s development files.
* Make `xz` (existing package) and `pcre` (proposed new package) standard packages (see #21744 and #21770 respectively).
* patch the `R install-spkg` to test for the existence and correct capabilities of libcurl before starting to install ; display an explicitly Sage-centered message and fail if not found / not correct.
* make `R` depend on `xz` and `pcre`

Only *after* this interim solution works, envision the much larger task of creating a new interface.

Jean-Pierre : I think that omitting `https` requirement for R is a *very* bad idea : I do not know how longer R users will be able to depend on http-only repositories ; and, as I said before, R practical use is highly dependent of access to the 9000+ R packages in existence.

Advice required. Do you think useful to open an new discussion on [sage-devel](https://groups.google.com/forum/#!forum/sage-devel) ?

Note 1 : the patchbot test of #21744 is marked "pending". What does that mean ?

Note 2 : the patchbot test of #21770 fails repeatedly due to thye source tarball being unavailable on Sage standard repositories. What should I do ? The (ftp) address of the original tarball is in the ticket's header.



---

archive/issue_comments_318000.json:
```json
{
    "body": "<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-02-18T22:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318000",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:42'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318001.json:
```json
{
    "body": "<a id='comment:43'></a>After #22189, curl remains a valid solution. I took the opportunity to upgrade curl to 7.52.1\n\nStill `needs_review`\n\n---\nNew commits:",
    "created_at": "2017-02-18T22:06:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318001",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:43'></a>After #22189, curl remains a valid solution. I took the opportunity to upgrade curl to 7.52.1

Still `needs_review`

---
New commits:



---

archive/issue_comments_318002.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+Rationale : R (standard package) requires libcurl (and possibly the curl executable), but stopped to package it with version 3.3.0.\n \n+See [discussion](https://groups.google.com/forum/#!topic/sage-devel/9gun2Wo6zGM) on sage-devel.\n+\n+**Tarball**: https://curl.haxx.se/download/curl-7.52.1.tar.bz2\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-02-18T22:28:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318002",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+Rationale : R (standard package) requires libcurl (and possibly the curl executable), but stopped to package it with version 3.3.0.
 
+See [discussion](https://groups.google.com/forum/#!topic/sage-devel/9gun2Wo6zGM) on sage-devel.
+
+**Tarball**: https://curl.haxx.se/download/curl-7.52.1.tar.bz2
 
 Comment: 1
 
``````




---

archive/issue_comments_318003.json:
```json
{
    "body": "<a id='comment:45'></a>Sage-7.6.beta4 + #20523 + #21767 (this patch) + #21770 passes ptestlong witht two transient errors :\n\n```\n----------------------------------------------------------------------\nsage -t --long src/sage/homology/simplicial_set_morphism.py  # Bad exit: 2\nsage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed\n----------------------------------------------------------------------\n```\nBoth tests pass when run standalone.\n\nThis should close the R saga (for now) by allowing the current interfaces to work with R >= 3.3.x.\n\nStill `needs_review`",
    "created_at": "2017-02-19T04:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318003",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:45'></a>Sage-7.6.beta4 + #20523 + #21767 (this patch) + #21770 passes ptestlong witht two transient errors :

```
----------------------------------------------------------------------
sage -t --long src/sage/homology/simplicial_set_morphism.py  # Bad exit: 2
sage -t --long src/sage/homology/simplicial_complex.py  # 1 doctest failed
----------------------------------------------------------------------
```
Both tests pass when run standalone.

This should close the R saga (for now) by allowing the current interfaces to work with R >= 3.3.x.

Still `needs_review`



---

archive/issue_comments_318004.json:
```json
{
    "body": "Set assignee to @EmmanuelCharpentier.",
    "created_at": "2017-02-20T19:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318004",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

Set assignee to @EmmanuelCharpentier.



---

archive/issue_comments_318005.json:
```json
{
    "body": "<a id='comment:46'></a>Merged in #20523. Acceptingthe ticket in order to mark it as invalid.",
    "created_at": "2017-02-20T19:50:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318005",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:46'></a>Merged in #20523. Acceptingthe ticket in order to mark it as invalid.



---

archive/issue_comments_318006.json:
```json
{
    "body": "<a id='comment:47'></a>I still can't mark it as invalid. Can someone with the right rights do this for me ?",
    "created_at": "2017-02-20T19:51:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318006",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:47'></a>I still can't mark it as invalid. Can someone with the right rights do this for me ?



---

archive/issue_comments_318007.json:
```json
{
    "body": "<a id='comment:48'></a>Replying to [comment:47 charpent]:\n> I still can't mark it as invalid. Can someone with the right rights do this for me ?\n\n\nAfter discussion of (potential) #20523 reviewers, I now think that this ticket should be kept, reviewed and validated. Pleas DON'T invalidate it.",
    "created_at": "2017-02-20T20:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318007",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:48'></a>Replying to [comment:47 charpent]:
> I still can't mark it as invalid. Can someone with the right rights do this for me ?


After discussion of (potential) #20523 reviewers, I now think that this ticket should be kept, reviewed and validated. Pleas DON'T invalidate it.



---

archive/issue_comments_318008.json:
```json
{
    "body": "<a id='comment:49'></a>`@`jeroen: I think we can merge this one ut it also entails that SSL becomes a Sage dependency. Any thought?",
    "created_at": "2017-03-14T12:33:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318008",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:49'></a>`@`jeroen: I think we can merge this one ut it also entails that SSL becomes a Sage dependency. Any thought?



---

archive/issue_comments_318009.json:
```json
{
    "body": "<a id='comment:50'></a>Replying to [comment:49 jpflori]:\n> `@`jeroen: I think we can merge this one ut it also entails that SSL becomes a Sage dependency. Any thought?\n\n\nAs per #22189 (already merged), SSL **IS** a Sage dependency. The point is therefore moot...",
    "created_at": "2017-03-14T12:47:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318009",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:50'></a>Replying to [comment:49 jpflori]:
> `@`jeroen: I think we can merge this one ut it also entails that SSL becomes a Sage dependency. Any thought?


As per #22189 (already merged), SSL **IS** a Sage dependency. The point is therefore moot...



---

archive/issue_comments_318010.json:
```json
{
    "body": "<a id='comment:51'></a>Replying to [comment:49 jpflori]:\n> `@`jeroen: I think we can merge this one ut it also entails that SSL becomes a Sage dependency. Any thought?\n\n\nI have mentioned before that I really would not like that...\n\nSo far, we have always been fixing packages requiring OpenSSL such that they would work without OpenSSL (with reduced functionality). I think that can and should be done for R also.",
    "created_at": "2017-03-14T22:57:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318010",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:51'></a>Replying to [comment:49 jpflori]:
> `@`jeroen: I think we can merge this one ut it also entails that SSL becomes a Sage dependency. Any thought?


I have mentioned before that I really would not like that...

So far, we have always been fixing packages requiring OpenSSL such that they would work without OpenSSL (with reduced functionality). I think that can and should be done for R also.



---

archive/issue_comments_318011.json:
```json
{
    "body": "<a id='comment:52'></a>Replying to [comment:51 jdemeyer]:\n> Replying to [comment:49 jpflori]:\n> > `@`jeroen: I think we can merge this one ut it also entails that SSL becomes a Sage dependency. Any thought?\n\n> \n> I have mentioned before that I really would not like that...\n\n\nBut somehow failed to explain the reasons of your dislike.\n\n> So far, we have always been fixing packages requiring OpenSSL such that they would work without OpenSSL (with reduced functionality).\n\n\nAnd that's why Sage's pip, compiled on a VM without OpenSSL, is unusable. \"Reduced functionality\", indeed...\n\n> I think that can and should be done for R also.\n\n\nThat should be done **upstream** :\n* in R (the R Core Team introduced the SSL requirement with R 3.3 after having maintained an internal library for years...) ;\n* in Python (which explicitly depends on OpenSSL).\n\nBut I really think that this is weather-fighting (and a rearguard fight, BTW). You still have to convince us that OpenSSL drawbacks (what are they ?) are worth committing a large part of our limited resources to work around it.",
    "created_at": "2017-03-15T06:53:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318011",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:52'></a>Replying to [comment:51 jdemeyer]:
> Replying to [comment:49 jpflori]:
> > `@`jeroen: I think we can merge this one ut it also entails that SSL becomes a Sage dependency. Any thought?

> 
> I have mentioned before that I really would not like that...


But somehow failed to explain the reasons of your dislike.

> So far, we have always been fixing packages requiring OpenSSL such that they would work without OpenSSL (with reduced functionality).


And that's why Sage's pip, compiled on a VM without OpenSSL, is unusable. "Reduced functionality", indeed...

> I think that can and should be done for R also.


That should be done **upstream** :
* in R (the R Core Team introduced the SSL requirement with R 3.3 after having maintained an internal library for years...) ;
* in Python (which explicitly depends on OpenSSL).

But I really think that this is weather-fighting (and a rearguard fight, BTW). You still have to convince us that OpenSSL drawbacks (what are they ?) are worth committing a large part of our limited resources to work around it.



---

archive/issue_comments_318012.json:
```json
{
    "body": "<a id='comment:53'></a>Replying to [comment:52 charpent]:\n> But somehow failed to explain the reasons of your dislike.\n\n\nIt's simple: an extra dependency makes it harder to build Sage. So far, we tried hard in Sage to have a minimal set of dependencies: all dependencies to build Sage are either obviously needed (compilers, make, ...) or are installed by default on most typical operating systems (Python).",
    "created_at": "2017-03-15T08:53:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318012",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:53'></a>Replying to [comment:52 charpent]:
> But somehow failed to explain the reasons of your dislike.


It's simple: an extra dependency makes it harder to build Sage. So far, we tried hard in Sage to have a minimal set of dependencies: all dependencies to build Sage are either obviously needed (compilers, make, ...) or are installed by default on most typical operating systems (Python).



---

archive/issue_comments_318013.json:
```json
{
    "body": "<a id='comment:54'></a>Replying to [comment:52 charpent]:\n> * in Python (which explicitly depends on OpenSSL).\n\n\nPython does not require OpenSSL, so I don't get your point.",
    "created_at": "2017-03-15T08:54:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318013",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:54'></a>Replying to [comment:52 charpent]:
> * in Python (which explicitly depends on OpenSSL).


Python does not require OpenSSL, so I don't get your point.



---

archive/issue_comments_318014.json:
```json
{
    "body": "<a id='comment:55'></a>Anyway, sorry for reviving this here as curl can build without ssl.\nThe issue is with R checking that curl supports ssl and I've posted a patch on the R ticket to remove that check.\n\n`@`emmanuel: can you update curl to the latest upstream version?\nThen I'll push the positive review button.",
    "created_at": "2017-03-15T09:11:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318014",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:55'></a>Anyway, sorry for reviving this here as curl can build without ssl.
The issue is with R checking that curl supports ssl and I've posted a patch on the R ticket to remove that check.

`@`emmanuel: can you update curl to the latest upstream version?
Then I'll push the positive review button.



---

archive/issue_comments_318015.json:
```json
{
    "body": "<a id='comment:56'></a>I'm currently checking that 7.53.1 works on OSX. I'll push the update as soon as I'm done.",
    "created_at": "2017-03-15T12:42:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318015",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:56'></a>I'm currently checking that 7.53.1 works on OSX. I'll push the update as soon as I'm done.



---

archive/issue_comments_318016.json:
```json
{
    "body": "<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-15T12:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318016",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:57'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318017.json:
```json
{
    "body": "<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-15T12:45:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318017",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318018.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-15T12:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318018",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_057583.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2017-03-15T12:46:16Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21767#event-57583"
}
```



---

archive/issue_comments_318019.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,8 @@\n+Rationale : R (standard package) requires libcurl (and possibly the curl executable), but stopped to package it with version 3.3.0.\n \n+See [discussion](https://groups.google.com/forum/#!topic/sage-devel/9gun2Wo6zGM) on sage-devel.\n+\n+**Tarball**: https://curl.haxx.se/download/curl-7.53.1.tar.bz2\n \n Comment: 1\n \n``````\n",
    "created_at": "2017-03-15T12:46:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318019",
    "user": "https://github.com/dimpase"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,8 @@
+Rationale : R (standard package) requires libcurl (and possibly the curl executable), but stopped to package it with version 3.3.0.
 
+See [discussion](https://groups.google.com/forum/#!topic/sage-devel/9gun2Wo6zGM) on sage-devel.
+
+**Tarball**: https://curl.haxx.se/download/curl-7.53.1.tar.bz2
 
 Comment: 1
 
``````




---

archive/issue_comments_318020.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2017-03-15T12:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318020",
    "user": "https://github.com/dimpase"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_318021.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-15T12:48:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318021",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_318022.json:
```json
{
    "body": "<a id='comment:62'></a>Replying to [comment:61 dimpase]:\n\n\u0421\u043f\u0430\u0441\u0441\u0438\u0431\u043e, \u0414\u0438\u043c\u0438\u0442\u0440\u0438. Sorry for the delay : I wasn't available this morning.",
    "created_at": "2017-03-15T14:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318022",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<a id='comment:62'></a>Replying to [comment:61 dimpase]:

, . Sorry for the delay : I wasn't available this morning.



---

archive/issue_comments_318023.json:
```json
{
    "body": "<a id='comment:63'></a>I am on it.",
    "created_at": "2017-03-16T10:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318023",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:63'></a>I am on it.



---

archive/issue_comments_318024.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2017-03-16T10:07:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318024",
    "user": "https://github.com/dimpase"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_318025.json:
```json
{
    "body": "<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-16T10:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318025",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:64'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318026.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-03-16T10:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318026",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318027.json:
```json
{
    "body": "<a id='comment:66'></a>You don't export CC so are you sure it will be taken into account?",
    "created_at": "2017-03-16T10:54:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318027",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:66'></a>You don't export CC so are you sure it will be taken into account?



---

archive/issue_comments_318028.json:
```json
{
    "body": "<a id='comment:67'></a>Replying to [comment:66 jpflori]:\n> You don't export CC so are you sure it will be taken into account?\n\n\nit is taken into account, sure. (I checked the log, etc). By the way, the same works in `r/spkg-install` - from where I stole this.",
    "created_at": "2017-03-16T11:16:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318028",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:67'></a>Replying to [comment:66 jpflori]:
> You don't export CC so are you sure it will be taken into account?


it is taken into account, sure. (I checked the log, etc). By the way, the same works in `r/spkg-install` - from where I stole this.



---

archive/issue_comments_318029.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-16T11:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318029",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_318030.json:
```json
{
    "body": "<a id='comment:68'></a>Then...",
    "created_at": "2017-03-16T11:18:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318030",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:68'></a>Then...



---

archive/issue_comments_318031.json:
```json
{
    "body": "Changing keywords from \"r-project\" to \"r-project, days85\".",
    "created_at": "2017-03-16T16:39:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318031",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing keywords from "r-project" to "r-project, days85".



---

archive/issue_comments_318032.json:
```json
{
    "body": "<a id='comment:70'></a>Followup at #22686",
    "created_at": "2017-03-26T20:03:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318032",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:70'></a>Followup at #22686



---

archive/issue_comments_318033.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-27T20:43:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21767#issuecomment-318033",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057584.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:43:10Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21767",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21767#event-57584"
}
```
