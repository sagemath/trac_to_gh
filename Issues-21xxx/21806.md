# Issue 21806: Allow multiple instances of the PariInstance object

archive/issues_021569.json:
```json
{
    "assignees": [],
    "body": "Since the `PariInstance` object is really just a callable namespace without state, it should be possible to create multiple instances of it.\n\nThe rationale for this is that when multiple python modules depend upon CyPari, each one must instantiate its own `PariInstance` object, or possibly an object inheriting from it.\n\nSince `PariInstance` initializes the PARI library upon `__init__`, we must be careful to do this initialization only once.\n\nWhen `PariInstance.__init__()` is called a second time with a `size` argument which is larger than the current size, we should increase (but never decrease) the PARI stack size but otherwise do nothing.\n\n\n\nDepends on #21820\n\nCC:  @defeo\n\nKeywords: **atelierpari2017**\n\nBranch/Commit: **[`b70450d`](https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320)**\n\nReviewer: **Vincent Delecroix, Luca De Feo**\n\nAuthor: **Luca De Feo, Jeroen Demeyer**\n\nComponent: **interfaces**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21806_\n\n",
    "closed_at": "2017-01-18T20:39:27Z",
    "created_at": "2016-11-03T14:13:28Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Allow multiple instances of the PariInstance object",
    "type": "issue",
    "updated_at": "2017-01-18T20:39:27Z",
    "url": "https://github.com/sagemath/sage/issues/21806",
    "user": "https://github.com/jdemeyer"
}
```
Since the `PariInstance` object is really just a callable namespace without state, it should be possible to create multiple instances of it.

The rationale for this is that when multiple python modules depend upon CyPari, each one must instantiate its own `PariInstance` object, or possibly an object inheriting from it.

Since `PariInstance` initializes the PARI library upon `__init__`, we must be careful to do this initialization only once.

When `PariInstance.__init__()` is called a second time with a `size` argument which is larger than the current size, we should increase (but never decrease) the PARI stack size but otherwise do nothing.



Depends on #21820

CC:  @defeo

Keywords: **atelierpari2017**

Branch/Commit: **[`b70450d`](https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320)**

Reviewer: **Vincent Delecroix, Luca De Feo**

Author: **Luca De Feo, Jeroen Demeyer**

Component: **interfaces**

_Issue created by migration from https://trac.sagemath.org/ticket/21806_





---

archive/issue_events_303129.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-03T14:13:28Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303129"
}
```



---

archive/issue_events_303130.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-03T14:13:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "c: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303130"
}
```



---

archive/issue_events_303131.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-03T14:13:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303131"
}
```



---

archive/issue_events_303132.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-03T14:13:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303132"
}
```



---

archive/issue_comments_320704.json:
```json
{
    "body": "Dependencies: **#21820**",
    "created_at": "2016-11-04T18:28:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320704",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#21820**



---

archive/issue_comments_320705.json:
```json
{
    "body": "Branch: **[u/defeo/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/allow_multiple_instances_of_the_pariinstance_object)**",
    "created_at": "2017-01-09T16:54:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320705",
    "user": "https://github.com/defeo"
}
```

Branch: **[u/defeo/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/allow_multiple_instances_of_the_pariinstance_object)**



---

archive/issue_comments_320706.json:
```json
{
    "body": "Commit: **[`061467f`](https://github.com/sagemath/sagetrac-mirror/commit/061467fe7198373a0e715b9fa6737a435d256c21)**",
    "created_at": "2017-01-10T10:25:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320706",
    "user": "https://github.com/defeo"
}
```

Commit: **[`061467f`](https://github.com/sagemath/sagetrac-mirror/commit/061467fe7198373a0e715b9fa6737a435d256c21)**



---

archive/issue_events_303133.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-01-10T10:25:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303133"
}
```



---

archive/issue_comments_320707.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/061467fe7198373a0e715b9fa6737a435d256c21\"><code>061467f</code></a></td><td><code>Allow the PariInstance object to be allocated multiple times.</code></td></tr></table>\n",
    "created_at": "2017-01-10T10:25:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320707",
    "user": "https://github.com/defeo"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/061467fe7198373a0e715b9fa6737a435d256c21"><code>061467f</code></a></td><td><code>Allow the PariInstance object to be allocated multiple times.</code></td></tr></table>




---

archive/issue_comments_320708.json:
```json
{
    "body": "Author: **Luca De Feo**",
    "created_at": "2017-01-10T10:25:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320708",
    "user": "https://github.com/defeo"
}
```

Author: **Luca De Feo**



---

archive/issue_comments_320709.json:
```json
{
    "body": "Changed keywords from none to **atelierpari2017**",
    "created_at": "2017-01-10T10:29:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320709",
    "user": "https://github.com/defeo"
}
```

Changed keywords from none to **atelierpari2017**



---

archive/issue_comments_320710.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nI don't understand clearly why we should allow multiple pari instances. Could it be precised in the ticket description? (we discussed it yesterday but I don't quite remember)",
    "created_at": "2017-01-10T13:52:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320710",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">comment:5</div>

I don't understand clearly why we should allow multiple pari instances. Could it be precised in the ticket description? (we discussed it yesterday but I don't quite remember)



---

archive/issue_comments_320711.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nminor remark: there are trailing whitespaces!",
    "created_at": "2017-01-10T13:53:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320711",
    "user": "https://github.com/videlec"
}
```

<div id="comment:6" align="right">comment:6</div>

minor remark: there are trailing whitespaces!



---

archive/issue_comments_320712.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2017-01-10T13:53:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320712",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_events_303134.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-10T13:53:53Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303134"
}
```



---

archive/issue_events_303135.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-10T13:53:53Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303135"
}
```



---

archive/issue_comments_320713.json:
```json
{
    "body": "<div id=\"comment:8\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa6e5dd5967d539c9588933cd598a5e3558bee09\"><code>aa6e5dd</code></a></td><td><code>Removed trailing withespaces</code></td></tr></table>\n",
    "created_at": "2017-01-10T14:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320713",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:8"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa6e5dd5967d539c9588933cd598a5e3558bee09"><code>aa6e5dd</code></a></td><td><code>Removed trailing withespaces</code></td></tr></table>




---

archive/issue_comments_320714.json:
```json
{
    "body": "Changed commit from **[`061467f`](https://github.com/sagemath/sagetrac-mirror/commit/061467fe7198373a0e715b9fa6737a435d256c21)** to **[`aa6e5dd`](https://github.com/sagemath/sagetrac-mirror/commit/aa6e5dd5967d539c9588933cd598a5e3558bee09)**",
    "created_at": "2017-01-10T14:05:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320714",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`061467f`](https://github.com/sagemath/sagetrac-mirror/commit/061467fe7198373a0e715b9fa6737a435d256c21)** to **[`aa6e5dd`](https://github.com/sagemath/sagetrac-mirror/commit/aa6e5dd5967d539c9588933cd598a5e3558bee09)**



---

archive/issue_comments_320715.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nNote that an alternate, reasonable, design would initialize the PARI library at module load, rather than in `__init__`. However this ticket is not concerned with this.\n\nWith the current design, we have the (dubious) advantage of being able to call `pari_close()` (via `PariInstance._close()`, and then reinitialize PARI by creating a new `PariInstance` object at leisure.",
    "created_at": "2017-01-10T14:14:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320715",
    "user": "https://github.com/defeo"
}
```

<div id="comment:9" align="right">comment:9</div>

Note that an alternate, reasonable, design would initialize the PARI library at module load, rather than in `__init__`. However this ticket is not concerned with this.

With the current design, we have the (dubious) advantage of being able to call `pari_close()` (via `PariInstance._close()`, and then reinitialize PARI by creating a new `PariInstance` object at leisure.



---

archive/issue_comments_320716.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n Since the `PariInstance` object is really just a callable namespace without state, it should be possible to create multiple instances of it.\n \n+The rationale for this is that when multiple python modules depend upon CyPari, each one must instantiate its own `PariInstance` object, or possibly an object inheriting from it.\n+\n+Since `PariInstance` initializes the PARI library upon `__init__`, we must be careful to do this initialization only once.\n+\n When `PariInstance.__init__()` is called a second time with a `size` argument which is larger than the current size, we should increase (but never decrease) the PARI stack size but otherwise do nothing.\n+\n+\n``````\n",
    "created_at": "2017-01-10T14:14:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320716",
    "user": "https://github.com/defeo"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
 Since the `PariInstance` object is really just a callable namespace without state, it should be possible to create multiple instances of it.
 
+The rationale for this is that when multiple python modules depend upon CyPari, each one must instantiate its own `PariInstance` object, or possibly an object inheriting from it.
+
+Since `PariInstance` initializes the PARI library upon `__init__`, we must be careful to do this initialization only once.
+
 When `PariInstance.__init__()` is called a second time with a `size` argument which is larger than the current size, we should increase (but never decrease) the PARI stack size but otherwise do nothing.
+
+
``````




---

archive/issue_events_303136.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-01-10T14:14:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303136"
}
```



---

archive/issue_events_303137.json:
```json
{
    "actor": "https://github.com/defeo",
    "created_at": "2017-01-10T14:14:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303137"
}
```



---

archive/issue_comments_320717.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2017-01-10T14:14:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320717",
    "user": "https://github.com/defeo"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_320718.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\npari **is** initialized at module load since a global `pari_instance` is created! Calling `_close` is dangerous since this global instance is still accessible... we might want to document this bug-feature",
    "created_at": "2017-01-10T14:23:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320718",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">comment:11</div>

pari **is** initialized at module load since a global `pari_instance` is created! Calling `_close` is dangerous since this global instance is still accessible... we might want to document this bug-feature



---

archive/issue_comments_320719.json:
```json
{
    "body": "Changed branch from **[u/defeo/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/allow_multiple_instances_of_the_pariinstance_object)** to **[u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object)**",
    "created_at": "2017-01-10T15:08:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320719",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/allow_multiple_instances_of_the_pariinstance_object)** to **[u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object)**



---

archive/issue_comments_320720.json:
```json
{
    "body": "Changed commit from **[`aa6e5dd`](https://github.com/sagemath/sagetrac-mirror/commit/aa6e5dd5967d539c9588933cd598a5e3558bee09)** to **[`9df4382`](https://github.com/sagemath/sagetrac-mirror/commit/9df4382bcd2588c8243df5dcbd8e36e2c42ba914)**",
    "created_at": "2017-01-10T15:09:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320720",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`aa6e5dd`](https://github.com/sagemath/sagetrac-mirror/commit/aa6e5dd5967d539c9588933cd598a5e3558bee09)** to **[`9df4382`](https://github.com/sagemath/sagetrac-mirror/commit/9df4382bcd2588c8243df5dcbd8e36e2c42ba914)**



---

archive/issue_events_303138.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-10T15:09:12Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303138"
}
```



---

archive/issue_events_303139.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-10T15:09:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303139"
}
```



---

archive/issue_comments_320721.json:
```json
{
    "body": "Changed author from **Luca De Feo** to **Luca De Feo, Jeroen Demeyer**",
    "created_at": "2017-01-10T15:09:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320721",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Luca De Feo** to **Luca De Feo, Jeroen Demeyer**



---

archive/issue_comments_320722.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nReplying to [@videlec](#comment:11):\n> pari **is** initialized at module load since a global `pari_instance` is created!\n\nBut that will change. `cypari2` should not do that.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9df4382bcd2588c8243df5dcbd8e36e2c42ba914\"><code>9df4382</code></a></td><td><code>Move initialization of PARI to PariInstance.__cinit__</code></td></tr></table>\n",
    "created_at": "2017-01-10T15:09:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320722",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:13" align="right">comment:13</div>

Replying to [@videlec](#comment:11):
> pari **is** initialized at module load since a global `pari_instance` is created!

But that will change. `cypari2` should not do that.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9df4382bcd2588c8243df5dcbd8e36e2c42ba914"><code>9df4382</code></a></td><td><code>Move initialization of PARI to PariInstance.__cinit__</code></td></tr></table>




---

archive/issue_comments_320723.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c2d09af38425f42aa438fc8d724d01149d967e23\"><code>c2d09af</code></a></td><td><code>Improve documentation of _close()</code></td></tr></table>\n",
    "created_at": "2017-01-10T15:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320723",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c2d09af38425f42aa438fc8d724d01149d967e23"><code>c2d09af</code></a></td><td><code>Improve documentation of _close()</code></td></tr></table>




---

archive/issue_comments_320724.json:
```json
{
    "body": "Changed commit from **[`9df4382`](https://github.com/sagemath/sagetrac-mirror/commit/9df4382bcd2588c8243df5dcbd8e36e2c42ba914)** to **[`c2d09af`](https://github.com/sagemath/sagetrac-mirror/commit/c2d09af38425f42aa438fc8d724d01149d967e23)**",
    "created_at": "2017-01-10T15:13:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320724",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9df4382`](https://github.com/sagemath/sagetrac-mirror/commit/9df4382bcd2588c8243df5dcbd8e36e2c42ba914)** to **[`c2d09af`](https://github.com/sagemath/sagetrac-mirror/commit/c2d09af38425f42aa438fc8d724d01149d967e23)**



---

archive/issue_comments_320725.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b81781ebb2be6557cc9415ab614780cbbd25d7a\"><code>4b81781</code></a></td><td><code>Move _close() method right after __init__()</code></td></tr></table>\n",
    "created_at": "2017-01-10T15:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320725",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b81781ebb2be6557cc9415ab614780cbbd25d7a"><code>4b81781</code></a></td><td><code>Move _close() method right after __init__()</code></td></tr></table>




---

archive/issue_comments_320726.json:
```json
{
    "body": "Changed commit from **[`c2d09af`](https://github.com/sagemath/sagetrac-mirror/commit/c2d09af38425f42aa438fc8d724d01149d967e23)** to **[`4b81781`](https://github.com/sagemath/sagetrac-mirror/commit/4b81781ebb2be6557cc9415ab614780cbbd25d7a)**",
    "created_at": "2017-01-10T15:14:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320726",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c2d09af`](https://github.com/sagemath/sagetrac-mirror/commit/c2d09af38425f42aa438fc8d724d01149d967e23)** to **[`4b81781`](https://github.com/sagemath/sagetrac-mirror/commit/4b81781ebb2be6557cc9415ab614780cbbd25d7a)**



---

archive/issue_comments_320727.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nNew version, needs review...",
    "created_at": "2017-01-10T15:16:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320727",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

New version, needs review...



---

archive/issue_comments_320728.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object)** to **[u/defeo/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/allow_multiple_instances_of_the_pariinstance_object)**",
    "created_at": "2017-01-10T17:03:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320728",
    "user": "https://github.com/defeo"
}
```

Changed branch from **[u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object)** to **[u/defeo/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/allow_multiple_instances_of_the_pariinstance_object)**



---

archive/issue_comments_320729.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAll doctests pass, and I like Jeroens modifications.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/80d40980013260f4925b5ca5898b2b674d23fefe\"><code>80d4098</code></a></td><td><code>Typo</code></td></tr></table>\n",
    "created_at": "2017-01-10T17:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320729",
    "user": "https://github.com/defeo"
}
```

<div id="comment:18" align="right">comment:18</div>

All doctests pass, and I like Jeroens modifications.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/80d40980013260f4925b5ca5898b2b674d23fefe"><code>80d4098</code></a></td><td><code>Typo</code></td></tr></table>




---

archive/issue_comments_320730.json:
```json
{
    "body": "Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Luca De Feo**",
    "created_at": "2017-01-10T17:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320730",
    "user": "https://github.com/defeo"
}
```

Changed reviewer from **Vincent Delecroix** to **Vincent Delecroix, Luca De Feo**



---

archive/issue_comments_320731.json:
```json
{
    "body": "Changed commit from **[`4b81781`](https://github.com/sagemath/sagetrac-mirror/commit/4b81781ebb2be6557cc9415ab614780cbbd25d7a)** to **[`80d4098`](https://github.com/sagemath/sagetrac-mirror/commit/80d40980013260f4925b5ca5898b2b674d23fefe)**",
    "created_at": "2017-01-10T17:28:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320731",
    "user": "https://github.com/defeo"
}
```

Changed commit from **[`4b81781`](https://github.com/sagemath/sagetrac-mirror/commit/4b81781ebb2be6557cc9415ab614780cbbd25d7a)** to **[`80d4098`](https://github.com/sagemath/sagetrac-mirror/commit/80d40980013260f4925b5ca5898b2b674d23fefe)**



---

archive/issue_comments_320732.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nWhat should I expect from\n\n```\nsage: from sage.libs.cypari2.pari_instance import PariInstance\nsage: p = PariInstance()\nsage: p._close()\nsage: p('12')\n```",
    "created_at": "2017-01-11T08:36:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320732",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">comment:19</div>

What should I expect from

```
sage: from sage.libs.cypari2.pari_instance import PariInstance
sage: p = PariInstance()
sage: p._close()
sage: p('12')
```



---

archive/issue_comments_320733.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@videlec](#comment:19):\n> What should I expect from\n> \n> ```\n> sage: from sage.libs.cypari2.pari_instance import PariInstance\n> sage: p = PariInstance()\n> sage: p._close()\n> sage: p('12')\n> ```\n\nA segmentation fault I guess.",
    "created_at": "2017-01-11T08:45:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320733",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@videlec](#comment:19):
> What should I expect from
> 
> ```
> sage: from sage.libs.cypari2.pari_instance import PariInstance
> sage: p = PariInstance()
> sage: p._close()
> sage: p('12')
> ```

A segmentation fault I guess.



---

archive/issue_comments_320734.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jdemeyer](#comment:20):\n> Replying to [@videlec](#comment:19):\n> > What should I expect from\n> > \n> > ```\n> > sage: from sage.libs.cypari2.pari_instance import PariInstance\n> > sage: p = PariInstance()\n> > sage: p._close()\n> > sage: p('12')\n> > ```\n\n> \n> A segmentation fault I guess.\n\nShouldn't it be documented as I mentioned in [comment:11]?",
    "created_at": "2017-01-11T08:50:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320734",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jdemeyer](#comment:20):
> Replying to [@videlec](#comment:19):
> > What should I expect from
> > 
> > ```
> > sage: from sage.libs.cypari2.pari_instance import PariInstance
> > sage: p = PariInstance()
> > sage: p._close()
> > sage: p('12')
> > ```

> 
> A segmentation fault I guess.

Shouldn't it be documented as I mentioned in [comment:11]?



---

archive/issue_comments_320735.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThere is already the comment\n\n```\n            Call this method at you own risk if you really need to free\n            the memory used by PARI.\n```",
    "created_at": "2017-01-11T08:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320735",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

There is already the comment

```
            Call this method at you own risk if you really need to free
            the memory used by PARI.
```



---

archive/issue_comments_320736.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@jdemeyer](#comment:22):\n> There is already the comment\n> \n> ```\n>             Call this method at you own risk if you really need to free\n>             the memory used by PARI.\n> ```\n\nThis comment is not clear enough. The sentence says that the memory is freed. Not that you will obtain a `SEGFAULT` if you try to use pari again. Moreover, creating a new pari instance would make pari available again (right?).",
    "created_at": "2017-01-11T09:50:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320736",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@jdemeyer](#comment:22):
> There is already the comment
> 
> ```
>             Call this method at you own risk if you really need to free
>             the memory used by PARI.
> ```

This comment is not clear enough. The sentence says that the memory is freed. Not that you will obtain a `SEGFAULT` if you try to use pari again. Moreover, creating a new pari instance would make pari available again (right?).



---

archive/issue_comments_320737.json:
```json
{
    "body": "Changed branch from **[u/defeo/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/allow_multiple_instances_of_the_pariinstance_object)** to **[u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object)**",
    "created_at": "2017-01-11T15:13:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320737",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/defeo/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/defeo/allow_multiple_instances_of_the_pariinstance_object)** to **[u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object)**



---

archive/issue_comments_320738.json:
```json
{
    "body": "Changed commit from **[`80d4098`](https://github.com/sagemath/sagetrac-mirror/commit/80d40980013260f4925b5ca5898b2b674d23fefe)** to **[`b70450d`](https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320)**",
    "created_at": "2017-01-11T15:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320738",
    "user": "https://github.com/videlec"
}
```

Changed commit from **[`80d4098`](https://github.com/sagemath/sagetrac-mirror/commit/80d40980013260f4925b5ca5898b2b674d23fefe)** to **[`b70450d`](https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320)**



---

archive/issue_events_303140.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-11T15:52:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303140"
}
```



---

archive/issue_events_303141.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2017-01-11T15:52:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303141"
}
```



---

archive/issue_comments_320739.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320\"><code>b70450d</code></a></td><td><code>Improve documentation of _close()</code></td></tr></table>\n",
    "created_at": "2017-01-11T15:52:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320739",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320"><code>b70450d</code></a></td><td><code>Improve documentation of _close()</code></td></tr></table>




---

archive/issue_events_303142.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-18T20:39:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303142"
}
```



---

archive/issue_events_303143.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "df8a3ff7f45fe1f6b844a00e92e224f7d810cf9e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-01-18T20:39:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21806#event-303143"
}
```



---

archive/issue_comments_320740.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object)** to **[`b70450d`](https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320)**",
    "created_at": "2017-01-18T20:39:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21806#issuecomment-320740",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object)** to **[`b70450d`](https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320)**
