# Issue 21806: Allow multiple instances of the PariInstance object

archive/issues_021569.json:
```json
{
    "body": "Since the `PariInstance` object is really just a callable namespace without state, it should be possible to create multiple instances of it.\n\nThe rationale for this is that when multiple python modules depend upon CyPari, each one must instantiate its own `PariInstance` object, or possibly an object inheriting from it.\n\nSince `PariInstance` initializes the PARI library upon `__init__`, we must be careful to do this initialization only once.\n\nWhen `PariInstance.__init__()` is called a second time with a `size` argument which is larger than the current size, we should increase (but never decrease) the PARI stack size but otherwise do nothing.\n\n\n\nCC:  @defeo\n\nKeywords: atelierpari2017\n\nBranch/Commit: b70450d27cd0a39bad2311ad5851057823285320\n\nReviewer: Vincent Delecroix, Luca De Feo\n\nAuthor: Luca De Feo, Jeroen Demeyer\n\nDependencies: #21820\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21806\n\n",
    "closed_at": "2017-01-18T20:39:27Z",
    "created_at": "2016-11-03T14:13:28Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "Allow multiple instances of the PariInstance object",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21806",
    "user": "https://github.com/jdemeyer"
}
```
Since the `PariInstance` object is really just a callable namespace without state, it should be possible to create multiple instances of it.

The rationale for this is that when multiple python modules depend upon CyPari, each one must instantiate its own `PariInstance` object, or possibly an object inheriting from it.

Since `PariInstance` initializes the PARI library upon `__init__`, we must be careful to do this initialization only once.

When `PariInstance.__init__()` is called a second time with a `size` argument which is larger than the current size, we should increase (but never decrease) the PARI stack size but otherwise do nothing.



CC:  @defeo

Keywords: atelierpari2017

Branch/Commit: b70450d27cd0a39bad2311ad5851057823285320

Reviewer: Vincent Delecroix, Luca De Feo

Author: Luca De Feo, Jeroen Demeyer

Dependencies: #21820

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21806





---

archive/issue_comments_397270.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#21820\"",
    "created_at": "2016-11-04T18:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397270",
    "user": "https://github.com/jdemeyer"
}
```

Changing dependencies from "" to "#21820"



---

archive/issue_comments_397271.json:
```json
{
    "body": "Changing branch from \"\" to \"u/defeo/allow_multiple_instances_of_the_pariinstance_object\"",
    "created_at": "2017-01-09T16:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397271",
    "user": "https://github.com/defeo"
}
```

Changing branch from "" to "u/defeo/allow_multiple_instances_of_the_pariinstance_object"



---

archive/issue_comments_397272.json:
```json
{
    "body": "Changing commit from \"\" to \"061467fe7198373a0e715b9fa6737a435d256c21\"",
    "created_at": "2017-01-10T10:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397272",
    "user": "https://github.com/defeo"
}
```

Changing commit from "" to "061467fe7198373a0e715b9fa6737a435d256c21"



---

archive/issue_comments_397273.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-01-10T10:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397273",
    "user": "https://github.com/defeo"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_397274.json:
```json
{
    "body": "<a id='comment:3'></a>\nNew commits:\n|                                                                                                                                          |                                                               |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|\n|[061467f](https://github.com/sagemath/sagetrac-mirror/commit/061467fe7198373a0e715b9fa6737a435d256c21)|`Allow the PariInstance object to be allocated multiple times.`|",
    "created_at": "2017-01-10T10:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397274",
    "user": "https://github.com/defeo"
}
```

<a id='comment:3'></a>
New commits:
|                                                                                                                                          |                                                               |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------|
|[061467f](https://github.com/sagemath/sagetrac-mirror/commit/061467fe7198373a0e715b9fa6737a435d256c21)|`Allow the PariInstance object to be allocated multiple times.`|



---

archive/issue_comments_397275.json:
```json
{
    "body": "Changing author from \"\" to \"Luca De Feo\"",
    "created_at": "2017-01-10T10:25:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397275",
    "user": "https://github.com/defeo"
}
```

Changing author from "" to "Luca De Feo"



---

archive/issue_comments_397276.json:
```json
{
    "body": "Changing keywords from \"\" to \"atelierpari2017\".",
    "created_at": "2017-01-10T10:29:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397276",
    "user": "https://github.com/defeo"
}
```

Changing keywords from "" to "atelierpari2017".



---

archive/issue_comments_397277.json:
```json
{
    "body": "<a id='comment:5'></a>\nI don't understand clearly why we should allow multiple pari instances. Could it be precised in the ticket description? (we discussed it yesterday but I don't quite remember)",
    "created_at": "2017-01-10T13:52:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397277",
    "user": "https://github.com/videlec"
}
```

<a id='comment:5'></a>
I don't understand clearly why we should allow multiple pari instances. Could it be precised in the ticket description? (we discussed it yesterday but I don't quite remember)



---

archive/issue_comments_397278.json:
```json
{
    "body": "<a id='comment:6'></a>\nminor remark: there are trailing whitespaces!",
    "created_at": "2017-01-10T13:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397278",
    "user": "https://github.com/videlec"
}
```

<a id='comment:6'></a>
minor remark: there are trailing whitespaces!



---

archive/issue_comments_397279.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Vincent Delecroix\"",
    "created_at": "2017-01-10T13:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397279",
    "user": "https://github.com/videlec"
}
```

Changing reviewer from "" to "Vincent Delecroix"



---

archive/issue_comments_397280.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-10T13:53:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397280",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_397281.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                              |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|\n|[aa6e5dd](https://github.com/sagemath/sagetrac-mirror/commit/aa6e5dd5967d539c9588933cd598a5e3558bee09)|`Removed trailing withespaces`|",
    "created_at": "2017-01-10T14:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397281",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                              |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------|
|[aa6e5dd](https://github.com/sagemath/sagetrac-mirror/commit/aa6e5dd5967d539c9588933cd598a5e3558bee09)|`Removed trailing withespaces`|



---

archive/issue_comments_397282.json:
```json
{
    "body": "Changing commit from \"061467fe7198373a0e715b9fa6737a435d256c21\" to \"aa6e5dd5967d539c9588933cd598a5e3558bee09\"",
    "created_at": "2017-01-10T14:05:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397282",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "061467fe7198373a0e715b9fa6737a435d256c21" to "aa6e5dd5967d539c9588933cd598a5e3558bee09"



---

archive/issue_comments_397283.json:
```json
{
    "body": "<a id='comment:9'></a>\nNote that an alternate, reasonable, design would initialize the PARI library at module load, rather than in `__init__`. However this ticket is not concerned with this.\n\nWith the current design, we have the (dubious) advantage of being able to call `pari_close()` (via `PariInstance._close()`, and then reinitialize PARI by creating a new `PariInstance` object at leisure.",
    "created_at": "2017-01-10T14:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397283",
    "user": "https://github.com/defeo"
}
```

<a id='comment:9'></a>
Note that an alternate, reasonable, design would initialize the PARI library at module load, rather than in `__init__`. However this ticket is not concerned with this.

With the current design, we have the (dubious) advantage of being able to call `pari_close()` (via `PariInstance._close()`, and then reinitialize PARI by creating a new `PariInstance` object at leisure.



---

archive/issue_comments_397284.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,9 @@\n Since the `PariInstance` object is really just a callable namespace without state, it should be possible to create multiple instances of it.\n \n+The rationale for this is that when multiple python modules depend upon CyPari, each one must instantiate its own `PariInstance` object, or possibly an object inheriting from it.\n+\n+Since `PariInstance` initializes the PARI library upon `__init__`, we must be careful to do this initialization only once.\n+\n When `PariInstance.__init__()` is called a second time with a `size` argument which is larger than the current size, we should increase (but never decrease) the PARI stack size but otherwise do nothing.\n+\n+\n``````\n",
    "created_at": "2017-01-10T14:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397284",
    "user": "https://github.com/defeo"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,9 @@
 Since the `PariInstance` object is really just a callable namespace without state, it should be possible to create multiple instances of it.
 
+The rationale for this is that when multiple python modules depend upon CyPari, each one must instantiate its own `PariInstance` object, or possibly an object inheriting from it.
+
+Since `PariInstance` initializes the PARI library upon `__init__`, we must be careful to do this initialization only once.
+
 When `PariInstance.__init__()` is called a second time with a `size` argument which is larger than the current size, we should increase (but never decrease) the PARI stack size but otherwise do nothing.
+
+
``````




---

archive/issue_comments_397285.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-10T14:14:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397285",
    "user": "https://github.com/defeo"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_397286.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2017-01-10T14:14:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397286",
    "user": "https://github.com/defeo"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_397287.json:
```json
{
    "body": "<a id='comment:11'></a>\npari **is** initialized at module load since a global `pari_instance` is created! Calling `_close` is dangerous since this global instance is still accessible... we might want to document this bug-feature",
    "created_at": "2017-01-10T14:23:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397287",
    "user": "https://github.com/videlec"
}
```

<a id='comment:11'></a>
pari **is** initialized at module load since a global `pari_instance` is created! Calling `_close` is dangerous since this global instance is still accessible... we might want to document this bug-feature



---

archive/issue_comments_397288.json:
```json
{
    "body": "Changing branch from \"u/defeo/allow_multiple_instances_of_the_pariinstance_object\" to \"u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object\"",
    "created_at": "2017-01-10T15:08:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397288",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/defeo/allow_multiple_instances_of_the_pariinstance_object" to "u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object"



---

archive/issue_comments_397289.json:
```json
{
    "body": "Changing commit from \"aa6e5dd5967d539c9588933cd598a5e3558bee09\" to \"9df4382bcd2588c8243df5dcbd8e36e2c42ba914\"",
    "created_at": "2017-01-10T15:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397289",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "aa6e5dd5967d539c9588933cd598a5e3558bee09" to "9df4382bcd2588c8243df5dcbd8e36e2c42ba914"



---

archive/issue_events_073378.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-01-10T15:09:12Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21806#event-73378"
}
```



---

archive/issue_comments_397290.json:
```json
{
    "body": "Changing author from \"Luca De Feo\" to \"Luca De Feo, Jeroen Demeyer\"",
    "created_at": "2017-01-10T15:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397290",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "Luca De Feo" to "Luca De Feo, Jeroen Demeyer"



---

archive/issue_comments_397291.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [vdelecroix](#comment%3A11):\n> pari **is** initialized at module load since a global `pari_instance` is created!\n\n\nBut that will change. `cypari2` should not do that.\n\n---\nNew commits:\n|                                                                                                                                          |                                                       |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|\n|[9df4382](https://github.com/sagemath/sagetrac-mirror/commit/9df4382bcd2588c8243df5dcbd8e36e2c42ba914)|`Move initialization of PARI to PariInstance.__cinit__`|",
    "created_at": "2017-01-10T15:09:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397291",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
Replying to [vdelecroix](#comment%3A11):
> pari **is** initialized at module load since a global `pari_instance` is created!


But that will change. `cypari2` should not do that.

---
New commits:
|                                                                                                                                          |                                                       |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------|
|[9df4382](https://github.com/sagemath/sagetrac-mirror/commit/9df4382bcd2588c8243df5dcbd8e36e2c42ba914)|`Move initialization of PARI to PariInstance.__cinit__`|



---

archive/issue_comments_397292.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[c2d09af](https://github.com/sagemath/sagetrac-mirror/commit/c2d09af38425f42aa438fc8d724d01149d967e23)|`Improve documentation of _close()`|",
    "created_at": "2017-01-10T15:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397292",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[c2d09af](https://github.com/sagemath/sagetrac-mirror/commit/c2d09af38425f42aa438fc8d724d01149d967e23)|`Improve documentation of _close()`|



---

archive/issue_comments_397293.json:
```json
{
    "body": "Changing commit from \"9df4382bcd2588c8243df5dcbd8e36e2c42ba914\" to \"c2d09af38425f42aa438fc8d724d01149d967e23\"",
    "created_at": "2017-01-10T15:13:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397293",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9df4382bcd2588c8243df5dcbd8e36e2c42ba914" to "c2d09af38425f42aa438fc8d724d01149d967e23"



---

archive/issue_comments_397294.json:
```json
{
    "body": "<a id='comment:15'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|\n|[4b81781](https://github.com/sagemath/sagetrac-mirror/commit/4b81781ebb2be6557cc9415ab614780cbbd25d7a)|`Move _close() method right after __init__()`|",
    "created_at": "2017-01-10T15:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397294",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------|
|[4b81781](https://github.com/sagemath/sagetrac-mirror/commit/4b81781ebb2be6557cc9415ab614780cbbd25d7a)|`Move _close() method right after __init__()`|



---

archive/issue_comments_397295.json:
```json
{
    "body": "Changing commit from \"c2d09af38425f42aa438fc8d724d01149d967e23\" to \"4b81781ebb2be6557cc9415ab614780cbbd25d7a\"",
    "created_at": "2017-01-10T15:14:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397295",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c2d09af38425f42aa438fc8d724d01149d967e23" to "4b81781ebb2be6557cc9415ab614780cbbd25d7a"



---

archive/issue_comments_397296.json:
```json
{
    "body": "<a id='comment:16'></a>\nNew version, needs review...",
    "created_at": "2017-01-10T15:16:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397296",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
New version, needs review...



---

archive/issue_comments_397297.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object\" to \"u/defeo/allow_multiple_instances_of_the_pariinstance_object\"",
    "created_at": "2017-01-10T17:03:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397297",
    "user": "https://github.com/defeo"
}
```

Changing branch from "u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object" to "u/defeo/allow_multiple_instances_of_the_pariinstance_object"



---

archive/issue_comments_397298.json:
```json
{
    "body": "<a id='comment:18'></a>\nAll doctests pass, and I like Jeroens modifications.\n\n---\nNew commits:\n|                                                                                                                                          |      |\n|------------------------------------------------------------------------------------------------------------------------------------------|------|\n|[80d4098](https://github.com/sagemath/sagetrac-mirror/commit/80d40980013260f4925b5ca5898b2b674d23fefe)|`Typo`|",
    "created_at": "2017-01-10T17:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397298",
    "user": "https://github.com/defeo"
}
```

<a id='comment:18'></a>
All doctests pass, and I like Jeroens modifications.

---
New commits:
|                                                                                                                                          |      |
|------------------------------------------------------------------------------------------------------------------------------------------|------|
|[80d4098](https://github.com/sagemath/sagetrac-mirror/commit/80d40980013260f4925b5ca5898b2b674d23fefe)|`Typo`|



---

archive/issue_comments_397299.json:
```json
{
    "body": "Changing reviewer from \"Vincent Delecroix\" to \"Vincent Delecroix, Luca De Feo\"",
    "created_at": "2017-01-10T17:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397299",
    "user": "https://github.com/defeo"
}
```

Changing reviewer from "Vincent Delecroix" to "Vincent Delecroix, Luca De Feo"



---

archive/issue_comments_397300.json:
```json
{
    "body": "Changing commit from \"4b81781ebb2be6557cc9415ab614780cbbd25d7a\" to \"80d40980013260f4925b5ca5898b2b674d23fefe\"",
    "created_at": "2017-01-10T17:28:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397300",
    "user": "https://github.com/defeo"
}
```

Changing commit from "4b81781ebb2be6557cc9415ab614780cbbd25d7a" to "80d40980013260f4925b5ca5898b2b674d23fefe"



---

archive/issue_comments_397301.json:
```json
{
    "body": "<a id='comment:19'></a>\nWhat should I expect from\n\n```\nsage: from sage.libs.cypari2.pari_instance import PariInstance\nsage: p = PariInstance()\nsage: p._close()\nsage: p('12')\n```",
    "created_at": "2017-01-11T08:36:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397301",
    "user": "https://github.com/videlec"
}
```

<a id='comment:19'></a>
What should I expect from

```
sage: from sage.libs.cypari2.pari_instance import PariInstance
sage: p = PariInstance()
sage: p._close()
sage: p('12')
```



---

archive/issue_comments_397302.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [vdelecroix](#comment%3A19):\n> What should I expect from\n> \n> ```\n> sage: from sage.libs.cypari2.pari_instance import PariInstance\n> sage: p = PariInstance()\n> sage: p._close()\n> sage: p('12')\n> ```\n\n\nA segmentation fault I guess.",
    "created_at": "2017-01-11T08:45:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397302",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>
Replying to [vdelecroix](#comment%3A19):
> What should I expect from
> 
> ```
> sage: from sage.libs.cypari2.pari_instance import PariInstance
> sage: p = PariInstance()
> sage: p._close()
> sage: p('12')
> ```


A segmentation fault I guess.



---

archive/issue_comments_397303.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [jdemeyer](#comment%3A20):\n> Replying to [vdelecroix](#comment%3A19):\n> > What should I expect from\n> > \n> > ```\n> > sage: from sage.libs.cypari2.pari_instance import PariInstance\n> > sage: p = PariInstance()\n> > sage: p._close()\n> > sage: p('12')\n> > ```\n\n> \n> A segmentation fault I guess.\n\n\nShouldn't it be documented as I mentioned in [comment:11]?",
    "created_at": "2017-01-11T08:50:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397303",
    "user": "https://github.com/videlec"
}
```

<a id='comment:21'></a>
Replying to [jdemeyer](#comment%3A20):
> Replying to [vdelecroix](#comment%3A19):
> > What should I expect from
> > 
> > ```
> > sage: from sage.libs.cypari2.pari_instance import PariInstance
> > sage: p = PariInstance()
> > sage: p._close()
> > sage: p('12')
> > ```

> 
> A segmentation fault I guess.


Shouldn't it be documented as I mentioned in [comment:11]?



---

archive/issue_comments_397304.json:
```json
{
    "body": "<a id='comment:22'></a>\nThere is already the comment\n\n```\n            Call this method at you own risk if you really need to free\n            the memory used by PARI.\n```",
    "created_at": "2017-01-11T08:54:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397304",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>
There is already the comment

```
            Call this method at you own risk if you really need to free
            the memory used by PARI.
```



---

archive/issue_comments_397305.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [jdemeyer](#comment%3A22):\n> There is already the comment\n> \n> ```\n>             Call this method at you own risk if you really need to free\n>             the memory used by PARI.\n> ```\n\n\nThis comment is not clear enough. The sentence says that the memory is freed. Not that you will obtain a `SEGFAULT` if you try to use pari again. Moreover, creating a new pari instance would make pari available again (right?).",
    "created_at": "2017-01-11T09:50:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397305",
    "user": "https://github.com/videlec"
}
```

<a id='comment:23'></a>
Replying to [jdemeyer](#comment%3A22):
> There is already the comment
> 
> ```
>             Call this method at you own risk if you really need to free
>             the memory used by PARI.
> ```


This comment is not clear enough. The sentence says that the memory is freed. Not that you will obtain a `SEGFAULT` if you try to use pari again. Moreover, creating a new pari instance would make pari available again (right?).



---

archive/issue_comments_397306.json:
```json
{
    "body": "Changing branch from \"u/defeo/allow_multiple_instances_of_the_pariinstance_object\" to \"u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object\"",
    "created_at": "2017-01-11T15:13:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397306",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "u/defeo/allow_multiple_instances_of_the_pariinstance_object" to "u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object"



---

archive/issue_comments_397307.json:
```json
{
    "body": "Changing commit from \"80d40980013260f4925b5ca5898b2b674d23fefe\" to \"b70450d27cd0a39bad2311ad5851057823285320\"",
    "created_at": "2017-01-11T15:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397307",
    "user": "https://github.com/videlec"
}
```

Changing commit from "80d40980013260f4925b5ca5898b2b674d23fefe" to "b70450d27cd0a39bad2311ad5851057823285320"



---

archive/issue_comments_397308.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-11T15:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397308",
    "user": "https://github.com/videlec"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_397309.json:
```json
{
    "body": "<a id='comment:25'></a>\nNew commits:\n|                                                                                                                                          |                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[b70450d](https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320)|`Improve documentation of _close()`|",
    "created_at": "2017-01-11T15:52:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397309",
    "user": "https://github.com/videlec"
}
```

<a id='comment:25'></a>
New commits:
|                                                                                                                                          |                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[b70450d](https://github.com/sagemath/sagetrac-mirror/commit/b70450d27cd0a39bad2311ad5851057823285320)|`Improve documentation of _close()`|



---

archive/issue_events_073379.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-18T20:39:27Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21806#event-73379"
}
```



---

archive/issue_comments_397310.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-18T20:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397310",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_397311.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object\" to \"b70450d27cd0a39bad2311ad5851057823285320\"",
    "created_at": "2017-01-18T20:39:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21806",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21806#issuecomment-397311",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/allow_multiple_instances_of_the_pariinstance_object" to "b70450d27cd0a39bad2311ad5851057823285320"
