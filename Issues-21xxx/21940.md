# Issue 21940: Doctest for: Positive raised by a positive power is not known to be real

archive/issues_021703.json:
```json
{
    "body": "But it is known to be positive...\n\nSee the following code:\n\n```python\nsage: assume(x>0)\nsage: x.is_real()\nTrue\nsage: x.is_positive()\nTrue\nsage: (x**x).is_positive()\nTrue\nsage: (x**x).is_real()\nFalse\n```\n\nFor comparison, this is how SymPy handles this:\n\n```python\nIn [2]: x = Symbol('x', positive=True)\n\nIn [3]: x.is_positive\nOut[3]: True\n\nIn [4]: x.is_real\nOut[4]: True\n\nIn [5]: (x**x).is_positive\nOut[5]: True\n\nIn [6]: (x**x).is_real\nOut[6]: True\n```\n\nCC:  @rwst\n\nKeywords: is_real,days79\n\nBranch/Commit: c88329909934b9561314344347a7bd7c3c0ec755\n\nReviewer: Ralf Stephan, Peleg Michaeli\n\nAuthor: Peleg Michaeli, Ralf Stephan\n\nDependencies: #21963\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21940\n\n",
    "closed_at": "2017-03-27T20:42:47Z",
    "created_at": "2016-11-23T07:50:28Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Doctest for: Positive raised by a positive power is not known to be real",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21940",
    "user": "https://github.com/pelegm"
}
```
But it is known to be positive...

See the following code:

```python
sage: assume(x>0)
sage: x.is_real()
True
sage: x.is_positive()
True
sage: (x**x).is_positive()
True
sage: (x**x).is_real()
False
```

For comparison, this is how SymPy handles this:

```python
In [2]: x = Symbol('x', positive=True)

In [3]: x.is_positive
Out[3]: True

In [4]: x.is_real
Out[4]: True

In [5]: (x**x).is_positive
Out[5]: True

In [6]: (x**x).is_real
Out[6]: True
```

CC:  @rwst

Keywords: is_real,days79

Branch/Commit: c88329909934b9561314344347a7bd7c3c0ec755

Reviewer: Ralf Stephan, Peleg Michaeli

Author: Peleg Michaeli, Ralf Stephan

Dependencies: #21963

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21940





---

archive/issue_comments_405617.json:
```json
{
    "body": "<a id='comment:3'></a>\nWhat Sage version is this? With Sage-7.5beta3 I get:\n\n```\nsage: assume(x>0)\nsage: x.is_real()\nTrue\nsage: (x*x).is_real()\nTrue\n```",
    "created_at": "2016-11-23T14:07:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405617",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
What Sage version is this? With Sage-7.5beta3 I get:

```
sage: assume(x>0)
sage: x.is_real()
True
sage: (x*x).is_real()
True
```



---

archive/issue_comments_405618.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [rws](#comment%3A3):\n> What Sage version is this? With Sage-7.5beta3 I get:\n> \n> ```\n> sage: assume(x>0)\n> sage: x.is_real()\n> True\n> sage: (x*x).is_real()\n> True\n> ```\n\n\nHi,\n\nThis was tested on 7.5beta3.  You've checked `x*x`, and I have checked `x**x`.",
    "created_at": "2016-11-25T09:15:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405618",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:4'></a>
Replying to [rws](#comment%3A3):
> What Sage version is this? With Sage-7.5beta3 I get:
> 
> ```
> sage: assume(x>0)
> sage: x.is_real()
> True
> sage: (x*x).is_real()
> True
> ```


Hi,

This was tested on 7.5beta3.  You've checked `x*x`, and I have checked `x**x`.



---

archive/issue_comments_405619.json:
```json
{
    "body": "<a id='comment:5'></a>\nFixed in pynac git master, see https://github.com/pynac/pynac/commit/e5c6cd261e2652b7c4e7b4ca5f1bac9565ab0ef8\n\nPlease add a doctest to `Expression.is_real()` in `symbolic/expression.pyx`",
    "created_at": "2016-11-25T14:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405619",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>
Fixed in pynac git master, see https://github.com/pynac/pynac/commit/e5c6cd261e2652b7c4e7b4ca5f1bac9565ab0ef8

Please add a doctest to `Expression.is_real()` in `symbolic/expression.pyx`



---

archive/issue_comments_405620.json:
```json
{
    "body": "Changing dependencies from \"\" to \"pynac-0.7.2\"",
    "created_at": "2016-11-25T14:27:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405620",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "" to "pynac-0.7.2"



---

archive/issue_comments_405621.json:
```json
{
    "body": "Changing commit from \"\" to \"65e6c10c2da5e4d20bbc6f7f225ade3f4778fc0c\"",
    "created_at": "2016-11-25T21:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405621",
    "user": "https://github.com/pelegm"
}
```

Changing commit from "" to "65e6c10c2da5e4d20bbc6f7f225ade3f4778fc0c"



---

archive/issue_comments_405622.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew commits:\n|                                                                                                                                          |                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|\n|[65e6c10](https://git.sagemath.org/sage.git/commit?id=65e6c10c2da5e4d20bbc6f7f225ade3f4778fc0c)|`positive ** positive = real (doctest only) #21940`|",
    "created_at": "2016-11-25T21:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405622",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:6'></a>
New commits:
|                                                                                                                                          |                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------|
|[65e6c10](https://git.sagemath.org/sage.git/commit?id=65e6c10c2da5e4d20bbc6f7f225ade3f4778fc0c)|`positive ** positive = real (doctest only) #21940`|



---

archive/issue_comments_405623.json:
```json
{
    "body": "Changing branch from \"\" to \"u/pelegm/21940\"",
    "created_at": "2016-11-25T21:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405623",
    "user": "https://github.com/pelegm"
}
```

Changing branch from "" to "u/pelegm/21940"



---

archive/issue_comments_405624.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-25T21:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405624",
    "user": "https://github.com/pelegm"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_405625.json:
```json
{
    "body": "Changing author from \"\" to \"Peleg Michaeli\"",
    "created_at": "2016-11-25T21:29:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405625",
    "user": "https://github.com/pelegm"
}
```

Changing author from "" to "Peleg Michaeli"



---

archive/issue_comments_405626.json:
```json
{
    "body": "<a id='comment:7'></a>\nMaybe interesting in this regard that fixing this allows Sage to simplify some apparently complex expressions, e.g.\n\n```\nBefore:\nsqrt(abs(1/25*(3*(2*sqrt(3)*sqrt(2) - 3)*(sqrt(6) - 2) + 16*sqrt(3)*sqrt(2) +\n5*sqrt(6) - 54)^2 + 1/25*(3*(sqrt(6) - 2)*(sqrt(6) - 4) + 14*sqrt(3)*sqrt(2) +\n4*sqrt(6) - 42)^2 + 144/25*(sqrt(3)*sqrt(2) - sqrt(6))^2))\n\nAfter:\nsqrt(1/25*(3*(2*sqrt(3)*sqrt(2) - 3)*(sqrt(6) - 2) + 16*sqrt(3)*sqrt(2) +\n5*sqrt(6) - 54)^2 + 1/25*(3*(sqrt(6) - 2)*(sqrt(6) - 4) + 14*sqrt(3)*sqrt(2) +\n4*sqrt(6) - 42)^2 + 144/25*(sqrt(3)*sqrt(2) - sqrt(6))^2)\n```\n(from a doctest in `matrix_symbolic_dense.pyx`)",
    "created_at": "2016-12-06T08:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405626",
    "user": "https://github.com/rwst"
}
```

<a id='comment:7'></a>
Maybe interesting in this regard that fixing this allows Sage to simplify some apparently complex expressions, e.g.

```
Before:
sqrt(abs(1/25*(3*(2*sqrt(3)*sqrt(2) - 3)*(sqrt(6) - 2) + 16*sqrt(3)*sqrt(2) +
5*sqrt(6) - 54)^2 + 1/25*(3*(sqrt(6) - 2)*(sqrt(6) - 4) + 14*sqrt(3)*sqrt(2) +
4*sqrt(6) - 42)^2 + 144/25*(sqrt(3)*sqrt(2) - sqrt(6))^2))

After:
sqrt(1/25*(3*(2*sqrt(3)*sqrt(2) - 3)*(sqrt(6) - 2) + 16*sqrt(3)*sqrt(2) +
5*sqrt(6) - 54)^2 + 1/25*(3*(sqrt(6) - 2)*(sqrt(6) - 4) + 14*sqrt(3)*sqrt(2) +
4*sqrt(6) - 42)^2 + 144/25*(sqrt(3)*sqrt(2) - sqrt(6))^2)
```
(from a doctest in `matrix_symbolic_dense.pyx`)



---

archive/issue_comments_405627.json:
```json
{
    "body": "Description changed:\n``````diff\n\n``````\n",
    "created_at": "2016-12-06T12:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405627",
    "user": "https://github.com/pelegm"
}
```

Description changed:
``````diff

``````




---

archive/issue_comments_405628.json:
```json
{
    "body": "<a id='comment:9'></a>\nIs this solving the case\n\n```python\nsage: assume(x, 'real')\nsage: (2**x).is_positive()\nTrue\nsage: (2**x).is_real()\nFalse\n```\nas well?",
    "created_at": "2016-12-06T12:53:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405628",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:9'></a>
Is this solving the case

```python
sage: assume(x, 'real')
sage: (2**x).is_positive()
True
sage: (2**x).is_real()
False
```
as well?



---

archive/issue_comments_405629.json:
```json
{
    "body": "<a id='comment:10'></a>\nRight, now that works too.",
    "created_at": "2016-12-06T15:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405629",
    "user": "https://github.com/rwst"
}
```

<a id='comment:10'></a>
Right, now that works too.



---

archive/issue_comments_405630.json:
```json
{
    "body": "Changing dependencies from \"pynac-0.7.2\" to \"#21963\"",
    "created_at": "2016-12-06T15:44:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405630",
    "user": "https://github.com/rwst"
}
```

Changing dependencies from "pynac-0.7.2" to "#21963"



---

archive/issue_comments_405631.json:
```json
{
    "body": "Changing branch from \"u/pelegm/21940\" to \"u/rws/21940\"",
    "created_at": "2016-12-20T15:41:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405631",
    "user": "https://github.com/rwst"
}
```

Changing branch from "u/pelegm/21940" to "u/rws/21940"



---

archive/issue_comments_405632.json:
```json
{
    "body": "Changing author from \"Peleg Michaeli\" to \"Peleg Michaeli, Ralf Stephan\"",
    "created_at": "2016-12-20T15:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405632",
    "user": "https://github.com/rwst"
}
```

Changing author from "Peleg Michaeli" to "Peleg Michaeli, Ralf Stephan"



---

archive/issue_comments_405633.json:
```json
{
    "body": "Changing commit from \"65e6c10c2da5e4d20bbc6f7f225ade3f4778fc0c\" to \"c88329909934b9561314344347a7bd7c3c0ec755\"",
    "created_at": "2016-12-20T15:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405633",
    "user": "https://github.com/rwst"
}
```

Changing commit from "65e6c10c2da5e4d20bbc6f7f225ade3f4778fc0c" to "c88329909934b9561314344347a7bd7c3c0ec755"



---

archive/issue_comments_405634.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Ralf Stephan\"",
    "created_at": "2016-12-20T15:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405634",
    "user": "https://github.com/rwst"
}
```

Changing reviewer from "" to "Ralf Stephan"



---

archive/issue_comments_405635.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [pelegm](#comment%3A9):\n> Is this solving the case\n> \n> ```python\n> sage: assume(x, 'real')\n> sage: (2**x).is_positive()\n> True\n> sage: (2**x).is_real()\n> False\n> ```\n> as well?\n\n\nI added this as doctest. Could you review it please?\n\n---\nNew commits:\n|                                                                                                                                          |                                           |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[23c987e](https://git.sagemath.org/sage.git/commit?id=23c987e4ec3fa98559f80558a143d73088c64d6c)|`Merge branch 'develop' into t/21940/21940`|\n|[c883299](https://git.sagemath.org/sage.git/commit?id=c88329909934b9561314344347a7bd7c3c0ec755)|`21940: add one doctest`|",
    "created_at": "2016-12-20T15:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405635",
    "user": "https://github.com/rwst"
}
```

<a id='comment:12'></a>
Replying to [pelegm](#comment%3A9):
> Is this solving the case
> 
> ```python
> sage: assume(x, 'real')
> sage: (2**x).is_positive()
> True
> sage: (2**x).is_real()
> False
> ```
> as well?


I added this as doctest. Could you review it please?

---
New commits:
|                                                                                                                                          |                                           |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[23c987e](https://git.sagemath.org/sage.git/commit?id=23c987e4ec3fa98559f80558a143d73088c64d6c)|`Merge branch 'develop' into t/21940/21940`|
|[c883299](https://git.sagemath.org/sage.git/commit?id=c88329909934b9561314344347a7bd7c3c0ec755)|`21940: add one doctest`|



---

archive/issue_comments_405636.json:
```json
{
    "body": "Changing reviewer from \"Ralf Stephan\" to \"Ralf Stephan, Peleg Michaeli\"",
    "created_at": "2017-03-12T18:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405636",
    "user": "https://github.com/pelegm"
}
```

Changing reviewer from "Ralf Stephan" to "Ralf Stephan, Peleg Michaeli"



---

archive/issue_comments_405637.json:
```json
{
    "body": "<a id='comment:13'></a>\nLooks great.",
    "created_at": "2017-03-12T18:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405637",
    "user": "https://github.com/pelegm"
}
```

<a id='comment:13'></a>
Looks great.



---

archive/issue_comments_405638.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-12T18:42:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405638",
    "user": "https://github.com/pelegm"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_057852.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-27T20:42:47Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21940#event-57852"
}
```



---

archive/issue_comments_405639.json:
```json
{
    "body": "Changing branch from \"u/rws/21940\" to \"c88329909934b9561314344347a7bd7c3c0ec755\"",
    "created_at": "2017-03-27T20:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405639",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/rws/21940" to "c88329909934b9561314344347a7bd7c3c0ec755"



---

archive/issue_comments_405640.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-27T20:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21940",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21940#issuecomment-405640",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
