# Issue 21430: Set JUPYTER_CONFIG_DIR

archive/issues_021193.json:
```json
{
    "body": "We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories. Note that this directory is not created when just running Sage, only when doing something involving Jupyter.\n\nWe also hardcode the version number of `IPYTHONDIR`, which was always the intention, see #12719#comment:225\nThis way, users who want to customize their IPython configuration do not need to redo that whenever we upgrade IPython.\n\nCC:  @fchapoton\n\nBranch/Commit: 1beaae37abc0d484688fa08363207770e59b0a43\n\nReviewer: Fran\u00e7ois Bissey, Erik Bray, Leif Leonhardy\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21430\n\n",
    "closed_at": "2016-10-03T22:42:03Z",
    "created_at": "2016-09-06T07:38:51Z",
    "labels": [
        "component: scripts",
        "blocker",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Set JUPYTER_CONFIG_DIR",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21430",
    "user": "https://github.com/jdemeyer"
}
```
We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories. Note that this directory is not created when just running Sage, only when doing something involving Jupyter.

We also hardcode the version number of `IPYTHONDIR`, which was always the intention, see #12719#comment:225
This way, users who want to customize their IPython configuration do not need to redo that whenever we upgrade IPython.

CC:  @fchapoton

Branch/Commit: 1beaae37abc0d484688fa08363207770e59b0a43

Reviewer: Fran√ßois Bissey, Erik Bray, Leif Leonhardy

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21430





---

archive/issue_comments_397107.json:
```json
{
    "body": "<a id='comment:2'></a>\nI would still try to version the directory name as this caused breakage before",
    "created_at": "2016-09-06T08:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397107",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>
I would still try to version the directory name as this caused breakage before



---

archive/issue_comments_397108.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n-We should set `JUPYTER_CONFIG_DIR` instead of `IPYTHONDIR`.\n+We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories.\n+\n+We also hardcode the version number of `IPYTHONDIR`, which was always the intention, see #12719#comment:225\n``````\n",
    "created_at": "2016-09-06T08:40:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397108",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1,3 @@
-We should set `JUPYTER_CONFIG_DIR` instead of `IPYTHONDIR`.
+We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories.
+
+We also hardcode the version number of `IPYTHONDIR`, which was always the intention, see #12719#comment:225
``````




---

archive/issue_comments_397109.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/set_jupyter_config_dir\"",
    "created_at": "2016-09-06T08:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397109",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/set_jupyter_config_dir"



---

archive/issue_comments_397110.json:
```json
{
    "body": "<a id='comment:5'></a>\nNew commits:\n|                                                                                                                                          |                                                                   |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|\n|[a3b040f](https://github.com/sagemath/sagetrac-mirror/commit/a3b040f026d3522d8f07e0339d86370e0824bcc4)|`Set JUPYTER_CONFIG_DIR to ~/.sage/jupyter and hardcode IPYTHONDIR`|",
    "created_at": "2016-09-06T09:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397110",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
New commits:
|                                                                                                                                          |                                                                   |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|
|[a3b040f](https://github.com/sagemath/sagetrac-mirror/commit/a3b040f026d3522d8f07e0339d86370e0824bcc4)|`Set JUPYTER_CONFIG_DIR to ~/.sage/jupyter and hardcode IPYTHONDIR`|



---

archive/issue_comments_397111.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories.\n \n We also hardcode the version number of `IPYTHONDIR`, which was always the intention, see #12719#comment:225\n+This way, users who want to customize their IPython configuration do not need to redo that whenever we upgrade IPython.\n``````\n",
    "created_at": "2016-09-06T09:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397111",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
 We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories.
 
 We also hardcode the version number of `IPYTHONDIR`, which was always the intention, see #12719#comment:225
+This way, users who want to customize their IPython configuration do not need to redo that whenever we upgrade IPython.
``````




---

archive/issue_comments_397112.json:
```json
{
    "body": "Changing commit from \"\" to \"a3b040f026d3522d8f07e0339d86370e0824bcc4\"",
    "created_at": "2016-09-06T09:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397112",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "a3b040f026d3522d8f07e0339d86370e0824bcc4"



---

archive/issue_comments_397113.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-09-06T09:02:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397113",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_397114.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories.\n+We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories. Note that this directory is not created when just running Sage, only when doing something involving Jupyter.\n \n We also hardcode the version number of `IPYTHONDIR`, which was always the intention, see #12719#comment:225\n This way, users who want to customize their IPython configuration do not need to redo that whenever we upgrade IPython.\n``````\n",
    "created_at": "2016-09-06T09:13:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397114",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,4 @@
-We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories.
+We should set `JUPYTER_CONFIG_DIR` to some directory inside `$DOT_SAGE`, similar to what we do with other configuration directories. Note that this directory is not created when just running Sage, only when doing something involving Jupyter.
 
 We also hardcode the version number of `IPYTHONDIR`, which was always the intention, see #12719#comment:225
 This way, users who want to customize their IPython configuration do not need to redo that whenever we upgrade IPython.
``````




---

archive/issue_comments_397115.json:
```json
{
    "body": "<a id='comment:7'></a>\nVersioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.",
    "created_at": "2016-09-09T08:27:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397115",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.



---

archive/issue_comments_397116.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [embray](#comment%3A7):\n> Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.\n\n\nYou are misunderstanding. The hardcoding is intentional, the idea is **not** to update it every time that IPython/Jupyter gets updated. I thought that the comments in `sage-env` explain this, but apparently that is not clear.",
    "created_at": "2016-09-09T08:38:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397116",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
Replying to [embray](#comment%3A7):
> Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.


You are misunderstanding. The hardcoding is intentional, the idea is **not** to update it every time that IPython/Jupyter gets updated. I thought that the comments in `sage-env` explain this, but apparently that is not clear.



---

archive/issue_comments_397117.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [embray](#comment%3A7):\n> Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.\n\n\nHmmm, the `spkg-install` files currently don't seem very suited for a sanity-check, although they could parse their own `package-version.txt` and compare that to the env var(s).  I don't trust upstream versioning though.",
    "created_at": "2016-09-09T08:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397117",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'></a>
Replying to [embray](#comment%3A7):
> Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.


Hmmm, the `spkg-install` files currently don't seem very suited for a sanity-check, although they could parse their own `package-version.txt` and compare that to the env var(s).  I don't trust upstream versioning though.



---

archive/issue_comments_397118.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [jdemeyer](#comment%3A8):\n> Replying to [embray](#comment%3A7):\n> > Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.\n\n> \n> You are misunderstanding. The hardcoding is intentional, the idea is **not** to update it every time that IPython/Jupyter gets updated. I thought that the comments in `sage-env` explain this, but apparently that is not clear.\n\n\nI think he rather meant who will remember to change `sage-env` when one upgrades to IPython 6.x (presumably next week ;-) ).",
    "created_at": "2016-09-09T08:46:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397118",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:10'></a>
Replying to [jdemeyer](#comment%3A8):
> Replying to [embray](#comment%3A7):
> > Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.

> 
> You are misunderstanding. The hardcoding is intentional, the idea is **not** to update it every time that IPython/Jupyter gets updated. I thought that the comments in `sage-env` explain this, but apparently that is not clear.


I think he rather meant who will remember to change `sage-env` when one upgrades to IPython 6.x (presumably next week ;-) ).



---

archive/issue_comments_397119.json:
```json
{
    "body": "<a id='comment:11'></a>\nNo, the comment was pretty vague.  I don't know what \"IPython versions compatible with that version\" means.",
    "created_at": "2016-09-09T08:46:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397119",
    "user": "https://github.com/embray"
}
```

<a id='comment:11'></a>
No, the comment was pretty vague.  I don't know what "IPython versions compatible with that version" means.



---

archive/issue_comments_397120.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [leif](#comment%3A9):\n> Replying to [embray](#comment%3A7):\n> > Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.\n\n> \n> Hmmm, the `spkg-install` files currently don't seem very suited for a sanity-check, although they could parse their own `package-version.txt` and compare that to the env var(s).  I don't trust upstream versioning though.\n\n\nI'm thinking each spkg should have its own \"sage environment setup participant hook\"--i.e. \"here is a bash snippet *specific* to this package that should be sourced during `sage-env`.\"  That would go a long way toward making `sage-env` more comprehensible, and keeping spkgs better self-contained.",
    "created_at": "2016-09-09T08:49:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397120",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>
Replying to [leif](#comment%3A9):
> Replying to [embray](#comment%3A7):
> > Versioning the directory name is a good idea, but I'm not sure about hard-coding it `sage-env`.  There is no obvious pointer that this would need to be updated when updating the IPython/Jupyter versions in Sage.  This will inevitably bit-rot.  Instead it should read the package version from somewhere else.

> 
> Hmmm, the `spkg-install` files currently don't seem very suited for a sanity-check, although they could parse their own `package-version.txt` and compare that to the env var(s).  I don't trust upstream versioning though.


I'm thinking each spkg should have its own "sage environment setup participant hook"--i.e. "here is a bash snippet *specific* to this package that should be sourced during `sage-env`."  That would go a long way toward making `sage-env` more comprehensible, and keeping spkgs better self-contained.



---

archive/issue_comments_397121.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[78f964e](https://github.com/sagemath/sagetrac-mirror/commit/78f964e494bd54b57b3dc456e536046ff4485e17)|`Clarify comment (hopefully)`|",
    "created_at": "2016-09-09T08:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397121",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[78f964e](https://github.com/sagemath/sagetrac-mirror/commit/78f964e494bd54b57b3dc456e536046ff4485e17)|`Clarify comment (hopefully)`|



---

archive/issue_comments_397122.json:
```json
{
    "body": "Changing commit from \"a3b040f026d3522d8f07e0339d86370e0824bcc4\" to \"78f964e494bd54b57b3dc456e536046ff4485e17\"",
    "created_at": "2016-09-09T08:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397122",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a3b040f026d3522d8f07e0339d86370e0824bcc4" to "78f964e494bd54b57b3dc456e536046ff4485e17"



---

archive/issue_comments_397123.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [embray](#comment%3A12):\n> I'm thinking each spkg should have its own \"sage environment setup participant hook\"--i.e. \"here is a bash snippet *specific* to this package that should be sourced during `sage-env`.\"  That would go a long way toward making `sage-env` more comprehensible, and keeping spkgs better self-contained.\n\n\nYes, tag regions of the shell script with `# optional -- foo, bar`...",
    "created_at": "2016-09-09T08:54:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397123",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:14'></a>
Replying to [embray](#comment%3A12):
> I'm thinking each spkg should have its own "sage environment setup participant hook"--i.e. "here is a bash snippet *specific* to this package that should be sourced during `sage-env`."  That would go a long way toward making `sage-env` more comprehensible, and keeping spkgs better self-contained.


Yes, tag regions of the shell script with `# optional -- foo, bar`...



---

archive/issue_comments_397124.json:
```json
{
    "body": "<a id='comment:15'></a>\nI guess you'll quickly end up in a dependency hell.",
    "created_at": "2016-09-09T08:55:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397124",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:15'></a>
I guess you'll quickly end up in a dependency hell.



---

archive/issue_comments_397125.json:
```json
{
    "body": "<a id='comment:16'></a>\nReplying to [embray](#comment%3A12):\n> I'm thinking each spkg should have its own \"sage environment setup participant hook\"--i.e. \"here is a bash snippet *specific* to this package that should be sourced during `sage-env`.\"  That would go a long way toward making `sage-env` more comprehensible, and keeping spkgs better self-contained.\n\n\nPerhaps, but that's besides the point of this ticket.",
    "created_at": "2016-09-09T08:58:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397125",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:16'></a>
Replying to [embray](#comment%3A12):
> I'm thinking each spkg should have its own "sage environment setup participant hook"--i.e. "here is a bash snippet *specific* to this package that should be sourced during `sage-env`."  That would go a long way toward making `sage-env` more comprehensible, and keeping spkgs better self-contained.


Perhaps, but that's besides the point of this ticket.



---

archive/issue_comments_397126.json:
```json
{
    "body": "<a id='comment:17'></a>\nI guess Erik is thinking of something akin to `/etc/env.d` or `/etc/profile.d` but sourced from `build/pkg/$pkgname/env`. An interesting idea in principle. it doesn't have to be involved with dependencies.\n\nBut I was OK with the old comments and I am OK with the new one.",
    "created_at": "2016-09-09T08:59:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397126",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:17'></a>
I guess Erik is thinking of something akin to `/etc/env.d` or `/etc/profile.d` but sourced from `build/pkg/$pkgname/env`. An interesting idea in principle. it doesn't have to be involved with dependencies.

But I was OK with the old comments and I am OK with the new one.



---

archive/issue_comments_397127.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [fbissey](#comment%3A17):\n> I guess Erik is thinking of something akin to `/etc/env.d` or `/etc/profile.d` but sourced from `build/pkg/$pkgname/env`. An interesting idea in principle. it doesn't have to be involved with dependencies.\n> \n> But I was OK with the old comments and I am OK with the new one. \n\n\nStill, this needs to be documented in `build/pkgs/*`.  (Who reads `SPKG.txt`?  Better also in `spkg-install` IMHO, if not even adding a sanity check as mentioned.)",
    "created_at": "2016-09-09T09:02:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397127",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:18'></a>
Replying to [fbissey](#comment%3A17):
> I guess Erik is thinking of something akin to `/etc/env.d` or `/etc/profile.d` but sourced from `build/pkg/$pkgname/env`. An interesting idea in principle. it doesn't have to be involved with dependencies.
> 
> But I was OK with the old comments and I am OK with the new one. 


Still, this needs to be documented in `build/pkgs/*`.  (Who reads `SPKG.txt`?  Better also in `spkg-install` IMHO, if not even adding a sanity check as mentioned.)



---

archive/issue_comments_397128.json:
```json
{
    "body": "<a id='comment:19'></a>\nDoesn't seem we yet do similar for `ipython_genutils`.",
    "created_at": "2016-09-09T09:10:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397128",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:19'></a>
Doesn't seem we yet do similar for `ipython_genutils`.



---

archive/issue_comments_397129.json:
```json
{
    "body": "<a id='comment:20'></a>\nReplying to [leif](#comment%3A19):\n> Doesn't seem we yet do similar for `ipython_genutils`.\n\n\nOoops, but that's yet another `build/pkgs/foo/...`.",
    "created_at": "2016-09-09T09:14:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397129",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:20'></a>
Replying to [leif](#comment%3A19):
> Doesn't seem we yet do similar for `ipython_genutils`.


Ooops, but that's yet another `build/pkgs/foo/...`.



---

archive/issue_comments_397130.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-09-09T09:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397130",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_397131.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fran\u00e7ois Bissey, Erik Bray\"",
    "created_at": "2016-09-09T09:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397131",
    "user": "https://github.com/kiwifb"
}
```

Changing reviewer from "" to "Fran√ßois Bissey, Erik Bray"



---

archive/issue_comments_397132.json:
```json
{
    "body": "<a id='comment:21'></a>\nEnough bike shedding. Positive review.",
    "created_at": "2016-09-09T09:20:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397132",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:21'></a>
Enough bike shedding. Positive review.



---

archive/issue_comments_397133.json:
```json
{
    "body": "Changing reviewer from \"Fran\u00e7ois Bissey, Erik Bray\" to \"Fran\u00e7ois Bissey, Erik Bray, Leif Leonhardy\"",
    "created_at": "2016-09-09T10:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397133",
    "user": "https://github.com/nexttime"
}
```

Changing reviewer from "Fran√ßois Bissey, Erik Bray" to "Fran√ßois Bissey, Erik Bray, Leif Leonhardy"



---

archive/issue_comments_397134.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [fbissey](#comment%3A21):\n> Enough bike shedding. Positive review.\n\n\nI'll remind you next time you want something documented.\n\n(These environment variables aren't even documented in the Sage *Installation* Guide, where **all** environment variables used by Sage, not necessarily supposed to be set or modified by the user, are documented for historical reasons.)\n\n---\n\nBut definitely needs work because you're not exactly hardcoding the folders; if a user happens to have them already set in his/her environment, this is asking for trouble.",
    "created_at": "2016-09-09T10:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397134",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'></a>
Replying to [fbissey](#comment%3A21):
> Enough bike shedding. Positive review.


I'll remind you next time you want something documented.

(These environment variables aren't even documented in the Sage *Installation* Guide, where **all** environment variables used by Sage, not necessarily supposed to be set or modified by the user, are documented for historical reasons.)

---

But definitely needs work because you're not exactly hardcoding the folders; if a user happens to have them already set in his/her environment, this is asking for trouble.



---

archive/issue_comments_397135.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2016-09-09T10:16:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397135",
    "user": "https://github.com/nexttime"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_397136.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [leif](#comment%3A22):\n> (These environment variables aren't even documented in the Sage *Installation* Guide, where **all** environment variables used by Sage, not necessarily supposed to be set or modified by the user, are documented for historical reasons.)\n\n\nI don't think it makes sense for Sage to document **all** environment variables used by **all** packages of Sage. It should document Sage-specific environment variables, not those of packages inside the Sage distribution.\n\n> But definitely needs work because you're not exactly hardcoding the folders; if a user happens to have them already set in his/her environment, this is asking for trouble.\n\n\nNo, if the user has them already set in his environment, we assume that the user knows what he is doing. I see the `JUPYTER_CONFIG_DIR` in `sage-env` simply as a reasonable default that users should still be able to override.",
    "created_at": "2016-09-09T10:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397136",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Replying to [leif](#comment%3A22):
> (These environment variables aren't even documented in the Sage *Installation* Guide, where **all** environment variables used by Sage, not necessarily supposed to be set or modified by the user, are documented for historical reasons.)


I don't think it makes sense for Sage to document **all** environment variables used by **all** packages of Sage. It should document Sage-specific environment variables, not those of packages inside the Sage distribution.

> But definitely needs work because you're not exactly hardcoding the folders; if a user happens to have them already set in his/her environment, this is asking for trouble.


No, if the user has them already set in his environment, we assume that the user knows what he is doing. I see the `JUPYTER_CONFIG_DIR` in `sage-env` simply as a reasonable default that users should still be able to override.



---

archive/issue_comments_397137.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-09T10:34:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397137",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_397138.json:
```json
{
    "body": "<a id='comment:24'></a>\nReplying to [jdemeyer](#comment%3A23):\n> Replying to [leif](#comment%3A22):\n> > (These environment variables aren't even documented in the Sage *Installation* Guide, where **all** environment variables used by Sage, not necessarily supposed to be set or modified by the user, are documented for historical reasons.)\n\n> \n> I don't think it makes sense for Sage to document **all** environment variables used by **all** packages of Sage. It should document Sage-specific environment variables, not those of packages inside the Sage distribution.\n\n\nWe don't document variables that are solely set and used internally, but those the user may want to set or modify, those that Sage sets and a user/developer may find to be valuable to use, and those that we change *although the user is likely to expect we honor his/her setting*, for example `MPLCONFIGDIR`.\n\n\\\\\n\n> > But definitely needs work because you're not exactly hardcoding the folders; if a user happens to have them already set in his/her environment, this is asking for trouble.\n\n> \n> No, if the user has them already set in his environment, we assume that the user knows what he is doing.\n\n\nBesides that your assumption is presumably wrong in most cases, then \"hardcoding\" is the wrong term.\n\n\\\\\n\n> I see the `JUPYTER_CONFIG_DIR` in `sage-env` simply as a reasonable default that users should still be able to override.\n\n\n`IPYTHONDIR`  as well?  `PYTHONPATH`?  `PYTHONHOME`?  What else?\n\n(Btw., `CC`, `CXX` etc. get overridden in case Sage's GCC is installed; why don't you respect a user's setting there as well?)\n\nIf you really want to create more of such pitfalls, the need to document this is even greater, i.e., it needs to get mentioned in more prominent locations such as READMEs as well, and a warning should get issued unless it is totally clear the user did intentionally override one of these \"default\" settings.  You'll get error reports because of this anyway, but hopefully less.  But it would still be better to provide other, more explicit ways to override Sage's \"default\" settings if you really want to support that.  Sage's `configure` for example also bails out in a couple of cases **unless** one sets `SAGE_PORT=yes`, which is a pretty similar situation, although this affects even less people, namely only those building from source.\n\nOnly a tiny percentage of the Sage users will even know these environment variables exist, what their meaning is, and whether they're perhaps (unintentionally) set in their environment.  Just read a bit in sage-support, or on ask.sagemath.org.  Even \"Sage *developers*\" are mostly mathematicians, and not all of them have computers, operating systems, shells etc. as their beloved hobby.",
    "created_at": "2016-09-09T14:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397138",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:24'></a>
Replying to [jdemeyer](#comment%3A23):
> Replying to [leif](#comment%3A22):
> > (These environment variables aren't even documented in the Sage *Installation* Guide, where **all** environment variables used by Sage, not necessarily supposed to be set or modified by the user, are documented for historical reasons.)

> 
> I don't think it makes sense for Sage to document **all** environment variables used by **all** packages of Sage. It should document Sage-specific environment variables, not those of packages inside the Sage distribution.


We don't document variables that are solely set and used internally, but those the user may want to set or modify, those that Sage sets and a user/developer may find to be valuable to use, and those that we change *although the user is likely to expect we honor his/her setting*, for example `MPLCONFIGDIR`.

\\

> > But definitely needs work because you're not exactly hardcoding the folders; if a user happens to have them already set in his/her environment, this is asking for trouble.

> 
> No, if the user has them already set in his environment, we assume that the user knows what he is doing.


Besides that your assumption is presumably wrong in most cases, then "hardcoding" is the wrong term.

\\

> I see the `JUPYTER_CONFIG_DIR` in `sage-env` simply as a reasonable default that users should still be able to override.


`IPYTHONDIR`  as well?  `PYTHONPATH`?  `PYTHONHOME`?  What else?

(Btw., `CC`, `CXX` etc. get overridden in case Sage's GCC is installed; why don't you respect a user's setting there as well?)

If you really want to create more of such pitfalls, the need to document this is even greater, i.e., it needs to get mentioned in more prominent locations such as READMEs as well, and a warning should get issued unless it is totally clear the user did intentionally override one of these "default" settings.  You'll get error reports because of this anyway, but hopefully less.  But it would still be better to provide other, more explicit ways to override Sage's "default" settings if you really want to support that.  Sage's `configure` for example also bails out in a couple of cases **unless** one sets `SAGE_PORT=yes`, which is a pretty similar situation, although this affects even less people, namely only those building from source.

Only a tiny percentage of the Sage users will even know these environment variables exist, what their meaning is, and whether they're perhaps (unintentionally) set in their environment.  Just read a bit in sage-support, or on ask.sagemath.org.  Even "Sage *developers*" are mostly mathematicians, and not all of them have computers, operating systems, shells etc. as their beloved hobby.



---

archive/issue_comments_397139.json:
```json
{
    "body": "<a id='comment:25'></a>\nP.S.:  I'm absolutely no fan of nannying people, but we should follow the principle of least surprise (and disappointment) also for those not that deep in Sage's (and its packages') matter.\n\nAfter all, there are configuration files those that want to can modify.  Still no `.sagerc` though, if I'm not mistaken.",
    "created_at": "2016-09-09T14:54:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397139",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:25'></a>
P.S.:  I'm absolutely no fan of nannying people, but we should follow the principle of least surprise (and disappointment) also for those not that deep in Sage's (and its packages') matter.

After all, there are configuration files those that want to can modify.  Still no `.sagerc` though, if I'm not mistaken.



---

archive/issue_comments_397140.json:
```json
{
    "body": "<a id='comment:26'></a>\nIt is still not clear to me why Sage should document environment variables which have nothing to do with Sage but which are for other projects.",
    "created_at": "2016-09-09T19:36:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397140",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>
It is still not clear to me why Sage should document environment variables which have nothing to do with Sage but which are for other projects.



---

archive/issue_comments_397141.json:
```json
{
    "body": "<a id='comment:27'></a>\nReplying to [jdemeyer](#comment%3A26):\n> It is still not clear to me why Sage should document environment variables which have nothing to do with Sage but which are for other projects.\n\n\nSuch as?",
    "created_at": "2016-09-09T19:52:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397141",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:27'></a>
Replying to [jdemeyer](#comment%3A26):
> It is still not clear to me why Sage should document environment variables which have nothing to do with Sage but which are for other projects.


Such as?



---

archive/issue_comments_397142.json:
```json
{
    "body": "<a id='comment:28'></a>\nReplying to [leif](#comment%3A27):\n> Replying to [jdemeyer](#comment%3A26):\n> > It is still not clear to me why Sage should document environment variables which have nothing to do with Sage but which are for other projects.\n\n> \n> Such as?\n\n\n`JUPYTER_CONFIG_DIR` what this ticket is about. It is perfectly fine if users don't know about this variable.",
    "created_at": "2016-09-09T20:41:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397142",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:28'></a>
Replying to [leif](#comment%3A27):
> Replying to [jdemeyer](#comment%3A26):
> > It is still not clear to me why Sage should document environment variables which have nothing to do with Sage but which are for other projects.

> 
> Such as?


`JUPYTER_CONFIG_DIR` what this ticket is about. It is perfectly fine if users don't know about this variable.



---

archive/issue_comments_397143.json:
```json
{
    "body": "<a id='comment:29'></a>\nBut you're doing the same with `IPYTHONDIR` (although not mentioned in the ticket's title, and the description is misleading as well).\n\nMore precisely, you're introducing sharing folders (hence configuration) between unrelated and potentially different/incompatible instances of IPython.  This is essentially the same as with Python and `PYTHONUSERBASE`.  It *might* work to some extent (if you're lucky), but is more likely to cause trouble unless you really know/are aware of what you (and probably others) are doing, so IMHO nothing for \"ordinary\" users.  (Not to mention distros will mess with \"their\" installations as they like, and a user may not even know or immediately notice.)\n\nUsing the same folder for compatible versions of **Sage's** IPython makes sense, but nothing prevents people from (accidentally) using a folder outside of `$DOT_SAGE`, and especially not from using *the system's* IPython's folder, and no matter what version the system's IPython is, as the variable name itself does not carry a version, because it is assumed there is exactly one \"active\" version.",
    "created_at": "2016-09-09T21:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397143",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:29'></a>
But you're doing the same with `IPYTHONDIR` (although not mentioned in the ticket's title, and the description is misleading as well).

More precisely, you're introducing sharing folders (hence configuration) between unrelated and potentially different/incompatible instances of IPython.  This is essentially the same as with Python and `PYTHONUSERBASE`.  It *might* work to some extent (if you're lucky), but is more likely to cause trouble unless you really know/are aware of what you (and probably others) are doing, so IMHO nothing for "ordinary" users.  (Not to mention distros will mess with "their" installations as they like, and a user may not even know or immediately notice.)

Using the same folder for compatible versions of **Sage's** IPython makes sense, but nothing prevents people from (accidentally) using a folder outside of `$DOT_SAGE`, and especially not from using *the system's* IPython's folder, and no matter what version the system's IPython is, as the variable name itself does not carry a version, because it is assumed there is exactly one "active" version.



---

archive/issue_comments_397144.json:
```json
{
    "body": "<a id='comment:30'></a>\nReplying to [leif](#comment%3A29):\n> nothing prevents people from (accidentally) using a folder outside of `$DOT_SAGE`\n\n\nwhich is a problem because .......... (fill in the blank)",
    "created_at": "2016-09-09T21:34:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397144",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Replying to [leif](#comment%3A29):
> nothing prevents people from (accidentally) using a folder outside of `$DOT_SAGE`


which is a problem because .......... (fill in the blank)



---

archive/issue_comments_397145.json:
```json
{
    "body": "<a id='comment:31'></a>\nReplying to [jdemeyer](#comment%3A30):\n> Replying to [leif](#comment%3A29):\n> > nothing prevents people from (accidentally) using a folder outside of `$DOT_SAGE`\n\n> \n> which is a problem because .......... (fill in the blank)\n\n\n... that already violates the general convention of Sage to not modify anything outside `$SAGE_ROOT`, `$DOT_SAGE` (by default `$HOME/.sage/`), besides `$TMPDIR`.\n\nOther exceptions are for example `$SAGE_BUILD_DIR`, but\n\n* that's well-documented,\n* it defaults to some location below `$SAGE_ROOT`,\n* the user has to explicitly set it,\n* there can't be any confusion (or unintentional collision) because the variable name starts with `SAGE_`, so (hopefully) isn't used by any other application,\n* we don't store persistent things, especially no configuration, there,\n* ...\n\nBut you of course missed the more important point.",
    "created_at": "2016-09-09T21:50:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397145",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:31'></a>
Replying to [jdemeyer](#comment%3A30):
> Replying to [leif](#comment%3A29):
> > nothing prevents people from (accidentally) using a folder outside of `$DOT_SAGE`

> 
> which is a problem because .......... (fill in the blank)


... that already violates the general convention of Sage to not modify anything outside `$SAGE_ROOT`, `$DOT_SAGE` (by default `$HOME/.sage/`), besides `$TMPDIR`.

Other exceptions are for example `$SAGE_BUILD_DIR`, but

* that's well-documented,
* it defaults to some location below `$SAGE_ROOT`,
* the user has to explicitly set it,
* there can't be any confusion (or unintentional collision) because the variable name starts with `SAGE_`, so (hopefully) isn't used by any other application,
* we don't store persistent things, especially no configuration, there,
* ...

But you of course missed the more important point.



---

archive/issue_comments_397146.json:
```json
{
    "body": "<a id='comment:32'></a>\nReplying to [leif](#comment%3A31):\n> ... that already violates the general convention of Sage to not modify anything outside `$SAGE_ROOT`, `$DOT_SAGE` (by default `$HOME/.sage/`), besides `$TMPDIR`.\n\n\nI agree that this should be the case *by default*. However, if the user explicitly asks for a different directory, we should honor that.\n\n> But you of course missed the more important point.\n\n\nWell, you are writing so much stuff in the comments here, most of which is unrelated to the topic of this ticket. So it's easy to miss the important point. Honestly, I cannot really figure out which point you are making.",
    "created_at": "2016-09-09T22:03:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397146",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>
Replying to [leif](#comment%3A31):
> ... that already violates the general convention of Sage to not modify anything outside `$SAGE_ROOT`, `$DOT_SAGE` (by default `$HOME/.sage/`), besides `$TMPDIR`.


I agree that this should be the case *by default*. However, if the user explicitly asks for a different directory, we should honor that.

> But you of course missed the more important point.


Well, you are writing so much stuff in the comments here, most of which is unrelated to the topic of this ticket. So it's easy to miss the important point. Honestly, I cannot really figure out which point you are making.



---

archive/issue_comments_397147.json:
```json
{
    "body": "<a id='comment:33'></a>\nReplying to [jdemeyer](#comment%3A32):\n> Replying to [leif](#comment%3A31):\n> > ... that already violates the general convention of Sage to not modify anything outside `$SAGE_ROOT`, `$DOT_SAGE` (by default `$HOME/.sage/`), besides `$TMPDIR`.\n  \n> \n> I agree that this should be the case *by default*. However, if the user explicitly asks for a different directory, we should honor that.\n> \n> > But you of course missed the more important point.\n\n> \n> Well, you are writing so much stuff in the comments here, most of which is unrelated to the topic of this ticket. So it's easy to miss the important point. Honestly, I cannot really figure out which point you are making.\n\n\nWell, you're just not willing to get the point, instead quoting just subsentences and asking for details regarding less important things.  Which part of *\"accidentally\"*, *\"unintentionally\"* or *\"not set by the user itself\"* did you *not* understand?\n\nThe bare fact that `IPYTHONDIR` is (already) set means nothing, and especially not that it was set for the (same) version of IPython Sage ships and uses.\n\n(And you didn't answer either why in your opinion in contrast `SAGE_PORT=yes` is necessary, `CC` needs to get overridden, why you force some compiler flags regardless of the context, or why `MAKE=\"$MAKE -j1\"` should be necessary just because you personally once did get a failure without it.  That's just inconsistent to what you propose here.  In addition, `IPYTHONDIR` affects *any Sage user*, not just developers or people building from source.)",
    "created_at": "2016-09-10T01:13:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397147",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:33'></a>
Replying to [jdemeyer](#comment%3A32):
> Replying to [leif](#comment%3A31):
> > ... that already violates the general convention of Sage to not modify anything outside `$SAGE_ROOT`, `$DOT_SAGE` (by default `$HOME/.sage/`), besides `$TMPDIR`.
  
> 
> I agree that this should be the case *by default*. However, if the user explicitly asks for a different directory, we should honor that.
> 
> > But you of course missed the more important point.

> 
> Well, you are writing so much stuff in the comments here, most of which is unrelated to the topic of this ticket. So it's easy to miss the important point. Honestly, I cannot really figure out which point you are making.


Well, you're just not willing to get the point, instead quoting just subsentences and asking for details regarding less important things.  Which part of *"accidentally"*, *"unintentionally"* or *"not set by the user itself"* did you *not* understand?

The bare fact that `IPYTHONDIR` is (already) set means nothing, and especially not that it was set for the (same) version of IPython Sage ships and uses.

(And you didn't answer either why in your opinion in contrast `SAGE_PORT=yes` is necessary, `CC` needs to get overridden, why you force some compiler flags regardless of the context, or why `MAKE="$MAKE -j1"` should be necessary just because you personally once did get a failure without it.  That's just inconsistent to what you propose here.  In addition, `IPYTHONDIR` affects *any Sage user*, not just developers or people building from source.)



---

archive/issue_comments_397148.json:
```json
{
    "body": "<a id='comment:34'></a>\nReplying to [leif](#comment%3A33):\n> instead quoting just subsentences and asking for details regarding less important things.\n\n\nAgain, the more details you write, the easier it is for me to get lost in those details.\n\n> Which part of *\"accidentally\"*, *\"unintentionally\"* or *\"not set by the user itself\"* did you *not* understand?\n\n\nI just don't understand how environment variables can be set *accidentally*.\n\n> `CC` needs to get overridden\n\n\nWell, we only override `CC` if the GCC package was installed. That makes sense because it means that the system `CC` was not good enough.\n\n> why `MAKE=\"$MAKE -j1\"` should be necessary\n\n\nWhich `MAKE=\"$MAKE -j1\"` do you mean?",
    "created_at": "2016-09-10T07:21:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397148",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Replying to [leif](#comment%3A33):
> instead quoting just subsentences and asking for details regarding less important things.


Again, the more details you write, the easier it is for me to get lost in those details.

> Which part of *"accidentally"*, *"unintentionally"* or *"not set by the user itself"* did you *not* understand?


I just don't understand how environment variables can be set *accidentally*.

> `CC` needs to get overridden


Well, we only override `CC` if the GCC package was installed. That makes sense because it means that the system `CC` was not good enough.

> why `MAKE="$MAKE -j1"` should be necessary


Which `MAKE="$MAKE -j1"` do you mean?



---

archive/issue_comments_397149.json:
```json
{
    "body": "<a id='comment:35'></a>\nReplying to [jdemeyer](#comment%3A34):\n> Replying to [leif](#comment%3A33):\n> > Which part of *\"accidentally\"*, *\"unintentionally\"* or *\"not set by the user itself\"* did you *not* understand?\n\n> \n> I just don't understand how environment variables can be set *accidentally*.\n\n\nTry teaching a workshop sometime.  You would not *believe* the stuff users have in their `.profile` with literally no idea how it got there (usually something they added 13 months ago while feverishly copy-pasting and otherwise punching at the darkness while trying to get some .c file their professor e-mailed them to compile :)",
    "created_at": "2016-09-22T14:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397149",
    "user": "https://github.com/embray"
}
```

<a id='comment:35'></a>
Replying to [jdemeyer](#comment%3A34):
> Replying to [leif](#comment%3A33):
> > Which part of *"accidentally"*, *"unintentionally"* or *"not set by the user itself"* did you *not* understand?

> 
> I just don't understand how environment variables can be set *accidentally*.


Try teaching a workshop sometime.  You would not *believe* the stuff users have in their `.profile` with literally no idea how it got there (usually something they added 13 months ago while feverishly copy-pasting and otherwise punching at the darkness while trying to get some .c file their professor e-mailed them to compile :)



---

archive/issue_comments_397150.json:
```json
{
    "body": "<a id='comment:36'></a>\nAlso, I haven't read this entire thread but just my $0.02 USD--I think it's appropriate to document environment variables that pertain to Sage--either that affect how Sage runs, or that Sage itself affects--even if they are not *specific* to Sage.  Yes there's a slippery slope, but some variables may have more unexpected impact than others and are less generally well-understood.",
    "created_at": "2016-09-22T14:07:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397150",
    "user": "https://github.com/embray"
}
```

<a id='comment:36'></a>
Also, I haven't read this entire thread but just my $0.02 USD--I think it's appropriate to document environment variables that pertain to Sage--either that affect how Sage runs, or that Sage itself affects--even if they are not *specific* to Sage.  Yes there's a slippery slope, but some variables may have more unexpected impact than others and are less generally well-understood.



---

archive/issue_comments_397151.json:
```json
{
    "body": "<a id='comment:37'></a>\nReplying to [embray](#comment%3A36):\n> Yes there's a slippery slope, but some variables may have more unexpected impact than others and are less generally well-understood.\n\n\nI still think it's not the job of Sage to document all Jupyter-related environment variables. Maybe a compromise could be to add a pointer to the Jupyter documentation: http://jupyter.readthedocs.io/en/latest/projects/jupyter-directories.html",
    "created_at": "2016-09-22T15:23:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397151",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
Replying to [embray](#comment%3A36):
> Yes there's a slippery slope, but some variables may have more unexpected impact than others and are less generally well-understood.


I still think it's not the job of Sage to document all Jupyter-related environment variables. Maybe a compromise could be to add a pointer to the Jupyter documentation: http://jupyter.readthedocs.io/en/latest/projects/jupyter-directories.html



---

archive/issue_comments_397152.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [jdemeyer](#comment%3A37):\n> Replying to [embray](#comment%3A36):\n> > Yes there's a slippery slope, but some variables may have more unexpected impact than others and are less generally well-understood.\n\n> \n> I still think it's not the job of Sage to document all Jupyter-related environment variables. Maybe a compromise could be to add a pointer to the Jupyter documentation: http://jupyter.readthedocs.io/en/latest/projects/jupyter-directories.html\n\n\nWhile it may not be the job to document other package variables, there is a case for documentation when sage change their default values. An experienced jupyter user may be wondering why they don't find stuff in `~/.jupyter` it should be easy for them to find out about sage's setting (other than reading `sage-env`).",
    "created_at": "2016-09-22T19:47:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397152",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:38'></a>
Replying to [jdemeyer](#comment%3A37):
> Replying to [embray](#comment%3A36):
> > Yes there's a slippery slope, but some variables may have more unexpected impact than others and are less generally well-understood.

> 
> I still think it's not the job of Sage to document all Jupyter-related environment variables. Maybe a compromise could be to add a pointer to the Jupyter documentation: http://jupyter.readthedocs.io/en/latest/projects/jupyter-directories.html


While it may not be the job to document other package variables, there is a case for documentation when sage change their default values. An experienced jupyter user may be wondering why they don't find stuff in `~/.jupyter` it should be easy for them to find out about sage's setting (other than reading `sage-env`).



---

archive/issue_comments_397153.json:
```json
{
    "body": "<a id='comment:39'></a>\nHow about adding \"+\" at the end: `export IPYTHONDIR=\"$DOT_SAGE/ipython-5.0.0+\"`?",
    "created_at": "2016-09-23T08:34:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397153",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:39'></a>
How about adding "+" at the end: `export IPYTHONDIR="$DOT_SAGE/ipython-5.0.0+"`?



---

archive/issue_comments_397154.json:
```json
{
    "body": "<a id='comment:40'></a>\nReplying to [klee](#comment%3A39):\n> How about adding \"+\" at the end: `export IPYTHONDIR=\"$DOT_SAGE/ipython-5.0.0+\"`?\n\n\nWhat does this `+` symbol mean?",
    "created_at": "2016-09-23T09:26:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397154",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:40'></a>
Replying to [klee](#comment%3A39):
> How about adding "+" at the end: `export IPYTHONDIR="$DOT_SAGE/ipython-5.0.0+"`?


What does this `+` symbol mean?



---

archive/issue_comments_397155.json:
```json
{
    "body": "<a id='comment:41'></a>\nTo mean that the configuration applies not only to `ipython-5.0.0` but also to all higher versions (until upgraded to a non-compatible version)",
    "created_at": "2016-09-23T10:14:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397155",
    "user": "https://github.com/kwankyu"
}
```

<a id='comment:41'></a>
To mean that the configuration applies not only to `ipython-5.0.0` but also to all higher versions (until upgraded to a non-compatible version)



---

archive/issue_comments_397156.json:
```json
{
    "body": "<a id='comment:42'></a>\nReplying to [klee](#comment%3A41):\n> To mean that the configuration applies not only to `ipython-5.0.0` but also to all higher versions (until upgraded to a non-compatible version) \n\n\nThen you might as well call it `ipython-a` or whatever... I only chose `5.0.0` because that is the current version.",
    "created_at": "2016-09-23T10:22:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397156",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'></a>
Replying to [klee](#comment%3A41):
> To mean that the configuration applies not only to `ipython-5.0.0` but also to all higher versions (until upgraded to a non-compatible version) 


Then you might as well call it `ipython-a` or whatever... I only chose `5.0.0` because that is the current version.



---

archive/issue_comments_397157.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [jdemeyer](#comment%3A37):\n> Replying to [embray](#comment%3A36):\n> > Yes there's a slippery slope, but some variables may have more unexpected impact than others and are less generally well-understood.\n\n> \n> I still think it's not the job of Sage to document all Jupyter-related environment variables. Maybe a compromise could be to add a pointer to the Jupyter documentation: http://jupyter.readthedocs.io/en/latest/projects/jupyter-directories.html\n\n\nNobody said it's the job of Sage to document \"all\" Jupyter-related variables.  Just ones that are commonly impacted by how Sage uses them.",
    "created_at": "2016-09-23T11:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397157",
    "user": "https://github.com/embray"
}
```

<a id='comment:43'></a>
Replying to [jdemeyer](#comment%3A37):
> Replying to [embray](#comment%3A36):
> > Yes there's a slippery slope, but some variables may have more unexpected impact than others and are less generally well-understood.

> 
> I still think it's not the job of Sage to document all Jupyter-related environment variables. Maybe a compromise could be to add a pointer to the Jupyter documentation: http://jupyter.readthedocs.io/en/latest/projects/jupyter-directories.html


Nobody said it's the job of Sage to document "all" Jupyter-related variables.  Just ones that are commonly impacted by how Sage uses them.



---

archive/issue_comments_397158.json:
```json
{
    "body": "Changing commit from \"78f964e494bd54b57b3dc456e536046ff4485e17\" to \"1beaae37abc0d484688fa08363207770e59b0a43\"",
    "created_at": "2016-09-23T11:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "78f964e494bd54b57b3dc456e536046ff4485e17" to "1beaae37abc0d484688fa08363207770e59b0a43"



---

archive/issue_comments_397159.json:
```json
{
    "body": "<a id='comment:44'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                            |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|\n|[1beaae3](https://github.com/sagemath/sagetrac-mirror/commit/1beaae37abc0d484688fa08363207770e59b0a43)|`Document IPYTHONDIR and JUPYTER_CONFIG_DIR`|",
    "created_at": "2016-09-23T11:42:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397159",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:44'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------|
|[1beaae3](https://github.com/sagemath/sagetrac-mirror/commit/1beaae37abc0d484688fa08363207770e59b0a43)|`Document IPYTHONDIR and JUPYTER_CONFIG_DIR`|



---

archive/issue_comments_397160.json:
```json
{
    "body": "<a id='comment:45'></a>\nStill needs review...",
    "created_at": "2016-09-30T10:28:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397160",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'></a>
Still needs review...



---

archive/issue_comments_397161.json:
```json
{
    "body": "<a id='comment:46'></a>\nThanks for adding the docs!",
    "created_at": "2016-10-03T09:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397161",
    "user": "https://github.com/embray"
}
```

<a id='comment:46'></a>
Thanks for adding the docs!



---

archive/issue_comments_397162.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-10-03T09:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397162",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_397163.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/set_jupyter_config_dir\" to \"1beaae37abc0d484688fa08363207770e59b0a43\"",
    "created_at": "2016-10-03T22:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397163",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/set_jupyter_config_dir" to "1beaae37abc0d484688fa08363207770e59b0a43"



---

archive/issue_comments_397164.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-10-03T22:42:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21430#issuecomment-397164",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_064760.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-03T22:42:03Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21430",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21430#event-64760"
}
```
