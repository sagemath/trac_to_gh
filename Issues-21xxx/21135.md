# Issue 21135: octave >= 4.0 launches GUI by default

archive/issues_020898.json:
```json
{
    "assignees": [],
    "body": "With recent octave versions (>= 4.0)\n\n```\nsage: octave('1')  # hangs forever\n```\n\nThe reason is that newer octave launch the GUI interface by default (there is an option `--no-gui` to get rid of it). See https://www.gnu.org/software/octave/NEWS-4.0.html\n\nApparently, they also changed the prompt from `>` to `>>`.\n\n```\n$ octave --no-gui --silent\n>> 1\nans =  1\n```\nbut this is not documented in the changelog.\n\n---\nNote: to test this branch, you should\n- apply the branch\n- do `sage -b`\n- run the octave tests with\n\n```\n$ export SAGE_ROOT=$(sage -root)\n$ sage -t --optional=sage,octave $SAGE_ROOT/src/sage/interfaces/octave.py\n```\n\nCC:  @fchapoton @EmmanuelCharpentier\n\nBranch/Commit: **[1ed88ae](https://github.com/sagemath/sagetrac-mirror/commit/1ed88aef15cae31754965a9a6eb2de55667ca5c4)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Dima Pasechnik**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21135_\n\n",
    "closed_at": "2016-08-21T13:13:52Z",
    "created_at": "2016-07-31T00:16:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interact",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "octave >= 4.0 launches GUI by default",
    "type": "issue",
    "updated_at": "2016-08-21T13:13:52Z",
    "url": "https://github.com/sagemath/sage/issues/21135",
    "user": "https://github.com/videlec"
}
```
With recent octave versions (>= 4.0)

```
sage: octave('1')  # hangs forever
```

The reason is that newer octave launch the GUI interface by default (there is an option `--no-gui` to get rid of it). See https://www.gnu.org/software/octave/NEWS-4.0.html

Apparently, they also changed the prompt from `>` to `>>`.

```
$ octave --no-gui --silent
>> 1
ans =  1
```
but this is not documented in the changelog.

---
Note: to test this branch, you should
- apply the branch
- do `sage -b`
- run the octave tests with

```
$ export SAGE_ROOT=$(sage -root)
$ sage -t --optional=sage,octave $SAGE_ROOT/src/sage/interfaces/octave.py
```

CC:  @fchapoton @EmmanuelCharpentier

Branch/Commit: **[1ed88ae](https://github.com/sagemath/sagetrac-mirror/commit/1ed88aef15cae31754965a9a6eb2de55667ca5c4)**

Reviewer: **Vincent Delecroix**

Author: **Dima Pasechnik**

_Issue created by migration from https://trac.sagemath.org/ticket/21135_





---

archive/issue_events_279277.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-31T00:16:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279277"
}
```



---

archive/issue_events_279278.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-31T00:16:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interact",
    "label_color": "0000ff",
    "label_name": "component: interact",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279278"
}
```



---

archive/issue_events_279279.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-31T00:16:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279279"
}
```



---

archive/issue_events_279280.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-31T00:16:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279280"
}
```



---

archive/issue_comments_310602.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,13 @@\n-On recent octave versions (at least 4.0.3) the command `octave` launch the GUI interface. Hence on my computer\n+With recent octave versions (at least 4.0.3)\n \n ```\n-sage: octave('1')  # launch octave GUI and hangs forever\n+sage: octave('1')  # hangs forever\n ```\n-With the option `--no-gui` everything is fine.\n+\n+The reason is that newer octave launch the GUI interface by default (there is an option `--no-gui` to get rid of it). And they also changed the prompt from `>` to `>>`.\n+\n+```\n+$ octave --no-gui --silent\n+>> 1\n+ans =  1\n+```\n``````\n",
    "created_at": "2016-07-31T00:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310602",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,13 @@
-On recent octave versions (at least 4.0.3) the command `octave` launch the GUI interface. Hence on my computer
+With recent octave versions (at least 4.0.3)
 
 ```
-sage: octave('1')  # launch octave GUI and hangs forever
+sage: octave('1')  # hangs forever
 ```
-With the option `--no-gui` everything is fine.
+
+The reason is that newer octave launch the GUI interface by default (there is an option `--no-gui` to get rid of it). And they also changed the prompt from `>` to `>>`.
+
+```
+$ octave --no-gui --silent
+>> 1
+ans =  1
+```
``````




---

archive/issue_events_279281.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-01T19:22:22Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "title_is": "octave >= 4.0 launches GUI by default",
    "title_was": "newer octave launch GUI by default",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279281"
}
```



---

archive/issue_comments_310603.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,13 +1,17 @@\n-With recent octave versions (at least 4.0.3)\n+With recent octave versions (>= 4.0)\n \n ```\n sage: octave('1')  # hangs forever\n ```\n \n-The reason is that newer octave launch the GUI interface by default (there is an option `--no-gui` to get rid of it). And they also changed the prompt from `>` to `>>`.\n+The reason is that newer octave launch the GUI interface by default (there is an option `--no-gui` to get rid of it). See https://www.gnu.org/software/octave/NEWS-4.0.html\n+\n+Apparently, they also changed the prompt from `>` to `>>`.\n \n ```\n $ octave --no-gui --silent\n >> 1\n ans =  1\n ```\n+but this is not documented in the changelog.\n+\n``````\n",
    "created_at": "2016-08-01T19:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310603",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,13 +1,17 @@
-With recent octave versions (at least 4.0.3)
+With recent octave versions (>= 4.0)
 
 ```
 sage: octave('1')  # hangs forever
 ```
 
-The reason is that newer octave launch the GUI interface by default (there is an option `--no-gui` to get rid of it). And they also changed the prompt from `>` to `>>`.
+The reason is that newer octave launch the GUI interface by default (there is an option `--no-gui` to get rid of it). See https://www.gnu.org/software/octave/NEWS-4.0.html
+
+Apparently, they also changed the prompt from `>` to `>>`.
 
 ```
 $ octave --no-gui --silent
 >> 1
 ans =  1
 ```
+but this is not documented in the changelog.
+
``````




---

archive/issue_comments_310604.json:
```json
{
    "body": "Commit: **[1389201](https://github.com/sagemath/sagetrac-mirror/commit/138920133555e167a5776756f39e9ebbcd4cee57)**",
    "created_at": "2016-08-01T20:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310604",
    "user": "https://github.com/videlec"
}
```

Commit: **[1389201](https://github.com/sagemath/sagetrac-mirror/commit/138920133555e167a5776756f39e9ebbcd4cee57)**



---

archive/issue_events_279282.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-01T20:31:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279282"
}
```



---

archive/issue_comments_310605.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/138920133555e167a5776756f39e9ebbcd4cee57\">1389201</a></td><td><code>21135: fix octave interface for version >= 4.0</code></td></tr></table>\n",
    "created_at": "2016-08-01T20:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310605",
    "user": "https://github.com/videlec"
}
```

<div id="comment:3" align="right">Comment 3</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/138920133555e167a5776756f39e9ebbcd4cee57">1389201</a></td><td><code>21135: fix octave interface for version >= 4.0</code></td></tr></table>




---

archive/issue_comments_310606.json:
```json
{
    "body": "Author: **Vincent Delecroix**",
    "created_at": "2016-08-01T20:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310606",
    "user": "https://github.com/videlec"
}
```

Author: **Vincent Delecroix**



---

archive/issue_comments_310607.json:
```json
{
    "body": "Branch: **[u/vdelecroix/21135](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/21135)**",
    "created_at": "2016-08-01T20:31:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310607",
    "user": "https://github.com/videlec"
}
```

Branch: **[u/vdelecroix/21135](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/21135)**



---

archive/issue_comments_310608.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,3 +15,13 @@\n ```\n but this is not documented in the changelog.\n \n+---\n+Note: to test this branch, you should\n+- applying the branch\n+- make `sage -b`\n+- run the tests octave tests with\n+\n+```\n+$ export SAGE_ROOT=$(sage -root)\n+$ sage -t --optional=sage,octave $SAGE_ROOT/src/sage/interfaces/octave.py\n+```\n``````\n",
    "created_at": "2016-08-01T20:38:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310608",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,3 +15,13 @@
 ```
 but this is not documented in the changelog.
 
+---
+Note: to test this branch, you should
+- applying the branch
+- make `sage -b`
+- run the tests octave tests with
+
+```
+$ export SAGE_ROOT=$(sage -root)
+$ sage -t --optional=sage,octave $SAGE_ROOT/src/sage/interfaces/octave.py
+```
``````




---

archive/issue_comments_310609.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -17,9 +17,9 @@\n \n ---\n Note: to test this branch, you should\n-- applying the branch\n-- make `sage -b`\n-- run the tests octave tests with\n+- apply the branch\n+- do `sage -b`\n+- run the octave tests with\n \n ```\n $ export SAGE_ROOT=$(sage -root)\n``````\n",
    "created_at": "2016-08-01T20:38:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310609",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -17,9 +17,9 @@
 
 ---
 Note: to test this branch, you should
-- applying the branch
-- make `sage -b`
-- run the tests octave tests with
+- apply the branch
+- do `sage -b`
+- run the octave tests with
 
 ```
 $ export SAGE_ROOT=$(sage -root)
``````




---

archive/issue_comments_310610.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nDid you see this: https://github.com/sagemathinc/smc-sage/commit/f524d58c3db07856140f5557aa57cfa21a5895b3 ?\n\n(an update to octave interface used on SMC)",
    "created_at": "2016-08-01T23:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310610",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:6" align="right">Comment 6</div>

Did you see this: https://github.com/sagemathinc/smc-sage/commit/f524d58c3db07856140f5557aa57cfa21a5895b3 ?

(an update to octave interface used on SMC)



---

archive/issue_comments_310611.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nOr more precisely, `https://github.com/billpage/sage-octave`. But I do not see your point. Either we stick to `sage/interfaces/octave.py` or we use some external `octave.py` but only one at a time. If you want to port the enhancement from `sage-octave` into Sage I will be glad to review it.",
    "created_at": "2016-08-01T23:27:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310611",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">Comment 7</div>

Or more precisely, `https://github.com/billpage/sage-octave`. But I do not see your point. Either we stick to `sage/interfaces/octave.py` or we use some external `octave.py` but only one at a time. If you want to port the enhancement from `sage-octave` into Sage I will be glad to review it.



---

archive/issue_comments_310612.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nReplying to [@videlec](#comment%3A7):\n> Or more precisely, `https://github.com/billpage/sage-octave`. But I do not see your point. Either we stick to `sage/interfaces/octave.py` or we use some external `octave.py` but only one at a time. If you want to port the enhancement from `sage-octave` into Sage I will be glad to review it.\n\nmy point was that it looks like a reasonable improvement for `src/sage/interfaces/octave.py`\n\nI'll try to merge it with the branch on this ticket.",
    "created_at": "2016-08-02T07:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310612",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:8" align="right">Comment 8</div>

Replying to [@videlec](#comment%3A7):
> Or more precisely, `https://github.com/billpage/sage-octave`. But I do not see your point. Either we stick to `sage/interfaces/octave.py` or we use some external `octave.py` but only one at a time. If you want to port the enhancement from `sage-octave` into Sage I will be glad to review it.

my point was that it looks like a reasonable improvement for `src/sage/interfaces/octave.py`

I'll try to merge it with the branch on this ticket.



---

archive/issue_comments_310613.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nfor the record, your branch tests fine with Octave 3.8.1.",
    "created_at": "2016-08-02T14:19:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310613",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:9" align="right">Comment 9</div>

for the record, your branch tests fine with Octave 3.8.1.



---

archive/issue_comments_310614.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nby the way, do you understand the need to create Sage matrices in `_matrix` as elements of `MatrixSpace` rather than just `matrix` ?",
    "created_at": "2016-08-02T19:54:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310614",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:10" align="right">Comment 10</div>

by the way, do you understand the need to create Sage matrices in `_matrix` as elements of `MatrixSpace` rather than just `matrix` ?



---

archive/issue_comments_310615.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nWhy not? And please do not try to touch to everything as otherwise it will be impossible to review.",
    "created_at": "2016-08-02T19:57:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310615",
    "user": "https://github.com/videlec"
}
```

<div id="comment:11" align="right">Comment 11</div>

Why not? And please do not try to touch to everything as otherwise it will be impossible to review.



---

archive/issue_comments_310616.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nThe difference is not big, but there is one place I don't understand, and moreover it does not work with complex matrices. Namely, in `_matrix` there is the following change:\n\n```\n         from sage.matrix.all import MatrixSpace\n-        return MatrixSpace(R, nrows, ncols)(w)\n+        s = str(self).strip()\n+        v = s.split('\\n ')\n+        nrows = len(v)\n+        if nrows == 0:\n+            return MatrixSpace(R,0,0)(0)\n+        ncols = len(v[0].split())\n+        M = MatrixSpace(R, nrows, ncols)\n+        v = sum([[x for x in w.split()] for w in v], [])\n+        return M(v)\n```\nmoreover it doesn't work on SMC either, so I'd just skip it, unless I understand when one should return 0.",
    "created_at": "2016-08-02T20:32:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310616",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:12" align="right">Comment 12</div>

The difference is not big, but there is one place I don't understand, and moreover it does not work with complex matrices. Namely, in `_matrix` there is the following change:

```
         from sage.matrix.all import MatrixSpace
-        return MatrixSpace(R, nrows, ncols)(w)
+        s = str(self).strip()
+        v = s.split('\n ')
+        nrows = len(v)
+        if nrows == 0:
+            return MatrixSpace(R,0,0)(0)
+        ncols = len(v[0].split())
+        M = MatrixSpace(R, nrows, ncols)
+        v = sum([[x for x in w.split()] for w in v], [])
+        return M(v)
```
moreover it doesn't work on SMC either, so I'd just skip it, unless I understand when one should return 0.



---

archive/issue_comments_310617.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nAnyway, this whole `octave` interface is very broken. Namely floating point are passed through strings which is wrong from the begining. The approach taken in [Oct2Py](https://pypi.python.org/pypi/oct2py) (that is writing files with *complete* information and building numpy matrices from them) is *much* better! Though a bit slow.",
    "created_at": "2016-08-02T20:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310617",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">Comment 13</div>

Anyway, this whole `octave` interface is very broken. Namely floating point are passed through strings which is wrong from the begining. The approach taken in [Oct2Py](https://pypi.python.org/pypi/oct2py) (that is writing files with *complete* information and building numpy matrices from them) is *much* better! Though a bit slow.



---

archive/issue_comments_310618.json:
```json
{
    "body": "Changed commit from **[1389201](https://github.com/sagemath/sagetrac-mirror/commit/138920133555e167a5776756f39e9ebbcd4cee57)** to **[70e2c12](https://github.com/sagemath/sagetrac-mirror/commit/70e2c125ad26e98e53d5f50bc9cafda93605bd92)**",
    "created_at": "2016-08-02T21:18:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310618",
    "user": "https://github.com/dimpase"
}
```

Changed commit from **[1389201](https://github.com/sagemath/sagetrac-mirror/commit/138920133555e167a5776756f39e9ebbcd4cee57)** to **[70e2c12](https://github.com/sagemath/sagetrac-mirror/commit/70e2c125ad26e98e53d5f50bc9cafda93605bd92)**



---

archive/issue_comments_310619.json:
```json
{
    "body": "Changed branch from **[u/vdelecroix/21135](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/21135)** to **[public/21135](https://github.com/sagemath/sagetrac-mirror/tree/public/21135)**",
    "created_at": "2016-08-02T21:18:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310619",
    "user": "https://github.com/dimpase"
}
```

Changed branch from **[u/vdelecroix/21135](https://github.com/sagemath/sagetrac-mirror/tree/u/vdelecroix/21135)** to **[public/21135](https://github.com/sagemath/sagetrac-mirror/tree/public/21135)**



---

archive/issue_comments_310620.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nThis is the mix of your changes and Bill Page's changes that seems to make sense to me.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ac06e644890058ecba960752e0cab43678bd7ec\">4ac06e6</a></td><td><code>improved octave interface from https://github.com/billpage/sage-octave</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/70e2c125ad26e98e53d5f50bc9cafda93605bd92\">70e2c12</a></td><td><code>update docs, ensure clean exit (so that sage-cleaner exists cleanly)</code></td></tr></table>\n",
    "created_at": "2016-08-02T21:18:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310620",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:14" align="right">Comment 14</div>

This is the mix of your changes and Bill Page's changes that seems to make sense to me.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ac06e644890058ecba960752e0cab43678bd7ec">4ac06e6</a></td><td><code>improved octave interface from https://github.com/billpage/sage-octave</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/70e2c125ad26e98e53d5f50bc9cafda93605bd92">70e2c12</a></td><td><code>update docs, ensure clean exit (so that sage-cleaner exists cleanly)</code></td></tr></table>




---

archive/issue_comments_310621.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nLet me have a look. (however, I discussed the approach taken here using the version of octave in #20382. Julian claims that it was not a reasonable strategy)",
    "created_at": "2016-08-02T21:22:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310621",
    "user": "https://github.com/videlec"
}
```

<div id="comment:15" align="right">Comment 15</div>

Let me have a look. (however, I discussed the approach taken here using the version of octave in #20382. Julian claims that it was not a reasonable strategy)



---

archive/issue_comments_310622.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nWhy did you reintroduce `sage-native-execute`? This is useless.",
    "created_at": "2016-08-02T21:23:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310622",
    "user": "https://github.com/videlec"
}
```

<div id="comment:16" align="right">Comment 16</div>

Why did you reintroduce `sage-native-execute`? This is useless.



---

archive/issue_comments_310623.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nWhy did you remove the `--no-gui` that is **exactly** the point of this ticket!?",
    "created_at": "2016-08-02T21:24:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310623",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">Comment 17</div>

Why did you remove the `--no-gui` that is **exactly** the point of this ticket!?



---

archive/issue_comments_310624.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nReplying to [@videlec](#comment%3A17):\n> Why did you remove the `--no-gui` that is **exactly** the point of this ticket!?\n\nOops, sorry, I tested on 4.0.0, and it worked... :-)\nOK, let me put it back in.",
    "created_at": "2016-08-02T21:25:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310624",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:18" align="right">Comment 18</div>

Replying to [@videlec](#comment%3A17):
> Why did you remove the `--no-gui` that is **exactly** the point of this ticket!?

Oops, sorry, I tested on 4.0.0, and it worked... :-)
OK, let me put it back in.



---

archive/issue_comments_310625.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nBTW could you check what gives `$ octave --no-gui` with your 3.X.Y version? (I would expect a return code `1`)",
    "created_at": "2016-08-02T21:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310625",
    "user": "https://github.com/videlec"
}
```

<div id="comment:19" align="right">Comment 19</div>

BTW could you check what gives `$ octave --no-gui` with your 3.X.Y version? (I would expect a return code `1`)



---

archive/issue_comments_310626.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@dimpase](#comment%3A18):\n> Replying to [@videlec](#comment%3A17):\n> > Why did you remove the `--no-gui` that is **exactly** the point of this ticket!?\n\n> \n> Oops, sorry, I tested on 4.0.0, and it worked... :-)\n> OK, let me put it back in.\n\nI don't mind if it works but you should document what you did and remove the --no-gui stuff that is now ignored.",
    "created_at": "2016-08-02T21:29:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310626",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@dimpase](#comment%3A18):
> Replying to [@videlec](#comment%3A17):
> > Why did you remove the `--no-gui` that is **exactly** the point of this ticket!?

> 
> Oops, sorry, I tested on 4.0.0, and it worked... :-)
> OK, let me put it back in.

I don't mind if it works but you should document what you did and remove the --no-gui stuff that is now ignored.



---

archive/issue_comments_310627.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nNote that for me the following line\n\n```\n$ octave --no-line-editing --silent --eval 'PS2(PS1());more off' --persist\n```\ndoes launch the GUI.",
    "created_at": "2016-08-02T21:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310627",
    "user": "https://github.com/videlec"
}
```

<div id="comment:21" align="right">Comment 21</div>

Note that for me the following line

```
$ octave --no-line-editing --silent --eval 'PS2(PS1());more off' --persist
```
does launch the GUI.



---

archive/issue_comments_310628.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nYou should add a linebreak before `_eval_line`",
    "created_at": "2016-08-02T21:35:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310628",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">Comment 22</div>

You should add a linebreak before `_eval_line`



---

archive/issue_comments_310629.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nWhat is the point of `print(\"CntrlC: Interrupting %s...\"%self)` in `_keyboard_interrupt`?",
    "created_at": "2016-08-02T21:35:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310629",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">Comment 23</div>

What is the point of `print("CntrlC: Interrupting %s..."%self)` in `_keyboard_interrupt`?



---

archive/issue_comments_310630.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nThis\n\n```\nraise pexpect.ExceptionPexpect( \"THIS IS A BUG -- PLEASE REPORT. This should never happen.\\n\" + msg)\n```\nwould better be a `RuntimeError`.",
    "created_at": "2016-08-02T21:36:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310630",
    "user": "https://github.com/videlec"
}
```

<div id="comment:24" align="right">Comment 24</div>

This

```
raise pexpect.ExceptionPexpect( "THIS IS A BUG -- PLEASE REPORT. This should never happen.\n" + msg)
```
would better be a `RuntimeError`.



---

archive/issue_comments_310631.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nWhy\n\n```\n            #self._expect.expect(self._prompt)\n            #self._expect.expect(self._prompt)\n```\nin `_keyboard_interrupt`?",
    "created_at": "2016-08-02T21:36:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310631",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">Comment 25</div>

Why

```
            #self._expect.expect(self._prompt)
            #self._expect.expect(self._prompt)
```
in `_keyboard_interrupt`?



---

archive/issue_comments_310632.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@videlec](#comment%3A19):\n> BTW could you check what gives `$ octave --no-gui` with your 3.X.Y version? (I would expect a return code `1`)\n\nlooks as if it just works:\n\n```\n$ octave --no-gui\nGNU Octave, version 3.8.1\nCopyright (C) 2014 John W. Eaton and others.\nThis is free software; see the source code for copying conditions.\nThere is ABSOLUTELY NO WARRANTY; not even for MERCHANTABILITY or\nFITNESS FOR A PARTICULAR PURPOSE.  For details, type 'warranty'.\n\nOctave was configured for \"x86_64-pc-linux-gnu\".\n\nAdditional information about Octave is available at http://www.octave.org.\n\nPlease contribute if you find this software useful.\nFor more information, visit http://www.octave.org/get-involved.html\n\nRead http://www.octave.org/bugs.html to learn how to submit bug reports.\nFor information about changes from previous versions, type 'news'.\n\noctave:1> \n```",
    "created_at": "2016-08-02T21:40:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310632",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@videlec](#comment%3A19):
> BTW could you check what gives `$ octave --no-gui` with your 3.X.Y version? (I would expect a return code `1`)

looks as if it just works:

```
$ octave --no-gui
GNU Octave, version 3.8.1
Copyright (C) 2014 John W. Eaton and others.
This is free software; see the source code for copying conditions.
There is ABSOLUTELY NO WARRANTY; not even for MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.  For details, type 'warranty'.

Octave was configured for "x86_64-pc-linux-gnu".

Additional information about Octave is available at http://www.octave.org.

Please contribute if you find this software useful.
For more information, visit http://www.octave.org/get-involved.html

Read http://www.octave.org/bugs.html to learn how to submit bug reports.
For information about changes from previous versions, type 'news'.

octave:1> 
```



---

archive/issue_comments_310633.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@videlec](#comment%3A25):\n> Why\n> \n> ```\n>             #self._expect.expect(self._prompt)\n>             #self._expect.expect(self._prompt)\n> ```\n> in `_keyboard_interrupt`?\n\nthat's not me... OK, sure, it'd be removed.",
    "created_at": "2016-08-02T21:41:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310633",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@videlec](#comment%3A25):
> Why
> 
> ```
>             #self._expect.expect(self._prompt)
>             #self._expect.expect(self._prompt)
> ```
> in `_keyboard_interrupt`?

that's not me... OK, sure, it'd be removed.



---

archive/issue_comments_310634.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@videlec](#comment%3A20):\n> Replying to [@dimpase](#comment%3A18):\n> > Replying to [@videlec](#comment%3A17):\n> > > Why did you remove the `--no-gui` that is **exactly** the point of this ticket!?\n\n> > \n> > Oops, sorry, I tested on 4.0.0, and it worked... :-)\n> > OK, let me put it back in.\n\n> \n> I don't mind if it works but you should document what you did and remove the --no-gui stuff that is now ignored.\n\nthere is also an issue with `DISPLAY` --- if it is unset, then `--no-gui` comes into force implicitly...",
    "created_at": "2016-08-02T21:44:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310634",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@videlec](#comment%3A20):
> Replying to [@dimpase](#comment%3A18):
> > Replying to [@videlec](#comment%3A17):
> > > Why did you remove the `--no-gui` that is **exactly** the point of this ticket!?

> > 
> > Oops, sorry, I tested on 4.0.0, and it worked... :-)
> > OK, let me put it back in.

> 
> I don't mind if it works but you should document what you did and remove the --no-gui stuff that is now ignored.

there is also an issue with `DISPLAY` --- if it is unset, then `--no-gui` comes into force implicitly...



---

archive/issue_comments_310635.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nReplying to [@videlec](#comment%3A23):\n> What is the point of `print(\"CntrlC: Interrupting %s...\"%self)` in `_keyboard_interrupt`?\n\nI presume this is meant to show this message, as interrupting might take a while...",
    "created_at": "2016-08-02T21:45:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310635",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:29" align="right">Comment 29</div>

Replying to [@videlec](#comment%3A23):
> What is the point of `print("CntrlC: Interrupting %s..."%self)` in `_keyboard_interrupt`?

I presume this is meant to show this message, as interrupting might take a while...



---

archive/issue_comments_310636.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0f9c86abad95c432d1dca10a26b7aba8525e7b5d\">0f9c86a</a></td><td><code>use octave-cli and the cleanup as suggested; fix octave_console()</code></td></tr></table>\n",
    "created_at": "2016-08-02T23:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310636",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30" align="right">Comment 30</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0f9c86abad95c432d1dca10a26b7aba8525e7b5d">0f9c86a</a></td><td><code>use octave-cli and the cleanup as suggested; fix octave_console()</code></td></tr></table>




---

archive/issue_comments_310637.json:
```json
{
    "body": "Changed commit from **[70e2c12](https://github.com/sagemath/sagetrac-mirror/commit/70e2c125ad26e98e53d5f50bc9cafda93605bd92)** to **[0f9c86a](https://github.com/sagemath/sagetrac-mirror/commit/0f9c86abad95c432d1dca10a26b7aba8525e7b5d)**",
    "created_at": "2016-08-02T23:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310637",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[70e2c12](https://github.com/sagemath/sagetrac-mirror/commit/70e2c125ad26e98e53d5f50bc9cafda93605bd92)** to **[0f9c86a](https://github.com/sagemath/sagetrac-mirror/commit/0f9c86abad95c432d1dca10a26b7aba8525e7b5d)**



---

archive/issue_comments_310638.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\n`octave-cli` is the more local thing to call...",
    "created_at": "2016-08-02T23:04:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310638",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:31" align="right">Comment 31</div>

`octave-cli` is the more local thing to call...



---

archive/issue_comments_310639.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e01d07511d6e6f2bd870313fa365374355bf06f4\">e01d075</a></td><td><code>use octave-cli and the cleanup as suggested; fix octave_console()</code></td></tr></table>\n",
    "created_at": "2016-08-03T07:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310639",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:32" align="right">Comment 32</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e01d07511d6e6f2bd870313fa365374355bf06f4">e01d075</a></td><td><code>use octave-cli and the cleanup as suggested; fix octave_console()</code></td></tr></table>




---

archive/issue_comments_310640.json:
```json
{
    "body": "Changed commit from **[0f9c86a](https://github.com/sagemath/sagetrac-mirror/commit/0f9c86abad95c432d1dca10a26b7aba8525e7b5d)** to **[e01d075](https://github.com/sagemath/sagetrac-mirror/commit/e01d07511d6e6f2bd870313fa365374355bf06f4)**",
    "created_at": "2016-08-03T07:23:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310640",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0f9c86a](https://github.com/sagemath/sagetrac-mirror/commit/0f9c86abad95c432d1dca10a26b7aba8525e7b5d)** to **[e01d075](https://github.com/sagemath/sagetrac-mirror/commit/e01d07511d6e6f2bd870313fa365374355bf06f4)**



---

archive/issue_comments_310641.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nMy proposal (in the current ticket branch) is to call `octave-cli` instead of `octave`, which always launches `octave-gui` (according to my tests on Fedora 23 with octave 4.0.1). `octave-cli` is available for octave versions 3 and 4, so this is a simplification too.",
    "created_at": "2016-08-03T07:30:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310641",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:33" align="right">Comment 33</div>

My proposal (in the current ticket branch) is to call `octave-cli` instead of `octave`, which always launches `octave-gui` (according to my tests on Fedora 23 with octave 4.0.1). `octave-cli` is available for octave versions 3 and 4, so this is a simplification too.



---

archive/issue_events_279283.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-05T08:31:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279283"
}
```



---

archive/issue_events_279284.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-05T08:31:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279284"
}
```



---

archive/issue_events_279285.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-09T18:34:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279285"
}
```



---

archive/issue_events_279286.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-09T18:34:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279286"
}
```



---

archive/issue_comments_310642.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nIf you use `octave-cli` then you can get rid of `--no-gui`.\n\nAs you do not use the `prompt` variable you would better remove it.\n\nSince your code does not depend on octave version you would better get rid of my `get_octave_version`.",
    "created_at": "2016-08-09T18:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310642",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">Comment 35</div>

If you use `octave-cli` then you can get rid of `--no-gui`.

As you do not use the `prompt` variable you would better remove it.

Since your code does not depend on octave version you would better get rid of my `get_octave_version`.



---

archive/issue_comments_310643.json:
```json
{
    "body": "Changed author from **Vincent Delecroix** to **Dima Pasechnik**",
    "created_at": "2016-08-09T18:34:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310643",
    "user": "https://github.com/videlec"
}
```

Changed author from **Vincent Delecroix** to **Dima Pasechnik**



---

archive/issue_comments_310644.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nThis bug forbids full checking (by make ptestlong) of a proposed patch, since such a test currently fails when octave>4.0.0 is installed : octave starts a GUI, doesn't return and the doctest times out.\n\nFYI, the following diff (a four-letters patch...) against the current (7.4beta1) sage is **sufficient** to have sage passing the tests for external interfaces :\n\n```\ndiff --git a/src/sage/interfaces/octave.py b/src/sage/interfaces/octave.py\nindex cfbbceb..5b2ce36 100644\n--- a/src/sage/interfaces/octave.py\n+++ b/src/sage/interfaces/octave.py\n@@ -184,7 +184,7 @@ class Octave(Expect):\n         Expect.__init__(self,\n                         name = 'octave',\n                         prompt = '>',\n-                        command = \"sage-native-execute octave --no-line-editing --silent\",\n+                        command = \"sage-native-execute octave-cli --no-line-editing --silent\",\n                         server = server,\n                         server_tmpdir = server_tmpdir,\n                         script_subdirectory = script_subdirectory,\n```\n\nProof (I wanted to check fricas 1.2.7 before reviewing #21231) :\n\n```\ncharpent@SAP5057241:/usr/local/sage-7$ sage -t --optional=sage,octave,fricas $(sage -root)/src/sage/doctest/external.py \nRunning doctests with ID 2016-08-19-16-01-10-87c81a5b.\nGit branch: quickoctavefix\nUsing --optional=fricas,octave,sage\nDoctesting 1 file.\nsage -t --warn-long 70.0 src/sage/doctest/external.py\n    [38 tests, 38.24 s]\n----------------------------------------------------------------------\nAll tests passed!\n----------------------------------------------------------------------\nTotal time for all tests: 38.3 seconds\n    cpu time: 0.6 seconds\n    cumulative wall time: 38.2 seconds\n```\n\nCould we please have something reviewable, useable (= allowing for `make ptestlong` to succeed when checking something else...) and dispatch aesthetic *disputationes* to another ticket ?",
    "created_at": "2016-08-19T14:19:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310644",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:36" align="right">Comment 36</div>

This bug forbids full checking (by make ptestlong) of a proposed patch, since such a test currently fails when octave>4.0.0 is installed : octave starts a GUI, doesn't return and the doctest times out.

FYI, the following diff (a four-letters patch...) against the current (7.4beta1) sage is **sufficient** to have sage passing the tests for external interfaces :

```
diff --git a/src/sage/interfaces/octave.py b/src/sage/interfaces/octave.py
index cfbbceb..5b2ce36 100644
--- a/src/sage/interfaces/octave.py
+++ b/src/sage/interfaces/octave.py
@@ -184,7 +184,7 @@ class Octave(Expect):
         Expect.__init__(self,
                         name = 'octave',
                         prompt = '>',
-                        command = "sage-native-execute octave --no-line-editing --silent",
+                        command = "sage-native-execute octave-cli --no-line-editing --silent",
                         server = server,
                         server_tmpdir = server_tmpdir,
                         script_subdirectory = script_subdirectory,
```

Proof (I wanted to check fricas 1.2.7 before reviewing #21231) :

```
charpent@SAP5057241:/usr/local/sage-7$ sage -t --optional=sage,octave,fricas $(sage -root)/src/sage/doctest/external.py 
Running doctests with ID 2016-08-19-16-01-10-87c81a5b.
Git branch: quickoctavefix
Using --optional=fricas,octave,sage
Doctesting 1 file.
sage -t --warn-long 70.0 src/sage/doctest/external.py
    [38 tests, 38.24 s]
----------------------------------------------------------------------
All tests passed!
----------------------------------------------------------------------
Total time for all tests: 38.3 seconds
    cpu time: 0.6 seconds
    cumulative wall time: 38.2 seconds
```

Could we please have something reviewable, useable (= allowing for `make ptestlong` to succeed when checking something else...) and dispatch aesthetic *disputationes* to another ticket ?



---

archive/issue_comments_310645.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A36):\n> This bug forbids full checking (by make ptestlong) of a proposed patch, since such a test currently fails when octave>4.0.0 is installed : octave starts a GUI, doesn't return and the doctest times out.\n\nwhere in the branch do you see octave called?\noctave-cli is called, yes.\nUnless you have SAGE_OCTAVE_COMMAND set.\nCertainly if you have it set to octave it will do not what you want.\nUnset it, then the tests should pass, I think.\n\n\n> Could we please have something reviewable, useable (= allowing for `make ptestlong` to succeed when checking something else...) and dispatch aesthetic *disputationes* to another ticket ?\n\nWell, does this branch actually work for you? If not, I would like to know which  test it fails, and the version of octave.",
    "created_at": "2016-08-19T14:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310645",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:37" align="right">Comment 37</div>

Replying to [@EmmanuelCharpentier](#comment%3A36):
> This bug forbids full checking (by make ptestlong) of a proposed patch, since such a test currently fails when octave>4.0.0 is installed : octave starts a GUI, doesn't return and the doctest times out.

where in the branch do you see octave called?
octave-cli is called, yes.
Unless you have SAGE_OCTAVE_COMMAND set.
Certainly if you have it set to octave it will do not what you want.
Unset it, then the tests should pass, I think.


> Could we please have something reviewable, useable (= allowing for `make ptestlong` to succeed when checking something else...) and dispatch aesthetic *disputationes* to another ticket ?

Well, does this branch actually work for you? If not, I would like to know which  test it fails, and the version of octave.



---

archive/issue_comments_310646.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nMy mail answer to the Trac server didn't make it, it seems...\n\nReplying to [@dimpase](#comment%3A37):\n> Comment (by dimpase):\n\n>\n>  Replying to [@EmmanuelCharpentier](#comment%3A36):\n\n[ Snip ]\n\n>  > This bug forbids full checking (by make ptestlong) of a proposed patch,\n>  since such a test currently fails when octave>4.0.0 is installed : octave\n>  starts a GUI, doesn't return and the doctest times out.\n\n>\n>  where in the branch do you see octave called?\n>  octave-cli is called, yes.\n>  Unless you have SAGE_OCTAVE_COMMAND set.\n>  Certainly if you have it set to octave it will do not what you want.\n>  Unset it, then the tests should pass, I think.\n\nThink again :\n\n```\ncharpent@SAP5057241:~$ sage -sh\n\nStarting subshell with Sage environment variables set.  Don't forget\nto exit when you are done.  Beware:\n * Do not do anything with other copies of Sage on your system.\n * Do not use this for installing Sage packages using \"sage -i\" or for\n   running \"make\" at Sage's root directory.  These should be done\n   outside the Sage shell.\n\nBypassing shell configuration files...\n\nNote: SAGE_ROOT=/usr/local/sage-7\n(sage-sh) charpent@SAP5057241:~$ echo $SAGE_OCTAVE_COMMAND\n\n(sage-sh) charpent@SAP5057241:~$ which octave\n/usr/bin/octave\n(sage-sh) charpent@SAP5057241:~$ octave\n\n[ Octave starts its GUI. I exit from it]\n\n(sage-sh) charpent@SAP5057241:~$ exit\nexit\nExited Sage subshell.\ncharpent@SAP5057241:~$ echo $SAGE_OCTAVE_COMMAND\n\ncharpent@SAP5057241:~$\n```\n\nErgo SAGE_OCTAVE_COMMAND is not set neither in the Sage shell neither out of it.\n\nA \"make ptestlong\" on this machine FAILS with a timeout on ...doctest/external.py\", leaving an unclosable octave gui (you have to kill -TERM it...). From my check of 7.4beta0 :\n\n```\n...\nsage -t --long --warn-long 50.8 src/sage/doctest/external.py\n    Timed out\n**********************************************************************\n...\n**********************************************************************\n----------------------------------------------------------------------\nsage -t --long --warn-long 50.8 src/sage/doctest/external.py  # Timed out\n----------------------------------------------------------------------\nTotal time for all tests: 8702.9 seconds\n    cpu time: 11743.1 seconds\n    cumulative wall time: 14507.8 seconds\n```\n\nThe octave documentation does not hint at any way of making the CLI interface the default (all it does provide is the --no-gui option and the octave-cli binary). Therefore, this fix is somewhat urgent for people having octave>4.0.0 installed...\n\n[ Snip again... ]\n\n>  > Could we please have something reviewable, useable (= allowing for\n>  > `make ptestlong` to succeed when checking something else...) and\n>  > dispatch aesthetic *disputationes* to another ticket ?\n\nI am devasted to have to insist...\n\n                    Emmanuel Charpentier",
    "created_at": "2016-08-19T15:12:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310646",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:38" align="right">Comment 38</div>

My mail answer to the Trac server didn't make it, it seems...

Replying to [@dimpase](#comment%3A37):
> Comment (by dimpase):

>
>  Replying to [@EmmanuelCharpentier](#comment%3A36):

[ Snip ]

>  > This bug forbids full checking (by make ptestlong) of a proposed patch,
>  since such a test currently fails when octave>4.0.0 is installed : octave
>  starts a GUI, doesn't return and the doctest times out.

>
>  where in the branch do you see octave called?
>  octave-cli is called, yes.
>  Unless you have SAGE_OCTAVE_COMMAND set.
>  Certainly if you have it set to octave it will do not what you want.
>  Unset it, then the tests should pass, I think.

Think again :

```
charpent@SAP5057241:~$ sage -sh

Starting subshell with Sage environment variables set.  Don't forget
to exit when you are done.  Beware:
 * Do not do anything with other copies of Sage on your system.
 * Do not use this for installing Sage packages using "sage -i" or for
   running "make" at Sage's root directory.  These should be done
   outside the Sage shell.

Bypassing shell configuration files...

Note: SAGE_ROOT=/usr/local/sage-7
(sage-sh) charpent@SAP5057241:~$ echo $SAGE_OCTAVE_COMMAND

(sage-sh) charpent@SAP5057241:~$ which octave
/usr/bin/octave
(sage-sh) charpent@SAP5057241:~$ octave

[ Octave starts its GUI. I exit from it]

(sage-sh) charpent@SAP5057241:~$ exit
exit
Exited Sage subshell.
charpent@SAP5057241:~$ echo $SAGE_OCTAVE_COMMAND

charpent@SAP5057241:~$
```

Ergo SAGE_OCTAVE_COMMAND is not set neither in the Sage shell neither out of it.

A "make ptestlong" on this machine FAILS with a timeout on ...doctest/external.py", leaving an unclosable octave gui (you have to kill -TERM it...). From my check of 7.4beta0 :

```
...
sage -t --long --warn-long 50.8 src/sage/doctest/external.py
    Timed out
**********************************************************************
...
**********************************************************************
----------------------------------------------------------------------
sage -t --long --warn-long 50.8 src/sage/doctest/external.py  # Timed out
----------------------------------------------------------------------
Total time for all tests: 8702.9 seconds
    cpu time: 11743.1 seconds
    cumulative wall time: 14507.8 seconds
```

The octave documentation does not hint at any way of making the CLI interface the default (all it does provide is the --no-gui option and the octave-cli binary). Therefore, this fix is somewhat urgent for people having octave>4.0.0 installed...

[ Snip again... ]

>  > Could we please have something reviewable, useable (= allowing for
>  > `make ptestlong` to succeed when checking something else...) and
>  > dispatch aesthetic *disputationes* to another ticket ?

I am devasted to have to insist...

                    Emmanuel Charpentier



---

archive/issue_comments_310647.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A38):\n\nI can only conjecture that you have not pulled the right branch, `public/21135` before running your tests.\n\nCould you please re-check? The change you proposed is equivalent to the branch in the sense that no octave is called, only octave-cli.\n\nAs well, could you please check that octave-cli does not launch GUI for you.",
    "created_at": "2016-08-19T15:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310647",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">Comment 39</div>

Replying to [@EmmanuelCharpentier](#comment%3A38):

I can only conjecture that you have not pulled the right branch, `public/21135` before running your tests.

Could you please re-check? The change you proposed is equivalent to the branch in the sense that no octave is called, only octave-cli.

As well, could you please check that octave-cli does not launch GUI for you.



---

archive/issue_comments_310648.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/181974fc49f77a5f15451fae69fcd17cb10c1742\">181974f</a></td><td><code>Merge branch 'public/21135' of git://trac.sagemath.org/sage into octafix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1713d749ed0de36dc2ead83cfdb2b9a4ca2c000d\">1713d74</a></td><td><code>removed unused prompt and unneeded option</code></td></tr></table>\n",
    "created_at": "2016-08-19T15:28:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310648",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40" align="right">Comment 40</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/181974fc49f77a5f15451fae69fcd17cb10c1742">181974f</a></td><td><code>Merge branch 'public/21135' of git://trac.sagemath.org/sage into octafix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1713d749ed0de36dc2ead83cfdb2b9a4ca2c000d">1713d74</a></td><td><code>removed unused prompt and unneeded option</code></td></tr></table>




---

archive/issue_comments_310649.json:
```json
{
    "body": "Changed commit from **[e01d075](https://github.com/sagemath/sagetrac-mirror/commit/e01d07511d6e6f2bd870313fa365374355bf06f4)** to **[1713d74](https://github.com/sagemath/sagetrac-mirror/commit/1713d749ed0de36dc2ead83cfdb2b9a4ca2c000d)**",
    "created_at": "2016-08-19T15:28:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310649",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[e01d075](https://github.com/sagemath/sagetrac-mirror/commit/e01d07511d6e6f2bd870313fa365374355bf06f4)** to **[1713d74](https://github.com/sagemath/sagetrac-mirror/commit/1713d749ed0de36dc2ead83cfdb2b9a4ca2c000d)**



---

archive/issue_comments_310650.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@dimpase](#comment%3A39):\n> Replying to [@EmmanuelCharpentier](#comment%3A38):\n> \n> I can only conjecture that you have not pulled the right branch, `public/21135` before running your tests.\n\nI have ***NOT*** pulled #21135 : my diff was against the current (pristine (unmodified)) 7.4beta1. My point was that a four-letters patch was enough to solve my current difficulty (i. e. breaking something that used to work), and that the other proposed modificatins (which aim at *enhancing* something that used to work) are a ***separate*** issue...\n\n> Could you please re-check? The change you proposed is equivalent to the branch in the sense that no octave is called, only octave-cli.\n\nNo point. See above.\n\n> As well, could you please check that octave-cli does not launch GUI for you.\n\n\nIt does not.\n\nHTH...\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/181974fc49f77a5f15451fae69fcd17cb10c1742\">181974f</a></td><td><code>Merge branch 'public/21135' of git://trac.sagemath.org/sage into octafix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1713d749ed0de36dc2ead83cfdb2b9a4ca2c000d\">1713d74</a></td><td><code>removed unused prompt and unneeded option</code></td></tr></table>\n",
    "created_at": "2016-08-19T15:31:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310650",
    "user": "https://github.com/EmmanuelCharpentier"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@dimpase](#comment%3A39):
> Replying to [@EmmanuelCharpentier](#comment%3A38):
> 
> I can only conjecture that you have not pulled the right branch, `public/21135` before running your tests.

I have ***NOT*** pulled #21135 : my diff was against the current (pristine (unmodified)) 7.4beta1. My point was that a four-letters patch was enough to solve my current difficulty (i. e. breaking something that used to work), and that the other proposed modificatins (which aim at *enhancing* something that used to work) are a ***separate*** issue...

> Could you please re-check? The change you proposed is equivalent to the branch in the sense that no octave is called, only octave-cli.

No point. See above.

> As well, could you please check that octave-cli does not launch GUI for you.


It does not.

HTH...

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/181974fc49f77a5f15451fae69fcd17cb10c1742">181974f</a></td><td><code>Merge branch 'public/21135' of git://trac.sagemath.org/sage into octafix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1713d749ed0de36dc2ead83cfdb2b9a4ca2c000d">1713d74</a></td><td><code>removed unused prompt and unneeded option</code></td></tr></table>




---

archive/issue_comments_310651.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nwell, let's go with the review then!\nI left the new version function in, just in case. It does no harm.",
    "created_at": "2016-08-19T15:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310651",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:42" align="right">Comment 42</div>

well, let's go with the review then!
I left the new version function in, just in case. It does no harm.



---

archive/issue_events_279287.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-19T15:39:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279287"
}
```



---

archive/issue_events_279288.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-19T15:39:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279288"
}
```



---

archive/issue_comments_310652.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nReplying to [@EmmanuelCharpentier](#comment%3A41):\n> Replying to [@dimpase](#comment%3A39):\n> > Replying to [@EmmanuelCharpentier](#comment%3A38):\n> > \n> > I can only conjecture that you have not pulled the right branch, `public/21135` before running your tests.\n\n> \n> I have ***NOT*** pulled #21135 : my diff was against the current (pristine (unmodified)) 7.4beta1. My point was that a four-letters patch was enough to solve my current difficulty (i. e. breaking something that used to work), and that the other proposed modificatins (which aim at *enhancing* something that used to work) are a ***separate*** issue... \n\nMy apologies, I thought you were saying that you tried this branch and it didn't work. I'm very stressed today, in a bad way...",
    "created_at": "2016-08-19T15:54:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310652",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:43" align="right">Comment 43</div>

Replying to [@EmmanuelCharpentier](#comment%3A41):
> Replying to [@dimpase](#comment%3A39):
> > Replying to [@EmmanuelCharpentier](#comment%3A38):
> > 
> > I can only conjecture that you have not pulled the right branch, `public/21135` before running your tests.

> 
> I have ***NOT*** pulled #21135 : my diff was against the current (pristine (unmodified)) 7.4beta1. My point was that a four-letters patch was enough to solve my current difficulty (i. e. breaking something that used to work), and that the other proposed modificatins (which aim at *enhancing* something that used to work) are a ***separate*** issue... 

My apologies, I thought you were saying that you tried this branch and it didn't work. I'm very stressed today, in a bad way...



---

archive/issue_events_279289.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-19T16:56:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279289"
}
```



---

archive/issue_events_279290.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-19T16:56:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279290"
}
```



---

archive/issue_comments_310653.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nYou did not address [comment:35](#comment%3A35). And there is no need to check for the version in `__init__`.",
    "created_at": "2016-08-19T16:56:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310653",
    "user": "https://github.com/videlec"
}
```

<div id="comment:44" align="right">Comment 44</div>

You did not address [comment:35](#comment%3A35). And there is no need to check for the version in `__init__`.



---

archive/issue_comments_310654.json:
```json
{
    "body": "Changed commit from **[1713d74](https://github.com/sagemath/sagetrac-mirror/commit/1713d749ed0de36dc2ead83cfdb2b9a4ca2c000d)** to **[d9be1de](https://github.com/sagemath/sagetrac-mirror/commit/d9be1de1bd63dd0bf2aa1a9cf4e47f69c5e2194c)**",
    "created_at": "2016-08-19T19:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310654",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1713d74](https://github.com/sagemath/sagetrac-mirror/commit/1713d749ed0de36dc2ead83cfdb2b9a4ca2c000d)** to **[d9be1de](https://github.com/sagemath/sagetrac-mirror/commit/d9be1de1bd63dd0bf2aa1a9cf4e47f69c5e2194c)**



---

archive/issue_comments_310655.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9be1de1bd63dd0bf2aa1a9cf4e47f69c5e2194c\">d9be1de</a></td><td><code>removed unused prompt and unneeded option (improved)</code></td></tr></table>\n",
    "created_at": "2016-08-19T19:48:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310655",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:45" align="right">Comment 45</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9be1de1bd63dd0bf2aa1a9cf4e47f69c5e2194c">d9be1de</a></td><td><code>removed unused prompt and unneeded option (improved)</code></td></tr></table>




---

archive/issue_comments_310656.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">Comment 46</div>\n\nOK, sorry for being unable to see that in \n\n```\nif A:\n   foo\nif B:\n   xfoo\n```\none has `foo==foo`... Duh. Fixed.",
    "created_at": "2016-08-19T19:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310656",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:46" align="right">Comment 46</div>

OK, sorry for being unable to see that in 

```
if A:
   foo
if B:
   xfoo
```
one has `foo==foo`... Duh. Fixed.



---

archive/issue_events_279291.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-19T19:50:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279291"
}
```



---

archive/issue_events_279292.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-19T19:50:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279292"
}
```



---

archive/issue_comments_310657.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">Comment 47</div>\n\nCould you remove the function `get_octave_version` that was introduced in my first commit completely?",
    "created_at": "2016-08-19T19:53:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310657",
    "user": "https://github.com/videlec"
}
```

<div id="comment:47" align="right">Comment 47</div>

Could you remove the function `get_octave_version` that was introduced in my first commit completely?



---

archive/issue_comments_310658.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\n(it is fine to keep `octave_version` with the deprecation introduced in the same commit)",
    "created_at": "2016-08-19T19:54:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310658",
    "user": "https://github.com/videlec"
}
```

<div id="comment:48" align="right">Comment 48</div>

(it is fine to keep `octave_version` with the deprecation introduced in the same commit)



---

archive/issue_comments_310659.json:
```json
{
    "body": "Changed commit from **[d9be1de](https://github.com/sagemath/sagetrac-mirror/commit/d9be1de1bd63dd0bf2aa1a9cf4e47f69c5e2194c)** to **[fb30497](https://github.com/sagemath/sagetrac-mirror/commit/fb30497f15445323af55b7e0579861fe48d7886a)**",
    "created_at": "2016-08-19T20:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310659",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[d9be1de](https://github.com/sagemath/sagetrac-mirror/commit/d9be1de1bd63dd0bf2aa1a9cf4e47f69c5e2194c)** to **[fb30497](https://github.com/sagemath/sagetrac-mirror/commit/fb30497f15445323af55b7e0579861fe48d7886a)**



---

archive/issue_comments_310660.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">Comment 49</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fb30497f15445323af55b7e0579861fe48d7886a\">fb30497</a></td><td><code>removed unused prompt and unneeded option (improved x 2)</code></td></tr></table>\n",
    "created_at": "2016-08-19T20:02:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310660",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:49" align="right">Comment 49</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fb30497f15445323af55b7e0579861fe48d7886a">fb30497</a></td><td><code>removed unused prompt and unneeded option (improved x 2)</code></td></tr></table>




---

archive/issue_comments_310661.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">Comment 50</div>\n\ndone.",
    "created_at": "2016-08-19T20:03:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310661",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">Comment 50</div>

done.



---

archive/issue_comments_310662.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">Comment 51</div>\n\nall right. I am testing it.",
    "created_at": "2016-08-19T20:06:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310662",
    "user": "https://github.com/videlec"
}
```

<div id="comment:51" align="right">Comment 51</div>

all right. I am testing it.



---

archive/issue_comments_310663.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">Comment 52</div>\n\nto make it cleaner, I would remove\n\n```\noptions = \" --no-line-editing --silent\"\n```\nand change\n\n```\ncommand = command + options + \" --eval 'PS2(PS1());more off' --persist\",\n```\nto\n\n```\ncommand = command + \" --no-line-editing --silent--eval 'PS2(PS1());more off' --persist\",\n```",
    "created_at": "2016-08-19T20:10:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310663",
    "user": "https://github.com/videlec"
}
```

<div id="comment:52" align="right">Comment 52</div>

to make it cleaner, I would remove

```
options = " --no-line-editing --silent"
```
and change

```
command = command + options + " --eval 'PS2(PS1());more off' --persist",
```
to

```
command = command + " --no-line-editing --silent--eval 'PS2(PS1());more off' --persist",
```



---

archive/issue_comments_310664.json:
```json
{
    "body": "Changed commit from **[fb30497](https://github.com/sagemath/sagetrac-mirror/commit/fb30497f15445323af55b7e0579861fe48d7886a)** to **[1ed88ae](https://github.com/sagemath/sagetrac-mirror/commit/1ed88aef15cae31754965a9a6eb2de55667ca5c4)**",
    "created_at": "2016-08-19T20:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310664",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[fb30497](https://github.com/sagemath/sagetrac-mirror/commit/fb30497f15445323af55b7e0579861fe48d7886a)** to **[1ed88ae](https://github.com/sagemath/sagetrac-mirror/commit/1ed88aef15cae31754965a9a6eb2de55667ca5c4)**



---

archive/issue_comments_310665.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">Comment 53</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1ed88aef15cae31754965a9a6eb2de55667ca5c4\">1ed88ae</a></td><td><code>removed unused prompt and unneeded option (improved x 3)</code></td></tr></table>\n",
    "created_at": "2016-08-19T20:21:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310665",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53" align="right">Comment 53</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1ed88aef15cae31754965a9a6eb2de55667ca5c4">1ed88ae</a></td><td><code>removed unused prompt and unneeded option (improved x 3)</code></td></tr></table>




---

archive/issue_comments_310666.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">Comment 54</div>\n\nok.",
    "created_at": "2016-08-19T20:22:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310666",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:54" align="right">Comment 54</div>

ok.



---

archive/issue_comments_310667.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">Comment 55</div>\n\noctave process leave some annoying \"octave-workspace\" file. Would be cool to get rid of that when exiting octave. (Though not for this ticket)",
    "created_at": "2016-08-19T20:27:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310667",
    "user": "https://github.com/videlec"
}
```

<div id="comment:55" align="right">Comment 55</div>

octave process leave some annoying "octave-workspace" file. Would be cool to get rid of that when exiting octave. (Though not for this ticket)



---

archive/issue_comments_310668.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2016-08-19T20:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310668",
    "user": "https://github.com/videlec"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_310669.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">Comment 56</div>\n\nThanks!",
    "created_at": "2016-08-19T20:30:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310669",
    "user": "https://github.com/videlec"
}
```

<div id="comment:56" align="right">Comment 56</div>

Thanks!



---

archive/issue_events_279293.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-19T20:30:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279293"
}
```



---

archive/issue_events_279294.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-19T20:30:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279294"
}
```



---

archive/issue_comments_310670.json:
```json
{
    "body": "Changed branch from **[public/21135](https://github.com/sagemath/sagetrac-mirror/tree/public/21135)** to **[1ed88ae](https://github.com/sagemath/sagetrac-mirror/commit/1ed88aef15cae31754965a9a6eb2de55667ca5c4)**",
    "created_at": "2016-08-21T13:13:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21135#issuecomment-310670",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/21135](https://github.com/sagemath/sagetrac-mirror/tree/public/21135)** to **[1ed88ae](https://github.com/sagemath/sagetrac-mirror/commit/1ed88aef15cae31754965a9a6eb2de55667ca5c4)**



---

archive/issue_events_279295.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-21T13:13:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279295"
}
```



---

archive/issue_events_279296.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "b45a57531538676199afe15a410183cc9f600bfe",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-08-21T13:13:52Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21135",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21135#event-279296"
}
```
