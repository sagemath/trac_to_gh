# Issue 21349: build verbose upon Python's logging module

archive/issues_021112.json:
```json
{
    "body": "Make SageMath's verbosity system use Python's logging module and explain how to use (basic) logging in SageMath.\n\nSee the discussion on https://groups.google.com/d/msg/sage-devel/TYjZcAg9uT0/Ym-H6KmNAAAJ\n\nCC:  @mkoeppe @williamstein @novoselt @jdemeyer\n\nWork_Issues: rebase on top of #29895; jupyter notebooks\n\nAuthor: Daniel Krenn\n\nBranch: u/mkoeppe/verbose-logger\n\nStatus: needs_work\n\nDependencies: #22125, #29895\n\nCommit: c99238f0a0edc870d13a002c4eb9d08887b1f27f\n\nIssue created by migration from https://trac.sagemath.org/ticket/21349\n\n",
    "created_at": "2016-08-26T17:18:00Z",
    "labels": [
        "component: misc"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.8",
    "title": "build verbose upon Python's logging module",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21349",
    "user": "https://github.com/dkrenn"
}
```
Make SageMath's verbosity system use Python's logging module and explain how to use (basic) logging in SageMath.

See the discussion on https://groups.google.com/d/msg/sage-devel/TYjZcAg9uT0/Ym-H6KmNAAAJ

CC:  @mkoeppe @williamstein @novoselt @jdemeyer

Work_Issues: rebase on top of #29895; jupyter notebooks

Author: Daniel Krenn

Branch: u/mkoeppe/verbose-logger

Status: needs_work

Dependencies: #22125, #29895

Commit: c99238f0a0edc870d13a002c4eb9d08887b1f27f

Issue created by migration from https://trac.sagemath.org/ticket/21349





---

archive/issue_comments_392383.json:
```json
{
    "body": "Changing branch from \"\" to \"u/dkrenn/verbose-logger\"",
    "created_at": "2016-08-26T17:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392383",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "" to "u/dkrenn/verbose-logger"



---

archive/issue_comments_392384.json:
```json
{
    "body": "Changing work_issues from \"\" to \"use sage.misc.verbose.verbose everywhere\"",
    "created_at": "2016-08-26T17:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392384",
    "user": "https://github.com/dkrenn"
}
```

Changing work_issues from "" to "use sage.misc.verbose.verbose everywhere"



---

archive/issue_comments_392385.json:
```json
{
    "body": "<a id='comment:2'></a>The current branch provides the new functionality and gives a short \"howto\" use Python's logging module.\n\nWhat is left: Update the whole Sage-library to use the new sage.misc.verbose.verbose (it's syntax compatible).\n\nOld sage.misc.misc.verbose is deprecated. Once the deprecation period is over, we can switch to sage.misc.verbose.* in the global name space.\n\n---\nNew commits:",
    "created_at": "2016-08-26T17:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392385",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:2'></a>The current branch provides the new functionality and gives a short "howto" use Python's logging module.

What is left: Update the whole Sage-library to use the new sage.misc.verbose.verbose (it's syntax compatible).

Old sage.misc.misc.verbose is deprecated. Once the deprecation period is over, we can switch to sage.misc.verbose.* in the global name space.

---
New commits:



---

archive/issue_comments_392386.json:
```json
{
    "body": "Changing commit from \"\" to \"5ae309b38b213d3c7a9f3e0c01ccd09ca1163f51\"",
    "created_at": "2016-08-26T17:25:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392386",
    "user": "https://github.com/dkrenn"
}
```

Changing commit from "" to "5ae309b38b213d3c7a9f3e0c01ccd09ca1163f51"



---

archive/issue_comments_392387.json:
```json
{
    "body": "<a id='comment:3'></a>Is this related to #17815?",
    "created_at": "2016-08-26T17:50:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392387",
    "user": "https://github.com/a-andre"
}
```

<a id='comment:3'></a>Is this related to #17815?



---

archive/issue_comments_392388.json:
```json
{
    "body": "<a id='comment:5'></a>This needs testing in SageMathCloud and in the notebook.\nA while back, when using Python logging in SMC, I noticed that log messages would end up in the wrong cell (where the logger was initialized). At the time I wrote a (hackish) workaround for my project: https://github.com/mkoeppe/infinite-group-relaxation-code/blob/master/logging.sage",
    "created_at": "2016-08-28T10:49:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392388",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:5'></a>This needs testing in SageMathCloud and in the notebook.
A while back, when using Python logging in SMC, I noticed that log messages would end up in the wrong cell (where the logger was initialized). At the time I wrote a (hackish) workaround for my project: https://github.com/mkoeppe/infinite-group-relaxation-code/blob/master/logging.sage



---

archive/issue_comments_392389.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:3 aapitzsch]:\n> Is this related to #17815?\n\n\nKind of. #17815 means that the following part of [comment:2 dkrenn] is skipped (which is fine for me):\n> Old sage.misc.misc.verbose is deprecated. Once the deprecation period is over, we can switch to sage.misc.verbose.* in the global name space.",
    "created_at": "2016-08-29T13:50:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392389",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:7'></a>Replying to [comment:3 aapitzsch]:
> Is this related to #17815?


Kind of. #17815 means that the following part of [comment:2 dkrenn] is skipped (which is fine for me):
> Old sage.misc.misc.verbose is deprecated. Once the deprecation period is over, we can switch to sage.misc.verbose.* in the global name space.



---

archive/issue_comments_392390.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-29T15:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392390",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_392391.json:
```json
{
    "body": "Changing commit from \"5ae309b38b213d3c7a9f3e0c01ccd09ca1163f51\" to \"49639fb9dcbc4009a78fb345bcc25cdb72f64c21\"",
    "created_at": "2016-08-29T15:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392391",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "5ae309b38b213d3c7a9f3e0c01ccd09ca1163f51" to "49639fb9dcbc4009a78fb345bcc25cdb72f64c21"



---

archive/issue_comments_392392.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-30T09:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392392",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_392393.json:
```json
{
    "body": "Changing commit from \"49639fb9dcbc4009a78fb345bcc25cdb72f64c21\" to \"30e067bbdd65228758bba923a9c7566e9a35ebe4\"",
    "created_at": "2016-08-30T09:15:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392393",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "49639fb9dcbc4009a78fb345bcc25cdb72f64c21" to "30e067bbdd65228758bba923a9c7566e9a35ebe4"



---

archive/issue_comments_392394.json:
```json
{
    "body": "Changing work_issues from \"use sage.misc.verbose.verbose everywhere\" to \"\"",
    "created_at": "2016-08-30T09:24:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392394",
    "user": "https://github.com/dkrenn"
}
```

Changing work_issues from "use sage.misc.verbose.verbose everywhere" to ""



---

archive/issue_comments_392395.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-30T10:59:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392395",
    "user": "https://github.com/dkrenn"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_392396.json:
```json
{
    "body": "<a id='comment:12'></a>If this is meant as a replacement for the current 'verbose' system, shouldn't Sage (the application) initialize the logger?\nAlso see comment 5.",
    "created_at": "2016-08-31T14:36:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392396",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:12'></a>If this is meant as a replacement for the current 'verbose' system, shouldn't Sage (the application) initialize the logger?
Also see comment 5.



---

archive/issue_comments_392397.json:
```json
{
    "body": "<a id='comment:13'></a>Thanks for working on this!\n\nA quick suggestion (unfortunately, I don't have time for reviewing the code right now): what would you think of adding a semi-standard logging level (say `HINT` to follow Maple's terminology) between `logging.WARNING` and `logging.INFO`? The idea is that `HINT` messages would be similar to `INFO` messages, but *on by default* under the Sage shell/notebook, and could be used (sparingly!) for things that aren't quite warnings but that the user ought to know when using sage interactively (\u201ctry this instead\u201d when returning a probably useless result, for instance).\n\nOn a related note, are you sure that you want to keep exposing and documenting Sage's legacy verbosity levels, instead of just supporting them for compatibility but encouraging everyone to switch to standard `logging` levels?",
    "created_at": "2016-09-01T13:13:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392397",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:13'></a>Thanks for working on this!

A quick suggestion (unfortunately, I don't have time for reviewing the code right now): what would you think of adding a semi-standard logging level (say `HINT` to follow Maple's terminology) between `logging.WARNING` and `logging.INFO`? The idea is that `HINT` messages would be similar to `INFO` messages, but *on by default* under the Sage shell/notebook, and could be used (sparingly!) for things that aren't quite warnings but that the user ought to know when using sage interactively (“try this instead” when returning a probably useless result, for instance).

On a related note, are you sure that you want to keep exposing and documenting Sage's legacy verbosity levels, instead of just supporting them for compatibility but encouraging everyone to switch to standard `logging` levels?



---

archive/issue_comments_392398.json:
```json
{
    "body": "Changing commit from \"30e067bbdd65228758bba923a9c7566e9a35ebe4\" to \"96da863725e42bc095475b12f7a5fc79ff3b1c6a\"",
    "created_at": "2016-09-02T14:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392398",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "30e067bbdd65228758bba923a9c7566e9a35ebe4" to "96da863725e42bc095475b12f7a5fc79ff3b1c6a"



---

archive/issue_comments_392399.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-02T14:47:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392399",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_392400.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:12 mkoeppe]:\n> If this is meant as a replacement for the current 'verbose' system, shouldn't Sage (the application) initialize the logger?\n\n\nDone.",
    "created_at": "2016-09-02T14:48:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392400",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:15'></a>Replying to [comment:12 mkoeppe]:
> If this is meant as a replacement for the current 'verbose' system, shouldn't Sage (the application) initialize the logger?


Done.



---

archive/issue_comments_392401.json:
```json
{
    "body": "<a id='comment:16'></a>Replying to [comment:13 mmezzarobba]:\n> A quick suggestion (unfortunately, I don't have time for reviewing the code right now): what would you think of adding a semi-standard logging level (say `HINT` to follow Maple's terminology) between `logging.WARNING` and `logging.INFO`? The idea is that `HINT` messages would be similar to `INFO` messages, but *on by default* under the Sage shell/notebook, and could be used (sparingly!) for things that aren't quite warnings but that the user ought to know when using sage interactively (\u201ctry this instead\u201d when returning a probably useless result, for instance).\n\n\nIs fine for me; I suggest to put this on a follow-up ticket.",
    "created_at": "2016-09-02T14:49:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392401",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:16'></a>Replying to [comment:13 mmezzarobba]:
> A quick suggestion (unfortunately, I don't have time for reviewing the code right now): what would you think of adding a semi-standard logging level (say `HINT` to follow Maple's terminology) between `logging.WARNING` and `logging.INFO`? The idea is that `HINT` messages would be similar to `INFO` messages, but *on by default* under the Sage shell/notebook, and could be used (sparingly!) for things that aren't quite warnings but that the user ought to know when using sage interactively (“try this instead” when returning a probably useless result, for instance).


Is fine for me; I suggest to put this on a follow-up ticket.



---

archive/issue_comments_392402.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:13 mmezzarobba]:\n> On a related note, are you sure that you want to keep exposing and documenting Sage's legacy verbosity levels, instead of just supporting them for compatibility but encouraging everyone to switch to standard `logging` levels?\n\n\nOk (I think I agree); changed.",
    "created_at": "2016-09-02T14:49:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392402",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:17'></a>Replying to [comment:13 mmezzarobba]:
> On a related note, are you sure that you want to keep exposing and documenting Sage's legacy verbosity levels, instead of just supporting them for compatibility but encouraging everyone to switch to standard `logging` levels?


Ok (I think I agree); changed.



---

archive/issue_comments_392403.json:
```json
{
    "body": "<a id='comment:18'></a>Replying to [comment:5 mkoeppe]:\n> This needs testing in SageMathCloud and in the notebook.\n\n\nNo idea what to do here...",
    "created_at": "2016-09-02T14:55:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392403",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:18'></a>Replying to [comment:5 mkoeppe]:
> This needs testing in SageMathCloud and in the notebook.


No idea what to do here...



---

archive/issue_comments_392404.json:
```json
{
    "body": "Changing commit from \"96da863725e42bc095475b12f7a5fc79ff3b1c6a\" to \"d79caa22837a30727e58dec7b41092c6107b5a96\"",
    "created_at": "2016-09-02T15:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392404",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "96da863725e42bc095475b12f7a5fc79ff3b1c6a" to "d79caa22837a30727e58dec7b41092c6107b5a96"



---

archive/issue_comments_392405.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-09-02T15:02:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392405",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_392406.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:18 dkrenn]:\n> Replying to [comment:5 mkoeppe]:\n> > This needs testing in SageMathCloud and in the notebook.\n\n> \n> No idea what to do here...\n\n\nFor SageMathCloud: https://github.com/sagemathinc/smc/wiki/SageMath-Development-on-SageMathCloud",
    "created_at": "2016-09-03T23:14:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392406",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:20'></a>Replying to [comment:18 dkrenn]:
> Replying to [comment:5 mkoeppe]:
> > This needs testing in SageMathCloud and in the notebook.

> 
> No idea what to do here...


For SageMathCloud: https://github.com/sagemathinc/smc/wiki/SageMath-Development-on-SageMathCloud



---

archive/issue_comments_392407.json:
```json
{
    "body": "<a id='comment:21'></a>I don't see any reason why this would impact SageMathCloud (really just Ubuntu 16.04).  We'll test there when the next beta is released and open a ticket if there are any problems.    (Thanks for being considerate and worrying about testing there.)",
    "created_at": "2016-09-03T23:20:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392407",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:21'></a>I don't see any reason why this would impact SageMathCloud (really just Ubuntu 16.04).  We'll test there when the next beta is released and open a ticket if there are any problems.    (Thanks for being considerate and worrying about testing there.)



---

archive/issue_comments_392408.json:
```json
{
    "body": "<a id='comment:22'></a>Replying to [comment:21 was]:\n> I don't see any reason why this would impact SageMathCloud (really just Ubuntu 16.04).  We'll test there when the next beta is released and open a ticket if there are any problems.    (Thanks for being considerate and worrying about testing there.)\n\n\nIt's not about the OS. \nPython's logging, or rather the way that this patch intends to use it to replace the verbose facility, \"does not work\" in SageMathCloud. Try this example, from the patch on this ticket, in SMC.\n\n```\n+    sage: import logging\n+    sage: logging.basicConfig()\n+\n+Setting the level::\n+\n+    sage: logging.getLogger().setLevel(logging.INFO)\n+\n+Log something::\n+\n+    sage: logger = logging.getLogger(__name__)\n+    sage: logger.info('Hello. I am talking to you.')\n+    INFO:__main__:Hello. I am talking to you.\n```\nSee comment 5 for more info",
    "created_at": "2016-09-03T23:48:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392408",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>Replying to [comment:21 was]:
> I don't see any reason why this would impact SageMathCloud (really just Ubuntu 16.04).  We'll test there when the next beta is released and open a ticket if there are any problems.    (Thanks for being considerate and worrying about testing there.)


It's not about the OS. 
Python's logging, or rather the way that this patch intends to use it to replace the verbose facility, "does not work" in SageMathCloud. Try this example, from the patch on this ticket, in SMC.

```
+    sage: import logging
+    sage: logging.basicConfig()
+
+Setting the level::
+
+    sage: logging.getLogger().setLevel(logging.INFO)
+
+Log something::
+
+    sage: logger = logging.getLogger(__name__)
+    sage: logger.info('Hello. I am talking to you.')
+    INFO:__main__:Hello. I am talking to you.
```
See comment 5 for more info



---

archive/issue_comments_392409.json:
```json
{
    "body": "<a id='comment:23'></a>I see -- the logger must not use sys.stdout (or sys.stderr).  Argh.   Does this fully work with Jupyter?  Does jupyter do something special to deal with this.",
    "created_at": "2016-09-04T00:03:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392409",
    "user": "https://github.com/williamstein"
}
```

<a id='comment:23'></a>I see -- the logger must not use sys.stdout (or sys.stderr).  Argh.   Does this fully work with Jupyter?  Does jupyter do something special to deal with this.



---

archive/issue_comments_392410.json:
```json
{
    "body": "<a id='comment:24'></a>Replying to [comment:23 was]:\n> I see -- the logger must not use sys.stdout (or sys.stderr).  Argh.   Does this fully work with Jupyter?  Does jupyter do something special to deal with this.\n\nI don't know. I have only tested logging in the ipython shell, the sage notebook and SMC.",
    "created_at": "2016-09-04T00:06:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392410",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>Replying to [comment:23 was]:
> I see -- the logger must not use sys.stdout (or sys.stderr).  Argh.   Does this fully work with Jupyter?  Does jupyter do something special to deal with this.

I don't know. I have only tested logging in the ipython shell, the sage notebook and SMC.



---

archive/issue_comments_392411.json:
```json
{
    "body": "<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:\n> Replying to [comment:23 was]:\n> > I see -- the logger must not use sys.stdout (or sys.stderr).  Argh.   Does this fully work with Jupyter?  Does jupyter do something special to deal with this.\n\n\nWhen using a Jupyter notebook (using `sage --notebook=jupyter`), the log messages end up in the terminal rather than in the notebook:\n\n```\n[I 19:24:29.026 NotebookApp] Kernel started: 6f4e0b9a-ad72-4147-99c6-f9dae1282fda\nINFO:__main__:Hello. I am talking to you.\n```",
    "created_at": "2016-09-04T02:27:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392411",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:25'></a>Replying to [comment:24 mkoeppe]:
> Replying to [comment:23 was]:
> > I see -- the logger must not use sys.stdout (or sys.stderr).  Argh.   Does this fully work with Jupyter?  Does jupyter do something special to deal with this.


When using a Jupyter notebook (using `sage --notebook=jupyter`), the log messages end up in the terminal rather than in the notebook:

```
[I 19:24:29.026 NotebookApp] Kernel started: 6f4e0b9a-ad72-4147-99c6-f9dae1282fda
INFO:__main__:Hello. I am talking to you.
```



---

archive/issue_comments_392412.json:
```json
{
    "body": "Changing work_issues from \"\" to \"jupyter notebooks\"",
    "created_at": "2016-09-04T02:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392412",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "" to "jupyter notebooks"



---

archive/issue_comments_392413.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-04T02:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392413",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_392414.json:
```json
{
    "body": "<a id='comment:27'></a>Likewise in [SageMathCell](SageMathCell) (http://sagecell.sagemath.org/).",
    "created_at": "2016-09-08T18:10:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392414",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>Likewise in [SageMathCell](SageMathCell) (http://sagecell.sagemath.org/).



---

archive/issue_comments_392415.json:
```json
{
    "body": "<a id='comment:28'></a>Replying to [comment:25 mkoeppe]:\n> Replying to [comment:24 mkoeppe]:\n> > Replying to [comment:23 was]:\n> > > I see -- the logger must not use sys.stdout (or sys.stderr).  Argh.   Does this fully work with Jupyter?  Does jupyter do something special to deal with this.\n\n> \n> When using a Jupyter notebook (using `sage --notebook=jupyter`), the log messages end up in the terminal rather than in the notebook:\n> \n> ```\n> [I 19:24:29.026 NotebookApp] Kernel started: 6f4e0b9a-ad72-4147-99c6-f9dae1282fda\n> INFO:__main__:Hello. I am talking to you.\n> ```\n\n\nDoes anyone know how to fix this?",
    "created_at": "2016-09-08T19:05:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392415",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:28'></a>Replying to [comment:25 mkoeppe]:
> Replying to [comment:24 mkoeppe]:
> > Replying to [comment:23 was]:
> > > I see -- the logger must not use sys.stdout (or sys.stderr).  Argh.   Does this fully work with Jupyter?  Does jupyter do something special to deal with this.

> 
> When using a Jupyter notebook (using `sage --notebook=jupyter`), the log messages end up in the terminal rather than in the notebook:
> 
> ```
> [I 19:24:29.026 NotebookApp] Kernel started: 6f4e0b9a-ad72-4147-99c6-f9dae1282fda
> INFO:__main__:Hello. I am talking to you.
> ```


Does anyone know how to fix this?



---

archive/issue_comments_392416.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:28 dkrenn]:\n> Does anyone know how to fix this?\n\n\nSee the link in comment 5.",
    "created_at": "2016-09-08T19:11:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392416",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:29'></a>Replying to [comment:28 dkrenn]:
> Does anyone know how to fix this?


See the link in comment 5.



---

archive/issue_comments_392417.json:
```json
{
    "body": "<a id='comment:30'></a>Replying to [comment:29 mkoeppe]:\n> Replying to [comment:28 dkrenn]:\n> > Does anyone know how to fix this?\n\n> \n> See the link in comment 5.\n\n\nYes, I've looked at this before. Can you (or someone else who is knowing something about these stream handlers) include the relevant part(s) of code here in the branch on this ticket?",
    "created_at": "2016-09-08T19:21:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392417",
    "user": "https://github.com/dkrenn"
}
```

<a id='comment:30'></a>Replying to [comment:29 mkoeppe]:
> Replying to [comment:28 dkrenn]:
> > Does anyone know how to fix this?

> 
> See the link in comment 5.


Yes, I've looked at this before. Can you (or someone else who is knowing something about these stream handlers) include the relevant part(s) of code here in the branch on this ticket?



---

archive/issue_comments_392418.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/verbose-logger\" to \"u/mkoeppe/verbose-logger\"",
    "created_at": "2016-09-08T20:23:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392418",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/dkrenn/verbose-logger" to "u/mkoeppe/verbose-logger"



---

archive/issue_comments_392419.json:
```json
{
    "body": "Changing commit from \"d79caa22837a30727e58dec7b41092c6107b5a96\" to \"5ed1e442b64115a747ab90881e615d5246994278\"",
    "created_at": "2016-09-08T20:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392419",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "d79caa22837a30727e58dec7b41092c6107b5a96" to "5ed1e442b64115a747ab90881e615d5246994278"



---

archive/issue_comments_392420.json:
```json
{
    "body": "<a id='comment:32'></a>Replying to [comment:30 dkrenn]:\n>  Can you (or someone else who is knowing something about these stream handlers) include the relevant part(s) of code here in the branch on this ticket?\n\n\nI've added something based on that code.\nDoesn't work yet with the Jupyter notebook, either because there's already a handler installed when `basic_sage_logging_config` is called or something overrides it later. This needs investigating\n\n---\nNew commits:",
    "created_at": "2016-09-08T20:25:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392420",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>Replying to [comment:30 dkrenn]:
>  Can you (or someone else who is knowing something about these stream handlers) include the relevant part(s) of code here in the branch on this ticket?


I've added something based on that code.
Doesn't work yet with the Jupyter notebook, either because there's already a handler installed when `basic_sage_logging_config` is called or something overrides it later. This needs investigating

---
New commits:



---

archive/issue_comments_392421.json:
```json
{
    "body": "<a id='comment:33'></a>About SageMathCell - logging is already used there with the relevant file https://github.com/sagemath/sagecell/blob/master/log.py\n\nI don't recall much detail by now, but when I was making things work the problem was that IPython and tornado are trying to install their own loggers as well and perform global initialization if they don't detect one present. Listing all loggers/handlers after startup in a particular environment may be helpful to figuring out what to do.",
    "created_at": "2016-09-09T01:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392421",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:33'></a>About SageMathCell - logging is already used there with the relevant file https://github.com/sagemath/sagecell/blob/master/log.py

I don't recall much detail by now, but when I was making things work the problem was that IPython and tornado are trying to install their own loggers as well and perform global initialization if they don't detect one present. Listing all loggers/handlers after startup in a particular environment may be helpful to figuring out what to do.



---

archive/issue_comments_392422.json:
```json
{
    "body": "Changing branch from \"u/mkoeppe/verbose-logger\" to \"u/dkrenn/verbose-logger\"",
    "created_at": "2016-11-24T18:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392422",
    "user": "https://github.com/dkrenn"
}
```

Changing branch from "u/mkoeppe/verbose-logger" to "u/dkrenn/verbose-logger"



---

archive/issue_comments_392423.json:
```json
{
    "body": "<a id='comment:35'></a>Related: https://github.com/ipython/ipykernel/issues/111\n\n---\nNew commits:",
    "created_at": "2017-01-11T00:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392423",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:35'></a>Related: https://github.com/ipython/ipykernel/issues/111

---
New commits:



---

archive/issue_comments_392424.json:
```json
{
    "body": "Changing commit from \"5ed1e442b64115a747ab90881e615d5246994278\" to \"de54c71b85a679b278a4caf36e6331c89eccf187\"",
    "created_at": "2017-01-11T00:24:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392424",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "5ed1e442b64115a747ab90881e615d5246994278" to "de54c71b85a679b278a4caf36e6331c89eccf187"



---

archive/issue_events_056797.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-01-11T00:34:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56797"
}
```



---

archive/issue_comments_392425.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#22125\"",
    "created_at": "2017-01-11T00:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392425",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "" to "#22125"



---

archive/issue_comments_392426.json:
```json
{
    "body": "<a id='comment:36'></a>The upstream fix for the logging problem in Jupyter notebooks appears to be fixed in newer versions of ipykernel. \n#22125 upgrades to 4.5.2, which should be new enough (haven't tested).\nIs it possible to add doctests for this?",
    "created_at": "2017-01-11T00:34:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392426",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>The upstream fix for the logging problem in Jupyter notebooks appears to be fixed in newer versions of ipykernel. 
#22125 upgrades to 4.5.2, which should be new enough (haven't tested).
Is it possible to add doctests for this?



---

archive/issue_events_056798.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-18T18:09:22Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56798"
}
```



---

archive/issue_events_056799.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-06-18T18:09:22Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56799"
}
```



---

archive/issue_comments_392427.json:
```json
{
    "body": "Changing dependencies from \"#22125\" to \"#22125, #29895\"",
    "created_at": "2020-06-18T20:00:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392427",
    "user": "https://github.com/mkoeppe"
}
```

Changing dependencies from "#22125" to "#22125, #29895"



---

archive/issue_comments_392428.json:
```json
{
    "body": "Changing branch from \"u/dkrenn/verbose-logger\" to \"u/mkoeppe/verbose-logger\"",
    "created_at": "2020-06-18T21:09:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392428",
    "user": "https://github.com/mkoeppe"
}
```

Changing branch from "u/dkrenn/verbose-logger" to "u/mkoeppe/verbose-logger"



---

archive/issue_comments_392429.json:
```json
{
    "body": "<a id='comment:40'></a>Pushed a partial rebase of this branch, dropping a few commits that updated imports and tests throughout the sage library. It will be easier to redo them than to try to rebase them.\n\n---\nLast 10 new commits:",
    "created_at": "2020-06-18T21:10:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392429",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:40'></a>Pushed a partial rebase of this branch, dropping a few commits that updated imports and tests throughout the sage library. It will be easier to redo them than to try to rebase them.

---
Last 10 new commits:



---

archive/issue_comments_392430.json:
```json
{
    "body": "Changing commit from \"de54c71b85a679b278a4caf36e6331c89eccf187\" to \"c99238f0a0edc870d13a002c4eb9d08887b1f27f\"",
    "created_at": "2020-06-18T21:10:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392430",
    "user": "https://github.com/mkoeppe"
}
```

Changing commit from "de54c71b85a679b278a4caf36e6331c89eccf187" to "c99238f0a0edc870d13a002c4eb9d08887b1f27f"



---

archive/issue_comments_392431.json:
```json
{
    "body": "Changing work_issues from \"jupyter notebooks\" to \"rebase on top of #29895; jupyter notebooks\"",
    "created_at": "2020-06-19T05:04:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392431",
    "user": "https://github.com/mkoeppe"
}
```

Changing work_issues from "jupyter notebooks" to "rebase on top of #29895; jupyter notebooks"



---

archive/issue_events_056800.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56800"
}
```



---

archive/issue_events_056801.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56801"
}
```



---

archive/issue_comments_392432.json:
```json
{
    "body": "<a id='comment:43'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392432",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:43'></a>Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_056802.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56802"
}
```



---

archive/issue_events_056803.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56803"
}
```



---

archive/issue_comments_392433.json:
```json
{
    "body": "<a id='comment:44'></a>Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21349#issuecomment-392433",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:44'></a>Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_056804.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56804"
}
```



---

archive/issue_events_056805.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56805"
}
```



---

archive/issue_events_056806.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56806"
}
```



---

archive/issue_events_056807.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56807"
}
```



---

archive/issue_events_056808.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56808"
}
```



---

archive/issue_events_056809.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-03-05T00:06:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56809"
}
```



---

archive/issue_events_056810.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56810"
}
```



---

archive/issue_events_056811.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21349",
    "milestone": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21349#event-56811"
}
```
