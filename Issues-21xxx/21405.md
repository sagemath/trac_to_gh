# Issue 21405: Introduce extension of scalars coercion of CombinatorialFreeModules

archive/issues_021168.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nCurrently, `CombinatorialFreeModule` does not allow coercion from another `CombinatorialFreeModule` with the same indices but with a base ring coercion:\n\n```sage\nsage: C = CombinatorialFreeModule(ZZ, Set([1,2]))\nsage: CQ = CombinatorialFreeModule(QQ, Set([1,2]))\nsage: CQ.has_coerce_map_from(C)\nFalse\n```\nIn this ticket, we introduce such a coercion and also implement `C.change_ring(QQ)` (which also makes `C.base_extend(QQ)` work).\n\n\nCC:  @sagetrac-sage-combinat @nthiery @darijgr @fchapoton\n\nComponent: **combinatorics**\n\nKeywords: **combinatorial free module**\n\nAuthor: **Travis Scrimshaw, Matthias Koeppe**\n\nBranch/Commit: **[public/combinat/CFM_base_ring_coercion-21405](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/CFM_base_ring_coercion-21405) @ [`083c680`](https://github.com/sagemath/sagetrac-mirror/commit/083c680990ade93ece1f1bcda3e9c4224685dbca)**\n\nReviewer: **Darij Grinberg**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21405_\n\n",
    "created_at": "2016-09-02T23:11:11Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20review"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Introduce extension of scalars coercion of CombinatorialFreeModules",
    "type": "issue",
    "updated_at": "2023-01-07T01:30:24Z",
    "url": "https://github.com/sagemath/sage/issues/21405",
    "user": "https://github.com/tscrim"
}
```
<div id="comment:0"></div>

Currently, `CombinatorialFreeModule` does not allow coercion from another `CombinatorialFreeModule` with the same indices but with a base ring coercion:

```sage
sage: C = CombinatorialFreeModule(ZZ, Set([1,2]))
sage: CQ = CombinatorialFreeModule(QQ, Set([1,2]))
sage: CQ.has_coerce_map_from(C)
False
```
In this ticket, we introduce such a coercion and also implement `C.change_ring(QQ)` (which also makes `C.base_extend(QQ)` work).


CC:  @sagetrac-sage-combinat @nthiery @darijgr @fchapoton

Component: **combinatorics**

Keywords: **combinatorial free module**

Author: **Travis Scrimshaw, Matthias Koeppe**

Branch/Commit: **[public/combinat/CFM_base_ring_coercion-21405](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/CFM_base_ring_coercion-21405) @ [`083c680`](https://github.com/sagemath/sagetrac-mirror/commit/083c680990ade93ece1f1bcda3e9c4224685dbca)**

Reviewer: **Darij Grinberg**

_Issue created by migration from https://trac.sagemath.org/ticket/21405_





---

archive/issue_events_298055.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-02T23:11:11Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298055"
}
```



---

archive/issue_events_298056.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-02T23:11:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298056"
}
```



---

archive/issue_events_298057.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-02T23:11:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298057"
}
```



---

archive/issue_events_298058.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-02T23:11:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298058"
}
```



---

archive/issue_comments_313281.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAh! That said, your example is backwards. :P",
    "created_at": "2016-09-02T23:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313281",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:1" align="right">comment:1</div>

Ah! That said, your example is backwards. :P



---

archive/issue_comments_313282.json:
```json
{
    "body": "Commit: **[`7906f74`](https://github.com/sagemath/sagetrac-mirror/commit/7906f74d7f66fc339c05eb5b13f8359aa2e55d56)**",
    "created_at": "2016-09-02T23:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313282",
    "user": "https://github.com/tscrim"
}
```

Commit: **[`7906f74`](https://github.com/sagemath/sagetrac-mirror/commit/7906f74d7f66fc339c05eb5b13f8359aa2e55d56)**



---

archive/issue_comments_313283.json:
```json
{
    "body": "Branch: **[public/combinat/CFM_base_ring_coercion-21405](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/CFM_base_ring_coercion-21405)**",
    "created_at": "2016-09-02T23:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313283",
    "user": "https://github.com/tscrim"
}
```

Branch: **[public/combinat/CFM_base_ring_coercion-21405](https://github.com/sagemath/sagetrac-mirror/tree/public/combinat/CFM_base_ring_coercion-21405)**



---

archive/issue_comments_313284.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n ```sage\n sage: C = CombinatorialFreeModule(ZZ, Set([1,2]))\n sage: CQ = CombinatorialFreeModule(QQ, Set([1,2]))\n-sage: C.has_coerce_map_from(CQ)\n+sage: CQ.has_coerce_map_from(C)\n False\n ```\n We plan to introduce such a coercion.\n``````\n",
    "created_at": "2016-09-02T23:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313284",
    "user": "https://github.com/tscrim"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 ```sage
 sage: C = CombinatorialFreeModule(ZZ, Set([1,2]))
 sage: CQ = CombinatorialFreeModule(QQ, Set([1,2]))
-sage: C.has_coerce_map_from(CQ)
+sage: CQ.has_coerce_map_from(C)
 False
 ```
 We plan to introduce such a coercion.
``````




---

archive/issue_events_298059.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-02T23:14:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298059"
}
```



---

archive/issue_comments_313285.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7906f74d7f66fc339c05eb5b13f8359aa2e55d56\"><code>7906f74</code></a></td><td><code>Initial version of introducing coercion of base rings.</code></td></tr></table>\n",
    "created_at": "2016-09-02T23:14:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313285",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7906f74d7f66fc339c05eb5b13f8359aa2e55d56"><code>7906f74</code></a></td><td><code>Initial version of introducing coercion of base rings.</code></td></tr></table>




---

archive/issue_comments_313286.json:
```json
{
    "body": "Changed commit from **[`7906f74`](https://github.com/sagemath/sagetrac-mirror/commit/7906f74d7f66fc339c05eb5b13f8359aa2e55d56)** to **[`286883e`](https://github.com/sagemath/sagetrac-mirror/commit/286883e5880c388fb74bc6c0c63352ad716d5fad)**",
    "created_at": "2016-09-03T03:48:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313286",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7906f74`](https://github.com/sagemath/sagetrac-mirror/commit/7906f74d7f66fc339c05eb5b13f8359aa2e55d56)** to **[`286883e`](https://github.com/sagemath/sagetrac-mirror/commit/286883e5880c388fb74bc6c0c63352ad716d5fad)**



---

archive/issue_comments_313287.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/286883e5880c388fb74bc6c0c63352ad716d5fad\"><code>286883e</code></a></td><td><code>review</code></td></tr></table>\n",
    "created_at": "2016-09-03T03:48:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313287",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/286883e5880c388fb74bc6c0c63352ad716d5fad"><code>286883e</code></a></td><td><code>review</code></td></tr></table>




---

archive/issue_comments_313288.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nSee commit msg. Other than this, LGTM!",
    "created_at": "2016-09-03T03:49:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313288",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:4" align="right">comment:4</div>

See commit msg. Other than this, LGTM!



---

archive/issue_comments_313289.json:
```json
{
    "body": "Reviewer: **Darij Grinberg**",
    "created_at": "2016-09-03T04:26:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313289",
    "user": "https://github.com/darijgr"
}
```

Reviewer: **Darij Grinberg**



---

archive/issue_comments_313290.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNicolas, any comments or concerns? I would like your opinion on this before setting it to a positive review (Darij, I'm happy with your changes).",
    "created_at": "2016-09-03T04:34:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313290",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:6" align="right">comment:6</div>

Nicolas, any comments or concerns? I would like your opinion on this before setting it to a positive review (Darij, I'm happy with your changes).



---

archive/issue_comments_313291.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nHi Travis, Darij,\n\nThanks for investigating this! We definitely want to make it trivial\nfor the user to build the trivial morphism between C and Q, and to set\nit up as conversion or coercion map.\n\nSetting it up as coercion map by default is dangerous. I haven't\ntried, but I believe that, with the current implementation, you could\nget the wrong coercion map while doing things like:\n\n```\n    Sym = SymmetricFunctions(QQ)\n    s = Sym().s(); p = Sym().p()\n    s.an_element() + p.an_element()\n```\n\nProbably the above example actually works because we have a direct\ncoercion implemented between `s` and `p`; but imagine how wrong it\ncould get in other cases. Even a conversion could get dangerous if the\nuser does `p(s.an_element())`.\n\nThat applies also to plain CombinatorialFreeModule: the user may want\nto create several of them modeling e.g. different bases on the same\nabstract vector space, with non trivial canonical morphisms between\nthem.\n\nThe only exception I could see where the user explicitly requests a\ncoercion morphism is if `Q` has been constructed explicitly as\n`C.extend_base_ring()`.\n\nIn general, in case of doubt, I tend to prefer to not set\ncoercion/conversion maps by default, and instead make it easy for\nusers to set them up. It's safer and easier to revert the decision\nlater than the converse.\n\n\nAbout constructing the trivial morphism. This is already fairly easy\nwith `module_morphism`:\n\n```\n    sage: C = CombinatorialFreeModule(ZZ, [1,2,3])\n    sage: Q = CombinatorialFreeModule(QQ, [1,2,3])\n    sage: phi = C.module_morphism(Q.term, codomain=Q)\n    sage: phi(C.an_element())\n    2*B[1] + 2*B[2] + 3*B[3]\n    sage: phi(C.an_element())[3].parent()\n    Rational Field\n```\n\nThis has the merit of being a very flexible idiom.\n\nStill, we may want to improve this:\n\n- Advertise more this feature in the documentation: the idiom is\n  natural once a user has seen it once, but beginners will usually not\n  immediately think about it.\n\n- Further simplify the idiom: in MuPAD, we were detecting that Q.term\n  had Q as codomain, so it was not needed to specify codomain=Q.\n  (I am so much longing for Python 3 where we will finally be able to\n  be explicit about the codomain of functions!).\n\n- Constructing an optimized morphism by detecting that the function is\n  of the form `Q.term`, and building e.g. a `DiagonalModuleMorphism`\n  (see the comment in the code of `DiagonalModuleMorphism` about\n  generalizing to a `mapcoeffs`).\n\nCheers",
    "created_at": "2016-09-03T06:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313291",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:7" align="right">comment:7</div>

Hi Travis, Darij,

Thanks for investigating this! We definitely want to make it trivial
for the user to build the trivial morphism between C and Q, and to set
it up as conversion or coercion map.

Setting it up as coercion map by default is dangerous. I haven't
tried, but I believe that, with the current implementation, you could
get the wrong coercion map while doing things like:

```
    Sym = SymmetricFunctions(QQ)
    s = Sym().s(); p = Sym().p()
    s.an_element() + p.an_element()
```

Probably the above example actually works because we have a direct
coercion implemented between `s` and `p`; but imagine how wrong it
could get in other cases. Even a conversion could get dangerous if the
user does `p(s.an_element())`.

That applies also to plain CombinatorialFreeModule: the user may want
to create several of them modeling e.g. different bases on the same
abstract vector space, with non trivial canonical morphisms between
them.

The only exception I could see where the user explicitly requests a
coercion morphism is if `Q` has been constructed explicitly as
`C.extend_base_ring()`.

In general, in case of doubt, I tend to prefer to not set
coercion/conversion maps by default, and instead make it easy for
users to set them up. It's safer and easier to revert the decision
later than the converse.


About constructing the trivial morphism. This is already fairly easy
with `module_morphism`:

```
    sage: C = CombinatorialFreeModule(ZZ, [1,2,3])
    sage: Q = CombinatorialFreeModule(QQ, [1,2,3])
    sage: phi = C.module_morphism(Q.term, codomain=Q)
    sage: phi(C.an_element())
    2*B[1] + 2*B[2] + 3*B[3]
    sage: phi(C.an_element())[3].parent()
    Rational Field
```

This has the merit of being a very flexible idiom.

Still, we may want to improve this:

- Advertise more this feature in the documentation: the idiom is
  natural once a user has seen it once, but beginners will usually not
  immediately think about it.

- Further simplify the idiom: in MuPAD, we were detecting that Q.term
  had Q as codomain, so it was not needed to specify codomain=Q.
  (I am so much longing for Python 3 where we will finally be able to
  be explicit about the codomain of functions!).

- Constructing an optimized morphism by detecting that the function is
  of the form `Q.term`, and building e.g. a `DiagonalModuleMorphism`
  (see the comment in the code of `DiagonalModuleMorphism` about
  generalizing to a `mapcoeffs`).

Cheers



---

archive/issue_comments_313292.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nOuch. This is bad! Thanks for the `Q.term` trick; it should indeed be better advertised!",
    "created_at": "2016-09-03T16:31:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313292",
    "user": "https://github.com/darijgr"
}
```

<div id="comment:8" align="right">comment:8</div>

Ouch. This is bad! Thanks for the `Q.term` trick; it should indeed be better advertised!



---

archive/issue_events_298060.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2016-09-03T16:31:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298060"
}
```



---

archive/issue_events_298061.json:
```json
{
    "actor": "https://github.com/darijgr",
    "created_at": "2016-09-03T16:31:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298061"
}
```



---

archive/issue_comments_313293.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nYes, that is a good point.\n\nPerhaps a solution would be to implement a functor for extension of scalars (or at least `F_K(X) = K \\otimes_R X`) that would create the corresponding `CombinatorialFreeModule` with the appropriate coercion, taking your idea a bit further. This shouldn't be too hard to get working.\n\nWe might have to fight against (and possibly remove) `UniqueRepresentation` part of `CombinatorialFreeModule` to have everything work.\n\nI also agree that we could specialize this morphism too.",
    "created_at": "2016-09-03T16:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313293",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:9" align="right">comment:9</div>

Yes, that is a good point.

Perhaps a solution would be to implement a functor for extension of scalars (or at least `F_K(X) = K \otimes_R X`) that would create the corresponding `CombinatorialFreeModule` with the appropriate coercion, taking your idea a bit further. This shouldn't be too hard to get working.

We might have to fight against (and possibly remove) `UniqueRepresentation` part of `CombinatorialFreeModule` to have everything work.

I also agree that we could specialize this morphism too.



---

archive/issue_comments_313294.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@tscrim](#comment%3A9):\n> Perhaps a solution would be to implement a functor for extension of scalars (or at least `F_K(X) = K \\otimes_R X`) that would create the corresponding `CombinatorialFreeModule` with the appropriate coercion, taking your idea a bit further. This shouldn't be too hard to get working.\n\nYup. For consistency with FreeModules and polynomial rings, we should use `K.base_extend(R)` and `K.change_ring(R)` for this.\n\n> We might have to fight against (and possibly remove) `UniqueRepresentation` part of `CombinatorialFreeModule` to have everything work.\n\nProbably not a problem; we have a \"key\" argument which is meant typically for such use cases (and would deserve more advertising in the doc ...):\n\n```\n    sage: V = CombinatorialFreeModule(ZZ, [1,2,3])\n    sage: VQ = CombinatorialFreeModule(QQ, [1,2,3], key=(\"extends\", V))\n    sage: V2 = CombinatorialFreeModule(QQ, [1,2,3])\n    sage: V2 is VQ\n    False\n```\n\nI am more worried about the handling of subclasses of `CombinatorialFreeModule`, like e.g. `Sym.s`, where one will need:\n- to figure out the proper way to call the constructor\n- possibly recreate the parent with several realizations, ...",
    "created_at": "2016-09-04T12:34:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313294",
    "user": "https://github.com/nthiery"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@tscrim](#comment%3A9):
> Perhaps a solution would be to implement a functor for extension of scalars (or at least `F_K(X) = K \otimes_R X`) that would create the corresponding `CombinatorialFreeModule` with the appropriate coercion, taking your idea a bit further. This shouldn't be too hard to get working.

Yup. For consistency with FreeModules and polynomial rings, we should use `K.base_extend(R)` and `K.change_ring(R)` for this.

> We might have to fight against (and possibly remove) `UniqueRepresentation` part of `CombinatorialFreeModule` to have everything work.

Probably not a problem; we have a "key" argument which is meant typically for such use cases (and would deserve more advertising in the doc ...):

```
    sage: V = CombinatorialFreeModule(ZZ, [1,2,3])
    sage: VQ = CombinatorialFreeModule(QQ, [1,2,3], key=("extends", V))
    sage: V2 = CombinatorialFreeModule(QQ, [1,2,3])
    sage: V2 is VQ
    False
```

I am more worried about the handling of subclasses of `CombinatorialFreeModule`, like e.g. `Sym.s`, where one will need:
- to figure out the proper way to call the constructor
- possibly recreate the parent with several realizations, ...



---

archive/issue_events_298062.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-17T18:24:43Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298062"
}
```



---

archive/issue_events_298063.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-07-17T18:24:43Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298063"
}
```



---

archive/issue_events_298064.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298064"
}
```



---

archive/issue_events_298065.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-09-05T19:21:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298065"
}
```



---

archive/issue_events_298066.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298066"
}
```



---

archive/issue_events_298067.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298067"
}
```



---

archive/issue_comments_313295.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313295",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">comment:13</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_313296.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nthis can also be solved by #30235",
    "created_at": "2021-05-09T06:00:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313296",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

this can also be solved by #30235



---

archive/issue_events_298068.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298068"
}
```



---

archive/issue_events_298069.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T00:44:56Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298069"
}
```



---

archive/issue_comments_313297.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nSetting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313297",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_events_298070.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298070"
}
```



---

archive/issue_events_298071.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-18T19:24:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298071"
}
```



---

archive/issue_events_298072.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298072"
}
```



---

archive/issue_events_298073.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-02T20:27:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298073"
}
```



---

archive/issue_comments_313298.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIn 9.7.rc0 (with #30235):\n\n```\nsage: C = CombinatorialFreeModule(ZZ, Set([1,2]))\nsage: CQ = CombinatorialFreeModule(QQ, Set([1,2]))\nsage: from sage.categories.pushout import pushout\nsage: pushout(C, CQ) is CQ\nTrue\nsage: CQ.has_coerce_map_from(C)\nFalse\n```",
    "created_at": "2022-08-31T03:34:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313298",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:18" align="right">comment:18</div>

In 9.7.rc0 (with #30235):

```
sage: C = CombinatorialFreeModule(ZZ, Set([1,2]))
sage: CQ = CombinatorialFreeModule(QQ, Set([1,2]))
sage: from sage.categories.pushout import pushout
sage: pushout(C, CQ) is CQ
True
sage: CQ.has_coerce_map_from(C)
False
```



---

archive/issue_events_298074.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298074"
}
```



---

archive/issue_events_298075.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-09-19T18:58:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298075"
}
```



---

archive/issue_comments_313299.json:
```json
{
    "body": "Changed commit from **[`286883e`](https://github.com/sagemath/sagetrac-mirror/commit/286883e5880c388fb74bc6c0c63352ad716d5fad)** to **[`7f69146`](https://github.com/sagemath/sagetrac-mirror/commit/7f69146f4390e52a7d62f900a2de1db9385e19bc)**",
    "created_at": "2023-01-05T05:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313299",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`286883e`](https://github.com/sagemath/sagetrac-mirror/commit/286883e5880c388fb74bc6c0c63352ad716d5fad)** to **[`7f69146`](https://github.com/sagemath/sagetrac-mirror/commit/7f69146f4390e52a7d62f900a2de1db9385e19bc)**



---

archive/issue_comments_313300.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1da89f6ee2a6584ffe2d47ada4c953aa41d6510a\"><code>1da89f6</code></a></td><td><code>Initial version of introducing coercion of base rings.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f69146f4390e52a7d62f900a2de1db9385e19bc\"><code>7f69146</code></a></td><td><code>review</code></td></tr></table>\n",
    "created_at": "2023-01-05T05:34:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313300",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1da89f6ee2a6584ffe2d47ada4c953aa41d6510a"><code>1da89f6</code></a></td><td><code>Initial version of introducing coercion of base rings.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f69146f4390e52a7d62f900a2de1db9385e19bc"><code>7f69146</code></a></td><td><code>review</code></td></tr></table>




---

archive/issue_comments_313301.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nrebased on 9.8.beta6",
    "created_at": "2023-01-05T05:34:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313301",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">comment:21</div>

rebased on 9.8.beta6



---

archive/issue_comments_313302.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/69d5605c475c22cbeabd9ef15c8d979ba84c0e7e\"><code>69d5605</code></a></td><td><code>CombinatorialFreeModule.change_ring: New</code></td></tr></table>\n",
    "created_at": "2023-01-05T05:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313302",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/69d5605c475c22cbeabd9ef15c8d979ba84c0e7e"><code>69d5605</code></a></td><td><code>CombinatorialFreeModule.change_ring: New</code></td></tr></table>




---

archive/issue_comments_313303.json:
```json
{
    "body": "Changed commit from **[`7f69146`](https://github.com/sagemath/sagetrac-mirror/commit/7f69146f4390e52a7d62f900a2de1db9385e19bc)** to **[`69d5605`](https://github.com/sagemath/sagetrac-mirror/commit/69d5605c475c22cbeabd9ef15c8d979ba84c0e7e)**",
    "created_at": "2023-01-05T05:58:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313303",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`7f69146`](https://github.com/sagemath/sagetrac-mirror/commit/7f69146f4390e52a7d62f900a2de1db9385e19bc)** to **[`69d5605`](https://github.com/sagemath/sagetrac-mirror/commit/69d5605c475c22cbeabd9ef15c8d979ba84c0e7e)**



---

archive/issue_comments_313304.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nThe test in `CombinatorialFreeModule._coerce_map_from_` was not strict enough, leading to lots of doctest failures in combinat.\n\nI'm replacing it with a stricter test based on `base_extend`.",
    "created_at": "2023-01-05T06:17:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313304",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

The test in `CombinatorialFreeModule._coerce_map_from_` was not strict enough, leading to lots of doctest failures in combinat.

I'm replacing it with a stricter test based on `base_extend`.



---

archive/issue_comments_313305.json:
```json
{
    "body": "<div id=\"comment:24\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bc88a0bd451f27661a7f6a675eb8983ec140b8d8\"><code>bc88a0b</code></a></td><td><code>CombinatorialFreeModule._coerce_map_from_: Tighten test using base_extend</code></td></tr></table>\n",
    "created_at": "2023-01-05T06:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313305",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:24"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bc88a0bd451f27661a7f6a675eb8983ec140b8d8"><code>bc88a0b</code></a></td><td><code>CombinatorialFreeModule._coerce_map_from_: Tighten test using base_extend</code></td></tr></table>




---

archive/issue_comments_313306.json:
```json
{
    "body": "Changed commit from **[`69d5605`](https://github.com/sagemath/sagetrac-mirror/commit/69d5605c475c22cbeabd9ef15c8d979ba84c0e7e)** to **[`bc88a0b`](https://github.com/sagemath/sagetrac-mirror/commit/bc88a0bd451f27661a7f6a675eb8983ec140b8d8)**",
    "created_at": "2023-01-05T06:18:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313306",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`69d5605`](https://github.com/sagemath/sagetrac-mirror/commit/69d5605c475c22cbeabd9ef15c8d979ba84c0e7e)** to **[`bc88a0b`](https://github.com/sagemath/sagetrac-mirror/commit/bc88a0bd451f27661a7f6a675eb8983ec140b8d8)**



---

archive/issue_comments_313307.json:
```json
{
    "body": "Changed commit from **[`bc88a0b`](https://github.com/sagemath/sagetrac-mirror/commit/bc88a0bd451f27661a7f6a675eb8983ec140b8d8)** to **[`e82d44f`](https://github.com/sagemath/sagetrac-mirror/commit/e82d44f2b4becc9a30fa8d991bd3c469dc1b397b)**",
    "created_at": "2023-01-05T06:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313307",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`bc88a0b`](https://github.com/sagemath/sagetrac-mirror/commit/bc88a0bd451f27661a7f6a675eb8983ec140b8d8)** to **[`e82d44f`](https://github.com/sagemath/sagetrac-mirror/commit/e82d44f2b4becc9a30fa8d991bd3c469dc1b397b)**



---

archive/issue_comments_313308.json:
```json
{
    "body": "<div id=\"comment:25\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e82d44f2b4becc9a30fa8d991bd3c469dc1b397b\"><code>e82d44f</code></a></td><td><code>src/sage/combinat/free_module.py: Add doctest</code></td></tr></table>\n",
    "created_at": "2023-01-05T06:22:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313308",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:25"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e82d44f2b4becc9a30fa8d991bd3c469dc1b397b"><code>e82d44f</code></a></td><td><code>src/sage/combinat/free_module.py: Add doctest</code></td></tr></table>




---

archive/issue_comments_313309.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nThe changed doctests in `src/sage/modules/with_basis/indexed_element.pyx` fail",
    "created_at": "2023-01-05T06:25:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313309",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

The changed doctests in `src/sage/modules/with_basis/indexed_element.pyx` fail



---

archive/issue_comments_313310.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/083c680990ade93ece1f1bcda3e9c4224685dbca\"><code>083c680</code></a></td><td><code>src/sage/modules/with_basis/indexed_element.pyx: Revert changes to doctests</code></td></tr></table>\n",
    "created_at": "2023-01-05T06:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313310",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/083c680990ade93ece1f1bcda3e9c4224685dbca"><code>083c680</code></a></td><td><code>src/sage/modules/with_basis/indexed_element.pyx: Revert changes to doctests</code></td></tr></table>




---

archive/issue_comments_313311.json:
```json
{
    "body": "Changed commit from **[`e82d44f`](https://github.com/sagemath/sagetrac-mirror/commit/e82d44f2b4becc9a30fa8d991bd3c469dc1b397b)** to **[`083c680`](https://github.com/sagemath/sagetrac-mirror/commit/083c680990ade93ece1f1bcda3e9c4224685dbca)**",
    "created_at": "2023-01-05T06:28:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313311",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e82d44f`](https://github.com/sagemath/sagetrac-mirror/commit/e82d44f2b4becc9a30fa8d991bd3c469dc1b397b)** to **[`083c680`](https://github.com/sagemath/sagetrac-mirror/commit/083c680990ade93ece1f1bcda3e9c4224685dbca)**



---

archive/issue_events_298076.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-05T06:29:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298076"
}
```



---

archive/issue_events_298077.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2023-01-05T06:29:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21405#event-298077"
}
```



---

archive/issue_comments_313312.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -6,4 +6,5 @@\n sage: CQ.has_coerce_map_from(C)\n False\n ```\n-We plan to introduce such a coercion.\n+In this ticket, we introduce such a coercion and also implement `C.change_ring(QQ)` (which also makes `C.base_extend(QQ)` work).\n+\n``````\n",
    "created_at": "2023-01-05T06:29:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313312",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -6,4 +6,5 @@
 sage: CQ.has_coerce_map_from(C)
 False
 ```
-We plan to introduce such a coercion.
+In this ticket, we introduce such a coercion and also implement `C.change_ring(QQ)` (which also makes `C.base_extend(QQ)` work).
+
``````




---

archive/issue_comments_313313.json:
```json
{
    "body": "Changed author from **Travis Scrimshaw** to **Travis Scrimshaw, Matthias Koeppe**",
    "created_at": "2023-01-05T06:29:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313313",
    "user": "https://github.com/mkoeppe"
}
```

Changed author from **Travis Scrimshaw** to **Travis Scrimshaw, Matthias Koeppe**



---

archive/issue_comments_313314.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nBots are green, ready for review",
    "created_at": "2023-01-07T01:30:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21405",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21405#issuecomment-313314",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Bots are green, ready for review
