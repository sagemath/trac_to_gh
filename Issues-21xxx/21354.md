# Issue 21354: LatticePoset: certificates to non-modularity

archive/issues_021117.json:
```json
{
    "body": "Add `certificate`-option to `is_modular()`.\n\nCC:  @tscrim @fchapoton @kevindilks\n\nBranch/Commit: 68d40bda628cbe687772e524dbc40300d1e3a6b6\n\nReviewer: Travis Scrimshaw\n\nAuthor: Jori M\u00e4ntysalo\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21354\n\n",
    "closed_at": "2017-01-18T20:39:43Z",
    "created_at": "2016-08-27T05:09:52Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.6",
    "title": "LatticePoset: certificates to non-modularity",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21354",
    "user": "https://github.com/jm58660"
}
```
Add `certificate`-option to `is_modular()`.

CC:  @tscrim @fchapoton @kevindilks

Branch/Commit: 68d40bda628cbe687772e524dbc40300d1e3a6b6

Reviewer: Travis Scrimshaw

Author: Jori Mäntysalo

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21354





---

archive/issue_comments_311297.json:
```json
{
    "body": "<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-27T14:20:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311297",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_311298.json:
```json
{
    "body": "<a id='comment:3'></a>patchbot says\n\n```\nsage -t --long src/sage/combinat/posets/lattices.py\n**********************************************************************\nFile \"src/sage/combinat/posets/lattices.py\", line 736, in sage.combinat.posets.lattices.FiniteLatticePoset.is_distributive\nFailed example:\n    Posets.PentagonPoset().is_distributive(certificate=True)\nExpected:\n    (False, (3, 2, 1))\nGot:\n    (False, (3, 1, 2))\n```",
    "created_at": "2016-08-30T07:24:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311298",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>patchbot says

```
sage -t --long src/sage/combinat/posets/lattices.py
**********************************************************************
File "src/sage/combinat/posets/lattices.py", line 736, in sage.combinat.posets.lattices.FiniteLatticePoset.is_distributive
Failed example:
    Posets.PentagonPoset().is_distributive(certificate=True)
Expected:
    (False, (3, 2, 1))
Got:
    (False, (3, 1, 2))
```



---

archive/issue_comments_311299.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-08-30T10:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311299",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_311300.json:
```json
{
    "body": "<a id='comment:5'></a>Todo: To see if a lattice is join-distributive (i.e. every interval from an element to the join of upper covers of the element is distributive) we propably should check if the lattice is upper semimodular and has no M3 as a convex sublattice. Hence the M3-search shall go to `hasse_diagram.py`, where it can be used for several functions.",
    "created_at": "2016-09-18T19:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311300",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>Todo: To see if a lattice is join-distributive (i.e. every interval from an element to the join of upper covers of the element is distributive) we propably should check if the lattice is upper semimodular and has no M3 as a convex sublattice. Hence the M3-search shall go to `hasse_diagram.py`, where it can be used for several functions.



---

archive/issue_comments_311301.json:
```json
{
    "body": "Changing status from new to needs_info.",
    "created_at": "2016-11-15T10:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311301",
    "user": "https://github.com/jm58660"
}
```

Changing status from new to needs_info.



---

archive/issue_comments_311302.json:
```json
{
    "body": "<a id='comment:6'></a>Travis or Fr\u00e9d\u00e9ric, I want an opinion.\n\nCurrenlty finite lattices have `is_modular` with two different uses: it can check if a lattice is modular, or if all elements in a given subset are modular. Then there is `is_modular_element` that checks only one element.\n\nThis feels somewhat unnatural. Compare to `is_compelemted` vs. `complements`; but then `complements` can give dictionary for complements of every element, whereas `pseudocomplement` does not. And there is no function to check if given subset has a complement or pseudocomplement.\n\nAn element of a lattice can be tuple, and tuple can also be an argument to `is_modular`.\n\nSo what should we do for this? I can of course just add `certificate` to `is_modular` such that it raises an exception when used in combination with current `L`-parameter. But what you think?",
    "created_at": "2016-11-15T10:08:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311302",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'></a>Travis or Frédéric, I want an opinion.

Currenlty finite lattices have `is_modular` with two different uses: it can check if a lattice is modular, or if all elements in a given subset are modular. Then there is `is_modular_element` that checks only one element.

This feels somewhat unnatural. Compare to `is_compelemted` vs. `complements`; but then `complements` can give dictionary for complements of every element, whereas `pseudocomplement` does not. And there is no function to check if given subset has a complement or pseudocomplement.

An element of a lattice can be tuple, and tuple can also be an argument to `is_modular`.

So what should we do for this? I can of course just add `certificate` to `is_modular` such that it raises an exception when used in combination with current `L`-parameter. But what you think?



---

archive/issue_comments_311303.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 jmantysalo]:\n> Travis or Fr\u00e9d\u00e9ric, I want an opinion.\n> \n> Currenlty finite lattices have `is_modular` with two different uses: it can check if a lattice is modular, or if all elements in a given subset are modular. Then there is `is_modular_element` that checks only one element.\n> \n> This feels somewhat unnatural. Compare to `is_compelemted` vs. `complements`; but then `complements` can give dictionary for complements of every element, whereas `pseudocomplement` does not. And there is no function to check if given subset has a complement or pseudocomplement.\n\n\nIt would be easy to extend `complements` to have this functionality. However, `P.is_modular(elts)` is really just (slightly faster) shorthand for `all(P.is_modular_element(x) for x in elts)`, and since that is not doing anything complicated code-wise, I would not remove this feature.\n\n> An element of a lattice can be tuple, and tuple can also be an argument to `is_modular`.\n> \n> So what should we do for this? I can of course just add `certificate` to `is_modular` such that it raises an exception when used in combination with current `L`-parameter. But what you think?\n\n\nI don't see any problem. You should pass in a list/tuple with the element to `is_modular` in that case. In particular, `is_modular` is assuming the input is a list of elements, not a single element.",
    "created_at": "2016-11-15T15:06:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311303",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>Replying to [comment:6 jmantysalo]:
> Travis or Frédéric, I want an opinion.
> 
> Currenlty finite lattices have `is_modular` with two different uses: it can check if a lattice is modular, or if all elements in a given subset are modular. Then there is `is_modular_element` that checks only one element.
> 
> This feels somewhat unnatural. Compare to `is_compelemted` vs. `complements`; but then `complements` can give dictionary for complements of every element, whereas `pseudocomplement` does not. And there is no function to check if given subset has a complement or pseudocomplement.


It would be easy to extend `complements` to have this functionality. However, `P.is_modular(elts)` is really just (slightly faster) shorthand for `all(P.is_modular_element(x) for x in elts)`, and since that is not doing anything complicated code-wise, I would not remove this feature.

> An element of a lattice can be tuple, and tuple can also be an argument to `is_modular`.
> 
> So what should we do for this? I can of course just add `certificate` to `is_modular` such that it raises an exception when used in combination with current `L`-parameter. But what you think?


I don't see any problem. You should pass in a list/tuple with the element to `is_modular` in that case. In particular, `is_modular` is assuming the input is a list of elements, not a single element.



---

archive/issue_comments_311304.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,8 +1,4 @@\n-Now when #21002 has got positive review we can continue to `is_distributive` and `is_modular`.\n-\n-Lattice Theory: Foundation by George Gr\u00e4tzer, p. 111: \"If the lattice is finite, modular and and nondistributive, then it contains a cover-preserving diamond.\"\n-\n-Hence it is easy to search a certificate for non-distributive lattice: check for non-lower semimodular, check for non-upper semimodular, check for diamond subgraph.\n+Add `certificate`-option to `is_modular()`.\n \n Author: Jori M\u00e4ntysalo\n \n``````\n",
    "created_at": "2016-11-15T18:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311304",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,8 +1,4 @@
-Now when #21002 has got positive review we can continue to `is_distributive` and `is_modular`.
-
-Lattice Theory: Foundation by George Grätzer, p. 111: "If the lattice is finite, modular and and nondistributive, then it contains a cover-preserving diamond."
-
-Hence it is easy to search a certificate for non-distributive lattice: check for non-lower semimodular, check for non-upper semimodular, check for diamond subgraph.
+Add `certificate`-option to `is_modular()`.
 
 Author: Jori Mäntysalo
 
``````




---

archive/issue_comments_311305.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 tscrim]:\n\n> - - I don't see any problem. - -\n\n\nOK then. I will make a certificate for non-modularity in this ticket.",
    "created_at": "2016-11-15T18:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311305",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'></a>Replying to [comment:7 tscrim]:

> - - I don't see any problem. - -


OK then. I will make a certificate for non-modularity in this ticket.



---

archive/issue_comments_311306.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-11-15T18:26:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311306",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_events_056818.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-16T09:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21354#event-56818"
}
```



---

archive/issue_comments_311307.json:
```json
{
    "body": "<a id='comment:11'></a>New commits:",
    "created_at": "2016-11-16T09:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311307",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:11'></a>New commits:



---

archive/issue_comments_311308.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-16T09:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311308",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_311309.json:
```json
{
    "body": "<a id='comment:12'></a>Btw, the time needed to check that `BooleanLattice(10)` is modular drops from 4,31 to 0.16 seconds with this patch. And the time to select modular lattices from all 10-element lattices drops from 0.72 to 0.18 seconds.",
    "created_at": "2016-11-16T09:27:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311309",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'></a>Btw, the time needed to check that `BooleanLattice(10)` is modular drops from 4,31 to 0.16 seconds with this patch. And the time to select modular lattices from all 10-element lattices drops from 0.72 to 0.18 seconds.



---

archive/issue_comments_311310.json:
```json
{
    "body": "<a id='comment:13'></a>This is not a sentence:\n\n```\n        some subset of elements are all modular. An element `x` in a\n        lattice `L` is *modular* if `x \\leq b` implies\n        for every `a, b \\in L`.\n```\nReplace `\\not=` with `\\neq`. I also disagree with raising an error here:\n\n```\n        if certificate and L is not None:\n            raise ValueError(\"parameters L and certificate can not be combined\")\n```\nThere still is a meaningful certificate, it is now just a pair of entries that do not satisfy:\n\n```\nH._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]\n```\nThere is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.\nI also disagree with putting the condition inline instead of in an equation environment.",
    "created_at": "2016-11-16T15:49:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311310",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:13'></a>This is not a sentence:

```
        some subset of elements are all modular. An element `x` in a
        lattice `L` is *modular* if `x \leq b` implies
        for every `a, b \in L`.
```
Replace `\not=` with `\neq`. I also disagree with raising an error here:

```
        if certificate and L is not None:
            raise ValueError("parameters L and certificate can not be combined")
```
There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:

```
H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]
```
There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.
I also disagree with putting the condition inline instead of in an equation environment.



---

archive/issue_comments_311311.json:
```json
{
    "body": "<a id='comment:14'></a>Replying to [comment:13 tscrim]:\n\n> There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.\n\n\nTrue. Then this is a defect.\n\n> I also disagree with raising an error here:\n> \n> ```\n>         if certificate and L is not None:\n>             raise ValueError(\"parameters L and certificate can not be combined\")\n> ```\n> There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:\n> \n> ```\n> H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]\n> ```\n\n\nOnly if the poset is ranked. But yes, I think I can make a certificate.\n\n> I also disagree with putting the condition inline instead of in an equation environment.\n\n\nAs you wish. But for example `is_join_semidistributive()` then looks a little different.\n\nI'll look at this a day or few days later.",
    "created_at": "2016-11-19T20:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311311",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:14'></a>Replying to [comment:13 tscrim]:

> There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.


True. Then this is a defect.

> I also disagree with raising an error here:
> 
> ```
>         if certificate and L is not None:
>             raise ValueError("parameters L and certificate can not be combined")
> ```
> There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:
> 
> ```
> H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]
> ```


Only if the poset is ranked. But yes, I think I can make a certificate.

> I also disagree with putting the condition inline instead of in an equation environment.


As you wish. But for example `is_join_semidistributive()` then looks a little different.

I'll look at this a day or few days later.



---

archive/issue_comments_311312.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2016-11-19T20:55:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311312",
    "user": "https://github.com/jm58660"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_311313.json:
```json
{
    "body": "<a id='comment:15'></a>Replying to [comment:14 jmantysalo]:\n> Replying to [comment:13 tscrim]:\n> \n> > There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.\n\n> \n> True. Then this is a defect.\n\n\nIt's only a problem for the certificate, not the code itself because it is using an equivalent definition. (Admittedly this is walking us right past the bikeshed...) \n\n> > I also disagree with raising an error here:\n> > \n> > ```\n> >         if certificate and L is not None:\n> >             raise ValueError(\"parameters L and certificate can not be combined\")\n> > ```\n> > There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:\n> > \n> > ```\n> > H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]\n> > ```\n\n> \n> Only if the poset is ranked. But yes, I think I can make a certificate.\n\n\nGood point about the rankedness, but we should be try to be consistent with our certificate.\n\n> > I also disagree with putting the condition inline instead of in an equation environment.\n\n> \n> As you wish. But for example `is_join_semidistributive()` then looks a little different.\n\n\nIMO, it's easier to read with it being on its own line in the html docs. Thanks.\n\n> I'll look at this a day or few days later.\n\n\nI will be at a SageDays this upcoming week so I should get to review it quickly.",
    "created_at": "2016-11-19T21:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311313",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'></a>Replying to [comment:14 jmantysalo]:
> Replying to [comment:13 tscrim]:
> 
> > There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.

> 
> True. Then this is a defect.


It's only a problem for the certificate, not the code itself because it is using an equivalent definition. (Admittedly this is walking us right past the bikeshed...) 

> > I also disagree with raising an error here:
> > 
> > ```
> >         if certificate and L is not None:
> >             raise ValueError("parameters L and certificate can not be combined")
> > ```
> > There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:
> > 
> > ```
> > H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]
> > ```

> 
> Only if the poset is ranked. But yes, I think I can make a certificate.


Good point about the rankedness, but we should be try to be consistent with our certificate.

> > I also disagree with putting the condition inline instead of in an equation environment.

> 
> As you wish. But for example `is_join_semidistributive()` then looks a little different.


IMO, it's easier to read with it being on its own line in the html docs. Thanks.

> I'll look at this a day or few days later.


I will be at a SageDays this upcoming week so I should get to review it quickly.



---

archive/issue_comments_311314.json:
```json
{
    "body": "Changing type from defect to enhancement.",
    "created_at": "2016-11-19T21:55:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311314",
    "user": "https://github.com/tscrim"
}
```

Changing type from defect to enhancement.



---

archive/issue_comments_311315.json:
```json
{
    "body": "Changing keywords from \"\" to \"kdilks\".",
    "created_at": "2016-11-28T01:13:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311315",
    "user": "https://github.com/kevindilks"
}
```

Changing keywords from "" to "kdilks".



---

archive/issue_comments_311316.json:
```json
{
    "body": "<a id='comment:17'></a>Kevin, I suppose you didn't want you to be a keyword. `:=)`",
    "created_at": "2016-11-28T04:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311316",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:17'></a>Kevin, I suppose you didn't want you to be a keyword. `:=)`



---

archive/issue_comments_311317.json:
```json
{
    "body": "Changing keywords from \"kdilks\" to \"\".",
    "created_at": "2016-11-28T04:32:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311317",
    "user": "https://github.com/jm58660"
}
```

Changing keywords from "kdilks" to "".



---

archive/issue_comments_311318.json:
```json
{
    "body": "<a id='comment:18'></a>Any thoughts on the certificate given an `L`?",
    "created_at": "2016-12-01T22:18:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311318",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:18'></a>Any thoughts on the certificate given an `L`?



---

archive/issue_comments_311319.json:
```json
{
    "body": "<a id='comment:19'></a>Replying to [comment:18 tscrim]:\n> Any thoughts on the certificate given an `L`?\n\n\nI think I'll just implement the `L` parameter for non-ranked lattices as you suggested, also with `certificate`. That may take some time. (Please notify if you plan to do it yourself, so we won't do the same job twise.)\n\nThis may relate to #21903: what is the fastest way to compute neutral elements? It is easy to find a non-distributivity certificate, and can the lattice be \"shrinked\" so that only neutral elements remain? Gonna think that for a while too...",
    "created_at": "2016-12-02T07:36:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311319",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:19'></a>Replying to [comment:18 tscrim]:
> Any thoughts on the certificate given an `L`?


I think I'll just implement the `L` parameter for non-ranked lattices as you suggested, also with `certificate`. That may take some time. (Please notify if you plan to do it yourself, so we won't do the same job twise.)

This may relate to #21903: what is the fastest way to compute neutral elements? It is easy to find a non-distributivity certificate, and can the lattice be "shrinked" so that only neutral elements remain? Gonna think that for a while too...



---

archive/issue_comments_311320.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:19 jmantysalo]:\n> Replying to [comment:18 tscrim]:\n> > Any thoughts on the certificate given an `L`?\n\n> \n> I think I'll just implement the `L` parameter for non-ranked lattices as you suggested, also with `certificate`. That may take some time. (Please notify if you plan to do it yourself, so we won't do the same job twise.)\n\n\nI will not be doing any work on posets/lattice code in the near future, so don't worry about conflicting with me.\n\n> This may relate to #21903: what is the fastest way to compute neutral elements? It is easy to find a non-distributivity certificate, and can the lattice be \"shrinked\" so that only neutral elements remain? Gonna think that for a while too...\n\n\nI have no idea as this is a little too far outside my knowledge area for me to be helpful.",
    "created_at": "2016-12-02T15:10:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311320",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:20'></a>Replying to [comment:19 jmantysalo]:
> Replying to [comment:18 tscrim]:
> > Any thoughts on the certificate given an `L`?

> 
> I think I'll just implement the `L` parameter for non-ranked lattices as you suggested, also with `certificate`. That may take some time. (Please notify if you plan to do it yourself, so we won't do the same job twise.)


I will not be doing any work on posets/lattice code in the near future, so don't worry about conflicting with me.

> This may relate to #21903: what is the fastest way to compute neutral elements? It is easy to find a non-distributivity certificate, and can the lattice be "shrinked" so that only neutral elements remain? Gonna think that for a while too...


I have no idea as this is a little too far outside my knowledge area for me to be helpful.



---

archive/issue_comments_311321.json:
```json
{
    "body": "<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-05T20:23:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311321",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_311322.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-12-05T20:23:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311322",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_311323.json:
```json
{
    "body": "<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-07T07:06:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311323",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:23'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_311324.json:
```json
{
    "body": "<a id='comment:24'></a>Continuing this a little. But after #21903 it seems inconsistent to have this kind of `L`-parameter.",
    "created_at": "2016-12-07T07:08:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311324",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:24'></a>Continuing this a little. But after #21903 it seems inconsistent to have this kind of `L`-parameter.



---

archive/issue_comments_311325.json:
```json
{
    "body": "<a id='comment:25'></a>I'm not so sure about that. However, if you really don't want to deal with a certificate with `L`, then it should raise a `NotImplementedError` because there should be a certificate in principle.",
    "created_at": "2016-12-07T15:07:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311325",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:25'></a>I'm not so sure about that. However, if you really don't want to deal with a certificate with `L`, then it should raise a `NotImplementedError` because there should be a certificate in principle.



---

archive/issue_comments_311326.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-11T07:14:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311326",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_311327.json:
```json
{
    "body": "<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-14T09:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311327",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:27'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_311328.json:
```json
{
    "body": "Changing type from enhancement to defect.",
    "created_at": "2016-12-14T09:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311328",
    "user": "https://github.com/jm58660"
}
```

Changing type from enhancement to defect.



---

archive/issue_comments_311329.json:
```json
{
    "body": "<a id='comment:28'></a>OK, here it is.\n\nI also mark this as a bug correction. Current version will return `False` from `Posets.PentagonPoset().is_modular(L=[0])` which is an error. Also the docstring seems to be incorrect: It says \"An element **x** in a lattice L is modular\", but it should be \"An element **b** in a lattice L is modular\"; compare to the Wikipedia article it refers.",
    "created_at": "2016-12-14T09:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311329",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:28'></a>OK, here it is.

I also mark this as a bug correction. Current version will return `False` from `Posets.PentagonPoset().is_modular(L=[0])` which is an error. Also the docstring seems to be incorrect: It says "An element **x** in a lattice L is modular", but it should be "An element **b** in a lattice L is modular"; compare to the Wikipedia article it refers.



---

archive/issue_comments_311330.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-12-14T09:35:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311330",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_311331.json:
```json
{
    "body": "<a id='comment:29'></a>Thank you.\n\nHowever, looking at the previous documentation, I like the flow better (1 element modular and then the definition for the entire poset). You can also use `\\neq` instead of `\\not=`.\n\nAnother possible optimization, which would mean more work, would be to push the actual comparison tests to `HasseDiagram` and just convert back the elements in the certificate. However, we don't have to do this on this ticket.",
    "created_at": "2016-12-14T15:43:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311331",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:29'></a>Thank you.

However, looking at the previous documentation, I like the flow better (1 element modular and then the definition for the entire poset). You can also use `\neq` instead of `\not=`.

Another possible optimization, which would mean more work, would be to push the actual comparison tests to `HasseDiagram` and just convert back the elements in the certificate. However, we don't have to do this on this ticket.



---

archive/issue_comments_311332.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-16T12:47:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311332",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_311333.json:
```json
{
    "body": "<a id='comment:31'></a>Replying to [comment:29 tscrim]:\n\n> However, looking at the previous documentation, I like the flow better (1 element modular and then the definition for the entire poset).\n\n\nWell, yes and no. This is more logical if we think the function as a whole. OTOH if we see `is_modular()` without `L`-parameter a \"main function\" for this, then it should be said first. Anyways, I changed that.\n\n> Another possible optimization, which would mean more work, would be to push the actual comparison tests to `HasseDiagram` and just convert back the elements in the certificate. However, we don't have to do this on this ticket.\n\n\nTrue, but even more than that I should think about the algorithm itself. No time for that for now.",
    "created_at": "2016-12-16T12:51:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311333",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:31'></a>Replying to [comment:29 tscrim]:

> However, looking at the previous documentation, I like the flow better (1 element modular and then the definition for the entire poset).


Well, yes and no. This is more logical if we think the function as a whole. OTOH if we see `is_modular()` without `L`-parameter a "main function" for this, then it should be said first. Anyways, I changed that.

> Another possible optimization, which would mean more work, would be to push the actual comparison tests to `HasseDiagram` and just convert back the elements in the certificate. However, we don't have to do this on this ticket.


True, but even more than that I should think about the algorithm itself. No time for that for now.



---

archive/issue_comments_311334.json:
```json
{
    "body": "<a id='comment:32'></a>More modifications needed for the docstring?",
    "created_at": "2016-12-27T16:39:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311334",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:32'></a>More modifications needed for the docstring?



---

archive/issue_comments_311335.json:
```json
{
    "body": "<a id='comment:33'></a>I would change it to:\n\n```\n        .. MATH::\n\n            x \\vee (a \\wedge b) = (x \\vee a) \\wedge b\n\n        for every element `x \\leq b` and `a`.\n```\nOtherwise LGTM and you can set a positive review on my behalf.",
    "created_at": "2017-01-02T00:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311335",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:33'></a>I would change it to:

```
        .. MATH::

            x \vee (a \wedge b) = (x \vee a) \wedge b

        for every element `x \leq b` and `a`.
```
Otherwise LGTM and you can set a positive review on my behalf.



---

archive/issue_comments_311336.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-02T07:12:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311336",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_056819.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-01-02T07:14:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21354#event-56819"
}
```



---

archive/issue_events_056820.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-01-02T07:14:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21354#event-56820"
}
```



---

archive/issue_comments_311337.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:33 tscrim]:\n> I would change it to - -\n\n\nTrue, better now. Thanks!\n\nrc1 is out, also changed milestone.",
    "created_at": "2017-01-02T07:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311337",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:35'></a>Replying to [comment:33 tscrim]:
> I would change it to - -


True, better now. Thanks!

rc1 is out, also changed milestone.



---

archive/issue_comments_311338.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-02T07:14:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311338",
    "user": "https://github.com/jm58660"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_056821.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-18T20:39:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21354#event-56821"
}
```



---

archive/issue_comments_311339.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-18T20:39:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21354#issuecomment-311339",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
