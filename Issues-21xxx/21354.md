# Issue 21354: LatticePoset: certificates to non-modularity

archive/issues_021117.json:
```json
{
    "assignees": [],
    "body": "Add `certificate`-option to `is_modular()`.\n\nCC:  @tscrim @fchapoton @kevindilks\n\nBranch/Commit: **[`68d40bd`](https://github.com/sagemath/sagetrac-mirror/commit/68d40bda628cbe687772e524dbc40300d1e3a6b6)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Jori M\u00e4ntysalo**\n\nComponent: **combinatorics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21354_\n\n",
    "closed_at": "2017-01-18T20:39:43Z",
    "created_at": "2016-08-27T05:09:52Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.6",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "LatticePoset: certificates to non-modularity",
    "type": "issue",
    "updated_at": "2017-01-18T20:39:43Z",
    "url": "https://github.com/sagemath/sage/issues/21354",
    "user": "https://github.com/jm58660"
}
```
Add `certificate`-option to `is_modular()`.

CC:  @tscrim @fchapoton @kevindilks

Branch/Commit: **[`68d40bd`](https://github.com/sagemath/sagetrac-mirror/commit/68d40bda628cbe687772e524dbc40300d1e3a6b6)**

Reviewer: **Travis Scrimshaw**

Author: **Jori MÃ¤ntysalo**

Component: **combinatorics**

_Issue created by migration from https://trac.sagemath.org/ticket/21354_





---

archive/issue_events_297392.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-27T05:09:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297392"
}
```



---

archive/issue_events_297393.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-27T05:09:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20combinatorics",
    "label_color": "0000ff",
    "label_name": "c: combinatorics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297393"
}
```



---

archive/issue_events_297394.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-27T05:09:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297394"
}
```



---

archive/issue_events_297395.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-27T05:09:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297395"
}
```



---

archive/issue_comments_312455.json:
```json
{
    "body": "Branch: **[u/jmantysalo/cert-non-dist](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cert-non-dist)**",
    "created_at": "2016-08-27T14:20:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312455",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/cert-non-dist](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cert-non-dist)**



---

archive/issue_comments_312456.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0f1456b22df5eddc7d6de4a1ea007685823baea\"><code>e0f1456</code></a></td><td><code>Added certificate-options.</code></td></tr></table>\n",
    "created_at": "2016-08-27T14:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312456",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0f1456b22df5eddc7d6de4a1ea007685823baea"><code>e0f1456</code></a></td><td><code>Added certificate-options.</code></td></tr></table>




---

archive/issue_comments_312457.json:
```json
{
    "body": "Commit: **[`e0f1456`](https://github.com/sagemath/sagetrac-mirror/commit/e0f1456b22df5eddc7d6de4a1ea007685823baea)**",
    "created_at": "2016-08-27T14:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312457",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`e0f1456`](https://github.com/sagemath/sagetrac-mirror/commit/e0f1456b22df5eddc7d6de4a1ea007685823baea)**



---

archive/issue_comments_312458.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\npatchbot says\n\n```\nsage -t --long src/sage/combinat/posets/lattices.py\n**********************************************************************\nFile \"src/sage/combinat/posets/lattices.py\", line 736, in sage.combinat.posets.lattices.FiniteLatticePoset.is_distributive\nFailed example:\n    Posets.PentagonPoset().is_distributive(certificate=True)\nExpected:\n    (False, (3, 2, 1))\nGot:\n    (False, (3, 1, 2))\n```",
    "created_at": "2016-08-30T07:24:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312458",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:3" align="right">comment:3</div>

patchbot says

```
sage -t --long src/sage/combinat/posets/lattices.py
**********************************************************************
File "src/sage/combinat/posets/lattices.py", line 736, in sage.combinat.posets.lattices.FiniteLatticePoset.is_distributive
Failed example:
    Posets.PentagonPoset().is_distributive(certificate=True)
Expected:
    (False, (3, 2, 1))
Got:
    (False, (3, 1, 2))
```



---

archive/issue_comments_312459.json:
```json
{
    "body": "<div id=\"comment:4\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c8a5796cdeb254924eea529110af9ec8cf6eac56\"><code>c8a5796</code></a></td><td><code>Modifications to semimodularity tests.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/107f763f1f501b9f25d685b7366afedb4e2535c3\"><code>107f763</code></a></td><td><code>Change internal function name.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/baac373759dc03297b649185f1a823799e086150\"><code>baac373</code></a></td><td><code>Forgot *lower* semimodular.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7f0d530113f3e861fb02a07f6c7f96ab5674f735\"><code>7f0d530</code></a></td><td><code>Added certificate-options.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/92b5e2a922923cbedbcf637bd19b9e39be0c8bd2\"><code>92b5e2a</code></a></td><td><code>Merge branch 'u/jmantysalo/cert-non-dist' of git://trac.sagemath.org/sage into t/21354/cert-non-dist</code></td></tr></table>\n",
    "created_at": "2016-08-30T10:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312459",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:4"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c8a5796cdeb254924eea529110af9ec8cf6eac56"><code>c8a5796</code></a></td><td><code>Modifications to semimodularity tests.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/107f763f1f501b9f25d685b7366afedb4e2535c3"><code>107f763</code></a></td><td><code>Change internal function name.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/baac373759dc03297b649185f1a823799e086150"><code>baac373</code></a></td><td><code>Forgot *lower* semimodular.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7f0d530113f3e861fb02a07f6c7f96ab5674f735"><code>7f0d530</code></a></td><td><code>Added certificate-options.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/92b5e2a922923cbedbcf637bd19b9e39be0c8bd2"><code>92b5e2a</code></a></td><td><code>Merge branch 'u/jmantysalo/cert-non-dist' of git://trac.sagemath.org/sage into t/21354/cert-non-dist</code></td></tr></table>




---

archive/issue_comments_312460.json:
```json
{
    "body": "Changed commit from **[`e0f1456`](https://github.com/sagemath/sagetrac-mirror/commit/e0f1456b22df5eddc7d6de4a1ea007685823baea)** to **[`92b5e2a`](https://github.com/sagemath/sagetrac-mirror/commit/92b5e2a922923cbedbcf637bd19b9e39be0c8bd2)**",
    "created_at": "2016-08-30T10:19:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312460",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e0f1456`](https://github.com/sagemath/sagetrac-mirror/commit/e0f1456b22df5eddc7d6de4a1ea007685823baea)** to **[`92b5e2a`](https://github.com/sagemath/sagetrac-mirror/commit/92b5e2a922923cbedbcf637bd19b9e39be0c8bd2)**



---

archive/issue_comments_312461.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nTodo: To see if a lattice is join-distributive (i.e. every interval from an element to the join of upper covers of the element is distributive) we propably should check if the lattice is upper semimodular and has no M3 as a convex sublattice. Hence the M3-search shall go to `hasse_diagram.py`, where it can be used for several functions.",
    "created_at": "2016-09-18T19:21:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312461",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:5" align="right">comment:5</div>

Todo: To see if a lattice is join-distributive (i.e. every interval from an element to the join of upper covers of the element is distributive) we propably should check if the lattice is upper semimodular and has no M3 as a convex sublattice. Hence the M3-search shall go to `hasse_diagram.py`, where it can be used for several functions.



---

archive/issue_events_297396.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-15T10:08:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297396"
}
```



---

archive/issue_comments_312462.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nTravis or Fr\u00e9d\u00e9ric, I want an opinion.\n\nCurrenlty finite lattices have `is_modular` with two different uses: it can check if a lattice is modular, or if all elements in a given subset are modular. Then there is `is_modular_element` that checks only one element.\n\nThis feels somewhat unnatural. Compare to `is_compelemted` vs. `complements`; but then `complements` can give dictionary for complements of every element, whereas `pseudocomplement` does not. And there is no function to check if given subset has a complement or pseudocomplement.\n\nAn element of a lattice can be tuple, and tuple can also be an argument to `is_modular`.\n\nSo what should we do for this? I can of course just add `certificate` to `is_modular` such that it raises an exception when used in combination with current `L`-parameter. But what you think?",
    "created_at": "2016-11-15T10:08:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312462",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:6" align="right">comment:6</div>

Travis or FrÃ©dÃ©ric, I want an opinion.

Currenlty finite lattices have `is_modular` with two different uses: it can check if a lattice is modular, or if all elements in a given subset are modular. Then there is `is_modular_element` that checks only one element.

This feels somewhat unnatural. Compare to `is_compelemted` vs. `complements`; but then `complements` can give dictionary for complements of every element, whereas `pseudocomplement` does not. And there is no function to check if given subset has a complement or pseudocomplement.

An element of a lattice can be tuple, and tuple can also be an argument to `is_modular`.

So what should we do for this? I can of course just add `certificate` to `is_modular` such that it raises an exception when used in combination with current `L`-parameter. But what you think?



---

archive/issue_comments_312463.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@jm58660](#comment%3A6):\n> Travis or Fr\u00e9d\u00e9ric, I want an opinion.\n> \n> Currenlty finite lattices have `is_modular` with two different uses: it can check if a lattice is modular, or if all elements in a given subset are modular. Then there is `is_modular_element` that checks only one element.\n> \n> This feels somewhat unnatural. Compare to `is_compelemted` vs. `complements`; but then `complements` can give dictionary for complements of every element, whereas `pseudocomplement` does not. And there is no function to check if given subset has a complement or pseudocomplement.\n\nIt would be easy to extend `complements` to have this functionality. However, `P.is_modular(elts)` is really just (slightly faster) shorthand for `all(P.is_modular_element(x) for x in elts)`, and since that is not doing anything complicated code-wise, I would not remove this feature.\n\n> An element of a lattice can be tuple, and tuple can also be an argument to `is_modular`.\n> \n> So what should we do for this? I can of course just add `certificate` to `is_modular` such that it raises an exception when used in combination with current `L`-parameter. But what you think?\n\nI don't see any problem. You should pass in a list/tuple with the element to `is_modular` in that case. In particular, `is_modular` is assuming the input is a list of elements, not a single element.",
    "created_at": "2016-11-15T15:06:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312463",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@jm58660](#comment%3A6):
> Travis or FrÃ©dÃ©ric, I want an opinion.
> 
> Currenlty finite lattices have `is_modular` with two different uses: it can check if a lattice is modular, or if all elements in a given subset are modular. Then there is `is_modular_element` that checks only one element.
> 
> This feels somewhat unnatural. Compare to `is_compelemted` vs. `complements`; but then `complements` can give dictionary for complements of every element, whereas `pseudocomplement` does not. And there is no function to check if given subset has a complement or pseudocomplement.

It would be easy to extend `complements` to have this functionality. However, `P.is_modular(elts)` is really just (slightly faster) shorthand for `all(P.is_modular_element(x) for x in elts)`, and since that is not doing anything complicated code-wise, I would not remove this feature.

> An element of a lattice can be tuple, and tuple can also be an argument to `is_modular`.
> 
> So what should we do for this? I can of course just add `certificate` to `is_modular` such that it raises an exception when used in combination with current `L`-parameter. But what you think?

I don't see any problem. You should pass in a list/tuple with the element to `is_modular` in that case. In particular, `is_modular` is assuming the input is a list of elements, not a single element.



---

archive/issue_comments_312464.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1 @@\n-Now when #21002 has got positive review we can continue to `is_distributive` and `is_modular`.\n-\n-Lattice Theory: Foundation by George Gr\u00e4tzer, p. 111: \"If the lattice is finite, modular and and nondistributive, then it contains a cover-preserving diamond.\"\n-\n-Hence it is easy to search a certificate for non-distributive lattice: check for non-lower semimodular, check for non-upper semimodular, check for diamond subgraph.\n+Add `certificate`-option to `is_modular()`.\n``````\n",
    "created_at": "2016-11-15T18:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312464",
    "user": "https://github.com/jm58660"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1 @@
-Now when #21002 has got positive review we can continue to `is_distributive` and `is_modular`.
-
-Lattice Theory: Foundation by George GrÃ¤tzer, p. 111: "If the lattice is finite, modular and and nondistributive, then it contains a cover-preserving diamond."
-
-Hence it is easy to search a certificate for non-distributive lattice: check for non-lower semimodular, check for non-upper semimodular, check for diamond subgraph.
+Add `certificate`-option to `is_modular()`.
``````




---

archive/issue_events_297397.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-15T18:26:13Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "title_is": "LatticePoset: certificates to non-modularity",
    "title_was": "LatticePoset: certificates to non-modularity and non-distributivity",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297397"
}
```



---

archive/issue_comments_312465.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@tscrim](#comment%3A7):\n\n> - - I don't see any problem. - -\n\nOK then. I will make a certificate for non-modularity in this ticket.",
    "created_at": "2016-11-15T18:26:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312465",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@tscrim](#comment%3A7):

> - - I don't see any problem. - -

OK then. I will make a certificate for non-modularity in this ticket.



---

archive/issue_events_297398.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-15T18:26:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297398"
}
```



---

archive/issue_events_297399.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-15T18:26:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297399"
}
```



---

archive/issue_comments_312466.json:
```json
{
    "body": "Changed commit from **[`92b5e2a`](https://github.com/sagemath/sagetrac-mirror/commit/92b5e2a922923cbedbcf637bd19b9e39be0c8bd2)** to none",
    "created_at": "2016-11-15T18:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312466",
    "user": "https://github.com/jm58660"
}
```

Changed commit from **[`92b5e2a`](https://github.com/sagemath/sagetrac-mirror/commit/92b5e2a922923cbedbcf637bd19b9e39be0c8bd2)** to none



---

archive/issue_comments_312467.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/cert-non-dist](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cert-non-dist)** to none",
    "created_at": "2016-11-15T18:26:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312467",
    "user": "https://github.com/jm58660"
}
```

Changed branch from **[u/jmantysalo/cert-non-dist](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/cert-non-dist)** to none



---

archive/issue_comments_312468.json:
```json
{
    "body": "Branch: **[u/jmantysalo/dist-modular](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/dist-modular)**",
    "created_at": "2016-11-16T09:19:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312468",
    "user": "https://github.com/jm58660"
}
```

Branch: **[u/jmantysalo/dist-modular](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/dist-modular)**



---

archive/issue_events_297400.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-16T09:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297400"
}
```



---

archive/issue_events_297401.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-16T09:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297401"
}
```



---

archive/issue_comments_312469.json:
```json
{
    "body": "<div id=\"comment:11\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9b7cb048c625a6cffc5609ecbdf6d7d50131a63a\"><code>9b7cb04</code></a></td><td><code>Add certificate-option to is_modular().</code></td></tr></table>\n",
    "created_at": "2016-11-16T09:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312469",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:11"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9b7cb048c625a6cffc5609ecbdf6d7d50131a63a"><code>9b7cb04</code></a></td><td><code>Add certificate-option to is_modular().</code></td></tr></table>




---

archive/issue_events_297402.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-16T09:20:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297402"
}
```



---

archive/issue_events_297403.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-16T09:20:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297403"
}
```



---

archive/issue_comments_312470.json:
```json
{
    "body": "Commit: **[`9b7cb04`](https://github.com/sagemath/sagetrac-mirror/commit/9b7cb048c625a6cffc5609ecbdf6d7d50131a63a)**",
    "created_at": "2016-11-16T09:20:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312470",
    "user": "https://github.com/jm58660"
}
```

Commit: **[`9b7cb04`](https://github.com/sagemath/sagetrac-mirror/commit/9b7cb048c625a6cffc5609ecbdf6d7d50131a63a)**



---

archive/issue_comments_312471.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nBtw, the time needed to check that `BooleanLattice(10)` is modular drops from 4,31 to 0.16 seconds with this patch. And the time to select modular lattices from all 10-element lattices drops from 0.72 to 0.18 seconds.",
    "created_at": "2016-11-16T09:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312471",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:12" align="right">comment:12</div>

Btw, the time needed to check that `BooleanLattice(10)` is modular drops from 4,31 to 0.16 seconds with this patch. And the time to select modular lattices from all 10-element lattices drops from 0.72 to 0.18 seconds.



---

archive/issue_comments_312472.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nThis is not a sentence:\n\n```\n        some subset of elements are all modular. An element `x` in a\n        lattice `L` is *modular* if `x \\leq b` implies\n        for every `a, b \\in L`.\n```\nReplace `\\not=` with `\\neq`. I also disagree with raising an error here:\n\n```\n        if certificate and L is not None:\n            raise ValueError(\"parameters L and certificate can not be combined\")\n```\nThere still is a meaningful certificate, it is now just a pair of entries that do not satisfy:\n\n```\nH._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]\n```\nThere is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.\nI also disagree with putting the condition inline instead of in an equation environment.",
    "created_at": "2016-11-16T15:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312472",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:13" align="right">comment:13</div>

This is not a sentence:

```
        some subset of elements are all modular. An element `x` in a
        lattice `L` is *modular* if `x \leq b` implies
        for every `a, b \in L`.
```
Replace `\not=` with `\neq`. I also disagree with raising an error here:

```
        if certificate and L is not None:
            raise ValueError("parameters L and certificate can not be combined")
```
There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:

```
H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]
```
There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.
I also disagree with putting the condition inline instead of in an equation environment.



---

archive/issue_comments_312473.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nReplying to [@tscrim](#comment%3A13):\n\n> There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.\n\nTrue. Then this is a defect.\n\n> I also disagree with raising an error here:\n> \n> ```\n>         if certificate and L is not None:\n>             raise ValueError(\"parameters L and certificate can not be combined\")\n> ```\n> There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:\n> \n> ```\n> H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]\n> ```\n\nOnly if the poset is ranked. But yes, I think I can make a certificate.\n\n> I also disagree with putting the condition inline instead of in an equation environment.\n\nAs you wish. But for example `is_join_semidistributive()` then looks a little different.\n\nI'll look at this a day or few days later.",
    "created_at": "2016-11-19T20:55:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312473",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:14" align="right">comment:14</div>

Replying to [@tscrim](#comment%3A13):

> There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.

True. Then this is a defect.

> I also disagree with raising an error here:
> 
> ```
>         if certificate and L is not None:
>             raise ValueError("parameters L and certificate can not be combined")
> ```
> There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:
> 
> ```
> H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]
> ```

Only if the poset is ranked. But yes, I think I can make a certificate.

> I also disagree with putting the condition inline instead of in an equation environment.

As you wish. But for example `is_join_semidistributive()` then looks a little different.

I'll look at this a day or few days later.



---

archive/issue_events_297404.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-19T20:55:09Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297404"
}
```



---

archive/issue_events_297405.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-11-19T20:55:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297405"
}
```



---

archive/issue_comments_312474.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jm58660](#comment%3A14):\n> Replying to [@tscrim](#comment%3A13):\n> \n> > There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.\n\n> \n> True. Then this is a defect.\n\nIt's only a problem for the certificate, not the code itself because it is using an equivalent definition. (Admittedly this is walking us right past the bikeshed...) \n\n> > I also disagree with raising an error here:\n> > \n> > ```\n> >         if certificate and L is not None:\n> >             raise ValueError(\"parameters L and certificate can not be combined\")\n> > ```\n> > There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:\n> > \n> > ```\n> > H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]\n> > ```\n\n> \n> Only if the poset is ranked. But yes, I think I can make a certificate.\n\nGood point about the rankedness, but we should be try to be consistent with our certificate.\n\n> > I also disagree with putting the condition inline instead of in an equation environment.\n\n> \n> As you wish. But for example `is_join_semidistributive()` then looks a little different.\n\nIMO, it's easier to read with it being on its own line in the html docs. Thanks.\n\n> I'll look at this a day or few days later.\n\nI will be at a SageDays this upcoming week so I should get to review it quickly.",
    "created_at": "2016-11-19T21:55:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312474",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jm58660](#comment%3A14):
> Replying to [@tscrim](#comment%3A13):
> 
> > There is a small problem because the definition given did not match what the code is actually checking. Yet, it still should be possible to make everything consistent.

> 
> True. Then this is a defect.

It's only a problem for the certificate, not the code itself because it is using an equivalent definition. (Admittedly this is walking us right past the bikeshed...) 

> > I also disagree with raising an error here:
> > 
> > ```
> >         if certificate and L is not None:
> >             raise ValueError("parameters L and certificate can not be combined")
> > ```
> > There still is a meaningful certificate, it is now just a pair of entries that do not satisfy:
> > 
> > ```
> > H._rank[a] + H._rank[b] == H._rank[H._meet[a, b]] + H._rank[H._join[a, b]]
> > ```

> 
> Only if the poset is ranked. But yes, I think I can make a certificate.

Good point about the rankedness, but we should be try to be consistent with our certificate.

> > I also disagree with putting the condition inline instead of in an equation environment.

> 
> As you wish. But for example `is_join_semidistributive()` then looks a little different.

IMO, it's easier to read with it being on its own line in the html docs. Thanks.

> I'll look at this a day or few days later.

I will be at a SageDays this upcoming week so I should get to review it quickly.



---

archive/issue_events_297406.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-11-19T21:55:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297406"
}
```



---

archive/issue_events_297407.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-11-19T21:55:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297407"
}
```



---

archive/issue_comments_312475.json:
```json
{
    "body": "Changed keywords from none to **kdilks**",
    "created_at": "2016-11-28T01:13:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312475",
    "user": "https://github.com/kevindilks"
}
```

Changed keywords from none to **kdilks**



---

archive/issue_comments_312476.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nKevin, I suppose you didn't want you to be a keyword. `:=)`",
    "created_at": "2016-11-28T04:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312476",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:17" align="right">comment:17</div>

Kevin, I suppose you didn't want you to be a keyword. `:=)`



---

archive/issue_comments_312477.json:
```json
{
    "body": "Changed keywords from **kdilks** to none",
    "created_at": "2016-11-28T04:32:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312477",
    "user": "https://github.com/jm58660"
}
```

Changed keywords from **kdilks** to none



---

archive/issue_comments_312478.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nAny thoughts on the certificate given an `L`?",
    "created_at": "2016-12-01T22:18:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312478",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:18" align="right">comment:18</div>

Any thoughts on the certificate given an `L`?



---

archive/issue_comments_312479.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@tscrim](#comment%3A18):\n> Any thoughts on the certificate given an `L`?\n\nI think I'll just implement the `L` parameter for non-ranked lattices as you suggested, also with `certificate`. That may take some time. (Please notify if you plan to do it yourself, so we won't do the same job twise.)\n\nThis may relate to #21903: what is the fastest way to compute neutral elements? It is easy to find a non-distributivity certificate, and can the lattice be \"shrinked\" so that only neutral elements remain? Gonna think that for a while too...",
    "created_at": "2016-12-02T07:36:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312479",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@tscrim](#comment%3A18):
> Any thoughts on the certificate given an `L`?

I think I'll just implement the `L` parameter for non-ranked lattices as you suggested, also with `certificate`. That may take some time. (Please notify if you plan to do it yourself, so we won't do the same job twise.)

This may relate to #21903: what is the fastest way to compute neutral elements? It is easy to find a non-distributivity certificate, and can the lattice be "shrinked" so that only neutral elements remain? Gonna think that for a while too...



---

archive/issue_comments_312480.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jm58660](#comment%3A19):\n> Replying to [@tscrim](#comment%3A18):\n> > Any thoughts on the certificate given an `L`?\n\n> \n> I think I'll just implement the `L` parameter for non-ranked lattices as you suggested, also with `certificate`. That may take some time. (Please notify if you plan to do it yourself, so we won't do the same job twise.)\n\nI will not be doing any work on posets/lattice code in the near future, so don't worry about conflicting with me.\n\n> This may relate to #21903: what is the fastest way to compute neutral elements? It is easy to find a non-distributivity certificate, and can the lattice be \"shrinked\" so that only neutral elements remain? Gonna think that for a while too...\n\nI have no idea as this is a little too far outside my knowledge area for me to be helpful.",
    "created_at": "2016-12-02T15:10:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312480",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jm58660](#comment%3A19):
> Replying to [@tscrim](#comment%3A18):
> > Any thoughts on the certificate given an `L`?

> 
> I think I'll just implement the `L` parameter for non-ranked lattices as you suggested, also with `certificate`. That may take some time. (Please notify if you plan to do it yourself, so we won't do the same job twise.)

I will not be doing any work on posets/lattice code in the near future, so don't worry about conflicting with me.

> This may relate to #21903: what is the fastest way to compute neutral elements? It is easy to find a non-distributivity certificate, and can the lattice be "shrinked" so that only neutral elements remain? Gonna think that for a while too...

I have no idea as this is a little too far outside my knowledge area for me to be helpful.



---

archive/issue_comments_312481.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/12828474ed167f26a6e93b90ea1c3fbe280f3cd9\"><code>1282847</code></a></td><td><code>Add certificate-option to is_modular().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0d341fc6f107ec4f2afba517a79fab6270284f4a\"><code>0d341fc</code></a></td><td><code>Merge branch 'u/jmantysalo/dist-modular' of trac.sagemath.org:sage into t/21354/dist-modular</code></td></tr></table>\n",
    "created_at": "2016-12-05T20:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312481",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/12828474ed167f26a6e93b90ea1c3fbe280f3cd9"><code>1282847</code></a></td><td><code>Add certificate-option to is_modular().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0d341fc6f107ec4f2afba517a79fab6270284f4a"><code>0d341fc</code></a></td><td><code>Merge branch 'u/jmantysalo/dist-modular' of trac.sagemath.org:sage into t/21354/dist-modular</code></td></tr></table>




---

archive/issue_comments_312482.json:
```json
{
    "body": "Changed commit from **[`9b7cb04`](https://github.com/sagemath/sagetrac-mirror/commit/9b7cb048c625a6cffc5609ecbdf6d7d50131a63a)** to **[`0d341fc`](https://github.com/sagemath/sagetrac-mirror/commit/0d341fc6f107ec4f2afba517a79fab6270284f4a)**",
    "created_at": "2016-12-05T20:23:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312482",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9b7cb04`](https://github.com/sagemath/sagetrac-mirror/commit/9b7cb048c625a6cffc5609ecbdf6d7d50131a63a)** to **[`0d341fc`](https://github.com/sagemath/sagetrac-mirror/commit/0d341fc6f107ec4f2afba517a79fab6270284f4a)**



---

archive/issue_events_297408.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-12-05T20:23:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297408"
}
```



---

archive/issue_events_297409.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-12-05T20:23:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297409"
}
```



---

archive/issue_comments_312483.json:
```json
{
    "body": "Changed commit from **[`0d341fc`](https://github.com/sagemath/sagetrac-mirror/commit/0d341fc6f107ec4f2afba517a79fab6270284f4a)** to **[`096b0b2`](https://github.com/sagemath/sagetrac-mirror/commit/096b0b28303c23af9aa179787e05c10947f6b4b8)**",
    "created_at": "2016-12-07T07:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312483",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`0d341fc`](https://github.com/sagemath/sagetrac-mirror/commit/0d341fc6f107ec4f2afba517a79fab6270284f4a)** to **[`096b0b2`](https://github.com/sagemath/sagetrac-mirror/commit/096b0b28303c23af9aa179787e05c10947f6b4b8)**



---

archive/issue_comments_312484.json:
```json
{
    "body": "<div id=\"comment:23\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/096b0b28303c23af9aa179787e05c10947f6b4b8\"><code>096b0b2</code></a></td><td><code>.. MATH:: to docstring.</code></td></tr></table>\n",
    "created_at": "2016-12-07T07:06:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312484",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/096b0b28303c23af9aa179787e05c10947f6b4b8"><code>096b0b2</code></a></td><td><code>.. MATH:: to docstring.</code></td></tr></table>




---

archive/issue_comments_312485.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nContinuing this a little. But after #21903 it seems inconsistent to have this kind of `L`-parameter.",
    "created_at": "2016-12-07T07:08:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312485",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:24" align="right">comment:24</div>

Continuing this a little. But after #21903 it seems inconsistent to have this kind of `L`-parameter.



---

archive/issue_comments_312486.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI'm not so sure about that. However, if you really don't want to deal with a certificate with `L`, then it should raise a `NotImplementedError` because there should be a certificate in principle.",
    "created_at": "2016-12-07T15:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312486",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:25" align="right">comment:25</div>

I'm not so sure about that. However, if you really don't want to deal with a certificate with `L`, then it should raise a `NotImplementedError` because there should be a certificate in principle.



---

archive/issue_comments_312487.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b411a7ff289f0e1ad7410ad6fcc7786bd778f95\"><code>8b411a7</code></a></td><td><code>Add certificate-option to is_modular().</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87cbd9add6caeede6287de32b1f839fea34b3c9d\"><code>87cbd9a</code></a></td><td><code>.. MATH:: to docstring.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1069ab728bf6c2dff739591acfad0c586cb54a54\"><code>1069ab7</code></a></td><td><code>Merge branch 'u/jmantysalo/dist-modular' of trac.sagemath.org:sage into t/21354/dist-modular</code></td></tr></table>\n",
    "created_at": "2016-12-11T07:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312487",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b411a7ff289f0e1ad7410ad6fcc7786bd778f95"><code>8b411a7</code></a></td><td><code>Add certificate-option to is_modular().</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87cbd9add6caeede6287de32b1f839fea34b3c9d"><code>87cbd9a</code></a></td><td><code>.. MATH:: to docstring.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1069ab728bf6c2dff739591acfad0c586cb54a54"><code>1069ab7</code></a></td><td><code>Merge branch 'u/jmantysalo/dist-modular' of trac.sagemath.org:sage into t/21354/dist-modular</code></td></tr></table>




---

archive/issue_comments_312488.json:
```json
{
    "body": "Changed commit from **[`096b0b2`](https://github.com/sagemath/sagetrac-mirror/commit/096b0b28303c23af9aa179787e05c10947f6b4b8)** to **[`1069ab7`](https://github.com/sagemath/sagetrac-mirror/commit/1069ab728bf6c2dff739591acfad0c586cb54a54)**",
    "created_at": "2016-12-11T07:14:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312488",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`096b0b2`](https://github.com/sagemath/sagetrac-mirror/commit/096b0b28303c23af9aa179787e05c10947f6b4b8)** to **[`1069ab7`](https://github.com/sagemath/sagetrac-mirror/commit/1069ab728bf6c2dff739591acfad0c586cb54a54)**



---

archive/issue_comments_312489.json:
```json
{
    "body": "Changed commit from **[`1069ab7`](https://github.com/sagemath/sagetrac-mirror/commit/1069ab728bf6c2dff739591acfad0c586cb54a54)** to **[`5e46e54`](https://github.com/sagemath/sagetrac-mirror/commit/5e46e5423e05c69a006b893842c39434fbab912f)**",
    "created_at": "2016-12-14T09:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312489",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1069ab7`](https://github.com/sagemath/sagetrac-mirror/commit/1069ab728bf6c2dff739591acfad0c586cb54a54)** to **[`5e46e54`](https://github.com/sagemath/sagetrac-mirror/commit/5e46e5423e05c69a006b893842c39434fbab912f)**



---

archive/issue_comments_312490.json:
```json
{
    "body": "<div id=\"comment:27\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e46e5423e05c69a006b893842c39434fbab912f\"><code>5e46e54</code></a></td><td><code>Allow L and certificate together.</code></td></tr></table>\n",
    "created_at": "2016-12-14T09:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312490",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:27"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e46e5423e05c69a006b893842c39434fbab912f"><code>5e46e54</code></a></td><td><code>Allow L and certificate together.</code></td></tr></table>




---

archive/issue_events_297410.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-12-14T09:35:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297410"
}
```



---

archive/issue_events_297411.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-12-14T09:35:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297411"
}
```



---

archive/issue_comments_312491.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nOK, here it is.\n\nI also mark this as a bug correction. Current version will return `False` from `Posets.PentagonPoset().is_modular(L=[0])` which is an error. Also the docstring seems to be incorrect: It says \"An element **x** in a lattice L is modular\", but it should be \"An element **b** in a lattice L is modular\"; compare to the Wikipedia article it refers.",
    "created_at": "2016-12-14T09:35:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312491",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:28" align="right">comment:28</div>

OK, here it is.

I also mark this as a bug correction. Current version will return `False` from `Posets.PentagonPoset().is_modular(L=[0])` which is an error. Also the docstring seems to be incorrect: It says "An element **x** in a lattice L is modular", but it should be "An element **b** in a lattice L is modular"; compare to the Wikipedia article it refers.



---

archive/issue_events_297412.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-12-14T09:35:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297412"
}
```



---

archive/issue_events_297413.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-12-14T09:35:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297413"
}
```



---

archive/issue_comments_312492.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nThank you.\n\nHowever, looking at the previous documentation, I like the flow better (1 element modular and then the definition for the entire poset). You can also use `\\neq` instead of `\\not=`.\n\nAnother possible optimization, which would mean more work, would be to push the actual comparison tests to `HasseDiagram` and just convert back the elements in the certificate. However, we don't have to do this on this ticket.",
    "created_at": "2016-12-14T15:43:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312492",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">comment:29</div>

Thank you.

However, looking at the previous documentation, I like the flow better (1 element modular and then the definition for the entire poset). You can also use `\neq` instead of `\not=`.

Another possible optimization, which would mean more work, would be to push the actual comparison tests to `HasseDiagram` and just convert back the elements in the certificate. However, we don't have to do this on this ticket.



---

archive/issue_comments_312493.json:
```json
{
    "body": "Changed commit from **[`5e46e54`](https://github.com/sagemath/sagetrac-mirror/commit/5e46e5423e05c69a006b893842c39434fbab912f)** to **[`9404a52`](https://github.com/sagemath/sagetrac-mirror/commit/9404a525957ccd7efee3c929c0d72afcdd329a69)**",
    "created_at": "2016-12-16T12:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312493",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5e46e54`](https://github.com/sagemath/sagetrac-mirror/commit/5e46e5423e05c69a006b893842c39434fbab912f)** to **[`9404a52`](https://github.com/sagemath/sagetrac-mirror/commit/9404a525957ccd7efee3c929c0d72afcdd329a69)**



---

archive/issue_comments_312494.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9404a525957ccd7efee3c929c0d72afcdd329a69\"><code>9404a52</code></a></td><td><code>Docstring modification.</code></td></tr></table>\n",
    "created_at": "2016-12-16T12:47:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312494",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9404a525957ccd7efee3c929c0d72afcdd329a69"><code>9404a52</code></a></td><td><code>Docstring modification.</code></td></tr></table>




---

archive/issue_comments_312495.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nReplying to [@tscrim](#comment%3A29):\n\n> However, looking at the previous documentation, I like the flow better (1 element modular and then the definition for the entire poset).\n\nWell, yes and no. This is more logical if we think the function as a whole. OTOH if we see `is_modular()` without `L`-parameter a \"main function\" for this, then it should be said first. Anyways, I changed that.\n\n> Another possible optimization, which would mean more work, would be to push the actual comparison tests to `HasseDiagram` and just convert back the elements in the certificate. However, we don't have to do this on this ticket.\n\nTrue, but even more than that I should think about the algorithm itself. No time for that for now.",
    "created_at": "2016-12-16T12:51:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312495",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:31" align="right">comment:31</div>

Replying to [@tscrim](#comment%3A29):

> However, looking at the previous documentation, I like the flow better (1 element modular and then the definition for the entire poset).

Well, yes and no. This is more logical if we think the function as a whole. OTOH if we see `is_modular()` without `L`-parameter a "main function" for this, then it should be said first. Anyways, I changed that.

> Another possible optimization, which would mean more work, would be to push the actual comparison tests to `HasseDiagram` and just convert back the elements in the certificate. However, we don't have to do this on this ticket.

True, but even more than that I should think about the algorithm itself. No time for that for now.



---

archive/issue_comments_312496.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nMore modifications needed for the docstring?",
    "created_at": "2016-12-27T16:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312496",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:32" align="right">comment:32</div>

More modifications needed for the docstring?



---

archive/issue_comments_312497.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI would change it to:\n\n```\n        .. MATH::\n\n            x \\vee (a \\wedge b) = (x \\vee a) \\wedge b\n\n        for every element `x \\leq b` and `a`.\n```\nOtherwise LGTM and you can set a positive review on my behalf.",
    "created_at": "2017-01-02T00:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312497",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:33" align="right">comment:33</div>

I would change it to:

```
        .. MATH::

            x \vee (a \wedge b) = (x \vee a) \wedge b

        for every element `x \leq b` and `a`.
```
Otherwise LGTM and you can set a positive review on my behalf.



---

archive/issue_comments_312498.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-01-02T00:50:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312498",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_312499.json:
```json
{
    "body": "<div id=\"comment:34\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/68d40bda628cbe687772e524dbc40300d1e3a6b6\"><code>68d40bd</code></a></td><td><code>Docstring minor modification.</code></td></tr></table>\n",
    "created_at": "2017-01-02T07:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312499",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/68d40bda628cbe687772e524dbc40300d1e3a6b6"><code>68d40bd</code></a></td><td><code>Docstring minor modification.</code></td></tr></table>




---

archive/issue_comments_312500.json:
```json
{
    "body": "Changed commit from **[`9404a52`](https://github.com/sagemath/sagetrac-mirror/commit/9404a525957ccd7efee3c929c0d72afcdd329a69)** to **[`68d40bd`](https://github.com/sagemath/sagetrac-mirror/commit/68d40bda628cbe687772e524dbc40300d1e3a6b6)**",
    "created_at": "2017-01-02T07:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312500",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9404a52`](https://github.com/sagemath/sagetrac-mirror/commit/9404a525957ccd7efee3c929c0d72afcdd329a69)** to **[`68d40bd`](https://github.com/sagemath/sagetrac-mirror/commit/68d40bda628cbe687772e524dbc40300d1e3a6b6)**



---

archive/issue_events_297414.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-01-02T07:14:20Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297414"
}
```



---

archive/issue_events_297415.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-01-02T07:14:20Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297415"
}
```



---

archive/issue_comments_312501.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@tscrim](#comment%3A33):\n> I would change it to - -\n\nTrue, better now. Thanks!\n\nrc1 is out, also changed milestone.",
    "created_at": "2017-01-02T07:14:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312501",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@tscrim](#comment%3A33):
> I would change it to - -

True, better now. Thanks!

rc1 is out, also changed milestone.



---

archive/issue_events_297416.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-01-02T07:14:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297416"
}
```



---

archive/issue_events_297417.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2017-01-02T07:14:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297417"
}
```



---

archive/issue_events_297418.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-18T20:39:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297418"
}
```



---

archive/issue_events_297419.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "6e450be96ea836fcad8a3cb9e0cd1ff6879689f6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-01-18T20:39:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21354#event-297419"
}
```



---

archive/issue_comments_312502.json:
```json
{
    "body": "Changed branch from **[u/jmantysalo/dist-modular](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/dist-modular)** to **[`68d40bd`](https://github.com/sagemath/sagetrac-mirror/commit/68d40bda628cbe687772e524dbc40300d1e3a6b6)**",
    "created_at": "2017-01-18T20:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21354",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21354#issuecomment-312502",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jmantysalo/dist-modular](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/dist-modular)** to **[`68d40bd`](https://github.com/sagemath/sagetrac-mirror/commit/68d40bda628cbe687772e524dbc40300d1e3a6b6)**
