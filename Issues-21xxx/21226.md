# Issue 21226: An Abstract Class for Rank Metric Codes

archive/issues_020989.json:
```json
{
    "body": "We propose to implement `AbstractRankMetricCode`, an abstract class for rank metric codes which will initialize the basic parameters that every rank metric code possesses. This will inherit from `AbstractCode` class. Further, we propose to add rank-metric based methods to compute distance, weight and allow for matrix to vector (and reverse) conversions between representations. Finally, we create a generic representative class `LinearRankMetricCode` as well as encoding (generator matrix, systematic) and decoding (nearest neighbour) methods.\n\n\n\nAssignee: @emes4\n\nCC:  dlucas @johanrosenkilde @dimpase @xcaruso @adurand8 @mbombar @vbraun\n\nReviewer: Dima Pasechnik, Johan Rosenkilde, Xavier Caruso\n\nAuthor: Arpit Merchant, Marketa Slukova, Johan Rosenkilde\n\nBranch: 899d3900180c956773f3d34c53b96483aa95c57f\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21226\n\n",
    "closed_at": "2020-07-28T22:34:34Z",
    "created_at": "2016-08-11T14:54:35Z",
    "labels": [
        "component: coding theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.2",
    "title": "An Abstract Class for Rank Metric Codes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21226",
    "user": "https://github.com/arpitdm"
}
```
We propose to implement `AbstractRankMetricCode`, an abstract class for rank metric codes which will initialize the basic parameters that every rank metric code possesses. This will inherit from `AbstractCode` class. Further, we propose to add rank-metric based methods to compute distance, weight and allow for matrix to vector (and reverse) conversions between representations. Finally, we create a generic representative class `LinearRankMetricCode` as well as encoding (generator matrix, systematic) and decoding (nearest neighbour) methods.



Assignee: @emes4

CC:  dlucas @johanrosenkilde @dimpase @xcaruso @adurand8 @mbombar @vbraun

Reviewer: Dima Pasechnik, Johan Rosenkilde, Xavier Caruso

Author: Arpit Merchant, Marketa Slukova, Johan Rosenkilde

Branch: 899d3900180c956773f3d34c53b96483aa95c57f

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21226





---

archive/issue_comments_309145.json:
```json
{
    "body": "<a id='comment:2'></a>1. I've written a basic constructor for the class along with a couple of getter methods.\n2. I've added some modified rank-metric based methods. \n3. And deleted some methods from the ALC class according to the schema described in past discussions. There's about 10 more that need to be deleted similarly. I'm trying to see if this be written more compactly. Open to ideas.\n\nMore to follow.\n\n---\nNew commits:",
    "created_at": "2016-08-11T15:39:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309145",
    "user": "https://github.com/arpitdm"
}
```

<a id='comment:2'></a>1. I've written a basic constructor for the class along with a couple of getter methods.
2. I've added some modified rank-metric based methods. 
3. And deleted some methods from the ALC class according to the schema described in past discussions. There's about 10 more that need to be deleted similarly. I'm trying to see if this be written more compactly. Open to ideas.

More to follow.

---
New commits:



---

archive/issue_comments_309146.json:
```json
{
    "body": "<a id='comment:3'></a>Hello,\n\nI won't comment extensively for now, as there's still a lot to do.\nI just have one small comment/remark to keep in mind for later: when you will work on documentation, remember to carefully explain which representation you chose (matrix vs. vector) and how to get the other one to be sure users do understand how this class works\nand what they should expect from it.\n\nDavid",
    "created_at": "2016-08-11T16:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309146",
    "user": "https://trac.sagemath.org/admin/accounts/users/dlucas"
}
```

<a id='comment:3'></a>Hello,

I won't comment extensively for now, as there's still a lot to do.
I just have one small comment/remark to keep in mind for later: when you will work on documentation, remember to carefully explain which representation you chose (matrix vs. vector) and how to get the other one to be sure users do understand how this class works
and what they should expect from it.

David



---

archive/issue_comments_309147.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 dlucas]:\n> Hello,\n> \n> I won't comment extensively for now, as there's still a lot to do.\n> I just have one small comment/remark to keep in mind for later: when you will work on documentation, remember to carefully explain which representation you chose (matrix vs. vector) and how to get the other one to be sure users do understand how this class works\n> and what they should expect from it.\n\n\nSeconded. And remember to explain that this class *only* supports rank-metric codes which are linear over the big field!\n\nBest,\nJohan",
    "created_at": "2016-08-13T10:17:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309147",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:4'></a>Replying to [comment:3 dlucas]:
> Hello,
> 
> I won't comment extensively for now, as there's still a lot to do.
> I just have one small comment/remark to keep in mind for later: when you will work on documentation, remember to carefully explain which representation you chose (matrix vs. vector) and how to get the other one to be sure users do understand how this class works
> and what they should expect from it.


Seconded. And remember to explain that this class *only* supports rank-metric codes which are linear over the big field!

Best,
Johan



---

archive/issue_comments_309148.json:
```json
{
    "body": "<a id='comment:5'></a>What's the state of this? What is missing? When do you plan to do it?\n\nBest,\nJohan",
    "created_at": "2016-08-18T09:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309148",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:5'></a>What's the state of this? What is missing? When do you plan to do it?

Best,
Johan



---

archive/issue_comments_309149.json:
```json
{
    "body": "<a id='comment:6'></a>I think the class should be call `AbstractLinearRankMetricCode` by the way. It's terribly long, but the `Linear` is important.",
    "created_at": "2016-08-18T10:18:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309149",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:6'></a>I think the class should be call `AbstractLinearRankMetricCode` by the way. It's terribly long, but the `Linear` is important.



---

archive/issue_comments_309150.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,4 +1,6 @@\n-We propose to implement `AbstractRankMetricCode`, an abstract class for rank metric codes which will initialize the basic parameters that every rank metric code possesses. This will inherit from `AbstractLinearCode` class so that all relevant methods can be accessed and the others will be deleted. Further, we propose to add rank-metric based methods to compute distance, weight and allow for matrix to vector (and reverse) conversions between representations.\n+We propose to implement `AbstractRankMetricCode`, an abstract class for rank metric codes which will initialize the basic parameters that every rank metric code possesses. This will inherit from `AbstractCode` class. Further, we propose to add rank-metric based methods to compute distance, weight and allow for matrix to vector (and reverse) conversions between representations. Finally, we create a generic representative class `LinearRankMetricCode` as well as encoding (generator matrix, systematic) and decoding (nearest neighbour) methods.\n+\n+\n \n Author: Arpit Merchant\n \n``````\n",
    "created_at": "2019-07-11T13:54:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309150",
    "user": "https://github.com/emes4"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,4 +1,6 @@
-We propose to implement `AbstractRankMetricCode`, an abstract class for rank metric codes which will initialize the basic parameters that every rank metric code possesses. This will inherit from `AbstractLinearCode` class so that all relevant methods can be accessed and the others will be deleted. Further, we propose to add rank-metric based methods to compute distance, weight and allow for matrix to vector (and reverse) conversions between representations.
+We propose to implement `AbstractRankMetricCode`, an abstract class for rank metric codes which will initialize the basic parameters that every rank metric code possesses. This will inherit from `AbstractCode` class. Further, we propose to add rank-metric based methods to compute distance, weight and allow for matrix to vector (and reverse) conversions between representations. Finally, we create a generic representative class `LinearRankMetricCode` as well as encoding (generator matrix, systematic) and decoding (nearest neighbour) methods.
+
+
 
 Author: Arpit Merchant
 
``````




---

archive/issue_comments_309151.json:
```json
{
    "body": "<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2019-07-11T13:55:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309151",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_309152.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T15:27:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309152",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309153.json:
```json
{
    "body": "Set assignee to @emes4.",
    "created_at": "2019-07-11T15:29:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309153",
    "user": "https://github.com/emes4"
}
```

Set assignee to @emes4.



---

archive/issue_comments_309154.json:
```json
{
    "body": "<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-11T20:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309154",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:11'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309155.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-19T16:33:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309155",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309156.json:
```json
{
    "body": "<a id='comment:15'></a>Finished up everything and added documentation and doc tests. Few notes:\n\nI kept the parameter requirement that the length of the code has to be at most the degree of the extension.\n\nI didn't manage to turn off the experimental warning, except for handling it in doc tests.\n\nI will add a doctest for the method `decode_to_code` when Gabidulin codes are in place.\n\nThere is no test for linearity over the big field and also no test for the finite field extension in the initialising parameters of `AbstractLinearRankMetricCode`.\n\nI also added a very slow algorithm for computing the minimum distance.",
    "created_at": "2019-07-19T16:38:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309156",
    "user": "https://github.com/emes4"
}
```

<a id='comment:15'></a>Finished up everything and added documentation and doc tests. Few notes:

I kept the parameter requirement that the length of the code has to be at most the degree of the extension.

I didn't manage to turn off the experimental warning, except for handling it in doc tests.

I will add a doctest for the method `decode_to_code` when Gabidulin codes are in place.

There is no test for linearity over the big field and also no test for the finite field extension in the initialising parameters of `AbstractLinearRankMetricCode`.

I also added a very slow algorithm for computing the minimum distance.



---

archive/issue_comments_309157.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2019-07-19T16:39:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309157",
    "user": "https://github.com/emes4"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_309158.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-07-22T10:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309158",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309159.json:
```json
{
    "body": "<a id='comment:19'></a>This looks very good! Though my list of comments below is long, I think that\nthis first stab at the class is very good work :-)\n\nIn the module doc of `linear_rank_metric`:\n\n* Add the following paragraphs:\n\n  {{{\n  This module allows representing rank metric codes which are linear over the\n  big field `F_{q^m}`, i.e. the usual linearity condition when the codewords are\n  considered in vector form. One can also consider rank metric codes which are\n  only linear over `F_q`, but these are not currently supported in [SageMath](SageMath).\n\n  Note that linear rank metric codes per the definition of this file are\n  mathematically just linear block codes, and so could be considered as a\n  :class:`sage.coding.linear_code.LinearCode`. However, since most of the\n  functionality of that class is specific to the Hamming metric, the two notions\n  are implemented as entirely different in [SageMath](SageMath). If you wish to investigate\n  Hamming-metric properties of a linear rank metric code ``C``, you can easily\n  convert it by calling ``C_hamm = LinearCode(C.generator_matrix())``.\n  }}}\n\n* Remove the sentence \"One of the main uses ...\". This is subjective and very\n  much subject to change :-) Further, the main thrust of rank metric codes in\n  the last 15 years are their applications in network coding, and not crypto.\n\n* \"The class `(...).LinearRankMetricCode` is a representative of ...\". Perhaps\n  this sentence should be something like\n\n  \"The class `(...).LinearRankMetricCode` is the analog of `(...).LinearCode`,\n  i.e. it is a generator matrix-based representation of a linear rank metric\n  code without specific knowledge on the structure of the code.\n\n* \"Gabidulin codes are ... studied at the moment\". Just remove \"studied at the\n  moment\". The sentence after could be reformulated to \"These codes are the\n  rank-metric analog of Reed-Solomon codes\".\n\n* The headline `AbstractLinearCode` should be `AbstractLinearRankMetricCode`.\n\n* \"However, using the encoder/decoder framework requires the vector\n  representation of codewords\". This caveat is important but perhaps not\n  well-placed here. I think I'd rather like to see it in the class doc of\n  `AbstractLinearRankMetricCode` during a complete example of how to implement a\n  code class.\n\n* \"so any linear code rank metric\" -> \"so any linear rank metric code\".\n\n* Under Further references, I think the link to Wikipedia should be a proper\n  citation inserted into the citation file, see http://doc.sagemath.org/html/en/developer/coding_basics.html\n\n  Dima, what do you say?\n\nAbout the to/from matrix repr:\n\n* The class `RelativeFiniteFieldExtension` does a lot of computation the first\n  time it is used (inverting an `m * m` matrix) and the result is then cached.\n  Your two functions throw away the `RelativeFiniteFieldExtension` object each\n  time they are called. You need to somehow cache that object between\n  invocations of the function having the same base field and sub field.\n\n  One solution is to drop your global-scope functions and only have them inside\n  `AbstractLinearRankMetricCode`. Then the `RelativeFiniteFieldExtension` object\n  can be placed as a private field of the code object after the first time it is\n  used. In fact, I see now that you allow the user to supply the\n  `field_extension` (which should be a `RelativeFiniteFieldExtension` object)\n  but you don't use it!\n\n  The downside is that it does make sense to have those functions outside the\n  class. By using the `@`cached_method decorator or one of its friends, you might\n  be able to more or less manually indicate that the\n  `RelativeFiniteFieldExtension` object should be cached between invocations\n\n* `to_matrix_representation` doesn't really need `base_field` since this is just\n  the base field of `v`. Perhaps the argument order should be `v,\n  sub_field=None`, and if `sub_field` is not set, then the prime field is just\n  assumed.\n\n  A similar thing holds for `from_matrix_representation`: here we need neither\n  the `sub_field` nor the `base_field`. However, the `base_field` should be\n  possible to supply in case the user has constructed the big field using a\n  specific irreducible polynomial, say.\n\n  For `rank_weight` and `rank_distance`, we should use the same signature as\n  `to_matrix_representation`.\n\n  Note that both of these functions are severely limited in that they do not\n  allow the user to select the basis of `GF(q^m)/GF(q)`. This is of course due\n  to exactly that limitation in `RelativeFiniteFieldExtension`, so it's not your\n  fault, but it should be documented somewhere. This is not well-documented in\n  `RelativeFiniteFieldExtension` either, I realise. Perhaps you could add the\n  following paragraph to the class doc of `RelativeFiniteFieldExtension`,\n  together with some shorter description of the same in your to/from\n  matrix-functions along with a reference to the doc of\n  `RelativeFiniteFieldExtension`:\n\n  {{{\nThis class currently does not support choosing an arbitrary basis of `F_{q^m}`\nover `F_q`, but instead uses the following: if `q = p^s`, then let\n`1,\\beta,\\ldots,\\beta^{sm}` be the power basis that [SageMath](SageMath) uses to represent\n`F_{q^m}`. Then `1,\\beta,\\ldots,beta^{m-1}` is a basis of `F_{q^m}` over `F_q`.\nThis class uses that basis.\n  }}}\n  \n* The conformal checks in `rank_distance` should be before the\n  `to_matrix_representation` calls. (the number of columns is the length of `a`\n  and `b` and the number of rows is taken care of by the check on `base_ring`.\n\n* You are missing INPUT blocks to many functions, in particular all the\n  global-scope matrix functions.\n\n\nIn `AbstractLinearRankMetricCode`:\n\n* Class doc: \"The current implementation (...) supports only the vector\n  representation. This means that to use the encoder/decoder framework. one has\n  to work with vectors\". Let's shorten that instead as something like:\n\n  \"This implementation principally uses the vector representation.\"\n\n  Most users wouldn't care about the technical detail of \"the encoder/decoder\n  framework\". That's just stuff that should work :-) Using the vector form is\n  also a perfectly natural choice (and another would be to principally use the\n  matrix form), and I don't think we really have to argue about it.\n\n  I'm OK with your \"Instructions on how ...\" block, but add also a reference to\n  the `__init__` doc which actually contains an example for\n  `AbstractLinearRankMetricCode`.\n\n* I think we should apply the same convention as in `(Abstract)LinearCode`, that\n  a subclass of `AbstractLinearRankMetricCode` must supply a generator matrix. Then\n  `__iter__` and `__hash__` can be defined on `AbstractLinearRankMetricCode`.\n\n  This also means we don't have to override `__iter__` it in the examples.\n\n  This would be conformed to anyway by the refactor with `AbstractLinearCodeNoMetric` I suggest below.\n\n* The `MyRankMetricCode` example is basically a stripped version of\n  `LinearRankMetricCode`. Perhaps we should make it into an easy specific\n  family, e.g.\n\n   {{{\n            sage: from sage.coding.linear_rank_metric import AbstractLinearRankMetricCode\n            sage: class RankRepetitionCode(AbstractLinearRankMetricCode):\n            ....:   def __init__(self, base_field, sub_field, length):\n            ....:       sage.coding.linear_rank_metric.AbstractLinearRankMetricCode.__init__(self, base_field, sub_field, length, 1, \"GeneratorMatrix\", \"NearestNeighbor\")\n            ....:       beta = base_field.gen()\n            ....:       self._generator_matrix = matrix(base_field, [This is the Trac macro *beta^i for i in range* that was inherited from the migration called with arguments (length) )](https://trac.sagemath.org/wiki/WikiMacros#beta^i for i in range-macro)) \n            ....:   def generator_matrix(self):\n            ....:       return self._generator_matrix\n            ....:   def _repr_(self):\n            ....:       return \"[%d, %d] my rank-metric repetition code over GF(%s)\" % (self.length(), self.dimension(), self.base_field().cardinality())\n    }}}\n\n    Note that I didn't test this code. As long as `length <=\n    |base_field/sub_field|` then this code should have minimum rank distance `length`.\n\n* Currently the method `field_extension()` returns `None` when the user didn't\n  supply a specific `field_extension`. In the refactor of this issue mentioned\n  above, make sure that this method always makes sense.\n\n* In the doc of `extension_degree` you could add the sentence \"This is also the\n  number of rows in the matrix form of a codeword of `self`.\".\n\n* Some method rename suggestions:\n\n  {{{\n  distance    -> rank_distance_between_vectors\n  weight      -> rank_weight_of_vector\n  to_matrix   -> matrix_form_of_vector\n  from_matrix -> vector_form_of_matrix\n  }}}\n\n  All their docs are sorely missing INPUT blocks.\n\n* The question is whether `minimum_distance` should be called\n  `minimum_rank_distance`? I'm torn between disliking the redundancy but liking\n  the \"explicit is better than implicit\". Dima, what's your opinion?\n\n* In `minimum_distance`, use `sage.rings.infinity.infinity` (possibly\n  with capital letter?) instead of `float('inf')`.\n\n* In docs: \"code word\" -> \"codeword\".\n\n* There's after all a fair amount of code duplication with `AbstractLinearCode`\n  I'm thinking that we should make a class `AbstractLinearCodeNoMetric` which\n  contains the methods:\n\n  {{{\n  `ambient_space`, `base_field`, `basis`, `dimension`, `generator_matrix`,\n  `parity_check_matrix`, `syndrome`, `__contains__`, `information_set`,\n  `is_information_set`, `dual_code`, `__getitem__`,\n  `systematic_generator_matrix`, `gens`, `__iter__`,\n  `is_permutation_automorphism`, `is_self_dual`, `is_self_orthogonal`,\n  `is_subcode`, `cardinality`, `permuted_code`, `rate`, `redundancy_matrix,\n  `standard_form`, `__hash__`\n  }}}\n\n  Not only is this a lot of saved copied code, it also adds a lot of service to\n  the current proposed rank metric codes!\n\n  This could inherit from `AbstractCode`, and both `AbstractLinearCode` and\n  `AbstractLinearRankMetricCode` inherits from `AbstractLinearCodeNoMetric`.\n\n  To properly test these methods both for linear codes and linear rank metric\n  codes, perhaps we should add a `_test_abstractcode_methods`-function in\n  `AbstractLinearCodeNoMetric that can then be run in a doc-test for both\n  `LinearCode` and `LinearRankMetricCode` using `TestSuite` (see the\n  documentation for `TestSuite` to know what I mean). A test at this level of\n  abstraction would often be nothing but calling the method and making sure it\n  doesn't throw an exception, but a few of them could be slightly more\n  interesting (like C.dual().dual() == C).\n\n* We should follow the same convention as in `AbstractLinearCode` that the\n  dimension is not given at construction time. For some codes it can be\n  expensive to determine the dimension, e.g. for algebraic geometry codes. When\n  designing these classes we were very careful that you don't pay for what you\n  don't use, so construction is usually cheap, and then you pay only when\n  calling whatever methods. Note that if you introduce\n  `AbstractLinearCodeNoMetric` as suggested above, then we have to follow this\n  convention anyway.\n\nIn `LinearRankMetricCode`:\n\n* The reason the `__init__` argument `generator` is not called\n  `generator_matrix` is that we also accept e.g. a code or a vector space.\n  That's why we have the complicated `try...except` block. Please fix the INPUT\n  doc.\n\n* Perhaps the order of arguments should be `__init__(generator_matrix, sub_field)` and `sub_field` could be optional, defaulting to the prime field of `base_field`.\n\n* In `_repr_` and `_latex_` we should include the sub-field. So perhaps the\n  printing should be something like:\n  \n    [3, 2] linear rank metric code over GF(64)/GF(4)\n\n* After introducing `AbstractLinearCodeNoMetric` perhaps we can completely avoid\n  the two special rank-metric encoders, and just use\n  `LinearCodeGeneratorMatrixEncoder` and `LinearCodeSystematicEncoder` (after\n  suitable modifications in their doc and perhaps adding a doc-test where they\n  are invoked with a `LinearRankMetricCode`.). I think this will work, but I'm not completely sure.\n\n* In `LinearRankMetricCodeNearestNeighborDecoder.decode_to_code`, you could\n  benefit from introducing `C = self.code()`.",
    "created_at": "2019-07-31T09:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309159",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:19'></a>This looks very good! Though my list of comments below is long, I think that
this first stab at the class is very good work :-)

In the module doc of `linear_rank_metric`:

* Add the following paragraphs:

  {{{
  This module allows representing rank metric codes which are linear over the
  big field `F_{q^m}`, i.e. the usual linearity condition when the codewords are
  considered in vector form. One can also consider rank metric codes which are
  only linear over `F_q`, but these are not currently supported in [SageMath](SageMath).

  Note that linear rank metric codes per the definition of this file are
  mathematically just linear block codes, and so could be considered as a
  :class:`sage.coding.linear_code.LinearCode`. However, since most of the
  functionality of that class is specific to the Hamming metric, the two notions
  are implemented as entirely different in [SageMath](SageMath). If you wish to investigate
  Hamming-metric properties of a linear rank metric code ``C``, you can easily
  convert it by calling ``C_hamm = LinearCode(C.generator_matrix())``.
  }}}

* Remove the sentence "One of the main uses ...". This is subjective and very
  much subject to change :-) Further, the main thrust of rank metric codes in
  the last 15 years are their applications in network coding, and not crypto.

* "The class `(...).LinearRankMetricCode` is a representative of ...". Perhaps
  this sentence should be something like

  "The class `(...).LinearRankMetricCode` is the analog of `(...).LinearCode`,
  i.e. it is a generator matrix-based representation of a linear rank metric
  code without specific knowledge on the structure of the code.

* "Gabidulin codes are ... studied at the moment". Just remove "studied at the
  moment". The sentence after could be reformulated to "These codes are the
  rank-metric analog of Reed-Solomon codes".

* The headline `AbstractLinearCode` should be `AbstractLinearRankMetricCode`.

* "However, using the encoder/decoder framework requires the vector
  representation of codewords". This caveat is important but perhaps not
  well-placed here. I think I'd rather like to see it in the class doc of
  `AbstractLinearRankMetricCode` during a complete example of how to implement a
  code class.

* "so any linear code rank metric" -> "so any linear rank metric code".

* Under Further references, I think the link to Wikipedia should be a proper
  citation inserted into the citation file, see http://doc.sagemath.org/html/en/developer/coding_basics.html

  Dima, what do you say?

About the to/from matrix repr:

* The class `RelativeFiniteFieldExtension` does a lot of computation the first
  time it is used (inverting an `m * m` matrix) and the result is then cached.
  Your two functions throw away the `RelativeFiniteFieldExtension` object each
  time they are called. You need to somehow cache that object between
  invocations of the function having the same base field and sub field.

  One solution is to drop your global-scope functions and only have them inside
  `AbstractLinearRankMetricCode`. Then the `RelativeFiniteFieldExtension` object
  can be placed as a private field of the code object after the first time it is
  used. In fact, I see now that you allow the user to supply the
  `field_extension` (which should be a `RelativeFiniteFieldExtension` object)
  but you don't use it!

  The downside is that it does make sense to have those functions outside the
  class. By using the `@`cached_method decorator or one of its friends, you might
  be able to more or less manually indicate that the
  `RelativeFiniteFieldExtension` object should be cached between invocations

* `to_matrix_representation` doesn't really need `base_field` since this is just
  the base field of `v`. Perhaps the argument order should be `v,
  sub_field=None`, and if `sub_field` is not set, then the prime field is just
  assumed.

  A similar thing holds for `from_matrix_representation`: here we need neither
  the `sub_field` nor the `base_field`. However, the `base_field` should be
  possible to supply in case the user has constructed the big field using a
  specific irreducible polynomial, say.

  For `rank_weight` and `rank_distance`, we should use the same signature as
  `to_matrix_representation`.

  Note that both of these functions are severely limited in that they do not
  allow the user to select the basis of `GF(q^m)/GF(q)`. This is of course due
  to exactly that limitation in `RelativeFiniteFieldExtension`, so it's not your
  fault, but it should be documented somewhere. This is not well-documented in
  `RelativeFiniteFieldExtension` either, I realise. Perhaps you could add the
  following paragraph to the class doc of `RelativeFiniteFieldExtension`,
  together with some shorter description of the same in your to/from
  matrix-functions along with a reference to the doc of
  `RelativeFiniteFieldExtension`:

  {{{
This class currently does not support choosing an arbitrary basis of `F_{q^m}`
over `F_q`, but instead uses the following: if `q = p^s`, then let
`1,\beta,\ldots,\beta^{sm}` be the power basis that [SageMath](SageMath) uses to represent
`F_{q^m}`. Then `1,\beta,\ldots,beta^{m-1}` is a basis of `F_{q^m}` over `F_q`.
This class uses that basis.
  }}}
  
* The conformal checks in `rank_distance` should be before the
  `to_matrix_representation` calls. (the number of columns is the length of `a`
  and `b` and the number of rows is taken care of by the check on `base_ring`.

* You are missing INPUT blocks to many functions, in particular all the
  global-scope matrix functions.


In `AbstractLinearRankMetricCode`:

* Class doc: "The current implementation (...) supports only the vector
  representation. This means that to use the encoder/decoder framework. one has
  to work with vectors". Let's shorten that instead as something like:

  "This implementation principally uses the vector representation."

  Most users wouldn't care about the technical detail of "the encoder/decoder
  framework". That's just stuff that should work :-) Using the vector form is
  also a perfectly natural choice (and another would be to principally use the
  matrix form), and I don't think we really have to argue about it.

  I'm OK with your "Instructions on how ..." block, but add also a reference to
  the `__init__` doc which actually contains an example for
  `AbstractLinearRankMetricCode`.

* I think we should apply the same convention as in `(Abstract)LinearCode`, that
  a subclass of `AbstractLinearRankMetricCode` must supply a generator matrix. Then
  `__iter__` and `__hash__` can be defined on `AbstractLinearRankMetricCode`.

  This also means we don't have to override `__iter__` it in the examples.

  This would be conformed to anyway by the refactor with `AbstractLinearCodeNoMetric` I suggest below.

* The `MyRankMetricCode` example is basically a stripped version of
  `LinearRankMetricCode`. Perhaps we should make it into an easy specific
  family, e.g.

   {{{
            sage: from sage.coding.linear_rank_metric import AbstractLinearRankMetricCode
            sage: class RankRepetitionCode(AbstractLinearRankMetricCode):
            ....:   def __init__(self, base_field, sub_field, length):
            ....:       sage.coding.linear_rank_metric.AbstractLinearRankMetricCode.__init__(self, base_field, sub_field, length, 1, "GeneratorMatrix", "NearestNeighbor")
            ....:       beta = base_field.gen()
            ....:       self._generator_matrix = matrix(base_field, [This is the Trac macro *beta^i for i in range* that was inherited from the migration called with arguments (length) )](https://trac.sagemath.org/wiki/WikiMacros#beta^i for i in range-macro)) 
            ....:   def generator_matrix(self):
            ....:       return self._generator_matrix
            ....:   def _repr_(self):
            ....:       return "[%d, %d] my rank-metric repetition code over GF(%s)" % (self.length(), self.dimension(), self.base_field().cardinality())
    }}}

    Note that I didn't test this code. As long as `length <=
    |base_field/sub_field|` then this code should have minimum rank distance `length`.

* Currently the method `field_extension()` returns `None` when the user didn't
  supply a specific `field_extension`. In the refactor of this issue mentioned
  above, make sure that this method always makes sense.

* In the doc of `extension_degree` you could add the sentence "This is also the
  number of rows in the matrix form of a codeword of `self`.".

* Some method rename suggestions:

  {{{
  distance    -> rank_distance_between_vectors
  weight      -> rank_weight_of_vector
  to_matrix   -> matrix_form_of_vector
  from_matrix -> vector_form_of_matrix
  }}}

  All their docs are sorely missing INPUT blocks.

* The question is whether `minimum_distance` should be called
  `minimum_rank_distance`? I'm torn between disliking the redundancy but liking
  the "explicit is better than implicit". Dima, what's your opinion?

* In `minimum_distance`, use `sage.rings.infinity.infinity` (possibly
  with capital letter?) instead of `float('inf')`.

* In docs: "code word" -> "codeword".

* There's after all a fair amount of code duplication with `AbstractLinearCode`
  I'm thinking that we should make a class `AbstractLinearCodeNoMetric` which
  contains the methods:

  {{{
  `ambient_space`, `base_field`, `basis`, `dimension`, `generator_matrix`,
  `parity_check_matrix`, `syndrome`, `__contains__`, `information_set`,
  `is_information_set`, `dual_code`, `__getitem__`,
  `systematic_generator_matrix`, `gens`, `__iter__`,
  `is_permutation_automorphism`, `is_self_dual`, `is_self_orthogonal`,
  `is_subcode`, `cardinality`, `permuted_code`, `rate`, `redundancy_matrix,
  `standard_form`, `__hash__`
  }}}

  Not only is this a lot of saved copied code, it also adds a lot of service to
  the current proposed rank metric codes!

  This could inherit from `AbstractCode`, and both `AbstractLinearCode` and
  `AbstractLinearRankMetricCode` inherits from `AbstractLinearCodeNoMetric`.

  To properly test these methods both for linear codes and linear rank metric
  codes, perhaps we should add a `_test_abstractcode_methods`-function in
  `AbstractLinearCodeNoMetric that can then be run in a doc-test for both
  `LinearCode` and `LinearRankMetricCode` using `TestSuite` (see the
  documentation for `TestSuite` to know what I mean). A test at this level of
  abstraction would often be nothing but calling the method and making sure it
  doesn't throw an exception, but a few of them could be slightly more
  interesting (like C.dual().dual() == C).

* We should follow the same convention as in `AbstractLinearCode` that the
  dimension is not given at construction time. For some codes it can be
  expensive to determine the dimension, e.g. for algebraic geometry codes. When
  designing these classes we were very careful that you don't pay for what you
  don't use, so construction is usually cheap, and then you pay only when
  calling whatever methods. Note that if you introduce
  `AbstractLinearCodeNoMetric` as suggested above, then we have to follow this
  convention anyway.

In `LinearRankMetricCode`:

* The reason the `__init__` argument `generator` is not called
  `generator_matrix` is that we also accept e.g. a code or a vector space.
  That's why we have the complicated `try...except` block. Please fix the INPUT
  doc.

* Perhaps the order of arguments should be `__init__(generator_matrix, sub_field)` and `sub_field` could be optional, defaulting to the prime field of `base_field`.

* In `_repr_` and `_latex_` we should include the sub-field. So perhaps the
  printing should be something like:
  
    [3, 2] linear rank metric code over GF(64)/GF(4)

* After introducing `AbstractLinearCodeNoMetric` perhaps we can completely avoid
  the two special rank-metric encoders, and just use
  `LinearCodeGeneratorMatrixEncoder` and `LinearCodeSystematicEncoder` (after
  suitable modifications in their doc and perhaps adding a doc-test where they
  are invoked with a `LinearRankMetricCode`.). I think this will work, but I'm not completely sure.

* In `LinearRankMetricCodeNearestNeighborDecoder.decode_to_code`, you could
  benefit from introducing `C = self.code()`.



---

archive/issue_comments_309160.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2019-07-31T09:41:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309160",
    "user": "https://github.com/johanrosenkilde"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_309161.json:
```json
{
    "body": "<a id='comment:20'></a>Concerning my text added to the module doc, one can actually convert to a linear code simply by doing `C_hamm = LinearCode(C)`.",
    "created_at": "2019-08-02T07:42:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309161",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:20'></a>Concerning my text added to the module doc, one can actually convert to a linear code simply by doing `C_hamm = LinearCode(C)`.



---

archive/issue_comments_309162.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2019-08-18T20:20:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309162",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_309163.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-08-18T20:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309163",
    "user": "https://github.com/emes4"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_309164.json:
```json
{
    "body": "<a id='comment:23'></a>I made all the changes in Johan's comment.\n\nAlso merged in Linear Code No Metric and deleted the duplicate stuff.\n\nI removed Relative Finite Field Extension and replaced it with `vector_space` method, which also allows the user to choose a basis, which is now an initialising parameter for `AbstractLinearRankMetricCode` and `LinearRankMetricCode`. I just noticed that I forgot to add the `basis` parameter in the `Super` method of `LinearRankMetricCode`, will fix that now.\n\nI ran `make ptestlong` and there were no errors.",
    "created_at": "2019-08-18T20:24:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309164",
    "user": "https://github.com/emes4"
}
```

<a id='comment:23'></a>I made all the changes in Johan's comment.

Also merged in Linear Code No Metric and deleted the duplicate stuff.

I removed Relative Finite Field Extension and replaced it with `vector_space` method, which also allows the user to choose a basis, which is now an initialising parameter for `AbstractLinearRankMetricCode` and `LinearRankMetricCode`. I just noticed that I forgot to add the `basis` parameter in the `Super` method of `LinearRankMetricCode`, will fix that now.

I ran `make ptestlong` and there were no errors.



---

archive/issue_comments_309165.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-18T20:28:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309165",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309166.json:
```json
{
    "body": "<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-08-19T13:50:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309166",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_309167.json:
```json
{
    "body": "<a id='comment:29'></a>I merged with sage 9.1.beta2.\n\nLet me also point out that #21413 (about general field extensions) is now merged. I think it would be nice to rely on it in order to allow for more general fields than finite fields. Any thoughts?\n\n---\nNew commits:",
    "created_at": "2020-01-30T11:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309167",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:29'></a>I merged with sage 9.1.beta2.

Let me also point out that #21413 (about general field extensions) is now merged. I think it would be nice to rely on it in order to allow for more general fields than finite fields. Any thoughts?

---
New commits:



---

archive/issue_comments_309168.json:
```json
{
    "body": "<a id='comment:30'></a>As I already said on #28350, I'd like to see the work of gh-emes4 merged, and then more hacking can start.\n\nAside from this, I'm all for more general fields to be possible.",
    "created_at": "2020-01-30T11:17:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309168",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:30'></a>As I already said on #28350, I'd like to see the work of gh-emes4 merged, and then more hacking can start.

Aside from this, I'm all for more general fields to be possible.



---

archive/issue_comments_309169.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-08T11:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309169",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_309170.json:
```json
{
    "body": "<a id='comment:32'></a>did a straightforward merge on trac/develop (9.2.beta3). Tests pass!\n\n---\nNew commits:",
    "created_at": "2020-07-08T11:34:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309170",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>did a straightforward merge on trac/develop (9.2.beta3). Tests pass!

---
New commits:



---

archive/issue_comments_309171.json:
```json
{
    "body": "<a id='comment:34'></a>Awesome!",
    "created_at": "2020-07-08T13:55:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309171",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:34'></a>Awesome!



---

archive/issue_events_056587.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-07-14T16:31:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "milestone": "sage-9.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21226#event-56587"
}
```



---

archive/issue_comments_309172.json:
```json
{
    "body": "<a id='comment:36'></a>The method `sage.coding.linear_code_no_metric.__eq__` misses doctests.",
    "created_at": "2020-07-15T05:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309172",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:36'></a>The method `sage.coding.linear_code_no_metric.__eq__` misses doctests.



---

archive/issue_comments_309173.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-07-15T05:36:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309173",
    "user": "https://github.com/xcaruso"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_309174.json:
```json
{
    "body": "<a id='comment:38'></a>The `__eq__` method is also incorrect: two codes (= vector spaces) may be equal though their generator matrices are not. I'm fixing this.",
    "created_at": "2020-07-15T09:30:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309174",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:38'></a>The `__eq__` method is also incorrect: two codes (= vector spaces) may be equal though their generator matrices are not. I'm fixing this.



---

archive/issue_comments_309175.json:
```json
{
    "body": "<a id='comment:40'></a>I've fixed the issue with `__eq__` by implementing and documenting a correct version. Then `sage.coding.linear_code.AbstractLinearCode` had a redundant (and less efficient) implementation of `__eq__` that I removed. I also moved `__ne__` from that class to `AbstractLinearCodeNoMetric`.\n\nUsing `./sage -coverage`, I found that `linear_rank_code` had another method `decode_to_code` with no doctests. I added one. I discovered then that two other doctests of that file were running very slowly (>10 s), so I just changed the tests to a smaller ones which runs much faster.\n\n---\nNew commits:",
    "created_at": "2020-07-15T09:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309175",
    "user": "https://github.com/johanrosenkilde"
}
```

<a id='comment:40'></a>I've fixed the issue with `__eq__` by implementing and documenting a correct version. Then `sage.coding.linear_code.AbstractLinearCode` had a redundant (and less efficient) implementation of `__eq__` that I removed. I also moved `__ne__` from that class to `AbstractLinearCodeNoMetric`.

Using `./sage -coverage`, I found that `linear_rank_code` had another method `decode_to_code` with no doctests. I added one. I discovered then that two other doctests of that file were running very slowly (>10 s), so I just changed the tests to a smaller ones which runs much faster.

---
New commits:



---

archive/issue_comments_309176.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-07-15T09:51:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309176",
    "user": "https://github.com/johanrosenkilde"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_309177.json:
```json
{
    "body": "<a id='comment:41'></a>Thanks.\n\nSince I haven't really looked into the code of this ticket, I let Dima give again a positive review if appropriate.\n\nBtw, I'm wondering: is it preferable to implement `__eq__`, `__ne__`, etc. or `_richcmp_`? I believed that the latter solution was better, but I'm not sure.",
    "created_at": "2020-07-16T20:11:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309177",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:41'></a>Thanks.

Since I haven't really looked into the code of this ticket, I let Dima give again a positive review if appropriate.

Btw, I'm wondering: is it preferable to implement `__eq__`, `__ne__`, etc. or `_richcmp_`? I believed that the latter solution was better, but I'm not sure.



---

archive/issue_comments_309178.json:
```json
{
    "body": "<a id='comment:42'></a>Note also that the patchbot reported some warning (pyflakes, pycodestyle and blocks).",
    "created_at": "2020-07-16T20:12:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309178",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:42'></a>Note also that the patchbot reported some warning (pyflakes, pycodestyle and blocks).



---

archive/issue_comments_309179.json:
```json
{
    "body": "<a id='comment:43'></a>Thanks. First time I missed the _eq_ problem, as I thought it's just some kind of Python3 formality. Looks OK now.",
    "created_at": "2020-07-17T06:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309179",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:43'></a>Thanks. First time I missed the _eq_ problem, as I thought it's just some kind of Python3 formality. Looks OK now.



---

archive/issue_comments_309180.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-07-17T06:22:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309180",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_309181.json:
```json
{
    "body": "<a id='comment:44'></a>PDF docs don't build:\n\n```\n[docpdf] l.4668 \\(1,^^H\n[docpdf]               eta,\\ldots,^^Heta^{sm}\\) be the power basis that SageMath uses to\n```",
    "created_at": "2020-07-19T22:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309181",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:44'></a>PDF docs don't build:

```
[docpdf] l.4668 \(1,^^H
[docpdf]               eta,\ldots,^^Heta^{sm}\) be the power basis that SageMath uses to
```



---

archive/issue_comments_309182.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-07-19T22:34:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309182",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_309183.json:
```json
{
    "body": "<a id='comment:45'></a>hmm, is `\\beta` the problem, or `\\ldots`, or both?",
    "created_at": "2020-07-21T08:51:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309183",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:45'></a>hmm, is `\beta` the problem, or `\ldots`, or both?



---

archive/issue_comments_309184.json:
```json
{
    "body": "<a id='comment:46'></a>I'm not 100% sure but I think it comes from `\\beta`. However, I don't know what's wrong.\n\nBesides, reading this doctest, I find that it's not very clear; for instance, what is `q` is implicit and not obvious, I would say. Moreover, the two notations `GF(q)` and `F_{q}` are used to  refer to the same object (namely, the finite field with q elements) and I think that they are both incorrect, the correct one being `\\GF(q)`.",
    "created_at": "2020-07-21T13:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309184",
    "user": "https://github.com/xcaruso"
}
```

<a id='comment:46'></a>I'm not 100% sure but I think it comes from `\beta`. However, I don't know what's wrong.

Besides, reading this doctest, I find that it's not very clear; for instance, what is `q` is implicit and not obvious, I would say. Moreover, the two notations `GF(q)` and `F_{q}` are used to  refer to the same object (namely, the finite field with q elements) and I think that they are both incorrect, the correct one being `\GF(q)`.



---

archive/issue_comments_309185.json:
```json
{
    "body": "<a id='comment:47'></a>by the way, there are typos - beta vs \\beta in 6 places.\n\nPerhaps \\beta must be added to some silly list... (and/or written in utf-8)",
    "created_at": "2020-07-21T13:09:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309185",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:47'></a>by the way, there are typos - beta vs \beta in 6 places.

Perhaps \beta must be added to some silly list... (and/or written in utf-8)



---

archive/issue_comments_309186.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-07-22T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309186",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_309187.json:
```json
{
    "body": "<a id='comment:48'></a>ok, this works with pdf\n\n---\nNew commits:",
    "created_at": "2020-07-22T08:44:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309187",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:48'></a>ok, this works with pdf

---
New commits:



---

archive/issue_comments_309188.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-07-28T22:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309188",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_056588.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-07-28T22:34:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21226#event-56588"
}
```



---

archive/issue_comments_309189.json:
```json
{
    "body": "<a id='comment:50'></a>the last commit did not make it into the beta, or got overwritten",
    "created_at": "2020-08-01T11:28:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309189",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:50'></a>the last commit did not make it into the beta, or got overwritten



---

archive/issue_comments_309190.json:
```json
{
    "body": "<a id='comment:51'></a>Volker, something went missing with this merge, e.g. the last commit, \u200b899d390, did not get merged.\n\u200b",
    "created_at": "2020-08-01T11:34:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309190",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:51'></a>Volker, something went missing with this merge, e.g. the last commit, 899d390, did not get merged.




---

archive/issue_comments_309191.json:
```json
{
    "body": "<a id='comment:52'></a>This ticket isn't in any relased beta yet. 899d390018 will be in 9.2.beta7 which I'm releasing right now",
    "created_at": "2020-08-02T17:44:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309191",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:52'></a>This ticket isn't in any relased beta yet. 899d390018 will be in 9.2.beta7 which I'm releasing right now



---

archive/issue_comments_309192.json:
```json
{
    "body": "<a id='comment:53'></a>OK - it was confusing that it was marked as closed already.",
    "created_at": "2020-08-02T18:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21226",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21226#issuecomment-309192",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:53'></a>OK - it was confusing that it was marked as closed already.
