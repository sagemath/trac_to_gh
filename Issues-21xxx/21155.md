# Issue 21155: implement Muzychuk's "prolific" constructions of strongly regular graphs

archive/issues_020918.json:
```json
{
    "body": "Currently one of few missing SRGs from A.E.Brouwer's database of SRGs is one with parameters (378,116,34,36), due to M.Muzychuk, construction S6 from \"A generalization of Wallis-Fon-Der-Flaass construction of strongly regular graphs.\" J. Algebr. Comb. 25(2), 169\u2013187 (2007).\n\nMost of the work is already done by Rowan Schrecker, and mostly just needed to be merged, see https://github.com/rschrecker/MuzychukProject\n(few easy bugs were fixed along the way, more examples/tests added, etc)\n\nCC:  rschrecker @videlec\n\nReviewer: David Coudert\n\nAuthor: Dima Pasechnik, Rowan Schrecker\n\nBranch: 4e4eba21393932601b30563397161719de83cb02\n\nDependencies: #19990\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21155\n\n",
    "closed_at": "2016-11-22T22:06:13Z",
    "created_at": "2016-08-03T12:04:14Z",
    "labels": [
        "component: graph theory"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "implement Muzychuk's \"prolific\" constructions of strongly regular graphs",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21155",
    "user": "https://github.com/dimpase"
}
```
Currently one of few missing SRGs from A.E.Brouwer's database of SRGs is one with parameters (378,116,34,36), due to M.Muzychuk, construction S6 from "A generalization of Wallis-Fon-Der-Flaass construction of strongly regular graphs." J. Algebr. Comb. 25(2), 169–187 (2007).

Most of the work is already done by Rowan Schrecker, and mostly just needed to be merged, see https://github.com/rschrecker/MuzychukProject
(few easy bugs were fixed along the way, more examples/tests added, etc)

CC:  rschrecker @videlec

Reviewer: David Coudert

Author: Dima Pasechnik, Rowan Schrecker

Branch: 4e4eba21393932601b30563397161719de83cb02

Dependencies: #19990

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21155





---

archive/issue_events_056439.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-08-08T16:53:39Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21155#event-56439"
}
```



---

archive/issue_comments_307720.json:
```json
{
    "body": "<a id='comment:2'></a>still needs some minor cleanup and more tests --- but works already\n\n---\nNew commits:",
    "created_at": "2016-10-07T00:02:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307720",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:2'></a>still needs some minor cleanup and more tests --- but works already

---
New commits:



---

archive/issue_comments_307721.json:
```json
{
    "body": "<a id='comment:3'></a>I had to chase and fix a bug in `MuzychukS6Graph`, which constructed wrong graph if the input, i.e. (n,d) were Python `int` rather than Sage `ZZ` type. (Division is differently behaving if you divide two ints in Python2...)",
    "created_at": "2016-10-07T08:26:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307721",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:3'></a>I had to chase and fix a bug in `MuzychukS6Graph`, which constructed wrong graph if the input, i.e. (n,d) were Python `int` rather than Sage `ZZ` type. (Division is differently behaving if you divide two ints in Python2...)



---

archive/issue_comments_307722.json:
```json
{
    "body": "<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-07T15:44:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307722",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:4'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307723.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,7 @@\n Currently one of few missing SRGs from A.E.Brouwer's database of SRGs is one with parameters (378,116,34,36), due to M.Muzychuk, construction S6 from \"A generalization of Wallis-Fon-Der-Flaass construction of strongly regular graphs.\" J. Algebr. Comb. 25(2), 169\u2013187 (2007).\n \n-Most of the work is already done by Rowan Schrecker, and just needs to be merged, see https://github.com/rschrecker/MuzychukProject\n+Most of the work is already done by Rowan Schrecker, and mostly just needed to be merged, see https://github.com/rschrecker/MuzychukProject\n+(few easy bugs were fixed along the way, more examples/tests added, etc)\n \n Comment: 1\n \n```\n",
    "created_at": "2016-10-07T15:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307723",
    "user": "https://github.com/dimpase"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,7 @@
 Currently one of few missing SRGs from A.E.Brouwer's database of SRGs is one with parameters (378,116,34,36), due to M.Muzychuk, construction S6 from "A generalization of Wallis-Fon-Der-Flaass construction of strongly regular graphs." J. Algebr. Comb. 25(2), 169–187 (2007).
 
-Most of the work is already done by Rowan Schrecker, and just needs to be merged, see https://github.com/rschrecker/MuzychukProject
+Most of the work is already done by Rowan Schrecker, and mostly just needed to be merged, see https://github.com/rschrecker/MuzychukProject
+(few easy bugs were fixed along the way, more examples/tests added, etc)
 
 Comment: 1
 
```




---

archive/issue_comments_307724.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-07T15:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307724",
    "user": "https://github.com/dimpase"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_307725.json:
```json
{
    "body": "<a id='comment:6'></a>Hello,\n\nclearly I don't understand your code, but I have simple remarks.\n\n```\n    for x in range(m):\n        L_i[x] = [edge for edge in L.edges(labels=False) if x in edge]\n```\nshould be \n\n```\n    for x in range(m):\n        L_i[x] = L.edges_incident(x, labels=False)\n```\n\nThen for this block\n\n```\n+    for C in ParClasses:\n+        EC = matrix(QQ, v)\n+        for i in range(v):\n+            for j in range(v):\n+                for line in C:\n+                    if i in line and j in line:\n+                        EC[i, j] = 1/k\n```\nWhy not using this instead. I assume that `line` is a pair.\n\n```\n+    for C in ParClasses:\n+        EC = matrix(QQ, v)\n+        for line in C:\n+            EC[i, j] = E[j, i] = 1/k\n```\n\n* `[i, j] = line` -> `i,j = line`",
    "created_at": "2016-10-07T19:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307725",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:6'></a>Hello,

clearly I don't understand your code, but I have simple remarks.

```
    for x in range(m):
        L_i[x] = [edge for edge in L.edges(labels=False) if x in edge]
```
should be 

```
    for x in range(m):
        L_i[x] = L.edges_incident(x, labels=False)
```

Then for this block

```
+    for C in ParClasses:
+        EC = matrix(QQ, v)
+        for i in range(v):
+            for j in range(v):
+                for line in C:
+                    if i in line and j in line:
+                        EC[i, j] = 1/k
```
Why not using this instead. I assume that `line` is a pair.

```
+    for C in ParClasses:
+        EC = matrix(QQ, v)
+        for line in C:
+            EC[i, j] = E[j, i] = 1/k
```

* `[i, j] = line` -> `i,j = line`



---

archive/issue_comments_307726.json:
```json
{
    "body": "<a id='comment:7'></a>Replying to [comment:6 dcoudert]:\n> Hello,\n> \n> clearly I don't understand your code, but I have simple remarks.\n> \n> \n> ```\n>     for x in range(m):\n>         L_i[x] = [edge for edge in L.edges(labels=False) if x in edge]\n> ```\n> should be \n> \n> ```\n>     for x in range(m):\n>         L_i[x] = L.edges_incident(x, labels=False)\n> ```\n\n\nright, thanks for pointing this out.\n\n> \n> Then for this block\n> \n> ```\n> +    for C in ParClasses:\n> +        EC = matrix(QQ, v)\n> +        for i in range(v):\n> +            for j in range(v):\n> +                for line in C:\n> +                    if i in line and j in line:\n> +                        EC[i, j] = 1/k\n> ```\n> Why not using this instead. I assume that `line` is a pair.\n\n\nno, `line` is a hyperplane in the (d-1)-dimensional affine space over GF(n), and `C` is a class of\nparallel hyperplanes.\n\n> {{{\n> +    for C in ParClasses:\n> +        EC = matrix(QQ, v)\n> +        for line in C:\n> +            EC[i, j] = E[j, i] = 1/k\n> }}}\n> \n> * `[i, j] = line` -> `i,j = line`",
    "created_at": "2016-10-09T09:20:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307726",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:7'></a>Replying to [comment:6 dcoudert]:
> Hello,
> 
> clearly I don't understand your code, but I have simple remarks.
> 
> 
> ```
>     for x in range(m):
>         L_i[x] = [edge for edge in L.edges(labels=False) if x in edge]
> ```
> should be 
> 
> ```
>     for x in range(m):
>         L_i[x] = L.edges_incident(x, labels=False)
> ```


right, thanks for pointing this out.

> 
> Then for this block
> 
> ```
> +    for C in ParClasses:
> +        EC = matrix(QQ, v)
> +        for i in range(v):
> +            for j in range(v):
> +                for line in C:
> +                    if i in line and j in line:
> +                        EC[i, j] = 1/k
> ```
> Why not using this instead. I assume that `line` is a pair.


no, `line` is a hyperplane in the (d-1)-dimensional affine space over GF(n), and `C` is a class of
parallel hyperplanes.

> {{{
> +    for C in ParClasses:
> +        EC = matrix(QQ, v)
> +        for line in C:
> +            EC[i, j] = E[j, i] = 1/k
> }}}
> 
> * `[i, j] = line` -> `i,j = line`



---

archive/issue_comments_307727.json:
```json
{
    "body": "<a id='comment:8'></a>> no, `line` is a hyperplane in the (d-1)-dimensional affine space over GF(n), and `C` is a class of\n> parallel hyperplanes.\n\nOK, so you can at least do:\n\n```\nfor C in ParClasses:\n    EC = matrix(QQ, v)\n    for i in range(v):\n        for line in C:\n            if not i in line:\n                continue\n            for j in range(i+1,v):\n                if j in line:\n                    EC[i, j] = EC[j, i] = 1/k\n```",
    "created_at": "2016-10-09T11:44:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307727",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'></a>> no, `line` is a hyperplane in the (d-1)-dimensional affine space over GF(n), and `C` is a class of
> parallel hyperplanes.

OK, so you can at least do:

```
for C in ParClasses:
    EC = matrix(QQ, v)
    for i in range(v):
        for line in C:
            if not i in line:
                continue
            for j in range(i+1,v):
                if j in line:
                    EC[i, j] = EC[j, i] = 1/k
```



---

archive/issue_comments_307728.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-09T18:17:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307728",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307729.json:
```json
{
    "body": "<a id='comment:10'></a>test, pls ignore",
    "created_at": "2016-10-14T12:36:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307729",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:10'></a>test, pls ignore



---

archive/issue_comments_307730.json:
```json
{
    "body": "<a id='comment:11'></a>Replying to [comment:10 dimpase]:\n> test, pls ignore\n\ntest2",
    "created_at": "2016-10-14T12:43:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307730",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:11'></a>Replying to [comment:10 dimpase]:
> test, pls ignore

test2



---

archive/issue_comments_307731.json:
```json
{
    "body": "<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-24T21:32:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307731",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_events_056440.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-10-24T21:33:48Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21155#event-56440"
}
```



---

archive/issue_events_056441.json:
```json
{
    "actor": "https://github.com/dimpase",
    "created_at": "2016-10-24T21:33:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21155#event-56441"
}
```



---

archive/issue_comments_307732.json:
```json
{
    "body": "<a id='comment:13'></a>more doc cleanup, testing 'random' options properly (and fixing bugs on the way).",
    "created_at": "2016-10-24T21:33:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307732",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:13'></a>more doc cleanup, testing 'random' options properly (and fixing bugs on the way).



---

archive/issue_comments_307733.json:
```json
{
    "body": "<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2016-10-24T21:36:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307733",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_307734.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-27T15:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307734",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307735.json:
```json
{
    "body": "<a id='comment:16'></a>\n```\n+    from __builtin__ import range\n```\nI suggest to use instead\n\n```\nfrom six.moves import range\n```\n(as fast as xrange)",
    "created_at": "2016-10-27T19:18:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307735",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>
```
+    from __builtin__ import range
```
I suggest to use instead

```
from six.moves import range
```
(as fast as xrange)



---

archive/issue_comments_307736.json:
```json
{
    "body": "<a id='comment:17'></a>Replying to [comment:16 chapoton]:\n> {{{\n> +    from __builtin__ import range\n> }}}\n> I suggest to use instead\n> \n> ```\n> from six.moves import range\n> ```\n> (as fast as xrange)\n\n\nthis `range` does not have `.pop()`, while it is used in the code.\n(and this is exactly why I added this import in the 1st place).",
    "created_at": "2016-10-27T19:44:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307736",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:17'></a>Replying to [comment:16 chapoton]:
> {{{
> +    from __builtin__ import range
> }}}
> I suggest to use instead
> 
> ```
> from six.moves import range
> ```
> (as fast as xrange)


this `range` does not have `.pop()`, while it is used in the code.
(and this is exactly why I added this import in the 1st place).



---

archive/issue_comments_307737.json:
```json
{
    "body": "<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-02T12:46:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307737",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:18'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307738.json:
```json
{
    "body": "<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-12T21:59:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307738",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:19'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307739.json:
```json
{
    "body": "<a id='comment:20'></a>this one is ready for review too...",
    "created_at": "2016-11-12T22:03:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307739",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:20'></a>this one is ready for review too...



---

archive/issue_comments_307740.json:
```json
{
    "body": "<a id='comment:21'></a>\n```\n.. [Mu07] M. Muzychuk.\n```\nshould be\n\n```\n.. [Mu07] \\M. Muzychuk.\n```\nfor obscure sphinx reasons",
    "created_at": "2016-11-18T07:33:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307740",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>
```
.. [Mu07] M. Muzychuk.
```
should be

```
.. [Mu07] \M. Muzychuk.
```
for obscure sphinx reasons



---

archive/issue_comments_307741.json:
```json
{
    "body": "<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-18T11:22:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307741",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:22'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307742.json:
```json
{
    "body": "<a id='comment:23'></a>Replying to [comment:21 chapoton]:\n> {{{\n> .. [Mu07] M. Muzychuk.\n> }}}\n> should be\n> \n> ```\n> .. [Mu07] \\M. Muzychuk.\n> ```\n> for obscure sphinx reasons\n\n\nfixed  by the latest commit.",
    "created_at": "2016-11-18T11:24:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307742",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:23'></a>Replying to [comment:21 chapoton]:
> {{{
> .. [Mu07] M. Muzychuk.
> }}}
> should be
> 
> ```
> .. [Mu07] \M. Muzychuk.
> ```
> for obscure sphinx reasons


fixed  by the latest commit.



---

archive/issue_comments_307743.json:
```json
{
    "body": "<a id='comment:24'></a>this should tell bots to run tests",
    "created_at": "2016-11-18T23:38:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307743",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:24'></a>this should tell bots to run tests



---

archive/issue_comments_307744.json:
```json
{
    "body": "<a id='comment:25'></a>Some possible minor improvements:\n\n1) test `assert d > 1, 'd must be at least 2'` first.\n\n2) replace \n\n```\n    L_i = [0]*m\n    for x in range(m):\n        L_i[x] = L.edges_incident(x, labels=False)\n```\nwith `L_i = [L.edges_incident(x, labels=False) for x in range(m)]`\n\n3) precompute `ones_v = ones/v`} and use `EC -= ones_v` to avoid computing `ones/v` for each parallel class. It is also reused later in the code\n\n4) use \n\n```\nfor i,j in itertools.combinations(line, 2):\n    EC[i,j] = EC[j,i] = 1/k\n```\n\n5) the block `elif Phi == 'fixed':` could be\n`Phi = {(x,line):val for x in range(m) for val,line in enumerate(L_i[x])} `\n\n6) `phi = {(x, line):ParClasses[Phi[(x, line)]] for x in range(m) for line in L_i[x]} `\n\n7) `A_i = [((v-k)/v)*ones - k*F_i[x] for x in range(m)]` or may be `A_i = [(v-k)*ones_v - k*F_i[x] for x in range(m)]`\n\n8) add seealso sections in methods `MuzychukS6Graph` and `is_muzychuk_S6`.\n\nAlso, you should add a space after each `#` to ease the readability.",
    "created_at": "2016-11-19T09:26:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307744",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:25'></a>Some possible minor improvements:

1) test `assert d > 1, 'd must be at least 2'` first.

2) replace 

```
    L_i = [0]*m
    for x in range(m):
        L_i[x] = L.edges_incident(x, labels=False)
```
with `L_i = [L.edges_incident(x, labels=False) for x in range(m)]`

3) precompute `ones_v = ones/v`} and use `EC -= ones_v` to avoid computing `ones/v` for each parallel class. It is also reused later in the code

4) use 

```
for i,j in itertools.combinations(line, 2):
    EC[i,j] = EC[j,i] = 1/k
```

5) the block `elif Phi == 'fixed':` could be
`Phi = {(x,line):val for x in range(m) for val,line in enumerate(L_i[x])} `

6) `phi = {(x, line):ParClasses[Phi[(x, line)]] for x in range(m) for line in L_i[x]} `

7) `A_i = [((v-k)/v)*ones - k*F_i[x] for x in range(m)]` or may be `A_i = [(v-k)*ones_v - k*F_i[x] for x in range(m)]`

8) add seealso sections in methods `MuzychukS6Graph` and `is_muzychuk_S6`.

Also, you should add a space after each `#` to ease the readability.



---

archive/issue_comments_307745.json:
```json
{
    "body": "<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-19T23:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307745",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307746.json:
```json
{
    "body": "<a id='comment:27'></a>OK, implemented, I also added few more `SEEALSO` for other strongly regular graphs, but I'd rather do this completely systematically on another ticket.",
    "created_at": "2016-11-19T23:29:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307746",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:27'></a>OK, implemented, I also added few more `SEEALSO` for other strongly regular graphs, but I'd rather do this completely systematically on another ticket.



---

archive/issue_comments_307747.json:
```json
{
    "body": "<a id='comment:28'></a>Method `MuzychukS6Graph` is working correctly. You still have to improve its description. Something is missing with the last sentence `Let L be the complete graph...`.\n\nI don't understand the proposed behavior of method `is_muzychuk_S6`. \n\n```\nsage: is_muzychuk_S6(378, 116, 34, 36)\n(<function MuzychukS6Graph at 0x19dce9cf8>, 3, 3)\nsage: is_muzychuk_S6(378, 116, 34, 37)\n```\nWith such a name, the method should return `True` or `False`, but it returns either the generator + parameters or nothing.\nThis is apparently the standard in `strongly_regular_db.pyx` but I don't understand this choice. Why not using an extra boolean parameter `certificate` to return either a boolean or a boolean plus the generator+parameters.",
    "created_at": "2016-11-20T13:50:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307747",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:28'></a>Method `MuzychukS6Graph` is working correctly. You still have to improve its description. Something is missing with the last sentence `Let L be the complete graph...`.

I don't understand the proposed behavior of method `is_muzychuk_S6`. 

```
sage: is_muzychuk_S6(378, 116, 34, 36)
(<function MuzychukS6Graph at 0x19dce9cf8>, 3, 3)
sage: is_muzychuk_S6(378, 116, 34, 37)
```
With such a name, the method should return `True` or `False`, but it returns either the generator + parameters or nothing.
This is apparently the standard in `strongly_regular_db.pyx` but I don't understand this choice. Why not using an extra boolean parameter `certificate` to return either a boolean or a boolean plus the generator+parameters.



---

archive/issue_comments_307748.json:
```json
{
    "body": "<a id='comment:29'></a>Replying to [comment:28 dcoudert]:\n> Method `MuzychukS6Graph` is working correctly. You still have to improve its description. Something is missing with the last sentence `Let L be the complete graph...`.\n\n\nI'll have a look, sure.\n\n> \n> I don't understand the proposed behavior of method `is_muzychuk_S6`. \n> \n> ```\n> sage: is_muzychuk_S6(378, 116, 34, 36)\n> (<function MuzychukS6Graph at 0x19dce9cf8>, 3, 3)\n> sage: is_muzychuk_S6(378, 116, 34, 37)\n> ```\n> With such a name, the method should return `True` or `False`, but it returns either the generator + parameters or nothing.\n> This is apparently the standard in `strongly_regular_db.pyx` but I don't understand this choice.\n\n\nthese `is_...()` are internal functions, optimised for speed. If `is_...()` returns nothing it indicates failure.\n\n> Why not using an extra boolean parameter `certificate` to return either a boolean or a boolean plus the generator+parameters.\n\n\nThey were not meant for outside use. Also note that returning a generator is almost as cheap as returning a boolean, so there is really little incentive in having an extra parameter.",
    "created_at": "2016-11-20T16:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307748",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:29'></a>Replying to [comment:28 dcoudert]:
> Method `MuzychukS6Graph` is working correctly. You still have to improve its description. Something is missing with the last sentence `Let L be the complete graph...`.


I'll have a look, sure.

> 
> I don't understand the proposed behavior of method `is_muzychuk_S6`. 
> 
> ```
> sage: is_muzychuk_S6(378, 116, 34, 36)
> (<function MuzychukS6Graph at 0x19dce9cf8>, 3, 3)
> sage: is_muzychuk_S6(378, 116, 34, 37)
> ```
> With such a name, the method should return `True` or `False`, but it returns either the generator + parameters or nothing.
> This is apparently the standard in `strongly_regular_db.pyx` but I don't understand this choice.


these `is_...()` are internal functions, optimised for speed. If `is_...()` returns nothing it indicates failure.

> Why not using an extra boolean parameter `certificate` to return either a boolean or a boolean plus the generator+parameters.


They were not meant for outside use. Also note that returning a generator is almost as cheap as returning a boolean, so there is really little incentive in having an extra parameter.



---

archive/issue_comments_307749.json:
```json
{
    "body": "<a id='comment:30'></a>> these `is_...()` are internal functions, optimised for speed. If `is_...()` returns nothing it indicates failure.\n\n\nif it's for internal use only, then it's ok.\n\n> They were not meant for outside use. Also note that returning a generator is almost as cheap as returning a boolean, so there is really little incentive in having an extra parameter.\n\n\nI agree. I didn't know that the methods are for internal use only. So no need for extra parameter.",
    "created_at": "2016-11-20T17:28:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307749",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:30'></a>> these `is_...()` are internal functions, optimised for speed. If `is_...()` returns nothing it indicates failure.


if it's for internal use only, then it's ok.

> They were not meant for outside use. Also note that returning a generator is almost as cheap as returning a boolean, so there is really little incentive in having an extra parameter.


I agree. I didn't know that the methods are for internal use only. So no need for extra parameter.



---

archive/issue_comments_307750.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-21T10:11:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307750",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307751.json:
```json
{
    "body": "<a id='comment:32'></a>Docs corrected. I meant to do this all along, but forgot, sorry about this.",
    "created_at": "2016-11-21T10:13:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307751",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:32'></a>Docs corrected. I meant to do this all along, but forgot, sorry about this.



---

archive/issue_comments_307752.json:
```json
{
    "body": "<a id='comment:33'></a>* two of then -> two of them\n* Use 80 columns format for documentation\n* Since #21454, references should be put in master biblio file\n\nAfter that it should be ok.",
    "created_at": "2016-11-21T11:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307752",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:33'></a>* two of then -> two of them
* Use 80 columns format for documentation
* Since #21454, references should be put in master biblio file

After that it should be ok.



---

archive/issue_comments_307753.json:
```json
{
    "body": "<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-21T11:58:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307753",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:34'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_307754.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:33 dcoudert]:\n> * two of then -> two of them\n \ndone \n> * Use 80 columns format for documentation\n \ndone\n> * Since #21454, references should be put in master biblio file\n \nnone of the files in `src/sage/graphs/` is touched by #21454.\nThis is obviously a task for another ticket, to move these references into the master.",
    "created_at": "2016-11-21T12:02:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307754",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:35'></a>Replying to [comment:33 dcoudert]:
> * two of then -> two of them
 
done 
> * Use 80 columns format for documentation
 
done
> * Since #21454, references should be put in master biblio file
 
none of the files in `src/sage/graphs/` is touched by #21454.
This is obviously a task for another ticket, to move these references into the master.



---

archive/issue_comments_307755.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-21T15:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307755",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_307756.json:
```json
{
    "body": "<a id='comment:36'></a>For me this patch is now good to go (compile, run, doctests, doc display nicely, etc.).",
    "created_at": "2016-11-21T15:26:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307756",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:36'></a>For me this patch is now good to go (compile, run, doctests, doc display nicely, etc.).



---

archive/issue_comments_307757.json:
```json
{
    "body": "<a id='comment:37'></a>Thanks. The next in line is #21890, if you have time...",
    "created_at": "2016-11-21T15:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307757",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:37'></a>Thanks. The next in line is #21890, if you have time...



---

archive/issue_events_056442.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-22T22:06:13Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21155#event-56442"
}
```



---

archive/issue_comments_307758.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-22T22:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21155",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21155#issuecomment-307758",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
