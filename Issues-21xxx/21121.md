# Issue 21121: Precision in doctest tolerance: x > x

archive/issues_020884.json:
```json
{
    "assignees": [],
    "body": "\n```\nFailed example:\n    A.exp()  # tol 1e-14\nExpected:\n    [-19.614602953804912 + 12.517743846762578*I   3.7949636449582176 + 28.88379930658099*I]\n    [ -32.383580980922254 + 21.88423595789845*I   2.269633004093535 + 44.901324827684824*I]\nGot:\n    [-19.614602953804923 + 12.517743846762574*I  3.7949636449582007 + 28.883799306580993*I]\n    [-32.383580980922275 + 21.884235957898447*I  2.2696330040935115 + 44.901324827684846*I]\nTolerance exceeded in 1 of 8:\n    2.269633004093535 vs 2.2696330040935115, tolerance 1e-14 > 1e-14\n```\n\nSage saying that 10<sup>-14</sup> > 10<sup>-14</sup> appears a bit stupid.\n\nThe attached branch fixes this by displaying `y > x` where:\n\n- `x` is the required tolerance (given in the doctest) with 15 digits, rounded to nearest.\n\n- `y` is the observed tolerance (computed by running the test) with 1 digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.\n\nAssuming that the tolerance in the doctest is given to at most 15 digits of precision (almost certainly the case), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.\n\nWe also refactor the implementation for printing tolerance errors somewhat.\n\nFinally, we use 1044 bits of precision to compute tolerances. This may seem overkill, but it is needed if we want to deal with tolerances on numbers computed with 1024 bits of precision.\n\n**Keywords:** doctest tolerance exceeded\n\n**Branch/Commit:** [d7f08627df8903903f2b42ed461e4ba0b477b216](https://github.com/sagemath/sagetrac-mirror/commit/d7f08627df8903903f2b42ed461e4ba0b477b216)\n\n**Reviewer:** Marc Mezzarobba\n\n**Author:** Jeroen Demeyer\n\nIssue created by migration from https://trac.sagemath.org/ticket/21121\n\n",
    "closed_at": "2019-01-27T10:50:34Z",
    "created_at": "2016-07-28T20:27:36Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20doctest%20framework",
        "https://github.com/sagemath/sage/labels/minor",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Precision in doctest tolerance: x > x",
    "type": "issue",
    "updated_at": "2019-01-27T10:50:34Z",
    "url": "https://github.com/sagemath/sage/issues/21121",
    "user": "https://github.com/nexttime"
}
```

```
Failed example:
    A.exp()  # tol 1e-14
Expected:
    [-19.614602953804912 + 12.517743846762578*I   3.7949636449582176 + 28.88379930658099*I]
    [ -32.383580980922254 + 21.88423595789845*I   2.269633004093535 + 44.901324827684824*I]
Got:
    [-19.614602953804923 + 12.517743846762574*I  3.7949636449582007 + 28.883799306580993*I]
    [-32.383580980922275 + 21.884235957898447*I  2.2696330040935115 + 44.901324827684846*I]
Tolerance exceeded in 1 of 8:
    2.269633004093535 vs 2.2696330040935115, tolerance 1e-14 > 1e-14
```

Sage saying that 10<sup>-14</sup> > 10<sup>-14</sup> appears a bit stupid.

The attached branch fixes this by displaying `y > x` where:

- `x` is the required tolerance (given in the doctest) with 15 digits, rounded to nearest.

- `y` is the observed tolerance (computed by running the test) with 1 digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.

Assuming that the tolerance in the doctest is given to at most 15 digits of precision (almost certainly the case), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.

We also refactor the implementation for printing tolerance errors somewhat.

Finally, we use 1044 bits of precision to compute tolerances. This may seem overkill, but it is needed if we want to deal with tolerances on numbers computed with 1024 bits of precision.

**Keywords:** doctest tolerance exceeded

**Branch/Commit:** [d7f08627df8903903f2b42ed461e4ba0b477b216](https://github.com/sagemath/sagetrac-mirror/commit/d7f08627df8903903f2b42ed461e4ba0b477b216)

**Reviewer:** Marc Mezzarobba

**Author:** Jeroen Demeyer

Issue created by migration from https://trac.sagemath.org/ticket/21121





---

archive/issue_comments_310191.json:
```json
{
    "body": "**Dependencies:** #21124",
    "created_at": "2016-07-29T10:23:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310191",
    "user": "https://github.com/jdemeyer"
}
```

**Dependencies:** #21124



---

archive/issue_comments_310192.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,3 +16,31 @@\n Sage saying that 10<sup>-14</sup> > 10<sup>-14</sup> appears a bit stupid; either the doctesting framework should be more tolerant here, or give better messages regarding the deviation.\n \n (Inspired by #21119.)\n+\n+---\n+\n+Just noticed there's even a doctest *expecting* this obviously wrong output in `src/sage/doctest/test.py`:\n+\n+```sh\n+Check handling of tolerances::\n+\n+    sage: subprocess.call([\"sage\", \"-t\", \"--warn-long\", \"0\", \"tolerance.rst\"], **kwds)  # long time\n+    Running doctests...\n+    Doctesting 1 file.\n+    sage -t --warn-long 0.0 tolerance.rst\n+    ...\n+    **********************************************************************\n+    File \"tolerance.rst\", line ..., in sage.doctest.tests.tolerance\n+    Failed example:\n+        print(\"Hello 1.0\")  # rel tol 1e-6\n+    Expected:\n+        Goodbye 0.999999\n+    Got:\n+        Hello 1.0\n+    Tolerance exceeded:\n+        0.999999 vs 1.0, tolerance 1e-06 > 1e-06\n+    **********************************************************************\n+    ...\n+```\n+(Note the `1e-06 > 1e-06` there.)\n+\n``````\n",
    "created_at": "2016-08-13T12:31:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310192",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,3 +16,31 @@
 Sage saying that 10<sup>-14</sup> > 10<sup>-14</sup> appears a bit stupid; either the doctesting framework should be more tolerant here, or give better messages regarding the deviation.
 
 (Inspired by #21119.)
+
+---
+
+Just noticed there's even a doctest *expecting* this obviously wrong output in `src/sage/doctest/test.py`:
+
+```sh
+Check handling of tolerances::
+
+    sage: subprocess.call(["sage", "-t", "--warn-long", "0", "tolerance.rst"], **kwds)  # long time
+    Running doctests...
+    Doctesting 1 file.
+    sage -t --warn-long 0.0 tolerance.rst
+    ...
+    **********************************************************************
+    File "tolerance.rst", line ..., in sage.doctest.tests.tolerance
+    Failed example:
+        print("Hello 1.0")  # rel tol 1e-6
+    Expected:
+        Goodbye 0.999999
+    Got:
+        Hello 1.0
+    Tolerance exceeded:
+        0.999999 vs 1.0, tolerance 1e-06 > 1e-06
+    **********************************************************************
+    ...
+```
+(Note the `1e-06 > 1e-06` there.)
+
``````




---

archive/issue_comments_310193.json:
```json
{
    "body": "<a id='comment:3'></a>\nThe culprit (at least regarding the weird ouput) is here, namely in the local function `failstr()`:\n\n```python\n    def output_difference(self, example, got, optionflags):\n        r\"\"\" ... \"\"\"\n        got = self.human_readable_escape_sequences(got)\n        want = example.want\n        diff = doctest.OutputChecker.output_difference(self, example, got, optionflags)\n        if isinstance(want, MarkedOutput) and (want.tol or want.abs_tol or want.rel_tol):\n            if diff[-1] != \"\\n\":\n                diff += \"\\n\"\n            want_str = [g[0] for g in float_regex.findall(want)]\n            got_str = [g[0] for g in float_regex.findall(got)]\n            want_values = [RIFtol(g) for g in want_str]\n            want_intervals = [self.add_tolerance(v, want) for v in want_values]\n            got_values = [RIFtol(g) for g in got_str]\n            if len(want_values) == len(got_values):\n                def failstr(astr, bstr, actual, desired):\n                    return \"    %s vs %s, tolerance %.0e > %.0e\"%(astr, bstr, RIFtol(actual).center(), RIFtol(desired).center())\n\n                fails = []\n                for a, ainterval, b, astr, bstr in zip(want_values, want_intervals, got_values, want_str, got_str):\n                    if not ainterval.overlaps(b):\n                        if want.tol:\n                            if a == 0:\n                                fails.append(failstr(astr, bstr, abs(b), want.tol))\n                            else:\n                                fails.append(failstr(astr, bstr, abs(1 - b/a), want.tol))\n                        elif want.abs_tol:\n                            fails.append(failstr(astr, bstr, abs(a - b), want.abs_tol))\n                        else:\n                            fails.append(failstr(astr, bstr, abs(1 - b/a), want.rel_tol))\n\n                if fails:\n                    if len(want_values) == 1:\n                        diff += \"Tolerance exceeded:\\n\"\n                    else:\n                        diff += \"Tolerance exceeded in %s of %s:\\n\"%(len(fails), len(want_values))\n                    diff += \"\\n\".join(fails) + \"\\n\"\n        return diff\n```\n(A method of class `SageOutputChecker` in `src/sage/doctest/parsing.py`.)\n\nOne could also change the code below its definition rather than (just) `failstr()`.",
    "created_at": "2016-08-13T12:56:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310193",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:3'></a>
The culprit (at least regarding the weird ouput) is here, namely in the local function `failstr()`:

```python
    def output_difference(self, example, got, optionflags):
        r""" ... """
        got = self.human_readable_escape_sequences(got)
        want = example.want
        diff = doctest.OutputChecker.output_difference(self, example, got, optionflags)
        if isinstance(want, MarkedOutput) and (want.tol or want.abs_tol or want.rel_tol):
            if diff[-1] != "\n":
                diff += "\n"
            want_str = [g[0] for g in float_regex.findall(want)]
            got_str = [g[0] for g in float_regex.findall(got)]
            want_values = [RIFtol(g) for g in want_str]
            want_intervals = [self.add_tolerance(v, want) for v in want_values]
            got_values = [RIFtol(g) for g in got_str]
            if len(want_values) == len(got_values):
                def failstr(astr, bstr, actual, desired):
                    return "    %s vs %s, tolerance %.0e > %.0e"%(astr, bstr, RIFtol(actual).center(), RIFtol(desired).center())

                fails = []
                for a, ainterval, b, astr, bstr in zip(want_values, want_intervals, got_values, want_str, got_str):
                    if not ainterval.overlaps(b):
                        if want.tol:
                            if a == 0:
                                fails.append(failstr(astr, bstr, abs(b), want.tol))
                            else:
                                fails.append(failstr(astr, bstr, abs(1 - b/a), want.tol))
                        elif want.abs_tol:
                            fails.append(failstr(astr, bstr, abs(a - b), want.abs_tol))
                        else:
                            fails.append(failstr(astr, bstr, abs(1 - b/a), want.rel_tol))

                if fails:
                    if len(want_values) == 1:
                        diff += "Tolerance exceeded:\n"
                    else:
                        diff += "Tolerance exceeded in %s of %s:\n"%(len(fails), len(want_values))
                    diff += "\n".join(fails) + "\n"
        return diff
```
(A method of class `SageOutputChecker` in `src/sage/doctest/parsing.py`.)

One could also change the code below its definition rather than (just) `failstr()`.



---

archive/issue_comments_310194.json:
```json
{
    "body": "<a id='comment:4'></a>\n(As is, `failstr()` truncates the mantissa to *just one digit*, i.e., the digit before the decimal point.)",
    "created_at": "2016-08-13T13:01:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310194",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:4'></a>
(As is, `failstr()` truncates the mantissa to *just one digit*, i.e., the digit before the decimal point.)



---

archive/issue_comments_310195.json:
```json
{
    "body": "<a id='comment:5'></a>\nI.e., we should **at least** make sure `\"%.0e\" % RIFtol(actual).center()` doesn't give the same as `\"%.0e\" % RIFtol(desired).center()`.  (Not sure whether using `.center()` here is at all the right thing, or whether we should at all use `RIF` for the *tolerance values* themselves; see also below.)\n\nIf it does, we may increase the number of (mantissa) digits in the former.  Or in both, until they differ.\n\nAnd that's orthogonal to improving hints regarding the actual deviation, i.e., if one wants to adjust the *expected figures* rather than (just) the tolerance.\n\nIf the intervals of *want* and *got* do not overlap (i.e., when the tolerance is exceeded), we could also give `.upper()` and `.lower()` (or vice versa, depending on whether *want* is smaller or larger than *got*).",
    "created_at": "2016-08-13T13:39:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310195",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:5'></a>
I.e., we should **at least** make sure `"%.0e" % RIFtol(actual).center()` doesn't give the same as `"%.0e" % RIFtol(desired).center()`.  (Not sure whether using `.center()` here is at all the right thing, or whether we should at all use `RIF` for the *tolerance values* themselves; see also below.)

If it does, we may increase the number of (mantissa) digits in the former.  Or in both, until they differ.

And that's orthogonal to improving hints regarding the actual deviation, i.e., if one wants to adjust the *expected figures* rather than (just) the tolerance.

If the intervals of *want* and *got* do not overlap (i.e., when the tolerance is exceeded), we could also give `.upper()` and `.lower()` (or vice versa, depending on whether *want* is smaller or larger than *got*).



---

archive/issue_comments_310196.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -42,5 +42,5 @@\n     **********************************************************************\n     ...\n ```\n-(Note the `1e-06 > 1e-06` there.)\n+(Note the `1e-06 > 1e-06` there.  And there are even more of this kind in `src/sage/doctest/parsing.py`.)\n \n``````\n",
    "created_at": "2016-08-13T14:03:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310196",
    "user": "https://github.com/nexttime"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -42,5 +42,5 @@
     **********************************************************************
     ...
 ```
-(Note the `1e-06 > 1e-06` there.)
+(Note the `1e-06 > 1e-06` there.  And there are even more of this kind in `src/sage/doctest/parsing.py`.)
 
``````




---

archive/issue_comments_310197.json:
```json
{
    "body": "<a id='comment:7'></a>\nWith\n\n```diff\ndiff --git a/src/sage/doctest/parsing.py b/src/sage/doctest/parsing.py\nindex b297bb1..def1e31 100644\n--- a/src/sage/doctest/parsing.py\n+++ b/src/sage/doctest/parsing.py\n@@ -963,8 +963,19 @@ class SageOutputChecker(doctest.OutputChecker):\n             want_intervals = [self.add_tolerance(v, want) for v in want_values]\n             got_values = [RIFtol(g) for g in got_str]\n             if len(want_values) == len(got_values):\n+\n                 def failstr(astr, bstr, actual, desired):\n-                    return \"    %s vs %s, tolerance %.0e > %.0e\"%(astr, bstr, RIFtol(actual).center(), RIFtol(desired).\n+                    # Do not print 'x > x' (#21121):\n+                    dp = 0 # start with zero decimal places in output of tolerance\n+                    while True: # XXX kind of dangerous...\n+                        allowed_tol = \"%.*e\" % (dp, RIFtol(desired).center())\n+                        effective_tol = \"%.*e\" % (dp, RIFtol(actual).center())\n+                        if allowed_tol != effective_tol:\n+                            # we achieved meaningful output\n+                            break\n+                        dp += 1 # increase number of decimal places to be shown\n+\n+                    return \"    %s vs %s, tolerance %s > %s\"%(astr, bstr, effective_tol, allowed_tol)\n \n                 fails = []\n                 for a, ainterval, b, astr, bstr in zip(want_values, want_intervals, got_values, want_str, got_str):\n```\nI would for example get the following for the failing test from the ticket's description / #21119:\n\n```\nsage -t src/sage/matrix/matrix_double_dense.pyx\n**********************************************************************\nFile \"src/sage/matrix/matrix_double_dense.pyx\", line 3761, in sage.matrix.matrix_double_dense.Matrix_double_dense.exp\nFailed example:\n    A.exp()  # tol 1e-14\nExpected:\n    [-19.614602953804912 + 12.517743846762578*I   3.7949636449582176 + 28.88379930658099*I]\n    [ -32.383580980922254 + 21.88423595789845*I   2.269633004093535 + 44.901324827684824*I]\nGot:\n    [-19.614602953804923 + 12.517743846762574*I  3.7949636449582007 + 28.883799306580993*I]\n    [-32.383580980922275 + 21.884235957898447*I  2.2696330040935115 + 44.901324827684846*I]\nTolerance exceeded in 1 of 8:\n    2.269633004093535 vs 2.2696330040935115, tolerance 1.04e-14 > 1.00e-14\n**********************************************************************\n```\n\nAFAICT, we unfortunately *there* do not know whether `# tol 1e-14` or e.g. `# tol 1.0e-14` was specified in the failing doctest.",
    "created_at": "2016-08-13T14:46:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310197",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:7'></a>
With

```diff
diff --git a/src/sage/doctest/parsing.py b/src/sage/doctest/parsing.py
index b297bb1..def1e31 100644
--- a/src/sage/doctest/parsing.py
+++ b/src/sage/doctest/parsing.py
@@ -963,8 +963,19 @@ class SageOutputChecker(doctest.OutputChecker):
             want_intervals = [self.add_tolerance(v, want) for v in want_values]
             got_values = [RIFtol(g) for g in got_str]
             if len(want_values) == len(got_values):
+
                 def failstr(astr, bstr, actual, desired):
-                    return "    %s vs %s, tolerance %.0e > %.0e"%(astr, bstr, RIFtol(actual).center(), RIFtol(desired).
+                    # Do not print 'x > x' (#21121):
+                    dp = 0 # start with zero decimal places in output of tolerance
+                    while True: # XXX kind of dangerous...
+                        allowed_tol = "%.*e" % (dp, RIFtol(desired).center())
+                        effective_tol = "%.*e" % (dp, RIFtol(actual).center())
+                        if allowed_tol != effective_tol:
+                            # we achieved meaningful output
+                            break
+                        dp += 1 # increase number of decimal places to be shown
+
+                    return "    %s vs %s, tolerance %s > %s"%(astr, bstr, effective_tol, allowed_tol)
 
                 fails = []
                 for a, ainterval, b, astr, bstr in zip(want_values, want_intervals, got_values, want_str, got_str):
```
I would for example get the following for the failing test from the ticket's description / #21119:

```
sage -t src/sage/matrix/matrix_double_dense.pyx
**********************************************************************
File "src/sage/matrix/matrix_double_dense.pyx", line 3761, in sage.matrix.matrix_double_dense.Matrix_double_dense.exp
Failed example:
    A.exp()  # tol 1e-14
Expected:
    [-19.614602953804912 + 12.517743846762578*I   3.7949636449582176 + 28.88379930658099*I]
    [ -32.383580980922254 + 21.88423595789845*I   2.269633004093535 + 44.901324827684824*I]
Got:
    [-19.614602953804923 + 12.517743846762574*I  3.7949636449582007 + 28.883799306580993*I]
    [-32.383580980922275 + 21.884235957898447*I  2.2696330040935115 + 44.901324827684846*I]
Tolerance exceeded in 1 of 8:
    2.269633004093535 vs 2.2696330040935115, tolerance 1.04e-14 > 1.00e-14
**********************************************************************
```

AFAICT, we unfortunately *there* do not know whether `# tol 1e-14` or e.g. `# tol 1.0e-14` was specified in the failing doctest.



---

archive/issue_comments_310198.json:
```json
{
    "body": "<a id='comment:8'></a>\nTo do:\n\nReplace `True` by `dp <= some_meaningful_number` and `break` by `return ...` (returning what's now returned below, after the loop).\n\nThen if we exit the `while` loop (giving up on too many decimal places), fall back to returning some other (meaningful) output, of course again other than `... x > x`.",
    "created_at": "2016-08-13T14:56:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310198",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:8'></a>
To do:

Replace `True` by `dp <= some_meaningful_number` and `break` by `return ...` (returning what's now returned below, after the loop).

Then if we exit the `while` loop (giving up on too many decimal places), fall back to returning some other (meaningful) output, of course again other than `... x > x`.



---

archive/issue_comments_310199.json:
```json
{
    "body": "<a id='comment:9'></a>\n... and the mentioned doctests for the doctest framework itself of course need to get adjusted to the new output.",
    "created_at": "2016-08-13T14:59:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310199",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:9'></a>
... and the mentioned doctests for the doctest framework itself of course need to get adjusted to the new output.



---

archive/issue_comments_310200.json:
```json
{
    "body": "<a id='comment:10'></a>\nYou just need to print the numbers with directed roundings (up/down). But that needs #21124 to properly print the numbers.",
    "created_at": "2016-08-15T08:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310200",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
You just need to print the numbers with directed roundings (up/down). But that needs #21124 to properly print the numbers.



---

archive/issue_comments_310201.json:
```json
{
    "body": "**Branch:** [u/jdemeyer/precision_in_doctest_tolerance__x___x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/precision_in_doctest_tolerance__x___x)",
    "created_at": "2018-08-29T09:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310201",
    "user": "https://github.com/jdemeyer"
}
```

**Branch:** [u/jdemeyer/precision_in_doctest_tolerance__x___x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/precision_in_doctest_tolerance__x___x)



---

archive/issue_comments_310202.json:
```json
{
    "body": "<a id='comment:12'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a9909ab60eb35282534e545ee1e7ec633601c779\">a9909ab</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2018-08-29T10:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310202",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a9909ab60eb35282534e545ee1e7ec633601c779">a9909ab</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310203.json:
```json
{
    "body": "**Commit:** [a9909ab60eb35282534e545ee1e7ec633601c779](https://github.com/sagemath/sagetrac-mirror/commit/a9909ab60eb35282534e545ee1e7ec633601c779)",
    "created_at": "2018-08-29T10:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310203",
    "user": "https://github.com/jdemeyer"
}
```

**Commit:** [a9909ab60eb35282534e545ee1e7ec633601c779](https://github.com/sagemath/sagetrac-mirror/commit/a9909ab60eb35282534e545ee1e7ec633601c779)



---

archive/issue_comments_310204.json:
```json
{
    "body": "**Changing dependencies** from \"#21124\" to \"#26154\".",
    "created_at": "2018-08-29T10:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310204",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#21124" to "#26154".



---

archive/issue_comments_310205.json:
```json
{
    "body": "**Changing commit** from \"[a9909ab60eb35282534e545ee1e7ec633601c779](https://github.com/sagemath/sagetrac-mirror/commit/a9909ab60eb35282534e545ee1e7ec633601c779)\" to \"[e1ba5b73f39a47446d01581550ccf2a4259f14ca](https://github.com/sagemath/sagetrac-mirror/commit/e1ba5b73f39a47446d01581550ccf2a4259f14ca)\".",
    "created_at": "2018-08-29T10:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310205",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[a9909ab60eb35282534e545ee1e7ec633601c779](https://github.com/sagemath/sagetrac-mirror/commit/a9909ab60eb35282534e545ee1e7ec633601c779)" to "[e1ba5b73f39a47446d01581550ccf2a4259f14ca](https://github.com/sagemath/sagetrac-mirror/commit/e1ba5b73f39a47446d01581550ccf2a4259f14ca)".



---

archive/issue_comments_310206.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7fcc109a4f931546011cbdae4f56e579d00d69d3\">7fcc109</a></td><td><code>Omit point when printing real numbers in scientific notation with 1 digit</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e1ba5b73f39a47446d01581550ccf2a4259f14ca\">e1ba5b7</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2018-08-29T10:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310206",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7fcc109a4f931546011cbdae4f56e579d00d69d3">7fcc109</a></td><td><code>Omit point when printing real numbers in scientific notation with 1 digit</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e1ba5b73f39a47446d01581550ccf2a4259f14ca">e1ba5b7</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310207.json:
```json
{
    "body": "<a id='comment:14'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a636d1ee3c389f7270652db664e4b5ecfc388fd2\">a636d1e</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2018-08-29T11:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310207",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a636d1ee3c389f7270652db664e4b5ecfc388fd2">a636d1e</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310208.json:
```json
{
    "body": "**Changing commit** from \"[e1ba5b73f39a47446d01581550ccf2a4259f14ca](https://github.com/sagemath/sagetrac-mirror/commit/e1ba5b73f39a47446d01581550ccf2a4259f14ca)\" to \"[a636d1ee3c389f7270652db664e4b5ecfc388fd2](https://github.com/sagemath/sagetrac-mirror/commit/a636d1ee3c389f7270652db664e4b5ecfc388fd2)\".",
    "created_at": "2018-08-29T11:14:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310208",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e1ba5b73f39a47446d01581550ccf2a4259f14ca](https://github.com/sagemath/sagetrac-mirror/commit/e1ba5b73f39a47446d01581550ccf2a4259f14ca)" to "[a636d1ee3c389f7270652db664e4b5ecfc388fd2](https://github.com/sagemath/sagetrac-mirror/commit/a636d1ee3c389f7270652db664e4b5ecfc388fd2)".



---

archive/issue_events_189252.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-08-29T11:22:54Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189252"
}
```



---

archive/issue_events_189253.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-08-29T11:22:54Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "milestone_number": null,
    "milestone_title": "sage-8.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189253"
}
```



---

archive/issue_comments_310209.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -11,36 +11,13 @@\n Tolerance exceeded in 1 of 8:\n     2.269633004093535 vs 2.2696330040935115, tolerance 1e-14 > 1e-14\n ```\n-\\\\\n \n-Sage saying that 10<sup>-14</sup> > 10<sup>-14</sup> appears a bit stupid; either the doctesting framework should be more tolerant here, or give better messages regarding the deviation.\n+Sage saying that 10<sup>-14</sup> > 10<sup>-14</sup> appears a bit stupid.\n \n-(Inspired by #21119.)\n+The attached branch fixes this by displaying `y > x` where:\n \n----\n+- `x` is the required tolerance (given in the doctest) with one digit, rounded to nearest.\n \n-Just noticed there's even a doctest *expecting* this obviously wrong output in `src/sage/doctest/test.py`:\n+- `y` is the observed tolerance (computed by running the test) with one digit, rounded up. This means that using `# tol y` is guaranteed to make the test pass.\n \n-```sh\n-Check handling of tolerances::\n-\n-    sage: subprocess.call([\"sage\", \"-t\", \"--warn-long\", \"0\", \"tolerance.rst\"], **kwds)  # long time\n-    Running doctests...\n-    Doctesting 1 file.\n-    sage -t --warn-long 0.0 tolerance.rst\n-    ...\n-    **********************************************************************\n-    File \"tolerance.rst\", line ..., in sage.doctest.tests.tolerance\n-    Failed example:\n-        print(\"Hello 1.0\")  # rel tol 1e-6\n-    Expected:\n-        Goodbye 0.999999\n-    Got:\n-        Hello 1.0\n-    Tolerance exceeded:\n-        0.999999 vs 1.0, tolerance 1e-06 > 1e-06\n-    **********************************************************************\n-    ...\n-```\n-(Note the `1e-06 > 1e-06` there.  And there are even more of this kind in `src/sage/doctest/parsing.py`.)\n-\n+Assuming that the tolerance in the doctest is given to one digit of precision (which is very typical), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.\n``````\n",
    "created_at": "2018-08-29T11:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310209",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -11,36 +11,13 @@
 Tolerance exceeded in 1 of 8:
     2.269633004093535 vs 2.2696330040935115, tolerance 1e-14 > 1e-14
 ```
-\\
 
-Sage saying that 10<sup>-14</sup> > 10<sup>-14</sup> appears a bit stupid; either the doctesting framework should be more tolerant here, or give better messages regarding the deviation.
+Sage saying that 10<sup>-14</sup> > 10<sup>-14</sup> appears a bit stupid.
 
-(Inspired by #21119.)
+The attached branch fixes this by displaying `y > x` where:
 
----
+- `x` is the required tolerance (given in the doctest) with one digit, rounded to nearest.
 
-Just noticed there's even a doctest *expecting* this obviously wrong output in `src/sage/doctest/test.py`:
+- `y` is the observed tolerance (computed by running the test) with one digit, rounded up. This means that using `# tol y` is guaranteed to make the test pass.
 
-```sh
-Check handling of tolerances::
-
-    sage: subprocess.call(["sage", "-t", "--warn-long", "0", "tolerance.rst"], **kwds)  # long time
-    Running doctests...
-    Doctesting 1 file.
-    sage -t --warn-long 0.0 tolerance.rst
-    ...
-    **********************************************************************
-    File "tolerance.rst", line ..., in sage.doctest.tests.tolerance
-    Failed example:
-        print("Hello 1.0")  # rel tol 1e-6
-    Expected:
-        Goodbye 0.999999
-    Got:
-        Hello 1.0
-    Tolerance exceeded:
-        0.999999 vs 1.0, tolerance 1e-06 > 1e-06
-    **********************************************************************
-    ...
-```
-(Note the `1e-06 > 1e-06` there.  And there are even more of this kind in `src/sage/doctest/parsing.py`.)
-
+Assuming that the tolerance in the doctest is given to one digit of precision (which is very typical), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.
``````




---

archive/issue_comments_310210.json:
```json
{
    "body": "**Changing keywords** from \"doctest error exceeded\" to \"doctest tolerance exceeded\".",
    "created_at": "2018-08-29T11:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310210",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "doctest error exceeded" to "doctest tolerance exceeded".



---

archive/issue_events_189254.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2018-08-29T11:22:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189254"
}
```



---

archive/issue_comments_310211.json:
```json
{
    "body": "**Author:** Jeroen Demeyer",
    "created_at": "2018-08-29T11:22:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310211",
    "user": "https://github.com/jdemeyer"
}
```

**Author:** Jeroen Demeyer



---

archive/issue_comments_310212.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -18,6 +18,6 @@\n \n - `x` is the required tolerance (given in the doctest) with one digit, rounded to nearest.\n \n-- `y` is the observed tolerance (computed by running the test) with one digit, rounded up. This means that using `# tol y` is guaranteed to make the test pass.\n+- `y` is the observed tolerance (computed by running the test) with one digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.\n \n Assuming that the tolerance in the doctest is given to one digit of precision (which is very typical), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.\n``````\n",
    "created_at": "2018-08-29T11:38:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310212",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -18,6 +18,6 @@
 
 - `x` is the required tolerance (given in the doctest) with one digit, rounded to nearest.
 
-- `y` is the observed tolerance (computed by running the test) with one digit, rounded up. This means that using `# tol y` is guaranteed to make the test pass.
+- `y` is the observed tolerance (computed by running the test) with one digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.
 
 Assuming that the tolerance in the doctest is given to one digit of precision (which is very typical), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.
``````




---

archive/issue_comments_310213.json:
```json
{
    "body": "**Changing commit** from \"[a636d1ee3c389f7270652db664e4b5ecfc388fd2](https://github.com/sagemath/sagetrac-mirror/commit/a636d1ee3c389f7270652db664e4b5ecfc388fd2)\" to \"[cb741123f8dec1849052c88b47dbc50caf3f6ab1](https://github.com/sagemath/sagetrac-mirror/commit/cb741123f8dec1849052c88b47dbc50caf3f6ab1)\".",
    "created_at": "2018-08-29T12:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310213",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[a636d1ee3c389f7270652db664e4b5ecfc388fd2](https://github.com/sagemath/sagetrac-mirror/commit/a636d1ee3c389f7270652db664e4b5ecfc388fd2)" to "[cb741123f8dec1849052c88b47dbc50caf3f6ab1](https://github.com/sagemath/sagetrac-mirror/commit/cb741123f8dec1849052c88b47dbc50caf3f6ab1)".



---

archive/issue_comments_310214.json:
```json
{
    "body": "<a id='comment:17'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cb741123f8dec1849052c88b47dbc50caf3f6ab1\">cb74112</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2018-08-29T12:05:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310214",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:17'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cb741123f8dec1849052c88b47dbc50caf3f6ab1">cb74112</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310215.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -21,3 +21,7 @@\n - `y` is the observed tolerance (computed by running the test) with one digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.\n \n Assuming that the tolerance in the doctest is given to one digit of precision (which is very typical), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.\n+\n+We also refactor the implementation for printing tolerance errors somewhat.\n+\n+Finally, we use 1044 bits of precision to compute tolerances. This may seem overkill, but it is needed if we want to deal with tolerances on numbers computed with 1024 bits of precision.\n``````\n",
    "created_at": "2018-08-29T12:06:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310215",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -21,3 +21,7 @@
 - `y` is the observed tolerance (computed by running the test) with one digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.
 
 Assuming that the tolerance in the doctest is given to one digit of precision (which is very typical), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.
+
+We also refactor the implementation for printing tolerance errors somewhat.
+
+Finally, we use 1044 bits of precision to compute tolerances. This may seem overkill, but it is needed if we want to deal with tolerances on numbers computed with 1024 bits of precision.
``````




---

archive/issue_comments_310216.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -16,11 +16,11 @@\n \n The attached branch fixes this by displaying `y > x` where:\n \n-- `x` is the required tolerance (given in the doctest) with one digit, rounded to nearest.\n+- `x` is the required tolerance (given in the doctest) with 15 digits, rounded to nearest.\n \n-- `y` is the observed tolerance (computed by running the test) with one digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.\n+- `y` is the observed tolerance (computed by running the test) with 1 digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.\n \n-Assuming that the tolerance in the doctest is given to one digit of precision (which is very typical), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.\n+Assuming that the tolerance in the doctest is given to at most 15 digits of precision (almost certainly the case), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.\n \n We also refactor the implementation for printing tolerance errors somewhat.\n \n``````\n",
    "created_at": "2018-08-29T12:19:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310216",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -16,11 +16,11 @@
 
 The attached branch fixes this by displaying `y > x` where:
 
-- `x` is the required tolerance (given in the doctest) with one digit, rounded to nearest.
+- `x` is the required tolerance (given in the doctest) with 15 digits, rounded to nearest.
 
-- `y` is the observed tolerance (computed by running the test) with one digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.
+- `y` is the observed tolerance (computed by running the test) with 1 digit, **rounded up**. This means that using `# tol y` is guaranteed to make the test pass.
 
-Assuming that the tolerance in the doctest is given to one digit of precision (which is very typical), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.
+Assuming that the tolerance in the doctest is given to at most 15 digits of precision (almost certainly the case), `x` should be exactly what was in the doctest. In that case, `y` cannot be equal to `x`.
 
 We also refactor the implementation for printing tolerance errors somewhat.
 
``````




---

archive/issue_comments_310217.json:
```json
{
    "body": "**Changing commit** from \"[cb741123f8dec1849052c88b47dbc50caf3f6ab1](https://github.com/sagemath/sagetrac-mirror/commit/cb741123f8dec1849052c88b47dbc50caf3f6ab1)\" to \"[dd60a2e10199532a02bf591a41644df64d9ebef6](https://github.com/sagemath/sagetrac-mirror/commit/dd60a2e10199532a02bf591a41644df64d9ebef6)\".",
    "created_at": "2018-08-29T12:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310217",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[cb741123f8dec1849052c88b47dbc50caf3f6ab1](https://github.com/sagemath/sagetrac-mirror/commit/cb741123f8dec1849052c88b47dbc50caf3f6ab1)" to "[dd60a2e10199532a02bf591a41644df64d9ebef6](https://github.com/sagemath/sagetrac-mirror/commit/dd60a2e10199532a02bf591a41644df64d9ebef6)".



---

archive/issue_comments_310218.json:
```json
{
    "body": "<a id='comment:20'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dd60a2e10199532a02bf591a41644df64d9ebef6\">dd60a2e</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2018-08-29T12:20:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310218",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:20'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dd60a2e10199532a02bf591a41644df64d9ebef6">dd60a2e</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310219.json:
```json
{
    "body": "<a id='comment:21'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5535d2de60d94021d0332369e9cbe9ddc9e32cfd\">5535d2d</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2018-08-29T14:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310219",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5535d2de60d94021d0332369e9cbe9ddc9e32cfd">5535d2d</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310220.json:
```json
{
    "body": "**Changing commit** from \"[dd60a2e10199532a02bf591a41644df64d9ebef6](https://github.com/sagemath/sagetrac-mirror/commit/dd60a2e10199532a02bf591a41644df64d9ebef6)\" to \"[5535d2de60d94021d0332369e9cbe9ddc9e32cfd](https://github.com/sagemath/sagetrac-mirror/commit/5535d2de60d94021d0332369e9cbe9ddc9e32cfd)\".",
    "created_at": "2018-08-29T14:17:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310220",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[dd60a2e10199532a02bf591a41644df64d9ebef6](https://github.com/sagemath/sagetrac-mirror/commit/dd60a2e10199532a02bf591a41644df64d9ebef6)" to "[5535d2de60d94021d0332369e9cbe9ddc9e32cfd](https://github.com/sagemath/sagetrac-mirror/commit/5535d2de60d94021d0332369e9cbe9ddc9e32cfd)".



---

archive/issue_comments_310221.json:
```json
{
    "body": "**Changing commit** from \"[5535d2de60d94021d0332369e9cbe9ddc9e32cfd](https://github.com/sagemath/sagetrac-mirror/commit/5535d2de60d94021d0332369e9cbe9ddc9e32cfd)\" to \"[b76623dc03e4d81ff303eac219ad5c907a4c2360](https://github.com/sagemath/sagetrac-mirror/commit/b76623dc03e4d81ff303eac219ad5c907a4c2360)\".",
    "created_at": "2019-01-11T13:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310221",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5535d2de60d94021d0332369e9cbe9ddc9e32cfd](https://github.com/sagemath/sagetrac-mirror/commit/5535d2de60d94021d0332369e9cbe9ddc9e32cfd)" to "[b76623dc03e4d81ff303eac219ad5c907a4c2360](https://github.com/sagemath/sagetrac-mirror/commit/b76623dc03e4d81ff303eac219ad5c907a4c2360)".



---

archive/issue_comments_310222.json:
```json
{
    "body": "<a id='comment:22'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b76623dc03e4d81ff303eac219ad5c907a4c2360\">b76623d</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2019-01-11T13:12:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310222",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:22'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b76623dc03e4d81ff303eac219ad5c907a4c2360">b76623d</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310223.json:
```json
{
    "body": "**Changing dependencies** from \"#26154\" to \"\".",
    "created_at": "2019-01-11T13:12:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310223",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#26154" to "".



---

archive/issue_comments_310224.json:
```json
{
    "body": "**Changing commit** from \"[b76623dc03e4d81ff303eac219ad5c907a4c2360](https://github.com/sagemath/sagetrac-mirror/commit/b76623dc03e4d81ff303eac219ad5c907a4c2360)\" to \"[e62891b0edc5754465df192ebb174938a7706e9e](https://github.com/sagemath/sagetrac-mirror/commit/e62891b0edc5754465df192ebb174938a7706e9e)\".",
    "created_at": "2019-01-25T10:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310224",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[b76623dc03e4d81ff303eac219ad5c907a4c2360](https://github.com/sagemath/sagetrac-mirror/commit/b76623dc03e4d81ff303eac219ad5c907a4c2360)" to "[e62891b0edc5754465df192ebb174938a7706e9e](https://github.com/sagemath/sagetrac-mirror/commit/e62891b0edc5754465df192ebb174938a7706e9e)".



---

archive/issue_comments_310225.json:
```json
{
    "body": "<a id='comment:24'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e62891b0edc5754465df192ebb174938a7706e9e\">e62891b</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2019-01-25T10:55:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310225",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:24'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e62891b0edc5754465df192ebb174938a7706e9e">e62891b</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310226.json:
```json
{
    "body": "**Reviewer:** Marc Mezzarobba",
    "created_at": "2019-01-26T09:39:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310226",
    "user": "https://github.com/mezzarobba"
}
```

**Reviewer:** Marc Mezzarobba



---

archive/issue_events_189255.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-01-26T09:39:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189255"
}
```



---

archive/issue_events_189256.json:
```json
{
    "actor": "https://github.com/mezzarobba",
    "created_at": "2019-01-26T09:39:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189256"
}
```



---

archive/issue_comments_310227.json:
```json
{
    "body": "<a id='comment:25'></a>\nLGTM (except that \u201cit is carries\u201d in the comment should be \u201cit carries\u201d).",
    "created_at": "2019-01-26T09:39:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310227",
    "user": "https://github.com/mezzarobba"
}
```

<a id='comment:25'></a>
LGTM (except that it is carries in the comment should be it carries).



---

archive/issue_events_189257.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-01-26T09:55:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189257"
}
```



---

archive/issue_events_189258.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2019-01-26T09:55:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189258"
}
```



---

archive/issue_comments_310228.json:
```json
{
    "body": "<a id='comment:26'></a>\n**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** This was a forced push. **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d7f08627df8903903f2b42ed461e4ba0b477b216\">d7f0862</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>\n",
    "created_at": "2019-01-26T09:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310228",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:26'></a>
**Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review.** This was a forced push. **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d7f08627df8903903f2b42ed461e4ba0b477b216">d7f0862</a></td><td><code>Improve output formatting for tolerances</code></td></tr></table>




---

archive/issue_comments_310229.json:
```json
{
    "body": "**Changing commit** from \"[e62891b0edc5754465df192ebb174938a7706e9e](https://github.com/sagemath/sagetrac-mirror/commit/e62891b0edc5754465df192ebb174938a7706e9e)\" to \"[d7f08627df8903903f2b42ed461e4ba0b477b216](https://github.com/sagemath/sagetrac-mirror/commit/d7f08627df8903903f2b42ed461e4ba0b477b216)\".",
    "created_at": "2019-01-26T09:55:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310229",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[e62891b0edc5754465df192ebb174938a7706e9e](https://github.com/sagemath/sagetrac-mirror/commit/e62891b0edc5754465df192ebb174938a7706e9e)" to "[d7f08627df8903903f2b42ed461e4ba0b477b216](https://github.com/sagemath/sagetrac-mirror/commit/d7f08627df8903903f2b42ed461e4ba0b477b216)".



---

archive/issue_events_189259.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-26T09:55:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189259"
}
```



---

archive/issue_events_189260.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2019-01-26T09:55:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189260"
}
```



---

archive/issue_comments_310230.json:
```json
{
    "body": "<a id='comment:27'></a>\nFixed typo",
    "created_at": "2019-01-26T09:55:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310230",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>
Fixed typo



---

archive/issue_comments_310231.json:
```json
{
    "body": "**Changing branch** from \"[u/jdemeyer/precision_in_doctest_tolerance__x___x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/precision_in_doctest_tolerance__x___x)\" to \"[d7f08627df8903903f2b42ed461e4ba0b477b216](https://github.com/sagemath/sagetrac-mirror/commit/d7f08627df8903903f2b42ed461e4ba0b477b216)\".",
    "created_at": "2019-01-27T10:50:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21121#issuecomment-310231",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jdemeyer/precision_in_doctest_tolerance__x___x](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/precision_in_doctest_tolerance__x___x)" to "[d7f08627df8903903f2b42ed461e4ba0b477b216](https://github.com/sagemath/sagetrac-mirror/commit/d7f08627df8903903f2b42ed461e4ba0b477b216)".



---

archive/issue_events_189261.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2019-01-27T10:50:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189261"
}
```



---

archive/issue_events_189262.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "2258aca437fc8399ee0cb7e8fbbf79d1adf0f3ed",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2019-01-27T10:50:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21121",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21121#event-189262"
}
```
