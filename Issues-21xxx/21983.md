# Issue 21983: Remaining py3 syntax level errors

archive/issues_021746.json:
```json
{
    "body": "After plain docstring unicode errors (#21982) there are 2 times 2 problems:\n\n- `lambda (a, b):` -syntax at `src/sage/graphs/generators/smallgraphs.py` and `src/sage/combinat/matrices/hadamard_matrix.py`. These are easy.\n\n- Some kind of `for i in [1,2], [3,4]` -error in `src/sage/combinat/designs/database.py` and `src/sage/combinat/root_system/coxeter_type.py`. Not sure what to do - Fr\u00e9d\u00e9ric?\n\nAfter these we should have empty `noerrors` from\n\n```\nfind src/sage/ -name '*.py' | while read f; do python3 -m py_compile $f 2>&1 |\negrep -q . && echo $f >> errors || echo $f >> noerrors ; done\n```\n\n\n**CC:**  @fchapoton\n\n**Branch/Commit:** [3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb](https://github.com/sagemath/sagetrac-mirror/commit/3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb)\n\n**Reviewer:** Fr\u00e9d\u00e9ric Chapoton\n\n**Author:** Jori M\u00e4ntysalo\n\nIssue created by migration from https://trac.sagemath.org/ticket/21983\n\n",
    "closed_at": "2016-12-05T00:44:45Z",
    "created_at": "2016-11-28T06:36:01Z",
    "labels": [
        "component: python3",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Remaining py3 syntax level errors",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21983",
    "user": "https://github.com/jm58660"
}
```
After plain docstring unicode errors (#21982) there are 2 times 2 problems:

- `lambda (a, b):` -syntax at `src/sage/graphs/generators/smallgraphs.py` and `src/sage/combinat/matrices/hadamard_matrix.py`. These are easy.

- Some kind of `for i in [1,2], [3,4]` -error in `src/sage/combinat/designs/database.py` and `src/sage/combinat/root_system/coxeter_type.py`. Not sure what to do - Frédéric?

After these we should have empty `noerrors` from

```
find src/sage/ -name '*.py' | while read f; do python3 -m py_compile $f 2>&1 |
egrep -q . && echo $f >> errors || echo $f >> noerrors ; done
```


**CC:**  @fchapoton

**Branch/Commit:** [3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb](https://github.com/sagemath/sagetrac-mirror/commit/3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb)

**Reviewer:** Frédéric Chapoton

**Author:** Jori Mäntysalo

Issue created by migration from https://trac.sagemath.org/ticket/21983





---

archive/issue_comments_389189.json:
```json
{
    "body": "<a id='comment:1'></a>\nThe syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?",
    "created_at": "2016-11-28T08:52:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389189",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>
The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?



---

archive/issue_comments_389190.json:
```json
{
    "body": "<a id='comment:2'></a>\nReplying to [jdemeyer](#comment%3A1):\n> The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?\n\n\nSomething like `[f(x) for x in [1, 2], [3, 4]]` I guess. But just run\n\n```\npython3 -m py_compile src/sage/combinat/root_system/coxeter_type.py\n```\n\nto see.",
    "created_at": "2016-11-28T08:55:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389190",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'></a>
Replying to [jdemeyer](#comment%3A1):
> The syntax `for i in [1,2], [3,4]` is correct in Python 3, so what is the problem?


Something like `[f(x) for x in [1, 2], [3, 4]]` I guess. But just run

```
python3 -m py_compile src/sage/combinat/root_system/coxeter_type.py
```

to see.



---

archive/issue_comments_389191.json:
```json
{
    "body": "**Author:** Jori M\u00e4ntysalo",
    "created_at": "2016-11-28T16:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389191",
    "user": "https://github.com/jm58660"
}
```

**Author:** Jori Mäntysalo



---

archive/issue_comments_389192.json:
```json
{
    "body": "<a id='comment:3'></a>\nFound it. Actually it just that Python2 allows `[x for x in 1, 2, 3]` but Python3 does not. It is explained here: http://python-history.blogspot.fi/2010/06/from-list-comprehensions-to-generator.html\n\nI can make the patch.",
    "created_at": "2016-11-28T16:19:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389192",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:3'></a>
Found it. Actually it just that Python2 allows `[x for x in 1, 2, 3]` but Python3 does not. It is explained here: http://python-history.blogspot.fi/2010/06/from-list-comprehensions-to-generator.html

I can make the patch.



---

archive/issue_comments_389193.json:
```json
{
    "body": "**Branch:** [u/jmantysalo/remaining_py3_syntax_level_errors](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/remaining_py3_syntax_level_errors)",
    "created_at": "2016-11-28T16:40:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389193",
    "user": "https://github.com/jm58660"
}
```

**Branch:** [u/jmantysalo/remaining_py3_syntax_level_errors](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/remaining_py3_syntax_level_errors)



---

archive/issue_comments_389194.json:
```json
{
    "body": "**Commit:** [a3af115fed1907a72262b58f68c1eb15170b4688](https://github.com/sagemath/sagetrac-mirror/commit/a3af115fed1907a72262b58f68c1eb15170b4688)",
    "created_at": "2016-11-28T16:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389194",
    "user": "https://github.com/jm58660"
}
```

**Commit:** [a3af115fed1907a72262b58f68c1eb15170b4688](https://github.com/sagemath/sagetrac-mirror/commit/a3af115fed1907a72262b58f68c1eb15170b4688)



---

archive/issue_comments_389195.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2016-11-28T16:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389195",
    "user": "https://github.com/jm58660"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_389196.json:
```json
{
    "body": "<a id='comment:5'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3af115fed1907a72262b58f68c1eb15170b4688\">a3af115</a></td><td><code>Last py3-compliance on syntax level.</code></td></tr></table>\n",
    "created_at": "2016-11-28T16:41:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389196",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:5'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3af115fed1907a72262b58f68c1eb15170b4688">a3af115</a></td><td><code>Last py3-compliance on syntax level.</code></td></tr></table>




---

archive/issue_comments_389197.json:
```json
{
    "body": "<a id='comment:6'></a>\nIn `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.",
    "created_at": "2016-11-28T17:03:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389197",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:6'></a>
In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.



---

archive/issue_comments_389198.json:
```json
{
    "body": "**Changing commit** from \"[a3af115fed1907a72262b58f68c1eb15170b4688](https://github.com/sagemath/sagetrac-mirror/commit/a3af115fed1907a72262b58f68c1eb15170b4688)\" to \"[3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb](https://github.com/sagemath/sagetrac-mirror/commit/3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb)\".",
    "created_at": "2016-11-28T20:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389198",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[a3af115fed1907a72262b58f68c1eb15170b4688](https://github.com/sagemath/sagetrac-mirror/commit/a3af115fed1907a72262b58f68c1eb15170b4688)" to "[3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb](https://github.com/sagemath/sagetrac-mirror/commit/3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb)".



---

archive/issue_comments_389199.json:
```json
{
    "body": "<a id='comment:7'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb\">3cdfd4e</a></td><td><code>From map() to list comprehension.</code></td></tr></table>\n",
    "created_at": "2016-11-28T20:59:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389199",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb">3cdfd4e</a></td><td><code>From map() to list comprehension.</code></td></tr></table>




---

archive/issue_comments_389200.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [jdemeyer](#comment%3A6):\n> In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.\n\n\nGood point. Maybe I should read the code I am changing. Well, next time then.",
    "created_at": "2016-11-28T21:00:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389200",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'></a>
Replying to [jdemeyer](#comment%3A6):
> In `hadamard_matrix.py`, it's much better to replace `map(lambda x:f(x), I)` by `f(x) for x in I`.


Good point. Maybe I should read the code I am changing. Well, next time then.



---

archive/issue_comments_389201.json:
```json
{
    "body": "<a id='comment:9'></a>\nok, good, thanks",
    "created_at": "2016-12-01T20:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389201",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:9'></a>
ok, good, thanks



---

archive/issue_comments_389202.json:
```json
{
    "body": "**Reviewer:** Fr\u00e9d\u00e9ric Chapoton",
    "created_at": "2016-12-01T20:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389202",
    "user": "https://github.com/fchapoton"
}
```

**Reviewer:** Frédéric Chapoton



---

archive/issue_comments_389203.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-12-01T20:51:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389203",
    "user": "https://github.com/fchapoton"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_389204.json:
```json
{
    "body": "<a id='comment:10'></a>\nHooray!\n\nIs there any way to doccheck syntax being py3-compliant, i.e. a py2 module to check for py3 syntax?",
    "created_at": "2016-12-02T07:04:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389204",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'></a>
Hooray!

Is there any way to doccheck syntax being py3-compliant, i.e. a py2 module to check for py3 syntax?



---

archive/issue_comments_389205.json:
```json
{
    "body": "**Changing branch** from \"[u/jmantysalo/remaining_py3_syntax_level_errors](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/remaining_py3_syntax_level_errors)\" to \"[3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb](https://github.com/sagemath/sagetrac-mirror/commit/3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb)\".",
    "created_at": "2016-12-05T00:44:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21983#issuecomment-389205",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/jmantysalo/remaining_py3_syntax_level_errors](https://github.com/sagemath/sagetrac-mirror/tree/u/jmantysalo/remaining_py3_syntax_level_errors)" to "[3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb](https://github.com/sagemath/sagetrac-mirror/commit/3cdfd4e6f7ba5b39f039395dbbc5c9c1f2fe8deb)".



---

archive/issue_events_065494.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-05T00:44:45Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21983",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21983#event-65494"
}
```
