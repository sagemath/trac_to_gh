# Issue 21006: Upgrade to IPython 5.0

archive/issues_020769.json:
```json
{
    "body": "IPython 5.0 and various minor updates\n\nCC:  @kiwifb\n\nBranch: [701b91dfd10bfaf9ac6b0082cccec2980873a073](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)\n\nReviewer: Fran\u00e7ois Bissey\n\nAuthor: Volker Braun\n\nDependencies: #20923\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21006\n\n",
    "closed_at": "2016-08-07T20:00:04Z",
    "created_at": "2016-07-11T21:28:07Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Upgrade to IPython 5.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21006",
    "user": "https://github.com/vbraun"
}
```
IPython 5.0 and various minor updates

CC:  @kiwifb

Branch: [701b91dfd10bfaf9ac6b0082cccec2980873a073](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)

Reviewer: François Bissey

Author: Volker Braun

Dependencies: #20923

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21006





---

archive/issue_comments_386949.json:
```json
{
    "body": "Changing branch from \"\" to \"u/vbraun/ipython_5_0\"",
    "created_at": "2016-07-11T21:32:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386949",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "" to "u/vbraun/ipython_5_0"



---

archive/issue_comments_386950.json:
```json
{
    "body": "<a id='comment:2'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[b7f84cb](https://github.com/sagemath/sagetrac-mirror/commit/b7f84cb8c71712fa036f1cece83a3eb62eaf0408)|`Various updates, including IPython 5.0`|",
    "created_at": "2016-07-11T21:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386950",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:2'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[b7f84cb](https://github.com/sagemath/sagetrac-mirror/commit/b7f84cb8c71712fa036f1cece83a3eb62eaf0408)|`Various updates, including IPython 5.0`|



---

archive/issue_comments_386951.json:
```json
{
    "body": "Changing commit from \"\" to \"b7f84cb8c71712fa036f1cece83a3eb62eaf0408\"",
    "created_at": "2016-07-11T21:36:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386951",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "b7f84cb8c71712fa036f1cece83a3eb62eaf0408"



---

archive/issue_comments_386952.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+IPython 5.0 and various minor updates\n``````\n",
    "created_at": "2016-07-11T21:45:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386952",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+IPython 5.0 and various minor updates
``````




---

archive/issue_comments_386953.json:
```json
{
    "body": "Changing dependencies from \"\" to \"#20923\"",
    "created_at": "2016-07-11T21:59:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386953",
    "user": "https://github.com/vbraun"
}
```

Changing dependencies from "" to "#20923"



---

archive/issue_comments_386954.json:
```json
{
    "body": "<a id='comment:5'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                          |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|\n|[d300d3b](https://github.com/sagemath/sagetrac-mirror/commit/d300d3bdfcf2420e4a9b8e947d77783c78c4f84a)|`Minor updates of various python packages`|\n|[b48de47](https://github.com/sagemath/sagetrac-mirror/commit/b48de475e49d4275d3c98a7fa3937053cab72ba9)|`Merge branch #20923 into t/21006/ipython_5_0`|\n|[a571639](https://github.com/sagemath/sagetrac-mirror/commit/a571639d23b567a0239b183107871583ca4c4cb7)|`Add prompt_toolkit, wcwidth (new IPython dependencies)`|",
    "created_at": "2016-07-11T22:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386954",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                          |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------|
|[d300d3b](https://github.com/sagemath/sagetrac-mirror/commit/d300d3bdfcf2420e4a9b8e947d77783c78c4f84a)|`Minor updates of various python packages`|
|[b48de47](https://github.com/sagemath/sagetrac-mirror/commit/b48de475e49d4275d3c98a7fa3937053cab72ba9)|`Merge branch #20923 into t/21006/ipython_5_0`|
|[a571639](https://github.com/sagemath/sagetrac-mirror/commit/a571639d23b567a0239b183107871583ca4c4cb7)|`Add prompt_toolkit, wcwidth (new IPython dependencies)`|



---

archive/issue_comments_386955.json:
```json
{
    "body": "Changing commit from \"b7f84cb8c71712fa036f1cece83a3eb62eaf0408\" to \"a571639d23b567a0239b183107871583ca4c4cb7\"",
    "created_at": "2016-07-11T22:11:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386955",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "b7f84cb8c71712fa036f1cece83a3eb62eaf0408" to "a571639d23b567a0239b183107871583ca4c4cb7"



---

archive/issue_comments_386956.json:
```json
{
    "body": "<a id='comment:6'></a>\nPrompt configuration was also changed\n\n```\n$ ./sage\n[...]\n/home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/IPython/core/interactiveshell.py:440: UserWarning: As of IPython 5.0 `PromptManager` config will have no effect and has been replaced by TerminalInteractiveShell.prompts_class\n  warn('As of IPython 5.0 `PromptManager` config will have no effect'\nIn [1]: \n```",
    "created_at": "2016-07-11T22:17:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386956",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:6'></a>
Prompt configuration was also changed

```
$ ./sage
[...]
/home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/IPython/core/interactiveshell.py:440: UserWarning: As of IPython 5.0 `PromptManager` config will have no effect and has been replaced by TerminalInteractiveShell.prompts_class
  warn('As of IPython 5.0 `PromptManager` config will have no effect'
In [1]: 
```



---

archive/issue_comments_386957.json:
```json
{
    "body": "<a id='comment:7'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n|                                                                                                                                           |                         |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|\n|[ba7dd98](https://github.com/sagemath/sagetrac-mirror/commit/ba7dd9836386ed119c257d9bb42030149e091b47)|`Fixing hashed doct-test`|\n|[34bbc13](https://github.com/sagemath/sagetrac-mirror/commit/34bbc1345f959ba2813c3a0a1a394240e4511b07)|`Trac #18555: Pickling and otherwise enhancing global options`|\n|[82d0a8c](https://github.com/sagemath/sagetrac-mirror/commit/82d0a8c49fa59d57fc862d89dcdd974011d92cc0)|`Get rid of SAGE_ORIG_LD_LIBRARY_PATH`|\n|[d3721f6](https://github.com/sagemath/sagetrac-mirror/commit/d3721f6bb766f312cb5d4a38d32d79a0be46ed5d)|`Trac #20529: Get rid of SAGE_ORIG_LD_LIBRARY_PATH`|\n|[5384da6](https://github.com/sagemath/sagetrac-mirror/commit/5384da6cdfec62a59c8f9b9acc8596d38e178037)|`Fix a bit of slight sloppiness in variable usage.`|\n|[32199ef](https://github.com/sagemath/sagetrac-mirror/commit/32199ef2ff1e8a0096706178cae8a432230840b2)|`Trac #20987: Minor logic fix in spkg-install for atlas`|\n|[ae15a81](https://github.com/sagemath/sagetrac-mirror/commit/ae15a817d8eca4be5efaa52d5a7ce7385ee09d0f)|`Merge Sage 7.3.beta7 into t/21006/ipython_5_0`|\n|[c99af70](https://github.com/sagemath/sagetrac-mirror/commit/c99af705dded9514ad8f45057049feacd8b58989)|`Add prompt_toolkit, wcwidth (new IPython dependencies)`|\n|[be9a082](https://github.com/sagemath/sagetrac-mirror/commit/be9a0822785c53d8b4e8166fbbad34096febbd62)|`Minor updates`|\n|[d55cb77](https://github.com/sagemath/sagetrac-mirror/commit/d55cb7744b6500619664f136c18c4b2bb70c8b70)|`Update IPython 5.0`|",
    "created_at": "2016-07-11T22:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386957",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
|                                                                                                                                           |                         |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------|
|[ba7dd98](https://github.com/sagemath/sagetrac-mirror/commit/ba7dd9836386ed119c257d9bb42030149e091b47)|`Fixing hashed doct-test`|
|[34bbc13](https://github.com/sagemath/sagetrac-mirror/commit/34bbc1345f959ba2813c3a0a1a394240e4511b07)|`Trac #18555: Pickling and otherwise enhancing global options`|
|[82d0a8c](https://github.com/sagemath/sagetrac-mirror/commit/82d0a8c49fa59d57fc862d89dcdd974011d92cc0)|`Get rid of SAGE_ORIG_LD_LIBRARY_PATH`|
|[d3721f6](https://github.com/sagemath/sagetrac-mirror/commit/d3721f6bb766f312cb5d4a38d32d79a0be46ed5d)|`Trac #20529: Get rid of SAGE_ORIG_LD_LIBRARY_PATH`|
|[5384da6](https://github.com/sagemath/sagetrac-mirror/commit/5384da6cdfec62a59c8f9b9acc8596d38e178037)|`Fix a bit of slight sloppiness in variable usage.`|
|[32199ef](https://github.com/sagemath/sagetrac-mirror/commit/32199ef2ff1e8a0096706178cae8a432230840b2)|`Trac #20987: Minor logic fix in spkg-install for atlas`|
|[ae15a81](https://github.com/sagemath/sagetrac-mirror/commit/ae15a817d8eca4be5efaa52d5a7ce7385ee09d0f)|`Merge Sage 7.3.beta7 into t/21006/ipython_5_0`|
|[c99af70](https://github.com/sagemath/sagetrac-mirror/commit/c99af705dded9514ad8f45057049feacd8b58989)|`Add prompt_toolkit, wcwidth (new IPython dependencies)`|
|[be9a082](https://github.com/sagemath/sagetrac-mirror/commit/be9a0822785c53d8b4e8166fbbad34096febbd62)|`Minor updates`|
|[d55cb77](https://github.com/sagemath/sagetrac-mirror/commit/d55cb7744b6500619664f136c18c4b2bb70c8b70)|`Update IPython 5.0`|



---

archive/issue_comments_386958.json:
```json
{
    "body": "Changing commit from \"a571639d23b567a0239b183107871583ca4c4cb7\" to \"d55cb7744b6500619664f136c18c4b2bb70c8b70\"",
    "created_at": "2016-07-11T22:34:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386958",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "a571639d23b567a0239b183107871583ca4c4cb7" to "d55cb7744b6500619664f136c18c4b2bb70c8b70"



---

archive/issue_comments_386959.json:
```json
{
    "body": "Changing commit from \"d55cb7744b6500619664f136c18c4b2bb70c8b70\" to \"ecee55f458eb5ed9ca20007c2af586975e371586\"",
    "created_at": "2016-07-13T19:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386959",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d55cb7744b6500619664f136c18c4b2bb70c8b70" to "ecee55f458eb5ed9ca20007c2af586975e371586"



---

archive/issue_comments_386960.json:
```json
{
    "body": "<a id='comment:9'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|\n|[ecee55f](https://github.com/sagemath/sagetrac-mirror/commit/ecee55f458eb5ed9ca20007c2af586975e371586)|`Use the new IPython Prompts facilities`|",
    "created_at": "2016-07-13T19:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386960",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------|
|[ecee55f](https://github.com/sagemath/sagetrac-mirror/commit/ecee55f458eb5ed9ca20007c2af586975e371586)|`Use the new IPython Prompts facilities`|



---

archive/issue_comments_386961.json:
```json
{
    "body": "<a id='comment:10'></a>\nIPython's `run_cell()` seems to be broken on Python2: https://github.com/ipython/ipython/issues/9756",
    "created_at": "2016-07-13T19:21:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386961",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:10'></a>
IPython's `run_cell()` seems to be broken on Python2: https://github.com/ipython/ipython/issues/9756



---

archive/issue_comments_386962.json:
```json
{
    "body": "<a id='comment:11'></a>\nWill this be the last `ipython` supporting python 2? I remember a post a while ago stating that a branch would be maintained for python2 but not get any new features.",
    "created_at": "2016-07-13T19:58:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386962",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:11'></a>
Will this be the last `ipython` supporting python 2? I remember a post a while ago stating that a branch would be maintained for python2 but not get any new features.



---

archive/issue_comments_386963.json:
```json
{
    "body": "<a id='comment:12'></a>\nYes, though IPython 5 is supposed to get long-term support because of that.",
    "created_at": "2016-07-13T20:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386963",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:12'></a>
Yes, though IPython 5 is supposed to get long-term support because of that.



---

archive/issue_comments_386964.json:
```json
{
    "body": "Changing commit from \"ecee55f458eb5ed9ca20007c2af586975e371586\" to \"9314230b960ef816cd0aad290f3cb463f26c327f\"",
    "created_at": "2016-07-23T20:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386964",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "ecee55f458eb5ed9ca20007c2af586975e371586" to "9314230b960ef816cd0aad290f3cb463f26c327f"



---

archive/issue_comments_386965.json:
```json
{
    "body": "<a id='comment:13'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|\n|[65ed9b8](https://github.com/sagemath/sagetrac-mirror/commit/65ed9b897767049289980e8e2634581739c0f2f9)|`Test for warnings in ipython_tests`|\n|[49b103c](https://github.com/sagemath/sagetrac-mirror/commit/49b103cabea3005e25f238880171e23d4c741b57)|`Disable new sources of ANSI codes in sage0`|\n|[5d7291f](https://github.com/sagemath/sagetrac-mirror/commit/5d7291fed1af59ce715a5a6906ea0e932efc43aa)|`Refactor IPython configuration generation`|\n|[9314230](https://github.com/sagemath/sagetrac-mirror/commit/9314230b960ef816cd0aad290f3cb463f26c327f)|`Fix doctests`|",
    "created_at": "2016-07-23T20:20:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386965",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------|
|[65ed9b8](https://github.com/sagemath/sagetrac-mirror/commit/65ed9b897767049289980e8e2634581739c0f2f9)|`Test for warnings in ipython_tests`|
|[49b103c](https://github.com/sagemath/sagetrac-mirror/commit/49b103cabea3005e25f238880171e23d4c741b57)|`Disable new sources of ANSI codes in sage0`|
|[5d7291f](https://github.com/sagemath/sagetrac-mirror/commit/5d7291fed1af59ce715a5a6906ea0e932efc43aa)|`Refactor IPython configuration generation`|
|[9314230](https://github.com/sagemath/sagetrac-mirror/commit/9314230b960ef816cd0aad290f3cb463f26c327f)|`Fix doctests`|



---

archive/issue_comments_386966.json:
```json
{
    "body": "Changing author from \"\" to \"Volker Braun\"",
    "created_at": "2016-07-23T20:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386966",
    "user": "https://github.com/vbraun"
}
```

Changing author from "" to "Volker Braun"



---

archive/issue_comments_386967.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-07-23T20:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386967",
    "user": "https://github.com/vbraun"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_386968.json:
```json
{
    "body": "<a id='comment:14'></a>\nAll tests pass",
    "created_at": "2016-07-23T20:52:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386968",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:14'></a>
All tests pass



---

archive/issue_comments_386969.json:
```json
{
    "body": "<a id='comment:15'></a>\nOK, I am not really ready but let's go. It's even more urgent that this also move `pyzmq` and I wonder how we avoided https://bugs.gentoo.org/show_bug.cgi?id=583192 for all the time that `cython-0.24+` and `pyzmq-15.2.0` have been in sage simultaneously.",
    "created_at": "2016-07-23T21:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386969",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:15'></a>
OK, I am not really ready but let's go. It's even more urgent that this also move `pyzmq` and I wonder how we avoided https://bugs.gentoo.org/show_bug.cgi?id=583192 for all the time that `cython-0.24+` and `pyzmq-15.2.0` have been in sage simultaneously.



---

archive/issue_comments_386970.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Fran\u00e7ois Bissey\"",
    "created_at": "2016-07-23T21:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386970",
    "user": "https://github.com/kiwifb"
}
```

Changing reviewer from "" to "François Bissey"



---

archive/issue_comments_386971.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-07-23T21:16:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386971",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_063881.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-24T09:18:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21006#event-63881"
}
```



---

archive/issue_comments_386972.json:
```json
{
    "body": "<a id='comment:16'></a>\nSince its a bigger UI change, lets postpone it to the next beta cycle.",
    "created_at": "2016-07-24T09:18:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386972",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:16'></a>
Since its a bigger UI change, lets postpone it to the next beta cycle.



---

archive/issue_comments_386973.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-07-24T11:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386973",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_386974.json:
```json
{
    "body": "<a id='comment:17'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|\n|[2313023](https://github.com/sagemath/sagetrac-mirror/commit/2313023977cdd03a231bc0696ea9d1e18474859c)|`prompt_toolkit depends on six`|",
    "created_at": "2016-07-24T11:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386974",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------|
|[2313023](https://github.com/sagemath/sagetrac-mirror/commit/2313023977cdd03a231bc0696ea9d1e18474859c)|`prompt_toolkit depends on six`|



---

archive/issue_comments_386975.json:
```json
{
    "body": "Changing commit from \"9314230b960ef816cd0aad290f3cb463f26c327f\" to \"2313023977cdd03a231bc0696ea9d1e18474859c\"",
    "created_at": "2016-07-24T11:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386975",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9314230b960ef816cd0aad290f3cb463f26c327f" to "2313023977cdd03a231bc0696ea9d1e18474859c"



---

archive/issue_comments_386976.json:
```json
{
    "body": "<a id='comment:18'></a>\nJust adding \"upgrade\" to the ticket summary so that it appears in\n\nhttps://trac.sagemath.org/query?summary=~upgrade&desc=1&order=status",
    "created_at": "2016-07-28T10:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386976",
    "user": "https://github.com/slel"
}
```

<a id='comment:18'></a>
Just adding "upgrade" to the ticket summary so that it appears in

https://trac.sagemath.org/query?summary=~upgrade&desc=1&order=status



---

archive/issue_events_063882.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "rename": {
        "from": "IPython 5.0",
        "to": "Upgrade to IPython 5.0"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21006#event-63882"
}
```



---

archive/issue_comments_386977.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-06T17:06:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386977",
    "user": "https://github.com/vbraun"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_386978.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2016-08-06T18:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386978",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_386979.json:
```json
{
    "body": "<a id='comment:20'></a>\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n|                                                                                                                                           |                                   |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|\n|[701b91d](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)|`prompt_toolkit depends on wcwidth`|",
    "created_at": "2016-08-06T18:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386979",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:20'></a>
Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
|                                                                                                                                           |                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------|
|[701b91d](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)|`prompt_toolkit depends on wcwidth`|



---

archive/issue_comments_386980.json:
```json
{
    "body": "Changing commit from \"2313023977cdd03a231bc0696ea9d1e18474859c\" to \"701b91dfd10bfaf9ac6b0082cccec2980873a073\"",
    "created_at": "2016-08-06T18:23:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386980",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2313023977cdd03a231bc0696ea9d1e18474859c" to "701b91dfd10bfaf9ac6b0082cccec2980873a073"



---

archive/issue_comments_386981.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-07T20:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386981",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_386982.json:
```json
{
    "body": "Changing branch from \"u/vbraun/ipython_5_0\" to \"701b91dfd10bfaf9ac6b0082cccec2980873a073\"",
    "created_at": "2016-08-07T20:00:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386982",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/vbraun/ipython_5_0" to "701b91dfd10bfaf9ac6b0082cccec2980873a073"



---

archive/issue_events_063883.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-07T20:00:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21006#event-63883"
}
```



---

archive/issue_comments_386983.json:
```json
{
    "body": "Changing commit from \"701b91dfd10bfaf9ac6b0082cccec2980873a073\" to \"\"",
    "created_at": "2016-08-11T21:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386983",
    "user": "https://github.com/nexttime"
}
```

Changing commit from "701b91dfd10bfaf9ac6b0082cccec2980873a073" to ""



---

archive/issue_comments_386984.json:
```json
{
    "body": "<a id='comment:22'></a>\nThis presumably broke `sage_mode` (cf. [this post on sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/88271)).\n\nAnd this also seems related:\n\n```\nAfter the update, on exit from Sage I get\n\nExiting Sage (CPU time 0m0.17s, Wall time 0m44.15s).\n:0: UserWarning: You do not have a working installation of the service_identity module: 'No module named service_identity'.  Please install it from <https://pypi.python.org/pypi/service_identity> and make sure all of its dependencies are satisfied.  Without the service_identity module and a recent enough pyOpenSSL to support it, Twisted can perform only rudimentary TLS client hostname verification.  Many valid certificate/hostname mappings may be rejected.\n\nAfter doing \"sage --pip install service_identity\"\nthis warning goes away.\n\nAny idea what happens here?\n\nDima\n```\n(from sage-release)",
    "created_at": "2016-08-11T21:46:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386984",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:22'></a>
This presumably broke `sage_mode` (cf. [this post on sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/88271)).

And this also seems related:

```
After the update, on exit from Sage I get

Exiting Sage (CPU time 0m0.17s, Wall time 0m44.15s).
:0: UserWarning: You do not have a working installation of the service_identity module: 'No module named service_identity'.  Please install it from <https://pypi.python.org/pypi/service_identity> and make sure all of its dependencies are satisfied.  Without the service_identity module and a recent enough pyOpenSSL to support it, Twisted can perform only rudimentary TLS client hostname verification.  Many valid certificate/hostname mappings may be rejected.

After doing "sage --pip install service_identity"
this warning goes away.

Any idea what happens here?

Dima
```
(from sage-release)



---

archive/issue_comments_386985.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [leif](#comment%3A22):\n> This presumably broke `sage_mode` (cf. [this post on sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/88271)).\n\n\nSee #21227.",
    "created_at": "2016-08-11T21:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386985",
    "user": "https://github.com/nexttime"
}
```

<a id='comment:23'></a>
Replying to [leif](#comment%3A22):
> This presumably broke `sage_mode` (cf. [this post on sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/88271)).


See #21227.



---

archive/issue_comments_386986.json:
```json
{
    "body": "<a id='comment:24'></a>\nI think this also broke `line_profiler`:\n\n```\n$ sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 7.4.beta0, Release Date: 2016-08-10               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n[SageTerminalApp] WARNING | Error in loading extension: line_profiler\nCheck your config files in /Users/palmieri/.sage/ipython_genutils-0.1.0/profile_default\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/shellapp.py\", line 246, in init_extensions\n    self.shell.extension_manager.load_extension(ext)\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/extensions.py\", line 85, in load_extension\n    if self._call_load_ipython_extension(mod):\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/extensions.py\", line 132, in _call_load_ipython_extension\n    mod.load_ipython_extension(self.shell)\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/line_profiler.py\", line 372, in load_ipython_extension\n    ip.define_magic('lprun', magic_lprun)\nAttributeError: 'SageTerminalInteractiveShell' object has no attribute 'define_magic'\nsage: %lprun?\nObject `%lprun` not found.\n```",
    "created_at": "2016-08-11T22:36:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386986",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:24'></a>
I think this also broke `line_profiler`:

```
$ sage
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 7.4.beta0, Release Date: 2016-08-10               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
[SageTerminalApp] WARNING | Error in loading extension: line_profiler
Check your config files in /Users/palmieri/.sage/ipython_genutils-0.1.0/profile_default
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/shellapp.py", line 246, in init_extensions
    self.shell.extension_manager.load_extension(ext)
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/extensions.py", line 85, in load_extension
    if self._call_load_ipython_extension(mod):
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/extensions.py", line 132, in _call_load_ipython_extension
    mod.load_ipython_extension(self.shell)
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/line_profiler.py", line 372, in load_ipython_extension
    ip.define_magic('lprun', magic_lprun)
AttributeError: 'SageTerminalInteractiveShell' object has no attribute 'define_magic'
sage: %lprun?
Object `%lprun` not found.
```



---

archive/issue_comments_386987.json:
```json
{
    "body": "<a id='comment:25'></a>\nReplying to [jhpalmieri](#comment%3A24):\n> I think this also broke `line_profiler`:\n\n\nSee #21457.",
    "created_at": "2016-09-09T00:12:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21006#issuecomment-386987",
    "user": "https://trac.sagemath.org/admin/accounts/users/tmonteil"
}
```

<a id='comment:25'></a>
Replying to [jhpalmieri](#comment%3A24):
> I think this also broke `line_profiler`:


See #21457.
