# Issue 21006: Upgrade to IPython 5.0

archive/issues_020769.json:
```json
{
    "assignees": [],
    "body": "IPython 5.0 and various minor updates\n\nDepends on #20923\n\nCC:  @kiwifb\n\nBranch: **[`701b91d`](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\nAuthor: **Volker Braun**\n\nComponent: **packages: standard**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21006_\n\n",
    "closed_at": "2016-08-07T20:00:04Z",
    "created_at": "2016-07-11T21:28:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upgrade to IPython 5.0",
    "type": "issue",
    "updated_at": "2016-09-09T00:12:46Z",
    "url": "https://github.com/sagemath/sage/issues/21006",
    "user": "https://github.com/vbraun"
}
```
IPython 5.0 and various minor updates

Depends on #20923

CC:  @kiwifb

Branch: **[`701b91d`](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)**

Reviewer: **François Bissey**

Author: **Volker Braun**

Component: **packages: standard**

_Issue created by migration from https://trac.sagemath.org/ticket/21006_





---

archive/issue_events_295531.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-11T21:28:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295531"
}
```



---

archive/issue_events_295532.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-11T21:28:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295532"
}
```



---

archive/issue_comments_305426.json:
```json
{
    "body": "Branch: **[u/vbraun/ipython_5_0](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/ipython_5_0)**",
    "created_at": "2016-07-11T21:32:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305426",
    "user": "https://github.com/vbraun"
}
```

Branch: **[u/vbraun/ipython_5_0](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/ipython_5_0)**



---

archive/issue_comments_305427.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b7f84cb8c71712fa036f1cece83a3eb62eaf0408\"><code>b7f84cb</code></a></td><td><code>Various updates, including IPython 5.0</code></td></tr></table>\n",
    "created_at": "2016-07-11T21:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305427",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:2"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b7f84cb8c71712fa036f1cece83a3eb62eaf0408"><code>b7f84cb</code></a></td><td><code>Various updates, including IPython 5.0</code></td></tr></table>




---

archive/issue_comments_305428.json:
```json
{
    "body": "Commit: **[`b7f84cb`](https://github.com/sagemath/sagetrac-mirror/commit/b7f84cb8c71712fa036f1cece83a3eb62eaf0408)**",
    "created_at": "2016-07-11T21:36:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305428",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[`b7f84cb`](https://github.com/sagemath/sagetrac-mirror/commit/b7f84cb8c71712fa036f1cece83a3eb62eaf0408)**



---

archive/issue_events_295533.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-11T21:45:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295533"
}
```



---

archive/issue_comments_305429.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1 +1 @@\n-\n+IPython 5.0 and various minor updates\n``````\n",
    "created_at": "2016-07-11T21:45:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305429",
    "user": "https://github.com/vbraun"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1 +1 @@
-
+IPython 5.0 and various minor updates
``````




---

archive/issue_events_295534.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-11T21:45:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295534"
}
```



---

archive/issue_comments_305430.json:
```json
{
    "body": "Dependencies: **#20923**",
    "created_at": "2016-07-11T21:59:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305430",
    "user": "https://github.com/vbraun"
}
```

Dependencies: **#20923**



---

archive/issue_comments_305431.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d300d3bdfcf2420e4a9b8e947d77783c78c4f84a\"><code>d300d3b</code></a></td><td><code>Minor updates of various python packages</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b48de475e49d4275d3c98a7fa3937053cab72ba9\"><code>b48de47</code></a></td><td><code>Merge branch #20923 into t/21006/ipython_5_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a571639d23b567a0239b183107871583ca4c4cb7\"><code>a571639</code></a></td><td><code>Add prompt_toolkit, wcwidth (new IPython dependencies)</code></td></tr></table>\n",
    "created_at": "2016-07-11T22:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305431",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d300d3bdfcf2420e4a9b8e947d77783c78c4f84a"><code>d300d3b</code></a></td><td><code>Minor updates of various python packages</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b48de475e49d4275d3c98a7fa3937053cab72ba9"><code>b48de47</code></a></td><td><code>Merge branch #20923 into t/21006/ipython_5_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a571639d23b567a0239b183107871583ca4c4cb7"><code>a571639</code></a></td><td><code>Add prompt_toolkit, wcwidth (new IPython dependencies)</code></td></tr></table>




---

archive/issue_comments_305432.json:
```json
{
    "body": "Changed commit from **[`b7f84cb`](https://github.com/sagemath/sagetrac-mirror/commit/b7f84cb8c71712fa036f1cece83a3eb62eaf0408)** to **[`a571639`](https://github.com/sagemath/sagetrac-mirror/commit/a571639d23b567a0239b183107871583ca4c4cb7)**",
    "created_at": "2016-07-11T22:11:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305432",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`b7f84cb`](https://github.com/sagemath/sagetrac-mirror/commit/b7f84cb8c71712fa036f1cece83a3eb62eaf0408)** to **[`a571639`](https://github.com/sagemath/sagetrac-mirror/commit/a571639d23b567a0239b183107871583ca4c4cb7)**



---

archive/issue_comments_305433.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nPrompt configuration was also changed\n\n```\n$ ./sage\n[...]\n/home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/IPython/core/interactiveshell.py:440: UserWarning: As of IPython 5.0 `PromptManager` config will have no effect and has been replaced by TerminalInteractiveShell.prompts_class\n  warn('As of IPython 5.0 `PromptManager` config will have no effect'\nIn [1]: \n```",
    "created_at": "2016-07-11T22:17:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305433",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:6" align="right">comment:6</div>

Prompt configuration was also changed

```
$ ./sage
[...]
/home/vbraun/Sage/git-develop/local/lib/python2.7/site-packages/IPython/core/interactiveshell.py:440: UserWarning: As of IPython 5.0 `PromptManager` config will have no effect and has been replaced by TerminalInteractiveShell.prompts_class
  warn('As of IPython 5.0 `PromptManager` config will have no effect'
In [1]: 
```



---

archive/issue_comments_305434.json:
```json
{
    "body": "<div id=\"comment:7\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba7dd9836386ed119c257d9bb42030149e091b47\"><code>ba7dd98</code></a></td><td><code>Fixing hashed doct-test</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34bbc1345f959ba2813c3a0a1a394240e4511b07\"><code>34bbc13</code></a></td><td><code>Trac #18555: Pickling and otherwise enhancing global options</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82d0a8c49fa59d57fc862d89dcdd974011d92cc0\"><code>82d0a8c</code></a></td><td><code>Get rid of SAGE_ORIG_LD_LIBRARY_PATH</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d3721f6bb766f312cb5d4a38d32d79a0be46ed5d\"><code>d3721f6</code></a></td><td><code>Trac #20529: Get rid of SAGE_ORIG_LD_LIBRARY_PATH</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5384da6cdfec62a59c8f9b9acc8596d38e178037\"><code>5384da6</code></a></td><td><code>Fix a bit of slight sloppiness in variable usage.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/32199ef2ff1e8a0096706178cae8a432230840b2\"><code>32199ef</code></a></td><td><code>Trac #20987: Minor logic fix in spkg-install for atlas</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae15a817d8eca4be5efaa52d5a7ce7385ee09d0f\"><code>ae15a81</code></a></td><td><code>Merge Sage 7.3.beta7 into t/21006/ipython_5_0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c99af705dded9514ad8f45057049feacd8b58989\"><code>c99af70</code></a></td><td><code>Add prompt_toolkit, wcwidth (new IPython dependencies)</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be9a0822785c53d8b4e8166fbbad34096febbd62\"><code>be9a082</code></a></td><td><code>Minor updates</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d55cb7744b6500619664f136c18c4b2bb70c8b70\"><code>d55cb77</code></a></td><td><code>Update IPython 5.0</code></td></tr></table>\n",
    "created_at": "2016-07-11T22:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305434",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:7"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba7dd9836386ed119c257d9bb42030149e091b47"><code>ba7dd98</code></a></td><td><code>Fixing hashed doct-test</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34bbc1345f959ba2813c3a0a1a394240e4511b07"><code>34bbc13</code></a></td><td><code>Trac #18555: Pickling and otherwise enhancing global options</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82d0a8c49fa59d57fc862d89dcdd974011d92cc0"><code>82d0a8c</code></a></td><td><code>Get rid of SAGE_ORIG_LD_LIBRARY_PATH</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d3721f6bb766f312cb5d4a38d32d79a0be46ed5d"><code>d3721f6</code></a></td><td><code>Trac #20529: Get rid of SAGE_ORIG_LD_LIBRARY_PATH</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5384da6cdfec62a59c8f9b9acc8596d38e178037"><code>5384da6</code></a></td><td><code>Fix a bit of slight sloppiness in variable usage.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/32199ef2ff1e8a0096706178cae8a432230840b2"><code>32199ef</code></a></td><td><code>Trac #20987: Minor logic fix in spkg-install for atlas</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae15a817d8eca4be5efaa52d5a7ce7385ee09d0f"><code>ae15a81</code></a></td><td><code>Merge Sage 7.3.beta7 into t/21006/ipython_5_0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c99af705dded9514ad8f45057049feacd8b58989"><code>c99af70</code></a></td><td><code>Add prompt_toolkit, wcwidth (new IPython dependencies)</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be9a0822785c53d8b4e8166fbbad34096febbd62"><code>be9a082</code></a></td><td><code>Minor updates</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d55cb7744b6500619664f136c18c4b2bb70c8b70"><code>d55cb77</code></a></td><td><code>Update IPython 5.0</code></td></tr></table>




---

archive/issue_comments_305435.json:
```json
{
    "body": "Changed commit from **[`a571639`](https://github.com/sagemath/sagetrac-mirror/commit/a571639d23b567a0239b183107871583ca4c4cb7)** to **[`d55cb77`](https://github.com/sagemath/sagetrac-mirror/commit/d55cb7744b6500619664f136c18c4b2bb70c8b70)**",
    "created_at": "2016-07-11T22:34:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305435",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a571639`](https://github.com/sagemath/sagetrac-mirror/commit/a571639d23b567a0239b183107871583ca4c4cb7)** to **[`d55cb77`](https://github.com/sagemath/sagetrac-mirror/commit/d55cb7744b6500619664f136c18c4b2bb70c8b70)**



---

archive/issue_comments_305436.json:
```json
{
    "body": "Changed commit from **[`d55cb77`](https://github.com/sagemath/sagetrac-mirror/commit/d55cb7744b6500619664f136c18c4b2bb70c8b70)** to **[`ecee55f`](https://github.com/sagemath/sagetrac-mirror/commit/ecee55f458eb5ed9ca20007c2af586975e371586)**",
    "created_at": "2016-07-13T19:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305436",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d55cb77`](https://github.com/sagemath/sagetrac-mirror/commit/d55cb7744b6500619664f136c18c4b2bb70c8b70)** to **[`ecee55f`](https://github.com/sagemath/sagetrac-mirror/commit/ecee55f458eb5ed9ca20007c2af586975e371586)**



---

archive/issue_comments_305437.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ecee55f458eb5ed9ca20007c2af586975e371586\"><code>ecee55f</code></a></td><td><code>Use the new IPython Prompts facilities</code></td></tr></table>\n",
    "created_at": "2016-07-13T19:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305437",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ecee55f458eb5ed9ca20007c2af586975e371586"><code>ecee55f</code></a></td><td><code>Use the new IPython Prompts facilities</code></td></tr></table>




---

archive/issue_comments_305438.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nIPython's `run_cell()` seems to be broken on Python2: https://github.com/ipython/ipython/issues/9756",
    "created_at": "2016-07-13T19:21:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305438",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:10" align="right">comment:10</div>

IPython's `run_cell()` seems to be broken on Python2: https://github.com/ipython/ipython/issues/9756



---

archive/issue_comments_305439.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nWill this be the last `ipython` supporting python 2? I remember a post a while ago stating that a branch would be maintained for python2 but not get any new features.",
    "created_at": "2016-07-13T19:58:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305439",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Will this be the last `ipython` supporting python 2? I remember a post a while ago stating that a branch would be maintained for python2 but not get any new features.



---

archive/issue_comments_305440.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nYes, though IPython 5 is supposed to get long-term support because of that.",
    "created_at": "2016-07-13T20:50:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305440",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:12" align="right">comment:12</div>

Yes, though IPython 5 is supposed to get long-term support because of that.



---

archive/issue_comments_305441.json:
```json
{
    "body": "Changed commit from **[`ecee55f`](https://github.com/sagemath/sagetrac-mirror/commit/ecee55f458eb5ed9ca20007c2af586975e371586)** to **[`9314230`](https://github.com/sagemath/sagetrac-mirror/commit/9314230b960ef816cd0aad290f3cb463f26c327f)**",
    "created_at": "2016-07-23T20:20:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305441",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ecee55f`](https://github.com/sagemath/sagetrac-mirror/commit/ecee55f458eb5ed9ca20007c2af586975e371586)** to **[`9314230`](https://github.com/sagemath/sagetrac-mirror/commit/9314230b960ef816cd0aad290f3cb463f26c327f)**



---

archive/issue_comments_305442.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/65ed9b897767049289980e8e2634581739c0f2f9\"><code>65ed9b8</code></a></td><td><code>Test for warnings in ipython_tests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/49b103cabea3005e25f238880171e23d4c741b57\"><code>49b103c</code></a></td><td><code>Disable new sources of ANSI codes in sage0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d7291fed1af59ce715a5a6906ea0e932efc43aa\"><code>5d7291f</code></a></td><td><code>Refactor IPython configuration generation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9314230b960ef816cd0aad290f3cb463f26c327f\"><code>9314230</code></a></td><td><code>Fix doctests</code></td></tr></table>\n",
    "created_at": "2016-07-23T20:20:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305442",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/65ed9b897767049289980e8e2634581739c0f2f9"><code>65ed9b8</code></a></td><td><code>Test for warnings in ipython_tests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/49b103cabea3005e25f238880171e23d4c741b57"><code>49b103c</code></a></td><td><code>Disable new sources of ANSI codes in sage0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d7291fed1af59ce715a5a6906ea0e932efc43aa"><code>5d7291f</code></a></td><td><code>Refactor IPython configuration generation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9314230b960ef816cd0aad290f3cb463f26c327f"><code>9314230</code></a></td><td><code>Fix doctests</code></td></tr></table>




---

archive/issue_comments_305443.json:
```json
{
    "body": "Author: **Volker Braun**",
    "created_at": "2016-07-23T20:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305443",
    "user": "https://github.com/vbraun"
}
```

Author: **Volker Braun**



---

archive/issue_events_295535.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-23T20:52:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295535"
}
```



---

archive/issue_comments_305444.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAll tests pass",
    "created_at": "2016-07-23T20:52:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305444",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:14" align="right">comment:14</div>

All tests pass



---

archive/issue_comments_305445.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nOK, I am not really ready but let's go. It's even more urgent that this also move `pyzmq` and I wonder how we avoided https://bugs.gentoo.org/show_bug.cgi?id=583192 for all the time that `cython-0.24+` and `pyzmq-15.2.0` have been in sage simultaneously.",
    "created_at": "2016-07-23T21:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305445",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:15" align="right">comment:15</div>

OK, I am not really ready but let's go. It's even more urgent that this also move `pyzmq` and I wonder how we avoided https://bugs.gentoo.org/show_bug.cgi?id=583192 for all the time that `cython-0.24+` and `pyzmq-15.2.0` have been in sage simultaneously.



---

archive/issue_comments_305446.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2016-07-23T21:16:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305446",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_events_295536.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-07-23T21:16:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295536"
}
```



---

archive/issue_events_295537.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-07-23T21:16:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295537"
}
```



---

archive/issue_events_295538.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-24T09:18:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295538"
}
```



---

archive/issue_events_295539.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-07-24T09:18:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295539"
}
```



---

archive/issue_comments_305447.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nSince its a bigger UI change, lets postpone it to the next beta cycle.",
    "created_at": "2016-07-24T09:18:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305447",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

Since its a bigger UI change, lets postpone it to the next beta cycle.



---

archive/issue_events_295540.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-07-24T11:55:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295540"
}
```



---

archive/issue_events_295541.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-07-24T11:55:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295541"
}
```



---

archive/issue_comments_305448.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2313023977cdd03a231bc0696ea9d1e18474859c\"><code>2313023</code></a></td><td><code>prompt_toolkit depends on six</code></td></tr></table>\n",
    "created_at": "2016-07-24T11:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305448",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2313023977cdd03a231bc0696ea9d1e18474859c"><code>2313023</code></a></td><td><code>prompt_toolkit depends on six</code></td></tr></table>




---

archive/issue_comments_305449.json:
```json
{
    "body": "Changed commit from **[`9314230`](https://github.com/sagemath/sagetrac-mirror/commit/9314230b960ef816cd0aad290f3cb463f26c327f)** to **[`2313023`](https://github.com/sagemath/sagetrac-mirror/commit/2313023977cdd03a231bc0696ea9d1e18474859c)**",
    "created_at": "2016-07-24T11:55:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305449",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`9314230`](https://github.com/sagemath/sagetrac-mirror/commit/9314230b960ef816cd0aad290f3cb463f26c327f)** to **[`2313023`](https://github.com/sagemath/sagetrac-mirror/commit/2313023977cdd03a231bc0696ea9d1e18474859c)**



---

archive/issue_comments_305450.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nJust adding \"upgrade\" to the ticket summary so that it appears in\n\nhttps://trac.sagemath.org/query?summary=~upgrade&desc=1&order=status",
    "created_at": "2016-07-28T10:51:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305450",
    "user": "https://github.com/slel"
}
```

<div id="comment:18" align="right">comment:18</div>

Just adding "upgrade" to the ticket summary so that it appears in

https://trac.sagemath.org/query?summary=~upgrade&desc=1&order=status



---

archive/issue_events_295542.json:
```json
{
    "actor": "https://github.com/slel",
    "created_at": "2016-07-28T10:51:55Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "title_is": "Upgrade to IPython 5.0",
    "title_was": "IPython 5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295542"
}
```



---

archive/issue_events_295543.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-06T17:06:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295543"
}
```



---

archive/issue_events_295544.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-06T17:06:33Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295544"
}
```



---

archive/issue_events_295545.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-08-06T18:23:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295545"
}
```



---

archive/issue_events_295546.json:
```json
{
    "actor": "https://github.com/sagetrac-git",
    "created_at": "2016-08-06T18:23:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295546"
}
```



---

archive/issue_comments_305451.json:
```json
{
    "body": "<div id=\"comment:20\"></div>\n\nBranch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073\"><code>701b91d</code></a></td><td><code>prompt_toolkit depends on wcwidth</code></td></tr></table>\n",
    "created_at": "2016-08-06T18:23:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305451",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:20"></div>

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073"><code>701b91d</code></a></td><td><code>prompt_toolkit depends on wcwidth</code></td></tr></table>




---

archive/issue_comments_305452.json:
```json
{
    "body": "Changed commit from **[`2313023`](https://github.com/sagemath/sagetrac-mirror/commit/2313023977cdd03a231bc0696ea9d1e18474859c)** to **[`701b91d`](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)**",
    "created_at": "2016-08-06T18:23:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305452",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2313023`](https://github.com/sagemath/sagetrac-mirror/commit/2313023977cdd03a231bc0696ea9d1e18474859c)** to **[`701b91d`](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)**



---

archive/issue_comments_305453.json:
```json
{
    "body": "Changed branch from **[u/vbraun/ipython_5_0](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/ipython_5_0)** to **[`701b91d`](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)**",
    "created_at": "2016-08-07T20:00:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305453",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/vbraun/ipython_5_0](https://github.com/sagemath/sagetrac-mirror/tree/u/vbraun/ipython_5_0)** to **[`701b91d`](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)**



---

archive/issue_events_295547.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-07T20:00:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295547"
}
```



---

archive/issue_events_295548.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "9831d4b308d80f8df4d8dfffdf7dacc65692250e",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-08-07T20:00:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21006#event-295548"
}
```



---

archive/issue_comments_305454.json:
```json
{
    "body": "Changed commit from **[`701b91d`](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)** to none",
    "created_at": "2016-08-11T21:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305454",
    "user": "https://github.com/nexttime"
}
```

Changed commit from **[`701b91d`](https://github.com/sagemath/sagetrac-mirror/commit/701b91dfd10bfaf9ac6b0082cccec2980873a073)** to none



---

archive/issue_comments_305455.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nThis presumably broke `sage_mode` (cf. [this post on sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/88271)).\n\nAnd this also seems related:\n\n```\nAfter the update, on exit from Sage I get\n\nExiting Sage (CPU time 0m0.17s, Wall time 0m44.15s).\n:0: UserWarning: You do not have a working installation of the service_identity module: 'No module named service_identity'.  Please install it from <https://pypi.python.org/pypi/service_identity> and make sure all of its dependencies are satisfied.  Without the service_identity module and a recent enough pyOpenSSL to support it, Twisted can perform only rudimentary TLS client hostname verification.  Many valid certificate/hostname mappings may be rejected.\n\nAfter doing \"sage --pip install service_identity\"\nthis warning goes away.\n\nAny idea what happens here?\n\nDima\n```\n(from sage-release)",
    "created_at": "2016-08-11T21:46:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305455",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:22" align="right">comment:22</div>

This presumably broke `sage_mode` (cf. [this post on sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/88271)).

And this also seems related:

```
After the update, on exit from Sage I get

Exiting Sage (CPU time 0m0.17s, Wall time 0m44.15s).
:0: UserWarning: You do not have a working installation of the service_identity module: 'No module named service_identity'.  Please install it from <https://pypi.python.org/pypi/service_identity> and make sure all of its dependencies are satisfied.  Without the service_identity module and a recent enough pyOpenSSL to support it, Twisted can perform only rudimentary TLS client hostname verification.  Many valid certificate/hostname mappings may be rejected.

After doing "sage --pip install service_identity"
this warning goes away.

Any idea what happens here?

Dima
```
(from sage-release)



---

archive/issue_comments_305456.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@nexttime](#comment:22):\n> This presumably broke `sage_mode` (cf. [this post on sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/88271)).\n\nSee #21227.",
    "created_at": "2016-08-11T21:56:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305456",
    "user": "https://github.com/nexttime"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@nexttime](#comment:22):
> This presumably broke `sage_mode` (cf. [this post on sage-devel](http://permalink.gmane.org/gmane.comp.mathematics.sage.devel/88271)).

See #21227.



---

archive/issue_comments_305457.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nI think this also broke `line_profiler`:\n\n```\n$ sage\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 7.4.beta0, Release Date: 2016-08-10               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\n[SageTerminalApp] WARNING | Error in loading extension: line_profiler\nCheck your config files in /Users/palmieri/.sage/ipython_genutils-0.1.0/profile_default\nTraceback (most recent call last):\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/shellapp.py\", line 246, in init_extensions\n    self.shell.extension_manager.load_extension(ext)\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/extensions.py\", line 85, in load_extension\n    if self._call_load_ipython_extension(mod):\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/extensions.py\", line 132, in _call_load_ipython_extension\n    mod.load_ipython_extension(self.shell)\n  File \"/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/line_profiler.py\", line 372, in load_ipython_extension\n    ip.define_magic('lprun', magic_lprun)\nAttributeError: 'SageTerminalInteractiveShell' object has no attribute 'define_magic'\nsage: %lprun?\nObject `%lprun` not found.\n```",
    "created_at": "2016-08-11T22:36:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305457",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:24" align="right">comment:24</div>

I think this also broke `line_profiler`:

```
$ sage
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 7.4.beta0, Release Date: 2016-08-10               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
[SageTerminalApp] WARNING | Error in loading extension: line_profiler
Check your config files in /Users/palmieri/.sage/ipython_genutils-0.1.0/profile_default
Traceback (most recent call last):
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/shellapp.py", line 246, in init_extensions
    self.shell.extension_manager.load_extension(ext)
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/extensions.py", line 85, in load_extension
    if self._call_load_ipython_extension(mod):
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/IPython/core/extensions.py", line 132, in _call_load_ipython_extension
    mod.load_ipython_extension(self.shell)
  File "/Users/palmieri/Desktop/Sage_stuff/git/sage/local/lib/python2.7/site-packages/line_profiler.py", line 372, in load_ipython_extension
    ip.define_magic('lprun', magic_lprun)
AttributeError: 'SageTerminalInteractiveShell' object has no attribute 'define_magic'
sage: %lprun?
Object `%lprun` not found.
```



---

archive/issue_comments_305458.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@jhpalmieri](#comment:24):\n> I think this also broke `line_profiler`:\n\nSee #21457.",
    "created_at": "2016-09-09T00:12:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21006",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21006#issuecomment-305458",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@jhpalmieri](#comment:24):
> I think this also broke `line_profiler`:

See #21457.
