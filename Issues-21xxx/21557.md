# Issue 21557: Overconvergent Modular Symbols: implement random_element()

archive/issues_021320.json:
```json
{
    "body": "The Overconvergent Modular Symbols package contains some (buggy) code for creating random overconvergent modular symbols, but currently raises NotImplementedError. The existing code needs to be fixed and modified to handle general congruence subgroups.\n\nCC:  @roed314\n\nKeywords: OMS, p-adic, L-function, sd87\n\nAuthor: Ander Steele\n\nBranch: public/ticket/21557\n\nStatus: needs_work\n\nCommit: 5c1b1d19c87c3e2e2e95d82778b862289bee820e\n\nIssue created by migration from https://trac.sagemath.org/ticket/21557\n\n",
    "created_at": "2016-09-21T17:55:51Z",
    "labels": [
        "component: modular forms",
        "minor"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.0",
    "title": "Overconvergent Modular Symbols: implement random_element()",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21557",
    "user": "https://github.com/andersteele"
}
```
The Overconvergent Modular Symbols package contains some (buggy) code for creating random overconvergent modular symbols, but currently raises NotImplementedError. The existing code needs to be fixed and modified to handle general congruence subgroups.

CC:  @roed314

Keywords: OMS, p-adic, L-function, sd87

Author: Ander Steele

Branch: public/ticket/21557

Status: needs_work

Commit: 5c1b1d19c87c3e2e2e95d82778b862289bee820e

Issue created by migration from https://trac.sagemath.org/ticket/21557





---

archive/issue_comments_397352.json:
```json
{
    "body": "Changing commit from \"\" to \"c21647baf5aa3c1f8b584727b94708997169cd89\"",
    "created_at": "2016-09-21T21:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397352",
    "user": "https://github.com/andersteele"
}
```

Changing commit from "" to "c21647baf5aa3c1f8b584727b94708997169cd89"



---

archive/issue_comments_397353.json:
```json
{
    "body": "Changing branch from \"\" to \"u/asteele/random_element\"",
    "created_at": "2016-09-21T21:23:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397353",
    "user": "https://github.com/andersteele"
}
```

Changing branch from "" to "u/asteele/random_element"



---

archive/issue_comments_397354.json:
```json
{
    "body": "<a id='comment:2'></a>one failing doctest, because you should import DirichletGroup",
    "created_at": "2016-12-15T12:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397354",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:2'></a>one failing doctest, because you should import DirichletGroup



---

archive/issue_comments_397355.json:
```json
{
    "body": "<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-03-20T19:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397355",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:3'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_397356.json:
```json
{
    "body": "Changing commit from \"c21647baf5aa3c1f8b584727b94708997169cd89\" to \"202cc92bea6b14513683ddd2b56b66f61ac764d9\"",
    "created_at": "2017-03-20T19:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397356",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c21647baf5aa3c1f8b584727b94708997169cd89" to "202cc92bea6b14513683ddd2b56b66f61ac764d9"



---

archive/issue_comments_397357.json:
```json
{
    "body": "<a id='comment:4'></a>one failing doctest:\n\n```\nFile \"src/sage/modular/pollack_stevens/space.py\", line 715, in sage.modular.pollack_stevens.space.PollackStevensModularSymbolspace.random_element\nFailed example:\n    M.random_element(10)\nExpected:\n    Traceback (most recent call last):\n    ...\n    NotImplementedError\nGot:\n    Modular symbol of level 11 with values in Space of 11-adic distributions with k=2 action and precision cap 20\n```",
    "created_at": "2017-04-03T20:31:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397357",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:4'></a>one failing doctest:

```
File "src/sage/modular/pollack_stevens/space.py", line 715, in sage.modular.pollack_stevens.space.PollackStevensModularSymbolspace.random_element
Failed example:
    M.random_element(10)
Expected:
    Traceback (most recent call last):
    ...
    NotImplementedError
Got:
    Modular symbol of level 11 with values in Space of 11-adic distributions with k=2 action and precision cap 20
```



---

archive/issue_events_057193.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-04T19:05:19Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "milestone": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21557#event-57193"
}
```



---

archive/issue_comments_397358.json:
```json
{
    "body": "<a id='comment:5'></a>Also you need to set the status to \"needs_review\" if you want this to enter sage.",
    "created_at": "2017-04-04T19:05:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397358",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:5'></a>Also you need to set the status to "needs_review" if you want this to enter sage.



---

archive/issue_comments_397359.json:
```json
{
    "body": "<a id='comment:6'></a>ping ?",
    "created_at": "2017-05-13T19:30:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397359",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>ping ?



---

archive/issue_comments_397360.json:
```json
{
    "body": "Changing commit from \"202cc92bea6b14513683ddd2b56b66f61ac764d9\" to \"72da74e18b6d35f5b4e8382f045bbe5f751fcc39\"",
    "created_at": "2017-07-20T22:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397360",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "202cc92bea6b14513683ddd2b56b66f61ac764d9" to "72da74e18b6d35f5b4e8382f045bbe5f751fcc39"



---

archive/issue_comments_397361.json:
```json
{
    "body": "<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-07-20T22:15:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397361",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:7'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_397362.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-07-20T22:16:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397362",
    "user": "https://github.com/andersteele"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_397363.json:
```json
{
    "body": "Changing keywords from \"OMS, p-adic, L-function\" to \"OMS, p-adic, L-function, sd87\".",
    "created_at": "2017-07-22T07:51:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397363",
    "user": "https://github.com/roed314"
}
```

Changing keywords from "OMS, p-adic, L-function" to "OMS, p-adic, L-function, sd87".



---

archive/issue_comments_397364.json:
```json
{
    "body": "<a id='comment:10'></a>The first thing I tried resulted in an error message:\n\n```\nsage: F = PollackStevensModularSymbols(Gamma0(11), 2)\nsage: F.random_element()\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n<ipython-input-4-074c74c306de> in <module>()\n----> 1 F.random_element()\n...\nValueError: You can only compute the valuation with respect to a integer larger than 1.\n```\nSo did the second:\n\n```\nsage: D = OverconvergentDistributions(4, 7, prec_cap=10)\nsage: F = PollackStevensModularSymbols(Gamma0(21), coefficients=D)\nsage: F.random_element()\n---------------------------------------------------------------------------\nNameError                                 Traceback (most recent call last)\n<ipython-input-19-074c74c306de> in <module>()\n----> 1 F.random_element()\n\n/storage/masiao/sage/local/lib/python2.7/site-packages/sage/modular/pollack_stevens/space.pyc in random_element(self, M)\n    758                 t += D[g] * manin.gammas[g] - D[g]\n    759             else:\n--> 760                 if g in MR.reps_with_two_torsion():  # What is MR ??\n    761                     t -= D[g]\n    762                 else:\n\nNameError: global name 'MR' is not defined\n```",
    "created_at": "2017-11-20T16:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397364",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:10'></a>The first thing I tried resulted in an error message:

```
sage: F = PollackStevensModularSymbols(Gamma0(11), 2)
sage: F.random_element()
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
<ipython-input-4-074c74c306de> in <module>()
----> 1 F.random_element()
...
ValueError: You can only compute the valuation with respect to a integer larger than 1.
```
So did the second:

```
sage: D = OverconvergentDistributions(4, 7, prec_cap=10)
sage: F = PollackStevensModularSymbols(Gamma0(21), coefficients=D)
sage: F.random_element()
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-19-074c74c306de> in <module>()
----> 1 F.random_element()

/storage/masiao/sage/local/lib/python2.7/site-packages/sage/modular/pollack_stevens/space.pyc in random_element(self, M)
    758                 t += D[g] * manin.gammas[g] - D[g]
    759             else:
--> 760                 if g in MR.reps_with_two_torsion():  # What is MR ??
    761                     t -= D[g]
    762                 else:

NameError: global name 'MR' is not defined
```



---

archive/issue_comments_397365.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-11-20T16:21:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397365",
    "user": "https://github.com/loefflerd"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_397366.json:
```json
{
    "body": "Changing commit from \"72da74e18b6d35f5b4e8382f045bbe5f751fcc39\" to \"5c1b1d19c87c3e2e2e95d82778b862289bee820e\"",
    "created_at": "2018-08-20T08:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397366",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "72da74e18b6d35f5b4e8382f045bbe5f751fcc39" to "5c1b1d19c87c3e2e2e95d82778b862289bee820e"



---

archive/issue_comments_397367.json:
```json
{
    "body": "<a id='comment:11'></a>New commits:",
    "created_at": "2018-08-20T08:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397367",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>New commits:



---

archive/issue_comments_397368.json:
```json
{
    "body": "Changing branch from \"u/asteele/random_element\" to \"public/ticket/21557\"",
    "created_at": "2018-08-20T08:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21557",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21557#issuecomment-397368",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "u/asteele/random_element" to "public/ticket/21557"
