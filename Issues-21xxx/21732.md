# Issue 21732: Move runtime documentation python modules into src/sage

archive/issues_021495.json:
```json
{
    "body": "Currently, (1) at runtime sage requires some files from under SAGE_DOC_SRC. For example:\n\n```\n$ git grep SAGE_DOC_SRC -- src/sage\n[..]\nsrc/sage/misc/sagedoc.py:    sys.path = [os.path.join(SAGE_DOC_SRC, 'common')] + oldpath\n[..]\nsrc/sage/misc/sphinxify.py:    confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')\n```\n\nHowever, this is awkward for binary distros such as Debian, who don't install source code onto end user machines by default. Indeed, even Sage's own Makefiles don't install these files into SAGE_LOCAL, even though they are a runtime necessity.\n\nIn addition to this, (2) there are many cases where Sage tracks SAGE_DOC_SRC and hacks it into `sys.path` via `os.environ`, which is not very clean.\n\nThis ticket proposes the following change (or something similar)\n\n- src/doc/common/* -> src/sage/docs/common/*\n- src/doc/en/introspect/* -> src/sage/docs/introspect/*\n\n\nThis would solve the above two issues - instead of (2) one can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`, and (1) is taken care of automatically because everything under `src/sage` is installed as standard python modules.\n\nOne could also remove the `OMIT = [\"introspect\"]` exception in src/sage_setup/docbuild/build_options.py.\n\nDoes this sound sensible? If so I can do this for our Debian packaging already, test it, and send in an initial patch.\n\n\n**CC:**  @hivert @isuruf @kiwifb @jhpalmieri @antonio-rojas\n\n**Keywords:** days85\n\n**Branch:** [u/embray/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21732)\n\n**Commit:** [77b5428908e8aff455dabbfad9eb63139ce89ef9](https://github.com/sagemath/sagetrac-mirror/commit/77b5428908e8aff455dabbfad9eb63139ce89ef9)\n\n**Reviewer:** Fran\u00e7ois Bissey\n\n**Author:** Erik Bray\n\n**Dependencies:** #22611 #22655\n\nIssue created by migration from https://trac.sagemath.org/ticket/21732\n\n",
    "closed_at": "2020-02-19T12:41:17Z",
    "created_at": "2016-10-19T22:00:42Z",
    "labels": [
        "component: documentation",
        "enhancement",
        "invalid"
    ],
    "title": "Move runtime documentation python modules into src/sage",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21732",
    "user": "https://github.com/infinity0"
}
```
Currently, (1) at runtime sage requires some files from under SAGE_DOC_SRC. For example:

```
$ git grep SAGE_DOC_SRC -- src/sage
[..]
src/sage/misc/sagedoc.py:    sys.path = [os.path.join(SAGE_DOC_SRC, 'common')] + oldpath
[..]
src/sage/misc/sphinxify.py:    confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')
```

However, this is awkward for binary distros such as Debian, who don't install source code onto end user machines by default. Indeed, even Sage's own Makefiles don't install these files into SAGE_LOCAL, even though they are a runtime necessity.

In addition to this, (2) there are many cases where Sage tracks SAGE_DOC_SRC and hacks it into `sys.path` via `os.environ`, which is not very clean.

This ticket proposes the following change (or something similar)

- src/doc/common/* -> src/sage/docs/common/*
- src/doc/en/introspect/* -> src/sage/docs/introspect/*


This would solve the above two issues - instead of (2) one can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`, and (1) is taken care of automatically because everything under `src/sage` is installed as standard python modules.

One could also remove the `OMIT = ["introspect"]` exception in src/sage_setup/docbuild/build_options.py.

Does this sound sensible? If so I can do this for our Debian packaging already, test it, and send in an initial patch.


**CC:**  @hivert @isuruf @kiwifb @jhpalmieri @antonio-rojas

**Keywords:** days85

**Branch:** [u/embray/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21732)

**Commit:** [77b5428908e8aff455dabbfad9eb63139ce89ef9](https://github.com/sagemath/sagetrac-mirror/commit/77b5428908e8aff455dabbfad9eb63139ce89ef9)

**Reviewer:** Fran√ßois Bissey

**Author:** Erik Bray

**Dependencies:** #22611 #22655

Issue created by migration from https://trac.sagemath.org/ticket/21732





---

archive/issue_comments_321986.json:
```json
{
    "body": "<a id='comment:1'></a>\nPutting the documentation as top-level directory of the project is the standard thing to do with Sphinx. We aren't quite using Sphinx in the standard way as there is a lot of Sage customization, but still... I see no reason to be even more different.\n\nJust saying \"it would make our lives easier to do X\" is not a good explanation. You really need to justify better why you want to do X.",
    "created_at": "2016-10-20T06:25:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321986",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:1'></a>
Putting the documentation as top-level directory of the project is the standard thing to do with Sphinx. We aren't quite using Sphinx in the standard way as there is a lot of Sage customization, but still... I see no reason to be even more different.

Just saying "it would make our lives easier to do X" is not a good explanation. You really need to justify better why you want to do X.



---

archive/issue_events_194579.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-20T06:25:08Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "rename": {
        "from": "Move runtime documentation python modules into sagelib",
        "to": "Move documentation sources into src/sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194579"
}
```



---

archive/issue_comments_321987.json:
```json
{
    "body": "<a id='comment:2'></a>\nWhy is reducing development cost not a good explanation? None of the files I mentioned are actual direct sphinx config files, they are all meant to be included or used by something else. So they are already not being used in a \"standard Sphinx way\".",
    "created_at": "2016-10-20T07:18:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321987",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:2'></a>
Why is reducing development cost not a good explanation? None of the files I mentioned are actual direct sphinx config files, they are all meant to be included or used by something else. So they are already not being used in a "standard Sphinx way".



---

archive/issue_comments_321988.json:
```json
{
    "body": "<a id='comment:3'></a>\nChanging the title back because the ticket is not about moving all documentation sources.",
    "created_at": "2016-10-20T07:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321988",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:3'></a>
Changing the title back because the ticket is not about moving all documentation sources.



---

archive/issue_events_194580.json:
```json
{
    "actor": "https://github.com/infinity0",
    "created_at": "2016-10-20T07:18:54Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "rename": {
        "from": "Move documentation sources into src/sage",
        "to": "Move runtime documentation python modules into src/sage"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194580"
}
```



---

archive/issue_comments_321989.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [infinity0](#comment%3A2):\n> Why is reducing development cost not a good explanation?\n\n\nIf you use an argument of the form \"I want X because it helps Y\" and we both agree that Y is a good thing, you still need to explain why X helps with Y. And I am totally missing that.\n\nAnd this title is totally confusing me, I hardly see how it relates to moving `src/doc/common`. It might relate to moving the `introspect` doc, but then the title covers only a part of the ticket.",
    "created_at": "2016-10-20T07:27:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321989",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Replying to [infinity0](#comment%3A2):
> Why is reducing development cost not a good explanation?


If you use an argument of the form "I want X because it helps Y" and we both agree that Y is a good thing, you still need to explain why X helps with Y. And I am totally missing that.

And this title is totally confusing me, I hardly see how it relates to moving `src/doc/common`. It might relate to moving the `introspect` doc, but then the title covers only a part of the ticket.



---

archive/issue_comments_321990.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt reduces development cost because you no longer have to track SAGE_DOC_SRC in many places and hack it into `sys.path` from `os.environ`. You can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`. This helps with tickets like #21495 which is what we ideally need in Debian (but currently need to hack the equivalent functionality in via patches).\n\nIn additional to reducing development cost, this change (or something similar) is *necessary* for binary distributions because we normally don't install things like SAGE_SRC or SAGE_DOC_SRC onto end user machines, yet the files I mentioned are needed at runtime - and only these files, not the other `conf.py` files or doc sources.",
    "created_at": "2016-10-20T07:39:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321990",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:5'></a>
It reduces development cost because you no longer have to track SAGE_DOC_SRC in many places and hack it into `sys.path` from `os.environ`. You can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`. This helps with tickets like #21495 which is what we ideally need in Debian (but currently need to hack the equivalent functionality in via patches).

In additional to reducing development cost, this change (or something similar) is *necessary* for binary distributions because we normally don't install things like SAGE_SRC or SAGE_DOC_SRC onto end user machines, yet the files I mentioned are needed at runtime - and only these files, not the other `conf.py` files or doc sources.



---

archive/issue_comments_321991.json:
```json
{
    "body": "<a id='comment:6'></a>\n\n```\n$ git grep SAGE_DOC_SRC -- src/sage\n[..]\nsrc/sage/misc/sagedoc.py:    sys.path = [os.path.join(SAGE_DOC_SRC, 'common')] + oldpath\n[..]\nsrc/sage/misc/sphinxify.py:    confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')\n```\n\nare the relevant lines.",
    "created_at": "2016-10-20T07:42:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321991",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:6'></a>

```
$ git grep SAGE_DOC_SRC -- src/sage
[..]
src/sage/misc/sagedoc.py:    sys.path = [os.path.join(SAGE_DOC_SRC, 'common')] + oldpath
[..]
src/sage/misc/sphinxify.py:    confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')
```

are the relevant lines.



---

archive/issue_comments_321992.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [infinity0](#comment%3A5):\n> It reduces development cost because you no longer have to track SAGE_DOC_SRC in many places and hack it into `sys.path` from `os.environ`. You can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`. This helps with tickets like #21495 which is what we ideally need in Debian (but currently need to hack the equivalent functionality in via patches).\n\n\nThis explanation should be in the ticket description. There is no way I could figure out the above paragraph from just reading the description.",
    "created_at": "2016-10-20T12:25:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321992",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
Replying to [infinity0](#comment%3A5):
> It reduces development cost because you no longer have to track SAGE_DOC_SRC in many places and hack it into `sys.path` from `os.environ`. You can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`. This helps with tickets like #21495 which is what we ideally need in Debian (but currently need to hack the equivalent functionality in via patches).


This explanation should be in the ticket description. There is no way I could figure out the above paragraph from just reading the description.



---

archive/issue_comments_321993.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,10 +1,26 @@\n-This would make life easier for binary distros. At the moment we (Debian) don't install SAGE_SRC or SAGE_DOC_SRC anywhere, but some (but not all) of the files here are needed at runtime for functionality such as '?'-suffix syntax.\n+Currently, (1) at runtime sage requires some files from under SAGE_DOC_SRC. For example:\n \n-I think it would be cleaner, both for Debian as well as Sage upstream, to move the following files like this:\n+```\n+$ git grep SAGE_DOC_SRC -- src/sage\n+[..]\n+src/sage/misc/sagedoc.py:    sys.path = [os.path.join(SAGE_DOC_SRC, 'common')] + oldpath\n+[..]\n+src/sage/misc/sphinxify.py:    confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')\n+```\n+\n+However, this is awkward for binary distros such as Debian, who don't install source code onto end user machines by default. Indeed, even Sage's own Makefiles don't install these files into SAGE_LOCAL, even though they are a runtime necessity.\n+\n+In addition to this, (2) there are many cases where Sage tracks SAGE_DOC_SRC and hacks it into `sys.path` via `os.environ`, which is not very clean.\n+\n+This ticket proposes the following change (or something similar)\n \n - src/doc/common/* -> src/sage/doc/common/*\n - src/doc/en/introspect/* -> src/sage/doc/introspect/*\n \n-This would also allow you to remove the sys.path and os.environ hacks that are currently in place everywhere, as well as to remove the `OMIT = [\"introspect\"]` exception in src/sage_setup/docbuild/build_options.py.\n+\n+This would solve the above two issues - instead of (2) one can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`, and (1) is taken care of automatically because everything under `src/sage` is installed as standard python modules.\n+\n+One could also remove the `OMIT = [\"introspect\"]` exception in src/sage_setup/docbuild/build_options.py.\n \n Does this sound sensible? If so I can do this for our Debian packaging already, test it, and send in an initial patch.\n+\n``````\n",
    "created_at": "2016-10-20T17:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321993",
    "user": "https://github.com/infinity0"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,10 +1,26 @@
-This would make life easier for binary distros. At the moment we (Debian) don't install SAGE_SRC or SAGE_DOC_SRC anywhere, but some (but not all) of the files here are needed at runtime for functionality such as '?'-suffix syntax.
+Currently, (1) at runtime sage requires some files from under SAGE_DOC_SRC. For example:
 
-I think it would be cleaner, both for Debian as well as Sage upstream, to move the following files like this:
+```
+$ git grep SAGE_DOC_SRC -- src/sage
+[..]
+src/sage/misc/sagedoc.py:    sys.path = [os.path.join(SAGE_DOC_SRC, 'common')] + oldpath
+[..]
+src/sage/misc/sphinxify.py:    confdir = os.path.join(SAGE_DOC_SRC, 'en', 'introspect')
+```
+
+However, this is awkward for binary distros such as Debian, who don't install source code onto end user machines by default. Indeed, even Sage's own Makefiles don't install these files into SAGE_LOCAL, even though they are a runtime necessity.
+
+In addition to this, (2) there are many cases where Sage tracks SAGE_DOC_SRC and hacks it into `sys.path` via `os.environ`, which is not very clean.
+
+This ticket proposes the following change (or something similar)
 
 - src/doc/common/* -> src/sage/doc/common/*
 - src/doc/en/introspect/* -> src/sage/doc/introspect/*
 
-This would also allow you to remove the sys.path and os.environ hacks that are currently in place everywhere, as well as to remove the `OMIT = ["introspect"]` exception in src/sage_setup/docbuild/build_options.py.
+
+This would solve the above two issues - instead of (2) one can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`, and (1) is taken care of automatically because everything under `src/sage` is installed as standard python modules.
+
+One could also remove the `OMIT = ["introspect"]` exception in src/sage_setup/docbuild/build_options.py.
 
 Does this sound sensible? If so I can do this for our Debian packaging already, test it, and send in an initial patch.
+
``````




---

archive/issue_comments_321994.json:
```json
{
    "body": "<a id='comment:8'></a>\nAlright, sorry, I'll take some more time writing future tickets. I've edited the description now, hopefully it's OK.",
    "created_at": "2016-10-20T17:34:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321994",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:8'></a>
Alright, sorry, I'll take some more time writing future tickets. I've edited the description now, hopefully it's OK.



---

archive/issue_comments_321995.json:
```json
{
    "body": "<a id='comment:9'></a>\nAt least I understand the problem now. Still, I don't know the best way to fix it.",
    "created_at": "2016-10-21T13:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321995",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
At least I understand the problem now. Still, I don't know the best way to fix it.



---

archive/issue_comments_321996.json:
```json
{
    "body": "<a id='comment:11'></a>\nI agree that sage at runtime should not refer to anything in SAGE_DOC_SRC.\nWhatever is needed from there should be installed in an appropriate place in SAGE_LOCAL.",
    "created_at": "2016-10-23T07:01:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321996",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
I agree that sage at runtime should not refer to anything in SAGE_DOC_SRC.
Whatever is needed from there should be installed in an appropriate place in SAGE_LOCAL.



---

archive/issue_comments_321997.json:
```json
{
    "body": "<a id='comment:12'></a>\nI noticed this recently too--glad to see there's already an issue for it.  I agree, using a location in `SAGE_LOCAL` would be best.",
    "created_at": "2016-12-07T14:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321997",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>
I noticed this recently too--glad to see there's already an issue for it.  I agree, using a location in `SAGE_LOCAL` would be best.



---

archive/issue_comments_321998.json:
```json
{
    "body": "<a id='comment:13'></a>\nI'm starting to agree it would be good if this common doc stuff just went in a `sage.misc.docs` sub-package or something.  As it is common/conf.py imports from sage so it already has a dependency on it anyways.\n\nThis would be a good move toward the previously-discussed ideal of making it easier for third-party packages to use Sage's documentation utilities.\n\nAnother options which I've brought up before is to move all docs-related utilities to a separate sage_documention package (to which `sage_setup.docbuild` would also be moved).  This would necessarily be a runtime dependency of sage for docstring sphinxifying to work.",
    "created_at": "2016-12-12T14:07:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321998",
    "user": "https://github.com/embray"
}
```

<a id='comment:13'></a>
I'm starting to agree it would be good if this common doc stuff just went in a `sage.misc.docs` sub-package or something.  As it is common/conf.py imports from sage so it already has a dependency on it anyways.

This would be a good move toward the previously-discussed ideal of making it easier for third-party packages to use Sage's documentation utilities.

Another options which I've brought up before is to move all docs-related utilities to a separate sage_documention package (to which `sage_setup.docbuild` would also be moved).  This would necessarily be a runtime dependency of sage for docstring sphinxifying to work.



---

archive/issue_comments_321999.json:
```json
{
    "body": "**Dependencies:** #22061",
    "created_at": "2016-12-15T13:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-321999",
    "user": "https://github.com/embray"
}
```

**Dependencies:** #22061



---

archive/issue_comments_322000.json:
```json
{
    "body": "<a id='comment:14'></a>\nI'm working on a possible solution to this, but I believe that any reasonable solution should depend on #22061 at a minimum.",
    "created_at": "2016-12-15T13:15:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322000",
    "user": "https://github.com/embray"
}
```

<a id='comment:14'></a>
I'm working on a possible solution to this, but I believe that any reasonable solution should depend on #22061 at a minimum.



---

archive/issue_comments_322001.json:
```json
{
    "body": "**Branch:** [u/embray/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21732)",
    "created_at": "2016-12-16T13:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322001",
    "user": "https://github.com/embray"
}
```

**Branch:** [u/embray/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21732)



---

archive/issue_comments_322002.json:
```json
{
    "body": "**Commit:** [6194785e2d9965614f5698a7538026b1f854e454](https://github.com/sagemath/sagetrac-mirror/commit/6194785e2d9965614f5698a7538026b1f854e454)",
    "created_at": "2016-12-16T13:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322002",
    "user": "https://github.com/embray"
}
```

**Commit:** [6194785e2d9965614f5698a7538026b1f854e454](https://github.com/sagemath/sagetrac-mirror/commit/6194785e2d9965614f5698a7538026b1f854e454)



---

archive/issue_comments_322003.json:
```json
{
    "body": "**Author:** Erik Bray",
    "created_at": "2016-12-16T13:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322003",
    "user": "https://github.com/embray"
}
```

**Author:** Erik Bray



---

archive/issue_comments_322004.json:
```json
{
    "body": "<a id='comment:15'></a>\nHere's my attempt at solving this.  It included a few other changes that I felt were needed (in addition to #22061), but that are not directly relevant either, so might be worth moving to another ticket.\n\nI don't feel strongly about the choice of `sage.misc.docs`, but I am convinced that these files should be somewhere (for now) in the `sage` package.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91750364453a3ecf4446a5566029c0eb963aa6cf\">9175036</a></td><td><code>Don't hard-code (in the form of a symlink) the path to thebe.js.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba840c6934228dc3c35e706f7e79f6ea22ac9f58\">ba840c6</a></td><td><code>A couple enhancements to find_extra_files:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9e1bdc349da2b3cde52be1131638fb74bd7a7e38\">9e1bdc3</a></td><td><code>Adds a sage_build_py command in setup.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/334da540bf3c33a51cd85ef83be9aca37b570ec3\">334da54</a></td><td><code>Fix some tests that broken in sage_setup</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2983351b1116ed29f08d5fc95c6c11dbcddeec64\">2983351</a></td><td><code>Fully move src/doc/common and src/doc/en/introspect to subpackages of a new sage.misc.docs subpackage.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/31a398946cc2ec9d6407403ccc1a6b3ade131a9f\">31a3989</a></td><td><code>Fix no longer accurate reference to SAGE_DOC_SRC in a docstring</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6194785e2d9965614f5698a7538026b1f854e454\">6194785</a></td><td><code>As mentioned in #21732, 'introspect' is no longer needed in OMIT, as 'introspect' is no longer in the doc source tree.</code></td></tr></table>\n",
    "created_at": "2016-12-16T13:48:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322004",
    "user": "https://github.com/embray"
}
```

<a id='comment:15'></a>
Here's my attempt at solving this.  It included a few other changes that I felt were needed (in addition to #22061), but that are not directly relevant either, so might be worth moving to another ticket.

I don't feel strongly about the choice of `sage.misc.docs`, but I am convinced that these files should be somewhere (for now) in the `sage` package.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91750364453a3ecf4446a5566029c0eb963aa6cf">9175036</a></td><td><code>Don't hard-code (in the form of a symlink) the path to thebe.js.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba840c6934228dc3c35e706f7e79f6ea22ac9f58">ba840c6</a></td><td><code>A couple enhancements to find_extra_files:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9e1bdc349da2b3cde52be1131638fb74bd7a7e38">9e1bdc3</a></td><td><code>Adds a sage_build_py command in setup.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/334da540bf3c33a51cd85ef83be9aca37b570ec3">334da54</a></td><td><code>Fix some tests that broken in sage_setup</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2983351b1116ed29f08d5fc95c6c11dbcddeec64">2983351</a></td><td><code>Fully move src/doc/common and src/doc/en/introspect to subpackages of a new sage.misc.docs subpackage.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/31a398946cc2ec9d6407403ccc1a6b3ade131a9f">31a3989</a></td><td><code>Fix no longer accurate reference to SAGE_DOC_SRC in a docstring</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6194785e2d9965614f5698a7538026b1f854e454">6194785</a></td><td><code>As mentioned in #21732, 'introspect' is no longer needed in OMIT, as 'introspect' is no longer in the doc source tree.</code></td></tr></table>




---

archive/issue_events_194581.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-16T13:49:11Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194581"
}
```



---

archive/issue_comments_322005.json:
```json
{
    "body": "<a id='comment:17'></a>\nIn here https://github.com/sagemath/sagetrac-mirror/blob/2983351b1116ed29f08d5fc95c6c11dbcddeec64/src/sage/misc/sphinxify.py and possible some of the other changes, don't we want SAGE_LOCAL instead of SAGE_SRC? (Assuming we don't want to always install SAGE_SRC at runtime.)",
    "created_at": "2016-12-16T23:43:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322005",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:17'></a>
In here https://github.com/sagemath/sagetrac-mirror/blob/2983351b1116ed29f08d5fc95c6c11dbcddeec64/src/sage/misc/sphinxify.py and possible some of the other changes, don't we want SAGE_LOCAL instead of SAGE_SRC? (Assuming we don't want to always install SAGE_SRC at runtime.)



---

archive/issue_comments_322006.json:
```json
{
    "body": "<a id='comment:18'></a>\ner, I mean SAGE_LIB instead of SAGE_LOCAL (or SAGE_SRC)",
    "created_at": "2016-12-16T23:45:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322006",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:18'></a>
er, I mean SAGE_LIB instead of SAGE_LOCAL (or SAGE_SRC)



---

archive/issue_comments_322007.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [infinity0](#comment%3A17):\n> In here https://github.com/sagemath/sagetrac-mirror/blob/2983351b1116ed29f08d5fc95c6c11dbcddeec64/src/sage/misc/sphinxify.py and possible some of the other changes, don't we want SAGE_LOCAL instead of SAGE_SRC? (Assuming we don't want to always install SAGE_SRC at runtime.)\n\n\nYes, this is true.  Actually, I have another branch where I'm trying to improve runtime dependency on SAGE_SRC (or, more specifically, SAGE_SRC is set to the same as SAGE_LIB when not running out of the source tree).\n\nI guess this change is a holdover from that.  But at the same time I did this work as a prerequisite for fixing the other runtime dependencies on SAGE_DOC_SRC and SAGE_SRC, so I guess there's an interdependency between the two.\n\nMaybe, for the sake of making this ticket make sense on its own, I'll bring in some of the changes from my other branch too.",
    "created_at": "2016-12-19T10:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322007",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
Replying to [infinity0](#comment%3A17):
> In here https://github.com/sagemath/sagetrac-mirror/blob/2983351b1116ed29f08d5fc95c6c11dbcddeec64/src/sage/misc/sphinxify.py and possible some of the other changes, don't we want SAGE_LOCAL instead of SAGE_SRC? (Assuming we don't want to always install SAGE_SRC at runtime.)


Yes, this is true.  Actually, I have another branch where I'm trying to improve runtime dependency on SAGE_SRC (or, more specifically, SAGE_SRC is set to the same as SAGE_LIB when not running out of the source tree).

I guess this change is a holdover from that.  But at the same time I did this work as a prerequisite for fixing the other runtime dependencies on SAGE_DOC_SRC and SAGE_SRC, so I guess there's an interdependency between the two.

Maybe, for the sake of making this ticket make sense on its own, I'll bring in some of the changes from my other branch too.



---

archive/issue_comments_322008.json:
```json
{
    "body": "<a id='comment:20'></a>\nSee also [sagenb PR 416](https://github.com/sagemath/sagenb/pull/416).  Perhaps an update ticket for that is needed too.",
    "created_at": "2016-12-21T13:34:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322008",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:20'></a>
See also [sagenb PR 416](https://github.com/sagemath/sagenb/pull/416).  Perhaps an update ticket for that is needed too.



---

archive/issue_comments_322009.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [kcrisman](#comment%3A20):\n> See also [sagenb PR 416](https://github.com/sagemath/sagenb/pull/416).  Perhaps an update ticket for that is needed too.\n\n\nYou mean, to update the sagenb version in the distribution?",
    "created_at": "2016-12-21T14:03:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322009",
    "user": "https://github.com/embray"
}
```

<a id='comment:21'></a>
Replying to [kcrisman](#comment%3A20):
> See also [sagenb PR 416](https://github.com/sagemath/sagenb/pull/416).  Perhaps an update ticket for that is needed too.


You mean, to update the sagenb version in the distribution?



---

archive/issue_comments_322010.json:
```json
{
    "body": "<a id='comment:22'></a>\n> > See also [sagenb PR 416](https://github.com/sagemath/sagenb/pull/416).  Perhaps an update ticket for that is needed too.\n\n> \n> You mean, to update the sagenb version in the distribution?\n\n\nCorrect.",
    "created_at": "2016-12-21T14:31:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322010",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:22'></a>
> > See also [sagenb PR 416](https://github.com/sagemath/sagenb/pull/416).  Perhaps an update ticket for that is needed too.

> 
> You mean, to update the sagenb version in the distribution?


Correct.



---

archive/issue_comments_322011.json:
```json
{
    "body": "<a id='comment:23'></a>\nAnother possibility would be to keep a symlink to `sage/misc/docs/introspect` in its old location (`$SAGE_DOC_SRC/en/introspect`).  That would at least preserve backwards-compat, I think.",
    "created_at": "2016-12-21T14:58:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322011",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'></a>
Another possibility would be to keep a symlink to `sage/misc/docs/introspect` in its old location (`$SAGE_DOC_SRC/en/introspect`).  That would at least preserve backwards-compat, I think.



---

archive/issue_events_194582.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-13T16:57:41Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194582"
}
```



---

archive/issue_events_194583.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-13T16:57:41Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194583"
}
```



---

archive/issue_comments_322012.json:
```json
{
    "body": "<a id='comment:24'></a>\nDoes not merge.",
    "created_at": "2017-03-13T16:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322012",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:24'></a>
Does not merge.



---

archive/issue_comments_322013.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"days85\".",
    "created_at": "2017-03-13T16:57:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322013",
    "user": "https://github.com/jdemeyer"
}
```

**Changing keywords** from "" to "days85".



---

archive/issue_comments_322014.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21732)\" to \"[u/hivert/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/ticket-21732)\".",
    "created_at": "2017-03-13T17:03:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322014",
    "user": "https://github.com/hivert"
}
```

**Changing branch** from "[u/embray/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21732)" to "[u/hivert/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/ticket-21732)".



---

archive/issue_comments_322015.json:
```json
{
    "body": "<a id='comment:26'></a>\nI Handled the (trivial) merge.\n\nFlorent\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8c3b6a10dc67f33d58a897bc928b9db145e93d9f\">8c3b6a1</a></td><td><code>Merged with 7.6.beta6</code></td></tr></table>\n",
    "created_at": "2017-03-13T17:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322015",
    "user": "https://github.com/hivert"
}
```

<a id='comment:26'></a>
I Handled the (trivial) merge.

Florent

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8c3b6a10dc67f33d58a897bc928b9db145e93d9f">8c3b6a1</a></td><td><code>Merged with 7.6.beta6</code></td></tr></table>




---

archive/issue_comments_322016.json:
```json
{
    "body": "**Changing commit** from \"[6194785e2d9965614f5698a7538026b1f854e454](https://github.com/sagemath/sagetrac-mirror/commit/6194785e2d9965614f5698a7538026b1f854e454)\" to \"[8c3b6a10dc67f33d58a897bc928b9db145e93d9f](https://github.com/sagemath/sagetrac-mirror/commit/8c3b6a10dc67f33d58a897bc928b9db145e93d9f)\".",
    "created_at": "2017-03-13T17:04:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322016",
    "user": "https://github.com/hivert"
}
```

**Changing commit** from "[6194785e2d9965614f5698a7538026b1f854e454](https://github.com/sagemath/sagetrac-mirror/commit/6194785e2d9965614f5698a7538026b1f854e454)" to "[8c3b6a10dc67f33d58a897bc928b9db145e93d9f](https://github.com/sagemath/sagetrac-mirror/commit/8c3b6a10dc67f33d58a897bc928b9db145e93d9f)".



---

archive/issue_events_194584.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2017-03-13T17:04:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194584"
}
```



---

archive/issue_events_194585.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2017-03-13T17:04:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194585"
}
```



---

archive/issue_comments_322017.json:
```json
{
    "body": "<a id='comment:28'></a>\nneeds rebase on 7.6.rc0",
    "created_at": "2017-03-13T19:59:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322017",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:28'></a>
needs rebase on 7.6.rc0



---

archive/issue_events_194586.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-13T19:59:38Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194586"
}
```



---

archive/issue_events_194587.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-13T19:59:38Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194587"
}
```



---

archive/issue_events_194588.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-13T19:59:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194588"
}
```



---

archive/issue_events_194589.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-03-13T19:59:38Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194589"
}
```



---

archive/issue_comments_322018.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e372a8e0cd5cab6523f6cafba7698bfa0761a07\">1e372a8</a></td><td><code>Merge branch 'develop' into t/21732/ticket-21732</code></td></tr></table>\n",
    "created_at": "2017-03-14T16:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322018",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e372a8e0cd5cab6523f6cafba7698bfa0761a07">1e372a8</a></td><td><code>Merge branch 'develop' into t/21732/ticket-21732</code></td></tr></table>




---

archive/issue_comments_322019.json:
```json
{
    "body": "**Changing commit** from \"[8c3b6a10dc67f33d58a897bc928b9db145e93d9f](https://github.com/sagemath/sagetrac-mirror/commit/8c3b6a10dc67f33d58a897bc928b9db145e93d9f)\" to \"[1e372a8e0cd5cab6523f6cafba7698bfa0761a07](https://github.com/sagemath/sagetrac-mirror/commit/1e372a8e0cd5cab6523f6cafba7698bfa0761a07)\".",
    "created_at": "2017-03-14T16:02:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322019",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[8c3b6a10dc67f33d58a897bc928b9db145e93d9f](https://github.com/sagemath/sagetrac-mirror/commit/8c3b6a10dc67f33d58a897bc928b9db145e93d9f)" to "[1e372a8e0cd5cab6523f6cafba7698bfa0761a07](https://github.com/sagemath/sagetrac-mirror/commit/1e372a8e0cd5cab6523f6cafba7698bfa0761a07)".



---

archive/issue_events_194590.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2017-03-14T16:03:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194590"
}
```



---

archive/issue_events_194591.json:
```json
{
    "actor": "https://github.com/hivert",
    "created_at": "2017-03-14T16:03:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194591"
}
```



---

archive/issue_comments_322020.json:
```json
{
    "body": "<a id='comment:31'></a>\nI've reviewed this patch and it look quite good to me (though I'm not very competent about the necessity of this changes for better packaging in distros). I still have a few remark\n\n- I agree with the comment in the head of commit [1e372a8](https://github.com/sagemath/sagetrac-mirror/commit/1e372a8e0cd5cab6523f6cafba7698bfa0761a07) that the moving of ``module_list.py`` into ``sage_setup`` should go into another ticket.\n\n- I would have put thing under something like ``sage/doc-conf`` or ``sage/doc-script``. I'm not too happy putting this in misc...\n\n- In `sage_setup/docbuild/__init__.py`, it says:\n\n  ```\n  The sphinx subprocesses are configured in conf.py\n  ```\n  I'd rather put here a comment explaining where to find this `conf.py` and why it was moved there.\n\n- Finally, we should take the opportunity to update `python.inv`.\n\nI'm not sure I'm completely competent to put a positive review here. And I'd rather have someone else looking quickly.",
    "created_at": "2017-03-14T17:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322020",
    "user": "https://github.com/hivert"
}
```

<a id='comment:31'></a>
I've reviewed this patch and it look quite good to me (though I'm not very competent about the necessity of this changes for better packaging in distros). I still have a few remark

- I agree with the comment in the head of commit [1e372a8](https://github.com/sagemath/sagetrac-mirror/commit/1e372a8e0cd5cab6523f6cafba7698bfa0761a07) that the moving of ``module_list.py`` into ``sage_setup`` should go into another ticket.

- I would have put thing under something like ``sage/doc-conf`` or ``sage/doc-script``. I'm not too happy putting this in misc...

- In `sage_setup/docbuild/__init__.py`, it says:

  ```
  The sphinx subprocesses are configured in conf.py
  ```
  I'd rather put here a comment explaining where to find this `conf.py` and why it was moved there.

- Finally, we should take the opportunity to update `python.inv`.

I'm not sure I'm completely competent to put a positive review here. And I'd rather have someone else looking quickly.



---

archive/issue_comments_322021.json:
```json
{
    "body": "<a id='comment:32'></a>\nErik suggested in [This is the Trac macro *comment:19* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#comment:19-macro) that he might make some further tweaks, are these still planned Erik?",
    "created_at": "2017-03-14T17:19:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322021",
    "user": "https://github.com/infinity0"
}
```

<a id='comment:32'></a>
Erik suggested in [This is the Trac macro *comment:19* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#comment:19-macro) that he might make some further tweaks, are these still planned Erik?



---

archive/issue_comments_322022.json:
```json
{
    "body": "<a id='comment:33'></a>\nThis is a case of me not even remembering what I was doing 3 months ago, so I'll have to take a bit to remind myself.\n\nI do remember that I was working on the larger task of eliminating any runtime dependencies on `SAGE_SRC` (or, put more accurately, allowing `SAGE_SRC` to point to `site-packages/sage` in some cases).",
    "created_at": "2017-03-14T17:32:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322022",
    "user": "https://github.com/embray"
}
```

<a id='comment:33'></a>
This is a case of me not even remembering what I was doing 3 months ago, so I'll have to take a bit to remind myself.

I do remember that I was working on the larger task of eliminating any runtime dependencies on `SAGE_SRC` (or, put more accurately, allowing `SAGE_SRC` to point to `site-packages/sage` in some cases).



---

archive/issue_comments_322023.json:
```json
{
    "body": "<a id='comment:34'></a>\nI think I see what I meant now in [comment:19].  It will make more sense if I post a ticket for my other branch with the follow-up work.  I think the question was whether or not to include the one change you mentioned in [comment:17] that doesn't otherwise seem obvious on its own.",
    "created_at": "2017-03-14T17:34:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322023",
    "user": "https://github.com/embray"
}
```

<a id='comment:34'></a>
I think I see what I meant now in [comment:19].  It will make more sense if I post a ticket for my other branch with the follow-up work.  I think the question was whether or not to include the one change you mentioned in [comment:17] that doesn't otherwise seem obvious on its own.



---

archive/issue_comments_322024.json:
```json
{
    "body": "<a id='comment:35'></a>\nI don't see why this needs to make so much changes to the Sage build system which look unrelated to the documentation. I think those changes should certainly be on a new ticket.",
    "created_at": "2017-03-14T17:35:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322024",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>
I don't see why this needs to make so much changes to the Sage build system which look unrelated to the documentation. I think those changes should certainly be on a new ticket.



---

archive/issue_events_194592.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-14T17:40:22Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194592"
}
```



---

archive/issue_events_194593.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-14T17:40:22Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194593"
}
```



---

archive/issue_comments_322025.json:
```json
{
    "body": "<a id='comment:36'></a>\nAnd then a bikeshed issue: I would suggest `src/sage/docs` instead of `src/sage/misc/docs`.",
    "created_at": "2017-03-14T17:40:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322025",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:36'></a>
And then a bikeshed issue: I would suggest `src/sage/docs` instead of `src/sage/misc/docs`.



---

archive/issue_comments_322026.json:
```json
{
    "body": "<a id='comment:37'></a>\nhivert wasn't crazy about putting it in `misc.docs` either.  `sage.docs` works for me.",
    "created_at": "2017-03-14T17:43:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322026",
    "user": "https://github.com/embray"
}
```

<a id='comment:37'></a>
hivert wasn't crazy about putting it in `misc.docs` either.  `sage.docs` works for me.



---

archive/issue_comments_322027.json:
```json
{
    "body": "<a id='comment:38'></a>\nReplying to [jdemeyer](#comment%3A35):\n> I don't see why this needs to make so much changes to the Sage build system which look unrelated to the documentation. I think those changes should certainly be on a new ticket.\n\n\nThe other changes are necessary because of the poor way we currently handle non-Python files in packages, and I made some improvements there.  You're right though that it's not directly related; rather it was a prerequisite.  I could create a separate ticket if you prefer and move those changes.  Then this ticket would become dependent on the new ticket.",
    "created_at": "2017-03-14T17:45:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322027",
    "user": "https://github.com/embray"
}
```

<a id='comment:38'></a>
Replying to [jdemeyer](#comment%3A35):
> I don't see why this needs to make so much changes to the Sage build system which look unrelated to the documentation. I think those changes should certainly be on a new ticket.


The other changes are necessary because of the poor way we currently handle non-Python files in packages, and I made some improvements there.  You're right though that it's not directly related; rather it was a prerequisite.  I could create a separate ticket if you prefer and move those changes.  Then this ticket would become dependent on the new ticket.



---

archive/issue_comments_322028.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [embray](#comment%3A38):\n> Replying to [jdemeyer](#comment%3A35):\n> > I don't see why this needs to make so much changes to the Sage build system which look unrelated to the documentation. I think those changes should certainly be on a new ticket.\n\n> \n> The other changes are necessary because of the poor way we currently handle non-Python files in packages, and I made some improvements there.\n\n\nI'm not really convinced that you need to make such big changes (like moving `module_list.py`). But if you do make those changes, I think they should be on a different ticket.",
    "created_at": "2017-03-14T18:17:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322028",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
Replying to [embray](#comment%3A38):
> Replying to [jdemeyer](#comment%3A35):
> > I don't see why this needs to make so much changes to the Sage build system which look unrelated to the documentation. I think those changes should certainly be on a new ticket.

> 
> The other changes are necessary because of the poor way we currently handle non-Python files in packages, and I made some improvements there.


I'm not really convinced that you need to make such big changes (like moving `module_list.py`). But if you do make those changes, I think they should be on a different ticket.



---

archive/issue_comments_322029.json:
```json
{
    "body": "<a id='comment:40'></a>\nI am not sure why I wasn't on this ticket before. Off course I suffer from this and my changes are much more minimalistic overall. I have to check more of the stuff to see if it is really useful to sage-on-distro in general. \nNote that moving `module_list.py` makes me scratch my head? Why? Like all the files in the `src` folder it is not actually installed. More consistency? May be. Breaking every sage-on-distro patch against `module_list.py`? Yes. Not difficult to deal with, just annoying.",
    "created_at": "2017-03-14T20:38:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322029",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:40'></a>
I am not sure why I wasn't on this ticket before. Off course I suffer from this and my changes are much more minimalistic overall. I have to check more of the stuff to see if it is really useful to sage-on-distro in general. 
Note that moving `module_list.py` makes me scratch my head? Why? Like all the files in the `src` folder it is not actually installed. More consistency? May be. Breaking every sage-on-distro patch against `module_list.py`? Yes. Not difficult to deal with, just annoying.



---

archive/issue_comments_322030.json:
```json
{
    "body": "<a id='comment:41'></a>\nOverall I like the changes that pertains to the documentation. Like Jeroen I would prefer the other bits touching setup.py, find.py and so on. I would prefer it being another ticket with a separate rational. If it is necessary I need more info. I can be very stupid that way.\n\nSpeaking of hacks, a related issue that beeped on my radar reading the ticket. We replaced SAGE_DOC_SRC by SAGE_SRC in a few place, including sphinxify.py. Me and probably most of the other distros point SAGE_SRC to SAGE_LIB at runtime. However it is not desirable to point to your sources at runtime. We may need a better mechanism in a follow up ticket.",
    "created_at": "2017-03-15T08:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322030",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:41'></a>
Overall I like the changes that pertains to the documentation. Like Jeroen I would prefer the other bits touching setup.py, find.py and so on. I would prefer it being another ticket with a separate rational. If it is necessary I need more info. I can be very stupid that way.

Speaking of hacks, a related issue that beeped on my radar reading the ticket. We replaced SAGE_DOC_SRC by SAGE_SRC in a few place, including sphinxify.py. Me and probably most of the other distros point SAGE_SRC to SAGE_LIB at runtime. However it is not desirable to point to your sources at runtime. We may need a better mechanism in a follow up ticket.



---

archive/issue_comments_322031.json:
```json
{
    "body": "<a id='comment:42'></a>\nI knew I had forgotten something. There is a lot of stuff in `sage/misc` I think stuff is coherent enough that it could go in `sage/docs` rather than `sage/misc/docs` but I am not going to insist on it if it takes to much time to move things.",
    "created_at": "2017-03-15T09:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322031",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:42'></a>
I knew I had forgotten something. There is a lot of stuff in `sage/misc` I think stuff is coherent enough that it could go in `sage/docs` rather than `sage/misc/docs` but I am not going to insist on it if it takes to much time to move things.



---

archive/issue_comments_322032.json:
```json
{
    "body": "<a id='comment:43'></a>\nReplying to [fbissey](#comment%3A42):\n> I knew I had forgotten something. There is a lot of stuff in `sage/misc` I think stuff is coherent enough that it could go in `sage/docs` rather than `sage/misc/docs`\n\n\nI agree but let's do that in a new ticket. There is already too much happening in this ticket. I suggest to move the files from `src/doc` to `src/sage/docs` but to keep the existing doc-related files in `src/sage/misc` for now.",
    "created_at": "2017-03-15T09:46:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322032",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:43'></a>
Replying to [fbissey](#comment%3A42):
> I knew I had forgotten something. There is a lot of stuff in `sage/misc` I think stuff is coherent enough that it could go in `sage/docs` rather than `sage/misc/docs`


I agree but let's do that in a new ticket. There is already too much happening in this ticket. I suggest to move the files from `src/doc` to `src/sage/docs` but to keep the existing doc-related files in `src/sage/misc` for now.



---

archive/issue_comments_322033.json:
```json
{
    "body": "<a id='comment:44'></a>\nOkay, well, there were definitely good reasons for the other changes, but it was long enough ago now that I don't remember what they all were.  Let me see if I can break it off to a separate ticket where I explain them better.\n\nMoving `module_list.py` *might* not have been necessary, but I don't recall (eventually I think it should go away entirely but that's another subject).",
    "created_at": "2017-03-15T10:28:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322033",
    "user": "https://github.com/embray"
}
```

<a id='comment:44'></a>
Okay, well, there were definitely good reasons for the other changes, but it was long enough ago now that I don't remember what they all were.  Let me see if I can break it off to a separate ticket where I explain them better.

Moving `module_list.py` *might* not have been necessary, but I don't recall (eventually I think it should go away entirely but that's another subject).



---

archive/issue_comments_322034.json:
```json
{
    "body": "<a id='comment:45'></a>\njdemeyer: You had mentioned that there was some other work you were doing that this ticket should depend on?  Is there a branch for that posted yet, that I could base on?  Or is mainly just a matter of naming the package in sage `sage.doc` (or is it `sage.docs`)?",
    "created_at": "2017-03-20T12:47:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322034",
    "user": "https://github.com/embray"
}
```

<a id='comment:45'></a>
jdemeyer: You had mentioned that there was some other work you were doing that this ticket should depend on?  Is there a branch for that posted yet, that I could base on?  Or is mainly just a matter of naming the package in sage `sage.doc` (or is it `sage.docs`)?



---

archive/issue_comments_322035.json:
```json
{
    "body": "<a id='comment:46'></a>\nReplying to [embray](#comment%3A45):\n> jdemeyer: You had mentioned that there was some other work you were doing that this ticket should depend on?  Is there a branch for that posted yet, that I could base on?  Or is mainly just a matter of naming the package in sage `sage.doc` (or is it `sage.docs`)?\n\n\nThere is at least #22611, which creates the `sage.docs` directory.\n\nYou should also be aware of #22252 which affects docbuilding. Depending on how well `git` can deal with renames, this will probably not actually conflict.",
    "created_at": "2017-03-20T13:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322035",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
Replying to [embray](#comment%3A45):
> jdemeyer: You had mentioned that there was some other work you were doing that this ticket should depend on?  Is there a branch for that posted yet, that I could base on?  Or is mainly just a matter of naming the package in sage `sage.doc` (or is it `sage.docs`)?


There is at least #22611, which creates the `sage.docs` directory.

You should also be aware of #22252 which affects docbuilding. Depending on how well `git` can deal with renames, this will probably not actually conflict.



---

archive/issue_comments_322036.json:
```json
{
    "body": "**Changing dependencies** from \"#22061\" to \"#22611\".",
    "created_at": "2017-03-20T13:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322036",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#22061" to "#22611".



---

archive/issue_comments_322037.json:
```json
{
    "body": "<a id='comment:47'></a>\nRight, I think you had mentioned both of those.  Thanks!",
    "created_at": "2017-03-20T14:20:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322037",
    "user": "https://github.com/embray"
}
```

<a id='comment:47'></a>
Right, I think you had mentioned both of those.  Thanks!



---

archive/issue_comments_322038.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -14,8 +14,8 @@\n \n This ticket proposes the following change (or something similar)\n \n-- src/doc/common/* -> src/sage/doc/common/*\n-- src/doc/en/introspect/* -> src/sage/doc/introspect/*\n+- src/doc/common/* -> src/sage/docs/common/*\n+- src/doc/en/introspect/* -> src/sage/docs/introspect/*\n \n \n This would solve the above two issues - instead of (2) one can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`, and (1) is taken care of automatically because everything under `src/sage` is installed as standard python modules.\n``````\n",
    "created_at": "2017-03-21T09:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322038",
    "user": "https://github.com/embray"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -14,8 +14,8 @@
 
 This ticket proposes the following change (or something similar)
 
-- src/doc/common/* -> src/sage/doc/common/*
-- src/doc/en/introspect/* -> src/sage/doc/introspect/*
+- src/doc/common/* -> src/sage/docs/common/*
+- src/doc/en/introspect/* -> src/sage/docs/introspect/*
 
 
 This would solve the above two issues - instead of (2) one can just do `from sage.doc.common import conf` or `from sage.doc.introspect import conf`, and (1) is taken care of automatically because everything under `src/sage` is installed as standard python modules.
``````




---

archive/issue_comments_322039.json:
```json
{
    "body": "<a id='comment:48'></a>\nNew branch for this ticket based on #22655, which separates out the build changes to be considered separately.  This now just makes the code moves suggested in the description of the ticket.\n\nTo be clear, nothing substantive changed in these files except to update some imports, and remove bits of code that were previously needed to manipulate `sys.path`.  Now functions like `sphinxify` can work without `SAGE_DOC_SRC` needing to be installed somewhere on the system.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e404a68f56f94618d38a9397408ec378270b3ff0\">e404a68</a></td><td><code>A couple enhancements to find_extra_files:</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5d3065295426415c4d267bb2dae91741f078dcc3\">5d30652</a></td><td><code>Adds a sage_build_py command in setup.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/77b5428908e8aff455dabbfad9eb63139ce89ef9\">77b5428</a></td><td><code>Move common documentation config and template files from `src/doc` to a new</code></td></tr></table>\n",
    "created_at": "2017-03-21T09:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322039",
    "user": "https://github.com/embray"
}
```

<a id='comment:48'></a>
New branch for this ticket based on #22655, which separates out the build changes to be considered separately.  This now just makes the code moves suggested in the description of the ticket.

To be clear, nothing substantive changed in these files except to update some imports, and remove bits of code that were previously needed to manipulate `sys.path`.  Now functions like `sphinxify` can work without `SAGE_DOC_SRC` needing to be installed somewhere on the system.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e404a68f56f94618d38a9397408ec378270b3ff0">e404a68</a></td><td><code>A couple enhancements to find_extra_files:</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5d3065295426415c4d267bb2dae91741f078dcc3">5d30652</a></td><td><code>Adds a sage_build_py command in setup.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/77b5428908e8aff455dabbfad9eb63139ce89ef9">77b5428</a></td><td><code>Move common documentation config and template files from `src/doc` to a new</code></td></tr></table>




---

archive/issue_comments_322040.json:
```json
{
    "body": "**Changing branch** from \"[u/hivert/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/ticket-21732)\" to \"[u/embray/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21732)\".",
    "created_at": "2017-03-21T09:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322040",
    "user": "https://github.com/embray"
}
```

**Changing branch** from "[u/hivert/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/hivert/ticket-21732)" to "[u/embray/ticket-21732](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21732)".



---

archive/issue_comments_322041.json:
```json
{
    "body": "**Changing dependencies** from \"#22611\" to \"#22611 #22655\".",
    "created_at": "2017-03-21T09:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322041",
    "user": "https://github.com/embray"
}
```

**Changing dependencies** from "#22611" to "#22611 #22655".



---

archive/issue_comments_322042.json:
```json
{
    "body": "**Changing commit** from \"[1e372a8e0cd5cab6523f6cafba7698bfa0761a07](https://github.com/sagemath/sagetrac-mirror/commit/1e372a8e0cd5cab6523f6cafba7698bfa0761a07)\" to \"[77b5428908e8aff455dabbfad9eb63139ce89ef9](https://github.com/sagemath/sagetrac-mirror/commit/77b5428908e8aff455dabbfad9eb63139ce89ef9)\".",
    "created_at": "2017-03-21T09:37:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322042",
    "user": "https://github.com/embray"
}
```

**Changing commit** from "[1e372a8e0cd5cab6523f6cafba7698bfa0761a07](https://github.com/sagemath/sagetrac-mirror/commit/1e372a8e0cd5cab6523f6cafba7698bfa0761a07)" to "[77b5428908e8aff455dabbfad9eb63139ce89ef9](https://github.com/sagemath/sagetrac-mirror/commit/77b5428908e8aff455dabbfad9eb63139ce89ef9)".



---

archive/issue_comments_322043.json:
```json
{
    "body": "<a id='comment:49'></a>\nAlso, as already noted, this will likely conflict with #22611, but I'm fine waiting for that to be merged first.",
    "created_at": "2017-03-21T09:40:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322043",
    "user": "https://github.com/embray"
}
```

<a id='comment:49'></a>
Also, as already noted, this will likely conflict with #22611, but I'm fine waiting for that to be merged first.



---

archive/issue_events_194594.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-03-22T13:51:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194594"
}
```



---

archive/issue_events_194595.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-03-22T13:51:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194595"
}
```



---

archive/issue_events_194596.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-01T06:41:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194596"
}
```



---

archive/issue_events_194597.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2017-04-01T06:41:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194597"
}
```



---

archive/issue_comments_322044.json:
```json
{
    "body": "<a id='comment:51'></a>\ndoes not apply",
    "created_at": "2017-04-01T06:41:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322044",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:51'></a>
does not apply



---

archive/issue_events_194598.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-11T20:00:14Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194598"
}
```



---

archive/issue_events_194599.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-11T20:00:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194599"
}
```



---

archive/issue_comments_322045.json:
```json
{
    "body": "<a id='comment:52'></a>\nThis ticket appears to be outdated, as #25786 (Fix introspection with ? when doc source is not available) and other tickets seem to have done the described moves. I propose to close this ticket.",
    "created_at": "2020-02-11T20:00:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322045",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:52'></a>
This ticket appears to be outdated, as #25786 (Fix introspection with ? when doc source is not available) and other tickets seem to have done the described moves. I propose to close this ticket.



---

archive/issue_events_194600.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-02-11T20:00:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "milestone": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194600"
}
```



---

archive/issue_comments_322046.json:
```json
{
    "body": "<a id='comment:53'></a>\nIt looks okay to me to close this, but the distro people should take a look.",
    "created_at": "2020-02-11T22:44:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322046",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:53'></a>
It looks okay to me to close this, but the distro people should take a look.



---

archive/issue_comments_322047.json:
```json
{
    "body": "<a id='comment:54'></a>\nI used to have to move python files in sage-on-gentoo to make the doc work. Not anymore. Although I still copy `doc/common/themes` in place so there may still be something to do. For some reason we seem to produce a lot of cruft and strange things in the doc on distros but that should be a different ticket.",
    "created_at": "2020-02-12T08:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322047",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:54'></a>
I used to have to move python files in sage-on-gentoo to make the doc work. Not anymore. Although I still copy `doc/common/themes` in place so there may still be something to do. For some reason we seem to produce a lot of cruft and strange things in the doc on distros but that should be a different ticket.



---

archive/issue_events_194601.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-02-12T08:02:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194601"
}
```



---

archive/issue_events_194602.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2020-02-12T08:02:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194602"
}
```



---

archive/issue_comments_322048.json:
```json
{
    "body": "**Reviewer:** Fran\u00e7ois Bissey",
    "created_at": "2020-02-12T08:02:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21732#issuecomment-322048",
    "user": "https://github.com/kiwifb"
}
```

**Reviewer:** Fran√ßois Bissey



---

archive/issue_events_194603.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-02-19T12:41:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194603"
}
```



---

archive/issue_events_194604.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2020-02-19T12:41:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21732",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21732#event-194604"
}
```
