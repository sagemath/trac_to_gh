# Issue 21415: Iterator over all orientations of a graph

archive/issues_021178.json:
```json
{
    "assignees": [],
    "body": "I was asked if Sage provides code to iterate over all orientations of a graph. We should add this to Sage.\n\n**CC:**  @jm58660\n\n**Branch/Commit:** [ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3](https://github.com/sagemath/sagetrac-mirror/commit/ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3)\n\n**Reviewer:** Jori M\u00e4ntysalo\n\n**Author:** Travis Scrimshaw\n\nIssue created by migration from https://trac.sagemath.org/ticket/21415\n\n",
    "closed_at": "2016-09-21T20:15:39Z",
    "created_at": "2016-09-04T23:05:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Iterator over all orientations of a graph",
    "type": "issue",
    "updated_at": "2016-09-21T20:15:39Z",
    "url": "https://github.com/sagemath/sage/issues/21415",
    "user": "https://github.com/tscrim"
}
```
I was asked if Sage provides code to iterate over all orientations of a graph. We should add this to Sage.

**CC:**  @jm58660

**Branch/Commit:** [ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3](https://github.com/sagemath/sagetrac-mirror/commit/ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3)

**Reviewer:** Jori MÃ¤ntysalo

**Author:** Travis Scrimshaw

Issue created by migration from https://trac.sagemath.org/ticket/21415





---

archive/issue_events_260533.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-04T23:05:45Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260533"
}
```



---

archive/issue_events_260534.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-04T23:05:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "08517b",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260534"
}
```



---

archive/issue_events_260535.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-04T23:05:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260535"
}
```



---

archive/issue_comments_316115.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nHere is some code that does it:\n\n```sage\ndef all_orientations(G):\n    from itertools import product\n    E = [[(u,v,label), (v,u,label)] for u,v,label in G.edges()]\n    verts = G.vertices()\n    for edges in product(*E):\n        yield DiGraph([verts, edges], format='vertices_and_edges')\n```",
    "created_at": "2016-09-04T23:06:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316115",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:1'>**Comment 1:**</a>
Here is some code that does it:

```sage
def all_orientations(G):
    from itertools import product
    E = [[(u,v,label), (v,u,label)] for u,v,label in G.edges()]
    verts = G.vertices()
    for edges in product(*E):
        yield DiGraph([verts, edges], format='vertices_and_edges')
```



---

archive/issue_comments_316116.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\nSeems reasonable. So this needs just definition, examples and so on. The graph may not have multiple edges nor loops, but it can have weight (or other labels) assigned to edges.\n\nI can see no easy way to optimize this, `product` already does what is possible.",
    "created_at": "2016-09-05T05:17:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316116",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:2'>**Comment 2:**</a>
Seems reasonable. So this needs just definition, examples and so on. The graph may not have multiple edges nor loops, but it can have weight (or other labels) assigned to edges.

I can see no easy way to optimize this, `product` already does what is possible.



---

archive/issue_comments_316117.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\nSomething like this for docstring?\n\n```\n    \"\"\"\n    Return an iterator over orientations of the graph.\n    \n    An *orientation* of an undirected graph is a directed\n    graph such that every edge is assigned a direction.\n    Hence there are `2^s` oriented digraphs for a graph\n    with `s` edges.\n    \n    EXAMPLES::\n        \n        sage: G = Graph([[1,2,3], [(1, 2, 'a'), (1, 3, 'b')]], format='vertices_and_edges')\n        sage: it = G.all_orientations()\n        sage: D = it.next()\n        sage: D.edges()  # Random order for orientations\n        [(1, 2, 'a'), (1, 3, 'b')]\n        sage: D = it.next()\n        sage: D.edges()  # Random order for orientations\n        [(2, 1, 'a'), (1, 3, 'b')]\n    \n    TESTS::\n        \n        sage: G = Graph()\n        sage: G_ = [g for g in G.all_orientations()]\n        sage: len(G_)\n        1\n        sage: G_[0]\n        Digraph on 0 vertices\n        \n        sage: G = Graph(5)\n        sage: it = G.all_orientations()\n        sage: G_ = next(it)\n        sage: G_.size()\n        0\n    \"\"\"\n```\n\nShould the name be `all_orientations()` or just `orientations()`?",
    "created_at": "2016-09-05T07:04:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316117",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:3'>**Comment 3:**</a>
Something like this for docstring?

```
    """
    Return an iterator over orientations of the graph.
    
    An *orientation* of an undirected graph is a directed
    graph such that every edge is assigned a direction.
    Hence there are `2^s` oriented digraphs for a graph
    with `s` edges.
    
    EXAMPLES::
        
        sage: G = Graph([[1,2,3], [(1, 2, 'a'), (1, 3, 'b')]], format='vertices_and_edges')
        sage: it = G.all_orientations()
        sage: D = it.next()
        sage: D.edges()  # Random order for orientations
        [(1, 2, 'a'), (1, 3, 'b')]
        sage: D = it.next()
        sage: D.edges()  # Random order for orientations
        [(2, 1, 'a'), (1, 3, 'b')]
    
    TESTS::
        
        sage: G = Graph()
        sage: G_ = [g for g in G.all_orientations()]
        sage: len(G_)
        1
        sage: G_[0]
        Digraph on 0 vertices
        
        sage: G = Graph(5)
        sage: it = G.all_orientations()
        sage: G_ = next(it)
        sage: G_.size()
        0
    """
```

Should the name be `all_orientations()` or just `orientations()`?



---

archive/issue_comments_316118.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n`orientations` is probably better. I was thinking of actually making one function for the iterator and one for the list. What do you think?",
    "created_at": "2016-09-05T14:44:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316118",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:4'>**Comment 4:**</a>
`orientations` is probably better. I was thinking of actually making one function for the iterator and one for the list. What do you think?



---

archive/issue_comments_316119.json:
```json
{
    "body": "<a id='comment:5'>**Comment 5:**</a>\nAlso, the docstring looks good. We will just have to add some tests for multiedges and/or loops. However, the order of the iterator and edges should be consistent when the vertices have a total ordering (like the integers).",
    "created_at": "2016-09-05T14:46:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316119",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'>**Comment 5:**</a>
Also, the docstring looks good. We will just have to add some tests for multiedges and/or loops. However, the order of the iterator and edges should be consistent when the vertices have a total ordering (like the integers).



---

archive/issue_comments_316120.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nI didn't know that `sort=True` is the default for `edges`. Actually I didn't even know about the option. But that is good, we can have easier examples.\n\nMany graph functions already have both list and iterator versions, so I guess it makes sense to have both. But if unsure, add only iterator. Python seems to be changing more iterator-style, `range` vs. `xrange`, but I don't know if it should affect us.",
    "created_at": "2016-09-05T14:59:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316120",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'>**Comment 6:**</a>
I didn't know that `sort=True` is the default for `edges`. Actually I didn't even know about the option. But that is good, we can have easier examples.

Many graph functions already have both list and iterator versions, so I guess it makes sense to have both. But if unsure, add only iterator. Python seems to be changing more iterator-style, `range` vs. `xrange`, but I don't know if it should affect us.



---

archive/issue_comments_316121.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nSee also [this ask question](https://ask.sagemath.org/question/34711/how-to-get-an-arbitrary-orientation-of-a-graph/). The suggested solution is of course not optimal since we create list and then check membership (the idea was to show how to easily reuse existing code), but it deals with data structure, embedding, etc.",
    "created_at": "2016-09-05T20:36:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316121",
    "user": "https://github.com/sagetrac-tmonteil"
}
```

<a id='comment:7'>**Comment 7:**</a>
See also [this ask question](https://ask.sagemath.org/question/34711/how-to-get-an-arbitrary-orientation-of-a-graph/). The suggested solution is of course not optimal since we create list and then check membership (the idea was to show how to easily reuse existing code), but it deals with data structure, embedding, etc.



---

archive/issue_comments_316122.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nThe solution proposed in [this ask question](https://ask.sagemath.org/question/34711/how-to-get-an-arbitrary-orientation-of-a-graph/) is certainly more expensive than the solution proposed above. However, the decoration of the method (data structure, etc.) is interesting.\n\nI suggest to avoid a method able to return all orientations at once: too huge list. An iterator seem much more appropriate.\nAlso, we may have an option to iterate over a random ordering of the orientations, for instance using this simple trick\n`E = [[(u,v,l), (v,u,l)] if randint(0,1) else [(v,u,l), (u,v,l)]   for u,v,l in G.edges()]`\n\nAnother option is to use gray codes or revolving door principles to ensure that two consecutive orientations have very little modifications. It will not change the validity of the method, just the ordering. So we may save some time using the copy method of digraph and then applying the minor changes instead of creating a completely new graph.\nSee e.g. [the doc on gray code of simpy](http://docs.sympy.org/dev/modules/combinatorics/graycode.html) and [discussion on sage-combinat-devel](https://groups.google.com/forum/#!topic/sage-combinat-devel/EbPNFXTKmHU). Admittedly more tricky to code.",
    "created_at": "2016-09-06T11:27:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316122",
    "user": "https://github.com/dcoudert"
}
```

<a id='comment:8'>**Comment 8:**</a>
The solution proposed in [this ask question](https://ask.sagemath.org/question/34711/how-to-get-an-arbitrary-orientation-of-a-graph/) is certainly more expensive than the solution proposed above. However, the decoration of the method (data structure, etc.) is interesting.

I suggest to avoid a method able to return all orientations at once: too huge list. An iterator seem much more appropriate.
Also, we may have an option to iterate over a random ordering of the orientations, for instance using this simple trick
`E = [[(u,v,l), (v,u,l)] if randint(0,1) else [(v,u,l), (u,v,l)]   for u,v,l in G.edges()]`

Another option is to use gray codes or revolving door principles to ensure that two consecutive orientations have very little modifications. It will not change the validity of the method, just the ordering. So we may save some time using the copy method of digraph and then applying the minor changes instead of creating a completely new graph.
See e.g. [the doc on gray code of simpy](http://docs.sympy.org/dev/modules/combinatorics/graycode.html) and [discussion on sage-combinat-devel](https://groups.google.com/forum/#!topic/sage-combinat-devel/EbPNFXTKmHU). Admittedly more tricky to code.



---

archive/issue_comments_316123.json:
```json
{
    "body": "**Commit:** [44e925fa54823f18f3c4d39fba05ed2bb98874f4](https://github.com/sagemath/sagetrac-mirror/commit/44e925fa54823f18f3c4d39fba05ed2bb98874f4)",
    "created_at": "2016-09-18T15:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316123",
    "user": "https://github.com/tscrim"
}
```

**Commit:** [44e925fa54823f18f3c4d39fba05ed2bb98874f4](https://github.com/sagemath/sagetrac-mirror/commit/44e925fa54823f18f3c4d39fba05ed2bb98874f4)



---

archive/issue_comments_316124.json:
```json
{
    "body": "**Author:** Travis Scrimshaw",
    "created_at": "2016-09-18T15:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316124",
    "user": "https://github.com/tscrim"
}
```

**Author:** Travis Scrimshaw



---

archive/issue_events_260536.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-18T15:58:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260536"
}
```



---

archive/issue_comments_316125.json:
```json
{
    "body": "**Branch:** [public/graphs/orientations_iter-21415](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/orientations_iter-21415)",
    "created_at": "2016-09-18T15:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316125",
    "user": "https://github.com/tscrim"
}
```

**Branch:** [public/graphs/orientations_iter-21415](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/orientations_iter-21415)



---

archive/issue_comments_316126.json:
```json
{
    "body": "<a id='comment:9'>**Comment 9:**</a>\nI would say Python is not switching to more iterator style per-se, but having default behavior that is more practical for the typical programming purpose.\n\nI put the code into a branch, taking some from the ask answer, and kept only an iterator because of how big is does get.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44e925fa54823f18f3c4d39fba05ed2bb98874f4\">44e925f</a></td><td><code>Implementing iterator over all orientations of a graph.</code></td></tr></table>\n",
    "created_at": "2016-09-18T15:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316126",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'>**Comment 9:**</a>
I would say Python is not switching to more iterator style per-se, but having default behavior that is more practical for the typical programming purpose.

I put the code into a branch, taking some from the ask answer, and kept only an iterator because of how big is does get.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44e925fa54823f18f3c4d39fba05ed2bb98874f4">44e925f</a></td><td><code>Implementing iterator over all orientations of a graph.</code></td></tr></table>




---

archive/issue_comments_316127.json:
```json
{
    "body": "<a id='comment:10'>**Comment 10:**</a>\n- `implementation` is missing from the `INPUT` block.\n\n- \"optional\" at documentation of parameter `sparse` is strange, and `data_structure` does not have it; that is inconsistent.\n\n- Spaces in the line after one-line description (and that makes index of functions quite bad).\n\n- Is it meaningful to copy name of original graph? Sounds strange to have a directed Petersen graph.\n\nOtherwise it seems to work, attributes for allowing loops and/or multiedges works and so on.",
    "created_at": "2016-09-18T16:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316127",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:10'>**Comment 10:**</a>
- `implementation` is missing from the `INPUT` block.

- "optional" at documentation of parameter `sparse` is strange, and `data_structure` does not have it; that is inconsistent.

- Spaces in the line after one-line description (and that makes index of functions quite bad).

- Is it meaningful to copy name of original graph? Sounds strange to have a directed Petersen graph.

Otherwise it seems to work, attributes for allowing loops and/or multiedges works and so on.



---

archive/issue_events_260537.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-18T16:46:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260537"
}
```



---

archive/issue_events_260538.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-18T16:46:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260538"
}
```



---

archive/issue_comments_316128.json:
```json
{
    "body": "<a id='comment:11'>**Comment 11:**</a>\nReplying to [@jm58660](#comment%3A10):\n> - `implementation` is missing from the `INPUT` block.\n\nThis is not included in *any* documentation. I am following suit.\n\n> - \"optional\" at documentation of parameter `sparse` is strange, and `data_structure` does not have it; that is inconsistent.\n\n`sparse` is there as a shorthand for (the necessary) `data_structure`, so it is optional.\n\n> - Spaces in the line after one-line description (and that makes index of functions quite bad).\n\nWill fix.\n\n> - Is it meaningful to copy name of original graph? Sounds strange to have a directed Petersen graph.\n\nShould we add \"directed\" to the front of the name or just drop it altogether? I don't have a preference on this.\n\n> Otherwise it seems to work, attributes for allowing loops and/or multiedges works and so on.\n\nI will also add tests for non-simple graphs.",
    "created_at": "2016-09-18T17:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316128",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:11'>**Comment 11:**</a>
Replying to [@jm58660](#comment%3A10):
> - `implementation` is missing from the `INPUT` block.

This is not included in *any* documentation. I am following suit.

> - "optional" at documentation of parameter `sparse` is strange, and `data_structure` does not have it; that is inconsistent.

`sparse` is there as a shorthand for (the necessary) `data_structure`, so it is optional.

> - Spaces in the line after one-line description (and that makes index of functions quite bad).

Will fix.

> - Is it meaningful to copy name of original graph? Sounds strange to have a directed Petersen graph.

Should we add "directed" to the front of the name or just drop it altogether? I don't have a preference on this.

> Otherwise it seems to work, attributes for allowing loops and/or multiedges works and so on.

I will also add tests for non-simple graphs.



---

archive/issue_comments_316129.json:
```json
{
    "body": "<a id='comment:12'>**Comment 12:**</a>\nReplying to [@tscrim](#comment%3A11):\n\n> > - `implementation` is missing from the `INPUT` block.\n\n> \n> This is not included in *any* documentation. I am following suit.\n\nOK.\n\n> > - \"optional\" at documentation of parameter `sparse` is strange, and `data_structure` does not have it; that is inconsistent.\n\n> \n> `sparse` is there as a shorthand for (the necessary) `data_structure`, so it is optional.\n\nI do not understand. Both parameters are optional, as both have a default value. But whatever, won't block me from giving review.\n\n> > - Is it meaningful to copy name of original graph? Sounds strange to have a directed Petersen graph.\n\n> \n> Should we add \"directed\" to the front of the name or just drop it altogether? I don't have a preference on this.\n\nNo, not \"directed\". Maybe \"An orientation of ...\" or nothing. I can't say either.\n\n> > Otherwise it seems to work, attributes for allowing loops and/or multiedges works and so on.\n\n> I will also add tests for non-simple graphs.\n\nOK. I can review this.",
    "created_at": "2016-09-18T18:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316129",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:12'>**Comment 12:**</a>
Replying to [@tscrim](#comment%3A11):

> > - `implementation` is missing from the `INPUT` block.

> 
> This is not included in *any* documentation. I am following suit.

OK.

> > - "optional" at documentation of parameter `sparse` is strange, and `data_structure` does not have it; that is inconsistent.

> 
> `sparse` is there as a shorthand for (the necessary) `data_structure`, so it is optional.

I do not understand. Both parameters are optional, as both have a default value. But whatever, won't block me from giving review.

> > - Is it meaningful to copy name of original graph? Sounds strange to have a directed Petersen graph.

> 
> Should we add "directed" to the front of the name or just drop it altogether? I don't have a preference on this.

No, not "directed". Maybe "An orientation of ..." or nothing. I can't say either.

> > Otherwise it seems to work, attributes for allowing loops and/or multiedges works and so on.

> I will also add tests for non-simple graphs.

OK. I can review this.



---

archive/issue_comments_316130.json:
```json
{
    "body": "**Reviewer:** Jori M\u00e4ntysalo",
    "created_at": "2016-09-18T18:16:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316130",
    "user": "https://github.com/jm58660"
}
```

**Reviewer:** Jori MÃ¤ntysalo



---

archive/issue_comments_316131.json:
```json
{
    "body": "<a id='comment:13'>**Comment 13:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5e46a141d339093286d8c25d0f7c59fe18a72168\">5e46a14</a></td><td><code>Addressing reviewer comments.</code></td></tr></table>\n",
    "created_at": "2016-09-19T16:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316131",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:13'>**Comment 13:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5e46a141d339093286d8c25d0f7c59fe18a72168">5e46a14</a></td><td><code>Addressing reviewer comments.</code></td></tr></table>




---

archive/issue_comments_316132.json:
```json
{
    "body": "**Changing commit** from \"[44e925fa54823f18f3c4d39fba05ed2bb98874f4](https://github.com/sagemath/sagetrac-mirror/commit/44e925fa54823f18f3c4d39fba05ed2bb98874f4)\" to \"[5e46a141d339093286d8c25d0f7c59fe18a72168](https://github.com/sagemath/sagetrac-mirror/commit/5e46a141d339093286d8c25d0f7c59fe18a72168)\".",
    "created_at": "2016-09-19T16:59:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316132",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[44e925fa54823f18f3c4d39fba05ed2bb98874f4](https://github.com/sagemath/sagetrac-mirror/commit/44e925fa54823f18f3c4d39fba05ed2bb98874f4)" to "[5e46a141d339093286d8c25d0f7c59fe18a72168](https://github.com/sagemath/sagetrac-mirror/commit/5e46a141d339093286d8c25d0f7c59fe18a72168)".



---

archive/issue_comments_316133.json:
```json
{
    "body": "**Changing commit** from \"[5e46a141d339093286d8c25d0f7c59fe18a72168](https://github.com/sagemath/sagetrac-mirror/commit/5e46a141d339093286d8c25d0f7c59fe18a72168)\" to \"[253347e51c6aa5cf87807b83cdde750bae902078](https://github.com/sagemath/sagetrac-mirror/commit/253347e51c6aa5cf87807b83cdde750bae902078)\".",
    "created_at": "2016-09-19T17:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316133",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[5e46a141d339093286d8c25d0f7c59fe18a72168](https://github.com/sagemath/sagetrac-mirror/commit/5e46a141d339093286d8c25d0f7c59fe18a72168)" to "[253347e51c6aa5cf87807b83cdde750bae902078](https://github.com/sagemath/sagetrac-mirror/commit/253347e51c6aa5cf87807b83cdde750bae902078)".



---

archive/issue_comments_316134.json:
```json
{
    "body": "<a id='comment:14'>**Comment 14:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/253347e51c6aa5cf87807b83cdde750bae902078\">253347e</a></td><td><code>Adding another test and using Python3 next.</code></td></tr></table>\n",
    "created_at": "2016-09-19T17:03:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316134",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>**Comment 14:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/253347e51c6aa5cf87807b83cdde750bae902078">253347e</a></td><td><code>Adding another test and using Python3 next.</code></td></tr></table>




---

archive/issue_comments_316135.json:
```json
{
    "body": "<a id='comment:15'>**Comment 15:**</a>\nReplying to [@jm58660](#comment%3A12):\n> Replying to [@tscrim](#comment%3A11):\n> > > - \"optional\" at documentation of parameter `sparse` is strange, and `data_structure` does not have it; that is inconsistent.\n\n> > \n> > `sparse` is there as a shorthand for (the necessary) `data_structure`, so it is optional.\n\n> \n> I do not understand. Both parameters are optional, as both have a default value. But whatever, won't block me from giving review.\n\nHow I see it, `data_structure` is necessary, even though it has a default value, but `sparse` is not.\n\n> > > - Is it meaningful to copy name of original graph? Sounds strange to have a directed Petersen graph.\n\n> > \n> > Should we add \"directed\" to the front of the name or just drop it altogether? I don't have a preference on this.\n\n> \n> No, not \"directed\". Maybe \"An orientation of ...\" or nothing. I can't say either.\n\nI added \"An orientation of\" when a name is specified.\n\nI've addressed all of the mentioned issues.",
    "created_at": "2016-09-19T17:03:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316135",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:15'>**Comment 15:**</a>
Replying to [@jm58660](#comment%3A12):
> Replying to [@tscrim](#comment%3A11):
> > > - "optional" at documentation of parameter `sparse` is strange, and `data_structure` does not have it; that is inconsistent.

> > 
> > `sparse` is there as a shorthand for (the necessary) `data_structure`, so it is optional.

> 
> I do not understand. Both parameters are optional, as both have a default value. But whatever, won't block me from giving review.

How I see it, `data_structure` is necessary, even though it has a default value, but `sparse` is not.

> > > - Is it meaningful to copy name of original graph? Sounds strange to have a directed Petersen graph.

> > 
> > Should we add "directed" to the front of the name or just drop it altogether? I don't have a preference on this.

> 
> No, not "directed". Maybe "An orientation of ..." or nothing. I can't say either.

I added "An orientation of" when a name is specified.

I've addressed all of the mentioned issues.



---

archive/issue_comments_316136.json:
```json
{
    "body": "<a id='comment:16'>**Comment 16:**</a>\nSeems good and tests passed, documentation builds etc.\n\nBut only now, when you added a test for multigraphs, I really thinked about this; sorry about being late. What about orientations of `Graph({1: [2, 2]}, multiedges=True)`? The code gives 4, but only 3 different. Same applies to graphs with loops.\n\nI don't know how we should address this. But at a minimun this should be documented.",
    "created_at": "2016-09-19T17:27:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316136",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:16'>**Comment 16:**</a>
Seems good and tests passed, documentation builds etc.

But only now, when you added a test for multigraphs, I really thinked about this; sorry about being late. What about orientations of `Graph({1: [2, 2]}, multiedges=True)`? The code gives 4, but only 3 different. Same applies to graphs with loops.

I don't know how we should address this. But at a minimun this should be documented.



---

archive/issue_comments_316137.json:
```json
{
    "body": "<a id='comment:17'>**Comment 17:**</a>\nActually, the loop is wrong; for that, either orientation is equivalent. However, for the multiedges, you just can't distinguish them. I think it would be much harder to code that, so I will just document the behavior.",
    "created_at": "2016-09-19T17:53:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316137",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:17'>**Comment 17:**</a>
Actually, the loop is wrong; for that, either orientation is equivalent. However, for the multiedges, you just can't distinguish them. I think it would be much harder to code that, so I will just document the behavior.



---

archive/issue_comments_316138.json:
```json
{
    "body": "<a id='comment:18'>**Comment 18:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3\">ce48418</a></td><td><code>Fixing loops and documenting multiple edges behavior.</code></td></tr></table>\n",
    "created_at": "2016-09-19T17:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316138",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:18'>**Comment 18:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3">ce48418</a></td><td><code>Fixing loops and documenting multiple edges behavior.</code></td></tr></table>




---

archive/issue_comments_316139.json:
```json
{
    "body": "**Changing commit** from \"[253347e51c6aa5cf87807b83cdde750bae902078](https://github.com/sagemath/sagetrac-mirror/commit/253347e51c6aa5cf87807b83cdde750bae902078)\" to \"[ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3](https://github.com/sagemath/sagetrac-mirror/commit/ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3)\".",
    "created_at": "2016-09-19T17:57:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316139",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[253347e51c6aa5cf87807b83cdde750bae902078](https://github.com/sagemath/sagetrac-mirror/commit/253347e51c6aa5cf87807b83cdde750bae902078)" to "[ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3](https://github.com/sagemath/sagetrac-mirror/commit/ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3)".



---

archive/issue_comments_316140.json:
```json
{
    "body": "<a id='comment:19'>**Comment 19:**</a>\nOK, I am happy with these. Please mark as *positive_review* if you are ready; as you did not put this to *needs_review*, I am not sure if you still want to make some changes.",
    "created_at": "2016-09-19T18:37:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316140",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:19'>**Comment 19:**</a>
OK, I am happy with these. Please mark as *positive_review* if you are ready; as you did not put this to *needs_review*, I am not sure if you still want to make some changes.



---

archive/issue_events_260539.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-19T18:37:31Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260539"
}
```



---

archive/issue_events_260540.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-19T18:37:31Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260540"
}
```



---

archive/issue_events_260541.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-19T18:38:04Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260541"
}
```



---

archive/issue_events_260542.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-09-19T18:38:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260542"
}
```



---

archive/issue_comments_316141.json:
```json
{
    "body": "<a id='comment:21'>**Comment 21:**</a>\nI just forgot to set it back. Thanks!",
    "created_at": "2016-09-19T21:03:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316141",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:21'>**Comment 21:**</a>
I just forgot to set it back. Thanks!



---

archive/issue_events_260543.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-19T21:03:19Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "008080",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260543"
}
```



---

archive/issue_events_260544.json:
```json
{
    "actor": "https://github.com/tscrim",
    "created_at": "2016-09-19T21:03:19Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260544"
}
```



---

archive/issue_events_260545.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-09-21T20:15:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260545"
}
```



---

archive/issue_events_260546.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f07ce88c4c40711d127f0d1f58dd79b78565a717",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-09-21T20:15:39Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21415#event-260546"
}
```



---

archive/issue_comments_316142.json:
```json
{
    "body": "**Changing branch** from \"[public/graphs/orientations_iter-21415](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/orientations_iter-21415)\" to \"[ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3](https://github.com/sagemath/sagetrac-mirror/commit/ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3)\".",
    "created_at": "2016-09-21T20:15:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21415",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21415#issuecomment-316142",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[public/graphs/orientations_iter-21415](https://github.com/sagemath/sagetrac-mirror/tree/public/graphs/orientations_iter-21415)" to "[ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3](https://github.com/sagemath/sagetrac-mirror/commit/ce4841826cdcc83a1b88d17f3d3a62d8a8f4b1c3)".
