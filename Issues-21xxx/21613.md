# Issue 21613: Don't use make for autogenerated modules in sagelib

archive/issues_021376.json:
```json
{
    "body": "Currently there is a `src/Makefile` at the root of the sagelib sources that is required to be invoked in order to make sure the packages in `sage_setup.autogen` and that autogenerated sources are placed in the sage sources before running its `setup.py install`.\n\n#21480 inverts things somewhat by removing the old Makefile (really making it into a no-op for now), but pulling out the `sage_setup.autogen` stuff into a separate makefile that is still invoked by calling `make` from the `setup.py` (in the current version of that ticket it is even called unconditionally).  This is pretty non-standard.\n\nThe appropriate time to do this would be either just before the `build_py` command is run, or the `build_ext` command is run (in the case of autogenerated sources for extension modules).\n\nIn the current cases we have its very trivial to check whether or not any of the sources actually need to be regenerated, and this is a pretty normal thing to do in some other complex Python packages.  For example, the package responsible for generating the source files (e.g. currently the `sage_setup.autogen` sub-packages) simply needs to be responsible for knowing what its own source code files are, and knowing the paths for its generated sources--then just compare modtimes.  Invoking make is not required at all.\n\nOne can do even better by having one of the generated files be a hash of the source files, and compare the hashes instead (this avoids rebuilds when switching between git branches but where the files didn't otherwise change).\n\n**Assignee:** @embray\n\n**CC:**  @mkoeppe @jdemeyer\n\n**Branch:** [34ca46c4a44f25cdd076522a99ceaf215653d205](https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205)\n\n**Reviewer:** Matthias Koeppe\n\n**Author:** Erik Bray\n\nIssue created by migration from https://trac.sagemath.org/ticket/21613\n\n",
    "closed_at": "2016-12-07T23:30:01Z",
    "created_at": "2016-09-29T15:45:29Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "title": "Don't use make for autogenerated modules in sagelib",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/21613",
    "user": "https://github.com/embray"
}
```
Currently there is a `src/Makefile` at the root of the sagelib sources that is required to be invoked in order to make sure the packages in `sage_setup.autogen` and that autogenerated sources are placed in the sage sources before running its `setup.py install`.

#21480 inverts things somewhat by removing the old Makefile (really making it into a no-op for now), but pulling out the `sage_setup.autogen` stuff into a separate makefile that is still invoked by calling `make` from the `setup.py` (in the current version of that ticket it is even called unconditionally).  This is pretty non-standard.

The appropriate time to do this would be either just before the `build_py` command is run, or the `build_ext` command is run (in the case of autogenerated sources for extension modules).

In the current cases we have its very trivial to check whether or not any of the sources actually need to be regenerated, and this is a pretty normal thing to do in some other complex Python packages.  For example, the package responsible for generating the source files (e.g. currently the `sage_setup.autogen` sub-packages) simply needs to be responsible for knowing what its own source code files are, and knowing the paths for its generated sources--then just compare modtimes.  Invoking make is not required at all.

One can do even better by having one of the generated files be a hash of the source files, and compare the hashes instead (this avoids rebuilds when switching between git branches but where the files didn't otherwise change).

**Assignee:** @embray

**CC:**  @mkoeppe @jdemeyer

**Branch:** [34ca46c4a44f25cdd076522a99ceaf215653d205](https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205)

**Reviewer:** Matthias Koeppe

**Author:** Erik Bray

Issue created by migration from https://trac.sagemath.org/ticket/21613





---

archive/issue_comments_320049.json:
```json
{
    "body": "<a id='comment:2'></a>\nFrom the description:\n> The appropriate time to do this would be either just before the build_py command is run, or the build_ext command is run (in the case of autogenerated sources for extension modules).\n\n\nCould you make a ticket on top of #21480 (and probably #21604) that moves the invocation of `make  -f generate_py_source.mk` to the right place?",
    "created_at": "2016-09-29T18:05:06Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320049",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:2'></a>
From the description:
> The appropriate time to do this would be either just before the build_py command is run, or the build_ext command is run (in the case of autogenerated sources for extension modules).


Could you make a ticket on top of #21480 (and probably #21604) that moves the invocation of `make  -f generate_py_source.mk` to the right place?



---

archive/issue_comments_320050.json:
```json
{
    "body": "<a id='comment:3'></a>\nReplying to [mkoeppe](#comment%3A2):\n> Could you make a ticket on top of #21480 (and probably #21604) that moves the invocation of `make  -f generate_py_source.mk` to the right place?\n\n\nThat's not so easy, for the same reason that #21600 is not so easy. We need to pass the list of Python packages, Cython extensions and data_files to `setup()`. It is harder to get this right if not everything has been generated at that point. We should probably compute the list of packages dynamically in `setup()`.",
    "created_at": "2016-09-30T08:40:15Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320050",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:3'></a>
Replying to [mkoeppe](#comment%3A2):
> Could you make a ticket on top of #21480 (and probably #21604) that moves the invocation of `make  -f generate_py_source.mk` to the right place?


That's not so easy, for the same reason that #21600 is not so easy. We need to pass the list of Python packages, Cython extensions and data_files to `setup()`. It is harder to get this right if not everything has been generated at that point. We should probably compute the list of packages dynamically in `setup()`.



---

archive/issue_comments_320051.json:
```json
{
    "body": "<a id='comment:4'></a>\nAgain, the title of this ticket does not match the long description. Do you want to get rid of `make` or just move the invocation of `make -f generate_py_source.mk` inside `setup()`?",
    "created_at": "2016-09-30T08:42:31Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320051",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>
Again, the title of this ticket does not match the long description. Do you want to get rid of `make` or just move the invocation of `make -f generate_py_source.mk` inside `setup()`?



---

archive/issue_comments_320052.json:
```json
{
    "body": "<a id='comment:5'></a>\nI think it does match but I'm not sure what's unclear.",
    "created_at": "2016-09-30T10:12:43Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320052",
    "user": "https://github.com/embray"
}
```

<a id='comment:5'></a>
I think it does match but I'm not sure what's unclear.



---

archive/issue_comments_320053.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -4,6 +4,6 @@\n \n The appropriate time to do this would be either just before the `build_py` command is run, or the `build_ext` command is run (in the case of autogenerated sources for extension modules).\n \n-In the current cases we have its very trivial to check whether or not any of the sources actually need to be regenerated, and this is a pretty normal thing to do in some other complex Python packages.  For example, the package responsible for generating the source files (e.g. currently the `sage_setup.autogen` sub-packages) simply needs to be responsible for knowing what its own source code files are, and knowing the paths for its generated sources--then just compare modtimes.\n+In the current cases we have its very trivial to check whether or not any of the sources actually need to be regenerated, and this is a pretty normal thing to do in some other complex Python packages.  For example, the package responsible for generating the source files (e.g. currently the `sage_setup.autogen` sub-packages) simply needs to be responsible for knowing what its own source code files are, and knowing the paths for its generated sources--then just compare modtimes.  Invoking make is not required at all.\n \n One can do even better by having one of the generated files be a hash of the source files, and compare the hashes instead (this avoids rebuilds when switching between git branches but where the files didn't otherwise change).\n``````\n",
    "created_at": "2016-09-30T10:12:43Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320053",
    "user": "https://github.com/embray"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -4,6 +4,6 @@
 
 The appropriate time to do this would be either just before the `build_py` command is run, or the `build_ext` command is run (in the case of autogenerated sources for extension modules).
 
-In the current cases we have its very trivial to check whether or not any of the sources actually need to be regenerated, and this is a pretty normal thing to do in some other complex Python packages.  For example, the package responsible for generating the source files (e.g. currently the `sage_setup.autogen` sub-packages) simply needs to be responsible for knowing what its own source code files are, and knowing the paths for its generated sources--then just compare modtimes.
+In the current cases we have its very trivial to check whether or not any of the sources actually need to be regenerated, and this is a pretty normal thing to do in some other complex Python packages.  For example, the package responsible for generating the source files (e.g. currently the `sage_setup.autogen` sub-packages) simply needs to be responsible for knowing what its own source code files are, and knowing the paths for its generated sources--then just compare modtimes.  Invoking make is not required at all.
 
 One can do even better by having one of the generated files be a hash of the source files, and compare the hashes instead (this avoids rebuilds when switching between git branches but where the files didn't otherwise change).
``````




---

archive/issue_comments_320054.json:
```json
{
    "body": "<a id='comment:6'></a>\nI feel like this is not hard, having done it many times before.  There's nothing particularly special about sage either in any of these regards.",
    "created_at": "2016-09-30T10:13:21Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320054",
    "user": "https://github.com/embray"
}
```

<a id='comment:6'></a>
I feel like this is not hard, having done it many times before.  There's nothing particularly special about sage either in any of these regards.



---

archive/issue_comments_320055.json:
```json
{
    "body": "**Changing dependencies** from \"#21480\" to \"#21600\".",
    "created_at": "2016-10-06T10:20:29Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320055",
    "user": "https://github.com/embray"
}
```

**Changing dependencies** from "#21480" to "#21600".



---

archive/issue_comments_320056.json:
```json
{
    "body": "**Assignee:** @embray",
    "created_at": "2016-10-06T10:20:36Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320056",
    "user": "https://github.com/embray"
}
```

**Assignee:** @embray



---

archive/issue_comments_320057.json:
```json
{
    "body": "**Author:** Erik Bray",
    "created_at": "2016-10-07T12:08:52Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320057",
    "user": "https://github.com/embray"
}
```

**Author:** Erik Bray



---

archive/issue_comments_320058.json:
```json
{
    "body": "**Commit:** [edb3cf8eb8461768836c5aae71ecf5119d0c830f](https://github.com/sagemath/sagetrac-mirror/commit/edb3cf8eb8461768836c5aae71ecf5119d0c830f)",
    "created_at": "2016-10-07T12:08:52Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320058",
    "user": "https://github.com/embray"
}
```

**Commit:** [edb3cf8eb8461768836c5aae71ecf5119d0c830f](https://github.com/sagemath/sagetrac-mirror/commit/edb3cf8eb8461768836c5aae71ecf5119d0c830f)



---

archive/issue_events_193688.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-07T12:08:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193688"
}
```



---

archive/issue_comments_320059.json:
```json
{
    "body": "<a id='comment:9'></a>\nDetermine directly in the Python code whether or not autogenerated sources need to be built, without requiring a makefile or anything.  I think this is simple and clear to anyone who looks at the code.\n\nIf in the future we want more full make-like capabilities I've got something in the works for that, but it seems unlikely that anything more complicated than this is needed any time soon.\n\n---\n**Last 10 new commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7791cd987347dfe253e3ed3ce74214f4527485d8\">7791cd9</a></td><td><code>Remove --buildbase code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74169e75b0c650e6b1070c6beca231422cf62eaa\">74169e7</a></td><td><code>Pass SAGE_SRC to generate_py_source.mk</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0394333a54e51c53b9404f248220a412cf13e00e\">0394333</a></td><td><code>Add new file to MANIFEST.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdedb029434cba49db4249c5511af8c8efc08217\">fdedb02</a></td><td><code>Install SAGE_LOCAL/bin/sage instead of SAGE_ROOT/sage as Jupyter kernel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5ba95ed73aa3df532a2b6256510f2e2d842a0a35\">5ba95ed</a></td><td><code>Clean up stale installed files in install command</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/35ecf4b0fca0c13dad3e38826fc33211bbd66c81\">35ecf4b</a></td><td><code>Run cythonize() inside build_ext command</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b5fa98244c5d9f3481c7d15061e3e0f4c4b0ee6\">2b5fa98</a></td><td><code>Copy extra files to build directory instead of using data_files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7e3a492edaa54fc9c724d183534d27d171c8cf60\">7e3a492</a></td><td><code>Rename extra_files -> sage_extra_files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/237e965df900eb09d2a06a689866d7468674abfe\">237e965</a></td><td><code>Replace some implicit relative imports with explicit imports.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/edb3cf8eb8461768836c5aae71ecf5119d0c830f\">edb3cf8</a></td><td><code>Do effectively exactly what the makefile for the autogen sources was doing, but purely in Python, removing the use of make.</code></td></tr></table>\n",
    "created_at": "2016-10-07T12:08:52Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320059",
    "user": "https://github.com/embray"
}
```

<a id='comment:9'></a>
Determine directly in the Python code whether or not autogenerated sources need to be built, without requiring a makefile or anything.  I think this is simple and clear to anyone who looks at the code.

If in the future we want more full make-like capabilities I've got something in the works for that, but it seems unlikely that anything more complicated than this is needed any time soon.

---
**Last 10 new commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7791cd987347dfe253e3ed3ce74214f4527485d8">7791cd9</a></td><td><code>Remove --buildbase code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74169e75b0c650e6b1070c6beca231422cf62eaa">74169e7</a></td><td><code>Pass SAGE_SRC to generate_py_source.mk</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0394333a54e51c53b9404f248220a412cf13e00e">0394333</a></td><td><code>Add new file to MANIFEST.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdedb029434cba49db4249c5511af8c8efc08217">fdedb02</a></td><td><code>Install SAGE_LOCAL/bin/sage instead of SAGE_ROOT/sage as Jupyter kernel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5ba95ed73aa3df532a2b6256510f2e2d842a0a35">5ba95ed</a></td><td><code>Clean up stale installed files in install command</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/35ecf4b0fca0c13dad3e38826fc33211bbd66c81">35ecf4b</a></td><td><code>Run cythonize() inside build_ext command</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b5fa98244c5d9f3481c7d15061e3e0f4c4b0ee6">2b5fa98</a></td><td><code>Copy extra files to build directory instead of using data_files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7e3a492edaa54fc9c724d183534d27d171c8cf60">7e3a492</a></td><td><code>Rename extra_files -> sage_extra_files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/237e965df900eb09d2a06a689866d7468674abfe">237e965</a></td><td><code>Replace some implicit relative imports with explicit imports.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/edb3cf8eb8461768836c5aae71ecf5119d0c830f">edb3cf8</a></td><td><code>Do effectively exactly what the makefile for the autogen sources was doing, but purely in Python, removing the use of make.</code></td></tr></table>




---

archive/issue_comments_320060.json:
```json
{
    "body": "**Branch:** [u/embray/ticket-21613](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21613)",
    "created_at": "2016-10-07T12:08:52Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320060",
    "user": "https://github.com/embray"
}
```

**Branch:** [u/embray/ticket-21613](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21613)



---

archive/issue_comments_320061.json:
```json
{
    "body": "<a id='comment:10'></a>\nThis looks nice and easy to understand. \nBut let's get #21600 done before we full review this one.",
    "created_at": "2016-10-09T21:10:44Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320061",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:10'></a>
This looks nice and easy to understand. 
But let's get #21600 done before we full review this one.



---

archive/issue_events_193689.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-14T06:18:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193689"
}
```



---

archive/issue_events_193690.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-14T06:18:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193690"
}
```



---

archive/issue_comments_320062.json:
```json
{
    "body": "<a id='comment:11'></a>\nOn this ticket, [0394333](https://github.com/sagemath/sagetrac-mirror/commit/0394333a54e51c53b9404f248220a412cf13e00e) needs to be reverted, `generate_py_source` removed again from `MANIFEST.in`\n\n(Of course, the manifest is out-of-date in many respects (#21516).)",
    "created_at": "2016-10-14T06:18:21Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320062",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
On this ticket, [0394333](https://github.com/sagemath/sagetrac-mirror/commit/0394333a54e51c53b9404f248220a412cf13e00e) needs to be reverted, `generate_py_source` removed again from `MANIFEST.in`

(Of course, the manifest is out-of-date in many respects (#21516).)



---

archive/issue_comments_320063.json:
```json
{
    "body": "<a id='comment:12'></a>\nIndeed. I just noticed that MANIFEST.in contains MANIFEST.in, which it really doesn't need to do :)",
    "created_at": "2016-10-14T08:23:16Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320063",
    "user": "https://github.com/embray"
}
```

<a id='comment:12'></a>
Indeed. I just noticed that MANIFEST.in contains MANIFEST.in, which it really doesn't need to do :)



---

archive/issue_comments_320064.json:
```json
{
    "body": "<a id='comment:13'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9f92cb37d3c6d407d7ffa9999aa14d0b25f67571\">9f92cb3</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr></table>\n",
    "created_at": "2016-10-14T08:24:41Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320064",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:13'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9f92cb37d3c6d407d7ffa9999aa14d0b25f67571">9f92cb3</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr></table>




---

archive/issue_comments_320065.json:
```json
{
    "body": "**Changing commit** from \"[edb3cf8eb8461768836c5aae71ecf5119d0c830f](https://github.com/sagemath/sagetrac-mirror/commit/edb3cf8eb8461768836c5aae71ecf5119d0c830f)\" to \"[9f92cb37d3c6d407d7ffa9999aa14d0b25f67571](https://github.com/sagemath/sagetrac-mirror/commit/9f92cb37d3c6d407d7ffa9999aa14d0b25f67571)\".",
    "created_at": "2016-10-14T08:24:41Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320065",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[edb3cf8eb8461768836c5aae71ecf5119d0c830f](https://github.com/sagemath/sagetrac-mirror/commit/edb3cf8eb8461768836c5aae71ecf5119d0c830f)" to "[9f92cb37d3c6d407d7ffa9999aa14d0b25f67571](https://github.com/sagemath/sagetrac-mirror/commit/9f92cb37d3c6d407d7ffa9999aa14d0b25f67571)".



---

archive/issue_events_193691.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T08:25:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193691"
}
```



---

archive/issue_events_193692.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-10-14T08:25:08Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193692"
}
```



---

archive/issue_events_193693.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-17T03:42:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193693"
}
```



---

archive/issue_events_193694.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-17T03:42:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "milestone": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193694"
}
```



---

archive/issue_comments_320066.json:
```json
{
    "body": "<a id='comment:15'></a>\nThis needs rebasing on top of current develop and possibly some work there.\nBuilding from scratch (with 7.4.rc2 merged) fails for me with:\n\n```\nNo such file or directory: '/doesnotexist/sage/libs/pari/paridecl.pxd'\n```\n(this is from #21480).",
    "created_at": "2016-10-17T03:42:17Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320066",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:15'></a>
This needs rebasing on top of current develop and possibly some work there.
Building from scratch (with 7.4.rc2 merged) fails for me with:

```
No such file or directory: '/doesnotexist/sage/libs/pari/paridecl.pxd'
```
(this is from #21480).



---

archive/issue_events_193695.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-17T03:42:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193695"
}
```



---

archive/issue_events_193696.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-17T03:42:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193696"
}
```



---

archive/issue_comments_320067.json:
```json
{
    "body": "**Reviewer:** Matthias Koeppe",
    "created_at": "2016-10-17T03:44:14Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320067",
    "user": "https://github.com/mkoeppe"
}
```

**Reviewer:** Matthias Koeppe



---

archive/issue_comments_320068.json:
```json
{
    "body": "<a id='comment:17'></a>\nOk, but I'm a little confused--this branch is based on the branch in #21600.  Was that rebased, or in need of rebasing too?",
    "created_at": "2016-10-17T09:36:11Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320068",
    "user": "https://github.com/embray"
}
```

<a id='comment:17'></a>
Ok, but I'm a little confused--this branch is based on the branch in #21600.  Was that rebased, or in need of rebasing too?



---

archive/issue_comments_320069.json:
```json
{
    "body": "<a id='comment:18'></a>\nProbably easiest to just merge current develop, not rebase.",
    "created_at": "2016-10-17T14:00:46Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320069",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:18'></a>
Probably easiest to just merge current develop, not rebase.



---

archive/issue_comments_320070.json:
```json
{
    "body": "<a id='comment:19'></a>\nOh I see, this is because `sage_setup.autogen` uses `SAGE_SRC`.  I guess it would be fine to just remove that, under the assumption that sage's `setup.py` is always run from the root of the sagelib source directory.",
    "created_at": "2016-10-17T14:18:13Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320070",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
Oh I see, this is because `sage_setup.autogen` uses `SAGE_SRC`.  I guess it would be fine to just remove that, under the assumption that sage's `setup.py` is always run from the root of the sagelib source directory.



---

archive/issue_comments_320071.json:
```json
{
    "body": "<a id='comment:20'></a>\nAlternatively, would you be opposed to changing the Makefile so that `SAGE_SRC` is just set to `.`?  There are places in the code where it makes sense to have `SAGE_SRC` set outside the context of building (e.g. testing), but where when building it should just be `.`.",
    "created_at": "2016-10-17T14:21:33Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320071",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'></a>
Alternatively, would you be opposed to changing the Makefile so that `SAGE_SRC` is just set to `.`?  There are places in the code where it makes sense to have `SAGE_SRC` set outside the context of building (e.g. testing), but where when building it should just be `.`.



---

archive/issue_comments_320072.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [embray](#comment%3A20):\n> Alternatively, would you be opposed to changing the Makefile so that `SAGE_SRC` is just set to `.`?  There are places in the code where it makes sense to have `SAGE_SRC` set outside the context of building (e.g. testing), but where when building it should just be `.`.\n\n\nPlease don't do that.\nsetup.py needs to be able to run without SAGE_SRC set.\nThat's the whole point of #21480.",
    "created_at": "2016-10-17T14:24:54Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320072",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:21'></a>
Replying to [embray](#comment%3A20):
> Alternatively, would you be opposed to changing the Makefile so that `SAGE_SRC` is just set to `.`?  There are places in the code where it makes sense to have `SAGE_SRC` set outside the context of building (e.g. testing), but where when building it should just be `.`.


Please don't do that.
setup.py needs to be able to run without SAGE_SRC set.
That's the whole point of #21480.



---

archive/issue_comments_320073.json:
```json
{
    "body": "<a id='comment:22'></a>\nThat's sort of what I thought.  The problem is that there is code in this package that needs to be able to run in both a \"build\" environment and a \"runtime\" environment.  I agree that in the \"build\" environment it should not depend on `SAGE_SRC`.\n\nHowever, prior to this ticket the `setup.py` was depending on `SAGE_SRC` anyways, implicitly, through running Python from the makefile.\n\nI could modify that code to only use `SAGE_SRC` if it is set, but that's not going to work because it *is* set to \"/doesnotexist\".  I could check explicitly for that path but that's rather ugly too.",
    "created_at": "2016-10-17T14:35:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320073",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'></a>
That's sort of what I thought.  The problem is that there is code in this package that needs to be able to run in both a "build" environment and a "runtime" environment.  I agree that in the "build" environment it should not depend on `SAGE_SRC`.

However, prior to this ticket the `setup.py` was depending on `SAGE_SRC` anyways, implicitly, through running Python from the makefile.

I could modify that code to only use `SAGE_SRC` if it is set, but that's not going to work because it *is* set to "/doesnotexist".  I could check explicitly for that path but that's rather ugly too.



---

archive/issue_comments_320074.json:
```json
{
    "body": "<a id='comment:23'></a>\nHow about this:  As a special case, when `sys.argv[0] == 'setup.py'` we could set `SAGE_SRC` in `sage.env` to `'.'`?",
    "created_at": "2016-10-17T14:37:56Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320074",
    "user": "https://github.com/embray"
}
```

<a id='comment:23'></a>
How about this:  As a special case, when `sys.argv[0] == 'setup.py'` we could set `SAGE_SRC` in `sage.env` to `'.'`?



---

archive/issue_comments_320075.json:
```json
{
    "body": "<a id='comment:24'></a>\nWhy not just set the environment variable in setup.py?\nThat's what was done (well, for a subprocess) before this ticket.",
    "created_at": "2016-10-17T14:41:14Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320075",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
Why not just set the environment variable in setup.py?
That's what was done (well, for a subprocess) before this ticket.



---

archive/issue_comments_320076.json:
```json
{
    "body": "<a id='comment:25'></a>\nAh, so *that's* ok so long as it's not coming from the outer environment in which `setup.py` is run.  That makes sense--thanks for the suggestion.",
    "created_at": "2016-10-17T14:42:50Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320076",
    "user": "https://github.com/embray"
}
```

<a id='comment:25'></a>
Ah, so *that's* ok so long as it's not coming from the outer environment in which `setup.py` is run.  That makes sense--thanks for the suggestion.



---

archive/issue_comments_320077.json:
```json
{
    "body": "<a id='comment:26'></a>\nOk, I'm confused again because `setup.py` *is* setting `SAGE_SRC` to `os.getcwd()`, quite early on too.  So I'm not sure why that's being dropped.  The autogen code isn't being run in a subprocess, at least I don't think.",
    "created_at": "2016-10-17T14:44:40Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320077",
    "user": "https://github.com/embray"
}
```

<a id='comment:26'></a>
Ok, I'm confused again because `setup.py` *is* setting `SAGE_SRC` to `os.getcwd()`, quite early on too.  So I'm not sure why that's being dropped.  The autogen code isn't being run in a subprocess, at least I don't think.



---

archive/issue_comments_320078.json:
```json
{
    "body": "<a id='comment:27'></a>\nThis is exactly what you need to debug; it worked before.",
    "created_at": "2016-10-17T14:47:23Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320078",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
This is exactly what you need to debug; it worked before.



---

archive/issue_comments_320079.json:
```json
{
    "body": "**Changing commit** from \"[9f92cb37d3c6d407d7ffa9999aa14d0b25f67571](https://github.com/sagemath/sagetrac-mirror/commit/9f92cb37d3c6d407d7ffa9999aa14d0b25f67571)\" to \"[fbe85beac217277437f61bb1bfbbbe07d839ef40](https://github.com/sagemath/sagetrac-mirror/commit/fbe85beac217277437f61bb1bfbbbe07d839ef40)\".",
    "created_at": "2016-10-17T14:53:07Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320079",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9f92cb37d3c6d407d7ffa9999aa14d0b25f67571](https://github.com/sagemath/sagetrac-mirror/commit/9f92cb37d3c6d407d7ffa9999aa14d0b25f67571)" to "[fbe85beac217277437f61bb1bfbbbe07d839ef40](https://github.com/sagemath/sagetrac-mirror/commit/fbe85beac217277437f61bb1bfbbbe07d839ef40)".



---

archive/issue_comments_320080.json:
```json
{
    "body": "<a id='comment:28'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0687297cbaeefaf269dddbe391bccbec606c06a8\">0687297</a></td><td><code>Clean up stale installed files in install command</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8b44a9c52d9b52f863938a07ac560ba08ebf306a\">8b44a9c</a></td><td><code>Run cythonize() inside build_ext command</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/89dc42252ccabbda2e4619bc8fc4f616c2d94bf3\">89dc422</a></td><td><code>Copy extra files to build directory instead of using data_files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/da8dda522e6fe5e835669501cd6256b822d65a0c\">da8dda5</a></td><td><code>Rename extra_files -> sage_extra_files</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20b9ecf1e49f5fb44128cb8afb31ed35eafcd141\">20b9ecf</a></td><td><code>Replace some implicit relative imports with explicit imports.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/af94fe9523a62bd14bc674d6feb345076efcddf2\">af94fe9</a></td><td><code>Do effectively exactly what the makefile for the autogen sources was doing, but purely in Python, removing the use of make.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe541ba6a649b7bd01cc659b43ec269e0388d3b7\">fe541ba</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fbe85beac217277437f61bb1bfbbbe07d839ef40\">fbe85be</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>\n",
    "created_at": "2016-10-17T14:53:07Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320080",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0687297cbaeefaf269dddbe391bccbec606c06a8">0687297</a></td><td><code>Clean up stale installed files in install command</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8b44a9c52d9b52f863938a07ac560ba08ebf306a">8b44a9c</a></td><td><code>Run cythonize() inside build_ext command</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/89dc42252ccabbda2e4619bc8fc4f616c2d94bf3">89dc422</a></td><td><code>Copy extra files to build directory instead of using data_files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/da8dda522e6fe5e835669501cd6256b822d65a0c">da8dda5</a></td><td><code>Rename extra_files -> sage_extra_files</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20b9ecf1e49f5fb44128cb8afb31ed35eafcd141">20b9ecf</a></td><td><code>Replace some implicit relative imports with explicit imports.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/af94fe9523a62bd14bc674d6feb345076efcddf2">af94fe9</a></td><td><code>Do effectively exactly what the makefile for the autogen sources was doing, but purely in Python, removing the use of make.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe541ba6a649b7bd01cc659b43ec269e0388d3b7">fe541ba</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fbe85beac217277437f61bb1bfbbbe07d839ef40">fbe85be</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>




---

archive/issue_comments_320081.json:
```json
{
    "body": "<a id='comment:29'></a>\nFixed--there were some dangling uses of `os.environ` is `sage_setup.autogen.pari`.",
    "created_at": "2016-10-17T14:53:39Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320081",
    "user": "https://github.com/embray"
}
```

<a id='comment:29'></a>
Fixed--there were some dangling uses of `os.environ` is `sage_setup.autogen.pari`.



---

archive/issue_comments_320082.json:
```json
{
    "body": "<a id='comment:30'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74f1dad4c80db321d772a42f295f35cfe405c76f\">74f1dad</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/618a2357dc5bf7eeba6417ce870a4ab09a9724a7\">618a235</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>\n",
    "created_at": "2016-10-17T14:55:06Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320082",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74f1dad4c80db321d772a42f295f35cfe405c76f">74f1dad</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/618a2357dc5bf7eeba6417ce870a4ab09a9724a7">618a235</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>




---

archive/issue_comments_320083.json:
```json
{
    "body": "**Changing commit** from \"[fbe85beac217277437f61bb1bfbbbe07d839ef40](https://github.com/sagemath/sagetrac-mirror/commit/fbe85beac217277437f61bb1bfbbbe07d839ef40)\" to \"[618a2357dc5bf7eeba6417ce870a4ab09a9724a7](https://github.com/sagemath/sagetrac-mirror/commit/618a2357dc5bf7eeba6417ce870a4ab09a9724a7)\".",
    "created_at": "2016-10-17T14:55:06Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320083",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fbe85beac217277437f61bb1bfbbbe07d839ef40](https://github.com/sagemath/sagetrac-mirror/commit/fbe85beac217277437f61bb1bfbbbe07d839ef40)" to "[618a2357dc5bf7eeba6417ce870a4ab09a9724a7](https://github.com/sagemath/sagetrac-mirror/commit/618a2357dc5bf7eeba6417ce870a4ab09a9724a7)".



---

archive/issue_comments_320084.json:
```json
{
    "body": "**Changing commit** from \"[618a2357dc5bf7eeba6417ce870a4ab09a9724a7](https://github.com/sagemath/sagetrac-mirror/commit/618a2357dc5bf7eeba6417ce870a4ab09a9724a7)\" to \"[fcb4c2393394be1aa27769deb099cda2902d2158](https://github.com/sagemath/sagetrac-mirror/commit/fcb4c2393394be1aa27769deb099cda2902d2158)\".",
    "created_at": "2016-10-17T15:08:12Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320084",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[618a2357dc5bf7eeba6417ce870a4ab09a9724a7](https://github.com/sagemath/sagetrac-mirror/commit/618a2357dc5bf7eeba6417ce870a4ab09a9724a7)" to "[fcb4c2393394be1aa27769deb099cda2902d2158](https://github.com/sagemath/sagetrac-mirror/commit/fcb4c2393394be1aa27769deb099cda2902d2158)".



---

archive/issue_comments_320085.json:
```json
{
    "body": "<a id='comment:31'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0a5730ae89c1dab2fd760e29e93fe78871b9a3be\">0a5730a</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fcb4c2393394be1aa27769deb099cda2902d2158\">fcb4c23</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>\n",
    "created_at": "2016-10-17T15:08:12Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320085",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0a5730ae89c1dab2fd760e29e93fe78871b9a3be">0a5730a</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fcb4c2393394be1aa27769deb099cda2902d2158">fcb4c23</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>




---

archive/issue_events_193697.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-18T04:49:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193697"
}
```



---

archive/issue_events_193698.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-18T04:49:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193698"
}
```



---

archive/issue_comments_320086.json:
```json
{
    "body": "<a id='comment:32'></a>\nLooks good.",
    "created_at": "2016-10-18T04:49:07Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320086",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:32'></a>
Looks good.



---

archive/issue_comments_320087.json:
```json
{
    "body": "<a id='comment:33'></a>\nMerge conflict",
    "created_at": "2016-10-20T21:24:34Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320087",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:33'></a>
Merge conflict



---

archive/issue_events_193699.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-20T21:24:34Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193699"
}
```



---

archive/issue_events_193700.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-20T21:24:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193700"
}
```



---

archive/issue_comments_320088.json:
```json
{
    "body": "<a id='comment:34'></a>\nThis is not actionable unless you tell us with which ticket it conflicts.",
    "created_at": "2016-10-20T23:55:17Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320088",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:34'></a>
This is not actionable unless you tell us with which ticket it conflicts.



---

archive/issue_comments_320089.json:
```json
{
    "body": "<a id='comment:35'></a>\nJust wait for the next beta",
    "created_at": "2016-10-21T06:54:49Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320089",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:35'></a>
Just wait for the next beta



---

archive/issue_comments_320090.json:
```json
{
    "body": "<a id='comment:36'></a>\nErik: The branch on this ticket also has some of Jeroen's changes in it that are not yet in 7.5.beta0. From which ticket are they? It should be added to dependencies.",
    "created_at": "2016-10-22T18:28:02Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320090",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:36'></a>
Erik: The branch on this ticket also has some of Jeroen's changes in it that are not yet in 7.5.beta0. From which ticket are they? It should be added to dependencies.



---

archive/issue_comments_320091.json:
```json
{
    "body": "<a id='comment:37'></a>\nI'm adding #21820 as dependency because this ticket would conflict with that.",
    "created_at": "2016-11-05T17:01:52Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320091",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:37'></a>
I'm adding #21820 as dependency because this ticket would conflict with that.



---

archive/issue_comments_320092.json:
```json
{
    "body": "**Changing dependencies** from \"#21600\" to \"#21820\".",
    "created_at": "2016-11-05T17:01:52Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320092",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#21600" to "#21820".



---

archive/issue_comments_320093.json:
```json
{
    "body": "<a id='comment:38'></a>\nOr, since this ticket already had a positive review pending resolution of merge conflicts, you could make #21820 depend on this.",
    "created_at": "2016-11-07T13:51:16Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320093",
    "user": "https://github.com/embray"
}
```

<a id='comment:38'></a>
Or, since this ticket already had a positive review pending resolution of merge conflicts, you could make #21820 depend on this.



---

archive/issue_comments_320094.json:
```json
{
    "body": "<a id='comment:39'></a>\nReplying to [embray](#comment%3A38):\n> Or, since this ticket already had a positive review\n\n\n\"ha**d**\" is the important word here. Adding a dependency on a needs_work ticket with no activity for 2 weeks did not seem like a wise move to me.\n\nBut I don't want to upset you. So feel free to undo [comment:37] if you fix this ticket.",
    "created_at": "2016-11-07T13:56:37Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320094",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:39'></a>
Replying to [embray](#comment%3A38):
> Or, since this ticket already had a positive review


"ha**d**" is the important word here. Adding a dependency on a needs_work ticket with no activity for 2 weeks did not seem like a wise move to me.

But I don't want to upset you. So feel free to undo [comment:37] if you fix this ticket.



---

archive/issue_comments_320095.json:
```json
{
    "body": "<a id='comment:40'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/96e2836f5040a05dcd5cc19740b0e0b567b092b9\">96e2836</a></td><td><code>Replace some implicit relative imports with explicit imports.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/273bde096be31f00a9919c5cf6e39ccc48107989\">273bde0</a></td><td><code>Do effectively exactly what the makefile for the autogen sources was doing, but purely in Python, removing the use of make.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2f86ff5663590f7b6b18d51c9e4b5c6e6afaa00a\">2f86ff5</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b797a71287b4c64dfb4b1eebbc031921c00e195\">4b797a7</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>\n",
    "created_at": "2016-11-07T14:01:51Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320095",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:40'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/96e2836f5040a05dcd5cc19740b0e0b567b092b9">96e2836</a></td><td><code>Replace some implicit relative imports with explicit imports.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/273bde096be31f00a9919c5cf6e39ccc48107989">273bde0</a></td><td><code>Do effectively exactly what the makefile for the autogen sources was doing, but purely in Python, removing the use of make.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2f86ff5663590f7b6b18d51c9e4b5c6e6afaa00a">2f86ff5</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b797a71287b4c64dfb4b1eebbc031921c00e195">4b797a7</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>




---

archive/issue_comments_320096.json:
```json
{
    "body": "**Changing commit** from \"[fcb4c2393394be1aa27769deb099cda2902d2158](https://github.com/sagemath/sagetrac-mirror/commit/fcb4c2393394be1aa27769deb099cda2902d2158)\" to \"[4b797a71287b4c64dfb4b1eebbc031921c00e195](https://github.com/sagemath/sagetrac-mirror/commit/4b797a71287b4c64dfb4b1eebbc031921c00e195)\".",
    "created_at": "2016-11-07T14:01:51Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320096",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[fcb4c2393394be1aa27769deb099cda2902d2158](https://github.com/sagemath/sagetrac-mirror/commit/fcb4c2393394be1aa27769deb099cda2902d2158)" to "[4b797a71287b4c64dfb4b1eebbc031921c00e195](https://github.com/sagemath/sagetrac-mirror/commit/4b797a71287b4c64dfb4b1eebbc031921c00e195)".



---

archive/issue_events_193701.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-07T14:03:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193701"
}
```



---

archive/issue_events_193702.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-07T14:03:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193702"
}
```



---

archive/issue_comments_320097.json:
```json
{
    "body": "<a id='comment:41'></a>\nRebased--this was just based on a slightly older version of #21600 that was ultimately merged.",
    "created_at": "2016-11-07T14:03:30Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320097",
    "user": "https://github.com/embray"
}
```

<a id='comment:41'></a>
Rebased--this was just based on a slightly older version of #21600 that was ultimately merged.



---

archive/issue_comments_320098.json:
```json
{
    "body": "<a id='comment:42'></a>\nIn order to at least *minimize* the conflict with #21820 and #21821, can you revert the unneeded changes to `src/sage_setup/autogen/pari/parser.py`?",
    "created_at": "2016-11-07T14:13:06Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320098",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:42'></a>
In order to at least *minimize* the conflict with #21820 and #21821, can you revert the unneeded changes to `src/sage_setup/autogen/pari/parser.py`?



---

archive/issue_events_193703.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T14:16:05Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193703"
}
```



---

archive/issue_events_193704.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T14:16:05Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193704"
}
```



---

archive/issue_comments_320099.json:
```json
{
    "body": "<a id='comment:44'></a>\nI would be happy to, but as it stands that change is needed, per [comment:15].  Now that I'm back from vacation and we can sync up better we can keep the dependencies if you want.  I just figured it would be easier for you to understand this change and build on top of it, rather than for me to do the same with #21820 and #21821.",
    "created_at": "2016-11-07T16:01:25Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320099",
    "user": "https://github.com/embray"
}
```

<a id='comment:44'></a>
I would be happy to, but as it stands that change is needed, per [comment:15].  Now that I'm back from vacation and we can sync up better we can keep the dependencies if you want.  I just figured it would be easier for you to understand this change and build on top of it, rather than for me to do the same with #21820 and #21821.



---

archive/issue_comments_320100.json:
```json
{
    "body": "<a id='comment:45'></a>\nReplying to [embray](#comment%3A44):\n> I would be happy to, but as it stands that change is needed, per [comment:15].\n\n\nI am missing something. Why doesn't the same code fail right now (without applying this branch)?",
    "created_at": "2016-11-07T16:13:59Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320100",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:45'></a>
Replying to [embray](#comment%3A44):
> I would be happy to, but as it stands that change is needed, per [comment:15].


I am missing something. Why doesn't the same code fail right now (without applying this branch)?



---

archive/issue_comments_320101.json:
```json
{
    "body": "<a id='comment:46'></a>\nBesides the fact that the code using `sage.env` conflicts with #21821, I think it is also bad style for `setup.py` to import `sage.env` while building `sage`.",
    "created_at": "2016-11-07T16:19:57Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320101",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:46'></a>
Besides the fact that the code using `sage.env` conflicts with #21821, I think it is also bad style for `setup.py` to import `sage.env` while building `sage`.



---

archive/issue_comments_320102.json:
```json
{
    "body": "<a id='comment:47'></a>\nReplying to [jdemeyer](#comment%3A45):\n> Replying to [embray](#comment%3A44):\n> > I would be happy to, but as it stands that change is needed, per [comment:15].\n\n> \n> I am missing something. Why doesn't the same code fail right now (without applying this branch)?\n\n\nPreviously, when `make` was invoked, it was passed `SAGE_SRC=...`.",
    "created_at": "2016-11-07T16:23:13Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320102",
    "user": "https://github.com/embray"
}
```

<a id='comment:47'></a>
Replying to [jdemeyer](#comment%3A45):
> Replying to [embray](#comment%3A44):
> > I would be happy to, but as it stands that change is needed, per [comment:15].

> 
> I am missing something. Why doesn't the same code fail right now (without applying this branch)?


Previously, when `make` was invoked, it was passed `SAGE_SRC=...`.



---

archive/issue_comments_320103.json:
```json
{
    "body": "<a id='comment:48'></a>\nReplying to [embray](#comment%3A47):\n> Previously, when `make` was invoked, it was passed `SAGE_SRC=...`.\n\n\nRight, I see. That's an ugly hack though.\n\nI changed #21821 such that it doesn't need `SAGE_SRC`.",
    "created_at": "2016-11-07T16:40:24Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320103",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:48'></a>
Replying to [embray](#comment%3A47):
> Previously, when `make` was invoked, it was passed `SAGE_SRC=...`.


Right, I see. That's an ugly hack though.

I changed #21821 such that it doesn't need `SAGE_SRC`.



---

archive/issue_comments_320104.json:
```json
{
    "body": "<a id='comment:49'></a>\nneeds rebasing...",
    "created_at": "2016-11-18T01:21:27Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320104",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:49'></a>
needs rebasing...



---

archive/issue_comments_320105.json:
```json
{
    "body": "<a id='comment:50'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f26b322f76034b8122603cbc4c7b02d4011f0cd9\">f26b322</a></td><td><code>Replace some implicit relative imports with explicit imports.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a83e25136481efb99d9cb8c00dde3065c0d04894\">a83e251</a></td><td><code>Do effectively exactly what the makefile for the autogen sources was doing, but purely in Python, removing the use of make.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8249bedb500a24909f25df7fe79d1d7d0771814f\">8249bed</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9\">e9a40f8</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>\n",
    "created_at": "2016-11-18T16:16:18Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320105",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:50'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f26b322f76034b8122603cbc4c7b02d4011f0cd9">f26b322</a></td><td><code>Replace some implicit relative imports with explicit imports.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a83e25136481efb99d9cb8c00dde3065c0d04894">a83e251</a></td><td><code>Do effectively exactly what the makefile for the autogen sources was doing, but purely in Python, removing the use of make.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8249bedb500a24909f25df7fe79d1d7d0771814f">8249bed</a></td><td><code>Remove generate_py_source.mk from MANIFEST.in as it no longer exists</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9">e9a40f8</a></td><td><code>Use sage.env instead of os.environ for path configuration</code></td></tr></table>




---

archive/issue_comments_320106.json:
```json
{
    "body": "**Changing commit** from \"[4b797a71287b4c64dfb4b1eebbc031921c00e195](https://github.com/sagemath/sagetrac-mirror/commit/4b797a71287b4c64dfb4b1eebbc031921c00e195)\" to \"[e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9](https://github.com/sagemath/sagetrac-mirror/commit/e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9)\".",
    "created_at": "2016-11-18T16:16:18Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320106",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[4b797a71287b4c64dfb4b1eebbc031921c00e195](https://github.com/sagemath/sagetrac-mirror/commit/4b797a71287b4c64dfb4b1eebbc031921c00e195)" to "[e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9](https://github.com/sagemath/sagetrac-mirror/commit/e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9)".



---

archive/issue_comments_320107.json:
```json
{
    "body": "**Changing commit** from \"[e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9](https://github.com/sagemath/sagetrac-mirror/commit/e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9)\" to \"[9750ba7f6c0d745430211d0c060c5e015374182e](https://github.com/sagemath/sagetrac-mirror/commit/9750ba7f6c0d745430211d0c060c5e015374182e)\".",
    "created_at": "2016-11-18T16:19:42Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320107",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9](https://github.com/sagemath/sagetrac-mirror/commit/e9a40f82b2bb9af674599c3b7b5a786b5ae3dff9)" to "[9750ba7f6c0d745430211d0c060c5e015374182e](https://github.com/sagemath/sagetrac-mirror/commit/9750ba7f6c0d745430211d0c060c5e015374182e)".



---

archive/issue_comments_320108.json:
```json
{
    "body": "<a id='comment:51'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/9750ba7f6c0d745430211d0c060c5e015374182e\">9750ba7</a></td><td><code>Don't use SAGE_SRC here a la #21821</code></td></tr></table>\n",
    "created_at": "2016-11-18T16:19:42Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320108",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:51'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/9750ba7f6c0d745430211d0c060c5e015374182e">9750ba7</a></td><td><code>Don't use SAGE_SRC here a la #21821</code></td></tr></table>




---

archive/issue_comments_320109.json:
```json
{
    "body": "<a id='comment:52'></a>\nSomewhere you should add a Python equivalent of\n\n```\nrm -f sage/libs/pari/auto_*.pxi\n```",
    "created_at": "2016-11-19T08:05:22Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320109",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:52'></a>
Somewhere you should add a Python equivalent of

```
rm -f sage/libs/pari/auto_*.pxi
```



---

archive/issue_comments_320110.json:
```json
{
    "body": "<a id='comment:53'></a>\nI don't really think that belongs here in the first place but okay.",
    "created_at": "2016-11-21T10:47:39Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320110",
    "user": "https://github.com/embray"
}
```

<a id='comment:53'></a>
I don't really think that belongs here in the first place but okay.



---

archive/issue_comments_320111.json:
```json
{
    "body": "<a id='comment:54'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e45216fcc5472bcaf5bd85318fd8e25acffde923\">e45216f</a></td><td><code>Clean up old autogenerated files before outputting new ones.</code></td></tr></table>\n",
    "created_at": "2016-11-21T10:53:50Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320111",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:54'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e45216fcc5472bcaf5bd85318fd8e25acffde923">e45216f</a></td><td><code>Clean up old autogenerated files before outputting new ones.</code></td></tr></table>




---

archive/issue_comments_320112.json:
```json
{
    "body": "**Changing commit** from \"[9750ba7f6c0d745430211d0c060c5e015374182e](https://github.com/sagemath/sagetrac-mirror/commit/9750ba7f6c0d745430211d0c060c5e015374182e)\" to \"[e45216fcc5472bcaf5bd85318fd8e25acffde923](https://github.com/sagemath/sagetrac-mirror/commit/e45216fcc5472bcaf5bd85318fd8e25acffde923)\".",
    "created_at": "2016-11-21T10:53:50Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320112",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[9750ba7f6c0d745430211d0c060c5e015374182e](https://github.com/sagemath/sagetrac-mirror/commit/9750ba7f6c0d745430211d0c060c5e015374182e)" to "[e45216fcc5472bcaf5bd85318fd8e25acffde923](https://github.com/sagemath/sagetrac-mirror/commit/e45216fcc5472bcaf5bd85318fd8e25acffde923)".



---

archive/issue_events_193705.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-21T10:54:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193705"
}
```



---

archive/issue_events_193706.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-21T10:54:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193706"
}
```



---

archive/issue_comments_320113.json:
```json
{
    "body": "<a id='comment:55'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e45216fcc5472bcaf5bd85318fd8e25acffde923\">e45216f</a></td><td><code>Clean up old autogenerated files before outputting new ones.</code></td></tr></table>\n",
    "created_at": "2016-11-21T10:54:42Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320113",
    "user": "https://github.com/embray"
}
```

<a id='comment:55'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e45216fcc5472bcaf5bd85318fd8e25acffde923">e45216f</a></td><td><code>Clean up old autogenerated files before outputting new ones.</code></td></tr></table>




---

archive/issue_comments_320114.json:
```json
{
    "body": "<a id='comment:56'></a>\nIn #21820, some paths changed. In particular, the generated files are now in `src/sage/libs/cypari2`.",
    "created_at": "2016-11-22T10:53:58Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320114",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:56'></a>
In #21820, some paths changed. In particular, the generated files are now in `src/sage/libs/cypari2`.



---

archive/issue_events_193707.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-22T10:53:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193707"
}
```



---

archive/issue_events_193708.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-22T10:53:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193708"
}
```



---

archive/issue_comments_320115.json:
```json
{
    "body": "**Changing dependencies** from \"#21820\" to \"\".",
    "created_at": "2016-11-22T10:53:58Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320115",
    "user": "https://github.com/jdemeyer"
}
```

**Changing dependencies** from "#21820" to "".



---

archive/issue_comments_320116.json:
```json
{
    "body": "<a id='comment:57'></a>\nYes, I see that now. Incidentally *building* still worked, it just built the files in the wrong place.",
    "created_at": "2016-11-22T13:18:09Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320116",
    "user": "https://github.com/embray"
}
```

<a id='comment:57'></a>
Yes, I see that now. Incidentally *building* still worked, it just built the files in the wrong place.



---

archive/issue_comments_320117.json:
```json
{
    "body": "<a id='comment:58'></a>\n**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91fb12ed8d96bede142c7ee4b62540e4f99c827c\">91fb12e</a></td><td><code>Use sage_src_pari to get the output path for generated files.</code></td></tr></table>\n",
    "created_at": "2016-11-22T13:23:22Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320117",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:58'></a>
**Branch pushed to git repo; I updated commit sha1. This was a forced push.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91fb12ed8d96bede142c7ee4b62540e4f99c827c">91fb12e</a></td><td><code>Use sage_src_pari to get the output path for generated files.</code></td></tr></table>




---

archive/issue_comments_320118.json:
```json
{
    "body": "**Changing commit** from \"[e45216fcc5472bcaf5bd85318fd8e25acffde923](https://github.com/sagemath/sagetrac-mirror/commit/e45216fcc5472bcaf5bd85318fd8e25acffde923)\" to \"[91fb12ed8d96bede142c7ee4b62540e4f99c827c](https://github.com/sagemath/sagetrac-mirror/commit/91fb12ed8d96bede142c7ee4b62540e4f99c827c)\".",
    "created_at": "2016-11-22T13:23:22Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320118",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[e45216fcc5472bcaf5bd85318fd8e25acffde923](https://github.com/sagemath/sagetrac-mirror/commit/e45216fcc5472bcaf5bd85318fd8e25acffde923)" to "[91fb12ed8d96bede142c7ee4b62540e4f99c827c](https://github.com/sagemath/sagetrac-mirror/commit/91fb12ed8d96bede142c7ee4b62540e4f99c827c)".



---

archive/issue_comments_320119.json:
```json
{
    "body": "<a id='comment:59'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205\">34ca46c</a></td><td><code>Don't look for the decl.pxi file anymore</code></td></tr></table>\n",
    "created_at": "2016-11-22T13:27:00Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320119",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:59'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205">34ca46c</a></td><td><code>Don't look for the decl.pxi file anymore</code></td></tr></table>




---

archive/issue_comments_320120.json:
```json
{
    "body": "**Changing commit** from \"[91fb12ed8d96bede142c7ee4b62540e4f99c827c](https://github.com/sagemath/sagetrac-mirror/commit/91fb12ed8d96bede142c7ee4b62540e4f99c827c)\" to \"[34ca46c4a44f25cdd076522a99ceaf215653d205](https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205)\".",
    "created_at": "2016-11-22T13:27:00Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320120",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[91fb12ed8d96bede142c7ee4b62540e4f99c827c](https://github.com/sagemath/sagetrac-mirror/commit/91fb12ed8d96bede142c7ee4b62540e4f99c827c)" to "[34ca46c4a44f25cdd076522a99ceaf215653d205](https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205)".



---

archive/issue_events_193709.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-22T13:27:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193709"
}
```



---

archive/issue_events_193710.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-11-22T13:27:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193710"
}
```



---

archive/issue_comments_320121.json:
```json
{
    "body": "<a id='comment:60'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/91fb12ed8d96bede142c7ee4b62540e4f99c827c\">91fb12e</a></td><td><code>Use sage_src_pari to get the output path for generated files.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205\">34ca46c</a></td><td><code>Don't look for the decl.pxi file anymore</code></td></tr></table>\n",
    "created_at": "2016-11-22T13:27:21Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320121",
    "user": "https://github.com/embray"
}
```

<a id='comment:60'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/91fb12ed8d96bede142c7ee4b62540e4f99c827c">91fb12e</a></td><td><code>Use sage_src_pari to get the output path for generated files.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205">34ca46c</a></td><td><code>Don't look for the decl.pxi file anymore</code></td></tr></table>




---

archive/issue_comments_320122.json:
```json
{
    "body": "<a id='comment:61'></a>\nLooks good to me; though the description of this ticket could use updating.",
    "created_at": "2016-12-06T19:23:47Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320122",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:61'></a>
Looks good to me; though the description of this ticket could use updating.



---

archive/issue_events_193711.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-12-06T19:23:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193711"
}
```



---

archive/issue_events_193712.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-12-06T19:23:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193712"
}
```



---

archive/issue_events_193713.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-07T23:30:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193713"
}
```



---

archive/issue_events_193714.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "f9c7b2e764a5c1d2651f6b643fa4fb10a67c98f3",
    "created_at": "2016-12-07T23:30:01Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21613#event-193714"
}
```



---

archive/issue_comments_320123.json:
```json
{
    "body": "**Changing branch** from \"[u/embray/ticket-21613](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21613)\" to \"[34ca46c4a44f25cdd076522a99ceaf215653d205](https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205)\".",
    "created_at": "2016-12-07T23:30:01Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320123",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/embray/ticket-21613](https://github.com/sagemath/sagetrac-mirror/tree/u/embray/ticket-21613)" to "[34ca46c4a44f25cdd076522a99ceaf215653d205](https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205)".



---

archive/issue_comments_320124.json:
```json
{
    "body": "<a id='comment:63'></a>\nSome changes made here are not py3 compatible, and need to be corrected to be so.\n\ntry:\n\n```\nexport SAGE_PYTHON3=yes \nmake build\n```",
    "created_at": "2016-12-10T11:18:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320124",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:63'></a>
Some changes made here are not py3 compatible, and need to be corrected to be so.

try:

```
export SAGE_PYTHON3=yes 
make build
```



---

archive/issue_comments_320125.json:
```json
{
    "body": "**Changing commit** from \"[34ca46c4a44f25cdd076522a99ceaf215653d205](https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205)\" to \"\".",
    "created_at": "2016-12-10T11:18:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320125",
    "user": "https://github.com/fchapoton"
}
```

**Changing commit** from "[34ca46c4a44f25cdd076522a99ceaf215653d205](https://github.com/sagemath/sagetrac-mirror/commit/34ca46c4a44f25cdd076522a99ceaf215653d205)" to "".



---

archive/issue_comments_320126.json:
```json
{
    "body": "<a id='comment:64'></a>\nproposal fix in #22044",
    "created_at": "2016-12-11T09:53:38Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320126",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:64'></a>
proposal fix in #22044



---

archive/issue_comments_320127.json:
```json
{
    "body": "<a id='comment:65'></a>\nBreakage: #22094.",
    "created_at": "2016-12-26T09:27:45Z",
    "issue": "https://github.com/sagemath/sage/issues/21613",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21613#issuecomment-320127",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:65'></a>
Breakage: #22094.
