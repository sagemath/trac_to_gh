# Issue 21479: ./configure --prefix=SAGE_LOCAL

archive/issues_021242.json:
```json
{
    "assignees": [],
    "body": "I propose to support choosing a location for the SAGE_LOCAL tree, using \n\n```\n./configure --prefix=SAGE_LOCAL\n```\n(the default would be, as before, the `local` subdirectory of SAGE_ROOT - see patch on the ticket).\n\nI am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21495 for that. \n\nNevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.\n\nThis ticket is a step towards #21566.\n\n**Release manager configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-214.tar.gz\n\nCC:  @jdemeyer @embray @kiwifb @nexttime @dimpase\n\nComponent: **build**\n\nAuthor: **Matthias Koeppe, Jeroen Demeyer**\n\nBranch: **[`e5926b1`](https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44)**\n\nReviewer: **Jeroen Demeyer, Erik Bray, Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21479_\n\n",
    "closed_at": "2017-04-03T20:59:51Z",
    "created_at": "2016-09-12T18:14:49Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "./configure --prefix=SAGE_LOCAL",
    "type": "issue",
    "updated_at": "2017-04-13T20:06:26Z",
    "url": "https://github.com/sagemath/sage/issues/21479",
    "user": "https://github.com/mkoeppe"
}
```
I propose to support choosing a location for the SAGE_LOCAL tree, using 

```
./configure --prefix=SAGE_LOCAL
```
(the default would be, as before, the `local` subdirectory of SAGE_ROOT - see patch on the ticket).

I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21495 for that. 

Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.

This ticket is a step towards #21566.

**Release manager configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-214.tar.gz

CC:  @jdemeyer @embray @kiwifb @nexttime @dimpase

Component: **build**

Author: **Matthias Koeppe, Jeroen Demeyer**

Branch: **[`e5926b1`](https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44)**

Reviewer: **Jeroen Demeyer, Erik Bray, Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/21479_





---

archive/issue_events_299025.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-12T18:14:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299025"
}
```



---

archive/issue_events_299026.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-12T18:14:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "0000b0",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299026"
}
```



---

archive/issue_events_299027.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-12T18:14:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299027"
}
```



---

archive/issue_events_299028.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-12T18:14:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299028"
}
```



---

archive/issue_comments_314812.json:
```json
{
    "body": "Branch: **[u/mkoeppe/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___prefix_sage_local)**",
    "created_at": "2016-09-12T18:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314812",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___prefix_sage_local)**



---

archive/issue_comments_314813.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,7 +3,7 @@\n ```\n ./configure --prefix=SAGE_LOCAL\n ```\n-(the default would be, as before, the `local` subdirectory of SAGE_ROOT).\n+(the default would be, as before, the `local` subdirectory of SAGE_ROOT - see patch on the ticket).\n \n I am fully aware that Sage's build system does not have a separation between 'make' and 'make install' (this would require all packages to support a two-stage install (DESTDIR).) Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.\n \n``````\n",
    "created_at": "2016-09-12T18:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314813",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,7 +3,7 @@
 ```
 ./configure --prefix=SAGE_LOCAL
 ```
-(the default would be, as before, the `local` subdirectory of SAGE_ROOT).
+(the default would be, as before, the `local` subdirectory of SAGE_ROOT - see patch on the ticket).
 
 I am fully aware that Sage's build system does not have a separation between 'make' and 'make install' (this would require all packages to support a two-stage install (DESTDIR).) Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.
 
``````




---

archive/issue_comments_314814.json:
```json
{
    "body": "<div id=\"comment:2\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fa16faeb0677d6dec1b9c07f7580b3fe5046bb88\"><code>fa16fae</code></a></td><td><code>Use AC_PREFIX_DEFAULT to default prefix to SAGE_ROOT/local</code></td></tr></table>\n",
    "created_at": "2016-09-12T18:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314814",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:2"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fa16faeb0677d6dec1b9c07f7580b3fe5046bb88"><code>fa16fae</code></a></td><td><code>Use AC_PREFIX_DEFAULT to default prefix to SAGE_ROOT/local</code></td></tr></table>




---

archive/issue_comments_314815.json:
```json
{
    "body": "Commit: **[`fa16fae`](https://github.com/sagemath/sagetrac-mirror/commit/fa16faeb0677d6dec1b9c07f7580b3fe5046bb88)**",
    "created_at": "2016-09-12T18:17:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314815",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[`fa16fae`](https://github.com/sagemath/sagetrac-mirror/commit/fa16faeb0677d6dec1b9c07f7580b3fe5046bb88)**



---

archive/issue_comments_314816.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2016-09-12T18:17:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314816",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_314817.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,6 +5,8 @@\n ```\n (the default would be, as before, the `local` subdirectory of SAGE_ROOT - see patch on the ticket).\n \n-I am fully aware that Sage's build system does not have a separation between 'make' and 'make install' (this would require all packages to support a two-stage install (DESTDIR).) Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.\n+I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21480 for that. \n+\n+Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.\n \n \n``````\n",
    "created_at": "2016-09-15T00:50:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314817",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,6 +5,8 @@
 ```
 (the default would be, as before, the `local` subdirectory of SAGE_ROOT - see patch on the ticket).
 
-I am fully aware that Sage's build system does not have a separation between 'make' and 'make install' (this would require all packages to support a two-stage install (DESTDIR).) Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.
+I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21480 for that. 
+
+Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.
 
 
``````




---

archive/issue_comments_314818.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -5,7 +5,7 @@\n ```\n (the default would be, as before, the `local` subdirectory of SAGE_ROOT - see patch on the ticket).\n \n-I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21480 for that. \n+I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21495 for that. \n \n Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.\n \n``````\n",
    "created_at": "2016-09-15T00:51:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314818",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -5,7 +5,7 @@
 ```
 (the default would be, as before, the `local` subdirectory of SAGE_ROOT - see patch on the ticket).
 
-I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21480 for that. 
+I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21495 for that. 
 
 Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.
 
``````




---

archive/issue_comments_314819.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\n(i completely agree with this)\n\na main obstacle is: the build system writes to $prefix during the build...\n\ni suggest to do the transition one-package-at-a-time, and after `--disable-$package` is in place.\n\nwith `--disable-all`, it will be easiest to avoid writing to $prefix.",
    "created_at": "2016-09-15T07:21:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314819",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:6" align="right">comment:6</div>

(i completely agree with this)

a main obstacle is: the build system writes to $prefix during the build...

i suggest to do the transition one-package-at-a-time, and after `--disable-$package` is in place.

with `--disable-all`, it will be easiest to avoid writing to $prefix.



---

archive/issue_comments_314820.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOn this *short term* ticket, we do allow \"make\" to write into $prefix; and \"make install\" will be a no-op.\n\nMore ambitious plans are to be discussed on the *long term* ticket #21495, not on this ticket. Thanks.",
    "created_at": "2016-09-15T07:26:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314820",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">comment:7</div>

On this *short term* ticket, we do allow "make" to write into $prefix; and "make install" will be a no-op.

More ambitious plans are to be discussed on the *long term* ticket #21495, not on this ticket. Thanks.



---

archive/issue_comments_314821.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\ni agree that there are intermediate steps to take. but i don't yet fully understand this approach.\n\ni think the behaviour of just \"make\" should not change, regardless of `--prefix`. it works perfectly well and *as intended* right now. clearly it should do something different under the hood, but that's not on this ticket.\n\n> we do allow \"make\" to write into $prefix\n\nwhy would you need/want that? can you please give an example?\n\nmy feeling is, that entangling prefix and SAGE_LOCAL further complicates the transition considerably. there will be no way to tell whether \"this part still uses SAGE_LOCAL\" vs. \"this has already been cleaned\". newcomers tend to grep a variable from the code, see how it is used and use it the same way. for a looong time to come.",
    "created_at": "2016-09-15T09:49:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314821",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:8" align="right">comment:8</div>

i agree that there are intermediate steps to take. but i don't yet fully understand this approach.

i think the behaviour of just "make" should not change, regardless of `--prefix`. it works perfectly well and *as intended* right now. clearly it should do something different under the hood, but that's not on this ticket.

> we do allow "make" to write into $prefix

why would you need/want that? can you please give an example?

my feeling is, that entangling prefix and SAGE_LOCAL further complicates the transition considerably. there will be no way to tell whether "this part still uses SAGE_LOCAL" vs. "this has already been cleaned". newcomers tend to grep a variable from the code, see how it is used and use it the same way. for a looong time to come.



---

archive/issue_comments_314822.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, Jeroen Demeyer**",
    "created_at": "2016-09-15T10:55:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314822",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, Jeroen Demeyer**



---

archive/issue_events_299029.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-09-15T10:55:24Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299029"
}
```



---

archive/issue_events_299030.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-09-15T10:55:24Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299030"
}
```



---

archive/issue_comments_314823.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,5 +8,3 @@\n I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21495 for that. \n \n Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.\n-\n-\n``````\n",
    "created_at": "2016-09-15T11:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314823",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,5 +8,3 @@
 I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21495 for that. 
 
 Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.
-
-
``````




---

archive/issue_comments_314824.json:
```json
{
    "body": "Changed author from **Matthias Koeppe, Jeroen Demeyer** to **Matthias Koeppe**",
    "created_at": "2016-09-15T11:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314824",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Matthias Koeppe, Jeroen Demeyer** to **Matthias Koeppe**



---

archive/issue_comments_314825.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nI made a new ticket (#21501) to allow `$SAGE_LOCAL` to be changed.",
    "created_at": "2016-09-15T11:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314825",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:10" align="right">comment:10</div>

I made a new ticket (#21501) to allow `$SAGE_LOCAL` to be changed.



---

archive/issue_comments_314826.json:
```json
{
    "body": "Dependencies: **#21501**",
    "created_at": "2016-09-15T11:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314826",
    "user": "https://github.com/jdemeyer"
}
```

Dependencies: **#21501**



---

archive/issue_comments_314827.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\ni wrote\n> entangling prefix and SAGE_LOCAL further complicates the transition considerably.\n\n@mkoeppe i've thought about it. it seems, the alternatives are much worse (#21501) or much more ambitious.\n\nplease go ahead with prefix==SAGE_LOCAL.\n\nplease consider to add a remark in some documentation (better place: `configure --help`?) on this temporary sort of prefix, such as \n\n\"currently, `make install` is a no-op, that will change (hopefully). you should not expect a fully functional installation in $prefix before `make install` has finished.\"",
    "created_at": "2016-09-15T13:49:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314827",
    "user": "https://github.com/sagetrac-felixs"
}
```

<div id="comment:11" align="right">comment:11</div>

i wrote
> entangling prefix and SAGE_LOCAL further complicates the transition considerably.

@mkoeppe i've thought about it. it seems, the alternatives are much worse (#21501) or much more ambitious.

please go ahead with prefix==SAGE_LOCAL.

please consider to add a remark in some documentation (better place: `configure --help`?) on this temporary sort of prefix, such as 

"currently, `make install` is a no-op, that will change (hopefully). you should not expect a fully functional installation in $prefix before `make install` has finished."



---

archive/issue_comments_314828.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nThanks Felix for the discussion. \n\nIf you want to help, could you work on rebasing #15105.",
    "created_at": "2016-09-15T16:51:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314828",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">comment:12</div>

Thanks Felix for the discussion. 

If you want to help, could you work on rebasing #15105.



---

archive/issue_comments_314829.json:
```json
{
    "body": "<div id=\"comment:13\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/64e697ddb971366afb7382d429729effa260d4a0\"><code>64e697d</code></a></td><td><code>Allow a custom $SAGE_LOCAL directory</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/dc81cf65f186bc810b60d0ec71db3c41d90c970f\"><code>dc81cf6</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/21501' into t/21479/__configure___prefix_sage_local</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ac12edc4a3e0478c0b3ef0e29faf6492d9f38371\"><code>ac12edc</code></a></td><td><code>Merge tag '7.4.beta5' into t/21479/__configure___prefix_sage_local</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/924b30bbe2cd1daf28f32ea73293b8f0107ab001\"><code>924b30b</code></a></td><td><code>Handle --prefix</code></td></tr></table>\n",
    "created_at": "2016-09-18T05:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314829",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:13"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/64e697ddb971366afb7382d429729effa260d4a0"><code>64e697d</code></a></td><td><code>Allow a custom $SAGE_LOCAL directory</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/dc81cf65f186bc810b60d0ec71db3c41d90c970f"><code>dc81cf6</code></a></td><td><code>Merge remote-tracking branch 'trac/u/jdemeyer/ticket/21501' into t/21479/__configure___prefix_sage_local</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ac12edc4a3e0478c0b3ef0e29faf6492d9f38371"><code>ac12edc</code></a></td><td><code>Merge tag '7.4.beta5' into t/21479/__configure___prefix_sage_local</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/924b30bbe2cd1daf28f32ea73293b8f0107ab001"><code>924b30b</code></a></td><td><code>Handle --prefix</code></td></tr></table>




---

archive/issue_comments_314830.json:
```json
{
    "body": "Changed commit from **[`fa16fae`](https://github.com/sagemath/sagetrac-mirror/commit/fa16faeb0677d6dec1b9c07f7580b3fe5046bb88)** to **[`924b30b`](https://github.com/sagemath/sagetrac-mirror/commit/924b30bbe2cd1daf28f32ea73293b8f0107ab001)**",
    "created_at": "2016-09-18T05:17:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314830",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fa16fae`](https://github.com/sagemath/sagetrac-mirror/commit/fa16faeb0677d6dec1b9c07f7580b3fe5046bb88)** to **[`924b30b`](https://github.com/sagemath/sagetrac-mirror/commit/924b30bbe2cd1daf28f32ea73293b8f0107ab001)**



---

archive/issue_comments_314831.json:
```json
{
    "body": "<div id=\"comment:14\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6f8eaac5088a39b83859f89fa3ea5ff9e437ad74\"><code>6f8eaac</code></a></td><td><code>Fixup</code></td></tr></table>\n",
    "created_at": "2016-09-18T05:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314831",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:14"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6f8eaac5088a39b83859f89fa3ea5ff9e437ad74"><code>6f8eaac</code></a></td><td><code>Fixup</code></td></tr></table>




---

archive/issue_comments_314832.json:
```json
{
    "body": "Changed commit from **[`924b30b`](https://github.com/sagemath/sagetrac-mirror/commit/924b30bbe2cd1daf28f32ea73293b8f0107ab001)** to **[`6f8eaac`](https://github.com/sagemath/sagetrac-mirror/commit/6f8eaac5088a39b83859f89fa3ea5ff9e437ad74)**",
    "created_at": "2016-09-18T05:19:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314832",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`924b30b`](https://github.com/sagemath/sagetrac-mirror/commit/924b30bbe2cd1daf28f32ea73293b8f0107ab001)** to **[`6f8eaac`](https://github.com/sagemath/sagetrac-mirror/commit/6f8eaac5088a39b83859f89fa3ea5ff9e437ad74)**



---

archive/issue_comments_314833.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nHere's a first version of what I have in mind.\n\nSome concerns:\n- bootstrap. It's somewhat unclear what to do here. By the way, is it supposed to use the distribution's Python or ours?\n- sage-location.",
    "created_at": "2016-09-18T05:22:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314833",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:15" align="right">comment:15</div>

Here's a first version of what I have in mind.

Some concerns:
- bootstrap. It's somewhat unclear what to do here. By the way, is it supposed to use the distribution's Python or ours?
- sage-location.



---

archive/issue_events_299031.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-18T05:22:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299031"
}
```



---

archive/issue_comments_314834.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nI don't like the duplication in `build/make/install` and `src/bin/sage-env`.\n\nHere is a suggestion: add a new file, say `src/bin/sage-config` (or whatever you want to call it) to deal with configurable things like `SAGE_LOCAL`. You can also define the other `SAGE_*` directories (except `SAGE_ROOT`) there.\n\nThen you can source this file in both `src/bin/sage-env` and `build/make/install`, which can then be independent of `configure`.\n\nAnd I don't see the point of changing `$SAGE_ROOT/sage` because that is additional duplication.",
    "created_at": "2016-09-18T11:09:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314834",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

I don't like the duplication in `build/make/install` and `src/bin/sage-env`.

Here is a suggestion: add a new file, say `src/bin/sage-config` (or whatever you want to call it) to deal with configurable things like `SAGE_LOCAL`. You can also define the other `SAGE_*` directories (except `SAGE_ROOT`) there.

Then you can source this file in both `src/bin/sage-env` and `build/make/install`, which can then be independent of `configure`.

And I don't see the point of changing `$SAGE_ROOT/sage` because that is additional duplication.



---

archive/issue_comments_314835.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nReplying to [@mkoeppe](#comment%3A15):\n> Some concerns:\n> - bootstrap. It's somewhat unclear what to do here. By the way, is it supposed to use the distribution's Python or ours?\n> - sage-location.\n\nIn both cases, I don't get what the problem is.",
    "created_at": "2016-09-18T13:13:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314835",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

Replying to [@mkoeppe](#comment%3A15):
> Some concerns:
> - bootstrap. It's somewhat unclear what to do here. By the way, is it supposed to use the distribution's Python or ours?
> - sage-location.

In both cases, I don't get what the problem is.



---

archive/issue_comments_314836.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c9091f5234e036b9975af573b7ba421901d572ec\"><code>c9091f5</code></a></td><td><code>Have sage-env, sage, install read in generated file sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66fc193a9e0e1bf9b0aa2a204ccc0bd13609bbde\"><code>66fc193</code></a></td><td><code>Fix for locating sage-env-config from sage-env</code></td></tr></table>\n",
    "created_at": "2016-09-18T19:29:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314836",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c9091f5234e036b9975af573b7ba421901d572ec"><code>c9091f5</code></a></td><td><code>Have sage-env, sage, install read in generated file sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66fc193a9e0e1bf9b0aa2a204ccc0bd13609bbde"><code>66fc193</code></a></td><td><code>Fix for locating sage-env-config from sage-env</code></td></tr></table>




---

archive/issue_comments_314837.json:
```json
{
    "body": "Changed commit from **[`6f8eaac`](https://github.com/sagemath/sagetrac-mirror/commit/6f8eaac5088a39b83859f89fa3ea5ff9e437ad74)** to **[`66fc193`](https://github.com/sagemath/sagetrac-mirror/commit/66fc193a9e0e1bf9b0aa2a204ccc0bd13609bbde)**",
    "created_at": "2016-09-18T19:29:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314837",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`6f8eaac`](https://github.com/sagemath/sagetrac-mirror/commit/6f8eaac5088a39b83859f89fa3ea5ff9e437ad74)** to **[`66fc193`](https://github.com/sagemath/sagetrac-mirror/commit/66fc193a9e0e1bf9b0aa2a204ccc0bd13609bbde)**



---

archive/issue_comments_314838.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@jdemeyer](#comment%3A16):\n> Here is a suggestion: add a new file, say `src/bin/sage-config` (or whatever you want to call it) to deal with configurable things like `SAGE_LOCAL`. You can also define the other `SAGE_*` directories (except `SAGE_ROOT`) there.\n\nThanks for the suggestion. \nThe ticket is indeed simpler that way.\nPlease take a look.",
    "created_at": "2016-09-18T19:31:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314838",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@jdemeyer](#comment%3A16):
> Here is a suggestion: add a new file, say `src/bin/sage-config` (or whatever you want to call it) to deal with configurable things like `SAGE_LOCAL`. You can also define the other `SAGE_*` directories (except `SAGE_ROOT`) there.

Thanks for the suggestion. 
The ticket is indeed simpler that way.
Please take a look.



---

archive/issue_comments_314839.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nFor easier testing, I plan to review this after #21501 and #21480 are in a beta release. You can remind me when that happens.",
    "created_at": "2016-09-18T19:56:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314839",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:20" align="right">comment:20</div>

For easier testing, I plan to review this after #21501 and #21480 are in a beta release. You can remind me when that happens.



---

archive/issue_comments_314840.json:
```json
{
    "body": "<div id=\"comment:21\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e0dc9a374286e38c82516c313d598bd7df5806c3\"><code>e0dc9a3</code></a></td><td><code>Merge tag '7.4.beta6' into t/21479/__configure___prefix_sage_local</code></td></tr></table>\n",
    "created_at": "2016-09-24T17:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314840",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:21"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e0dc9a374286e38c82516c313d598bd7df5806c3"><code>e0dc9a3</code></a></td><td><code>Merge tag '7.4.beta6' into t/21479/__configure___prefix_sage_local</code></td></tr></table>




---

archive/issue_comments_314841.json:
```json
{
    "body": "Changed commit from **[`66fc193`](https://github.com/sagemath/sagetrac-mirror/commit/66fc193a9e0e1bf9b0aa2a204ccc0bd13609bbde)** to **[`e0dc9a3`](https://github.com/sagemath/sagetrac-mirror/commit/e0dc9a374286e38c82516c313d598bd7df5806c3)**",
    "created_at": "2016-09-24T17:47:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314841",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`66fc193`](https://github.com/sagemath/sagetrac-mirror/commit/66fc193a9e0e1bf9b0aa2a204ccc0bd13609bbde)** to **[`e0dc9a3`](https://github.com/sagemath/sagetrac-mirror/commit/e0dc9a374286e38c82516c313d598bd7df5806c3)**



---

archive/issue_comments_314842.json:
```json
{
    "body": "<div id=\"comment:22\"></div>\n\nBranch pushed to git repo; I updated commit sha1. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/751bd0fbde10aa234867122308c7bb76673cbaba\"><code>751bd0f</code></a></td><td><code>Reword TODO item</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a8cc0e1bc0c09142275a7ea6b03775e83d73e28\"><code>3a8cc0e</code></a></td><td><code>Fix typo in comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0dd9c50021302e4d8cfc6f95e8bbdea232c60b97\"><code>0dd9c50</code></a></td><td><code>Respect environment variable MAKE</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/17f90d8d1e8b35f9ae08bb98bb876083ba968824\"><code>17f90d8</code></a></td><td><code>beautification</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5f90659f21cc7ac1e39cdcf7974dba2ba223da5\"><code>e5f9065</code></a></td><td><code>More comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7791cd987347dfe253e3ed3ce74214f4527485d8\"><code>7791cd9</code></a></td><td><code>Remove --buildbase code</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/74169e75b0c650e6b1070c6beca231422cf62eaa\"><code>74169e7</code></a></td><td><code>Pass SAGE_SRC to generate_py_source.mk</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0394333a54e51c53b9404f248220a412cf13e00e\"><code>0394333</code></a></td><td><code>Add new file to MANIFEST.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fdedb029434cba49db4249c5511af8c8efc08217\"><code>fdedb02</code></a></td><td><code>Install SAGE_LOCAL/bin/sage instead of SAGE_ROOT/sage as Jupyter kernel</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/82152547946c7776c2d5c28ef44d7da86c22eaf0\"><code>8215254</code></a></td><td><code>Merge branch 't/21480/keep_src__clean_by_using___build_base_when_building_sagelib' into t/21479/__configure___prefix_sage_local</code></td></tr></table>\n",
    "created_at": "2016-09-25T02:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314842",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:22"></div>

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/751bd0fbde10aa234867122308c7bb76673cbaba"><code>751bd0f</code></a></td><td><code>Reword TODO item</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a8cc0e1bc0c09142275a7ea6b03775e83d73e28"><code>3a8cc0e</code></a></td><td><code>Fix typo in comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0dd9c50021302e4d8cfc6f95e8bbdea232c60b97"><code>0dd9c50</code></a></td><td><code>Respect environment variable MAKE</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/17f90d8d1e8b35f9ae08bb98bb876083ba968824"><code>17f90d8</code></a></td><td><code>beautification</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5f90659f21cc7ac1e39cdcf7974dba2ba223da5"><code>e5f9065</code></a></td><td><code>More comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7791cd987347dfe253e3ed3ce74214f4527485d8"><code>7791cd9</code></a></td><td><code>Remove --buildbase code</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/74169e75b0c650e6b1070c6beca231422cf62eaa"><code>74169e7</code></a></td><td><code>Pass SAGE_SRC to generate_py_source.mk</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0394333a54e51c53b9404f248220a412cf13e00e"><code>0394333</code></a></td><td><code>Add new file to MANIFEST.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fdedb029434cba49db4249c5511af8c8efc08217"><code>fdedb02</code></a></td><td><code>Install SAGE_LOCAL/bin/sage instead of SAGE_ROOT/sage as Jupyter kernel</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/82152547946c7776c2d5c28ef44d7da86c22eaf0"><code>8215254</code></a></td><td><code>Merge branch 't/21480/keep_src__clean_by_using___build_base_when_building_sagelib' into t/21479/__configure___prefix_sage_local</code></td></tr></table>




---

archive/issue_comments_314843.json:
```json
{
    "body": "Changed commit from **[`e0dc9a3`](https://github.com/sagemath/sagetrac-mirror/commit/e0dc9a374286e38c82516c313d598bd7df5806c3)** to **[`8215254`](https://github.com/sagemath/sagetrac-mirror/commit/82152547946c7776c2d5c28ef44d7da86c22eaf0)**",
    "created_at": "2016-09-25T02:07:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314843",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e0dc9a3`](https://github.com/sagemath/sagetrac-mirror/commit/e0dc9a374286e38c82516c313d598bd7df5806c3)** to **[`8215254`](https://github.com/sagemath/sagetrac-mirror/commit/82152547946c7776c2d5c28ef44d7da86c22eaf0)**



---

archive/issue_comments_314844.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nBranch is now on top of 7.4.beta6 (which has #21501) + #21480.",
    "created_at": "2016-09-25T02:08:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314844",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

Branch is now on top of 7.4.beta6 (which has #21501) + #21480.



---

archive/issue_comments_314845.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -8,3 +8,5 @@\n I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21495 for that. \n \n Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.\n+\n+This ticket is a step towards #21566.\n``````\n",
    "created_at": "2016-09-25T02:10:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314845",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -8,3 +8,5 @@
 I am fully aware that Sage's build system does not have a separation between 'make' and 'make install'; see #21495 for that. 
 
 Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.
+
+This ticket is a step towards #21566.
``````




---

archive/issue_comments_314846.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@mkoeppe](#comment%3A15):\n> Here's a first version of what I have in mind.\n> \n> Some concerns:\n> - bootstrap. It's somewhat unclear what to do here. By the way, is it supposed to use the distribution's Python or ours?\n\nJust to answer this question: the `bootstrap` package is intended to use the system Python (after all, it's needed well before Sage's Python is ever built).",
    "created_at": "2016-09-26T12:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314846",
    "user": "https://github.com/embray"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@mkoeppe](#comment%3A15):
> Here's a first version of what I have in mind.
> 
> Some concerns:
> - bootstrap. It's somewhat unclear what to do here. By the way, is it supposed to use the distribution's Python or ours?

Just to answer this question: the `bootstrap` package is intended to use the system Python (after all, it's needed well before Sage's Python is ever built).



---

archive/issue_comments_314847.json:
```json
{
    "body": "<div id=\"comment:26\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/06fe631ba0cd657c145f048280ea0c80fce7acd1\"><code>06fe631</code></a></td><td><code>Merge tag '7.4.rc1' into t/21479/__configure___prefix_sage_local</code></td></tr></table>\n",
    "created_at": "2016-10-13T05:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314847",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/06fe631ba0cd657c145f048280ea0c80fce7acd1"><code>06fe631</code></a></td><td><code>Merge tag '7.4.rc1' into t/21479/__configure___prefix_sage_local</code></td></tr></table>




---

archive/issue_comments_314848.json:
```json
{
    "body": "Changed commit from **[`8215254`](https://github.com/sagemath/sagetrac-mirror/commit/82152547946c7776c2d5c28ef44d7da86c22eaf0)** to **[`06fe631`](https://github.com/sagemath/sagetrac-mirror/commit/06fe631ba0cd657c145f048280ea0c80fce7acd1)**",
    "created_at": "2016-10-13T05:27:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314848",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`8215254`](https://github.com/sagemath/sagetrac-mirror/commit/82152547946c7776c2d5c28ef44d7da86c22eaf0)** to **[`06fe631`](https://github.com/sagemath/sagetrac-mirror/commit/06fe631ba0cd657c145f048280ea0c80fce7acd1)**



---

archive/issue_comments_314849.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nBranch is now on top of 7.4.rc1.\n\nJeroen - ready for review.",
    "created_at": "2016-10-13T05:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314849",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Branch is now on top of 7.4.rc1.

Jeroen - ready for review.



---

archive/issue_comments_314850.json:
```json
{
    "body": "Changed commit from **[`06fe631`](https://github.com/sagemath/sagetrac-mirror/commit/06fe631ba0cd657c145f048280ea0c80fce7acd1)** to **[`1adc18c`](https://github.com/sagemath/sagetrac-mirror/commit/1adc18ce0174f9399f53f817bfe1b06b1b250a9b)**",
    "created_at": "2016-10-19T00:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314850",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`06fe631`](https://github.com/sagemath/sagetrac-mirror/commit/06fe631ba0cd657c145f048280ea0c80fce7acd1)** to **[`1adc18c`](https://github.com/sagemath/sagetrac-mirror/commit/1adc18ce0174f9399f53f817bfe1b06b1b250a9b)**



---

archive/issue_comments_314851.json:
```json
{
    "body": "<div id=\"comment:28\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1adc18ce0174f9399f53f817bfe1b06b1b250a9b\"><code>1adc18c</code></a></td><td><code>Merge tag '7.4' into t/21479/__configure___prefix_sage_local</code></td></tr></table>\n",
    "created_at": "2016-10-19T00:43:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314851",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:28"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1adc18ce0174f9399f53f817bfe1b06b1b250a9b"><code>1adc18c</code></a></td><td><code>Merge tag '7.4' into t/21479/__configure___prefix_sage_local</code></td></tr></table>




---

archive/issue_comments_314852.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nNow on top of 7.4.",
    "created_at": "2016-10-19T00:43:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314852",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:29" align="right">comment:29</div>

Now on top of 7.4.



---

archive/issue_comments_314853.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d82cfbc4bd54dfccda1fa3564bc8d39bd4fba216\"><code>d82cfbc</code></a></td><td><code>Merge tag '7.5.beta0' into t/21479/__configure___prefix_sage_local</code></td></tr></table>\n",
    "created_at": "2016-10-25T19:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314853",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d82cfbc4bd54dfccda1fa3564bc8d39bd4fba216"><code>d82cfbc</code></a></td><td><code>Merge tag '7.5.beta0' into t/21479/__configure___prefix_sage_local</code></td></tr></table>




---

archive/issue_comments_314854.json:
```json
{
    "body": "Changed commit from **[`1adc18c`](https://github.com/sagemath/sagetrac-mirror/commit/1adc18ce0174f9399f53f817bfe1b06b1b250a9b)** to **[`d82cfbc`](https://github.com/sagemath/sagetrac-mirror/commit/d82cfbc4bd54dfccda1fa3564bc8d39bd4fba216)**",
    "created_at": "2016-10-25T19:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314854",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`1adc18c`](https://github.com/sagemath/sagetrac-mirror/commit/1adc18ce0174f9399f53f817bfe1b06b1b250a9b)** to **[`d82cfbc`](https://github.com/sagemath/sagetrac-mirror/commit/d82cfbc4bd54dfccda1fa3564bc8d39bd4fba216)**



---

archive/issue_comments_314855.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nWhat does this comment mean:\n\n```\n## The first test does not actually work (see above).\n```\n(\"see above\" can be really confusing because you don't know where to look.\n\nComments like these don't belong in the sources but in a Trac ticket:\n\n```\n\t# TODO: Making directories in $prefix\n\t# should be done by 'make', not configure.\n```\n\n```\n# TODO: Should the install hierarchy (local) really be deleted by make distclean?\n```\n\n```\n#SAGE_ENV_DIR=`dirname $0`    ### Does not work. $0 is /bin/bash\n```\n\n```\n## Note this is a bashism, not sure if this is allowed in this file.\n```",
    "created_at": "2016-10-26T21:58:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314855",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">comment:32</div>

What does this comment mean:

```
## The first test does not actually work (see above).
```
("see above" can be really confusing because you don't know where to look.

Comments like these don't belong in the sources but in a Trac ticket:

```
	# TODO: Making directories in $prefix
	# should be done by 'make', not configure.
```

```
# TODO: Should the install hierarchy (local) really be deleted by make distclean?
```

```
#SAGE_ENV_DIR=`dirname $0`    ### Does not work. $0 is /bin/bash
```

```
## Note this is a bashism, not sure if this is allowed in this file.
```



---

archive/issue_comments_314856.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nThen a more serious remark: I doubt that you are using `BASH_SOURCE` correctly. From the `bash` man page:\n\n```\n       BASH_SOURCE\n              An array variable whose members are the source filenames where the corresponding shell function names in the FUNCNAME array variable  are\n              defined.  The shell function ${FUNCNAME[$i]} is defined in the file ${BASH_SOURCE[$i]} and called from ${BASH_SOURCE[$i+1]}.\n```\n\nAt the very least, I need more explanation of why your code does the right thing.",
    "created_at": "2016-10-26T22:05:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314856",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:33" align="right">comment:33</div>

Then a more serious remark: I doubt that you are using `BASH_SOURCE` correctly. From the `bash` man page:

```
       BASH_SOURCE
              An array variable whose members are the source filenames where the corresponding shell function names in the FUNCNAME array variable  are
              defined.  The shell function ${FUNCNAME[$i]} is defined in the file ${BASH_SOURCE[$i]} and called from ${BASH_SOURCE[$i+1]}.
```

At the very least, I need more explanation of why your code does the right thing.



---

archive/issue_events_299032.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T22:05:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299032"
}
```



---

archive/issue_events_299033.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-26T22:05:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299033"
}
```



---

archive/issue_comments_314857.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nReplying to [@jdemeyer](#comment%3A32):\n> What does this comment mean:\n> \n> ```\n> ## The first test does not actually work (see above).\n> ```\n> (\"see above\" can be really confusing because you don't know where to look.\n\nIt's referring to `dirname $0` -- which does not give the location of sage-env but rather /bin/bash. This is because sage-env is sourced (.) rather than executed.\n\nNote this is existing code in `sage-env` which simply never worked.\n\n> Comments like these don't belong in the sources but in a Trac ticket:\n\nI know, these comments are for the reviewer. I'll be happy remove them *after* we had a discussion about them... So do you have a comment on these?\n\n> ```\n> \t# TODO: Making directories in $prefix\n> \t# should be done by 'make', not configure.\n> ```\n> \n> ```\n> # TODO: Should the install hierarchy (local) really be deleted by make distclean?\n> ```\n> \n> ```\n> #SAGE_ENV_DIR=`dirname $0`    ### Does not work. $0 is /bin/bash\n> ```\n> \n> ```\n> ## Note this is a bashism, not sure if this is allowed in this file.\n> ```",
    "created_at": "2016-10-27T00:18:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314857",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:35" align="right">comment:35</div>

Replying to [@jdemeyer](#comment%3A32):
> What does this comment mean:
> 
> ```
> ## The first test does not actually work (see above).
> ```
> ("see above" can be really confusing because you don't know where to look.

It's referring to `dirname $0` -- which does not give the location of sage-env but rather /bin/bash. This is because sage-env is sourced (.) rather than executed.

Note this is existing code in `sage-env` which simply never worked.

> Comments like these don't belong in the sources but in a Trac ticket:

I know, these comments are for the reviewer. I'll be happy remove them *after* we had a discussion about them... So do you have a comment on these?

> ```
> 	# TODO: Making directories in $prefix
> 	# should be done by 'make', not configure.
> ```
> 
> ```
> # TODO: Should the install hierarchy (local) really be deleted by make distclean?
> ```
> 
> ```
> #SAGE_ENV_DIR=`dirname $0`    ### Does not work. $0 is /bin/bash
> ```
> 
> ```
> ## Note this is a bashism, not sure if this is allowed in this file.
> ```



---

archive/issue_comments_314858.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@jdemeyer](#comment%3A33):\n> Then a more serious remark: I doubt that you are using `BASH_SOURCE` correctly. From the `bash` man page:\n> \n> ```\n>        BASH_SOURCE\n>               An array variable whose members are the source filenames where the corresponding shell function names in the FUNCNAME array variable  are\n>               defined.  The shell function ${FUNCNAME[$i]} is defined in the file ${BASH_SOURCE[$i]} and called from ${BASH_SOURCE[$i+1]}.\n> ```\n> \n> At the very least, I need more explanation of why your code does the right thing.\n\nBASH_SOURCE[0] gives the source of the \"currently running function\". See https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html (you need to read the entries for FUNCNAME and BASH_SOURCE).",
    "created_at": "2016-10-27T00:25:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314858",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@jdemeyer](#comment%3A33):
> Then a more serious remark: I doubt that you are using `BASH_SOURCE` correctly. From the `bash` man page:
> 
> ```
>        BASH_SOURCE
>               An array variable whose members are the source filenames where the corresponding shell function names in the FUNCNAME array variable  are
>               defined.  The shell function ${FUNCNAME[$i]} is defined in the file ${BASH_SOURCE[$i]} and called from ${BASH_SOURCE[$i+1]}.
> ```
> 
> At the very least, I need more explanation of why your code does the right thing.

BASH_SOURCE[0] gives the source of the "currently running function". See https://www.gnu.org/software/bash/manual/html_node/Bash-Variables.html (you need to read the entries for FUNCNAME and BASH_SOURCE).



---

archive/issue_comments_314859.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nReplying to [@mkoeppe](#comment%3A35):\n> Replying to [@jdemeyer](#comment%3A32):\n> > What does this comment mean:\n> > \n> > ```\n> > ## The first test does not actually work (see above).\n> > ```\n> > (\"see above\" can be really confusing because you don't know where to look.\n\n> \n> It's referring to `dirname $0` -- which does not give the location of sage-env but rather /bin/bash. This is because sage-env is sourced (.) rather than executed.\n\nDon't tell **me** but tell the person reading `sage-env` (i.e. clarify the comment in the file).\n\n> I know, these comments are for the reviewer. I'll be happy remove them *after* we had a discussion about them... So do you have a comment on these?\n\nComments for the reviewer can go on Trac.",
    "created_at": "2016-10-27T06:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314859",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">comment:37</div>

Replying to [@mkoeppe](#comment%3A35):
> Replying to [@jdemeyer](#comment%3A32):
> > What does this comment mean:
> > 
> > ```
> > ## The first test does not actually work (see above).
> > ```
> > ("see above" can be really confusing because you don't know where to look.

> 
> It's referring to `dirname $0` -- which does not give the location of sage-env but rather /bin/bash. This is because sage-env is sourced (.) rather than executed.

Don't tell **me** but tell the person reading `sage-env` (i.e. clarify the comment in the file).

> I know, these comments are for the reviewer. I'll be happy remove them *after* we had a discussion about them... So do you have a comment on these?

Comments for the reviewer can go on Trac.



---

archive/issue_comments_314860.json:
```json
{
    "body": "<div id=\"comment:38\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c5998ea55721fb75cd886111084a3e6e90c1636a\"><code>c5998ea</code></a></td><td><code>Remove TODO comment; reflected in #21775</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bd8d2c7191161fca257b763588b63d00156f2b93\"><code>bd8d2c7</code></a></td><td><code>Remove TODO comment; reflected in #21524</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ce48cf8855493237f87489d6c59969ad6ef4b024\"><code>ce48cf8</code></a></td><td><code>src/bin/sage-env: Improve comments</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c3477688c36c27cd240ca074d683f93fa1f6cb22\"><code>c347768</code></a></td><td><code>src/bin/sage-env: Remove broken \"dirname $0\" code</code></td></tr></table>\n",
    "created_at": "2016-10-27T15:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314860",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:38"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c5998ea55721fb75cd886111084a3e6e90c1636a"><code>c5998ea</code></a></td><td><code>Remove TODO comment; reflected in #21775</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bd8d2c7191161fca257b763588b63d00156f2b93"><code>bd8d2c7</code></a></td><td><code>Remove TODO comment; reflected in #21524</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ce48cf8855493237f87489d6c59969ad6ef4b024"><code>ce48cf8</code></a></td><td><code>src/bin/sage-env: Improve comments</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c3477688c36c27cd240ca074d683f93fa1f6cb22"><code>c347768</code></a></td><td><code>src/bin/sage-env: Remove broken "dirname $0" code</code></td></tr></table>




---

archive/issue_comments_314861.json:
```json
{
    "body": "Changed commit from **[`d82cfbc`](https://github.com/sagemath/sagetrac-mirror/commit/d82cfbc4bd54dfccda1fa3564bc8d39bd4fba216)** to **[`c347768`](https://github.com/sagemath/sagetrac-mirror/commit/c3477688c36c27cd240ca074d683f93fa1f6cb22)**",
    "created_at": "2016-10-27T15:58:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314861",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d82cfbc`](https://github.com/sagemath/sagetrac-mirror/commit/d82cfbc4bd54dfccda1fa3564bc8d39bd4fba216)** to **[`c347768`](https://github.com/sagemath/sagetrac-mirror/commit/c3477688c36c27cd240ca074d683f93fa1f6cb22)**



---

archive/issue_comments_314862.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nOK, done; please take a look",
    "created_at": "2016-10-27T16:00:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314862",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:39" align="right">comment:39</div>

OK, done; please take a look



---

archive/issue_events_299034.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-27T16:00:12Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299034"
}
```



---

archive/issue_events_299035.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-27T16:00:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299035"
}
```



---

archive/issue_comments_314863.json:
```json
{
    "body": "<div id=\"comment:40\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4275121e18f8e7e46dd016bd0ccd96fcbc94ce54\"><code>4275121</code></a></td><td><code>Installation manual: Document configure --prefix</code></td></tr></table>\n",
    "created_at": "2016-10-30T06:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314863",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:40"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4275121e18f8e7e46dd016bd0ccd96fcbc94ce54"><code>4275121</code></a></td><td><code>Installation manual: Document configure --prefix</code></td></tr></table>




---

archive/issue_comments_314864.json:
```json
{
    "body": "Changed commit from **[`c347768`](https://github.com/sagemath/sagetrac-mirror/commit/c3477688c36c27cd240ca074d683f93fa1f6cb22)** to **[`4275121`](https://github.com/sagemath/sagetrac-mirror/commit/4275121e18f8e7e46dd016bd0ccd96fcbc94ce54)**",
    "created_at": "2016-10-30T06:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314864",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`c347768`](https://github.com/sagemath/sagetrac-mirror/commit/c3477688c36c27cd240ca074d683f93fa1f6cb22)** to **[`4275121`](https://github.com/sagemath/sagetrac-mirror/commit/4275121e18f8e7e46dd016bd0ccd96fcbc94ce54)**



---

archive/issue_comments_314865.json:
```json
{
    "body": "<div id=\"comment:41\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ea994cc736493d3ab78dc5ed659cf49af2a00a5c\"><code>ea994cc</code></a></td><td><code>Merge tag '7.5.beta1' into t/21479/__configure___prefix_sage_local</code></td></tr></table>\n",
    "created_at": "2016-11-01T21:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314865",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:41"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ea994cc736493d3ab78dc5ed659cf49af2a00a5c"><code>ea994cc</code></a></td><td><code>Merge tag '7.5.beta1' into t/21479/__configure___prefix_sage_local</code></td></tr></table>




---

archive/issue_comments_314866.json:
```json
{
    "body": "Changed commit from **[`4275121`](https://github.com/sagemath/sagetrac-mirror/commit/4275121e18f8e7e46dd016bd0ccd96fcbc94ce54)** to **[`ea994cc`](https://github.com/sagemath/sagetrac-mirror/commit/ea994cc736493d3ab78dc5ed659cf49af2a00a5c)**",
    "created_at": "2016-11-01T21:21:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314866",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4275121`](https://github.com/sagemath/sagetrac-mirror/commit/4275121e18f8e7e46dd016bd0ccd96fcbc94ce54)** to **[`ea994cc`](https://github.com/sagemath/sagetrac-mirror/commit/ea994cc736493d3ab78dc5ed659cf49af2a00a5c)**



---

archive/issue_comments_314867.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nping?",
    "created_at": "2016-11-03T03:47:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314867",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:42" align="right">comment:42</div>

ping?



---

archive/issue_events_299036.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T13:28:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299036"
}
```



---

archive/issue_events_299037.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-04T13:28:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299037"
}
```



---

archive/issue_comments_314868.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nRunning `./configure` without arguments:\n\n```\n[...]\nconfig.status: creating build/make/Makefile-auto\nconfig.status: creating src/Makefile\nconfig.status: creating src/bin/sage-env-config\nconfig.status: executing depfiles commands\nconfig.status: executing mkdirs commands\nconfig.status: creating directory /usr/local/src/sage-config/logs/pkgs\nconfig.status: creating directory NONE\nconfig.status: creating directory NONE/bin\nconfig.status: creating directory NONE/etc\nconfig.status: creating directory NONE/include\nconfig.status: creating directory NONE/lib\nconfig.status: creating directory NONE/share\nconfig.status: creating directory NONE/var/lib/sage/installed\nconfig.status: creating symbolic link lib64 -> lib\n```",
    "created_at": "2016-11-04T13:28:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314868",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">comment:43</div>

Running `./configure` without arguments:

```
[...]
config.status: creating build/make/Makefile-auto
config.status: creating src/Makefile
config.status: creating src/bin/sage-env-config
config.status: executing depfiles commands
config.status: executing mkdirs commands
config.status: creating directory /usr/local/src/sage-config/logs/pkgs
config.status: creating directory NONE
config.status: creating directory NONE/bin
config.status: creating directory NONE/etc
config.status: creating directory NONE/include
config.status: creating directory NONE/lib
config.status: creating directory NONE/share
config.status: creating directory NONE/var/lib/sage/installed
config.status: creating symbolic link lib64 -> lib
```



---

archive/issue_comments_314869.json:
```json
{
    "body": "Changed dependencies from **#21501** to none",
    "created_at": "2016-11-04T13:28:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314869",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#21501** to none



---

archive/issue_comments_314870.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-11-04T13:28:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314870",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_314871.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nThis is just because you write `SAGE_LOCAL` instead of `\"$SAGE_LOCAL\"`.\n\nWhen you fix this, I suggest to squash the commits to one commit and rebase to `7.5.beta1`.",
    "created_at": "2016-11-04T13:36:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314871",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:44" align="right">comment:44</div>

This is just because you write `SAGE_LOCAL` instead of `"$SAGE_LOCAL"`.

When you fix this, I suggest to squash the commits to one commit and rebase to `7.5.beta1`.



---

archive/issue_comments_314872.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nThe file `sage-env-config` needs to be ignored by `.gitignore` and deleted when running `make distclean`.",
    "created_at": "2016-11-04T13:37:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314872",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:45" align="right">comment:45</div>

The file `sage-env-config` needs to be ignored by `.gitignore` and deleted when running `make distclean`.



---

archive/issue_comments_314873.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nThis line in `sage` needs quoting:\n\n```\n. $SAGE_ROOT/src/bin/sage-env-config\n```\nAnd since you're running `bash` anyway, you might as well use `source` instead of `.` which is more visible.",
    "created_at": "2016-11-04T13:54:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314873",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:46" align="right">comment:46</div>

This line in `sage` needs quoting:

```
. $SAGE_ROOT/src/bin/sage-env-config
```
And since you're running `bash` anyway, you might as well use `source` instead of `.` which is more visible.



---

archive/issue_comments_314874.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nAnd do you really need this:\n\n```\nif [ $? -ne 0 ]; then\n    echo >&2 \"Error: $SAGE_ROOT/src/bin/sage-env-config could not be read\"\nfi\n```\nThe shell will already write an error message, no need for an additional message.",
    "created_at": "2016-11-04T13:54:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314874",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:47" align="right">comment:47</div>

And do you really need this:

```
if [ $? -ne 0 ]; then
    echo >&2 "Error: $SAGE_ROOT/src/bin/sage-env-config could not be read"
fi
```
The shell will already write an error message, no need for an additional message.



---

archive/issue_comments_314875.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nI also think that determining `$SAGE_LOCAL` should be done *after*\n\n```\n# If this is a freshly-unpacked binary tarball then run the installer\n# Note: relocate-once.py deletes itself upon successful completion\nif [ -x \"$SAGE_ROOT/relocate-once.py\" ]; then\n    \"$SAGE_ROOT/relocate-once.py\"\nfi\n```",
    "created_at": "2016-11-04T13:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314875",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:48" align="right">comment:48</div>

I also think that determining `$SAGE_LOCAL` should be done *after*

```
# If this is a freshly-unpacked binary tarball then run the installer
# Note: relocate-once.py deletes itself upon successful completion
if [ -x "$SAGE_ROOT/relocate-once.py" ]; then
    "$SAGE_ROOT/relocate-once.py"
fi
```



---

archive/issue_comments_314876.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nCan you explain under which circumstances it is needed to read `sage-env-config` from `sage-env`? It seems to me that `sage-env-config` would already be read, either by the top-level `sage` script or by `build/make/install`.",
    "created_at": "2016-11-04T13:59:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314876",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

Can you explain under which circumstances it is needed to read `sage-env-config` from `sage-env`? It seems to me that `sage-env-config` would already be read, either by the top-level `sage` script or by `build/make/install`.



---

archive/issue_comments_314877.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nIt is good style to start all error messages with `Error:` and write them to stderr. `build/make/install` doesn't do that.",
    "created_at": "2016-11-04T14:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314877",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:50" align="right">comment:50</div>

It is good style to start all error messages with `Error:` and write them to stderr. `build/make/install` doesn't do that.



---

archive/issue_comments_314878.json:
```json
{
    "body": "<div id=\"comment:51\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4f832c2b1d814a3fd2dc8f2ccd2ab77bfde74451\"><code>4f832c2</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr></table>\n",
    "created_at": "2016-11-06T22:21:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314878",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:51"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4f832c2b1d814a3fd2dc8f2ccd2ab77bfde74451"><code>4f832c2</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr></table>




---

archive/issue_comments_314879.json:
```json
{
    "body": "Changed commit from **[`ea994cc`](https://github.com/sagemath/sagetrac-mirror/commit/ea994cc736493d3ab78dc5ed659cf49af2a00a5c)** to **[`4f832c2`](https://github.com/sagemath/sagetrac-mirror/commit/4f832c2b1d814a3fd2dc8f2ccd2ab77bfde74451)**",
    "created_at": "2016-11-06T22:21:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314879",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`ea994cc`](https://github.com/sagemath/sagetrac-mirror/commit/ea994cc736493d3ab78dc5ed659cf49af2a00a5c)** to **[`4f832c2`](https://github.com/sagemath/sagetrac-mirror/commit/4f832c2b1d814a3fd2dc8f2ccd2ab77bfde74451)**



---

archive/issue_comments_314880.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nSquashed and rebased on 7.5.beta1",
    "created_at": "2016-11-06T22:22:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314880",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:52" align="right">comment:52</div>

Squashed and rebased on 7.5.beta1



---

archive/issue_comments_314881.json:
```json
{
    "body": "Changed commit from **[`4f832c2`](https://github.com/sagemath/sagetrac-mirror/commit/4f832c2b1d814a3fd2dc8f2ccd2ab77bfde74451)** to **[`5fcda83`](https://github.com/sagemath/sagetrac-mirror/commit/5fcda8326cf504dfd1b32300bcc3493e3f398e86)**",
    "created_at": "2016-11-06T22:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314881",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4f832c2`](https://github.com/sagemath/sagetrac-mirror/commit/4f832c2b1d814a3fd2dc8f2ccd2ab77bfde74451)** to **[`5fcda83`](https://github.com/sagemath/sagetrac-mirror/commit/5fcda8326cf504dfd1b32300bcc3493e3f398e86)**



---

archive/issue_comments_314882.json:
```json
{
    "body": "<div id=\"comment:53\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6308c3bc2b53dec22706babb8fb7afdbba454643\"><code>6308c3b</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff48d5ad507ee6c11cde5c70efd0f1f0d8127a90\"><code>ff48d5a</code></a></td><td><code>Fixup configure without --prefix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/67baa7ab3ef290cca6254f6b8e6375ab280f4bde\"><code>67baa7a</code></a></td><td><code>Source sage-env-config after calling relocate-once.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5fcda8326cf504dfd1b32300bcc3493e3f398e86\"><code>5fcda83</code></a></td><td><code>top-level sage script: Remove redundant sage-env-config error message</code></td></tr></table>\n",
    "created_at": "2016-11-06T22:42:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314882",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:53"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6308c3bc2b53dec22706babb8fb7afdbba454643"><code>6308c3b</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff48d5ad507ee6c11cde5c70efd0f1f0d8127a90"><code>ff48d5a</code></a></td><td><code>Fixup configure without --prefix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/67baa7ab3ef290cca6254f6b8e6375ab280f4bde"><code>67baa7a</code></a></td><td><code>Source sage-env-config after calling relocate-once.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5fcda8326cf504dfd1b32300bcc3493e3f398e86"><code>5fcda83</code></a></td><td><code>top-level sage script: Remove redundant sage-env-config error message</code></td></tr></table>




---

archive/issue_comments_314883.json:
```json
{
    "body": "<div id=\"comment:54\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d0aa34d219bb163b86972110ea7b1a1775374eb\"><code>1d0aa34</code></a></td><td><code>src/bin/sage-env-config: Prefix error message with 'Error:'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a0f90af6a75498502d7a8a3ea9076ab7c4fd1fac\"><code>a0f90af</code></a></td><td><code>make misc-clenan: Delete src/bin/sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e52554739a9a321de2180d5bf39b45f205fd6efc\"><code>e525547</code></a></td><td><code>Add sage-env-config to .gitignore</code></td></tr></table>\n",
    "created_at": "2016-11-06T22:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314883",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:54"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d0aa34d219bb163b86972110ea7b1a1775374eb"><code>1d0aa34</code></a></td><td><code>src/bin/sage-env-config: Prefix error message with 'Error:'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a0f90af6a75498502d7a8a3ea9076ab7c4fd1fac"><code>a0f90af</code></a></td><td><code>make misc-clenan: Delete src/bin/sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e52554739a9a321de2180d5bf39b45f205fd6efc"><code>e525547</code></a></td><td><code>Add sage-env-config to .gitignore</code></td></tr></table>




---

archive/issue_comments_314884.json:
```json
{
    "body": "Changed commit from **[`5fcda83`](https://github.com/sagemath/sagetrac-mirror/commit/5fcda8326cf504dfd1b32300bcc3493e3f398e86)** to **[`e525547`](https://github.com/sagemath/sagetrac-mirror/commit/e52554739a9a321de2180d5bf39b45f205fd6efc)**",
    "created_at": "2016-11-06T22:51:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314884",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`5fcda83`](https://github.com/sagemath/sagetrac-mirror/commit/5fcda8326cf504dfd1b32300bcc3493e3f398e86)** to **[`e525547`](https://github.com/sagemath/sagetrac-mirror/commit/e52554739a9a321de2180d5bf39b45f205fd6efc)**



---

archive/issue_comments_314885.json:
```json
{
    "body": "<div id=\"comment:55\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/600639a680efa970e2fc4c0047d51504b5053e77\"><code>600639a</code></a></td><td><code>sage-env: Quoting fix</code></td></tr></table>\n",
    "created_at": "2016-11-06T22:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314885",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:55"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/600639a680efa970e2fc4c0047d51504b5053e77"><code>600639a</code></a></td><td><code>sage-env: Quoting fix</code></td></tr></table>




---

archive/issue_comments_314886.json:
```json
{
    "body": "Changed commit from **[`e525547`](https://github.com/sagemath/sagetrac-mirror/commit/e52554739a9a321de2180d5bf39b45f205fd6efc)** to **[`600639a`](https://github.com/sagemath/sagetrac-mirror/commit/600639a680efa970e2fc4c0047d51504b5053e77)**",
    "created_at": "2016-11-06T22:52:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314886",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`e525547`](https://github.com/sagemath/sagetrac-mirror/commit/e52554739a9a321de2180d5bf39b45f205fd6efc)** to **[`600639a`](https://github.com/sagemath/sagetrac-mirror/commit/600639a680efa970e2fc4c0047d51504b5053e77)**



---

archive/issue_comments_314887.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@jdemeyer](#comment%3A49):\n> Can you explain under which circumstances it is needed to read `sage-env-config` from `sage-env`? It seems to me that `sage-env-config` would already be read, either by the top-level `sage` script or by `build/make/install`.\n\n`$SAGE_LOCAL/bin/sage` becomes directly executable; one does not have to go through that top-level script.",
    "created_at": "2016-11-06T23:00:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314887",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@jdemeyer](#comment%3A49):
> Can you explain under which circumstances it is needed to read `sage-env-config` from `sage-env`? It seems to me that `sage-env-config` would already be read, either by the top-level `sage` script or by `build/make/install`.

`$SAGE_LOCAL/bin/sage` becomes directly executable; one does not have to go through that top-level script.



---

archive/issue_comments_314888.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nReplying to [@jdemeyer](#comment%3A46):\n> since you're running `bash` anyway, you might as well use `source` instead of `.` which is more visible.\n\nI'm not sure, I like `.` more than `source`.",
    "created_at": "2016-11-06T23:01:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314888",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:57" align="right">comment:57</div>

Replying to [@jdemeyer](#comment%3A46):
> since you're running `bash` anyway, you might as well use `source` instead of `.` which is more visible.

I'm not sure, I like `.` more than `source`.



---

archive/issue_events_299038.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-06T23:02:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299038"
}
```



---

archive/issue_events_299039.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-06T23:02:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299039"
}
```



---

archive/issue_comments_314889.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nReplying to [@mkoeppe](#comment%3A56):\n> `$SAGE_LOCAL/bin/sage` becomes directly executable; one does not have to go through that top-level script.\n\nThen let me turn the question around: why do you need to change `$SAGE_ROOT/sage`?",
    "created_at": "2016-11-07T11:15:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314889",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:59" align="right">comment:59</div>

Replying to [@mkoeppe](#comment%3A56):
> `$SAGE_LOCAL/bin/sage` becomes directly executable; one does not have to go through that top-level script.

Then let me turn the question around: why do you need to change `$SAGE_ROOT/sage`?



---

archive/issue_comments_314890.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nI'm still not entirely convinced that `BASH_SOURCE[0]` really does what we want. Why not use `$SAGE_ROOT/src/bin/sage-env-config`?\n\nOr maybe we should just source both `sage-env-config` and `sage-env` from `src/bin/sage`?",
    "created_at": "2016-11-07T11:20:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314890",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:60" align="right">comment:60</div>

I'm still not entirely convinced that `BASH_SOURCE[0]` really does what we want. Why not use `$SAGE_ROOT/src/bin/sage-env-config`?

Or maybe we should just source both `sage-env-config` and `sage-env` from `src/bin/sage`?



---

archive/issue_events_299040.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T11:20:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299040"
}
```



---

archive/issue_events_299041.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-07T11:20:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299041"
}
```



---

archive/issue_comments_314891.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@jdemeyer](#comment%3A60):\n> Why not use `$SAGE_ROOT/src/bin/sage-env-config`?\n\nThings installed in SAGE_LOCAL definitely should not depend on the source directory.\n\n> Or maybe we should just source both `sage-env-config` and `sage-env` from `src/bin/sage`?\n\nThat would be possible. There might be a few more places though that need to source the extra file.",
    "created_at": "2016-11-08T12:47:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314891",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@jdemeyer](#comment%3A60):
> Why not use `$SAGE_ROOT/src/bin/sage-env-config`?

Things installed in SAGE_LOCAL definitely should not depend on the source directory.

> Or maybe we should just source both `sage-env-config` and `sage-env` from `src/bin/sage`?

That would be possible. There might be a few more places though that need to source the extra file.



---

archive/issue_comments_314892.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nReplying to [@jdemeyer](#comment%3A59):\n> Replying to [@mkoeppe](#comment%3A56):\n> > `$SAGE_LOCAL/bin/sage` becomes directly executable; one does not have to go through that top-level script.\n\n> \n> Then let me turn the question around: why do you need to change `$SAGE_ROOT/sage`?\n\n`$SAGE_ROOT/sage` sources `$SAGE_ROOT/src/bin/sage-env-config` so that it works when nothing has been installed so far.",
    "created_at": "2016-11-08T12:53:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314892",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:63" align="right">comment:63</div>

Replying to [@jdemeyer](#comment%3A59):
> Replying to [@mkoeppe](#comment%3A56):
> > `$SAGE_LOCAL/bin/sage` becomes directly executable; one does not have to go through that top-level script.

> 
> Then let me turn the question around: why do you need to change `$SAGE_ROOT/sage`?

`$SAGE_ROOT/sage` sources `$SAGE_ROOT/src/bin/sage-env-config` so that it works when nothing has been installed so far.



---

archive/issue_comments_314893.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\nReplying to [@mkoeppe](#comment%3A63):\n> `$SAGE_ROOT/sage` sources `$SAGE_ROOT/src/bin/sage-env-config` so that it works when nothing has been installed so far.\n\nSorry, I don't follow. What is the \"it\" in the sentence above? In other words, what would not work?",
    "created_at": "2016-11-08T13:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314893",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:64" align="right">comment:64</div>

Replying to [@mkoeppe](#comment%3A63):
> `$SAGE_ROOT/sage` sources `$SAGE_ROOT/src/bin/sage-env-config` so that it works when nothing has been installed so far.

Sorry, I don't follow. What is the "it" in the sentence above? In other words, what would not work?



---

archive/issue_comments_314894.json:
```json
{
    "body": "Changed commit from **[`600639a`](https://github.com/sagemath/sagetrac-mirror/commit/600639a680efa970e2fc4c0047d51504b5053e77)** to **[`a3467bf`](https://github.com/sagemath/sagetrac-mirror/commit/a3467bf751cbfbdff0d85c2dfa895f78d32310b4)**",
    "created_at": "2016-11-20T03:17:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314894",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`600639a`](https://github.com/sagemath/sagetrac-mirror/commit/600639a680efa970e2fc4c0047d51504b5053e77)** to **[`a3467bf`](https://github.com/sagemath/sagetrac-mirror/commit/a3467bf751cbfbdff0d85c2dfa895f78d32310b4)**



---

archive/issue_comments_314895.json:
```json
{
    "body": "<div id=\"comment:65\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f6c4513d691e8d723cdcd87389c235eb5f6b2b30\"><code>f6c4513</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d44f0b0818dd6181c1dbde9675611b7b1a76a1e\"><code>7d44f0b</code></a></td><td><code>Fixup configure without --prefix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/387ab947c204b00a45192d46efa32585ed842968\"><code>387ab94</code></a></td><td><code>Source sage-env-config after calling relocate-once.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc66139c0692228c60d7a4726ef82a0f83c404aa\"><code>fc66139</code></a></td><td><code>top-level sage script: Remove redundant sage-env-config error message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe19d3f13b020b712e09396df083154fb6737329\"><code>fe19d3f</code></a></td><td><code>src/bin/sage-env-config: Prefix error message with 'Error:'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/269ad80175d2cdf8df471cb4db004029e53ea9d5\"><code>269ad80</code></a></td><td><code>make misc-clean: Delete src/bin/sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/727123a019e566fb4748c6abc03d9236eacaa16a\"><code>727123a</code></a></td><td><code>Add sage-env-config to .gitignore</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/be4c3901b9c595b76822bc7c5adfb62acabdb597\"><code>be4c390</code></a></td><td><code>sage-env: Quoting fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a3467bf751cbfbdff0d85c2dfa895f78d32310b4\"><code>a3467bf</code></a></td><td><code>top-level sage script: No need to source sage-env-config</code></td></tr></table>\n",
    "created_at": "2016-11-20T03:17:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314895",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:65"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f6c4513d691e8d723cdcd87389c235eb5f6b2b30"><code>f6c4513</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d44f0b0818dd6181c1dbde9675611b7b1a76a1e"><code>7d44f0b</code></a></td><td><code>Fixup configure without --prefix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/387ab947c204b00a45192d46efa32585ed842968"><code>387ab94</code></a></td><td><code>Source sage-env-config after calling relocate-once.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc66139c0692228c60d7a4726ef82a0f83c404aa"><code>fc66139</code></a></td><td><code>top-level sage script: Remove redundant sage-env-config error message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe19d3f13b020b712e09396df083154fb6737329"><code>fe19d3f</code></a></td><td><code>src/bin/sage-env-config: Prefix error message with 'Error:'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/269ad80175d2cdf8df471cb4db004029e53ea9d5"><code>269ad80</code></a></td><td><code>make misc-clean: Delete src/bin/sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/727123a019e566fb4748c6abc03d9236eacaa16a"><code>727123a</code></a></td><td><code>Add sage-env-config to .gitignore</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/be4c3901b9c595b76822bc7c5adfb62acabdb597"><code>be4c390</code></a></td><td><code>sage-env: Quoting fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a3467bf751cbfbdff0d85c2dfa895f78d32310b4"><code>a3467bf</code></a></td><td><code>top-level sage script: No need to source sage-env-config</code></td></tr></table>




---

archive/issue_comments_314896.json:
```json
{
    "body": "<div id=\"comment:66\" align=\"right\">comment:66</div>\n\nReplying to [@jdemeyer](#comment%3A64):\n> Replying to [@mkoeppe](#comment%3A63):\n> > `$SAGE_ROOT/sage` sources `$SAGE_ROOT/src/bin/sage-env-config` so that it works when nothing has been installed so far.\n\n> \n> Sorry, I don't follow. What is the \"it\" in the sentence above? In other words, what would not work?\n\nI retract my comment.\n\nI have removed this code from `$SAGE_ROOT/sage`.\n(Also rebased on latest beta.)",
    "created_at": "2016-11-20T08:32:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314896",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:66" align="right">comment:66</div>

Replying to [@jdemeyer](#comment%3A64):
> Replying to [@mkoeppe](#comment%3A63):
> > `$SAGE_ROOT/sage` sources `$SAGE_ROOT/src/bin/sage-env-config` so that it works when nothing has been installed so far.

> 
> Sorry, I don't follow. What is the "it" in the sentence above? In other words, what would not work?

I retract my comment.

I have removed this code from `$SAGE_ROOT/sage`.
(Also rebased on latest beta.)



---

archive/issue_comments_314897.json:
```json
{
    "body": "<div id=\"comment:67\" align=\"right\">comment:67</div>\n\nReplying to [@mkoeppe](#comment%3A62):\n> > Or maybe we should just source both `sage-env-config` and `sage-env` from `src/bin/sage`?\n\n> \n> That would be possible. There might be a few more places though that need to source the extra file.\n\nI think I wouldn't like to change this on this ticket. There are indeed a few places that source sage-env: `build/bin/sage-spkg`, `build/make/deps`, `src/bin/sage-update-src`. Probably not so nice if we have to change all of them.",
    "created_at": "2016-11-23T07:58:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314897",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:67" align="right">comment:67</div>

Replying to [@mkoeppe](#comment%3A62):
> > Or maybe we should just source both `sage-env-config` and `sage-env` from `src/bin/sage`?

> 
> That would be possible. There might be a few more places though that need to source the extra file.

I think I wouldn't like to change this on this ticket. There are indeed a few places that source sage-env: `build/bin/sage-spkg`, `build/make/deps`, `src/bin/sage-update-src`. Probably not so nice if we have to change all of them.



---

archive/issue_comments_314898.json:
```json
{
    "body": "<div id=\"comment:68\" align=\"right\">comment:68</div>\n\nReplying to [@mkoeppe](#comment%3A56):\n> `$SAGE_LOCAL/bin/sage` becomes directly executable; one does not have to go through that top-level script.\n\nI realized that this is not entirely true. `sage-env` contains some code for discovering SAGE_ROOT when it is not set, but that code fails if $SAGE_LOCAL is not a direct subdirectory of $SAGE_ROOT. \nI suppose I could add the definition of SAGE_ROOT to sage-env-config. \nBut that could go on a follow-up ticket as well.",
    "created_at": "2016-11-23T08:01:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314898",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:68" align="right">comment:68</div>

Replying to [@mkoeppe](#comment%3A56):
> `$SAGE_LOCAL/bin/sage` becomes directly executable; one does not have to go through that top-level script.

I realized that this is not entirely true. `sage-env` contains some code for discovering SAGE_ROOT when it is not set, but that code fails if $SAGE_LOCAL is not a direct subdirectory of $SAGE_ROOT. 
I suppose I could add the definition of SAGE_ROOT to sage-env-config. 
But that could go on a follow-up ticket as well.



---

archive/issue_events_299042.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-23T08:01:45Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299042"
}
```



---

archive/issue_events_299043.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-11-23T08:01:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299043"
}
```



---

archive/issue_comments_314899.json:
```json
{
    "body": "<div id=\"comment:70\" align=\"right\">comment:70</div>\n\n*ping*",
    "created_at": "2016-12-29T17:30:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314899",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:70" align="right">comment:70</div>

*ping*



---

archive/issue_comments_314900.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Erik Bray**",
    "created_at": "2016-12-29T20:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314900",
    "user": "https://github.com/embray"
}
```

Changed reviewer from **Jeroen Demeyer** to **Jeroen Demeyer, Erik Bray**



---

archive/issue_comments_314901.json:
```json
{
    "body": "<div id=\"comment:71\" align=\"right\">comment:71</div>\n\nLooks good to me at least, but I don't have a complete view of the implications.  I also still think #21495 has merit, but that shouldn't hold this up, as it's a step in the right direction I think regardless of what anyone thinks about #21495 or if anything is done about it.",
    "created_at": "2016-12-29T20:39:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314901",
    "user": "https://github.com/embray"
}
```

<div id="comment:71" align="right">comment:71</div>

Looks good to me at least, but I don't have a complete view of the implications.  I also still think #21495 has merit, but that shouldn't hold this up, as it's a step in the right direction I think regardless of what anyone thinks about #21495 or if anything is done about it.



---

archive/issue_events_299044.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-29T20:39:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299044"
}
```



---

archive/issue_events_299045.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2016-12-29T20:39:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299045"
}
```



---

archive/issue_events_299046.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-01-09T19:43:41Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299046"
}
```



---

archive/issue_events_299047.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-01-09T19:43:41Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299047"
}
```



---

archive/issue_comments_314902.json:
```json
{
    "body": "<div id=\"comment:73\" align=\"right\">comment:73</div>\n\nDoesn't work if you dont have autotools\n\n```\n19make -j2 build/make/Makefile\n20make[1]: Entering directory `/home/buildbot/slave/sage_git/build'\n21make[1]: warning: -jN forced in submake: disabling jobserver mode.\n22./bootstrap -d\n23make[2]: Entering directory `/home/buildbot/slave/sage_git/build'\n24rm -rf config configure build/make/Makefile-auto.in\n25make[2]: Leaving directory `/home/buildbot/slave/sage_git/build'\n26src/bin/sage-env: line 206: /home/buildbot/slave/sage_git/build/src/bin/sage-env-config: No such file or directory\n27sage-env: Error: /home/buildbot/slave/sage_git/build/src/bin/sage-env-config could not be read.\n28./bootstrap: line 31: aclocal: command not found\n29Bootstrap failed, downloading required files instead.\n30./bootstrap: line 61: sage-download-file: command not found\n31Error: downloading configure-200.tar.gz failed\n32make[1]: *** [configure] Error 1\n33make[1]: Target `build/make/Makefile' not remade because of errors.\n34make[1]: Leaving directory `/home/buildbot/slave/sage_git/build'\n35make: *** [start] Error 2\n36program finished with exit code 2\n```",
    "created_at": "2017-01-13T07:55:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314902",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:73" align="right">comment:73</div>

Doesn't work if you dont have autotools

```
19make -j2 build/make/Makefile
20make[1]: Entering directory `/home/buildbot/slave/sage_git/build'
21make[1]: warning: -jN forced in submake: disabling jobserver mode.
22./bootstrap -d
23make[2]: Entering directory `/home/buildbot/slave/sage_git/build'
24rm -rf config configure build/make/Makefile-auto.in
25make[2]: Leaving directory `/home/buildbot/slave/sage_git/build'
26src/bin/sage-env: line 206: /home/buildbot/slave/sage_git/build/src/bin/sage-env-config: No such file or directory
27sage-env: Error: /home/buildbot/slave/sage_git/build/src/bin/sage-env-config could not be read.
28./bootstrap: line 31: aclocal: command not found
29Bootstrap failed, downloading required files instead.
30./bootstrap: line 61: sage-download-file: command not found
31Error: downloading configure-200.tar.gz failed
32make[1]: *** [configure] Error 1
33make[1]: Target `build/make/Makefile' not remade because of errors.
34make[1]: Leaving directory `/home/buildbot/slave/sage_git/build'
35make: *** [start] Error 2
36program finished with exit code 2
```



---

archive/issue_events_299048.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-13T07:55:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299048"
}
```



---

archive/issue_events_299049.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-13T07:55:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299049"
}
```



---

archive/issue_comments_314903.json:
```json
{
    "body": "<div id=\"comment:75\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/928f67dbec58d1896bc321a063a0c3f9184235f0\"><code>928f67d</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/66a806646cc99f1fcfc71dc116712a4af57a287e\"><code>66a8066</code></a></td><td><code>Fixup configure without --prefix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b5ecc81e441d3bbf45c04629a426d2aba4dd4e8d\"><code>b5ecc81</code></a></td><td><code>Source sage-env-config after calling relocate-once.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c1c36ff8984261d201ef9de43c6ce07435c5b4b6\"><code>c1c36ff</code></a></td><td><code>top-level sage script: Remove redundant sage-env-config error message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ae6263b77c177b1872fc58f1b4304b309507220e\"><code>ae6263b</code></a></td><td><code>src/bin/sage-env-config: Prefix error message with 'Error:'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/27189be60ccf513865877229e5cd00002dae3da8\"><code>27189be</code></a></td><td><code>make misc-clean: Delete src/bin/sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eb922b89d708e3fa6e4d6e0adf975511ee18fa63\"><code>eb922b8</code></a></td><td><code>Add sage-env-config to .gitignore</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4cdaa43012ed3f8819de8c655f325f82faef7dba\"><code>4cdaa43</code></a></td><td><code>sage-env: Quoting fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/71f88cc7ee2fab8288f28884c7532c0c223acc96\"><code>71f88cc</code></a></td><td><code>top-level sage script: No need to source sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/52826b18b1474c5f92c9c42f4cc75c6a301c1e87\"><code>52826b1</code></a></td><td><code>bootstrap: Don't use sage-env, set PATH directly</code></td></tr></table>\n",
    "created_at": "2017-01-21T23:04:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314903",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:75"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/928f67dbec58d1896bc321a063a0c3f9184235f0"><code>928f67d</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/66a806646cc99f1fcfc71dc116712a4af57a287e"><code>66a8066</code></a></td><td><code>Fixup configure without --prefix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b5ecc81e441d3bbf45c04629a426d2aba4dd4e8d"><code>b5ecc81</code></a></td><td><code>Source sage-env-config after calling relocate-once.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c1c36ff8984261d201ef9de43c6ce07435c5b4b6"><code>c1c36ff</code></a></td><td><code>top-level sage script: Remove redundant sage-env-config error message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ae6263b77c177b1872fc58f1b4304b309507220e"><code>ae6263b</code></a></td><td><code>src/bin/sage-env-config: Prefix error message with 'Error:'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/27189be60ccf513865877229e5cd00002dae3da8"><code>27189be</code></a></td><td><code>make misc-clean: Delete src/bin/sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eb922b89d708e3fa6e4d6e0adf975511ee18fa63"><code>eb922b8</code></a></td><td><code>Add sage-env-config to .gitignore</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4cdaa43012ed3f8819de8c655f325f82faef7dba"><code>4cdaa43</code></a></td><td><code>sage-env: Quoting fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/71f88cc7ee2fab8288f28884c7532c0c223acc96"><code>71f88cc</code></a></td><td><code>top-level sage script: No need to source sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/52826b18b1474c5f92c9c42f4cc75c6a301c1e87"><code>52826b1</code></a></td><td><code>bootstrap: Don't use sage-env, set PATH directly</code></td></tr></table>




---

archive/issue_comments_314904.json:
```json
{
    "body": "Changed commit from **[`a3467bf`](https://github.com/sagemath/sagetrac-mirror/commit/a3467bf751cbfbdff0d85c2dfa895f78d32310b4)** to **[`52826b1`](https://github.com/sagemath/sagetrac-mirror/commit/52826b18b1474c5f92c9c42f4cc75c6a301c1e87)**",
    "created_at": "2017-01-21T23:04:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314904",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`a3467bf`](https://github.com/sagemath/sagetrac-mirror/commit/a3467bf751cbfbdff0d85c2dfa895f78d32310b4)** to **[`52826b1`](https://github.com/sagemath/sagetrac-mirror/commit/52826b18b1474c5f92c9c42f4cc75c6a301c1e87)**



---

archive/issue_comments_314905.json:
```json
{
    "body": "<div id=\"comment:76\" align=\"right\">comment:76</div>\n\nReplying to [@vbraun](#comment%3A73):\n> Doesn't work if you dont have autotools\n\nThanks for catching this.\nFixed. Needs review.",
    "created_at": "2017-01-21T23:07:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314905",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:76" align="right">comment:76</div>

Replying to [@vbraun](#comment%3A73):
> Doesn't work if you dont have autotools

Thanks for catching this.
Fixed. Needs review.



---

archive/issue_events_299050.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-01-21T23:07:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299050"
}
```



---

archive/issue_events_299051.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-01-21T23:07:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299051"
}
```



---

archive/issue_comments_314906.json:
```json
{
    "body": "<div id=\"comment:77\" align=\"right\">comment:77</div>\n\nErik, if you could take another look...",
    "created_at": "2017-01-27T02:34:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314906",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:77" align="right">comment:77</div>

Erik, if you could take another look...



---

archive/issue_comments_314907.json:
```json
{
    "body": "<div id=\"comment:78\" align=\"right\">comment:78</div>\n\nI'm not really clear about what changed. I don't understand what the issue with autotools was or how this was fixed.  I see that you did do something to address that but I don't understand the original issue in the first place--would be better if Volker commented since  he pointed it out.",
    "created_at": "2017-01-27T14:34:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314907",
    "user": "https://github.com/embray"
}
```

<div id="comment:78" align="right">comment:78</div>

I'm not really clear about what changed. I don't understand what the issue with autotools was or how this was fixed.  I see that you did do something to address that but I don't understand the original issue in the first place--would be better if Volker commented since  he pointed it out.



---

archive/issue_comments_314908.json:
```json
{
    "body": "<div id=\"comment:79\" align=\"right\">comment:79</div>\n\nJeroen, could you take another look?",
    "created_at": "2017-02-04T16:21:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314908",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:79" align="right">comment:79</div>

Jeroen, could you take another look?



---

archive/issue_comments_314909.json:
```json
{
    "body": "<div id=\"comment:80\" align=\"right\">comment:80</div>\n\nThis ticket needs review.",
    "created_at": "2017-03-01T11:44:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314909",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:80" align="right">comment:80</div>

This ticket needs review.



---

archive/issue_comments_314910.json:
```json
{
    "body": "<div id=\"comment:81\" align=\"right\">comment:81</div>\n\n*pong*",
    "created_at": "2017-03-09T08:42:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314910",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:81" align="right">comment:81</div>

*pong*



---

archive/issue_comments_314911.json:
```json
{
    "body": "<div id=\"comment:82\" align=\"right\">comment:82</div>\n\nWhy does this require changes to `bootstrap` anyway?",
    "created_at": "2017-03-09T14:33:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314911",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:82" align="right">comment:82</div>

Why does this require changes to `bootstrap` anyway?



---

archive/issue_comments_314912.json:
```json
{
    "body": "<div id=\"comment:83\" align=\"right\">comment:83</div>\n\nReplying to [@jdemeyer](#comment%3A82):\n> Why does this require changes to `bootstrap` anyway?\n\nI gather it's to resolve some chicken vs egg problem with autotools hosted by Sage itself.",
    "created_at": "2017-03-09T15:43:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314912",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:83" align="right">comment:83</div>

Replying to [@jdemeyer](#comment%3A82):
> Why does this require changes to `bootstrap` anyway?

I gather it's to resolve some chicken vs egg problem with autotools hosted by Sage itself.



---

archive/issue_comments_314913.json:
```json
{
    "body": "<div id=\"comment:84\" align=\"right\">comment:84</div>\n\nThat's right. As the comment in `setup_bootstrap_env` explains, bootstrap needs to work both pre-build and post-build.",
    "created_at": "2017-03-09T15:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314913",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:84" align="right">comment:84</div>

That's right. As the comment in `setup_bootstrap_env` explains, bootstrap needs to work both pre-build and post-build.



---

archive/issue_comments_314914.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___prefix_sage_local)** to **[u/jdemeyer/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__configure___prefix_sage_local)**",
    "created_at": "2017-03-14T10:38:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314914",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/mkoeppe/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___prefix_sage_local)** to **[u/jdemeyer/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__configure___prefix_sage_local)**



---

archive/issue_comments_314915.json:
```json
{
    "body": "Changed commit from **[`52826b1`](https://github.com/sagemath/sagetrac-mirror/commit/52826b18b1474c5f92c9c42f4cc75c6a301c1e87)** to **[`acd688d`](https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029)**",
    "created_at": "2017-03-14T10:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314915",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`52826b1`](https://github.com/sagemath/sagetrac-mirror/commit/52826b18b1474c5f92c9c42f4cc75c6a301c1e87)** to **[`acd688d`](https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029)**



---

archive/issue_comments_314916.json:
```json
{
    "body": "<div id=\"comment:86\" align=\"right\">comment:86</div>\n\nRebased to 7.6.rc0\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e55184ee1a6d5524767f4dc9d6fb06a60884329b\"><code>e55184e</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/004221c28afd070a7f0a8d88adc2d5880f560f13\"><code>004221c</code></a></td><td><code>Fixup configure without --prefix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba4dc01d816920eac11931f5a4f2e8067f70d647\"><code>ba4dc01</code></a></td><td><code>Source sage-env-config after calling relocate-once.py</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/734c2de43e073ea546f9b7fb49ed1cfab5055ccb\"><code>734c2de</code></a></td><td><code>top-level sage script: Remove redundant sage-env-config error message</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5bb47bbe308d430aafda55e9a4a3b2086287d2dc\"><code>5bb47bb</code></a></td><td><code>src/bin/sage-env-config: Prefix error message with 'Error:'</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/aa84b6f5684ade6ba0854bf90dc00d2f673ef3a2\"><code>aa84b6f</code></a></td><td><code>make misc-clean: Delete src/bin/sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7a8508b6447e23c3fb68438e70192e5b1a288df\"><code>c7a8508</code></a></td><td><code>Add sage-env-config to .gitignore</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75b11744ec720143d7fc1a1e65c57820fe6eb658\"><code>75b1174</code></a></td><td><code>sage-env: Quoting fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1a6bfb4979d2abb2d9445fb10d9e624a25f1814c\"><code>1a6bfb4</code></a></td><td><code>top-level sage script: No need to source sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029\"><code>acd688d</code></a></td><td><code>bootstrap: Don't use sage-env, set PATH directly</code></td></tr></table>\n",
    "created_at": "2017-03-14T10:39:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314916",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:86" align="right">comment:86</div>

Rebased to 7.6.rc0

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e55184ee1a6d5524767f4dc9d6fb06a60884329b"><code>e55184e</code></a></td><td><code>Add configure option --prefix=SAGE_LOCAL</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/004221c28afd070a7f0a8d88adc2d5880f560f13"><code>004221c</code></a></td><td><code>Fixup configure without --prefix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba4dc01d816920eac11931f5a4f2e8067f70d647"><code>ba4dc01</code></a></td><td><code>Source sage-env-config after calling relocate-once.py</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/734c2de43e073ea546f9b7fb49ed1cfab5055ccb"><code>734c2de</code></a></td><td><code>top-level sage script: Remove redundant sage-env-config error message</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5bb47bbe308d430aafda55e9a4a3b2086287d2dc"><code>5bb47bb</code></a></td><td><code>src/bin/sage-env-config: Prefix error message with 'Error:'</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/aa84b6f5684ade6ba0854bf90dc00d2f673ef3a2"><code>aa84b6f</code></a></td><td><code>make misc-clean: Delete src/bin/sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7a8508b6447e23c3fb68438e70192e5b1a288df"><code>c7a8508</code></a></td><td><code>Add sage-env-config to .gitignore</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75b11744ec720143d7fc1a1e65c57820fe6eb658"><code>75b1174</code></a></td><td><code>sage-env: Quoting fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1a6bfb4979d2abb2d9445fb10d9e624a25f1814c"><code>1a6bfb4</code></a></td><td><code>top-level sage script: No need to source sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029"><code>acd688d</code></a></td><td><code>bootstrap: Don't use sage-env, set PATH directly</code></td></tr></table>




---

archive/issue_comments_314917.json:
```json
{
    "body": "<div id=\"comment:87\" align=\"right\">comment:87</div>\n\nTwo details:\n\n1. Why remove this comment: `# Assume current directory is SAGE_ROOT`\n\n2. Use 4 spaces indentation: ` SAGE_LOCAL=local`",
    "created_at": "2017-03-14T10:55:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314917",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:87" align="right">comment:87</div>

Two details:

1. Why remove this comment: `# Assume current directory is SAGE_ROOT`

2. Use 4 spaces indentation: ` SAGE_LOCAL=local`



---

archive/issue_comments_314918.json:
```json
{
    "body": "<div id=\"comment:88\" align=\"right\">comment:88</div>\n\nDo you expect `sage-env-config` to be installed in `$SAGE_LOCAL/bin`? Currently, that's a bit random, depending on whether or not `src/bin/sage-env-config` exists when running `./configure`.\n\nPersonally, I think that it should *not* be installed for an obvious reason: in order to find `sage-env-config`, you need to know `SAGE_LOCAL`, for which you need to source `sage-env-config`, for which you need to find `sage-env-config`...\n\nGiven that it should not be installed, a better place might be `build/bin/sage-env-config` instead of `src/bin/sage-env-config`.\n\nAnd then you might as well drop the whole complicated stuff to figure out the directory of `sage-env` and just use `$SAGE_ROOT/build/bin/sage-env-config`.\n\nIf you agree, I could implement this.",
    "created_at": "2017-03-14T11:04:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314918",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:88" align="right">comment:88</div>

Do you expect `sage-env-config` to be installed in `$SAGE_LOCAL/bin`? Currently, that's a bit random, depending on whether or not `src/bin/sage-env-config` exists when running `./configure`.

Personally, I think that it should *not* be installed for an obvious reason: in order to find `sage-env-config`, you need to know `SAGE_LOCAL`, for which you need to source `sage-env-config`, for which you need to find `sage-env-config`...

Given that it should not be installed, a better place might be `build/bin/sage-env-config` instead of `src/bin/sage-env-config`.

And then you might as well drop the whole complicated stuff to figure out the directory of `sage-env` and just use `$SAGE_ROOT/build/bin/sage-env-config`.

If you agree, I could implement this.



---

archive/issue_events_299052.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-14T11:04:21Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299052"
}
```



---

archive/issue_events_299053.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-14T11:04:21Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299053"
}
```



---

archive/issue_comments_314919.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__configure___prefix_sage_local)** to **[u/mkoeppe/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___prefix_sage_local)**",
    "created_at": "2017-03-14T14:57:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314919",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/jdemeyer/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__configure___prefix_sage_local)** to **[u/mkoeppe/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___prefix_sage_local)**



---

archive/issue_comments_314920.json:
```json
{
    "body": "<div id=\"comment:91\" align=\"right\">comment:91</div>\n\nReplying to [@jdemeyer](#comment%3A88):\n> Do you expect `sage-env-config` to be installed in `$SAGE_LOCAL/bin`? Currently, that's a bit random, depending on whether or not `src/bin/sage-env-config` exists when running `./configure`.\n\nYes, it should be installed.\n\n> Personally, I think that it should *not* be installed for an obvious reason: in order to find `sage-env-config`, you need to know `SAGE_LOCAL`, for which you need to source `sage-env-config`, for which you need to find `sage-env-config`...\n\n`sage-env-config` is intended as a place for more variables defined by `configure`, to be used by $SAGE_LOCAL/bin/sage. ($SAGE_LOCAL is just the first one that uses this file.) This is why it should be installed. \n\nThe idea is that `$SAGE_LOCAL/bin/sage` would be able to work without having to go through the script `$SAGE_ROOT/sage` (and without depending on `$SAGE_ROOT` being set). As I realized in comment 68 above, it does not quite work yet -- because `sage-env` still tries to discover SAGE_ROOT. \nA complete solution would be to add a line that sets `SAGE_ROOT` to `sage-bin-config` as well.\nIf this sounds agreeable, I could do this.\n\n> Given that it should not be installed, a better place might be `build/bin/sage-env-config` instead of `src/bin/sage-env-config`.\n\nSee #21707 for a discussion regarding a distinction between build-time and run-time config variables; but I think SAGE_LOCAL (and SAGE_ROOT) should be defined in src/bin/sage-env-config (and installed in SAGE_LOCAL/bin/sage-env-config).\n\n> And then you might as well drop the whole complicated stuff to figure out the directory of `sage-env` and just use `$SAGE_ROOT/build/bin/sage-env-config`.\n> \n> If you agree, I could implement this.\n\nIn the end, anything that moves this ticket forward is fine with me. But note there is more work planned that depends on this -- in particular #21469 (Enable VPATH builds).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/927b2c8c1f2e67dbebda93b4ce0382c90bbc9480\"><code>927b2c8</code></a></td><td><code>Restore lost comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e653bba03ed4642a7d86e9d75e550587fde5241c\"><code>e653bba</code></a></td><td><code>Indentation fix</code></td></tr></table>\n",
    "created_at": "2017-03-14T15:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314920",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:91" align="right">comment:91</div>

Replying to [@jdemeyer](#comment%3A88):
> Do you expect `sage-env-config` to be installed in `$SAGE_LOCAL/bin`? Currently, that's a bit random, depending on whether or not `src/bin/sage-env-config` exists when running `./configure`.

Yes, it should be installed.

> Personally, I think that it should *not* be installed for an obvious reason: in order to find `sage-env-config`, you need to know `SAGE_LOCAL`, for which you need to source `sage-env-config`, for which you need to find `sage-env-config`...

`sage-env-config` is intended as a place for more variables defined by `configure`, to be used by $SAGE_LOCAL/bin/sage. ($SAGE_LOCAL is just the first one that uses this file.) This is why it should be installed. 

The idea is that `$SAGE_LOCAL/bin/sage` would be able to work without having to go through the script `$SAGE_ROOT/sage` (and without depending on `$SAGE_ROOT` being set). As I realized in comment 68 above, it does not quite work yet -- because `sage-env` still tries to discover SAGE_ROOT. 
A complete solution would be to add a line that sets `SAGE_ROOT` to `sage-bin-config` as well.
If this sounds agreeable, I could do this.

> Given that it should not be installed, a better place might be `build/bin/sage-env-config` instead of `src/bin/sage-env-config`.

See #21707 for a discussion regarding a distinction between build-time and run-time config variables; but I think SAGE_LOCAL (and SAGE_ROOT) should be defined in src/bin/sage-env-config (and installed in SAGE_LOCAL/bin/sage-env-config).

> And then you might as well drop the whole complicated stuff to figure out the directory of `sage-env` and just use `$SAGE_ROOT/build/bin/sage-env-config`.
> 
> If you agree, I could implement this.

In the end, anything that moves this ticket forward is fine with me. But note there is more work planned that depends on this -- in particular #21469 (Enable VPATH builds).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/927b2c8c1f2e67dbebda93b4ce0382c90bbc9480"><code>927b2c8</code></a></td><td><code>Restore lost comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e653bba03ed4642a7d86e9d75e550587fde5241c"><code>e653bba</code></a></td><td><code>Indentation fix</code></td></tr></table>




---

archive/issue_comments_314921.json:
```json
{
    "body": "Changed commit from **[`acd688d`](https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029)** to **[`e653bba`](https://github.com/sagemath/sagetrac-mirror/commit/e653bba03ed4642a7d86e9d75e550587fde5241c)**",
    "created_at": "2017-03-14T15:15:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314921",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[`acd688d`](https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029)** to **[`e653bba`](https://github.com/sagemath/sagetrac-mirror/commit/e653bba03ed4642a7d86e9d75e550587fde5241c)**



---

archive/issue_comments_314922.json:
```json
{
    "body": "<div id=\"comment:92\" align=\"right\">comment:92</div>\n\nReplying to [@mkoeppe](#comment%3A91):\n> The idea is that `$SAGE_LOCAL/bin/sage` would be able to work without having to go through the script `$SAGE_ROOT/sage` (and without depending on `$SAGE_ROOT` being set).\n\nPersonally, I think it's reasonable to ask for either `SAGE_ROOT` or `SAGE_LOCAL` to be defined.",
    "created_at": "2017-03-14T17:49:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314922",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:92" align="right">comment:92</div>

Replying to [@mkoeppe](#comment%3A91):
> The idea is that `$SAGE_LOCAL/bin/sage` would be able to work without having to go through the script `$SAGE_ROOT/sage` (and without depending on `$SAGE_ROOT` being set).

Personally, I think it's reasonable to ask for either `SAGE_ROOT` or `SAGE_LOCAL` to be defined.



---

archive/issue_comments_314923.json:
```json
{
    "body": "<div id=\"comment:93\" align=\"right\">comment:93</div>\n\nReplying to [@jdemeyer](#comment%3A92):\n> Replying to [@mkoeppe](#comment%3A91):\n> > The idea is that `$SAGE_LOCAL/bin/sage` would be able to work without having to go through the script `$SAGE_ROOT/sage` (and without depending on `$SAGE_ROOT` being set).\n\n> \n> Personally, I think it's reasonable to ask for either `SAGE_ROOT` or `SAGE_LOCAL` to be defined.\n\nI disagree; a main goal of this ticket is so that one can install into a prefix hierarchy that can just be used normally (in particular without depending on some environment variables).",
    "created_at": "2017-03-14T18:49:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314923",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:93" align="right">comment:93</div>

Replying to [@jdemeyer](#comment%3A92):
> Replying to [@mkoeppe](#comment%3A91):
> > The idea is that `$SAGE_LOCAL/bin/sage` would be able to work without having to go through the script `$SAGE_ROOT/sage` (and without depending on `$SAGE_ROOT` being set).

> 
> Personally, I think it's reasonable to ask for either `SAGE_ROOT` or `SAGE_LOCAL` to be defined.

I disagree; a main goal of this ticket is so that one can install into a prefix hierarchy that can just be used normally (in particular without depending on some environment variables).



---

archive/issue_comments_314924.json:
```json
{
    "body": "<div id=\"comment:94\" align=\"right\">comment:94</div>\n\nReplying to [@mkoeppe](#comment%3A93):\n> I disagree; a main goal of this ticket is so that one can install into a prefix hierarchy that can just be used normally (in particular without depending on some environment variables).\n\nLet me clarify: `$SAGE_LOCAL/bin/sage` should not require `SAGE_ROOT` or `SAGE_LOCAL` to be set because `sage-env` can determine it. I'm mainly talking about the logic to determine `sage-env-config`: I think there we already know either `SAGE_ROOT` or `SAGE_LOCAL` so we can simplify that.",
    "created_at": "2017-03-14T19:52:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314924",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:94" align="right">comment:94</div>

Replying to [@mkoeppe](#comment%3A93):
> I disagree; a main goal of this ticket is so that one can install into a prefix hierarchy that can just be used normally (in particular without depending on some environment variables).

Let me clarify: `$SAGE_LOCAL/bin/sage` should not require `SAGE_ROOT` or `SAGE_LOCAL` to be set because `sage-env` can determine it. I'm mainly talking about the logic to determine `sage-env-config`: I think there we already know either `SAGE_ROOT` or `SAGE_LOCAL` so we can simplify that.



---

archive/issue_comments_314925.json:
```json
{
    "body": "<div id=\"comment:95\" align=\"right\">comment:95</div>\n\nThanks for the clarification; I agree that the installed `$SAGE_LOCAL/bin/sage` would be able to determine `SAGE_LOCAL`. But it would have to read `$SAGE_ROOT` from `$SAGE_LOCAL/bin/sage-env-config`.\nAnd the non-installed `$SAGE_ROOT/sage` would be able to determine SAGE_ROOT, but would have to read SAGE_LOCAL from somewhere (currently `$SAGE_ROOT/src/bin/sage-env-config`).\nIf you'd like to implement something like this, please go ahead.",
    "created_at": "2017-03-14T20:44:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314925",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:95" align="right">comment:95</div>

Thanks for the clarification; I agree that the installed `$SAGE_LOCAL/bin/sage` would be able to determine `SAGE_LOCAL`. But it would have to read `$SAGE_ROOT` from `$SAGE_LOCAL/bin/sage-env-config`.
And the non-installed `$SAGE_ROOT/sage` would be able to determine SAGE_ROOT, but would have to read SAGE_LOCAL from somewhere (currently `$SAGE_ROOT/src/bin/sage-env-config`).
If you'd like to implement something like this, please go ahead.



---

archive/issue_comments_314926.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___prefix_sage_local)** to **[u/jdemeyer/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__configure___prefix_sage_local)**",
    "created_at": "2017-03-15T12:22:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314926",
    "user": "https://github.com/jdemeyer"
}
```

Changed branch from **[u/mkoeppe/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/__configure___prefix_sage_local)** to **[u/jdemeyer/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__configure___prefix_sage_local)**



---

archive/issue_events_299054.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-15T12:27:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299054"
}
```



---

archive/issue_events_299055.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-15T12:27:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299055"
}
```



---

archive/issue_comments_314927.json:
```json
{
    "body": "Changed commit from **[`e653bba`](https://github.com/sagemath/sagetrac-mirror/commit/e653bba03ed4642a7d86e9d75e550587fde5241c)** to **[`4554dfa`](https://github.com/sagemath/sagetrac-mirror/commit/4554dfaae60f455f41923dad9979b1c9f7179699)**",
    "created_at": "2017-03-15T12:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314927",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[`e653bba`](https://github.com/sagemath/sagetrac-mirror/commit/e653bba03ed4642a7d86e9d75e550587fde5241c)** to **[`4554dfa`](https://github.com/sagemath/sagetrac-mirror/commit/4554dfaae60f455f41923dad9979b1c9f7179699)**



---

archive/issue_events_299056.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-15T12:27:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "milestone_number": null,
    "milestone_title": "sage-7.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299056"
}
```



---

archive/issue_events_299057.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-15T12:27:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299057"
}
```



---

archive/issue_comments_314928.json:
```json
{
    "body": "Changed author from **Matthias Koeppe** to **Matthias Koeppe, Jeroen Demeyer**",
    "created_at": "2017-03-15T12:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314928",
    "user": "https://github.com/jdemeyer"
}
```

Changed author from **Matthias Koeppe** to **Matthias Koeppe, Jeroen Demeyer**



---

archive/issue_comments_314929.json:
```json
{
    "body": "<div id=\"comment:97\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4554dfaae60f455f41923dad9979b1c9f7179699\"><code>4554dfa</code></a></td><td><code>Install sage-env-config, not sage-env-config.in</code></td></tr></table>\n",
    "created_at": "2017-03-15T12:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314929",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:97"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4554dfaae60f455f41923dad9979b1c9f7179699"><code>4554dfa</code></a></td><td><code>Install sage-env-config, not sage-env-config.in</code></td></tr></table>




---

archive/issue_comments_314930.json:
```json
{
    "body": "<div id=\"comment:98\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fe5a7ad50073d4aeeb1b33feec6e8be88dc2bfec\"><code>fe5a7ad</code></a></td><td><code>Use SAGE_SCRIPTS_DIR to source sage-env-config</code></td></tr></table>\n",
    "created_at": "2017-03-15T16:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314930",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:98"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fe5a7ad50073d4aeeb1b33feec6e8be88dc2bfec"><code>fe5a7ad</code></a></td><td><code>Use SAGE_SCRIPTS_DIR to source sage-env-config</code></td></tr></table>




---

archive/issue_comments_314931.json:
```json
{
    "body": "Changed commit from **[`4554dfa`](https://github.com/sagemath/sagetrac-mirror/commit/4554dfaae60f455f41923dad9979b1c9f7179699)** to **[`fe5a7ad`](https://github.com/sagemath/sagetrac-mirror/commit/fe5a7ad50073d4aeeb1b33feec6e8be88dc2bfec)**",
    "created_at": "2017-03-15T16:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314931",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4554dfa`](https://github.com/sagemath/sagetrac-mirror/commit/4554dfaae60f455f41923dad9979b1c9f7179699)** to **[`fe5a7ad`](https://github.com/sagemath/sagetrac-mirror/commit/fe5a7ad50073d4aeeb1b33feec6e8be88dc2bfec)**



---

archive/issue_comments_314932.json:
```json
{
    "body": "<div id=\"comment:99\" align=\"right\">comment:99</div>\n\nWhat do you think of these changes?\n\nI still have to look at the bootstrap script.",
    "created_at": "2017-03-15T16:24:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314932",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:99" align="right">comment:99</div>

What do you think of these changes?

I still have to look at the bootstrap script.



---

archive/issue_comments_314933.json:
```json
{
    "body": "<div id=\"comment:100\" align=\"right\">comment:100</div>\n\nReplying to [@mkoeppe](#comment%3A84):\n> That's right. As the comment in `setup_bootstrap_env` explains, bootstrap needs to work both pre-build and post-build.\n\nFor bootstrap, why not just try to source `sage-env` and ignore any errors? I feel like the current solution is over-engineered: in the case where you want to use autotools from `$SAGE_LOCAL`, the file `sage-env-config` will exist. So the current code in `bootstrap` is a complicated work-around for a non-existing problen.",
    "created_at": "2017-03-15T16:31:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314933",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:100" align="right">comment:100</div>

Replying to [@mkoeppe](#comment%3A84):
> That's right. As the comment in `setup_bootstrap_env` explains, bootstrap needs to work both pre-build and post-build.

For bootstrap, why not just try to source `sage-env` and ignore any errors? I feel like the current solution is over-engineered: in the case where you want to use autotools from `$SAGE_LOCAL`, the file `sage-env-config` will exist. So the current code in `bootstrap` is a complicated work-around for a non-existing problen.



---

archive/issue_comments_314934.json:
```json
{
    "body": "Changed commit from **[`fe5a7ad`](https://github.com/sagemath/sagetrac-mirror/commit/fe5a7ad50073d4aeeb1b33feec6e8be88dc2bfec)** to **[`cadd18e`](https://github.com/sagemath/sagetrac-mirror/commit/cadd18e3dc5cec3408f0a968565d32b5f52c1207)**",
    "created_at": "2017-03-15T16:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314934",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`fe5a7ad`](https://github.com/sagemath/sagetrac-mirror/commit/fe5a7ad50073d4aeeb1b33feec6e8be88dc2bfec)** to **[`cadd18e`](https://github.com/sagemath/sagetrac-mirror/commit/cadd18e3dc5cec3408f0a968565d32b5f52c1207)**



---

archive/issue_comments_314935.json:
```json
{
    "body": "<div id=\"comment:101\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/cadd18e3dc5cec3408f0a968565d32b5f52c1207\"><code>cadd18e</code></a></td><td><code>Source sage-env but silence errors</code></td></tr></table>\n",
    "created_at": "2017-03-15T16:36:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314935",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:101"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/cadd18e3dc5cec3408f0a968565d32b5f52c1207"><code>cadd18e</code></a></td><td><code>Source sage-env but silence errors</code></td></tr></table>




---

archive/issue_comments_314936.json:
```json
{
    "body": "<div id=\"comment:102\" align=\"right\">comment:102</div>\n\nI agree that this is a simpler solution for the purposes of this ticket.\n(`setup_bootstrap_env` was unnecessarily ambitious -- it set up a cleaner build environment without all the settings that `sage-env` does)",
    "created_at": "2017-03-15T16:41:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314936",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:102" align="right">comment:102</div>

I agree that this is a simpler solution for the purposes of this ticket.
(`setup_bootstrap_env` was unnecessarily ambitious -- it set up a cleaner build environment without all the settings that `sage-env` does)



---

archive/issue_comments_314937.json:
```json
{
    "body": "<div id=\"comment:103\" align=\"right\">comment:103</div>\n\nReplying to [@jdemeyer](#comment%3A99):\n> What do you think of these changes?\n\nFine with me from looking at it (didn't check that it works).",
    "created_at": "2017-03-15T16:47:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314937",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:103" align="right">comment:103</div>

Replying to [@jdemeyer](#comment%3A99):
> What do you think of these changes?

Fine with me from looking at it (didn't check that it works).



---

archive/issue_comments_314938.json:
```json
{
    "body": "<div id=\"comment:104\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4b40094ca86187f976f20d67f5f91fc2aa2177df\"><code>4b40094</code></a></td><td><code>Let \"make install\" build Sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4fe509c906fb6c0686e0a0c024ac7276571cb79a\"><code>4fe509c</code></a></td><td><code>Revert unneeded changes</code></td></tr></table>\n",
    "created_at": "2017-03-15T16:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314938",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:104"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4b40094ca86187f976f20d67f5f91fc2aa2177df"><code>4b40094</code></a></td><td><code>Let "make install" build Sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4fe509c906fb6c0686e0a0c024ac7276571cb79a"><code>4fe509c</code></a></td><td><code>Revert unneeded changes</code></td></tr></table>




---

archive/issue_comments_314939.json:
```json
{
    "body": "Changed commit from **[`cadd18e`](https://github.com/sagemath/sagetrac-mirror/commit/cadd18e3dc5cec3408f0a968565d32b5f52c1207)** to **[`4fe509c`](https://github.com/sagemath/sagetrac-mirror/commit/4fe509c906fb6c0686e0a0c024ac7276571cb79a)**",
    "created_at": "2017-03-15T16:54:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314939",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`cadd18e`](https://github.com/sagemath/sagetrac-mirror/commit/cadd18e3dc5cec3408f0a968565d32b5f52c1207)** to **[`4fe509c`](https://github.com/sagemath/sagetrac-mirror/commit/4fe509c906fb6c0686e0a0c024ac7276571cb79a)**



---

archive/issue_events_299058.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-15T16:55:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299058"
}
```



---

archive/issue_events_299059.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-15T16:55:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299059"
}
```



---

archive/issue_comments_314940.json:
```json
{
    "body": "<div id=\"comment:106\" align=\"right\">comment:106</div>\n\nI've had a look and it looks good to me.  It might be nice in the future to properly support other standard `configure` options like `--bindir` and `--libdir`, but that's a separate issue.",
    "created_at": "2017-03-15T23:22:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314940",
    "user": "https://github.com/embray"
}
```

<div id="comment:106" align="right">comment:106</div>

I've had a look and it looks good to me.  It might be nice in the future to properly support other standard `configure` options like `--bindir` and `--libdir`, but that's a separate issue.



---

archive/issue_events_299060.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-03-15T23:22:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299060"
}
```



---

archive/issue_events_299061.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-03-15T23:22:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299061"
}
```



---

archive/issue_comments_314941.json:
```json
{
    "body": "<div id=\"comment:108\" align=\"right\">comment:108</div>\n\nReplying to [@embray](#comment%3A106):\n> It might be nice in the future to properly support other standard `configure` options like `--bindir` and `--libdir`, but that's a separate issue.\n\nI agree. Could you open a ticket for it? Note that it would require more invasive patching (or autotoolization) of many spkgs that are not autotools-based.",
    "created_at": "2017-03-15T23:29:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314941",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:108" align="right">comment:108</div>

Replying to [@embray](#comment%3A106):
> It might be nice in the future to properly support other standard `configure` options like `--bindir` and `--libdir`, but that's a separate issue.

I agree. Could you open a ticket for it? Note that it would require more invasive patching (or autotoolization) of many spkgs that are not autotools-based.



---

archive/issue_comments_314942.json:
```json
{
    "body": "Changed reviewer from **Jeroen Demeyer, Erik Bray** to **Jeroen Demeyer, Erik Bray, Matthias Koeppe**",
    "created_at": "2017-03-16T01:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314942",
    "user": "https://github.com/mkoeppe"
}
```

Changed reviewer from **Jeroen Demeyer, Erik Bray** to **Jeroen Demeyer, Erik Bray, Matthias Koeppe**



---

archive/issue_comments_314943.json:
```json
{
    "body": "<div id=\"comment:109\" align=\"right\">comment:109</div>\n\nJeroen, I've built a version with your changes, and it all looks good. I've added my name to the list of reviewers.",
    "created_at": "2017-03-16T01:05:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314943",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:109" align="right">comment:109</div>

Jeroen, I've built a version with your changes, and it all looks good. I've added my name to the list of reviewers.



---

archive/issue_events_299062.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-26T14:14:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299062"
}
```



---

archive/issue_events_299063.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-26T14:14:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299063"
}
```



---

archive/issue_comments_314944.json:
```json
{
    "body": "<div id=\"comment:110\" align=\"right\">comment:110</div>\n\nDoesnt work if autotools aren't installed:\n\n```\nmake -j2 -k start\n in dir /home/buildbot/slave/sage_git/build (timeout 86400 secs)\n watching logfiles {'symmetrica': 'logs/buildbot/symmetrica.log', 'sage': 'logs/buildbot/sage.log', 'gd': 'logs/buildbot/gd.log', 'networkx': 'logs/buildbot/networkx.log', 'libgap': 'logs/buildbot/libgap.log', 'csage': 'logs/buildbot/csage.log', 'cython': 'logs/buildbot/cython.log', 'iconv': 'logs/buildbot/iconv.log', 'iml': 'logs/buildbot/iml.log', 'flintqs': 'logs/buildbot/flintqs.log', 'sympy': 'logs/buildbot/sympy.log', 'freetype': 'logs/buildbot/freetype.log', 'mpc': 'logs/buildbot/mpc.log', 'g2red': 'logs/buildbot/genus2reduction.log', 'scipy': 'logs/buildbot/scipy.log', 'flint': 'logs/buildbot/flint.log', 'polytopes': 'logs/buildbot/polytopes_db.log', 'givaro': 'logs/buildbot/givaro.log', 'python3': 'logs/buildbot/python3.log', 'python2': 'logs/buildbot/python2.log', 'patch': 'logs/buildbot/patch.log', 'mpmath': 'logs/buildbot/mpmath.log', 'cephes': 'logs/buildbot/cephes.log', 'pynac': 'logs/buildbot/pynac.log', 'pkgconf': 'logs/buildbot/pkgconf.log', 'sagenb': 'logs/buildbot/sagenb.log', 'palp': 'logs/buildbot/palp.log', 'seadata': 'logs/buildbot/pari_seadata_small.log', 'sympow': 'logs/buildbot/sympow.log', 'docutils': 'logs/buildbot/docutils.log', 'ell_curves': 'logs/buildbot/elliptic_curves.log', 'eclib': 'logs/buildbot/eclib.log', 'libpng': 'logs/buildbot/libpng.log', 'boost': 'logs/buildbot/boost_cropped.log', 'cliquer': 'logs/buildbot/cliquer.log', 'ecm': 'logs/buildbot/ecm.log', 'ecl': 'logs/buildbot/ecl.log', 'cvxopt': 'logs/buildbot/cvxopt.log', 'matplotlib': 'logs/buildbot/matplotlib.log', 'galdata': 'logs/buildbot/pari_galdata.log', 'ntl': 'logs/buildbot/ntl.log', 'lcalc': 'logs/buildbot/lcalc.log', 'ipython': 'logs/buildbot/ipython.log', 'sagetex': 'logs/buildbot/sagetex.log', 'libfplll': 'logs/buildbot/libfplll.log', 'pillow': 'logs/buildbot/pillow.log', 'conway': 'logs/buildbot/conway_polynomials.log', 'polybori': 'logs/buildbot/polybori.log', 'tachyon': 'logs/buildbot/tachyon.log', 'ppl': 'logs/buildbot/ppl.log', 'linbox': 'logs/buildbot/linbox.log', 'pygments': 'logs/buildbot/pygments.log', 'm4rie': 'logs/buildbot/m4rie.log', 'git': 'logs/buildbot/git.log', 'pexpect': 'logs/buildbot/pexpect.log', 'r-project': 'logs/buildbot/r.log', 'm4ri': 'logs/buildbot/m4ri.log', 'pkgconfig': 'logs/buildbot/pkgconfig.log', 'cddlib': 'logs/buildbot/cddlib.log', 'zeromq': 'logs/buildbot/zeromq.log', 'numpy': 'logs/buildbot/numpy.log', 'pyzmq': 'logs/buildbot/pyzmq.log', 'sqlalchemy': 'logs/buildbot/sqlalchemy.log', 'ncurses': 'logs/buildbot/ncurses.log', 'gdmodule': 'logs/buildbot/gdmodule.log', 'pari': 'logs/buildbot/pari.log', 'gap': 'logs/buildbot/gap.log', 'mpfi': 'logs/buildbot/mpfi.log', 'gf2x': 'logs/buildbot/gf2x.log', 'zlib': 'logs/buildbot/zlib.log', 'setuptools': 'logs/buildbot/setuptools.log', 'sqlite': 'logs/buildbot/sqlite.log', 'mpir': 'logs/buildbot/mpir.log', 'bzip2': 'logs/buildbot/bzip2.log', 'six': 'logs/buildbot/six.log', 'rubiks': 'logs/buildbot/rubiks.log', 'scons': 'logs/buildbot/scons.log', 'openblas': 'logs/buildbot/openblas.log', 'zn_poly': 'logs/buildbot/zn_poly.log', 'singular': 'logs/buildbot/singular.log', 'tornado': 'logs/buildbot/tornado.log', 'boehm_gc': 'logs/buildbot/boehm_gc.log', 'gfan': 'logs/buildbot/gfan.log', 'gcc': 'logs/buildbot/gcc.log', 'readline': 'logs/buildbot/readline.log', 'glpk': 'logs/buildbot/glpk.log', 'ratpoints': 'logs/buildbot/ratpoints.log', 'sphinx': 'logs/buildbot/sphinx.log', 'pycrypto': 'logs/buildbot/pycrypto.log', 'jmol': 'logs/buildbot/jmol.log', 'graphs': 'logs/buildbot/graphs.log', 'jinja2': 'logs/buildbot/jinja2.log', 'mpfr': 'logs/buildbot/mpfr.log', 'gsl': 'logs/buildbot/gsl.log', 'maxima': 'logs/buildbot/maxima.log'}\n argv: ['make', '-j2', '-k', 'start']\n environment:\n  DOT_SAGE=/home/buildbot/slave/sage_git/dot_sage\n  HOME=/var/lib/buildbot\n  LANG=en_US.UTF-8\n  LOGNAME=buildbot\n  MAIL=/var/mail/buildbot\n  MAKE=make -j2\n  PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games\n  PWD=/home/buildbot/slave/sage_git/build\n  SAGE_CRASH_LOGS=/home/buildbot/slave/sage_git/crashlogs\n  SAGE_PARALLEL_SPKG_BUILD=yes\n  SAGE_SERVER=http://sagepad.org/\n  SHELL=/bin/sh\n  USER=buildbot\n using PTY: False\nmake -j2 build/make/Makefile\nmake[1]: Entering directory `/home/buildbot/slave/sage_git/build'\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\n./bootstrap -d\nmake[2]: Entering directory `/home/buildbot/slave/sage_git/build'\nrm -rf config configure build/make/Makefile-auto.in\nmake[2]: Leaving directory `/home/buildbot/slave/sage_git/build'\n./bootstrap: line 30: aclocal: command not found\nBootstrap failed, downloading required files instead.\n./bootstrap: line 59: sage-download-file: command not found\nError: downloading configure-212.tar.gz failed\nmake[1]: *** [configure] Error 1\nmake[1]: Target `build/make/Makefile' not remade because of errors.\nmake[1]: Leaving directory `/home/buildbot/slave/sage_git/build'\nmake: *** [start] Error 2\nprogram finished with exit code 2\n```",
    "created_at": "2017-03-26T14:14:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314944",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:110" align="right">comment:110</div>

Doesnt work if autotools aren't installed:

```
make -j2 -k start
 in dir /home/buildbot/slave/sage_git/build (timeout 86400 secs)
 watching logfiles {'symmetrica': 'logs/buildbot/symmetrica.log', 'sage': 'logs/buildbot/sage.log', 'gd': 'logs/buildbot/gd.log', 'networkx': 'logs/buildbot/networkx.log', 'libgap': 'logs/buildbot/libgap.log', 'csage': 'logs/buildbot/csage.log', 'cython': 'logs/buildbot/cython.log', 'iconv': 'logs/buildbot/iconv.log', 'iml': 'logs/buildbot/iml.log', 'flintqs': 'logs/buildbot/flintqs.log', 'sympy': 'logs/buildbot/sympy.log', 'freetype': 'logs/buildbot/freetype.log', 'mpc': 'logs/buildbot/mpc.log', 'g2red': 'logs/buildbot/genus2reduction.log', 'scipy': 'logs/buildbot/scipy.log', 'flint': 'logs/buildbot/flint.log', 'polytopes': 'logs/buildbot/polytopes_db.log', 'givaro': 'logs/buildbot/givaro.log', 'python3': 'logs/buildbot/python3.log', 'python2': 'logs/buildbot/python2.log', 'patch': 'logs/buildbot/patch.log', 'mpmath': 'logs/buildbot/mpmath.log', 'cephes': 'logs/buildbot/cephes.log', 'pynac': 'logs/buildbot/pynac.log', 'pkgconf': 'logs/buildbot/pkgconf.log', 'sagenb': 'logs/buildbot/sagenb.log', 'palp': 'logs/buildbot/palp.log', 'seadata': 'logs/buildbot/pari_seadata_small.log', 'sympow': 'logs/buildbot/sympow.log', 'docutils': 'logs/buildbot/docutils.log', 'ell_curves': 'logs/buildbot/elliptic_curves.log', 'eclib': 'logs/buildbot/eclib.log', 'libpng': 'logs/buildbot/libpng.log', 'boost': 'logs/buildbot/boost_cropped.log', 'cliquer': 'logs/buildbot/cliquer.log', 'ecm': 'logs/buildbot/ecm.log', 'ecl': 'logs/buildbot/ecl.log', 'cvxopt': 'logs/buildbot/cvxopt.log', 'matplotlib': 'logs/buildbot/matplotlib.log', 'galdata': 'logs/buildbot/pari_galdata.log', 'ntl': 'logs/buildbot/ntl.log', 'lcalc': 'logs/buildbot/lcalc.log', 'ipython': 'logs/buildbot/ipython.log', 'sagetex': 'logs/buildbot/sagetex.log', 'libfplll': 'logs/buildbot/libfplll.log', 'pillow': 'logs/buildbot/pillow.log', 'conway': 'logs/buildbot/conway_polynomials.log', 'polybori': 'logs/buildbot/polybori.log', 'tachyon': 'logs/buildbot/tachyon.log', 'ppl': 'logs/buildbot/ppl.log', 'linbox': 'logs/buildbot/linbox.log', 'pygments': 'logs/buildbot/pygments.log', 'm4rie': 'logs/buildbot/m4rie.log', 'git': 'logs/buildbot/git.log', 'pexpect': 'logs/buildbot/pexpect.log', 'r-project': 'logs/buildbot/r.log', 'm4ri': 'logs/buildbot/m4ri.log', 'pkgconfig': 'logs/buildbot/pkgconfig.log', 'cddlib': 'logs/buildbot/cddlib.log', 'zeromq': 'logs/buildbot/zeromq.log', 'numpy': 'logs/buildbot/numpy.log', 'pyzmq': 'logs/buildbot/pyzmq.log', 'sqlalchemy': 'logs/buildbot/sqlalchemy.log', 'ncurses': 'logs/buildbot/ncurses.log', 'gdmodule': 'logs/buildbot/gdmodule.log', 'pari': 'logs/buildbot/pari.log', 'gap': 'logs/buildbot/gap.log', 'mpfi': 'logs/buildbot/mpfi.log', 'gf2x': 'logs/buildbot/gf2x.log', 'zlib': 'logs/buildbot/zlib.log', 'setuptools': 'logs/buildbot/setuptools.log', 'sqlite': 'logs/buildbot/sqlite.log', 'mpir': 'logs/buildbot/mpir.log', 'bzip2': 'logs/buildbot/bzip2.log', 'six': 'logs/buildbot/six.log', 'rubiks': 'logs/buildbot/rubiks.log', 'scons': 'logs/buildbot/scons.log', 'openblas': 'logs/buildbot/openblas.log', 'zn_poly': 'logs/buildbot/zn_poly.log', 'singular': 'logs/buildbot/singular.log', 'tornado': 'logs/buildbot/tornado.log', 'boehm_gc': 'logs/buildbot/boehm_gc.log', 'gfan': 'logs/buildbot/gfan.log', 'gcc': 'logs/buildbot/gcc.log', 'readline': 'logs/buildbot/readline.log', 'glpk': 'logs/buildbot/glpk.log', 'ratpoints': 'logs/buildbot/ratpoints.log', 'sphinx': 'logs/buildbot/sphinx.log', 'pycrypto': 'logs/buildbot/pycrypto.log', 'jmol': 'logs/buildbot/jmol.log', 'graphs': 'logs/buildbot/graphs.log', 'jinja2': 'logs/buildbot/jinja2.log', 'mpfr': 'logs/buildbot/mpfr.log', 'gsl': 'logs/buildbot/gsl.log', 'maxima': 'logs/buildbot/maxima.log'}
 argv: ['make', '-j2', '-k', 'start']
 environment:
  DOT_SAGE=/home/buildbot/slave/sage_git/dot_sage
  HOME=/var/lib/buildbot
  LANG=en_US.UTF-8
  LOGNAME=buildbot
  MAIL=/var/mail/buildbot
  MAKE=make -j2
  PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
  PWD=/home/buildbot/slave/sage_git/build
  SAGE_CRASH_LOGS=/home/buildbot/slave/sage_git/crashlogs
  SAGE_PARALLEL_SPKG_BUILD=yes
  SAGE_SERVER=http://sagepad.org/
  SHELL=/bin/sh
  USER=buildbot
 using PTY: False
make -j2 build/make/Makefile
make[1]: Entering directory `/home/buildbot/slave/sage_git/build'
make[1]: warning: -jN forced in submake: disabling jobserver mode.
./bootstrap -d
make[2]: Entering directory `/home/buildbot/slave/sage_git/build'
rm -rf config configure build/make/Makefile-auto.in
make[2]: Leaving directory `/home/buildbot/slave/sage_git/build'
./bootstrap: line 30: aclocal: command not found
Bootstrap failed, downloading required files instead.
./bootstrap: line 59: sage-download-file: command not found
Error: downloading configure-212.tar.gz failed
make[1]: *** [configure] Error 1
make[1]: Target `build/make/Makefile' not remade because of errors.
make[1]: Leaving directory `/home/buildbot/slave/sage_git/build'
make: *** [start] Error 2
program finished with exit code 2
```



---

archive/issue_comments_314945.json:
```json
{
    "body": "<div id=\"comment:111\" align=\"right\">comment:111</div>\n\nJeroen, since you did not like my solution to this problem in https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029, would you like to fix it?",
    "created_at": "2017-03-26T17:07:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314945",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:111" align="right">comment:111</div>

Jeroen, since you did not like my solution to this problem in https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029, would you like to fix it?



---

archive/issue_comments_314946.json:
```json
{
    "body": "Changed commit from **[`4fe509c`](https://github.com/sagemath/sagetrac-mirror/commit/4fe509c906fb6c0686e0a0c024ac7276571cb79a)** to **[`3b1ee68`](https://github.com/sagemath/sagetrac-mirror/commit/3b1ee6863a5e2e3b0f7604c9e9a1f000685e02c1)**",
    "created_at": "2017-03-27T07:27:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314946",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4fe509c`](https://github.com/sagemath/sagetrac-mirror/commit/4fe509c906fb6c0686e0a0c024ac7276571cb79a)** to **[`3b1ee68`](https://github.com/sagemath/sagetrac-mirror/commit/3b1ee6863a5e2e3b0f7604c9e9a1f000685e02c1)**



---

archive/issue_comments_314947.json:
```json
{
    "body": "<div id=\"comment:112\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/221bd47c69472e6c34af37a4851077fc4cb0686c\"><code>221bd47</code></a></td><td><code>sage-env: Quoting fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ec0a435bb432a07348c07896f6b7d99f0af0d882\"><code>ec0a435</code></a></td><td><code>top-level sage script: No need to source sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7a430677091cdaf45a45e05c5995d127424251ea\"><code>7a43067</code></a></td><td><code>bootstrap: Don't use sage-env, set PATH directly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b4fae116d869bed212d3cea89b7dfbcd37514e85\"><code>b4fae11</code></a></td><td><code>Restore lost comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4ec741c2c5a44ae7a7695d5d97c0da4252901133\"><code>4ec741c</code></a></td><td><code>Indentation fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/01a5706feb09e9e6209e41671338b41fa0fa3fa1\"><code>01a5706</code></a></td><td><code>Install sage-env-config, not sage-env-config.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1effacd440d239d76cefe401cb41d7619db80803\"><code>1effacd</code></a></td><td><code>Use SAGE_SCRIPTS_DIR to source sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/13205ae29b9ee0bbf305cf231acb0ebc386f3bbb\"><code>13205ae</code></a></td><td><code>Source sage-env but silence errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d9f83d20ddb81fa61915c8278a02dfa1c5b08549\"><code>d9f83d2</code></a></td><td><code>Let \"make install\" build Sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3b1ee6863a5e2e3b0f7604c9e9a1f000685e02c1\"><code>3b1ee68</code></a></td><td><code>Revert unneeded changes</code></td></tr></table>\n",
    "created_at": "2017-03-27T07:27:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314947",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:112"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/221bd47c69472e6c34af37a4851077fc4cb0686c"><code>221bd47</code></a></td><td><code>sage-env: Quoting fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ec0a435bb432a07348c07896f6b7d99f0af0d882"><code>ec0a435</code></a></td><td><code>top-level sage script: No need to source sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7a430677091cdaf45a45e05c5995d127424251ea"><code>7a43067</code></a></td><td><code>bootstrap: Don't use sage-env, set PATH directly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b4fae116d869bed212d3cea89b7dfbcd37514e85"><code>b4fae11</code></a></td><td><code>Restore lost comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4ec741c2c5a44ae7a7695d5d97c0da4252901133"><code>4ec741c</code></a></td><td><code>Indentation fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/01a5706feb09e9e6209e41671338b41fa0fa3fa1"><code>01a5706</code></a></td><td><code>Install sage-env-config, not sage-env-config.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1effacd440d239d76cefe401cb41d7619db80803"><code>1effacd</code></a></td><td><code>Use SAGE_SCRIPTS_DIR to source sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/13205ae29b9ee0bbf305cf231acb0ebc386f3bbb"><code>13205ae</code></a></td><td><code>Source sage-env but silence errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d9f83d20ddb81fa61915c8278a02dfa1c5b08549"><code>d9f83d2</code></a></td><td><code>Let "make install" build Sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3b1ee6863a5e2e3b0f7604c9e9a1f000685e02c1"><code>3b1ee68</code></a></td><td><code>Revert unneeded changes</code></td></tr></table>




---

archive/issue_comments_314948.json:
```json
{
    "body": "<div id=\"comment:113\" align=\"right\">comment:113</div>\n\nRebased to 7.6, nothing changed yet.",
    "created_at": "2017-03-27T07:29:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314948",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:113" align="right">comment:113</div>

Rebased to 7.6, nothing changed yet.



---

archive/issue_comments_314949.json:
```json
{
    "body": "<div id=\"comment:114\" align=\"right\">comment:114</div>\n\nReplying to [@mkoeppe](#comment%3A111):\n> Jeroen, since you did not like my solution to this problem in https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029, would you like to fix it?\n\nThe problem is that this comment is wrong:\n\n```\n    # Try to get autotools from our own package into PATH (Trac #21214)\n    # This will fail for initial bootstrap, when sage-env-config has\n    # not been created yet.\n```\nIt's not just about autotools, it's also about getting `sage-download-file` in the `$PATH`.",
    "created_at": "2017-03-27T07:33:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314949",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:114" align="right">comment:114</div>

Replying to [@mkoeppe](#comment%3A111):
> Jeroen, since you did not like my solution to this problem in https://github.com/sagemath/sagetrac-mirror/commit/acd688dd6e42f932f0c100cf8acac28e35e3c029, would you like to fix it?

The problem is that this comment is wrong:

```
    # Try to get autotools from our own package into PATH (Trac #21214)
    # This will fail for initial bootstrap, when sage-env-config has
    # not been created yet.
```
It's not just about autotools, it's also about getting `sage-download-file` in the `$PATH`.



---

archive/issue_comments_314950.json:
```json
{
    "body": "<div id=\"comment:115\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/890d4178cfd9a7c6184cade473668a9e5bf74be1\"><code>890d417</code></a></td><td><code>Hardcode path to sage-download-file</code></td></tr></table>\n",
    "created_at": "2017-03-27T07:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314950",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:115"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/890d4178cfd9a7c6184cade473668a9e5bf74be1"><code>890d417</code></a></td><td><code>Hardcode path to sage-download-file</code></td></tr></table>




---

archive/issue_comments_314951.json:
```json
{
    "body": "Changed commit from **[`3b1ee68`](https://github.com/sagemath/sagetrac-mirror/commit/3b1ee6863a5e2e3b0f7604c9e9a1f000685e02c1)** to **[`890d417`](https://github.com/sagemath/sagetrac-mirror/commit/890d4178cfd9a7c6184cade473668a9e5bf74be1)**",
    "created_at": "2017-03-27T07:36:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314951",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`3b1ee68`](https://github.com/sagemath/sagetrac-mirror/commit/3b1ee6863a5e2e3b0f7604c9e9a1f000685e02c1)** to **[`890d417`](https://github.com/sagemath/sagetrac-mirror/commit/890d4178cfd9a7c6184cade473668a9e5bf74be1)**



---

archive/issue_events_299064.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-27T07:38:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299064"
}
```



---

archive/issue_events_299065.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-27T07:38:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299065"
}
```



---

archive/issue_comments_314952.json:
```json
{
    "body": "<div id=\"comment:116\" align=\"right\">comment:116</div>\n\nThis should work...",
    "created_at": "2017-03-27T07:38:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314952",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:116" align="right">comment:116</div>

This should work...



---

archive/issue_events_299066.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-28T02:20:00Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299066"
}
```



---

archive/issue_events_299067.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-28T02:20:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299067"
}
```



---

archive/issue_comments_314953.json:
```json
{
    "body": "<div id=\"comment:118\" align=\"right\">comment:118</div>\n\n\n```\nconfig.status: creating directory /Users/buildslave-sage/slave/sage_git/build/local/share\nconfig.status: creating directory /Users/buildslave-sage/slave/sage_git/build/local/var/lib/sage/installed\nbuild/bin/sage-logger \\\n\t\t\"cd build/make && ./install 'start'\" logs/install.log\n./install: line 12: /Users/buildslave-sage/slave/sage_git/build/src/bin/sage-env-config: No such file or directory\nError: Failed to read sage-env-config.  Did you run configure?\n```",
    "created_at": "2017-03-29T21:06:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314953",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:118" align="right">comment:118</div>


```
config.status: creating directory /Users/buildslave-sage/slave/sage_git/build/local/share
config.status: creating directory /Users/buildslave-sage/slave/sage_git/build/local/var/lib/sage/installed
build/bin/sage-logger \
		"cd build/make && ./install 'start'" logs/install.log
./install: line 12: /Users/buildslave-sage/slave/sage_git/build/src/bin/sage-env-config: No such file or directory
Error: Failed to read sage-env-config.  Did you run configure?
```



---

archive/issue_events_299068.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-29T21:06:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299068"
}
```



---

archive/issue_events_299069.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-29T21:06:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299069"
}
```



---

archive/issue_comments_314954.json:
```json
{
    "body": "<div id=\"comment:119\" align=\"right\">comment:119</div>\n\nNo, this error disappears if you run `autoreconf` - and regenerate the configure package for the release using your scripts.",
    "created_at": "2017-03-30T00:15:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314954",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:119" align="right">comment:119</div>

No, this error disappears if you run `autoreconf` - and regenerate the configure package for the release using your scripts.



---

archive/issue_events_299070.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-30T00:15:25Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299070"
}
```



---

archive/issue_events_299071.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2017-03-30T00:15:25Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299071"
}
```



---

archive/issue_events_299072.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-30T10:20:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299072"
}
```



---

archive/issue_events_299073.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-30T10:20:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299073"
}
```



---

archive/issue_comments_314955.json:
```json
{
    "body": "<div id=\"comment:120\" align=\"right\">comment:120</div>\n\nReplying to [@mkoeppe](#comment%3A119):\n> regenerate the configure package for the release using your scripts.\n\nIf only the release manager would do this when testing a ticket...",
    "created_at": "2017-03-30T10:20:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314955",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:120" align="right">comment:120</div>

Replying to [@mkoeppe](#comment%3A119):
> regenerate the configure package for the release using your scripts.

If only the release manager would do this when testing a ticket...



---

archive/issue_comments_314956.json:
```json
{
    "body": "<div id=\"comment:121\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2a069b194037f7dd406055f0072a93c525f768ea\"><code>2a069b1</code></a></td><td><code>Update configure tarball</code></td></tr></table>\n",
    "created_at": "2017-03-30T10:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314956",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:121"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2a069b194037f7dd406055f0072a93c525f768ea"><code>2a069b1</code></a></td><td><code>Update configure tarball</code></td></tr></table>




---

archive/issue_comments_314957.json:
```json
{
    "body": "Changed commit from **[`890d417`](https://github.com/sagemath/sagetrac-mirror/commit/890d4178cfd9a7c6184cade473668a9e5bf74be1)** to **[`2a069b1`](https://github.com/sagemath/sagetrac-mirror/commit/2a069b194037f7dd406055f0072a93c525f768ea)**",
    "created_at": "2017-03-30T10:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314957",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`890d417`](https://github.com/sagemath/sagetrac-mirror/commit/890d4178cfd9a7c6184cade473668a9e5bf74be1)** to **[`2a069b1`](https://github.com/sagemath/sagetrac-mirror/commit/2a069b194037f7dd406055f0072a93c525f768ea)**



---

archive/issue_events_299074.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-30T10:38:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299074"
}
```



---

archive/issue_events_299075.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-30T10:38:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299075"
}
```



---

archive/issue_comments_314958.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,3 +10,5 @@\n Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.\n \n This ticket is a step towards #21566.\n+\n+**Release manager configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-213.tar.gz\n``````\n",
    "created_at": "2017-03-30T10:38:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314958",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,3 +10,5 @@
 Nevertheless, SAGE_LOCAL should be considered the same as the `prefix` in the sense of the autotools.
 
 This ticket is a step towards #21566.
+
+**Release manager configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-213.tar.gz
``````




---

archive/issue_events_299076.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-30T22:36:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299076"
}
```



---

archive/issue_events_299077.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-03-30T22:36:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299077"
}
```



---

archive/issue_comments_314959.json:
```json
{
    "body": "<div id=\"comment:123\" align=\"right\">comment:123</div>\n\nmerge failure",
    "created_at": "2017-03-30T22:36:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314959",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:123" align="right">comment:123</div>

merge failure



---

archive/issue_comments_314960.json:
```json
{
    "body": "<div id=\"comment:124\" align=\"right\">comment:124</div>\n\n... with the configure tarball version",
    "created_at": "2017-03-31T04:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314960",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:124" align="right">comment:124</div>

... with the configure tarball version



---

archive/issue_comments_314961.json:
```json
{
    "body": "<div id=\"comment:125\"></div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f624c952bf499e7fc57b406118f7d07d0bb432f1\"><code>f624c95</code></a></td><td><code>bootstrap: Don't use sage-env, set PATH directly</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2dccfb0d7150200a469ee550d0211549657b5c7a\"><code>2dccfb0</code></a></td><td><code>Restore lost comment</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2aafa6f60ad277fd98d2ea517f058f9745c40b97\"><code>2aafa6f</code></a></td><td><code>Indentation fix</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4eeb130d4d25c800cc4b910ac22dbc83471dfb61\"><code>4eeb130</code></a></td><td><code>Install sage-env-config, not sage-env-config.in</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8965a08c3e6a4cbc2cf02559dc79bddea01f21ca\"><code>8965a08</code></a></td><td><code>Use SAGE_SCRIPTS_DIR to source sage-env-config</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7b4dfbf6a6baeae818c055471214a6f49d158704\"><code>7b4dfbf</code></a></td><td><code>Source sage-env but silence errors</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/44110ce1d631e8415743bfaf7098cc9ee74daa2e\"><code>44110ce</code></a></td><td><code>Let \"make install\" build Sage</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/7d2595c74ea3e2b859ac1f0579114362108ece1f\"><code>7d2595c</code></a></td><td><code>Revert unneeded changes</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1e98d9c456a06b317d416018dd3399f99507b077\"><code>1e98d9c</code></a></td><td><code>Hardcode path to sage-download-file</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44\"><code>e5926b1</code></a></td><td><code>Update configure tarball</code></td></tr></table>\n",
    "created_at": "2017-03-31T08:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314961",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:125"></div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f624c952bf499e7fc57b406118f7d07d0bb432f1"><code>f624c95</code></a></td><td><code>bootstrap: Don't use sage-env, set PATH directly</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2dccfb0d7150200a469ee550d0211549657b5c7a"><code>2dccfb0</code></a></td><td><code>Restore lost comment</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2aafa6f60ad277fd98d2ea517f058f9745c40b97"><code>2aafa6f</code></a></td><td><code>Indentation fix</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4eeb130d4d25c800cc4b910ac22dbc83471dfb61"><code>4eeb130</code></a></td><td><code>Install sage-env-config, not sage-env-config.in</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8965a08c3e6a4cbc2cf02559dc79bddea01f21ca"><code>8965a08</code></a></td><td><code>Use SAGE_SCRIPTS_DIR to source sage-env-config</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7b4dfbf6a6baeae818c055471214a6f49d158704"><code>7b4dfbf</code></a></td><td><code>Source sage-env but silence errors</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/44110ce1d631e8415743bfaf7098cc9ee74daa2e"><code>44110ce</code></a></td><td><code>Let "make install" build Sage</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/7d2595c74ea3e2b859ac1f0579114362108ece1f"><code>7d2595c</code></a></td><td><code>Revert unneeded changes</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1e98d9c456a06b317d416018dd3399f99507b077"><code>1e98d9c</code></a></td><td><code>Hardcode path to sage-download-file</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44"><code>e5926b1</code></a></td><td><code>Update configure tarball</code></td></tr></table>




---

archive/issue_comments_314962.json:
```json
{
    "body": "Changed commit from **[`2a069b1`](https://github.com/sagemath/sagetrac-mirror/commit/2a069b194037f7dd406055f0072a93c525f768ea)** to **[`e5926b1`](https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44)**",
    "created_at": "2017-03-31T08:46:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314962",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`2a069b1`](https://github.com/sagemath/sagetrac-mirror/commit/2a069b194037f7dd406055f0072a93c525f768ea)** to **[`e5926b1`](https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44)**



---

archive/issue_events_299078.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-31T08:47:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299078"
}
```



---

archive/issue_events_299079.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2017-03-31T08:47:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299079"
}
```



---

archive/issue_comments_314963.json:
```json
{
    "body": "<div id=\"comment:126\" align=\"right\">comment:126</div>\n\nHopefully this is the final thing needed for this ticket...",
    "created_at": "2017-03-31T08:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314963",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:126" align="right">comment:126</div>

Hopefully this is the final thing needed for this ticket...



---

archive/issue_comments_314964.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -11,4 +11,4 @@\n \n This ticket is a step towards #21566.\n \n-**Release manager configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-213.tar.gz\n+**Release manager configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-214.tar.gz\n``````\n",
    "created_at": "2017-03-31T08:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314964",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -11,4 +11,4 @@
 
 This ticket is a step towards #21566.
 
-**Release manager configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-213.tar.gz
+**Release manager configure tarball**: http://sage.ugent.be/www/jdemeyer/sage/configure-214.tar.gz
``````




---

archive/issue_events_299080.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-03T20:59:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299080"
}
```



---

archive/issue_events_299081.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1a35431c4227ad4f081b9023e1a00dcbe16f6f14",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-04-03T20:59:51Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21479#event-299081"
}
```



---

archive/issue_comments_314965.json:
```json
{
    "body": "Changed branch from **[u/jdemeyer/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__configure___prefix_sage_local)** to **[`e5926b1`](https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44)**",
    "created_at": "2017-04-03T20:59:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314965",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/jdemeyer/__configure___prefix_sage_local](https://github.com/sagemath/sagetrac-mirror/tree/u/jdemeyer/__configure___prefix_sage_local)** to **[`e5926b1`](https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44)**



---

archive/issue_comments_314966.json:
```json
{
    "body": "<div id=\"comment:128\" align=\"right\">comment:128</div>\n\nAs a consequence of this ticket, with a fresh tarball or after running `make distclean`, `./sage -i PKG` fails, as does `./sage --sh`. The error message says\n\n```\nError: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this\nError setting environment variables by sourcing '/Users/palmieri/Desktop/TEMP/sage-8.0.beta1/src/bin/sage-env';\npossibly contact sage-devel (see http://groups.google.com/group/sage-devel).\n```\nShould these commands work out of the box? Running `./configure` fixes this, I think, so should the error message be changed, at least?",
    "created_at": "2017-04-13T18:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314966",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:128" align="right">comment:128</div>

As a consequence of this ticket, with a fresh tarball or after running `make distclean`, `./sage -i PKG` fails, as does `./sage --sh`. The error message says

```
Error: You must set either the SAGE_LOCAL or SAGE_SCRIPTS_DIR environment variable to run this
Error setting environment variables by sourcing '/Users/palmieri/Desktop/TEMP/sage-8.0.beta1/src/bin/sage-env';
possibly contact sage-devel (see http://groups.google.com/group/sage-devel).
```
Should these commands work out of the box? Running `./configure` fixes this, I think, so should the error message be changed, at least?



---

archive/issue_comments_314967.json:
```json
{
    "body": "Changed commit from **[`e5926b1`](https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44)** to none",
    "created_at": "2017-04-13T18:47:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314967",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[`e5926b1`](https://github.com/sagemath/sagetrac-mirror/commit/e5926b1513e224e392cc10bd82c7ec7244a16c44)** to none



---

archive/issue_comments_314968.json:
```json
{
    "body": "<div id=\"comment:129\" align=\"right\">comment:129</div>\n\nI think its reasonable to ask that one runs at least configure once before trying to launch any scripts in the source tarball. So +1 for changing the error message...",
    "created_at": "2017-04-13T20:06:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21479",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21479#issuecomment-314968",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:129" align="right">comment:129</div>

I think its reasonable to ask that one runs at least configure once before trying to launch any scripts in the source tarball. So +1 for changing the error message...
