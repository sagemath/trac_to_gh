# Issue 21992: Compute J-ideal of a matrix

archive/issues_021755.json:
```json
{
    "body": "CC:  @dkrenn rrissner\n\nIn [HR2016], an algorithm for computing the `J`-ideal of a matrix is given: Given a matrix `B` over a principal ideal domain `R` and an ideal `(a)`, the `(a)` ideal of `B` consists of those polynomials over `R[X]` which map `B` to a matrix in `M_n((a))`.\n\nThis ticket contains the accompanying code.\n\n[HR2016] Clemens Heuberger and Roswitha Rissner, Computing *J*-Ideals of a Matrix Over a Principal Ideal Domain, [https://arxiv.org/abs/1611.10308 arXiv 1611.10308 [math.AC]], 2016.\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/21992\n\n",
    "closed_at": "2017-01-18T20:39:00Z",
    "created_at": "2016-11-29T16:36:50Z",
    "labels": [
        "component: linear algebra"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Compute J-ideal of a matrix",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21992",
    "user": "https://github.com/cheuberg"
}
```
CC:  @dkrenn rrissner

In [HR2016], an algorithm for computing the `J`-ideal of a matrix is given: Given a matrix `B` over a principal ideal domain `R` and an ideal `(a)`, the `(a)` ideal of `B` consists of those polynomials over `R[X]` which map `B` to a matrix in `M_n((a))`.

This ticket contains the accompanying code.

[HR2016] Clemens Heuberger and Roswitha Rissner, Computing *J*-Ideals of a Matrix Over a Principal Ideal Domain, [https://arxiv.org/abs/1611.10308 arXiv 1611.10308 [math.AC]], 2016.


Issue created by migration from https://trac.sagemath.org/ticket/21992





---

archive/issue_comments_301495.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-30T14:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301495",
    "user": "https://github.com/cheuberg"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_301496.json:
```json
{
    "body": "Last 10 new commits:",
    "created_at": "2016-11-30T14:31:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301496",
    "user": "https://github.com/cheuberg"
}
```

Last 10 new commits:



---

archive/issue_comments_301497.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-01T06:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301497",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_301498.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2017-01-01T16:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301498",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_301499.json:
```json
{
    "body": "Code looks good, is extensively tested, docs are fine. I only found the following minor issues / suggestions: \n\n1. correct the 2 lines with whitespace errors\n2. Python 3:\n   - imports at top of file\n    {{{\n    from __future__ import print_function\n    from __future__ import absolute_import\n    }}}\n    AFAIK, we put this now in all SageMath-files which are already\n    Python3-compatibel\n   - print_function in doctests (simply use `print(...)`,\n    which works in Python2 and 3\n   - iteritems/iterkeys: use e.g. six\n3. refactor imports to be more locally:\n   e.g. heapq is only needed in one function/method, so you can put it there.\n   I tend to use file-global imports only when really needed there (e.g. SageObject).\n4. `print *.null_ideal(...)` in all doctests: maybe do not break\n   'Univariate Polynomial Ring'; I find this hard to read\n   then. Maybe break already after the preceding 'of'\n   Not sure if this helps, but and/or: indent the second line.\n5. `(Default: ...)` vs. `(default: ...)`; I think [SageMath](SageMath) has a preference\n   for the latter:\n   {{{\n   sage -grep \"(default:\" | wc -l\n   4920\n   sage -grep \"(Default:\" | wc -l\n   92\n   }}}\n6. doc p_minimal_polynomial, INPUT s_max vs. last sentence before EXAMPLES:\n   At first sight it seems weird that in the INPUT block it can easily be\n   described what happens when s_max is set, whereas in the sentence\n   before the EXAMPLES block a much longer explaination is needed. Also\n   t <= s_max vs s <= s_max confuses when reading first. Moreover I find the\n   sentence before the EXAMPLES block hard to read.\n   So maybe could be rewritten to make it easier understandable.\n   Adapt this in matrix_integer_dense as well.\n7. L 328: \"square matrix required.\" full stop at end, but in no\n   other raised exception.\n8. As we are already talking about exceptions and FYI, sometimes they\n   are formulated as proper English sentences like\n   `s is not in N_{(%s^%s)}(B)`\n   (but omiting the full stop, where I personally would put one as the\n   sentence ends here, but I am aware that there are different\n   perspectives here), sometime not like\n   `%s not in (%s^%s)-ideal`\n9. L559: two blanks after \"return\"\n10. FYI, between two methods there are two empty lines most of the time,\n   but not always\n11. matrix_integer_dense, p_minimal_polynomials: Should it be explained\n   what the `(p^t)`-minimal polynomials `\\nu_t` of this matrix are?\n\nI am not sure, why no patchbot tested this ticket yet...",
    "created_at": "2017-01-01T16:00:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301499",
    "user": "https://github.com/dkrenn"
}
```

Code looks good, is extensively tested, docs are fine. I only found the following minor issues / suggestions: 

1. correct the 2 lines with whitespace errors
2. Python 3:
   - imports at top of file
    {{{
    from __future__ import print_function
    from __future__ import absolute_import
    }}}
    AFAIK, we put this now in all SageMath-files which are already
    Python3-compatibel
   - print_function in doctests (simply use `print(...)`,
    which works in Python2 and 3
   - iteritems/iterkeys: use e.g. six
3. refactor imports to be more locally:
   e.g. heapq is only needed in one function/method, so you can put it there.
   I tend to use file-global imports only when really needed there (e.g. SageObject).
4. `print *.null_ideal(...)` in all doctests: maybe do not break
   'Univariate Polynomial Ring'; I find this hard to read
   then. Maybe break already after the preceding 'of'
   Not sure if this helps, but and/or: indent the second line.
5. `(Default: ...)` vs. `(default: ...)`; I think [SageMath](SageMath) has a preference
   for the latter:
   {{{
   sage -grep "(default:" | wc -l
   4920
   sage -grep "(Default:" | wc -l
   92
   }}}
6. doc p_minimal_polynomial, INPUT s_max vs. last sentence before EXAMPLES:
   At first sight it seems weird that in the INPUT block it can easily be
   described what happens when s_max is set, whereas in the sentence
   before the EXAMPLES block a much longer explaination is needed. Also
   t <= s_max vs s <= s_max confuses when reading first. Moreover I find the
   sentence before the EXAMPLES block hard to read.
   So maybe could be rewritten to make it easier understandable.
   Adapt this in matrix_integer_dense as well.
7. L 328: "square matrix required." full stop at end, but in no
   other raised exception.
8. As we are already talking about exceptions and FYI, sometimes they
   are formulated as proper English sentences like
   `s is not in N_{(%s^%s)}(B)`
   (but omiting the full stop, where I personally would put one as the
   sentence ends here, but I am aware that there are different
   perspectives here), sometime not like
   `%s not in (%s^%s)-ideal`
9. L559: two blanks after "return"
10. FYI, between two methods there are two empty lines most of the time,
   but not always
11. matrix_integer_dense, p_minimal_polynomials: Should it be explained
   what the `(p^t)`-minimal polynomials `\nu_t` of this matrix are?

I am not sure, why no patchbot tested this ticket yet...



---

archive/issue_comments_301500.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-02T12:13:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301500",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_301501.json:
```json
{
    "body": "Thank you for your review. I modified the branch taking all your comments into account.\n6. I split the sentence into two parts, perhaps it is now easier to understand. I also added a \"see below\" in the documentation for the input parameter to at least announce that it is somewhat tricky. I replaced several `t` by `s` to have more homogeneous notation.\n7. done\n8. Abbreviated all but one exception to non-sentences without full stop; one exception has been upgraded to a full sentence with full stop because I did not see a concise non-sentence formulation.\nI am not sure about the patchbot; I now added the \"?kick\" parameter.",
    "created_at": "2017-01-02T12:22:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301501",
    "user": "https://github.com/cheuberg"
}
```

Thank you for your review. I modified the branch taking all your comments into account.
6. I split the sentence into two parts, perhaps it is now easier to understand. I also added a "see below" in the documentation for the input parameter to at least announce that it is somewhat tricky. I replaced several `t` by `s` to have more homogeneous notation.
7. done
8. Abbreviated all but one exception to non-sentences without full stop; one exception has been upgraded to a full sentence with full stop because I did not see a concise non-sentence formulation.
I am not sure about the patchbot; I now added the "?kick" parameter.



---

archive/issue_comments_301502.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-02T12:22:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301502",
    "user": "https://github.com/cheuberg"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_301503.json:
```json
{
    "body": "Replying to [comment:6 cheuberg]:\n> Thank you for your review. I modified the branch taking all your comments into account.\n\n\nLGTM.\n\n> 6. I split the sentence into two parts, perhaps it is now easier to understand. I also added a \"see below\" in the documentation for the input parameter to at least announce that it is somewhat tricky. I replaced several `t` by `s` to have more homogeneous notation.\n\n\nOk, thank you. I think this is much better now.\n\n> 8. Abbreviated all but one exception to non-sentences without full stop; one exception has been upgraded to a full sentence with full stop because I did not see a concise non-sentence formulation.\n\n\nOk.\n\n> I am not sure about the patchbot; I now added the \"?kick\" parameter.\n\n\nSo, this is a positive review from my side. I suggest to wait some more days to see if the patchbot with all plugins agrees as well.",
    "created_at": "2017-01-02T12:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301503",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:6 cheuberg]:
> Thank you for your review. I modified the branch taking all your comments into account.


LGTM.

> 6. I split the sentence into two parts, perhaps it is now easier to understand. I also added a "see below" in the documentation for the input parameter to at least announce that it is somewhat tricky. I replaced several `t` by `s` to have more homogeneous notation.


Ok, thank you. I think this is much better now.

> 8. Abbreviated all but one exception to non-sentences without full stop; one exception has been upgraded to a full sentence with full stop because I did not see a concise non-sentence formulation.


Ok.

> I am not sure about the patchbot; I now added the "?kick" parameter.


So, this is a positive review from my side. I suggest to wait some more days to see if the patchbot with all plugins agrees as well.



---

archive/issue_comments_301504.json:
```json
{
    "body": "Some very minor points:\n\n- References should go in the master reference file.\n- `INPUT`'s should not end in a period. One of the longer ones should be changed to:\n  {{{\n    - ``G`` -- a matrix over `D[X]`; the columns of\n      `\\begin{pmatrix}p^{t-1}I& G\\end{pmatrix}` are generators\n      of `\\{ f\\in D[X]^d \\mid Af \\equiv 0\\pmod{p^{t-1}}\\}`;\n      can be set to ``None`` if ``t`` is zero\n  }}}\n  The other long one to change:\n  {{{\n        - ``s_max`` -- a positive integer (default: ``None``); if set, only\n          `(p^s)`-minimal polynomials for ``s <= s_max`` are computed\n          (see below for details)\n  }}}\n- To one line:\n  {{{#!diff\n-        raise ValueError(\n-            \"A*G not zero mod %s^%s\" % (p, t-1))\n+        raise ValueError(\"A*G not zero mod %s^%s\" % (p, t-1))\n  }}}\n- The `assert`s are just checking that the Smith normal form is correct? I know its considered good form, but all `assert`s are (currently) checked in Sage.\n- This break is strange:\n  {{{#!diff\n-    return sum(c//p * X**i for\n-               i, c in enumerate(f.list())\n+    return sum(c//p * X**i for i, c in enumerate(f.list())\n                if c % p == 0)\n  }}}\n- Move the description of what the method does before the `INPUT:` and `OUTPUT:`. It makes it easier to parse and (IMO) is more important information.\n- Use the Sage macro `\\ZZ` instead of `\\mathbb{Z}`. Same for `\\QQ`.\n- Add some whitespace around the latex. While it doesn't make a difference in the html/pdf rendered doc, it makes it easier to read when using the `?`.\n- You can freely split lines in `.. MATH::` blocks.",
    "created_at": "2017-01-03T00:13:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301504",
    "user": "https://github.com/tscrim"
}
```

Some very minor points:

- References should go in the master reference file.
- `INPUT`'s should not end in a period. One of the longer ones should be changed to:
  {{{
    - ``G`` -- a matrix over `D[X]`; the columns of
      `\begin{pmatrix}p^{t-1}I& G\end{pmatrix}` are generators
      of `\{ f\in D[X]^d \mid Af \equiv 0\pmod{p^{t-1}}\}`;
      can be set to ``None`` if ``t`` is zero
  }}}
  The other long one to change:
  {{{
        - ``s_max`` -- a positive integer (default: ``None``); if set, only
          `(p^s)`-minimal polynomials for ``s <= s_max`` are computed
          (see below for details)
  }}}
- To one line:
  {{{#!diff
-        raise ValueError(
-            "A*G not zero mod %s^%s" % (p, t-1))
+        raise ValueError("A*G not zero mod %s^%s" % (p, t-1))
  }}}
- The `assert`s are just checking that the Smith normal form is correct? I know its considered good form, but all `assert`s are (currently) checked in Sage.
- This break is strange:
  {{{#!diff
-    return sum(c//p * X**i for
-               i, c in enumerate(f.list())
+    return sum(c//p * X**i for i, c in enumerate(f.list())
                if c % p == 0)
  }}}
- Move the description of what the method does before the `INPUT:` and `OUTPUT:`. It makes it easier to parse and (IMO) is more important information.
- Use the Sage macro `\ZZ` instead of `\mathbb{Z}`. Same for `\QQ`.
- Add some whitespace around the latex. While it doesn't make a difference in the html/pdf rendered doc, it makes it easier to read when using the `?`.
- You can freely split lines in `.. MATH::` blocks.



---

archive/issue_comments_301505.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-03T06:48:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301505",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_301506.json:
```json
{
    "body": "Replying to [comment:8 tscrim]:\n> Some very minor points:\n\n\nThank you for your comments. I pushed changes. \n\n> \n> - References should go in the master reference file.\n\n\ndone. This required merging a 6.5.rc1 (until now, the branch was based on 6.4 which had no master reference file).\n\n> - The `assert`s are just checking that the Smith normal form is correct? I know its considered good form, but all `assert`s are (currently) checked in Sage.\n\n\nYes, and to recall what matrix is what. I commented out those asserts checking Smith normal form.\nThere are several other asserts scattered through the code checking that our own code here works as expected. I kept those.\n\n> - Move the description of what the method does before the `INPUT:` and `OUTPUT:`. It makes it easier to parse and (IMO) is more important information.\n\n\nI did this in two instances; it does not seem to be trivial because the information from the input section is somehow needed. So this introduces some redundancy.\n\n> - Add some whitespace around the latex. While it doesn't make a difference in the html/pdf rendered doc, it makes it easier to read when using the `?`.\n\n\nPlease be more specific where you want to have whitespace added. There is quite a number of LaTeX formulae throughout the module.",
    "created_at": "2017-01-03T06:53:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301506",
    "user": "https://github.com/cheuberg"
}
```

Replying to [comment:8 tscrim]:
> Some very minor points:


Thank you for your comments. I pushed changes. 

> 
> - References should go in the master reference file.


done. This required merging a 6.5.rc1 (until now, the branch was based on 6.4 which had no master reference file).

> - The `assert`s are just checking that the Smith normal form is correct? I know its considered good form, but all `assert`s are (currently) checked in Sage.


Yes, and to recall what matrix is what. I commented out those asserts checking Smith normal form.
There are several other asserts scattered through the code checking that our own code here works as expected. I kept those.

> - Move the description of what the method does before the `INPUT:` and `OUTPUT:`. It makes it easier to parse and (IMO) is more important information.


I did this in two instances; it does not seem to be trivial because the information from the input section is somehow needed. So this introduces some redundancy.

> - Add some whitespace around the latex. While it doesn't make a difference in the html/pdf rendered doc, it makes it easier to read when using the `?`.


Please be more specific where you want to have whitespace added. There is quite a number of LaTeX formulae throughout the module.



---

archive/issue_comments_301507.json:
```json
{
    "body": "Dear Travis,\n\nReplying to [comment:8 tscrim]:\n> - `INPUT`'s should not end in a period. One of the longer ones should be changed to:\n>   {{{\n>     - ``G`` -- a matrix over `D[X]`; the columns of\n>       `\\begin{pmatrix}p^{t-1}I& G\\end{pmatrix}` are generators\n>       of `\\{ f\\in D[X]^d \\mid Af \\equiv 0\\pmod{p^{t-1}}\\}`;\n>       can be set to ``None`` if ``t`` is zero\n>   }}}\n\n\nI agree that constructs like\n\n```\n``G`` -- a matrix over `D[X]`\n```\nshould not end in a period (by our new convention), but\nthe part after the first `;` is a proper English sentence, thus I think it should end in a period.\n\nBest, Daniel",
    "created_at": "2017-01-03T10:19:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301507",
    "user": "https://github.com/dkrenn"
}
```

Dear Travis,

Replying to [comment:8 tscrim]:
> - `INPUT`'s should not end in a period. One of the longer ones should be changed to:
>   {{{
>     - ``G`` -- a matrix over `D[X]`; the columns of
>       `\begin{pmatrix}p^{t-1}I& G\end{pmatrix}` are generators
>       of `\{ f\in D[X]^d \mid Af \equiv 0\pmod{p^{t-1}}\}`;
>       can be set to ``None`` if ``t`` is zero
>   }}}


I agree that constructs like

```
``G`` -- a matrix over `D[X]`
```
should not end in a period (by our new convention), but
the part after the first `;` is a proper English sentence, thus I think it should end in a period.

Best, Daniel



---

archive/issue_comments_301508.json:
```json
{
    "body": "Replying to [comment:11 dkrenn]:\n> [...], but\n> the part after the first `;` is a proper English sentence, thus I think it should end in a period.\n\n\nMaybe this would be a good compromise:\n\n```\n  - ``G`` -- a matrix over `D[X]`\n\n    The columns of\n    `\\begin{pmatrix}p^{t-1}I& G\\end{pmatrix}` are generators\n    of `\\{ f\\in D[X]^d \\mid Af \\equiv 0\\pmod{p^{t-1}}\\}`.\n    This parameter can be set to ``None`` if ``t`` is zero.\n```",
    "created_at": "2017-01-03T11:22:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301508",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:11 dkrenn]:
> [...], but
> the part after the first `;` is a proper English sentence, thus I think it should end in a period.


Maybe this would be a good compromise:

```
  - ``G`` -- a matrix over `D[X]`

    The columns of
    `\begin{pmatrix}p^{t-1}I& G\end{pmatrix}` are generators
    of `\{ f\in D[X]^d \mid Af \equiv 0\pmod{p^{t-1}}\}`.
    This parameter can be set to ``None`` if ``t`` is zero.
```



---

archive/issue_comments_301509.json:
```json
{
    "body": "Redundancy is not necessarily a bad thing, especially when it comes to documenting inputs.\n\nAlso, why did you leave in the `.. TODO::` about the tests? I feel like that could be easily done.\n\nFor the latex and spacing, I think this is the worst one (I'm also okay with no space after `\\max`):\n\n```diff\n-        For `0<t\\le \\max\\mathcal{S}`, a `(p^t)`-minimal polynomial is\n-        For `0 < t \\le \\max \\mathcal{S}`, a `(p^t)`-minimal polynomial is\n         given by `\\nu_s` where\n-        `s=\\min\\{ r\\in\\mathcal{S}\\mid r\\ge t\\}`.\n-        For `t>\\max\\mathcal{S}`, the minimal polynomial of `B` is\n+        `s = \\min\\{ r \\in \\mathcal{S} \\mid r \\ge t\\}`.\n+        For `t > \\max \\mathcal{S}`, the minimal polynomial of `B` is\n         also a `(p^t)`-minimal polynomial.\n```\n\nAlso, for `null_ideal`, I would be a bit more verbose and document it as:\n\n```diff\n     def null_ideal(self, b=0):\n         r\"\"\"\n-        Return the `(b)`-ideal `N_{(b)}(B)=\\{f\\in \\ZZ[X] \\mid f(B)\\in M_n(b\\ZZ)\\}` where `B`\n-        is this matrix.\n+        Return the null ideal corresponding to ``b`` of ``self``.\n+\n+        Let `B` be an `n \\times n` matrix. The *null ideal* of `b`, or `(b)`-ideal, is\n+\n+        .. MATH::\n+\n+            N_{(b)}(B) = \\{f \\in \\ZZ[X] \\mid f(B) \\in M_n(b\\ZZ)\\}.\n+\n```\n\nFor `integer_valued_polynomials`, I would expect, based on the method name, that the output would be a list/tuple of polynomials. Also, overall, I'm far less convinced than other people about the necessity of an `OUTPUT` block when the documentation clearly described the output.\n\nI like the compromise less than just allowing the periods. While I would like to adhere more to our (long standing) conventions of allowing things closer to run-on sentences to not end in periods in `INPUT` bullets, this is long enough that I am okay with it going in.",
    "created_at": "2017-01-03T14:11:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301509",
    "user": "https://github.com/tscrim"
}
```

Redundancy is not necessarily a bad thing, especially when it comes to documenting inputs.

Also, why did you leave in the `.. TODO::` about the tests? I feel like that could be easily done.

For the latex and spacing, I think this is the worst one (I'm also okay with no space after `\max`):

```diff
-        For `0<t\le \max\mathcal{S}`, a `(p^t)`-minimal polynomial is
-        For `0 < t \le \max \mathcal{S}`, a `(p^t)`-minimal polynomial is
         given by `\nu_s` where
-        `s=\min\{ r\in\mathcal{S}\mid r\ge t\}`.
-        For `t>\max\mathcal{S}`, the minimal polynomial of `B` is
+        `s = \min\{ r \in \mathcal{S} \mid r \ge t\}`.
+        For `t > \max \mathcal{S}`, the minimal polynomial of `B` is
         also a `(p^t)`-minimal polynomial.
```

Also, for `null_ideal`, I would be a bit more verbose and document it as:

```diff
     def null_ideal(self, b=0):
         r"""
-        Return the `(b)`-ideal `N_{(b)}(B)=\{f\in \ZZ[X] \mid f(B)\in M_n(b\ZZ)\}` where `B`
-        is this matrix.
+        Return the null ideal corresponding to ``b`` of ``self``.
+
+        Let `B` be an `n \times n` matrix. The *null ideal* of `b`, or `(b)`-ideal, is
+
+        .. MATH::
+
+            N_{(b)}(B) = \{f \in \ZZ[X] \mid f(B) \in M_n(b\ZZ)\}.
+
```

For `integer_valued_polynomials`, I would expect, based on the method name, that the output would be a list/tuple of polynomials. Also, overall, I'm far less convinced than other people about the necessity of an `OUTPUT` block when the documentation clearly described the output.

I like the compromise less than just allowing the periods. While I would like to adhere more to our (long standing) conventions of allowing things closer to run-on sentences to not end in periods in `INPUT` bullets, this is long enough that I am okay with it going in.



---

archive/issue_comments_301510.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-03T15:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301510",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_301511.json:
```json
{
    "body": "Replying to [comment:13 tscrim]:\n> Also, why did you leave in the `.. TODO::` about the tests? I feel like that could be easily done.\n\n\nBecause it does not work: First problem is that the first step (`prime_candidates`) needs Frobenius Rational Form and this is only implemented over ZZ.\n\nNext problem is some kind of bug in lifting, cf. https://ask.sagemath.org/question/35555/lifting-a-matrix-from-mathbbqyy-1/ .\n\nAt this point, we stopped trying and decided to concentrate on the integer case first.\n\n> For the latex and spacing, I think this is the worst one (I'm also okay with no space after `\\max`):\n\n\ndone.\n\n\n> Also, for `null_ideal`, I would be a bit more verbose and document it as:\n\n\ndone (in slightly different wording). This concerns the documentation in `matrix_integer_dense`.\nIn `compute_J_ideal.py`, the explanation is at the top of the module.\n\n> For `integer_valued_polynomials`, I would expect, based on the method name, that the output would be a list/tuple of polynomials.\n\n\nThe set of integer valued polynomials of the matrix `B = matrix(ZZ, [[1, 0, 1], [1, -2, -1], [10, 0, 0]])` is\n`(x<sup>3+x</sup>2\u221212x\u221220)QQ[X]+ZZ[X]+(1/4)(x^2+3x+2)ZZ[X].`\nAs a `ZZ[X]` module, this is not finitely generated. It is not a `QQ[X]` module. Therefore, its description needs two components. Therefore, the output is a pair where the second component is a list of polynomials.\n\n> I like the compromise less than just allowing the periods. While I would like to adhere more to our (long standing) conventions of allowing things closer to run-on sentences to not end in periods in `INPUT` bullets, this is long enough that I am okay with it going in.\n\n\nCan we leave it in the current form?",
    "created_at": "2017-01-03T15:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301511",
    "user": "https://github.com/cheuberg"
}
```

Replying to [comment:13 tscrim]:
> Also, why did you leave in the `.. TODO::` about the tests? I feel like that could be easily done.


Because it does not work: First problem is that the first step (`prime_candidates`) needs Frobenius Rational Form and this is only implemented over ZZ.

Next problem is some kind of bug in lifting, cf. https://ask.sagemath.org/question/35555/lifting-a-matrix-from-mathbbqyy-1/ .

At this point, we stopped trying and decided to concentrate on the integer case first.

> For the latex and spacing, I think this is the worst one (I'm also okay with no space after `\max`):


done.


> Also, for `null_ideal`, I would be a bit more verbose and document it as:


done (in slightly different wording). This concerns the documentation in `matrix_integer_dense`.
In `compute_J_ideal.py`, the explanation is at the top of the module.

> For `integer_valued_polynomials`, I would expect, based on the method name, that the output would be a list/tuple of polynomials.


The set of integer valued polynomials of the matrix `B = matrix(ZZ, [[1, 0, 1], [1, -2, -1], [10, 0, 0]])` is
`(x<sup>3+x</sup>2−12x−20)QQ[X]+ZZ[X]+(1/4)(x^2+3x+2)ZZ[X].`
As a `ZZ[X]` module, this is not finitely generated. It is not a `QQ[X]` module. Therefore, its description needs two components. Therefore, the output is a pair where the second component is a list of polynomials.

> I like the compromise less than just allowing the periods. While I would like to adhere more to our (long standing) conventions of allowing things closer to run-on sentences to not end in periods in `INPUT` bullets, this is long enough that I am okay with it going in.


Can we leave it in the current form?



---

archive/issue_comments_301512.json:
```json
{
    "body": "Replying to [comment:15 cheuberg]:\n> Replying to [comment:13 tscrim]:\n> > Also, why did you leave in the `.. TODO::` about the tests? I feel like that could be easily done.\n\n> \n> Because it does not work: First problem is that the first step (`prime_candidates`) needs Frobenius Rational Form and this is only implemented over ZZ.\n> \n> Next problem is some kind of bug in lifting, cf. https://ask.sagemath.org/question/35555/lifting-a-matrix-from-mathbbqyy-1/ .\n\n\nCould you add these to the `.. TODO::`, because I think anyone else reading the code will ask the same question I did.\n\n> > For `integer_valued_polynomials`, I would expect, based on the method name, that the output would be a list/tuple of polynomials.\n\n> \n> The set of integer valued polynomials of the matrix `B = matrix(ZZ, [[1, 0, 1], [1, -2, -1], [10, 0, 0]])` is\n> `(x<sup>3+x</sup>2\u221212x\u221220)QQ[X]+ZZ[X]+(1/4)(x^2+3x+2)ZZ[X].`\n> As a `ZZ[X]` module, this is not finitely generated. It is not a `QQ[X]` module. Therefore, its description needs two components. Therefore, the output is a pair where the second component is a list of polynomials.\n\n\nI think a bit more verbose name is warranted here, something like `generators_integer_valued_polynomials`. If you want the method to be named `integer_valued_polynomials`, then it should return the set (algebra?) of integer valued polynomials.\n\n> > I like the compromise less than just allowing the periods. While I would like to adhere more to our (long standing) conventions of allowing things closer to run-on sentences to not end in periods in `INPUT` bullets, this is long enough that I am okay with it going in.\n\n> \n> Can we leave it in the current form?\n\n\nYes.",
    "created_at": "2017-01-04T12:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301512",
    "user": "https://github.com/tscrim"
}
```

Replying to [comment:15 cheuberg]:
> Replying to [comment:13 tscrim]:
> > Also, why did you leave in the `.. TODO::` about the tests? I feel like that could be easily done.

> 
> Because it does not work: First problem is that the first step (`prime_candidates`) needs Frobenius Rational Form and this is only implemented over ZZ.
> 
> Next problem is some kind of bug in lifting, cf. https://ask.sagemath.org/question/35555/lifting-a-matrix-from-mathbbqyy-1/ .


Could you add these to the `.. TODO::`, because I think anyone else reading the code will ask the same question I did.

> > For `integer_valued_polynomials`, I would expect, based on the method name, that the output would be a list/tuple of polynomials.

> 
> The set of integer valued polynomials of the matrix `B = matrix(ZZ, [[1, 0, 1], [1, -2, -1], [10, 0, 0]])` is
> `(x<sup>3+x</sup>2−12x−20)QQ[X]+ZZ[X]+(1/4)(x^2+3x+2)ZZ[X].`
> As a `ZZ[X]` module, this is not finitely generated. It is not a `QQ[X]` module. Therefore, its description needs two components. Therefore, the output is a pair where the second component is a list of polynomials.


I think a bit more verbose name is warranted here, something like `generators_integer_valued_polynomials`. If you want the method to be named `integer_valued_polynomials`, then it should return the set (algebra?) of integer valued polynomials.

> > I like the compromise less than just allowing the periods. While I would like to adhere more to our (long standing) conventions of allowing things closer to run-on sentences to not end in periods in `INPUT` bullets, this is long enough that I am okay with it going in.

> 
> Can we leave it in the current form?


Yes.



---

archive/issue_comments_301513.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2017-01-04T13:46:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301513",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_301514.json:
```json
{
    "body": "Replying to [comment:16 tscrim]:\n> Replying to [comment:15 cheuberg]:\n> > Replying to [comment:13 tscrim]:\n> > > Also, why did you leave in the `.. TODO::` about the tests? I feel like that could be easily done.\n\n> > \n> > Because it does not work: First problem is that the first step (`prime_candidates`) needs Frobenius Rational Form and this is only implemented over ZZ.\n> > \n> > Next problem is some kind of bug in lifting, cf. https://ask.sagemath.org/question/35555/lifting-a-matrix-from-mathbbqyy-1/ .\n\n> \n> Could you add these to the `.. TODO::`, because I think anyone else reading the code will ask the same question I did.\n\n\nDone.\n \n> I think a bit more verbose name is warranted here, something like `generators_integer_valued_polynomials`. If you want the method to be named `integer_valued_polynomials`, then it should return the set (algebra?) of integer valued polynomials.\n\n\nI renamed the method to `integer_valued_polynomials_generators` for the sake of tab completion.",
    "created_at": "2017-01-04T13:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301514",
    "user": "https://github.com/cheuberg"
}
```

Replying to [comment:16 tscrim]:
> Replying to [comment:15 cheuberg]:
> > Replying to [comment:13 tscrim]:
> > > Also, why did you leave in the `.. TODO::` about the tests? I feel like that could be easily done.

> > 
> > Because it does not work: First problem is that the first step (`prime_candidates`) needs Frobenius Rational Form and this is only implemented over ZZ.
> > 
> > Next problem is some kind of bug in lifting, cf. https://ask.sagemath.org/question/35555/lifting-a-matrix-from-mathbbqyy-1/ .

> 
> Could you add these to the `.. TODO::`, because I think anyone else reading the code will ask the same question I did.


Done.
 
> I think a bit more verbose name is warranted here, something like `generators_integer_valued_polynomials`. If you want the method to be named `integer_valued_polynomials`, then it should return the set (algebra?) of integer valued polynomials.


I renamed the method to `integer_valued_polynomials_generators` for the sake of tab completion.



---

archive/issue_comments_301515.json:
```json
{
    "body": "LGTM. Daniel, any other comments before we set this to a positive review.",
    "created_at": "2017-01-04T23:19:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301515",
    "user": "https://github.com/tscrim"
}
```

LGTM. Daniel, any other comments before we set this to a positive review.



---

archive/issue_comments_301516.json:
```json
{
    "body": "Replying to [comment:19 tscrim]:\n> LGTM. Daniel, any other comments before we set this to a positive review.\n\n\nFine for me as well.",
    "created_at": "2017-01-05T08:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301516",
    "user": "https://github.com/dkrenn"
}
```

Replying to [comment:19 tscrim]:
> LGTM. Daniel, any other comments before we set this to a positive review.


Fine for me as well.



---

archive/issue_comments_301517.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-01-05T08:19:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301517",
    "user": "https://github.com/dkrenn"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_events_057929.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-01-18T20:39:00Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21992#event-57929"
}
```



---

archive/issue_comments_301518.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-01-18T20:39:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21992",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21992#issuecomment-301518",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
