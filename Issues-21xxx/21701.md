# Issue 21701: Compiling sagelib with clang on OS X (Sierra): failure in cythonized sage/symbolic/expression.pyx

archive/issues_021464.json:
```json
{
    "assignees": [],
    "body": "I am hitting the following error in compiling sagelib with clang\n\n```\n[sagelib-7.4.rc1] [1/9] clang -fno-strict-aliasing -I/Users/fbissey/build/sage/local/var/tmp/sage/build/python2-2.7.10.p3/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/cysignals -I/Users/fbissey/build/sage/local/include -I/Users/fbissey/build/sage/local/include/python2.7 -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/fbissey/build/sage/src -I/Users/fbissey/build/sage/src/sage/ext -I/Users/fbissey/build/sage/src/build/cythonized -I/Users/fbissey/build/sage/src/build/cythonized/sage/ext -I/Users/fbissey/build/sage/local/include/python2.7 -c /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp -o build/temp.macosx-10.9-x86_64-2.7/Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.o -std=c++11 -fno-strict-aliasing\n[sagelib-7.4.rc1] In file included from /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:\n[sagelib-7.4.rc1] In file included from /Users/fbissey/build/sage/src/sage/symbolic/ginac_wrap.h:11:\n[sagelib-7.4.rc1] In file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:38:\n[sagelib-7.4.rc1] /Users/fbissey/build/sage/local/include/pynac/integral.h:44:5: warning: 'GiNaC::integral::evalf' hides overloaded virtual function [-Woverloaded-virtual]\n[sagelib-7.4.rc1]         ex evalf(int level=0) const;\n[sagelib-7.4.rc1]            ^\n[sagelib-7.4.rc1] /Users/fbissey/build/sage/local/include/pynac/basic.h:176:13: note: hidden overloaded virtual function 'GiNaC::basic::evalf' declared here: different number of parameters (2 vs 1)\n[sagelib-7.4.rc1]         virtual ex evalf(int level = 0, PyObject* parent=nullptr) const;\n[sagelib-7.4.rc1]                    ^\n[sagelib-7.4.rc1] /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:27231:30: error: no member named 'operator!=' in 'std::__1::__list_const_iterator<GiNaC::ex, void *>'\n[sagelib-7.4.rc1]     __pyx_t_2 = (__pyx_v_itr.operator!=(__pyx_v_lstend) != 0);\n[sagelib-7.4.rc1]                  ~~~~~~~~~~~ ^\n[sagelib-7.4.rc1] /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:27446:30: error: no member named 'operator!=' in 'std::__1::__list_const_iterator<GiNaC::ex, void *>'\n[sagelib-7.4.rc1]     __pyx_t_3 = (__pyx_v_itr.operator!=(__pyx_v_found.end()) != 0);\n[sagelib-7.4.rc1]                  ~~~~~~~~~~~ ^\n[sagelib-7.4.rc1] /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:28649:30: error: no member named 'operator!=' in 'std::__1::__tree_const_iterator<GiNaC::ex, std::__1::__tree_node<GiNaC::ex, void *> *, long>'\n[sagelib-7.4.rc1]     __pyx_t_3 = (__pyx_v_itr.operator!=(__pyx_v_sym_set.end()) != 0);\n[sagelib-7.4.rc1]                  ~~~~~~~~~~~ ^\n[sagelib-7.4.rc1] 1 warning and 3 errors generated.\n```\nThis looks like a `pynac` or `pynac` related problem.\n\nCC:  @rwst @mkoeppe\n\nBranch/Commit: **[`86b2c2d`](https://github.com/sagemath/sagetrac-mirror/commit/86b2c2d09f0b907e10a2557b68a61d14305bb52a)**\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Fran\u00e7ois Bissey, Dima Pasechnik**\n\nComponent: **porting**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21701_\n\n",
    "closed_at": "2016-11-27T16:45:33Z",
    "created_at": "2016-10-14T01:47:35Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Compiling sagelib with clang on OS X (Sierra): failure in cythonized sage/symbolic/expression.pyx",
    "type": "issue",
    "updated_at": "2016-11-27T16:45:33Z",
    "url": "https://github.com/sagemath/sage/issues/21701",
    "user": "https://github.com/kiwifb"
}
```
I am hitting the following error in compiling sagelib with clang

```
[sagelib-7.4.rc1] [1/9] clang -fno-strict-aliasing -I/Users/fbissey/build/sage/local/var/tmp/sage/build/python2-2.7.10.p3/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/cysignals -I/Users/fbissey/build/sage/local/include -I/Users/fbissey/build/sage/local/include/python2.7 -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/fbissey/build/sage/src -I/Users/fbissey/build/sage/src/sage/ext -I/Users/fbissey/build/sage/src/build/cythonized -I/Users/fbissey/build/sage/src/build/cythonized/sage/ext -I/Users/fbissey/build/sage/local/include/python2.7 -c /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp -o build/temp.macosx-10.9-x86_64-2.7/Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.o -std=c++11 -fno-strict-aliasing
[sagelib-7.4.rc1] In file included from /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:
[sagelib-7.4.rc1] In file included from /Users/fbissey/build/sage/src/sage/symbolic/ginac_wrap.h:11:
[sagelib-7.4.rc1] In file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:38:
[sagelib-7.4.rc1] /Users/fbissey/build/sage/local/include/pynac/integral.h:44:5: warning: 'GiNaC::integral::evalf' hides overloaded virtual function [-Woverloaded-virtual]
[sagelib-7.4.rc1]         ex evalf(int level=0) const;
[sagelib-7.4.rc1]            ^
[sagelib-7.4.rc1] /Users/fbissey/build/sage/local/include/pynac/basic.h:176:13: note: hidden overloaded virtual function 'GiNaC::basic::evalf' declared here: different number of parameters (2 vs 1)
[sagelib-7.4.rc1]         virtual ex evalf(int level = 0, PyObject* parent=nullptr) const;
[sagelib-7.4.rc1]                    ^
[sagelib-7.4.rc1] /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:27231:30: error: no member named 'operator!=' in 'std::__1::__list_const_iterator<GiNaC::ex, void *>'
[sagelib-7.4.rc1]     __pyx_t_2 = (__pyx_v_itr.operator!=(__pyx_v_lstend) != 0);
[sagelib-7.4.rc1]                  ~~~~~~~~~~~ ^
[sagelib-7.4.rc1] /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:27446:30: error: no member named 'operator!=' in 'std::__1::__list_const_iterator<GiNaC::ex, void *>'
[sagelib-7.4.rc1]     __pyx_t_3 = (__pyx_v_itr.operator!=(__pyx_v_found.end()) != 0);
[sagelib-7.4.rc1]                  ~~~~~~~~~~~ ^
[sagelib-7.4.rc1] /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:28649:30: error: no member named 'operator!=' in 'std::__1::__tree_const_iterator<GiNaC::ex, std::__1::__tree_node<GiNaC::ex, void *> *, long>'
[sagelib-7.4.rc1]     __pyx_t_3 = (__pyx_v_itr.operator!=(__pyx_v_sym_set.end()) != 0);
[sagelib-7.4.rc1]                  ~~~~~~~~~~~ ^
[sagelib-7.4.rc1] 1 warning and 3 errors generated.
```
This looks like a `pynac` or `pynac` related problem.

CC:  @rwst @mkoeppe

Branch/Commit: **[`86b2c2d`](https://github.com/sagemath/sagetrac-mirror/commit/86b2c2d09f0b907e10a2557b68a61d14305bb52a)**

Reviewer: **Jeroen Demeyer**

Author: **Fran√ßois Bissey, Dima Pasechnik**

Component: **porting**

_Issue created by migration from https://trac.sagemath.org/ticket/21701_





---

archive/issue_events_301844.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-14T01:47:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301844"
}
```



---

archive/issue_events_301845.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-14T01:47:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting",
    "label_color": "0000b0",
    "label_name": "c: porting",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301845"
}
```



---

archive/issue_events_301846.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-14T01:47:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301846"
}
```



---

archive/issue_events_301847.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-14T01:47:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301847"
}
```



---

archive/issue_comments_318946.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nDo you have a clue Ralph? I have a feeling this will require some work `pynac` side rather than `sage` side, but I don't mix very well with `c++`.",
    "created_at": "2016-10-14T01:49:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318946",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:1" align="right">comment:1</div>

Do you have a clue Ralph? I have a feeling this will require some work `pynac` side rather than `sage` side, but I don't mix very well with `c++`.



---

archive/issue_comments_318947.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nCan you try with `clang -stdlib=libstdc++ ...`?",
    "created_at": "2016-10-14T06:39:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318947",
    "user": "https://github.com/rwst"
}
```

<div id="comment:2" align="right">comment:2</div>

Can you try with `clang -stdlib=libstdc++ ...`?



---

archive/issue_comments_318948.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI just noticed that clang is used instead of clang++, that may have an impact. I will try to rectify that and if it doesn't work try what you said.",
    "created_at": "2016-10-14T07:01:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318948",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

I just noticed that clang is used instead of clang++, that may have an impact. I will try to rectify that and if it doesn't work try what you said.



---

archive/issue_comments_318949.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nNo luck. Difficult to force `clang++` I had to go manual\n\n```\nMirage:src fbissey$ clang++ -fno-strict-aliasing -I/Users/fbissey/build/sage/local/var/tmp/sage/build/python2-2.7.10.p3/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/cysignals -I/Users/fbissey/build/sage/local/include -I/Users/fbissey/build/sage/local/include/python2.7 -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/fbissey/build/sage/src -I/Users/fbissey/build/sage/src/sage/ext -I/Users/fbissey/build/sage/src/build/cythonized -I/Users/fbissey/build/sage/src/build/cythonized/sage/ext -I/Users/fbissey/build/sage/local/include/python2.7 -c /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp -o build/temp.macosx-10.9-x86_64-2.7/Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.o -std=c++11 -fno-strict-aliasing -stdlib=libstdc++\nIn file included from /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:\nIn file included from /Users/fbissey/build/sage/src/sage/symbolic/ginac_wrap.h:11:\nIn file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:28:\nIn file included from /Users/fbissey/build/sage/local/include/pynac/basic.h:40:\nIn file included from /Users/fbissey/build/sage/local/include/pynac/registrar.h:30:\n/Users/fbissey/build/sage/local/include/pynac/class_info.h:43:31: error: no member named 'move' in namespace 'std'; did you mean 'modf'?\n        class_info(OPT  o) : options(std::move(o)), next(first), parent(nullptr)\n                                     ^~~~~~~~~\n                                     modf\n/usr/include/math.h:407:15: note: 'modf' declared here\nextern double modf(double, double *);\n              ^\nIn file included from /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:\nIn file included from /Users/fbissey/build/sage/src/sage/symbolic/ginac_wrap.h:11:\nIn file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:28:\nIn file included from /Users/fbissey/build/sage/local/include/pynac/basic.h:40:\nIn file included from /Users/fbissey/build/sage/local/include/pynac/registrar.h:31:\n/Users/fbissey/build/sage/local/include/pynac/print.h:244:21: error: no type named 'unique_ptr' in namespace 'std'\n        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}\n                      ~~~~~^\n/Users/fbissey/build/sage/local/include/pynac/print.h:244:31: error: expected ')'\n        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}\n                                     ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:244:15: note: to match this '('\n        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}\n                     ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:269:7: error: no type named 'unique_ptr' in namespace 'std'\n        std::unique_ptr<print_functor_impl> impl;\n        ~~~~~^\n/Users/fbissey/build/sage/local/include/pynac/print.h:269:17: error: expected member name or ';' after declaration specifiers\n        std::unique_ptr<print_functor_impl> impl;\n        ~~~~~~~~~~~~~~~^\n/Users/fbissey/build/sage/local/include/pynac/print.h:242:20: error: member initializer 'impl' does not name a non-static data member or base class\n        print_functor() : impl(nullptr) {}\n                          ^~~~~~~~~~~~~\n/Users/fbissey/build/sage/local/include/pynac/print.h:243:58: error: no member named 'impl' in 'GiNaC::print_functor'\n        print_functor(const print_functor & other) : impl(other.impl.get() ? other.impl->duplicate() : nullptr) {}\n                                                          ~~~~~ ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:243:77: error: no member named 'impl' in 'GiNaC::print_functor'\n        print_functor(const print_functor & other) : impl(other.impl.get() ? other.impl->duplicate() : nullptr) {}\n                                                                             ~~~~~ ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:244:71: error: no member named 'move' in namespace 'std'\n        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}\n                                                                        ~~~~~^\n/Users/fbissey/build/sage/local/include/pynac/print.h:244:76: error: use of undeclared identifier 'impl_'\n        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}\n                                                                                  ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:247:58: error: member initializer 'impl' does not name a non-static data member or base class\n        print_functor(void f(const T &, const C &, unsigned)) : impl(new print_ptrfun_handler<T, C>(f)) {}\n                                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/fbissey/build/sage/local/include/pynac/print.h:250:59: error: member initializer 'impl' does not name a non-static data member or base class\n        print_functor(void (T::*f)(const C &, unsigned) const) : impl(new print_memfun_handler<T, C>(f)) {}\n                                                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/Users/fbissey/build/sage/local/include/pynac/print.h:255:34: error: no member named 'impl' in 'GiNaC::print_functor'\n                        print_functor_impl *p = other.impl.get();\n                                                ~~~~~ ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:256:4: error: use of undeclared identifier 'impl'\n                        impl.reset(p ? other.impl->duplicate() : nullptr);\n                        ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:256:25: error: no member named 'impl' in 'GiNaC::print_functor'\n                        impl.reset(p ? other.impl->duplicate() : nullptr);\n                                       ~~~~~ ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:263:5: error: use of undeclared identifier 'impl'\n                (*impl)(obj, c, level);\n                  ^\n/Users/fbissey/build/sage/local/include/pynac/print.h:266:33: error: use of undeclared identifier 'impl'\n        bool is_valid() const { return impl.get(); }\n                                       ^\nIn file included from /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:\nIn file included from /Users/fbissey/build/sage/src/sage/symbolic/ginac_wrap.h:11:\nIn file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:28:\n/Users/fbissey/build/sage/local/include/pynac/basic.h:364:60: error: no member named 'forward' in namespace 'std'\n        return const_cast<B &>(static_cast<const B &>((new B(std::forward<Args>(args)...))->setflag(status_flags::dynallocated)));\n                                                             ~~~~~^\n/Users/fbissey/build/sage/local/include/pynac/basic.h:364:68: error: 'Args' does not refer to a value\n        return const_cast<B &>(static_cast<const B &>((new B(std::forward<Args>(args)...))->setflag(status_flags::dynallocated)));\n                                                                          ^\n/Users/fbissey/build/sage/local/include/pynac/basic.h:361:31: note: declared here\ntemplate<class B, typename... Args>\n                              ^\nfatal error: too many errors emitted, stopping now [-ferror-limit=]\n20 errors generated.\n```",
    "created_at": "2016-10-14T07:17:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318949",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

No luck. Difficult to force `clang++` I had to go manual

```
Mirage:src fbissey$ clang++ -fno-strict-aliasing -I/Users/fbissey/build/sage/local/var/tmp/sage/build/python2-2.7.10.p3/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/cysignals -I/Users/fbissey/build/sage/local/include -I/Users/fbissey/build/sage/local/include/python2.7 -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/fbissey/build/sage/src -I/Users/fbissey/build/sage/src/sage/ext -I/Users/fbissey/build/sage/src/build/cythonized -I/Users/fbissey/build/sage/src/build/cythonized/sage/ext -I/Users/fbissey/build/sage/local/include/python2.7 -c /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp -o build/temp.macosx-10.9-x86_64-2.7/Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.o -std=c++11 -fno-strict-aliasing -stdlib=libstdc++
In file included from /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:
In file included from /Users/fbissey/build/sage/src/sage/symbolic/ginac_wrap.h:11:
In file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:28:
In file included from /Users/fbissey/build/sage/local/include/pynac/basic.h:40:
In file included from /Users/fbissey/build/sage/local/include/pynac/registrar.h:30:
/Users/fbissey/build/sage/local/include/pynac/class_info.h:43:31: error: no member named 'move' in namespace 'std'; did you mean 'modf'?
        class_info(OPT  o) : options(std::move(o)), next(first), parent(nullptr)
                                     ^~~~~~~~~
                                     modf
/usr/include/math.h:407:15: note: 'modf' declared here
extern double modf(double, double *);
              ^
In file included from /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:
In file included from /Users/fbissey/build/sage/src/sage/symbolic/ginac_wrap.h:11:
In file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:28:
In file included from /Users/fbissey/build/sage/local/include/pynac/basic.h:40:
In file included from /Users/fbissey/build/sage/local/include/pynac/registrar.h:31:
/Users/fbissey/build/sage/local/include/pynac/print.h:244:21: error: no type named 'unique_ptr' in namespace 'std'
        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}
                      ~~~~~^
/Users/fbissey/build/sage/local/include/pynac/print.h:244:31: error: expected ')'
        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}
                                     ^
/Users/fbissey/build/sage/local/include/pynac/print.h:244:15: note: to match this '('
        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}
                     ^
/Users/fbissey/build/sage/local/include/pynac/print.h:269:7: error: no type named 'unique_ptr' in namespace 'std'
        std::unique_ptr<print_functor_impl> impl;
        ~~~~~^
/Users/fbissey/build/sage/local/include/pynac/print.h:269:17: error: expected member name or ';' after declaration specifiers
        std::unique_ptr<print_functor_impl> impl;
        ~~~~~~~~~~~~~~~^
/Users/fbissey/build/sage/local/include/pynac/print.h:242:20: error: member initializer 'impl' does not name a non-static data member or base class
        print_functor() : impl(nullptr) {}
                          ^~~~~~~~~~~~~
/Users/fbissey/build/sage/local/include/pynac/print.h:243:58: error: no member named 'impl' in 'GiNaC::print_functor'
        print_functor(const print_functor & other) : impl(other.impl.get() ? other.impl->duplicate() : nullptr) {}
                                                          ~~~~~ ^
/Users/fbissey/build/sage/local/include/pynac/print.h:243:77: error: no member named 'impl' in 'GiNaC::print_functor'
        print_functor(const print_functor & other) : impl(other.impl.get() ? other.impl->duplicate() : nullptr) {}
                                                                             ~~~~~ ^
/Users/fbissey/build/sage/local/include/pynac/print.h:244:71: error: no member named 'move' in namespace 'std'
        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}
                                                                        ~~~~~^
/Users/fbissey/build/sage/local/include/pynac/print.h:244:76: error: use of undeclared identifier 'impl_'
        print_functor(std::unique_ptr<print_functor_impl> impl_) : impl(std::move(impl_)) {}
                                                                                  ^
/Users/fbissey/build/sage/local/include/pynac/print.h:247:58: error: member initializer 'impl' does not name a non-static data member or base class
        print_functor(void f(const T &, const C &, unsigned)) : impl(new print_ptrfun_handler<T, C>(f)) {}
                                                                ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/fbissey/build/sage/local/include/pynac/print.h:250:59: error: member initializer 'impl' does not name a non-static data member or base class
        print_functor(void (T::*f)(const C &, unsigned) const) : impl(new print_memfun_handler<T, C>(f)) {}
                                                                 ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
/Users/fbissey/build/sage/local/include/pynac/print.h:255:34: error: no member named 'impl' in 'GiNaC::print_functor'
                        print_functor_impl *p = other.impl.get();
                                                ~~~~~ ^
/Users/fbissey/build/sage/local/include/pynac/print.h:256:4: error: use of undeclared identifier 'impl'
                        impl.reset(p ? other.impl->duplicate() : nullptr);
                        ^
/Users/fbissey/build/sage/local/include/pynac/print.h:256:25: error: no member named 'impl' in 'GiNaC::print_functor'
                        impl.reset(p ? other.impl->duplicate() : nullptr);
                                       ~~~~~ ^
/Users/fbissey/build/sage/local/include/pynac/print.h:263:5: error: use of undeclared identifier 'impl'
                (*impl)(obj, c, level);
                  ^
/Users/fbissey/build/sage/local/include/pynac/print.h:266:33: error: use of undeclared identifier 'impl'
        bool is_valid() const { return impl.get(); }
                                       ^
In file included from /Users/fbissey/build/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:
In file included from /Users/fbissey/build/sage/src/sage/symbolic/ginac_wrap.h:11:
In file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:28:
/Users/fbissey/build/sage/local/include/pynac/basic.h:364:60: error: no member named 'forward' in namespace 'std'
        return const_cast<B &>(static_cast<const B &>((new B(std::forward<Args>(args)...))->setflag(status_flags::dynallocated)));
                                                             ~~~~~^
/Users/fbissey/build/sage/local/include/pynac/basic.h:364:68: error: 'Args' does not refer to a value
        return const_cast<B &>(static_cast<const B &>((new B(std::forward<Args>(args)...))->setflag(status_flags::dynallocated)));
                                                                          ^
/Users/fbissey/build/sage/local/include/pynac/basic.h:361:31: note: declared here
template<class B, typename... Args>
                              ^
fatal error: too many errors emitted, stopping now [-ferror-limit=]
20 errors generated.
```



---

archive/issue_comments_318950.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThe first error in the description comes from the following in the generated file\n\n```\n  /* \"sage/symbolic/expression.pyx\":4581\n *         cdef GExListIter itr = mlst.begin()\n *         cdef GExListIter lstend = mlst.end()\n *         while itr.is_not_equal(lstend):             # <<<<<<<<<<<<<<\n *             key = new_Expression_from_GEx(self._parent, itr.obj().lhs())\n *             val = new_Expression_from_GEx(self._parent, itr.obj().rhs())\n */\n  while (1) {\n    __pyx_t_2 = (__pyx_v_itr.operator!=(__pyx_v_lstend) != 0);\n    if (!__pyx_t_2) break;\n```\nThat's how the `while` from cython is transformed.",
    "created_at": "2016-10-14T07:31:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318950",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

The first error in the description comes from the following in the generated file

```
  /* "sage/symbolic/expression.pyx":4581
 *         cdef GExListIter itr = mlst.begin()
 *         cdef GExListIter lstend = mlst.end()
 *         while itr.is_not_equal(lstend):             # <<<<<<<<<<<<<<
 *             key = new_Expression_from_GEx(self._parent, itr.obj().lhs())
 *             val = new_Expression_from_GEx(self._parent, itr.obj().rhs())
 */
  while (1) {
    __pyx_t_2 = (__pyx_v_itr.operator!=(__pyx_v_lstend) != 0);
    if (!__pyx_t_2) break;
```
That's how the `while` from cython is transformed.



---

archive/issue_comments_318951.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nIs this Mac or Linux? Please state in the description.",
    "created_at": "2016-10-14T07:51:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318951",
    "user": "https://github.com/rwst"
}
```

<div id="comment:6" align="right">comment:6</div>

Is this Mac or Linux? Please state in the description.



---

archive/issue_events_301848.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-10-14T07:52:28Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "title_is": "Compiling sagelib with clang on OS X (Sierra): failure in sage/symbolic/expression.pyx - pynac problem",
    "title_was": "Compiling sagelib with clang: failure in sage/symbolic/expression.pyx - pynac problem",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301848"
}
```



---

archive/issue_events_301849.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-10-14T08:31:07Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "title_is": "Compiling sagelib with clang on OS X (Sierra): failure in cythonized sage/symbolic/expression.pyx",
    "title_was": "Compiling sagelib with clang on OS X (Sierra): failure in sage/symbolic/expression.pyx - pynac problem",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301849"
}
```



---

archive/issue_comments_318952.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAs you can see from https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a00344.html the libstdc++ has an `operator!=` member for `std::lst::const_iterator`. The definition is in stl_list.h. From the error it looks like the MacOS version does not have it, although Cython needs it. This is not a Pynac issue IMHO.",
    "created_at": "2016-10-14T08:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318952",
    "user": "https://github.com/rwst"
}
```

<div id="comment:8" align="right">comment:8</div>

As you can see from https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a00344.html the libstdc++ has an `operator!=` member for `std::lst::const_iterator`. The definition is in stl_list.h. From the error it looks like the MacOS version does not have it, although Cython needs it. This is not a Pynac issue IMHO.



---

archive/issue_comments_318953.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@rwst](#comment%3A8):\n> As you can see from https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a00344.html the libstdc++ has an `operator!=` member for `std::lst::const_iterator`. The definition is in stl_list.h. From the error it looks like the MacOS version does not have it, although Cython needs it. This is not a Pynac issue IMHO.\n\nThen somebody should test if this error happens only on OS X. So the question is: what happens with `clang` on Linux?",
    "created_at": "2016-10-14T08:46:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318953",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@rwst](#comment%3A8):
> As you can see from https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a00344.html the libstdc++ has an `operator!=` member for `std::lst::const_iterator`. The definition is in stl_list.h. From the error it looks like the MacOS version does not have it, although Cython needs it. This is not a Pynac issue IMHO.

Then somebody should test if this error happens only on OS X. So the question is: what happens with `clang` on Linux?



---

archive/issue_comments_318954.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nActually, using a command adapted from yours (clang-3.8.0):\n\n```\nclang -fno-strict-aliasing -I/home/ralf/sage/local/include/python2.7 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/home/ralf/sage/local/lib/python2.7/site-packages/cysignals -I/home/ralf/sage/local/include -I/home/ralf/sage/src/build/sage/local/include/python2.7 -I/home/ralf/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/ralf/sage/src/build -I/home/ralf/sage/src/build/sage/ext -I/home/ralf/sage/src/build/cythonized -I/home/ralf/sage/src/build/cythonized/sage/ext -I/home/ralf/sage/src/build/sage/local/include/python2.7 -c /home/ralf/sage/src/build/cythonized/sage/symbolic/expression.cpp -o /home/ralf/sage/src/build/cythonized/sage/symbolic/expression.o -std=c++11 -fno-strict-aliasing\n\nIn file included from /home/ralf/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:\nIn file included from /home/ralf/sage/src/build/cythonized/sage/symbolic/ginac_wrap.h:11:\nIn file included from /home/ralf/sage/local/include/pynac/ginac.h:38:\n/home/ralf/sage/local/include/pynac/integral.h:44:5: warning: \n      'GiNaC::integral::evalf' hides overloaded virtual function\n      [-Woverloaded-virtual]\n        ex evalf(int level=0) const;\n           ^\n/home/ralf/sage/local/include/pynac/basic.h:177:13: note: hidden overloaded\n      virtual function 'GiNaC::basic::evalf' declared here: different number of\n      parameters (2 vs 1)\n        virtual ex evalf(int level = 0, PyObject* parent=nullptr) const;\n                   ^\n1 warning generated.\n```\nSo no errors. But I have a full libstdc++ on system. So it is possible that your Xcode version is missing a part of it.",
    "created_at": "2016-10-14T13:49:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318954",
    "user": "https://github.com/rwst"
}
```

<div id="comment:10" align="right">comment:10</div>

Actually, using a command adapted from yours (clang-3.8.0):

```
clang -fno-strict-aliasing -I/home/ralf/sage/local/include/python2.7 -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/home/ralf/sage/local/lib/python2.7/site-packages/cysignals -I/home/ralf/sage/local/include -I/home/ralf/sage/src/build/sage/local/include/python2.7 -I/home/ralf/sage/local/lib/python2.7/site-packages/numpy/core/include -I/home/ralf/sage/src/build -I/home/ralf/sage/src/build/sage/ext -I/home/ralf/sage/src/build/cythonized -I/home/ralf/sage/src/build/cythonized/sage/ext -I/home/ralf/sage/src/build/sage/local/include/python2.7 -c /home/ralf/sage/src/build/cythonized/sage/symbolic/expression.cpp -o /home/ralf/sage/src/build/cythonized/sage/symbolic/expression.o -std=c++11 -fno-strict-aliasing

In file included from /home/ralf/sage/src/build/cythonized/sage/symbolic/expression.cpp:336:
In file included from /home/ralf/sage/src/build/cythonized/sage/symbolic/ginac_wrap.h:11:
In file included from /home/ralf/sage/local/include/pynac/ginac.h:38:
/home/ralf/sage/local/include/pynac/integral.h:44:5: warning: 
      'GiNaC::integral::evalf' hides overloaded virtual function
      [-Woverloaded-virtual]
        ex evalf(int level=0) const;
           ^
/home/ralf/sage/local/include/pynac/basic.h:177:13: note: hidden overloaded
      virtual function 'GiNaC::basic::evalf' declared here: different number of
      parameters (2 vs 1)
        virtual ex evalf(int level = 0, PyObject* parent=nullptr) const;
                   ^
1 warning generated.
```
So no errors. But I have a full libstdc++ on system. So it is possible that your Xcode version is missing a part of it.



---

archive/issue_comments_318955.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nCannot dismiss that I guess. That would be a big blow on apple's part.",
    "created_at": "2016-10-14T19:44:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318955",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

Cannot dismiss that I guess. That would be a big blow on apple's part.



---

archive/issue_comments_318956.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nOK it is there: `/usr/include/c++/4.2.1/bits/stl_list.h` on OS X and it has the right operator. Of course anything with `bits` is an internal header and apparently the proper way to include it is with `<list>`. So I am guessing some inclusion is either using a non-standard header or rely on some indirect inclusion. Digging...",
    "created_at": "2016-10-15T02:46:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318956",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:12" align="right">comment:12</div>

OK it is there: `/usr/include/c++/4.2.1/bits/stl_list.h` on OS X and it has the right operator. Of course anything with `bits` is an internal header and apparently the proper way to include it is with `<list>`. So I am guessing some inclusion is either using a non-standard header or rely on some indirect inclusion. Digging...



---

archive/issue_comments_318957.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nEven manually adding `#include <list>` in the cpp file doesn't solve the problem. There must something subtle at work.",
    "created_at": "2016-10-15T04:31:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318957",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

Even manually adding `#include <list>` in the cpp file doesn't solve the problem. There must something subtle at work.



---

archive/issue_comments_318958.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nMy understanding of some C++ matters is shaky at best. Does it make a difference that `operator!=` is a \"non-member\" function? http://en.cppreference.com/w/cpp/container/list",
    "created_at": "2016-10-15T04:39:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318958",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

My understanding of some C++ matters is shaky at best. Does it make a difference that `operator!=` is a "non-member" function? http://en.cppreference.com/w/cpp/container/list



---

archive/issue_comments_318959.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nNote that the missing `operator!=()` is not a member of `list` but of `list::const_iterator`, see line 266 in https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a01055_source.html\n\nDoes the exact equivalent exist in your stl_list.h?",
    "created_at": "2016-10-15T05:16:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318959",
    "user": "https://github.com/rwst"
}
```

<div id="comment:15" align="right">comment:15</div>

Note that the missing `operator!=()` is not a member of `list` but of `list::const_iterator`, see line 266 in https://gcc.gnu.org/onlinedocs/gcc-4.6.3/libstdc++/api/a01055_source.html

Does the exact equivalent exist in your stl_list.h?



---

archive/issue_comments_318960.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nIt appears to be in the header - which bears a lot of similarities with your link. We are talking about this section?\n\n```\n00198   template<typename _Tp>\n00199     struct _List_const_iterator\n```",
    "created_at": "2016-10-15T05:52:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318960",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:16" align="right">comment:16</div>

It appears to be in the header - which bears a lot of similarities with your link. We are talking about this section?

```
00198   template<typename _Tp>
00199     struct _List_const_iterator
```



---

archive/issue_comments_318961.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nYes.",
    "created_at": "2016-10-15T05:56:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318961",
    "user": "https://github.com/rwst"
}
```

<div id="comment:17" align="right">comment:17</div>

Yes.



---

archive/issue_comments_318962.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nsage 7.5.beta2 (includes all the stuff we found out so far) and xcode 8.1 on sierra and still a similar kind of error. Different place but same error\n\n```\n clang++ -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/fbissey/build/sage/local/include -I/Users/fbissey/build/sage/local/include/python2.7 -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/fbissey/build/sage/src -I/Users/fbissey/build/sage/src/sage/ext -I/Users/fbissey/build/sage/src/build/cythonized -I/Users/fbissey/build/sage/src/build/cythonized/sage/ext -I/Users/fbissey/build/sage/local/include/python2.7 -c /Users/fbissey/build/sage/src/build/cythonized/sage/libs/pynac/pynac.cpp -o src/build/temp.macosx-10.9-x86_64-2.7/Users/fbissey/build/sage/src/build/cythonized/sage/libs/pynac/pynac.o -std=c++11 -fno-strict-aliasing\nIn file included from /Users/fbissey/build/sage/src/build/cythonized/sage/libs/pynac/pynac.cpp:486:\nIn file included from /Users/fbissey/build/sage/src/sage/libs/pynac/wrap.h:11:\nIn file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:38:\n/Users/fbissey/build/sage/local/include/pynac/integral.h:44:5: warning: 'GiNaC::integral::evalf' hides overloaded virtual function [-Woverloaded-virtual]\n        ex evalf(int level=0) const;\n           ^\n/Users/fbissey/build/sage/local/include/pynac/basic.h:177:13: note: hidden overloaded virtual function 'GiNaC::basic::evalf' declared here: different number of parameters\n      (2 vs 1)\n        virtual ex evalf(int level = 0, PyObject* parent=nullptr) const;\n                   ^\n/Users/fbissey/build/sage/src/build/cythonized/sage/libs/pynac/pynac.cpp:4479:30: error: no member named 'operator!=' in 'std::__1::__tree_const_iterator<unsigned int,\n      std::__1::__tree_node<unsigned int, void *> *, long>'\n    __pyx_t_2 = (__pyx_v_itr.operator!=(__pyx_v_s.end()) != 0);\n                 ~~~~~~~~~~~ ^\n1 warning and 1 error generated.\n```",
    "created_at": "2016-11-11T04:28:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318962",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:18" align="right">comment:18</div>

sage 7.5.beta2 (includes all the stuff we found out so far) and xcode 8.1 on sierra and still a similar kind of error. Different place but same error

```
 clang++ -fno-strict-aliasing -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/fbissey/build/sage/local/include -I/Users/fbissey/build/sage/local/include/python2.7 -I/Users/fbissey/build/sage/local/lib/python2.7/site-packages/numpy/core/include -I/Users/fbissey/build/sage/src -I/Users/fbissey/build/sage/src/sage/ext -I/Users/fbissey/build/sage/src/build/cythonized -I/Users/fbissey/build/sage/src/build/cythonized/sage/ext -I/Users/fbissey/build/sage/local/include/python2.7 -c /Users/fbissey/build/sage/src/build/cythonized/sage/libs/pynac/pynac.cpp -o src/build/temp.macosx-10.9-x86_64-2.7/Users/fbissey/build/sage/src/build/cythonized/sage/libs/pynac/pynac.o -std=c++11 -fno-strict-aliasing
In file included from /Users/fbissey/build/sage/src/build/cythonized/sage/libs/pynac/pynac.cpp:486:
In file included from /Users/fbissey/build/sage/src/sage/libs/pynac/wrap.h:11:
In file included from /Users/fbissey/build/sage/local/include/pynac/ginac.h:38:
/Users/fbissey/build/sage/local/include/pynac/integral.h:44:5: warning: 'GiNaC::integral::evalf' hides overloaded virtual function [-Woverloaded-virtual]
        ex evalf(int level=0) const;
           ^
/Users/fbissey/build/sage/local/include/pynac/basic.h:177:13: note: hidden overloaded virtual function 'GiNaC::basic::evalf' declared here: different number of parameters
      (2 vs 1)
        virtual ex evalf(int level = 0, PyObject* parent=nullptr) const;
                   ^
/Users/fbissey/build/sage/src/build/cythonized/sage/libs/pynac/pynac.cpp:4479:30: error: no member named 'operator!=' in 'std::__1::__tree_const_iterator<unsigned int,
      std::__1::__tree_node<unsigned int, void *> *, long>'
    __pyx_t_2 = (__pyx_v_itr.operator!=(__pyx_v_s.end()) != 0);
                 ~~~~~~~~~~~ ^
1 warning and 1 error generated.
```



---

archive/issue_comments_318963.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nIt's different. Before it was list, now it's tree. BTW the warning is fixed in flint git master.",
    "created_at": "2016-11-11T06:34:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318963",
    "user": "https://github.com/rwst"
}
```

<div id="comment:19" align="right">comment:19</div>

It's different. Before it was list, now it's tree. BTW the warning is fixed in flint git master.



---

archive/issue_comments_318964.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nAh no sorry, different warning, not flint.",
    "created_at": "2016-11-11T06:35:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318964",
    "user": "https://github.com/rwst"
}
```

<div id="comment:20" align="right">comment:20</div>

Ah no sorry, different warning, not flint.



---

archive/issue_comments_318965.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nThe original one had three errors, 2 \"list\" and one \"tree\". In any case it is extremely vexing. I need to find a C++ expert that could have a clue.",
    "created_at": "2016-11-11T07:14:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318965",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:21" align="right">comment:21</div>

The original one had three errors, 2 "list" and one "tree". In any case it is extremely vexing. I need to find a C++ expert that could have a clue.



---

archive/issue_comments_318966.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nC++ guru needed...",
    "created_at": "2016-11-22T22:41:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318966",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:22" align="right">comment:22</div>

C++ guru needed...



---

archive/issue_comments_318967.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI don't claim being a tenured C++ guru, but\n\n```\npynac.pxd:        bint is_not_equal \"operator!=\" (GParamSetIter i)\n```\nlooks strange. IIRC iterators can be compared for non-equality using merely `!=`.\nIf in `sage/libs/pynac/pynac.pyx` (line 194) I replace\n\n```\nwhile itr.is_not_equal(s.end()):\n```\nwith \n\n```\nwhile itr != s.end():\n```\nthis still compiles (with gcc), and tests in symbolic/ pass, too.\n\nCan you try this with clang?",
    "created_at": "2016-11-23T11:40:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318967",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:23" align="right">comment:23</div>

I don't claim being a tenured C++ guru, but

```
pynac.pxd:        bint is_not_equal "operator!=" (GParamSetIter i)
```
looks strange. IIRC iterators can be compared for non-equality using merely `!=`.
If in `sage/libs/pynac/pynac.pyx` (line 194) I replace

```
while itr.is_not_equal(s.end()):
```
with 

```
while itr != s.end():
```
this still compiles (with gcc), and tests in symbolic/ pass, too.

Can you try this with clang?



---

archive/issue_comments_318968.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nThat appears to be effective, let's see how far I can go with it.",
    "created_at": "2016-11-23T23:55:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318968",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

That appears to be effective, let's see how far I can go with it.



---

archive/issue_comments_318969.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nHad a new C/C++ conflict but I was still on 7.5.beta2. Switched to beta3 and rebuilding now.",
    "created_at": "2016-11-24T00:34:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318969",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

Had a new C/C++ conflict but I was still on 7.5.beta2. Switched to beta3 and rebuilding now.



---

archive/issue_comments_318970.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nOK that changes definitely get me past the compiling of `sage/libs/pynac/pynac.so`, the new issue in beta3 means that I haven't reach the initial problem in `sage/symbolyc/expression.pyx`. Since there were several errors that particular fix may be insufficient. I should put a temporary branch here for other people interested in testing at some point.",
    "created_at": "2016-11-24T01:02:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318970",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

OK that changes definitely get me past the compiling of `sage/libs/pynac/pynac.so`, the new issue in beta3 means that I haven't reach the initial problem in `sage/symbolyc/expression.pyx`. Since there were several errors that particular fix may be insufficient. I should put a temporary branch here for other people interested in testing at some point.



---

archive/issue_comments_318971.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nAfter sorting the `m4ri` problems I am back at the original error in expression.pyx. I will see if I can apply Dima's suggestion again.",
    "created_at": "2016-11-24T01:45:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318971",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

After sorting the `m4ri` problems I am back at the original error in expression.pyx. I will see if I can apply Dima's suggestion again.



---

archive/issue_comments_318972.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nHad to apply Dima's suggestion 3 times. We have compile!",
    "created_at": "2016-11-24T01:50:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318972",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:28" align="right">comment:28</div>

Had to apply Dima's suggestion 3 times. We have compile!



---

archive/issue_comments_318973.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nNice. Looks like another example where gcc is more generous than clang with template function creation.",
    "created_at": "2016-11-24T04:20:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318973",
    "user": "https://github.com/rwst"
}
```

<div id="comment:29" align="right">comment:29</div>

Nice. Looks like another example where gcc is more generous than clang with template function creation.



---

archive/issue_comments_318974.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nReplying to [@rwst](#comment%3A29):\n> Nice. Looks like another example where gcc is more generous than clang with template function creation. \n\nWell, I am not sure it is about templates - it seems to be about an operator `!=` being replaced by gcc with \"plain\" `!=`. Or perhaps I'm misreading the code there.",
    "created_at": "2016-11-24T07:50:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318974",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:30" align="right">comment:30</div>

Replying to [@rwst](#comment%3A29):
> Nice. Looks like another example where gcc is more generous than clang with template function creation. 

Well, I am not sure it is about templates - it seems to be about an operator `!=` being replaced by gcc with "plain" `!=`. Or perhaps I'm misreading the code there.



---

archive/issue_comments_318975.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nIdeally, all those `cdef struct` in `pynac.pxd` should be replaced by `cdef cppclass`.",
    "created_at": "2016-11-24T08:31:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318975",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">comment:31</div>

Ideally, all those `cdef struct` in `pynac.pxd` should be replaced by `cdef cppclass`.



---

archive/issue_comments_318976.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nYes, I have numerous warning about `struct` that should `class`. \n\nI am doing a new compile from scratch, doctests of the first build has shown a few issues but it started as 7.5.beta2 switched to beta3 in flight so everything will be cross-checked with a new build.",
    "created_at": "2016-11-24T08:36:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318976",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:32" align="right">comment:32</div>

Yes, I have numerous warning about `struct` that should `class`. 

I am doing a new compile from scratch, doctests of the first build has shown a few issues but it started as 7.5.beta2 switched to beta3 in flight so everything will be cross-checked with a new build.



---

archive/issue_comments_318977.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">comment:33</div>\n\nI have been grepping `is_not_equal` over the entire sage tree and apart from the one occurence in `pynac.pyx` and 3 in `symbolic/expression.pyx` I found 3 in `pynac.pxd`\n\n```\ngrep -rI is_not_equal src/sage/*\nsrc/sage/libs/pynac/pynac.pxd:        bint is_not_equal \"operator!=\" (GExListIter i)\nsrc/sage/libs/pynac/pynac.pxd:        bint is_not_equal \"operator!=\" (GParamSetIter i)\nsrc/sage/libs/pynac/pynac.pxd:        bint is_not_equal \"operator!=\" (GExSetIter i)\n```\nI am guessing they can go as well if I remove all the instances of `is_not_equal`. Second opinion? Ralf?",
    "created_at": "2016-11-24T20:58:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318977",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:33" align="right">comment:33</div>

I have been grepping `is_not_equal` over the entire sage tree and apart from the one occurence in `pynac.pyx` and 3 in `symbolic/expression.pyx` I found 3 in `pynac.pxd`

```
grep -rI is_not_equal src/sage/*
src/sage/libs/pynac/pynac.pxd:        bint is_not_equal "operator!=" (GExListIter i)
src/sage/libs/pynac/pynac.pxd:        bint is_not_equal "operator!=" (GParamSetIter i)
src/sage/libs/pynac/pynac.pxd:        bint is_not_equal "operator!=" (GExSetIter i)
```
I am guessing they can go as well if I remove all the instances of `is_not_equal`. Second opinion? Ralf?



---

archive/issue_comments_318978.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nReplying to [@kiwifb](#comment%3A33):\n> I have been grepping `is_not_equal` over the entire sage tree and apart from the one occurence in `pynac.pyx` and 3 in `symbolic/expression.pyx` I found 3 in `pynac.pxd`\n> \n> ```\n> grep -rI is_not_equal src/sage/*\n> src/sage/libs/pynac/pynac.pxd:        bint is_not_equal \"operator!=\" (GExListIter i)\n> src/sage/libs/pynac/pynac.pxd:        bint is_not_equal \"operator!=\" (GParamSetIter i)\n> src/sage/libs/pynac/pynac.pxd:        bint is_not_equal \"operator!=\" (GExSetIter i)\n> ```\n> I am guessing they can go as well if I remove all the instances of `is_not_equal`. Second opinion? Ralf?\n\nWhy would you remove these that compile? This seems to be asking for trouble.\nThe whole point of that `operator!=` is that you can actually provide your own implementation. E.g. in Sage there  are lots of these in `local/include/[boost,NTL]`, and moreover in\n\n```\nlocal/include/pynac/ptr.h:      bool operator!=(const ptr<U> & rhs) const throw() { return p != get_pointer(rhs); }\nlocal/include/pynac/ptr.h:      inline friend bool operator!=(const ptr & lhs, const U * rhs) throw() { return lhs.p != rhs; }\nlocal/include/pynac/ptr.h:      inline friend bool operator!=(const U * lhs, const ptr & rhs) throw() { return lhs != rhs.p; }\nlocal/include/pynac/ex.h:       bool operator!=(const const_iterator &other) const throw()\nlocal/include/pynac/ex.h:       bool operator!=(const _iter_rep &other) const throw()\nlocal/include/pynac/ex.h:       bool operator!=(const const_preorder_iterator &other) const throw()\nlocal/include/pynac/ex.h:       bool operator!=(const const_postorder_iterator &other) const throw()\nlocal/include/pynac/operators.h:const relational operator!=(const ex & lh, const ex & rh);\nlocal/include/pynac/numeric.h:  bool operator!=(const numeric &other) const;\n```\nWe should check whether one of the latter must have been taken by the compiler,\nbut somehow the compiler didn't manage it.\nI guess that in particular `GExListIter` and `GExSetIter` are dealt with such an operator in `local/include/pynac/ex.h`, and it does do some stuff...",
    "created_at": "2016-11-24T22:04:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318978",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:34" align="right">comment:34</div>

Replying to [@kiwifb](#comment%3A33):
> I have been grepping `is_not_equal` over the entire sage tree and apart from the one occurence in `pynac.pyx` and 3 in `symbolic/expression.pyx` I found 3 in `pynac.pxd`
> 
> ```
> grep -rI is_not_equal src/sage/*
> src/sage/libs/pynac/pynac.pxd:        bint is_not_equal "operator!=" (GExListIter i)
> src/sage/libs/pynac/pynac.pxd:        bint is_not_equal "operator!=" (GParamSetIter i)
> src/sage/libs/pynac/pynac.pxd:        bint is_not_equal "operator!=" (GExSetIter i)
> ```
> I am guessing they can go as well if I remove all the instances of `is_not_equal`. Second opinion? Ralf?

Why would you remove these that compile? This seems to be asking for trouble.
The whole point of that `operator!=` is that you can actually provide your own implementation. E.g. in Sage there  are lots of these in `local/include/[boost,NTL]`, and moreover in

```
local/include/pynac/ptr.h:      bool operator!=(const ptr<U> & rhs) const throw() { return p != get_pointer(rhs); }
local/include/pynac/ptr.h:      inline friend bool operator!=(const ptr & lhs, const U * rhs) throw() { return lhs.p != rhs; }
local/include/pynac/ptr.h:      inline friend bool operator!=(const U * lhs, const ptr & rhs) throw() { return lhs != rhs.p; }
local/include/pynac/ex.h:       bool operator!=(const const_iterator &other) const throw()
local/include/pynac/ex.h:       bool operator!=(const _iter_rep &other) const throw()
local/include/pynac/ex.h:       bool operator!=(const const_preorder_iterator &other) const throw()
local/include/pynac/ex.h:       bool operator!=(const const_postorder_iterator &other) const throw()
local/include/pynac/operators.h:const relational operator!=(const ex & lh, const ex & rh);
local/include/pynac/numeric.h:  bool operator!=(const numeric &other) const;
```
We should check whether one of the latter must have been taken by the compiler,
but somehow the compiler didn't manage it.
I guess that in particular `GExListIter` and `GExSetIter` are dealt with such an operator in `local/include/pynac/ex.h`, and it does do some stuff...



---

archive/issue_comments_318979.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">comment:35</div>\n\nWhy would I remove them?\n 1) proven not work with clang\n 2) I am removing all the instances were they are used\n\nI could understand keeping them just in case if they were working, but my experience is that they do not. If I keep them there someone will try to use them and break the clang build.\n\n<disclaimer: I am a bit grumpy after dealing with some very ugly setup on the Pan cluster in Auckland for a local user. Right now, I am seeing them as an accident waiting to happen.>",
    "created_at": "2016-11-24T22:40:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318979",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:35" align="right">comment:35</div>

Why would I remove them?
 1) proven not work with clang
 2) I am removing all the instances were they are used

I could understand keeping them just in case if they were working, but my experience is that they do not. If I keep them there someone will try to use them and break the clang build.

<disclaimer: I am a bit grumpy after dealing with some very ugly setup on the Pan cluster in Auckland for a local user. Right now, I am seeing them as an accident waiting to happen.>



---

archive/issue_comments_318980.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">comment:36</div>\n\nReplying to [@kiwifb](#comment%3A35):\n> Why would I remove them?\n>  1) proven not work with clang\n>  2) I am removing all the instances were they are used\n> \n> I could understand keeping them just in case if they were working, but my experience is that they do not. If I keep them there someone will try to use them and break the clang build.\n\njust removing them potentially introduces bugs/memory leaks. I'd think it's ok to remove the `GParamSetIter` operator!=, but not the other two. Did you have to remove the latter to compile, too?\n\nAnyhow, this all should be fixable by doing something right in C++ code.",
    "created_at": "2016-11-24T23:14:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318980",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:36" align="right">comment:36</div>

Replying to [@kiwifb](#comment%3A35):
> Why would I remove them?
>  1) proven not work with clang
>  2) I am removing all the instances were they are used
> 
> I could understand keeping them just in case if they were working, but my experience is that they do not. If I keep them there someone will try to use them and break the clang build.

just removing them potentially introduces bugs/memory leaks. I'd think it's ok to remove the `GParamSetIter` operator!=, but not the other two. Did you have to remove the latter to compile, too?

Anyhow, this all should be fixable by doing something right in C++ code.



---

archive/issue_comments_318981.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">comment:37</div>\n\nCan you explain to me how something that is not used can prevent memory leaks? May be I shouldn't ask, it is C++ after all.",
    "created_at": "2016-11-25T00:04:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318981",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:37" align="right">comment:37</div>

Can you explain to me how something that is not used can prevent memory leaks? May be I shouldn't ask, it is C++ after all.



---

archive/issue_comments_318982.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">comment:38</div>\n\nI should answer the question: No I didn't need to remove it to compile. I discovered them as an afterthought. I started to wonder if there were many other instances, and that's when I discovered those.",
    "created_at": "2016-11-25T00:21:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318982",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:38" align="right">comment:38</div>

I should answer the question: No I didn't need to remove it to compile. I discovered them as an afterthought. I started to wonder if there were many other instances, and that's when I discovered those.



---

archive/issue_comments_318983.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">comment:39</div>\n\nReplying to [@kiwifb](#comment%3A37):\n> Can you explain to me how something that is not used can prevent memory leaks? May be I shouldn't ask, it is C++ after all.\n\nHmm, what do you mean by saying \"not used\"? Try removing definitions of \n`operator!=` from pynac C++ headers in local/include/, and see how far\nyou can go (using gcc, even). E.g. this one (in ex.h) clearly does stuff:\n\n```\n        bool operator==(const const_iterator &other) const throw()\n        {\n                return are_ex_trivially_equal(e, other.e) && i == other.i;\n        }\n\n        bool operator!=(const const_iterator &other) const throw()\n        {\n                return !(*this == other);\n        }\n```\nby invoking `are_ex_trivially_equal()`. (This would be a proper test of \"not used\" claim).",
    "created_at": "2016-11-25T00:21:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318983",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:39" align="right">comment:39</div>

Replying to [@kiwifb](#comment%3A37):
> Can you explain to me how something that is not used can prevent memory leaks? May be I shouldn't ask, it is C++ after all.

Hmm, what do you mean by saying "not used"? Try removing definitions of 
`operator!=` from pynac C++ headers in local/include/, and see how far
you can go (using gcc, even). E.g. this one (in ex.h) clearly does stuff:

```
        bool operator==(const const_iterator &other) const throw()
        {
                return are_ex_trivially_equal(e, other.e) && i == other.i;
        }

        bool operator!=(const const_iterator &other) const throw()
        {
                return !(*this == other);
        }
```
by invoking `are_ex_trivially_equal()`. (This would be a proper test of "not used" claim).



---

archive/issue_comments_318984.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">comment:40</div>\n\nI think we are not talking about the same thing Dima! You are talking about removing `operator!=` definitions. I am only talking about removing the three instances of `is_not_equal`. `is_not_equal` was only used in the places that caused `clang` to fail.",
    "created_at": "2016-11-25T00:25:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318984",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:40" align="right">comment:40</div>

I think we are not talking about the same thing Dima! You are talking about removing `operator!=` definitions. I am only talking about removing the three instances of `is_not_equal`. `is_not_equal` was only used in the places that caused `clang` to fail.



---

archive/issue_comments_318985.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">comment:41</div>\n\nReplying to [@kiwifb](#comment%3A40):\n> I think we are not talking about the same thing Dima! You are talking about removing `operator!=` definitions. I am only talking about removing the three instances of `is_not_equal`. `is_not_equal` was only used in the places that caused `clang` to fail.\n\nCython converts `is_not_equal` into `operator!=`. By replacing `is_not_equal` with `!=` in cython files, we in effect replacing whatever `operator!=` implementation is picked by the C++ compiler with a \"trivial\" implementation, which might be correct, or not. In clang's OSX case, it simply fails to pick an appropriate implementation of `operator!=`. This might either be a bug of the compiler, or a missing default implementation in STL.\n\nSee, there are several ifs here.",
    "created_at": "2016-11-25T00:35:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318985",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:41" align="right">comment:41</div>

Replying to [@kiwifb](#comment%3A40):
> I think we are not talking about the same thing Dima! You are talking about removing `operator!=` definitions. I am only talking about removing the three instances of `is_not_equal`. `is_not_equal` was only used in the places that caused `clang` to fail.

Cython converts `is_not_equal` into `operator!=`. By replacing `is_not_equal` with `!=` in cython files, we in effect replacing whatever `operator!=` implementation is picked by the C++ compiler with a "trivial" implementation, which might be correct, or not. In clang's OSX case, it simply fails to pick an appropriate implementation of `operator!=`. This might either be a bug of the compiler, or a missing default implementation in STL.

See, there are several ifs here.



---

archive/issue_comments_318986.json:
```json
{
    "body": "Author: **Fran\u00e7ois Bissey**",
    "created_at": "2016-11-25T01:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318986",
    "user": "https://github.com/kiwifb"
}
```

Author: **Fran√ßois Bissey**



---

archive/issue_comments_318987.json:
```json
{
    "body": "Commit: **[`86b2c2d`](https://github.com/sagemath/sagetrac-mirror/commit/86b2c2d09f0b907e10a2557b68a61d14305bb52a)**",
    "created_at": "2016-11-25T01:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318987",
    "user": "https://github.com/kiwifb"
}
```

Commit: **[`86b2c2d`](https://github.com/sagemath/sagetrac-mirror/commit/86b2c2d09f0b907e10a2557b68a61d14305bb52a)**



---

archive/issue_comments_318988.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">comment:42</div>\n\nI am not going to fight that fight. If a reviewer think they should not go, fine with me. Still needs some testing on normal setups. Not expecting problems but we never know.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/86b2c2d09f0b907e10a2557b68a61d14305bb52a\"><code>86b2c2d</code></a></td><td><code>Convert is_not_equal to != for clang</code></td></tr></table>\n",
    "created_at": "2016-11-25T01:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318988",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:42" align="right">comment:42</div>

I am not going to fight that fight. If a reviewer think they should not go, fine with me. Still needs some testing on normal setups. Not expecting problems but we never know.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/86b2c2d09f0b907e10a2557b68a61d14305bb52a"><code>86b2c2d</code></a></td><td><code>Convert is_not_equal to != for clang</code></td></tr></table>




---

archive/issue_events_301850.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-11-25T01:01:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301850"
}
```



---

archive/issue_comments_318989.json:
```json
{
    "body": "Branch: **[u/fbissey/pynac-clang](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/pynac-clang)**",
    "created_at": "2016-11-25T01:01:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318989",
    "user": "https://github.com/kiwifb"
}
```

Branch: **[u/fbissey/pynac-clang](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/pynac-clang)**



---

archive/issue_comments_318990.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">comment:43</div>\n\nIf I want to test this on OS X, do I just do `export CC=clang` and then `make`?",
    "created_at": "2016-11-25T04:35:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318990",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:43" align="right">comment:43</div>

If I want to test this on OS X, do I just do `export CC=clang` and then `make`?



---

archive/issue_comments_318991.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">comment:44</div>\n\nReplying to [@jhpalmieri](#comment%3A43):\n> If I want to test this on OS X, do I just do `export CC=clang` and then `make`?\n\nNo. You also need this\n\n```\ndiff --git a/src/bin/sage-env b/src/bin/sage-env\nindex 54c0783..e25081d 100644\n--- a/src/bin/sage-env\n+++ b/src/bin/sage-env\n@@ -528,15 +528,15 @@ if [ \"$UNAME\" = \"Darwin\" ]; then\n fi\n \n # Override CC, CPP, CXX, FC if the GCC spkg was installed.\n-if [ -x \"$SAGE_LOCAL/bin/gcc\" ]; then\n-    CC=gcc\n-fi\n-if [ -x \"$SAGE_LOCAL/bin/cpp\" ]; then\n-    CPP=cpp\n-fi\n-if [ -x \"$SAGE_LOCAL/bin/g++\" ]; then\n-    CXX=g++\n-fi\n+#if [ -x \"$SAGE_LOCAL/bin/gcc\" ]; then\n+#    CC=gcc\n+#fi\n+#if [ -x \"$SAGE_LOCAL/bin/cpp\" ]; then\n+#    CPP=cpp\n+#fi\n+#if [ -x \"$SAGE_LOCAL/bin/g++\" ]; then\n+#    CXX=g++\n+#fi\n if [ -x \"$SAGE_LOCAL/bin/gfortran\" ]; then\n     FC=gfortran\n fi\n```\nThen `CC=clang CXX=clang++ make`. I don't have a proper way to switch yet, the last thing I tried made `gcc` fail to build (we still need `gcc` because of `gfortran`).",
    "created_at": "2016-11-25T04:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318991",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:44" align="right">comment:44</div>

Replying to [@jhpalmieri](#comment%3A43):
> If I want to test this on OS X, do I just do `export CC=clang` and then `make`?

No. You also need this

```
diff --git a/src/bin/sage-env b/src/bin/sage-env
index 54c0783..e25081d 100644
--- a/src/bin/sage-env
+++ b/src/bin/sage-env
@@ -528,15 +528,15 @@ if [ "$UNAME" = "Darwin" ]; then
 fi
 
 # Override CC, CPP, CXX, FC if the GCC spkg was installed.
-if [ -x "$SAGE_LOCAL/bin/gcc" ]; then
-    CC=gcc
-fi
-if [ -x "$SAGE_LOCAL/bin/cpp" ]; then
-    CPP=cpp
-fi
-if [ -x "$SAGE_LOCAL/bin/g++" ]; then
-    CXX=g++
-fi
+#if [ -x "$SAGE_LOCAL/bin/gcc" ]; then
+#    CC=gcc
+#fi
+#if [ -x "$SAGE_LOCAL/bin/cpp" ]; then
+#    CPP=cpp
+#fi
+#if [ -x "$SAGE_LOCAL/bin/g++" ]; then
+#    CXX=g++
+#fi
 if [ -x "$SAGE_LOCAL/bin/gfortran" ]; then
     FC=gfortran
 fi
```
Then `CC=clang CXX=clang++ make`. I don't have a proper way to switch yet, the last thing I tried made `gcc` fail to build (we still need `gcc` because of `gfortran`).



---

archive/issue_comments_318992.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">comment:45</div>\n\nI forgot there is one more problem to build sage with clang that is not included in this ticket. The first line `src/sage/libs/pynac/pynac.pxd` has to be edited out.",
    "created_at": "2016-11-25T05:13:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318992",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:45" align="right">comment:45</div>

I forgot there is one more problem to build sage with clang that is not included in this ticket. The first line `src/sage/libs/pynac/pynac.pxd` has to be edited out.



---

archive/issue_comments_318993.json:
```json
{
    "body": "<div id=\"comment:46\" align=\"right\">comment:46</div>\n\nReplying to [@kiwifb](#comment%3A42):\n> I am not going to fight that fight. If a reviewer think they should not go, fine with me. Still needs some testing on normal setups. Not expecting problems but we never know.\n\nI see no problem because in `ginac/fderivative.h`\n\n```\ntypedef std::multiset<unsigned> paramset;\n```\nthis is just a standard container with a standard iterator. Rather, the Pynac interface in `pynac.pxd` could be cleaned up more rigourously (in another ticket).",
    "created_at": "2016-11-25T06:54:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318993",
    "user": "https://github.com/rwst"
}
```

<div id="comment:46" align="right">comment:46</div>

Replying to [@kiwifb](#comment%3A42):
> I am not going to fight that fight. If a reviewer think they should not go, fine with me. Still needs some testing on normal setups. Not expecting problems but we never know.

I see no problem because in `ginac/fderivative.h`

```
typedef std::multiset<unsigned> paramset;
```
this is just a standard container with a standard iterator. Rather, the Pynac interface in `pynac.pxd` could be cleaned up more rigourously (in another ticket).



---

archive/issue_comments_318994.json:
```json
{
    "body": "<div id=\"comment:47\" align=\"right\">comment:47</div>\n\nI think it's possible that the code in `pynac.pxd` was written because at the time there was no `std::multiset` support in Cython.",
    "created_at": "2016-11-25T07:09:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318994",
    "user": "https://github.com/rwst"
}
```

<div id="comment:47" align="right">comment:47</div>

I think it's possible that the code in `pynac.pxd` was written because at the time there was no `std::multiset` support in Cython.



---

archive/issue_comments_318995.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">comment:48</div>\n\nReplying to [@rwst](#comment%3A46):\n> Replying to [@kiwifb](#comment%3A42):\n> > I am not going to fight that fight. If a reviewer think they should not go, fine with me. Still needs some testing on normal setups. Not expecting problems but we never know.\n\n> \n> I see no problem because in `ginac/fderivative.h`\n> \n> ```\n> typedef std::multiset<unsigned> paramset;\n> ```\n> this is just a standard container with a standard iterator.\n\nand this is why the 1st chunk of the patch :\n\n```\n     cdef GParamSetIter itr = s.begin()\n     res = []\n-    while itr.is_not_equal(s.end()):\n+    while itr != s.end():\n         res.append(itr.obj())\n         itr.inc()\n     return res\n```\nis perfectly fine with me, \nbut the other ones are about different containers, and it seems that for them\n`operator!=` implementations are provided, and are not totally trivial\n(see my comment 39 above).",
    "created_at": "2016-11-25T09:09:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318995",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:48" align="right">comment:48</div>

Replying to [@rwst](#comment%3A46):
> Replying to [@kiwifb](#comment%3A42):
> > I am not going to fight that fight. If a reviewer think they should not go, fine with me. Still needs some testing on normal setups. Not expecting problems but we never know.

> 
> I see no problem because in `ginac/fderivative.h`
> 
> ```
> typedef std::multiset<unsigned> paramset;
> ```
> this is just a standard container with a standard iterator.

and this is why the 1st chunk of the patch :

```
     cdef GParamSetIter itr = s.begin()
     res = []
-    while itr.is_not_equal(s.end()):
+    while itr != s.end():
         res.append(itr.obj())
         itr.inc()
     return res
```
is perfectly fine with me, 
but the other ones are about different containers, and it seems that for them
`operator!=` implementations are provided, and are not totally trivial
(see my comment 39 above).



---

archive/issue_comments_318996.json:
```json
{
    "body": "<div id=\"comment:49\" align=\"right\">comment:49</div>\n\nReplying to [@dimpase](#comment%3A41):\n> Cython converts `is_not_equal` into `operator!=`. By replacing `is_not_equal` with `!=` in cython files, we in effect replacing whatever `operator!=` implementation is picked by the C++ compiler with a \"trivial\" implementation\n\n...if no custom operator `!=` is provided, which is exactly what you want. If a custom operator `!=` operator is provided, then C++ will use that for `!=`. Writing `operator!=` is more explicit than `!=` but it means the same thing.",
    "created_at": "2016-11-25T09:19:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318996",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:49" align="right">comment:49</div>

Replying to [@dimpase](#comment%3A41):
> Cython converts `is_not_equal` into `operator!=`. By replacing `is_not_equal` with `!=` in cython files, we in effect replacing whatever `operator!=` implementation is picked by the C++ compiler with a "trivial" implementation

...if no custom operator `!=` is provided, which is exactly what you want. If a custom operator `!=` operator is provided, then C++ will use that for `!=`. Writing `operator!=` is more explicit than `!=` but it means the same thing.



---

archive/issue_comments_318997.json:
```json
{
    "body": "<div id=\"comment:50\" align=\"right\">comment:50</div>\n\nReplying to [@jdemeyer](#comment%3A49):\n> Replying to [@dimpase](#comment%3A41):\n> > Cython converts `is_not_equal` into `operator!=`. By replacing `is_not_equal` with `!=` in cython files, we in effect replacing whatever `operator!=` implementation is picked by the C++ compiler with a \"trivial\" implementation\n\n> \n> ...if no custom operator `!=` is provided, which is exactly what you want. If a custom operator `!=` operator is provided, then C++ will use that for `!=`. Writing `operator!=` is more explicit than `!=` but it means the same thing.\n\nit seems to me that for some `is_not_equal` implementations of `operator!=` are provided in pynac, and are picked up by gcc, but not by clang@osx.",
    "created_at": "2016-11-25T09:33:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318997",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:50" align="right">comment:50</div>

Replying to [@jdemeyer](#comment%3A49):
> Replying to [@dimpase](#comment%3A41):
> > Cython converts `is_not_equal` into `operator!=`. By replacing `is_not_equal` with `!=` in cython files, we in effect replacing whatever `operator!=` implementation is picked by the C++ compiler with a "trivial" implementation

> 
> ...if no custom operator `!=` is provided, which is exactly what you want. If a custom operator `!=` operator is provided, then C++ will use that for `!=`. Writing `operator!=` is more explicit than `!=` but it means the same thing.

it seems to me that for some `is_not_equal` implementations of `operator!=` are provided in pynac, and are picked up by gcc, but not by clang@osx.



---

archive/issue_events_301851.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-25T09:36:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301851"
}
```



---

archive/issue_events_301852.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-11-25T09:36:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301852"
}
```



---

archive/issue_comments_318998.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2016-11-25T09:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318998",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_318999.json:
```json
{
    "body": "<div id=\"comment:51\" align=\"right\">comment:51</div>\n\nReplying to [@dimpase](#comment%3A50):\n> it seems to me that for some `is_not_equal` implementations of `operator!=` are provided in pynac, and are picked up by gcc, but not by clang@osx.\n\nIt's in the C++ standard library, not Pynac. The fix makes sense to me. It could be that the C++ standard library on OS X is different, but that shouldn't matter here.",
    "created_at": "2016-11-25T09:36:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-318999",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:51" align="right">comment:51</div>

Replying to [@dimpase](#comment%3A50):
> it seems to me that for some `is_not_equal` implementations of `operator!=` are provided in pynac, and are picked up by gcc, but not by clang@osx.

It's in the C++ standard library, not Pynac. The fix makes sense to me. It could be that the C++ standard library on OS X is different, but that shouldn't matter here.



---

archive/issue_comments_319000.json:
```json
{
    "body": "<div id=\"comment:52\" align=\"right\">comment:52</div>\n\nclaiming co-authorship ;-)",
    "created_at": "2016-11-25T10:32:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319000",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:52" align="right">comment:52</div>

claiming co-authorship ;-)



---

archive/issue_comments_319001.json:
```json
{
    "body": "Changed author from **Fran\u00e7ois Bissey** to **Fran\u00e7ois Bissey, Dima Pasechnik**",
    "created_at": "2016-11-25T10:32:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319001",
    "user": "https://github.com/dimpase"
}
```

Changed author from **Fran√ßois Bissey** to **Fran√ßois Bissey, Dima Pasechnik**



---

archive/issue_comments_319002.json:
```json
{
    "body": "<div id=\"comment:53\" align=\"right\">comment:53</div>\n\nHonestly, I only typed, so you are very welcome.",
    "created_at": "2016-11-25T10:40:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319002",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:53" align="right">comment:53</div>

Honestly, I only typed, so you are very welcome.



---

archive/issue_comments_319003.json:
```json
{
    "body": "<div id=\"comment:54\" align=\"right\">comment:54</div>\n\nOn OS X, I get a failure building the Sage library:\n\n```\n[sagelib-7.5.beta3] 1 warning generated.\n[sagelib-7.5.beta3] clang++ -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib build/temp.macosx-10.9-x86_64-2.7/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/ppl.o build/temp.macosx-10.9-x86_64-2.7/sage/libs/ppl_shim.o -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -lppl -lgmp -lgmpxx -lm -lstdc++ -o build/lib.macosx-10.9-x86_64-2.7/sage/libs/ppl.so -lpari -Ddummy\n[sagelib-7.5.beta3] [  6/308] clang -fno-strict-aliasing -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/var/tmp/sage/build/python2-2.7.10.p3/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include/python2.7 -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib/python2.7/site-packages/numpy/core/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/sage/ext -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/ext -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include/python2.7 -c /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/pynac/constant.c -o build/temp.macosx-10.9-x86_64-2.7/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/pynac/constant.o -std=c++11 -fno-strict-aliasing\n[sagelib-7.5.beta3] error: invalid argument '-std=c++11' not allowed with 'C/ObjC'\n[sagelib-7.5.beta3] error: command 'clang' failed with exit status 1\n[sagelib-7.5.beta3] [  7/308] clang -fno-strict-aliasing -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/var/tmp/sage/build/python2-2.7.10.p3/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include/python2.7 -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib/python2.7/site-packages/numpy/core/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/sage/ext -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/ext -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include/python2.7 -c /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/pynac/pynac.c -o build/temp.macosx-10.9-x86_64-2.7/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/pynac/pynac.o -std=c++11 -fno-strict-aliasing\n[sagelib-7.5.beta3] error: invalid argument '-std=c++11' not allowed with 'C/ObjC'\n[sagelib-7.5.beta3] make[3]: *** [sage] Error 1\n[sagelib-7.5.beta3] \n[sagelib-7.5.beta3] real\t0m5.450s\n[sagelib-7.5.beta3] user\t0m4.112s\n[sagelib-7.5.beta3] sys\t0m0.925s\nmake[2]: *** [sagelib] Error 2\nmake[1]: *** [all] Error 2\n\nreal\t0m6.149s\nuser\t0m4.477s\nsys\t0m1.067s\n***************************************************************\nError building Sage.\n\nThe following package(s) may have failed to build (not necessarily\nduring this run of 'make all'):\n\nThe build directory may contain configuration files and other potentially\nhelpful information. WARNING: if you now run 'make' again, the build\ndirectory will, by default, be deleted. Set the environment variable\nSAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.\n\nmake: *** [all] Error 1\n```",
    "created_at": "2016-11-25T17:08:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319003",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:54" align="right">comment:54</div>

On OS X, I get a failure building the Sage library:

```
[sagelib-7.5.beta3] 1 warning generated.
[sagelib-7.5.beta3] clang++ -bundle -undefined dynamic_lookup -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -Wl,-rpath,/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib build/temp.macosx-10.9-x86_64-2.7/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/ppl.o build/temp.macosx-10.9-x86_64-2.7/sage/libs/ppl_shim.o -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -L/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib -lppl -lgmp -lgmpxx -lm -lstdc++ -o build/lib.macosx-10.9-x86_64-2.7/sage/libs/ppl.so -lpari -Ddummy
[sagelib-7.5.beta3] [  6/308] clang -fno-strict-aliasing -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/var/tmp/sage/build/python2-2.7.10.p3/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include/python2.7 -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib/python2.7/site-packages/numpy/core/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/sage/ext -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/ext -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include/python2.7 -c /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/pynac/constant.c -o build/temp.macosx-10.9-x86_64-2.7/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/pynac/constant.o -std=c++11 -fno-strict-aliasing
[sagelib-7.5.beta3] error: invalid argument '-std=c++11' not allowed with 'C/ObjC'
[sagelib-7.5.beta3] error: command 'clang' failed with exit status 1
[sagelib-7.5.beta3] [  7/308] clang -fno-strict-aliasing -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/var/tmp/sage/build/python2-2.7.10.p3/include -DNDEBUG -g -fwrapv -O3 -Wall -Wno-unused -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include/python2.7 -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/lib/python2.7/site-packages/numpy/core/include -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/sage/ext -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/ext -I/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/local/include/python2.7 -c /Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/pynac/pynac.c -o build/temp.macosx-10.9-x86_64-2.7/Users/palmieri/Desktop/Sage_stuff/sage_builds/TESTING/sage-7.5.beta4/src/build/cythonized/sage/libs/pynac/pynac.o -std=c++11 -fno-strict-aliasing
[sagelib-7.5.beta3] error: invalid argument '-std=c++11' not allowed with 'C/ObjC'
[sagelib-7.5.beta3] make[3]: *** [sage] Error 1
[sagelib-7.5.beta3] 
[sagelib-7.5.beta3] real	0m5.450s
[sagelib-7.5.beta3] user	0m4.112s
[sagelib-7.5.beta3] sys	0m0.925s
make[2]: *** [sagelib] Error 2
make[1]: *** [all] Error 2

real	0m6.149s
user	0m4.477s
sys	0m1.067s
***************************************************************
Error building Sage.

The following package(s) may have failed to build (not necessarily
during this run of 'make all'):

The build directory may contain configuration files and other potentially
helpful information. WARNING: if you now run 'make' again, the build
directory will, by default, be deleted. Set the environment variable
SAGE_KEEP_BUILT_SPKGS to 'yes' to prevent this.

make: *** [all] Error 1
```



---

archive/issue_comments_319004.json:
```json
{
    "body": "<div id=\"comment:55\" align=\"right\">comment:55</div>\n\nThis is after making the changes\n\n```diff\ndiff --git a/src/bin/sage-env b/src/bin/sage-env\nindex 54c0783..fa8c557 100644\n--- a/src/bin/sage-env\n+++ b/src/bin/sage-env\n@@ -528,15 +528,15 @@ if [ \"$UNAME\" = \"Darwin\" ]; then\n fi\n \n # Override CC, CPP, CXX, FC if the GCC spkg was installed.\n-if [ -x \"$SAGE_LOCAL/bin/gcc\" ]; then\n-    CC=gcc\n-fi\n-if [ -x \"$SAGE_LOCAL/bin/cpp\" ]; then\n-    CPP=cpp\n-fi\n-if [ -x \"$SAGE_LOCAL/bin/g++\" ]; then\n-    CXX=g++\n-fi\n+# if [ -x \"$SAGE_LOCAL/bin/gcc\" ]; then\n+#     CC=gcc\n+# fi\n+# if [ -x \"$SAGE_LOCAL/bin/cpp\" ]; then\n+#     CPP=cpp\n+# fi\n+# if [ -x \"$SAGE_LOCAL/bin/g++\" ]; then\n+#     CXX=g++\n+# fi\n if [ -x \"$SAGE_LOCAL/bin/gfortran\" ]; then\n     FC=gfortran\n fi\ndiff --git a/src/sage/libs/pynac/pynac.pxd b/src/sage/libs/pynac/pynac.pxd\nindex 9b3ecfb..da5d447 100644\n--- a/src/sage/libs/pynac/pynac.pxd\n+++ b/src/sage/libs/pynac/pynac.pxd\n@@ -1,4 +1,3 @@\n-# distutils: language = c++\n # distutils: libraries = pynac gmp\n # distutils: extra_compile_args = -std=c++11\n \"\"\"\n```",
    "created_at": "2016-11-25T17:08:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319004",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:55" align="right">comment:55</div>

This is after making the changes

```diff
diff --git a/src/bin/sage-env b/src/bin/sage-env
index 54c0783..fa8c557 100644
--- a/src/bin/sage-env
+++ b/src/bin/sage-env
@@ -528,15 +528,15 @@ if [ "$UNAME" = "Darwin" ]; then
 fi
 
 # Override CC, CPP, CXX, FC if the GCC spkg was installed.
-if [ -x "$SAGE_LOCAL/bin/gcc" ]; then
-    CC=gcc
-fi
-if [ -x "$SAGE_LOCAL/bin/cpp" ]; then
-    CPP=cpp
-fi
-if [ -x "$SAGE_LOCAL/bin/g++" ]; then
-    CXX=g++
-fi
+# if [ -x "$SAGE_LOCAL/bin/gcc" ]; then
+#     CC=gcc
+# fi
+# if [ -x "$SAGE_LOCAL/bin/cpp" ]; then
+#     CPP=cpp
+# fi
+# if [ -x "$SAGE_LOCAL/bin/g++" ]; then
+#     CXX=g++
+# fi
 if [ -x "$SAGE_LOCAL/bin/gfortran" ]; then
     FC=gfortran
 fi
diff --git a/src/sage/libs/pynac/pynac.pxd b/src/sage/libs/pynac/pynac.pxd
index 9b3ecfb..da5d447 100644
--- a/src/sage/libs/pynac/pynac.pxd
+++ b/src/sage/libs/pynac/pynac.pxd
@@ -1,4 +1,3 @@
-# distutils: language = c++
 # distutils: libraries = pynac gmp
 # distutils: extra_compile_args = -std=c++11
 """
```



---

archive/issue_comments_319005.json:
```json
{
    "body": "<div id=\"comment:56\" align=\"right\">comment:56</div>\n\nReplying to [@jhpalmieri](#comment%3A54):\n> On OS X, I get a failure building the Sage library:\n\nAre you still on OSX 10.9 ?\n(and on Xcode 6 ?) Well, no wonder it might not work.",
    "created_at": "2016-11-25T17:16:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319005",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:56" align="right">comment:56</div>

Replying to [@jhpalmieri](#comment%3A54):
> On OS X, I get a failure building the Sage library:

Are you still on OSX 10.9 ?
(and on Xcode 6 ?) Well, no wonder it might not work.



---

archive/issue_comments_319006.json:
```json
{
    "body": "<div id=\"comment:57\" align=\"right\">comment:57</div>\n\nThis is on OS X 10.12, Xcode 8.1.",
    "created_at": "2016-11-25T17:57:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319006",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:57" align="right">comment:57</div>

This is on OS X 10.12, Xcode 8.1.



---

archive/issue_comments_319007.json:
```json
{
    "body": "<div id=\"comment:58\" align=\"right\">comment:58</div>\n\nReplying to [@jhpalmieri](#comment%3A57):\n> This is on OS X 10.12, Xcode 8.1.\n\nI was confused by `macosx-10.9-x86_64-2.7` string in your log...\n\nAnyway, I think I know where this comes from: you probably need\n\n```\ndiff --git a/src/sage/libs/m4ri.pxd b/src/sage/libs/m4ri.pxd\nindex a1fe594..ea07121 100644\n--- a/src/sage/libs/m4ri.pxd\n+++ b/src/sage/libs/m4ri.pxd\n@@ -1,4 +1,3 @@\n-# distutils: extra_compile_args = -std=c99\n \n cdef extern from \"m4ri/m4ri.h\":\n     ctypedef int rci_t\n```",
    "created_at": "2016-11-25T18:15:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319007",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:58" align="right">comment:58</div>

Replying to [@jhpalmieri](#comment%3A57):
> This is on OS X 10.12, Xcode 8.1.

I was confused by `macosx-10.9-x86_64-2.7` string in your log...

Anyway, I think I know where this comes from: you probably need

```
diff --git a/src/sage/libs/m4ri.pxd b/src/sage/libs/m4ri.pxd
index a1fe594..ea07121 100644
--- a/src/sage/libs/m4ri.pxd
+++ b/src/sage/libs/m4ri.pxd
@@ -1,4 +1,3 @@
-# distutils: extra_compile_args = -std=c99
 
 cdef extern from "m4ri/m4ri.h":
     ctypedef int rci_t
```



---

archive/issue_comments_319008.json:
```json
{
    "body": "<div id=\"comment:59\" align=\"right\">comment:59</div>\n\nMy fault I said to edit `pynac.pxd` instead of `m4ri.pxd` I was busy with something else at the time.",
    "created_at": "2016-11-25T18:18:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319008",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:59" align="right">comment:59</div>

My fault I said to edit `pynac.pxd` instead of `m4ri.pxd` I was busy with something else at the time.



---

archive/issue_comments_319009.json:
```json
{
    "body": "<div id=\"comment:60\" align=\"right\">comment:60</div>\n\nReplying to [@dimpase](#comment%3A58):\n> Replying to [@jhpalmieri](#comment%3A57):\n> > This is on OS X 10.12, Xcode 8.1.\n\n> I was confused by `macosx-10.9-x86_64-2.7` string in your log...\n> \n> Anyway, I think I know where this comes from: you probably need\n> \n> ```\n> diff --git a/src/sage/libs/m4ri.pxd b/src/sage/libs/m4ri.pxd\n> index a1fe594..ea07121 100644\n> --- a/src/sage/libs/m4ri.pxd\n> +++ b/src/sage/libs/m4ri.pxd\n> @@ -1,4 +1,3 @@\n> -# distutils: extra_compile_args = -std=c99\n>  \n>  cdef extern from \"m4ri/m4ri.h\":\n>      ctypedef int rci_t\n> ```\n> \n> \n> \n\nRight, so, and, as Francois says, put back `# distutils: language = c++` into `src/sage/libs/pynac/pynac.pxd`",
    "created_at": "2016-11-25T18:20:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319009",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:60" align="right">comment:60</div>

Replying to [@dimpase](#comment%3A58):
> Replying to [@jhpalmieri](#comment%3A57):
> > This is on OS X 10.12, Xcode 8.1.

> I was confused by `macosx-10.9-x86_64-2.7` string in your log...
> 
> Anyway, I think I know where this comes from: you probably need
> 
> ```
> diff --git a/src/sage/libs/m4ri.pxd b/src/sage/libs/m4ri.pxd
> index a1fe594..ea07121 100644
> --- a/src/sage/libs/m4ri.pxd
> +++ b/src/sage/libs/m4ri.pxd
> @@ -1,4 +1,3 @@
> -# distutils: extra_compile_args = -std=c99
>  
>  cdef extern from "m4ri/m4ri.h":
>      ctypedef int rci_t
> ```
> 
> 
> 

Right, so, and, as Francois says, put back `# distutils: language = c++` into `src/sage/libs/pynac/pynac.pxd`



---

archive/issue_comments_319010.json:
```json
{
    "body": "<div id=\"comment:61\" align=\"right\">comment:61</div>\n\nThe `macos-10.9...` may come from these lines in `sage-env`:\n\n```\n# Mac OS X-specific setup\nif [ \"$UNAME\" = \"Darwin\" ]; then\n    # set MACOSX_DEPLOYMENT_TARGET -- if set incorrectly, this can\n    # cause lots of random \"Abort trap\" issues on OSX. see trac\n    # #7095 for an example.\n    MACOSX_VERSION=`uname -r | awk -F. '{print $1}'`\n    if [ $MACOSX_VERSION -ge 14 ]; then\n        # various packages have still have issues with\n        # two digit OS X versions\n        MACOSX_DEPLOYMENT_TARGET=10.9\n    else\n        MACOSX_DEPLOYMENT_TARGET=10.$[$MACOSX_VERSION-4]\n    fi\n    export MACOSX_DEPLOYMENT_TARGET MACOSX_VERSION\nfi\n```",
    "created_at": "2016-11-25T18:29:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319010",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:61" align="right">comment:61</div>

The `macos-10.9...` may come from these lines in `sage-env`:

```
# Mac OS X-specific setup
if [ "$UNAME" = "Darwin" ]; then
    # set MACOSX_DEPLOYMENT_TARGET -- if set incorrectly, this can
    # cause lots of random "Abort trap" issues on OSX. see trac
    # #7095 for an example.
    MACOSX_VERSION=`uname -r | awk -F. '{print $1}'`
    if [ $MACOSX_VERSION -ge 14 ]; then
        # various packages have still have issues with
        # two digit OS X versions
        MACOSX_DEPLOYMENT_TARGET=10.9
    else
        MACOSX_DEPLOYMENT_TARGET=10.$[$MACOSX_VERSION-4]
    fi
    export MACOSX_DEPLOYMENT_TARGET MACOSX_VERSION
fi
```



---

archive/issue_comments_319011.json:
```json
{
    "body": "<div id=\"comment:62\" align=\"right\">comment:62</div>\n\nReplying to [@jhpalmieri](#comment%3A61):\nBut this sounds alarming, to have such a version mismatch, \nas you do set it incorrectly...\n\n> ```\n> # Mac OS X-specific setup\n> if [ \"$UNAME\" = \"Darwin\" ]; then\n>     # set MACOSX_DEPLOYMENT_TARGET -- if set incorrectly, this can\n>     # cause lots of random \"Abort trap\" issues on OSX.\n> ```",
    "created_at": "2016-11-25T18:32:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319011",
    "user": "https://github.com/dimpase"
}
```

<div id="comment:62" align="right">comment:62</div>

Replying to [@jhpalmieri](#comment%3A61):
But this sounds alarming, to have such a version mismatch, 
as you do set it incorrectly...

> ```
> # Mac OS X-specific setup
> if [ "$UNAME" = "Darwin" ]; then
>     # set MACOSX_DEPLOYMENT_TARGET -- if set incorrectly, this can
>     # cause lots of random "Abort trap" issues on OSX.
> ```



---

archive/issue_comments_319012.json:
```json
{
    "body": "<div id=\"comment:63\" align=\"right\">comment:63</div>\n\nI plan to test what happens if we remove those lines and just set `MACOSX_DEPLOYMENT_TARGET` correctly. It may take me a few days to get to it, though.",
    "created_at": "2016-11-25T18:36:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319012",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:63" align="right">comment:63</div>

I plan to test what happens if we remove those lines and just set `MACOSX_DEPLOYMENT_TARGET` correctly. It may take me a few days to get to it, though.



---

archive/issue_comments_319013.json:
```json
{
    "body": "<div id=\"comment:64\" align=\"right\">comment:64</div>\n\n`MACOSX_DEPLOYMENT_TARGET` was set that way on purpose some time ago. That makes binaries backward compatible for example. There is nothing wrong with it in itself. And at the time there were difficulties for putting it at `10.10` (because two digits instead of one). By any means we can see what happens when we raise it.",
    "created_at": "2016-11-25T18:54:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319013",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:64" align="right">comment:64</div>

`MACOSX_DEPLOYMENT_TARGET` was set that way on purpose some time ago. That makes binaries backward compatible for example. There is nothing wrong with it in itself. And at the time there were difficulties for putting it at `10.10` (because two digits instead of one). By any means we can see what happens when we raise it.



---

archive/issue_comments_319014.json:
```json
{
    "body": "Changed branch from **[u/fbissey/pynac-clang](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/pynac-clang)** to **[`86b2c2d`](https://github.com/sagemath/sagetrac-mirror/commit/86b2c2d09f0b907e10a2557b68a61d14305bb52a)**",
    "created_at": "2016-11-27T16:45:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21701#issuecomment-319014",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/fbissey/pynac-clang](https://github.com/sagemath/sagetrac-mirror/tree/u/fbissey/pynac-clang)** to **[`86b2c2d`](https://github.com/sagemath/sagetrac-mirror/commit/86b2c2d09f0b907e10a2557b68a61d14305bb52a)**



---

archive/issue_events_301853.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-27T16:45:33Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301853"
}
```



---

archive/issue_events_301854.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "0da1c25ea755557553b32e4fe55dd26257c78000",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-27T16:45:33Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21701",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21701#event-301854"
}
```
