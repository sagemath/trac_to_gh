# Issue 21779: py3 get rid of cmp() in some cython files

archive/issues_021542.json:
```json
{
    "body": "as a very tiny step in the huge cmp problem\n\ndone by using `PyObject_RichCompare`.\n\nCC:  @jm58660 @tscrim @a-andre @jdemeyer\n\nReviewer: Jeroen Demeyer\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nBranch: c6cad87f1f9949fb3abe47a6943f53e4b000a293\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21779\n\n",
    "closed_at": "2016-11-08T23:42:11Z",
    "created_at": "2016-10-28T18:24:12Z",
    "labels": [
        "component: python3"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "py3 get rid of cmp() in some cython files",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21779",
    "user": "https://github.com/fchapoton"
}
```
as a very tiny step in the huge cmp problem

done by using `PyObject_RichCompare`.

CC:  @jm58660 @tscrim @a-andre @jdemeyer

Reviewer: Jeroen Demeyer

Author: Frédéric Chapoton

Branch: c6cad87f1f9949fb3abe47a6943f53e4b000a293

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21779





---

archive/issue_comments_318216.json:
```json
{
    "body": "<a id='comment:1'></a>New commits:",
    "created_at": "2016-10-28T18:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318216",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>New commits:



---

archive/issue_comments_318217.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-10-28T18:24:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318217",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_318218.json:
```json
{
    "body": "<a id='comment:2'></a>In **Cython** files, use **C** or **Cython** functions, don't `import richcmp`, just use `PyObject_RichCompare`.",
    "created_at": "2016-10-28T23:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318218",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:2'></a>In **Cython** files, use **C** or **Cython** functions, don't `import richcmp`, just use `PyObject_RichCompare`.



---

archive/issue_comments_318219.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-28T23:45:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318219",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318220.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n as a very tiny step in the huge cmp problem\n \n-done by using richcmp\n+done by using `PyObject_RichCompare`.\n \n Author: Fr\u00e9d\u00e9ric Chapoton\n \n```\n",
    "created_at": "2016-10-28T23:46:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318220",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,6 +1,6 @@
 as a very tiny step in the huge cmp problem
 
-done by using richcmp
+done by using `PyObject_RichCompare`.
 
 Author: Frédéric Chapoton
 
```




---

archive/issue_comments_318221.json:
```json
{
    "body": "<a id='comment:4'></a>Also, `raise NotImplemented` should be `return NotImplemented`.",
    "created_at": "2016-10-28T23:47:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318221",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:4'></a>Also, `raise NotImplemented` should be `return NotImplemented`.



---

archive/issue_comments_318222.json:
```json
{
    "body": "<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-29T07:28:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318222",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:5'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318223.json:
```json
{
    "body": "<a id='comment:6'></a>done, thanks",
    "created_at": "2016-10-29T07:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318223",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>done, thanks



---

archive/issue_comments_318224.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-29T07:28:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318224",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318225.json:
```json
{
    "body": "<a id='comment:7'></a>The code in `src/sage/modular/arithgroup/farey_symbol.pyx` is less efficient than before because it no longer \"lazily\" computes the `cusps()` and `fractions()` methods.",
    "created_at": "2016-10-29T10:00:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318225",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>The code in `src/sage/modular/arithgroup/farey_symbol.pyx` is less efficient than before because it no longer "lazily" computes the `cusps()` and `fractions()` methods.



---

archive/issue_comments_318226.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-10-29T10:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318226",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318227.json:
```json
{
    "body": "<a id='comment:8'></a>See also #21176#comment:6",
    "created_at": "2016-10-29T10:05:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318227",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>See also #21176#comment:6



---

archive/issue_comments_318228.json:
```json
{
    "body": "<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-10-29T14:16:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318228",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:9'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318229.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-10-29T14:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318229",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318230.json:
```json
{
    "body": "<a id='comment:10'></a>ok, I was expecting this answer...\n\nI introduced an helper function, to be used in this kind of situation.",
    "created_at": "2016-10-29T14:18:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318230",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:10'></a>ok, I was expecting this answer...

I introduced an helper function, to be used in this kind of situation.



---

archive/issue_comments_318231.json:
```json
{
    "body": "<a id='comment:11'></a>Patchbot is green. I am not sure to have done the helper function in a proper way. I had to use richcmp to make it work, but maybe you would know a way to use PyObject_RichCompare ?",
    "created_at": "2016-10-30T14:59:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318231",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:11'></a>Patchbot is green. I am not sure to have done the helper function in a proper way. I had to use richcmp to make it work, but maybe you would know a way to use PyObject_RichCompare ?



---

archive/issue_comments_318232.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-01T09:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318232",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318233.json:
```json
{
    "body": "<a id='comment:12'></a>1. `elif op in [Py_LT, Py_GT, Py_LE, Py_GE]:` should be optimized to `else`.\n\n2. `richcmp_step` needs better documentation of what it does and how it should be used. Simply saying \"assumed to be only a non-final step in a sequence of several comparison checks.\" is absolutely not clear enough.\n\n3. Using `richcmp` is fine. The problem is *importing* `richcmp` (introducing Python overhead), not calling it.\n\n4. Replace `not(step is None)` by `step is not None`.\n\n5. Replace `richcmp(x, y, Py_EQ)` by `x == y`. Similarly, inside the first `if` branches where you know what `op` is.\n\n6. I still have to check whether your helper function is better/worse/equivalent to my proposal in #21176#comment:6",
    "created_at": "2016-11-01T09:45:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318233",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:12'></a>1. `elif op in [Py_LT, Py_GT, Py_LE, Py_GE]:` should be optimized to `else`.

2. `richcmp_step` needs better documentation of what it does and how it should be used. Simply saying "assumed to be only a non-final step in a sequence of several comparison checks." is absolutely not clear enough.

3. Using `richcmp` is fine. The problem is *importing* `richcmp` (introducing Python overhead), not calling it.

4. Replace `not(step is None)` by `step is not None`.

5. Replace `richcmp(x, y, Py_EQ)` by `x == y`. Similarly, inside the first `if` branches where you know what `op` is.

6. I still have to check whether your helper function is better/worse/equivalent to my proposal in #21176#comment:6



---

archive/issue_comments_318234.json:
```json
{
    "body": "<a id='comment:13'></a>In terms of behaviour, the use of your helper function looks identical to my proposal in #21176#comment:6 (assuming that `x != y` is equivalent to `not x == y`).\n\nBut your code looks slightly less efficient (you always call `richcmp_step` and then check the result to `None` while I only call `richcmp_not_equal` when I know that the answer will be useful). Given that your code is not shorter nor more understandable, I don't see the advantage.\n\nI don't feel very strongly about this about this, but it makes me wonder why you didn't just implement #21176#comment:6",
    "created_at": "2016-11-01T09:53:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318234",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>In terms of behaviour, the use of your helper function looks identical to my proposal in #21176#comment:6 (assuming that `x != y` is equivalent to `not x == y`).

But your code looks slightly less efficient (you always call `richcmp_step` and then check the result to `None` while I only call `richcmp_not_equal` when I know that the answer will be useful). Given that your code is not shorter nor more understandable, I don't see the advantage.

I don't feel very strongly about this about this, but it makes me wonder why you didn't just implement #21176#comment:6



---

archive/issue_comments_318235.json:
```json
{
    "body": "<a id='comment:14'></a>7. I would prefer to use `NotImplemented` to signal \"maybe\" instead of `None`.\n\n8. Code like\n\n```\nif richcmp(x, y, op):\n    return True\nelse:\n    return False\n```\ncould be shorted to `return richcmp(x, y, op)`.",
    "created_at": "2016-11-01T09:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318235",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>7. I would prefer to use `NotImplemented` to signal "maybe" instead of `None`.

8. Code like

```
if richcmp(x, y, op):
    return True
else:
    return False
```
could be shorted to `return richcmp(x, y, op)`.



---

archive/issue_comments_318236.json:
```json
{
    "body": "<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-01T10:39:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318236",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:15'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318237.json:
```json
{
    "body": "<a id='comment:16'></a>Thanks for the review.\n\n1: Done\n\n2: I have added some documentation, tell me if this is enough.\n\n3: so there is nothing to do, right ?\n\n4: Done\n\n5: Done in all possible places\n\n6: I see several differences: ~~mine compares the (potentially complex) objects at most once except when absolutely needed (yours does this always twice), and has the correct behaviour for NE (not sure about yours for that)~~\n\n**EDIT**: in fact, there is no real difference, maybe. I prefer the logic of mine, but let me think about that.\n\n7: I would prefer to keep `None`, because `NotImplemented` has a different precise \nsemantic. Of course the ideal would be `Maybe`, but there is no such constant, AFAIK\n\n8: Done",
    "created_at": "2016-11-01T10:46:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318237",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:16'></a>Thanks for the review.

1: Done

2: I have added some documentation, tell me if this is enough.

3: so there is nothing to do, right ?

4: Done

5: Done in all possible places

6: I see several differences: ~~mine compares the (potentially complex) objects at most once except when absolutely needed (yours does this always twice), and has the correct behaviour for NE (not sure about yours for that)~~

**EDIT**: in fact, there is no real difference, maybe. I prefer the logic of mine, but let me think about that.

7: I would prefer to keep `None`, because `NotImplemented` has a different precise 
semantic. Of course the ideal would be `Maybe`, but there is no such constant, AFAIK

8: Done



---

archive/issue_comments_318238.json:
```json
{
    "body": "<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-01T12:31:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:17'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318239.json:
```json
{
    "body": "<a id='comment:18'></a>ok, after reflexion, I decided to use your proposal. This is slightly less intuitive to use, maybe.",
    "created_at": "2016-11-01T12:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318239",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:18'></a>ok, after reflexion, I decided to use your proposal. This is slightly less intuitive to use, maybe.



---

archive/issue_comments_318240.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-01T12:33:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318240",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318241.json:
```json
{
    "body": "<a id='comment:19'></a>FYI: There is an `Unknown` object in Sage.",
    "created_at": "2016-11-01T13:54:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318241",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:19'></a>FYI: There is an `Unknown` object in Sage.



---

archive/issue_comments_318242.json:
```json
{
    "body": "<a id='comment:20'></a>Replying to [comment:16 chapoton]:\n> 7: I would prefer to keep `None`, because `NotImplemented` has a different precise \n> semantic.\n\n\nThe object `NotImplemented` is used whenever a comparison function cannot decide what the result of the comparison is. That looks very much like what is needed here.",
    "created_at": "2016-11-01T14:36:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318242",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:20'></a>Replying to [comment:16 chapoton]:
> 7: I would prefer to keep `None`, because `NotImplemented` has a different precise 
> semantic.


The object `NotImplemented` is used whenever a comparison function cannot decide what the result of the comparison is. That looks very much like what is needed here.



---

archive/issue_comments_318243.json:
```json
{
    "body": "<a id='comment:21'></a>Anyway, `None` is not longer used here, no need to find a better replacement.",
    "created_at": "2016-11-01T14:52:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318243",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:21'></a>Anyway, `None` is not longer used here, no need to find a better replacement.



---

archive/issue_comments_318244.json:
```json
{
    "body": "<a id='comment:22'></a>Right!",
    "created_at": "2016-11-01T16:40:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318244",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:22'></a>Right!



---

archive/issue_comments_318245.json:
```json
{
    "body": "<a id='comment:23'></a>`cimport`, not `import`!\n\n```\nfrom sage.structure.sage_object import richcmp_not_equal\n```",
    "created_at": "2016-11-01T16:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318245",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>`cimport`, not `import`!

```
from sage.structure.sage_object import richcmp_not_equal
```



---

archive/issue_comments_318246.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-01T16:41:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318246",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_318247.json:
```json
{
    "body": "<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-01T17:35:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318247",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:24'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318248.json:
```json
{
    "body": "<a id='comment:25'></a>done so in the code. Should I change that in the examples too ?",
    "created_at": "2016-11-01T17:36:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318248",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:25'></a>done so in the code. Should I change that in the examples too ?



---

archive/issue_comments_318249.json:
```json
{
    "body": "<a id='comment:26'></a>The examples are in Python, so you cannot `cimport`.",
    "created_at": "2016-11-01T19:20:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318249",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:26'></a>The examples are in Python, so you cannot `cimport`.



---

archive/issue_comments_318250.json:
```json
{
    "body": "<a id='comment:27'></a>Needs review?",
    "created_at": "2016-11-01T21:49:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318250",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:27'></a>Needs review?



---

archive/issue_comments_318251.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-02T07:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318251",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_318252.json:
```json
{
    "body": "<a id='comment:28'></a>yes, of course\n\nnote that I have not re-compiled to check that it works",
    "created_at": "2016-11-02T07:06:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318252",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:28'></a>yes, of course

note that I have not re-compiled to check that it works



---

archive/issue_comments_318253.json:
```json
{
    "body": "<a id='comment:29'></a>Let's see what the patchbot says.\n\nOne detail: this is not entirely true:\n\n```\nOUTPUT: ``True`` or ``False``\n```\nsince rich comparisons are not required to return `True` or `False`. I would be explicit and say something like:\n\n```\nOUTPUT: If ``op`` is not ``op_EQ`` or ``op_NE``, the result of ``richcmp(x, y, op)``. If ``op`` is ``op_EQ``, return ``False``. If ``op`` is ``op_NE``, return ``True``.\n```",
    "created_at": "2016-11-02T07:41:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318253",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:29'></a>Let's see what the patchbot says.

One detail: this is not entirely true:

```
OUTPUT: ``True`` or ``False``
```
since rich comparisons are not required to return `True` or `False`. I would be explicit and say something like:

```
OUTPUT: If ``op`` is not ``op_EQ`` or ``op_NE``, the result of ``richcmp(x, y, op)``. If ``op`` is ``op_EQ``, return ``False``. If ``op`` is ``op_NE``, return ``True``.
```



---

archive/issue_comments_318254.json:
```json
{
    "body": "<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-02T12:39:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318254",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:30'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318255.json:
```json
{
    "body": "<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-11-02T13:56:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318255",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:31'></a>Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_318256.json:
```json
{
    "body": "<a id='comment:32'></a>Positive_review if this passes tests.",
    "created_at": "2016-11-02T21:04:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318256",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:32'></a>Positive_review if this passes tests.



---

archive/issue_comments_318257.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-03T07:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318257",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_318258.json:
```json
{
    "body": "<a id='comment:33'></a>ok, bot is green. Thanks for the review.",
    "created_at": "2016-11-03T07:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318258",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:33'></a>ok, bot is green. Thanks for the review.



---

archive/issue_comments_318259.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-08T23:42:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318259",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_057620.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-08T23:42:11Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21779#event-57620"
}
```



---

archive/issue_comments_318260.json:
```json
{
    "body": "<a id='comment:35'></a>Replying to [comment:9 git]:\n> Branch pushed to git repo; I updated commit sha1. New commits:\n> |                                                                                                                                           |                                                                          |\n> |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|\n> |[405a5ce](https://git.sagemath.org/sage.git/commit/?id=405a5ce07e4b08d17b80b975dd88cf27d3df21fa)|`trac 21779 introducing auxiliary function for sequential rich comparison`|\n\n\nFollow-up: in #22087 I will introduce a function very similar to the `richcmp_step` which was introduced here (but reverted again).",
    "created_at": "2017-05-31T11:17:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21779",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21779#issuecomment-318260",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:35'></a>Replying to [comment:9 git]:
> Branch pushed to git repo; I updated commit sha1. New commits:
> |                                                                                                                                           |                                                                          |
> |-------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------|
> |[405a5ce](https://git.sagemath.org/sage.git/commit/?id=405a5ce07e4b08d17b80b975dd88cf27d3df21fa)|`trac 21779 introducing auxiliary function for sequential rich comparison`|


Follow-up: in #22087 I will introduce a function very similar to the `richcmp_step` which was introduced here (but reverted again).
