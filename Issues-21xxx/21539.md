# Issue 21539: make V=0 should silence the build

archive/issues_021302.json:
```json
{
    "assignees": [],
    "body": "Building sage outputs a lot. Especially in highly parallelized builds, the output is not very useful. \n\nThis ticket implements an option to silence the build, using `make` argument (or environment variable) `V=0`. (This mimics the interface of [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules); so this is one step towards #21566):\n\n```\n$ make -j8 V=0 autotools\nmake -j8 build/make/Makefile\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\nmake[1]: `build/make/Makefile' is up to date.\n*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***\n... long list of environment variables elided -- this ticket does nothing about that ...\n***********************************************\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\nRunning 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log...\nRunning 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log... done\nRunning 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log...\n=========================== WARNING ===========================\nYou are about to download and install the experimental package\nautotools-20141105.  This probably won't work at all for you! There\nis no guarantee that it will build correctly, or behave as \nexpected. Use at your own risk!\n===============================================================\nAre you sure you want to continue [Y/n]? \nOK, installing autotools-20141105 now.\nRunning 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log... exit status 1\nmake[1]: *** [/Users/mkoeppe/cvs/sage/local/var/lib/sage/installed/autotools-20141105] Error 1\n```\n\nNote that, though all output is redirected, the interactive questions (#20884, #21082) still go through to the terminal. This is achieved by using `/dev/tty`.\n\nThe patch also unconditionally silences a few make recipe lines involving `sage-logger`.\n\nFollow-up ticket: #21589\n\n\nCC:  @embray @jdemeyer @vbraun @videlec @dimpase @nexttime @kcrisman @novoselt @kiwifb\n\nBranch: **[740ecfb](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)**\n\nReviewer: **John Palmieri**\n\nAuthor: **Matthias Koeppe**\n\nComponent: **build**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21539_\n\n",
    "closed_at": "2016-10-21T07:04:08Z",
    "created_at": "2016-09-19T04:15:04Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20build",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "make V=0 should silence the build",
    "type": "issue",
    "updated_at": "2017-02-23T07:55:33Z",
    "url": "https://github.com/sagemath/sage/issues/21539",
    "user": "https://github.com/mkoeppe"
}
```
Building sage outputs a lot. Especially in highly parallelized builds, the output is not very useful. 

This ticket implements an option to silence the build, using `make` argument (or environment variable) `V=0`. (This mimics the interface of [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules); so this is one step towards #21566):

```
$ make -j8 V=0 autotools
make -j8 build/make/Makefile
make[1]: warning: -jN forced in submake: disabling jobserver mode.
make[1]: `build/make/Makefile' is up to date.
*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***
... long list of environment variables elided -- this ticket does nothing about that ...
***********************************************
make[1]: warning: -jN forced in submake: disabling jobserver mode.
Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log...
Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log... done
Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log...
=========================== WARNING ===========================
You are about to download and install the experimental package
autotools-20141105.  This probably won't work at all for you! There
is no guarantee that it will build correctly, or behave as 
expected. Use at your own risk!
===============================================================
Are you sure you want to continue [Y/n]? 
OK, installing autotools-20141105 now.
Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log... exit status 1
make[1]: *** [/Users/mkoeppe/cvs/sage/local/var/lib/sage/installed/autotools-20141105] Error 1
```

Note that, though all output is redirected, the interactive questions (#20884, #21082) still go through to the terminal. This is achieved by using `/dev/tty`.

The patch also unconditionally silences a few make recipe lines involving `sage-logger`.

Follow-up ticket: #21589


CC:  @embray @jdemeyer @vbraun @videlec @dimpase @nexttime @kcrisman @novoselt @kiwifb

Branch: **[740ecfb](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)**

Reviewer: **John Palmieri**

Author: **Matthias Koeppe**

Component: **build**

_Issue created by migration from https://trac.sagemath.org/ticket/21539_





---

archive/issue_events_302535.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-19T04:15:04Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302535"
}
```



---

archive/issue_events_302536.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-19T04:15:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20build",
    "label_color": "000080",
    "label_name": "c: build",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302536"
}
```



---

archive/issue_events_302537.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-19T04:15:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302537"
}
```



---

archive/issue_events_302538.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-19T04:15:04Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302538"
}
```



---

archive/issue_comments_316237.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,4 +15,4 @@\n `make V=0` \n would request the silent mode. `./configure --enable-silent-rules` would make this the default.\n \n-\n+Of course, in silent mode it's imperative that there's no interactivity. So we need the \"proper solution for warnings about experimental packages\" (#21082)\n``````\n",
    "created_at": "2016-09-20T03:51:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316237",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,4 +15,4 @@
 `make V=0` 
 would request the silent mode. `./configure --enable-silent-rules` would make this the default.
 
-
+Of course, in silent mode it's imperative that there's no interactivity. So we need the "proper solution for warnings about experimental packages" (#21082)
``````




---

archive/issue_comments_316238.json:
```json
{
    "body": "Branch: **[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)**",
    "created_at": "2016-09-24T21:34:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316238",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)**



---

archive/issue_comments_316239.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75223db8497c155a2f44b01d9d79542d26631967\">75223db</a></td><td><code>Silence some make rules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03614668f49b0be8f1c51d8b6f5300e4e12a6bc0\">0361466</a></td><td><code>Use /dev/tty for interaction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5\">2322391</a></td><td><code>If V=0, redirect (not tee) to logfile</code></td></tr></table>\n",
    "created_at": "2016-09-24T21:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316239",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75223db8497c155a2f44b01d9d79542d26631967">75223db</a></td><td><code>Silence some make rules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03614668f49b0be8f1c51d8b6f5300e4e12a6bc0">0361466</a></td><td><code>Use /dev/tty for interaction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5">2322391</a></td><td><code>If V=0, redirect (not tee) to logfile</code></td></tr></table>




---

archive/issue_comments_316240.json:
```json
{
    "body": "Commit: **[2322391](https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5)**",
    "created_at": "2016-09-24T21:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316240",
    "user": "https://github.com/mkoeppe"
}
```

Commit: **[2322391](https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5)**



---

archive/issue_comments_316241.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2016-09-24T21:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316241",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_events_302539.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-09-24T21:52:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302539"
}
```



---

archive/issue_comments_316242.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,18 +1,34 @@\n Building sage outputs a lot. Especially in highly parallelized builds, the output is not very useful. \n \n-We should have an option to silence the build. \n-Then it should simply say:\n+This ticket implements an option to silence the build, using `make` argument (or environment variable) `V=0`. (This mimics the interface of [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules); so this is one step towards #21566):\n \n ```\n-[cvxopt-1.1.8.p1] Logging to '/Users/mkoeppe/cvs/sage/logs/pkgs/cvxopt-1.1.8.p1.log'\n-[cvxopt-1.1.8.p1] Using cached file /Users/mkoeppe/cvs/sage/upstream/cvxopt-1.1.8.tar.gz\n-[cvxopt-1.1.8.p1] Setting up build directory for cvxopt-1.1.8.p1\n-[cvxopt-1.1.8.p1] Building and installing\n-[cvxopt-1.1.8.p1] Installation completed\n+$ make -j8 V=0 autotools\n+make -j8 build/make/Makefile\n+make[1]: warning: -jN forced in submake: disabling jobserver mode.\n+make[1]: `build/make/Makefile' is up to date.\n+*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***\n+... long list of environment variables elided -- this ticket does nothing about that ...\n+***********************************************\n+make[1]: warning: -jN forced in submake: disabling jobserver mode.\n+Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log...\n+Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log... done\n+Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log...\n+=========================== WARNING ===========================\n+You are about to download and install the experimental package\n+autotools-20141105.  This probably won't work at all for you! There\n+is no guarantee that it will build correctly, or behave as \n+expected. Use at your own risk!\n+===============================================================\n+Are you sure you want to continue [Y/n]? \n+OK, installing autotools-20141105 now.\n+Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log... exit status 1\n+make[1]: *** [/Users/mkoeppe/cvs/sage/local/var/lib/sage/installed/autotools-20141105] Error 1\n ```\n \n-A possible interface is to mimic [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules):\n-`make V=0` \n-would request the silent mode. `./configure --enable-silent-rules` would make this the default.\n+Note that, though all output is redirected, the interactive questions (#20884, #21082) still go through to the terminal. This is achieved by using `/dev/tty`.\n \n-Of course, in silent mode it's imperative that there's no interactivity. So we need the \"proper solution for warnings about experimental packages\" (#21082)\n+The patch also unconditionally silences a few make recipe lines involving `sage-logger`.\n+\n+Follow-up ticket: #21589\n+\n``````\n",
    "created_at": "2016-09-24T21:52:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316242",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,18 +1,34 @@
 Building sage outputs a lot. Especially in highly parallelized builds, the output is not very useful. 
 
-We should have an option to silence the build. 
-Then it should simply say:
+This ticket implements an option to silence the build, using `make` argument (or environment variable) `V=0`. (This mimics the interface of [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules); so this is one step towards #21566):
 
 ```
-[cvxopt-1.1.8.p1] Logging to '/Users/mkoeppe/cvs/sage/logs/pkgs/cvxopt-1.1.8.p1.log'
-[cvxopt-1.1.8.p1] Using cached file /Users/mkoeppe/cvs/sage/upstream/cvxopt-1.1.8.tar.gz
-[cvxopt-1.1.8.p1] Setting up build directory for cvxopt-1.1.8.p1
-[cvxopt-1.1.8.p1] Building and installing
-[cvxopt-1.1.8.p1] Installation completed
+$ make -j8 V=0 autotools
+make -j8 build/make/Makefile
+make[1]: warning: -jN forced in submake: disabling jobserver mode.
+make[1]: `build/make/Makefile' is up to date.
+*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***
+... long list of environment variables elided -- this ticket does nothing about that ...
+***********************************************
+make[1]: warning: -jN forced in submake: disabling jobserver mode.
+Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log...
+Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log... done
+Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log...
+=========================== WARNING ===========================
+You are about to download and install the experimental package
+autotools-20141105.  This probably won't work at all for you! There
+is no guarantee that it will build correctly, or behave as 
+expected. Use at your own risk!
+===============================================================
+Are you sure you want to continue [Y/n]? 
+OK, installing autotools-20141105 now.
+Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log... exit status 1
+make[1]: *** [/Users/mkoeppe/cvs/sage/local/var/lib/sage/installed/autotools-20141105] Error 1
 ```
 
-A possible interface is to mimic [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules):
-`make V=0` 
-would request the silent mode. `./configure --enable-silent-rules` would make this the default.
+Note that, though all output is redirected, the interactive questions (#20884, #21082) still go through to the terminal. This is achieved by using `/dev/tty`.
 
-Of course, in silent mode it's imperative that there's no interactivity. So we need the "proper solution for warnings about experimental packages" (#21082)
+The patch also unconditionally silences a few make recipe lines involving `sage-logger`.
+
+Follow-up ticket: #21589
+
``````




---

archive/issue_comments_316243.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nNeeds review.",
    "created_at": "2016-09-27T18:52:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316243",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">comment:6</div>

Needs review.



---

archive/issue_comments_316244.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI think the `/dev/tty` thing should be a separate ticket, since it's very specific and might require a specific reviewer who knows what it is about.",
    "created_at": "2016-09-27T20:06:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316244",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:7" align="right">comment:7</div>

I think the `/dev/tty` thing should be a separate ticket, since it's very specific and might require a specific reviewer who knows what it is about.



---

archive/issue_comments_316245.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI really dislike `@` in Makefiles (unless the rule is truly trivial). It has happened to me several times that I was debugging some build issue and the `@` was hiding important stuff.",
    "created_at": "2016-09-27T20:11:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316245",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:8" align="right">comment:8</div>

I really dislike `@` in Makefiles (unless the rule is truly trivial). It has happened to me several times that I was debugging some build issue and the `@` was hiding important stuff.



---

archive/issue_comments_316246.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nReplying to [@jdemeyer](#comment:7):\n> I think the `/dev/tty` thing should be a separate ticket, since it's very specific and might require a specific reviewer who knows what it is about.\n\nIf Erik doesn't mind, I could repurpose #21082 for that.",
    "created_at": "2016-09-27T20:28:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316246",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">comment:9</div>

Replying to [@jdemeyer](#comment:7):
> I think the `/dev/tty` thing should be a separate ticket, since it's very specific and might require a specific reviewer who knows what it is about.

If Erik doesn't mind, I could repurpose #21082 for that.



---

archive/issue_comments_316247.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04aa4f755a340124c0d9670b7b42a72dfdb90b4c\">04aa4f7</a></td><td><code>Merge tag '7.4.beta6' into t/21539/make_v_0_should_silence_the_build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e\">850eb86</a></td><td><code>Only silence rules when V=0</code></td></tr></table>\n",
    "created_at": "2016-09-27T21:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316247",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:10"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04aa4f755a340124c0d9670b7b42a72dfdb90b4c">04aa4f7</a></td><td><code>Merge tag '7.4.beta6' into t/21539/make_v_0_should_silence_the_build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e">850eb86</a></td><td><code>Only silence rules when V=0</code></td></tr></table>




---

archive/issue_comments_316248.json:
```json
{
    "body": "Changed commit from **[2322391](https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5)** to **[850eb86](https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e)**",
    "created_at": "2016-09-27T21:08:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316248",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2322391](https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5)** to **[850eb86](https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e)**



---

archive/issue_comments_316249.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nReplying to [@jdemeyer](#comment:8):\n> I really dislike `@` in Makefiles (unless the rule is truly trivial). It has happened to me several times that I was debugging some build issue and the `@` was hiding important stuff.\n\nOK, I've changed it so this is only done in V=0 mode.",
    "created_at": "2016-09-27T21:09:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316249",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:11" align="right">comment:11</div>

Replying to [@jdemeyer](#comment:8):
> I really dislike `@` in Makefiles (unless the rule is truly trivial). It has happened to me several times that I was debugging some build issue and the `@` was hiding important stuff.

OK, I've changed it so this is only done in V=0 mode.



---

archive/issue_comments_316250.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nTwo comments: \n\n- in the past (see #12729, for example), there were objections (by Jeroen, and maybe others) to not producing the full `install.log` file as is done now: this can be useful for debugging race conditions.\n\n- I think the output hard to read. I would like something like the proposed output at #12729 better. That is, change\n\n```\nRunning 'sage-spkg mpc-1.0.3.p0', output appears in /path/to/SAGE_ROOT/log/pkgs/mpc-1.0.3.p0.log ...\nRunning 'sage-spkg mpc-1.0.3.p0', output appears in /path/to/SAGE_ROOT/log/pkgs/mpc-1.0.3.p0.log ... done\n```\n to something like\n\n```\n[mpc-1.0.3.p0] installing. Log file: logs/pkgs/mpc-1.0.3.p0.log\n  [mpc-1.0.3.p0] installed successfully.\n```\n The path to the log file should be given relative to `SAGE_ROOT`, which shortens the message, making it less likely that the line wraps, since line-wrapping is part of what makes the output hard to read.",
    "created_at": "2016-09-27T22:09:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316250",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:12" align="right">comment:12</div>

Two comments: 

- in the past (see #12729, for example), there were objections (by Jeroen, and maybe others) to not producing the full `install.log` file as is done now: this can be useful for debugging race conditions.

- I think the output hard to read. I would like something like the proposed output at #12729 better. That is, change

```
Running 'sage-spkg mpc-1.0.3.p0', output appears in /path/to/SAGE_ROOT/log/pkgs/mpc-1.0.3.p0.log ...
Running 'sage-spkg mpc-1.0.3.p0', output appears in /path/to/SAGE_ROOT/log/pkgs/mpc-1.0.3.p0.log ... done
```
 to something like

```
[mpc-1.0.3.p0] installing. Log file: logs/pkgs/mpc-1.0.3.p0.log
  [mpc-1.0.3.p0] installed successfully.
```
 The path to the log file should be given relative to `SAGE_ROOT`, which shortens the message, making it less likely that the line wraps, since line-wrapping is part of what makes the output hard to read.



---

archive/issue_comments_316251.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nFor the output, I'm thinking of something like this change (although I cheat in constructing the shortened path for the logfile here -- there should be a more robust solution):\n\n```diff\ndiff --git a/build/bin/sage-logger b/build/bin/sage-logger\nindex c6afae1..de6cff8 100755\n--- a/build/bin/sage-logger\n+++ b/build/bin/sage-logger\n@@ -57,15 +57,15 @@ mkdir -p \"$logdir\"\n if [[ \"$V\" = 0 && $use_prefix = true ]]; then\n     # Silent build.\n     # Similar to https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules\n-    echo \"Running '$cmd', output appears in $logfile...\"\n+    echo \"[$logname] installing. Log file: logs/pkg/$logname\"\n     # Use verbose mode for output to logfiles.\n     export V=1\n     ( exec> $logfile 2>&1 ; eval \"$cmd\" )\n     status=$?\n     if [[ $status != 0 ]]; then\n-       echo \"Running '$cmd', output appears in $logfile... exit status $status\"\n+       echo \"  [$logname] error installing, exit status $status. Log file: $logfile\"\n     else\n-       echo \"Running '$cmd', output appears in $logfile... done\"\n+       echo \"  [$logname] successfully installed\"\n     fi\n     exit $status\n else\n```",
    "created_at": "2016-09-27T22:49:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316251",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:13" align="right">comment:13</div>

For the output, I'm thinking of something like this change (although I cheat in constructing the shortened path for the logfile here -- there should be a more robust solution):

```diff
diff --git a/build/bin/sage-logger b/build/bin/sage-logger
index c6afae1..de6cff8 100755
--- a/build/bin/sage-logger
+++ b/build/bin/sage-logger
@@ -57,15 +57,15 @@ mkdir -p "$logdir"
 if [[ "$V" = 0 && $use_prefix = true ]]; then
     # Silent build.
     # Similar to https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules
-    echo "Running '$cmd', output appears in $logfile..."
+    echo "[$logname] installing. Log file: logs/pkg/$logname"
     # Use verbose mode for output to logfiles.
     export V=1
     ( exec> $logfile 2>&1 ; eval "$cmd" )
     status=$?
     if [[ $status != 0 ]]; then
-       echo "Running '$cmd', output appears in $logfile... exit status $status"
+       echo "  [$logname] error installing, exit status $status. Log file: $logfile"
     else
-       echo "Running '$cmd', output appears in $logfile... done"
+       echo "  [$logname] successfully installed"
     fi
     exit $status
 else
```



---

archive/issue_comments_316252.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nFeel free to push (a more robust version of) this to the ticket",
    "created_at": "2016-09-27T22:54:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316252",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:14" align="right">comment:14</div>

Feel free to push (a more robust version of) this to the ticket



---

archive/issue_comments_316253.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@jhpalmieri](#comment:12):\n> - in the past (see #12729, for example), there were objections (by Jeroen, and maybe others) to not producing the full `install.log` file as is done now: this can be useful for debugging race conditions.\n\nRight. However, in this case the logs are still there by default. This ticket will only affect people who explicitly set `V=0`.",
    "created_at": "2016-09-28T08:38:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316253",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@jhpalmieri](#comment:12):
> - in the past (see #12729, for example), there were objections (by Jeroen, and maybe others) to not producing the full `install.log` file as is done now: this can be useful for debugging race conditions.

Right. However, in this case the logs are still there by default. This ticket will only affect people who explicitly set `V=0`.



---

archive/issue_comments_316254.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)** to **[u/jhpalmieri/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/make_v_0_should_silence_the_build)**",
    "created_at": "2016-09-28T16:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316254",
    "user": "https://github.com/jhpalmieri"
}
```

Changed branch from **[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)** to **[u/jhpalmieri/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/make_v_0_should_silence_the_build)**



---

archive/issue_comments_316255.json:
```json
{
    "body": "Changed commit from **[850eb86](https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e)** to **[57faa5b](https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533)**",
    "created_at": "2016-09-28T17:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316255",
    "user": "https://github.com/jhpalmieri"
}
```

Changed commit from **[850eb86](https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e)** to **[57faa5b](https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533)**



---

archive/issue_comments_316256.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nHere's a branch that makes the easy parts of those changes but does not change how the log file is printed.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533\">57faa5b</a></td><td><code>trac 21539: change format of output to screen</code></td></tr></table>\n",
    "created_at": "2016-09-28T17:06:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316256",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:17" align="right">comment:17</div>

Here's a branch that makes the easy parts of those changes but does not change how the log file is printed.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533">57faa5b</a></td><td><code>trac 21539: change format of output to screen</code></td></tr></table>




---

archive/issue_comments_316257.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI would also be tempted to silence the `sage-logger` commands to build each package when `V=0`:\n\n```diff\n--- configure\t2016-09-27 16:34:53.000000000 -0700\n+++ configure\t2016-09-28 10:47:33.000000000 -0700\n@@ -7311,7 +7311,7 @@\n     else\n         # Normal Sage packages\n         echo >&7 \"\\$(INST)/$PKG_VERSION:$DEPS\"\n-        echo >&7 \"\t+sage-logger -p '\\$(SAGE_SPKG) $PKG_VERSION' '\\$(SAGE_LOGS)/$PKG_VERSION.log'\"\n+        echo >&7 \"\t\\$(AM_V_at)+sage-logger -p '\\$(SAGE_SPKG) $PKG_VERSION' '\\$(SAGE_LOGS)/$PKG_VERSION.log'\"\n         echo >&7\n \n         # Add a target with just the bare package name for \"sage -i\"\n```\nI don't know anything about `configure` scripts or how they are produced, so I don't know what would be required to make this change. Is it even a good idea?",
    "created_at": "2016-09-28T17:57:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316257",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

I would also be tempted to silence the `sage-logger` commands to build each package when `V=0`:

```diff
--- configure	2016-09-27 16:34:53.000000000 -0700
+++ configure	2016-09-28 10:47:33.000000000 -0700
@@ -7311,7 +7311,7 @@
     else
         # Normal Sage packages
         echo >&7 "\$(INST)/$PKG_VERSION:$DEPS"
-        echo >&7 "	+sage-logger -p '\$(SAGE_SPKG) $PKG_VERSION' '\$(SAGE_LOGS)/$PKG_VERSION.log'"
+        echo >&7 "	\$(AM_V_at)+sage-logger -p '\$(SAGE_SPKG) $PKG_VERSION' '\$(SAGE_LOGS)/$PKG_VERSION.log'"
         echo >&7
 
         # Add a target with just the bare package name for "sage -i"
```
I don't know anything about `configure` scripts or how they are produced, so I don't know what would be required to make this change. Is it even a good idea?



---

archive/issue_comments_316258.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nConfigure.ac already does that.\nJust do sage -i autotools and the regenerate the script using autoreconf.",
    "created_at": "2016-09-28T19:03:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316258",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">comment:19</div>

Configure.ac already does that.
Just do sage -i autotools and the regenerate the script using autoreconf.



---

archive/issue_comments_316259.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nOkay, so I assume that if this is merged, `configure` will automatically be updated.\n\nThis doesn't silence warnings, maybe it's not silencing STDERR, only STDOUT. So I see messages on the screen like\n\n```\nmake[3]: warning: -jN forced in submake: disabling jobserver mode.\nmake[3]: `/Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/var/lib/sage/installed/zlib-1.2.8.p0' is up to date.\n```\nI want to see warnings if there is a serious problem, but it would be nice if I didn't have to see these minor ones.\n\nI'm also seeing many lines of the form\n\n```\ncp /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/src/ext/doctest/invalid/syntax_error.tachyon /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/share/sage/ext/doctest/invalid/syntax_error.tachyon\n```\nI guess they come from the target `$(SAGE_EXTCODE)`. I think that output should be silenced, too, or at least abbreviated (\"[sage-extcode] installing...\").",
    "created_at": "2016-09-28T22:32:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316259",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:20" align="right">comment:20</div>

Okay, so I assume that if this is merged, `configure` will automatically be updated.

This doesn't silence warnings, maybe it's not silencing STDERR, only STDOUT. So I see messages on the screen like

```
make[3]: warning: -jN forced in submake: disabling jobserver mode.
make[3]: `/Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/var/lib/sage/installed/zlib-1.2.8.p0' is up to date.
```
I want to see warnings if there is a serious problem, but it would be nice if I didn't have to see these minor ones.

I'm also seeing many lines of the form

```
cp /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/src/ext/doctest/invalid/syntax_error.tachyon /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/share/sage/ext/doctest/invalid/syntax_error.tachyon
```
I guess they come from the target `$(SAGE_EXTCODE)`. I think that output should be silenced, too, or at least abbreviated ("[sage-extcode] installing...").



---

archive/issue_comments_316260.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@jhpalmieri](#comment:20):\n> Okay, so I assume that if this is merged, `configure` will automatically be updated.\n\nThe release manager takes care of this.",
    "created_at": "2016-09-29T06:08:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316260",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@jhpalmieri](#comment:20):
> Okay, so I assume that if this is merged, `configure` will automatically be updated.

The release manager takes care of this.



---

archive/issue_comments_316261.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nReplying to [@jhpalmieri](#comment:20):\n> I see messages on the screen like\n> \n> ```\n> make[3]: warning: -jN forced in submake: disabling jobserver mode.\n> ```\n\nI think this indicates we are using $(MAKE) or $(MAKEFLAGS) wrong.",
    "created_at": "2016-09-29T06:37:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316261",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:22" align="right">comment:22</div>

Replying to [@jhpalmieri](#comment:20):
> I see messages on the screen like
> 
> ```
> make[3]: warning: -jN forced in submake: disabling jobserver mode.
> ```

I think this indicates we are using $(MAKE) or $(MAKEFLAGS) wrong.



---

archive/issue_comments_316262.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nI've created #21610 for that.",
    "created_at": "2016-09-29T06:53:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316262",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:23" align="right">comment:23</div>

I've created #21610 for that.



---

archive/issue_comments_316263.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nTo silence even more `make` output, one can of course do `make -s V=0`.",
    "created_at": "2016-09-29T06:56:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316263",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">comment:24</div>

To silence even more `make` output, one can of course do `make -s V=0`.



---

archive/issue_comments_316264.json:
```json
{
    "body": "Changed branch from **[u/jhpalmieri/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/make_v_0_should_silence_the_build)** to **[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)**",
    "created_at": "2016-10-03T18:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316264",
    "user": "https://github.com/mkoeppe"
}
```

Changed branch from **[u/jhpalmieri/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/make_v_0_should_silence_the_build)** to **[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)**



---

archive/issue_comments_316265.json:
```json
{
    "body": "Changed commit from **[57faa5b](https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533)** to **[1d033ad](https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072)**",
    "created_at": "2016-10-03T18:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316265",
    "user": "https://github.com/mkoeppe"
}
```

Changed commit from **[57faa5b](https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533)** to **[1d033ad](https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072)**



---

archive/issue_comments_316266.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nReplying to [@jhpalmieri](#comment:20):\n> I'm also seeing many lines of the form\n> \n> ```\n> cp /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/src/ext/doctest/invalid/syntax_error.tachyon /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/share/sage/ext/doctest/invalid/syntax_error.tachyon\n> ```\n> I guess they come from the target `$(SAGE_EXTCODE)`. I think that output should be silenced, too, or at least abbreviated (\"[sage-extcode] installing...\").\n\nI've added some more `$(AM_V_at)` for that.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072\">1d033ad</a></td><td><code>If V=0, silence 'cp' for scripts and extcode</code></td></tr></table>\n",
    "created_at": "2016-10-03T18:37:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316266",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:26" align="right">comment:26</div>

Replying to [@jhpalmieri](#comment:20):
> I'm also seeing many lines of the form
> 
> ```
> cp /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/src/ext/doctest/invalid/syntax_error.tachyon /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/share/sage/ext/doctest/invalid/syntax_error.tachyon
> ```
> I guess they come from the target `$(SAGE_EXTCODE)`. I think that output should be silenced, too, or at least abbreviated ("[sage-extcode] installing...").

I've added some more `$(AM_V_at)` for that.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072">1d033ad</a></td><td><code>If V=0, silence 'cp' for scripts and extcode</code></td></tr></table>




---

archive/issue_comments_316267.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nNeeds review.",
    "created_at": "2016-10-09T18:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316267",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">comment:27</div>

Needs review.



---

archive/issue_events_302540.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-10-10T23:15:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302540"
}
```



---

archive/issue_events_302541.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-10-10T23:15:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302541"
}
```



---

archive/issue_comments_316268.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nWhen I use `make V=0`, the log files seem to be overwritten, not appended to. For example, `sagelib-7.4.beta6.log` contains a lot of information before docbuilding, but then after docbuilding it gets overwritten and is nearly empty at the end. To reproduce:\n\n```\n$ make   # produces full log files\n$ make V=0   # overwrites at least sagelib-...log and dochtml.log\n```",
    "created_at": "2016-10-10T23:15:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316268",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:28" align="right">comment:28</div>

When I use `make V=0`, the log files seem to be overwritten, not appended to. For example, `sagelib-7.4.beta6.log` contains a lot of information before docbuilding, but then after docbuilding it gets overwritten and is nearly empty at the end. To reproduce:

```
$ make   # produces full log files
$ make V=0   # overwrites at least sagelib-...log and dochtml.log
```



---

archive/issue_comments_316269.json:
```json
{
    "body": "<div id=\"comment:29\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/119b34e60d042c221da257526d834f9df1846511\">119b34e</a></td><td><code>Merge tag '7.4.rc0' into t/21539/make_v_0_should_silence_the_build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042\">740ecfb</a></td><td><code>In V=0 mode, append to logfiles</code></td></tr></table>\n",
    "created_at": "2016-10-11T01:03:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316269",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:29"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/119b34e60d042c221da257526d834f9df1846511">119b34e</a></td><td><code>Merge tag '7.4.rc0' into t/21539/make_v_0_should_silence_the_build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042">740ecfb</a></td><td><code>In V=0 mode, append to logfiles</code></td></tr></table>




---

archive/issue_comments_316270.json:
```json
{
    "body": "Changed commit from **[1d033ad](https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072)** to **[740ecfb](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)**",
    "created_at": "2016-10-11T01:03:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316270",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[1d033ad](https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072)** to **[740ecfb](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)**



---

archive/issue_events_302542.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-11T16:20:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302542"
}
```



---

archive/issue_events_302543.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-10-11T16:20:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302543"
}
```



---

archive/issue_comments_316271.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">comment:30</div>\n\nThanks for catching this. Fixed.",
    "created_at": "2016-10-11T16:20:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316271",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:30" align="right">comment:30</div>

Thanks for catching this. Fixed.



---

archive/issue_comments_316272.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nThis looks okay to me now. Jeroen, any objections to a positive review?",
    "created_at": "2016-10-11T16:28:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316272",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:31" align="right">comment:31</div>

This looks okay to me now. Jeroen, any objections to a positive review?



---

archive/issue_comments_316273.json:
```json
{
    "body": "Reviewer: **John Palmieri**",
    "created_at": "2016-10-18T04:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316273",
    "user": "https://github.com/jhpalmieri"
}
```

Reviewer: **John Palmieri**



---

archive/issue_comments_316274.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">comment:32</div>\n\nJeroen, please add yourself as a reviewer if you would like.",
    "created_at": "2016-10-18T04:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316274",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:32" align="right">comment:32</div>

Jeroen, please add yourself as a reviewer if you would like.



---

archive/issue_events_302544.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-10-18T04:15:26Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302544"
}
```



---

archive/issue_events_302545.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2016-10-18T04:15:26Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302545"
}
```



---

archive/issue_events_302546.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-21T07:04:08Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302546"
}
```



---

archive/issue_events_302547.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "a7e687e57b0d703322718f178dfe6e32dc2cfa5b",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-10-21T07:04:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21539#event-302547"
}
```



---

archive/issue_comments_316275.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)** to **[740ecfb](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)**",
    "created_at": "2016-10-21T07:04:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316275",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)** to **[740ecfb](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)**



---

archive/issue_comments_316276.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">comment:34</div>\n\nRelated: #22418",
    "created_at": "2017-02-23T07:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316276",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">comment:34</div>

Related: #22418



---

archive/issue_comments_316277.json:
```json
{
    "body": "Changed commit from **[740ecfb](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)** to none",
    "created_at": "2017-02-23T07:55:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21539#issuecomment-316277",
    "user": "https://github.com/jdemeyer"
}
```

Changed commit from **[740ecfb](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)** to none
