# Issue 21539: make V=0 should silence the build

archive/issues_021302.json:
```json
{
    "body": "Building sage outputs a lot. Especially in highly parallelized builds, the output is not very useful. \n\nThis ticket implements an option to silence the build, using `make` argument (or environment variable) `V=0`. (This mimics the interface of [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules); so this is one step towards #21566):\n\n```\n$ make -j8 V=0 autotools\nmake -j8 build/make/Makefile\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\nmake[1]: `build/make/Makefile' is up to date.\n*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***\n... long list of environment variables elided -- this ticket does nothing about that ...\n***********************************************\nmake[1]: warning: -jN forced in submake: disabling jobserver mode.\nRunning 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log...\nRunning 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log... done\nRunning 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log...\n=========================== WARNING ===========================\nYou are about to download and install the experimental package\nautotools-20141105.  This probably won't work at all for you! There\nis no guarantee that it will build correctly, or behave as \nexpected. Use at your own risk!\n===============================================================\nAre you sure you want to continue [Y/n]? \nOK, installing autotools-20141105 now.\nRunning 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log... exit status 1\nmake[1]: *** [/Users/mkoeppe/cvs/sage/local/var/lib/sage/installed/autotools-20141105] Error 1\n```\n\nNote that, though all output is redirected, the interactive questions (#20884, #21082) still go through to the terminal. This is achieved by using `/dev/tty`.\n\nThe patch also unconditionally silences a few make recipe lines involving `sage-logger`.\n\nFollow-up ticket: #21589\n\n\n**CC:**  @embray @jdemeyer @vbraun @videlec @dimpase @nexttime @kcrisman @novoselt @kiwifb\n\n**Branch:** [740ecfb6fc6b70834fffad30d0d3d1ee45291042](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)\n\n**Reviewer:** John Palmieri\n\n**Author:** Matthias Koeppe\n\n**Resolution:** fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21539\n\n",
    "closed_at": "2016-10-21T07:04:08Z",
    "created_at": "2016-09-19T04:15:04Z",
    "labels": [
        "component: build"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "make V=0 should silence the build",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21539",
    "user": "https://github.com/mkoeppe"
}
```
Building sage outputs a lot. Especially in highly parallelized builds, the output is not very useful. 

This ticket implements an option to silence the build, using `make` argument (or environment variable) `V=0`. (This mimics the interface of [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules); so this is one step towards #21566):

```
$ make -j8 V=0 autotools
make -j8 build/make/Makefile
make[1]: warning: -jN forced in submake: disabling jobserver mode.
make[1]: `build/make/Makefile' is up to date.
*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***
... long list of environment variables elided -- this ticket does nothing about that ...
***********************************************
make[1]: warning: -jN forced in submake: disabling jobserver mode.
Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log...
Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log... done
Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log...
=========================== WARNING ===========================
You are about to download and install the experimental package
autotools-20141105.  This probably won't work at all for you! There
is no guarantee that it will build correctly, or behave as 
expected. Use at your own risk!
===============================================================
Are you sure you want to continue [Y/n]? 
OK, installing autotools-20141105 now.
Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log... exit status 1
make[1]: *** [/Users/mkoeppe/cvs/sage/local/var/lib/sage/installed/autotools-20141105] Error 1
```

Note that, though all output is redirected, the interactive questions (#20884, #21082) still go through to the terminal. This is achieved by using `/dev/tty`.

The patch also unconditionally silences a few make recipe lines involving `sage-logger`.

Follow-up ticket: #21589


**CC:**  @embray @jdemeyer @vbraun @videlec @dimpase @nexttime @kcrisman @novoselt @kiwifb

**Branch:** [740ecfb6fc6b70834fffad30d0d3d1ee45291042](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)

**Reviewer:** John Palmieri

**Author:** Matthias Koeppe

**Resolution:** fixed

Issue created by migration from https://trac.sagemath.org/ticket/21539





---

archive/issue_comments_399872.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -15,4 +15,4 @@\n `make V=0` \n would request the silent mode. `./configure --enable-silent-rules` would make this the default.\n \n-\n+Of course, in silent mode it's imperative that there's no interactivity. So we need the \"proper solution for warnings about experimental packages\" (#21082)\n``````\n",
    "created_at": "2016-09-20T03:51:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399872",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -15,4 +15,4 @@
 `make V=0` 
 would request the silent mode. `./configure --enable-silent-rules` would make this the default.
 
-
+Of course, in silent mode it's imperative that there's no interactivity. So we need the "proper solution for warnings about experimental packages" (#21082)
``````




---

archive/issue_comments_399873.json:
```json
{
    "body": "**Branch:** [u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)",
    "created_at": "2016-09-24T21:34:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399873",
    "user": "https://github.com/mkoeppe"
}
```

**Branch:** [u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)



---

archive/issue_comments_399874.json:
```json
{
    "body": "<a id='comment:3'></a>\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/75223db8497c155a2f44b01d9d79542d26631967\">75223db</a></td><td><code>Silence some make rules</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/03614668f49b0be8f1c51d8b6f5300e4e12a6bc0\">0361466</a></td><td><code>Use /dev/tty for interaction</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5\">2322391</a></td><td><code>If V=0, redirect (not tee) to logfile</code></td></tr></table>\n",
    "created_at": "2016-09-24T21:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399874",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:3'></a>
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/75223db8497c155a2f44b01d9d79542d26631967">75223db</a></td><td><code>Silence some make rules</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/03614668f49b0be8f1c51d8b6f5300e4e12a6bc0">0361466</a></td><td><code>Use /dev/tty for interaction</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5">2322391</a></td><td><code>If V=0, redirect (not tee) to logfile</code></td></tr></table>




---

archive/issue_comments_399875.json:
```json
{
    "body": "**Commit:** [23223919aee6b54835de648ce65f471a177385c5](https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5)",
    "created_at": "2016-09-24T21:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399875",
    "user": "https://github.com/mkoeppe"
}
```

**Commit:** [23223919aee6b54835de648ce65f471a177385c5](https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5)



---

archive/issue_comments_399876.json:
```json
{
    "body": "**Author:** Matthias Koeppe",
    "created_at": "2016-09-24T21:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399876",
    "user": "https://github.com/mkoeppe"
}
```

**Author:** Matthias Koeppe



---

archive/issue_comments_399877.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2016-09-24T21:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399877",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_399878.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,18 +1,34 @@\n Building sage outputs a lot. Especially in highly parallelized builds, the output is not very useful. \n \n-We should have an option to silence the build. \n-Then it should simply say:\n+This ticket implements an option to silence the build, using `make` argument (or environment variable) `V=0`. (This mimics the interface of [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules); so this is one step towards #21566):\n \n ```\n-[cvxopt-1.1.8.p1] Logging to '/Users/mkoeppe/cvs/sage/logs/pkgs/cvxopt-1.1.8.p1.log'\n-[cvxopt-1.1.8.p1] Using cached file /Users/mkoeppe/cvs/sage/upstream/cvxopt-1.1.8.tar.gz\n-[cvxopt-1.1.8.p1] Setting up build directory for cvxopt-1.1.8.p1\n-[cvxopt-1.1.8.p1] Building and installing\n-[cvxopt-1.1.8.p1] Installation completed\n+$ make -j8 V=0 autotools\n+make -j8 build/make/Makefile\n+make[1]: warning: -jN forced in submake: disabling jobserver mode.\n+make[1]: `build/make/Makefile' is up to date.\n+*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***\n+... long list of environment variables elided -- this ticket does nothing about that ...\n+***********************************************\n+make[1]: warning: -jN forced in submake: disabling jobserver mode.\n+Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log...\n+Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log... done\n+Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log...\n+=========================== WARNING ===========================\n+You are about to download and install the experimental package\n+autotools-20141105.  This probably won't work at all for you! There\n+is no guarantee that it will build correctly, or behave as \n+expected. Use at your own risk!\n+===============================================================\n+Are you sure you want to continue [Y/n]? \n+OK, installing autotools-20141105 now.\n+Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log... exit status 1\n+make[1]: *** [/Users/mkoeppe/cvs/sage/local/var/lib/sage/installed/autotools-20141105] Error 1\n ```\n \n-A possible interface is to mimic [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules):\n-`make V=0` \n-would request the silent mode. `./configure --enable-silent-rules` would make this the default.\n+Note that, though all output is redirected, the interactive questions (#20884, #21082) still go through to the terminal. This is achieved by using `/dev/tty`.\n \n-Of course, in silent mode it's imperative that there's no interactivity. So we need the \"proper solution for warnings about experimental packages\" (#21082)\n+The patch also unconditionally silences a few make recipe lines involving `sage-logger`.\n+\n+Follow-up ticket: #21589\n+\n``````\n",
    "created_at": "2016-09-24T21:52:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399878",
    "user": "https://github.com/mkoeppe"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,18 +1,34 @@
 Building sage outputs a lot. Especially in highly parallelized builds, the output is not very useful. 
 
-We should have an option to silence the build. 
-Then it should simply say:
+This ticket implements an option to silence the build, using `make` argument (or environment variable) `V=0`. (This mimics the interface of [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules); so this is one step towards #21566):
 
 ```
-[cvxopt-1.1.8.p1] Logging to '/Users/mkoeppe/cvs/sage/logs/pkgs/cvxopt-1.1.8.p1.log'
-[cvxopt-1.1.8.p1] Using cached file /Users/mkoeppe/cvs/sage/upstream/cvxopt-1.1.8.tar.gz
-[cvxopt-1.1.8.p1] Setting up build directory for cvxopt-1.1.8.p1
-[cvxopt-1.1.8.p1] Building and installing
-[cvxopt-1.1.8.p1] Installation completed
+$ make -j8 V=0 autotools
+make -j8 build/make/Makefile
+make[1]: warning: -jN forced in submake: disabling jobserver mode.
+make[1]: `build/make/Makefile' is up to date.
+*** ALL ENVIRONMENT VARIABLES BEFORE BUILD: ***
+... long list of environment variables elided -- this ticket does nothing about that ...
+***********************************************
+make[1]: warning: -jN forced in submake: disabling jobserver mode.
+Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log...
+Running 'sage-spkg xz-5.2.2', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/xz-5.2.2.log... done
+Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log...
+=========================== WARNING ===========================
+You are about to download and install the experimental package
+autotools-20141105.  This probably won't work at all for you! There
+is no guarantee that it will build correctly, or behave as 
+expected. Use at your own risk!
+===============================================================
+Are you sure you want to continue [Y/n]? 
+OK, installing autotools-20141105 now.
+Running 'sage-spkg autotools-20141105', output appears in /Users/mkoeppe/cvs/sage/logs/pkgs/autotools-20141105.log... exit status 1
+make[1]: *** [/Users/mkoeppe/cvs/sage/local/var/lib/sage/installed/autotools-20141105] Error 1
 ```
 
-A possible interface is to mimic [Automake silent rules](https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules):
-`make V=0` 
-would request the silent mode. `./configure --enable-silent-rules` would make this the default.
+Note that, though all output is redirected, the interactive questions (#20884, #21082) still go through to the terminal. This is achieved by using `/dev/tty`.
 
-Of course, in silent mode it's imperative that there's no interactivity. So we need the "proper solution for warnings about experimental packages" (#21082)
+The patch also unconditionally silences a few make recipe lines involving `sage-logger`.
+
+Follow-up ticket: #21589
+
``````




---

archive/issue_comments_399879.json:
```json
{
    "body": "<a id='comment:6'></a>\nNeeds review.",
    "created_at": "2016-09-27T18:52:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399879",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:6'></a>
Needs review.



---

archive/issue_comments_399880.json:
```json
{
    "body": "<a id='comment:7'></a>\nI think the `/dev/tty` thing should be a separate ticket, since it's very specific and might require a specific reviewer who knows what it is about.",
    "created_at": "2016-09-27T20:06:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399880",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>
I think the `/dev/tty` thing should be a separate ticket, since it's very specific and might require a specific reviewer who knows what it is about.



---

archive/issue_comments_399881.json:
```json
{
    "body": "<a id='comment:8'></a>\nI really dislike `@` in Makefiles (unless the rule is truly trivial). It has happened to me several times that I was debugging some build issue and the `@` was hiding important stuff.",
    "created_at": "2016-09-27T20:11:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399881",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:8'></a>
I really dislike `@` in Makefiles (unless the rule is truly trivial). It has happened to me several times that I was debugging some build issue and the `@` was hiding important stuff.



---

archive/issue_comments_399882.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [jdemeyer](#comment%3A7):\n> I think the `/dev/tty` thing should be a separate ticket, since it's very specific and might require a specific reviewer who knows what it is about.\n\nIf Erik doesn't mind, I could repurpose #21082 for that.",
    "created_at": "2016-09-27T20:28:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399882",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:9'></a>
Replying to [jdemeyer](#comment%3A7):
> I think the `/dev/tty` thing should be a separate ticket, since it's very specific and might require a specific reviewer who knows what it is about.

If Erik doesn't mind, I could repurpose #21082 for that.



---

archive/issue_comments_399883.json:
```json
{
    "body": "<a id='comment:10'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/04aa4f755a340124c0d9670b7b42a72dfdb90b4c\">04aa4f7</a></td><td><code>Merge tag '7.4.beta6' into t/21539/make_v_0_should_silence_the_build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e\">850eb86</a></td><td><code>Only silence rules when V=0</code></td></tr></table>\n",
    "created_at": "2016-09-27T21:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399883",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/04aa4f755a340124c0d9670b7b42a72dfdb90b4c">04aa4f7</a></td><td><code>Merge tag '7.4.beta6' into t/21539/make_v_0_should_silence_the_build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e">850eb86</a></td><td><code>Only silence rules when V=0</code></td></tr></table>




---

archive/issue_comments_399884.json:
```json
{
    "body": "**Changing commit** from \"[23223919aee6b54835de648ce65f471a177385c5](https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5)\" to \"[850eb86a8e4e15d0761e49e2eb660a0020f1c86e](https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e)\".",
    "created_at": "2016-09-27T21:08:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399884",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[23223919aee6b54835de648ce65f471a177385c5](https://github.com/sagemath/sagetrac-mirror/commit/23223919aee6b54835de648ce65f471a177385c5)" to "[850eb86a8e4e15d0761e49e2eb660a0020f1c86e](https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e)".



---

archive/issue_comments_399885.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jdemeyer](#comment%3A8):\n> I really dislike `@` in Makefiles (unless the rule is truly trivial). It has happened to me several times that I was debugging some build issue and the `@` was hiding important stuff.\n\n\nOK, I've changed it so this is only done in V=0 mode.",
    "created_at": "2016-09-27T21:09:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399885",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:11'></a>
Replying to [jdemeyer](#comment%3A8):
> I really dislike `@` in Makefiles (unless the rule is truly trivial). It has happened to me several times that I was debugging some build issue and the `@` was hiding important stuff.


OK, I've changed it so this is only done in V=0 mode.



---

archive/issue_comments_399886.json:
```json
{
    "body": "<a id='comment:12'></a>\nTwo comments: \n\n- in the past (see #12729, for example), there were objections (by Jeroen, and maybe others) to not producing the full `install.log` file as is done now: this can be useful for debugging race conditions.\n\n- I think the output hard to read. I would like something like the proposed output at #12729 better. That is, change\n\n```\nRunning 'sage-spkg mpc-1.0.3.p0', output appears in /path/to/SAGE_ROOT/log/pkgs/mpc-1.0.3.p0.log ...\nRunning 'sage-spkg mpc-1.0.3.p0', output appears in /path/to/SAGE_ROOT/log/pkgs/mpc-1.0.3.p0.log ... done\n```\n to something like\n\n```\n[mpc-1.0.3.p0] installing. Log file: logs/pkgs/mpc-1.0.3.p0.log\n  [mpc-1.0.3.p0] installed successfully.\n```\n The path to the log file should be given relative to `SAGE_ROOT`, which shortens the message, making it less likely that the line wraps, since line-wrapping is part of what makes the output hard to read.",
    "created_at": "2016-09-27T22:09:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399886",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:12'></a>
Two comments: 

- in the past (see #12729, for example), there were objections (by Jeroen, and maybe others) to not producing the full `install.log` file as is done now: this can be useful for debugging race conditions.

- I think the output hard to read. I would like something like the proposed output at #12729 better. That is, change

```
Running 'sage-spkg mpc-1.0.3.p0', output appears in /path/to/SAGE_ROOT/log/pkgs/mpc-1.0.3.p0.log ...
Running 'sage-spkg mpc-1.0.3.p0', output appears in /path/to/SAGE_ROOT/log/pkgs/mpc-1.0.3.p0.log ... done
```
 to something like

```
[mpc-1.0.3.p0] installing. Log file: logs/pkgs/mpc-1.0.3.p0.log
  [mpc-1.0.3.p0] installed successfully.
```
 The path to the log file should be given relative to `SAGE_ROOT`, which shortens the message, making it less likely that the line wraps, since line-wrapping is part of what makes the output hard to read.



---

archive/issue_comments_399887.json:
```json
{
    "body": "<a id='comment:13'></a>\nFor the output, I'm thinking of something like this change (although I cheat in constructing the shortened path for the logfile here -- there should be a more robust solution):\n\n```diff\ndiff --git a/build/bin/sage-logger b/build/bin/sage-logger\nindex c6afae1..de6cff8 100755\n--- a/build/bin/sage-logger\n+++ b/build/bin/sage-logger\n@@ -57,15 +57,15 @@ mkdir -p \"$logdir\"\n if [[ \"$V\" = 0 && $use_prefix = true ]]; then\n     # Silent build.\n     # Similar to https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules\n-    echo \"Running '$cmd', output appears in $logfile...\"\n+    echo \"[$logname] installing. Log file: logs/pkg/$logname\"\n     # Use verbose mode for output to logfiles.\n     export V=1\n     ( exec> $logfile 2>&1 ; eval \"$cmd\" )\n     status=$?\n     if [[ $status != 0 ]]; then\n-       echo \"Running '$cmd', output appears in $logfile... exit status $status\"\n+       echo \"  [$logname] error installing, exit status $status. Log file: $logfile\"\n     else\n-       echo \"Running '$cmd', output appears in $logfile... done\"\n+       echo \"  [$logname] successfully installed\"\n     fi\n     exit $status\n else\n```",
    "created_at": "2016-09-27T22:49:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399887",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:13'></a>
For the output, I'm thinking of something like this change (although I cheat in constructing the shortened path for the logfile here -- there should be a more robust solution):

```diff
diff --git a/build/bin/sage-logger b/build/bin/sage-logger
index c6afae1..de6cff8 100755
--- a/build/bin/sage-logger
+++ b/build/bin/sage-logger
@@ -57,15 +57,15 @@ mkdir -p "$logdir"
 if [[ "$V" = 0 && $use_prefix = true ]]; then
     # Silent build.
     # Similar to https://www.gnu.org/software/automake/manual/html_node/Automake-Silent-Rules.html#Automake-Silent-Rules
-    echo "Running '$cmd', output appears in $logfile..."
+    echo "[$logname] installing. Log file: logs/pkg/$logname"
     # Use verbose mode for output to logfiles.
     export V=1
     ( exec> $logfile 2>&1 ; eval "$cmd" )
     status=$?
     if [[ $status != 0 ]]; then
-       echo "Running '$cmd', output appears in $logfile... exit status $status"
+       echo "  [$logname] error installing, exit status $status. Log file: $logfile"
     else
-       echo "Running '$cmd', output appears in $logfile... done"
+       echo "  [$logname] successfully installed"
     fi
     exit $status
 else
```



---

archive/issue_comments_399888.json:
```json
{
    "body": "<a id='comment:14'></a>\nFeel free to push (a more robust version of) this to the ticket",
    "created_at": "2016-09-27T22:54:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399888",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:14'></a>
Feel free to push (a more robust version of) this to the ticket



---

archive/issue_comments_399889.json:
```json
{
    "body": "<a id='comment:15'></a>\nReplying to [jhpalmieri](#comment%3A12):\n> - in the past (see #12729, for example), there were objections (by Jeroen, and maybe others) to not producing the full `install.log` file as is done now: this can be useful for debugging race conditions.\n\n\nRight. However, in this case the logs are still there by default. This ticket will only affect people who explicitly set `V=0`.",
    "created_at": "2016-09-28T08:38:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399889",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Replying to [jhpalmieri](#comment%3A12):
> - in the past (see #12729, for example), there were objections (by Jeroen, and maybe others) to not producing the full `install.log` file as is done now: this can be useful for debugging race conditions.


Right. However, in this case the logs are still there by default. This ticket will only affect people who explicitly set `V=0`.



---

archive/issue_comments_399890.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)\" to \"[u/jhpalmieri/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/make_v_0_should_silence_the_build)\".",
    "created_at": "2016-09-28T16:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399890",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing branch** from "[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)" to "[u/jhpalmieri/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/make_v_0_should_silence_the_build)".



---

archive/issue_comments_399891.json:
```json
{
    "body": "**Changing commit** from \"[850eb86a8e4e15d0761e49e2eb660a0020f1c86e](https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e)\" to \"[57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533](https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533)\".",
    "created_at": "2016-09-28T17:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399891",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing commit** from "[850eb86a8e4e15d0761e49e2eb660a0020f1c86e](https://github.com/sagemath/sagetrac-mirror/commit/850eb86a8e4e15d0761e49e2eb660a0020f1c86e)" to "[57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533](https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533)".



---

archive/issue_comments_399892.json:
```json
{
    "body": "<a id='comment:17'></a>\nHere's a branch that makes the easy parts of those changes but does not change how the log file is printed.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533\">57faa5b</a></td><td><code>trac 21539: change format of output to screen</code></td></tr></table>\n",
    "created_at": "2016-09-28T17:06:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399892",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:17'></a>
Here's a branch that makes the easy parts of those changes but does not change how the log file is printed.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533">57faa5b</a></td><td><code>trac 21539: change format of output to screen</code></td></tr></table>




---

archive/issue_comments_399893.json:
```json
{
    "body": "<a id='comment:18'></a>\nI would also be tempted to silence the `sage-logger` commands to build each package when `V=0`:\n\n```diff\n--- configure\t2016-09-27 16:34:53.000000000 -0700\n+++ configure\t2016-09-28 10:47:33.000000000 -0700\n@@ -7311,7 +7311,7 @@\n     else\n         # Normal Sage packages\n         echo >&7 \"\\$(INST)/$PKG_VERSION:$DEPS\"\n-        echo >&7 \"\t+sage-logger -p '\\$(SAGE_SPKG) $PKG_VERSION' '\\$(SAGE_LOGS)/$PKG_VERSION.log'\"\n+        echo >&7 \"\t\\$(AM_V_at)+sage-logger -p '\\$(SAGE_SPKG) $PKG_VERSION' '\\$(SAGE_LOGS)/$PKG_VERSION.log'\"\n         echo >&7\n \n         # Add a target with just the bare package name for \"sage -i\"\n```\nI don't know anything about `configure` scripts or how they are produced, so I don't know what would be required to make this change. Is it even a good idea?",
    "created_at": "2016-09-28T17:57:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399893",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:18'></a>
I would also be tempted to silence the `sage-logger` commands to build each package when `V=0`:

```diff
--- configure	2016-09-27 16:34:53.000000000 -0700
+++ configure	2016-09-28 10:47:33.000000000 -0700
@@ -7311,7 +7311,7 @@
     else
         # Normal Sage packages
         echo >&7 "\$(INST)/$PKG_VERSION:$DEPS"
-        echo >&7 "	+sage-logger -p '\$(SAGE_SPKG) $PKG_VERSION' '\$(SAGE_LOGS)/$PKG_VERSION.log'"
+        echo >&7 "	\$(AM_V_at)+sage-logger -p '\$(SAGE_SPKG) $PKG_VERSION' '\$(SAGE_LOGS)/$PKG_VERSION.log'"
         echo >&7
 
         # Add a target with just the bare package name for "sage -i"
```
I don't know anything about `configure` scripts or how they are produced, so I don't know what would be required to make this change. Is it even a good idea?



---

archive/issue_comments_399894.json:
```json
{
    "body": "<a id='comment:19'></a>\nConfigure.ac already does that.\nJust do sage -i autotools and the regenerate the script using autoreconf.",
    "created_at": "2016-09-28T19:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399894",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:19'></a>
Configure.ac already does that.
Just do sage -i autotools and the regenerate the script using autoreconf.



---

archive/issue_comments_399895.json:
```json
{
    "body": "<a id='comment:20'></a>\nOkay, so I assume that if this is merged, `configure` will automatically be updated.\n\nThis doesn't silence warnings, maybe it's not silencing STDERR, only STDOUT. So I see messages on the screen like\n\n```\nmake[3]: warning: -jN forced in submake: disabling jobserver mode.\nmake[3]: `/Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/var/lib/sage/installed/zlib-1.2.8.p0' is up to date.\n```\nI want to see warnings if there is a serious problem, but it would be nice if I didn't have to see these minor ones.\n\nI'm also seeing many lines of the form\n\n```\ncp /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/src/ext/doctest/invalid/syntax_error.tachyon /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/share/sage/ext/doctest/invalid/syntax_error.tachyon\n```\nI guess they come from the target `$(SAGE_EXTCODE)`. I think that output should be silenced, too, or at least abbreviated (\"[sage-extcode] installing...\").",
    "created_at": "2016-09-28T22:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399895",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:20'></a>
Okay, so I assume that if this is merged, `configure` will automatically be updated.

This doesn't silence warnings, maybe it's not silencing STDERR, only STDOUT. So I see messages on the screen like

```
make[3]: warning: -jN forced in submake: disabling jobserver mode.
make[3]: `/Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/var/lib/sage/installed/zlib-1.2.8.p0' is up to date.
```
I want to see warnings if there is a serious problem, but it would be nice if I didn't have to see these minor ones.

I'm also seeing many lines of the form

```
cp /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/src/ext/doctest/invalid/syntax_error.tachyon /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/share/sage/ext/doctest/invalid/syntax_error.tachyon
```
I guess they come from the target `$(SAGE_EXTCODE)`. I think that output should be silenced, too, or at least abbreviated ("[sage-extcode] installing...").



---

archive/issue_comments_399896.json:
```json
{
    "body": "<a id='comment:21'></a>\nReplying to [jhpalmieri](#comment%3A20):\n> Okay, so I assume that if this is merged, `configure` will automatically be updated.\n\n\nThe release manager takes care of this.",
    "created_at": "2016-09-29T06:08:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399896",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:21'></a>
Replying to [jhpalmieri](#comment%3A20):
> Okay, so I assume that if this is merged, `configure` will automatically be updated.


The release manager takes care of this.



---

archive/issue_comments_399897.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jhpalmieri](#comment%3A20):\n> I see messages on the screen like\n> \n> ```\n> make[3]: warning: -jN forced in submake: disabling jobserver mode.\n> ```\n\n\nI think this indicates we are using $(MAKE) or $(MAKEFLAGS) wrong.",
    "created_at": "2016-09-29T06:37:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399897",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:22'></a>
Replying to [jhpalmieri](#comment%3A20):
> I see messages on the screen like
> 
> ```
> make[3]: warning: -jN forced in submake: disabling jobserver mode.
> ```


I think this indicates we are using $(MAKE) or $(MAKEFLAGS) wrong.



---

archive/issue_comments_399898.json:
```json
{
    "body": "<a id='comment:23'></a>\nI've created #21610 for that.",
    "created_at": "2016-09-29T06:53:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399898",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:23'></a>
I've created #21610 for that.



---

archive/issue_comments_399899.json:
```json
{
    "body": "<a id='comment:24'></a>\nTo silence even more `make` output, one can of course do `make -s V=0`.",
    "created_at": "2016-09-29T06:56:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399899",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:24'></a>
To silence even more `make` output, one can of course do `make -s V=0`.



---

archive/issue_comments_399900.json:
```json
{
    "body": "**Changing branch** from \"[u/jhpalmieri/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/make_v_0_should_silence_the_build)\" to \"[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)\".",
    "created_at": "2016-10-03T18:35:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399900",
    "user": "https://github.com/mkoeppe"
}
```

**Changing branch** from "[u/jhpalmieri/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/jhpalmieri/make_v_0_should_silence_the_build)" to "[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)".



---

archive/issue_comments_399901.json:
```json
{
    "body": "**Changing commit** from \"[57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533](https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533)\" to \"[1d033adc4ffe636b6282d95e1ff6414d3520a072](https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072)\".",
    "created_at": "2016-10-03T18:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399901",
    "user": "https://github.com/mkoeppe"
}
```

**Changing commit** from "[57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533](https://github.com/sagemath/sagetrac-mirror/commit/57faa5bbff420bc7f1cfcd89c2afb7d2da4bd533)" to "[1d033adc4ffe636b6282d95e1ff6414d3520a072](https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072)".



---

archive/issue_comments_399902.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [jhpalmieri](#comment%3A20):\n> I'm also seeing many lines of the form\n> \n> ```\n> cp /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/src/ext/doctest/invalid/syntax_error.tachyon /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/share/sage/ext/doctest/invalid/syntax_error.tachyon\n> ```\n> I guess they come from the target `$(SAGE_EXTCODE)`. I think that output should be silenced, too, or at least abbreviated (\"[sage-extcode] installing...\").\n\n\nI've added some more `$(AM_V_at)` for that.\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072\">1d033ad</a></td><td><code>If V=0, silence 'cp' for scripts and extcode</code></td></tr></table>\n",
    "created_at": "2016-10-03T18:37:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399902",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:26'></a>
Replying to [jhpalmieri](#comment%3A20):
> I'm also seeing many lines of the form
> 
> ```
> cp /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/src/ext/doctest/invalid/syntax_error.tachyon /Users/jpalmier/Desktop/Sage_stuff/sage_builds/TESTING/sage/local/share/sage/ext/doctest/invalid/syntax_error.tachyon
> ```
> I guess they come from the target `$(SAGE_EXTCODE)`. I think that output should be silenced, too, or at least abbreviated ("[sage-extcode] installing...").


I've added some more `$(AM_V_at)` for that.

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072">1d033ad</a></td><td><code>If V=0, silence 'cp' for scripts and extcode</code></td></tr></table>




---

archive/issue_comments_399903.json:
```json
{
    "body": "<a id='comment:27'></a>\nNeeds review.",
    "created_at": "2016-10-09T18:13:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399903",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:27'></a>
Needs review.



---

archive/issue_comments_399904.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2016-10-10T23:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399904",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_399905.json:
```json
{
    "body": "<a id='comment:28'></a>\nWhen I use `make V=0`, the log files seem to be overwritten, not appended to. For example, `sagelib-7.4.beta6.log` contains a lot of information before docbuilding, but then after docbuilding it gets overwritten and is nearly empty at the end. To reproduce:\n\n```\n$ make   # produces full log files\n$ make V=0   # overwrites at least sagelib-...log and dochtml.log\n```",
    "created_at": "2016-10-10T23:15:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399905",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:28'></a>
When I use `make V=0`, the log files seem to be overwritten, not appended to. For example, `sagelib-7.4.beta6.log` contains a lot of information before docbuilding, but then after docbuilding it gets overwritten and is nearly empty at the end. To reproduce:

```
$ make   # produces full log files
$ make V=0   # overwrites at least sagelib-...log and dochtml.log
```



---

archive/issue_comments_399906.json:
```json
{
    "body": "<a id='comment:29'></a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/119b34e60d042c221da257526d834f9df1846511\">119b34e</a></td><td><code>Merge tag '7.4.rc0' into t/21539/make_v_0_should_silence_the_build</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042\">740ecfb</a></td><td><code>In V=0 mode, append to logfiles</code></td></tr></table>\n",
    "created_at": "2016-10-11T01:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399906",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:29'></a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/119b34e60d042c221da257526d834f9df1846511">119b34e</a></td><td><code>Merge tag '7.4.rc0' into t/21539/make_v_0_should_silence_the_build</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042">740ecfb</a></td><td><code>In V=0 mode, append to logfiles</code></td></tr></table>




---

archive/issue_comments_399907.json:
```json
{
    "body": "**Changing commit** from \"[1d033adc4ffe636b6282d95e1ff6414d3520a072](https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072)\" to \"[740ecfb6fc6b70834fffad30d0d3d1ee45291042](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)\".",
    "created_at": "2016-10-11T01:03:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399907",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

**Changing commit** from "[1d033adc4ffe636b6282d95e1ff6414d3520a072](https://github.com/sagemath/sagetrac-mirror/commit/1d033adc4ffe636b6282d95e1ff6414d3520a072)" to "[740ecfb6fc6b70834fffad30d0d3d1ee45291042](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)".



---

archive/issue_comments_399908.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2016-10-11T16:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399908",
    "user": "https://github.com/mkoeppe"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_399909.json:
```json
{
    "body": "<a id='comment:30'></a>\nThanks for catching this. Fixed.",
    "created_at": "2016-10-11T16:20:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399909",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:30'></a>
Thanks for catching this. Fixed.



---

archive/issue_comments_399910.json:
```json
{
    "body": "<a id='comment:31'></a>\nThis looks okay to me now. Jeroen, any objections to a positive review?",
    "created_at": "2016-10-11T16:28:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399910",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:31'></a>
This looks okay to me now. Jeroen, any objections to a positive review?



---

archive/issue_comments_399911.json:
```json
{
    "body": "**Reviewer:** John Palmieri",
    "created_at": "2016-10-18T04:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399911",
    "user": "https://github.com/jhpalmieri"
}
```

**Reviewer:** John Palmieri



---

archive/issue_comments_399912.json:
```json
{
    "body": "<a id='comment:32'></a>\nJeroen, please add yourself as a reviewer if you would like.",
    "created_at": "2016-10-18T04:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399912",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:32'></a>
Jeroen, please add yourself as a reviewer if you would like.



---

archive/issue_comments_399913.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2016-10-18T04:15:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399913",
    "user": "https://github.com/jhpalmieri"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_events_065004.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-21T07:04:08Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21539#event-65004"
}
```



---

archive/issue_comments_399914.json:
```json
{
    "body": "**Changing branch** from \"[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)\" to \"[740ecfb6fc6b70834fffad30d0d3d1ee45291042](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)\".",
    "created_at": "2016-10-21T07:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399914",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/mkoeppe/make_v_0_should_silence_the_build](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/make_v_0_should_silence_the_build)" to "[740ecfb6fc6b70834fffad30d0d3d1ee45291042](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)".



---

archive/issue_comments_399915.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2016-10-21T07:04:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399915",
    "user": "https://github.com/vbraun"
}
```

**Resolution:** fixed



---

archive/issue_comments_399916.json:
```json
{
    "body": "<a id='comment:34'></a>\nRelated: #22418",
    "created_at": "2017-02-23T07:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399916",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:34'></a>
Related: #22418



---

archive/issue_comments_399917.json:
```json
{
    "body": "**Changing commit** from \"[740ecfb6fc6b70834fffad30d0d3d1ee45291042](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)\" to \"\".",
    "created_at": "2017-02-23T07:55:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21539",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21539#issuecomment-399917",
    "user": "https://github.com/jdemeyer"
}
```

**Changing commit** from "[740ecfb6fc6b70834fffad30d0d3d1ee45291042](https://github.com/sagemath/sagetrac-mirror/commit/740ecfb6fc6b70834fffad30d0d3d1ee45291042)" to "".
