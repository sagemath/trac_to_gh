# Issue 21105: abs for number field element

archive/issues_020868.json:
```json
{
    "assignees": [],
    "body": "For a number field element `a`, `abs(a)` currently returns a floating point real number\n\n```\nsage: K.<cbrt2> = NumberField(x^3 - 2, 'a', embedding=1.26)\nsage: abs(cbrt2)\n1.25992104989487\nsage: parent(_)\nReal Field with 53 bits of precision\n```\nIf a coercion embedding is defined with value in `RR`, the absolute value can be defined internally as it is the case for `AA`\n\n```\nsage: abs(AA(2).sqrt() - AA(2))\n0.5857864376269049?\n```\nand also for quadratic extensions\n\n```\nsage: K.<sqrt2> = NumberField(x^2 - 2, 'a', embedding=1.41)\nsage: abs(sqrt2)\nsqrt2\n```\nWe propose to change the behavior for embedded number fields. Namely make `abs` an internal operation.\n\nAs a (minor) consequence of the current behavior, the inequalities from `sage.geometry.polyhedron.representation.Inequality` gets badly displayed\n\n```\nsage: K.<cbrt2> = NumberField(x^3 - 2, 'a', embedding=1.26)\nsage: P = Polyhedron(vertices=[(1,1,cbrt2),(cbrt2,1,1)])\nsage: P.inequalities()\n(An inequality (-cbrt2^2 - cbrt2 - 1, 0, 0) x + 4.84732210186307 >= 0,\n An inequality (cbrt2^2 + cbrt2 + 1, 0, 0) x - 3.84732210186307 >= 0)\n```\n\nCC:  @mkoeppe\n\nBranch/Commit: **[15d160e](https://github.com/sagemath/sagetrac-mirror/commit/15d160e2ec536e988494080f187e164f26ddd291)**\n\nReviewer: **Vincent Delecroix**\n\nAuthor: **Matthias Koeppe**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21105_\n\n",
    "closed_at": "2016-08-07T20:01:07Z",
    "created_at": "2016-07-27T14:11:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20number%20fields",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "abs for number field element",
    "type": "issue",
    "updated_at": "2016-08-07T20:01:07Z",
    "url": "https://github.com/sagemath/sage/issues/21105",
    "user": "https://github.com/videlec"
}
```
For a number field element `a`, `abs(a)` currently returns a floating point real number

```
sage: K.<cbrt2> = NumberField(x^3 - 2, 'a', embedding=1.26)
sage: abs(cbrt2)
1.25992104989487
sage: parent(_)
Real Field with 53 bits of precision
```
If a coercion embedding is defined with value in `RR`, the absolute value can be defined internally as it is the case for `AA`

```
sage: abs(AA(2).sqrt() - AA(2))
0.5857864376269049?
```
and also for quadratic extensions

```
sage: K.<sqrt2> = NumberField(x^2 - 2, 'a', embedding=1.41)
sage: abs(sqrt2)
sqrt2
```
We propose to change the behavior for embedded number fields. Namely make `abs` an internal operation.

As a (minor) consequence of the current behavior, the inequalities from `sage.geometry.polyhedron.representation.Inequality` gets badly displayed

```
sage: K.<cbrt2> = NumberField(x^3 - 2, 'a', embedding=1.26)
sage: P = Polyhedron(vertices=[(1,1,cbrt2),(cbrt2,1,1)])
sage: P.inequalities()
(An inequality (-cbrt2^2 - cbrt2 - 1, 0, 0) x + 4.84732210186307 >= 0,
 An inequality (cbrt2^2 + cbrt2 + 1, 0, 0) x - 3.84732210186307 >= 0)
```

CC:  @mkoeppe

Branch/Commit: **[15d160e](https://github.com/sagemath/sagetrac-mirror/commit/15d160e2ec536e988494080f187e164f26ddd291)**

Reviewer: **Vincent Delecroix**

Author: **Matthias Koeppe**

_Issue created by migration from https://trac.sagemath.org/ticket/21105_





---

archive/issue_events_278860.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-27T14:11:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278860"
}
```



---

archive/issue_events_278861.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-27T14:11:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20number%20fields",
    "label_color": "0000ff",
    "label_name": "component: number fields",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278861"
}
```



---

archive/issue_events_278862.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-27T14:11:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278862"
}
```



---

archive/issue_events_278863.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-07-27T14:11:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278863"
}
```



---

archive/issue_comments_309999.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,6 +13,13 @@\n sage: abs(AA(2).sqrt() - AA(2))\n 0.5857864376269049?\n ```\n+and also for quadratic extensions\n+\n+```\n+sage: K.<sqrt2> = NumberField(x^2 - 2, 'a', embedding=1.41)\n+sage: abs(sqrt2)\n+sqrt2\n+```\n We propose to change the behavior for embedded number fields. Namely make `abs` an internal operation.\n \n As a (minor) consequence of the current behavior, the inequalities from `sage.geometry.polyhedron.representation.Inequality` gets badly displayed\n``````\n",
    "created_at": "2016-08-03T21:40:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-309999",
    "user": "https://github.com/mkoeppe"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,6 +13,13 @@
 sage: abs(AA(2).sqrt() - AA(2))
 0.5857864376269049?
 ```
+and also for quadratic extensions
+
+```
+sage: K.<sqrt2> = NumberField(x^2 - 2, 'a', embedding=1.41)
+sage: abs(sqrt2)
+sqrt2
+```
 We propose to change the behavior for embedded number fields. Namely make `abs` an internal operation.
 
 As a (minor) consequence of the current behavior, the inequalities from `sage.geometry.polyhedron.representation.Inequality` gets badly displayed
``````




---

archive/issue_comments_310000.json:
```json
{
    "body": "Branch: **[u/mkoeppe/abs_for_number_field_element](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/abs_for_number_field_element)**",
    "created_at": "2016-08-03T22:00:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310000",
    "user": "https://github.com/mkoeppe"
}
```

Branch: **[u/mkoeppe/abs_for_number_field_element](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/abs_for_number_field_element)**



---

archive/issue_comments_310001.json:
```json
{
    "body": "Commit: **[33e5f4c](https://github.com/sagemath/sagetrac-mirror/commit/33e5f4cc2b7b4312cac49d5d9c8c07b876a212de)**",
    "created_at": "2016-08-03T22:08:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310001",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[33e5f4c](https://github.com/sagemath/sagetrac-mirror/commit/33e5f4cc2b7b4312cac49d5d9c8c07b876a212de)**



---

archive/issue_comments_310002.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">Comment 3</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/33e5f4cc2b7b4312cac49d5d9c8c07b876a212de\">33e5f4c</a></td><td><code>Add test for #21105</code></td></tr></table>\n",
    "created_at": "2016-08-03T22:08:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310002",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:3" align="right">Comment 3</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/33e5f4cc2b7b4312cac49d5d9c8c07b876a212de">33e5f4c</a></td><td><code>Add test for #21105</code></td></tr></table>




---

archive/issue_events_278864.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2016-08-03T22:10:18Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278864"
}
```



---

archive/issue_comments_310003.json:
```json
{
    "body": "Author: **Matthias Koeppe**",
    "created_at": "2016-08-03T22:10:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310003",
    "user": "https://github.com/mkoeppe"
}
```

Author: **Matthias Koeppe**



---

archive/issue_comments_310004.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">Comment 5</div>\n\nIt is weird to have `abs(a)` and `a.abs()` behaving differently, don't you think?",
    "created_at": "2016-08-03T22:13:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310004",
    "user": "https://github.com/videlec"
}
```

<div id="comment:5" align="right">Comment 5</div>

It is weird to have `abs(a)` and `a.abs()` behaving differently, don't you think?



---

archive/issue_comments_310005.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nOK, I'll change `a.abs()` too.",
    "created_at": "2016-08-03T22:21:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310005",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:6" align="right">Comment 6</div>

OK, I'll change `a.abs()` too.



---

archive/issue_comments_310006.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nBy the way, should perhaps the print representation of a number field indicate whether it's embedded or not?",
    "created_at": "2016-08-03T22:27:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310006",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:7" align="right">Comment 7</div>

By the way, should perhaps the print representation of a number field indicate whether it's embedded or not?



---

archive/issue_comments_310007.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThat's indeed an issue. But it is hard to solve since you are interested at the same time in both the algebraic expression and the embedded value.\n\nMore generally, instead of having if/else in many methods I think that a better solution would be to have a dedicated class for real embedded element (whose semantic would be to follow standard method of real numbers, possibly having methods like `.cos()`, `.exp()` and such). But that is another question that will not be solved by the ticket.",
    "created_at": "2016-08-03T22:36:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310007",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">Comment 8</div>

That's indeed an issue. But it is hard to solve since you are interested at the same time in both the algebraic expression and the embedded value.

More generally, instead of having if/else in many methods I think that a better solution would be to have a dedicated class for real embedded element (whose semantic would be to follow standard method of real numbers, possibly having methods like `.cos()`, `.exp()` and such). But that is another question that will not be solved by the ticket.



---

archive/issue_comments_310008.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nReplying to [@videlec](#comment%3A8):\n> That's indeed an issue. But it is hard to solve since you are interested at the same time in both the algebraic expression and the embedded value.\n\nTrue, but I meant the print representation of the field itself (the parent), not an element.",
    "created_at": "2016-08-03T22:42:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310008",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:9" align="right">Comment 9</div>

Replying to [@videlec](#comment%3A8):
> That's indeed an issue. But it is hard to solve since you are interested at the same time in both the algebraic expression and the embedded value.

True, but I meant the print representation of the field itself (the parent), not an element.



---

archive/issue_comments_310009.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@mkoeppe](#comment%3A9):\n> Replying to [@videlec](#comment%3A8):\n> > That's indeed an issue. But it is hard to solve since you are interested at the same time in both the algebraic expression and the embedded value.\n\n> \n> True, but I meant the print representation of the field itself (the parent), not an element.\n\n+1. Put me in cc if you open a ticket.",
    "created_at": "2016-08-03T22:44:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310009",
    "user": "https://github.com/videlec"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@mkoeppe](#comment%3A9):
> Replying to [@videlec](#comment%3A8):
> > That's indeed an issue. But it is hard to solve since you are interested at the same time in both the algebraic expression and the embedded value.

> 
> True, but I meant the print representation of the field itself (the parent), not an element.

+1. Put me in cc if you open a ticket.



---

archive/issue_comments_310010.json:
```json
{
    "body": "Changed commit from **[33e5f4c](https://github.com/sagemath/sagetrac-mirror/commit/33e5f4cc2b7b4312cac49d5d9c8c07b876a212de)** to **[0c31b49](https://github.com/sagemath/sagetrac-mirror/commit/0c31b4956e5660faafa242bc089b7044e39db65e)**",
    "created_at": "2016-08-03T22:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310010",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[33e5f4c](https://github.com/sagemath/sagetrac-mirror/commit/33e5f4cc2b7b4312cac49d5d9c8c07b876a212de)** to **[0c31b49](https://github.com/sagemath/sagetrac-mirror/commit/0c31b4956e5660faafa242bc089b7044e39db65e)**



---

archive/issue_comments_310011.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/0c31b4956e5660faafa242bc089b7044e39db65e\">0c31b49</a></td><td><code>Trac 21105: Make x.abs() behave the same as abs(x) for real embedded number field elements</code></td></tr></table>\n",
    "created_at": "2016-08-03T22:59:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310011",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:11" align="right">Comment 11</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/0c31b4956e5660faafa242bc089b7044e39db65e">0c31b49</a></td><td><code>Trac 21105: Make x.abs() behave the same as abs(x) for real embedded number field elements</code></td></tr></table>




---

archive/issue_comments_310012.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nReplying to [@videlec](#comment%3A10):\n> Replying to [@mkoeppe](#comment%3A9):\n> > Replying to [@videlec](#comment%3A8):\n> > > That's indeed an issue. But it is hard to solve since you are interested at the same time in both the algebraic expression and the embedded value.\n\n> > \n> > True, but I meant the print representation of the field itself (the parent), not an element.\n\n> \n> +1. Put me in cc if you open a ticket.\n\nSee #21161.",
    "created_at": "2016-08-03T23:13:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310012",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:12" align="right">Comment 12</div>

Replying to [@videlec](#comment%3A10):
> Replying to [@mkoeppe](#comment%3A9):
> > Replying to [@videlec](#comment%3A8):
> > > That's indeed an issue. But it is hard to solve since you are interested at the same time in both the algebraic expression and the embedded value.

> > 
> > True, but I meant the print representation of the field itself (the parent), not an element.

> 
> +1. Put me in cc if you open a ticket.

See #21161.



---

archive/issue_comments_310013.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@mkoeppe](#comment%3A6):\n> OK, I'll change `a.abs()` too.\n\nDone.",
    "created_at": "2016-08-03T23:14:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310013",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@mkoeppe](#comment%3A6):
> OK, I'll change `a.abs()` too.

Done.



---

archive/issue_comments_310014.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nThis is missing indentation\n\n```\nCheck that for fields with real coercion embeddings, absolute\nvalues are in the same field (:trac:`21105`)::\n\nsage: x = polygen(ZZ)      <---- test should be indented\n```",
    "created_at": "2016-08-03T23:22:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310014",
    "user": "https://github.com/videlec"
}
```

<div id="comment:14" align="right">Comment 14</div>

This is missing indentation

```
Check that for fields with real coercion embeddings, absolute
values are in the same field (:trac:`21105`)::

sage: x = polygen(ZZ)      <---- test should be indented
```



---

archive/issue_comments_310015.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ba1fbec6a975d37711181292157c4866ca3c148e\">ba1fbec</a></td><td><code>Fix indentation of examples</code></td></tr></table>\n",
    "created_at": "2016-08-03T23:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310015",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ba1fbec6a975d37711181292157c4866ca3c148e">ba1fbec</a></td><td><code>Fix indentation of examples</code></td></tr></table>




---

archive/issue_comments_310016.json:
```json
{
    "body": "Changed commit from **[0c31b49](https://github.com/sagemath/sagetrac-mirror/commit/0c31b4956e5660faafa242bc089b7044e39db65e)** to **[ba1fbec](https://github.com/sagemath/sagetrac-mirror/commit/ba1fbec6a975d37711181292157c4866ca3c148e)**",
    "created_at": "2016-08-03T23:26:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310016",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[0c31b49](https://github.com/sagemath/sagetrac-mirror/commit/0c31b4956e5660faafa242bc089b7044e39db65e)** to **[ba1fbec](https://github.com/sagemath/sagetrac-mirror/commit/ba1fbec6a975d37711181292157c4866ca3c148e)**



---

archive/issue_comments_310017.json:
```json
{
    "body": "Reviewer: **Vincent Delecroix**",
    "created_at": "2016-08-05T16:11:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310017",
    "user": "https://github.com/mkoeppe"
}
```

Reviewer: **Vincent Delecroix**



---

archive/issue_comments_310018.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nAfter\n\n```\n            sage: x = polygen(ZZ)\n            sage: f = x^3 - x - 1\n            sage: K.<b> = NumberField(f, embedding=1.3)\n            sage: b.abs()\n            b\n```\n  you should also test the output with arguments (both `i` and `prec`).",
    "created_at": "2016-08-05T17:38:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310018",
    "user": "https://github.com/videlec"
}
```

<div id="comment:17" align="right">Comment 17</div>

After

```
            sage: x = polygen(ZZ)
            sage: f = x^3 - x - 1
            sage: K.<b> = NumberField(f, embedding=1.3)
            sage: b.abs()
            b
```
  you should also test the output with arguments (both `i` and `prec`).



---

archive/issue_comments_310019.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/586ce66280bbbc0154ee432aff751b00e32a945f\">586ce66</a></td><td><code>NumberFieldElement.abs: Add doctest</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f7b105fac07ddffadf352fa3031746d187ba7d28\">f7b105f</a></td><td><code>real embedded numberfield abs: Return complex if prec is given</code></td></tr></table>\n",
    "created_at": "2016-08-05T18:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310019",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18" align="right">Comment 18</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/586ce66280bbbc0154ee432aff751b00e32a945f">586ce66</a></td><td><code>NumberFieldElement.abs: Add doctest</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f7b105fac07ddffadf352fa3031746d187ba7d28">f7b105f</a></td><td><code>real embedded numberfield abs: Return complex if prec is given</code></td></tr></table>




---

archive/issue_comments_310020.json:
```json
{
    "body": "Changed commit from **[ba1fbec](https://github.com/sagemath/sagetrac-mirror/commit/ba1fbec6a975d37711181292157c4866ca3c148e)** to **[f7b105f](https://github.com/sagemath/sagetrac-mirror/commit/f7b105fac07ddffadf352fa3031746d187ba7d28)**",
    "created_at": "2016-08-05T18:12:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310020",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[ba1fbec](https://github.com/sagemath/sagetrac-mirror/commit/ba1fbec6a975d37711181292157c4866ca3c148e)** to **[f7b105f](https://github.com/sagemath/sagetrac-mirror/commit/f7b105fac07ddffadf352fa3031746d187ba7d28)**



---

archive/issue_comments_310021.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@videlec](#comment%3A17):\n>  you should also test the output with arguments (both `i` and `prec`).\n\nDone. \nI've also changed what happens when `prec` is provided. I think it makes more sense now.",
    "created_at": "2016-08-05T18:13:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310021",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@videlec](#comment%3A17):
>  you should also test the output with arguments (both `i` and `prec`).

Done. 
I've also changed what happens when `prec` is provided. I think it makes more sense now.



---

archive/issue_comments_310022.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nIf `prec=None` and there is no real embedded, I would actually return an element of `AA` (the real algebraic field). But it becomes beyond the scope of the ticket... (and breaks even more the previous behavior).",
    "created_at": "2016-08-05T20:50:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310022",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">Comment 20</div>

If `prec=None` and there is no real embedded, I would actually return an element of `AA` (the real algebraic field). But it becomes beyond the scope of the ticket... (and breaks even more the previous behavior).



---

archive/issue_comments_310023.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nYes, I guess that would make sense; but I agree it's too much for this ticket.\n\nBy the way, why does it use complex fields instead of real fields for the result?",
    "created_at": "2016-08-05T21:22:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310023",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:21" align="right">Comment 21</div>

Yes, I guess that would make sense; but I agree it's too much for this ticket.

By the way, why does it use complex fields instead of real fields for the result?



---

archive/issue_comments_310024.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nIt does not: the method uses complex field for the embedding. But the result of `.abs()` on a complex number is real\n\n```\nsage: CC(0,1).abs().parent()\nReal Field with 53 bits of precision\n```",
    "created_at": "2016-08-05T21:25:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310024",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">Comment 22</div>

It does not: the method uses complex field for the embedding. But the result of `.abs()` on a complex number is real

```
sage: CC(0,1).abs().parent()
Real Field with 53 bits of precision
```



---

archive/issue_comments_310025.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c7634ff5562f2cc59288f0986c8538a16d37f39e\">c7634ff</a></td><td><code>NumberFieldElement.abs: Clarify return type</code></td></tr></table>\n",
    "created_at": "2016-08-05T21:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310025",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:23" align="right">Comment 23</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c7634ff5562f2cc59288f0986c8538a16d37f39e">c7634ff</a></td><td><code>NumberFieldElement.abs: Clarify return type</code></td></tr></table>




---

archive/issue_comments_310026.json:
```json
{
    "body": "Changed commit from **[f7b105f](https://github.com/sagemath/sagetrac-mirror/commit/f7b105fac07ddffadf352fa3031746d187ba7d28)** to **[c7634ff](https://github.com/sagemath/sagetrac-mirror/commit/c7634ff5562f2cc59288f0986c8538a16d37f39e)**",
    "created_at": "2016-08-05T21:32:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310026",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f7b105f](https://github.com/sagemath/sagetrac-mirror/commit/f7b105fac07ddffadf352fa3031746d187ba7d28)** to **[c7634ff](https://github.com/sagemath/sagetrac-mirror/commit/c7634ff5562f2cc59288f0986c8538a16d37f39e)**



---

archive/issue_comments_310027.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@videlec](#comment%3A22):\n> It does not: the method uses complex field for the embedding. But the result of `.abs()` on a complex number is real\n\nAh, thanks. I've reworded the docstring to clarify.",
    "created_at": "2016-08-05T21:34:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310027",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@videlec](#comment%3A22):
> It does not: the method uses complex field for the embedding. But the result of `.abs()` on a complex number is real

Ah, thanks. I've reworded the docstring to clarify.



---

archive/issue_comments_310028.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nI don't understand this sentence from the doc of `abs`\n\n```\nIf ``prec`` is ``None`` or 53, then the complex double field is\nused; otherwise the arbitrary precision (but slow) complex\nfield is used.  The result is in the corresponding real field.\n```\nThe \"complex double field\" refers to I guess \"CDF\" but which is actually not used! I would rather remove that sentence and explain that the default precision is `53`.",
    "created_at": "2016-08-05T22:09:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310028",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">Comment 25</div>

I don't understand this sentence from the doc of `abs`

```
If ``prec`` is ``None`` or 53, then the complex double field is
used; otherwise the arbitrary precision (but slow) complex
field is used.  The result is in the corresponding real field.
```
The "complex double field" refers to I guess "CDF" but which is actually not used! I would rather remove that sentence and explain that the default precision is `53`.



---

archive/issue_comments_310029.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/15d160e2ec536e988494080f187e164f26ddd291\">15d160e</a></td><td><code>NumberFieldElement.abs: Clarify that CDF is not used</code></td></tr></table>\n",
    "created_at": "2016-08-05T22:22:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310029",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:26" align="right">Comment 26</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/15d160e2ec536e988494080f187e164f26ddd291">15d160e</a></td><td><code>NumberFieldElement.abs: Clarify that CDF is not used</code></td></tr></table>




---

archive/issue_comments_310030.json:
```json
{
    "body": "Changed commit from **[c7634ff](https://github.com/sagemath/sagetrac-mirror/commit/c7634ff5562f2cc59288f0986c8538a16d37f39e)** to **[15d160e](https://github.com/sagemath/sagetrac-mirror/commit/15d160e2ec536e988494080f187e164f26ddd291)**",
    "created_at": "2016-08-05T22:22:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310030",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c7634ff](https://github.com/sagemath/sagetrac-mirror/commit/c7634ff5562f2cc59288f0986c8538a16d37f39e)** to **[15d160e](https://github.com/sagemath/sagetrac-mirror/commit/15d160e2ec536e988494080f187e164f26ddd291)**



---

archive/issue_comments_310031.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@videlec](#comment%3A25):\n> I don't understand this sentence from the doc of `abs`\n> \n> ```\n> If ``prec`` is ``None`` or 53, then the complex double field is\n> used; otherwise the arbitrary precision (but slow) complex\n> field is used.  The result is in the corresponding real field.\n> ```\n> The \"complex double field\" refers to I guess \"CDF\" but which is actually not used! I would rather remove that sentence and explain that the default precision is `53`.\n\nThanks for catching this.",
    "created_at": "2016-08-05T22:23:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310031",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@videlec](#comment%3A25):
> I don't understand this sentence from the doc of `abs`
> 
> ```
> If ``prec`` is ``None`` or 53, then the complex double field is
> used; otherwise the arbitrary precision (but slow) complex
> field is used.  The result is in the corresponding real field.
> ```
> The "complex double field" refers to I guess "CDF" but which is actually not used! I would rather remove that sentence and explain that the default precision is `53`.

Thanks for catching this.



---

archive/issue_comments_310032.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nThanks for the fix!",
    "created_at": "2016-08-05T22:28:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310032",
    "user": "https://github.com/videlec"
}
```

<div id="comment:28" align="right">Comment 28</div>

Thanks for the fix!



---

archive/issue_events_278865.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-05T22:28:37Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278865"
}
```



---

archive/issue_events_278866.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-05T22:28:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278866"
}
```



---

archive/issue_events_278867.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-05T22:28:37Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278867"
}
```



---

archive/issue_events_278868.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-05T22:28:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278868"
}
```



---

archive/issue_comments_310033.json:
```json
{
    "body": "Changed branch from **[u/mkoeppe/abs_for_number_field_element](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/abs_for_number_field_element)** to **[15d160e](https://github.com/sagemath/sagetrac-mirror/commit/15d160e2ec536e988494080f187e164f26ddd291)**",
    "created_at": "2016-08-07T20:01:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21105#issuecomment-310033",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/mkoeppe/abs_for_number_field_element](https://github.com/sagemath/sagetrac-mirror/tree/u/mkoeppe/abs_for_number_field_element)** to **[15d160e](https://github.com/sagemath/sagetrac-mirror/commit/15d160e2ec536e988494080f187e164f26ddd291)**



---

archive/issue_events_278869.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-07T20:01:07Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278869"
}
```



---

archive/issue_events_278870.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "60028901b4f6691468bf9fd5d1bff58769934176",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-08-07T20:01:07Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21105",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21105#event-278870"
}
```
