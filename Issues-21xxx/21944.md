# Issue 21944: OpenSSL for Sierra

archive/issues_021707.json:
```json
{
    "body": "Sage 7.4 and above (at the very least) builds without the OpenSSL bindings for python. The path from #19626 has changed and needs to be updated on newer versions of OS X to:\n\n`\"${xcode}/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift-migrator/sdks/MacOSX.sdk/usr/include/\"`\n\n(/sdk/ ->/sdks/)\n\nCC:  @jdemeyer kosta @jhpalmieri\n\nKeywords: days79,osx\n\nBranch/Commit: 31aca55368e50a68b60901c199fe6b287b275fc3\n\nReviewer: Marcelo Forets\n\nAuthor: Konstantin Kliakhandler\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21944\n\n",
    "closed_at": "2017-10-01T00:19:09Z",
    "created_at": "2016-11-23T11:47:57Z",
    "labels": [
        "component: build: configure",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.1",
    "title": "OpenSSL for Sierra",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21944",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```
Sage 7.4 and above (at the very least) builds without the OpenSSL bindings for python. The path from #19626 has changed and needs to be updated on newer versions of OS X to:

`"${xcode}/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift-migrator/sdks/MacOSX.sdk/usr/include/"`

(/sdk/ ->/sdks/)

CC:  @jdemeyer kosta @jhpalmieri

Keywords: days79,osx

Branch/Commit: 31aca55368e50a68b60901c199fe6b287b275fc3

Reviewer: Marcelo Forets

Author: Konstantin Kliakhandler

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21944





---

archive/issue_comments_408554.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Sage 7.4 and above (at the very least) builds without the OpenSSL bindings for python. The path from #19626 has changed and needs to be updated on newer versions of OS X to:\n \n-\"${xcode}/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift-migrator/sdks/MacOSX.sdk/usr/include/\"\n+`\"${xcode}/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift-migrator/sdks/MacOSX.sdk/usr/include/\"`\n \n (/sdk/ ->/sdks/)\n``````\n",
    "created_at": "2016-11-23T12:07:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408554",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Sage 7.4 and above (at the very least) builds without the OpenSSL bindings for python. The path from #19626 has changed and needs to be updated on newer versions of OS X to:
 
-"${xcode}/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift-migrator/sdks/MacOSX.sdk/usr/include/"
+`"${xcode}/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift-migrator/sdks/MacOSX.sdk/usr/include/"`
 
 (/sdk/ ->/sdks/)
``````




---

archive/issue_comments_408555.json:
```json
{
    "body": "Changing branch from \"\" to \"u/Kosta/openssl_for_sierra\"",
    "created_at": "2016-11-23T12:38:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408555",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing branch from "" to "u/Kosta/openssl_for_sierra"



---

archive/issue_comments_408556.json:
```json
{
    "body": "Changing commit from \"\" to \"9e2978e7f4f0a1594ffc9439963bb218d311fbe7\"",
    "created_at": "2016-11-23T12:40:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408556",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing commit from "" to "9e2978e7f4f0a1594ffc9439963bb218d311fbe7"



---

archive/issue_comments_408557.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-23T12:42:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408557",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_408558.json:
```json
{
    "body": "<a id='comment:5'></a>\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[9e2978e](https://github.com/sagemath/sagetrac-mirror/commit/9e2978e7f4f0a1594ffc9439963bb218d311fbe7)|`Link python with OpenSSL on Sierra. Fixes #21944`|",
    "created_at": "2016-11-23T12:43:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408558",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:5'></a>
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[9e2978e](https://github.com/sagemath/sagetrac-mirror/commit/9e2978e7f4f0a1594ffc9439963bb218d311fbe7)|`Link python with OpenSSL on Sierra. Fixes #21944`|



---

archive/issue_comments_408559.json:
```json
{
    "body": "<a id='comment:6'></a>\nNew commits:\n|                                                                                                                                          |                                                  |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|\n|[9e2978e](https://github.com/sagemath/sagetrac-mirror/commit/9e2978e7f4f0a1594ffc9439963bb218d311fbe7)|`Link python with OpenSSL on Sierra. Fixes #21944`|",
    "created_at": "2016-11-23T12:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408559",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:6'></a>
New commits:
|                                                                                                                                          |                                                  |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------|
|[9e2978e](https://github.com/sagemath/sagetrac-mirror/commit/9e2978e7f4f0a1594ffc9439963bb218d311fbe7)|`Link python with OpenSSL on Sierra. Fixes #21944`|



---

archive/issue_comments_408560.json:
```json
{
    "body": "Changing author from \"\" to \"Konstantin Kliakhandler\"",
    "created_at": "2016-11-23T12:47:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408560",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing author from "" to "Konstantin Kliakhandler"



---

archive/issue_comments_408561.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis hack is getting a little out of hand. It might be reasonable to start including openssl manually in OS X.",
    "created_at": "2016-11-23T12:50:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408561",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:8'></a>
This hack is getting a little out of hand. It might be reasonable to start including openssl manually in OS X.



---

archive/issue_comments_408562.json:
```json
{
    "body": "<a id='comment:9'></a>\n1. The indentation in the script is inconsistent.\n\n2. Why check for `.../usr/include` and not `.../usr/include/openssl`?",
    "created_at": "2016-11-23T13:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408562",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:9'></a>
1. The indentation in the script is inconsistent.

2. Why check for `.../usr/include` and not `.../usr/include/openssl`?



---

archive/issue_comments_408563.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-23T13:50:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408563",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_408564.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                               |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|\n|[2500ade](https://github.com/sagemath/sagetrac-mirror/commit/2500ade5919cb644582ccde9f21cb2c3e29c7e4a)|`Improve indentation and test for correct dir.`|",
    "created_at": "2016-11-23T15:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408564",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                               |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
|[2500ade](https://github.com/sagemath/sagetrac-mirror/commit/2500ade5919cb644582ccde9f21cb2c3e29c7e4a)|`Improve indentation and test for correct dir.`|



---

archive/issue_comments_408565.json:
```json
{
    "body": "Changing commit from \"9e2978e7f4f0a1594ffc9439963bb218d311fbe7\" to \"2500ade5919cb644582ccde9f21cb2c3e29c7e4a\"",
    "created_at": "2016-11-23T15:42:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408565",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "9e2978e7f4f0a1594ffc9439963bb218d311fbe7" to "2500ade5919cb644582ccde9f21cb2c3e29c7e4a"



---

archive/issue_comments_408566.json:
```json
{
    "body": "<a id='comment:11'></a>\nThanks for the comment!\n\nPlease see the latest commit - my editor indented now the whole file (and I reverted the couple of places where it wanted to indent differently than how it was indented by previous people). Hopefully now will be better.\n\nRegarding the checks, I fixed the tested dirs.\n\nReplying to [jdemeyer](#comment%3A9):\n> 1. The indentation in the script is inconsistent.\n> \n> 2. Why check for `.../usr/include` and not `.../usr/include/openssl`?",
    "created_at": "2016-11-23T15:45:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408566",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:11'></a>
Thanks for the comment!

Please see the latest commit - my editor indented now the whole file (and I reverted the couple of places where it wanted to indent differently than how it was indented by previous people). Hopefully now will be better.

Regarding the checks, I fixed the tested dirs.

Replying to [jdemeyer](#comment%3A9):
> 1. The indentation in the script is inconsistent.
> 
> 2. Why check for `.../usr/include` and not `.../usr/include/openssl`?



---

archive/issue_comments_408567.json:
```json
{
    "body": "<a id='comment:13'></a>\nThe `elif`/`else` is still indented inconsistently.",
    "created_at": "2016-11-23T15:48:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408567",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:13'></a>
The `elif`/`else` is still indented inconsistently.



---

archive/issue_comments_408568.json:
```json
{
    "body": "Changing commit from \"2500ade5919cb644582ccde9f21cb2c3e29c7e4a\" to \"1857d1f41eebd51f82c56abb8e488a3a6cf8bc14\"",
    "created_at": "2016-11-23T19:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408568",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "2500ade5919cb644582ccde9f21cb2c3e29c7e4a" to "1857d1f41eebd51f82c56abb8e488a3a6cf8bc14"



---

archive/issue_comments_408569.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[1857d1f](https://github.com/sagemath/sagetrac-mirror/commit/1857d1f41eebd51f82c56abb8e488a3a6cf8bc14)|`Fix indentation in if/else.`|",
    "created_at": "2016-11-23T19:16:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408569",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[1857d1f](https://github.com/sagemath/sagetrac-mirror/commit/1857d1f41eebd51f82c56abb8e488a3a6cf8bc14)|`Fix indentation in if/else.`|



---

archive/issue_comments_408570.json:
```json
{
    "body": "<a id='comment:15'></a>\nThanks! I completely forgot you have elif in bash.\n\nReplying to [jdemeyer](#comment%3A13):\n> The `elif`/`else` is still indented inconsistently.",
    "created_at": "2016-11-23T19:18:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408570",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:15'></a>
Thanks! I completely forgot you have elif in bash.

Replying to [jdemeyer](#comment%3A13):
> The `elif`/`else` is still indented inconsistently.



---

archive/issue_comments_408571.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-11-23T19:18:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408571",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_408572.json:
```json
{
    "body": "<a id='comment:17'></a>\nIt looks like beyond Sierra this will not be enough (I am running a beta version on one of my computers and here the new path does not exist. I will add an additional check for where homebrew installs openssl.",
    "created_at": "2016-11-29T18:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408572",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:17'></a>
It looks like beyond Sierra this will not be enough (I am running a beta version on one of my computers and here the new path does not exist. I will add an additional check for where homebrew installs openssl.



---

archive/issue_comments_408573.json:
```json
{
    "body": "Changing keywords from \"days79\" to \"days79,osx\".",
    "created_at": "2016-11-29T18:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408573",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing keywords from "days79" to "days79,osx".



---

archive/issue_comments_408574.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-11-29T18:48:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408574",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_408575.json:
```json
{
    "body": "<a id='comment:19'></a>\nOn my Sierra machine, the directory\n\n```\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift-migrator/sdks/MacOSX.sdk/usr/include/\n```\ndoes not include an `openssl` subdirectory. `/usr/lib` contains `libssl.dylib`, but I'm not sure about the header files. What would they be called? (I also can't find them on an El Capitan machine.)",
    "created_at": "2016-11-30T02:53:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408575",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:19'></a>
On my Sierra machine, the directory

```
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/swift-migrator/sdks/MacOSX.sdk/usr/include/
```
does not include an `openssl` subdirectory. `/usr/lib` contains `libssl.dylib`, but I'm not sure about the header files. What would they be called? (I also can't find them on an El Capitan machine.)



---

archive/issue_comments_408576.json:
```json
{
    "body": "<a id='comment:20'></a>\nHaving updated to 10.12.2 I do not have this directory either, anymore. Therefore, I think the most reasonable way of proceeding is either to require users to roll their own openssl (or perhaps some compatible alternative) via e.g. homebrew, or to bundle it in the install (since even gcc is bundled, I think adding openssl would make a small difference). \n\nWhat do you think?\n\nHere is how the headers look on my end, with a homebrew openssl (note that the text scrolls to the right):\n\n```\n% ls /usr/local/opt/openssl/include/openssl\naes.h         bio.h         camellia.h    comp.h        des.h         dso.h         ec.h          err.h         krb5_asn.h    md5.h         objects.h     ossl_typ.h    pkcs7.h       rc4.h         seed.h        ssl.h         stack.h       txt_db.h      x509.h\nasn1.h        blowfish.h    cast.h        conf.h        des_old.h     dtls1.h       ecdh.h        evp.h         kssl.h        mdc2.h        ocsp.h        pem.h         pqueue.h      ripemd.h      sha.h         ssl2.h        symhacks.h    ui.h          x509_vfy.h\nasn1_mac.h    bn.h          cmac.h        conf_api.h    dh.h          e_os2.h       ecdsa.h       hmac.h        lhash.h       modes.h       opensslconf.h pem2.h        rand.h        rsa.h         srp.h         ssl23.h       tls1.h        ui_compat.h   x509v3.h\nasn1t.h       buffer.h      cms.h         crypto.h      dsa.h         ebcdic.h      engine.h      idea.h        md4.h         obj_mac.h     opensslv.h    pkcs12.h      rc2.h         safestack.h   srtp.h        ssl3.h        ts.h          whrlpool.h\n```",
    "created_at": "2016-12-24T09:43:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408576",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:20'></a>
Having updated to 10.12.2 I do not have this directory either, anymore. Therefore, I think the most reasonable way of proceeding is either to require users to roll their own openssl (or perhaps some compatible alternative) via e.g. homebrew, or to bundle it in the install (since even gcc is bundled, I think adding openssl would make a small difference). 

What do you think?

Here is how the headers look on my end, with a homebrew openssl (note that the text scrolls to the right):

```
% ls /usr/local/opt/openssl/include/openssl
aes.h         bio.h         camellia.h    comp.h        des.h         dso.h         ec.h          err.h         krb5_asn.h    md5.h         objects.h     ossl_typ.h    pkcs7.h       rc4.h         seed.h        ssl.h         stack.h       txt_db.h      x509.h
asn1.h        blowfish.h    cast.h        conf.h        des_old.h     dtls1.h       ecdh.h        evp.h         kssl.h        mdc2.h        ocsp.h        pem.h         pqueue.h      ripemd.h      sha.h         ssl2.h        symhacks.h    ui.h          x509_vfy.h
asn1_mac.h    bn.h          cmac.h        conf_api.h    dh.h          e_os2.h       ecdsa.h       hmac.h        lhash.h       modes.h       opensslconf.h pem2.h        rand.h        rsa.h         srp.h         ssl23.h       tls1.h        ui_compat.h   x509v3.h
asn1t.h       buffer.h      cms.h         crypto.h      dsa.h         ebcdic.h      engine.h      idea.h        md4.h         obj_mac.h     opensslv.h    pkcs12.h      rc2.h         safestack.h   srtp.h        ssl3.h        ts.h          whrlpool.h
```



---

archive/issue_comments_408577.json:
```json
{
    "body": "Changing branch from \"u/Kosta/openssl_for_sierra\" to \"u/Kosta/21944/osx_openssl\"",
    "created_at": "2017-01-08T10:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408577",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing branch from "u/Kosta/openssl_for_sierra" to "u/Kosta/21944/osx_openssl"



---

archive/issue_comments_408578.json:
```json
{
    "body": "<a id='comment:22'></a>\nI removed the code that takes the openssl libraries from the swift framework as apparently this is a very short-lived solution (already disappeared on 10.12.1).\n\nInstead, I am now allowing the user to specify directly via OPENSSL_INCLUDE environment variable, and if it is not defined, I test the directory homebrew installs openssl to. If someone knows where fink/macports install the headers, I can add those as well. Finally, where would be a good place to put the documentation regarding the new environment variable?\n\n---\nNew commits:\n|                                                                                                                                          |                                                    |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[d851539](https://github.com/sagemath/sagetrac-mirror/commit/d8515390a163cd238e48808cacb25ebbcaee2ccc)|`Let user specify OPENSSL or search homebrew on OSX`|",
    "created_at": "2017-01-08T10:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408578",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:22'></a>
I removed the code that takes the openssl libraries from the swift framework as apparently this is a very short-lived solution (already disappeared on 10.12.1).

Instead, I am now allowing the user to specify directly via OPENSSL_INCLUDE environment variable, and if it is not defined, I test the directory homebrew installs openssl to. If someone knows where fink/macports install the headers, I can add those as well. Finally, where would be a good place to put the documentation regarding the new environment variable?

---
New commits:
|                                                                                                                                          |                                                    |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[d851539](https://github.com/sagemath/sagetrac-mirror/commit/d8515390a163cd238e48808cacb25ebbcaee2ccc)|`Let user specify OPENSSL or search homebrew on OSX`|



---

archive/issue_comments_408579.json:
```json
{
    "body": "Changing commit from \"1857d1f41eebd51f82c56abb8e488a3a6cf8bc14\" to \"d8515390a163cd238e48808cacb25ebbcaee2ccc\"",
    "created_at": "2017-01-08T10:25:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408579",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing commit from "1857d1f41eebd51f82c56abb8e488a3a6cf8bc14" to "d8515390a163cd238e48808cacb25ebbcaee2ccc"



---

archive/issue_comments_408580.json:
```json
{
    "body": "<a id='comment:23'></a>\nAccording to the top level configure file, Sage is not likely to build if either fink or MacPorts is installed:\n\n```\n###########################################################################\n# (OS X only)\n# Sage will probably not build at all if either Fink or MacPorts can be\n# found, and the error messages can be extremely confusing.  Even if it does\n# build, the product will probably be wrong.  This runs a basic check to\n# find them. Once the Sage build process is perfected, this won't be necessary.\n# dphilp 15/9/2008\n###########################################################################\n    PORTS_PATH=`which port`\n    if test -f \"$PORTS_PATH\"; then\nas_fn_error $? \"\\\"found MacPorts in $PORTS_PATH. Either:\n(1) rename /opt/local and /sw, or\n(2) change PATH and DYLD_LIBRARY_PATH\n(Once Sage is built, you can restore them.)\" \"$LINENO\" 5\n    fi\n\n    FINK_PATH=`which fink`\n    if test -f \"$FINK_PATH\"; then\nas_fn_error $? \"\\\"found Fink in $FINK_PATH. Either:\n(1) rename /opt/local and /sw, or\n(2) change PATH and DYLD_LIBRARY_PATH\n(Once Sage is built, you can restore them.)\" \"$LINENO\" 5\n    fi\nfi\n\n```\nSo we shouldn't use them for headers. I don't know if the same is true of homebrew.",
    "created_at": "2017-01-08T16:44:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408580",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:23'></a>
According to the top level configure file, Sage is not likely to build if either fink or MacPorts is installed:

```
###########################################################################
# (OS X only)
# Sage will probably not build at all if either Fink or MacPorts can be
# found, and the error messages can be extremely confusing.  Even if it does
# build, the product will probably be wrong.  This runs a basic check to
# find them. Once the Sage build process is perfected, this won't be necessary.
# dphilp 15/9/2008
###########################################################################
    PORTS_PATH=`which port`
    if test -f "$PORTS_PATH"; then
as_fn_error $? "\"found MacPorts in $PORTS_PATH. Either:
(1) rename /opt/local and /sw, or
(2) change PATH and DYLD_LIBRARY_PATH
(Once Sage is built, you can restore them.)" "$LINENO" 5
    fi

    FINK_PATH=`which fink`
    if test -f "$FINK_PATH"; then
as_fn_error $? "\"found Fink in $FINK_PATH. Either:
(1) rename /opt/local and /sw, or
(2) change PATH and DYLD_LIBRARY_PATH
(Once Sage is built, you can restore them.)" "$LINENO" 5
    fi
fi

```
So we shouldn't use them for headers. I don't know if the same is true of homebrew.



---

archive/issue_comments_408581.json:
```json
{
    "body": "<a id='comment:24'></a>\nAh, good to know!\n\nWell, I successfully built it while having homebrew installed and it worked fine AFAICT, but still, I can't exclude \"the product will probably be wrong\". If you don't like it, I can just remove the test for the homebrew headers and just rely on the user to input the appropriate environment variable.",
    "created_at": "2017-01-08T16:51:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408581",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

<a id='comment:24'></a>
Ah, good to know!

Well, I successfully built it while having homebrew installed and it worked fine AFAICT, but still, I can't exclude "the product will probably be wrong". If you don't like it, I can just remove the test for the homebrew headers and just rely on the user to input the appropriate environment variable.



---

archive/issue_comments_408582.json:
```json
{
    "body": "Changing commit from \"d8515390a163cd238e48808cacb25ebbcaee2ccc\" to \"0c9279e524046b4774a29b2f3ce4ec84ddcebce6\"",
    "created_at": "2017-01-09T09:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408582",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "d8515390a163cd238e48808cacb25ebbcaee2ccc" to "0c9279e524046b4774a29b2f3ce4ec84ddcebce6"



---

archive/issue_comments_408583.json:
```json
{
    "body": "<a id='comment:25'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[0b0b7d5](https://github.com/sagemath/sagetrac-mirror/commit/0b0b7d5da557b482cef163885c2616790957b3c2)|`Let user specify OPENSSL or search homebrew on OSX`|\n|[0c9279e](https://github.com/sagemath/sagetrac-mirror/commit/0c9279e524046b4774a29b2f3ce4ec84ddcebce6)|`Fixed missing fi statement`|",
    "created_at": "2017-01-09T09:38:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408583",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:25'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[0b0b7d5](https://github.com/sagemath/sagetrac-mirror/commit/0b0b7d5da557b482cef163885c2616790957b3c2)|`Let user specify OPENSSL or search homebrew on OSX`|
|[0c9279e](https://github.com/sagemath/sagetrac-mirror/commit/0c9279e524046b4774a29b2f3ce4ec84ddcebce6)|`Fixed missing fi statement`|



---

archive/issue_comments_408584.json:
```json
{
    "body": "<a id='comment:26'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|\n|[c180d70](https://github.com/sagemath/sagetrac-mirror/commit/c180d701ed715a1c55d04ccd6af04c1e8954f13b)|`Integrate better with previous solutions and with homebrew.`|",
    "created_at": "2017-01-12T22:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408584",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:26'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------|
|[c180d70](https://github.com/sagemath/sagetrac-mirror/commit/c180d701ed715a1c55d04ccd6af04c1e8954f13b)|`Integrate better with previous solutions and with homebrew.`|



---

archive/issue_comments_408585.json:
```json
{
    "body": "Changing commit from \"0c9279e524046b4774a29b2f3ce4ec84ddcebce6\" to \"c180d701ed715a1c55d04ccd6af04c1e8954f13b\"",
    "created_at": "2017-01-12T22:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408585",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "0c9279e524046b4774a29b2f3ce4ec84ddcebce6" to "c180d701ed715a1c55d04ccd6af04c1e8954f13b"



---

archive/issue_comments_408586.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2017-01-12T22:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408586",
    "user": "https://trac.sagemath.org/admin/accounts/users/Kosta"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_408587.json:
```json
{
    "body": "Changing commit from \"c180d701ed715a1c55d04ccd6af04c1e8954f13b\" to \"31aca55368e50a68b60901c199fe6b287b275fc3\"",
    "created_at": "2017-01-12T22:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408587",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "c180d701ed715a1c55d04ccd6af04c1e8954f13b" to "31aca55368e50a68b60901c199fe6b287b275fc3"



---

archive/issue_comments_408588.json:
```json
{
    "body": "<a id='comment:28'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[2bb9e93](https://github.com/sagemath/sagetrac-mirror/commit/2bb9e93277f9e0ea6495b8bb4b9cbe9227bbeb54)|`Let user specify OPENSSL or search homebrew on OSX`|\n|[8ef439f](https://github.com/sagemath/sagetrac-mirror/commit/8ef439f0ef6ddf222b2cbe34218d88a32ec83f9a)|`Fixed missing fi statement`|\n|[31aca55](https://github.com/sagemath/sagetrac-mirror/commit/31aca55368e50a68b60901c199fe6b287b275fc3)|`Integrate better with previous solutions and with homebrew.`|",
    "created_at": "2017-01-12T22:51:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408588",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:28'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[2bb9e93](https://github.com/sagemath/sagetrac-mirror/commit/2bb9e93277f9e0ea6495b8bb4b9cbe9227bbeb54)|`Let user specify OPENSSL or search homebrew on OSX`|
|[8ef439f](https://github.com/sagemath/sagetrac-mirror/commit/8ef439f0ef6ddf222b2cbe34218d88a32ec83f9a)|`Fixed missing fi statement`|
|[31aca55](https://github.com/sagemath/sagetrac-mirror/commit/31aca55368e50a68b60901c199fe6b287b275fc3)|`Integrate better with previous solutions and with homebrew.`|



---

archive/issue_comments_408589.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Marcelo Forets\"",
    "created_at": "2017-09-17T19:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408589",
    "user": "https://github.com/mforets"
}
```

Changing reviewer from "" to "Marcelo Forets"



---

archive/issue_comments_408590.json:
```json
{
    "body": "<a id='comment:29'></a>\ni run this on my macbook with \"El Capitan\", and it solves the TLS/SSL issue successfully. i think this is very helpful for mac users.\n\nunless some of you disagree, i'd suggest to accept it (in a week or so). thanks.",
    "created_at": "2017-09-17T19:03:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408590",
    "user": "https://github.com/mforets"
}
```

<a id='comment:29'></a>
i run this on my macbook with "El Capitan", and it solves the TLS/SSL issue successfully. i think this is very helpful for mac users.

unless some of you disagree, i'd suggest to accept it (in a week or so). thanks.



---

archive/issue_events_065817.json:
```json
{
    "actor": "https://github.com/mforets",
    "created_at": "2017-09-17T19:03:47Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "milestone": "sage-8.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21944#event-65817"
}
```



---

archive/issue_comments_408591.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-09-26T16:52:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408591",
    "user": "https://github.com/mforets"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_408592.json:
```json
{
    "body": "<a id='comment:31'></a>\nThe branch may be obtained here: https://github.com/dimpase/sagetrac-mirror/tree/u/Kosta/21944/osx_openssl",
    "created_at": "2017-09-27T08:05:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408592",
    "user": "https://github.com/dimpase"
}
```

<a id='comment:31'></a>
The branch may be obtained here: https://github.com/dimpase/sagetrac-mirror/tree/u/Kosta/21944/osx_openssl



---

archive/issue_comments_408593.json:
```json
{
    "body": "Changing branch from \"u/Kosta/21944/osx_openssl\" to \"31aca55368e50a68b60901c199fe6b287b275fc3\"",
    "created_at": "2017-10-01T00:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408593",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/Kosta/21944/osx_openssl" to "31aca55368e50a68b60901c199fe6b287b275fc3"



---

archive/issue_events_065818.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-10-01T00:19:09Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21944#event-65818"
}
```



---

archive/issue_comments_408594.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-10-01T00:19:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21944",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21944#issuecomment-408594",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed
