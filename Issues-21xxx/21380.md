# Issue 21380: cleaning CategoryObject/Parent

archive/issues_021143.json:
```json
{
    "assignees": [],
    "body": "## Abstract\n\nThis ticket stands to clean `CategoryObject` and `Parent` with respect to:\n- hacks and too specialized methods (e.g. `base` or `_ngens_`)\n- undocumented and old (e.g. `sage.structure.generators`)\n- duplicated stuff (e.g. `_an_element_` and `an_element`)\n\n## Subtasks\n\n### Base and generators\n\nWe should move out of `CategoryObject` the attributes and methods related to generators and variable names.\n\nAttributes:\n- `_names`\n\nMethods:\n- `gens_dict`\n- `gens_dict_recursive`\n- `objgens`\n- `objgen`\n- `_first_ngens`\n- `_defining_names`\n- `_assign_names`\n- `__temporarily_change_names`\n- `variable_names`\n- `variable_name`\n- `latex_variable_names`\n- `latex_name`\n- `inject_variables`\n- `base_ring`\n\nIt is not clear where all this should be moved... Moreover \"generators\" is ambiguous since \"monoid generators\", \"group generators\", \"algebra generators\", ... are different things.\n\n### Keep\n\nThese were originally proposed to be removed too, but are sufficiently useful:\n\nAttributes:\n- `_base`\nMethods:\n- `base`\nFunctions:\n- `normalize_names`\n- `certify_names`\n\n### Tickets\n\nSome related tickets are\n \n- gradual transition for to remove inheritance from `ParentWithGens` to `Ring` (#13683? still useful?)\n\n- #24430: normalization for `_names`, `variable_name` and `variable_names` in the context of polynomials and series\n\n### Transition to `FiniteEnumeratedSet`\n\n- set the category to `FiniteEnumeratedSets` where appropriate (#12957)\n\n- Move `__len__` and `__getitem__` from `Parent` to `FiniteEnumeratedSets` (#12955)\n\n- deprecate `CombinatorialClass` in favor of the `EnumeratedSets` category (#12913, #19986)\n\n### Duplicated names for same function\n\n- cleanup `an_element` (#18291)\n\n- cardinality vs order (#18410)\n\n### Others\n\n- move `Set_generic` and `Set_Python_type_class` out of `sage.structure.parent`. Moreover we should use `UniqueRepresentation` instead of the custom class factory `Set_PythonType`.\n\n- Various fixes in category initialization (#21353)\n\n- cleanup variable factories  (#18390)\n\n- cleanup cartesian products (task ticket #15425)\n\n### Closed tickets\n\n- refactor `getattr_from_other_class` (#20686)\n\n- Simplify `_populate_generators_` (#21381)\n\n- Remove `sage.structure.generators` (#21382)\n\n- Remove `ParentWith*AbelianGens` (#21383)\n\n- Remove `_populate_generators_` (#21385)\n\n- Always enable `debug.bad_parent_warnings` (#24109)\n\n\nCC:  @tscrim\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21380_\n\n",
    "created_at": "2016-08-31T16:01:55Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20categories",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-9.8",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "cleaning CategoryObject/Parent",
    "type": "issue",
    "updated_at": "2022-08-31T02:51:13Z",
    "url": "https://github.com/sagemath/sage/issues/21380",
    "user": "https://github.com/videlec"
}
```
## Abstract

This ticket stands to clean `CategoryObject` and `Parent` with respect to:
- hacks and too specialized methods (e.g. `base` or `_ngens_`)
- undocumented and old (e.g. `sage.structure.generators`)
- duplicated stuff (e.g. `_an_element_` and `an_element`)

## Subtasks

### Base and generators

We should move out of `CategoryObject` the attributes and methods related to generators and variable names.

Attributes:
- `_names`

Methods:
- `gens_dict`
- `gens_dict_recursive`
- `objgens`
- `objgen`
- `_first_ngens`
- `_defining_names`
- `_assign_names`
- `__temporarily_change_names`
- `variable_names`
- `variable_name`
- `latex_variable_names`
- `latex_name`
- `inject_variables`
- `base_ring`

It is not clear where all this should be moved... Moreover "generators" is ambiguous since "monoid generators", "group generators", "algebra generators", ... are different things.

### Keep

These were originally proposed to be removed too, but are sufficiently useful:

Attributes:
- `_base`
Methods:
- `base`
Functions:
- `normalize_names`
- `certify_names`

### Tickets

Some related tickets are
 
- gradual transition for to remove inheritance from `ParentWithGens` to `Ring` (#13683? still useful?)

- #24430: normalization for `_names`, `variable_name` and `variable_names` in the context of polynomials and series

### Transition to `FiniteEnumeratedSet`

- set the category to `FiniteEnumeratedSets` where appropriate (#12957)

- Move `__len__` and `__getitem__` from `Parent` to `FiniteEnumeratedSets` (#12955)

- deprecate `CombinatorialClass` in favor of the `EnumeratedSets` category (#12913, #19986)

### Duplicated names for same function

- cleanup `an_element` (#18291)

- cardinality vs order (#18410)

### Others

- move `Set_generic` and `Set_Python_type_class` out of `sage.structure.parent`. Moreover we should use `UniqueRepresentation` instead of the custom class factory `Set_PythonType`.

- Various fixes in category initialization (#21353)

- cleanup variable factories  (#18390)

- cleanup cartesian products (task ticket #15425)

### Closed tickets

- refactor `getattr_from_other_class` (#20686)

- Simplify `_populate_generators_` (#21381)

- Remove `sage.structure.generators` (#21382)

- Remove `ParentWith*AbelianGens` (#21383)

- Remove `_populate_generators_` (#21385)

- Always enable `debug.bad_parent_warnings` (#24109)


CC:  @tscrim

_Issue created by migration from https://trac.sagemath.org/ticket/21380_





---

archive/issue_events_282445.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-31T16:01:55Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282445"
}
```



---

archive/issue_events_282446.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-31T16:01:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20categories",
    "label_color": "0000ff",
    "label_name": "component: categories",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282446"
}
```



---

archive/issue_events_282447.json:
```json
{
    "actor": "https://github.com/videlec",
    "created_at": "2016-08-31T16:01:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282447"
}
```



---

archive/issue_comments_315521.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nAre you sure this would affect `Element` much? All the things you write are about `CategoryObject` or `Parent`.",
    "created_at": "2016-08-31T16:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315521",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:1" align="right">Comment 1</div>

Are you sure this would affect `Element` much? All the things you write are about `CategoryObject` or `Parent`.



---

archive/issue_events_282448.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-08-31T16:15:05Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "title_is": "cleaning CategoryObject/Parent",
    "title_was": "cleaning CategoryObject/Element/Parent",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282448"
}
```



---

archive/issue_comments_315522.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,6 @@\n ## Abstract\n \n-This ticket stands to clean `CategoryObject`, `Parent` and `Element` with respect to:\n+This ticket stands to clean `CategoryObject` and `Parent` with respect to:\n - hacks and too specialized methods (e.g. `base` or `_ngens_`)\n - undocumented and old (e.g. `sage.structure.generators`)\n - duplicated stuff (e.g. `_an_element_` and `an_element`)\n@@ -9,7 +9,7 @@\n \n ### Base and generators\n \n-We should move aout of `CategoryObject` the attributes and method relative to \"base\" and \"generators\". There are 3 such attributes\n+We should move out of `CategoryObject` the attributes and methods relative to \"base\" and \"generators\". There are 3 such attributes\n - `_generators`\n - `_base`\n - `_names`\n@@ -52,7 +52,7 @@\n \n ### Duplicated names for same function\n \n-- cleanup an_element (#18291)\n+- cleanup `an_element` (#18291)\n \n - cardinality vs order (#18410)\n \n@@ -60,7 +60,7 @@\n \n - move `Set_generic` and `Set_Python_type_class` out of `sage.structure.parent`. Moreover we should use `UniqueRepresentation` instead of the custom class factory `Set_PythonType`.\n \n-- refactor getattr_from_other_class (#20686)\n+- refactor `getattr_from_other_class` (#20686)\n \n - get rid of `guess_category` (#21353)\n \n``````\n",
    "created_at": "2016-08-31T16:15:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315522",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,6 @@
 ## Abstract
 
-This ticket stands to clean `CategoryObject`, `Parent` and `Element` with respect to:
+This ticket stands to clean `CategoryObject` and `Parent` with respect to:
 - hacks and too specialized methods (e.g. `base` or `_ngens_`)
 - undocumented and old (e.g. `sage.structure.generators`)
 - duplicated stuff (e.g. `_an_element_` and `an_element`)
@@ -9,7 +9,7 @@
 
 ### Base and generators
 
-We should move aout of `CategoryObject` the attributes and method relative to "base" and "generators". There are 3 such attributes
+We should move out of `CategoryObject` the attributes and methods relative to "base" and "generators". There are 3 such attributes
 - `_generators`
 - `_base`
 - `_names`
@@ -52,7 +52,7 @@
 
 ### Duplicated names for same function
 
-- cleanup an_element (#18291)
+- cleanup `an_element` (#18291)
 
 - cardinality vs order (#18410)
 
@@ -60,7 +60,7 @@
 
 - move `Set_generic` and `Set_Python_type_class` out of `sage.structure.parent`. Moreover we should use `UniqueRepresentation` instead of the custom class factory `Set_PythonType`.
 
-- refactor getattr_from_other_class (#20686)
+- refactor `getattr_from_other_class` (#20686)
 
 - get rid of `guess_category` (#21353)
 
``````




---

archive/issue_comments_315523.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,7 +13,7 @@\n - `_generators`\n - `_base`\n - `_names`\n-  And 21 such methods\n+  And 21 methods\n - `_populate_generators_`\n - `_ngens_` (used nowhere out of `category_object.pyx`!!)\n - `gens_dict`\n@@ -34,6 +34,11 @@\n - `has_base`\n - `base_ring`\n - `base`\n+  And 2 functions\n+- `normalize_names`\n+- `certify_names`\n+  And 1 class\n+- `localvars`\n \n It is not clear where all this should be moved... Moreover \"generators\" is ambiguous since \"monoid generators\", \"group generators\", \"algebra generators\", ... are different things.\n \n``````\n",
    "created_at": "2016-08-31T16:20:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315523",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,7 +13,7 @@
 - `_generators`
 - `_base`
 - `_names`
-  And 21 such methods
+  And 21 methods
 - `_populate_generators_`
 - `_ngens_` (used nowhere out of `category_object.pyx`!!)
 - `gens_dict`
@@ -34,6 +34,11 @@
 - `has_base`
 - `base_ring`
 - `base`
+  And 2 functions
+- `normalize_names`
+- `certify_names`
+  And 1 class
+- `localvars`
 
 It is not clear where all this should be moved... Moreover "generators" is ambiguous since "monoid generators", "group generators", "algebra generators", ... are different things.
 
``````




---

archive/issue_comments_315524.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -15,7 +15,7 @@\n - `_names`\n   And 21 methods\n - `_populate_generators_`\n-- `_ngens_` (used nowhere out of `category_object.pyx`!!)\n+- `_ngens_` (always returns zero!!)\n - `gens_dict`\n - `gens_dict_recursive`\n - `objgens`\n``````\n",
    "created_at": "2016-08-31T16:22:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315524",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -15,7 +15,7 @@
 - `_names`
   And 21 methods
 - `_populate_generators_`
-- `_ngens_` (used nowhere out of `category_object.pyx`!!)
+- `_ngens_` (always returns zero!!)
 - `gens_dict`
 - `gens_dict_recursive`
 - `objgens`
``````




---

archive/issue_comments_315525.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -72,3 +72,5 @@\n - cleanup variable factories  (#18390)\n \n - cleanup cartesian products (task ticket #15425)\n+\n+- simplify `_populate_generators_` (#21381)\n``````\n",
    "created_at": "2016-08-31T17:30:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315525",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -72,3 +72,5 @@
 - cleanup variable factories  (#18390)
 
 - cleanup cartesian products (task ticket #15425)
+
+- simplify `_populate_generators_` (#21381)
``````




---

archive/issue_comments_315526.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -74,3 +74,5 @@\n - cleanup cartesian products (task ticket #15425)\n \n - simplify `_populate_generators_` (#21381)\n+\n+- remove unused classes from `generators.pyx` (#21382)\n``````\n",
    "created_at": "2016-08-31T17:43:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315526",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -74,3 +74,5 @@
 - cleanup cartesian products (task ticket #15425)
 
 - simplify `_populate_generators_` (#21381)
+
+- remove unused classes from `generators.pyx` (#21382)
``````




---

archive/issue_comments_315527.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -75,4 +75,6 @@\n \n - simplify `_populate_generators_` (#21381)\n \n-- remove unused classes from `generators.pyx` (#21382)\n+- Remove unused classes from `generators.pyx` (#21382)\n+\n+- Remove ParentWith*AbelianGens (#21383)\n``````\n",
    "created_at": "2016-08-31T20:49:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315527",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -75,4 +75,6 @@
 
 - simplify `_populate_generators_` (#21381)
 
-- remove unused classes from `generators.pyx` (#21382)
+- Remove unused classes from `generators.pyx` (#21382)
+
+- Remove ParentWith*AbelianGens (#21383)
``````




---

archive/issue_comments_315528.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -73,8 +73,8 @@\n \n - cleanup cartesian products (task ticket #15425)\n \n-- simplify `_populate_generators_` (#21381)\n+- Simplify `_populate_generators_` (#21381)\n \n - Remove unused classes from `generators.pyx` (#21382)\n \n-- Remove ParentWith*AbelianGens (#21383)\n+- Remove `ParentWith*AbelianGens` (#21383)\n``````\n",
    "created_at": "2016-08-31T20:50:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315528",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -73,8 +73,8 @@
 
 - cleanup cartesian products (task ticket #15425)
 
-- simplify `_populate_generators_` (#21381)
+- Simplify `_populate_generators_` (#21381)
 
 - Remove unused classes from `generators.pyx` (#21382)
 
-- Remove ParentWith*AbelianGens (#21383)
+- Remove `ParentWith*AbelianGens` (#21383)
``````




---

archive/issue_comments_315529.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -75,6 +75,6 @@\n \n - Simplify `_populate_generators_` (#21381)\n \n-- Remove unused classes from `generators.pyx` (#21382)\n+- Remove `sage.structure.generators` (#21382)\n \n - Remove `ParentWith*AbelianGens` (#21383)\n``````\n",
    "created_at": "2016-09-01T07:06:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315529",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -75,6 +75,6 @@
 
 - Simplify `_populate_generators_` (#21381)
 
-- Remove unused classes from `generators.pyx` (#21382)
+- Remove `sage.structure.generators` (#21382)
 
 - Remove `ParentWith*AbelianGens` (#21383)
``````




---

archive/issue_comments_315530.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -43,7 +43,6 @@\n It is not clear where all this should be moved... Moreover \"generators\" is ambiguous since \"monoid generators\", \"group generators\", \"algebra generators\", ... are different things.\n \n Some Related tickets are\n-- improve coverage of `generators.pyx` (#5768? still useful?)\n  \n - gradual transition for to remove inheritance from `ParentWithGens` to `Ring` (#13683? still useful?)\n \n``````\n",
    "created_at": "2016-09-01T07:07:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315530",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -43,7 +43,6 @@
 It is not clear where all this should be moved... Moreover "generators" is ambiguous since "monoid generators", "group generators", "algebra generators", ... are different things.
 
 Some Related tickets are
-- improve coverage of `generators.pyx` (#5768? still useful?)
  
 - gradual transition for to remove inheritance from `ParentWithGens` to `Ring` (#13683? still useful?)
 
``````




---

archive/issue_comments_315531.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,12 +10,12 @@\n ### Base and generators\n \n We should move out of `CategoryObject` the attributes and methods relative to \"base\" and \"generators\". There are 3 such attributes\n-- `_generators`\n+- `_generators`: removed in #21382\n - `_base`\n - `_names`\n   And 21 methods\n - `_populate_generators_`\n-- `_ngens_` (always returns zero!!)\n+- `_ngens_`: removed in #21381\n - `gens_dict`\n - `gens_dict_recursive`\n - `objgens`\n``````\n",
    "created_at": "2016-09-01T07:15:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315531",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,12 +10,12 @@
 ### Base and generators
 
 We should move out of `CategoryObject` the attributes and methods relative to "base" and "generators". There are 3 such attributes
-- `_generators`
+- `_generators`: removed in #21382
 - `_base`
 - `_names`
   And 21 methods
 - `_populate_generators_`
-- `_ngens_` (always returns zero!!)
+- `_ngens_`: removed in #21381
 - `gens_dict`
 - `gens_dict_recursive`
 - `objgens`
``````




---

archive/issue_comments_315532.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -14,7 +14,7 @@\n - `_base`\n - `_names`\n   And 21 methods\n-- `_populate_generators_`\n+- `_populate_generators_`: removed in #21385\n - `_ngens_`: removed in #21381\n - `gens_dict`\n - `gens_dict_recursive`\n@@ -77,3 +77,5 @@\n - Remove `sage.structure.generators` (#21382)\n \n - Remove `ParentWith*AbelianGens` (#21383)\n+\n+- Remove `_populate_generators_` (#21385)\n``````\n",
    "created_at": "2016-09-01T07:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315532",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -14,7 +14,7 @@
 - `_base`
 - `_names`
   And 21 methods
-- `_populate_generators_`
+- `_populate_generators_`: removed in #21385
 - `_ngens_`: removed in #21381
 - `gens_dict`
 - `gens_dict_recursive`
@@ -77,3 +77,5 @@
 - Remove `sage.structure.generators` (#21382)
 
 - Remove `ParentWith*AbelianGens` (#21383)
+
+- Remove `_populate_generators_` (#21385)
``````




---

archive/issue_comments_315533.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -30,7 +30,7 @@\n - `latex_variable_names`\n - `latex_name`\n - `inject_variables`\n-- `injvar`\n+- `injvar`: deprecated (#4143)\n - `has_base`\n - `base_ring`\n - `base`\n``````\n",
    "created_at": "2016-09-02T13:31:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315533",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -30,7 +30,7 @@
 - `latex_variable_names`
 - `latex_name`
 - `inject_variables`
-- `injvar`
+- `injvar`: deprecated (#4143)
 - `has_base`
 - `base_ring`
 - `base`
``````




---

archive/issue_comments_315534.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -30,7 +30,7 @@\n - `latex_variable_names`\n - `latex_name`\n - `inject_variables`\n-- `injvar`: deprecated (#4143)\n+- `injvar`: deprecated since 8 years! (#4143)\n - `has_base`\n - `base_ring`\n - `base`\n``````\n",
    "created_at": "2016-09-02T13:32:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315534",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -30,7 +30,7 @@
 - `latex_variable_names`
 - `latex_name`
 - `inject_variables`
-- `injvar`: deprecated (#4143)
+- `injvar`: deprecated since 8 years! (#4143)
 - `has_base`
 - `base_ring`
 - `base`
``````




---

archive/issue_comments_315535.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -24,7 +24,7 @@\n - `_defining_names`\n - `_assign_names`\n - `__temporarily_change_names`\n-- `_temporarily_change_names`\n+- `_temporarily_change_names`: unused\n - `variable_names`\n - `variable_name`\n - `latex_variable_names`\n@@ -38,7 +38,7 @@\n - `normalize_names`\n - `certify_names`\n   And 1 class\n-- `localvars`\n+- `localvars`: unused\n \n It is not clear where all this should be moved... Moreover \"generators\" is ambiguous since \"monoid generators\", \"group generators\", \"algebra generators\", ... are different things.\n \n``````\n",
    "created_at": "2016-09-02T13:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315535",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -24,7 +24,7 @@
 - `_defining_names`
 - `_assign_names`
 - `__temporarily_change_names`
-- `_temporarily_change_names`
+- `_temporarily_change_names`: unused
 - `variable_names`
 - `variable_name`
 - `latex_variable_names`
@@ -38,7 +38,7 @@
 - `normalize_names`
 - `certify_names`
   And 1 class
-- `localvars`
+- `localvars`: unused
 
 It is not clear where all this should be moved... Moreover "generators" is ambiguous since "monoid generators", "group generators", "algebra generators", ... are different things.
 
``````




---

archive/issue_comments_315536.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,12 +10,12 @@\n ### Base and generators\n \n We should move out of `CategoryObject` the attributes and methods relative to \"base\" and \"generators\". There are 3 such attributes\n-- `_generators`: removed in #21382\n+- `_generators`: unused, removed in #21382\n - `_base`\n - `_names`\n   And 21 methods\n-- `_populate_generators_`: removed in #21385\n-- `_ngens_`: removed in #21381\n+- `_populate_generators_`: unused, removed in #21385\n+- `_ngens_`: unused, removed in #21381\n - `gens_dict`\n - `gens_dict_recursive`\n - `objgens`\n@@ -24,13 +24,13 @@\n - `_defining_names`\n - `_assign_names`\n - `__temporarily_change_names`\n-- `_temporarily_change_names`: unused\n+- `_temporarily_change_names`: unused, removed in #21395\n - `variable_names`\n - `variable_name`\n - `latex_variable_names`\n - `latex_name`\n - `inject_variables`\n-- `injvar`: deprecated since 8 years! (#4143)\n+- `injvar`: unused, removed in #21395\n - `has_base`\n - `base_ring`\n - `base`\n@@ -38,7 +38,7 @@\n - `normalize_names`\n - `certify_names`\n   And 1 class\n-- `localvars`: unused\n+- `localvars`: unused, removed in #21395\n \n It is not clear where all this should be moved... Moreover \"generators\" is ambiguous since \"monoid generators\", \"group generators\", \"algebra generators\", ... are different things.\n \n``````\n",
    "created_at": "2016-09-02T13:41:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315536",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,12 +10,12 @@
 ### Base and generators
 
 We should move out of `CategoryObject` the attributes and methods relative to "base" and "generators". There are 3 such attributes
-- `_generators`: removed in #21382
+- `_generators`: unused, removed in #21382
 - `_base`
 - `_names`
   And 21 methods
-- `_populate_generators_`: removed in #21385
-- `_ngens_`: removed in #21381
+- `_populate_generators_`: unused, removed in #21385
+- `_ngens_`: unused, removed in #21381
 - `gens_dict`
 - `gens_dict_recursive`
 - `objgens`
@@ -24,13 +24,13 @@
 - `_defining_names`
 - `_assign_names`
 - `__temporarily_change_names`
-- `_temporarily_change_names`: unused
+- `_temporarily_change_names`: unused, removed in #21395
 - `variable_names`
 - `variable_name`
 - `latex_variable_names`
 - `latex_name`
 - `inject_variables`
-- `injvar`: deprecated since 8 years! (#4143)
+- `injvar`: unused, removed in #21395
 - `has_base`
 - `base_ring`
 - `base`
@@ -38,7 +38,7 @@
 - `normalize_names`
 - `certify_names`
   And 1 class
-- `localvars`: unused
+- `localvars`: unused, removed in #21395
 
 It is not clear where all this should be moved... Moreover "generators" is ambiguous since "monoid generators", "group generators", "algebra generators", ... are different things.
 
``````




---

archive/issue_comments_315537.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -31,7 +31,7 @@\n - `latex_name`\n - `inject_variables`\n - `injvar`: unused, removed in #21395\n-- `has_base`\n+- `has_base`: unused, deprecated in #21395\n - `base_ring`\n - `base`\n   And 2 functions\n``````\n",
    "created_at": "2016-09-02T13:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315537",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -31,7 +31,7 @@
 - `latex_name`
 - `inject_variables`
 - `injvar`: unused, removed in #21395
-- `has_base`
+- `has_base`: unused, deprecated in #21395
 - `base_ring`
 - `base`
   And 2 functions
``````




---

archive/issue_comments_315538.json:
```json
{
    "body": "Replying to [ticket:21380 vdelecroix]:\n> We should move out of `CategoryObject` the attributes and methods relative to \"base\"\n\nAfter thinking about this now and then, I think that it does make sense to keep `_base` inside `CategoryObject`. There are a lot of objects which naturally have a base object. For efficiency and simplicity, I suggest to keep `CategoryObject._base`.",
    "created_at": "2017-09-20T07:53:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315538",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [ticket:21380 vdelecroix]:
> We should move out of `CategoryObject` the attributes and methods relative to "base"

After thinking about this now and then, I think that it does make sense to keep `_base` inside `CategoryObject`. There are a lot of objects which naturally have a base object. For efficiency and simplicity, I suggest to keep `CategoryObject._base`.



---

archive/issue_comments_315539.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,13 +9,13 @@\n \n ### Base and generators\n \n-We should move out of `CategoryObject` the attributes and methods relative to \"base\" and \"generators\". There are 3 such attributes\n-- `_generators`: unused, removed in #21382\n+We should move out of `CategoryObject` the attributes and methods relative to \"base\" and \"generators\".\n+\n+Attributes:\n - `_base`\n - `_names`\n-  And 21 methods\n-- `_populate_generators_`: unused, removed in #21385\n-- `_ngens_`: unused, removed in #21381\n+\n+Methods:\n - `gens_dict`\n - `gens_dict_recursive`\n - `objgens`\n@@ -24,25 +24,20 @@\n - `_defining_names`\n - `_assign_names`\n - `__temporarily_change_names`\n-- `_temporarily_change_names`: unused, removed in #21395\n - `variable_names`\n - `variable_name`\n - `latex_variable_names`\n - `latex_name`\n - `inject_variables`\n-- `injvar`: unused, removed in #21395\n-- `has_base`: unused, deprecated in #21395\n - `base_ring`\n - `base`\n-  And 2 functions\n+Functions:\n - `normalize_names`\n - `certify_names`\n-  And 1 class\n-- `localvars`: unused, removed in #21395\n \n It is not clear where all this should be moved... Moreover \"generators\" is ambiguous since \"monoid generators\", \"group generators\", \"algebra generators\", ... are different things.\n \n-Some Related tickets are\n+Some related tickets are\n  \n - gradual transition for to remove inheritance from `ParentWithGens` to `Ring` (#13683? still useful?)\n \n``````\n",
    "created_at": "2017-11-29T16:01:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315539",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,13 +9,13 @@
 
 ### Base and generators
 
-We should move out of `CategoryObject` the attributes and methods relative to "base" and "generators". There are 3 such attributes
-- `_generators`: unused, removed in #21382
+We should move out of `CategoryObject` the attributes and methods relative to "base" and "generators".
+
+Attributes:
 - `_base`
 - `_names`
-  And 21 methods
-- `_populate_generators_`: unused, removed in #21385
-- `_ngens_`: unused, removed in #21381
+
+Methods:
 - `gens_dict`
 - `gens_dict_recursive`
 - `objgens`
@@ -24,25 +24,20 @@
 - `_defining_names`
 - `_assign_names`
 - `__temporarily_change_names`
-- `_temporarily_change_names`: unused, removed in #21395
 - `variable_names`
 - `variable_name`
 - `latex_variable_names`
 - `latex_name`
 - `inject_variables`
-- `injvar`: unused, removed in #21395
-- `has_base`: unused, deprecated in #21395
 - `base_ring`
 - `base`
-  And 2 functions
+Functions:
 - `normalize_names`
 - `certify_names`
-  And 1 class
-- `localvars`: unused, removed in #21395
 
 It is not clear where all this should be moved... Moreover "generators" is ambiguous since "monoid generators", "group generators", "algebra generators", ... are different things.
 
-Some Related tickets are
+Some related tickets are
  
 - gradual transition for to remove inheritance from `ParentWithGens` to `Ring` (#13683? still useful?)
 
``````




---

archive/issue_comments_315540.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -59,13 +59,15 @@\n \n - move `Set_generic` and `Set_Python_type_class` out of `sage.structure.parent`. Moreover we should use `UniqueRepresentation` instead of the custom class factory `Set_PythonType`.\n \n-- refactor `getattr_from_other_class` (#20686)\n-\n-- get rid of `guess_category` (#21353)\n+- Various fixes in category initialization (#21353)\n \n - cleanup variable factories  (#18390)\n \n - cleanup cartesian products (task ticket #15425)\n+\n+### Closed tickets\n+\n+- refactor `getattr_from_other_class` (#20686)\n \n - Simplify `_populate_generators_` (#21381)\n \n@@ -74,3 +76,6 @@\n - Remove `ParentWith*AbelianGens` (#21383)\n \n - Remove `_populate_generators_` (#21385)\n+\n+- Always enable `debug.bad_parent_warnings` (#24109)\n+\n``````\n",
    "created_at": "2017-11-29T16:03:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315540",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -59,13 +59,15 @@
 
 - move `Set_generic` and `Set_Python_type_class` out of `sage.structure.parent`. Moreover we should use `UniqueRepresentation` instead of the custom class factory `Set_PythonType`.
 
-- refactor `getattr_from_other_class` (#20686)
-
-- get rid of `guess_category` (#21353)
+- Various fixes in category initialization (#21353)
 
 - cleanup variable factories  (#18390)
 
 - cleanup cartesian products (task ticket #15425)
+
+### Closed tickets
+
+- refactor `getattr_from_other_class` (#20686)
 
 - Simplify `_populate_generators_` (#21381)
 
@@ -74,3 +76,6 @@
 - Remove `ParentWith*AbelianGens` (#21383)
 
 - Remove `_populate_generators_` (#21385)
+
+- Always enable `debug.bad_parent_warnings` (#24109)
+
``````




---

archive/issue_comments_315541.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nWhat is wrong with the functions `normalize_names()` and `certify_names`? They have to be put somewhere, why not in `structure/category_object.pyx`?",
    "created_at": "2017-11-29T16:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315541",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:21" align="right">Comment 21</div>

What is wrong with the functions `normalize_names()` and `certify_names`? They have to be put somewhere, why not in `structure/category_object.pyx`?



---

archive/issue_comments_315542.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -9,10 +9,9 @@\n \n ### Base and generators\n \n-We should move out of `CategoryObject` the attributes and methods relative to \"base\" and \"generators\".\n+We should move out of `CategoryObject` the attributes and methods related to generators and variable names.\n \n Attributes:\n-- `_base`\n - `_names`\n \n Methods:\n@@ -30,12 +29,22 @@\n - `latex_name`\n - `inject_variables`\n - `base_ring`\n+\n+It is not clear where all this should be moved... Moreover \"generators\" is ambiguous since \"monoid generators\", \"group generators\", \"algebra generators\", ... are different things.\n+\n+### Keep\n+\n+These were originally proposed to be removed too, but are sufficiently useful:\n+\n+Attributes:\n+- `_base`\n+Methods:\n - `base`\n Functions:\n - `normalize_names`\n - `certify_names`\n \n-It is not clear where all this should be moved... Moreover \"generators\" is ambiguous since \"monoid generators\", \"group generators\", \"algebra generators\", ... are different things.\n+### Tickets\n \n Some related tickets are\n  \n``````\n",
    "created_at": "2017-11-29T16:07:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315542",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -9,10 +9,9 @@
 
 ### Base and generators
 
-We should move out of `CategoryObject` the attributes and methods relative to "base" and "generators".
+We should move out of `CategoryObject` the attributes and methods related to generators and variable names.
 
 Attributes:
-- `_base`
 - `_names`
 
 Methods:
@@ -30,12 +29,22 @@
 - `latex_name`
 - `inject_variables`
 - `base_ring`
+
+It is not clear where all this should be moved... Moreover "generators" is ambiguous since "monoid generators", "group generators", "algebra generators", ... are different things.
+
+### Keep
+
+These were originally proposed to be removed too, but are sufficiently useful:
+
+Attributes:
+- `_base`
+Methods:
 - `base`
 Functions:
 - `normalize_names`
 - `certify_names`
 
-It is not clear where all this should be moved... Moreover "generators" is ambiguous since "monoid generators", "group generators", "algebra generators", ... are different things.
+### Tickets
 
 Some related tickets are
  
``````




---

archive/issue_comments_315543.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@jdemeyer](#comment%3A18):\n> Replying to [ticket:21380 vdelecroix]:\n> > We should move out of `CategoryObject` the attributes and methods relative to \"base\"\n\n> \n> After thinking about this now and then, I think that it does make sense to keep `_base` inside `CategoryObject`. There are a lot of objects which naturally have a base object. For efficiency and simplicity, I suggest to keep `CategoryObject._base`.\n\nSome does, some does not and there is no specification of what a base is. I would be happy to hear a definition.",
    "created_at": "2017-11-29T16:07:26Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315543",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@jdemeyer](#comment%3A18):
> Replying to [ticket:21380 vdelecroix]:
> > We should move out of `CategoryObject` the attributes and methods relative to "base"

> 
> After thinking about this now and then, I think that it does make sense to keep `_base` inside `CategoryObject`. There are a lot of objects which naturally have a base object. For efficiency and simplicity, I suggest to keep `CategoryObject._base`.

Some does, some does not and there is no specification of what a base is. I would be happy to hear a definition.



---

archive/issue_comments_315544.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@jdemeyer](#comment%3A21):\n> What is wrong with the functions `normalize_names()` and `certify_names`? They have to be put somewhere, why not in `structure/category_object.pyx`?\n\nRight (I made the listing rather quickly)",
    "created_at": "2017-11-29T16:09:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315544",
    "user": "https://github.com/videlec"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@jdemeyer](#comment%3A21):
> What is wrong with the functions `normalize_names()` and `certify_names`? They have to be put somewhere, why not in `structure/category_object.pyx`?

Right (I made the listing rather quickly)



---

archive/issue_comments_315545.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">Comment 24</div>\n\nReplying to [@videlec](#comment%3A22):\n> Some does, some does not and there is no specification of what a base is. I would be happy to hear a definition.\n\nWell, we cannot define \"base\" in full generality. Some objects do not have a natural base and then this attribute should simply be `None`.\n\nBut in certain important categories, we can define \"base\". For example, for modules, we define \"base\" to mean the parent of the scalars used for scalar multiplication.",
    "created_at": "2017-11-29T16:22:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315545",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:24" align="right">Comment 24</div>

Replying to [@videlec](#comment%3A22):
> Some does, some does not and there is no specification of what a base is. I would be happy to hear a definition.

Well, we cannot define "base" in full generality. Some objects do not have a natural base and then this attribute should simply be `None`.

But in certain important categories, we can define "base". For example, for modules, we define "base" to mean the parent of the scalars used for scalar multiplication.



---

archive/issue_comments_315546.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nReplying to [@jdemeyer](#comment%3A24):\n> Replying to [@videlec](#comment%3A22):\n> > Some does, some does not and there is no specification of what a base is. I would be happy to hear a definition.\n\n> \n> Well, we cannot define \"base\" in full generality. Some objects do not have a natural base and then this attribute should simply be `None`.\n\n>\n> But in certain important categories, we can define \"base\". For example, for modules, we define \"base\" to mean the parent of the scalars used for scalar multiplication.\n\nThis is precisely the reason why I dislike it. It is a fake global concept that is mostly meant for \"the underlying ring of a module\". And because  modules are important all parents have an attribute `_base` as well as methods `base` and `base_ring`. Think for a minute about the list of parents without base: permutations, graphs, groups, rings, schemes, simplicial complexes, ...\n\nMoreover, I (maybe wrongly) thought that this \"base ring of a module\" is the kind of information that belongs to the category\n\n```\nsage: Modules(ZZ)\nCategory of modules over Integer Ring\nsage: Modules(ZZ).base()\nInteger Ring\n```",
    "created_at": "2017-11-29T16:32:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315546",
    "user": "https://github.com/videlec"
}
```

<div id="comment:25" align="right">Comment 25</div>

Replying to [@jdemeyer](#comment%3A24):
> Replying to [@videlec](#comment%3A22):
> > Some does, some does not and there is no specification of what a base is. I would be happy to hear a definition.

> 
> Well, we cannot define "base" in full generality. Some objects do not have a natural base and then this attribute should simply be `None`.

>
> But in certain important categories, we can define "base". For example, for modules, we define "base" to mean the parent of the scalars used for scalar multiplication.

This is precisely the reason why I dislike it. It is a fake global concept that is mostly meant for "the underlying ring of a module". And because  modules are important all parents have an attribute `_base` as well as methods `base` and `base_ring`. Think for a minute about the list of parents without base: permutations, graphs, groups, rings, schemes, simplicial complexes, ...

Moreover, I (maybe wrongly) thought that this "base ring of a module" is the kind of information that belongs to the category

```
sage: Modules(ZZ)
Category of modules over Integer Ring
sage: Modules(ZZ).base()
Integer Ring
```



---

archive/issue_comments_315547.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nReplying to [@videlec](#comment%3A25):\n> Think for a minute about the list of parents without base: permutations, graphs, groups, rings, schemes, simplicial complexes, ...\n\nSome rings and schemes do have a concept of \"base\"...",
    "created_at": "2017-11-29T16:40:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315547",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:26" align="right">Comment 26</div>

Replying to [@videlec](#comment%3A25):
> Think for a minute about the list of parents without base: permutations, graphs, groups, rings, schemes, simplicial complexes, ...

Some rings and schemes do have a concept of "base"...



---

archive/issue_comments_315548.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">Comment 27</div>\n\nReplying to [@jdemeyer](#comment%3A26):\n> Replying to [@videlec](#comment%3A25):\n> > Think for a minute about the list of parents without base: permutations, graphs, groups, rings, schemes, simplicial complexes, ...\n\n> \n> Some rings and schemes do have a concept of \"base\"...\n\nSome graphs also (Cayley graphs) as well as groups (GL(2,Z)) etc",
    "created_at": "2017-11-29T16:43:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315548",
    "user": "https://github.com/videlec"
}
```

<div id="comment:27" align="right">Comment 27</div>

Replying to [@jdemeyer](#comment%3A26):
> Replying to [@videlec](#comment%3A25):
> > Think for a minute about the list of parents without base: permutations, graphs, groups, rings, schemes, simplicial complexes, ...

> 
> Some rings and schemes do have a concept of "base"...

Some graphs also (Cayley graphs) as well as groups (GL(2,Z)) etc



---

archive/issue_comments_315549.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\nReplying to [@videlec](#comment%3A25):\n> It is a fake global concept that is mostly meant for \"the underlying ring of a module\".\n\nNote that there are a *lot* of parents in Sage which represent a module of some sort. Most of them do not inherit from `Module`. So even if we implement `_base` in the `Module` class, that won't help unless we change a large number of parents to inherit from that.",
    "created_at": "2017-11-29T19:54:21Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315549",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">Comment 28</div>

Replying to [@videlec](#comment%3A25):
> It is a fake global concept that is mostly meant for "the underlying ring of a module".

Note that there are a *lot* of parents in Sage which represent a module of some sort. Most of them do not inherit from `Module`. So even if we implement `_base` in the `Module` class, that won't help unless we change a large number of parents to inherit from that.



---

archive/issue_comments_315550.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">Comment 29</div>\n\nIdeally `base` would be something that belongs to the appropriate categories. The reason I am not currently proposing this is that I'm very worried about the speed regression of making this a pure Python function call.\n\nI am starting to wonder if we do want to actually have (new-style) `Parent`, `ParentWithBase`, `ParentWithGens`, and possibly `ParentWithBaseGens` classes that give these various features as common ABCs. While this would probably be an invasive change, it should not be too painful (and should be easy enough to deprecate). For those very few (if any?) non-`Parent`-but-`CategoryObject`-that-needs-`base` (or `gens`) classes, we can see how many there are and if we just want them to have a common API or a common ABC of `CategoryObjectWithGens`.",
    "created_at": "2017-11-29T22:01:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315550",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:29" align="right">Comment 29</div>

Ideally `base` would be something that belongs to the appropriate categories. The reason I am not currently proposing this is that I'm very worried about the speed regression of making this a pure Python function call.

I am starting to wonder if we do want to actually have (new-style) `Parent`, `ParentWithBase`, `ParentWithGens`, and possibly `ParentWithBaseGens` classes that give these various features as common ABCs. While this would probably be an invasive change, it should not be too painful (and should be easy enough to deprecate). For those very few (if any?) non-`Parent`-but-`CategoryObject`-that-needs-`base` (or `gens`) classes, we can see how many there are and if we just want them to have a common API or a common ABC of `CategoryObjectWithGens`.



---

archive/issue_comments_315551.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nI don't really care if we have to do a big change if it makes things better. Though we have to be sure that it will end with something better!\n\nIs speed really a serious issue for accessing base or gens? This is indeed the whole problem of categories:\n- the category mantra says that a parent should just inherit from `Parent` (or possibly `CategoryObject`)\n- if we do that, the methods inherited from `ParentMethods` of the category are slow so we want custom base classes",
    "created_at": "2017-11-30T09:42:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315551",
    "user": "https://github.com/videlec"
}
```

<div id="comment:30" align="right">Comment 30</div>

I don't really care if we have to do a big change if it makes things better. Though we have to be sure that it will end with something better!

Is speed really a serious issue for accessing base or gens? This is indeed the whole problem of categories:
- the category mantra says that a parent should just inherit from `Parent` (or possibly `CategoryObject`)
- if we do that, the methods inherited from `ParentMethods` of the category are slow so we want custom base classes



---

archive/issue_comments_315552.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nReplying to [@tscrim](#comment%3A29):\n> I am starting to wonder if we do want to actually have (new-style) `Parent`, `ParentWithBase`, `ParentWithGens`, and possibly `ParentWithBaseGens` classes that give these various features as common ABCs.\n\nWhat do you mean exactly? Do you want to remove `Parent`? Do you want to remove `Module`? I am not following...",
    "created_at": "2017-11-30T10:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315552",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:31" align="right">Comment 31</div>

Replying to [@tscrim](#comment%3A29):
> I am starting to wonder if we do want to actually have (new-style) `Parent`, `ParentWithBase`, `ParentWithGens`, and possibly `ParentWithBaseGens` classes that give these various features as common ABCs.

What do you mean exactly? Do you want to remove `Parent`? Do you want to remove `Module`? I am not following...



---

archive/issue_comments_315553.json:
```json
{
    "body": "<div id=\"comment:32\" align=\"right\">Comment 32</div>\n\nReplying to [@videlec](#comment%3A30):\n> Is speed really a serious issue for accessing base?\n\nOne thing that I have been wanting to do since a long time is improving the semantics of `_lmul_` and `_rmul_` (which are meant for scalar multiplication). Most of the arithmetic/coercion model has been cleaned up by now, but those two methods are an ugly remaining corner. I would like to define `_lmul_` and `_rmul_` as multiplication by an element of `parent._base`. Ideally, that would have fast access to the `_base` attribute.",
    "created_at": "2017-11-30T10:15:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315553",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:32" align="right">Comment 32</div>

Replying to [@videlec](#comment%3A30):
> Is speed really a serious issue for accessing base?

One thing that I have been wanting to do since a long time is improving the semantics of `_lmul_` and `_rmul_` (which are meant for scalar multiplication). Most of the arithmetic/coercion model has been cleaned up by now, but those two methods are an ugly remaining corner. I would like to define `_lmul_` and `_rmul_` as multiplication by an element of `parent._base`. Ideally, that would have fast access to the `_base` attribute.



---

archive/issue_comments_315554.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nReplying to [@jdemeyer](#comment%3A32):\n> Replying to [@videlec](#comment%3A30):\n> > Is speed really a serious issue for accessing base?\n\n> \n> One thing that I have been wanting to do since a long time is improving the semantics of `_lmul_` and `_rmul_` (which are meant for scalar multiplication). Most of the arithmetic/coercion model has been cleaned up by now, but those two methods are an ugly remaining corner. I would like to define `_lmul_` and `_rmul_` as multiplication by an element of `parent._base`. Ideally, that would have fast access to the `_base` attribute.\n\nOnce more, `_base` means \"base ring on a module\"! Would be better to use the name `_base_ring` and mention that it will be used for scalar multiplication. That would be a clear semantic.",
    "created_at": "2017-11-30T10:22:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315554",
    "user": "https://github.com/videlec"
}
```

<div id="comment:33" align="right">Comment 33</div>

Replying to [@jdemeyer](#comment%3A32):
> Replying to [@videlec](#comment%3A30):
> > Is speed really a serious issue for accessing base?

> 
> One thing that I have been wanting to do since a long time is improving the semantics of `_lmul_` and `_rmul_` (which are meant for scalar multiplication). Most of the arithmetic/coercion model has been cleaned up by now, but those two methods are an ugly remaining corner. I would like to define `_lmul_` and `_rmul_` as multiplication by an element of `parent._base`. Ideally, that would have fast access to the `_base` attribute.

Once more, `_base` means "base ring on a module"! Would be better to use the name `_base_ring` and mention that it will be used for scalar multiplication. That would be a clear semantic.



---

archive/issue_comments_315555.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nReplying to [@videlec](#comment%3A33):\n> Once more, `_base` means \"base ring on a module\"!\n\nFor this purpose, it certainly does.\n\n> Would be better to use the name `_base_ring`\n\nNot sure because I wouldn't to require that it's a ring. I am sure that there are structures which admit some kind of scalar multiplication by a non-ring.\n\n> and mention that it will be used for scalar multiplication. That would be a clear semantic.\n\nSure! But then I would still like to keep `_base` on `CategoryObject`. The *methods* `base()` and `base_ring()` are a different story. Those might be implemented in the category.",
    "created_at": "2017-11-30T10:26:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315555",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:34" align="right">Comment 34</div>

Replying to [@videlec](#comment%3A33):
> Once more, `_base` means "base ring on a module"!

For this purpose, it certainly does.

> Would be better to use the name `_base_ring`

Not sure because I wouldn't to require that it's a ring. I am sure that there are structures which admit some kind of scalar multiplication by a non-ring.

> and mention that it will be used for scalar multiplication. That would be a clear semantic.

Sure! But then I would still like to keep `_base` on `CategoryObject`. The *methods* `base()` and `base_ring()` are a different story. Those might be implemented in the category.



---

archive/issue_comments_315556.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nReplying to [@jdemeyer](#comment%3A34):\n> Replying to [@videlec](#comment%3A33):\n> > Once more, `_base` means \"base ring on a module\"!\n\n> \n> For this purpose, it certainly does.\n> \n> > Would be better to use the name `_base_ring`\n\n> \n> Not sure because I wouldn't to require that it's a ring. I am sure that there are structures which admit some kind of scalar multiplication by a non-ring.\n\nFair enough. Examples? Let us keep `_base` as it used to be. But then specify that it is used precisely for `_lmul_` and `_rmul_` where the attribute declaration is.\n\n> > and mention that it will be used for scalar multiplication. That would be a clear semantic.\n\n> \n> Sure! But then I would still like to keep `_base` on `CategoryObject`. The *methods* `base()` and `base_ring()` are a different story. Those might be implemented in the category.\n\nWhy `CategoryObject` and not `Parent`?\n\nMoving `base()` and `base_ring()` to the category would not be possible if the attribute `_base` is private. How do you plan to declare it?",
    "created_at": "2017-11-30T10:46:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315556",
    "user": "https://github.com/videlec"
}
```

<div id="comment:35" align="right">Comment 35</div>

Replying to [@jdemeyer](#comment%3A34):
> Replying to [@videlec](#comment%3A33):
> > Once more, `_base` means "base ring on a module"!

> 
> For this purpose, it certainly does.
> 
> > Would be better to use the name `_base_ring`

> 
> Not sure because I wouldn't to require that it's a ring. I am sure that there are structures which admit some kind of scalar multiplication by a non-ring.

Fair enough. Examples? Let us keep `_base` as it used to be. But then specify that it is used precisely for `_lmul_` and `_rmul_` where the attribute declaration is.

> > and mention that it will be used for scalar multiplication. That would be a clear semantic.

> 
> Sure! But then I would still like to keep `_base` on `CategoryObject`. The *methods* `base()` and `base_ring()` are a different story. Those might be implemented in the category.

Why `CategoryObject` and not `Parent`?

Moving `base()` and `base_ring()` to the category would not be possible if the attribute `_base` is private. How do you plan to declare it?



---

archive/issue_comments_315557.json:
```json
{
    "body": "<div id=\"comment:36\" align=\"right\">Comment 36</div>\n\nReplying to [@jdemeyer](#comment%3A31):\n> Replying to [@tscrim](#comment%3A29):\n> > I am starting to wonder if we do want to actually have (new-style) `Parent`, `ParentWithBase`, `ParentWithGens`, and possibly `ParentWithBaseGens` classes that give these various features as common ABCs.\n\n> \n> What do you mean exactly? Do you want to remove `Parent`? Do you want to remove `Module`? I am not following...\n\nI was thinking of a hierarchy like this:\n\n```\n+-Parent\n|\n+---ParentWithBase  (maybe useless right now)\n|\n+-+-ParentWithGens\n  |\n  +-+-ParentWithBaseAndGens\n    |\n    +-Module (etc).\n```\nwith `Parent` being a subclass of `CategoryObject`, and we implement `base`(`ring`) and `gens` in the appropriate subclass. (I said new-style because there still is the old-style `ParentWithGens` floating around.) It is a bit more of a maintenance burden in terms of the class hierarchy, but it makes the code have better associations (as well as cleaning our user visible attributes).",
    "created_at": "2017-11-30T11:14:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315557",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:36" align="right">Comment 36</div>

Replying to [@jdemeyer](#comment%3A31):
> Replying to [@tscrim](#comment%3A29):
> > I am starting to wonder if we do want to actually have (new-style) `Parent`, `ParentWithBase`, `ParentWithGens`, and possibly `ParentWithBaseGens` classes that give these various features as common ABCs.

> 
> What do you mean exactly? Do you want to remove `Parent`? Do you want to remove `Module`? I am not following...

I was thinking of a hierarchy like this:

```
+-Parent
|
+---ParentWithBase  (maybe useless right now)
|
+-+-ParentWithGens
  |
  +-+-ParentWithBaseAndGens
    |
    +-Module (etc).
```
with `Parent` being a subclass of `CategoryObject`, and we implement `base`(`ring`) and `gens` in the appropriate subclass. (I said new-style because there still is the old-style `ParentWithGens` floating around.) It is a bit more of a maintenance burden in terms of the class hierarchy, but it makes the code have better associations (as well as cleaning our user visible attributes).



---

archive/issue_comments_315558.json:
```json
{
    "body": "<div id=\"comment:37\" align=\"right\">Comment 37</div>\n\nReplying to [@videlec](#comment%3A35):\n> Replying to [@jdemeyer](#comment%3A34):\n> > Replying to [@videlec](#comment%3A33):\n> > > Once more, `_base` means \"base ring on a module\"!\n\n> > \n> > For this purpose, it certainly does.\n> > \n> > > Would be better to use the name `_base_ring`\n\n> > \n> > Not sure because I wouldn't to require that it's a ring. I am sure that there are structures which admit some kind of scalar multiplication by a non-ring.\n\n> \n> Fair enough. Examples?\n\nI don't know any example. It's just that there is no reason to force this to be a ring. Because then we have to worry about checking that `_base_ring` really is a ring. And if you don't check, then why call it `_base_ring` and not `_base`?",
    "created_at": "2017-11-30T11:15:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315558",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:37" align="right">Comment 37</div>

Replying to [@videlec](#comment%3A35):
> Replying to [@jdemeyer](#comment%3A34):
> > Replying to [@videlec](#comment%3A33):
> > > Once more, `_base` means "base ring on a module"!

> > 
> > For this purpose, it certainly does.
> > 
> > > Would be better to use the name `_base_ring`

> > 
> > Not sure because I wouldn't to require that it's a ring. I am sure that there are structures which admit some kind of scalar multiplication by a non-ring.

> 
> Fair enough. Examples?

I don't know any example. It's just that there is no reason to force this to be a ring. Because then we have to worry about checking that `_base_ring` really is a ring. And if you don't check, then why call it `_base_ring` and not `_base`?



---

archive/issue_comments_315559.json:
```json
{
    "body": "<div id=\"comment:38\" align=\"right\">Comment 38</div>\n\nReplying to [@videlec](#comment%3A30):\n> Is speed really a serious issue for accessing base or gens?\n\nGetting the base ring and the generators are very common operations, so a slowdown in that access could potentially have much larger speed implications.\n\n> This is indeed the whole problem of categories:\n> - the category mantra says that a parent should just inherit from `Parent` (or possibly `CategoryObject`)\n> - if we do that, the methods inherited from `ParentMethods` of the category are slow so we want custom base classes\n\nThere usually should not be too many simple getter methods in a category that are used in tight loops that this is a problem, but there are a few that do warrant the special attention.",
    "created_at": "2017-11-30T11:16:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315559",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:38" align="right">Comment 38</div>

Replying to [@videlec](#comment%3A30):
> Is speed really a serious issue for accessing base or gens?

Getting the base ring and the generators are very common operations, so a slowdown in that access could potentially have much larger speed implications.

> This is indeed the whole problem of categories:
> - the category mantra says that a parent should just inherit from `Parent` (or possibly `CategoryObject`)
> - if we do that, the methods inherited from `ParentMethods` of the category are slow so we want custom base classes

There usually should not be too many simple getter methods in a category that are used in tight loops that this is a problem, but there are a few that do warrant the special attention.



---

archive/issue_comments_315560.json:
```json
{
    "body": "<div id=\"comment:39\" align=\"right\">Comment 39</div>\n\nReplying to [@videlec](#comment%3A35):\n> Moving `base()` and `base_ring()` to the category would not be possible if the attribute `_base` is private. How do you plan to declare it?\n\nYou could make `_base` accessible to Python code (`cdef public _base` instead of `cdef _base`).",
    "created_at": "2017-11-30T11:17:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315560",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:39" align="right">Comment 39</div>

Replying to [@videlec](#comment%3A35):
> Moving `base()` and `base_ring()` to the category would not be possible if the attribute `_base` is private. How do you plan to declare it?

You could make `_base` accessible to Python code (`cdef public _base` instead of `cdef _base`).



---

archive/issue_comments_315561.json:
```json
{
    "body": "<div id=\"comment:40\" align=\"right\">Comment 40</div>\n\nReplying to [@tscrim](#comment%3A36):\n> I was thinking of a hierarchy like this:\n> \n> ```\n> +-Parent\n> |\n> +---ParentWithBase  (maybe useless right now)\n> |\n> +-+-ParentWithGens\n>   |\n>   +-+-ParentWithBaseAndGens\n>     |\n>     +-Module (etc).\n> ```\n\nI don't think that it makes much sense to have unrelated classes `ParentWithBase` and `ParentWithBaseAndGens`. Since base seems more important than gens, I would actually suggest\n\n```\nCategoryObject\n|\n+--Parent\n   |\n   +--ParentWithBase\n      |\n      +--Module\n      |\n      +--Ring\n      |\n     ...\n```\n\n> I said new-style because there still is the old-style `ParentWithGens` floating around.\n\nThanks for the reminder. Getting rid of those old-style parents should probably be higher priority than this ticket.",
    "created_at": "2017-12-07T14:48:58Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315561",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:40" align="right">Comment 40</div>

Replying to [@tscrim](#comment%3A36):
> I was thinking of a hierarchy like this:
> 
> ```
> +-Parent
> |
> +---ParentWithBase  (maybe useless right now)
> |
> +-+-ParentWithGens
>   |
>   +-+-ParentWithBaseAndGens
>     |
>     +-Module (etc).
> ```

I don't think that it makes much sense to have unrelated classes `ParentWithBase` and `ParentWithBaseAndGens`. Since base seems more important than gens, I would actually suggest

```
CategoryObject
|
+--Parent
   |
   +--ParentWithBase
      |
      +--Module
      |
      +--Ring
      |
     ...
```

> I said new-style because there still is the old-style `ParentWithGens` floating around.

Thanks for the reminder. Getting rid of those old-style parents should probably be higher priority than this ticket.



---

archive/issue_comments_315562.json:
```json
{
    "body": "<div id=\"comment:41\" align=\"right\">Comment 41</div>\n\nReplying to [@jdemeyer](#comment%3A40):\n> Replying to [@tscrim](#comment%3A36):\n> > I was thinking of a hierarchy like this:\n> > \n> > ```\n> > +-Parent\n> > |\n> > +---ParentWithBase  (maybe useless right now)\n> > |\n> > +-+-ParentWithGens\n> >   |\n> >   +-+-ParentWithBaseAndGens\n> >     |\n> >     +-Module (etc).\n> > ```\n\n> \n> I don't think that it makes much sense to have unrelated classes `ParentWithBase` and `ParentWithBaseAndGens`.\n\nIdeally it should be a diamond IMO, but Cython does not (yet?) support multiple inheritance (or something like interfaces in Java-speak).\n\n> Since base seems more important than gens, I would actually suggest\n> \n> ```\n> CategoryObject\n> |\n> +--Parent\n>    |\n>    +--ParentWithBase\n>       |\n>       +--Module\n>       |\n>       +--Ring\n>       |\n>      ...\n> ```\n\nWe have objects with base but without gens (e.g., polytopes), objects without base but with gens (e.g., permutation groups), as well as with(out) both. So I was trying to address that with my proposed hierarchy. At least I would like `ParentWithGens` in between `Parent` and `ParentWithBase` as there are very few things in Sage that have gens but no concept of base. (Which, as it turns out, is not quite the old parent hierarchy `ParentWithGens -> ParentWithBase -> Parent_old`.)\n\nAlthough I'm a little worried with the group class hierarchy becoming a bit more of a mess because of the Cython parents and not having the multiple inheritance. Might be a necessary complication in order to improve the interface (which IMO is net benefit). Spreading out to a more refined parent hierarchy is going to be a fairly invasive change, so I guess it will just have to be done.\n\n> > I said new-style because there still is the old-style `ParentWithGens` floating around.\n\n> \n> Thanks for the reminder. Getting rid of those old-style parents should probably be higher priority than this ticket.\n\nYes, definitely. Although most of them are really fundamental parents such as `Ring`, number fields, etc. I guess we can take care of the leaf classes a little more easily, such as `ComplexIntervalField`. Although it is somewhat counter to the objective of having a more refined parent hierarchy as it usually means making the class inherit from `Parent`...",
    "created_at": "2017-12-08T01:00:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315562",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:41" align="right">Comment 41</div>

Replying to [@jdemeyer](#comment%3A40):
> Replying to [@tscrim](#comment%3A36):
> > I was thinking of a hierarchy like this:
> > 
> > ```
> > +-Parent
> > |
> > +---ParentWithBase  (maybe useless right now)
> > |
> > +-+-ParentWithGens
> >   |
> >   +-+-ParentWithBaseAndGens
> >     |
> >     +-Module (etc).
> > ```

> 
> I don't think that it makes much sense to have unrelated classes `ParentWithBase` and `ParentWithBaseAndGens`.

Ideally it should be a diamond IMO, but Cython does not (yet?) support multiple inheritance (or something like interfaces in Java-speak).

> Since base seems more important than gens, I would actually suggest
> 
> ```
> CategoryObject
> |
> +--Parent
>    |
>    +--ParentWithBase
>       |
>       +--Module
>       |
>       +--Ring
>       |
>      ...
> ```

We have objects with base but without gens (e.g., polytopes), objects without base but with gens (e.g., permutation groups), as well as with(out) both. So I was trying to address that with my proposed hierarchy. At least I would like `ParentWithGens` in between `Parent` and `ParentWithBase` as there are very few things in Sage that have gens but no concept of base. (Which, as it turns out, is not quite the old parent hierarchy `ParentWithGens -> ParentWithBase -> Parent_old`.)

Although I'm a little worried with the group class hierarchy becoming a bit more of a mess because of the Cython parents and not having the multiple inheritance. Might be a necessary complication in order to improve the interface (which IMO is net benefit). Spreading out to a more refined parent hierarchy is going to be a fairly invasive change, so I guess it will just have to be done.

> > I said new-style because there still is the old-style `ParentWithGens` floating around.

> 
> Thanks for the reminder. Getting rid of those old-style parents should probably be higher priority than this ticket.

Yes, definitely. Although most of them are really fundamental parents such as `Ring`, number fields, etc. I guess we can take care of the leaf classes a little more easily, such as `ComplexIntervalField`. Although it is somewhat counter to the objective of having a more refined parent hierarchy as it usually means making the class inherit from `Parent`...



---

archive/issue_comments_315563.json:
```json
{
    "body": "<div id=\"comment:42\" align=\"right\">Comment 42</div>\n\nReplying to [@tscrim](#comment%3A41):\n> Cython does not (yet?) support multiple inheritance\n\nFirst of all, the next release of Cython is going to support multiple inheritance in a limited way. The list of bases can be `CyClass, PyClass1, ..., PyClassN`, which is the most general thing which is allowed by Python and which doesn't hurt Cython's performance (because all Python classes come after all Cython classes in the MRO).\n\nSecond, the fact that diamonds are not allowed is because of Python's design. In plain Python, you cannot do `class X(list, str)` either. So don't blame Cython for something that they cannot fix.\n\nAnyway, the conclusion is that `ParentWithGens` could be a *Python class* and then the diamond would work in Cython 0.28.",
    "created_at": "2017-12-08T06:03:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315563",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:42" align="right">Comment 42</div>

Replying to [@tscrim](#comment%3A41):
> Cython does not (yet?) support multiple inheritance

First of all, the next release of Cython is going to support multiple inheritance in a limited way. The list of bases can be `CyClass, PyClass1, ..., PyClassN`, which is the most general thing which is allowed by Python and which doesn't hurt Cython's performance (because all Python classes come after all Cython classes in the MRO).

Second, the fact that diamonds are not allowed is because of Python's design. In plain Python, you cannot do `class X(list, str)` either. So don't blame Cython for something that they cannot fix.

Anyway, the conclusion is that `ParentWithGens` could be a *Python class* and then the diamond would work in Cython 0.28.



---

archive/issue_comments_315564.json:
```json
{
    "body": "<div id=\"comment:43\" align=\"right\">Comment 43</div>\n\nReplying to [@tscrim](#comment%3A41):\n> Yes, definitely. Although most of them are really fundamental parents such as `Ring`\n\nThe large majority of rings use the new coercion model, so it's not as bad as you think.",
    "created_at": "2017-12-08T06:08:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315564",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:43" align="right">Comment 43</div>

Replying to [@tscrim](#comment%3A41):
> Yes, definitely. Although most of them are really fundamental parents such as `Ring`

The large majority of rings use the new coercion model, so it's not as bad as you think.



---

archive/issue_comments_315565.json:
```json
{
    "body": "<div id=\"comment:44\" align=\"right\">Comment 44</div>\n\nReplying to [@jdemeyer](#comment%3A42):\n> Replying to [@tscrim](#comment%3A41):\n> > Cython does not (yet?) support multiple inheritance\n\n> \n> First of all, the next release of Cython is going to support multiple inheritance in a limited way. The list of bases can be `CyClass, PyClass1, ..., PyClassN`, which is the most general thing which is allowed by Python and which doesn't hurt Cython's performance (because all Python classes come after all Cython classes in the MRO).\n\nThat's good to hear and should be useful here.\n\n> Second, the fact that diamonds are not allowed is because of Python's design. In plain Python, you cannot do `class X(list, str)` either. So don't blame Cython for something that they cannot fix.\n\nSorry, I guess I was thinking a little too loosely with not distinguishing between classes and (builtin) types.\n\n> Anyway, the conclusion is that `ParentWithGens` could be a *Python class* and then the diamond would work in Cython 0.28.\n\nI think this would be the most sensible solution since most of our Cython parent classes would inherit from the `ParentWithGensAndBase` (e.g., `Ring`, where we really treat everything as some `R`-algebra), but would keep the flexibility for other parents in a reasonable way.",
    "created_at": "2017-12-11T03:37:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315565",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:44" align="right">Comment 44</div>

Replying to [@jdemeyer](#comment%3A42):
> Replying to [@tscrim](#comment%3A41):
> > Cython does not (yet?) support multiple inheritance

> 
> First of all, the next release of Cython is going to support multiple inheritance in a limited way. The list of bases can be `CyClass, PyClass1, ..., PyClassN`, which is the most general thing which is allowed by Python and which doesn't hurt Cython's performance (because all Python classes come after all Cython classes in the MRO).

That's good to hear and should be useful here.

> Second, the fact that diamonds are not allowed is because of Python's design. In plain Python, you cannot do `class X(list, str)` either. So don't blame Cython for something that they cannot fix.

Sorry, I guess I was thinking a little too loosely with not distinguishing between classes and (builtin) types.

> Anyway, the conclusion is that `ParentWithGens` could be a *Python class* and then the diamond would work in Cython 0.28.

I think this would be the most sensible solution since most of our Cython parent classes would inherit from the `ParentWithGensAndBase` (e.g., `Ring`, where we really treat everything as some `R`-algebra), but would keep the flexibility for other parents in a reasonable way.



---

archive/issue_comments_315566.json:
```json
{
    "body": "<div id=\"comment:45\" align=\"right\">Comment 45</div>\n\nReplying to [@jdemeyer](#comment%3A43):\n> Replying to [@tscrim](#comment%3A41):\n> > Yes, definitely. Although most of them are really fundamental parents such as `Ring`\n\n> \n> The large majority of rings use the new coercion model, so it's not as bad as you think.\n\nThat's good to hear. Now if only I could find some time to work on this directly...",
    "created_at": "2017-12-11T03:38:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315566",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:45" align="right">Comment 45</div>

Replying to [@jdemeyer](#comment%3A43):
> Replying to [@tscrim](#comment%3A41):
> > Yes, definitely. Although most of them are really fundamental parents such as `Ring`

> 
> The large majority of rings use the new coercion model, so it's not as bad as you think.

That's good to hear. Now if only I could find some time to work on this directly...



---

archive/issue_comments_315567.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -50,6 +50,8 @@\n  \n - gradual transition for to remove inheritance from `ParentWithGens` to `Ring` (#13683? still useful?)\n \n+- #24430: normalization for `_names`, `variable_name` and `variable_names` in the context of polynomials and series\n+\n ### Transition to `FiniteEnumeratedSet`\n \n - set the category to `FiniteEnumeratedSets` where appropriate (#12957)\n``````\n",
    "created_at": "2017-12-26T10:51:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315567",
    "user": "https://github.com/videlec"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -50,6 +50,8 @@
  
 - gradual transition for to remove inheritance from `ParentWithGens` to `Ring` (#13683? still useful?)
 
+- #24430: normalization for `_names`, `variable_name` and `variable_names` in the context of polynomials and series
+
 ### Transition to `FiniteEnumeratedSet`
 
 - set the category to `FiniteEnumeratedSets` where appropriate (#12957)
``````




---

archive/issue_events_282449.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-17T03:32:05Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282449"
}
```



---

archive/issue_events_282450.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2020-08-17T03:32:05Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282450"
}
```



---

archive/issue_events_282451.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282451"
}
```



---

archive/issue_events_282452.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-02-13T20:51:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282452"
}
```



---

archive/issue_comments_315568.json:
```json
{
    "body": "<div id=\"comment:48\" align=\"right\">Comment 48</div>\n\nSetting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21380#issuecomment-315568",
    "user": "https://github.com/mkoeppe"
}
```

<div id="comment:48" align="right">Comment 48</div>

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_events_282453.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282453"
}
```



---

archive/issue_events_282454.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-07-19T01:43:17Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282454"
}
```



---

archive/issue_events_282455.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282455"
}
```



---

archive/issue_events_282456.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2021-12-14T02:04:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282456"
}
```



---

archive/issue_events_282457.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282457"
}
```



---

archive/issue_events_282458.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-04-01T21:16:35Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282458"
}
```



---

archive/issue_events_282459.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282459"
}
```



---

archive/issue_events_282460.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-08-31T02:51:13Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21380",
    "milestone_number": null,
    "milestone_title": "sage-9.8",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21380#event-282460"
}
```
