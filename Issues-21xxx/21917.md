# Issue 21917: Binomial Random Uniform Hypergraph

archive/issues_021680.json:
```json
{
    "assignees": [],
    "body": "I have implemented binomial random hypergraph. This is my first time writing code in sage, and I would appreciate any feedback.\n\nAssignee: **@pelegm**\n\nKeywords: **hypergraph, random, days79, days94**\n\nBranch/Commit: **[5a7b76a](https://github.com/sagemath/sagetrac-mirror/commit/5a7b76ad7490524f1ec4c55c4fdd657eb962adcd)**\n\nReviewer: **David Coudert**\n\nAuthor: **Peleg Michaeli**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21917_\n\n",
    "closed_at": "2018-07-03T23:40:23Z",
    "created_at": "2016-11-21T19:22:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.3",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Binomial Random Uniform Hypergraph",
    "type": "issue",
    "updated_at": "2018-07-03T23:40:23Z",
    "url": "https://github.com/sagemath/sage/issues/21917",
    "user": "https://github.com/pelegm"
}
```
I have implemented binomial random hypergraph. This is my first time writing code in sage, and I would appreciate any feedback.

Assignee: **@pelegm**

Keywords: **hypergraph, random, days79, days94**

Branch/Commit: **[5a7b76a](https://github.com/sagemath/sagetrac-mirror/commit/5a7b76ad7490524f1ec4c55c4fdd657eb962adcd)**

Reviewer: **David Coudert**

Author: **Peleg Michaeli**

_Issue created by migration from https://trac.sagemath.org/ticket/21917_





---

archive/issue_events_289304.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2016-11-21T19:22:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289304"
}
```



---

archive/issue_events_289305.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2016-11-21T19:22:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289305"
}
```



---

archive/issue_events_289306.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2016-11-21T19:22:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/p4%20%E2%80%93%20minor",
    "label_color": "ffe799",
    "label_name": "p4 \u2013 minor",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289306"
}
```



---

archive/issue_events_289307.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2016-11-21T19:22:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289307"
}
```



---

archive/issue_comments_325522.json:
```json
{
    "body": "Commit: **[588b888](https://github.com/sagemath/sagetrac-mirror/commit/588b888d03cfd3dbe045f4e5c33812aca744980b)**",
    "created_at": "2016-11-21T19:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325522",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[588b888](https://github.com/sagemath/sagetrac-mirror/commit/588b888d03cfd3dbe045f4e5c33812aca744980b)**



---

archive/issue_comments_325523.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">Comment 1</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/588b888d03cfd3dbe045f4e5c33812aca744980b\">588b888</a></td><td><code>Random binomial uniform hypergraph</code></td></tr></table>\n",
    "created_at": "2016-11-21T19:22:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325523",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:1" align="right">Comment 1</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/588b888d03cfd3dbe045f4e5c33812aca744980b">588b888</a></td><td><code>Random binomial uniform hypergraph</code></td></tr></table>




---

archive/issue_events_289308.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2016-11-21T19:23:44Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "title_is": "Binomial Random Uniform Hypergraph",
    "title_was": "Binomial Random Hypergraph",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289308"
}
```



---

archive/issue_events_289309.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2016-11-21T19:24:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289309"
}
```



---

archive/issue_comments_325524.json:
```json
{
    "body": "Author: **Peleg Michaeli**",
    "created_at": "2016-11-21T19:25:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325524",
    "user": "https://github.com/pelegm"
}
```

Author: **Peleg Michaeli**



---

archive/issue_comments_325525.json:
```json
{
    "body": "Changed keywords from **hypergraph, random** to **hypergraph, random, days79**",
    "created_at": "2016-11-22T09:31:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325525",
    "user": "https://github.com/pelegm"
}
```

Changed keywords from **hypergraph, random** to **hypergraph, random, days79**



---

archive/issue_comments_325526.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">Comment 6</div>\n\nHere are some comments:\n\n1. `INPUT:` is missing\n\n2. No empty line is needed between input items.\n\n3. You should describe the type of the input:\n\n```\n- ``n`` -- integer, number of nodes of the graph\n```\n\n4. There *must* be `EXAMPLES::`. There can be also some `TESTS::`. I suggest to keep the limit cases inside a TEST block:\n\n```\n            sage: hypergraphs.RandomBinomialUniform(50, 3, 1).num_blocks()\n            19600\n            sage: hypergraphs.RandomBinomialUniform(50, 3, 0).num_blocks()\n            0\n```\n\nand the one with `p=0.2` inside the `EXAMPLE` block without the call to that other `numblock` method.\n\n```\nsage: hypergraphs.RandomBinomialUniform(50, 3, 0.2)\nIncidence structure with 50 points and 3915 blocks \n```\n\n5. I think that the line `sage: set_random_seed(0)` is not necessary because the doctest framework already set the random seed so that random doctest always return the same thing...\n\n6. Is the `seed` input only there for doctests reason? Or do you expect a human user to need this? If not, I would suggest to remove this input to the function. Also not that you can add `# random` at the end of a `sage:` line in doctests so that it only tests that no error are produced. See http://doc.sagemath.org/html/en/developer/coding_basics.html#section-further-conventions\n\n7. In fact, I would remove `num_blocks()` everywhere in the examples. When we quickly look, we think that this methods return a integer...\n\n8. I would suggest that you read the section http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings. Normally, everything that I said is explained there.\n\n9. `(default=None)` -> <code>(default: \\`None\\`)</code>, in case you keep the seed input",
    "created_at": "2016-11-23T22:45:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325526",
    "user": "https://github.com/seblabbe"
}
```

<div id="comment:6" align="right">Comment 6</div>

Here are some comments:

1. `INPUT:` is missing

2. No empty line is needed between input items.

3. You should describe the type of the input:

```
- ``n`` -- integer, number of nodes of the graph
```

4. There *must* be `EXAMPLES::`. There can be also some `TESTS::`. I suggest to keep the limit cases inside a TEST block:

```
            sage: hypergraphs.RandomBinomialUniform(50, 3, 1).num_blocks()
            19600
            sage: hypergraphs.RandomBinomialUniform(50, 3, 0).num_blocks()
            0
```

and the one with `p=0.2` inside the `EXAMPLE` block without the call to that other `numblock` method.

```
sage: hypergraphs.RandomBinomialUniform(50, 3, 0.2)
Incidence structure with 50 points and 3915 blocks 
```

5. I think that the line `sage: set_random_seed(0)` is not necessary because the doctest framework already set the random seed so that random doctest always return the same thing...

6. Is the `seed` input only there for doctests reason? Or do you expect a human user to need this? If not, I would suggest to remove this input to the function. Also not that you can add `# random` at the end of a `sage:` line in doctests so that it only tests that no error are produced. See http://doc.sagemath.org/html/en/developer/coding_basics.html#section-further-conventions

7. In fact, I would remove `num_blocks()` everywhere in the examples. When we quickly look, we think that this methods return a integer...

8. I would suggest that you read the section http://doc.sagemath.org/html/en/developer/coding_basics.html#documentation-strings. Normally, everything that I said is explained there.

9. `(default=None)` -> <code>(default: \`None\`)</code>, in case you keep the seed input



---

archive/issue_events_289310.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-11-23T22:45:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289310"
}
```



---

archive/issue_events_289311.json:
```json
{
    "actor": "https://github.com/seblabbe",
    "created_at": "2016-11-23T22:45:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289311"
}
```



---

archive/issue_comments_325527.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">Comment 7</div>\n\nHello,\n\nI do not understand what you are doing with the `seed` variable in your code... it is set but never used! Manipulating the random state should not be part of your function. There are Sage functions for that purpose.\n\nVincent",
    "created_at": "2016-11-24T09:54:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325527",
    "user": "https://github.com/videlec"
}
```

<div id="comment:7" align="right">Comment 7</div>

Hello,

I do not understand what you are doing with the `seed` variable in your code... it is set but never used! Manipulating the random state should not be part of your function. There are Sage functions for that purpose.

Vincent



---

archive/issue_comments_325528.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">Comment 8</div>\n\nThis is very inefficient if p is small\n\n```\nedges = [e for e in combinations(range(n), k) if random() < p]\n```\nYou need to use another approach...\n\nThe cardinality of your \"edge space\" is binomial(n,k). What you want to do is basically pick a binomial random variable B(binomial(n,k), p) and then pick that number of sets. This can be done as follows\n\n```\nsage: S = Subsets(range(50), 5)\nsage: sample(S, 10)\n[{34, 38, 5, 30, 21},\n {16, 1, 35, 5, 45},\n {34, 3, 4, 5, 15},\n {9, 2, 5, 6, 47},\n {35, 20, 37, 22, 15},\n {0, 17, 42, 12, 45},\n {8, 24, 19, 13, 22},\n {36, 42, 28, 5, 29},\n {48, 17, 49, 33, 7},\n {1, 39, 29, 43, 9}]\n```\nHence you just need to generate a random number distributed with binomial distribution.",
    "created_at": "2016-11-24T10:02:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325528",
    "user": "https://github.com/videlec"
}
```

<div id="comment:8" align="right">Comment 8</div>

This is very inefficient if p is small

```
edges = [e for e in combinations(range(n), k) if random() < p]
```
You need to use another approach...

The cardinality of your "edge space" is binomial(n,k). What you want to do is basically pick a binomial random variable B(binomial(n,k), p) and then pick that number of sets. This can be done as follows

```
sage: S = Subsets(range(50), 5)
sage: sample(S, 10)
[{34, 38, 5, 30, 21},
 {16, 1, 35, 5, 45},
 {34, 3, 4, 5, 15},
 {9, 2, 5, 6, 47},
 {35, 20, 37, 22, 15},
 {0, 17, 42, 12, 45},
 {8, 24, 19, 13, 22},
 {36, 42, 28, 5, 29},
 {48, 17, 49, 33, 7},
 {1, 39, 29, 43, 9}]
```
Hence you just need to generate a random number distributed with binomial distribution.



---

archive/issue_comments_325529.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">Comment 9</div>\n\nAnd for generating binomial distribution there is at least\n\n    https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.binomial.html",
    "created_at": "2016-11-24T10:28:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325529",
    "user": "https://github.com/videlec"
}
```

<div id="comment:9" align="right">Comment 9</div>

And for generating binomial distribution there is at least

    https://docs.scipy.org/doc/numpy/reference/generated/numpy.random.binomial.html



---

archive/issue_comments_325530.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">Comment 10</div>\n\nReplying to [@videlec](#comment%3A7):\n\n> I do not understand what you are doing with the `seed` variable in your code... it is set but never used! Manipulating the random state should not be part of your function. There are Sage functions for that purpose.\n\nThis is probably right. I do want to get `seed` as a parameter, though, to be consistent with `graphs/generators/random.py`, though. I'm just not sure what exactly to do with it.",
    "created_at": "2016-11-24T12:51:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325530",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:10" align="right">Comment 10</div>

Replying to [@videlec](#comment%3A7):

> I do not understand what you are doing with the `seed` variable in your code... it is set but never used! Manipulating the random state should not be part of your function. There are Sage functions for that purpose.

This is probably right. I do want to get `seed` as a parameter, though, to be consistent with `graphs/generators/random.py`, though. I'm just not sure what exactly to do with it.



---

archive/issue_comments_325531.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">Comment 11</div>\n\n`sample` yields an `OverflowError`:\n\n```python\nsage: n = 10000\nsage: p = 1/n\nsage: k = 17\nsage: sample(Subsets(range(n), k), binomial(n, p))\nTraceback (most recent call last):\n  File \"<ipython-input-57-6d20b3bde428>\", line 1, in <module>\n    sample(Subsets(range(n), k), binomial(n, p))\n  File \"/usr/lib/sagemath/local/lib/python2.7/site-packages/sage/misc/prandom.py\", line 178, in sample\n    return _pyrand().sample(population, k)\n  File \"/usr/lib/sagemath/local/lib/python/random.py\", line 321, in sample\n    n = len(population)\nOverflowError: Python int too large to convert to C long\n```\n\nI am also quite worried about the fact that `numpy` probably converts `p` into a float. Not sure it should matter much, but still...\n\n(this was tested in Sage 7.3... until I'll build 7.5beta3 properly)",
    "created_at": "2016-11-24T13:15:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325531",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:11" align="right">Comment 11</div>

`sample` yields an `OverflowError`:

```python
sage: n = 10000
sage: p = 1/n
sage: k = 17
sage: sample(Subsets(range(n), k), binomial(n, p))
Traceback (most recent call last):
  File "<ipython-input-57-6d20b3bde428>", line 1, in <module>
    sample(Subsets(range(n), k), binomial(n, p))
  File "/usr/lib/sagemath/local/lib/python2.7/site-packages/sage/misc/prandom.py", line 178, in sample
    return _pyrand().sample(population, k)
  File "/usr/lib/sagemath/local/lib/python/random.py", line 321, in sample
    n = len(population)
OverflowError: Python int too large to convert to C long
```

I am also quite worried about the fact that `numpy` probably converts `p` into a float. Not sure it should matter much, but still...

(this was tested in Sage 7.3... until I'll build 7.5beta3 properly)



---

archive/issue_comments_325532.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">Comment 12</div>\n\nI think the maximum number of edges in the complete uniform hypergraph that this can handle via the proposed method is roughly `1e18` (check that `xrange`, for example, fails for `1e19`).",
    "created_at": "2016-11-24T13:27:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325532",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:12" align="right">Comment 12</div>

I think the maximum number of edges in the complete uniform hypergraph that this can handle via the proposed method is roughly `1e18` (check that `xrange`, for example, fails for `1e19`).



---

archive/issue_comments_325533.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">Comment 13</div>\n\nReplying to [@pelegm](#comment%3A11):\n> `sample` yields an `OverflowError`:\n> \n> ```python\n> sage: n = 10000\n> sage: p = 1/n\n> sage: k = 17\n> sage: sample(Subsets(range(n), k), binomial(n, p))\n> Traceback (most recent call last):\n>   File \"<ipython-input-57-6d20b3bde428>\", line 1, in <module>\n>     sample(Subsets(range(n), k), binomial(n, p))\n>   File \"/usr/lib/sagemath/local/lib/python2.7/site-packages/sage/misc/prandom.py\", line 178, in sample\n>     return _pyrand().sample(population, k)\n>   File \"/usr/lib/sagemath/local/lib/python/random.py\", line 321, in sample\n>     n = len(population)\n> OverflowError: Python int too large to convert to C long\n> ```\n> \n> I am also quite worried about the fact that `numpy` probably converts `p` into a float. Not sure it should matter much, but still...\n\nI confirm the behavior on the latest beta (7.5.beta4). I don't think the conversion to float by numpy matters.\n\nOn the other hand, as we discussed in Jerusalem it would actually be simpler to have two methods:\n* one for GNM (not needing binomial)\n* one for GNP (that calls GNM with appropriate parameters)",
    "created_at": "2016-11-25T12:24:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325533",
    "user": "https://github.com/videlec"
}
```

<div id="comment:13" align="right">Comment 13</div>

Replying to [@pelegm](#comment%3A11):
> `sample` yields an `OverflowError`:
> 
> ```python
> sage: n = 10000
> sage: p = 1/n
> sage: k = 17
> sage: sample(Subsets(range(n), k), binomial(n, p))
> Traceback (most recent call last):
>   File "<ipython-input-57-6d20b3bde428>", line 1, in <module>
>     sample(Subsets(range(n), k), binomial(n, p))
>   File "/usr/lib/sagemath/local/lib/python2.7/site-packages/sage/misc/prandom.py", line 178, in sample
>     return _pyrand().sample(population, k)
>   File "/usr/lib/sagemath/local/lib/python/random.py", line 321, in sample
>     n = len(population)
> OverflowError: Python int too large to convert to C long
> ```
> 
> I am also quite worried about the fact that `numpy` probably converts `p` into a float. Not sure it should matter much, but still...

I confirm the behavior on the latest beta (7.5.beta4). I don't think the conversion to float by numpy matters.

On the other hand, as we discussed in Jerusalem it would actually be simpler to have two methods:
* one for GNM (not needing binomial)
* one for GNP (that calls GNM with appropriate parameters)



---

archive/issue_comments_325534.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">Comment 14</div>\n\nI'm also in favor of having GNM and GNP like methods.\n\nIn above example, you use `binomial(n, p)` with `p=1/k`. If p is a float, then `binomial` will raise `TypeError: either m or x-m must be an integer`.\nYou may try this instead `sample(Subsets(range(n), k), randint(0,binomial(n, k)))`.\n\n\nObviously, the main limitation for the maximum size of a random uniform hypergraph is not what `range` can handle but the memory of your computer. `1e9` should already be beyond what you can do.\n\nDavid.",
    "created_at": "2016-11-26T09:58:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325534",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:14" align="right">Comment 14</div>

I'm also in favor of having GNM and GNP like methods.

In above example, you use `binomial(n, p)` with `p=1/k`. If p is a float, then `binomial` will raise `TypeError: either m or x-m must be an integer`.
You may try this instead `sample(Subsets(range(n), k), randint(0,binomial(n, k)))`.


Obviously, the main limitation for the maximum size of a random uniform hypergraph is not what `range` can handle but the memory of your computer. `1e9` should already be beyond what you can do.

David.



---

archive/issue_comments_325535.json:
```json
{
    "body": "Changed commit from **[588b888](https://github.com/sagemath/sagetrac-mirror/commit/588b888d03cfd3dbe045f4e5c33812aca744980b)** to **[42fde5b](https://github.com/sagemath/sagetrac-mirror/commit/42fde5bd795025f81618486610e6b292edf3d3cd)**",
    "created_at": "2016-11-26T12:55:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325535",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[588b888](https://github.com/sagemath/sagetrac-mirror/commit/588b888d03cfd3dbe045f4e5c33812aca744980b)** to **[42fde5b](https://github.com/sagemath/sagetrac-mirror/commit/42fde5bd795025f81618486610e6b292edf3d3cd)**



---

archive/issue_comments_325536.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">Comment 15</div>\n\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42fde5bd795025f81618486610e6b292edf3d3cd\">42fde5b</a></td><td><code>Random binomial uniform hypergraph</code></td></tr></table>\n",
    "created_at": "2016-11-26T12:55:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325536",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15" align="right">Comment 15</div>

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42fde5bd795025f81618486610e6b292edf3d3cd">42fde5b</a></td><td><code>Random binomial uniform hypergraph</code></td></tr></table>




---

archive/issue_comments_325537.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">Comment 16</div>\n\nRebased to `develop`.",
    "created_at": "2016-11-26T12:55:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325537",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:16" align="right">Comment 16</div>

Rebased to `develop`.



---

archive/issue_comments_325538.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">Comment 17</div>\n\nOK, so this is my plan for the uniform model:\n\n```python\n        if m < 0:\n            raise ValueError(\"Number of edges must be nonnegative.\")\n\n        from sage.combinat.subset import Subsets\n        all_edges = Subsets(n, k)\n        max_points = len(all_edges)\n        if m > max_points:\n            raise ValueError(\"Number of edges may not exceed {}\".format(\n                max_points))\n\n        from sage.misc.prandom import sample\n\n        try:\n            edges = sample(all_edges, m)\n\n        except OverflowError:\n            from sys import maxint\n            from sage.functions.other import binomial\n\n            if binomial(n, k) > maxint:\n                raise OverflowError(\"binomial(n, k) may not exceed {}\".format(\n                    maxint))\n\n            raise\n\n        from sage.combinat.designs.incidence_structures import IncidenceStructure\n        return IncidenceStructure(edges)\n```\n\nNow, for the binomial model, which function do you think I should use?\n\n1. Import `numpy.random.binomial`, or\n2. Implement `binomial` in `sage.misc.prandom` (either as a call to numpy, or copying code from numpy? I think it is implemented in C in numpy...)",
    "created_at": "2016-11-26T13:16:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325538",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:17" align="right">Comment 17</div>

OK, so this is my plan for the uniform model:

```python
        if m < 0:
            raise ValueError("Number of edges must be nonnegative.")

        from sage.combinat.subset import Subsets
        all_edges = Subsets(n, k)
        max_points = len(all_edges)
        if m > max_points:
            raise ValueError("Number of edges may not exceed {}".format(
                max_points))

        from sage.misc.prandom import sample

        try:
            edges = sample(all_edges, m)

        except OverflowError:
            from sys import maxint
            from sage.functions.other import binomial

            if binomial(n, k) > maxint:
                raise OverflowError("binomial(n, k) may not exceed {}".format(
                    maxint))

            raise

        from sage.combinat.designs.incidence_structures import IncidenceStructure
        return IncidenceStructure(edges)
```

Now, for the binomial model, which function do you think I should use?

1. Import `numpy.random.binomial`, or
2. Implement `binomial` in `sage.misc.prandom` (either as a call to numpy, or copying code from numpy? I think it is implemented in C in numpy...)



---

archive/issue_comments_325539.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">Comment 18</div>\n\nYou have only 1 call, so this should be sufficient\n\n```\nsage: from sage.misc.prandom import randint\nsage: m = randint(0, binomial(1000,17))\n```",
    "created_at": "2016-11-26T13:31:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325539",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:18" align="right">Comment 18</div>

You have only 1 call, so this should be sufficient

```
sage: from sage.misc.prandom import randint
sage: m = randint(0, binomial(1000,17))
```



---

archive/issue_comments_325540.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">Comment 19</div>\n\nReplying to [@dcoudert](#comment%3A18):\n> You have only 1 call, so this should be sufficient\n> \n> ```\n> sage: from sage.misc.prandom import randint\n> sage: m = randint(0, binomial(1000,17))\n> ```\n\nThis will not yield the current distribution. `randint` is uniform, rather than binomial.",
    "created_at": "2016-11-26T16:29:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325540",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:19" align="right">Comment 19</div>

Replying to [@dcoudert](#comment%3A18):
> You have only 1 call, so this should be sufficient
> 
> ```
> sage: from sage.misc.prandom import randint
> sage: m = randint(0, binomial(1000,17))
> ```

This will not yield the current distribution. `randint` is uniform, rather than binomial.



---

archive/issue_comments_325541.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">Comment 20</div>\n\nReplying to [@pelegm](#comment%3A17):\n> OK, so this is my plan for the uniform model:\n> [SNIP CODE]\n\nI would actually regroup and simplify the errors (and please in the error message start with lower case and no ponctuation at the end)\n\n```python\nfrom sage.combinat.subset import Subsets\nfrom sage.misc.prandom import sample\nall_edges = Subsets(n, k)\ntry:\n    edges = sample(all_edges, m)\nexcept OverflowError:\n    raise OverflowError(\"binomial({},{}) too large to be treated\".format(n,k))\nexcept ValueError:\n    raise ValueError(\"number of edges m must between 0 and binomial({},{})\".format(n,k))\n\nfrom sage.combinat.designs.incidence_structures import IncidenceStructure\nreturn IncidenceStructure(edges)\n```\nI don't think that the overflow in `sample` has to do with the second argument... It is raised (indirectly) in your example by\n\n```\nsage: len(Subsets(range(10000), 17))\nTraceback (most recent call last):\n...\nOverflowError: Python int too large to convert to C long\n```",
    "created_at": "2016-11-26T16:52:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325541",
    "user": "https://github.com/videlec"
}
```

<div id="comment:20" align="right">Comment 20</div>

Replying to [@pelegm](#comment%3A17):
> OK, so this is my plan for the uniform model:
> [SNIP CODE]

I would actually regroup and simplify the errors (and please in the error message start with lower case and no ponctuation at the end)

```python
from sage.combinat.subset import Subsets
from sage.misc.prandom import sample
all_edges = Subsets(n, k)
try:
    edges = sample(all_edges, m)
except OverflowError:
    raise OverflowError("binomial({},{}) too large to be treated".format(n,k))
except ValueError:
    raise ValueError("number of edges m must between 0 and binomial({},{})".format(n,k))

from sage.combinat.designs.incidence_structures import IncidenceStructure
return IncidenceStructure(edges)
```
I don't think that the overflow in `sample` has to do with the second argument... It is raised (indirectly) in your example by

```
sage: len(Subsets(range(10000), 17))
Traceback (most recent call last):
...
OverflowError: Python int too large to convert to C long
```



---

archive/issue_comments_325542.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">Comment 21</div>\n\nGreat, thanks. In the meanwhile I implement the binomial random hypergraph using NumPy's `binomial` function.  If there will be any negative comments, I'll think of a new solution.",
    "created_at": "2016-11-26T17:21:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325542",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:21" align="right">Comment 21</div>

Great, thanks. In the meanwhile I implement the binomial random hypergraph using NumPy's `binomial` function.  If there will be any negative comments, I'll think of a new solution.



---

archive/issue_comments_325543.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">Comment 22</div>\n\nReplying to [@pelegm](#comment%3A21):\n> Great, thanks. In the meanwhile I implement the binomial random hypergraph using NumPy's `binomial` function. If there will be any negative comments, I'll think of a new solution.\n\nI am good with it!",
    "created_at": "2016-11-26T17:23:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325543",
    "user": "https://github.com/videlec"
}
```

<div id="comment:22" align="right">Comment 22</div>

Replying to [@pelegm](#comment%3A21):
> Great, thanks. In the meanwhile I implement the binomial random hypergraph using NumPy's `binomial` function. If there will be any negative comments, I'll think of a new solution.

I am good with it!



---

archive/issue_comments_325544.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">Comment 23</div>\n\nReplying to [@videlec](#comment%3A20):\n> I would actually regroup and simplify the errors (and please in the error message start with lower case and no ponctuation at the end)\n> \n> ```python\n> from sage.combinat.subset import Subsets\n> from sage.misc.prandom import sample\n> all_edges = Subsets(n, k)\n> try:\n>     edges = sample(all_edges, m)\n> except OverflowError:\n>     raise OverflowError(\"binomial({},{}) too large to be treated\".format(n,k))\n> except ValueError:\n>     raise ValueError(\"number of edges m must between 0 and binomial({},{})\".format(n,k))\n> \n> from sage.combinat.designs.incidence_structures import IncidenceStructure\n> return IncidenceStructure(edges)\n> ```\n\nThe problem by this implementation is that it creates a hypergraph without the isolated vertices.  This is easy to fix, I'm on it.",
    "created_at": "2018-06-28T15:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325544",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:23" align="right">Comment 23</div>

Replying to [@videlec](#comment%3A20):
> I would actually regroup and simplify the errors (and please in the error message start with lower case and no ponctuation at the end)
> 
> ```python
> from sage.combinat.subset import Subsets
> from sage.misc.prandom import sample
> all_edges = Subsets(n, k)
> try:
>     edges = sample(all_edges, m)
> except OverflowError:
>     raise OverflowError("binomial({},{}) too large to be treated".format(n,k))
> except ValueError:
>     raise ValueError("number of edges m must between 0 and binomial({},{})".format(n,k))
> 
> from sage.combinat.designs.incidence_structures import IncidenceStructure
> return IncidenceStructure(edges)
> ```

The problem by this implementation is that it creates a hypergraph without the isolated vertices.  This is easy to fix, I'm on it.



---

archive/issue_comments_325545.json:
```json
{
    "body": "Assignee: **@pelegm**",
    "created_at": "2018-06-28T15:37:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325545",
    "user": "https://github.com/pelegm"
}
```

Assignee: **@pelegm**



---

archive/issue_comments_325546.json:
```json
{
    "body": "Changed keywords from **hypergraph, random, days79** to **hypergraph, random, days79, days94**",
    "created_at": "2018-06-28T15:37:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325546",
    "user": "https://github.com/pelegm"
}
```

Changed keywords from **hypergraph, random, days79** to **hypergraph, random, days79, days94**



---

archive/issue_comments_325547.json:
```json
{
    "body": "Changed commit from **[42fde5b](https://github.com/sagemath/sagetrac-mirror/commit/42fde5bd795025f81618486610e6b292edf3d3cd)** to **[2b6b048](https://github.com/sagemath/sagetrac-mirror/commit/2b6b0483512e67b0b708fa6ea3d0712c8557ce6f)**",
    "created_at": "2018-06-28T15:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325547",
    "user": "https://github.com/pelegm"
}
```

Changed commit from **[42fde5b](https://github.com/sagemath/sagetrac-mirror/commit/42fde5bd795025f81618486610e6b292edf3d3cd)** to **[2b6b048](https://github.com/sagemath/sagetrac-mirror/commit/2b6b0483512e67b0b708fa6ea3d0712c8557ce6f)**



---

archive/issue_events_289312.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-28T15:54:06Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289312"
}
```



---

archive/issue_events_289313.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-28T15:54:06Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289313"
}
```



---

archive/issue_comments_325548.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">Comment 25</div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2b6b0483512e67b0b708fa6ea3d0712c8557ce6f\">2b6b048</a></td><td><code>Random binomial uniform hypergraph</code></td></tr></table>\n",
    "created_at": "2018-06-28T15:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325548",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:25" align="right">Comment 25</div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2b6b0483512e67b0b708fa6ea3d0712c8557ce6f">2b6b048</a></td><td><code>Random binomial uniform hypergraph</code></td></tr></table>




---

archive/issue_comments_325549.json:
```json
{
    "body": "Changed branch from **[u/pelegm/randombinomialhypergraph](https://github.com/sagemath/sagetrac-mirror/tree/u/pelegm/randombinomialhypergraph)** to **[u/pelegm/21917](https://github.com/sagemath/sagetrac-mirror/tree/u/pelegm/21917)**",
    "created_at": "2018-06-28T15:54:06Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325549",
    "user": "https://github.com/pelegm"
}
```

Changed branch from **[u/pelegm/randombinomialhypergraph](https://github.com/sagemath/sagetrac-mirror/tree/u/pelegm/randombinomialhypergraph)** to **[u/pelegm/21917](https://github.com/sagemath/sagetrac-mirror/tree/u/pelegm/21917)**



---

archive/issue_comments_325550.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">Comment 26</div>\n\nI avoided using seed since randomness is currently using numpy's, and working with two random states seems wrong.  Wasn't sure what other tests I should add.",
    "created_at": "2018-06-28T15:55:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325550",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:26" align="right">Comment 26</div>

I avoided using seed since randomness is currently using numpy's, and working with two random states seems wrong.  Wasn't sure what other tests I should add.



---

archive/issue_events_289314.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-28T15:56:57Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289314"
}
```



---

archive/issue_events_289315.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-28T15:56:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "milestone_number": null,
    "milestone_title": "sage-8.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289315"
}
```



---

archive/issue_comments_325551.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">Comment 28</div>\n\n`Retrun` -> `Return`\n\nin method, `BinomialRandomUniform`, shouldn't you ensure that `m = nrn.binomial(binomial(n, k), p)` can be done / that it's not too large? or is it handled in `UniformRandomUniform` ?\n\nThe `TESTS` block is in fact a `EXAMPLES` block.\n\nWhat if `n` or `k` or `n` are values `<= 0`? You may need specific tests for theses cases.",
    "created_at": "2018-06-28T16:21:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325551",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:28" align="right">Comment 28</div>

`Retrun` -> `Return`

in method, `BinomialRandomUniform`, shouldn't you ensure that `m = nrn.binomial(binomial(n, k), p)` can be done / that it's not too large? or is it handled in `UniformRandomUniform` ?

The `TESTS` block is in fact a `EXAMPLES` block.

What if `n` or `k` or `n` are values `<= 0`? You may need specific tests for theses cases.



---

archive/issue_events_289316.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-29T06:24:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289316"
}
```



---

archive/issue_events_289317.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-29T06:24:20Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289317"
}
```



---

archive/issue_comments_325552.json:
```json
{
    "body": "<div id=\"comment:30\" align=\"right\">Comment 30</div>\n\nReplying to [@dcoudert](#comment%3A28):\n> `Retrun` -> `Return`\n\nThanks, will fix.\n \n> in method, `BinomialRandomUniform`, shouldn't you ensure that `m = nrn.binomial(binomial(n, k), p)` can be done / that it's not too large? or is it handled in `UniformRandomUniform` ?\n\nIndeed, for large inputs there's some weird issue in numpy I can't really understand at the moment:\n\n```\nsage: nrn.binomial(binomial(10000, 7), 0.1)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n<ipython-input-6-d91f2b509dee> in <module>()\n----> 1 nrn.binomial(binomial(Integer(10000), Integer(7)), RealNumber('0.1'))\n\nmtrand.pyx in mtrand.RandomState.binomial()\n\nTypeError: Cannot cast array data from dtype('O') to dtype('int64') according to the rule 'safe'\n```\n\n> The `TESTS` block is in fact a `EXAMPLES` block.\n\nOk.\n\n> What if `n` or `k` or `n` are values `<= 0`? You may need specific tests for theses cases.\n\nWill do.",
    "created_at": "2018-06-29T09:35:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325552",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:30" align="right">Comment 30</div>

Replying to [@dcoudert](#comment%3A28):
> `Retrun` -> `Return`

Thanks, will fix.
 
> in method, `BinomialRandomUniform`, shouldn't you ensure that `m = nrn.binomial(binomial(n, k), p)` can be done / that it's not too large? or is it handled in `UniformRandomUniform` ?

Indeed, for large inputs there's some weird issue in numpy I can't really understand at the moment:

```
sage: nrn.binomial(binomial(10000, 7), 0.1)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-6-d91f2b509dee> in <module>()
----> 1 nrn.binomial(binomial(Integer(10000), Integer(7)), RealNumber('0.1'))

mtrand.pyx in mtrand.RandomState.binomial()

TypeError: Cannot cast array data from dtype('O') to dtype('int64') according to the rule 'safe'
```

> The `TESTS` block is in fact a `EXAMPLES` block.

Ok.

> What if `n` or `k` or `n` are values `<= 0`? You may need specific tests for theses cases.

Will do.



---

archive/issue_comments_325553.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">Comment 31</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/de49d8cd4002cfe95f849b56e4ebb0d261c93f3b\">de49d8c</a></td><td><code>Typo, parameter checks and tests</code></td></tr></table>\n",
    "created_at": "2018-06-29T11:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325553",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:31" align="right">Comment 31</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/de49d8cd4002cfe95f849b56e4ebb0d261c93f3b">de49d8c</a></td><td><code>Typo, parameter checks and tests</code></td></tr></table>




---

archive/issue_comments_325554.json:
```json
{
    "body": "Changed commit from **[2b6b048](https://github.com/sagemath/sagetrac-mirror/commit/2b6b0483512e67b0b708fa6ea3d0712c8557ce6f)** to **[de49d8c](https://github.com/sagemath/sagetrac-mirror/commit/de49d8cd4002cfe95f849b56e4ebb0d261c93f3b)**",
    "created_at": "2018-06-29T11:11:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325554",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[2b6b048](https://github.com/sagemath/sagetrac-mirror/commit/2b6b0483512e67b0b708fa6ea3d0712c8557ce6f)** to **[de49d8c](https://github.com/sagemath/sagetrac-mirror/commit/de49d8cd4002cfe95f849b56e4ebb0d261c93f3b)**



---

archive/issue_events_289318.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-29T11:11:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289318"
}
```



---

archive/issue_events_289319.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-29T11:11:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289319"
}
```



---

archive/issue_comments_325555.json:
```json
{
    "body": "<div id=\"comment:33\" align=\"right\">Comment 33</div>\n\nShouldn't we put an empty line after `TESTS::` ?\n\nOnce done (or not done if not necessary), you can set this ticket to positive review for me.",
    "created_at": "2018-06-29T21:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325555",
    "user": "https://github.com/dcoudert"
}
```

<div id="comment:33" align="right">Comment 33</div>

Shouldn't we put an empty line after `TESTS::` ?

Once done (or not done if not necessary), you can set this ticket to positive review for me.



---

archive/issue_comments_325556.json:
```json
{
    "body": "Reviewer: **David Coudert**",
    "created_at": "2018-06-29T21:54:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325556",
    "user": "https://github.com/dcoudert"
}
```

Reviewer: **David Coudert**



---

archive/issue_comments_325557.json:
```json
{
    "body": "<div id=\"comment:34\" align=\"right\">Comment 34</div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/5a7b76ad7490524f1ec4c55c4fdd657eb962adcd\">5a7b76a</a></td><td><code>Empty lines after TESTS::</code></td></tr></table>\n",
    "created_at": "2018-06-30T07:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325557",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:34" align="right">Comment 34</div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/5a7b76ad7490524f1ec4c55c4fdd657eb962adcd">5a7b76a</a></td><td><code>Empty lines after TESTS::</code></td></tr></table>




---

archive/issue_comments_325558.json:
```json
{
    "body": "Changed commit from **[de49d8c](https://github.com/sagemath/sagetrac-mirror/commit/de49d8cd4002cfe95f849b56e4ebb0d261c93f3b)** to **[5a7b76a](https://github.com/sagemath/sagetrac-mirror/commit/5a7b76ad7490524f1ec4c55c4fdd657eb962adcd)**",
    "created_at": "2018-06-30T07:02:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325558",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[de49d8c](https://github.com/sagemath/sagetrac-mirror/commit/de49d8cd4002cfe95f849b56e4ebb0d261c93f3b)** to **[5a7b76a](https://github.com/sagemath/sagetrac-mirror/commit/5a7b76ad7490524f1ec4c55c4fdd657eb962adcd)**



---

archive/issue_comments_325559.json:
```json
{
    "body": "<div id=\"comment:35\" align=\"right\">Comment 35</div>\n\nThanks!",
    "created_at": "2018-06-30T07:02:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325559",
    "user": "https://github.com/pelegm"
}
```

<div id="comment:35" align="right">Comment 35</div>

Thanks!



---

archive/issue_events_289320.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-30T07:02:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289320"
}
```



---

archive/issue_events_289321.json:
```json
{
    "actor": "https://github.com/pelegm",
    "created_at": "2018-06-30T07:02:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289321"
}
```



---

archive/issue_events_289322.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2018-07-03T23:40:23Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289322"
}
```



---

archive/issue_events_289323.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "71448bd07440dc6163fd6396a4d323ebfc9cc847",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2018-07-03T23:40:23Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21917#event-289323"
}
```



---

archive/issue_comments_325560.json:
```json
{
    "body": "Changed branch from **[u/pelegm/21917](https://github.com/sagemath/sagetrac-mirror/tree/u/pelegm/21917)** to **[5a7b76a](https://github.com/sagemath/sagetrac-mirror/commit/5a7b76ad7490524f1ec4c55c4fdd657eb962adcd)**",
    "created_at": "2018-07-03T23:40:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21917",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21917#issuecomment-325560",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/pelegm/21917](https://github.com/sagemath/sagetrac-mirror/tree/u/pelegm/21917)** to **[5a7b76a](https://github.com/sagemath/sagetrac-mirror/commit/5a7b76ad7490524f1ec4c55c4fdd657eb962adcd)**
