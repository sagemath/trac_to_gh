# Issue 21148: deprecate unused dendrog comparison of trees

archive/issues_020911.json:
```json
{
    "body": "part of the effort to move towards py3, which does not support\nsorting according to a comparison function.\n\nWe will remove this after one year of deprecation.\n\nCC:  @tscrim @darijgr @kevindilks vivianepons @hivert\n\nBranch/Commit: e41a40b795fb3494278f780b9f9c77efabbe8174\n\nReviewer: Darij Grinberg, Travis Scrimshaw\n\nAuthor: Fr\u00e9d\u00e9ric Chapoton\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21148\n\n",
    "closed_at": "2016-08-07T20:00:34Z",
    "created_at": "2016-08-02T09:34:47Z",
    "labels": [
        "component: combinatorics"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.3",
    "title": "deprecate unused dendrog comparison of trees",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21148",
    "user": "https://github.com/fchapoton"
}
```
part of the effort to move towards py3, which does not support
sorting according to a comparison function.

We will remove this after one year of deprecation.

CC:  @tscrim @darijgr @kevindilks vivianepons @hivert

Branch/Commit: e41a40b795fb3494278f780b9f9c77efabbe8174

Reviewer: Darij Grinberg, Travis Scrimshaw

Author: Frédéric Chapoton

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21148





---

archive/issue_comments_387358.json:
```json
{
    "body": "Changing commit from \"\" to \"483696f889a4b79c968dc00f7008bd3ed12efdcb\"",
    "created_at": "2016-08-02T09:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387358",
    "user": "https://github.com/fchapoton"
}
```

Changing commit from "" to "483696f889a4b79c968dc00f7008bd3ed12efdcb"



---

archive/issue_comments_387359.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-02T09:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387359",
    "user": "https://github.com/fchapoton"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_387360.json:
```json
{
    "body": "Changing branch from \"\" to \"public/21148\"",
    "created_at": "2016-08-02T09:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387360",
    "user": "https://github.com/fchapoton"
}
```

Changing branch from "" to "public/21148"



---

archive/issue_comments_387361.json:
```json
{
    "body": "<a id='comment:1'></a>\nNew commits:\n|                                                                                                                                          |                                                                |\n|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|\n|[483696f](https://git.sagemath.org/sage.git/commit?id=483696f889a4b79c968dc00f7008bd3ed12efdcb)|`remove unused dendrog comparison of trees (not py3 compatible)`|",
    "created_at": "2016-08-02T09:35:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387361",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'></a>
New commits:
|                                                                                                                                          |                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------|
|[483696f](https://git.sagemath.org/sage.git/commit?id=483696f889a4b79c968dc00f7008bd3ed12efdcb)|`remove unused dendrog comparison of trees (not py3 compatible)`|



---

archive/issue_comments_387362.json:
```json
{
    "body": "<a id='comment:2'></a>\nFine with me (I'm not married to this code)... but something tells me that the constructed-on-the-fly comparison might be even harder to py3ize than this one. Did you try?",
    "created_at": "2016-08-02T11:15:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387362",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:2'></a>
Fine with me (I'm not married to this code)... but something tells me that the constructed-on-the-fly comparison might be even harder to py3ize than this one. Did you try?



---

archive/issue_comments_387363.json:
```json
{
    "body": "<a id='comment:3'></a>\nno, I have not checked the other comparison. At least it does not use cmp, but a key.\n\nDo you agree to set this to positive review ?",
    "created_at": "2016-08-02T11:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387363",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:3'></a>
no, I have not checked the other comparison. At least it does not use cmp, but a key.

Do you agree to set this to positive review ?



---

archive/issue_comments_387364.json:
```json
{
    "body": "<a id='comment:4'></a>\nOh, I forgot that our `sort_key` is deterministic (we did get rid of the on-the-fly hack). Perfect then!\n\nYes, positive review.",
    "created_at": "2016-08-02T12:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387364",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:4'></a>
Oh, I forgot that our `sort_key` is deterministic (we did get rid of the on-the-fly hack). Perfect then!

Yes, positive review.



---

archive/issue_comments_387365.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-02T12:03:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387365",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_387366.json:
```json
{
    "body": "<a id='comment:5'></a>\nIt just looks like you are removing functionality to remove a use of the `cmp` keyword for `sort`. I agree that we should move to Python3, but this feels more like a scorched-Earth approach. Why not just use the `cmp_to_key`? There's also nothing that says we cannot have `cmp`-like functions in our own code either.\n\nI don't use this personally, but I don't think we should just completely rip out something that might be useful to someone. I've cc-ing Kevin and Viviane to see if they do or know someone who does.",
    "created_at": "2016-08-02T15:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387366",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:5'></a>
It just looks like you are removing functionality to remove a use of the `cmp` keyword for `sort`. I agree that we should move to Python3, but this feels more like a scorched-Earth approach. Why not just use the `cmp_to_key`? There's also nothing that says we cannot have `cmp`-like functions in our own code either.

I don't use this personally, but I don't think we should just completely rip out something that might be useful to someone. I've cc-ing Kevin and Viviane to see if they do or know someone who does.



---

archive/issue_comments_387367.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2016-08-02T15:39:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387367",
    "user": "https://github.com/tscrim"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_387368.json:
```json
{
    "body": "<a id='comment:6'></a>\nThis has never been used in sage, and has very probably never been used by anybody out there.\n\nIMHO, the job of changing it to a comparison key would be be essentially useless.\n\nGiven that python3 is still a **long** way ahead, please let us try not to spend too much time on futilities.",
    "created_at": "2016-08-02T16:11:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387368",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:6'></a>
This has never been used in sage, and has very probably never been used by anybody out there.

IMHO, the job of changing it to a comparison key would be be essentially useless.

Given that python3 is still a **long** way ahead, please let us try not to spend too much time on futilities.



---

archive/issue_comments_387369.json:
```json
{
    "body": "<a id='comment:7'></a>\nSomeone thought it was worthwhile to add this to Sage. Plus there surely are a large number of methods that are never called in Sage itself (e.g., `newton_raphson` for (univariate) polynomials). So I don't find that to be a compelling argument. The functionality is not broken, it just needs a small tweak to be 2/3 compatible. So I really think we should not remove chunks like this.",
    "created_at": "2016-08-02T16:46:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387369",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:7'></a>
Someone thought it was worthwhile to add this to Sage. Plus there surely are a large number of methods that are never called in Sage itself (e.g., `newton_raphson` for (univariate) polynomials). So I don't find that to be a compelling argument. The functionality is not broken, it just needs a small tweak to be 2/3 compatible. So I really think we should not remove chunks like this.



---

archive/issue_comments_387370.json:
```json
{
    "body": "<a id='comment:8'></a>\nI wrote this code, in order to solve a problem (totally ordering trees). Then, others came around and found a better solution (see the `sort_key` we currently have). I don't know if someone else has used or is using it; all I can really say is that I'm decrementing the reference count.",
    "created_at": "2016-08-02T23:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387370",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:8'></a>
I wrote this code, in order to solve a problem (totally ordering trees). Then, others came around and found a better solution (see the `sort_key` we currently have). I don't know if someone else has used or is using it; all I can really say is that I'm decrementing the reference count.



---

archive/issue_comments_387371.json:
```json
{
    "body": "Changing status from needs_info to needs_work.",
    "created_at": "2016-08-03T00:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387371",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_info to needs_work.



---

archive/issue_comments_387372.json:
```json
{
    "body": "<a id='comment:9'></a>\nI still don't really agree with removing the functionality, but okay. Nevertheless, you need to deprecate these functions.",
    "created_at": "2016-08-03T00:53:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387372",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:9'></a>
I still don't really agree with removing the functionality, but okay. Nevertheless, you need to deprecate these functions.



---

archive/issue_comments_387373.json:
```json
{
    "body": "<a id='comment:10'></a>\nBranch pushed to git repo; I updated commit sha1. This was a forced push. New commits:\n|                                                                                                                                           |                                           |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|\n|[e41a40b](https://git.sagemath.org/sage.git/commit/?id=e41a40b795fb3494278f780b9f9c77efabbe8174)|`trac 21148 deprecation instead of removal`|",
    "created_at": "2016-08-03T07:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387373",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:10'></a>
Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:
|                                                                                                                                           |                                           |
|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------|
|[e41a40b](https://git.sagemath.org/sage.git/commit/?id=e41a40b795fb3494278f780b9f9c77efabbe8174)|`trac 21148 deprecation instead of removal`|



---

archive/issue_comments_387374.json:
```json
{
    "body": "Changing commit from \"483696f889a4b79c968dc00f7008bd3ed12efdcb\" to \"e41a40b795fb3494278f780b9f9c77efabbe8174\"",
    "created_at": "2016-08-03T07:15:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387374",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "483696f889a4b79c968dc00f7008bd3ed12efdcb" to "e41a40b795fb3494278f780b9f9c77efabbe8174"



---

archive/issue_comments_387375.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,2 +1,4 @@\n part of the effort to move towards py3, which does not support\n sorting according to a comparison function.\n+\n+We will remove this after one year of deprecation.\n``````\n",
    "created_at": "2016-08-03T07:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387375",
    "user": "https://github.com/fchapoton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,2 +1,4 @@
 part of the effort to move towards py3, which does not support
 sorting according to a comparison function.
+
+We will remove this after one year of deprecation.
``````




---

archive/issue_comments_387376.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-08-03T07:17:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387376",
    "user": "https://github.com/fchapoton"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_387377.json:
```json
{
    "body": "<a id='comment:12'></a>\nOnce again, I'm OK with this.",
    "created_at": "2016-08-03T12:35:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387377",
    "user": "https://github.com/darijgr"
}
```

<a id='comment:12'></a>
Once again, I'm OK with this.



---

archive/issue_comments_387378.json:
```json
{
    "body": "<a id='comment:13'></a>\nAll tests pass. Travis, do you agree to set a positive review ?",
    "created_at": "2016-08-03T12:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387378",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:13'></a>
All tests pass. Travis, do you agree to set a positive review ?



---

archive/issue_comments_387379.json:
```json
{
    "body": "<a id='comment:14'></a>\nYep, positive review.",
    "created_at": "2016-08-04T20:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387379",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:14'></a>
Yep, positive review.



---

archive/issue_comments_387380.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Darij Grinberg, Travis Scrimshaw\"",
    "created_at": "2016-08-04T20:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387380",
    "user": "https://github.com/tscrim"
}
```

Changing reviewer from "" to "Darij Grinberg, Travis Scrimshaw"



---

archive/issue_comments_387381.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-04T20:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387381",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_387382.json:
```json
{
    "body": "Changing branch from \"public/21148\" to \"e41a40b795fb3494278f780b9f9c77efabbe8174\"",
    "created_at": "2016-08-07T20:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387382",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "public/21148" to "e41a40b795fb3494278f780b9f9c77efabbe8174"



---

archive/issue_comments_387383.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-08-07T20:00:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21148#issuecomment-387383",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_056432.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-07T20:00:34Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21148",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21148#event-56432"
}
```
