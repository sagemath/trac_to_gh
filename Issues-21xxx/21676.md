# Issue 21676: Upate NTL to 10.1.0

archive/issues_021439.json:
```json
{
    "assignees": [],
    "body": "<div id=\"comment:0\"></div>\n\nUse upstream tarball at:\n* http://www.shoup.net/ntl/ntl-10.1.0.tar.gz\n\n\nDepends on #21631\n\nCC:  @nexttime @kiwifb @jdemeyer @vbraun\n\nComponent: **packages: standard**\n\nAuthor: **Jean-Pierre Flori**\n\nBranch/Commit: **[`091862e`](https://github.com/sagemath/sagetrac-mirror/commit/091862e2f891dc4f5144ad6fedb66ad6bfafe2fd)**\n\nReviewer: **Fran\u00e7ois Bissey**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21676_\n\n",
    "closed_at": "2016-11-08T23:42:20Z",
    "created_at": "2016-10-10T09:57:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.5",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Upate NTL to 10.1.0",
    "type": "issue",
    "updated_at": "2016-11-08T23:42:20Z",
    "url": "https://github.com/sagemath/sage/issues/21676",
    "user": "https://github.com/jpflori"
}
```
<div id="comment:0"></div>

Use upstream tarball at:
* http://www.shoup.net/ntl/ntl-10.1.0.tar.gz


Depends on #21631

CC:  @nexttime @kiwifb @jdemeyer @vbraun

Component: **packages: standard**

Author: **Jean-Pierre Flori**

Branch/Commit: **[`091862e`](https://github.com/sagemath/sagetrac-mirror/commit/091862e2f891dc4f5144ad6fedb66ad6bfafe2fd)**

Reviewer: **François Bissey**

_Issue created by migration from https://trac.sagemath.org/ticket/21676_





---

archive/issue_events_301516.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-10T09:57:23Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301516"
}
```



---

archive/issue_events_301517.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-10T09:57:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20packages%3A%20standard",
    "label_color": "0000b0",
    "label_name": "c: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301517"
}
```



---

archive/issue_events_301518.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-10T09:57:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301518"
}
```



---

archive/issue_events_301519.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-10T09:57:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301519"
}
```



---

archive/issue_comments_318502.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Use repackaged tarball at:\n-* http://perso.telecom-paristech.fr/~flori/ntl-10.0.0.tar.bz2\n+* https://perso.telecom-paristech.fr/~flori/ntl-10.0.0.tar.bz2\n \n (Original upstream tarball at:\n * http://www.shoup.net/ntl/ntl-10.0.0.tar.gz\n``````\n",
    "created_at": "2016-10-10T09:59:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318502",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Use repackaged tarball at:
-* http://perso.telecom-paristech.fr/~flori/ntl-10.0.0.tar.bz2
+* https://perso.telecom-paristech.fr/~flori/ntl-10.0.0.tar.bz2
 
 (Original upstream tarball at:
 * http://www.shoup.net/ntl/ntl-10.0.0.tar.gz
``````




---

archive/issue_events_301520.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-10T09:59:00Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301520"
}
```



---

archive/issue_comments_318503.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nYou want me to modify this to use the new version (which shouldn't need repacking)?\nOr would someone consider to first include this version for which the modifications are much more trivial?",
    "created_at": "2016-10-17T14:00:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318503",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:2" align="right">comment:2</div>

You want me to modify this to use the new version (which shouldn't need repacking)?
Or would someone consider to first include this version for which the modifications are much more trivial?



---

archive/issue_comments_318504.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI would say use the new version (at the risk of volunteering to review), since that is what we are going to have to eventually anyways.",
    "created_at": "2016-10-17T15:06:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318504",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:3" align="right">comment:3</div>

I would say use the new version (at the risk of volunteering to review), since that is what we are going to have to eventually anyways.



---

archive/issue_comments_318505.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nDefinitely new version. That's what I am targeting for Gentoo. I have one last issue with testing that I need to sort out but it shouldn't have an effect on sage since sage does test \"backwards\" (testing after install rather than before).",
    "created_at": "2016-10-17T20:02:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318505",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:4" align="right">comment:4</div>

Definitely new version. That's what I am targeting for Gentoo. I have one last issue with testing that I need to sort out but it shouldn't have an effect on sage since sage does test "backwards" (testing after install rather than before).



---

archive/issue_comments_318506.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nReplying to [@kiwifb](#comment%3A4):\n> Definitely new version. That's what I am targeting for Gentoo. I have one last issue with testing that I need to sort out but it shouldn't have an effect on sage since sage does test \"backwards\" (testing after install rather than before).\n\nVictor is good, not obvious to find but he does run tests with the appropriate `LD_LIBRARY_PATH` on linux at least.",
    "created_at": "2016-10-17T21:15:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318506",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

Replying to [@kiwifb](#comment%3A4):
> Definitely new version. That's what I am targeting for Gentoo. I have one last issue with testing that I need to sort out but it shouldn't have an effect on sage since sage does test "backwards" (testing after install rather than before).

Victor is good, not obvious to find but he does run tests with the appropriate `LD_LIBRARY_PATH` on linux at least.



---

archive/issue_comments_318507.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nAny of you have seen that while compiling singular 4? \n\n```\nNTLconvert.cc: In function \u2018CanonicalForm convertZZ2CF(const NTL::ZZ&)\u2019:\nNTLconvert.cc:509:38: error: invalid static_cast from type \u2018const raw_ptr {aka _ntl_gbigint_body* const}\u2019 to type \u2018long int*\u2019\n       static_cast<long *>( a.rep.rep ); // what about NTL7?\n```\n\nIt happens with and without the \"nothrow\" patch to `ntl`. Did I miss a patch to singular?",
    "created_at": "2016-10-18T01:41:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318507",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

Any of you have seen that while compiling singular 4? 

```
NTLconvert.cc: In function ‘CanonicalForm convertZZ2CF(const NTL::ZZ&)’:
NTLconvert.cc:509:38: error: invalid static_cast from type ‘const raw_ptr {aka _ntl_gbigint_body* const}’ to type ‘long int*’
       static_cast<long *>( a.rep.rep ); // what about NTL7?
```

It happens with and without the "nothrow" patch to `ntl`. Did I miss a patch to singular?



---

archive/issue_comments_318508.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIt vaguely reminds me of issues btw NTL and Singular 3 with template instantiation when we updated NTL to the first version using templates (rather than macros).",
    "created_at": "2016-10-18T06:31:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318508",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

It vaguely reminds me of issues btw NTL and Singular 3 with template instantiation when we updated NTL to the first version using templates (rather than macros).



---

archive/issue_comments_318509.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThat was at #16882 from:\n* [#16882 comment:29](https://github.com/sagemath/sage/issues/16882#comment:29)\n* https://github.com/sagemath/sagetrac-mirror/commit/071b2546b17df057f4ac157b096b9ee0fc33e2e5\nThough you can see at [#16882 comment:97](https://github.com/sagemath/sage/issues/16882#comment:97) and following comment that at that point I had no trouble building Singular 4.",
    "created_at": "2016-10-18T06:35:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318509",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:8" align="right">comment:8</div>

That was at #16882 from:
* [#16882 comment:29](https://github.com/sagemath/sage/issues/16882#comment:29)
* https://github.com/sagemath/sagetrac-mirror/commit/071b2546b17df057f4ac157b096b9ee0fc33e2e5
Though you can see at [#16882 comment:97](https://github.com/sagemath/sage/issues/16882#comment:97) and following comment that at that point I had no trouble building Singular 4.



---

archive/issue_comments_318510.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nWe had a chat with Victor on sage-devel I see you have seen it by now. So Victor changed something in ntl that triggers this particular error (and presumably it would also be present in singular 3). Because it is an undocumented/internal interface singular gets the failure they deserve.",
    "created_at": "2016-10-18T06:50:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318510",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

We had a chat with Victor on sage-devel I see you have seen it by now. So Victor changed something in ntl that triggers this particular error (and presumably it would also be present in singular 3). Because it is an undocumented/internal interface singular gets the failure they deserve.



---

archive/issue_events_301521.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-18T13:00:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301521"
}
```



---

archive/issue_events_301522.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-18T13:00:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301522"
}
```



---

archive/issue_comments_318511.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI did some experiments, starting with upgrading `singular` to 4.0.3p4 (without touching `ntl`)  on top of 7.5.beta0, since it contains the fix for `ntl` 10+. The plan was to change one thing at a time. You would think that it being just a patch level, it would be straightforward. Well so much for that\n\n```\nsage -t --long /usr/lib64/python2.7/site-packages/sage/modular/modform_hecketriangle/graded_ring_element.py  # 52 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py  # 29 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/modular/modform_hecketriangle/readme.py  # 10 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/schemes/generic/algebraic_scheme.py  # 9 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/schemes/curves/projective_curve.py  # 15 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py  # 70 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/modular/modform_hecketriangle/abstract_ring.py  # 7 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/tests/french_book/mpoly.py  # 14 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_sequence.py  # 6 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/interfaces/singular.py  # 2 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/matrix/matrix_sparse.pyx  # 3 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/schemes/curves/affine_curve.py  # 15 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/algebras/commutative_dga.py  # 366 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/algebras/free_algebra.py  # 10 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/geometry/polyhedron/palp_database.py  # 1 doctest failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.pyx  # 2 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/plural.pyx  # 367 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/libs/singular/function.pyx  # 22 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/schemes/projective/projective_space.py  # 4 doctests failed\nsage -t --long /usr/lib64/python2.7/site-packages/sage/libs/singular/groebner_strategy.pyx  # 40 doctests failed\n```\nThat one is ok\n\n```\nsage -t --long /usr/lib64/python2.7/site-packages/sage/interfaces/singular.py\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/interfaces/singular.py\", line 1088, in sage.interfaces.singular.Singular.set_ring\nFailed example:\n    singular.current_ring()\nExpected:\n    polynomial ring, over a field, local/mixed ordering\n    //   characteristic : 7\n    //   number of vars : 2\n    //        block   1 : ordering ds\n    //                  : names    a b\n    //        block   2 : ordering C\nGot:\n    polynomial ring, over a field, local ordering\n    //   characteristic : 7\n    //   number of vars : 2\n    //        block   1 : ordering ds\n    //                  : names    a b\n    //        block   2 : ordering C\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/interfaces/singular.py\", line 1997, in sage.interfaces.singular.SingularElement.set_ring\nFailed example:\n    singular.current_ring()\nExpected:\n    polynomial ring, over a field, local/mixed ordering\n    //   characteristic : 7\n    //   number of vars : 2\n    //        block   1 : ordering ds\n    //                  : names    a b\n    //        block   2 : ordering C\nGot:\n    polynomial ring, over a field, local ordering\n    //   characteristic : 7\n    //   number of vars : 2\n    //        block   1 : ordering ds\n    //                  : names    a b\n    //        block   2 : ordering C\n**********************************************************************\n2 items had failures:\n   1 of   6 in sage.interfaces.singular.Singular.set_ring\n   1 of   6 in sage.interfaces.singular.SingularElement.set_ring\n```\nBut a lot of problem seem to go back to `libs/singular/function.pyx`\n\n```\nsage -t --long /usr/lib64/python2.7/site-packages/sage/libs/singular/function.pyx\n**********************************************************************\nFile \"/usr/lib64/python2.7/site-packages/sage/libs/singular/function.pyx\", line 307, in sage.libs.singular.function.Resolution.__init__\nFailed example:\n    resolution = mres(M, 0)\nException raised:\n    Traceback (most recent call last):\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 501, in _run\n        self.compile_and_execute(example, compiler, test.globs)\n      File \"/usr/lib64/python2.7/site-packages/sage/doctest/forker.py\", line 864, in compile_and_execute\n        exec(compiled, globs)\n      File \"<doctest sage.libs.singular.function.Resolution.__init__[6]>\", line 1, in <module>\n        resolution = mres(M, Integer(0))\n      File \"sage/libs/singular/function.pyx\", line 1323, in sage.libs.singular.function.SingularFunction.__call__ (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9$\n        return call_function(self, args, ring, interruptible, attributes)\n      File \"sage/libs/singular/function.pyx\", line 1500, in sage.libs.singular.function.call_function (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9999/src-pyth$\n        with opt_ctx: # we are preserving the global options state here\n      File \"sage/libs/singular/function.pyx\", line 1502, in sage.libs.singular.function.call_function (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9999/src-pyth$\n        sig_on()\n      File \"src/cysignals/signals.pyx\", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1448)\n    SignalError: Segmentation fault\n**********************************************************************\n```\nAnd more in the same style that go to the `with opt_ctx: # we are preserving the global options state here` line before segfaulting. There are a few other original one but fixing the above would considerably reduce the number of failure all over the place.\n\nIdeas?",
    "created_at": "2016-10-22T22:08:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318511",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:11" align="right">comment:11</div>

I did some experiments, starting with upgrading `singular` to 4.0.3p4 (without touching `ntl`)  on top of 7.5.beta0, since it contains the fix for `ntl` 10+. The plan was to change one thing at a time. You would think that it being just a patch level, it would be straightforward. Well so much for that

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/modular/modform_hecketriangle/graded_ring_element.py  # 52 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/asymptotic/asymptotics_multivariate_generating_functions.py  # 29 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/modular/modform_hecketriangle/readme.py  # 10 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/schemes/generic/algebraic_scheme.py  # 9 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/schemes/curves/projective_curve.py  # 15 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_ideal.py  # 70 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/modular/modform_hecketriangle/abstract_ring.py  # 7 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/tests/french_book/mpoly.py  # 14 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_sequence.py  # 6 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/interfaces/singular.py  # 2 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/matrix/matrix_sparse.pyx  # 3 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/schemes/curves/affine_curve.py  # 15 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/algebras/commutative_dga.py  # 366 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/algebras/free_algebra.py  # 10 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/geometry/polyhedron/palp_database.py  # 1 doctest failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/multi_polynomial_libsingular.pyx  # 2 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/rings/polynomial/plural.pyx  # 367 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/libs/singular/function.pyx  # 22 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/schemes/projective/projective_space.py  # 4 doctests failed
sage -t --long /usr/lib64/python2.7/site-packages/sage/libs/singular/groebner_strategy.pyx  # 40 doctests failed
```
That one is ok

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/interfaces/singular.py
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/interfaces/singular.py", line 1088, in sage.interfaces.singular.Singular.set_ring
Failed example:
    singular.current_ring()
Expected:
    polynomial ring, over a field, local/mixed ordering
    //   characteristic : 7
    //   number of vars : 2
    //        block   1 : ordering ds
    //                  : names    a b
    //        block   2 : ordering C
Got:
    polynomial ring, over a field, local ordering
    //   characteristic : 7
    //   number of vars : 2
    //        block   1 : ordering ds
    //                  : names    a b
    //        block   2 : ordering C
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/interfaces/singular.py", line 1997, in sage.interfaces.singular.SingularElement.set_ring
Failed example:
    singular.current_ring()
Expected:
    polynomial ring, over a field, local/mixed ordering
    //   characteristic : 7
    //   number of vars : 2
    //        block   1 : ordering ds
    //                  : names    a b
    //        block   2 : ordering C
Got:
    polynomial ring, over a field, local ordering
    //   characteristic : 7
    //   number of vars : 2
    //        block   1 : ordering ds
    //                  : names    a b
    //        block   2 : ordering C
**********************************************************************
2 items had failures:
   1 of   6 in sage.interfaces.singular.Singular.set_ring
   1 of   6 in sage.interfaces.singular.SingularElement.set_ring
```
But a lot of problem seem to go back to `libs/singular/function.pyx`

```
sage -t --long /usr/lib64/python2.7/site-packages/sage/libs/singular/function.pyx
**********************************************************************
File "/usr/lib64/python2.7/site-packages/sage/libs/singular/function.pyx", line 307, in sage.libs.singular.function.Resolution.__init__
Failed example:
    resolution = mres(M, 0)
Exception raised:
    Traceback (most recent call last):
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 501, in _run
        self.compile_and_execute(example, compiler, test.globs)
      File "/usr/lib64/python2.7/site-packages/sage/doctest/forker.py", line 864, in compile_and_execute
        exec(compiled, globs)
      File "<doctest sage.libs.singular.function.Resolution.__init__[6]>", line 1, in <module>
        resolution = mres(M, Integer(0))
      File "sage/libs/singular/function.pyx", line 1323, in sage.libs.singular.function.SingularFunction.__call__ (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9$
        return call_function(self, args, ring, interruptible, attributes)
      File "sage/libs/singular/function.pyx", line 1500, in sage.libs.singular.function.call_function (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9999/src-pyth$
        with opt_ctx: # we are preserving the global options state here
      File "sage/libs/singular/function.pyx", line 1502, in sage.libs.singular.function.call_function (/scratch2/portage/sci-mathematics/sage-9999/work/sage-9999/src-pyth$
        sig_on()
      File "src/cysignals/signals.pyx", line 108, in cysignals.signals.sig_raise_exception (build/src/cysignals/signals.c:1448)
    SignalError: Segmentation fault
**********************************************************************
```
And more in the same style that go to the `with opt_ctx: # we are preserving the global options state here` line before segfaulting. There are a few other original one but fixing the above would considerably reduce the number of failure all over the place.

Ideas?



---

archive/issue_comments_318512.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nNo ideas... I'll have to try the new upstream tarball.",
    "created_at": "2016-10-24T11:47:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318512",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:12" align="right">comment:12</div>

No ideas... I'll have to try the new upstream tarball.



---

archive/issue_comments_318513.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nSee #21631.",
    "created_at": "2016-10-24T13:07:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318513",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:13" align="right">comment:13</div>

See #21631.



---

archive/issue_comments_318514.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAdding https://github.com/Singular/Sources/commit/861b7899904e3bbe3e8fe49fc0dd11ef9f5f238e to singular 4.0.3p4, I was able to compile sage-on-gentoo with ntl-10.1.0. A doc test run didn't reveal any failures from ntl.\nSince we are now supporting C++11 should we enable threads in ntl (this requires C++11)?",
    "created_at": "2016-10-31T07:39:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318514",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

Adding https://github.com/Singular/Sources/commit/861b7899904e3bbe3e8fe49fc0dd11ef9f5f238e to singular 4.0.3p4, I was able to compile sage-on-gentoo with ntl-10.1.0. A doc test run didn't reveal any failures from ntl.
Since we are now supporting C++11 should we enable threads in ntl (this requires C++11)?



---

archive/issue_comments_318515.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nAm I understanding you correctly that we require a C++11 compiler? If so, then I think we should enable threads. If it is something we check at configure-time, then I would say we should extend that to NTL as well.",
    "created_at": "2016-10-31T14:50:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318515",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:15" align="right">comment:15</div>

Am I understanding you correctly that we require a C++11 compiler? If so, then I think we should enable threads. If it is something we check at configure-time, then I would say we should extend that to NTL as well.



---

archive/issue_comments_318516.json:
```json
{
    "body": "Changed commit from **[`d10b2e0`](https://github.com/sagemath/sagetrac-mirror/commit/d10b2e0f04e0f08fadee94a17849b4cb6040ba34)** to **[`f4fd671`](https://github.com/sagemath/sagetrac-mirror/commit/f4fd671350d67eaf334a195b086a25777553c38b)**",
    "created_at": "2016-10-31T15:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318516",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`d10b2e0`](https://github.com/sagemath/sagetrac-mirror/commit/d10b2e0f04e0f08fadee94a17849b4cb6040ba34)** to **[`f4fd671`](https://github.com/sagemath/sagetrac-mirror/commit/f4fd671350d67eaf334a195b086a25777553c38b)**



---

archive/issue_comments_318517.json:
```json
{
    "body": "<div id=\"comment:16\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4378994d331a5c09cf12a14dec2954f054571d79\"><code>4378994</code></a></td><td><code>Update singular to 4.0.3p4.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8\"><code>b191d91</code></a></td><td><code>Don't clean up args to singular function without a ring set.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16\"><code>657fac9</code></a></td><td><code>Different Singular printing for ordering.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee\"><code>eef0dc4</code></a></td><td><code>Use Singular p_WDegree for weighted degree.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95\"><code>10b99df</code></a></td><td><code>Remove unused Singular degree related stuff.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac\"><code>ff7c145</code></a></td><td><code>Touch Singular autotools files in spkg-src.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/147b12bdceeeaf3b2751f492c47b8365e3ebf95b\"><code>147b12b</code></a></td><td><code>Merge branch 'singular4' into ntl10</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3484f58fd5d1f5b2f988035b93b0f421cd90dafa\"><code>3484f58</code></a></td><td><code>Update NTL to 10.1.0.</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f4fd671350d67eaf334a195b086a25777553c38b\"><code>f4fd671</code></a></td><td><code>Patch Singular 4 to build against NTL 10+.</code></td></tr></table>\n",
    "created_at": "2016-10-31T15:59:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318517",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:16"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4378994d331a5c09cf12a14dec2954f054571d79"><code>4378994</code></a></td><td><code>Update singular to 4.0.3p4.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b191d91876f6a5fb20a9c67c5ba19ed992b017a8"><code>b191d91</code></a></td><td><code>Don't clean up args to singular function without a ring set.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/657fac98979ec0c04ae06935c095441673dffc16"><code>657fac9</code></a></td><td><code>Different Singular printing for ordering.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/eef0dc45ee2cb571a9117d1cde5b63aa12747fee"><code>eef0dc4</code></a></td><td><code>Use Singular p_WDegree for weighted degree.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/10b99dfed109be4ea19b16a5634f9cdf298c6a95"><code>10b99df</code></a></td><td><code>Remove unused Singular degree related stuff.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ff7c1454df01c878a7b1e4b06be3a1191c5ac6ac"><code>ff7c145</code></a></td><td><code>Touch Singular autotools files in spkg-src.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/147b12bdceeeaf3b2751f492c47b8365e3ebf95b"><code>147b12b</code></a></td><td><code>Merge branch 'singular4' into ntl10</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3484f58fd5d1f5b2f988035b93b0f421cd90dafa"><code>3484f58</code></a></td><td><code>Update NTL to 10.1.0.</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f4fd671350d67eaf334a195b086a25777553c38b"><code>f4fd671</code></a></td><td><code>Patch Singular 4 to build against NTL 10+.</code></td></tr></table>




---

archive/issue_comments_318518.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,6 +1,3 @@\n-Use repackaged tarball at:\n-* https://perso.telecom-paristech.fr/~flori/ntl-10.0.0.tar.bz2\n+Use upstream tarball at:\n+* http://www.shoup.net/ntl/ntl-10.1.0.tar.gz\n \n-(Original upstream tarball at:\n-* http://www.shoup.net/ntl/ntl-10.0.0.tar.gz\n-)\n``````\n",
    "created_at": "2016-10-31T16:02:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318518",
    "user": "https://github.com/jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,6 +1,3 @@
-Use repackaged tarball at:
-* https://perso.telecom-paristech.fr/~flori/ntl-10.0.0.tar.bz2
+Use upstream tarball at:
+* http://www.shoup.net/ntl/ntl-10.1.0.tar.gz
 
-(Original upstream tarball at:
-* http://www.shoup.net/ntl/ntl-10.0.0.tar.gz
-)
``````




---

archive/issue_events_301523.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-31T16:02:02Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301523"
}
```



---

archive/issue_events_301524.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-31T16:02:02Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301524"
}
```



---

archive/issue_events_301525.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-31T16:02:02Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "title_is": "Upate NTL to 10.1.0",
    "title_was": "Upate NTL to 10.0.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301525"
}
```



---

archive/issue_comments_318519.json:
```json
{
    "body": "Dependencies: **#21631**",
    "created_at": "2016-10-31T16:02:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318519",
    "user": "https://github.com/jpflori"
}
```

Dependencies: **#21631**



---

archive/issue_comments_318520.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nUpdate to 10.1.0. The upstream tarball is no longer repackaged.\nI merged #21631, that was surely unnecessary, but it's done.\n\nEnabling threads vould wait for another ticket?\nOr do we really think it will caue no problems?",
    "created_at": "2016-10-31T16:02:02Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318520",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:17" align="right">comment:17</div>

Update to 10.1.0. The upstream tarball is no longer repackaged.
I merged #21631, that was surely unnecessary, but it's done.

Enabling threads vould wait for another ticket?
Or do we really think it will caue no problems?



---

archive/issue_comments_318521.json:
```json
{
    "body": "<div id=\"comment:18\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4a75735aac6e5687403d57558cb5c8a3b62ca0f0\"><code>4a75735</code></a></td><td><code>Remove NTL spkg-src script, we now use the upstream tarball.</code></td></tr></table>\n",
    "created_at": "2016-10-31T16:02:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318521",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:18"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4a75735aac6e5687403d57558cb5c8a3b62ca0f0"><code>4a75735</code></a></td><td><code>Remove NTL spkg-src script, we now use the upstream tarball.</code></td></tr></table>




---

archive/issue_comments_318522.json:
```json
{
    "body": "Changed commit from **[`f4fd671`](https://github.com/sagemath/sagetrac-mirror/commit/f4fd671350d67eaf334a195b086a25777553c38b)** to **[`4a75735`](https://github.com/sagemath/sagetrac-mirror/commit/4a75735aac6e5687403d57558cb5c8a3b62ca0f0)**",
    "created_at": "2016-10-31T16:02:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318522",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`f4fd671`](https://github.com/sagemath/sagetrac-mirror/commit/f4fd671350d67eaf334a195b086a25777553c38b)** to **[`4a75735`](https://github.com/sagemath/sagetrac-mirror/commit/4a75735aac6e5687403d57558cb5c8a3b62ca0f0)**



---

archive/issue_events_301526.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-31T16:04:32Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301526"
}
```



---

archive/issue_events_301527.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-10-31T16:04:32Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "milestone_number": null,
    "milestone_title": "sage-7.5",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301527"
}
```



---

archive/issue_comments_318523.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI wouldn't think threads would create much problems in themselves. The main problem is that all ntl dependencies needs to use a c++11 compiler. It may actually deserve another ticket because we may have to touch the sage library itself on a few key files and that's better done separately.\nThe other possible trouble is increased random failures in parallel doctesting because the machine is over-subscribed.",
    "created_at": "2016-10-31T19:05:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318523",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:20" align="right">comment:20</div>

I wouldn't think threads would create much problems in themselves. The main problem is that all ntl dependencies needs to use a c++11 compiler. It may actually deserve another ticket because we may have to touch the sage library itself on a few key files and that's better done separately.
The other possible trouble is increased random failures in parallel doctesting because the machine is over-subscribed.



---

archive/issue_comments_318524.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nI would just try it and see what breaks. If it works, then we can include it in; if it requires significant work, then we cut that off as the starting point for a new ticket.\n\nI can't say anything about possible increased random failures.",
    "created_at": "2016-10-31T23:44:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318524",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:21" align="right">comment:21</div>

I would just try it and see what breaks. If it works, then we can include it in; if it requires significant work, then we cut that off as the starting point for a new ticket.

I can't say anything about possible increased random failures.



---

archive/issue_comments_318525.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nOK making an attempt.",
    "created_at": "2016-11-01T00:01:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318525",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:22" align="right">comment:22</div>

OK making an attempt.



---

archive/issue_comments_318526.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\n`flint` doesn't default to c++11 for its `ntl` interface. That can easily be fixed at the spkg-install level. But by default it fails. Forgot about `flint`.",
    "created_at": "2016-11-01T00:24:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318526",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:23" align="right">comment:23</div>

`flint` doesn't default to c++11 for its `ntl` interface. That can easily be fixed at the spkg-install level. But by default it fails. Forgot about `flint`.



---

archive/issue_comments_318527.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nOK, anything that includes `ntlwrap.h` needs to have a `-std=c++11` flag added to it. Let's save that for later.",
    "created_at": "2016-11-01T02:53:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318527",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:24" align="right">comment:24</div>

OK, anything that includes `ntlwrap.h` needs to have a `-std=c++11` flag added to it. Let's save that for later.



---

archive/issue_events_301528.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-11-01T08:27:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301528"
}
```



---

archive/issue_events_301529.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2016-11-01T08:27:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301529"
}
```



---

archive/issue_comments_318528.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI should have put positive review earlier, lgtm :)",
    "created_at": "2016-11-01T08:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318528",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:25" align="right">comment:25</div>

I should have put positive review earlier, lgtm :)



---

archive/issue_comments_318529.json:
```json
{
    "body": "Reviewer: **Fran\u00e7ois Bissey**",
    "created_at": "2016-11-01T08:27:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318529",
    "user": "https://github.com/kiwifb"
}
```

Reviewer: **François Bissey**



---

archive/issue_comments_318530.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\n\n```\n[ntl-10.1.0] Running the test suite for ntl-10.1.0...\n[ntl-10.1.0] ./spkg-check: line 3: cd: src/ntl/src: No such file or directory\n```",
    "created_at": "2016-11-03T23:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318530",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:26" align="right">comment:26</div>


```
[ntl-10.1.0] Running the test suite for ntl-10.1.0...
[ntl-10.1.0] ./spkg-check: line 3: cd: src/ntl/src: No such file or directory
```



---

archive/issue_events_301530.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-03T23:19:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301530"
}
```



---

archive/issue_events_301531.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-03T23:19:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301531"
}
```



---

archive/issue_comments_318531.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nEmbarrassing... From what I can see in `spkg-install` `src/ntl/src` should be replaced by `src/src`.",
    "created_at": "2016-11-04T07:12:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318531",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:27" align="right">comment:27</div>

Embarrassing... From what I can see in `spkg-install` `src/ntl/src` should be replaced by `src/src`.



---

archive/issue_comments_318532.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\n4.0.3p5 is out and has the ntl patch do we move along while fixing the tests?",
    "created_at": "2016-11-07T02:14:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318532",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:28" align="right">comment:28</div>

4.0.3p5 is out and has the ntl patch do we move along while fixing the tests?



---

archive/issue_comments_318533.json:
```json
{
    "body": "<div id=\"comment:29\" align=\"right\">comment:29</div>\n\nWrong ticket...",
    "created_at": "2016-11-07T02:37:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318533",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:29" align="right">comment:29</div>

Wrong ticket...



---

archive/issue_comments_318534.json:
```json
{
    "body": "<div id=\"comment:30\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/091862e2f891dc4f5144ad6fedb66ad6bfafe2fd\"><code>091862e</code></a></td><td><code>Update NTL's spkg-src script with new dir.</code></td></tr></table>\n",
    "created_at": "2016-11-07T10:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318534",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:30"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/091862e2f891dc4f5144ad6fedb66ad6bfafe2fd"><code>091862e</code></a></td><td><code>Update NTL's spkg-src script with new dir.</code></td></tr></table>




---

archive/issue_comments_318535.json:
```json
{
    "body": "Changed commit from **[`4a75735`](https://github.com/sagemath/sagetrac-mirror/commit/4a75735aac6e5687403d57558cb5c8a3b62ca0f0)** to **[`091862e`](https://github.com/sagemath/sagetrac-mirror/commit/091862e2f891dc4f5144ad6fedb66ad6bfafe2fd)**",
    "created_at": "2016-11-07T10:29:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318535",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`4a75735`](https://github.com/sagemath/sagetrac-mirror/commit/4a75735aac6e5687403d57558cb5c8a3b62ca0f0)** to **[`091862e`](https://github.com/sagemath/sagetrac-mirror/commit/091862e2f891dc4f5144ad6fedb66ad6bfafe2fd)**



---

archive/issue_events_301532.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-11-07T10:30:36Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301532"
}
```



---

archive/issue_events_301533.json:
```json
{
    "actor": "https://github.com/jpflori",
    "created_at": "2016-11-07T10:30:36Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301533"
}
```



---

archive/issue_comments_318536.json:
```json
{
    "body": "<div id=\"comment:31\" align=\"right\">comment:31</div>\n\nTrivial change, I put this back to positive review.\nSorry for missing that change before.",
    "created_at": "2016-11-07T10:30:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318536",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:31" align="right">comment:31</div>

Trivial change, I put this back to positive review.
Sorry for missing that change before.



---

archive/issue_comments_318537.json:
```json
{
    "body": "Changed branch from **[public/ntl10](https://github.com/sagemath/sagetrac-mirror/tree/public/ntl10)** to **[`091862e`](https://github.com/sagemath/sagetrac-mirror/commit/091862e2f891dc4f5144ad6fedb66ad6bfafe2fd)**",
    "created_at": "2016-11-08T23:42:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21676#issuecomment-318537",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/ntl10](https://github.com/sagemath/sagetrac-mirror/tree/public/ntl10)** to **[`091862e`](https://github.com/sagemath/sagetrac-mirror/commit/091862e2f891dc4f5144ad6fedb66ad6bfafe2fd)**



---

archive/issue_events_301534.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-08T23:42:20Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301534"
}
```



---

archive/issue_events_301535.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "1d0338662cbd45c54a3fa4f3fa1a6e337bfbc1fa",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-11-08T23:42:20Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21676",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21676#event-301535"
}
```
