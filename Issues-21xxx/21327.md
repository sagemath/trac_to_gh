# Issue 21327: fix/improve linbox binding

archive/issues_021090.json:
```json
{
    "assignees": [],
    "body": "Linbox has a sage interface, exploited by sage's linbox interface. This unpleasant situation (upstream had to be modified to fit inside sage) was necessary: Linbox is a C++ library heavily using templates, and at that time Cython was not capable of handling C++ libraries. Thus a C-only interface had to be built into LinBox.\n\nCython has improved, and sage's linbox binding should now be capable of accessing LinBox directly, removing the need for a dedicated interface upstream.\n\nThere is a problem that IML conflicts with linbox: \u200bhttps://github.com/linbox-team/linbox/issues/35\n\nDepends on #21321\nDepends on #21341\n\nCC:  @ClementPernet\n\nKeywords: **sd75**\n\nBranch/Commit: **[u/Bouillaguet/linbox_cpp](https://github.com/sagemath/sagetrac-mirror/tree/u/Bouillaguet/linbox_cpp) @ [6fbe826](https://github.com/sagemath/sagetrac-mirror/commit/6fbe826126cc4442208bf9e688acd14de3d54994)**\n\nUpstream: **Reported upstream. No feedback yet.**\n\nAuthor: **Charles Bouillaguet**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21327_\n\n",
    "created_at": "2016-08-24T15:24:07Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "fix/improve linbox binding",
    "type": "issue",
    "updated_at": "2022-12-29T01:37:14Z",
    "url": "https://github.com/sagemath/sage/issues/21327",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```
Linbox has a sage interface, exploited by sage's linbox interface. This unpleasant situation (upstream had to be modified to fit inside sage) was necessary: Linbox is a C++ library heavily using templates, and at that time Cython was not capable of handling C++ libraries. Thus a C-only interface had to be built into LinBox.

Cython has improved, and sage's linbox binding should now be capable of accessing LinBox directly, removing the need for a dedicated interface upstream.

There is a problem that IML conflicts with linbox: ​https://github.com/linbox-team/linbox/issues/35

Depends on #21321
Depends on #21341

CC:  @ClementPernet

Keywords: **sd75**

Branch/Commit: **[u/Bouillaguet/linbox_cpp](https://github.com/sagemath/sagetrac-mirror/tree/u/Bouillaguet/linbox_cpp) @ [6fbe826](https://github.com/sagemath/sagetrac-mirror/commit/6fbe826126cc4442208bf9e688acd14de3d54994)**

Upstream: **Reported upstream. No feedback yet.**

Author: **Charles Bouillaguet**

_Issue created by migration from https://trac.sagemath.org/ticket/21327_





---

archive/issue_events_281809.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-08-24T15:24:07Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281809"
}
```



---

archive/issue_events_281810.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-08-24T15:24:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20interfaces",
    "label_color": "0000ff",
    "label_name": "component: interfaces",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281810"
}
```



---

archive/issue_events_281811.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-08-24T15:24:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281811"
}
```



---

archive/issue_events_281812.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-08-24T15:24:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281812"
}
```



---

archive/issue_comments_314618.json:
```json
{
    "body": "Branch: **[u/Bouillaguet/linbox_cpp](https://github.com/sagemath/sagetrac-mirror/tree/u/Bouillaguet/linbox_cpp)**",
    "created_at": "2016-08-24T15:40:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314618",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

Branch: **[u/Bouillaguet/linbox_cpp](https://github.com/sagemath/sagetrac-mirror/tree/u/Bouillaguet/linbox_cpp)**



---

archive/issue_comments_314619.json:
```json
{
    "body": "Commit: **[774253f](https://github.com/sagemath/sagetrac-mirror/commit/774253f17313501205ca8b8aa767d6a12b235575)**",
    "created_at": "2016-08-24T15:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314619",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

Commit: **[774253f](https://github.com/sagemath/sagetrac-mirror/commit/774253f17313501205ca8b8aa767d6a12b235575)**



---

archive/issue_comments_314620.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nLast 10 new commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/ef6eece2d2af448299a6bc5b04bdf1363ad557d9\">ef6eece</a></td><td><code>fixed vector_integer_sparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f0c88db627b31198b630d0f719564e564396ff5e\">f0c88db</a></td><td><code>convert modules/vector_modn_sparse.pxi</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/2d7ee590bee822e85b6897f59583d72674f41570\">2d7ee59</a></td><td><code>Merge branch 'modules_pxi_must_die_hard' into develop</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a32caee5c84af293b597434ef5c4449e722ca28e\">a32caee</a></td><td><code>fixed vector_modn_sparse</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8cc364438a9b93d5f8fdbce2b376fb33b18e5468\">8cc3644</a></td><td><code>added some C++ bindings to linbox interface</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fb5e3b273546baa827797dbaec3893b1297a0bb\">6fb5e3b</a></td><td><code>linbox: added declaration of Modular<int> field</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/218ae9371a1166d99a0610001b0d67a9232780d8\">218ae93</a></td><td><code>linbox-sage interface: notes for later</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b34482a0758637a1f3cfdffd116c7f332192f484\">b34482a</a></td><td><code>linbox-sage interface: declaring more C++ linbox operations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/1016f800e1a8ec7b7669fbac2866fd7b907e326f\">1016f80</a></td><td><code>more Linbox declarations</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/774253f17313501205ca8b8aa767d6a12b235575\">774253f</a></td><td><code>trying to generate a LinBox matrix inside Sage</code></td></tr></table>\n",
    "created_at": "2016-08-24T15:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314620",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

<a id='comment:2'>Comment 2:</a>
Last 10 new commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/ef6eece2d2af448299a6bc5b04bdf1363ad557d9">ef6eece</a></td><td><code>fixed vector_integer_sparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f0c88db627b31198b630d0f719564e564396ff5e">f0c88db</a></td><td><code>convert modules/vector_modn_sparse.pxi</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/2d7ee590bee822e85b6897f59583d72674f41570">2d7ee59</a></td><td><code>Merge branch 'modules_pxi_must_die_hard' into develop</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a32caee5c84af293b597434ef5c4449e722ca28e">a32caee</a></td><td><code>fixed vector_modn_sparse</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8cc364438a9b93d5f8fdbce2b376fb33b18e5468">8cc3644</a></td><td><code>added some C++ bindings to linbox interface</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fb5e3b273546baa827797dbaec3893b1297a0bb">6fb5e3b</a></td><td><code>linbox: added declaration of Modular<int> field</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/218ae9371a1166d99a0610001b0d67a9232780d8">218ae93</a></td><td><code>linbox-sage interface: notes for later</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b34482a0758637a1f3cfdffd116c7f332192f484">b34482a</a></td><td><code>linbox-sage interface: declaring more C++ linbox operations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/1016f800e1a8ec7b7669fbac2866fd7b907e326f">1016f80</a></td><td><code>more Linbox declarations</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/774253f17313501205ca8b8aa767d6a12b235575">774253f</a></td><td><code>trying to generate a LinBox matrix inside Sage</code></td></tr></table>




---

archive/issue_comments_314621.json:
```json
{
    "body": "Changed keywords from **** to **sd75**",
    "created_at": "2016-08-24T15:48:14Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314621",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

Changed keywords from **** to **sd75**



---

archive/issue_comments_314622.json:
```json
{
    "body": "Changed branch from **[u/Bouillaguet/linbox_cpp](https://github.com/sagemath/sagetrac-mirror/tree/u/Bouillaguet/linbox_cpp)** to none",
    "created_at": "2016-08-25T07:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314622",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

Changed branch from **[u/Bouillaguet/linbox_cpp](https://github.com/sagemath/sagetrac-mirror/tree/u/Bouillaguet/linbox_cpp)** to none



---

archive/issue_comments_314623.json:
```json
{
    "body": "Changed commit from **[774253f](https://github.com/sagemath/sagetrac-mirror/commit/774253f17313501205ca8b8aa767d6a12b235575)** to none",
    "created_at": "2016-08-25T07:16:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314623",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

Changed commit from **[774253f](https://github.com/sagemath/sagetrac-mirror/commit/774253f17313501205ca8b8aa767d6a12b235575)** to none



---

archive/issue_comments_314624.json:
```json
{
    "body": "Branch: **[u/Bouillaguet/linbox_cpp](https://github.com/sagemath/sagetrac-mirror/tree/u/Bouillaguet/linbox_cpp)**",
    "created_at": "2016-08-25T07:25:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314624",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

Branch: **[u/Bouillaguet/linbox_cpp](https://github.com/sagemath/sagetrac-mirror/tree/u/Bouillaguet/linbox_cpp)**



---

archive/issue_comments_314625.json:
```json
{
    "body": "Commit: **[29b6d1e](https://github.com/sagemath/sagetrac-mirror/commit/29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197)**",
    "created_at": "2016-08-25T10:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314625",
    "user": "https://github.com/sagetrac-git"
}
```

Commit: **[29b6d1e](https://github.com/sagemath/sagetrac-mirror/commit/29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197)**



---

archive/issue_comments_314626.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6addf0c15429fe80345bc1f0c4aeea24c73cad07\">6addf0c</a></td><td><code>could declare and call rank</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197\">29b6d1e</a></td><td><code>substituted direct-rank call to the old rank-wrapper one</code></td></tr></table>\n",
    "created_at": "2016-08-25T10:40:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314626",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:6'>Comment 6:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6addf0c15429fe80345bc1f0c4aeea24c73cad07">6addf0c</a></td><td><code>could declare and call rank</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197">29b6d1e</a></td><td><code>substituted direct-rank call to the old rank-wrapper one</code></td></tr></table>




---

archive/issue_comments_314627.json:
```json
{
    "body": "Changed dependencies from **#21321** to **#21321,#21341**",
    "created_at": "2016-08-26T07:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314627",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

Changed dependencies from **#21321** to **#21321,#21341**



---

archive/issue_comments_314628.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3a77514e1993b45d03df390e44c28350b3490652\">3a77514</a></td><td><code>Improve LinBox C++ bindings</code></td></tr></table>\n",
    "created_at": "2016-09-05T15:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314628",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:8'>Comment 8:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3a77514e1993b45d03df390e44c28350b3490652">3a77514</a></td><td><code>Improve LinBox C++ bindings</code></td></tr></table>




---

archive/issue_comments_314629.json:
```json
{
    "body": "Changed commit from **[29b6d1e](https://github.com/sagemath/sagetrac-mirror/commit/29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197)** to **[3a77514](https://github.com/sagemath/sagetrac-mirror/commit/3a77514e1993b45d03df390e44c28350b3490652)**",
    "created_at": "2016-09-05T15:36:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314629",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[29b6d1e](https://github.com/sagemath/sagetrac-mirror/commit/29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197)** to **[3a77514](https://github.com/sagemath/sagetrac-mirror/commit/3a77514e1993b45d03df390e44c28350b3490652)**



---

archive/issue_events_281813.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-09-05T15:37:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281813"
}
```



---

archive/issue_comments_314630.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nJust a quick comment for now: this branch contains a lot of commented-out code that I don't see the point of. Also several TODO's where it is not clear why you cannot just do them. It is OK to have a TODO, but you should comment them better.",
    "created_at": "2016-09-05T21:18:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314630",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'>Comment 10:</a>
Just a quick comment for now: this branch contains a lot of commented-out code that I don't see the point of. Also several TODO's where it is not clear why you cannot just do them. It is OK to have a TODO, but you should comment them better.



---

archive/issue_events_281814.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-09-06T03:24:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281814"
}
```



---

archive/issue_events_281815.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-09-06T03:24:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281815"
}
```



---

archive/issue_comments_314631.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nOK, Giavro/linbox/fflas have been updated in an incompatible way.",
    "created_at": "2016-09-06T03:24:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314631",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

<a id='comment:11'>Comment 11:</a>
OK, Giavro/linbox/fflas have been updated in an incompatible way.



---

archive/issue_comments_314632.json:
```json
{
    "body": "Changed commit from **[3a77514](https://github.com/sagemath/sagetrac-mirror/commit/3a77514e1993b45d03df390e44c28350b3490652)** to **[37ca132](https://github.com/sagemath/sagetrac-mirror/commit/37ca132c3983ed31e9f601426382dd0b21f7b284)**",
    "created_at": "2016-09-16T08:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314632",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[3a77514](https://github.com/sagemath/sagetrac-mirror/commit/3a77514e1993b45d03df390e44c28350b3490652)** to **[37ca132](https://github.com/sagemath/sagetrac-mirror/commit/37ca132c3983ed31e9f601426382dd0b21f7b284)**



---

archive/issue_comments_314633.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/b800be02bd0b43aa681adcff7b203327cfd1c215\">b800be0</a></td><td><code>Improve LinBox C++ bindings</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/37ca132c3983ed31e9f601426382dd0b21f7b284\">37ca132</a></td><td><code>Rebased onto Linbox 1.4.2</code></td></tr></table>\n",
    "created_at": "2016-09-16T08:23:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314633",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:12'>Comment 12:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/b800be02bd0b43aa681adcff7b203327cfd1c215">b800be0</a></td><td><code>Improve LinBox C++ bindings</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/37ca132c3983ed31e9f601426382dd0b21f7b284">37ca132</a></td><td><code>Rebased onto Linbox 1.4.2</code></td></tr></table>




---

archive/issue_comments_314634.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nRebased onto new versions of Givaro/Linbox/etc. Ready for review.",
    "created_at": "2016-09-16T08:23:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314634",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

<a id='comment:13'>Comment 13:</a>
Rebased onto new versions of Givaro/Linbox/etc. Ready for review.



---

archive/issue_events_281816.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-09-16T08:23:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281816"
}
```



---

archive/issue_events_281817.json:
```json
{
    "actor": "https://github.com/sagetrac-Bouillaguet",
    "created_at": "2016-09-16T08:23:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281817"
}
```



---

archive/issue_comments_314635.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/549e9e86d14d9f73cf0375be65f80f1191fa52c9\">549e9e8</a></td><td><code>got rid of Givaro's horrible SpyInteger workaround</code></td></tr></table>\n",
    "created_at": "2016-09-16T09:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314635",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:14'>Comment 14:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/549e9e86d14d9f73cf0375be65f80f1191fa52c9">549e9e8</a></td><td><code>got rid of Givaro's horrible SpyInteger workaround</code></td></tr></table>




---

archive/issue_comments_314636.json:
```json
{
    "body": "Changed commit from **[37ca132](https://github.com/sagemath/sagetrac-mirror/commit/37ca132c3983ed31e9f601426382dd0b21f7b284)** to **[549e9e8](https://github.com/sagemath/sagetrac-mirror/commit/549e9e86d14d9f73cf0375be65f80f1191fa52c9)**",
    "created_at": "2016-09-16T09:05:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314636",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[37ca132](https://github.com/sagemath/sagetrac-mirror/commit/37ca132c3983ed31e9f601426382dd0b21f7b284)** to **[549e9e8](https://github.com/sagemath/sagetrac-mirror/commit/549e9e86d14d9f73cf0375be65f80f1191fa52c9)**



---

archive/issue_comments_314637.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nPlease remove silly commented-out code like\n\n```\n# ``this`` should replace:\n#from libcpp.vector cimport vector, list\n\n# ``that``\n```\n(I have no idea what you are trying to say here)",
    "created_at": "2016-09-16T12:42:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314637",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'>Comment 15:</a>
Please remove silly commented-out code like

```
# ``this`` should replace:
#from libcpp.vector cimport vector, list

# ``that``
```
(I have no idea what you are trying to say here)



---

archive/issue_comments_314638.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/709ef92f8bcd8f409d7c46e03858d61fdc6b3671\">709ef92</a></td><td><code>remove useless comment</code></td></tr></table>\n",
    "created_at": "2016-09-16T12:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314638",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:16'>Comment 16:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/709ef92f8bcd8f409d7c46e03858d61fdc6b3671">709ef92</a></td><td><code>remove useless comment</code></td></tr></table>




---

archive/issue_comments_314639.json:
```json
{
    "body": "Changed commit from **[549e9e8](https://github.com/sagemath/sagetrac-mirror/commit/549e9e86d14d9f73cf0375be65f80f1191fa52c9)** to **[709ef92](https://github.com/sagemath/sagetrac-mirror/commit/709ef92f8bcd8f409d7c46e03858d61fdc6b3671)**",
    "created_at": "2016-09-16T12:50:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314639",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[549e9e8](https://github.com/sagemath/sagetrac-mirror/commit/549e9e86d14d9f73cf0375be65f80f1191fa52c9)** to **[709ef92](https://github.com/sagemath/sagetrac-mirror/commit/709ef92f8bcd8f409d7c46e03858d61fdc6b3671)**



---

archive/issue_comments_314640.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\n1. Trailing comma: `SparseElimination,`\n\n2. Don't put Python code in `sig_on()`. This is wrong:\n\n```\nsig_on()\nif typ == 'minpoly':\n    [...]\nsig_off()\n```\n\n3. Instead of using `<SparseMatrixGFp *> self._M` everywhere, why not declare `_M` as `SparseMatrixGFp*` (or even just `SparseMatrixGFp` if that works to avoid the explicit `del`)?",
    "created_at": "2016-09-16T13:09:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314640",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'>Comment 17:</a>
1. Trailing comma: `SparseElimination,`

2. Don't put Python code in `sig_on()`. This is wrong:

```
sig_on()
if typ == 'minpoly':
    [...]
sig_off()
```

3. Instead of using `<SparseMatrixGFp *> self._M` everywhere, why not declare `_M` as `SparseMatrixGFp*` (or even just `SparseMatrixGFp` if that works to avoid the explicit `del`)?



---

archive/issue_comments_314641.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\n3. The problem is that because of the LinBox <--> IML incompatibility, the various `*.h` files from linbox must not be pulled into `matrix_integer_dense.pyx`. Thus, they must not appear in `linbox.pxd`. This makes it impossible (or at least more contrived) to describe the type of sparse matrices in LinBox.pxd. And because the class has to be defined in `linbox.pxd`, I did not see any other solution. This is indeed a workaround.\n\nThe idea I tried to follow is that `linbox.pyx` *only* deals with linbox datastructures. The rest deals with `linbox.pyx`.",
    "created_at": "2016-09-16T13:15:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314641",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

<a id='comment:18'>Comment 18:</a>
3. The problem is that because of the LinBox <--> IML incompatibility, the various `*.h` files from linbox must not be pulled into `matrix_integer_dense.pyx`. Thus, they must not appear in `linbox.pxd`. This makes it impossible (or at least more contrived) to describe the type of sparse matrices in LinBox.pxd. And because the class has to be defined in `linbox.pxd`, I did not see any other solution. This is indeed a workaround.

The idea I tried to follow is that `linbox.pyx` *only* deals with linbox datastructures. The rest deals with `linbox.pyx`.



---

archive/issue_events_281818.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-09-16T13:39:59Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281818"
}
```



---

archive/issue_events_281819.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-09-16T13:39:59Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281819"
}
```



---

archive/issue_comments_314642.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nReplying to [Bouillaguet](#comment%3A18):\n> 3. The problem is that because of the LinBox <--> IML incompatibility, the various `*.h` files from linbox must not be pulled into `matrix_integer_dense.pyx`. Thus, they must not appear in `linbox.pxd`. This makes it impossible (or at least more contrived) to describe the type of sparse matrices in LinBox.pxd. And because the class has to be defined in `linbox.pxd`, I did not see any other solution. This is indeed a workaround.\n\n\nI would rather like to fix this problem than to workaround it.",
    "created_at": "2016-09-16T13:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314642",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'>Comment 19:</a>
Replying to [Bouillaguet](#comment%3A18):
> 3. The problem is that because of the LinBox <--> IML incompatibility, the various `*.h` files from linbox must not be pulled into `matrix_integer_dense.pyx`. Thus, they must not appear in `linbox.pxd`. This makes it impossible (or at least more contrived) to describe the type of sparse matrices in LinBox.pxd. And because the class has to be defined in `linbox.pxd`, I did not see any other solution. This is indeed a workaround.


I would rather like to fix this problem than to workaround it.



---

archive/issue_comments_314643.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n Cython has improved, and sage's linbox binding should now be capable of accessing LinBox directly, removing the need for a dedicated interface upstream.\n \n-\n+There is a problem that IML conflicts with linbox: \u200bhttps://github.com/linbox-team/linbox/issues/35\n``````\n",
    "created_at": "2016-09-16T13:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314643",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 Cython has improved, and sage's linbox binding should now be capable of accessing LinBox directly, removing the need for a dedicated interface upstream.
 
-
+There is a problem that IML conflicts with linbox: ​https://github.com/linbox-team/linbox/issues/35
``````




---

archive/issue_comments_314644.json:
```json
{
    "body": "Upstream: **Reported upstream. No feedback yet.**",
    "created_at": "2016-09-16T13:40:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314644",
    "user": "https://github.com/jdemeyer"
}
```

Upstream: **Reported upstream. No feedback yet.**



---

archive/issue_comments_314645.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6fbe826126cc4442208bf9e688acd14de3d54994\">6fbe826</a></td><td><code>reviewers comments</code></td></tr></table>\n",
    "created_at": "2016-09-16T19:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314645",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:21'>Comment 21:</a>
Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6fbe826126cc4442208bf9e688acd14de3d54994">6fbe826</a></td><td><code>reviewers comments</code></td></tr></table>




---

archive/issue_comments_314646.json:
```json
{
    "body": "Changed commit from **[709ef92](https://github.com/sagemath/sagetrac-mirror/commit/709ef92f8bcd8f409d7c46e03858d61fdc6b3671)** to **[6fbe826](https://github.com/sagemath/sagetrac-mirror/commit/6fbe826126cc4442208bf9e688acd14de3d54994)**",
    "created_at": "2016-09-16T19:48:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314646",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[709ef92](https://github.com/sagemath/sagetrac-mirror/commit/709ef92f8bcd8f409d7c46e03858d61fdc6b3671)** to **[6fbe826](https://github.com/sagemath/sagetrac-mirror/commit/6fbe826126cc4442208bf9e688acd14de3d54994)**



---

archive/issue_comments_314647.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nReplying to [@jdemeyer](#comment%3A20):\n> I would rather like to fix this problem than to workaround it.\n\nI understand, however, as you know, fixing the problem requires:\na. Fixing upstream\nb. Opening, reviewing and merging a new ticket for the new upstream package\n\nUpstream evolves slowly (the previous version in sage, 1.3.2, was released in 2012...). I'm afraid that this whole process will take a long time, and I'm worried that this ticket will stall for reasons that are beyond my control. I started working on this 3 weeks ago, and backward-incompatible changes were introduced in both the Givaro and Linbox packages, that have been upgraded in sage recently. As such, I had to figure that out when I rebased.\n\nI'd rather see this ticket go through quickly, instead of seeing it rot.",
    "created_at": "2016-09-16T19:50:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314647",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

<a id='comment:22'>Comment 22:</a>
Replying to [@jdemeyer](#comment%3A20):
> I would rather like to fix this problem than to workaround it.

I understand, however, as you know, fixing the problem requires:
a. Fixing upstream
b. Opening, reviewing and merging a new ticket for the new upstream package

Upstream evolves slowly (the previous version in sage, 1.3.2, was released in 2012...). I'm afraid that this whole process will take a long time, and I'm worried that this ticket will stall for reasons that are beyond my control. I started working on this 3 weeks ago, and backward-incompatible changes were introduced in both the Givaro and Linbox packages, that have been upgraded in sage recently. As such, I had to figure that out when I rebased.

I'd rather see this ticket go through quickly, instead of seeing it rot.



---

archive/issue_comments_314648.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nReplying to [Bouillaguet](#comment%3A22):\n> Replying to [@jdemeyer](#comment%3A20):\n> > I would rather like to fix this problem than to workaround it.\n\n> \n> I understand, however, as you know, fixing the problem requires:\n> a. Fixing upstream\n> b. Opening, reviewing and merging a new ticket for the new upstream package\n> \n> Upstream evolves slowly (the previous version in sage, 1.3.2, was released in 2012...). I'm afraid that this whole process will take a long time\n\nFor me personally, you don't have to wait for a new official upstream package. You can just add a patch to the Sage package. In https://github.com/linbox-team/linbox/issues/35 I proposed some solutions.",
    "created_at": "2016-09-16T20:13:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314648",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'>Comment 23:</a>
Replying to [Bouillaguet](#comment%3A22):
> Replying to [@jdemeyer](#comment%3A20):
> > I would rather like to fix this problem than to workaround it.

> 
> I understand, however, as you know, fixing the problem requires:
> a. Fixing upstream
> b. Opening, reviewing and merging a new ticket for the new upstream package
> 
> Upstream evolves slowly (the previous version in sage, 1.3.2, was released in 2012...). I'm afraid that this whole process will take a long time

For me personally, you don't have to wait for a new official upstream package. You can just add a patch to the Sage package. In https://github.com/linbox-team/linbox/issues/35 I proposed some solutions.



---

archive/issue_comments_314649.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nOK, I will patch it.",
    "created_at": "2016-09-17T09:55:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314649",
    "user": "https://github.com/sagetrac-Bouillaguet"
}
```

<a id='comment:24'>Comment 24:</a>
OK, I will patch it.



---

archive/issue_comments_314650.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nI applied Jeroen's patch upstream.",
    "created_at": "2016-09-19T13:26:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314650",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:25'>Comment 25:</a>
I applied Jeroen's patch upstream.



---

archive/issue_comments_314651.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nHello,\n\nI just discovered this ticket while working on #22924 (see also #22872 and [cylinbox](https://github.com/videlec/cylinbox)). My original aim was actually to use linbox for solving sparse integer systems. However, a cleanup was needed before.\n\nI will read what is in the branch `u/Bouillaguet/linbox_cpp` before going further. Charles, do you plan continuing working on it?",
    "created_at": "2017-05-03T06:45:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314651",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'>Comment 26:</a>
Hello,

I just discovered this ticket while working on #22924 (see also #22872 and [cylinbox](https://github.com/videlec/cylinbox)). My original aim was actually to use linbox for solving sparse integer systems. However, a cleanup was needed before.

I will read what is in the branch `u/Bouillaguet/linbox_cpp` before going further. Charles, do you plan continuing working on it?



---

archive/issue_comments_314652.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nOops, my bad, I should have remembered this ticket when Vincent told me about his work on #22872.",
    "created_at": "2017-05-03T07:06:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314652",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:27'>Comment 27:</a>
Oops, my bad, I should have remembered this ticket when Vincent told me about his work on #22872.



---

archive/issue_comments_314653.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nTicket #24544 will finish moving the Sage interface to LinBox inside Sage ([commit 7ec9610](https://github.com/sagemath/sagetrac-mirror/commit/7ec96109cfd54cf129d934139a5a0f006b8708dd) removes the `--enable-sage` option). I am only facing a strange missing symbol issue, see [#24554comment:8](https://github.com/sagemath/sage/issues/24544#comment:8).",
    "created_at": "2018-02-03T16:10:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21327#issuecomment-314653",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'>Comment 28:</a>
Ticket #24544 will finish moving the Sage interface to LinBox inside Sage ([commit 7ec9610](https://github.com/sagemath/sagetrac-mirror/commit/7ec96109cfd54cf129d934139a5a0f006b8708dd) removes the `--enable-sage` option). I am only facing a strange missing symbol issue, see [#24554comment:8](https://github.com/sagemath/sage/issues/24544#comment:8).



---

archive/issue_events_281820.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:37:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21327",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21327#event-281820"
}
```
