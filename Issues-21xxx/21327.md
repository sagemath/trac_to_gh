# Issue 21327: fix/improve linbox binding

archive/issues_021090.json:
```json
{
    "body": "Linbox has a sage interface, exploited by sage's linbox interface. This unpleasant situation (upstream had to be modified to fit inside sage) was necessary: Linbox is a C++ library heavily using templates, and at that time Cython was not capable of handling C++ libraries. Thus a C-only interface had to be built into LinBox.\n\nCython has improved, and sage's linbox binding should now be capable of accessing LinBox directly, removing the need for a dedicated interface upstream.\n\nThere is a problem that IML conflicts with linbox: \u200bhttps://github.com/linbox-team/linbox/issues/35\n\nCC:  @ClementPernet\n\nKeywords: sd75\n\nUpstream: Reported upstream. No feedback yet.\n\nAuthor: Charles Bouillaguet\n\nBranch: u/Bouillaguet/linbox_cpp\n\nStatus: needs_work\n\nDependencies: #21321,#21341\n\nCommit: 6fbe826126cc4442208bf9e688acd14de3d54994\n\nIssue created by migration from https://trac.sagemath.org/ticket/21327\n\n",
    "created_at": "2016-08-24T15:24:07Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "fix/improve linbox binding",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21327",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```
Linbox has a sage interface, exploited by sage's linbox interface. This unpleasant situation (upstream had to be modified to fit inside sage) was necessary: Linbox is a C++ library heavily using templates, and at that time Cython was not capable of handling C++ libraries. Thus a C-only interface had to be built into LinBox.

Cython has improved, and sage's linbox binding should now be capable of accessing LinBox directly, removing the need for a dedicated interface upstream.

There is a problem that IML conflicts with linbox: â€‹https://github.com/linbox-team/linbox/issues/35

CC:  @ClementPernet

Keywords: sd75

Upstream: Reported upstream. No feedback yet.

Author: Charles Bouillaguet

Branch: u/Bouillaguet/linbox_cpp

Status: needs_work

Dependencies: #21321,#21341

Commit: 6fbe826126cc4442208bf9e688acd14de3d54994

Issue created by migration from https://trac.sagemath.org/ticket/21327





---

archive/issue_comments_386748.json:
```json
{
    "body": "Changing branch from \"\" to \"u/Bouillaguet/linbox_cpp\"",
    "created_at": "2016-08-24T15:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386748",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing branch from "" to "u/Bouillaguet/linbox_cpp"



---

archive/issue_comments_386749.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd75\".",
    "created_at": "2016-08-24T15:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386749",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing keywords from "" to "sd75".



---

archive/issue_comments_386750.json:
```json
{
    "body": "<a id='comment:2'></a>\nLast 10 new commits:\n|                                                                                                                                          |                             |\n|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[ef6eece](https://github.com/sagemath/sagetrac-mirror/commit/ef6eece2d2af448299a6bc5b04bdf1363ad557d9)|`fixed vector_integer_sparse`|\n|[f0c88db](https://github.com/sagemath/sagetrac-mirror/commit/f0c88db627b31198b630d0f719564e564396ff5e)|`convert modules/vector_modn_sparse.pxi`|\n|[2d7ee59](https://github.com/sagemath/sagetrac-mirror/commit/2d7ee590bee822e85b6897f59583d72674f41570)|`Merge branch 'modules_pxi_must_die_hard' into develop`|\n|[a32caee](https://github.com/sagemath/sagetrac-mirror/commit/a32caee5c84af293b597434ef5c4449e722ca28e)|`fixed vector_modn_sparse`|\n|[8cc3644](https://github.com/sagemath/sagetrac-mirror/commit/8cc364438a9b93d5f8fdbce2b376fb33b18e5468)|`added some C++ bindings to linbox interface`|\n|[6fb5e3b](https://github.com/sagemath/sagetrac-mirror/commit/6fb5e3b273546baa827797dbaec3893b1297a0bb)|`linbox: added declaration of Modular<int> field`|\n|[218ae93](https://github.com/sagemath/sagetrac-mirror/commit/218ae9371a1166d99a0610001b0d67a9232780d8)|`linbox-sage interface: notes for later`|\n|[b34482a](https://github.com/sagemath/sagetrac-mirror/commit/b34482a0758637a1f3cfdffd116c7f332192f484)|`linbox-sage interface: declaring more C++ linbox operations`|\n|[1016f80](https://github.com/sagemath/sagetrac-mirror/commit/1016f800e1a8ec7b7669fbac2866fd7b907e326f)|`more Linbox declarations`|\n|[774253f](https://github.com/sagemath/sagetrac-mirror/commit/774253f17313501205ca8b8aa767d6a12b235575)|`trying to generate a LinBox matrix inside Sage`|",
    "created_at": "2016-08-24T15:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386750",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

<a id='comment:2'></a>
Last 10 new commits:
|                                                                                                                                          |                             |
|------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[ef6eece](https://github.com/sagemath/sagetrac-mirror/commit/ef6eece2d2af448299a6bc5b04bdf1363ad557d9)|`fixed vector_integer_sparse`|
|[f0c88db](https://github.com/sagemath/sagetrac-mirror/commit/f0c88db627b31198b630d0f719564e564396ff5e)|`convert modules/vector_modn_sparse.pxi`|
|[2d7ee59](https://github.com/sagemath/sagetrac-mirror/commit/2d7ee590bee822e85b6897f59583d72674f41570)|`Merge branch 'modules_pxi_must_die_hard' into develop`|
|[a32caee](https://github.com/sagemath/sagetrac-mirror/commit/a32caee5c84af293b597434ef5c4449e722ca28e)|`fixed vector_modn_sparse`|
|[8cc3644](https://github.com/sagemath/sagetrac-mirror/commit/8cc364438a9b93d5f8fdbce2b376fb33b18e5468)|`added some C++ bindings to linbox interface`|
|[6fb5e3b](https://github.com/sagemath/sagetrac-mirror/commit/6fb5e3b273546baa827797dbaec3893b1297a0bb)|`linbox: added declaration of Modular<int> field`|
|[218ae93](https://github.com/sagemath/sagetrac-mirror/commit/218ae9371a1166d99a0610001b0d67a9232780d8)|`linbox-sage interface: notes for later`|
|[b34482a](https://github.com/sagemath/sagetrac-mirror/commit/b34482a0758637a1f3cfdffd116c7f332192f484)|`linbox-sage interface: declaring more C++ linbox operations`|
|[1016f80](https://github.com/sagemath/sagetrac-mirror/commit/1016f800e1a8ec7b7669fbac2866fd7b907e326f)|`more Linbox declarations`|
|[774253f](https://github.com/sagemath/sagetrac-mirror/commit/774253f17313501205ca8b8aa767d6a12b235575)|`trying to generate a LinBox matrix inside Sage`|



---

archive/issue_comments_386751.json:
```json
{
    "body": "Changing commit from \"\" to \"774253f17313501205ca8b8aa767d6a12b235575\"",
    "created_at": "2016-08-24T15:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386751",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing commit from "" to "774253f17313501205ca8b8aa767d6a12b235575"



---

archive/issue_comments_386752.json:
```json
{
    "body": "Changing branch from \"u/Bouillaguet/linbox_cpp\" to \"\"",
    "created_at": "2016-08-25T07:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386752",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing branch from "u/Bouillaguet/linbox_cpp" to ""



---

archive/issue_comments_386753.json:
```json
{
    "body": "Changing commit from \"774253f17313501205ca8b8aa767d6a12b235575\" to \"\"",
    "created_at": "2016-08-25T07:16:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386753",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing commit from "774253f17313501205ca8b8aa767d6a12b235575" to ""



---

archive/issue_comments_386754.json:
```json
{
    "body": "Changing branch from \"\" to \"u/Bouillaguet/linbox_cpp\"",
    "created_at": "2016-08-25T07:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386754",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing branch from "" to "u/Bouillaguet/linbox_cpp"



---

archive/issue_comments_386755.json:
```json
{
    "body": "<a id='comment:6'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[6addf0c](https://github.com/sagemath/sagetrac-mirror/commit/6addf0c15429fe80345bc1f0c4aeea24c73cad07)|`could declare and call rank`|\n|[29b6d1e](https://github.com/sagemath/sagetrac-mirror/commit/29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197)|`substituted direct-rank call to the old rank-wrapper one`|",
    "created_at": "2016-08-25T10:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386755",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:6'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[6addf0c](https://github.com/sagemath/sagetrac-mirror/commit/6addf0c15429fe80345bc1f0c4aeea24c73cad07)|`could declare and call rank`|
|[29b6d1e](https://github.com/sagemath/sagetrac-mirror/commit/29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197)|`substituted direct-rank call to the old rank-wrapper one`|



---

archive/issue_comments_386756.json:
```json
{
    "body": "Changing commit from \"\" to \"29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197\"",
    "created_at": "2016-08-25T10:40:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386756",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "" to "29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197"



---

archive/issue_comments_386757.json:
```json
{
    "body": "Changing dependencies from \"#21321\" to \"#21321,#21341\"",
    "created_at": "2016-08-26T07:59:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386757",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing dependencies from "#21321" to "#21321,#21341"



---

archive/issue_comments_386758.json:
```json
{
    "body": "<a id='comment:8'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[3a77514](https://github.com/sagemath/sagetrac-mirror/commit/3a77514e1993b45d03df390e44c28350b3490652)|`Improve LinBox C++ bindings`|",
    "created_at": "2016-09-05T15:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386758",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:8'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[3a77514](https://github.com/sagemath/sagetrac-mirror/commit/3a77514e1993b45d03df390e44c28350b3490652)|`Improve LinBox C++ bindings`|



---

archive/issue_comments_386759.json:
```json
{
    "body": "Changing commit from \"29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197\" to \"3a77514e1993b45d03df390e44c28350b3490652\"",
    "created_at": "2016-09-05T15:36:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386759",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "29b6d1efedf2ebf9beaaae0ddb63b59d6e4b4197" to "3a77514e1993b45d03df390e44c28350b3490652"



---

archive/issue_comments_386760.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-09-05T15:37:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386760",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_386761.json:
```json
{
    "body": "<a id='comment:10'></a>\nJust a quick comment for now: this branch contains a lot of commented-out code that I don't see the point of. Also several TODO's where it is not clear why you cannot just do them. It is OK to have a TODO, but you should comment them better.",
    "created_at": "2016-09-05T21:18:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386761",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:10'></a>
Just a quick comment for now: this branch contains a lot of commented-out code that I don't see the point of. Also several TODO's where it is not clear why you cannot just do them. It is OK to have a TODO, but you should comment them better.



---

archive/issue_comments_386762.json:
```json
{
    "body": "<a id='comment:11'></a>\nOK, Giavro/linbox/fflas have been updated in an incompatible way.",
    "created_at": "2016-09-06T03:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386762",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

<a id='comment:11'></a>
OK, Giavro/linbox/fflas have been updated in an incompatible way.



---

archive/issue_comments_386763.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-06T03:24:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386763",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_386764.json:
```json
{
    "body": "Changing commit from \"3a77514e1993b45d03df390e44c28350b3490652\" to \"37ca132c3983ed31e9f601426382dd0b21f7b284\"",
    "created_at": "2016-09-16T08:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386764",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "3a77514e1993b45d03df390e44c28350b3490652" to "37ca132c3983ed31e9f601426382dd0b21f7b284"



---

archive/issue_comments_386765.json:
```json
{
    "body": "<a id='comment:12'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                             |\n|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|\n|[b800be0](https://github.com/sagemath/sagetrac-mirror/commit/b800be02bd0b43aa681adcff7b203327cfd1c215)|`Improve LinBox C++ bindings`|\n|[37ca132](https://github.com/sagemath/sagetrac-mirror/commit/37ca132c3983ed31e9f601426382dd0b21f7b284)|`Rebased onto Linbox 1.4.2`|",
    "created_at": "2016-09-16T08:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386765",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:12'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                             |
|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|
|[b800be0](https://github.com/sagemath/sagetrac-mirror/commit/b800be02bd0b43aa681adcff7b203327cfd1c215)|`Improve LinBox C++ bindings`|
|[37ca132](https://github.com/sagemath/sagetrac-mirror/commit/37ca132c3983ed31e9f601426382dd0b21f7b284)|`Rebased onto Linbox 1.4.2`|



---

archive/issue_comments_386766.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2016-09-16T08:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386766",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_386767.json:
```json
{
    "body": "<a id='comment:13'></a>\nRebased onto new versions of Givaro/Linbox/etc. Ready for review.",
    "created_at": "2016-09-16T08:23:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386767",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

<a id='comment:13'></a>
Rebased onto new versions of Givaro/Linbox/etc. Ready for review.



---

archive/issue_comments_386768.json:
```json
{
    "body": "<a id='comment:14'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                                                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|\n|[549e9e8](https://github.com/sagemath/sagetrac-mirror/commit/549e9e86d14d9f73cf0375be65f80f1191fa52c9)|`got rid of Givaro's horrible SpyInteger workaround`|",
    "created_at": "2016-09-16T09:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386768",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:14'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                                                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------|
|[549e9e8](https://github.com/sagemath/sagetrac-mirror/commit/549e9e86d14d9f73cf0375be65f80f1191fa52c9)|`got rid of Givaro's horrible SpyInteger workaround`|



---

archive/issue_comments_386769.json:
```json
{
    "body": "Changing commit from \"37ca132c3983ed31e9f601426382dd0b21f7b284\" to \"549e9e86d14d9f73cf0375be65f80f1191fa52c9\"",
    "created_at": "2016-09-16T09:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386769",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "37ca132c3983ed31e9f601426382dd0b21f7b284" to "549e9e86d14d9f73cf0375be65f80f1191fa52c9"



---

archive/issue_comments_386770.json:
```json
{
    "body": "<a id='comment:15'></a>\nPlease remove silly commented-out code like\n\n```\n# ``this`` should replace:\n#from libcpp.vector cimport vector, list\n\n# ``that``\n```\n(I have no idea what you are trying to say here)",
    "created_at": "2016-09-16T12:42:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386770",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:15'></a>
Please remove silly commented-out code like

```
# ``this`` should replace:
#from libcpp.vector cimport vector, list

# ``that``
```
(I have no idea what you are trying to say here)



---

archive/issue_comments_386771.json:
```json
{
    "body": "<a id='comment:16'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                        |\n|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|\n|[709ef92](https://github.com/sagemath/sagetrac-mirror/commit/709ef92f8bcd8f409d7c46e03858d61fdc6b3671)|`remove useless comment`|",
    "created_at": "2016-09-16T12:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386771",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:16'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                        |
|-------------------------------------------------------------------------------------------------------------------------------------------|------------------------|
|[709ef92](https://github.com/sagemath/sagetrac-mirror/commit/709ef92f8bcd8f409d7c46e03858d61fdc6b3671)|`remove useless comment`|



---

archive/issue_comments_386772.json:
```json
{
    "body": "Changing commit from \"549e9e86d14d9f73cf0375be65f80f1191fa52c9\" to \"709ef92f8bcd8f409d7c46e03858d61fdc6b3671\"",
    "created_at": "2016-09-16T12:50:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386772",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "549e9e86d14d9f73cf0375be65f80f1191fa52c9" to "709ef92f8bcd8f409d7c46e03858d61fdc6b3671"



---

archive/issue_comments_386773.json:
```json
{
    "body": "<a id='comment:17'></a>\n1. Trailing comma: `SparseElimination,`\n\n2. Don't put Python code in `sig_on()`. This is wrong:\n\n```\nsig_on()\nif typ == 'minpoly':\n    [...]\nsig_off()\n```\n\n3. Instead of using `<SparseMatrixGFp *> self._M` everywhere, why not declare `_M` as `SparseMatrixGFp*` (or even just `SparseMatrixGFp` if that works to avoid the explicit `del`)?",
    "created_at": "2016-09-16T13:09:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386773",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:17'></a>
1. Trailing comma: `SparseElimination,`

2. Don't put Python code in `sig_on()`. This is wrong:

```
sig_on()
if typ == 'minpoly':
    [...]
sig_off()
```

3. Instead of using `<SparseMatrixGFp *> self._M` everywhere, why not declare `_M` as `SparseMatrixGFp*` (or even just `SparseMatrixGFp` if that works to avoid the explicit `del`)?



---

archive/issue_comments_386774.json:
```json
{
    "body": "<a id='comment:18'></a>\n3. The problem is that because of the LinBox <--> IML incompatibility, the various `*.h` files from linbox must not be pulled into `matrix_integer_dense.pyx`. Thus, they must not appear in `linbox.pxd`. This makes it impossible (or at least more contrived) to describe the type of sparse matrices in LinBox.pxd. And because the class has to be defined in `linbox.pxd`, I did not see any other solution. This is indeed a workaround.\n\nThe idea I tried to follow is that `linbox.pyx` *only* deals with linbox datastructures. The rest deals with `linbox.pyx`.",
    "created_at": "2016-09-16T13:15:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386774",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

<a id='comment:18'></a>
3. The problem is that because of the LinBox <--> IML incompatibility, the various `*.h` files from linbox must not be pulled into `matrix_integer_dense.pyx`. Thus, they must not appear in `linbox.pxd`. This makes it impossible (or at least more contrived) to describe the type of sparse matrices in LinBox.pxd. And because the class has to be defined in `linbox.pxd`, I did not see any other solution. This is indeed a workaround.

The idea I tried to follow is that `linbox.pyx` *only* deals with linbox datastructures. The rest deals with `linbox.pyx`.



---

archive/issue_comments_386775.json:
```json
{
    "body": "<a id='comment:19'></a>\nReplying to [Bouillaguet](#comment%3A18):\n> 3. The problem is that because of the LinBox <--> IML incompatibility, the various `*.h` files from linbox must not be pulled into `matrix_integer_dense.pyx`. Thus, they must not appear in `linbox.pxd`. This makes it impossible (or at least more contrived) to describe the type of sparse matrices in LinBox.pxd. And because the class has to be defined in `linbox.pxd`, I did not see any other solution. This is indeed a workaround.\n\n\n\nI would rather like to fix this problem than to workaround it.",
    "created_at": "2016-09-16T13:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386775",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:19'></a>
Replying to [Bouillaguet](#comment%3A18):
> 3. The problem is that because of the LinBox <--> IML incompatibility, the various `*.h` files from linbox must not be pulled into `matrix_integer_dense.pyx`. Thus, they must not appear in `linbox.pxd`. This makes it impossible (or at least more contrived) to describe the type of sparse matrices in LinBox.pxd. And because the class has to be defined in `linbox.pxd`, I did not see any other solution. This is indeed a workaround.



I would rather like to fix this problem than to workaround it.



---

archive/issue_comments_386776.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2016-09-16T13:39:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386776",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_386777.json:
```json
{
    "body": "Changing upstream from \"N/A\" to \"Reported upstream. No feedback yet.\"",
    "created_at": "2016-09-16T13:40:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386777",
    "user": "https://github.com/jdemeyer"
}
```

Changing upstream from "N/A" to "Reported upstream. No feedback yet."



---

archive/issue_comments_386778.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -2,4 +2,4 @@\n \n Cython has improved, and sage's linbox binding should now be capable of accessing LinBox directly, removing the need for a dedicated interface upstream.\n \n-\n+There is a problem that IML conflicts with linbox: \u200bhttps://github.com/linbox-team/linbox/issues/35\n``````\n",
    "created_at": "2016-09-16T13:40:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386778",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -2,4 +2,4 @@
 
 Cython has improved, and sage's linbox binding should now be capable of accessing LinBox directly, removing the need for a dedicated interface upstream.
 
-
+There is a problem that IML conflicts with linbox: â€‹https://github.com/linbox-team/linbox/issues/35
``````




---

archive/issue_comments_386779.json:
```json
{
    "body": "<a id='comment:21'></a>\nBranch pushed to git repo; I updated commit sha1. New commits:\n|                                                                                                                                           |                    |\n|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|\n|[6fbe826](https://github.com/sagemath/sagetrac-mirror/commit/6fbe826126cc4442208bf9e688acd14de3d54994)|`reviewers comments`|",
    "created_at": "2016-09-16T19:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386779",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

<a id='comment:21'></a>
Branch pushed to git repo; I updated commit sha1. New commits:
|                                                                                                                                           |                    |
|-------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
|[6fbe826](https://github.com/sagemath/sagetrac-mirror/commit/6fbe826126cc4442208bf9e688acd14de3d54994)|`reviewers comments`|



---

archive/issue_comments_386780.json:
```json
{
    "body": "Changing commit from \"709ef92f8bcd8f409d7c46e03858d61fdc6b3671\" to \"6fbe826126cc4442208bf9e688acd14de3d54994\"",
    "created_at": "2016-09-16T19:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386780",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing commit from "709ef92f8bcd8f409d7c46e03858d61fdc6b3671" to "6fbe826126cc4442208bf9e688acd14de3d54994"



---

archive/issue_comments_386781.json:
```json
{
    "body": "<a id='comment:22'></a>\nReplying to [jdemeyer](#comment%3A20):\n> I would rather like to fix this problem than to workaround it.\n\n\nI understand, however, as you know, fixing the problem requires:\na. Fixing upstream\nb. Opening, reviewing and merging a new ticket for the new upstream package\n\nUpstream evolves slowly (the previous version in sage, 1.3.2, was released in 2012...). I'm afraid that this whole process will take a long time, and I'm worried that this ticket will stall for reasons that are beyond my control. I started working on this 3 weeks ago, and backward-incompatible changes were introduced in both the Givaro and Linbox packages, that have been upgraded in sage recently. As such, I had to figure that out when I rebased.\n\nI'd rather see this ticket go through quickly, instead of seeing it rot.",
    "created_at": "2016-09-16T19:50:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386781",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

<a id='comment:22'></a>
Replying to [jdemeyer](#comment%3A20):
> I would rather like to fix this problem than to workaround it.


I understand, however, as you know, fixing the problem requires:
a. Fixing upstream
b. Opening, reviewing and merging a new ticket for the new upstream package

Upstream evolves slowly (the previous version in sage, 1.3.2, was released in 2012...). I'm afraid that this whole process will take a long time, and I'm worried that this ticket will stall for reasons that are beyond my control. I started working on this 3 weeks ago, and backward-incompatible changes were introduced in both the Givaro and Linbox packages, that have been upgraded in sage recently. As such, I had to figure that out when I rebased.

I'd rather see this ticket go through quickly, instead of seeing it rot.



---

archive/issue_comments_386782.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [Bouillaguet](#comment%3A22):\n> Replying to [jdemeyer](#comment%3A20):\n> > I would rather like to fix this problem than to workaround it.\n\n> \n> I understand, however, as you know, fixing the problem requires:\n> a. Fixing upstream\n> b. Opening, reviewing and merging a new ticket for the new upstream package\n> \n> Upstream evolves slowly (the previous version in sage, 1.3.2, was released in 2012...). I'm afraid that this whole process will take a long time\n\n\nFor me personally, you don't have to wait for a new official upstream package. You can just add a patch to the Sage package. In https://github.com/linbox-team/linbox/issues/35 I proposed some solutions.",
    "created_at": "2016-09-16T20:13:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386782",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:23'></a>
Replying to [Bouillaguet](#comment%3A22):
> Replying to [jdemeyer](#comment%3A20):
> > I would rather like to fix this problem than to workaround it.

> 
> I understand, however, as you know, fixing the problem requires:
> a. Fixing upstream
> b. Opening, reviewing and merging a new ticket for the new upstream package
> 
> Upstream evolves slowly (the previous version in sage, 1.3.2, was released in 2012...). I'm afraid that this whole process will take a long time


For me personally, you don't have to wait for a new official upstream package. You can just add a patch to the Sage package. In https://github.com/linbox-team/linbox/issues/35 I proposed some solutions.



---

archive/issue_comments_386783.json:
```json
{
    "body": "<a id='comment:24'></a>\nOK, I will patch it.",
    "created_at": "2016-09-17T09:55:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386783",
    "user": "https://trac.sagemath.org/admin/accounts/users/Bouillaguet"
}
```

<a id='comment:24'></a>
OK, I will patch it.



---

archive/issue_comments_386784.json:
```json
{
    "body": "<a id='comment:25'></a>\nI applied Jeroen's patch upstream.",
    "created_at": "2016-09-19T13:26:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386784",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:25'></a>
I applied Jeroen's patch upstream.



---

archive/issue_comments_386785.json:
```json
{
    "body": "<a id='comment:26'></a>\nHello,\n\nI just discovered this ticket while working on #22924 (see also #22872 and [cylinbox](https://github.com/videlec/cylinbox)). My original aim was actually to use linbox for solving sparse integer systems. However, a cleanup was needed before.\n\nI will read what is in the branch `u/Bouillaguet/linbox_cpp` before going further. Charles, do you plan continuing working on it?",
    "created_at": "2017-05-03T06:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386785",
    "user": "https://github.com/videlec"
}
```

<a id='comment:26'></a>
Hello,

I just discovered this ticket while working on #22924 (see also #22872 and [cylinbox](https://github.com/videlec/cylinbox)). My original aim was actually to use linbox for solving sparse integer systems. However, a cleanup was needed before.

I will read what is in the branch `u/Bouillaguet/linbox_cpp` before going further. Charles, do you plan continuing working on it?



---

archive/issue_comments_386786.json:
```json
{
    "body": "<a id='comment:27'></a>\nOops, my bad, I should have remembered this ticket when Vincent told me about his work on #22872.",
    "created_at": "2017-05-03T07:06:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386786",
    "user": "https://github.com/ClementPernet"
}
```

<a id='comment:27'></a>
Oops, my bad, I should have remembered this ticket when Vincent told me about his work on #22872.



---

archive/issue_comments_386787.json:
```json
{
    "body": "<a id='comment:28'></a>\nTicket #24544 will finish moving the Sage interface to LinBox inside Sage ([commit 7ec9610](https://github.com/sagemath/sagetrac-mirror/commit/7ec96109cfd54cf129d934139a5a0f006b8708dd) removes the `--enable-sage` option). I am only facing a strange missing symbol issue, see [#24554comment:8](https://trac.sagemath.org/ticket/24544#comment:8).",
    "created_at": "2018-02-03T16:10:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21327",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21327#issuecomment-386787",
    "user": "https://github.com/videlec"
}
```

<a id='comment:28'></a>
Ticket #24544 will finish moving the Sage interface to LinBox inside Sage ([commit 7ec9610](https://github.com/sagemath/sagetrac-mirror/commit/7ec96109cfd54cf129d934139a5a0f006b8708dd) removes the `--enable-sage` option). I am only facing a strange missing symbol issue, see [#24554comment:8](https://trac.sagemath.org/ticket/24544#comment:8).
