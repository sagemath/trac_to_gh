# Issue 21624: Better debug mode for singular 4

archive/issues_021387.json:
```json
{
    "assignees": [],
    "body": "This is a follow up to #17254 which upgraded to singular 4:\n\n* debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)\n* failing test in debug mode\n\nCC:  @embray\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21624_\n\n",
    "created_at": "2016-10-03T10:03:45Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/bug",
        "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
        "https://github.com/sagemath/sage/labels/invalid",
        "https://github.com/sagemath/sage/labels/needs%20work"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Better debug mode for singular 4",
    "type": "issue",
    "updated_at": "2017-05-02T09:44:22Z",
    "url": "https://github.com/sagemath/sage/issues/21624",
    "user": "https://github.com/sagetrac-jpflori"
}
```
This is a follow up to #17254 which upgraded to singular 4:

* debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)
* failing test in debug mode

CC:  @embray

_Issue created by migration from https://trac.sagemath.org/ticket/21624_





---

archive/issue_events_275453.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2016-10-03T10:03:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20packages%3A%20standard",
    "label_color": "000080",
    "label_name": "component: packages: standard",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275453"
}
```



---

archive/issue_events_275454.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2016-10-03T10:03:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275454"
}
```



---

archive/issue_events_275455.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2016-10-03T10:03:45Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "label": "https://github.com/sagemath/sage/labels/invalid",
    "label_color": "a6a6a6",
    "label_name": "invalid",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275455"
}
```



---

archive/issue_comments_320388.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n This is a follow up to #17254 which upgraded to singular 4:\n-*debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)\n-*failing test in debug mode\n+\n+* debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)\n+* failing test in debug mode\n``````\n",
    "created_at": "2016-10-03T10:05:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320388",
    "user": "https://github.com/sagetrac-jpflori"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
 This is a follow up to #17254 which upgraded to singular 4:
-*debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)
-*failing test in debug mode
+
+* debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)
+* failing test in debug mode
``````




---

archive/issue_comments_320389.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\n\n```\n24524sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed\n24525sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed\n24526sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed\n24527sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed\n24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n```",
    "created_at": "2016-10-21T07:03:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320389",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'>Comment 2:</a>

```
24524sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed
24525sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed
24526sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed
24527sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed
24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
```



---

archive/issue_events_275456.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-21T09:40:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275456"
}
```



---

archive/issue_events_275457.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-21T09:40:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275457"
}
```



---

archive/issue_comments_320390.json:
```json
{
    "body": "<a id='comment:4'>Comment 4:</a>\nAll of these errors look like:\n\n```\n    // ***dPolyReportError: NULL coef \n     occurred at\n     occurred for poly: o*x*y*x_1*y_1*x_2\n    // ***dPolyReportError: NULL coef \n     occurred at\n     occurred for poly: o*y*x_1*y_1*x_2\n    // ***dError: S_2_R[2]=1 != T[1].i_r=0\n    -y*z*x - y*z*y - y*z*z\n```\nexcept for the last one:\n\n```\n\nFile \"src/sage/schemes/curves/constructor.py\", line 108, in sage.schemes.curves.constructor.Curve\nFailed example:\n    C.genus()\nExpected:\n    13\nGot:\n    // ** no minpoly allowed if there are local objects belonging to the basering: \n    number((a2+a+1))\n    // ** killing a local object due to minpoly change: p\n    // ** no minpoly allowed if there are local objects belonging to the basering: \n    number((a2-a+1))\n    // ** killing a local object due to minpoly change: p\n    13\n```\n> 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n> 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n> 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n> }}}",
    "created_at": "2016-10-28T12:25:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320390",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:4'>Comment 4:</a>
All of these errors look like:

```
    // ***dPolyReportError: NULL coef 
     occurred at
     occurred for poly: o*x*y*x_1*y_1*x_2
    // ***dPolyReportError: NULL coef 
     occurred at
     occurred for poly: o*y*x_1*y_1*x_2
    // ***dError: S_2_R[2]=1 != T[1].i_r=0
    -y*z*x - y*z*y - y*z*z
```
except for the last one:

```

File "src/sage/schemes/curves/constructor.py", line 108, in sage.schemes.curves.constructor.Curve
Failed example:
    C.genus()
Expected:
    13
Got:
    // ** no minpoly allowed if there are local objects belonging to the basering: 
    number((a2+a+1))
    // ** killing a local object due to minpoly change: p
    // ** no minpoly allowed if there are local objects belonging to the basering: 
    number((a2-a+1))
    // ** killing a local object due to minpoly change: p
    13
```
> 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
> 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
> 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
> }}}



---

archive/issue_comments_320391.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThread about first issue here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/TPZNlvZXei0",
    "created_at": "2016-10-28T14:33:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320391",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:5'>Comment 5:</a>
Thread about first issue here:
* https://groups.google.com/forum/#!topic/libsingular-devel/TPZNlvZXei0



---

archive/issue_comments_320392.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nAnd the second one here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/tYuWlGOZdWo",
    "created_at": "2016-10-31T13:19:08Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320392",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:6'>Comment 6:</a>
And the second one here:
* https://groups.google.com/forum/#!topic/libsingular-devel/tYuWlGOZdWo



---

archive/issue_comments_320393.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nWith #21631 there are now also many\n\n```\n // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n```\nwarnings, though no crashes.",
    "created_at": "2016-11-02T19:19:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320393",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'>Comment 7:</a>
With #21631 there are now also many

```
 // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
```
warnings, though no crashes.



---

archive/issue_comments_320394.json:
```json
{
    "body": "<a id='comment:8'>Comment 8:</a>\nCan you tell in which file it is?",
    "created_at": "2016-11-03T11:21:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320394",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:8'>Comment 8:</a>
Can you tell in which file it is?



---

archive/issue_comments_320395.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nOk, got it.",
    "created_at": "2016-11-03T12:19:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320395",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:9'>Comment 9:</a>
Ok, got it.



---

archive/issue_comments_320396.json:
```json
{
    "body": "<a id='comment:10'>Comment 10:</a>\nSee ##21865 for new errors occurring only in debug mode in:\n* sage/rings/cfinite_sequence.py\n* sage/matrix/matrix_modn_dense_template.pxi",
    "created_at": "2016-12-21T13:50:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320396",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:10'>Comment 10:</a>
See ##21865 for new errors occurring only in debug mode in:
* sage/rings/cfinite_sequence.py
* sage/matrix/matrix_modn_dense_template.pxi



---

archive/issue_comments_320397.json:
```json
{
    "body": "<a id='comment:11'>Comment 11:</a>\nthe last issue ( \"no minpoly allowed..\") can be fixed with\n\nhttps://github.com/Singular/Sources/pull/814\n(avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n\nDid you get answers from Hans for the other issues?\nOr, could you track them down?\n\n\nReplying to [jpflori](#comment%3A4):\n> All of these errors look like:\n> \n> ```\n>     // ***dPolyReportError: NULL coef \n>      occurred at\n>      occurred for poly: o*x*y*x_1*y_1*x_2\n>     // ***dPolyReportError: NULL coef \n>      occurred at\n>      occurred for poly: o*y*x_1*y_1*x_2\n>     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n>     -y*z*x - y*z*y - y*z*z\n> ```\n> except for the last one:\n> \n> ```\n> \n> File \"src/sage/schemes/curves/constructor.py\", line 108, in sage.schemes.curves.constructor.Curve\n> Failed example:\n>     C.genus()\n> Expected:\n>     13\n> Got:\n>     // ** no minpoly allowed if there are local objects belonging to the basering: \n>     number((a2+a+1))\n>     // ** killing a local object due to minpoly change: p\n>     // ** no minpoly allowed if there are local objects belonging to the basering: \n>     number((a2-a+1))\n>     // ** killing a local object due to minpoly change: p\n>     13\n> ```\n> > 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n> > 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n> > 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n> > }}}",
    "created_at": "2017-01-31T21:24:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320397",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<a id='comment:11'>Comment 11:</a>
the last issue ( "no minpoly allowed..") can be fixed with

https://github.com/Singular/Sources/pull/814
(avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')

Did you get answers from Hans for the other issues?
Or, could you track them down?


Replying to [jpflori](#comment%3A4):
> All of these errors look like:
> 
> ```
>     // ***dPolyReportError: NULL coef 
>      occurred at
>      occurred for poly: o*x*y*x_1*y_1*x_2
>     // ***dPolyReportError: NULL coef 
>      occurred at
>      occurred for poly: o*y*x_1*y_1*x_2
>     // ***dError: S_2_R[2]=1 != T[1].i_r=0
>     -y*z*x - y*z*y - y*z*z
> ```
> except for the last one:
> 
> ```
> 
> File "src/sage/schemes/curves/constructor.py", line 108, in sage.schemes.curves.constructor.Curve
> Failed example:
>     C.genus()
> Expected:
>     13
> Got:
>     // ** no minpoly allowed if there are local objects belonging to the basering: 
>     number((a2+a+1))
>     // ** killing a local object due to minpoly change: p
>     // ** no minpoly allowed if there are local objects belonging to the basering: 
>     number((a2-a+1))
>     // ** killing a local object due to minpoly change: p
>     13
> ```
> > 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
> > 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
> > 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
> > }}}



---

archive/issue_comments_320398.json:
```json
{
    "body": "<a id='comment:12'>Comment 12:</a>\nReplying to [@vbraun](#comment%3A7):\n> With #21631 there are now also many\n> \n> ```\n>  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n> ```\n> warnings, though no crashes.\n\nso changes in #21631 introduced a new issue?\nCould someone track it down?",
    "created_at": "2017-01-31T21:47:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320398",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<a id='comment:12'>Comment 12:</a>
Replying to [@vbraun](#comment%3A7):
> With #21631 there are now also many
> 
> ```
>  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
> ```
> warnings, though no crashes.

so changes in #21631 introduced a new issue?
Could someone track it down?



---

archive/issue_comments_320399.json:
```json
{
    "body": "<a id='comment:13'>Comment 13:</a>\nReplying to [jakobkroeker](#comment%3A12):\n> Replying to [@vbraun](#comment%3A7):\n> > With #21631 there are now also many\n> > \n> > ```\n> >  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n> > ```\n> > warnings, though no crashes.\n\n> \n> so changes in #21631 introduced a new issue?\n> Could someone track it down?\n\nThis has been fixed in Singular git version.",
    "created_at": "2017-02-01T13:06:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320399",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:13'>Comment 13:</a>
Replying to [jakobkroeker](#comment%3A12):
> Replying to [@vbraun](#comment%3A7):
> > With #21631 there are now also many
> > 
> > ```
> >  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
> > ```
> > warnings, though no crashes.

> 
> so changes in #21631 introduced a new issue?
> Could someone track it down?

This has been fixed in Singular git version.



---

archive/issue_comments_320400.json:
```json
{
    "body": "<a id='comment:14'>Comment 14:</a>\nReplying to [jakobkroeker](#comment%3A11):\n> the last issue ( \"no minpoly allowed..\") can be fixed with\n> \n> https://github.com/Singular/Sources/pull/814\n> (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> \n\nGood! It's even in Singular's git version now.\n\n> Did you get answers from Hans for the other issues?\n> Or, could you track them down?\n> \n> \n> Replying to [jpflori](#comment%3A4):\n> > All of these errors look like:\n> > \n> > ```\n> >      occurred at\n> >      occurred for poly: o*y*x_1*y_1*x_2\n> >     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n> >     -y*z*x - y*z*y - y*z*z\n> > ```\n\nThose like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:\n* https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\nNo feedback from Hans and I had no time to look at it.",
    "created_at": "2017-02-01T13:10:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320400",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:14'>Comment 14:</a>
Replying to [jakobkroeker](#comment%3A11):
> the last issue ( "no minpoly allowed..") can be fixed with
> 
> https://github.com/Singular/Sources/pull/814
> (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> 

Good! It's even in Singular's git version now.

> Did you get answers from Hans for the other issues?
> Or, could you track them down?
> 
> 
> Replying to [jpflori](#comment%3A4):
> > All of these errors look like:
> > 
> > ```
> >      occurred at
> >      occurred for poly: o*y*x_1*y_1*x_2
> >     // ***dError: S_2_R[2]=1 != T[1].i_r=0
> >     -y*z*x - y*z*y - y*z*z
> > ```

Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:
* https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ
No feedback from Hans and I had no time to look at it.



---

archive/issue_comments_320401.json:
```json
{
    "body": "<a id='comment:15'>Comment 15:</a>\nI just reminded Hans kindly to look at that issue since it is\na blocker ticket for sage.\n\nhttps://groups.google.com/forum/#!msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\n\nLet's see if something happens.\n\n\n\nReplying to [jpflori](#comment%3A14):\n> Replying to [jakobkroeker](#comment%3A11):\n> > the last issue ( \"no minpoly allowed..\") can be fixed with\n> > \n> > https://github.com/Singular/Sources/pull/814\n> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> > \n\n> Good! It's even in Singular's git version now.\n> \n> > Did you get answers from Hans for the other issues?\n> > Or, could you track them down?\n> > \n> > \n> > Replying to [jpflori](#comment%3A4):\n> > > All of these errors look like:\n> > > \n> > > ```\n> > >      occurred at\n> > >      occurred for poly: o*y*x_1*y_1*x_2\n> > >     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n> > >     -y*z*x - y*z*y - y*z*z\n> > > ```\n\n> Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:\n> * https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\n> No feedback from Hans and I had no time to look at it.",
    "created_at": "2017-02-01T17:11:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320401",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<a id='comment:15'>Comment 15:</a>
I just reminded Hans kindly to look at that issue since it is
a blocker ticket for sage.

https://groups.google.com/forum/#!msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ

Let's see if something happens.



Replying to [jpflori](#comment%3A14):
> Replying to [jakobkroeker](#comment%3A11):
> > the last issue ( "no minpoly allowed..") can be fixed with
> > 
> > https://github.com/Singular/Sources/pull/814
> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> > 

> Good! It's even in Singular's git version now.
> 
> > Did you get answers from Hans for the other issues?
> > Or, could you track them down?
> > 
> > 
> > Replying to [jpflori](#comment%3A4):
> > > All of these errors look like:
> > > 
> > > ```
> > >      occurred at
> > >      occurred for poly: o*y*x_1*y_1*x_2
> > >     // ***dError: S_2_R[2]=1 != T[1].i_r=0
> > >     -y*z*x - y*z*y - y*z*z
> > > ```

> Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:
> * https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ
> No feedback from Hans and I had no time to look at it.



---

archive/issue_comments_320402.json:
```json
{
    "body": "<a id='comment:16'>Comment 16:</a>\nWith the latest tarball for 4-1-0p2, debug mode should be clean:\n* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/",
    "created_at": "2017-02-21T10:46:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320402",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:16'>Comment 16:</a>
With the latest tarball for 4-1-0p2, debug mode should be clean:
* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/



---

archive/issue_comments_320403.json:
```json
{
    "body": "<a id='comment:17'>Comment 17:</a>\nReplying to [jpflori](#comment%3A16):\n> With the latest tarball for 4-1-0p2, debug mode should be clean:\n> * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/\n\nrelated singular commit is \nhttps://github.com/Singular/Sources/commit/54c80cb81ed58f166a023fc060f541e24ebd5892",
    "created_at": "2017-03-08T00:58:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320403",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<a id='comment:17'>Comment 17:</a>
Replying to [jpflori](#comment%3A16):
> With the latest tarball for 4-1-0p2, debug mode should be clean:
> * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/

related singular commit is 
https://github.com/Singular/Sources/commit/54c80cb81ed58f166a023fc060f541e24ebd5892



---

archive/issue_comments_320404.json:
```json
{
    "body": "<a id='comment:18'>Comment 18:</a>\nReplying to [jpflori](#comment%3A14):\n> Replying to [jakobkroeker](#comment%3A11):\n> > the last issue ( \"no minpoly allowed..\") can be fixed with\n> > \n> > https://github.com/Singular/Sources/pull/814\n> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> > \n\n> Good! It's even in Singular's git version now.\n\nThere are much more issues in Singular LIBs where the minpoly is not immediately defined (and lead to debug output) which are probably not hit by current sage tests, but in the long term they have all to be fixed:\nhttps://github.com/jakobkroeker/test_singular/issues/243",
    "created_at": "2017-03-08T01:10:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320404",
    "user": "https://github.com/sagetrac-jakobkroeker"
}
```

<a id='comment:18'>Comment 18:</a>
Replying to [jpflori](#comment%3A14):
> Replying to [jakobkroeker](#comment%3A11):
> > the last issue ( "no minpoly allowed..") can be fixed with
> > 
> > https://github.com/Singular/Sources/pull/814
> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> > 

> Good! It's even in Singular's git version now.

There are much more issues in Singular LIBs where the minpoly is not immediately defined (and lead to debug output) which are probably not hit by current sage tests, but in the long term they have all to be fixed:
https://github.com/jakobkroeker/test_singular/issues/243



---

archive/issue_events_275458.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-03-23T12:55:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275458"
}
```



---

archive/issue_comments_320405.json:
```json
{
    "body": "<a id='comment:19'>Comment 19:</a>\nI think I'm seeing this too.  I almost always compile with `SAGE_DEBUG=yes` on Cygwin since I have to debug things so often, and I'm seeing lots of failures like this since the switch to Singular 4.  Going to recompile Singular in non-debug mode to confirm that it goes away.\n\n(Also obviously this isn't a *blocker* or it'd be fixed by now :)",
    "created_at": "2017-03-23T12:55:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320405",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'>Comment 19:</a>
I think I'm seeing this too.  I almost always compile with `SAGE_DEBUG=yes` on Cygwin since I have to debug things so often, and I'm seeing lots of failures like this since the switch to Singular 4.  Going to recompile Singular in non-debug mode to confirm that it goes away.

(Also obviously this isn't a *blocker* or it'd be fixed by now :)



---

archive/issue_comments_320406.json:
```json
{
    "body": "<a id='comment:20'>Comment 20:</a>\nConfirmed that rebuilding Singular and its dependents with `SAGE_DEBUG=no` fixed these failures for me.",
    "created_at": "2017-03-23T14:43:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320406",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'>Comment 20:</a>
Confirmed that rebuilding Singular and its dependents with `SAGE_DEBUG=no` fixed these failures for me.



---

archive/issue_comments_320407.json:
```json
{
    "body": "<a id='comment:21'>Comment 21:</a>\n`@`eric: does #22425 fixed the errors you saw?\nI think we can close this one now #22425 is merged.",
    "created_at": "2017-04-03T11:41:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320407",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:21'>Comment 21:</a>
`@`eric: does #22425 fixed the errors you saw?
I think we can close this one now #22425 is merged.



---

archive/issue_comments_320408.json:
```json
{
    "body": "<a id='comment:22'>Comment 22:</a>\nI don't think I've tried yet.  I'll test it and see.  Are you saying it should be fixed even with `SAGE_DEBUG=yes`?",
    "created_at": "2017-04-03T12:02:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320408",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'>Comment 22:</a>
I don't think I've tried yet.  I'll test it and see.  Are you saying it should be fixed even with `SAGE_DEBUG=yes`?



---

archive/issue_comments_320409.json:
```json
{
    "body": "<a id='comment:23'>Comment 23:</a>\nAll error messages specific to singular built in debug mode should not appear anymore.",
    "created_at": "2017-04-03T12:04:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320409",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:23'>Comment 23:</a>
All error messages specific to singular built in debug mode should not appear anymore.



---

archive/issue_events_275459.json:
```json
{
    "actor": "https://github.com/sagetrac-jpflori",
    "created_at": "2017-04-25T11:20:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275459"
}
```



---

archive/issue_comments_320410.json:
```json
{
    "body": "<a id='comment:24'>Comment 24:</a>\nShould be ok since the latest singular upgrade.",
    "created_at": "2017-04-25T11:20:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320410",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:24'>Comment 24:</a>
Should be ok since the latest singular upgrade.



---

archive/issue_events_275460.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-25T17:36:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275460"
}
```



---

archive/issue_events_275461.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-25T17:36:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21624#event-275461"
}
```



---

archive/issue_comments_320411.json:
```json
{
    "body": "<a id='comment:25'>Comment 25:</a>\nI'm still getting this one\n\n```\nsage -t --long src/sage/interfaces/singular.py\n**********************************************************************\nFile \"src/sage/interfaces/singular.py\", line 1523, in sage.interfaces.singular.SingularElement.sage_global_ring\nFailed example:\n    singular.eval('ring r5 = (complex,15,j),(a,b,c),dp')\nExpected:\n    ''\nGot:\n    '\\n// ***dError: assume violation at numbers.cc:434 condition: n->cfCoeffName!=ndCoeffName'\n**********************************************************************\n1 item had failures:\n   1 of  22 in sage.interfaces.singular.SingularElement.sage_global_ring\n    [390 tests, 1 failure, 10.81 s]\n```",
    "created_at": "2017-04-25T17:36:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320411",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'>Comment 25:</a>
I'm still getting this one

```
sage -t --long src/sage/interfaces/singular.py
**********************************************************************
File "src/sage/interfaces/singular.py", line 1523, in sage.interfaces.singular.SingularElement.sage_global_ring
Failed example:
    singular.eval('ring r5 = (complex,15,j),(a,b,c),dp')
Expected:
    ''
Got:
    '\n// ***dError: assume violation at numbers.cc:434 condition: n->cfCoeffName!=ndCoeffName'
**********************************************************************
1 item had failures:
   1 of  22 in sage.interfaces.singular.SingularElement.sage_global_ring
    [390 tests, 1 failure, 10.81 s]
```



---

archive/issue_comments_320412.json:
```json
{
    "body": "<a id='comment:26'>Comment 26:</a>\nMaybe #22868.\nDid not check debug mode there.",
    "created_at": "2017-04-25T17:39:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320412",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:26'>Comment 26:</a>
Maybe #22868.
Did not check debug mode there.



---

archive/issue_comments_320413.json:
```json
{
    "body": "<a id='comment:27'>Comment 27:</a>\nUnfortunately the failing test it is still here with 4.1.0p3.",
    "created_at": "2017-04-26T08:49:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320413",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:27'>Comment 27:</a>
Unfortunately the failing test it is still here with 4.1.0p3.



---

archive/issue_comments_320414.json:
```json
{
    "body": "<a id='comment:28'>Comment 28:</a>\nShould be fixed in git version:\n* https://github.com/Singular/Sources/commit/6af76a7a09a49e7e08065cdf078b2461e16af2eb\n\n`@`volker: do you see any other failures?",
    "created_at": "2017-04-27T10:17:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320414",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:28'>Comment 28:</a>
Should be fixed in git version:
* https://github.com/Singular/Sources/commit/6af76a7a09a49e7e08065cdf078b2461e16af2eb

`@`volker: do you see any other failures?



---

archive/issue_comments_320415.json:
```json
{
    "body": "<a id='comment:29'>Comment 29:</a>\nThese look a bit like they might be from Singular, haven't investigated further:\n\n```\nsage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_ideal.py\", line 1761, in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis\nFailed example:\n    Ideal(P(0)).interreduced_basis()\nExpected:\n    [0]\nGot:\n    wrong mod p number 140727535500960 at modulop.cc,158\n    [0]\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis\n    [722 tests, 1 failure, 75.81 s]\nsage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_sequence.py\", line 1022, in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced\nFailed example:\n    Sequence([P(0)]).reduced()\nExpected:\n    [0]\nGot:\n    wrong mod p number 140727535505680 at modulop.cc,158\n    [0]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced\n    [235 tests, 1 failure, 14.47 s]\n```",
    "created_at": "2017-04-29T23:27:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320415",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'>Comment 29:</a>
These look a bit like they might be from Singular, haven't investigated further:

```
sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_ideal.py", line 1761, in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis
Failed example:
    Ideal(P(0)).interreduced_basis()
Expected:
    [0]
Got:
    wrong mod p number 140727535500960 at modulop.cc,158
    [0]
**********************************************************************
1 item had failures:
   1 of  13 in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis
    [722 tests, 1 failure, 75.81 s]
sage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_sequence.py", line 1022, in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced
Failed example:
    Sequence([P(0)]).reduced()
Expected:
    [0]
Got:
    wrong mod p number 140727535505680 at modulop.cc,158
    [0]
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced
    [235 tests, 1 failure, 14.47 s]
```



---

archive/issue_comments_320416.json:
```json
{
    "body": "<a id='comment:30'>Comment 30:</a>\nError messages definitely from Singular, though it might be from bad input on Sage's side.",
    "created_at": "2017-05-02T09:44:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21624#issuecomment-320416",
    "user": "https://github.com/sagetrac-jpflori"
}
```

<a id='comment:30'>Comment 30:</a>
Error messages definitely from Singular, though it might be from bad input on Sage's side.
