# Issue 21624: Better debug mode for singular 4

archive/issues_021387.json:
```json
{
    "body": "This is a follow up to #17254 which upgraded to singular 4:\n\n* debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)\n* failing test in debug mode\n\n**CC:**  @embray\n\nIssue created by migration from https://trac.sagemath.org/ticket/21624\n\n",
    "created_at": "2016-10-03T10:03:45Z",
    "labels": [
        "component: packages: standard",
        "bug",
        "needs work",
        "invalid"
    ],
    "title": "Better debug mode for singular 4",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21624",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```
This is a follow up to #17254 which upgraded to singular 4:

* debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)
* failing test in debug mode

**CC:**  @embray

Issue created by migration from https://trac.sagemath.org/ticket/21624





---

archive/issue_comments_321870.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n This is a follow up to #17254 which upgraded to singular 4:\n-*debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)\n-*failing test in debug mode\n+\n+* debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)\n+* failing test in debug mode\n``````\n",
    "created_at": "2016-10-03T10:05:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321870",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
 This is a follow up to #17254 which upgraded to singular 4:
-*debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)
-*failing test in debug mode
+
+* debug (with xalloc) build on OS X (om_Info gets undefined (U) in Singular, note that it is ok on linux (B), maybe depends on ocmpiler, linker vesions)
+* failing test in debug mode
``````




---

archive/issue_comments_321871.json:
```json
{
    "body": "<a id='comment:2'></a>\n\n```\n24524sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed\n24525sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed\n24526sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed\n24527sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed\n24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n```",
    "created_at": "2016-10-21T07:03:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321871",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:2'></a>

```
24524sage -t --long src/sage/algebras/free_algebra.py  # 4 doctests failed
24525sage -t --long src/sage/algebras/letterplace/free_algebra_element_letterplace.pyx  # 6 doctests failed
24526sage -t --long src/sage/algebras/letterplace/free_algebra_letterplace.pyx  # 2 doctests failed
24527sage -t --long src/sage/algebras/letterplace/letterplace_ideal.pyx  # 10 doctests failed
24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
```



---

archive/issue_events_197455.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-21T09:40:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197455"
}
```



---

archive/issue_events_197456.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-21T09:40:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "label": "enhancement",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197456"
}
```



---

archive/issue_events_197457.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2016-10-21T09:40:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "label": "bug",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197457"
}
```



---

archive/issue_comments_321872.json:
```json
{
    "body": "<a id='comment:4'></a>\nAll of these errors look like:\n\n```\n    // ***dPolyReportError: NULL coef \n     occurred at\n     occurred for poly: o*x*y*x_1*y_1*x_2\n    // ***dPolyReportError: NULL coef \n     occurred at\n     occurred for poly: o*y*x_1*y_1*x_2\n    // ***dError: S_2_R[2]=1 != T[1].i_r=0\n    -y*z*x - y*z*y - y*z*z\n```\nexcept for the last one:\n\n```\n\nFile \"src/sage/schemes/curves/constructor.py\", line 108, in sage.schemes.curves.constructor.Curve\nFailed example:\n    C.genus()\nExpected:\n    13\nGot:\n    // ** no minpoly allowed if there are local objects belonging to the basering: \n    number((a2+a+1))\n    // ** killing a local object due to minpoly change: p\n    // ** no minpoly allowed if there are local objects belonging to the basering: \n    number((a2-a+1))\n    // ** killing a local object due to minpoly change: p\n    13\n```\n> 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n> 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n> 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n> }}}\n",
    "created_at": "2016-10-28T12:25:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321872",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:4'></a>
All of these errors look like:

```
    // ***dPolyReportError: NULL coef 
     occurred at
     occurred for poly: o*x*y*x_1*y_1*x_2
    // ***dPolyReportError: NULL coef 
     occurred at
     occurred for poly: o*y*x_1*y_1*x_2
    // ***dError: S_2_R[2]=1 != T[1].i_r=0
    -y*z*x - y*z*y - y*z*z
```
except for the last one:

```

File "src/sage/schemes/curves/constructor.py", line 108, in sage.schemes.curves.constructor.Curve
Failed example:
    C.genus()
Expected:
    13
Got:
    // ** no minpoly allowed if there are local objects belonging to the basering: 
    number((a2+a+1))
    // ** killing a local object due to minpoly change: p
    // ** no minpoly allowed if there are local objects belonging to the basering: 
    number((a2-a+1))
    // ** killing a local object due to minpoly change: p
    13
```
> 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
> 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
> 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
> }}}




---

archive/issue_comments_321873.json:
```json
{
    "body": "<a id='comment:5'></a>\nThread about first issue here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/TPZNlvZXei0",
    "created_at": "2016-10-28T14:33:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321873",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:5'></a>
Thread about first issue here:
* https://groups.google.com/forum/#!topic/libsingular-devel/TPZNlvZXei0



---

archive/issue_comments_321874.json:
```json
{
    "body": "<a id='comment:6'></a>\nAnd the second one here:\n* https://groups.google.com/forum/#!topic/libsingular-devel/tYuWlGOZdWo",
    "created_at": "2016-10-31T13:19:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321874",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>
And the second one here:
* https://groups.google.com/forum/#!topic/libsingular-devel/tYuWlGOZdWo



---

archive/issue_comments_321875.json:
```json
{
    "body": "<a id='comment:7'></a>\nWith #21631 there are now also many\n\n```\n // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n```\nwarnings, though no crashes.",
    "created_at": "2016-11-02T19:19:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321875",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:7'></a>
With #21631 there are now also many

```
 // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
```
warnings, though no crashes.



---

archive/issue_comments_321876.json:
```json
{
    "body": "<a id='comment:8'></a>\nCan you tell in which file it is?",
    "created_at": "2016-11-03T11:21:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321876",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:8'></a>
Can you tell in which file it is?



---

archive/issue_comments_321877.json:
```json
{
    "body": "<a id='comment:9'></a>\nOk, got it.",
    "created_at": "2016-11-03T12:19:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321877",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:9'></a>
Ok, got it.



---

archive/issue_comments_321878.json:
```json
{
    "body": "<a id='comment:10'></a>\nSee ##21865 for new errors occurring only in debug mode in:\n* sage/rings/cfinite_sequence.py\n* sage/matrix/matrix_modn_dense_template.pxi",
    "created_at": "2016-12-21T13:50:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321878",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:10'></a>
See ##21865 for new errors occurring only in debug mode in:
* sage/rings/cfinite_sequence.py
* sage/matrix/matrix_modn_dense_template.pxi



---

archive/issue_comments_321879.json:
```json
{
    "body": "<a id='comment:11'></a>\nthe last issue ( \"no minpoly allowed..\") can be fixed with\n\nhttps://github.com/Singular/Sources/pull/814\n(avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n\nDid you get answers from Hans for the other issues?\nOr, could you track them down?\n\n\nReplying to [jpflori](#comment%3A4):\n> All of these errors look like:\n> \n> ```\n>     // ***dPolyReportError: NULL coef \n>      occurred at\n>      occurred for poly: o*x*y*x_1*y_1*x_2\n>     // ***dPolyReportError: NULL coef \n>      occurred at\n>      occurred for poly: o*y*x_1*y_1*x_2\n>     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n>     -y*z*x - y*z*y - y*z*z\n> ```\n> except for the last one:\n> \n> ```\n> \n> File \"src/sage/schemes/curves/constructor.py\", line 108, in sage.schemes.curves.constructor.Curve\n> Failed example:\n>     C.genus()\n> Expected:\n>     13\n> Got:\n>     // ** no minpoly allowed if there are local objects belonging to the basering: \n>     number((a2+a+1))\n>     // ** killing a local object due to minpoly change: p\n>     // ** no minpoly allowed if there are local objects belonging to the basering: \n>     number((a2-a+1))\n>     // ** killing a local object due to minpoly change: p\n>     13\n> ```\n> > 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed\n> > 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed\n> > 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed\n> > }}}\n",
    "created_at": "2017-01-31T21:24:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321879",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:11'></a>
the last issue ( "no minpoly allowed..") can be fixed with

https://github.com/Singular/Sources/pull/814
(avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')

Did you get answers from Hans for the other issues?
Or, could you track them down?


Replying to [jpflori](#comment%3A4):
> All of these errors look like:
> 
> ```
>     // ***dPolyReportError: NULL coef 
>      occurred at
>      occurred for poly: o*x*y*x_1*y_1*x_2
>     // ***dPolyReportError: NULL coef 
>      occurred at
>      occurred for poly: o*y*x_1*y_1*x_2
>     // ***dError: S_2_R[2]=1 != T[1].i_r=0
>     -y*z*x - y*z*y - y*z*z
> ```
> except for the last one:
> 
> ```
> 
> File "src/sage/schemes/curves/constructor.py", line 108, in sage.schemes.curves.constructor.Curve
> Failed example:
>     C.genus()
> Expected:
>     13
> Got:
>     // ** no minpoly allowed if there are local objects belonging to the basering: 
>     number((a2+a+1))
>     // ** killing a local object due to minpoly change: p
>     // ** no minpoly allowed if there are local objects belonging to the basering: 
>     number((a2-a+1))
>     // ** killing a local object due to minpoly change: p
>     13
> ```
> > 24528sage -t --long src/sage/rings/quotient_ring.py  # 18 doctests failed
> > 24529sage -t --long src/sage/rings/quotient_ring_element.py  # 1 doctest failed
> > 24530sage -t --long src/sage/schemes/curves/constructor.py  # 1 doctest failed
> > }}}




---

archive/issue_comments_321880.json:
```json
{
    "body": "<a id='comment:12'></a>\nReplying to [vbraun](#comment%3A7):\n> With #21631 there are now also many\n> \n> ```\n>  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n> ```\n> warnings, though no crashes.\n\n\nso changes in #21631 introduced a new issue?\nCould someone track it down?",
    "created_at": "2017-01-31T21:47:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321880",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:12'></a>
Replying to [vbraun](#comment%3A7):
> With #21631 there are now also many
> 
> ```
>  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
> ```
> warnings, though no crashes.


so changes in #21631 introduced a new issue?
Could someone track it down?



---

archive/issue_comments_321881.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jakobkroeker](#comment%3A12):\n> Replying to [vbraun](#comment%3A7):\n> > With #21631 there are now also many\n> > \n> > ```\n> >  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName\n> > ```\n> > warnings, though no crashes.\n\n> \n> so changes in #21631 introduced a new issue?\n> Could someone track it down?\n\nThis has been fixed in Singular git version.",
    "created_at": "2017-02-01T13:06:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321881",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:13'></a>
Replying to [jakobkroeker](#comment%3A12):
> Replying to [vbraun](#comment%3A7):
> > With #21631 there are now also many
> > 
> > ```
> >  // ***dError: assume violation at numbers.cc:426 condition: n->cfCoeffName!=ndCoeffName
> > ```
> > warnings, though no crashes.

> 
> so changes in #21631 introduced a new issue?
> Could someone track it down?

This has been fixed in Singular git version.



---

archive/issue_comments_321882.json:
```json
{
    "body": "<a id='comment:14'></a>\nReplying to [jakobkroeker](#comment%3A11):\n> the last issue ( \"no minpoly allowed..\") can be fixed with\n> \n> https://github.com/Singular/Sources/pull/814\n> (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> \n\nGood! It's even in Singular's git version now.\n\n> Did you get answers from Hans for the other issues?\n> Or, could you track them down?\n> \n> \n> Replying to [jpflori](#comment%3A4):\n> > All of these errors look like:\n> > \n> > ```\n> >      occurred at\n> >      occurred for poly: o*y*x_1*y_1*x_2\n> >     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n> >     -y*z*x - y*z*y - y*z*z\n> > ```\n\nThose like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:\n* https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\nNo feedback from Hans and I had no time to look at it.",
    "created_at": "2017-02-01T13:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321882",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:14'></a>
Replying to [jakobkroeker](#comment%3A11):
> the last issue ( "no minpoly allowed..") can be fixed with
> 
> https://github.com/Singular/Sources/pull/814
> (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> 

Good! It's even in Singular's git version now.

> Did you get answers from Hans for the other issues?
> Or, could you track them down?
> 
> 
> Replying to [jpflori](#comment%3A4):
> > All of these errors look like:
> > 
> > ```
> >      occurred at
> >      occurred for poly: o*y*x_1*y_1*x_2
> >     // ***dError: S_2_R[2]=1 != T[1].i_r=0
> >     -y*z*x - y*z*y - y*z*z
> > ```

Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:
* https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ
No feedback from Hans and I had no time to look at it.



---

archive/issue_comments_321883.json:
```json
{
    "body": "<a id='comment:15'></a>\nI just reminded Hans kindly to look at that issue since it is\na blocker ticket for sage.\n\nhttps://groups.google.com/forum/#!msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\n\nLet's see if something happens.\n\n\n\nReplying to [jpflori](#comment%3A14):\n> Replying to [jakobkroeker](#comment%3A11):\n> > the last issue ( \"no minpoly allowed..\") can be fixed with\n> > \n> > https://github.com/Singular/Sources/pull/814\n> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> > \n\n> Good! It's even in Singular's git version now.\n> \n> > Did you get answers from Hans for the other issues?\n> > Or, could you track them down?\n> > \n> > \n> > Replying to [jpflori](#comment%3A4):\n> > > All of these errors look like:\n> > > \n> > > ```\n> > >      occurred at\n> > >      occurred for poly: o*y*x_1*y_1*x_2\n> > >     // ***dError: S_2_R[2]=1 != T[1].i_r=0\n> > >     -y*z*x - y*z*y - y*z*z\n> > > ```\n\n> Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:\n> * https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ\n> No feedback from Hans and I had no time to look at it.\n",
    "created_at": "2017-02-01T17:11:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321883",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:15'></a>
I just reminded Hans kindly to look at that issue since it is
a blocker ticket for sage.

https://groups.google.com/forum/#!msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ

Let's see if something happens.



Replying to [jpflori](#comment%3A14):
> Replying to [jakobkroeker](#comment%3A11):
> > the last issue ( "no minpoly allowed..") can be fixed with
> > 
> > https://github.com/Singular/Sources/pull/814
> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> > 

> Good! It's even in Singular's git version now.
> 
> > Did you get answers from Hans for the other issues?
> > Or, could you track them down?
> > 
> > 
> > Replying to [jpflori](#comment%3A4):
> > > All of these errors look like:
> > > 
> > > ```
> > >      occurred at
> > >      occurred for poly: o*y*x_1*y_1*x_2
> > >     // ***dError: S_2_R[2]=1 != T[1].i_r=0
> > >     -y*z*x - y*z*y - y*z*z
> > > ```

> Those like this were still present last time I checked and those about stuff not being where it belongs through kTest_L and kTest_TS as mentioned here:
> * https://groups.google.com/d/msg/libsingular-devel/TPZNlvZXei0/CptSq0fdAgAJ
> No feedback from Hans and I had no time to look at it.




---

archive/issue_comments_321884.json:
```json
{
    "body": "<a id='comment:16'></a>\nWith the latest tarball for 4-1-0p2, debug mode should be clean:\n* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/",
    "created_at": "2017-02-21T10:46:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321884",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:16'></a>
With the latest tarball for 4-1-0p2, debug mode should be clean:
* http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/



---

archive/issue_comments_321885.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [jpflori](#comment%3A16):\n> With the latest tarball for 4-1-0p2, debug mode should be clean:\n> * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/\n\n\nrelated singular commit is \nhttps://github.com/Singular/Sources/commit/54c80cb81ed58f166a023fc060f541e24ebd5892",
    "created_at": "2017-03-08T00:58:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321885",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:17'></a>
Replying to [jpflori](#comment%3A16):
> With the latest tarball for 4-1-0p2, debug mode should be clean:
> * http://www.mathematik.uni-kl.de/ftp/pub/Math/Singular/SOURCES/4-1-0/


related singular commit is 
https://github.com/Singular/Sources/commit/54c80cb81ed58f166a023fc060f541e24ebd5892



---

archive/issue_comments_321886.json:
```json
{
    "body": "<a id='comment:18'></a>\nReplying to [jpflori](#comment%3A14):\n> Replying to [jakobkroeker](#comment%3A11):\n> > the last issue ( \"no minpoly allowed..\") can be fixed with\n> > \n> > https://github.com/Singular/Sources/pull/814\n> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')\n> > \n\n> Good! It's even in Singular's git version now.\n\nThere are much more issues in Singular LIBs where the minpoly is not immediately defined (and lead to debug output) which are probably not hit by current sage tests, but in the long term they have all to be fixed:\nhttps://github.com/jakobkroeker/test_singular/issues/243",
    "created_at": "2017-03-08T01:10:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321886",
    "user": "https://trac.sagemath.org/admin/accounts/users/jakobkroeker"
}
```

<a id='comment:18'></a>
Replying to [jpflori](#comment%3A14):
> Replying to [jakobkroeker](#comment%3A11):
> > the last issue ( "no minpoly allowed..") can be fixed with
> > 
> > https://github.com/Singular/Sources/pull/814
> > (avoids intermediate object between ring declaration and minpoly definition in 'normal.lib')
> > 

> Good! It's even in Singular's git version now.

There are much more issues in Singular LIBs where the minpoly is not immediately defined (and lead to debug output) which are probably not hit by current sage tests, but in the long term they have all to be fixed:
https://github.com/jakobkroeker/test_singular/issues/243



---

archive/issue_events_197458.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-03-23T12:55:44Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "label": "blocker",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197458"
}
```



---

archive/issue_events_197459.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2017-03-23T12:55:44Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "milestone": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197459"
}
```



---

archive/issue_comments_321887.json:
```json
{
    "body": "<a id='comment:19'></a>\nI think I'm seeing this too.  I almost always compile with `SAGE_DEBUG=yes` on Cygwin since I have to debug things so often, and I'm seeing lots of failures like this since the switch to Singular 4.  Going to recompile Singular in non-debug mode to confirm that it goes away.\n\n(Also obviously this isn't a *blocker* or it'd be fixed by now :)",
    "created_at": "2017-03-23T12:55:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321887",
    "user": "https://github.com/embray"
}
```

<a id='comment:19'></a>
I think I'm seeing this too.  I almost always compile with `SAGE_DEBUG=yes` on Cygwin since I have to debug things so often, and I'm seeing lots of failures like this since the switch to Singular 4.  Going to recompile Singular in non-debug mode to confirm that it goes away.

(Also obviously this isn't a *blocker* or it'd be fixed by now :)



---

archive/issue_comments_321888.json:
```json
{
    "body": "<a id='comment:20'></a>\nConfirmed that rebuilding Singular and its dependents with `SAGE_DEBUG=no` fixed these failures for me.",
    "created_at": "2017-03-23T14:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321888",
    "user": "https://github.com/embray"
}
```

<a id='comment:20'></a>
Confirmed that rebuilding Singular and its dependents with `SAGE_DEBUG=no` fixed these failures for me.



---

archive/issue_comments_321889.json:
```json
{
    "body": "<a id='comment:21'></a>\n`@`eric: does #22425 fixed the errors you saw?\nI think we can close this one now #22425 is merged.",
    "created_at": "2017-04-03T11:41:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321889",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:21'></a>
`@`eric: does #22425 fixed the errors you saw?
I think we can close this one now #22425 is merged.



---

archive/issue_comments_321890.json:
```json
{
    "body": "<a id='comment:22'></a>\nI don't think I've tried yet.  I'll test it and see.  Are you saying it should be fixed even with `SAGE_DEBUG=yes`?",
    "created_at": "2017-04-03T12:02:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321890",
    "user": "https://github.com/embray"
}
```

<a id='comment:22'></a>
I don't think I've tried yet.  I'll test it and see.  Are you saying it should be fixed even with `SAGE_DEBUG=yes`?



---

archive/issue_comments_321891.json:
```json
{
    "body": "<a id='comment:23'></a>\nAll error messages specific to singular built in debug mode should not appear anymore.",
    "created_at": "2017-04-03T12:04:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321891",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:23'></a>
All error messages specific to singular built in debug mode should not appear anymore.



---

archive/issue_events_197460.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2017-04-25T11:20:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197460"
}
```



---

archive/issue_events_197461.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/jpflori",
    "created_at": "2017-04-25T11:20:30Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "label": "duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197461"
}
```



---

archive/issue_comments_321892.json:
```json
{
    "body": "<a id='comment:24'></a>\nShould be ok since the latest singular upgrade.",
    "created_at": "2017-04-25T11:20:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321892",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:24'></a>
Should be ok since the latest singular upgrade.



---

archive/issue_events_197462.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-25T17:36:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197462"
}
```



---

archive/issue_events_197463.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-25T17:36:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21624#event-197463"
}
```



---

archive/issue_comments_321893.json:
```json
{
    "body": "<a id='comment:25'></a>\nI'm still getting this one\n\n```\nsage -t --long src/sage/interfaces/singular.py\n**********************************************************************\nFile \"src/sage/interfaces/singular.py\", line 1523, in sage.interfaces.singular.SingularElement.sage_global_ring\nFailed example:\n    singular.eval('ring r5 = (complex,15,j),(a,b,c),dp')\nExpected:\n    ''\nGot:\n    '\\n// ***dError: assume violation at numbers.cc:434 condition: n->cfCoeffName!=ndCoeffName'\n**********************************************************************\n1 item had failures:\n   1 of  22 in sage.interfaces.singular.SingularElement.sage_global_ring\n    [390 tests, 1 failure, 10.81 s]\n```",
    "created_at": "2017-04-25T17:36:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321893",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:25'></a>
I'm still getting this one

```
sage -t --long src/sage/interfaces/singular.py
**********************************************************************
File "src/sage/interfaces/singular.py", line 1523, in sage.interfaces.singular.SingularElement.sage_global_ring
Failed example:
    singular.eval('ring r5 = (complex,15,j),(a,b,c),dp')
Expected:
    ''
Got:
    '\n// ***dError: assume violation at numbers.cc:434 condition: n->cfCoeffName!=ndCoeffName'
**********************************************************************
1 item had failures:
   1 of  22 in sage.interfaces.singular.SingularElement.sage_global_ring
    [390 tests, 1 failure, 10.81 s]
```



---

archive/issue_comments_321894.json:
```json
{
    "body": "<a id='comment:26'></a>\nMaybe #22868.\nDid not check debug mode there.",
    "created_at": "2017-04-25T17:39:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321894",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:26'></a>
Maybe #22868.
Did not check debug mode there.



---

archive/issue_comments_321895.json:
```json
{
    "body": "<a id='comment:27'></a>\nUnfortunately the failing test it is still here with 4.1.0p3.",
    "created_at": "2017-04-26T08:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321895",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:27'></a>
Unfortunately the failing test it is still here with 4.1.0p3.



---

archive/issue_comments_321896.json:
```json
{
    "body": "<a id='comment:28'></a>\nShould be fixed in git version:\n* https://github.com/Singular/Sources/commit/6af76a7a09a49e7e08065cdf078b2461e16af2eb\n\n`@`volker: do you see any other failures?",
    "created_at": "2017-04-27T10:17:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321896",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:28'></a>
Should be fixed in git version:
* https://github.com/Singular/Sources/commit/6af76a7a09a49e7e08065cdf078b2461e16af2eb

`@`volker: do you see any other failures?



---

archive/issue_comments_321897.json:
```json
{
    "body": "<a id='comment:29'></a>\nThese look a bit like they might be from Singular, haven't investigated further:\n\n```\nsage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_ideal.py\", line 1761, in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis\nFailed example:\n    Ideal(P(0)).interreduced_basis()\nExpected:\n    [0]\nGot:\n    wrong mod p number 140727535500960 at modulop.cc,158\n    [0]\n**********************************************************************\n1 item had failures:\n   1 of  13 in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis\n    [722 tests, 1 failure, 75.81 s]\nsage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py\n**********************************************************************\nFile \"src/sage/rings/polynomial/multi_polynomial_sequence.py\", line 1022, in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced\nFailed example:\n    Sequence([P(0)]).reduced()\nExpected:\n    [0]\nGot:\n    wrong mod p number 140727535505680 at modulop.cc,158\n    [0]\n**********************************************************************\n1 item had failures:\n   1 of  17 in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced\n    [235 tests, 1 failure, 14.47 s]\n```",
    "created_at": "2017-04-29T23:27:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321897",
    "user": "https://github.com/vbraun"
}
```

<a id='comment:29'></a>
These look a bit like they might be from Singular, haven't investigated further:

```
sage -t --long src/sage/rings/polynomial/multi_polynomial_ideal.py
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_ideal.py", line 1761, in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis
Failed example:
    Ideal(P(0)).interreduced_basis()
Expected:
    [0]
Got:
    wrong mod p number 140727535500960 at modulop.cc,158
    [0]
**********************************************************************
1 item had failures:
   1 of  13 in sage.rings.polynomial.multi_polynomial_ideal.?.interreduced_basis
    [722 tests, 1 failure, 75.81 s]
sage -t --long src/sage/rings/polynomial/multi_polynomial_sequence.py
**********************************************************************
File "src/sage/rings/polynomial/multi_polynomial_sequence.py", line 1022, in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced
Failed example:
    Sequence([P(0)]).reduced()
Expected:
    [0]
Got:
    wrong mod p number 140727535505680 at modulop.cc,158
    [0]
**********************************************************************
1 item had failures:
   1 of  17 in sage.rings.polynomial.multi_polynomial_sequence.PolynomialSequence_generic.reduced
    [235 tests, 1 failure, 14.47 s]
```



---

archive/issue_comments_321898.json:
```json
{
    "body": "<a id='comment:30'></a>\nError messages definitely from Singular, though it might be from bad input on Sage's side.",
    "created_at": "2017-05-02T09:44:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21624",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21624#issuecomment-321898",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:30'></a>
Error messages definitely from Singular, though it might be from bad input on Sage's side.
