# Issue 21886: sage --gdb not working (cygdb)

archive/issues_021649.json:
```json
{
    "body": "\n```\nralf@ark:~/sage> ./sage --gdb\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 SageMath version 7.5.beta2, Release Date: 2016-11-09               \u2502\n\u2502 Type \"notebook()\" for the browser-based notebook interface.        \u2502\n\u2502 Type \"help()\" for help.                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Warning: this is a prerelease version, and it may be unstable.     \u2503\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u251b\nUsage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].\nNo debug files were found in /home/ralf/sage/src/build. Aborting.\n```\nThis is with gdb package installed, and Sage compiled with `SAGE_INSTALL_GCC=yes`. I also reinstalled Cython with `SAGE_DEBUG=yes`.\n\nBranch/Commit: [b074470c01b4022e50b4c242a05c362f28c1337a](https://github.com/sagemath/sagetrac-mirror/commit/b074470c01b4022e50b4c242a05c362f28c1337a)\n\nReviewer: Ralf Stephan\n\nAuthor: Jeroen Demeyer\n\nResolution: fixed\n\nIssue created by migration from https://trac.sagemath.org/ticket/21886\n\n",
    "closed_at": "2016-11-21T21:56:18Z",
    "created_at": "2016-11-17T15:11:32Z",
    "labels": [
        "component: scripts",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "sage --gdb not working (cygdb)",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21886",
    "user": "https://github.com/rwst"
}
```

```
ralf@ark:~/sage> ./sage --gdb
┌────────────────────────────────────────────────────────────────────┐
│ SageMath version 7.5.beta2, Release Date: 2016-11-09               │
│ Type "notebook()" for the browser-based notebook interface.        │
│ Type "help()" for help.                                            │
└────────────────────────────────────────────────────────────────────┘
┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃ Warning: this is a prerelease version, and it may be unstable.     ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].
No debug files were found in /home/ralf/sage/src/build. Aborting.
```
This is with gdb package installed, and Sage compiled with `SAGE_INSTALL_GCC=yes`. I also reinstalled Cython with `SAGE_DEBUG=yes`.

Branch/Commit: [b074470c01b4022e50b4c242a05c362f28c1337a](https://github.com/sagemath/sagetrac-mirror/commit/b074470c01b4022e50b4c242a05c362f28c1337a)

Reviewer: Ralf Stephan

Author: Jeroen Demeyer

Resolution: fixed

Issue created by migration from https://trac.sagemath.org/ticket/21886





---

archive/issue_comments_407538.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -12,4 +12,4 @@\n Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].\n No debug files were found in /home/ralf/sage/src/build. Aborting.\n ```\n-This is with gdb package installed, and Sage compiled with `SAGE_INTERNAL_GCC=yes`. I also reinstalled Cython with `SAGE_DEBUG=yes`.\n+This is with gdb package installed, and Sage compiled with `SAGE_INSTALL_GCC=yes`. I also reinstalled Cython with `SAGE_DEBUG=yes`.\n``````\n",
    "created_at": "2016-11-17T15:12:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407538",
    "user": "https://github.com/rwst"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -12,4 +12,4 @@
 Usage: cygdb [options] [PATH [-- GDB_ARGUMENTS]].
 No debug files were found in /home/ralf/sage/src/build. Aborting.
 ```
-This is with gdb package installed, and Sage compiled with `SAGE_INTERNAL_GCC=yes`. I also reinstalled Cython with `SAGE_DEBUG=yes`.
+This is with gdb package installed, and Sage compiled with `SAGE_INSTALL_GCC=yes`. I also reinstalled Cython with `SAGE_DEBUG=yes`.
``````




---

archive/issue_comments_407539.json:
```json
{
    "body": "<a id='comment:2'></a>\nIt works if I explicitly set `SAGE_DEBUG=no`. I think my problem was that here\n\n```\n    if [ \"$SAGE_DEBUG\" = \"no\" ]; then\n        gdb -x \"$SAGE_LOCAL/bin/sage-gdb-commands\" \\\n            -args python \"$SAGE_LOCAL/bin/sage-ipython\" \"$@\" -i\n    else\n        cygdb \"$SAGE_SRC/build\" \"$SAGE_SRC/sage\" \\\n            -- -x \"$SAGE_LOCAL/bin/sage-gdb-commands\" \\\n            -args python \"$SAGE_LOCAL/bin/sage-ipython\" \"$@\" -i\n    fi\n```\nis checked for \"no\" instead of not \"yes\".\n\n(EDIT) That leaves the issue of cygdb. I adapt the ticket heading.",
    "created_at": "2016-11-17T15:26:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407539",
    "user": "https://github.com/rwst"
}
```

<a id='comment:2'></a>
It works if I explicitly set `SAGE_DEBUG=no`. I think my problem was that here

```
    if [ "$SAGE_DEBUG" = "no" ]; then
        gdb -x "$SAGE_LOCAL/bin/sage-gdb-commands" \
            -args python "$SAGE_LOCAL/bin/sage-ipython" "$@" -i
    else
        cygdb "$SAGE_SRC/build" "$SAGE_SRC/sage" \
            -- -x "$SAGE_LOCAL/bin/sage-gdb-commands" \
            -args python "$SAGE_LOCAL/bin/sage-ipython" "$@" -i
    fi
```
is checked for "no" instead of not "yes".

(EDIT) That leaves the issue of cygdb. I adapt the ticket heading.



---

archive/issue_events_065704.json:
```json
{
    "event": "renamed",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "rename": {
        "from": "sage --gdb not working",
        "to": "sage --gdb not working (cygdb)"
    },
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21886#event-65704"
}
```



---

archive/issue_comments_407540.json:
```json
{
    "body": "Changing author from \"\" to \"Jeroen Demeyer\"",
    "created_at": "2016-11-18T09:48:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407540",
    "user": "https://github.com/jdemeyer"
}
```

Changing author from "" to "Jeroen Demeyer"



---

archive/issue_comments_407541.json:
```json
{
    "body": "Changing branch from \"\" to \"u/jdemeyer/sage___gdb_not_working__cygdb_\"",
    "created_at": "2016-11-19T17:12:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407541",
    "user": "https://github.com/jdemeyer"
}
```

Changing branch from "" to "u/jdemeyer/sage___gdb_not_working__cygdb_"



---

archive/issue_comments_407542.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-11-19T17:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407542",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_407543.json:
```json
{
    "body": "<a id='comment:5'></a>\nNew commits:\n|                                                                                                                                          |                                     |\n|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|\n|[b074470](https://github.com/sagemath/sagetrac-mirror/commit/b074470c01b4022e50b4c242a05c362f28c1337a)|`Fix directory to cython_debug files`|",
    "created_at": "2016-11-19T17:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407543",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:5'></a>
New commits:
|                                                                                                                                          |                                     |
|------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------|
|[b074470](https://github.com/sagemath/sagetrac-mirror/commit/b074470c01b4022e50b4c242a05c362f28c1337a)|`Fix directory to cython_debug files`|



---

archive/issue_comments_407544.json:
```json
{
    "body": "Changing commit from \"\" to \"b074470c01b4022e50b4c242a05c362f28c1337a\"",
    "created_at": "2016-11-19T17:40:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407544",
    "user": "https://github.com/jdemeyer"
}
```

Changing commit from "" to "b074470c01b4022e50b4c242a05c362f28c1337a"



---

archive/issue_comments_407545.json:
```json
{
    "body": "Changing reviewer from \"\" to \"Ralf Stephan\"",
    "created_at": "2016-11-20T09:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407545",
    "user": "https://github.com/rwst"
}
```

Changing reviewer from "" to "Ralf Stephan"



---

archive/issue_comments_407546.json:
```json
{
    "body": "<a id='comment:6'></a>\nThanks, it works now.",
    "created_at": "2016-11-20T09:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407546",
    "user": "https://github.com/rwst"
}
```

<a id='comment:6'></a>
Thanks, it works now.



---

archive/issue_comments_407547.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-11-20T09:06:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407547",
    "user": "https://github.com/rwst"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_407548.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-11-21T21:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407548",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_065705.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-11-21T21:56:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21886#event-65705"
}
```



---

archive/issue_comments_407549.json:
```json
{
    "body": "Changing branch from \"u/jdemeyer/sage___gdb_not_working__cygdb_\" to \"b074470c01b4022e50b4c242a05c362f28c1337a\"",
    "created_at": "2016-11-21T21:56:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21886",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21886#issuecomment-407549",
    "user": "https://github.com/vbraun"
}
```

Changing branch from "u/jdemeyer/sage___gdb_not_working__cygdb_" to "b074470c01b4022e50b4c242a05c362f28c1337a"
