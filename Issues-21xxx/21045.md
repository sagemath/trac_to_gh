# Issue 21045: Implement Zariski-VanKampen method to compute fundamental groups of complements of plane curves.

archive/issues_020808.json:
```json
{
    "assignees": [],
    "body": "This ticket implements the computation of the fundamental group of the complement of a plane (affine or projective) curve over the rationals or number fields with an embedding in QQbar (in theory it could be done for more general fields, but most likely wouldn't be practical).\n\n\nSome use examples:\n\n```\nsage: A.<x,y> = AffineSpace(QQ, 2)\nsage: C = A.curve(y^2 - x^3 - x^2)\nsage: C.fundamental_group() \nFinitely presented group < x0 |  >\n```\n\n```\nsage: a = QQ[x](x^2+5).roots(QQbar)[0][0]\nsage: a\n-2.236067977499790?*I\nsage: F = NumberField(a.minpoly(), 'a', embedding=a)\nsage: P.<x,y,z> = ProjectiveSpace(F, 2)\nsage: F.inject_variables()\nDefining a\nsage: C = P.curve(x^2 + a * y^2)\nsage: C.fundamental_group() \nFinitely presented group < x0 |  >\n```\n\nIt relies on version 2 of the SIROCCO library [1] that performs a certified root continuation method specifically tailored for this task.\n\nThis same ticket implements the inclusion of Sirocco as an optional package (so it must be installed in order for the functinality to be available). The tarball is available in [2].\n\n- [1] \u200bhttps://github.com/miguelmarco/SIROCCO2\n- [2] \u200bhttps://iuma.unizar.es/es/investigacion/software/sirocco\n\n\n\nCC:  @sagetrac-gjorgenson @bhutz @sagetrac-caravantes @tscrim\n\nBranch/Commit: **[d0b297e](https://github.com/sagemath/sagetrac-mirror/commit/d0b297e09603bc2844c2b6c147d0c133f2f0cf6a)**\n\nReviewer: **Travis Scrimshaw**\n\nAuthor: **Miguel Marco**\n\nComponent: **algebraic geometry**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21045_\n\n",
    "closed_at": "2017-04-25T17:40:18Z",
    "created_at": "2016-07-18T08:42:37Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-8.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Implement Zariski-VanKampen method to compute fundamental groups of complements of plane curves.",
    "type": "issue",
    "updated_at": "2017-04-25T17:40:18Z",
    "url": "https://github.com/sagemath/sage/issues/21045",
    "user": "https://github.com/miguelmarco"
}
```
This ticket implements the computation of the fundamental group of the complement of a plane (affine or projective) curve over the rationals or number fields with an embedding in QQbar (in theory it could be done for more general fields, but most likely wouldn't be practical).


Some use examples:

```
sage: A.<x,y> = AffineSpace(QQ, 2)
sage: C = A.curve(y^2 - x^3 - x^2)
sage: C.fundamental_group() 
Finitely presented group < x0 |  >
```

```
sage: a = QQ[x](x^2+5).roots(QQbar)[0][0]
sage: a
-2.236067977499790?*I
sage: F = NumberField(a.minpoly(), 'a', embedding=a)
sage: P.<x,y,z> = ProjectiveSpace(F, 2)
sage: F.inject_variables()
Defining a
sage: C = P.curve(x^2 + a * y^2)
sage: C.fundamental_group() 
Finitely presented group < x0 |  >
```

It relies on version 2 of the SIROCCO library [1] that performs a certified root continuation method specifically tailored for this task.

This same ticket implements the inclusion of Sirocco as an optional package (so it must be installed in order for the functinality to be available). The tarball is available in [2].

- [1] ​https://github.com/miguelmarco/SIROCCO2
- [2] ​https://iuma.unizar.es/es/investigacion/software/sirocco



CC:  @sagetrac-gjorgenson @bhutz @sagetrac-caravantes @tscrim

Branch/Commit: **[d0b297e](https://github.com/sagemath/sagetrac-mirror/commit/d0b297e09603bc2844c2b6c147d0c133f2f0cf6a)**

Reviewer: **Travis Scrimshaw**

Author: **Miguel Marco**

Component: **algebraic geometry**

_Issue created by migration from https://trac.sagemath.org/ticket/21045_





---

archive/issue_events_295998.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2016-07-18T08:42:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-295998"
}
```



---

archive/issue_events_295999.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2016-07-18T08:42:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20algebraic%20geometry",
    "label_color": "0000ff",
    "label_name": "c: algebraic geometry",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-295999"
}
```



---

archive/issue_events_296000.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2016-07-18T08:42:37Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296000"
}
```



---

archive/issue_comments_306023.json:
```json
{
    "body": "Attachment: **[libsirocco-1.1.tar.gz](https://github.com/sagemath/sage/files/ticket21045/libsirocco-1.1.tar.gz)**\n\nThe sirocco library.",
    "created_at": "2016-07-18T08:43:04Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306023",
    "user": "https://github.com/miguelmarco"
}
```

Attachment: **[libsirocco-1.1.tar.gz](https://github.com/sagemath/sage/files/ticket21045/libsirocco-1.1.tar.gz)**

The sirocco library.



---

archive/issue_comments_306024.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,5 @@\n This ticket implements the computation of the fundamental group of the complement of a plane (affine or projective) curve over the rationals or number fields with an embedding in QQbar (in theory it could be done for more general fields, but most likely wouldn't be practical).\n \n It relies on the SIROCCO library [1] that performs a certified root continuation method specifically tailored for this task.\n+\n+[1] https://github.com/miguelmarco/sirocco\n``````\n",
    "created_at": "2016-07-18T09:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306024",
    "user": "https://github.com/slel"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,5 @@
 This ticket implements the computation of the fundamental group of the complement of a plane (affine or projective) curve over the rationals or number fields with an embedding in QQbar (in theory it could be done for more general fields, but most likely wouldn't be practical).
 
 It relies on the SIROCCO library [1] that performs a certified root continuation method specifically tailored for this task.
+
+[1] https://github.com/miguelmarco/sirocco
``````




---

archive/issue_comments_306025.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nAdd link to Sirocco library in ticket description.",
    "created_at": "2016-07-18T09:07:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306025",
    "user": "https://github.com/slel"
}
```

<div id="comment:1" align="right">comment:1</div>

Add link to Sirocco library in ticket description.



---

archive/issue_comments_306026.json:
```json
{
    "body": "Branch: **[u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_)**",
    "created_at": "2016-07-19T14:36:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306026",
    "user": "https://github.com/miguelmarco"
}
```

Branch: **[u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_)**



---

archive/issue_events_296001.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2016-07-19T15:11:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296001"
}
```



---

archive/issue_comments_306027.json:
```json
{
    "body": "Author: **Miguel Marco**",
    "created_at": "2016-07-19T15:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306027",
    "user": "https://github.com/miguelmarco"
}
```

Author: **Miguel Marco**



---

archive/issue_comments_306028.json:
```json
{
    "body": "<div id=\"comment:3\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/20f7bb2e46f7dd0d646765a8b85c68fb93cca7ca\">20f7bb2</a></td><td><code>Add sirocco package and zarisk-vankampen implementation</code></td></tr></table>\n",
    "created_at": "2016-07-19T15:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306028",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:3"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/20f7bb2e46f7dd0d646765a8b85c68fb93cca7ca">20f7bb2</a></td><td><code>Add sirocco package and zarisk-vankampen implementation</code></td></tr></table>




---

archive/issue_comments_306029.json:
```json
{
    "body": "Commit: **[20f7bb2](https://github.com/sagemath/sagetrac-mirror/commit/20f7bb2e46f7dd0d646765a8b85c68fb93cca7ca)**",
    "created_at": "2016-07-19T15:11:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306029",
    "user": "https://github.com/miguelmarco"
}
```

Commit: **[20f7bb2](https://github.com/sagemath/sagetrac-mirror/commit/20f7bb2e46f7dd0d646765a8b85c68fb93cca7ca)**



---

archive/issue_events_296002.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2017-01-12T06:48:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296002"
}
```



---

archive/issue_events_296003.json:
```json
{
    "actor": "https://github.com/cheuberg",
    "created_at": "2017-01-12T06:48:43Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296003"
}
```



---

archive/issue_comments_306030.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis does no longer merge with current sage releases.",
    "created_at": "2017-01-12T06:48:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306030",
    "user": "https://github.com/cheuberg"
}
```

<div id="comment:4" align="right">comment:4</div>

This does no longer merge with current sage releases.



---

archive/issue_comments_306031.json:
```json
{
    "body": "<div id=\"comment:5\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/6e26772ed7444c9e59ad9605ce2a37067acd5c79\">6e26772</a></td><td><code>Add sirocco package and zarisk-vankampen implementation</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/4562507aa0d195e75ea0b11927739b7717a9b9e9\">4562507</a></td><td><code>Update to sirocco version 2.0</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/fc3f6b39093169ca9415dbd05e70104c8fb43eaf\">fc3f6b3</a></td><td><code>Adapt optional extension to c++</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/97a759826dd3cbeb3f5fcd95743e515c3de0a920\">97a7598</a></td><td><code>Fixed imports</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/bb898e46393284489cb0858205ae27d6457bb69c\">bb898e4</a></td><td><code>Merge branch 'u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_' of git://trac.sagemath.org/sage into t/21045/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_</code></td></tr></table>\n",
    "created_at": "2017-04-07T23:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306031",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:5"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/6e26772ed7444c9e59ad9605ce2a37067acd5c79">6e26772</a></td><td><code>Add sirocco package and zarisk-vankampen implementation</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/4562507aa0d195e75ea0b11927739b7717a9b9e9">4562507</a></td><td><code>Update to sirocco version 2.0</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/fc3f6b39093169ca9415dbd05e70104c8fb43eaf">fc3f6b3</a></td><td><code>Adapt optional extension to c++</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/97a759826dd3cbeb3f5fcd95743e515c3de0a920">97a7598</a></td><td><code>Fixed imports</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/bb898e46393284489cb0858205ae27d6457bb69c">bb898e4</a></td><td><code>Merge branch 'u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_' of git://trac.sagemath.org/sage into t/21045/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_</code></td></tr></table>




---

archive/issue_comments_306032.json:
```json
{
    "body": "Changed commit from **[20f7bb2](https://github.com/sagemath/sagetrac-mirror/commit/20f7bb2e46f7dd0d646765a8b85c68fb93cca7ca)** to **[bb898e4](https://github.com/sagemath/sagetrac-mirror/commit/bb898e46393284489cb0858205ae27d6457bb69c)**",
    "created_at": "2017-04-07T23:45:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306032",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[20f7bb2](https://github.com/sagemath/sagetrac-mirror/commit/20f7bb2e46f7dd0d646765a8b85c68fb93cca7ca)** to **[bb898e4](https://github.com/sagemath/sagetrac-mirror/commit/bb898e46393284489cb0858205ae27d6457bb69c)**



---

archive/issue_events_296004.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-08T19:01:01Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296004"
}
```



---

archive/issue_events_296005.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-08T19:01:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296005"
}
```



---

archive/issue_events_296006.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-08T19:01:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296006"
}
```



---

archive/issue_events_296007.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-08T19:01:01Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "milestone_number": null,
    "milestone_title": "sage-7.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296007"
}
```



---

archive/issue_events_296008.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-08T19:01:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "milestone_number": null,
    "milestone_title": "sage-8.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296008"
}
```



---

archive/issue_comments_306033.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,5 +1,33 @@\n This ticket implements the computation of the fundamental group of the complement of a plane (affine or projective) curve over the rationals or number fields with an embedding in QQbar (in theory it could be done for more general fields, but most likely wouldn't be practical).\n \n-It relies on the SIROCCO library [1] that performs a certified root continuation method specifically tailored for this task.\n \n-[1] https://github.com/miguelmarco/sirocco\n+Some use examples:\n+\n+```\n+sage: A.<x,y> = AffineSpace(QQ, 2)\n+sage: C = A.curve(y^2 - x^3 - x^2)\n+sage: C.fundamental_group() \n+Finitely presented group < x0 |  >\n+```\n+\n+```\n+sage: a = QQ[x](x^2+5).roots(QQbar)[0][0]\n+sage: a\n+-2.236067977499790?*I\n+sage: F = NumberField(a.minpoly(), 'a', embedding=a)\n+sage: P.<x,y,z> = ProjectiveSpace(F, 2)\n+sage: F.inject_variables()\n+Defining a\n+sage: C = P.curve(x^2 + a * y^2)\n+sage: C.fundamental_group() \n+Finitely presented group < x0 |  >\n+```\n+\n+It relies on version 2 of the SIROCCO library [1] that performs a certified root continuation method specifically tailored for this task.\n+\n+This same ticket implements the inclusion of Sirocco as an optional package (so it must be installed in order for the functinality to be available). The tarball is available in [2].\n+\n+- [1] \u200bhttps://github.com/miguelmarco/SIROCCO2\n+- [2] \u200bhttps://iuma.unizar.es/es/investigacion/software/sirocco\n+\n+\n``````\n",
    "created_at": "2017-04-08T19:01:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306033",
    "user": "https://github.com/miguelmarco"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,5 +1,33 @@
 This ticket implements the computation of the fundamental group of the complement of a plane (affine or projective) curve over the rationals or number fields with an embedding in QQbar (in theory it could be done for more general fields, but most likely wouldn't be practical).
 
-It relies on the SIROCCO library [1] that performs a certified root continuation method specifically tailored for this task.
 
-[1] https://github.com/miguelmarco/sirocco
+Some use examples:
+
+```
+sage: A.<x,y> = AffineSpace(QQ, 2)
+sage: C = A.curve(y^2 - x^3 - x^2)
+sage: C.fundamental_group() 
+Finitely presented group < x0 |  >
+```
+
+```
+sage: a = QQ[x](x^2+5).roots(QQbar)[0][0]
+sage: a
+-2.236067977499790?*I
+sage: F = NumberField(a.minpoly(), 'a', embedding=a)
+sage: P.<x,y,z> = ProjectiveSpace(F, 2)
+sage: F.inject_variables()
+Defining a
+sage: C = P.curve(x^2 + a * y^2)
+sage: C.fundamental_group() 
+Finitely presented group < x0 |  >
+```
+
+It relies on version 2 of the SIROCCO library [1] that performs a certified root continuation method specifically tailored for this task.
+
+This same ticket implements the inclusion of Sirocco as an optional package (so it must be installed in order for the functinality to be available). The tarball is available in [2].
+
+- [1] ​https://github.com/miguelmarco/SIROCCO2
+- [2] ​https://iuma.unizar.es/es/investigacion/software/sirocco
+
+
``````




---

archive/issue_comments_306034.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nI think it is ready for review.\n\nNote that in order for the functionality to be available, the package sirocco 2 must be installed. The tarball must be downloaded and copied to the upstream directory.\n\nNote also that currently the file name must be corrected (there is a superfluous underscore). I asked the webmaster to correct it.",
    "created_at": "2017-04-08T19:03:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306034",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:7" align="right">comment:7</div>

I think it is ready for review.

Note that in order for the functionality to be available, the package sirocco 2 must be installed. The tarball must be downloaded and copied to the upstream directory.

Note also that currently the file name must be corrected (there is a superfluous underscore). I asked the webmaster to correct it.



---

archive/issue_comments_306035.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThe quick comments:\n\n- For bullet points, you need to format them as:\n\n  ```\n  - a really long line continues\n    at the same starting point\n  ```\n- Is there a reason why `contpath_mp` and `contpath` are not `cpdef`? Subsequently, they could have a specified return type? For `contpath_mp`, you could fill in the list in a second for loop to avoid the list comprehension.\n- For `contpath`, do you want to force input types?\n- Error messages should start with a lower case.\n- Do you want to make zariski_vankampen.py a Cython file for speed?\n- You don't need to do this `j = <int>i`; the `range` will give you `int`, especially if you `cdef int i`.\n- `res` does not seem to be used in `contpath_mp`.\n- I think there are better ways to construct a new (unset) `RealField` (in `contpath_mp`), but I don't remember how to do so offhand. You should also create the parent outside of the for loop.\n- `fundamental_group` appears twice in `affine_curve.py`.",
    "created_at": "2017-04-08T20:05:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306035",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:8" align="right">comment:8</div>

The quick comments:

- For bullet points, you need to format them as:

  ```
  - a really long line continues
    at the same starting point
  ```
- Is there a reason why `contpath_mp` and `contpath` are not `cpdef`? Subsequently, they could have a specified return type? For `contpath_mp`, you could fill in the list in a second for loop to avoid the list comprehension.
- For `contpath`, do you want to force input types?
- Error messages should start with a lower case.
- Do you want to make zariski_vankampen.py a Cython file for speed?
- You don't need to do this `j = <int>i`; the `range` will give you `int`, especially if you `cdef int i`.
- `res` does not seem to be used in `contpath_mp`.
- I think there are better ways to construct a new (unset) `RealField` (in `contpath_mp`), but I don't remember how to do so offhand. You should also create the parent outside of the for loop.
- `fundamental_group` appears twice in `affine_curve.py`.



---

archive/issue_comments_306036.json:
```json
{
    "body": "Changed commit from **[bb898e4](https://github.com/sagemath/sagetrac-mirror/commit/bb898e46393284489cb0858205ae27d6457bb69c)** to **[f3d12bc](https://github.com/sagemath/sagetrac-mirror/commit/f3d12bc1a675ceba07e970602e0835bef7ce1f16)**",
    "created_at": "2017-04-09T17:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306036",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[bb898e4](https://github.com/sagemath/sagetrac-mirror/commit/bb898e46393284489cb0858205ae27d6457bb69c)** to **[f3d12bc](https://github.com/sagemath/sagetrac-mirror/commit/f3d12bc1a675ceba07e970602e0835bef7ce1f16)**



---

archive/issue_comments_306037.json:
```json
{
    "body": "<div id=\"comment:9\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f3d12bc1a675ceba07e970602e0835bef7ce1f16\">f3d12bc</a></td><td><code>Some review fixes.</code></td></tr></table>\n",
    "created_at": "2017-04-09T17:28:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306037",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:9"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f3d12bc1a675ceba07e970602e0835bef7ce1f16">f3d12bc</a></td><td><code>Some review fixes.</code></td></tr></table>




---

archive/issue_comments_306038.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nThanks for the review.\n\nReplying to [@tscrim](#comment:8):\n> The quick comments:\n> \n> - For bullet points, you need to format them as:\n> \n>   ```\n>   - a really long line continues\n>     at the same starting point\n>   ```\n\nFixed (I think I didn't miss anyone).\n\n> - Is there a reason why `contpath_mp` and `contpath` are not `cpdef`? Subsequently, they could have a specified return type? For `contpath_mp`, you could fill in the list in a second for loop to avoid the list comprehension.\n\nThere is a reason for that: I didn't know about cpdef until now. \n\nAbout the return type, it should be list[list[RealNumber]], but that doesn't seem to work. list[list] works though.\n\nWhat is exactly the problem with list comprehension?\n\n> - For `contpath`, do you want to force input types?\n\nDone, but I don't see any advantage in doing so. If there is a speedup, it is negligible.\n\n> - Error messages should start with a lower case.\n\nFixed.\n\n\n> - Do you want to make zariski_vankampen.py a Cython file for speed?\n\nI tried it, but got some error messages related to the use of parallel functions.\n\nAnyways, I don't expect a significant speedup by compiling it: the bottlenecks are calls to external functions (mainly discriminant computation and contpath calls). The only part that could benefit from compilation is the braid reconstruction from the piecewise linear paths, but my experience shows that this time is very small compared to the computation of the paths themselves.\n\nI could try to cythonize it, but would need some help.\n\n> - You don't need to do this `j = <int>i`; the `range` will give you `int`, especially if you `cdef int i`.\n\nFixed.\n\n> - `res` does not seem to be used in `contpath_mp`.\n\nFixed.\n\n> - I think there are better ways to construct a new (unset) `RealField` (in `contpath_mp`), but I don't remember how to do so offhand. You should also create the parent outside of the for loop.\n\nI tried several ways and this was the one that worked. If you remember a better way, please let me know.\n\n> - `fundamental_group` appears twice in `affine_curve.py`.\n\nFixed.",
    "created_at": "2017-04-09T17:31:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306038",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:10" align="right">comment:10</div>

Thanks for the review.

Replying to [@tscrim](#comment:8):
> The quick comments:
> 
> - For bullet points, you need to format them as:
> 
>   ```
>   - a really long line continues
>     at the same starting point
>   ```

Fixed (I think I didn't miss anyone).

> - Is there a reason why `contpath_mp` and `contpath` are not `cpdef`? Subsequently, they could have a specified return type? For `contpath_mp`, you could fill in the list in a second for loop to avoid the list comprehension.

There is a reason for that: I didn't know about cpdef until now. 

About the return type, it should be list[list[RealNumber]], but that doesn't seem to work. list[list] works though.

What is exactly the problem with list comprehension?

> - For `contpath`, do you want to force input types?

Done, but I don't see any advantage in doing so. If there is a speedup, it is negligible.

> - Error messages should start with a lower case.

Fixed.


> - Do you want to make zariski_vankampen.py a Cython file for speed?

I tried it, but got some error messages related to the use of parallel functions.

Anyways, I don't expect a significant speedup by compiling it: the bottlenecks are calls to external functions (mainly discriminant computation and contpath calls). The only part that could benefit from compilation is the braid reconstruction from the piecewise linear paths, but my experience shows that this time is very small compared to the computation of the paths themselves.

I could try to cythonize it, but would need some help.

> - You don't need to do this `j = <int>i`; the `range` will give you `int`, especially if you `cdef int i`.

Fixed.

> - `res` does not seem to be used in `contpath_mp`.

Fixed.

> - I think there are better ways to construct a new (unset) `RealField` (in `contpath_mp`), but I don't remember how to do so offhand. You should also create the parent outside of the for loop.

I tried several ways and this was the one that worked. If you remember a better way, please let me know.

> - `fundamental_group` appears twice in `affine_curve.py`.

Fixed.



---

archive/issue_comments_306039.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI can do a first attempt at cythonizing. Do you have a good test case that is not too slow nor too fast to do profiling on to see where the current bottlenecks are?\n\nThe reason I bring up the list comprehension is Cython cannot handle them in c(p)def (maybe just cpdef) functions.",
    "created_at": "2017-04-10T00:35:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306039",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:11" align="right">comment:11</div>

I can do a first attempt at cythonizing. Do you have a good test case that is not too slow nor too fast to do profiling on to see where the current bottlenecks are?

The reason I bring up the list comprehension is Cython cannot handle them in c(p)def (maybe just cpdef) functions.



---

archive/issue_comments_306040.json:
```json
{
    "body": "Changed commit from **[f3d12bc](https://github.com/sagemath/sagetrac-mirror/commit/f3d12bc1a675ceba07e970602e0835bef7ce1f16)** to **[e7796fb](https://github.com/sagemath/sagetrac-mirror/commit/e7796fb6c8b631e8e63b8b807c3ebaf4a1e8cdc7)**",
    "created_at": "2017-04-10T17:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306040",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[f3d12bc](https://github.com/sagemath/sagetrac-mirror/commit/f3d12bc1a675ceba07e970602e0835bef7ce1f16)** to **[e7796fb](https://github.com/sagemath/sagetrac-mirror/commit/e7796fb6c8b631e8e63b8b807c3ebaf4a1e8cdc7)**



---

archive/issue_comments_306041.json:
```json
{
    "body": "<div id=\"comment:12\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/e7796fb6c8b631e8e63b8b807c3ebaf4a1e8cdc7\">e7796fb</a></td><td><code>Fixed some doctests, and bug when variables are not x,y</code></td></tr></table>\n",
    "created_at": "2017-04-10T17:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306041",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:12"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/e7796fb6c8b631e8e63b8b807c3ebaf4a1e8cdc7">e7796fb</a></td><td><code>Fixed some doctests, and bug when variables are not x,y</code></td></tr></table>




---

archive/issue_comments_306042.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI fixed some doctest and a bug that prevented it to work when the variables where not x and y.\n\nAbout nontrivial examples to test, here are two:\n\nThis one is a good example of the power of sirocco: this group is computed in a few seconds, and as far as I know, it has never been computed before (even though the curve has been explicitely studied)\n\n```\nsage: F = NumberField(QQ[x]('x^2+1'), 'I', embedding = QQbar(I))\nsage: F.inject_variables()\nDefining I\nsage: P.<x,y,z> = ProjectiveSpace(F,2)\nsage: c = P.curve((4131/160000*I + 20493/640000)*x^4*y^2 + (-21883/240000*I - 243083/4320000)*x^3*y^3 + (4301/60000*I + 22393/1440000)*x^2*y^4 + (-729/50000*I - 145071/1600000)*x^4*y*z + (4391/400000*I + 92699/800000)*x^3*y^2*z + (20251/100000*I + 50513/900000)*x^2*y^3*z + (-4301/18750*I - 22393/450000)*x*y^4*z + (-72171/4000000*I + 767637/16000000)*x^4*z^2 + (121131/1000000*I + 147717/1000000)*x^3*y*z^2 + (-42633/125000*I - 169493/375000)*x^2*y^2*z^2 + (6341/62500*I + 97183/562500)*x*y^3*z^2 + (8602/46875*I + 22393/562500)*y^4*z^2 + (1323/250000*I - 167481/1000000)*x^3*z^3 + (-3621/62500*I + 47037/250000)*x^2*y*z^3 + (5189/15625*I + 24559/125000)*x*y^2*z^3 + (-14404/46875*I - 80002/421875)*y^3*z^3 + (189/5000*I + 81/625)*x^2*z^4 + (-177/1250*I - 339/1250)*x*y*z^4 + (68/625*I + 253/1875)*y^2*z^4)\nsage: c.fundamental_group()\nFinitely presented group < x2, x56 | x2^-1*x56*(x2^-1*x56^-1)^3*x2*x56*x2^-1*x56^-1, (x56^-1*x2^-1)^2*x56*x2*x56^2*x2^-1*x56^-1*x2*x56*x2*x56^-1, x56^-1*x2^-1*(x56*x2)^2*x56^-1*x2^-1*x56^-1*x2*x56^2*x2*x56^-1*x2^-1*x56^-1 >\n\n```\n\nThis other one takes a couple of minutes in my laptop. It was the motivation for the writing of GAP3's VKCURVE package (which computes it in almost half an hour in the same computer):\n\n```\nsage: A.<x,y> = AffineSpace(QQ,2)\nsage: c = A.curve(746496+3732480*x-3111936*x*y^2-93281756/27*x*y^4+58341596/27*x*y^6+7464960*x^2-384*y^2-9334272*x^2*y^2    +17556484/27*x^2*y^4+43196/27*x^2*y^6+7464576*x^3-756138248/81*x^3*y^2+192792964/81*x^3*y^4+16/81*x^3*y^6+3730944*x^4   -139967996/81*y^4-84021416/27*x^4*y^2+82088/27*x^4*y^4+744192*x^5+43192/27*x^5*y^2-1720/27*x^5*y^4 -124412/81*x^6   +777600800*y^6+95896/81*x^6*y^2-8/81*x^6*y^4-10364/27*x^7-4/27*x^7*y^2+4/27*x^8-8/81*y^8-4/27*x^8*y^2+4/81*x^9)\nFinitely presented group < x0, x21, x29, x41, x54 | x29^-1*x54^-1*x29*x54*x29*x54^-1, x41^-1*x29*x41*x29*x41^-1*x29^-1, x29^-1*x0*x29*x0*x29^-1*x0^-1, x21*x29*x21^-1*x29^-1*x21^-1*x29, x41^-1*x0^-1*x41^-1*x0*x41*x0, x54^-1*x21^-1*x54^-1*x21*x54*x21, x41*x21*x41^-1*x21^-1*x41^-1*x21, x21*x0*x21*x0^-1*x21^-1*x0^-1, x41*x54*x41*x54^-1*x41^-1*x54^-1, x54^-1*x0^-1*x54^-1*x0*x54*x0, x41*x21*x29*x21^-1*x41^-1*x21*x29^-1*x21^-1, x41*x54*x41^-1*x29*x54^-1*x41^-1*x54*x29^-1, x21^-1*x0*x54*x0^-1*x21*x0*x54^-1*x0^-1, x0^-1*x41*x21*x41^-1*x0*x41*x21^-1*x41^-1, x21^-1*x0*x41*x0^-1*x21*x0*x41^-1*x0^-1, x21^-1*x54^-1*x0*x54*x21*x54^-1*x0^-1*x54, x29^-1*x54^-1*x0^-1*x54*x29*x54^-1*x0*x54, x29^-1*x0*x54*x0^-1*x29*x0*x54^-1*x0^-1, x29*x0^2*x29^-1*x54^-1*x29*x0^-2*x29^-1*x54, x29^-1*x41*x54*x21*x41^-1*x29*x41*x21^-1*x54^-1*x41^-1, x0*x54^-1*x41*x54*x0^-1*x29^-1*x21^-1*x54^-1*x41^-1*x54*x21*x29, x29^-1*x21^-1*x29*x0*x41*x54*x21*x29*x21^-1*x54^-1*x41^-1*x0^-1, x41^-1*x0^-1*x21*x29*x0*x41*x54*x21*x0^-1*x29^-1*x21^-1*x54^-1, x0^-1*x29^-1*x21*x54^-1*x29*x0*x29*x41*x54*x21^-1*x29*x41^-1*x54^-1*x41^-1, x41^-1*x54^-1*x29*x0^-1*x41*x54*x21*x29*x21*x41^-1*x0*x29^-1*x21^-1*x54^-1, x21^-1*x54^-1*x29*x21^-1*x41^-1*x0*x41*x54*x0*x41^-1*x0^-1*x21*x29^-1*x54, x54*x21*x29*x0*x29^-1*x54*x21^-1*x54^-1*x41^-1*x0^-1*x29^-1*x0*x41*x21^-1, x41*x54*x21*x29*x0*x21^-1*x29*x41*x21*x29^2*x21*x29^-1*x21^-1*x41^-2*x0^-1*x29^-1*x21^-1*x54^-1*x41^-1*x21^-1, x29*x21^-1*x0*x54^2*x41*x54*x21*x0*x29^-1*x41*x0^-1*x21^-1*x0^-2*x54^-1*x41^-1*x0^-1*x29^-1*x21^-1*x29*x0^-1*x21^2, x29*x41^-1*x0*x41*(x21*x54)^2*x0*x54*x21*x0*x29^-1*x21^-1*x41*x54^-1*x41^-1*x29^-1*(x29^-1*x0^-1)^2*x29^-1*x54^-1*x0^-1*x21 >\n\n```\n\nI did some tests cythonizing some of the functions in `zariski_vankampen.py`, and I could not observe any speedup at all. I don't think it will be worth the effort.\n\nAre you sure about the list comprehension problem? It seems to work fine in this cpdef'ed function.",
    "created_at": "2017-04-10T17:59:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306042",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:13" align="right">comment:13</div>

I fixed some doctest and a bug that prevented it to work when the variables where not x and y.

About nontrivial examples to test, here are two:

This one is a good example of the power of sirocco: this group is computed in a few seconds, and as far as I know, it has never been computed before (even though the curve has been explicitely studied)

```
sage: F = NumberField(QQ[x]('x^2+1'), 'I', embedding = QQbar(I))
sage: F.inject_variables()
Defining I
sage: P.<x,y,z> = ProjectiveSpace(F,2)
sage: c = P.curve((4131/160000*I + 20493/640000)*x^4*y^2 + (-21883/240000*I - 243083/4320000)*x^3*y^3 + (4301/60000*I + 22393/1440000)*x^2*y^4 + (-729/50000*I - 145071/1600000)*x^4*y*z + (4391/400000*I + 92699/800000)*x^3*y^2*z + (20251/100000*I + 50513/900000)*x^2*y^3*z + (-4301/18750*I - 22393/450000)*x*y^4*z + (-72171/4000000*I + 767637/16000000)*x^4*z^2 + (121131/1000000*I + 147717/1000000)*x^3*y*z^2 + (-42633/125000*I - 169493/375000)*x^2*y^2*z^2 + (6341/62500*I + 97183/562500)*x*y^3*z^2 + (8602/46875*I + 22393/562500)*y^4*z^2 + (1323/250000*I - 167481/1000000)*x^3*z^3 + (-3621/62500*I + 47037/250000)*x^2*y*z^3 + (5189/15625*I + 24559/125000)*x*y^2*z^3 + (-14404/46875*I - 80002/421875)*y^3*z^3 + (189/5000*I + 81/625)*x^2*z^4 + (-177/1250*I - 339/1250)*x*y*z^4 + (68/625*I + 253/1875)*y^2*z^4)
sage: c.fundamental_group()
Finitely presented group < x2, x56 | x2^-1*x56*(x2^-1*x56^-1)^3*x2*x56*x2^-1*x56^-1, (x56^-1*x2^-1)^2*x56*x2*x56^2*x2^-1*x56^-1*x2*x56*x2*x56^-1, x56^-1*x2^-1*(x56*x2)^2*x56^-1*x2^-1*x56^-1*x2*x56^2*x2*x56^-1*x2^-1*x56^-1 >

```

This other one takes a couple of minutes in my laptop. It was the motivation for the writing of GAP3's VKCURVE package (which computes it in almost half an hour in the same computer):

```
sage: A.<x,y> = AffineSpace(QQ,2)
sage: c = A.curve(746496+3732480*x-3111936*x*y^2-93281756/27*x*y^4+58341596/27*x*y^6+7464960*x^2-384*y^2-9334272*x^2*y^2    +17556484/27*x^2*y^4+43196/27*x^2*y^6+7464576*x^3-756138248/81*x^3*y^2+192792964/81*x^3*y^4+16/81*x^3*y^6+3730944*x^4   -139967996/81*y^4-84021416/27*x^4*y^2+82088/27*x^4*y^4+744192*x^5+43192/27*x^5*y^2-1720/27*x^5*y^4 -124412/81*x^6   +777600800*y^6+95896/81*x^6*y^2-8/81*x^6*y^4-10364/27*x^7-4/27*x^7*y^2+4/27*x^8-8/81*y^8-4/27*x^8*y^2+4/81*x^9)
Finitely presented group < x0, x21, x29, x41, x54 | x29^-1*x54^-1*x29*x54*x29*x54^-1, x41^-1*x29*x41*x29*x41^-1*x29^-1, x29^-1*x0*x29*x0*x29^-1*x0^-1, x21*x29*x21^-1*x29^-1*x21^-1*x29, x41^-1*x0^-1*x41^-1*x0*x41*x0, x54^-1*x21^-1*x54^-1*x21*x54*x21, x41*x21*x41^-1*x21^-1*x41^-1*x21, x21*x0*x21*x0^-1*x21^-1*x0^-1, x41*x54*x41*x54^-1*x41^-1*x54^-1, x54^-1*x0^-1*x54^-1*x0*x54*x0, x41*x21*x29*x21^-1*x41^-1*x21*x29^-1*x21^-1, x41*x54*x41^-1*x29*x54^-1*x41^-1*x54*x29^-1, x21^-1*x0*x54*x0^-1*x21*x0*x54^-1*x0^-1, x0^-1*x41*x21*x41^-1*x0*x41*x21^-1*x41^-1, x21^-1*x0*x41*x0^-1*x21*x0*x41^-1*x0^-1, x21^-1*x54^-1*x0*x54*x21*x54^-1*x0^-1*x54, x29^-1*x54^-1*x0^-1*x54*x29*x54^-1*x0*x54, x29^-1*x0*x54*x0^-1*x29*x0*x54^-1*x0^-1, x29*x0^2*x29^-1*x54^-1*x29*x0^-2*x29^-1*x54, x29^-1*x41*x54*x21*x41^-1*x29*x41*x21^-1*x54^-1*x41^-1, x0*x54^-1*x41*x54*x0^-1*x29^-1*x21^-1*x54^-1*x41^-1*x54*x21*x29, x29^-1*x21^-1*x29*x0*x41*x54*x21*x29*x21^-1*x54^-1*x41^-1*x0^-1, x41^-1*x0^-1*x21*x29*x0*x41*x54*x21*x0^-1*x29^-1*x21^-1*x54^-1, x0^-1*x29^-1*x21*x54^-1*x29*x0*x29*x41*x54*x21^-1*x29*x41^-1*x54^-1*x41^-1, x41^-1*x54^-1*x29*x0^-1*x41*x54*x21*x29*x21*x41^-1*x0*x29^-1*x21^-1*x54^-1, x21^-1*x54^-1*x29*x21^-1*x41^-1*x0*x41*x54*x0*x41^-1*x0^-1*x21*x29^-1*x54, x54*x21*x29*x0*x29^-1*x54*x21^-1*x54^-1*x41^-1*x0^-1*x29^-1*x0*x41*x21^-1, x41*x54*x21*x29*x0*x21^-1*x29*x41*x21*x29^2*x21*x29^-1*x21^-1*x41^-2*x0^-1*x29^-1*x21^-1*x54^-1*x41^-1*x21^-1, x29*x21^-1*x0*x54^2*x41*x54*x21*x0*x29^-1*x41*x0^-1*x21^-1*x0^-2*x54^-1*x41^-1*x0^-1*x29^-1*x21^-1*x29*x0^-1*x21^2, x29*x41^-1*x0*x41*(x21*x54)^2*x0*x54*x21*x0*x29^-1*x21^-1*x41*x54^-1*x41^-1*x29^-1*(x29^-1*x0^-1)^2*x29^-1*x54^-1*x0^-1*x21 >

```

I did some tests cythonizing some of the functions in `zariski_vankampen.py`, and I could not observe any speedup at all. I don't think it will be worth the effort.

Are you sure about the list comprehension problem? It seems to work fine in this cpdef'ed function.



---

archive/issue_comments_306043.json:
```json
{
    "body": "Reviewer: **Travis Scrimshaw**",
    "created_at": "2017-04-16T23:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306043",
    "user": "https://github.com/tscrim"
}
```

Reviewer: **Travis Scrimshaw**



---

archive/issue_comments_306044.json:
```json
{
    "body": "Changed branch from **[u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_)** to **[public/topology/zariski_van_kampen_plane_curves-21045](https://github.com/sagemath/sagetrac-mirror/tree/public/topology/zariski_van_kampen_plane_curves-21045)**",
    "created_at": "2017-04-16T23:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306044",
    "user": "https://github.com/tscrim"
}
```

Changed branch from **[u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_](https://github.com/sagemath/sagetrac-mirror/tree/u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_)** to **[public/topology/zariski_van_kampen_plane_curves-21045](https://github.com/sagemath/sagetrac-mirror/tree/public/topology/zariski_van_kampen_plane_curves-21045)**



---

archive/issue_comments_306045.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nI've hit that list comprehension problem before. *shrugs*\n\nFrom doing some profiling, I agree that there is no real gain from the extra Cythonization.\n\nI made some changes to improve the Cython generated code, removed trailing whitespace, cleaned up the documentation and imports, and some other misc tweaks. So the code should be slight improvement in speed, but likely marginal. Mainly it is cleaner code.\n\nIf my changes look good, then you can set a positive review (unless you can add an doctest to the functions in `libs/sirocco.pyx`, but this is preferable).\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/a170d3b7f1f545ef007e3b9fb4de45ab843cf4fc\">a170d3b</a></td><td><code>Merge branch 'u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_' of git://trac.sagemath.org/sage into public/topology/zariski_van_kampen_plane_curves-21045</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/c55db609706d1f212d252f458067e00244822bbc\">c55db60</a></td><td><code>Improving Cython code, removing whitespace, doc improvements.</code></td></tr></table>\n",
    "created_at": "2017-04-16T23:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306045",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:14" align="right">comment:14</div>

I've hit that list comprehension problem before. *shrugs*

From doing some profiling, I agree that there is no real gain from the extra Cythonization.

I made some changes to improve the Cython generated code, removed trailing whitespace, cleaned up the documentation and imports, and some other misc tweaks. So the code should be slight improvement in speed, but likely marginal. Mainly it is cleaner code.

If my changes look good, then you can set a positive review (unless you can add an doctest to the functions in `libs/sirocco.pyx`, but this is preferable).

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/a170d3b7f1f545ef007e3b9fb4de45ab843cf4fc">a170d3b</a></td><td><code>Merge branch 'u/mmarco/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_' of git://trac.sagemath.org/sage into public/topology/zariski_van_kampen_plane_curves-21045</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/c55db609706d1f212d252f458067e00244822bbc">c55db60</a></td><td><code>Improving Cython code, removing whitespace, doc improvements.</code></td></tr></table>




---

archive/issue_comments_306046.json:
```json
{
    "body": "Changed commit from **[e7796fb](https://github.com/sagemath/sagetrac-mirror/commit/e7796fb6c8b631e8e63b8b807c3ebaf4a1e8cdc7)** to **[c55db60](https://github.com/sagemath/sagetrac-mirror/commit/c55db609706d1f212d252f458067e00244822bbc)**",
    "created_at": "2017-04-16T23:55:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306046",
    "user": "https://github.com/tscrim"
}
```

Changed commit from **[e7796fb](https://github.com/sagemath/sagetrac-mirror/commit/e7796fb6c8b631e8e63b8b807c3ebaf4a1e8cdc7)** to **[c55db60](https://github.com/sagemath/sagetrac-mirror/commit/c55db609706d1f212d252f458067e00244822bbc)**



---

archive/issue_events_296009.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-17T10:43:42Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296009"
}
```



---

archive/issue_events_296010.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-17T10:43:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296010"
}
```



---

archive/issue_comments_306047.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nThanks for the review!",
    "created_at": "2017-04-17T10:43:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306047",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:15" align="right">comment:15</div>

Thanks for the review!



---

archive/issue_events_296011.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-21T22:28:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296011"
}
```



---

archive/issue_events_296012.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-21T22:28:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296012"
}
```



---

archive/issue_comments_306048.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nOn 32-bit\n\n```\nsage -t --long src/sage/schemes/curves/zariski_vankampen.py\n**********************************************************************\nFile \"src/sage/schemes/curves/zariski_vankampen.py\", line 196, in sage.schemes.curves.zariski_vankampen.segments\nFailed example:\n    segments(disc)\nExpected:\n    [(-2.84740787203333 - 2.84740787203333*I,\n    -2.14285714285714 + 1.11022302462516e-16*I),\n    (-2.84740787203333 + 2.84740787203333*I,\n    -2.14285714285714 + 1.11022302462516e-16*I),\n    (2.50000000000000 + 2.50000000000000*I,\n    1.26513881334184 + 2.19128470333546*I),\n    (2.50000000000000 + 2.50000000000000*I,\n    2.50000000000000 - 2.50000000000000*I),\n    (1.26513881334184 + 2.19128470333546*I, 0.000000000000000),\n    (0.000000000000000, 1.26513881334184 - 2.19128470333546*I),\n    (2.50000000000000 - 2.50000000000000*I,\n    1.26513881334184 - 2.19128470333546*I),\n    (-2.84740787203333 + 2.84740787203333*I,\n    1.26513881334184 + 2.19128470333546*I),\n    (-2.14285714285714 + 1.11022302462516e-16*I, 0.000000000000000),\n    (-2.84740787203333 - 2.84740787203333*I,\n    1.26513881334184 - 2.19128470333546*I)]\nGot:\n    [(-2.84740787203333 - 2.84740787203333*I,\n      -2.14285714285714 + 8.65735434729675e-17*I),\n     (-2.84740787203333 + 2.84740787203333*I,\n      -2.14285714285714 + 8.65735434729675e-17*I),\n     (2.50000000000000 + 2.50000000000000*I,\n      1.26513881334184 + 2.19128470333546*I),\n     (2.50000000000000 + 2.50000000000000*I,\n      2.50000000000000 - 2.50000000000000*I),\n     (1.26513881334184 + 2.19128470333546*I, 1.97324795392362e-17),\n     (1.97324795392362e-17, 1.26513881334184 - 2.19128470333546*I),\n     (2.50000000000000 - 2.50000000000000*I,\n      1.26513881334184 - 2.19128470333546*I),\n     (-2.84740787203333 + 2.84740787203333*I,\n      1.26513881334184 + 2.19128470333546*I),\n     (-2.14285714285714 + 8.65735434729675e-17*I, 1.97324795392362e-17),\n     (-2.84740787203333 - 2.84740787203333*I,\n      1.26513881334184 - 2.19128470333546*I)]\n**********************************************************************\n1 item had failures:\n   1 of   6 in sage.schemes.curves.zariski_vankampen.segments\n    [37 tests, 1 failure, 1.29 s]\n```",
    "created_at": "2017-04-21T22:28:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306048",
    "user": "https://github.com/vbraun"
}
```

<div id="comment:16" align="right">comment:16</div>

On 32-bit

```
sage -t --long src/sage/schemes/curves/zariski_vankampen.py
**********************************************************************
File "src/sage/schemes/curves/zariski_vankampen.py", line 196, in sage.schemes.curves.zariski_vankampen.segments
Failed example:
    segments(disc)
Expected:
    [(-2.84740787203333 - 2.84740787203333*I,
    -2.14285714285714 + 1.11022302462516e-16*I),
    (-2.84740787203333 + 2.84740787203333*I,
    -2.14285714285714 + 1.11022302462516e-16*I),
    (2.50000000000000 + 2.50000000000000*I,
    1.26513881334184 + 2.19128470333546*I),
    (2.50000000000000 + 2.50000000000000*I,
    2.50000000000000 - 2.50000000000000*I),
    (1.26513881334184 + 2.19128470333546*I, 0.000000000000000),
    (0.000000000000000, 1.26513881334184 - 2.19128470333546*I),
    (2.50000000000000 - 2.50000000000000*I,
    1.26513881334184 - 2.19128470333546*I),
    (-2.84740787203333 + 2.84740787203333*I,
    1.26513881334184 + 2.19128470333546*I),
    (-2.14285714285714 + 1.11022302462516e-16*I, 0.000000000000000),
    (-2.84740787203333 - 2.84740787203333*I,
    1.26513881334184 - 2.19128470333546*I)]
Got:
    [(-2.84740787203333 - 2.84740787203333*I,
      -2.14285714285714 + 8.65735434729675e-17*I),
     (-2.84740787203333 + 2.84740787203333*I,
      -2.14285714285714 + 8.65735434729675e-17*I),
     (2.50000000000000 + 2.50000000000000*I,
      1.26513881334184 + 2.19128470333546*I),
     (2.50000000000000 + 2.50000000000000*I,
      2.50000000000000 - 2.50000000000000*I),
     (1.26513881334184 + 2.19128470333546*I, 1.97324795392362e-17),
     (1.97324795392362e-17, 1.26513881334184 - 2.19128470333546*I),
     (2.50000000000000 - 2.50000000000000*I,
      1.26513881334184 - 2.19128470333546*I),
     (-2.84740787203333 + 2.84740787203333*I,
      1.26513881334184 + 2.19128470333546*I),
     (-2.14285714285714 + 8.65735434729675e-17*I, 1.97324795392362e-17),
     (-2.84740787203333 - 2.84740787203333*I,
      1.26513881334184 - 2.19128470333546*I)]
**********************************************************************
1 item had failures:
   1 of   6 in sage.schemes.curves.zariski_vankampen.segments
    [37 tests, 1 failure, 1.29 s]
```



---

archive/issue_comments_306049.json:
```json
{
    "body": "Changed commit from **[c55db60](https://github.com/sagemath/sagetrac-mirror/commit/c55db609706d1f212d252f458067e00244822bbc)** to **[d0b297e](https://github.com/sagemath/sagetrac-mirror/commit/d0b297e09603bc2844c2b6c147d0c133f2f0cf6a)**",
    "created_at": "2017-04-22T14:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306049",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[c55db60](https://github.com/sagemath/sagetrac-mirror/commit/c55db609706d1f212d252f458067e00244822bbc)** to **[d0b297e](https://github.com/sagemath/sagetrac-mirror/commit/d0b297e09603bc2844c2b6c147d0c133f2f0cf6a)**



---

archive/issue_comments_306050.json:
```json
{
    "body": "<div id=\"comment:17\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f88a9db2f0803e9711c5407fe3f04b868d1e9f47\">f88a9db</a></td><td><code>Fixed optional doctests</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/f5023744b132b53c68111cecaa6883e9c929c126\">f502374</a></td><td><code>Merge branch 'public/topology/zariski_van_kampen_plane_curves-21045' of git://trac.sagemath.org/sage into t/21045/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_</code></td></tr><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/d0b297e09603bc2844c2b6c147d0c133f2f0cf6a\">d0b297e</a></td><td><code>Stablish numerical tolerance for doctests</code></td></tr></table>\n",
    "created_at": "2017-04-22T14:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306050",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:17"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f88a9db2f0803e9711c5407fe3f04b868d1e9f47">f88a9db</a></td><td><code>Fixed optional doctests</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/f5023744b132b53c68111cecaa6883e9c929c126">f502374</a></td><td><code>Merge branch 'public/topology/zariski_van_kampen_plane_curves-21045' of git://trac.sagemath.org/sage into t/21045/implement_zariski_vankampen_method_to_compute_fundamental_groups_of_complements_of_plane_curves_</code></td></tr><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/d0b297e09603bc2844c2b6c147d0c133f2f0cf6a">d0b297e</a></td><td><code>Stablish numerical tolerance for doctests</code></td></tr></table>




---

archive/issue_comments_306051.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI guess that is a discrpancy on the rounding unit. Added some tolerance to the doctest.",
    "created_at": "2017-04-22T14:58:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306051",
    "user": "https://github.com/miguelmarco"
}
```

<div id="comment:18" align="right">comment:18</div>

I guess that is a discrpancy on the rounding unit. Added some tolerance to the doctest.



---

archive/issue_events_296013.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-22T14:58:57Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296013"
}
```



---

archive/issue_events_296014.json:
```json
{
    "actor": "https://github.com/miguelmarco",
    "created_at": "2017-04-22T14:58:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296014"
}
```



---

archive/issue_comments_306052.json:
```json
{
    "body": "Changed branch from **[public/topology/zariski_van_kampen_plane_curves-21045](https://github.com/sagemath/sagetrac-mirror/tree/public/topology/zariski_van_kampen_plane_curves-21045)** to **[d0b297e](https://github.com/sagemath/sagetrac-mirror/commit/d0b297e09603bc2844c2b6c147d0c133f2f0cf6a)**",
    "created_at": "2017-04-25T17:40:18Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21045#issuecomment-306052",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[public/topology/zariski_van_kampen_plane_curves-21045](https://github.com/sagemath/sagetrac-mirror/tree/public/topology/zariski_van_kampen_plane_curves-21045)** to **[d0b297e](https://github.com/sagemath/sagetrac-mirror/commit/d0b297e09603bc2844c2b6c147d0c133f2f0cf6a)**



---

archive/issue_events_296015.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2017-04-25T17:40:18Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296015"
}
```



---

archive/issue_events_296016.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "3d513755281b017b87303064426e4801d6c40312",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2017-04-25T17:40:18Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21045",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21045#event-296016"
}
```
