# Issue 21630: py3 make doctest of matrix2 future-proof

archive/issues_021393.json:
```json
{
    "assignees": [],
    "body": "because range will be an iterator in python3\n\nCC:  @tscrim\n\nBranch/Commit: **[`55f7277`](https://github.com/sagemath/sagetrac-mirror/commit/55f7277b5ba78e8967a1530bf1c423723b6302a0)**\n\nReviewer: **Jori M\u00e4ntysalo**\n\nAuthor: **Fr\u00e9d\u00e9ric Chapoton**\n\nComponent: **python3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21630_\n\n",
    "closed_at": "2016-10-05T22:41:43Z",
    "created_at": "2016-10-03T15:36:14Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20python3",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "py3 make doctest of matrix2 future-proof",
    "type": "issue",
    "updated_at": "2016-10-05T22:41:43Z",
    "url": "https://github.com/sagemath/sage/issues/21630",
    "user": "https://github.com/fchapoton"
}
```
because range will be an iterator in python3

CC:  @tscrim

Branch/Commit: **[`55f7277`](https://github.com/sagemath/sagetrac-mirror/commit/55f7277b5ba78e8967a1530bf1c423723b6302a0)**

Reviewer: **Jori Mäntysalo**

Author: **Frédéric Chapoton**

Component: **python3**

_Issue created by migration from https://trac.sagemath.org/ticket/21630_





---

archive/issue_events_301031.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-10-03T15:36:14Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301031"
}
```



---

archive/issue_events_301032.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-10-03T15:36:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20python3",
    "label_color": "0000b0",
    "label_name": "c: python3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301032"
}
```



---

archive/issue_events_301033.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-10-03T15:36:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301033"
}
```



---

archive/issue_events_301034.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-10-03T15:36:14Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301034"
}
```



---

archive/issue_comments_317857.json:
```json
{
    "body": "Commit: **[`55f7277`](https://github.com/sagemath/sagetrac-mirror/commit/55f7277b5ba78e8967a1530bf1c423723b6302a0)**",
    "created_at": "2016-10-03T15:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317857",
    "user": "https://github.com/fchapoton"
}
```

Commit: **[`55f7277`](https://github.com/sagemath/sagetrac-mirror/commit/55f7277b5ba78e8967a1530bf1c423723b6302a0)**



---

archive/issue_comments_317858.json:
```json
{
    "body": "Branch: **[u/chapoton/21630](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/21630)**",
    "created_at": "2016-10-03T15:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317858",
    "user": "https://github.com/fchapoton"
}
```

Branch: **[u/chapoton/21630](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/21630)**



---

archive/issue_comments_317859.json:
```json
{
    "body": "<div id=\"comment:1\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/55f7277b5ba78e8967a1530bf1c423723b6302a0\"><code>55f7277</code></a></td><td><code>make doctests of matrix2 future-proof (py3 range)</code></td></tr></table>\n",
    "created_at": "2016-10-03T15:36:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317859",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:1"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/55f7277b5ba78e8967a1530bf1c423723b6302a0"><code>55f7277</code></a></td><td><code>make doctests of matrix2 future-proof (py3 range)</code></td></tr></table>




---

archive/issue_events_301035.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-10-03T15:36:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301035"
}
```



---

archive/issue_comments_317860.json:
```json
{
    "body": "Reviewer: **Jori M\u00e4ntysalo**",
    "created_at": "2016-10-03T16:45:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317860",
    "user": "https://github.com/jm58660"
}
```

Reviewer: **Jori Mäntysalo**



---

archive/issue_comments_317861.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nI would vote for this ticket. But maybe I still ask Travis opinion:\n\nThis ticket changes `matrix(ZZ,3,range(9))` to `matrix(ZZ,3,3,range(9))` etc. I think it is good to use examples with both row- and column-count given. Do you agree on that?\n\n(Tests passed etc, so otherwise this is a positive review.)",
    "created_at": "2016-10-03T16:53:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317861",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:3" align="right">comment:3</div>

I would vote for this ticket. But maybe I still ask Travis opinion:

This ticket changes `matrix(ZZ,3,range(9))` to `matrix(ZZ,3,3,range(9))` etc. I think it is good to use examples with both row- and column-count given. Do you agree on that?

(Tests passed etc, so otherwise this is a positive review.)



---

archive/issue_comments_317862.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nI can understand why this was done, but I think it is good to have the shortcut and used in tests. In particular, it forces us to make updates to the constructor or change the doctests and drop the behavior after a discussion at switch time. I don't have a strong opinion either way for this, but just my 2 cents.",
    "created_at": "2016-10-03T17:56:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317862",
    "user": "https://github.com/tscrim"
}
```

<div id="comment:4" align="right">comment:4</div>

I can understand why this was done, but I think it is good to have the shortcut and used in tests. In particular, it forces us to make updates to the constructor or change the doctests and drop the behavior after a discussion at switch time. I don't have a strong opinion either way for this, but just my 2 cents.



---

archive/issue_comments_317863.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIs there still left enought of those test with only one dimension given after this patch?",
    "created_at": "2016-10-03T18:09:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317863",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:5" align="right">comment:5</div>

Is there still left enought of those test with only one dimension given after this patch?



---

archive/issue_comments_317864.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nThere remains a lot of them, for example in src/sage/matrix/matrix0.pyx\n\nI think we should only keep *one* such doctest.\n\nEDIT:\n\n```\ngit grep -P -c \"matrix\\([^,0-9]*,[0-9]\\s*,\\s*range\"\nsrc/doc/de/tutorial/introduction.rst:1\nsrc/doc/en/tutorial/introduction.rst:1\nsrc/doc/es/tutorial/introduction.rst:1\nsrc/doc/fr/tutorial/introduction.rst:1\nsrc/doc/ja/tutorial/introduction.rst:1\nsrc/doc/pt/tutorial/introduction.rst:1\nsrc/doc/ru/tutorial/introduction.rst:1\nsrc/sage/interfaces/giac.py:1\nsrc/sage/interfaces/maple.py:2\nsrc/sage/matrix/matrix0.pyx:13\nsrc/sage/matrix/matrix1.pyx:2\nsrc/sage/matrix/matrix2.pyx:13\nsrc/sage/matrix/matrix_double_dense.pyx:15\nsrc/sage/matrix/matrix_integer_dense.pyx:7\nsrc/sage/matrix/matrix_integer_sparse.pyx:2\nsrc/sage/matrix/matrix_rational_dense.pyx:5\nsrc/sage/matrix/matrix_rational_sparse.pyx:4\nsrc/sage/matrix/matrix_real_double_dense.pyx:1\nsrc/sage/modules/matrix_morphism.py:1\n```",
    "created_at": "2016-10-03T19:34:31Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317864",
    "user": "https://github.com/fchapoton"
}
```

<div id="comment:6" align="right">comment:6</div>

There remains a lot of them, for example in src/sage/matrix/matrix0.pyx

I think we should only keep *one* such doctest.

EDIT:

```
git grep -P -c "matrix\([^,0-9]*,[0-9]\s*,\s*range"
src/doc/de/tutorial/introduction.rst:1
src/doc/en/tutorial/introduction.rst:1
src/doc/es/tutorial/introduction.rst:1
src/doc/fr/tutorial/introduction.rst:1
src/doc/ja/tutorial/introduction.rst:1
src/doc/pt/tutorial/introduction.rst:1
src/doc/ru/tutorial/introduction.rst:1
src/sage/interfaces/giac.py:1
src/sage/interfaces/maple.py:2
src/sage/matrix/matrix0.pyx:13
src/sage/matrix/matrix1.pyx:2
src/sage/matrix/matrix2.pyx:13
src/sage/matrix/matrix_double_dense.pyx:15
src/sage/matrix/matrix_integer_dense.pyx:7
src/sage/matrix/matrix_integer_sparse.pyx:2
src/sage/matrix/matrix_rational_dense.pyx:5
src/sage/matrix/matrix_rational_sparse.pyx:4
src/sage/matrix/matrix_real_double_dense.pyx:1
src/sage/modules/matrix_morphism.py:1
```



---

archive/issue_comments_317865.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@fchapoton](#comment:6):\n> There remains a lot of them, for example in src/sage/matrix/matrix0.pyx\n\nOK then.\n\n> I think we should only keep *one* such doctest.\n\nYes, maybe. Then it should be on test block and clearly marked what it is for.\n\n> ```\n> git grep -P \n> ```\n\nPerl-style regexps... scary.",
    "created_at": "2016-10-04T04:54:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317865",
    "user": "https://github.com/jm58660"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@fchapoton](#comment:6):
> There remains a lot of them, for example in src/sage/matrix/matrix0.pyx

OK then.

> I think we should only keep *one* such doctest.

Yes, maybe. Then it should be on test block and clearly marked what it is for.

> ```
> git grep -P 
> ```

Perl-style regexps... scary.



---

archive/issue_events_301036.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-04T04:54:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301036"
}
```



---

archive/issue_events_301037.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-10-04T04:54:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301037"
}
```



---

archive/issue_comments_317866.json:
```json
{
    "body": "Changed branch from **[u/chapoton/21630](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/21630)** to **[`55f7277`](https://github.com/sagemath/sagetrac-mirror/commit/55f7277b5ba78e8967a1530bf1c423723b6302a0)**",
    "created_at": "2016-10-05T22:41:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21630#issuecomment-317866",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/chapoton/21630](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/21630)** to **[`55f7277`](https://github.com/sagemath/sagetrac-mirror/commit/55f7277b5ba78e8967a1530bf1c423723b6302a0)**



---

archive/issue_events_301038.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-10-05T22:41:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301038"
}
```



---

archive/issue_events_301039.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "acfe3b995350ffd67223009e9daabf10096671e7",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-10-05T22:41:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21630",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21630#event-301039"
}
```
