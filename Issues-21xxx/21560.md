# Issue 21560: return Infinity from factorial of negative integer

archive/issues_021323.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-aashu12"
    ],
    "body": "\n```\nsage: factorial(-5)\n...\nValueError: factorial -- self = (-5) must be nonnegative\n```\n\nAdapt the function's behaviour to what other CASs (sympy, Wolfram) do at integer n<-1: return unsigned infinity.\n\nBranch/Commit: **[u/aashu12/return_infinity_from_factorial_of_negative_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/aashu12/return_infinity_from_factorial_of_negative_integer) @ [02fc09c](https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e)**\n\nAuthor: **Ashutosh Ahelleya**\n\nComponent: **symbolics**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/21560_\n\n",
    "created_at": "2016-09-22T07:36:10Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "return Infinity from factorial of negative integer",
    "type": "issue",
    "updated_at": "2022-12-29T01:37:14Z",
    "url": "https://github.com/sagemath/sage/issues/21560",
    "user": "https://github.com/rwst"
}
```

```
sage: factorial(-5)
...
ValueError: factorial -- self = (-5) must be nonnegative
```

Adapt the function's behaviour to what other CASs (sympy, Wolfram) do at integer n<-1: return unsigned infinity.

Branch/Commit: **[u/aashu12/return_infinity_from_factorial_of_negative_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/aashu12/return_infinity_from_factorial_of_negative_integer) @ [02fc09c](https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e)**

Author: **Ashutosh Ahelleya**

Component: **symbolics**

_Issue created by migration from https://trac.sagemath.org/ticket/21560_





---

archive/issue_events_302782.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-09-22T07:36:10Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21560#event-302782"
}
```



---

archive/issue_events_302783.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-09-22T07:36:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20symbolics",
    "label_color": "0000ff",
    "label_name": "c: symbolics",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21560#event-302783"
}
```



---

archive/issue_events_302784.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-09-22T07:36:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21560#event-302784"
}
```



---

archive/issue_events_302785.json:
```json
{
    "actor": "https://github.com/rwst",
    "created_at": "2016-09-22T07:36:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21560#event-302785"
}
```



---

archive/issue_comments_316576.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI would like to work on this issue. However, one of the CASs sympy, returns a zero for a negative number given as the input. I would like to clarify if it is required to return unsigned infinity or zero. You can refer this-> http://docs.sympy.org/0.7.1/_modules/sympy/functions/combinatorial/factorials.html",
    "created_at": "2017-03-15T13:12:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316576",
    "user": "https://github.com/sagetrac-aashu12"
}
```

<div id="comment:1" align="right">comment:1</div>

I would like to work on this issue. However, one of the CASs sympy, returns a zero for a negative number given as the input. I would like to clarify if it is required to return unsigned infinity or zero. You can refer this-> http://docs.sympy.org/0.7.1/_modules/sympy/functions/combinatorial/factorials.html



---

archive/issue_events_302786.json:
```json
{
    "actor": "https://github.com/sagetrac-aashu12",
    "created_at": "2017-03-15T13:18:33Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "subject": "https://github.com/sagetrac-aashu12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21560#event-302786"
}
```



---

archive/issue_comments_316577.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nNote that already\n\n```\nsage: SR(-89).factorial()\nInfinity\n```\nIf you decide against Infinity then please change the above for consistency (you can find the code in `libs/pynac/pynac.pyx`).",
    "created_at": "2017-03-15T14:01:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316577",
    "user": "https://github.com/rwst"
}
```

<div id="comment:3" align="right">comment:3</div>

Note that already

```
sage: SR(-89).factorial()
Infinity
```
If you decide against Infinity then please change the above for consistency (you can find the code in `libs/pynac/pynac.pyx`).



---

archive/issue_comments_316578.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nAs to which one it should be, I guess that's arbitrary. You may need to change code that depends on the exception (maybe there is some in `combinatorics`) anyway. Using zero makes possibly sense, maybe to have sane behavour for some combinatorial sums.",
    "created_at": "2017-03-15T14:05:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316578",
    "user": "https://github.com/rwst"
}
```

<div id="comment:4" align="right">comment:4</div>

As to which one it should be, I guess that's arbitrary. You may need to change code that depends on the exception (maybe there is some in `combinatorics`) anyway. Using zero makes possibly sense, maybe to have sane behavour for some combinatorial sums.



---

archive/issue_comments_316579.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nNote also\n\n```\nsage: factorial(-89.)\nNaN\n```\nwhich would be the third alternative.",
    "created_at": "2017-03-15T14:13:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316579",
    "user": "https://github.com/rwst"
}
```

<div id="comment:5" align="right">comment:5</div>

Note also

```
sage: factorial(-89.)
NaN
```
which would be the third alternative.



---

archive/issue_comments_316580.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI feel that it would be better if Unsigned Infinity is returned because in case we return any other value, too many files in different components have to be modified to make sure that the consistency is proper. I will modify the function such that it returns Unsigned Infinity when the input is negative by importing `unsigned_infinity` from `sage.rings.infinity`",
    "created_at": "2017-03-15T15:09:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316580",
    "user": "https://github.com/sagetrac-aashu12"
}
```

<div id="comment:6" align="right">comment:6</div>

I feel that it would be better if Unsigned Infinity is returned because in case we return any other value, too many files in different components have to be modified to make sure that the consistency is proper. I will modify the function such that it returns Unsigned Infinity when the input is negative by importing `unsigned_infinity` from `sage.rings.infinity`



---

archive/issue_comments_316581.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nWill it be right here to import unsigned infinity from `sage.rings.infinity`?",
    "created_at": "2017-03-15T15:13:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316581",
    "user": "https://github.com/sagetrac-aashu12"
}
```

<div id="comment:7" align="right">comment:7</div>

Will it be right here to import unsigned infinity from `sage.rings.infinity`?



---

archive/issue_comments_316582.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nThat's a style question. I personally import from the specific file instead of from all. I remember a discussion here that recommended that because this way less is imported and less time used. I could not find a reference, sorry. You see both styles used in Sage.",
    "created_at": "2017-03-15T15:51:56Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316582",
    "user": "https://github.com/rwst"
}
```

<div id="comment:8" align="right">comment:8</div>

That's a style question. I personally import from the specific file instead of from all. I remember a discussion here that recommended that because this way less is imported and less time used. I could not find a reference, sorry. You see both styles used in Sage.



---

archive/issue_comments_316583.json:
```json
{
    "body": "Branch: **[u/aashu12/return_infinity_from_factorial_of_negative_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/aashu12/return_infinity_from_factorial_of_negative_integer)**",
    "created_at": "2017-03-17T06:01:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316583",
    "user": "https://github.com/sagetrac-aashu12"
}
```

Branch: **[u/aashu12/return_infinity_from_factorial_of_negative_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/aashu12/return_infinity_from_factorial_of_negative_integer)**



---

archive/issue_comments_316584.json:
```json
{
    "body": "Commit: **[02fc09c](https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e)**",
    "created_at": "2017-03-17T06:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316584",
    "user": "https://github.com/sagetrac-aashu12"
}
```

Commit: **[02fc09c](https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e)**



---

archive/issue_comments_316585.json:
```json
{
    "body": "Author: **Ashutosh Ahelleya**",
    "created_at": "2017-03-17T06:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316585",
    "user": "https://github.com/sagetrac-aashu12"
}
```

Author: **Ashutosh Ahelleya**



---

archive/issue_comments_316586.json:
```json
{
    "body": "<div id=\"comment:10\"></div>\n\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e\">02fc09c</a></td><td><code>Return unsigned infinity for a factorial of negative integer</code></td></tr></table>\n",
    "created_at": "2017-03-17T06:03:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21560#issuecomment-316586",
    "user": "https://github.com/sagetrac-aashu12"
}
```

<div id="comment:10"></div>

New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e">02fc09c</a></td><td><code>Return unsigned infinity for a factorial of negative integer</code></td></tr></table>




---

archive/issue_events_302787.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2022-12-29T01:37:14Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/21560",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21560#event-302787"
}
```
