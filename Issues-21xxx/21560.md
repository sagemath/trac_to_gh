# Issue 21560: return Infinity from factorial of negative integer

archive/issues_021323.json:
```json
{
    "body": "\n```\nsage: factorial(-5)\n...\nValueError: factorial -- self = (-5) must be nonnegative\n```\n\nAdapt the function's behaviour to what other CASs (sympy, Wolfram) do at integer n<-1: return unsigned infinity.\n\nAssignee: aashu12\n\nBranch: [u/aashu12/return_infinity_from_factorial_of_negative_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/aashu12/return_infinity_from_factorial_of_negative_integer)\n\nCommit: [02fc09cc36e79ed9301f4b58f0268eb81697ba9e](https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e)\n\nAuthor: Ashutosh Ahelleya\n\nStatus: new\n\nIssue created by migration from https://trac.sagemath.org/ticket/21560\n\n",
    "created_at": "2016-09-22T07:36:10Z",
    "labels": [
        "component: symbolics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "return Infinity from factorial of negative integer",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21560",
    "user": "https://github.com/rwst"
}
```

```
sage: factorial(-5)
...
ValueError: factorial -- self = (-5) must be nonnegative
```

Adapt the function's behaviour to what other CASs (sympy, Wolfram) do at integer n<-1: return unsigned infinity.

Assignee: aashu12

Branch: [u/aashu12/return_infinity_from_factorial_of_negative_integer](https://github.com/sagemath/sagetrac-mirror/tree/u/aashu12/return_infinity_from_factorial_of_negative_integer)

Commit: [02fc09cc36e79ed9301f4b58f0268eb81697ba9e](https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e)

Author: Ashutosh Ahelleya

Status: new

Issue created by migration from https://trac.sagemath.org/ticket/21560





---

archive/issue_comments_400312.json:
```json
{
    "body": "<a id='comment:1'></a>\nI would like to work on this issue. However, one of the CASs sympy, returns a zero for a negative number given as the input. I would like to clarify if it is required to return unsigned infinity or zero. You can refer this-> http://docs.sympy.org/0.7.1/_modules/sympy/functions/combinatorial/factorials.html",
    "created_at": "2017-03-15T13:12:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400312",
    "user": "https://trac.sagemath.org/admin/accounts/users/aashu12"
}
```

<a id='comment:1'></a>
I would like to work on this issue. However, one of the CASs sympy, returns a zero for a negative number given as the input. I would like to clarify if it is required to return unsigned infinity or zero. You can refer this-> http://docs.sympy.org/0.7.1/_modules/sympy/functions/combinatorial/factorials.html



---

archive/issue_comments_400313.json:
```json
{
    "body": "Set assignee to aashu12.",
    "created_at": "2017-03-15T13:18:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400313",
    "user": "https://trac.sagemath.org/admin/accounts/users/aashu12"
}
```

Set assignee to aashu12.



---

archive/issue_comments_400314.json:
```json
{
    "body": "<a id='comment:3'></a>\nNote that already\n\n```\nsage: SR(-89).factorial()\nInfinity\n```\nIf you decide against Infinity then please change the above for consistency (you can find the code in `libs/pynac/pynac.pyx`).",
    "created_at": "2017-03-15T14:01:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400314",
    "user": "https://github.com/rwst"
}
```

<a id='comment:3'></a>
Note that already

```
sage: SR(-89).factorial()
Infinity
```
If you decide against Infinity then please change the above for consistency (you can find the code in `libs/pynac/pynac.pyx`).



---

archive/issue_comments_400315.json:
```json
{
    "body": "<a id='comment:4'></a>\nAs to which one it should be, I guess that's arbitrary. You may need to change code that depends on the exception (maybe there is some in `combinatorics`) anyway. Using zero makes possibly sense, maybe to have sane behavour for some combinatorial sums.",
    "created_at": "2017-03-15T14:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400315",
    "user": "https://github.com/rwst"
}
```

<a id='comment:4'></a>
As to which one it should be, I guess that's arbitrary. You may need to change code that depends on the exception (maybe there is some in `combinatorics`) anyway. Using zero makes possibly sense, maybe to have sane behavour for some combinatorial sums.



---

archive/issue_comments_400316.json:
```json
{
    "body": "<a id='comment:5'></a>\nNote also\n\n```\nsage: factorial(-89.)\nNaN\n```\nwhich would be the third alternative.",
    "created_at": "2017-03-15T14:13:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400316",
    "user": "https://github.com/rwst"
}
```

<a id='comment:5'></a>
Note also

```
sage: factorial(-89.)
NaN
```
which would be the third alternative.



---

archive/issue_comments_400317.json:
```json
{
    "body": "<a id='comment:6'></a>\nI feel that it would be better if Unsigned Infinity is returned because in case we return any other value, too many files in different components have to be modified to make sure that the consistency is proper. I will modify the function such that it returns Unsigned Infinity when the input is negative by importing `unsigned_infinity` from `sage.rings.infinity`",
    "created_at": "2017-03-15T15:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400317",
    "user": "https://trac.sagemath.org/admin/accounts/users/aashu12"
}
```

<a id='comment:6'></a>
I feel that it would be better if Unsigned Infinity is returned because in case we return any other value, too many files in different components have to be modified to make sure that the consistency is proper. I will modify the function such that it returns Unsigned Infinity when the input is negative by importing `unsigned_infinity` from `sage.rings.infinity`



---

archive/issue_comments_400318.json:
```json
{
    "body": "<a id='comment:7'></a>\nWill it be right here to import unsigned infinity from `sage.rings.infinity`?",
    "created_at": "2017-03-15T15:13:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400318",
    "user": "https://trac.sagemath.org/admin/accounts/users/aashu12"
}
```

<a id='comment:7'></a>
Will it be right here to import unsigned infinity from `sage.rings.infinity`?



---

archive/issue_comments_400319.json:
```json
{
    "body": "<a id='comment:8'></a>\nThat's a style question. I personally import from the specific file instead of from all. I remember a discussion here that recommended that because this way less is imported and less time used. I could not find a reference, sorry. You see both styles used in Sage.",
    "created_at": "2017-03-15T15:51:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400319",
    "user": "https://github.com/rwst"
}
```

<a id='comment:8'></a>
That's a style question. I personally import from the specific file instead of from all. I remember a discussion here that recommended that because this way less is imported and less time used. I could not find a reference, sorry. You see both styles used in Sage.



---

archive/issue_comments_400320.json:
```json
{
    "body": "Changing branch from \"\" to \"u/aashu12/return_infinity_from_factorial_of_negative_integer\"",
    "created_at": "2017-03-17T06:01:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400320",
    "user": "https://trac.sagemath.org/admin/accounts/users/aashu12"
}
```

Changing branch from "" to "u/aashu12/return_infinity_from_factorial_of_negative_integer"



---

archive/issue_comments_400321.json:
```json
{
    "body": "<a id='comment:10'></a>\nNew commits:\n|                                                                                                                                          |                                                              |\n|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|\n|[02fc09c](https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e)|`Return unsigned infinity for a factorial of negative integer`|",
    "created_at": "2017-03-17T06:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400321",
    "user": "https://trac.sagemath.org/admin/accounts/users/aashu12"
}
```

<a id='comment:10'></a>
New commits:
|                                                                                                                                          |                                                              |
|------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------|
|[02fc09c](https://github.com/sagemath/sagetrac-mirror/commit/02fc09cc36e79ed9301f4b58f0268eb81697ba9e)|`Return unsigned infinity for a factorial of negative integer`|



---

archive/issue_comments_400322.json:
```json
{
    "body": "Changing commit from \"\" to \"02fc09cc36e79ed9301f4b58f0268eb81697ba9e\"",
    "created_at": "2017-03-17T06:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400322",
    "user": "https://trac.sagemath.org/admin/accounts/users/aashu12"
}
```

Changing commit from "" to "02fc09cc36e79ed9301f4b58f0268eb81697ba9e"



---

archive/issue_comments_400323.json:
```json
{
    "body": "Changing author from \"\" to \"Ashutosh Ahelleya\"",
    "created_at": "2017-03-17T06:03:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21560",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21560#issuecomment-400323",
    "user": "https://trac.sagemath.org/admin/accounts/users/aashu12"
}
```

Changing author from "" to "Ashutosh Ahelleya"
