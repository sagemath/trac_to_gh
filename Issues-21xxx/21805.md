# Issue 21805: Three.js: reduce CPU load for static scenes

archive/issues_021805.json:
```json
{
    "body": "CC:  tdumont @dimpase @vbraun\n\nKeywords: threejs\n\nThis addresses https://groups.google.com/d/msg/sage-devel/pGLZrwfdQB8/6OsQzr8fBgAJ\n\nIssue created by migration from https://trac.sagemath.org/ticket/22042\n\n",
    "closed_at": "2016-12-24T19:47:29Z",
    "created_at": "2016-12-10T01:35:09Z",
    "labels": [
        "component: graphics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.5",
    "title": "Three.js: reduce CPU load for static scenes",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/21805",
    "user": "https://github.com/paulmasson"
}
```
CC:  tdumont @dimpase @vbraun

Keywords: threejs

This addresses https://groups.google.com/d/msg/sage-devel/pGLZrwfdQB8/6OsQzr8fBgAJ

Issue created by migration from https://trac.sagemath.org/ticket/22042





---

archive/issue_comments_302207.json:
```json
{
    "body": "New commits:",
    "created_at": "2016-12-10T03:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302207",
    "user": "https://github.com/paulmasson"
}
```

New commits:



---

archive/issue_comments_302208.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-12-10T03:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302208",
    "user": "https://github.com/paulmasson"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_302209.json:
```json
{
    "body": "Does this change just disable the animation? \nI'd have expected something on the Python end of it too.",
    "created_at": "2016-12-10T08:44:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302209",
    "user": "https://github.com/dimpase"
}
```

Does this change just disable the animation? 
I'd have expected something on the Python end of it too.



---

archive/issue_comments_302210.json:
```json
{
    "body": "Replying to [comment:4 dimpase]:\n> I'd have expected something on the Python end of it too.\n\nSince all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.",
    "created_at": "2016-12-10T20:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302210",
    "user": "https://github.com/paulmasson"
}
```

Replying to [comment:4 dimpase]:
> I'd have expected something on the Python end of it too.

Since all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.



---

archive/issue_comments_302211.json:
```json
{
    "body": "Replying to [comment:5 paulmasson]:\n> Replying to [comment:4 dimpase]:\n> > I'd have expected something on the Python end of it too.\n\n> Since all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.\n\nI mean, `animate` is set to `false` and remains so, and several pieces in the code\nare conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? \n\nI also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?",
    "created_at": "2016-12-10T21:17:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302211",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:5 paulmasson]:
> Replying to [comment:4 dimpase]:
> > I'd have expected something on the Python end of it too.

> Since all of the rendering happens in JavaScript, there is no need to alter any Python for this ticket. With these changes the scene is rendered only upon user interaction.

I mean, `animate` is set to `false` and remains so, and several pieces in the code
are conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? 

I also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?



---

archive/issue_comments_302212.json:
```json
{
    "body": "Replying to [comment:6 dimpase]:\n> Replying to [comment:5 paulmasson]:\n> > Replying to [comment:4 dimpase]:\n\n> I mean, `animate` is set to `false` and remains so, and several pieces in the code\n> are conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? \n\nAnimation is not currently supported by this viewer but will be, at which point there will be a keyword option `animate` that will set the JavaScript variable. The conditionals will be necessary at some point in the near future and are included in preparation for additional functionality.\n> I also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?\n\nThe examples are embedded in the documentation for this viewer. If you build the documentation, you'll see them in the file `threejs.html` in `reference/plot3d`.",
    "created_at": "2016-12-10T22:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302212",
    "user": "https://github.com/paulmasson"
}
```

Replying to [comment:6 dimpase]:
> Replying to [comment:5 paulmasson]:
> > Replying to [comment:4 dimpase]:

> I mean, `animate` is set to `false` and remains so, and several pieces in the code
> are conditional on its value. I'd imagine that it ought to be under the user control whether to animate or not. What is the point, can't you just remove these that are only executed for `animate==true`, and make the rest unconditional? 

Animation is not currently supported by this viewer but will be, at which point there will be a keyword option `animate` that will set the JavaScript variable. The conditionals will be necessary at some point in the near future and are included in preparation for additional functionality.
> I also really do not understand how the examples touched by this change are relevant for Sage. OK, these are examples how to render something in javascript. So?

The examples are embedded in the documentation for this viewer. If you build the documentation, you'll see them in the file `threejs.html` in `reference/plot3d`.



---

archive/issue_comments_302213.json:
```json
{
    "body": "I'd like to see a comment in the code explaining the change, as it's\nquite counter-intuitive.",
    "created_at": "2016-12-11T22:15:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302213",
    "user": "https://github.com/dimpase"
}
```

I'd like to see a comment in the code explaining the change, as it's
quite counter-intuitive.



---

archive/issue_comments_302214.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2016-12-11T23:55:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302214",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_302215.json:
```json
{
    "body": "Replying to [comment:8 dimpase]:\n> I'd like to see a comment in the code explaining the change, as it's\n> quite counter-intuitive.  \n\nDone.",
    "created_at": "2016-12-11T23:57:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302215",
    "user": "https://github.com/paulmasson"
}
```

Replying to [comment:8 dimpase]:
> I'd like to see a comment in the code explaining the change, as it's
> quite counter-intuitive.  

Done.



---

archive/issue_comments_302216.json:
```json
{
    "body": "looks good to me, thanks!",
    "created_at": "2016-12-14T23:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302216",
    "user": "https://github.com/dimpase"
}
```

looks good to me, thanks!



---

archive/issue_comments_302217.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-12-14T23:20:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302217",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_302218.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2016-12-24T19:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/21805#issuecomment-302218",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_058012.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-12-24T19:47:29Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/21805",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/21805#event-58012"
}
```
