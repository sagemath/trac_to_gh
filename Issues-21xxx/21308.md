# Issue 21308: implement the magnitude function of a graph

archive/issues_021071.json:
```json
{
    "assignees": [],
    "body": "the magnitude function is some kind of generalized  Euler characteristic defined for metric spaces\n\nin particular, graphs can be seen as metric spaces with edges of length one.\n\nLet us implement the magnitude function for graphs.\n\n**CC:**  @tscrim @jm58660 @darijgr\n\n**Branch/Commit:** [87f18ad6d6016375a45a2782aefd99aa4a28502f](https://github.com/sagemath/sagetrac-mirror/commit/87f18ad6d6016375a45a2782aefd99aa4a28502f)\n\n**Reviewer:** Jori M\u00e4ntysalo\n\n**Author:** Fr\u00e9d\u00e9ric Chapoton\n\nIssue created by migration from https://trac.sagemath.org/ticket/21308\n\n",
    "closed_at": "2016-08-25T21:45:46Z",
    "created_at": "2016-08-22T18:16:01Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-7.4",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "implement the magnitude function of a graph",
    "type": "issue",
    "updated_at": "2016-08-25T21:45:46Z",
    "url": "https://github.com/sagemath/sage/issues/21308",
    "user": "https://github.com/fchapoton"
}
```
the magnitude function is some kind of generalized  Euler characteristic defined for metric spaces

in particular, graphs can be seen as metric spaces with edges of length one.

Let us implement the magnitude function for graphs.

**CC:**  @tscrim @jm58660 @darijgr

**Branch/Commit:** [87f18ad6d6016375a45a2782aefd99aa4a28502f](https://github.com/sagemath/sagetrac-mirror/commit/87f18ad6d6016375a45a2782aefd99aa4a28502f)

**Reviewer:** Jori Mäntysalo

**Author:** Frédéric Chapoton

Issue created by migration from https://trac.sagemath.org/ticket/21308





---

archive/issue_events_259269.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-08-22T18:16:01Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "milestone_number": null,
    "milestone_title": "sage-7.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21308#event-259269"
}
```



---

archive/issue_events_259270.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-08-22T18:16:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20graph%20theory",
    "label_color": "08517b",
    "label_name": "component: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21308#event-259270"
}
```



---

archive/issue_events_259271.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-08-22T18:16:01Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "008080",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21308#event-259271"
}
```



---

archive/issue_comments_314111.json:
```json
{
    "body": "**Commit:** [290fea92c090dab6de9dda881524613ddcb2814b](https://github.com/sagemath/sagetrac-mirror/commit/290fea92c090dab6de9dda881524613ddcb2814b)",
    "created_at": "2016-08-22T18:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314111",
    "user": "https://github.com/fchapoton"
}
```

**Commit:** [290fea92c090dab6de9dda881524613ddcb2814b](https://github.com/sagemath/sagetrac-mirror/commit/290fea92c090dab6de9dda881524613ddcb2814b)



---

archive/issue_comments_314112.json:
```json
{
    "body": "**Branch:** [u/chapoton/21308](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/21308)",
    "created_at": "2016-08-22T18:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314112",
    "user": "https://github.com/fchapoton"
}
```

**Branch:** [u/chapoton/21308](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/21308)



---

archive/issue_comments_314113.json:
```json
{
    "body": "<a id='comment:1'>**Comment 1:**</a>\nbranch not yet ready for review\n\n---\n**New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/290fea92c090dab6de9dda881524613ddcb2814b\">290fea9</a></td><td><code>implement the magnitude function of a graph</code></td></tr></table>\n",
    "created_at": "2016-08-22T18:16:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314113",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:1'>**Comment 1:**</a>
branch not yet ready for review

---
**New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/290fea92c090dab6de9dda881524613ddcb2814b">290fea9</a></td><td><code>implement the magnitude function of a graph</code></td></tr></table>




---

archive/issue_comments_314114.json:
```json
{
    "body": "**Changing commit** from \"[290fea92c090dab6de9dda881524613ddcb2814b](https://github.com/sagemath/sagetrac-mirror/commit/290fea92c090dab6de9dda881524613ddcb2814b)\" to \"[3430f54fe5e2399872602bef8d887775c02c199f](https://github.com/sagemath/sagetrac-mirror/commit/3430f54fe5e2399872602bef8d887775c02c199f)\".",
    "created_at": "2016-08-22T18:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314114",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[290fea92c090dab6de9dda881524613ddcb2814b](https://github.com/sagemath/sagetrac-mirror/commit/290fea92c090dab6de9dda881524613ddcb2814b)" to "[3430f54fe5e2399872602bef8d887775c02c199f](https://github.com/sagemath/sagetrac-mirror/commit/3430f54fe5e2399872602bef8d887775c02c199f)".



---

archive/issue_comments_314115.json:
```json
{
    "body": "<a id='comment:2'>**Comment 2:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/3430f54fe5e2399872602bef8d887775c02c199f\">3430f54</a></td><td><code>trac 21308 better doc</code></td></tr></table>\n",
    "created_at": "2016-08-22T18:20:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314115",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:2'>**Comment 2:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/3430f54fe5e2399872602bef8d887775c02c199f">3430f54</a></td><td><code>trac 21308 better doc</code></td></tr></table>




---

archive/issue_comments_314116.json:
```json
{
    "body": "<a id='comment:3'>**Comment 3:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/8138e208df862d148f83e2d5784b72b5f75111b1\">8138e20</a></td><td><code>trac 21308 add one reference + more doc</code></td></tr></table>\n",
    "created_at": "2016-08-22T18:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314116",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:3'>**Comment 3:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/8138e208df862d148f83e2d5784b72b5f75111b1">8138e20</a></td><td><code>trac 21308 add one reference + more doc</code></td></tr></table>




---

archive/issue_comments_314117.json:
```json
{
    "body": "**Changing commit** from \"[3430f54fe5e2399872602bef8d887775c02c199f](https://github.com/sagemath/sagetrac-mirror/commit/3430f54fe5e2399872602bef8d887775c02c199f)\" to \"[8138e208df862d148f83e2d5784b72b5f75111b1](https://github.com/sagemath/sagetrac-mirror/commit/8138e208df862d148f83e2d5784b72b5f75111b1)\".",
    "created_at": "2016-08-22T18:36:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314117",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[3430f54fe5e2399872602bef8d887775c02c199f](https://github.com/sagemath/sagetrac-mirror/commit/3430f54fe5e2399872602bef8d887775c02c199f)" to "[8138e208df862d148f83e2d5784b72b5f75111b1](https://github.com/sagemath/sagetrac-mirror/commit/8138e208df862d148f83e2d5784b72b5f75111b1)".



---

archive/issue_comments_314118.json:
```json
{
    "body": "<a id='comment:4'>**Comment 4:**</a>\n**Branch pushed to git repo; I updated commit sha1.** **New commits:**\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/87f18ad6d6016375a45a2782aefd99aa4a28502f\">87f18ad</a></td><td><code>trac 21308 better doc</code></td></tr></table>\n",
    "created_at": "2016-08-23T07:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314118",
    "user": "https://github.com/sagetrac-git"
}
```

<a id='comment:4'>**Comment 4:**</a>
**Branch pushed to git repo; I updated commit sha1.** **New commits:**
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/87f18ad6d6016375a45a2782aefd99aa4a28502f">87f18ad</a></td><td><code>trac 21308 better doc</code></td></tr></table>




---

archive/issue_comments_314119.json:
```json
{
    "body": "**Changing commit** from \"[8138e208df862d148f83e2d5784b72b5f75111b1](https://github.com/sagemath/sagetrac-mirror/commit/8138e208df862d148f83e2d5784b72b5f75111b1)\" to \"[87f18ad6d6016375a45a2782aefd99aa4a28502f](https://github.com/sagemath/sagetrac-mirror/commit/87f18ad6d6016375a45a2782aefd99aa4a28502f)\".",
    "created_at": "2016-08-23T07:06:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314119",
    "user": "https://github.com/sagetrac-git"
}
```

**Changing commit** from "[8138e208df862d148f83e2d5784b72b5f75111b1](https://github.com/sagemath/sagetrac-mirror/commit/8138e208df862d148f83e2d5784b72b5f75111b1)" to "[87f18ad6d6016375a45a2782aefd99aa4a28502f](https://github.com/sagemath/sagetrac-mirror/commit/87f18ad6d6016375a45a2782aefd99aa4a28502f)".



---

archive/issue_events_259272.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2016-08-23T07:17:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21308#event-259272"
}
```



---

archive/issue_comments_314120.json:
```json
{
    "body": "<a id='comment:6'>**Comment 6:**</a>\nNever heard about this before... Anyways, at https://www.math.uni-bielefeld.de/documenta/vol-18/27.pdf p. 875 there is an example of magnitude function for 2+3 complete bipartite graph. It seems to go to value `5` when `t` grows. However\n\n```\nsage: g = graphs.CompleteBipartiteGraph(3, 2)\nsage: m = g.magnitude_function()\nsage: m(4).n(20)\n0.14839\nsage: m(10).n(20)\n0.029694\n```\n\nI suppose that I understood something wrong.",
    "created_at": "2016-08-23T08:00:36Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314120",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:6'>**Comment 6:**</a>
Never heard about this before... Anyways, at https://www.math.uni-bielefeld.de/documenta/vol-18/27.pdf p. 875 there is an example of magnitude function for 2+3 complete bipartite graph. It seems to go to value `5` when `t` grows. However

```
sage: g = graphs.CompleteBipartiteGraph(3, 2)
sage: m = g.magnitude_function()
sage: m(4).n(20)
0.14839
sage: m(10).n(20)
0.029694
```

I suppose that I understood something wrong.



---

archive/issue_comments_314121.json:
```json
{
    "body": "<a id='comment:7'>**Comment 7:**</a>\nWhat is pictured page 875 is the function \"magnitude in the variable t\"\ndefined by replacing q by exp(-t)\n\nSaying that the limit of that when t tends to +infinity is the cardinality, is the same\nas saying that the value of the fraction at q=0 is the cardinality.",
    "created_at": "2016-08-23T08:03:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314121",
    "user": "https://github.com/fchapoton"
}
```

<a id='comment:7'>**Comment 7:**</a>
What is pictured page 875 is the function "magnitude in the variable t"
defined by replacing q by exp(-t)

Saying that the limit of that when t tends to +infinity is the cardinality, is the same
as saying that the value of the fraction at q=0 is the cardinality.



---

archive/issue_comments_314122.json:
```json
{
    "body": "<a id='comment:8'>**Comment 8:**</a>\nOK then. I would write \"substitution `q = e^{-t}` to obtain\" instead of \"substitution `q = exp(-t)` to obtain\", but not that big thing.\n\nIf I understand this correctly, it is much faster to compute by first substituting `t` and then inverting the resulting numerical matrix --- assuming the user wants only few values. However, this implementation is propably what the user wants.\n\nTests passed, documentation builds etc, so I mark this as positive review.",
    "created_at": "2016-08-23T08:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314122",
    "user": "https://github.com/jm58660"
}
```

<a id='comment:8'>**Comment 8:**</a>
OK then. I would write "substitution `q = e^{-t}` to obtain" instead of "substitution `q = exp(-t)` to obtain", but not that big thing.

If I understand this correctly, it is much faster to compute by first substituting `t` and then inverting the resulting numerical matrix --- assuming the user wants only few values. However, this implementation is propably what the user wants.

Tests passed, documentation builds etc, so I mark this as positive review.



---

archive/issue_events_259273.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-23T08:35:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "008080",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21308#event-259273"
}
```



---

archive/issue_events_259274.json:
```json
{
    "actor": "https://github.com/jm58660",
    "created_at": "2016-08-23T08:35:32Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21308#event-259274"
}
```



---

archive/issue_comments_314123.json:
```json
{
    "body": "**Reviewer:** Jori M\u00e4ntysalo",
    "created_at": "2016-08-23T08:35:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314123",
    "user": "https://github.com/jm58660"
}
```

**Reviewer:** Jori Mäntysalo



---

archive/issue_events_259275.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2016-08-25T21:45:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "008080",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21308#event-259275"
}
```



---

archive/issue_events_259276.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "7eadd9b896ddffdf1e92cc00cce49a742d114d73",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2016-08-25T21:45:46Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/21308#event-259276"
}
```



---

archive/issue_comments_314124.json:
```json
{
    "body": "**Changing branch** from \"[u/chapoton/21308](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/21308)\" to \"[87f18ad6d6016375a45a2782aefd99aa4a28502f](https://github.com/sagemath/sagetrac-mirror/commit/87f18ad6d6016375a45a2782aefd99aa4a28502f)\".",
    "created_at": "2016-08-25T21:45:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/21308",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/21308#issuecomment-314124",
    "user": "https://github.com/vbraun"
}
```

**Changing branch** from "[u/chapoton/21308](https://github.com/sagemath/sagetrac-mirror/tree/u/chapoton/21308)" to "[87f18ad6d6016375a45a2782aefd99aa4a28502f](https://github.com/sagemath/sagetrac-mirror/commit/87f18ad6d6016375a45a2782aefd99aa4a28502f)".
