# Issue 24187: Dancing links random failures

Issue created by migration from https://trac.sagemath.org/ticket/24424

Original creator: vbraun

Original creation time: 2017-12-23 16:22:09

CC:  slabbe vdelecroix

Keywords: random_fail

The output of `one_solution` is random: 

```
**********************************************************************
File "src/sage/combinat/matrices/dancing_links.pyx", line 27, in sage.combinat.matrices.dancing_links
Failed example:
    sorted(x.one_solution(ncpus=8))
Expected:
    [0, 1]
Got:
    [2, 3]
**********************************************************************
1 item had failures:
   1 of  20 in sage.combinat.matrices.dancing_links
    [175 tests, 1 failure, 8.38 s]
----------------------------------------------------------------------
sage -t --long src/sage/combinat/matrices/dancing_links.pyx  # 1 doctest failed
----------------------------------------------------------------------
```

Also, does ncpus=8 really use 8 cores? We already parallelize doctests! Tests should definitely not x8 that.


---

Comment by slabbe created at 2017-12-24 09:32:52

New commits:


---

Comment by slabbe created at 2017-12-24 09:49:21

Changing status from new to needs_review.


---

Comment by slabbe created at 2017-12-24 09:53:10

Replying to [ticket:24424 vbraun]:
> Also, does ncpus=8 really use 8 cores? We already parallelize doctests! Tests should definitely not x8 that.

I changed 8 to 2. The dancing links problem in question uses only 6 rows. So, it is not something that will use a lot of cpu time (something like 1ms).


---

Comment by vbraun created at 2017-12-24 20:55:43

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2017-12-25 18:20:35

Resolution: fixed
