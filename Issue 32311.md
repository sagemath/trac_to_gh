# Issue 32311: Sage crash in terminal involving tab completion

Issue created by migration from https://trac.sagemath.org/ticket/32548

Original creator: @MarcusAichmayr

Original creation time: 2021-09-21 17:44:15

Keywords: crash, tab_completion, terminal

I found a somewhat obscure crash when using tab completion in a Sage terminal on Ubuntu.

The following sequence leads to this crash (at least on my system):

0. Start Sage in the terminal.
1. Type `se`.
2. Press <tab>.
3. Wait until a command box appears.
4. Press <tab>. (This chooses the first command. In my case, `search_def`.)
5. Press <backspace>. repeatedly until we have `se` again
6. Press <tab>. (No commands appear this time.)
7. Press <enter>. (Nothing happens the first time.)
8. Press <enter> again. (Sage crashes.)

Sometimes there is a command box in 6. In this case, go back to 4.
I could also reproduce this by typing `s` in 1.

I tried to reproduce this on several places.
It does not happen with Python in a terminal.
It does not happen with Sage (9.3) in a terminal in Cocalc.
It does not happen in a Jupyter Notebook.

I use Ubuntu 20.04.3 and installed Sage by using the file from the homepage:
sage-9.2-Ubuntu_20.04-x86_64.tar.bz2


---

Attachment

This is the generated crash report.


---

Comment by mkoeppe created at 2021-09-21 18:58:27

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-09-21 18:58:27

Sage 9.2 is outdated. This problem was fixed in 9.3, see #31648


---

Comment by mmezzarobba created at 2021-09-28 16:29:14

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-10-04 23:44:13

Resolution: invalid
