# Issue 24356: Upgrade from Thebe to ThebeLab for live documentation support

archive/issues_024356.json:
```json
{
    "body": "CC:  jdemeyer tmonteil embray vdelecroix jhpalmieri klee arojas\n\n[This is the Trac macro *Thebe* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#Thebe-macro) is a javascript library to turn static HTML pages into live documents where code cells can be edited and executed. Thebe was been introduced in #20690 as a replacement for the live documentation feature of sagenb. It covers the use case of browsing the documentation through the Jupyter notebook; in this case, Thebe connected to that notebook for computations.\n\nHowever this model was not sustainable:\n- Shipping Thebe is additional burden for Sage's maintainers and packagers\n- Thebe is a fork of the Jupyter code base and thus not maintainable.\n- In practice, Thebe got out of sync and soon became incompatible with the Jupyter we shipped. So the feature was lost.\n\nMeanwhile, Thebe has been reimplemented as [This is the Trac macro *ThebeLab* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ThebeLab-macro), a thin layer on top of JupyterLab, making it much more sustainable. In addition, an online computation backend is now available thanks to http://mybinder.org and Sage's docker container.\n\nIn this ticket, we switch gear, and focus on the use case of browsing the documentation from anywhere (within Jupyter, local static documentation, Sage's online documentation), with the assumption of an internet connection.\n\nImplementation:\n- When compiling the documentation, Sphinx adds a small header to the produced static html pages.\n- If a page contains a sage code cell, an Activate button is added.\n- Upon activation, the thebelab javascript library (and some of the jupyterlab javascript as dependency) is fetched from the web.\n- Thebe is configured to use Sage's docker container on MyBinder as computation backend.\n\nBonus:\n- Get rid of Thebe's package.\n\nThe feature has been tested for a couple months on \n[More SageMath Tutorials](http://more-sagemath-tutorials.readthedocs.io/). It's also configured by default for any Sage package that uses [sage-package](https://github.com/sagemath/sage-package).\n\nWe believe that dropping the use case of offline browsing while having a notebook running (which is broken anyway) is largely compensated by the much easier maintenance and the availability of the feature for all deployements of Sage's documentation.\n\nIssue created by migration from https://trac.sagemath.org/ticket/24593\n\n",
    "created_at": "2018-01-25T23:18:53Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "title": "Upgrade from Thebe to ThebeLab for live documentation support",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/24356",
    "user": "nthiery"
}
```
CC:  jdemeyer tmonteil embray vdelecroix jhpalmieri klee arojas

[This is the Trac macro *Thebe* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#Thebe-macro) is a javascript library to turn static HTML pages into live documents where code cells can be edited and executed. Thebe was been introduced in #20690 as a replacement for the live documentation feature of sagenb. It covers the use case of browsing the documentation through the Jupyter notebook; in this case, Thebe connected to that notebook for computations.

However this model was not sustainable:
- Shipping Thebe is additional burden for Sage's maintainers and packagers
- Thebe is a fork of the Jupyter code base and thus not maintainable.
- In practice, Thebe got out of sync and soon became incompatible with the Jupyter we shipped. So the feature was lost.

Meanwhile, Thebe has been reimplemented as [This is the Trac macro *ThebeLab* that was inherited from the migration](https://trac.sagemath.org/wiki/WikiMacros#ThebeLab-macro), a thin layer on top of JupyterLab, making it much more sustainable. In addition, an online computation backend is now available thanks to http://mybinder.org and Sage's docker container.

In this ticket, we switch gear, and focus on the use case of browsing the documentation from anywhere (within Jupyter, local static documentation, Sage's online documentation), with the assumption of an internet connection.

Implementation:
- When compiling the documentation, Sphinx adds a small header to the produced static html pages.
- If a page contains a sage code cell, an Activate button is added.
- Upon activation, the thebelab javascript library (and some of the jupyterlab javascript as dependency) is fetched from the web.
- Thebe is configured to use Sage's docker container on MyBinder as computation backend.

Bonus:
- Get rid of Thebe's package.

The feature has been tested for a couple months on 
[More SageMath Tutorials](http://more-sagemath-tutorials.readthedocs.io/). It's also configured by default for any Sage package that uses [sage-package](https://github.com/sagemath/sage-package).

We believe that dropping the use case of offline browsing while having a notebook running (which is broken anyway) is largely compensated by the much easier maintenance and the availability of the feature for all deployements of Sage's documentation.

Issue created by migration from https://trac.sagemath.org/ticket/24593





---

archive/issue_comments_341175.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-01-27T10:51:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341175",
    "user": "nthiery"
}
```

New commits:



---

archive/issue_comments_341176.json:
```json
{
    "body": "I am currently building the whole documentation on my machine to test it locally.",
    "created_at": "2018-01-27T10:52:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341176",
    "user": "nthiery"
}
```

I am currently building the whole documentation on my machine to test it locally.



---

archive/issue_comments_341177.json:
```json
{
    "body": "Works here, either when opening the html doc files directly in the browser as file:..., or by browsing the documentation through the Help menu of the Jupyter notebook.\n\nHence needs review.",
    "created_at": "2018-01-27T22:43:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341177",
    "user": "nthiery"
}
```

Works here, either when opening the html doc files directly in the browser as file:..., or by browsing the documentation through the Help menu of the Jupyter notebook.

Hence needs review.



---

archive/issue_comments_341178.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-01-27T22:43:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341178",
    "user": "nthiery"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_341179.json:
```json
{
    "body": "I had a look at the patchbot reports; one is gree. Some of the patchbot fails on compiling giac: most likely unrelated. For another the startup time is affected; again, it seems likely to be unrelated.",
    "created_at": "2018-01-28T14:09:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341179",
    "user": "nthiery"
}
```

I had a look at the patchbot reports; one is gree. Some of the patchbot fails on compiling giac: most likely unrelated. For another the startup time is affected; again, it seems likely to be unrelated.



---

archive/issue_comments_341180.json:
```json
{
    "body": "See sage-devel for the giac failure: apparently due to gcc that needs rebuilding (https://trac.sagemath.org/ticket/24599) .",
    "created_at": "2018-01-28T14:11:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341180",
    "user": "nthiery"
}
```

See sage-devel for the giac failure: apparently due to gcc that needs rebuilding (https://trac.sagemath.org/ticket/24599) .



---

archive/issue_comments_341181.json:
```json
{
    "body": "I am not sure to completely understand how the whole stuff work, here are some questions:\n\n- The thebelab javascript is provided by a CDN (namely `unpkg.com`), and since the version is hardcoded in the link, if there is an upgrade of thebelab, there will be an update within Sage source code as well, so why not providing the javascript locally (by packaging thebelab), and avoid this remote intermediary ?\n\n- The work of forking jupyterlab to extract the thebe-like part was done already by thebelab. Why not using that interesting part locally and use the running jupyter instance instead of mybinder ?\n\n- How could a user running the doc from her Sage installation be sufficiently warned that, while a Sage kernel is currently running on her machine, the code will however be executed remotely ?\n\n- mybinder FAQ explicitly states * You shouldn't do anything on mybinder.org that you wouldn't mind sharing with the world! * see https://mybinder.readthedocs.io/en/latest/faq.html#can-i-push-data-from-my-binder-session-back-to-my-repository How is this issue addressed since the goal of live documentation is precisely that the user will modify the cells with stuff she wants to try ?\n\n- The local documentation depends on the version of Sage (e.g. existence of some method, option, ...), hence there must be a corresponding kernel on mybinder:\n  - How is the local Sage version transmitted to mybinder so that the correct kernel is launched remotely ?\n  - This require a frequent updates on the mybinder machines (one at each release). Who takes the responsibility of long-term maintenance of remote kernels ?\n\n- What is the point of having this into Sagemath source code if Sagemath can not run it, as it requires remote servers to work anyway ? Why not instead maintaining a `livedoc.sagemath.org` service ? This would be more consistent and understandable from a user perspective.\n\n- Is it possible to disable this feature when building Sage documentation (as we did for the plot directive) ?\n\n- [this one is sarcastic] shall we consider having `sage --notebook` open a webpage redirecting to some cocalc or any similar centralized, bandwidth consuming, earth warming, privacy harming, open-source alternative ?",
    "created_at": "2018-01-28T22:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341181",
    "user": "tmonteil"
}
```

I am not sure to completely understand how the whole stuff work, here are some questions:

- The thebelab javascript is provided by a CDN (namely `unpkg.com`), and since the version is hardcoded in the link, if there is an upgrade of thebelab, there will be an update within Sage source code as well, so why not providing the javascript locally (by packaging thebelab), and avoid this remote intermediary ?

- The work of forking jupyterlab to extract the thebe-like part was done already by thebelab. Why not using that interesting part locally and use the running jupyter instance instead of mybinder ?

- How could a user running the doc from her Sage installation be sufficiently warned that, while a Sage kernel is currently running on her machine, the code will however be executed remotely ?

- mybinder FAQ explicitly states * You shouldn't do anything on mybinder.org that you wouldn't mind sharing with the world! * see https://mybinder.readthedocs.io/en/latest/faq.html#can-i-push-data-from-my-binder-session-back-to-my-repository How is this issue addressed since the goal of live documentation is precisely that the user will modify the cells with stuff she wants to try ?

- The local documentation depends on the version of Sage (e.g. existence of some method, option, ...), hence there must be a corresponding kernel on mybinder:
  - How is the local Sage version transmitted to mybinder so that the correct kernel is launched remotely ?
  - This require a frequent updates on the mybinder machines (one at each release). Who takes the responsibility of long-term maintenance of remote kernels ?

- What is the point of having this into Sagemath source code if Sagemath can not run it, as it requires remote servers to work anyway ? Why not instead maintaining a `livedoc.sagemath.org` service ? This would be more consistent and understandable from a user perspective.

- Is it possible to disable this feature when building Sage documentation (as we did for the plot directive) ?

- [this one is sarcastic] shall we consider having `sage --notebook` open a webpage redirecting to some cocalc or any similar centralized, bandwidth consuming, earth warming, privacy harming, open-source alternative ?



---

archive/issue_comments_341182.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-01-28T22:51:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341182",
    "user": "tmonteil"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_341183.json:
```json
{
    "body": "I don't understand the following\n\n```\nThebe is configured to use Sage's docker container on !MyBinder as\ncomputation backend.\n```\n\nThis means that you need to use MyBinder in order to have live documentation? What is the point of having Sage on my computer then? To my mind, having a live documentation needing internet and a web service is not worth it.",
    "created_at": "2018-01-30T06:40:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341183",
    "user": "vdelecroix"
}
```

I don't understand the following

```
Thebe is configured to use Sage's docker container on !MyBinder as
computation backend.
```

This means that you need to use MyBinder in order to have live documentation? What is the point of having Sage on my computer then? To my mind, having a live documentation needing internet and a web service is not worth it.



---

archive/issue_comments_341184.json:
```json
{
    "body": "To balance [comment:13 comment:13]: I think that using MyBinder would be good for let say `livedoc.sagemath.org` as Thierry suggested in [comment:11 comment:11].",
    "created_at": "2018-01-30T07:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341184",
    "user": "vdelecroix"
}
```

To balance [comment:13 comment:13]: I think that using MyBinder would be good for let say `livedoc.sagemath.org` as Thierry suggested in [comment:11 comment:11].



---

archive/issue_comments_341185.json:
```json
{
    "body": "What exactly are the differences between Thebe and SageMathCell? In particular:\n* Do multiple users share the same running instance of the container?\n* How many concurrent users can be supported?\n* How long can a session run, i.e. if there are several linked cells, how long can one wait after executing the first one before executing the last one?\n* What are CPU/memory/disk usage limits?\n\nRegarding others comments: I also do not see the point in having my local documentation (which is build from the source on my machine, perhaps my own branch) to use for computations remote servers. Having a link (perhaps glued on the screen as the current Activate button) to some web server with live cells would be much less confusing in terms of accessing remote resources and different versions.",
    "created_at": "2018-01-30T08:57:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341185",
    "user": "novoselt"
}
```

What exactly are the differences between Thebe and SageMathCell? In particular:
* Do multiple users share the same running instance of the container?
* How many concurrent users can be supported?
* How long can a session run, i.e. if there are several linked cells, how long can one wait after executing the first one before executing the last one?
* What are CPU/memory/disk usage limits?

Regarding others comments: I also do not see the point in having my local documentation (which is build from the source on my machine, perhaps my own branch) to use for computations remote servers. Having a link (perhaps glued on the screen as the current Activate button) to some web server with live cells would be much less confusing in terms of accessing remote resources and different versions.



---

archive/issue_comments_341186.json:
```json
{
    "body": "Hi everyone,\n\nThanks for the thoughtfull comments. I am done with teaching for the\nweek, and can finally come back to this.\n\nI realized I forgot to state the obvious: yes, when possible, using a\nlocally running jupyter would be preferable for computations for all\nthe aforementionned reasons (use of resources, privacy, consistency\nwith the locally installed kernel, ...).\n\nBut this requires some additional work:\n1. packaging thebelab\n2. packaging jupyterlab\n3. implementing the logic: \"am I being served by a Jupyter server? If yes, connect there; otherwise offer binder as backup\".\n4. making sure that the jupyterlab client code is compatible with the Jupyter server we are running\n\nI therefore aimed for a strategy in two stages:\n- Implement something simple for now, put it in production, and assess how robust this is\n- Add support for using a local Jupyter server when available\n\nAdditional motivations:\n- the use of the local jupyter by our previous Thebe setup was broken\n  anyway, This ticket tackles the most urgent: reinstating the feature\n  in most use cases.\n- we might as well wait for Sage to upgrade from Jupyter to JupyterLab\n  before implementing the second step, to save on 2. and 4.\n\nWhat do you think?\n\nNow to more specific points:\n\n> - The thebelab javascript is provided by a CDN (namely `unpkg.com`),\n>   and since the version is hardcoded in the link, if there is an\n>   upgrade of thebelab, there will be an update within Sage source\n>   code as well, so why not providing the javascript locally (by\n>   packaging thebelab), and avoid this remote intermediary ?\n\nThe link is actually using semantic versioning (that's the `^` in\n`thebelab`@`^0.1.0`). So it will fetch the latest version of thebelab\nwhose API is meant to be backward compatible.\n\n\n> - The work of forking jupyterlab to extract the thebe-like part was\n>   done already by thebelab.\n\nJust for clarification: it's not a fork. thebelab is using the vanilla\njupyterlab as a library.\n\n> - How could a user running the doc from her Sage installation be\n>   sufficiently warned that, while a Sage kernel is currently running\n>   on her machine, the code will however be executed remotely ?\n\nYes, that's an important point. The tooltip explains this. Do you have\nspecific suggestions? We could e.g. easily change the Activate button\ntitle or the messages that appear when it get pressed.\n\n> - mybinder FAQ explicitly states '' You shouldn't do anything on\n>   mybinder.org that you wouldn't mind sharing with the world! '' see\n>   https://mybinder.readthedocs.io/en/latest/faq.html#can-i-push-data-from-my-binder-session-back-to-my-repository\n>   How is this issue addressed since the goal of live documentation\n>   is precisely that the user will modify the cells with stuff she\n>   wants to try ?\n\nThe live documentation, is mostly meant for casually toying with small\nvariations of the existing examples; this sounds unlikely to leak\nprivate information. That being said, yes, the user should be well\naware of what's happening in case she would want to play harder.\n\n>   - This require a frequent updates on the mybinder machines (one at\n>     each release). Who takes the responsibility of long-term\n>     maintenance of remote kernels ?\n\nThe bulk of the work is to update the docker container, which have\nmany other use cases anyway. This is mostly automated. Erik and Julian\nare working on fully automatizing this, toward including this in the\nrelease process.\n\nBeyond this, there remains on trivial item: updating the label in:\n\n    https://github.com/sagemath/sage-binder-env/blob/master/Dockerfile\n\nI am happy to volunteer on that for the next couple years :-)\n\n\n> alternative the livedoc.sagemath.org approach\n\nOur users browse the Sage documentation in many ways: on\ndoc.sagemath.org, through the notebook's Help menu, or browsing\ndirectly the local html pages, or a copy of them on their department\npage. With this ticket (and admittedly assuming internet), the user\ncan make the documentation live right where he is. Forcing her/him to\nnavigate to a parallel set of documentation pages is only making\nthings more complicated. And breaks the flow of reading.\n\nBesides this would also forces us to setup and maintain a new service.\n\n> - Is it possible to disable this feature when building Sage\n>   documentation (as we did for the plot directive) ?\n\nIt should be doable, but I don't necessarily see the point. Except for\nthe 10 lines of javascript/css to setup the button, nothing happens\nunless the user explicitly presses the activate button: no connection\nto binder, no thebelab download, no network activity of any form.\n\n> About thebelab and the Sage cell server\n\nThat's a real question, as there is much overlap between the two\nprojects. We actually discussed this with Jason Grout last week.\n\nThebeLab, like Jupyter, is language agnostic and targets a much much\nwider community than the Sage cell server. It's therefore likely to\nget more traction in the long run, in terms of users, developers, and\ncomputing resources. It can also use any Jupyter server (a local\njupyter, a jupyterhub, binder, ...) that the user has credentials for.\n\nThe Sage cell server on the other hand is much more advanced when it\ncomes to performance. For example, when used with binder, a full new\njupyter ends up being started each time, rather than just spawning a\nnew kernel, or even forking an existing one.\n\nI would love to see a convergence between the two projects, with the\ncool features and ideas of the Sage cell server being ported over to\nThebeLab (or presumably down the stack into Jupyter/JupyterHub). Kind\nof what happened with the Sage notebook and Jupyter.\n\nCheers,\n                   Nicolas",
    "created_at": "2018-02-02T17:47:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341186",
    "user": "nthiery"
}
```

Hi everyone,

Thanks for the thoughtfull comments. I am done with teaching for the
week, and can finally come back to this.

I realized I forgot to state the obvious: yes, when possible, using a
locally running jupyter would be preferable for computations for all
the aforementionned reasons (use of resources, privacy, consistency
with the locally installed kernel, ...).

But this requires some additional work:
1. packaging thebelab
2. packaging jupyterlab
3. implementing the logic: "am I being served by a Jupyter server? If yes, connect there; otherwise offer binder as backup".
4. making sure that the jupyterlab client code is compatible with the Jupyter server we are running

I therefore aimed for a strategy in two stages:
- Implement something simple for now, put it in production, and assess how robust this is
- Add support for using a local Jupyter server when available

Additional motivations:
- the use of the local jupyter by our previous Thebe setup was broken
  anyway, This ticket tackles the most urgent: reinstating the feature
  in most use cases.
- we might as well wait for Sage to upgrade from Jupyter to JupyterLab
  before implementing the second step, to save on 2. and 4.

What do you think?

Now to more specific points:

> - The thebelab javascript is provided by a CDN (namely `unpkg.com`),
>   and since the version is hardcoded in the link, if there is an
>   upgrade of thebelab, there will be an update within Sage source
>   code as well, so why not providing the javascript locally (by
>   packaging thebelab), and avoid this remote intermediary ?

The link is actually using semantic versioning (that's the `^` in
`thebelab`@`^0.1.0`). So it will fetch the latest version of thebelab
whose API is meant to be backward compatible.


> - The work of forking jupyterlab to extract the thebe-like part was
>   done already by thebelab.

Just for clarification: it's not a fork. thebelab is using the vanilla
jupyterlab as a library.

> - How could a user running the doc from her Sage installation be
>   sufficiently warned that, while a Sage kernel is currently running
>   on her machine, the code will however be executed remotely ?

Yes, that's an important point. The tooltip explains this. Do you have
specific suggestions? We could e.g. easily change the Activate button
title or the messages that appear when it get pressed.

> - mybinder FAQ explicitly states '' You shouldn't do anything on
>   mybinder.org that you wouldn't mind sharing with the world! '' see
>   https://mybinder.readthedocs.io/en/latest/faq.html#can-i-push-data-from-my-binder-session-back-to-my-repository
>   How is this issue addressed since the goal of live documentation
>   is precisely that the user will modify the cells with stuff she
>   wants to try ?

The live documentation, is mostly meant for casually toying with small
variations of the existing examples; this sounds unlikely to leak
private information. That being said, yes, the user should be well
aware of what's happening in case she would want to play harder.

>   - This require a frequent updates on the mybinder machines (one at
>     each release). Who takes the responsibility of long-term
>     maintenance of remote kernels ?

The bulk of the work is to update the docker container, which have
many other use cases anyway. This is mostly automated. Erik and Julian
are working on fully automatizing this, toward including this in the
release process.

Beyond this, there remains on trivial item: updating the label in:

    https://github.com/sagemath/sage-binder-env/blob/master/Dockerfile

I am happy to volunteer on that for the next couple years :-)


> alternative the livedoc.sagemath.org approach

Our users browse the Sage documentation in many ways: on
doc.sagemath.org, through the notebook's Help menu, or browsing
directly the local html pages, or a copy of them on their department
page. With this ticket (and admittedly assuming internet), the user
can make the documentation live right where he is. Forcing her/him to
navigate to a parallel set of documentation pages is only making
things more complicated. And breaks the flow of reading.

Besides this would also forces us to setup and maintain a new service.

> - Is it possible to disable this feature when building Sage
>   documentation (as we did for the plot directive) ?

It should be doable, but I don't necessarily see the point. Except for
the 10 lines of javascript/css to setup the button, nothing happens
unless the user explicitly presses the activate button: no connection
to binder, no thebelab download, no network activity of any form.

> About thebelab and the Sage cell server

That's a real question, as there is much overlap between the two
projects. We actually discussed this with Jason Grout last week.

ThebeLab, like Jupyter, is language agnostic and targets a much much
wider community than the Sage cell server. It's therefore likely to
get more traction in the long run, in terms of users, developers, and
computing resources. It can also use any Jupyter server (a local
jupyter, a jupyterhub, binder, ...) that the user has credentials for.

The Sage cell server on the other hand is much more advanced when it
comes to performance. For example, when used with binder, a full new
jupyter ends up being started each time, rather than just spawning a
new kernel, or even forking an existing one.

I would love to see a convergence between the two projects, with the
cool features and ideas of the Sage cell server being ported over to
ThebeLab (or presumably down the stack into Jupyter/JupyterHub). Kind
of what happened with the Sage notebook and Jupyter.

Cheers,
                   Nicolas



---

archive/issue_comments_341187.json:
```json
{
    "body": "Replying to [comment:15 novoselt]:\n> What exactly are the differences between Thebe and SageMathCell? In particular:\n> * Do multiple users share the same running instance of the container?\n\nNo\n\n> * How many concurrent users can be supported?\n\nI don't know for sure. Since the project has been revamped a couple months ago, Binder seems to scale relatively well. There are several ongoing efforts as well to add more deployements (like  [this one](http://binderhub.fedcloud-tf.fedcloud.eu/) on the \"EU  cloud\") though they are not federated yet.\n\n> * How long can a session run, i.e. if there are several linked cells, how long can one wait after executing the first one before executing the last one?\n> * What are CPU/memory/disk usage limits?\n\nI would need to check on the binder docs.\n\nI remember beeing really annoyed by Sage's live documentation that would loose its history in the middle of my lectures. But I have changed workflow and haven't used ThebeLab enough to have a feeling on whether this could become annoying for a typical usage.",
    "created_at": "2018-02-02T17:55:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341187",
    "user": "nthiery"
}
```

Replying to [comment:15 novoselt]:
> What exactly are the differences between Thebe and SageMathCell? In particular:
> * Do multiple users share the same running instance of the container?

No

> * How many concurrent users can be supported?

I don't know for sure. Since the project has been revamped a couple months ago, Binder seems to scale relatively well. There are several ongoing efforts as well to add more deployements (like  [this one](http://binderhub.fedcloud-tf.fedcloud.eu/) on the "EU  cloud") though they are not federated yet.

> * How long can a session run, i.e. if there are several linked cells, how long can one wait after executing the first one before executing the last one?
> * What are CPU/memory/disk usage limits?

I would need to check on the binder docs.

I remember beeing really annoyed by Sage's live documentation that would loose its history in the middle of my lectures. But I have changed workflow and haven't used ThebeLab enough to have a feeling on whether this could become annoying for a typical usage.



---

archive/issue_comments_341188.json:
```json
{
    "body": "Hi, I see this here for the first time. Since I'm the one maintaining the public sage documentation files, will this an impact on it? Since that last \"thebe\" change, I always have to apply a patch to Sage in order to make it work (basically, to disable the javascript). https://github.com/sagemath/documentation/blob/gh-pages/thebe.patch\n\nIs there also an intention to make this work for the doc.sagemath.org pages?",
    "created_at": "2018-02-02T18:33:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341188",
    "user": "schilly"
}
```

Hi, I see this here for the first time. Since I'm the one maintaining the public sage documentation files, will this an impact on it? Since that last "thebe" change, I always have to apply a patch to Sage in order to make it work (basically, to disable the javascript). https://github.com/sagemath/documentation/blob/gh-pages/thebe.patch

Is there also an intention to make this work for the doc.sagemath.org pages?



---

archive/issue_comments_341189.json:
```json
{
    "body": "Hi Harald,\n\n>  Hi, I see this here for the first time. Since I'm the one maintaining the\n>  public sage documentation files, will this an impact on it? Since that\n>  last \"thebe\" change, I always have to apply a patch to Sage in order to\n>  make it work (basically, to disable the javascript).\n>  https://github.com/sagemath/documentation/blob/gh-pages/thebe.patch\n> \n>  Is there also an intention to make this work for the doc.sagemath.org\n>  pages?\n\nThanks for investigating this. Yes, having this work on\ndoc.sagemath.org is one of the big point.\n\nThe new implementation consists of a couple lines of javascript and\ncss, which just assume standard internet connection to further fetch\nthebelab's javascript from a cdn and connect to binder. This worked\nwithout special action on ReadTheDoc. See e.g.:\n\n        http://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html\n\nDo you foresee anything specific in the doc.sagemath.org setup that\ncould break that? If useful, I can provide with a tiny tarball with\none example page and the js and css to be temporarily deployed in a\ncorner of docs.sagemath.org for testing.\n\nCheers,\n                                Nicolas",
    "created_at": "2018-02-03T22:39:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341189",
    "user": "nthiery"
}
```

Hi Harald,

>  Hi, I see this here for the first time. Since I'm the one maintaining the
>  public sage documentation files, will this an impact on it? Since that
>  last "thebe" change, I always have to apply a patch to Sage in order to
>  make it work (basically, to disable the javascript).
>  https://github.com/sagemath/documentation/blob/gh-pages/thebe.patch
> 
>  Is there also an intention to make this work for the doc.sagemath.org
>  pages?

Thanks for investigating this. Yes, having this work on
doc.sagemath.org is one of the big point.

The new implementation consists of a couple lines of javascript and
css, which just assume standard internet connection to further fetch
thebelab's javascript from a cdn and connect to binder. This worked
without special action on ReadTheDoc. See e.g.:

        http://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html

Do you foresee anything specific in the doc.sagemath.org setup that
could break that? If useful, I can provide with a tiny tarball with
one example page and the js and css to be temporarily deployed in a
corner of docs.sagemath.org for testing.

Cheers,
                                Nicolas



---

archive/issue_comments_341190.json:
```json
{
    "body": "> Do you foresee anything specific in the doc.sagemath.org setup ...\n\nNo, there is nothing weird going on. It's just static files hosted on the \"fastly\" CDN. \n\nOTOH, I also don't remember what the problem is right now. Probably that it didn't load at all or something like that. That's why I disabled it.",
    "created_at": "2018-02-04T12:40:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341190",
    "user": "schilly"
}
```

> Do you foresee anything specific in the doc.sagemath.org setup ...

No, there is nothing weird going on. It's just static files hosted on the "fastly" CDN. 

OTOH, I also don't remember what the problem is right now. Probably that it didn't load at all or something like that. That's why I disabled it.



---

archive/issue_comments_341191.json:
```json
{
    "body": "> No, there is nothing weird going on. It's just static files hosted on the \"fastly\" CDN. \n\nGood. Then this should \"just work\".\n\n> OTOH, I also don't remember what the problem is right now. Probably that it didn't load at all or something like that. That's why I disabled it.\n\nThebe is currently (i.e. before this ticket) configured in the Sage documentation to connect to a local notebook. So the feature could never have worked on doc.sagemath.org anyway. It could be that, in addition, the detection logic was faulty and causing problem.",
    "created_at": "2018-02-04T13:04:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341191",
    "user": "nthiery"
}
```

> No, there is nothing weird going on. It's just static files hosted on the "fastly" CDN. 

Good. Then this should "just work".

> OTOH, I also don't remember what the problem is right now. Probably that it didn't load at all or something like that. That's why I disabled it.

Thebe is currently (i.e. before this ticket) configured in the Sage documentation to connect to a local notebook. So the feature could never have worked on doc.sagemath.org anyway. It could be that, in addition, the detection logic was faulty and causing problem.



---

archive/issue_comments_341192.json:
```json
{
    "body": "I believe I provided tentative answers to the questions that were asked, so I am setting this back to needs review. Mostly as a ping.\n\nAny opinions? In particular on the two stages approach?",
    "created_at": "2018-02-13T22:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341192",
    "user": "nthiery"
}
```

I believe I provided tentative answers to the questions that were asked, so I am setting this back to needs review. Mostly as a ping.

Any opinions? In particular on the two stages approach?



---

archive/issue_comments_341193.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-02-13T22:47:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341193",
    "user": "nthiery"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_341194.json:
```json
{
    "body": ">>       How could a user running the doc from her Sage installation be sufficiently warned that, while a Sage kernel is currently running on her machine, the code will however be executed remotely ? \n>Yes, that's an important point. The tooltip explains this. Do you have specific suggestions? We could e.g. easily change the Activate button title or the messages that appear when it get pressed. \n\nI think it should be much more clear that a remote server will be used and, perhaps, a different version of Sage. How about some dialog window with this information that appears when \"Activate\" is pressed? Perhaps with a checkbox \"Don't show this again\". Relying on users reading tooltips is unreliable...",
    "created_at": "2018-02-13T23:49:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341194",
    "user": "novoselt"
}
```

>>       How could a user running the doc from her Sage installation be sufficiently warned that, while a Sage kernel is currently running on her machine, the code will however be executed remotely ? 
>Yes, that's an important point. The tooltip explains this. Do you have specific suggestions? We could e.g. easily change the Activate button title or the messages that appear when it get pressed. 

I think it should be much more clear that a remote server will be used and, perhaps, a different version of Sage. How about some dialog window with this information that appears when "Activate" is pressed? Perhaps with a checkbox "Don't show this again". Relying on users reading tooltips is unreliable...



---

archive/issue_comments_341195.json:
```json
{
    "body": "Replying to [comment:23 novoselt]:\n> I think it should be much more clear that a remote server will be used and, perhaps, a different version of Sage.\n\n> How about some dialog window with this information that appears when \"Activate\" is pressed? Perhaps with a checkbox \"Don't show this again\". Relying on users reading tooltips is unreliable...\n\nDialog windows are a bit of a bother for users. I had a look at how you handle the same issue in SageMatCell. I like the \"Help\" and \"About\" links. A further improvement would be to have those links along the run button rather than at the end of the output: first to see them before actually pressing button, and also to save on vertical space.\n\nThis would need to be done upstream in Thebe though; I'll post a feature request there. It's also somewhat more complicated than for the [SageMathCell](SageMathCell) since there can be many possible configurations, and the message or page linked to should reflect that.\n\nIn the mean time, one easy thing to do would be to adapt the status messages that are displayed in the status field that replaces the Activate button. Currently it shows:\n- building\n- launching\n- ready\n\nWe could make it into something like:\n- Setting up Thebe\n- Connecting to mybinder.org\n- Connected to mybinder.og\n\nwhere mybinder.org would be a clickable link.\n\nWhat do you think? Suggestions for better wording?",
    "created_at": "2018-02-14T16:37:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341195",
    "user": "nthiery"
}
```

Replying to [comment:23 novoselt]:
> I think it should be much more clear that a remote server will be used and, perhaps, a different version of Sage.

> How about some dialog window with this information that appears when "Activate" is pressed? Perhaps with a checkbox "Don't show this again". Relying on users reading tooltips is unreliable...

Dialog windows are a bit of a bother for users. I had a look at how you handle the same issue in SageMatCell. I like the "Help" and "About" links. A further improvement would be to have those links along the run button rather than at the end of the output: first to see them before actually pressing button, and also to save on vertical space.

This would need to be done upstream in Thebe though; I'll post a feature request there. It's also somewhat more complicated than for the [SageMathCell](SageMathCell) since there can be many possible configurations, and the message or page linked to should reflect that.

In the mean time, one easy thing to do would be to adapt the status messages that are displayed in the status field that replaces the Activate button. Currently it shows:
- building
- launching
- ready

We could make it into something like:
- Setting up Thebe
- Connecting to mybinder.org
- Connected to mybinder.og

where mybinder.org would be a clickable link.

What do you think? Suggestions for better wording?



---

archive/issue_comments_341196.json:
```json
{
    "body": "Replying to [comment:24 nthiery]:\n> Replying to [comment:23 novoselt]:\n> > I think it should be much more clear that a remote server will be used and, perhaps, a different version of Sage.\n> \n> > How about some dialog window with this information that appears when \"Activate\" is pressed? Perhaps with a checkbox \"Don't show this again\". Relying on users reading tooltips is unreliable...\n> \n> Dialog windows are a bit of a bother for users. I had a look at how you handle the same issue in SageMatCell. I like the \"Help\" and \"About\" links. A further improvement would be to have those links along the run button rather than at the end of the output: first to see them before actually pressing button, and also to save on vertical space.\n\nThis is not at all the same issue: [SageMathCell](SageMathCell) handles cells embedded in random web pages without any relation to local installation. If a user opens some website, it is only natural that the content is using the internet. But when I build a local copy of Sage, perhaps with my own modifications, and local files from this copy use a remote server with a different version of Sage - that's not at all obvious.\n\nI do agree that dialog windows are annoying, yet we had them for TOS when it was necessary and they would appear only once. I did not find this annoying at all and for showing an important and non-obvious piece of information that's a great solution, I think.\n\nRegarding possible improvement for [SageMathCell](SageMathCell) - I've added a link to some existing ones. Presumably the output location was used as the one which is always visible (at least when things are working) while input can be completely hidden including the button.",
    "created_at": "2018-02-14T17:00:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341196",
    "user": "novoselt"
}
```

Replying to [comment:24 nthiery]:
> Replying to [comment:23 novoselt]:
> > I think it should be much more clear that a remote server will be used and, perhaps, a different version of Sage.
> 
> > How about some dialog window with this information that appears when "Activate" is pressed? Perhaps with a checkbox "Don't show this again". Relying on users reading tooltips is unreliable...
> 
> Dialog windows are a bit of a bother for users. I had a look at how you handle the same issue in SageMatCell. I like the "Help" and "About" links. A further improvement would be to have those links along the run button rather than at the end of the output: first to see them before actually pressing button, and also to save on vertical space.

This is not at all the same issue: [SageMathCell](SageMathCell) handles cells embedded in random web pages without any relation to local installation. If a user opens some website, it is only natural that the content is using the internet. But when I build a local copy of Sage, perhaps with my own modifications, and local files from this copy use a remote server with a different version of Sage - that's not at all obvious.

I do agree that dialog windows are annoying, yet we had them for TOS when it was necessary and they would appear only once. I did not find this annoying at all and for showing an important and non-obvious piece of information that's a great solution, I think.

Regarding possible improvement for [SageMathCell](SageMathCell) - I've added a link to some existing ones. Presumably the output location was used as the one which is always visible (at least when things are working) while input can be completely hidden including the button.



---

archive/issue_comments_341197.json:
```json
{
    "body": "Replying to [comment:22 nthiery]:\n> I believe I provided tentative answers to the questions that were asked, so I am setting this back to needs review. Mostly as a ping.\n> \n> Any opinions? In particular on the two stages approach?\n\nFor the time being, we could simply disable thebe (since you say that it is broken). Having in Sage an even more broken feature (= let users depend on internet and mybinder) is not an improvement. To my mind, the proposal in this ticket is for online documentation only (and a possible good proposal for that purpose). However, it has nothing to do inside the standard Sage.\n\nThe current branch is not like a huge amount of code and refactoring. So I don't see any emergency in including it at this stage. People who are interested in testing/using it can simply apply the branch as it is done for many experimental features.",
    "created_at": "2018-02-16T16:40:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341197",
    "user": "vdelecroix"
}
```

Replying to [comment:22 nthiery]:
> I believe I provided tentative answers to the questions that were asked, so I am setting this back to needs review. Mostly as a ping.
> 
> Any opinions? In particular on the two stages approach?

For the time being, we could simply disable thebe (since you say that it is broken). Having in Sage an even more broken feature (= let users depend on internet and mybinder) is not an improvement. To my mind, the proposal in this ticket is for online documentation only (and a possible good proposal for that purpose). However, it has nothing to do inside the standard Sage.

The current branch is not like a huge amount of code and refactoring. So I don't see any emergency in including it at this stage. People who are interested in testing/using it can simply apply the branch as it is done for many experimental features.



---

archive/issue_comments_341198.json:
```json
{
    "body": "Replying to [comment:26 vdelecroix]:\n> For the time being, we could simply disable thebe (since you say that it is broken). Having in Sage an even more broken feature (= let users depend on internet and mybinder) is not an improvement.\n\nYes it is an improvement for the local documentation! It goes from non functional to functional -- admitedly with caveats -- when the user has internet.\n\nThink in particular about the case where the reader is not browsing through a Jupyter server; e.g. because she opened the files directly with the browser or is on a local copy on a department page; then using the local Sage setup, as desirable as it would be, would be really hard: how to start Jupyter+Sage? how to discover an already running Jupyter? how to authenticate? Using a remote anonymous service as is done in this ticket is roughly the best we can hope to do.\n\nAnyway, Vincent, I propose that we brainstorm about it over the phone. We are not converging here.",
    "created_at": "2018-02-17T14:23:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341198",
    "user": "nthiery"
}
```

Replying to [comment:26 vdelecroix]:
> For the time being, we could simply disable thebe (since you say that it is broken). Having in Sage an even more broken feature (= let users depend on internet and mybinder) is not an improvement.

Yes it is an improvement for the local documentation! It goes from non functional to functional -- admitedly with caveats -- when the user has internet.

Think in particular about the case where the reader is not browsing through a Jupyter server; e.g. because she opened the files directly with the browser or is on a local copy on a department page; then using the local Sage setup, as desirable as it would be, would be really hard: how to start Jupyter+Sage? how to discover an already running Jupyter? how to authenticate? Using a remote anonymous service as is done in this ticket is roughly the best we can hope to do.

Anyway, Vincent, I propose that we brainstorm about it over the phone. We are not converging here.



---

archive/issue_comments_341199.json:
```json
{
    "body": "I have worked on improving the UI to give stronger feedback and background about the service to the user. You can try it on:\n\nhttp://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html",
    "created_at": "2018-02-17T14:25:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341199",
    "user": "nthiery"
}
```

I have worked on improving the UI to give stronger feedback and background about the service to the user. You can try it on:

http://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html



---

archive/issue_comments_341200.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-05-03T08:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341200",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341201.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-07T18:52:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341201",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341202.json:
```json
{
    "body": "There seem to be merge conflicts.",
    "created_at": "2018-06-07T19:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341202",
    "user": "saraedum"
}
```

There seem to be merge conflicts.



---

archive/issue_comments_341203.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-07T19:15:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341203",
    "user": "saraedum"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_341204.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-07T21:57:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341204",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341205.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-07T23:32:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341205",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341206.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-07T23:37:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341206",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341207.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-07T23:40:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341207",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341208.json:
```json
{
    "body": "Attachment [thebelab-0.2.1.tar.bz2](tarball://root/attachments/some-uuid/ticket24593/thebelab-0.2.1.tar.bz2) by nthiery created at 2018-06-07 23:42:08",
    "created_at": "2018-06-07T23:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341208",
    "user": "nthiery"
}
```

Attachment [thebelab-0.2.1.tar.bz2](tarball://root/attachments/some-uuid/ticket24593/thebelab-0.2.1.tar.bz2) by nthiery created at 2018-06-07 23:42:08



---

archive/issue_comments_341209.json:
```json
{
    "body": "With this new version:\n- thebelab is packaged for Sage, and added in the jupyter notebook extensions\n- if the page is served through a jupyter server, this tries to get thebelab\n  from and run computations on that server;\n  in particular, if the page is served from the users' [SageMath](SageMath) jupyter\n  (e.g. the Help button), no internet connection is required\n- if thebelab is not available locally, resort to downloading from internet\n- if there is no jupyter server or no sagemath kernel, resort to using binder",
    "created_at": "2018-06-07T23:47:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341209",
    "user": "nthiery"
}
```

With this new version:
- thebelab is packaged for Sage, and added in the jupyter notebook extensions
- if the page is served through a jupyter server, this tries to get thebelab
  from and run computations on that server;
  in particular, if the page is served from the users' [SageMath](SageMath) jupyter
  (e.g. the Help button), no internet connection is required
- if thebelab is not available locally, resort to downloading from internet
- if there is no jupyter server or no sagemath kernel, resort to using binder



---

archive/issue_comments_341210.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-07T23:49:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341210",
    "user": "nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_341211.json:
```json
{
    "body": "Vincent: I believe this is what we had agreed upon, right?\n\n**Questionable point**\n\nAs a new package, should the thebelab spkg be standard\nor optional? Officially we should wait one year; however it replaces\nan existing package, and it should be rather failsafe (a simple js file\nto be installed by jupyter); also, up to the dependency upon on the\nnetwork, the live doc would still work without it.\n\nWhat do you think?\n\n**Timing**\n\nwhen browsing the doc through Jupyter, it takes 4s on my machine from pressing the Activate button to displaying the first output.",
    "created_at": "2018-06-07T23:55:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341211",
    "user": "nthiery"
}
```

Vincent: I believe this is what we had agreed upon, right?

**Questionable point**

As a new package, should the thebelab spkg be standard
or optional? Officially we should wait one year; however it replaces
an existing package, and it should be rather failsafe (a simple js file
to be installed by jupyter); also, up to the dependency upon on the
network, the live doc would still work without it.

What do you think?

**Timing**

when browsing the doc through Jupyter, it takes 4s on my machine from pressing the Activate button to displaying the first output.



---

archive/issue_comments_341212.json:
```json
{
    "body": "The result in action: http://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html\n\nOf course, this does not showcase the use of a local jupyter server. That takes an installation ...",
    "created_at": "2018-06-08T00:12:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341212",
    "user": "nthiery"
}
```

The result in action: http://sage-package.readthedocs.io/en/latest/sage_package/sphinx-demo.html

Of course, this does not showcase the use of a local jupyter server. That takes an installation ...



---

archive/issue_comments_341213.json:
```json
{
    "body": "Attachment [test-thebe.ipynb](tarball://root/attachments/some-uuid/ticket24593/test-thebe.ipynb) by nthiery created at 2018-06-08 07:24:33\n\nFor reference:\n\nI made a quick experiment of a semi-automatic notebook emulating\na static web page for testing whether thebelab\nworks; it does not require the documentation to be compiled.\nSee attached file (contains usage instructions).\nMaybe it could eventually be fully automated and integrated in our test suite.",
    "created_at": "2018-06-08T07:24:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341213",
    "user": "nthiery"
}
```

Attachment [test-thebe.ipynb](tarball://root/attachments/some-uuid/ticket24593/test-thebe.ipynb) by nthiery created at 2018-06-08 07:24:33

For reference:

I made a quick experiment of a semi-automatic notebook emulating
a static web page for testing whether thebelab
works; it does not require the documentation to be compiled.
See attached file (contains usage instructions).
Maybe it could eventually be fully automated and integrated in our test suite.



---

archive/issue_comments_341214.json:
```json
{
    "body": "Hi Nicolas,\n\nSorry to have not worked on this! Too busy at MathExp and now I need to take care about my moving from Bordeaux.\n\nReplying to [comment:38 nthiery]:\n> Vincent: I believe this is what we had agreed upon, right?\n\nLooks like it! Though I am unsure about the 100% availability without internet. I will try.\n\n> **Questionable point**\n> \n> As a new package, should the thebelab spkg be standard\n> or optional? Officially we should wait one year; however it replaces\n> an existing package, and it should be rather failsafe (a simple js file\n> to be installed by jupyter); also, up to the dependency upon on the\n> network, the live doc would still work without it.\n\nFor what and why should we wait one year? If it fixes issues it is fine to make it standard from now. Though this has to be discussed on sage-devel.\n\n> What do you think?\n> \n> **Timing**\n> \n> when browsing the doc through Jupyter, it takes 4s on my machine from pressing the Activate button to displaying the first output.\n\n4s in which mode (local or mybinder)? Starting a Jupter worksheet is much faster, most of the time is spent in starting Sage (1.5secs).",
    "created_at": "2018-06-08T14:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341214",
    "user": "vdelecroix"
}
```

Hi Nicolas,

Sorry to have not worked on this! Too busy at MathExp and now I need to take care about my moving from Bordeaux.

Replying to [comment:38 nthiery]:
> Vincent: I believe this is what we had agreed upon, right?

Looks like it! Though I am unsure about the 100% availability without internet. I will try.

> **Questionable point**
> 
> As a new package, should the thebelab spkg be standard
> or optional? Officially we should wait one year; however it replaces
> an existing package, and it should be rather failsafe (a simple js file
> to be installed by jupyter); also, up to the dependency upon on the
> network, the live doc would still work without it.

For what and why should we wait one year? If it fixes issues it is fine to make it standard from now. Though this has to be discussed on sage-devel.

> What do you think?
> 
> **Timing**
> 
> when browsing the doc through Jupyter, it takes 4s on my machine from pressing the Activate button to displaying the first output.

4s in which mode (local or mybinder)? Starting a Jupter worksheet is much faster, most of the time is spent in starting Sage (1.5secs).



---

archive/issue_comments_341215.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-08T14:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341215",
    "user": "vdelecroix"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_341216.json:
```json
{
    "body": "The tarball in attachment is invalid...\n\n```\n[thebelab-0.2.1] Found local metadata for thebelab-0.2.1\n[thebelab-0.2.1] Invalid checksum for cached file /opt/sage/upstream/thebelab-0.2.1.tar.bz2, deleting\n```\n",
    "created_at": "2018-06-08T14:48:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341216",
    "user": "vdelecroix"
}
```

The tarball in attachment is invalid...

```
[thebelab-0.2.1] Found local metadata for thebelab-0.2.1
[thebelab-0.2.1] Invalid checksum for cached file /opt/sage/upstream/thebelab-0.2.1.tar.bz2, deleting
```




---

archive/issue_comments_341217.json:
```json
{
    "body": "The instruction to build a new tarball\n\n```\n    THEBELAB_VERSION=0.2.1\n    echo $THEBELAB_VERSION > package-version.txt\n    mkdir src\n    wget https://unpkg.com/thebelab@\\^$THEBELAB_VERSION -O src/thebelab.js\n    tar -jcvf thebelab-$THEBELAB_VERSION.tar.bz2 src\n    rm  src/thebelab.js; rmdir src\n    mv thebelab-$THEBELAB_VERSION.tar.bz2 ../../../upstream\n    sage --package fix-checksum\n```\n\nshould be in a `spkg-src` script (there are many of them in Sage for inspiration).",
    "created_at": "2018-06-08T14:51:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341217",
    "user": "vdelecroix"
}
```

The instruction to build a new tarball

```
    THEBELAB_VERSION=0.2.1
    echo $THEBELAB_VERSION > package-version.txt
    mkdir src
    wget https://unpkg.com/thebelab@\^$THEBELAB_VERSION -O src/thebelab.js
    tar -jcvf thebelab-$THEBELAB_VERSION.tar.bz2 src
    rm  src/thebelab.js; rmdir src
    mv thebelab-$THEBELAB_VERSION.tar.bz2 ../../../upstream
    sage --package fix-checksum
```

should be in a `spkg-src` script (there are many of them in Sage for inspiration).



---

archive/issue_comments_341218.json:
```json
{
    "body": "Still in `SPKG.txt` I would prefer if `#20690` and `#24593` were complete url. It is not clear that you are refering to trac ticket numbers.",
    "created_at": "2018-06-08T14:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341218",
    "user": "vdelecroix"
}
```

Still in `SPKG.txt` I would prefer if `#20690` and `#24593` were complete url. It is not clear that you are refering to trac ticket numbers.



---

archive/issue_comments_341219.json:
```json
{
    "body": "Replying to [comment:42 vdelecroix]:\n> The tarball in attachment is invalid...\n> {{{\n> [thebelab-0.2.1] Found local metadata for thebelab-0.2.1\n> [thebelab-0.2.1] Invalid checksum for cached file /opt/sage/upstream/thebelab-0.2.1.tar.bz2, deleting\n> }}}\n\nActually, the link to the tarball should be\n\n    https://trac.sagemath.org/raw-attachment/ticket/24593/thebelab-0.2.1.tar.bz2\n\n(checksum were correct)",
    "created_at": "2018-06-08T14:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341219",
    "user": "vdelecroix"
}
```

Replying to [comment:42 vdelecroix]:
> The tarball in attachment is invalid...
> {{{
> [thebelab-0.2.1] Found local metadata for thebelab-0.2.1
> [thebelab-0.2.1] Invalid checksum for cached file /opt/sage/upstream/thebelab-0.2.1.tar.bz2, deleting
> }}}

Actually, the link to the tarball should be

    https://trac.sagemath.org/raw-attachment/ticket/24593/thebelab-0.2.1.tar.bz2

(checksum were correct)



---

archive/issue_comments_341220.json:
```json
{
    "body": "Works well on my computer (and it is much faster than 4secs to start).",
    "created_at": "2018-06-08T15:21:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341220",
    "user": "vdelecroix"
}
```

Works well on my computer (and it is much faster than 4secs to start).



---

archive/issue_comments_341221.json:
```json
{
    "body": "Once you click on activate, two links appear in place of the button: \"Sage\" (pointing to sagemath.org) and \"About\" (pointing to http://sage-package.readthedocs.io/en/latest/sage_package/thebe.html). The latter one is pointing to a page that does not mention the fact that the examples can (and does) run with a local Jupyter.",
    "created_at": "2018-06-08T15:27:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341221",
    "user": "vdelecroix"
}
```

Once you click on activate, two links appear in place of the button: "Sage" (pointing to sagemath.org) and "About" (pointing to http://sage-package.readthedocs.io/en/latest/sage_package/thebe.html). The latter one is pointing to a page that does not mention the fact that the examples can (and does) run with a local Jupyter.



---

archive/issue_comments_341222.json:
```json
{
    "body": "Replying to [comment:47 vdelecroix]:\n> Once you click on activate, two links appear in place of the button: \"Sage\" (pointing to sagemath.org) and \"About\" (pointing to http://sage-package.readthedocs.io/en/latest/sage_package/thebe.html). The latter one is pointing to a page that does not mention the fact that the examples can (and does) run with a local Jupyter.\n\n\n```\nDocumentation pages produced with sage-package take further steps to reduce the dependence on network and cloud services. If the page is served by a Jupyter server, it will attempt to use it to fetch the Thebe javascript and run the computations.\n```\n\n\nThat being said, you are welcome to edit the [sources](https://github.com/sagemath/sage-package/blob/master/docs/sage_package/thebe.rst) of this page if you have ideas to improve the wording and make the information more prominent while keeping it reasonably concise.",
    "created_at": "2018-06-08T15:40:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341222",
    "user": "nthiery"
}
```

Replying to [comment:47 vdelecroix]:
> Once you click on activate, two links appear in place of the button: "Sage" (pointing to sagemath.org) and "About" (pointing to http://sage-package.readthedocs.io/en/latest/sage_package/thebe.html). The latter one is pointing to a page that does not mention the fact that the examples can (and does) run with a local Jupyter.


```
Documentation pages produced with sage-package take further steps to reduce the dependence on network and cloud services. If the page is served by a Jupyter server, it will attempt to use it to fetch the Thebe javascript and run the computations.
```


That being said, you are welcome to edit the [sources](https://github.com/sagemath/sage-package/blob/master/docs/sage_package/thebe.rst) of this page if you have ideas to improve the wording and make the information more prominent while keeping it reasonably concise.



---

archive/issue_comments_341223.json:
```json
{
    "body": "Replying to [comment:43 vdelecroix]:\n> The instruction to build a new tarball\n> {{{\n>     THEBELAB_VERSION=0.2.1\n>     echo $THEBELAB_VERSION > package-version.txt\n>     mkdir src\n>     wget https://unpkg.com/thebelab`@`\\^$THEBELAB_VERSION -O src/thebelab.js\n>     tar -jcvf thebelab-$THEBELAB_VERSION.tar.bz2 src\n>     rm  src/thebelab.js; rmdir src\n>     mv thebelab-$THEBELAB_VERSION.tar.bz2 ../../../upstream\n>     sage --package fix-checksum\n> }}}\n> should be in a `spkg-src` script (there are many of them in Sage for inspiration).\n\nI considered this, but then dropped the idea after reading the dev guide: we are indeed not\nchanging the upstream sources:\n```\nThe spkg-src file is optional and only to document how the upstream tarball was changed. Ideally it is not modified, then there would be no spkg-src file present either.\n```\n\nIs your argument that building a tarball is a change by itself to the upstream sources?\nThen, yeah, sure, we could do that.",
    "created_at": "2018-06-08T15:54:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341223",
    "user": "nthiery"
}
```

Replying to [comment:43 vdelecroix]:
> The instruction to build a new tarball
> {{{
>     THEBELAB_VERSION=0.2.1
>     echo $THEBELAB_VERSION > package-version.txt
>     mkdir src
>     wget https://unpkg.com/thebelab`@`\^$THEBELAB_VERSION -O src/thebelab.js
>     tar -jcvf thebelab-$THEBELAB_VERSION.tar.bz2 src
>     rm  src/thebelab.js; rmdir src
>     mv thebelab-$THEBELAB_VERSION.tar.bz2 ../../../upstream
>     sage --package fix-checksum
> }}}
> should be in a `spkg-src` script (there are many of them in Sage for inspiration).

I considered this, but then dropped the idea after reading the dev guide: we are indeed not
changing the upstream sources:
```
The spkg-src file is optional and only to document how the upstream tarball was changed. Ideally it is not modified, then there would be no spkg-src file present either.
```

Is your argument that building a tarball is a change by itself to the upstream sources?
Then, yeah, sure, we could do that.



---

archive/issue_comments_341224.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-08T15:56:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341224",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341225.json:
```json
{
    "body": "Replying to [comment:44 vdelecroix]:\n> Still in `SPKG.txt` I would prefer if `#20690` and `#24593` were complete url. It is not clear that you are refering to trac ticket numbers.\n\nDone. That being said it seems that most SPKG.txt refer to ticket by number rather than URL ...",
    "created_at": "2018-06-08T15:58:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341225",
    "user": "nthiery"
}
```

Replying to [comment:44 vdelecroix]:
> Still in `SPKG.txt` I would prefer if `#20690` and `#24593` were complete url. It is not clear that you are refering to trac ticket numbers.

Done. That being said it seems that most SPKG.txt refer to ticket by number rather than URL ...



---

archive/issue_comments_341226.json:
```json
{
    "body": "> Works well on my computer (and it is much faster than 4secs to start).\n\nStarting Sage by itself on my machine takes 2.5s :-) Indeed, if I am quick at clicking Activate -> Run, I can get down to 3s.\n\nI guess it's going to be time to get a faster machine!",
    "created_at": "2018-06-08T16:01:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341226",
    "user": "nthiery"
}
```

> Works well on my computer (and it is much faster than 4secs to start).

Starting Sage by itself on my machine takes 2.5s :-) Indeed, if I am quick at clicking Activate -> Run, I can get down to 3s.

I guess it's going to be time to get a faster machine!



---

archive/issue_comments_341227.json:
```json
{
    "body": "Note: there is popular demand for this feature!\n\nSee this question.posted today on StackOverflow:\n\n- [[StackOverflow 50854931] Does SageMath provide interactive tutorials?](https://stackoverflow.com/questions/50854931/does-sagemath-provide-interactive-tutorials)",
    "created_at": "2018-06-14T14:23:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341227",
    "user": "slelievre"
}
```

Note: there is popular demand for this feature!

See this question.posted today on StackOverflow:

- [[StackOverflow 50854931] Does SageMath provide interactive tutorials?](https://stackoverflow.com/questions/50854931/does-sagemath-provide-interactive-tutorials)



---

archive/issue_comments_341228.json:
```json
{
    "body": "Replying to [ticket:24593 nthiery]:\n> thebelab tarball\n> \n>     https://trac.sagemath.org/raw-attachment/ticket/24593/thebelab-0.2.1.tar.bz2\n\nWhy is that an attachment on a Sage Trac ticket? Does thebelab not have proper releases?",
    "created_at": "2018-06-14T14:43:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341228",
    "user": "jdemeyer"
}
```

Replying to [ticket:24593 nthiery]:
> thebelab tarball
> 
>     https://trac.sagemath.org/raw-attachment/ticket/24593/thebelab-0.2.1.tar.bz2

Why is that an attachment on a Sage Trac ticket? Does thebelab not have proper releases?



---

archive/issue_comments_341229.json:
```json
{
    "body": "Does this require an installation of JupyterLab?",
    "created_at": "2018-06-14T14:46:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341229",
    "user": "jdemeyer"
}
```

Does this require an installation of JupyterLab?



---

archive/issue_comments_341230.json:
```json
{
    "body": "This is not acceptable:\n\n```\nTo upgrade the sources to a new version:\n\n    THEBELAB_VERSION=0.2.1\n    echo $THEBELAB_VERSION > package-version.txt\n    mkdir src\n    wget https://unpkg.com/thebelab@\\^$THEBELAB_VERSION -O src/thebelab.js\n    tar -jcvf thebelab-$THEBELAB_VERSION.tar.bz2 src\n    rm  src/thebelab.js; rmdir src\n    mv thebelab-$THEBELAB_VERSION.tar.bz2 ../../../upstream\n    sage --package fix-checksum\n```\n\nIf you really require a special script for generating the source tarball (why?), then it should be a `spkg-src` file. See `build/pkgs/glpk/spkg-src` for a good example.",
    "created_at": "2018-06-14T14:54:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341230",
    "user": "jdemeyer"
}
```

This is not acceptable:

```
To upgrade the sources to a new version:

    THEBELAB_VERSION=0.2.1
    echo $THEBELAB_VERSION > package-version.txt
    mkdir src
    wget https://unpkg.com/thebelab@\^$THEBELAB_VERSION -O src/thebelab.js
    tar -jcvf thebelab-$THEBELAB_VERSION.tar.bz2 src
    rm  src/thebelab.js; rmdir src
    mv thebelab-$THEBELAB_VERSION.tar.bz2 ../../../upstream
    sage --package fix-checksum
```

If you really require a special script for generating the source tarball (why?), then it should be a `spkg-src` file. See `build/pkgs/glpk/spkg-src` for a good example.



---

archive/issue_comments_341231.json:
```json
{
    "body": "Replying to [comment:56 jdemeyer]:\n> This is not acceptable:\n> {{{\n> To upgrade the sources to a new version:\n> \n>     THEBELAB_VERSION=0.2.1\n>     echo $THEBELAB_VERSION > package-version.txt\n>     mkdir src\n>     wget https://unpkg.com/thebelab`@`\\^$THEBELAB_VERSION -O src/thebelab.js\n>     tar -jcvf thebelab-$THEBELAB_VERSION.tar.bz2 src\n>     rm  src/thebelab.js; rmdir src\n>     mv thebelab-$THEBELAB_VERSION.tar.bz2 ../../../upstream\n>     sage --package fix-checksum\n> }}}\n> If you really require a special script for generating the source tarball (why?), then it should be a `spkg-src` file. See `build/pkgs/glpk/spkg-src` for a good example.\n\nYou are repeating [comment:43 comment:43]...",
    "created_at": "2018-06-14T15:10:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341231",
    "user": "vdelecroix"
}
```

Replying to [comment:56 jdemeyer]:
> This is not acceptable:
> {{{
> To upgrade the sources to a new version:
> 
>     THEBELAB_VERSION=0.2.1
>     echo $THEBELAB_VERSION > package-version.txt
>     mkdir src
>     wget https://unpkg.com/thebelab`@`\^$THEBELAB_VERSION -O src/thebelab.js
>     tar -jcvf thebelab-$THEBELAB_VERSION.tar.bz2 src
>     rm  src/thebelab.js; rmdir src
>     mv thebelab-$THEBELAB_VERSION.tar.bz2 ../../../upstream
>     sage --package fix-checksum
> }}}
> If you really require a special script for generating the source tarball (why?), then it should be a `spkg-src` file. See `build/pkgs/glpk/spkg-src` for a good example.

You are repeating [comment:43 comment:43]...



---

archive/issue_comments_341232.json:
```json
{
    "body": "Replying to [comment:57 vdelecroix]:\n> You are repeating [comment:43 comment:43]...\n\nIndeed. And in an unpleasant tone, especially given the ambiguity of the doc on the topic.\n\nBut let's leave this aside: I am totally fine with having a spkg-src script. Not sure I'll get to it right away though, so feel free to take that part over.\n\nAbout thebelab's tarball: yes, AFAIK thebelab does not yet have an official tarball: it's released as a single javascript file distributed on usual CDN's; I guess this is a rather standard thing in the javascript world, but I am no expert in those things. I'll ask Min when I see him on Wednesday, and whether there should be an official tarball.\n\nAbout the dependency on jupyterlab: yes thebelab uses the jupyterlab code base, but the relevant part is automatically bundled in the downloaded javascript. So it does not depend on jupyterlab being installed separately. Of course we may hope that, once Sage will ship by default with jupyterlab, there would be a way to not ship the same code twice.",
    "created_at": "2018-06-16T15:29:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341232",
    "user": "nthiery"
}
```

Replying to [comment:57 vdelecroix]:
> You are repeating [comment:43 comment:43]...

Indeed. And in an unpleasant tone, especially given the ambiguity of the doc on the topic.

But let's leave this aside: I am totally fine with having a spkg-src script. Not sure I'll get to it right away though, so feel free to take that part over.

About thebelab's tarball: yes, AFAIK thebelab does not yet have an official tarball: it's released as a single javascript file distributed on usual CDN's; I guess this is a rather standard thing in the javascript world, but I am no expert in those things. I'll ask Min when I see him on Wednesday, and whether there should be an official tarball.

About the dependency on jupyterlab: yes thebelab uses the jupyterlab code base, but the relevant part is automatically bundled in the downloaded javascript. So it does not depend on jupyterlab being installed separately. Of course we may hope that, once Sage will ship by default with jupyterlab, there would be a way to not ship the same code twice.



---

archive/issue_comments_341233.json:
```json
{
    "body": "Replying to [comment:58 nthiery]:\n> And in an unpleasant tone\n\nSorry for that, I didn't intend that.\n\n> About thebelab's tarball: yes, AFAIK thebelab does not yet have an official tarball: it's released as a single javascript file distributed on usual CDN's; I guess this is a rather standard thing in the javascript world, but I am no expert in those things. I'll ask Min when I see him on Wednesday, and whether there should be an official tarball.\n\nPlease ask him. There are also the github tarballs (https://github.com/minrk/thebelab/releases), would that work?\n\n> About the dependency on jupyterlab: yes thebelab uses the jupyterlab code base, but the relevant part is automatically bundled in the downloaded javascript. So it does not depend on jupyterlab being installed separately.\n\nThanks for the answer. It would be good to document this clearly in `SPKG.txt`.",
    "created_at": "2018-06-16T22:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341233",
    "user": "jdemeyer"
}
```

Replying to [comment:58 nthiery]:
> And in an unpleasant tone

Sorry for that, I didn't intend that.

> About thebelab's tarball: yes, AFAIK thebelab does not yet have an official tarball: it's released as a single javascript file distributed on usual CDN's; I guess this is a rather standard thing in the javascript world, but I am no expert in those things. I'll ask Min when I see him on Wednesday, and whether there should be an official tarball.

Please ask him. There are also the github tarballs (https://github.com/minrk/thebelab/releases), would that work?

> About the dependency on jupyterlab: yes thebelab uses the jupyterlab code base, but the relevant part is automatically bundled in the downloaded javascript. So it does not depend on jupyterlab being installed separately.

Thanks for the answer. It would be good to document this clearly in `SPKG.txt`.



---

archive/issue_comments_341234.json:
```json
{
    "body": "Brief update after talking to min: thebelab is being distributed through npm, and\na tarball can be obtained from:\n\n\n    https://registry.npmjs.org/thebelab/-/thebelab-0.2.1.tgz\n\nI'll try to update the branch here accordingly, unless someone is quicker!",
    "created_at": "2018-06-20T21:37:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341234",
    "user": "nthiery"
}
```

Brief update after talking to min: thebelab is being distributed through npm, and
a tarball can be obtained from:


    https://registry.npmjs.org/thebelab/-/thebelab-0.2.1.tgz

I'll try to update the branch here accordingly, unless someone is quicker!



---

archive/issue_comments_341235.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-21T21:59:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341235",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341236.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-06-21T22:00:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341236",
    "user": "nthiery"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_341237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-06-21T22:04:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341237",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341238.json:
```json
{
    "body": "Alright; I guess all the reviewers suggestions have been addressed?\n\nCheers",
    "created_at": "2018-06-21T22:06:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341238",
    "user": "nthiery"
}
```

Alright; I guess all the reviewers suggestions have been addressed?

Cheers



---

archive/issue_comments_341239.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2018-06-22T05:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341239",
    "user": "nthiery"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_341240.json:
```json
{
    "body": "Oops, the format of the tarball downloaded from npm is not the same as the one I was creating myself ...",
    "created_at": "2018-06-22T05:25:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341240",
    "user": "nthiery"
}
```

Oops, the format of the tarball downloaded from npm is not the same as the one I was creating myself ...



---

archive/issue_comments_341241.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-17T18:36:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341241",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341242.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-17T18:58:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341242",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341243.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-17T18:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341243",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341244.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2018-07-17T19:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341244",
    "user": "nthiery"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_341245.json:
```json
{
    "body": "The bundled spkg-src script builds the tarball from npm; this way we delegate\nto npm the building (with webpack) of the standalone js file for thebelab.",
    "created_at": "2018-07-17T19:01:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341245",
    "user": "nthiery"
}
```

The bundled spkg-src script builds the tarball from npm; this way we delegate
to npm the building (with webpack) of the standalone js file for thebelab.



---

archive/issue_comments_341246.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-07-17T19:01:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341246",
    "user": "nthiery"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_341247.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-23T19:14:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341247",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341248.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-07-23T19:15:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341248",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_341249.json:
```json
{
    "body": "Attachment [thebelab-0.2.1.2.tgz](tarball://root/attachments/some-uuid/ticket24593/thebelab-0.2.1.2.tgz) by nthiery created at 2018-07-23 19:32:07",
    "created_at": "2018-07-23T19:32:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341249",
    "user": "nthiery"
}
```

Attachment [thebelab-0.2.1.2.tgz](tarball://root/attachments/some-uuid/ticket24593/thebelab-0.2.1.2.tgz) by nthiery created at 2018-07-23 19:32:07



---

archive/issue_comments_341250.json:
```json
{
    "body": "Replying to [comment:65 nthiery]:\n> Oops, the format of the tarball downloaded from npm is not the same as the one I was creating myself ...\n\nSorry, what you mean with this? In other words: why cannot you use the tarball \u200bhttps://registry.npmjs.org/thebelab/-/thebelab-0.2.1.tgz\n\nThere also seems to be a version mismatch: on the ticket, you posted `thebelab-0.2.1.2.tgz` (I assume created using `spkg-src`) but in the branch, there is version 0.2.1",
    "created_at": "2018-08-07T13:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341250",
    "user": "jdemeyer"
}
```

Replying to [comment:65 nthiery]:
> Oops, the format of the tarball downloaded from npm is not the same as the one I was creating myself ...

Sorry, what you mean with this? In other words: why cannot you use the tarball https://registry.npmjs.org/thebelab/-/thebelab-0.2.1.tgz

There also seems to be a version mismatch: on the ticket, you posted `thebelab-0.2.1.2.tgz` (I assume created using `spkg-src`) but in the branch, there is version 0.2.1



---

archive/issue_comments_341251.json:
```json
{
    "body": "Changing status from needs_review to needs_info.",
    "created_at": "2018-08-07T13:56:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341251",
    "user": "jdemeyer"
}
```

Changing status from needs_review to needs_info.



---

archive/issue_comments_341252.json:
```json
{
    "body": "Typo: `shiped` -> `shipped`",
    "created_at": "2018-08-07T13:57:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341252",
    "user": "jdemeyer"
}
```

Typo: `shiped` -> `shipped`



---

archive/issue_comments_341253.json:
```json
{
    "body": "Doesn't the `^` mean that the version might not be the exact version that you specified?\n\n```\nwget https://unpkg.com/$PACKAGENAME@\\^$UPLOADVERSION -O src/$PACKAGENAME.js\n```\n\n\nBy the way, this might be more readable as follows:\n\n```\nwget \"https://unpkg.com/${PACKAGENAME}@${UPLOADVERSION}\" -O src/$PACKAGENAME.js\n```\n",
    "created_at": "2018-08-07T14:01:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341253",
    "user": "jdemeyer"
}
```

Doesn't the `^` mean that the version might not be the exact version that you specified?

```
wget https://unpkg.com/$PACKAGENAME@\^$UPLOADVERSION -O src/$PACKAGENAME.js
```


By the way, this might be more readable as follows:

```
wget "https://unpkg.com/${PACKAGENAME}@${UPLOADVERSION}" -O src/$PACKAGENAME.js
```




---

archive/issue_comments_341254.json:
```json
{
    "body": "Replying to [comment:75 jdemeyer]:\n> Replying to [comment:65 nthiery]:\n> > Oops, the format of the tarball downloaded from npm is not the same as the one I was creating myself ...\n> \n> Sorry, what you mean with this? In other words: why cannot you use the tarball \u200bhttps://registry.npmjs.org/thebelab/-/thebelab-0.2.1.tgz\n\nBecause it's the source tarball for thebelab. Oh, but actually there is a lib subdirectory which contained the webpacked's javascript file; I had missed that. So we could actually use it.\n\n> There also seems to be a version mismatch: on the ticket, you posted `thebelab-0.2.1.2.tgz` (I assume created using `spkg-src`) but in the branch, there is version 0.2.1\n\nThat was just me running through hoops to replace an existing file ... Anyway we don't need it any more.",
    "created_at": "2018-08-08T00:08:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341254",
    "user": "nthiery"
}
```

Replying to [comment:75 jdemeyer]:
> Replying to [comment:65 nthiery]:
> > Oops, the format of the tarball downloaded from npm is not the same as the one I was creating myself ...
> 
> Sorry, what you mean with this? In other words: why cannot you use the tarball https://registry.npmjs.org/thebelab/-/thebelab-0.2.1.tgz

Because it's the source tarball for thebelab. Oh, but actually there is a lib subdirectory which contained the webpacked's javascript file; I had missed that. So we could actually use it.

> There also seems to be a version mismatch: on the ticket, you posted `thebelab-0.2.1.2.tgz` (I assume created using `spkg-src`) but in the branch, there is version 0.2.1

That was just me running through hoops to replace an existing file ... Anyway we don't need it any more.



---

archive/issue_comments_341255.json:
```json
{
    "body": "I am on vacations until August 14th; feel free to proceed and implement the suggested changes. Otherwise I'll take care of them when I am back.\n\nThanks for the review",
    "created_at": "2018-08-08T00:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341255",
    "user": "nthiery"
}
```

I am on vacations until August 14th; feel free to proceed and implement the suggested changes. Otherwise I'll take care of them when I am back.

Thanks for the review



---

archive/issue_comments_341256.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-10-28T23:19:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341256",
    "user": "jdemeyer"
}
```

New commits:



---

archive/issue_comments_341257.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-29T11:08:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341257",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_341258.json:
```json
{
    "body": "This is working as intended, both locally and remotely, except that it's always downloading the font from the web.",
    "created_at": "2018-10-31T12:58:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341258",
    "user": "jdemeyer"
}
```

This is working as intended, both locally and remotely, except that it's always downloading the font from the web.



---

archive/issue_comments_341259.json:
```json
{
    "body": "I found out that the font comes from jupyterlab.",
    "created_at": "2018-10-31T12:59:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341259",
    "user": "jdemeyer"
}
```

I found out that the font comes from jupyterlab.



---

archive/issue_comments_341260.json:
```json
{
    "body": "Ok. So presumably we will have that font available locally as soon as Jupyterlab will ship with Sage.\nI would tend to see this as a very minor caveat, given that the whole thing works without Internet, albeit with a slightly less nice font. So, unless we see an immediate solution, I would tend to proceed as is for now.\n\nOther than this font issue, is there anything left to be done? Or shall I press positive review once I'll have reviewed your latest changes?",
    "created_at": "2018-11-11T21:49:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341260",
    "user": "nthiery"
}
```

Ok. So presumably we will have that font available locally as soon as Jupyterlab will ship with Sage.
I would tend to see this as a very minor caveat, given that the whole thing works without Internet, albeit with a slightly less nice font. So, unless we see an immediate solution, I would tend to proceed as is for now.

Other than this font issue, is there anything left to be done? Or shall I press positive review once I'll have reviewed your latest changes?



---

archive/issue_comments_341261.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2018-11-13T09:28:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341261",
    "user": "jdemeyer"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_341262.json:
```json
{
    "body": "Replying to [comment:88 nthiery]:\n> Other than this font issue, is there anything left to be done?\n\nI don't think so.",
    "created_at": "2018-11-13T09:28:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341262",
    "user": "jdemeyer"
}
```

Replying to [comment:88 nthiery]:
> Other than this font issue, is there anything left to be done?

I don't think so.



---

archive/issue_comments_341263.json:
```json
{
    "body": "For reference:\n\n- #26059 Make JupyterLab an optional package\n- #24904 Make JupyterLab a standard package",
    "created_at": "2018-11-13T11:31:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341263",
    "user": "slelievre"
}
```

For reference:

- #26059 Make JupyterLab an optional package
- #24904 Make JupyterLab a standard package



---

archive/issue_comments_341264.json:
```json
{
    "body": "ping?",
    "created_at": "2019-01-06T08:24:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341264",
    "user": "jdemeyer"
}
```

ping?



---

archive/issue_comments_341265.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-05-13T16:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341265",
    "user": "chapoton"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_341266.json:
```json
{
    "body": "red branch and OpenDreamKit is over",
    "created_at": "2020-05-13T16:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341266",
    "user": "chapoton"
}
```

red branch and OpenDreamKit is over



---

archive/issue_comments_341267.json:
```json
{
    "body": "Changing keywords from \"\" to \"notebook\".",
    "created_at": "2020-05-13T16:01:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341267",
    "user": "chapoton"
}
```

Changing keywords from "" to "notebook".



---

archive/issue_comments_341268.json:
```json
{
    "body": "Could someone please take care of this ticket before it bitrots completely?",
    "created_at": "2020-08-19T20:31:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341268",
    "user": "mkoeppe"
}
```

Could someone please take care of this ticket before it bitrots completely?



---

archive/issue_comments_341269.json:
```json
{
    "body": "In the meantime Thebelab changed its name to Thebe.\n\nFor reference the renaming discussion is here:\n\n- https://github.com/executablebooks/thebe/issues/219",
    "created_at": "2020-09-02T00:31:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341269",
    "user": "slelievre"
}
```

In the meantime Thebelab changed its name to Thebe.

For reference the renaming discussion is here:

- https://github.com/executablebooks/thebe/issues/219



---

archive/issue_comments_341270.json:
```json
{
    "body": "... but we still have the old Thebe?",
    "created_at": "2020-09-02T00:48:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341270",
    "user": "mkoeppe"
}
```

... but we still have the old Thebe?



---

archive/issue_comments_341271.json:
```json
{
    "body": "This seems to be upstream now: https://github.com/executablebooks/thebe",
    "created_at": "2020-09-02T06:00:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341271",
    "user": "mkoeppe"
}
```

This seems to be upstream now: https://github.com/executablebooks/thebe



---

archive/issue_comments_341272.json:
```json
{
    "body": "https://www.npmjs.com/package/thebelab",
    "created_at": "2020-09-02T06:02:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341272",
    "user": "mkoeppe"
}
```

https://www.npmjs.com/package/thebelab



---

archive/issue_comments_341273.json:
```json
{
    "body": "Setting new milestone based on a cursory review of ticket status, priority, and last modification date.",
    "created_at": "2021-02-13T20:51:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341273",
    "user": "mkoeppe"
}
```

Setting new milestone based on a cursory review of ticket status, priority, and last modification date.



---

archive/issue_comments_341274.json:
```json
{
    "body": "Requested again at\n\n- [Ask Sage question 56875: Working through the Sage tutorial in a notebook error](https://ask.sagemath.org/question/56875)",
    "created_at": "2021-04-30T09:04:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341274",
    "user": "slelievre"
}
```

Requested again at

- [Ask Sage question 56875: Working through the Sage tutorial in a notebook error](https://ask.sagemath.org/question/56875)



---

archive/issue_comments_341275.json:
```json
{
    "body": "Thebelab changed its name back to Thebe.",
    "created_at": "2021-04-30T09:54:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341275",
    "user": "slelievre"
}
```

Thebelab changed its name back to Thebe.



---

archive/issue_comments_341276.json:
```json
{
    "body": "Setting a new milestone for this ticket based on a cursory review.",
    "created_at": "2021-07-19T00:44:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341276",
    "user": "mkoeppe"
}
```

Setting a new milestone for this ticket based on a cursory review.



---

archive/issue_comments_341277.json:
```json
{
    "body": "Nicolas, what is the status of the branch?",
    "created_at": "2021-11-12T11:56:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341277",
    "user": "klee"
}
```

Nicolas, what is the status of the branch?



---

archive/issue_comments_341278.json:
```json
{
    "body": "I've split out the removal of the old `thebe` package as #33529.\n\nI don't think we need to ship the new `thebe` at all as an SPKG. As our use of it involves mybinder.org, the generated web pages can also just get the `thebe` from the CDN.",
    "created_at": "2022-03-19T01:35:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341278",
    "user": "mkoeppe"
}
```

I've split out the removal of the old `thebe` package as #33529.

I don't think we need to ship the new `thebe` at all as an SPKG. As our use of it involves mybinder.org, the generated web pages can also just get the `thebe` from the CDN.



---

archive/issue_comments_341279.json:
```json
{
    "body": "I agree. The feature in the ticket description is now achieved by #33507. Hence we can close this ticket.\n\nBut I would like to acknowledge that the infrastructure, namely the repo `sagemath/sage-binder-env` set up and maintained  by Nicolas M. Thi\u00e9ry and Jeroen Demeyer was very valuable for the rapid development of #33507. Thank you.",
    "created_at": "2022-03-22T04:07:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341279",
    "user": "klee"
}
```

I agree. The feature in the ticket description is now achieved by #33507. Hence we can close this ticket.

But I would like to acknowledge that the infrastructure, namely the repo `sagemath/sage-binder-env` set up and maintained  by Nicolas M. Thiry and Jeroen Demeyer was very valuable for the rapid development of #33507. Thank you.



---

archive/issue_comments_341280.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2022-03-22T04:13:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341280",
    "user": "klee"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_341281.json:
```json
{
    "body": "I agree that this ticket is no longer needed, and that\nhaving a solution based on a now existing external\nlibrary (jupyter-sphinx) is better!",
    "created_at": "2022-03-22T07:51:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341281",
    "user": "nthiery"
}
```

I agree that this ticket is no longer needed, and that
having a solution based on a now existing external
library (jupyter-sphinx) is better!



---

archive/issue_comments_341282.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2022-03-22T07:52:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341282",
    "user": "nthiery"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_341283.json:
```json
{
    "body": "To be continued at #33320.",
    "created_at": "2022-03-23T00:23:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341283",
    "user": "klee"
}
```

To be continued at #33320.



---

archive/issue_comments_341284.json:
```json
{
    "body": "Resolution: invalid",
    "created_at": "2022-05-11T02:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/24356",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/24356#issuecomment-341284",
    "user": "mkoeppe"
}
```

Resolution: invalid
