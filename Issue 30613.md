# Issue 30613: No Future

Issue created by migration from https://trac.sagemath.org/ticket/30850

Original creator: tmonteil

Original creation time: 2020-11-02 10:30:30

CC:  chapoton mkoeppe slelievre

The `__future__` import statements were part of the Python2-to-Python3 migration scaffolding. Since it is unlikely we will move back to supporting Python 2, we should remove those.

In order not to interfere with #30627, the `__future__` import statements of `SAGE_ROOT/build/` are not removed.


---

Comment by tmonteil created at 2020-11-02 12:26:26

New commits:


---

Comment by tmonteil created at 2020-11-02 15:34:05

Doctests pass on my computer, let us see if patchbots can handle it without rebuilding `psutil` and `sympy`.


---

Comment by tmonteil created at 2020-11-02 15:34:05

Changing status from new to needs_review.


---

Comment by chapoton created at 2020-11-02 17:07:01

patchbot will not run, because this is "unsafe" (changes outside of src/sage)


---

Comment by tmonteil created at 2020-11-02 17:29:09

OK i see.


---

Comment by chapoton created at 2020-11-02 18:57:06

maybe there is a way to use github actions to test this ticket ?


---

Comment by mkoeppe created at 2020-11-02 19:10:32

Yes, you set a tag and push the tag to a [GitHub](GitHub) repository.


---

Comment by jhpalmieri created at 2020-11-02 21:06:39

All tests pass for me on OS X 10.15.7, using a system installation of Python 3.8.6.


---

Comment by chapoton created at 2020-11-10 14:25:02

Changing status from needs_review to needs_work.


---

Comment by chapoton created at 2020-11-10 14:25:02

does not apply on the latest beta => needs work


---

Comment by git created at 2020-11-10 15:11:24

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tmonteil created at 2020-11-10 15:12:42

Changing status from needs_work to needs_review.


---

Comment by tmonteil created at 2020-11-10 15:12:42

Merge done.


---

Comment by chapoton created at 2020-11-10 15:55:44

I would suggest to make here only the changes in src/sage/ and keep the rest for another ticket. This would allow the patchbots to run.


---

Comment by tmonteil created at 2020-11-11 15:38:42

Running all the doctests with `-p 4` takes less than an hour on a laptop. I just did it.


---

Comment by jhpalmieri created at 2020-11-12 00:29:26

I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.


---

Comment by mkoeppe created at 2020-11-12 00:40:44

#29355 removes `src/bin/sage-pypkg-location` and #30867 removes `src/mac-app`. By merging now you can avoid later merge conflicts


---

Comment by mkoeppe created at 2020-11-12 00:41:44

Likewise, #30846 moves `src/bin/sage-list-packages`


---

Comment by mkoeppe created at 2020-11-17 19:22:30

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2020-11-17 19:22:30

Replying to [comment:15 jhpalmieri]:
> I suggest not changing `src/bin/sage-preparse`, in case users have files with `from future import ...` in them: we should still handle such lines correctly.

Indeed, and moreover also the 3.x series is introducing more `__future__` features, for example `from __future__ import annotations`: https://docs.python.org/3/library/__future__.html


---

Comment by git created at 2020-11-20 12:08:42

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:


---

Comment by tmonteil created at 2020-11-20 12:09:48

The current branch only touches files within `SAGE_ROOT/src/sage/`.


---

Comment by tmonteil created at 2020-11-20 12:09:48

Changing status from needs_work to needs_review.


---

Comment by mkoeppe created at 2020-11-20 18:12:51

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2020-11-24 23:13:52

Merge conflict


---

Comment by vbraun created at 2020-11-24 23:13:52

Changing status from positive_review to needs_work.


---

Comment by mkoeppe created at 2020-11-24 23:45:53

New commits:


---

Comment by mkoeppe created at 2020-11-24 23:45:53

Changing status from needs_work to positive_review.


---

Comment by vbraun created at 2020-12-05 22:13:16

Resolution: fixed
