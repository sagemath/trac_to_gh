# Issue 18192: Add the matroid connectivity function

archive/issues_018192.json:
```json
{
    "body": "CC:  stefan @chaoxu\n\nThere is a simple reduction from matroid connectivity to matroid intersection. Implement the connectivity function using this function. Use the connectivity function to improve the efficiency of is_3connected, which currently has a naive implementation.\n\nIssue created by migration from https://trac.sagemath.org/ticket/18429\n\n",
    "created_at": "2015-05-16T14:59:05Z",
    "labels": [
        "matroid theory",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.8",
    "title": "Add the matroid connectivity function",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/18192",
    "user": "Rudi"
}
```
CC:  stefan @chaoxu

There is a simple reduction from matroid connectivity to matroid intersection. Implement the connectivity function using this function. Use the connectivity function to improve the efficiency of is_3connected, which currently has a naive implementation.

Issue created by migration from https://trac.sagemath.org/ticket/18429





---

archive/issue_comments_245487.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-16T15:43:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245487",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245488.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-16T16:26:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245488",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245489.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-16T19:27:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245489",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245490.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-16T19:44:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245490",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245491.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-05-16T19:48:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245491",
    "user": "Rudi"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_245492.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-17T18:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245492",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245493.json:
```json
{
    "body": "Attachment [matroid.pxd](tarball://root/attachments/some-uuid/ticket18429/matroid.pxd) by Rudi created at 2015-05-17 21:20:33",
    "created_at": "2015-05-17T21:20:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245493",
    "user": "Rudi"
}
```

Attachment [matroid.pxd](tarball://root/attachments/some-uuid/ticket18429/matroid.pxd) by Rudi created at 2015-05-17 21:20:33



---

archive/issue_comments_245494.json:
```json
{
    "body": "Attachment [matroid.pyx](tarball://root/attachments/some-uuid/ticket18429/matroid.pyx) by Rudi created at 2015-05-17 21:21:01",
    "created_at": "2015-05-17T21:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245494",
    "user": "Rudi"
}
```

Attachment [matroid.pyx](tarball://root/attachments/some-uuid/ticket18429/matroid.pyx) by Rudi created at 2015-05-17 21:21:01



---

archive/issue_comments_245495.json:
```json
{
    "body": "Finally my sage installation is back on it's feet again. \n\nNow that I can properly test my own work I see that this patch still needs some work, so I'll upload my improved version later. \n\nSorry for the mess.",
    "created_at": "2015-05-20T08:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245495",
    "user": "Rudi"
}
```

Finally my sage installation is back on it's feet again. 

Now that I can properly test my own work I see that this patch still needs some work, so I'll upload my improved version later. 

Sorry for the mess.



---

archive/issue_comments_245496.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-05-20T08:52:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245496",
    "user": "Rudi"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_245497.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-20T09:08:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245497",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245498.json:
```json
{
    "body": "Happy now.",
    "created_at": "2015-05-20T09:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245498",
    "user": "Rudi"
}
```

Happy now.



---

archive/issue_comments_245499.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2015-05-20T09:17:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245499",
    "user": "Rudi"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_245500.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-22T10:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245500",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245501.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-22T11:08:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245501",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245502.json:
```json
{
    "body": "I could not resist adding functionality to is_3connected, namely returning a separation to certify that the matroid is nor 3-connected.\nThis did involve slightly altering the interface to the matroid intersection augmentation routine, to return the corresponding dual solution of a max-cardinality problem.",
    "created_at": "2015-05-22T11:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245502",
    "user": "Rudi"
}
```

I could not resist adding functionality to is_3connected, namely returning a separation to certify that the matroid is nor 3-connected.
This did involve slightly altering the interface to the matroid intersection augmentation routine, to return the corresponding dual solution of a max-cardinality problem.



---

archive/issue_comments_245503.json:
```json
{
    "body": "Set assignee to Rudi.",
    "created_at": "2015-05-24T10:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245503",
    "user": "Rudi"
}
```

Set assignee to Rudi.



---

archive/issue_comments_245504.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-05-25T10:12:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245504",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_245505.json:
```json
{
    "body": "Do you have some timings between the current version and your proposed version of `is_3connected`? Also should we just change this to a method `is_k_connected`, as I think all we'd need to change is `< 2` to `< k-1`?\n----\nNew commits:",
    "created_at": "2015-05-25T23:42:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245505",
    "user": "@tscrim"
}
```

Do you have some timings between the current version and your proposed version of `is_3connected`? Also should we just change this to a method `is_k_connected`, as I think all we'd need to change is `< 2` to `< k-1`?
----
New commits:



---

archive/issue_comments_245506.json:
```json
{
    "body": "Replying to [comment:17 tscrim]:\n> Do you have some timings between the current version and your proposed version of `is_3connected`? \n\nWith the current version:\n\n```\nsage: M= matroids.named_matroids.T12()\nsage: timeit(\"M.is_3connected()\")\n5 loops, best of 3: 91.4 ms per loop\nsage: N= matroids.named_matroids.Terrahawk()\nsage: timeit(\"N.is_3connected()\")\n5 loops, best of 3: 1.4 s per loop\nsage: K=matroids.CompleteGraphic(7)\nsage: timeit(\"K.is_3connected()\")\n5 loops, best of 3: 52.7 s per loop\n```\n\nWith the proposed one:\n\n```\nsage: M=matroids.named_matroids.T12()\nsage: timeit(\"M.is_3connected()\")\n125 loops, best of 3: 8.12 ms per loop\nsage: N=matroids.named_matroids.Terrahawk()\nsage: timeit(\"N.is_3connected()\")\n25 loops, best of 3: 20.7 ms per loop\nsage: K=matroids.CompleteGraphic(7)\nsage: timeit(\"K.is_3connected()\")\n5 loops, best of 3: 46.9 ms per loop\n```\n\nM has 12 elements, N has 16 elements, K has 21 elements. \n\n\n>Also should we just change this to a method `is_k_connected`, as I think all we'd need to change is `< 2` to `< k-1`?\n\nIt's a bit more work, you should enumerate all partitions of a fixed `(k-1)`-set into two sets, extend each of them them to a pair of disjoint `(k-1)`-sets from the ground set, then compute connectivity between the two sets. If you do this, there may be other optimizations to consider, like the best order in which to process these pairs.\n\nBut more importantly, k-connectivity is part of the plans for this 'google summer of code'. I do not want to interfere with those plans.",
    "created_at": "2015-05-26T06:44:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245506",
    "user": "Rudi"
}
```

Replying to [comment:17 tscrim]:
> Do you have some timings between the current version and your proposed version of `is_3connected`? 

With the current version:

```
sage: M= matroids.named_matroids.T12()
sage: timeit("M.is_3connected()")
5 loops, best of 3: 91.4 ms per loop
sage: N= matroids.named_matroids.Terrahawk()
sage: timeit("N.is_3connected()")
5 loops, best of 3: 1.4 s per loop
sage: K=matroids.CompleteGraphic(7)
sage: timeit("K.is_3connected()")
5 loops, best of 3: 52.7 s per loop
```

With the proposed one:

```
sage: M=matroids.named_matroids.T12()
sage: timeit("M.is_3connected()")
125 loops, best of 3: 8.12 ms per loop
sage: N=matroids.named_matroids.Terrahawk()
sage: timeit("N.is_3connected()")
25 loops, best of 3: 20.7 ms per loop
sage: K=matroids.CompleteGraphic(7)
sage: timeit("K.is_3connected()")
5 loops, best of 3: 46.9 ms per loop
```

M has 12 elements, N has 16 elements, K has 21 elements. 


>Also should we just change this to a method `is_k_connected`, as I think all we'd need to change is `< 2` to `< k-1`?

It's a bit more work, you should enumerate all partitions of a fixed `(k-1)`-set into two sets, extend each of them them to a pair of disjoint `(k-1)`-sets from the ground set, then compute connectivity between the two sets. If you do this, there may be other optimizations to consider, like the best order in which to process these pairs.

But more importantly, k-connectivity is part of the plans for this 'google summer of code'. I do not want to interfere with those plans.



---

archive/issue_comments_245507.json:
```json
{
    "body": "Thanks. Alright, then if you're okay with my changes, positive review.",
    "created_at": "2015-05-26T15:51:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245507",
    "user": "@tscrim"
}
```

Thanks. Alright, then if you're okay with my changes, positive review.



---

archive/issue_comments_245508.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-05-26T16:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245508",
    "user": "Rudi"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_245509.json:
```json
{
    "body": "Replying to [comment:19 tscrim]:\n> Thanks. Alright, then if you're okay with my changes, positive review.\nAbsolutely. Thanks for reviewing and for making these changes.",
    "created_at": "2015-05-26T16:04:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245509",
    "user": "Rudi"
}
```

Replying to [comment:19 tscrim]:
> Thanks. Alright, then if you're okay with my changes, positive review.
Absolutely. Thanks for reviewing and for making these changes.



---

archive/issue_comments_245510.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-05-26T23:34:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/18192",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/18192#issuecomment-245510",
    "user": "@vbraun"
}
```

Resolution: fixed
