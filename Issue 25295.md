# Issue 25295: Upgrade to NTL 11.1.0

archive/issues_025295.json:
```json
{
    "body": "CC:  @kiwifb @timokau @infinity0 @jdemeyer jpflori @nexttime @saraedum @slel @tobihan @tscrim @vbraun\n\n- Download page: http://www.shoup.net/ntl/download.html\n- Tarball: http://www.shoup.net/ntl/ntl-11.1.0.tar.gz\n\nIssue created by migration from https://trac.sagemath.org/ticket/25532\n\n",
    "created_at": "2018-06-07T18:15:59Z",
    "labels": [
        "component: packages: standard"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.8",
    "title": "Upgrade to NTL 11.1.0",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/25295",
    "user": "https://github.com/slel"
}
```
CC:  @kiwifb @timokau @infinity0 @jdemeyer jpflori @nexttime @saraedum @slel @tobihan @tscrim @vbraun

- Download page: http://www.shoup.net/ntl/download.html
- Tarball: http://www.shoup.net/ntl/ntl-11.1.0.tar.gz

Issue created by migration from https://trac.sagemath.org/ticket/25532





---

archive/issue_comments_356184.json:
```json
{
    "body": "NTL compiles with `-std=c++11` from 11.0 upwards. Apparently it is possible to compile with older c standards, but that loses thread safety.\n\nI've added a work in progress PR that also updates the C standard for flint (necessary, see https://github.com/wbhart/flint2/issues/487). However sagelib won't build because lcalc still compiles with gnu++98 (#23341).\n----\nNew commits:",
    "created_at": "2018-07-09T22:25:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356184",
    "user": "https://github.com/timokau"
}
```

NTL compiles with `-std=c++11` from 11.0 upwards. Apparently it is possible to compile with older c standards, but that loses thread safety.

I've added a work in progress PR that also updates the C standard for flint (necessary, see https://github.com/wbhart/flint2/issues/487). However sagelib won't build because lcalc still compiles with gnu++98 (#23341).
----
New commits:



---

archive/issue_comments_356185.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-07-09T22:27:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356185",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_356186.json:
```json
{
    "body": "It is not necessary to explicitly set `-std` for flint, instead this relies on the compiler default (which certainly is >=11 now).\n----\nNew commits:",
    "created_at": "2018-07-09T22:28:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356186",
    "user": "https://github.com/timokau"
}
```

It is not necessary to explicitly set `-std` for flint, instead this relies on the compiler default (which certainly is >=11 now).
----
New commits:



---

archive/issue_comments_356187.json:
```json
{
    "body": "Add a `#` in front of ticket numbers.",
    "created_at": "2018-07-09T22:30:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356187",
    "user": "https://github.com/jdemeyer"
}
```

Add a `#` in front of ticket numbers.



---

archive/issue_comments_356188.json:
```json
{
    "body": "Why does this depend on #23341? How is lcalc related to NTL?",
    "created_at": "2018-07-09T22:31:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356188",
    "user": "https://github.com/jdemeyer"
}
```

Why does this depend on #23341? How is lcalc related to NTL?



---

archive/issue_comments_356189.json:
```json
{
    "body": "ntl 11 uses c++11, so \"distutils: extra_compile_args = -std=gnu++98\" has to be removed from sage/libs/lcalc/lcalc_Lfunction (which depends on both ntl and lcalc), so lcalc headers need to be c++11 compliant.\n\nFWIW, I've already bumped ntl on Arch, and it mostly works fine in practice. The main issue is that it seems to bail out on some degenerate input, eg\n\n\n```\n> sage -t sage/matrix/matrix_integer_dense.pyx\n\n[...]\n\nsage: matrix(ZZ,3,[1..9]).hermite_form(algorithm='ntl') ## line 1807 ##\n\nhalt 2\n\n```\n",
    "created_at": "2018-07-10T06:33:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356189",
    "user": "https://github.com/antonio-rojas"
}
```

ntl 11 uses c++11, so "distutils: extra_compile_args = -std=gnu++98" has to be removed from sage/libs/lcalc/lcalc_Lfunction (which depends on both ntl and lcalc), so lcalc headers need to be c++11 compliant.

FWIW, I've already bumped ntl on Arch, and it mostly works fine in practice. The main issue is that it seems to bail out on some degenerate input, eg


```
> sage -t sage/matrix/matrix_integer_dense.pyx

[...]

sage: matrix(ZZ,3,[1..9]).hermite_form(algorithm='ntl') ## line 1807 ##

halt 2

```




---

archive/issue_comments_356190.json:
```json
{
    "body": "Gentoo also has already updated ntl and apparently applied some patches to fix issues. https://github.com/dimpase/lcalc/pull/1 applies similar patches and updates lcalc to latest master (long unmaintained). That seems ready to merge, but was apparently forgotten or something.",
    "created_at": "2018-07-10T12:10:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356190",
    "user": "https://github.com/timokau"
}
```

Gentoo also has already updated ntl and apparently applied some patches to fix issues. https://github.com/dimpase/lcalc/pull/1 applies similar patches and updates lcalc to latest master (long unmaintained). That seems ready to merge, but was apparently forgotten or something.



---

archive/issue_comments_356191.json:
```json
{
    "body": "Replying to [comment:10 arojas]:\n> sage/libs/lcalc/lcalc_Lfunction (which depends on both ntl and lcalc)\n\nIt technically \"depends\" on NTL but for no good reason.\n\nIf that's the only issue, untangling this dependency would be the easiest solution.",
    "created_at": "2018-07-10T12:23:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356191",
    "user": "https://github.com/jdemeyer"
}
```

Replying to [comment:10 arojas]:
> sage/libs/lcalc/lcalc_Lfunction (which depends on both ntl and lcalc)

It technically "depends" on NTL but for no good reason.

If that's the only issue, untangling this dependency would be the easiest solution.



---

archive/issue_comments_356192.json:
```json
{
    "body": "I'm not sure its the only issue, its just the first non-trivial one I encountered. `@`fbissey probably knows more about that as he apparently already has proper patches for gentoo.",
    "created_at": "2018-07-11T17:48:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356192",
    "user": "https://github.com/timokau"
}
```

I'm not sure its the only issue, its just the first non-trivial one I encountered. `@`fbissey probably knows more about that as he apparently already has proper patches for gentoo.



---

archive/issue_comments_356193.json:
```json
{
    "body": "Replying to [comment:13 gh-timokau]:\n> I'm not sure its the only issue, its just the first non-trivial one I encountered. `@`fbissey probably knows more about that as he apparently already has proper patches for gentoo.\n\nI'll confess that I am not sure what we are talking about here. Patch to `ntl` or to `sage`? At the moment I am using stock `ntl-10.5.0` from the gentoo tree that has no patch. I don't remember doing anything special to sage to use it. \nI have an ebuild for 11.1.0/11.2.0 in a private repository that again is not patched - the only thing to be careful of is that to enable threads in `ntl` you need at least `gf2x-1.2`.",
    "created_at": "2018-07-12T01:28:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356193",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:13 gh-timokau]:
> I'm not sure its the only issue, its just the first non-trivial one I encountered. `@`fbissey probably knows more about that as he apparently already has proper patches for gentoo.

I'll confess that I am not sure what we are talking about here. Patch to `ntl` or to `sage`? At the moment I am using stock `ntl-10.5.0` from the gentoo tree that has no patch. I don't remember doing anything special to sage to use it. 
I have an ebuild for 11.1.0/11.2.0 in a private repository that again is not patched - the only thing to be careful of is that to enable threads in `ntl` you need at least `gf2x-1.2`.



---

archive/issue_comments_356194.json:
```json
{
    "body": "Oh I just assumed that you used ntl 11 with sage because you mentioned in https://github.com/dimpase/lcalc/pull/1 that you patched your lcalc for c++11 support.",
    "created_at": "2018-07-12T10:42:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356194",
    "user": "https://github.com/timokau"
}
```

Oh I just assumed that you used ntl 11 with sage because you mentioned in https://github.com/dimpase/lcalc/pull/1 that you patched your lcalc for c++11 support.



---

archive/issue_comments_356195.json:
```json
{
    "body": "Replying to [comment:15 gh-timokau]:\n> Oh I just assumed that you used ntl 11 with sage because you mentioned in https://github.com/dimpase/lcalc/pull/1 that you patched your lcalc for c++11 support.\n\nI seriously need to check to see if I use C++11 with lcalc. I have a good memory but not that good.",
    "created_at": "2018-07-12T10:46:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356195",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:15 gh-timokau]:
> Oh I just assumed that you used ntl 11 with sage because you mentioned in https://github.com/dimpase/lcalc/pull/1 that you patched your lcalc for c++11 support.

I seriously need to check to see if I use C++11 with lcalc. I have a good memory but not that good.



---

archive/issue_comments_356196.json:
```json
{
    "body": "OK I patch enough that it compile out of the box with g++-7.3.0 without passing a `-std=c++...` flag so I am guessing I get gnu++11 at the least. Lots of warnings that stuff is deprecated or forbidden, but g++ takes it. clang++, on the other hand, breaks\n\n```\nfatal error: 'bits/c++config.h' file not found\n```\n\nOf course no one should use those kinds of headers in the first place. I am sure it is fixed in the pull request you are quoting at least.",
    "created_at": "2018-07-12T10:55:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356196",
    "user": "https://github.com/kiwifb"
}
```

OK I patch enough that it compile out of the box with g++-7.3.0 without passing a `-std=c++...` flag so I am guessing I get gnu++11 at the least. Lots of warnings that stuff is deprecated or forbidden, but g++ takes it. clang++, on the other hand, breaks

```
fatal error: 'bits/c++config.h' file not found
```

Of course no one should use those kinds of headers in the first place. I am sure it is fixed in the pull request you are quoting at least.



---

archive/issue_comments_356197.json:
```json
{
    "body": "But really we should talk about lcalc in another ticket.",
    "created_at": "2018-07-12T10:56:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356197",
    "user": "https://github.com/kiwifb"
}
```

But really we should talk about lcalc in another ticket.



---

archive/issue_comments_356198.json:
```json
{
    "body": "Yes, that would be #23341. Apparently the work is pretty much done but there is some small regression (?) nobody felt qualified to make a judgement about yet.\n\nMore relevant to the discussion in this ticket would be the approach `@`jdmeyer suggested (to \"just\" remove the dependency).",
    "created_at": "2018-07-12T11:28:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356198",
    "user": "https://github.com/timokau"
}
```

Yes, that would be #23341. Apparently the work is pretty much done but there is some small regression (?) nobody felt qualified to make a judgement about yet.

More relevant to the discussion in this ticket would be the approach `@`jdmeyer suggested (to "just" remove the dependency).



---

archive/issue_comments_356199.json:
```json
{
    "body": "When I tried to update to the last version before 11.0 (10.5.0) I got an interesting error:\n\n\n```\nFile \"/nix/store/lv32600c4zla3ldyd0l2sz7sr5y6bhkp-sage-src-8.2/src/sage/misc/trace.py\", line 67, in sage.misc.trace.trace\nFailed example:\n    print(s.before[s.before.find('--'):])\nExpected:\n    --...\n    ipdb> c\n    2 * 5\nGot:\n    --Call--\n    > <CSI-0;32m>/nix/store/bs9cxmkyslmnizh9gl7gj4\n```\n\n\n10.4.0 is the last version that works without any changes.",
    "created_at": "2018-07-17T15:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356199",
    "user": "https://github.com/timokau"
}
```

When I tried to update to the last version before 11.0 (10.5.0) I got an interesting error:


```
File "/nix/store/lv32600c4zla3ldyd0l2sz7sr5y6bhkp-sage-src-8.2/src/sage/misc/trace.py", line 67, in sage.misc.trace.trace
Failed example:
    print(s.before[s.before.find('--'):])
Expected:
    --...
    ipdb> c
    2 * 5
Got:
    --Call--
    > <CSI-0;32m>/nix/store/bs9cxmkyslmnizh9gl7gj4
```


10.4.0 is the last version that works without any changes.



---

archive/issue_comments_356200.json:
```json
{
    "body": "Replying to [comment:21 gh-timokau]:\n> When I tried to update to the last version before 11.0 (10.5.0) I got an interesting error:\n> \n> {{{\n> File \"/nix/store/lv32600c4zla3ldyd0l2sz7sr5y6bhkp-sage-src-8.2/src/sage/misc/trace.py\", line 67, in sage.misc.trace.trace\n> Failed example:\n>     print(s.before[s.before.find('--'):])\n> Expected:\n>     --...\n>     ipdb> c\n>     2 * 5\n> Got:\n>     --Call--\n>     > <CSI-0;32m>/nix/store/bs9cxmkyslmnizh9gl7gj4\n> }}}\n> \n> 10.4.0 is the last version that works without any changes.\n\nI am currently on 10.5.0 in gentoo, how do you get that problem?",
    "created_at": "2018-07-17T20:17:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356200",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:21 gh-timokau]:
> When I tried to update to the last version before 11.0 (10.5.0) I got an interesting error:
> 
> {{{
> File "/nix/store/lv32600c4zla3ldyd0l2sz7sr5y6bhkp-sage-src-8.2/src/sage/misc/trace.py", line 67, in sage.misc.trace.trace
> Failed example:
>     print(s.before[s.before.find('--'):])
> Expected:
>     --...
>     ipdb> c
>     2 * 5
> Got:
>     --Call--
>     > <CSI-0;32m>/nix/store/bs9cxmkyslmnizh9gl7gj4
> }}}
> 
> 10.4.0 is the last version that works without any changes.

I am currently on 10.5.0 in gentoo, how do you get that problem?



---

archive/issue_comments_356201.json:
```json
{
    "body": "Huh. I tried to reproduce it to be sure, but I couldn't. If I remember correctly the time it occured I only changed the ntl version. Maybe I changed something else too and forgot it, maybe its a transient failure. I'll see if it occurs again some time.\n\nThanks for telling me.",
    "created_at": "2018-07-18T12:17:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356201",
    "user": "https://github.com/timokau"
}
```

Huh. I tried to reproduce it to be sure, but I couldn't. If I remember correctly the time it occured I only changed the ntl version. Maybe I changed something else too and forgot it, maybe its a transient failure. I'll see if it occurs again some time.

Thanks for telling me.



---

archive/issue_comments_356202.json:
```json
{
    "body": "Replying to [comment:10 arojas]:\n> FWIW, I've already bumped ntl on Arch, and it mostly works fine in practice. The main issue is that it seems to bail out on some degenerate input, eg\n> \n> {{{\n> > sage -t sage/matrix/matrix_integer_dense.pyx\n> \n> [...]\n> \n> sage: matrix(ZZ,3,[1..9]).hermite_form(algorithm='ntl') ## line 1807 ##\n> \n> halt 2\n> \n> }}}\n\nScratch that: this is (surprisingly) caused by the Singular 4.1.1 upgrade, not by the NTL one.",
    "created_at": "2018-07-24T19:43:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356202",
    "user": "https://github.com/antonio-rojas"
}
```

Replying to [comment:10 arojas]:
> FWIW, I've already bumped ntl on Arch, and it mostly works fine in practice. The main issue is that it seems to bail out on some degenerate input, eg
> 
> {{{
> > sage -t sage/matrix/matrix_integer_dense.pyx
> 
> [...]
> 
> sage: matrix(ZZ,3,[1..9]).hermite_form(algorithm='ntl') ## line 1807 ##
> 
> halt 2
> 
> }}}

Scratch that: this is (surprisingly) caused by the Singular 4.1.1 upgrade, not by the NTL one.



---

archive/issue_comments_356203.json:
```json
{
    "body": "How did you get sage to build with ntl >= 11? Did you patch lcalc? Any other patches necessary?",
    "created_at": "2018-07-24T22:02:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356203",
    "user": "https://github.com/timokau"
}
```

How did you get sage to build with ntl >= 11? Did you patch lcalc? Any other patches necessary?



---

archive/issue_comments_356204.json:
```json
{
    "body": "Replying to [comment:25 gh-timokau]:\n> How did you get sage to build with ntl >= 11? Did you patch lcalc? Any other patches necessary?\n\nApply the patch from #23341 to lcalc and\n\nhttps://git.archlinux.org/svntogit/community.git/tree/trunk/sagemath-lcalc-c++11.patch?h=packages/sagemath",
    "created_at": "2018-07-24T22:14:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356204",
    "user": "https://github.com/antonio-rojas"
}
```

Replying to [comment:25 gh-timokau]:
> How did you get sage to build with ntl >= 11? Did you patch lcalc? Any other patches necessary?

Apply the patch from #23341 to lcalc and

https://git.archlinux.org/svntogit/community.git/tree/trunk/sagemath-lcalc-c++11.patch?h=packages/sagemath



---

archive/issue_comments_356205.json:
```json
{
    "body": "I tried to untangle the (apparently unnecessary) `lcalc <- ntl` dependency. I failed. NTL apparently gets added to the `inclue_dirs` of pretty much every sage extension, including lcalc. That is even after I (as an experiment)\n\n- removed `ntl` from `cython.py`s `standard_libs`\n- removed `ntl` from `setup.py`s `lib_headers`\n\nI couldn't figure out why `ntl` was still added. Jeroen, do you know why?",
    "created_at": "2018-07-25T12:56:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356205",
    "user": "https://github.com/timokau"
}
```

I tried to untangle the (apparently unnecessary) `lcalc <- ntl` dependency. I failed. NTL apparently gets added to the `inclue_dirs` of pretty much every sage extension, including lcalc. That is even after I (as an experiment)

- removed `ntl` from `cython.py`s `standard_libs`
- removed `ntl` from `setup.py`s `lib_headers`

I couldn't figure out why `ntl` was still added. Jeroen, do you know why?



---

archive/issue_comments_356206.json:
```json
{
    "body": "[NTL 11.3.1 was released.](https://www.shoup.net/ntl/doc/tour-changes.html)",
    "created_at": "2018-10-21T11:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356206",
    "user": "https://github.com/slel"
}
```

[NTL 11.3.1 was released.](https://www.shoup.net/ntl/doc/tour-changes.html)



---

archive/issue_comments_356207.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, ntl\".",
    "created_at": "2018-10-21T11:02:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356207",
    "user": "https://github.com/slel"
}
```

Changing keywords from "" to "upgrade, ntl".



---

archive/issue_comments_356208.json:
```json
{
    "body": "For what its worth I have since also adopted [this archlinux patch](https://git.archlinux.org/svntogit/community.git/plain/trunk/sagemath-lcalc-c++11.patch?h=packages/sagemath&id=0e31ae526ab7c6b5c0bfacb3f8b1c4fd490035aa) (thanks Antonio!) and haven't seen any issues.",
    "created_at": "2018-10-21T11:34:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356208",
    "user": "https://github.com/timokau"
}
```

For what its worth I have since also adopted [this archlinux patch](https://git.archlinux.org/svntogit/community.git/plain/trunk/sagemath-lcalc-c++11.patch?h=packages/sagemath&id=0e31ae526ab7c6b5c0bfacb3f8b1c4fd490035aa) (thanks Antonio!) and haven't seen any issues.



---

archive/issue_comments_356209.json:
```json
{
    "body": "NTL 11.3.2 was released, as [announced on sage-devel](https://groups.google.com/d/topic/sage-devel/QIwZE5YawmA/discussion).",
    "created_at": "2018-11-16T12:08:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356209",
    "user": "https://github.com/slel"
}
```

NTL 11.3.2 was released, as [announced on sage-devel](https://groups.google.com/d/topic/sage-devel/QIwZE5YawmA/discussion).



---

archive/issue_comments_356210.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-22T04:46:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356210",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356211.json:
```json
{
    "body": "New commits:",
    "created_at": "2018-11-22T04:48:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356211",
    "user": "https://github.com/kiwifb"
}
```

New commits:



---

archive/issue_comments_356212.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-11-23T01:07:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356212",
    "user": "https://github.com/kiwifb"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_356213.json:
```json
{
    "body": "I've not tested it (with or without the specific hunk) but is the flint `export CFLAGS` hunk necessary?\nDidn't we pass `CFLAGS` to flint before?",
    "created_at": "2018-11-23T09:13:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356213",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

I've not tested it (with or without the specific hunk) but is the flint `export CFLAGS` hunk necessary?
Didn't we pass `CFLAGS` to flint before?



---

archive/issue_comments_356214.json:
```json
{
    "body": "Replying to [comment:36 jpflori]:\n> I've not tested it (with or without the specific hunk) but is the flint `export CFLAGS` hunk necessary?\n> Didn't we pass `CFLAGS` to flint before?\n\nI am not sure what motivated that. `@`Timo can you comment here?\n\nIn any case there is an `export CFLAGS` in the conditional for debugging and one outside. We could just keep the one outside. \n\nCould it be that it was meant for `CXXFLAGS` instead and add `-std=c++11` there? There is a single object built with C++ in flint, the ntl interface. I cannot test that theory because I don't have a compiler old enough that would default to something lower than c++11.",
    "created_at": "2018-11-23T09:21:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356214",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:36 jpflori]:
> I've not tested it (with or without the specific hunk) but is the flint `export CFLAGS` hunk necessary?
> Didn't we pass `CFLAGS` to flint before?

I am not sure what motivated that. `@`Timo can you comment here?

In any case there is an `export CFLAGS` in the conditional for debugging and one outside. We could just keep the one outside. 

Could it be that it was meant for `CXXFLAGS` instead and add `-std=c++11` there? There is a single object built with C++ in flint, the ntl interface. I cannot test that theory because I don't have a compiler old enough that would default to something lower than c++11.



---

archive/issue_comments_356215.json:
```json
{
    "body": "I have a weird problem building this NTL with clang on FreeBSD. It keeps telling me that it is g++, and bails out with some weird error. Could you try clang on another platform?",
    "created_at": "2018-11-23T09:56:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356215",
    "user": "https://github.com/dimpase"
}
```

I have a weird problem building this NTL with clang on FreeBSD. It keeps telling me that it is g++, and bails out with some weird error. Could you try clang on another platform?



---

archive/issue_comments_356216.json:
```json
{
    "body": "Replying to [comment:38 dimpase]:\n> I have a weird problem building this NTL with clang on FreeBSD. It keeps telling me that it is g++, and bails out with some weird error. Could you try clang on another platform?\n\nWorks as expected with clang+linux.  More details please.",
    "created_at": "2018-11-23T10:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356216",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:38 dimpase]:
> I have a weird problem building this NTL with clang on FreeBSD. It keeps telling me that it is g++, and bails out with some weird error. Could you try clang on another platform?

Works as expected with clang+linux.  More details please.



---

archive/issue_comments_356217.json:
```json
{
    "body": "Looks ok on macos without `gf2x` and outside of Sage.\n`configure` knows `g++`  is `clang` and `make` calls `g++` but finishes ok.",
    "created_at": "2018-11-23T10:11:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356217",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Looks ok on macos without `gf2x` and outside of Sage.
`configure` knows `g++`  is `clang` and `make` calls `g++` but finishes ok.



---

archive/issue_comments_356218.json:
```json
{
    "body": "Running manually at `sage -sh` prompt:\nto start with:\n\n```\n$ CC=clang CXX=clang++ ./configure\ncompiler_name=gcc\nlanguage_standard=2014\ncpu_type=x86\n\nsetting TUNE=x86\n\n*** checking -pthread flag\n   CXXAUTOFLAGS=\" -pthread\"\n   -pthread works\n*** checking -march=native flag\n   CXXAUTOFLAGS=\" -pthread -march=native\"\n   -march=native works\n*** checking -ffp-contract=off flag\n   -ffp-contract=off works\n*** threads are OK \n\nCXXAUTOFLAGS=\" -pthread -march=native\"\nNOCONTRACT=\"-ffp-contract=off -DNTL_CONTRACTION_FIXED\"\n\ngenerated makefile\ngenerated ../include/NTL/config.h\ngenerated ../include/NTL/ConfigLog.h\n```\n\n\nwhy `gcc`? and why `x86`, not `x86_64`? Then,\n\n```\n$ gmake\nmake clobber\nrm -f ntl.a mach_desc.h ../include/NTL/mach_desc.h  GetTime.cpp GetPID.cpp\nsh ResetFeatures '..' \"ALIGNED_ARRAY BUILTIN_CLZL LL_TYPE SSSE3 AVX PCLMUL AVX2 FMA AVX512F  COPY_TRAITS1 COPY_TRAITS2 CHRONO_TIME MACOS_TIME POSIX_TIME\"\nrm -f ../include/NTL/gmp_aux.h\nsh RemoveProg QuickTest ZZTest SSMulTest ZZ_pXTest lzz_pXTest BerlekampTest CanZassTest  ZZXFacTest MoreFacTest LLLTest   BitMatTest MatrixTest mat_lzz_pTest CharPolyTest RRTest QuadTest GF2XTest   GF2EXTest GF2EXGCDTest subset ZZ_pEXTest ZZ_pEXGCDTest lzz_pEXTest lzz_pEXGCDTest  Timing ThreadTest MakeDesc TestGetTime TestGetPID CheckFeatures CheckCompile GenConfigInfo CheckContract  CheckThreads gen_gmp_aux gf2x_version_1_2_or_later_required\nrm -f *.o\nrm -rf small\nrm -f cfileout mfileout\nrm -rf .libs *.lo libntl.la\nrm -f setup-phase\nmake setup1\ng++ -I../include -I.  -g -O2 -pthread -march=native  -c MakeDescAux.cpp\n...\n```\n\n\non FreeBSD g++ and clang++, or c++ are totally different beasts, and they can live together in the same PATH (but not in this case it seems)",
    "created_at": "2018-11-23T10:13:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356218",
    "user": "https://github.com/dimpase"
}
```

Running manually at `sage -sh` prompt:
to start with:

```
$ CC=clang CXX=clang++ ./configure
compiler_name=gcc
language_standard=2014
cpu_type=x86

setting TUNE=x86

*** checking -pthread flag
   CXXAUTOFLAGS=" -pthread"
   -pthread works
*** checking -march=native flag
   CXXAUTOFLAGS=" -pthread -march=native"
   -march=native works
*** checking -ffp-contract=off flag
   -ffp-contract=off works
*** threads are OK 

CXXAUTOFLAGS=" -pthread -march=native"
NOCONTRACT="-ffp-contract=off -DNTL_CONTRACTION_FIXED"

generated makefile
generated ../include/NTL/config.h
generated ../include/NTL/ConfigLog.h
```


why `gcc`? and why `x86`, not `x86_64`? Then,

```
$ gmake
make clobber
rm -f ntl.a mach_desc.h ../include/NTL/mach_desc.h  GetTime.cpp GetPID.cpp
sh ResetFeatures '..' "ALIGNED_ARRAY BUILTIN_CLZL LL_TYPE SSSE3 AVX PCLMUL AVX2 FMA AVX512F  COPY_TRAITS1 COPY_TRAITS2 CHRONO_TIME MACOS_TIME POSIX_TIME"
rm -f ../include/NTL/gmp_aux.h
sh RemoveProg QuickTest ZZTest SSMulTest ZZ_pXTest lzz_pXTest BerlekampTest CanZassTest  ZZXFacTest MoreFacTest LLLTest   BitMatTest MatrixTest mat_lzz_pTest CharPolyTest RRTest QuadTest GF2XTest   GF2EXTest GF2EXGCDTest subset ZZ_pEXTest ZZ_pEXGCDTest lzz_pEXTest lzz_pEXGCDTest  Timing ThreadTest MakeDesc TestGetTime TestGetPID CheckFeatures CheckCompile GenConfigInfo CheckContract  CheckThreads gen_gmp_aux gf2x_version_1_2_or_later_required
rm -f *.o
rm -rf small
rm -f cfileout mfileout
rm -rf .libs *.lo libntl.la
rm -f setup-phase
make setup1
g++ -I../include -I.  -g -O2 -pthread -march=native  -c MakeDescAux.cpp
...
```


on FreeBSD g++ and clang++, or c++ are totally different beasts, and they can live together in the same PATH (but not in this case it seems)



---

archive/issue_comments_356219.json:
```json
{
    "body": "Removing gcc/g++ results in\n\n```\n$ CC=clang CXX=clang++ ./configure\nCompilation failed\nSee CompilerOutput.log for details\nGoodbye! at DoConfig line 616.\n$ CC=cc CXX=c++ ./configure\nCompilation failed\nSee CompilerOutput.log for details\nGoodbye! at DoConfig line 616.\n$ cat CompilerOutput.log \n*** CompilerOutput.log ***\n*** building GenConfigInfo\ng++ -I../include -I.  -g -O2   -o  GenConfigInfo GenConfigInfo.cpp -lm\nmake: exec(g++) failed (No such file or directory)\n*** Error code 1\n...\n```\n\n\nThat is, it only works with g++/gcc. A bug, I'd say. In `DoConfig`, on sees\n`'CXX'         => 'g++'`  - I don't know Perl, but I gather it means that CXX is hardcoded to be `g++`.\n\nIt works with NTL 10, don't ask me how...",
    "created_at": "2018-11-23T10:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356219",
    "user": "https://github.com/dimpase"
}
```

Removing gcc/g++ results in

```
$ CC=clang CXX=clang++ ./configure
Compilation failed
See CompilerOutput.log for details
Goodbye! at DoConfig line 616.
$ CC=cc CXX=c++ ./configure
Compilation failed
See CompilerOutput.log for details
Goodbye! at DoConfig line 616.
$ cat CompilerOutput.log 
*** CompilerOutput.log ***
*** building GenConfigInfo
g++ -I../include -I.  -g -O2   -o  GenConfigInfo GenConfigInfo.cpp -lm
make: exec(g++) failed (No such file or directory)
*** Error code 1
...
```


That is, it only works with g++/gcc. A bug, I'd say. In `DoConfig`, on sees
`'CXX'         => 'g++'`  - I don't know Perl, but I gather it means that CXX is hardcoded to be `g++`.

It works with NTL 10, don't ask me how...



---

archive/issue_comments_356220.json:
```json
{
    "body": "This is silly\n\n```\n$ CC=clang CXX=clang++ ./configure \ncompiler_name=gcc\nlanguage_standard=2014\ncpu_type=x86\n\nsetting TUNE=x86\n\n*** checking -pthread flag\n   CXXAUTOFLAGS=\" -pthread\"\n   -pthread works\n*** checking -march=native flag\n   CXXAUTOFLAGS=\" -pthread -march=native\"\n   -march=native works\n*** checking -ffp-contract=off flag\n   -ffp-contract=off works\n*** threads are OK \n\nCXXAUTOFLAGS=\" -pthread -march=native\"\nNOCONTRACT=\"-ffp-contract=off -DNTL_CONTRACTION_FIXED\"\n\ngenerated makefile\ngenerated ../include/NTL/config.h\ngenerated ../include/NTL/ConfigLog.h\n```\n\nbut\n\n```\n$ ./configure CXX=clang++\ncompiler_name=clang\nlanguage_standard=2014\ncpu_type=x86\n\nsetting TUNE=x86\n\n*** checking -pthread flag\n   CXXAUTOFLAGS=\" -pthread\"\n   -pthread works\n*** checking -march=native flag\n   CXXAUTOFLAGS=\" -pthread -march=native\"\n   -march=native works\n*** threads are OK \n\nCXXAUTOFLAGS=\" -pthread -march=native\"\nNOCONTRACT=\"\"\n\ngenerated makefile\ngenerated ../include/NTL/config.h\ngenerated ../include/NTL/ConfigLog.h\n```\n",
    "created_at": "2018-11-23T10:28:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356220",
    "user": "https://github.com/kiwifb"
}
```

This is silly

```
$ CC=clang CXX=clang++ ./configure 
compiler_name=gcc
language_standard=2014
cpu_type=x86

setting TUNE=x86

*** checking -pthread flag
   CXXAUTOFLAGS=" -pthread"
   -pthread works
*** checking -march=native flag
   CXXAUTOFLAGS=" -pthread -march=native"
   -march=native works
*** checking -ffp-contract=off flag
   -ffp-contract=off works
*** threads are OK 

CXXAUTOFLAGS=" -pthread -march=native"
NOCONTRACT="-ffp-contract=off -DNTL_CONTRACTION_FIXED"

generated makefile
generated ../include/NTL/config.h
generated ../include/NTL/ConfigLog.h
```

but

```
$ ./configure CXX=clang++
compiler_name=clang
language_standard=2014
cpu_type=x86

setting TUNE=x86

*** checking -pthread flag
   CXXAUTOFLAGS=" -pthread"
   -pthread works
*** checking -march=native flag
   CXXAUTOFLAGS=" -pthread -march=native"
   -march=native works
*** threads are OK 

CXXAUTOFLAGS=" -pthread -march=native"
NOCONTRACT=""

generated makefile
generated ../include/NTL/config.h
generated ../include/NTL/ConfigLog.h
```




---

archive/issue_comments_356221.json:
```json
{
    "body": "The thing is `CXX` is an option of the `DoConfig` script. It is not pulled from an environment variable.",
    "created_at": "2018-11-23T10:30:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356221",
    "user": "https://github.com/kiwifb"
}
```

The thing is `CXX` is an option of the `DoConfig` script. It is not pulled from an environment variable.



---

archive/issue_comments_356222.json:
```json
{
    "body": "Hmm, OK, over to Sage's installation. If I start as\n\n```\n$ MAKE=\"gmake -j8\" gmake\n```\n\nNTL fails with the usual invitation to look in the following file for errors, and there I see\n\n```\n$ cat src/src/CompilerOutput.log \n*** CompilerOutput.log ***\n*** building GenConfigInfo\nmake[4]: illegal argument to -j -- must be positive integer!\n```\n\nSo it seems to assume something about $MAKE...\n\nAnd if I start as\n\n```\n$ MAKE=\"gmake\" gmake\n```\n\n\nI get even weirder\n\n```\n*** CompilerOutput.log ***\n*** building GenConfigInfo\nmake[4]: don't know how to make w. Stop\n...\n```\n",
    "created_at": "2018-11-23T10:53:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356222",
    "user": "https://github.com/dimpase"
}
```

Hmm, OK, over to Sage's installation. If I start as

```
$ MAKE="gmake -j8" gmake
```

NTL fails with the usual invitation to look in the following file for errors, and there I see

```
$ cat src/src/CompilerOutput.log 
*** CompilerOutput.log ***
*** building GenConfigInfo
make[4]: illegal argument to -j -- must be positive integer!
```

So it seems to assume something about $MAKE...

And if I start as

```
$ MAKE="gmake" gmake
```


I get even weirder

```
*** CompilerOutput.log ***
*** building GenConfigInfo
make[4]: don't know how to make w. Stop
...
```




---

archive/issue_comments_356223.json:
```json
{
    "body": "OK, here is the fix:\n\n\n```diff\ndiff --git a/build/pkgs/ntl/spkg-install b/build/pkgs/ntl/spkg-install\nindex 08fb2b148c..88ee9548ea 100644\n--- a/build/pkgs/ntl/spkg-install\n+++ b/build/pkgs/ntl/spkg-install\n@@ -99,6 +99,7 @@ ntl_configure()\n         LDFLAGS=\"$LDFLAGS\" LIBTOOL_LINK_FLAGS=\"$LIBTOOL_LINK_FLAGS\" \\\n         NTL_GMP_LIP=on NTL_GF2X_LIB=on \\\n         \"$DISABLE_NATIVE\" \\\n+        MAKE_PROG=\"$MAKE\" \\\n         NTL_THREADS=off || sdh_die \"Error configuring NTL.\"\n }\n \n```\n\nCould you add it to the branch?",
    "created_at": "2018-11-23T11:11:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356223",
    "user": "https://github.com/dimpase"
}
```

OK, here is the fix:


```diff
diff --git a/build/pkgs/ntl/spkg-install b/build/pkgs/ntl/spkg-install
index 08fb2b148c..88ee9548ea 100644
--- a/build/pkgs/ntl/spkg-install
+++ b/build/pkgs/ntl/spkg-install
@@ -99,6 +99,7 @@ ntl_configure()
         LDFLAGS="$LDFLAGS" LIBTOOL_LINK_FLAGS="$LIBTOOL_LINK_FLAGS" \
         NTL_GMP_LIP=on NTL_GF2X_LIB=on \
         "$DISABLE_NATIVE" \
+        MAKE_PROG="$MAKE" \
         NTL_THREADS=off || sdh_die "Error configuring NTL."
 }
 
```

Could you add it to the branch?



---

archive/issue_comments_356224.json:
```json
{
    "body": "I really need to go to bed now :( but this is a public branch, you are welcome to push to it. And well spotted.",
    "created_at": "2018-11-23T11:18:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356224",
    "user": "https://github.com/kiwifb"
}
```

I really need to go to bed now :( but this is a public branch, you are welcome to push to it. And well spotted.



---

archive/issue_comments_356225.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-23T11:26:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356225",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356226.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-23T11:27:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356226",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_356227.json:
```json
{
    "body": "Replying to [comment:37 fbissey]:\n> Replying to [comment:36 jpflori]:\n> > I've not tested it (with or without the specific hunk) but is the flint `export CFLAGS` hunk necessary?\n> > Didn't we pass `CFLAGS` to flint before?\n> \n> I am not sure what motivated that. `@`Timo can you comment here?\n> \n> In any case there is an `export CFLAGS` in the conditional for debugging and one outside. We could just keep the one outside. \n> \n> Could it be that it was meant for `CXXFLAGS` instead and add `-std=c++11` there? There is a single object built with C++ in flint, the ntl interface. I cannot test that theory because I don't have a compiler old enough that would default to something lower than c++11.\n\nI don't remember my reasoning. Probably some leftover of trying to get it to work nicely with the old lcalc.\n\nThanks for getting this mergeable :)",
    "created_at": "2018-11-23T13:47:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356227",
    "user": "https://github.com/timokau"
}
```

Replying to [comment:37 fbissey]:
> Replying to [comment:36 jpflori]:
> > I've not tested it (with or without the specific hunk) but is the flint `export CFLAGS` hunk necessary?
> > Didn't we pass `CFLAGS` to flint before?
> 
> I am not sure what motivated that. `@`Timo can you comment here?
> 
> In any case there is an `export CFLAGS` in the conditional for debugging and one outside. We could just keep the one outside. 
> 
> Could it be that it was meant for `CXXFLAGS` instead and add `-std=c++11` there? There is a single object built with C++ in flint, the ntl interface. I cannot test that theory because I don't have a compiler old enough that would default to something lower than c++11.

I don't remember my reasoning. Probably some leftover of trying to get it to work nicely with the old lcalc.

Thanks for getting this mergeable :)



---

archive/issue_comments_356228.json:
```json
{
    "body": "This borks flint on some machines, i guess missing -std=c11 \n\n```\nmake[7]: Leaving directory '/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src/fq_zech_poly_factor'\nif [ \"1\" -eq \"1\" ]; then \\\n  make build/interfaces/NTL-interface.lo; \\\n  g++   -shared -Wl,-soname,libflint.so.13 -Wl,-rpath,/home/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/home/buildbot/slave/sage_git/build/local/lib build/interfaces/NTL-interface.lo  build/printf.lo  build/fprintf.lo  build/sprintf.lo  build/scanf.lo  build/fscanf.lo  build/sscanf.lo  build/clz_tab.lo  build/memory_manager.lo  build/version.lo  build/profiler.lo  build/thread_support.lo  build/ulong_extras.lo  build/long_extras.lo  build/perm.lo  build/fmpz.lo  build/fmpz_vec.lo  build/fmpz_poly.lo  build/fmpq_poly.lo  build/fmpz_mat.lo  build/fmpz_lll.lo  build/mpfr_vec.lo  build/mpfr_mat.lo  build/mpf_vec.lo  build/mpf_mat.lo  build/nmod_vec.lo  build/nmod_poly.lo  build/nmod_poly_factor.lo  build/arith.lo  build/mpn_extras.lo  build/nmod_mat.lo  build/fmpq.lo  build/fmpq_vec.lo  build/fmpq_mat.lo  build/padic.lo  build/fmpz_poly_q.lo  build/fmpz_poly_mat.lo  build/nmod_poly_mat.lo  build/fmpz_mod_poly.lo  build/fmpz_mod_poly_factor.lo  build/fmpz_factor.lo  build/fmpz_poly_factor.lo  build/fft.lo  build/qsieve.lo  build/double_extras.lo  build/d_vec.lo  build/d_mat.lo  build/padic_poly.lo  build/padic_mat.lo  build/qadic.lo  build/fq.lo  build/fq_vec.lo  build/fq_mat.lo  build/fq_poly.lo  build/fq_poly_factor.lo  build/fq_nmod.lo  build/fq_nmod_vec.lo  build/fq_nmod_mat.lo  build/fq_nmod_poly.lo  build/fq_nmod_poly_factor.lo  build/fq_zech.lo  build/fq_zech_vec.lo  build/fq_zech_mat.lo  build/fq_zech_poly.lo  build/fq_zech_poly_factor.lo  -o libflint.so.13.5.2 -L/home/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/home/buildbot/slave/sage_git/build/local/lib  -L/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src -L/home/buildbot/slave/sage_git/build/local/lib -L/home/buildbot/slave/sage_git/build/local/lib -L/home/buildbot/slave/sage_git/build/local/lib -lmpfr -lgmp -lm -lntl -lpthread ; \\\nfi\nmake[7]: Entering directory '/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src'\ng++ -fPIC  -I/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src -I/home/buildbot/slave/sage_git/build/local/include -I/home/buildbot/slave/sage_git/build/local/include -I/home/buildbot/slave/sage_git/build/local/include -c interfaces/NTL-interface.cpp -o build/interfaces/NTL-interface.lo\nIn file included from /usr/include/c++/4.9/type_traits:35:0,\n                 from /home/buildbot/slave/sage_git/build/local/include/NTL/tools.h:25,\n                 from /home/buildbot/slave/sage_git/build/local/include/NTL/ZZ.h:19,\n                 from interfaces/NTL-interface.cpp:32:\n/usr/include/c++/4.9/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.\n #error This file requires compiler and library support for the \\\n  ^\nIn file included from /home/buildbot/slave/sage_git/build/local/include/NTL/ZZ.h:19:0,\n                 from interfaces/NTL-interface.cpp:32:\n/home/buildbot/slave/sage_git/build/local/include/NTL/tools.h:1075:1: error: 'constexpr' does not name a type\n constexpr bool Relocate_aux_has_trivial_copy(T*)\n ^\n/home/buildbot/slave/sage_git/build/local/include/NTL/tools.h:1075:1: note: C++11 'constexpr' only available with -std=c++11 or -std=gnu++11\n/home/buildbot/slave/sage_git/build/local/include/NTL/tools.h:1083:1: error: 'constexpr' does not name a type\n constexpr bool Relocate_aux_has_any_copy(T*)\n```\n",
    "created_at": "2018-11-24T13:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356228",
    "user": "https://github.com/vbraun"
}
```

This borks flint on some machines, i guess missing -std=c11 

```
make[7]: Leaving directory '/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src/fq_zech_poly_factor'
if [ "1" -eq "1" ]; then \
  make build/interfaces/NTL-interface.lo; \
  g++   -shared -Wl,-soname,libflint.so.13 -Wl,-rpath,/home/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/home/buildbot/slave/sage_git/build/local/lib build/interfaces/NTL-interface.lo  build/printf.lo  build/fprintf.lo  build/sprintf.lo  build/scanf.lo  build/fscanf.lo  build/sscanf.lo  build/clz_tab.lo  build/memory_manager.lo  build/version.lo  build/profiler.lo  build/thread_support.lo  build/ulong_extras.lo  build/long_extras.lo  build/perm.lo  build/fmpz.lo  build/fmpz_vec.lo  build/fmpz_poly.lo  build/fmpq_poly.lo  build/fmpz_mat.lo  build/fmpz_lll.lo  build/mpfr_vec.lo  build/mpfr_mat.lo  build/mpf_vec.lo  build/mpf_mat.lo  build/nmod_vec.lo  build/nmod_poly.lo  build/nmod_poly_factor.lo  build/arith.lo  build/mpn_extras.lo  build/nmod_mat.lo  build/fmpq.lo  build/fmpq_vec.lo  build/fmpq_mat.lo  build/padic.lo  build/fmpz_poly_q.lo  build/fmpz_poly_mat.lo  build/nmod_poly_mat.lo  build/fmpz_mod_poly.lo  build/fmpz_mod_poly_factor.lo  build/fmpz_factor.lo  build/fmpz_poly_factor.lo  build/fft.lo  build/qsieve.lo  build/double_extras.lo  build/d_vec.lo  build/d_mat.lo  build/padic_poly.lo  build/padic_mat.lo  build/qadic.lo  build/fq.lo  build/fq_vec.lo  build/fq_mat.lo  build/fq_poly.lo  build/fq_poly_factor.lo  build/fq_nmod.lo  build/fq_nmod_vec.lo  build/fq_nmod_mat.lo  build/fq_nmod_poly.lo  build/fq_nmod_poly_factor.lo  build/fq_zech.lo  build/fq_zech_vec.lo  build/fq_zech_mat.lo  build/fq_zech_poly.lo  build/fq_zech_poly_factor.lo  -o libflint.so.13.5.2 -L/home/buildbot/slave/sage_git/build/local/lib -Wl,-rpath,/home/buildbot/slave/sage_git/build/local/lib  -L/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src -L/home/buildbot/slave/sage_git/build/local/lib -L/home/buildbot/slave/sage_git/build/local/lib -L/home/buildbot/slave/sage_git/build/local/lib -lmpfr -lgmp -lm -lntl -lpthread ; \
fi
make[7]: Entering directory '/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src'
g++ -fPIC  -I/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src -I/home/buildbot/slave/sage_git/build/local/include -I/home/buildbot/slave/sage_git/build/local/include -I/home/buildbot/slave/sage_git/build/local/include -c interfaces/NTL-interface.cpp -o build/interfaces/NTL-interface.lo
In file included from /usr/include/c++/4.9/type_traits:35:0,
                 from /home/buildbot/slave/sage_git/build/local/include/NTL/tools.h:25,
                 from /home/buildbot/slave/sage_git/build/local/include/NTL/ZZ.h:19,
                 from interfaces/NTL-interface.cpp:32:
/usr/include/c++/4.9/bits/c++0x_warning.h:32:2: error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options.
 #error This file requires compiler and library support for the \
  ^
In file included from /home/buildbot/slave/sage_git/build/local/include/NTL/ZZ.h:19:0,
                 from interfaces/NTL-interface.cpp:32:
/home/buildbot/slave/sage_git/build/local/include/NTL/tools.h:1075:1: error: 'constexpr' does not name a type
 constexpr bool Relocate_aux_has_trivial_copy(T*)
 ^
/home/buildbot/slave/sage_git/build/local/include/NTL/tools.h:1075:1: note: C++11 'constexpr' only available with -std=c++11 or -std=gnu++11
/home/buildbot/slave/sage_git/build/local/include/NTL/tools.h:1083:1: error: 'constexpr' does not name a type
 constexpr bool Relocate_aux_has_any_copy(T*)
```




---

archive/issue_comments_356229.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-11-24T13:30:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356229",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_356230.json:
```json
{
    "body": "Also, how about setting -std=c11 globally (like LDFLAGS rpath) instead of a per-package whackamole...",
    "created_at": "2018-11-24T13:41:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356230",
    "user": "https://github.com/vbraun"
}
```

Also, how about setting -std=c11 globally (like LDFLAGS rpath) instead of a per-package whackamole...



---

archive/issue_comments_356231.json:
```json
{
    "body": "Replying to [comment:52 vbraun]:\n> Also, how about setting -std=c11 globally (like LDFLAGS rpath) instead of a per-package whackamole...\n\nDo you mean `c++11` in `CXXFLAGS`? \n\nThere are packages (brial is one case) needing `-std=gnu++11`.\n\nBut yes, it appears now that the compilers must be told to enforce `c++11` globally,\notherwise some compilers default to something else.\n\nSo it seems it cannot be just added, it needs to be a overwriteable per package default in `CXXFLAGS`...",
    "created_at": "2018-11-24T16:27:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356231",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:52 vbraun]:
> Also, how about setting -std=c11 globally (like LDFLAGS rpath) instead of a per-package whackamole...

Do you mean `c++11` in `CXXFLAGS`? 

There are packages (brial is one case) needing `-std=gnu++11`.

But yes, it appears now that the compilers must be told to enforce `c++11` globally,
otherwise some compilers default to something else.

So it seems it cannot be just added, it needs to be a overwriteable per package default in `CXXFLAGS`...



---

archive/issue_comments_356232.json:
```json
{
    "body": "To be honest I should have seen that coming and I should have acted in #25532#comment:37 .\n\nNow for the idea to set std=c++11 globally by default. Well we have a variety of compilers out there defaulting to anything from pre-c++11 to c++14 and soon c++17. I don't think we should enforce going from c++14 to c++11 unless we have too. By the way brial compiles perfectly with gcc-8.2.0 which default to c++14 without having to add std=gnu++11.\n\nIn any case we can solve that at configure time with the appropriate macro (like brial does now) to check that the compiler support at least this standard and add the appropriate flag to CXXFLAGS if it doesn't.\n\nI would like to finish this ticket as is and I'll note that since #23341 is merged distro are free to upgrade ntl and we do. This ticket is just about keeping up.\n\nWe should have a follow up ticket about minimal c++11 support and clean up for 8.6 in my opinion. This would a major feature and I don't want to start it now.",
    "created_at": "2018-11-24T19:13:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356232",
    "user": "https://github.com/kiwifb"
}
```

To be honest I should have seen that coming and I should have acted in #25532#comment:37 .

Now for the idea to set std=c++11 globally by default. Well we have a variety of compilers out there defaulting to anything from pre-c++11 to c++14 and soon c++17. I don't think we should enforce going from c++14 to c++11 unless we have too. By the way brial compiles perfectly with gcc-8.2.0 which default to c++14 without having to add std=gnu++11.

In any case we can solve that at configure time with the appropriate macro (like brial does now) to check that the compiler support at least this standard and add the appropriate flag to CXXFLAGS if it doesn't.

I would like to finish this ticket as is and I'll note that since #23341 is merged distro are free to upgrade ntl and we do. This ticket is just about keeping up.

We should have a follow up ticket about minimal c++11 support and clean up for 8.6 in my opinion. This would a major feature and I don't want to start it now.



---

archive/issue_comments_356233.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-11-24T20:58:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356233",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356234.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2018-11-24T21:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356234",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_356235.json:
```json
{
    "body": "To be more precise, we already check for support for C++11 but we don't enforce it if it isn't the default.\n\nBack to positive review because I only made a trivial change.",
    "created_at": "2018-11-24T21:02:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356235",
    "user": "https://github.com/kiwifb"
}
```

To be more precise, we already check for support for C++11 but we don't enforce it if it isn't the default.

Back to positive review because I only made a trivial change.



---

archive/issue_comments_356236.json:
```json
{
    "body": "it is not kosher to mix CXXFLAGS with CFLAGS. there are CFLAGS which a C++ compiler won\u2019t take.",
    "created_at": "2018-11-24T21:44:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356236",
    "user": "https://github.com/dimpase"
}
```

it is not kosher to mix CXXFLAGS with CFLAGS. there are CFLAGS which a C++ compiler won’t take.



---

archive/issue_comments_356237.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2018-11-24T21:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356237",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_356238.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2018-11-24T21:46:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356238",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_356239.json:
```json
{
    "body": "Replying to [comment:57 dimpase]:\n> it is not kosher to mix CXXFLAGS with CFLAGS. there are CFLAGS which a C++ compiler won\u2019t take.\n> \n\nThank you for paying attention (very embarrassed).",
    "created_at": "2018-11-24T21:47:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356239",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:57 dimpase]:
> it is not kosher to mix CXXFLAGS with CFLAGS. there are CFLAGS which a C++ compiler won’t take.
> 

Thank you for paying attention (very embarrassed).



---

archive/issue_comments_356240.json:
```json
{
    "body": "NTL does depend on flint, but this is not reflected in `build/pkgs/ntl/dependencies`.\nShould we fix this here too?\n\nAlso, I imagine CXXFLAGS of mpir/gmp and gf2x need attention too.",
    "created_at": "2018-11-24T22:00:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356240",
    "user": "https://github.com/dimpase"
}
```

NTL does depend on flint, but this is not reflected in `build/pkgs/ntl/dependencies`.
Should we fix this here too?

Also, I imagine CXXFLAGS of mpir/gmp and gf2x need attention too.



---

archive/issue_comments_356241.json:
```json
{
    "body": "Replying to [comment:60 dimpase]:\n> NTL does depend on flint, but this is not reflected in `build/pkgs/ntl/dependencies`.\n> Should we fix this here too?\n> \n\nyou got that in reverse. flint depends on ntl, so if ntl uses c++11 so does the flint-ntl interface (there is a single C++ file in flint for this interface, the rest is all C).\n\n> Also, I imagine CXXFLAGS of mpir/gmp and gf2x need attention too.\n\nIt doesn't currently have any impact, there seem to be some forward compatibility. flint and sage would require backward compatibility.",
    "created_at": "2018-11-24T22:05:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356241",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:60 dimpase]:
> NTL does depend on flint, but this is not reflected in `build/pkgs/ntl/dependencies`.
> Should we fix this here too?
> 

you got that in reverse. flint depends on ntl, so if ntl uses c++11 so does the flint-ntl interface (there is a single C++ file in flint for this interface, the rest is all C).

> Also, I imagine CXXFLAGS of mpir/gmp and gf2x need attention too.

It doesn't currently have any impact, there seem to be some forward compatibility. flint and sage would require backward compatibility.



---

archive/issue_comments_356242.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-11-27T01:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356242",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_356243.json:
```json
{
    "body": "Didn't know that pushing to git makes the ticket go back to \"need review\". Nice behavior in fact.",
    "created_at": "2018-11-27T01:05:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356243",
    "user": "https://github.com/kiwifb"
}
```

Didn't know that pushing to git makes the ticket go back to "need review". Nice behavior in fact.



---

archive/issue_comments_356244.json:
```json
{
    "body": "I'm getting quite a lot of \n\n```\nchecking for NTL >= 5.0... not found\nconfigure: WARNING: Unable to find NTL (which is strongly recommended) on your machine: please use --with-ntl=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\n```\n\nin Singular. Fun fact: This does not make the build fail, but causes tons of test failures..\n\nFails on Ubuntu 14, 16, and Debian 8. Works on Ubuntu 18, Debian 9, OSX. Idependent of 32 vs. 64 bit.",
    "created_at": "2018-11-28T19:20:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356244",
    "user": "https://github.com/vbraun"
}
```

I'm getting quite a lot of 

```
checking for NTL >= 5.0... not found
configure: WARNING: Unable to find NTL (which is strongly recommended) on your machine: please use --with-ntl=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
```

in Singular. Fun fact: This does not make the build fail, but causes tons of test failures..

Fails on Ubuntu 14, 16, and Debian 8. Works on Ubuntu 18, Debian 9, OSX. Idependent of 32 vs. 64 bit.



---

archive/issue_comments_356245.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2018-11-28T19:20:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356245",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_356246.json:
```json
{
    "body": "Replying to [comment:63 vbraun]:\n> I'm getting quite a lot of \n> {{{\n> checking for NTL >= 5.0... not found\n> configure: WARNING: Unable to find NTL (which is strongly recommended) on your machine: please use --with-ntl=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)\n> }}}\n> in Singular. Fun fact: This does not make the build fail, but causes tons of test failures..\n> \n> Fails on Ubuntu 14, 16, and Debian 8. Works on Ubuntu 18, Debian 9, OSX. Idependent of 32 vs. 64 bit.\n\nRight. That means we would need to make `-std=c++11` pervasive in singular as well and possibly all other dependencies of ntl that are not already switching c++11 in configure. So I think we should postpone this until we enforce c++11 across the board. I thought it would be easy but it is turning in a whack-a-mole kind of thing.",
    "created_at": "2018-11-28T19:55:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356246",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:63 vbraun]:
> I'm getting quite a lot of 
> {{{
> checking for NTL >= 5.0... not found
> configure: WARNING: Unable to find NTL (which is strongly recommended) on your machine: please use --with-ntl=PATH_TO_DIR_CONTAINING_LIB_AND_INCLUDE (see also ./configure --help if you do not understand what we are talking about)
> }}}
> in Singular. Fun fact: This does not make the build fail, but causes tons of test failures..
> 
> Fails on Ubuntu 14, 16, and Debian 8. Works on Ubuntu 18, Debian 9, OSX. Idependent of 32 vs. 64 bit.

Right. That means we would need to make `-std=c++11` pervasive in singular as well and possibly all other dependencies of ntl that are not already switching c++11 in configure. So I think we should postpone this until we enforce c++11 across the board. I thought it would be easy but it is turning in a whack-a-mole kind of thing.



---

archive/issue_comments_356247.json:
```json
{
    "body": "Replying to [comment:64 fbissey]:\n\n> Right. That means we would need to make `-std=c++11` pervasive in singular as well and possibly all other dependencies of ntl that are not already switching c++11 in configure. So I think we should postpone this until we enforce c++11 across the board. I thought it would be easy but it is turning in a whack-a-mole kind of thing.\n\nSingular already does that itself in 4.1.1.p3",
    "created_at": "2018-11-28T20:05:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356247",
    "user": "https://github.com/antonio-rojas"
}
```

Replying to [comment:64 fbissey]:

> Right. That means we would need to make `-std=c++11` pervasive in singular as well and possibly all other dependencies of ntl that are not already switching c++11 in configure. So I think we should postpone this until we enforce c++11 across the board. I thought it would be easy but it is turning in a whack-a-mole kind of thing.

Singular already does that itself in 4.1.1.p3



---

archive/issue_comments_356248.json:
```json
{
    "body": "But we are stuck at 4.1.1.p2 here. Even if we finish the singular ticket, we may still have to look at giac which probably doesn't go c++11 by itself. eclib and linbox should be OK.",
    "created_at": "2018-11-28T20:09:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356248",
    "user": "https://github.com/kiwifb"
}
```

But we are stuck at 4.1.1.p2 here. Even if we finish the singular ticket, we may still have to look at giac which probably doesn't go c++11 by itself. eclib and linbox should be OK.



---

archive/issue_comments_356249.json:
```json
{
    "body": "Replying to [comment:66 fbissey]:\n> But we are stuck at 4.1.1.p2 here. Even if we finish the singular ticket, we may still have to look at giac which probably doesn't go c++11 by itself. eclib and linbox should be OK.\n\ngiac's upcoming version 1.5.0 should be compileable with c++11 - at least it does work with clang 6.0.1, which is quite picky, and I think enforces c++11 by default. See #26315.",
    "created_at": "2018-11-28T20:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356249",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:66 fbissey]:
> But we are stuck at 4.1.1.p2 here. Even if we finish the singular ticket, we may still have to look at giac which probably doesn't go c++11 by itself. eclib and linbox should be OK.

giac's upcoming version 1.5.0 should be compileable with c++11 - at least it does work with clang 6.0.1, which is quite picky, and I think enforces c++11 by default. See #26315.



---

archive/issue_comments_356250.json:
```json
{
    "body": "1.4.9.xx compiles with gcc-8.2.0 which is c++14 by default, but of course that doesn't mean clang-6.0.1 (also c++14 I think) won't throw a fit at it. But here I suspect that Volker would find in his logs that giac got configured without ntl on those machines which may or may not cause more failures.",
    "created_at": "2018-11-28T20:18:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356250",
    "user": "https://github.com/kiwifb"
}
```

1.4.9.xx compiles with gcc-8.2.0 which is c++14 by default, but of course that doesn't mean clang-6.0.1 (also c++14 I think) won't throw a fit at it. But here I suspect that Volker would find in his logs that giac got configured without ntl on those machines which may or may not cause more failures.



---

archive/issue_comments_356251.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2018-12-05T21:22:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356251",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356252.json:
```json
{
    "body": "Still depends on a good review of #26787 which needs a bit of testing on cygwin.",
    "created_at": "2018-12-05T21:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356252",
    "user": "https://github.com/kiwifb"
}
```

Still depends on a good review of #26787 which needs a bit of testing on cygwin.



---

archive/issue_comments_356253.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2018-12-05T21:24:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356253",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_356254.json:
```json
{
    "body": "Can somebody either make this not depend on #26787 or add an explanation to #26787?",
    "created_at": "2019-01-11T14:09:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356254",
    "user": "https://github.com/jdemeyer"
}
```

Can somebody either make this not depend on #26787 or add an explanation to #26787?



---

archive/issue_comments_356255.json:
```json
{
    "body": "making it independent of #26787 needs passing `std=c++11` in CXXFLAGS...",
    "created_at": "2019-01-11T14:50:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356255",
    "user": "https://github.com/dimpase"
}
```

making it independent of #26787 needs passing `std=c++11` in CXXFLAGS...



---

archive/issue_comments_356256.json:
```json
{
    "body": "Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.",
    "created_at": "2019-01-15T18:15:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356256",
    "user": "https://github.com/embray"
}
```

Retarging tickets optimistically to the next milestone.  If you are responsible for this ticket (either its reporter or owner) and don't believe you are likely to complete this ticket before the next release (8.7) please retarget this ticket's milestone to sage-pending or sage-wishlist.



---

archive/issue_comments_356257.json:
```json
{
    "body": "Forgot about this ticket. All the dependencies for this ticket have been cleared so it should go back to positive review.",
    "created_at": "2019-03-17T22:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356257",
    "user": "https://github.com/kiwifb"
}
```

Forgot about this ticket. All the dependencies for this ticket have been cleared so it should go back to positive review.



---

archive/issue_comments_356258.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-03-17T22:18:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356258",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_356259.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-03-24T09:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356259",
    "user": "https://github.com/vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_356260.json:
```json
{
    "body": "\n```\n/home/buildbot/slave/sage_git/build/local/include/NTL/vector.h:198:31: warning: unused variable 'do_BlockConstruct' [-Wunused-variable]\n { VecStrategy<NTL_RELOC_TAG>::do_BlockConstruct(p, n); }\n                               ^~~~~~~~~~~~~~~~~\nMakefile:275: recipe for target 'build/interfaces/NTL-interface.lo' failed\nmake[7]: *** [build/interfaces/NTL-interface.lo] Error 1\nmake[7]: Leaving directory '/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src'\ng++: error: build/interfaces/NTL-interface.lo: No such file or directory\nMakefile:143: recipe for target 'libflint.so.13.5.2' failed\nmake[6]: *** [libflint.so.13.5.2] Error 1\n```\n",
    "created_at": "2019-03-24T09:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356260",
    "user": "https://github.com/vbraun"
}
```


```
/home/buildbot/slave/sage_git/build/local/include/NTL/vector.h:198:31: warning: unused variable 'do_BlockConstruct' [-Wunused-variable]
 { VecStrategy<NTL_RELOC_TAG>::do_BlockConstruct(p, n); }
                               ^~~~~~~~~~~~~~~~~
Makefile:275: recipe for target 'build/interfaces/NTL-interface.lo' failed
make[7]: *** [build/interfaces/NTL-interface.lo] Error 1
make[7]: Leaving directory '/home/buildbot/slave/sage_git/build/local/var/tmp/sage/build/flint-2.5.2.p3/src'
g++: error: build/interfaces/NTL-interface.lo: No such file or directory
Makefile:143: recipe for target 'libflint.so.13.5.2' failed
make[6]: *** [libflint.so.13.5.2] Error 1
```




---

archive/issue_comments_356261.json:
```json
{
    "body": "More details please! Version of gcc involved and possibly distro, more logs from flint too. Because this a package upgrade we don't see anything on the patchbot :(",
    "created_at": "2019-03-24T09:45:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356261",
    "user": "https://github.com/kiwifb"
}
```

More details please! Version of gcc involved and possibly distro, more logs from flint too. Because this a package upgrade we don't see anything on the patchbot :(



---

archive/issue_comments_356262.json:
```json
{
    "body": "OK found the issue. We don't pass any `CFLAGS` or `CXXFLAGS` to flint so the default are used. By default, `-ansi` is added to both `CFLAGS` and `CXXFLAGS`. For C is sets the standard to C99 and for C++, to c++98. Frankly I think we should just remove `-ansi` in both case. And since by default `CXXFLAGS` is copied from `CFLAGS`, that should be easy to do in one single change.\n\nAnd distros don't choke on this because we usually provide some compilation flags.",
    "created_at": "2019-03-24T23:01:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356262",
    "user": "https://github.com/kiwifb"
}
```

OK found the issue. We don't pass any `CFLAGS` or `CXXFLAGS` to flint so the default are used. By default, `-ansi` is added to both `CFLAGS` and `CXXFLAGS`. For C is sets the standard to C99 and for C++, to c++98. Frankly I think we should just remove `-ansi` in both case. And since by default `CXXFLAGS` is copied from `CFLAGS`, that should be easy to do in one single change.

And distros don't choke on this because we usually provide some compilation flags.



---

archive/issue_comments_356263.json:
```json
{
    "body": "Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)",
    "created_at": "2019-03-25T10:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356263",
    "user": "https://github.com/embray"
}
```

Ticket retargeted after milestone closed (if you don't believe this ticket is appropriate for the Sage 8.8 release please retarget manually)



---

archive/issue_comments_356264.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2019-04-01T01:38:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356264",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_356265.json:
```json
{
    "body": "flint issue is now fixed, please review.\n----\nNew commits:",
    "created_at": "2019-04-01T01:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356265",
    "user": "https://github.com/kiwifb"
}
```

flint issue is now fixed, please review.
----
New commits:



---

archive/issue_comments_356266.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-01T01:43:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356266",
    "user": "https://github.com/kiwifb"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_356267.json:
```json
{
    "body": "I am kicking this back to the patchbots for final testing as this works on my machine.",
    "created_at": "2019-04-04T02:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356267",
    "user": "https://github.com/tscrim"
}
```

I am kicking this back to the patchbots for final testing as this works on my machine.



---

archive/issue_comments_356268.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-04T02:25:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356268",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_356269.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2019-04-04T14:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356269",
    "user": "https://github.com/embray"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_356270.json:
```json
{
    "body": "Please give me a chance to test this on Cygwin.",
    "created_at": "2019-04-04T14:35:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356270",
    "user": "https://github.com/embray"
}
```

Please give me a chance to test this on Cygwin.



---

archive/issue_comments_356271.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2019-04-04T14:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356271",
    "user": "https://github.com/embray"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_356272.json:
```json
{
    "body": "Set assignee to @embray.",
    "created_at": "2019-04-04T14:35:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356272",
    "user": "https://github.com/embray"
}
```

Set assignee to @embray.



---

archive/issue_comments_356273.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2019-04-04T17:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356273",
    "user": "https://github.com/embray"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_356274.json:
```json
{
    "body": "Alright, I think this is probably fine.  I haven't run the full test suite yet, but it looks good based on an informed subset.  If I notice anything after running the full tests I'll create a follow-up.  Thank you for waiting.",
    "created_at": "2019-04-04T17:56:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356274",
    "user": "https://github.com/embray"
}
```

Alright, I think this is probably fine.  I haven't run the full test suite yet, but it looks good based on an informed subset.  If I notice anything after running the full tests I'll create a follow-up.  Thank you for waiting.



---

archive/issue_comments_356275.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2019-04-07T15:15:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356275",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_356276.json:
```json
{
    "body": "how do I change `-std=gnu++11` to `c++11` for NTL? It seems that #27212#comment:112 is related to this.\nIndeed, if I instead use NTL built with `c++11` at https://github.com/Homebrew/homebrew-core/blob/master/Formula/ntl.rb then everything works.",
    "created_at": "2019-04-18T11:02:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356276",
    "user": "https://github.com/dimpase"
}
```

how do I change `-std=gnu++11` to `c++11` for NTL? It seems that #27212#comment:112 is related to this.
Indeed, if I instead use NTL built with `c++11` at https://github.com/Homebrew/homebrew-core/blob/master/Formula/ntl.rb then everything works.



---

archive/issue_comments_356277.json:
```json
{
    "body": "I don't particularly like the fact that the macro for C++ standard looks for gnu++11 before c++11 but that's what it is. You can just add `-std=c++11` to `CXXFLAGS` on OS X in spkg-install. That should work. There are work around of the sort for cygwin already in fplll if my memory serves me right.",
    "created_at": "2019-04-18T11:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356277",
    "user": "https://github.com/kiwifb"
}
```

I don't particularly like the fact that the macro for C++ standard looks for gnu++11 before c++11 but that's what it is. You can just add `-std=c++11` to `CXXFLAGS` on OS X in spkg-install. That should work. There are work around of the sort for cygwin already in fplll if my memory serves me right.



---

archive/issue_comments_356278.json:
```json
{
    "body": "Replying to [comment:89 fbissey]:\n> I don't particularly like the fact that the macro for C++ standard looks for gnu++11 before c++11 but that's what it is. You can just add `-std=c++11` to `CXXFLAGS` on OS X in spkg-install. That should work. There are work around of the sort for cygwin already in fplll if my memory serves me right.\n\nno, this does not work. Which packages do need gnu++11 rather than c++11? I am trying now to set c++11 on Darwin globally, IIRC it used to work.",
    "created_at": "2019-04-18T15:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356278",
    "user": "https://github.com/dimpase"
}
```

Replying to [comment:89 fbissey]:
> I don't particularly like the fact that the macro for C++ standard looks for gnu++11 before c++11 but that's what it is. You can just add `-std=c++11` to `CXXFLAGS` on OS X in spkg-install. That should work. There are work around of the sort for cygwin already in fplll if my memory serves me right.

no, this does not work. Which packages do need gnu++11 rather than c++11? I am trying now to set c++11 on Darwin globally, IIRC it used to work.



---

archive/issue_comments_356279.json:
```json
{
    "body": "OK to set up things globally you may want to go back to the macro setting c++11/gnu++11 as the standard at https://github.com/sagemath/sage/blob/develop/build/pkgs/gcc/spkg-configure.m4#L97 and follow the model of fplll that asks specifically for c++11 https://github.com/fplll/fplll/blob/master/configure.ac#L56 (but do not make it mandatory).\n\nFrom what I see, it would be a good idea to update the macro `/ax_cxx_compile_stdcxx` as there is a recent fix for clang. \n\nNow the question is whether you want to try c++11 instead as the general default or just for OS X. My understanding is that cygwin works better with gnu++11.",
    "created_at": "2019-04-18T20:37:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356279",
    "user": "https://github.com/kiwifb"
}
```

OK to set up things globally you may want to go back to the macro setting c++11/gnu++11 as the standard at https://github.com/sagemath/sage/blob/develop/build/pkgs/gcc/spkg-configure.m4#L97 and follow the model of fplll that asks specifically for c++11 https://github.com/fplll/fplll/blob/master/configure.ac#L56 (but do not make it mandatory).

From what I see, it would be a good idea to update the macro `/ax_cxx_compile_stdcxx` as there is a recent fix for clang. 

Now the question is whether you want to try c++11 instead as the general default or just for OS X. My understanding is that cygwin works better with gnu++11.



---

archive/issue_comments_356280.json:
```json
{
    "body": "Replying to [comment:91 fbissey]:\n> OK to set up things globally you may want to go back to the macro setting c++11/gnu++11 as the standard at https://github.com/sagemath/sage/blob/develop/build/pkgs/gcc/spkg-configure.m4#L97 and follow the model of fplll that asks specifically for c++11 https://github.com/fplll/fplll/blob/master/configure.ac#L56 (but do not make it mandatory).\n> \n> From what I see, it would be a good idea to update the macro `/ax_cxx_compile_stdcxx` as there is a recent fix for clang. \n> \n> Now the question is whether you want to try c++11 instead as the general default or just for OS X. My understanding is that cygwin works better with gnu++11.\n\nRoughly speaking, as I understand it, the reason `-std=gnu++11` is sometimes required on Cygwin is related to the fact that Cygwin's built-in libc is not glibc but rather Cygnus/Redhat's [newlib](https://en.wikipedia.org/wiki/Newlib).  newlib supports most/all the usual GNU extensions but it is quite strict about requiring them to be explicitly enabled; otherwise you just get pure POSIX.\n\nI have no idea what the problem is on macOS, but presumably there's something that is enabled in NTL when using `-std=gnu++11` but it's probably something subtle.",
    "created_at": "2019-04-19T14:11:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356280",
    "user": "https://github.com/embray"
}
```

Replying to [comment:91 fbissey]:
> OK to set up things globally you may want to go back to the macro setting c++11/gnu++11 as the standard at https://github.com/sagemath/sage/blob/develop/build/pkgs/gcc/spkg-configure.m4#L97 and follow the model of fplll that asks specifically for c++11 https://github.com/fplll/fplll/blob/master/configure.ac#L56 (but do not make it mandatory).
> 
> From what I see, it would be a good idea to update the macro `/ax_cxx_compile_stdcxx` as there is a recent fix for clang. 
> 
> Now the question is whether you want to try c++11 instead as the general default or just for OS X. My understanding is that cygwin works better with gnu++11.

Roughly speaking, as I understand it, the reason `-std=gnu++11` is sometimes required on Cygwin is related to the fact that Cygwin's built-in libc is not glibc but rather Cygnus/Redhat's [newlib](https://en.wikipedia.org/wiki/Newlib).  newlib supports most/all the usual GNU extensions but it is quite strict about requiring them to be explicitly enabled; otherwise you just get pure POSIX.

I have no idea what the problem is on macOS, but presumably there's something that is enabled in NTL when using `-std=gnu++11` but it's probably something subtle.



---

archive/issue_comments_356281.json:
```json
{
    "body": "It turns out to be a red herring.\n\nHowever, one thing I noticed that for fplll there is setting of `-std=gnu++11` for Cygwin, whereas it's already set globally...",
    "created_at": "2019-04-19T15:33:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356281",
    "user": "https://github.com/dimpase"
}
```

It turns out to be a red herring.

However, one thing I noticed that for fplll there is setting of `-std=gnu++11` for Cygwin, whereas it's already set globally...



---

archive/issue_comments_356282.json:
```json
{
    "body": "Replying to [comment:94 dimpase]:\n> It turns out to be a red herring.\n> \n> However, one thing I noticed that for fplll there is setting of `-std=gnu++11` for Cygwin, whereas it's already set globally... \n\nThis is on purpose. Before I enabled c++11/gnu++11 globally, it was already in place. The reason is that fplll's configure script requires a strict c++11 compiler as noted above. But cygwin needs a gnu++11 one to compile fplll. So we need to override fplll's decision on cygwin. Don't go removing it.",
    "created_at": "2019-04-19T22:18:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/25295",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/25295#issuecomment-356282",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:94 dimpase]:
> It turns out to be a red herring.
> 
> However, one thing I noticed that for fplll there is setting of `-std=gnu++11` for Cygwin, whereas it's already set globally... 

This is on purpose. Before I enabled c++11/gnu++11 globally, it was already in place. The reason is that fplll's configure script requires a strict c++11 compiler as noted above. But cygwin needs a gnu++11 one to compile fplll. So we need to override fplll's decision on cygwin. Don't go removing it.
