# Issue 14677: Some symmetric group algebra modifications

archive/issues_014677.json:
```json
{
    "body": "Assignee: tbd\n\nCC:  sage-combinat tscrim mhansen\n\nKeywords: permutations, symmetric group algebra, combinat,\n\nThe patch as it stands does the following:\n\n1) Allows k = 1 in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases.\n\n2) The ``algebra_generators()`` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.\n\n3) The ``cpi`` method should now be a lot faster (checked on S_6 and [3,2,1], where the speedup factor was more than 2).\n\nAll changes are in ``symmetric_group_algebra.py``; I have not touched ``permutation.py`` due to Travis' patch.\n\nThis one is probably not yet ripe for review, as I am planning some more work. Originally I was looking over the file to find methods for the two factors of the Young symmetrizer (one is the sum of all row-preserving permutations, and the other is the alternating sum of all column-preserving permutations). Seeing that these methods aren't there, I am planning to implement them on my own, but I need two things sorted out beforehand:\n\nFirst, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or to ``partition.py`` (given that their input is a partition)?\n\nSecond, I have only now noticed that *Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default*! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else (I certainly did when I was messing around with Malvenuto-Reutenauer). I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.\n\nWhen I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...\n\nIssue created by migration from https://trac.sagemath.org/ticket/14881\n\n",
    "created_at": "2013-07-12T12:58:53Z",
    "labels": [
        "PLEASE CHANGE",
        "major",
        "PLEASE CHANGE"
    ],
    "title": "Some symmetric group algebra modifications",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/14677",
    "user": "darij"
}
```
Assignee: tbd

CC:  sage-combinat tscrim mhansen

Keywords: permutations, symmetric group algebra, combinat,

The patch as it stands does the following:

1) Allows k = 1 in the construction of the k-th Jucys-Murphy element in both the symmetric group algebra and the Hecke algebra. There is no theoretical reason not to. They're not very interesting elements, but algorithms shouldn't mysteriously fail in corner cases.

2) The ``algebra_generators()`` method on a symmetric group algebra with n being 0 or 1 doesn't throw an error anymore.

3) The ``cpi`` method should now be a lot faster (checked on S_6 and [3,2,1], where the speedup factor was more than 2).

All changes are in ``symmetric_group_algebra.py``; I have not touched ``permutation.py`` due to Travis' patch.

This one is probably not yet ripe for review, as I am planning some more work. Originally I was looking over the file to find methods for the two factors of the Young symmetrizer (one is the sum of all row-preserving permutations, and the other is the alternating sum of all column-preserving permutations). Seeing that these methods aren't there, I am planning to implement them on my own, but I need two things sorted out beforehand:

First, should they go into ``symmetric_group_algebra.py`` (given that the elements they construct belong to symmetric group algebras) or to ``partition.py`` (given that their input is a partition)?

Second, I have only now noticed that *Sage is using Herstein's idiotic left-to-right convention for the product of permutations as default*! I think the only reason why I have missed this so far is that I haven't been multiplying permutations very often in the first place. That said, I'm not sure about this, and I feel sorry for the conjectures I have been discarding because I thought I was able to produce counterexamples with Sage. Can we do anything about this clusterfuck or at least document it in such a way that it can't be missed? I will open another ticket for this issue once I've done a quick search to see where these multiplications are being used; I wouldn't be surprised if there are bugs lurking in the code just because people expected that Sage would use the same conventions as everyone else (I certainly did when I was messing around with Malvenuto-Reutenauer). I know about GAP, but part of the reason I've been using Sage is to not have to put up with crappy syntax.

When I grep for ``PermutationOptions`` and ``permutation_options``, I only get hits from ``permutation.py`` and ``symmetric_group_algebra.py``, which suggests that all other files are either oblivious to the semantics of a product of permutations depending on a global variable, or they just work around this product method. I'm hoping it's the latter...

Issue created by migration from https://trac.sagemath.org/ticket/14881





---

archive/issue_comments_186854.json:
```json
{
    "body": "Attachment",
    "created_at": "2013-07-12T12:59:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186854",
    "user": "darij"
}
```

Attachment



---

archive/issue_comments_186855.json:
```json
{
    "body": "Changing assignee from tbd to sage-combinat.",
    "created_at": "2013-07-12T12:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186855",
    "user": "darij"
}
```

Changing assignee from tbd to sage-combinat.



---

archive/issue_comments_186856.json:
```json
{
    "body": "Changing component from PLEASE CHANGE to combinatorics.",
    "created_at": "2013-07-12T12:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186856",
    "user": "darij"
}
```

Changing component from PLEASE CHANGE to combinatorics.



---

archive/issue_comments_186857.json:
```json
{
    "body": "Changing type from PLEASE CHANGE to defect.",
    "created_at": "2013-07-12T12:59:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186857",
    "user": "darij"
}
```

Changing type from PLEASE CHANGE to defect.



---

archive/issue_comments_186858.json:
```json
{
    "body": "For the multiplication, you can at present set the permutation options (if you look in the `permutation.py`, it's in there, I forget how its accessed). However with #14772, this will be a global option accessible by\n\n```\nPermutations.global_options(mult='r2l') # or 'l2r'\n```\n\nIf the global options in #14772 (which needs another review) isn't well documented enough, I can add some more documentation on it.\n\nI'd recommend starting to work based on #14772 which should be good to go now, if you want to work on permutations. Its dependency #14519 is basically done too, and I'll ask Nicolas to re-review it if he doesn't do so in a few days.\n\nBest,\n\nTravis",
    "created_at": "2013-07-12T13:48:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186858",
    "user": "tscrim"
}
```

For the multiplication, you can at present set the permutation options (if you look in the `permutation.py`, it's in there, I forget how its accessed). However with #14772, this will be a global option accessible by

```
Permutations.global_options(mult='r2l') # or 'l2r'
```

If the global options in #14772 (which needs another review) isn't well documented enough, I can add some more documentation on it.

I'd recommend starting to work based on #14772 which should be good to go now, if you want to work on permutations. Its dependency #14519 is basically done too, and I'll ask Nicolas to re-review it if he doesn't do so in a few days.

Best,

Travis



---

archive/issue_comments_186859.json:
```json
{
    "body": "Travis -- thank you for reminding me of #14772 (which happened to fix another problem I reported today). I'll rebase my patch atop yours in a couple minutes.\n\nThanks for cleaning up the global options, but I fear I still don't like them. This isn't the right ticket for me to rant about them; I'll open a new one today.",
    "created_at": "2013-07-12T14:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186859",
    "user": "darij"
}
```

Travis -- thank you for reminding me of #14772 (which happened to fix another problem I reported today). I'll rebase my patch atop yours in a couple minutes.

Thanks for cleaning up the global options, but I fear I still don't like them. This isn't the right ticket for me to rant about them; I'll open a new one today.



---

archive/issue_comments_186860.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-07-13T13:29:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186860",
    "user": "darij"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_186861.json:
```json
{
    "body": "for the patchbot:\n\napply trac_14881-symmetric_group_algebra_rebased-dg.patch",
    "created_at": "2013-07-13T13:31:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186861",
    "user": "darij"
}
```

for the patchbot:

apply trac_14881-symmetric_group_algebra_rebased-dg.patch



---

archive/issue_comments_186862.json:
```json
{
    "body": "Sorry, one final update. I've slightly changed my own fix for Jucys-Murphy in the Hecke algebra, and modernized all errors.",
    "created_at": "2013-07-13T19:42:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186862",
    "user": "darij"
}
```

Sorry, one final update. I've slightly changed my own fix for Jucys-Murphy in the Hecke algebra, and modernized all errors.



---

archive/issue_comments_186863.json:
```json
{
    "body": "Hey Darij,\n\nI'm starting to take a look at this patch. A question, are the names `a` and `b` standard, in particular, do you have at least 2 references (to show that it is a standard notation)? If they aren't standard, could you rename them? The function names otherwise are not very descriptive. Also could you also remove the commented out lines 292-295?\n\nThanks,\n\nTravis\n\nPS - Sorry for falling behind on this.",
    "created_at": "2013-08-03T11:49:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186863",
    "user": "tscrim"
}
```

Hey Darij,

I'm starting to take a look at this patch. A question, are the names `a` and `b` standard, in particular, do you have at least 2 references (to show that it is a standard notation)? If they aren't standard, could you rename them? The function names otherwise are not very descriptive. Also could you also remove the commented out lines 292-295?

Thanks,

Travis

PS - Sorry for falling behind on this.



---

archive/issue_comments_186864.json:
```json
{
    "body": "Hi Travis,\n\nI've got the `a` and `b` names from \u00a74.12 of Pavel Etingof et al.'s representation theory notes ( http://www-math.mit.edu/~etingof/replect.pdf ). They also appear in http://en.wikipedia.org/wiki/Young_symmetrizer and in \u00a74.1 of Fulton-Harris (not a good reference if you ask me). Ironically, it seems that most of the deeper-going texts on representations of S_n (James, James-Kerber, Sagan) avoid Young symmetrizers completely, so it's hard to tell what is standard.\n\nI'll make the changes you've asked for in a moment.\n\nBest regards,\nDarij",
    "created_at": "2013-08-03T12:01:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186864",
    "user": "darij"
}
```

Hi Travis,

I've got the `a` and `b` names from §4.12 of Pavel Etingof et al.'s representation theory notes ( http://www-math.mit.edu/~etingof/replect.pdf ). They also appear in http://en.wikipedia.org/wiki/Young_symmetrizer and in §4.1 of Fulton-Harris (not a good reference if you ask me). Ironically, it seems that most of the deeper-going texts on representations of S_n (James, James-Kerber, Sagan) avoid Young symmetrizers completely, so it's hard to tell what is standard.

I'll make the changes you've asked for in a moment.

Best regards,
Darij



---

archive/issue_comments_186865.json:
```json
{
    "body": "Ah okay. Then `a` and `b` are fine. I'll finish the review as soon as I'm able to, but I won't be able to look at it until at least 2 days from now (I'm traveling back from South Korea tomorrow morning [it's 9:15 PM if you're curious] to the US) so there's no rush.\n\nThanks,\n\nTravis",
    "created_at": "2013-08-03T12:14:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186865",
    "user": "tscrim"
}
```

Ah okay. Then `a` and `b` are fine. I'll finish the review as soon as I'm able to, but I won't be able to look at it until at least 2 days from now (I'm traveling back from South Korea tomorrow morning [it's 9:15 PM if you're curious] to the US) so there's no rush.

Thanks,

Travis



---

archive/issue_comments_186866.json:
```json
{
    "body": "Updated; please review!",
    "created_at": "2013-08-03T12:14:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186866",
    "user": "darij"
}
```

Updated; please review!



---

archive/issue_comments_186867.json:
```json
{
    "body": "Attachment\n\nAdded the Etingof reference; removed the commented-out old code.",
    "created_at": "2013-08-03T12:15:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186867",
    "user": "darij"
}
```

Attachment

Added the Etingof reference; removed the commented-out old code.



---

archive/issue_comments_186868.json:
```json
{
    "body": "Hey Darij,\n\nHere's a small review patch which makes some minor tweaks to the doc and removes two asserts used for input checking. If you're happy with my changes, you can go ahead and set this to positive review.\n\nBest,\n\nTravis\n\nFor patchbot:\n\nApply: trac_14881-symmetric_group_algebra_rebased-dg.patch trac_14881-review-ts.patch",
    "created_at": "2013-08-08T19:10:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186868",
    "user": "tscrim"
}
```

Hey Darij,

Here's a small review patch which makes some minor tweaks to the doc and removes two asserts used for input checking. If you're happy with my changes, you can go ahead and set this to positive review.

Best,

Travis

For patchbot:

Apply: trac_14881-symmetric_group_algebra_rebased-dg.patch trac_14881-review-ts.patch



---

archive/issue_comments_186869.json:
```json
{
    "body": "Thank you! Only issue now is that \"orders\" should be \"order\" in\n\n```\n         - ``other`` -- a symmetric group algebra with orders `p` \n```\n\n\nNice syntax for the error messages; I didn't know of it.\n\nPlease set to positive-review once you've fixed the typo.",
    "created_at": "2013-08-08T19:13:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186869",
    "user": "darij"
}
```

Thank you! Only issue now is that "orders" should be "order" in

```
         - ``other`` -- a symmetric group algebra with orders `p` 
```


Nice syntax for the error messages; I didn't know of it.

Please set to positive-review once you've fixed the typo.



---

archive/issue_comments_186870.json:
```json
{
    "body": "Attachment\n\nIt's the (new) python 2.6+ string formatting and will be replacing the `%` at some point in the near python future (in python 3 it is strongly suggested to not use the `%`).\n\nFor patchbot:\n\nApply: trac_14881-symmetric_group_algebra_rebased-dg.patch, trac_14881-review-ts.patch",
    "created_at": "2013-08-09T21:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186870",
    "user": "tscrim"
}
```

Attachment

It's the (new) python 2.6+ string formatting and will be replacing the `%` at some point in the near python future (in python 3 it is strongly suggested to not use the `%`).

For patchbot:

Apply: trac_14881-symmetric_group_algebra_rebased-dg.patch, trac_14881-review-ts.patch



---

archive/issue_comments_186871.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-08-09T21:04:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186871",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_186872.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2013-09-02T10:19:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/14677",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/14677#issuecomment-186872",
    "user": "jdemeyer"
}
```

Resolution: fixed
