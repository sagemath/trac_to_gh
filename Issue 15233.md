# Issue 15233: reduce() on QQ(x) doesn't know how to factor out integers

archive/issues_015233.json:
```json
{
    "body": "CC:  @williamstein @burcin spancratz jakobkroeker\n\nKeywords: fraction field, rational functions, reduce\n\n\n```\nsage: Qx = PolynomialRing(QQ, 'x').fraction_field()\nsage: x = Qx.gen()\nsage: s = (2*(x+1)) / (2*(x+2))\nsage: s\n(2*x + 2)/(2*x + 4)\nsage: s.reduce()\nsage: s\n(2*x + 2)/(2*x + 4)\nsage: \n```\n\n\nSame behavior for multivariate rational functions. Note, however, that it reduces the integers if the fraction is a constant:\n\n\n```\nsage: s = (2*(x+1)) / (2*(x+1))\nsage: s\n1\n```\n\n\nI don't know if it's a bug strictly speaking (the result returned isn't false, and it compares equal with the cancelled version), but it's a major annoyance to me because seeing this behaviour I'm no longer sure if I can trust Sage to cancel out nonconstant polynomials reliably.\n\nIssue created by migration from https://trac.sagemath.org/ticket/15470\n\n",
    "created_at": "2013-11-29T20:31:26Z",
    "labels": [
        "component: algebra",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.4",
    "title": "reduce() on QQ(x) doesn't know how to factor out integers",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/15233",
    "user": "https://github.com/darijgr"
}
```
CC:  @williamstein @burcin spancratz jakobkroeker

Keywords: fraction field, rational functions, reduce


```
sage: Qx = PolynomialRing(QQ, 'x').fraction_field()
sage: x = Qx.gen()
sage: s = (2*(x+1)) / (2*(x+2))
sage: s
(2*x + 2)/(2*x + 4)
sage: s.reduce()
sage: s
(2*x + 2)/(2*x + 4)
sage: 
```


Same behavior for multivariate rational functions. Note, however, that it reduces the integers if the fraction is a constant:


```
sage: s = (2*(x+1)) / (2*(x+1))
sage: s
1
```


I don't know if it's a bug strictly speaking (the result returned isn't false, and it compares equal with the cancelled version), but it's a major annoyance to me because seeing this behaviour I'm no longer sure if I can trust Sage to cancel out nonconstant polynomials reliably.

Issue created by migration from https://trac.sagemath.org/ticket/15470





---

archive/issue_comments_195535.json:
```json
{
    "body": "I remember somebody once suggesting a `_reduce_projective()` method (or whatever you want to call it) on a ring which would take any tuple `(a_1, ..., a_n)` and return a \"simplified\" tuple `(u a_1, ..., u a_n)` for a suitable invertible element `u`. I think that's how this should be implemented.",
    "created_at": "2013-12-10T08:49:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15233#issuecomment-195535",
    "user": "https://github.com/jdemeyer"
}
```

I remember somebody once suggesting a `_reduce_projective()` method (or whatever you want to call it) on a ring which would take any tuple `(a_1, ..., a_n)` and return a "simplified" tuple `(u a_1, ..., u a_n)` for a suitable invertible element `u`. I think that's how this should be implemented.



---

archive/issue_comments_195536.json:
```json
{
    "body": "This problem does not exist in the version as it stands in the developement branch. \n\nas per my command line: \n\n\n`sage: Qx = PolynomialRing(QQ, 'x').fraction_field()`\n\n`sage: x = Qx.gen()`\n\n`sage: s = (2*x + 2) / (2*x + 4)`\n\n`sage: s`\n\n`(x + 1)/(x + 2)`\n\n\n\nI suppose this ticket can be closed.",
    "created_at": "2022-01-11T17:51:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15233#issuecomment-195536",
    "user": "https://github.com/shashwat1002"
}
```

This problem does not exist in the version as it stands in the developement branch. 

as per my command line: 


`sage: Qx = PolynomialRing(QQ, 'x').fraction_field()`

`sage: x = Qx.gen()`

`sage: s = (2*x + 2) / (2*x + 4)`

`sage: s`

`(x + 1)/(x + 2)`



I suppose this ticket can be closed.



---

archive/issue_comments_195537.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2022-01-11T17:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15233#issuecomment-195537",
    "user": "https://github.com/shashwat1002"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_195538.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2022-01-11T17:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15233#issuecomment-195538",
    "user": "https://github.com/darijgr"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_195539.json:
```json
{
    "body": "Still happening in multiple variables...",
    "created_at": "2022-01-11T17:59:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/15233",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/15233#issuecomment-195539",
    "user": "https://github.com/darijgr"
}
```

Still happening in multiple variables...
