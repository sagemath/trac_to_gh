# Issue 10869: Calling point on an iterator of 3d points raises an AttributeError

archive/issues_010869.json:
```json
{
    "body": "Assignee: jason, was\n\nCC:  kcrisman\n\nDrawing a list of 2d and 3d points works :\n\n\n```\nsage: point([(i,i) for i in range(10)])\nsage: point([(i,i,i) for i in range(10)])\n```\n\n\nDrawing an iterator of 2d points works :\n\n\n```\nsage: point((i,i) for i in range(10))\n```\n\n\nDrawing an iterator of 3d points is broken :\n\n\n```\nsage: point((i,i,i) for i in range(10))\nTraceback (most recent call last):\n...\nAttributeError: 'int' object has no attribute '_set_extra_kwds'\n```\n\n\nThe same bug is obtained for empty iterator :\n\n\n```\nsage: point([])\nsage: point(iter([]))\nTraceback (most recent call last):\n...\nAttributeError: 'int' object has no attribute '_set_extra_kwds'\n```\n\n\nMoreover, I wonder if the line 1022 of sage/plot/plot3d/shapes2.pyc in\npoint3d(v, size, **kwds)\n\n\n```\nA = sum([Point(z, size, **kwds) for z in v])\n```\n\n\nshould be\n\n\n```\nA = sum([Point(z, size, **kwds) for z in v], Graphics())\n```\n\n\nor something?\n\nIssue created by migration from https://trac.sagemath.org/ticket/10948\n\n",
    "created_at": "2011-03-16T16:25:06Z",
    "labels": [
        "graphics",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "Calling point on an iterator of 3d points raises an AttributeError",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10869",
    "user": "slabbe"
}
```
Assignee: jason, was

CC:  kcrisman

Drawing a list of 2d and 3d points works :


```
sage: point([(i,i) for i in range(10)])
sage: point([(i,i,i) for i in range(10)])
```


Drawing an iterator of 2d points works :


```
sage: point((i,i) for i in range(10))
```


Drawing an iterator of 3d points is broken :


```
sage: point((i,i,i) for i in range(10))
Traceback (most recent call last):
...
AttributeError: 'int' object has no attribute '_set_extra_kwds'
```


The same bug is obtained for empty iterator :


```
sage: point([])
sage: point(iter([]))
Traceback (most recent call last):
...
AttributeError: 'int' object has no attribute '_set_extra_kwds'
```


Moreover, I wonder if the line 1022 of sage/plot/plot3d/shapes2.pyc in
point3d(v, size, **kwds)


```
A = sum([Point(z, size, **kwds) for z in v])
```


should be


```
A = sum([Point(z, size, **kwds) for z in v], Graphics())
```


or something?

Issue created by migration from https://trac.sagemath.org/ticket/10948





---

archive/issue_comments_115434.json:
```json
{
    "body": "Attachment [trac_10948_point3d-sl.patch](tarball://root/attachments/some-uuid/ticket10948/trac_10948_point3d-sl.patch) by kcrisman created at 2011-06-03 19:03:16\n\nSee also #11426.",
    "created_at": "2011-06-03T19:03:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115434",
    "user": "kcrisman"
}
```

Attachment [trac_10948_point3d-sl.patch](tarball://root/attachments/some-uuid/ticket10948/trac_10948_point3d-sl.patch) by kcrisman created at 2011-06-03 19:03:16

See also #11426.



---

archive/issue_comments_115435.json:
```json
{
    "body": "I think I left this ticket as \"new\" because I was not sure about my fix. My question was : Is it necessary to expand the iterator as a list to fix it?\n\nThe problem was that in the function ``point``, trying ``point2d`` on the iterator consumes it. Maybe ``point2d`` could do a copy of the iterator with ``itertools.tee`` before consuming it? I think such a fix would be better. What do you think?\n\nS\u00e9bastien",
    "created_at": "2011-06-08T14:06:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115435",
    "user": "slabbe"
}
```

I think I left this ticket as "new" because I was not sure about my fix. My question was : Is it necessary to expand the iterator as a list to fix it?

The problem was that in the function ``point``, trying ``point2d`` on the iterator consumes it. Maybe ``point2d`` could do a copy of the iterator with ``itertools.tee`` before consuming it? I think such a fix would be better. What do you think?

SÃ©bastien



---

archive/issue_comments_115436.json:
```json
{
    "body": "Hmm, that is very subtle!  \n\n```\n\nsage: A = ((i,i) for i in range(10))\nsage: type(A)\n<type 'generator'>\nsage: point(A)\n<plots nicely>\nsage: A.next()\n--------------------------------------------------------------------\nStopIteration: \n```\n\nYeah, that's not a bad idea.  Usually people wouldn't do this, but I can certainly see it happening.\n\nOn the other hand, if it slows the process of getting this fix in, we should probably open a different ticket for that.\n\nSo it's up to you.  If you feel motivated to add this right now, then do it and the whole thing can be reviewed.  Otherwise, set this to 'needs review' and open another ticket for that.",
    "created_at": "2011-06-08T14:12:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115436",
    "user": "kcrisman"
}
```

Hmm, that is very subtle!  

```

sage: A = ((i,i) for i in range(10))
sage: type(A)
<type 'generator'>
sage: point(A)
<plots nicely>
sage: A.next()
--------------------------------------------------------------------
StopIteration: 
```

Yeah, that's not a bad idea.  Usually people wouldn't do this, but I can certainly see it happening.

On the other hand, if it slows the process of getting this fix in, we should probably open a different ticket for that.

So it's up to you.  If you feel motivated to add this right now, then do it and the whole thing can be reviewed.  Otherwise, set this to 'needs review' and open another ticket for that.



---

archive/issue_comments_115437.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2016-08-26T14:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115437",
    "user": "slabbe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_115438.json:
```json
{
    "body": "I suggest to close this ticket as a duplicate of #14490.",
    "created_at": "2016-08-26T14:29:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115438",
    "user": "slabbe"
}
```

I suggest to close this ticket as a duplicate of #14490.



---

archive/issue_comments_115439.json:
```json
{
    "body": "Changing keywords from \"\" to \"sd75\".",
    "created_at": "2016-08-26T14:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115439",
    "user": "slabbe"
}
```

Changing keywords from "" to "sd75".



---

archive/issue_comments_115440.json:
```json
{
    "body": "I am cleaning my old trac tickets during Sage Days 75.",
    "created_at": "2016-08-26T14:32:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115440",
    "user": "slabbe"
}
```

I am cleaning my old trac tickets during Sage Days 75.



---

archive/issue_comments_115441.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2016-08-29T09:31:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115441",
    "user": "slabbe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_115442.json:
```json
{
    "body": "Resolution: wontfix",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115442",
    "user": "embray"
}
```

Resolution: wontfix



---

archive/issue_comments_115443.json:
```json
{
    "body": "Determined to be invalid/duplicate/wontfix (closing as \"wontfix\" as a catch-all resolution).",
    "created_at": "2016-08-30T13:32:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10869",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10869#issuecomment-115443",
    "user": "embray"
}
```

Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).
