# Issue 10869: Calling point on an iterator of 3d points raises an AttributeError

Issue created by migration from Trac.

Original creator: slabbe

Original creation time: 2011-03-16 16:25:06

Assignee: jason, was

CC:  kcrisman

Drawing a list of 2d and 3d points works :


```
sage: point([(i,i) for i in range(10)])
sage: point([(i,i,i) for i in range(10)])
```


Drawing an iterator of 2d points works :


```
sage: point((i,i) for i in range(10))
```


Drawing an iterator of 3d points is broken :


```
sage: point((i,i,i) for i in range(10))
Traceback (most recent call last):
...
AttributeError: 'int' object has no attribute '_set_extra_kwds'
```


The same bug is obtained for empty iterator :


```
sage: point([])
sage: point(iter([]))
Traceback (most recent call last):
...
AttributeError: 'int' object has no attribute '_set_extra_kwds'
```


Moreover, I wonder if the line 1022 of sage/plot/plot3d/shapes2.pyc in
point3d(v, size, **kwds)


```
A = sum([Point(z, size, **kwds) for z in v])
```


should be


```
A = sum([Point(z, size, **kwds) for z in v], Graphics())
```


or something?


---

Attachment

See also #11426.


---

Comment by slabbe created at 2011-06-08 14:06:04

I think I left this ticket as "new" because I was not sure about my fix. My question was : Is it necessary to expand the iterator as a list to fix it?

The problem was that in the function ``point``, trying ``point2d`` on the iterator consumes it. Maybe ``point2d`` could do a copy of the iterator with ``itertools.tee`` before consuming it? I think such a fix would be better. What do you think?

SÃ©bastien


---

Comment by kcrisman created at 2011-06-08 14:12:33

Hmm, that is very subtle!  

```

sage: A = ((i,i) for i in range(10))
sage: type(A)
<type 'generator'>
sage: point(A)
<plots nicely>
sage: A.next()
--------------------------------------------------------------------
StopIteration: 
```

Yeah, that's not a bad idea.  Usually people wouldn't do this, but I can certainly see it happening.

On the other hand, if it slows the process of getting this fix in, we should probably open a different ticket for that.

So it's up to you.  If you feel motivated to add this right now, then do it and the whole thing can be reviewed.  Otherwise, set this to 'needs review' and open another ticket for that.


---

Comment by slabbe created at 2016-08-26 14:29:58

Changing status from new to needs_review.


---

Comment by slabbe created at 2016-08-26 14:29:58

I suggest to close this ticket as a duplicate of #14490.


---

Comment by slabbe created at 2016-08-26 14:32:02

Changing keywords from "" to "sd75".


---

Comment by slabbe created at 2016-08-26 14:32:02

I am cleaning my old trac tickets during Sage Days 75.


---

Comment by slabbe created at 2016-08-29 09:31:01

Changing status from needs_review to positive_review.


---

Comment by embray created at 2016-08-30 13:32:25

Resolution: wontfix


---

Comment by embray created at 2016-08-30 13:32:25

Determined to be invalid/duplicate/wontfix (closing as "wontfix" as a catch-all resolution).
