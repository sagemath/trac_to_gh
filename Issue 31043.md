# Issue 31043: Jupyter upgrade

archive/issues_031043.json:
```json
{
    "body": "CC:  @jcamp0x2a slelievre kcrisman egourgoulhon fbissey vdelecroix @kliem arojas isuruf\n\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/31280\n\n",
    "created_at": "2021-01-22T04:26:21Z",
    "labels": [
        "packages: standard",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "Jupyter upgrade",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/31043",
    "user": "mkoeppe"
}
```
CC:  @jcamp0x2a slelievre kcrisman egourgoulhon fbissey vdelecroix @kliem arojas isuruf



Issue created by migration from https://trac.sagemath.org/ticket/31280





---

archive/issue_comments_443370.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-01-22T04:45:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443370",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_443371.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-22T18:26:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443371",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443372.json:
```json
{
    "body": "`importlib_metadata` needs `toml`",
    "created_at": "2021-01-22T18:49:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443372",
    "user": "mkoeppe"
}
```

`importlib_metadata` needs `toml`



---

archive/issue_comments_443373.json:
```json
{
    "body": "`backcall` and `ptyprocess` need `flit_core` (#29846)",
    "created_at": "2021-01-22T18:51:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443373",
    "user": "mkoeppe"
}
```

`backcall` and `ptyprocess` need `flit_core` (#29846)



---

archive/issue_comments_443374.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-22T19:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443374",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443375.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-01-22T19:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443375",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443376.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-01-22T19:51:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443376",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_443377.json:
```json
{
    "body": "With this update I seem to be running into:\n\n```\n  [pplpy-0.8.6]   Extension error:\n  [pplpy-0.8.6]   Could not import extension sphinx.builders.linkcheck (exception: No module named 'urllib3')\n  [pplpy-0.8.6]   make[5]: *** [html] Error 2\n  [pplpy-0.8.6]   cp: build/html/*: No such file or directory\n```\n",
    "created_at": "2021-01-22T19:57:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443377",
    "user": "mkoeppe"
}
```

With this update I seem to be running into:

```
  [pplpy-0.8.6]   Extension error:
  [pplpy-0.8.6]   Could not import extension sphinx.builders.linkcheck (exception: No module named 'urllib3')
  [pplpy-0.8.6]   make[5]: *** [html] Error 2
  [pplpy-0.8.6]   cp: build/html/*: No such file or directory
```




---

archive/issue_comments_443378.json:
```json
{
    "body": "I don't see why this would have anything to do with Jupyter. The problem seems to happen during the build of the pplpy documentation with sphinx. Probably to make cross linking, sphinx requires `urllib3`... though this problem never occured to me.",
    "created_at": "2021-01-23T08:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443378",
    "user": "vdelecroix"
}
```

I don't see why this would have anything to do with Jupyter. The problem seems to happen during the build of the pplpy documentation with sphinx. Probably to make cross linking, sphinx requires `urllib3`... though this problem never occured to me.



---

archive/issue_comments_443379.json:
```json
{
    "body": "This ticket is updating 40 packages, including `requests`",
    "created_at": "2021-01-23T17:42:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443379",
    "user": "mkoeppe"
}
```

This ticket is updating 40 packages, including `requests`



---

archive/issue_comments_443380.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-02-02T20:17:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443380",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_443381.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-03-10T02:15:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443381",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_443382.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-03-10T02:16:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443382",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443383.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-03-10T04:46:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443383",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_443384.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-05-12T01:57:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443384",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_443385.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-05-12T02:12:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443385",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_443386.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-12T02:58:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443386",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443387.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-05-12T03:35:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443387",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443388.json:
```json
{
    "body": "Upgraded `requests` has new dependencies:\n\n```\nrequires = [\n    'chardet>=3.0.2,<5',\n    'idna>=2.5,<3',\n    'urllib3>=1.21.1,<1.27',\n    'certifi>=2017.4.17'\n]\n```\n",
    "created_at": "2021-05-19T02:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443388",
    "user": "mkoeppe"
}
```

Upgraded `requests` has new dependencies:

```
requires = [
    'chardet>=3.0.2,<5',
    'idna>=2.5,<3',
    'urllib3>=1.21.1,<1.27',
    'certifi>=2017.4.17'
]
```




---

archive/issue_comments_443389.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-05-19T02:44:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443389",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_443390.json:
```json
{
    "body": "(requests unvendored these libraries in 2.16 - https://docs.python-requests.org/en/master/community/updates/#id25)",
    "created_at": "2021-05-19T03:52:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443390",
    "user": "mkoeppe"
}
```

(requests unvendored these libraries in 2.16 - https://docs.python-requests.org/en/master/community/updates/#id25)



---

archive/issue_comments_443391.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-19T03:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443391",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443392.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-19T03:56:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443392",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443393.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-05-19T04:04:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443393",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443394.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-05-25T00:21:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443394",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443395.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-05-31T21:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443395",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_443396.json:
```json
{
    "body": "lgtm",
    "created_at": "2021-06-02T11:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443396",
    "user": "dimpase"
}
```

lgtm



---

archive/issue_comments_443397.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-02T11:18:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443397",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443398.json:
```json
{
    "body": "Thanks!",
    "created_at": "2021-06-02T16:29:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443398",
    "user": "mkoeppe"
}
```

Thanks!



---

archive/issue_comments_443399.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-06-02T16:34:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443399",
    "user": "mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_443400.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-06-02T16:38:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443400",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443401.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-06-02T16:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443401",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443402.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-06-02T22:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443402",
    "user": "dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443403.json:
```json
{
    "body": "OK",
    "created_at": "2021-06-02T22:41:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443403",
    "user": "dimpase"
}
```

OK



---

archive/issue_comments_443404.json:
```json
{
    "body": "Thanks",
    "created_at": "2021-06-03T00:10:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443404",
    "user": "mkoeppe"
}
```

Thanks



---

archive/issue_comments_443405.json:
```json
{
    "body": "On OSX:\n\n```\nsage -t --long --random-seed=0 src/sage/interfaces/expect.py  # 38 doctests failed\nsage -t --long --random-seed=0 src/sage/interfaces/gap.py  # 61 doctests failed\nsage -t --long --random-seed=0 src/sage/interfaces/mwrank.py  # 6 doctests failed\nsage -t --long --random-seed=0 src/sage/interfaces/quit.py  # 6 doctests failed\n```\n",
    "created_at": "2021-06-29T22:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443405",
    "user": "vbraun"
}
```

On OSX:

```
sage -t --long --random-seed=0 src/sage/interfaces/expect.py  # 38 doctests failed
sage -t --long --random-seed=0 src/sage/interfaces/gap.py  # 61 doctests failed
sage -t --long --random-seed=0 src/sage/interfaces/mwrank.py  # 6 doctests failed
sage -t --long --random-seed=0 src/sage/interfaces/quit.py  # 6 doctests failed
```




---

archive/issue_comments_443406.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2021-06-29T22:38:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443406",
    "user": "vbraun"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_443407.json:
```json
{
    "body": "More detail please",
    "created_at": "2021-06-29T22:46:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443407",
    "user": "mkoeppe"
}
```

More detail please



---

archive/issue_comments_443408.json:
```json
{
    "body": "Indeed, the upgrade of ptyprocess breaks `sage.interfaces.expect` on macOS.\n\nDoes someone already have a fix for this?",
    "created_at": "2021-07-06T18:52:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443408",
    "user": "mkoeppe"
}
```

Indeed, the upgrade of ptyprocess breaks `sage.interfaces.expect` on macOS.

Does someone already have a fix for this?



---

archive/issue_comments_443409.json:
```json
{
    "body": "Even just upgrading `ptyprocess` from 0.5.1 to 0.5.2 causes the breakage. All later versions (0.6.0, 0.7.0) are broken.",
    "created_at": "2021-07-06T19:05:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443409",
    "user": "mkoeppe"
}
```

Even just upgrading `ptyprocess` from 0.5.1 to 0.5.2 causes the breakage. All later versions (0.6.0, 0.7.0) are broken.



---

archive/issue_comments_443410.json:
```json
{
    "body": "If we are lucky, this is just https://github.com/pexpect/ptyprocess/commit/f673a54f1fef9c390bc1a683cbcdfa8128385bd0",
    "created_at": "2021-07-06T19:09:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443410",
    "user": "mkoeppe"
}
```

If we are lucky, this is just https://github.com/pexpect/ptyprocess/commit/f673a54f1fef9c390bc1a683cbcdfa8128385bd0



---

archive/issue_comments_443411.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-06T19:15:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443411",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443412.json:
```json
{
    "body": "I have opened #32147 (Make `sage.interfaces.expect` compatible with ptyprocess >= 0.5.2).\nI don't think we need it for this ticket.",
    "created_at": "2021-07-06T19:18:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443412",
    "user": "mkoeppe"
}
```

I have opened #32147 (Make `sage.interfaces.expect` compatible with ptyprocess >= 0.5.2).
I don't think we need it for this ticket.



---

archive/issue_comments_443413.json:
```json
{
    "body": "Cherry-picked the single fix-up commit for `rst2ipynb` from #31967.",
    "created_at": "2021-07-06T19:19:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443413",
    "user": "mkoeppe"
}
```

Cherry-picked the single fix-up commit for `rst2ipynb` from #31967.



---

archive/issue_comments_443414.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-06T19:21:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443414",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443415.json:
```json
{
    "body": "starting `./sage -n` and attempting to create a Sage notebook from browser leads to `500 Internal Server Error` and on console I see \n\n```\nModuleNotFoundError: No module named 'jupyterlab_pygments'\n```\n\nthe full log (I killed the session with Ctrl-C in the end)\n\n```\nPlease wait while the Sage Jupyter Notebook server starts...\n[I 19:04:20.346 NotebookApp] Serving notebooks from local directory: /mnt/opt/Sage/sage-dev\n[I 19:04:20.346 NotebookApp] Jupyter Notebook 6.3.0 is running at:\n[I 19:04:20.347 NotebookApp] http://localhost:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381\n[I 19:04:20.347 NotebookApp]  or http://127.0.0.1:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381\n[I 19:04:20.347 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).\n[C 19:04:20.394 NotebookApp] \n    \n    To access the notebook, open this file in a browser:\n        file:///home/dima/.local/share/jupyter/runtime/nbserver-11985-open.html\n    Or copy and paste one of these URLs:\n        http://localhost:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381\n     or http://127.0.0.1:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381\n[I 19:04:31.562 NotebookApp] Creating new notebook in \n[E 19:04:31.729 NotebookApp] Uncaught exception GET /notebooks/Untitled1.ipynb?kernel_name=sagemath (127.0.0.1)\n    HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/notebooks/Untitled1.ipynb?kernel_name=sagemath', version='HTTP/1.1', remote_ip='127.0.0.1')\n    Traceback (most recent call last):\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/tornado/web.py\", line 1704, in _execute\n        result = await result\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/tornado/gen.py\", line 775, in run\n        yielded = self.gen.send(value)\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/notebook/handlers.py\", line 95, in get\n        self.write(self.render_template('notebook.html',\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/base/handlers.py\", line 516, in render_template\n        return template.render(**ns)\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/jinja2/environment.py\", line 1090, in render\n        self.environment.handle_exception()\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/jinja2/environment.py\", line 832, in handle_exception\n        reraise(*rewrite_traceback_stack(source=source))\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/jinja2/_compat.py\", line 28, in reraise\n        raise value.with_traceback(tb)\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/templates/notebook.html\", line 1, in top-level template code\n        {% extends \"page.html\" %}\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/templates/page.html\", line 154, in top-level template code\n        {% block header %}\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/templates/notebook.html\", line 115, in block \"header\"\n        {% for exporter in get_frontend_exporters() %}\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/notebook/handlers.py\", line 23, in get_frontend_exporters\n        from nbconvert.exporters.base import get_export_names, get_exporter\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/__init__.py\", line 4, in <module>\n        from .exporters import *\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/exporters/__init__.py\", line 4, in <module>\n        from .slides import SlidesExporter\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/exporters/slides.py\", line 12, in <module>\n        from ..preprocessors.base import Preprocessor\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/preprocessors/__init__.py\", line 7, in <module>\n        from .csshtmlheader import CSSHTMLHeaderPreprocessor\n      File \"/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/preprocessors/csshtmlheader.py\", line 14, in <module>\n        from jupyterlab_pygments import JupyterStyle\n    ModuleNotFoundError: No module named 'jupyterlab_pygments'\n[E 19:04:31.737 NotebookApp] {\n      \"Host\": \"localhost:8888\",\n      \"User-Agent\": \"Mozilla/5.0 (X11; Linux x86_64; rv:87.0) Gecko/20100101 Firefox/87.0\",\n      \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\",\n      \"Accept-Language\": \"en-US,en;q=0.5\",\n      \"Accept-Encoding\": \"gzip, deflate\",\n      \"Dnt\": \"1\",\n      \"Connection\": \"keep-alive\",\n      \"Referer\": \"http://localhost:8888/tree\",\n      \"Cookie\": \"username-localhost-8888=\\\"2|1:0|10:1625681061|23:username-localhost-8888|44:Yzk3OTE4MGZmZDk0NGIwZWE3OGJhN2U2ZWRlZjM2MjQ=|1dece02d459d6cbd9afa3010954d3af0225ea32fc03d6fb8a2c97d06acb77c3b\\\"; _xsrf=2|32f2db10|41bba910a8914a43d015ffbce18afe72|1625680821\",\n      \"Upgrade-Insecure-Requests\": \"1\"\n    }\n[E 19:04:31.737 NotebookApp] 500 GET /notebooks/Untitled1.ipynb?kernel_name=sagemath (127.0.0.1) 94.570000ms referer=http://localhost:8888/tree\n^C[I 19:04:51.095 NotebookApp] interrupted\nServing notebooks from local directory: /mnt/opt/Sage/sage-dev\n0 active kernels\nJupyter Notebook 6.3.0 is running at:\nhttp://localhost:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381\n or http://127.0.0.1:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381\nShutdown this notebook server (y/[n])? y\n```\n",
    "created_at": "2021-07-07T18:08:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443415",
    "user": "dimpase"
}
```

starting `./sage -n` and attempting to create a Sage notebook from browser leads to `500 Internal Server Error` and on console I see 

```
ModuleNotFoundError: No module named 'jupyterlab_pygments'
```

the full log (I killed the session with Ctrl-C in the end)

```
Please wait while the Sage Jupyter Notebook server starts...
[I 19:04:20.346 NotebookApp] Serving notebooks from local directory: /mnt/opt/Sage/sage-dev
[I 19:04:20.346 NotebookApp] Jupyter Notebook 6.3.0 is running at:
[I 19:04:20.347 NotebookApp] http://localhost:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381
[I 19:04:20.347 NotebookApp]  or http://127.0.0.1:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381
[I 19:04:20.347 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).
[C 19:04:20.394 NotebookApp] 
    
    To access the notebook, open this file in a browser:
        file:///home/dima/.local/share/jupyter/runtime/nbserver-11985-open.html
    Or copy and paste one of these URLs:
        http://localhost:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381
     or http://127.0.0.1:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381
[I 19:04:31.562 NotebookApp] Creating new notebook in 
[E 19:04:31.729 NotebookApp] Uncaught exception GET /notebooks/Untitled1.ipynb?kernel_name=sagemath (127.0.0.1)
    HTTPServerRequest(protocol='http', host='localhost:8888', method='GET', uri='/notebooks/Untitled1.ipynb?kernel_name=sagemath', version='HTTP/1.1', remote_ip='127.0.0.1')
    Traceback (most recent call last):
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/tornado/web.py", line 1704, in _execute
        result = await result
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/tornado/gen.py", line 775, in run
        yielded = self.gen.send(value)
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/notebook/handlers.py", line 95, in get
        self.write(self.render_template('notebook.html',
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/base/handlers.py", line 516, in render_template
        return template.render(**ns)
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/jinja2/environment.py", line 1090, in render
        self.environment.handle_exception()
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/jinja2/environment.py", line 832, in handle_exception
        reraise(*rewrite_traceback_stack(source=source))
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/jinja2/_compat.py", line 28, in reraise
        raise value.with_traceback(tb)
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/templates/notebook.html", line 1, in top-level template code
        {% extends "page.html" %}
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/templates/page.html", line 154, in top-level template code
        {% block header %}
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/templates/notebook.html", line 115, in block "header"
        {% for exporter in get_frontend_exporters() %}
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/notebook/notebook/handlers.py", line 23, in get_frontend_exporters
        from nbconvert.exporters.base import get_export_names, get_exporter
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/__init__.py", line 4, in <module>
        from .exporters import *
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/exporters/__init__.py", line 4, in <module>
        from .slides import SlidesExporter
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/exporters/slides.py", line 12, in <module>
        from ..preprocessors.base import Preprocessor
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/preprocessors/__init__.py", line 7, in <module>
        from .csshtmlheader import CSSHTMLHeaderPreprocessor
      File "/mnt/opt/Sage/sage-dev/local/lib/python3.8/site-packages/nbconvert/preprocessors/csshtmlheader.py", line 14, in <module>
        from jupyterlab_pygments import JupyterStyle
    ModuleNotFoundError: No module named 'jupyterlab_pygments'
[E 19:04:31.737 NotebookApp] {
      "Host": "localhost:8888",
      "User-Agent": "Mozilla/5.0 (X11; Linux x86_64; rv:87.0) Gecko/20100101 Firefox/87.0",
      "Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8",
      "Accept-Language": "en-US,en;q=0.5",
      "Accept-Encoding": "gzip, deflate",
      "Dnt": "1",
      "Connection": "keep-alive",
      "Referer": "http://localhost:8888/tree",
      "Cookie": "username-localhost-8888=\"2|1:0|10:1625681061|23:username-localhost-8888|44:Yzk3OTE4MGZmZDk0NGIwZWE3OGJhN2U2ZWRlZjM2MjQ=|1dece02d459d6cbd9afa3010954d3af0225ea32fc03d6fb8a2c97d06acb77c3b\"; _xsrf=2|32f2db10|41bba910a8914a43d015ffbce18afe72|1625680821",
      "Upgrade-Insecure-Requests": "1"
    }
[E 19:04:31.737 NotebookApp] 500 GET /notebooks/Untitled1.ipynb?kernel_name=sagemath (127.0.0.1) 94.570000ms referer=http://localhost:8888/tree
^C[I 19:04:51.095 NotebookApp] interrupted
Serving notebooks from local directory: /mnt/opt/Sage/sage-dev
0 active kernels
Jupyter Notebook 6.3.0 is running at:
http://localhost:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381
 or http://127.0.0.1:8888/?token=0d3f0cbd61c7d818de2b8399e051f51dc2fdf23481edb381
Shutdown this notebook server (y/[n])? y
```




---

archive/issue_comments_443416.json:
```json
{
    "body": "To make it work, I tried\n\n```\n$ ./sage --pip3 install jupyterlab_pygments\n```\n\nand got\n\n```\nCollecting jupyterlab_pygments\n  Using cached jupyterlab_pygments-0.1.2-py2.py3-none-any.whl (4.6 kB)\nRequirement already satisfied: pygments<3,>=2.4.1 in ./local/lib/python3.8/site-packages (from jupyterlab_pygments) (2.9.0)\nInstalling collected packages: jupyterlab-pygments\nERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.\nnbconvert 6.0.7 requires nbclient<0.6.0,>=0.5.0, which is not installed.\nSuccessfully installed jupyterlab-pygments-0.1.2\n```\n\nThen I did\n\n```\n./sage --pip3 uninstall jupyterlab_pygments\n./sage --pip3 install nbclient\n./sage --pip3 install jupyterlab_pygments\n```\n\nand this fixed this issue.",
    "created_at": "2021-07-07T18:17:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443416",
    "user": "dimpase"
}
```

To make it work, I tried

```
$ ./sage --pip3 install jupyterlab_pygments
```

and got

```
Collecting jupyterlab_pygments
  Using cached jupyterlab_pygments-0.1.2-py2.py3-none-any.whl (4.6 kB)
Requirement already satisfied: pygments<3,>=2.4.1 in ./local/lib/python3.8/site-packages (from jupyterlab_pygments) (2.9.0)
Installing collected packages: jupyterlab-pygments
ERROR: pip's dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.
nbconvert 6.0.7 requires nbclient<0.6.0,>=0.5.0, which is not installed.
Successfully installed jupyterlab-pygments-0.1.2
```

Then I did

```
./sage --pip3 uninstall jupyterlab_pygments
./sage --pip3 install nbclient
./sage --pip3 install jupyterlab_pygments
```

and this fixed this issue.



---

archive/issue_comments_443417.json:
```json
{
    "body": "Thanks for testing!",
    "created_at": "2021-07-07T19:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443417",
    "user": "mkoeppe"
}
```

Thanks for testing!



---

archive/issue_comments_443418.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2021-07-07T19:48:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443418",
    "user": "mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_443419.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-07-19T03:15:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443419",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443420.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2021-07-19T03:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443420",
    "user": "mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_443421.json:
```json
{
    "body": "I can't reproduce this error...\nAnother try on top of the current beta?",
    "created_at": "2021-07-19T03:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443421",
    "user": "mkoeppe"
}
```

I can't reproduce this error...
Another try on top of the current beta?



---

archive/issue_comments_443422.json:
```json
{
    "body": "still the same error as in comment:51",
    "created_at": "2021-07-21T13:44:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443422",
    "user": "dimpase"
}
```

still the same error as in comment:51



---

archive/issue_comments_443423.json:
```json
{
    "body": "What does `./sage -pip list` say on this installation?",
    "created_at": "2021-07-21T16:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443423",
    "user": "mkoeppe"
}
```

What does `./sage -pip list` say on this installation?



---

archive/issue_comments_443424.json:
```json
{
    "body": "Attachment [piplist.txt](tarball://root/attachments/some-uuid/ticket31280/piplist.txt) by dimpase created at 2021-07-22 08:40:21\n\npip list output",
    "created_at": "2021-07-22T08:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443424",
    "user": "dimpase"
}
```

Attachment [piplist.txt](tarball://root/attachments/some-uuid/ticket31280/piplist.txt) by dimpase created at 2021-07-22 08:40:21

pip list output



---

archive/issue_comments_443425.json:
```json
{
    "body": "Replying to [comment:57 mkoeppe]:\n> What does `./sage -pip list` say on this installation?\nattached.",
    "created_at": "2021-07-22T08:40:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443425",
    "user": "dimpase"
}
```

Replying to [comment:57 mkoeppe]:
> What does `./sage -pip list` say on this installation?
attached.



---

archive/issue_comments_443426.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-12T02:50:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443426",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443427.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-08-12T03:02:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443427",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_443428.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-12T04:32:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443428",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443429.json:
```json
{
    "body": "OK... `jupyterlab_pygments` is a new dependency of `nbconvert`. Some more dependencies also came in.",
    "created_at": "2021-08-12T04:37:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443429",
    "user": "mkoeppe"
}
```

OK... `jupyterlab_pygments` is a new dependency of `nbconvert`. Some more dependencies also came in.



---

archive/issue_comments_443430.json:
```json
{
    "body": "Note: update of **requests** should help for #30768",
    "created_at": "2021-08-12T11:56:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443430",
    "user": "chapoton"
}
```

Note: update of **requests** should help for #30768



---

archive/issue_comments_443431.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:",
    "created_at": "2021-08-12T18:36:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443431",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. Last 10 new commits:



---

archive/issue_comments_443432.json:
```json
{
    "body": "Rebased onto 9.4.rc1 + #32371, #32372. Dropped parso update, which went outside the version range of another package",
    "created_at": "2021-08-12T18:37:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443432",
    "user": "mkoeppe"
}
```

Rebased onto 9.4.rc1 + #32371, #32372. Dropped parso update, which went outside the version range of another package



---

archive/issue_comments_443433.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-12T18:48:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443433",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443434.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T04:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443434",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443435.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T07:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443435",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443436.json:
```json
{
    "body": "The upgraded `ipykernel` declares two new `install_requires`: https://pypi.org/project/debugpy/, https://pypi.org/project/matplotlib-inline/",
    "created_at": "2021-08-13T20:42:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443436",
    "user": "mkoeppe"
}
```

The upgraded `ipykernel` declares two new `install_requires`: https://pypi.org/project/debugpy/, https://pypi.org/project/matplotlib-inline/



---

archive/issue_comments_443437.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T20:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443437",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443438.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-13T22:01:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443438",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443439.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. Last 10 new commits:",
    "created_at": "2021-08-26T20:48:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443439",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. Last 10 new commits:



---

archive/issue_comments_443440.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-28T00:46:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443440",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443441.json:
```json
{
    "body": "Some dependencies need to be declared:\n\n```\n   File \"/opt/sage-5e2cde910e349f3b257feb1bbcf1c5a3f83d122b/lib/python3.8/site-packages/jupyter_client/provisioning/factory.py\", line 9, in <module>\n      from entrypoints import EntryPoint  # type: ignore\n  ModuleNotFoundError: No module named 'entrypoints'\n  Building wheel for ipykernel (PEP 517): finished with status 'error'\n  ERROR: Failed building wheel for ipykernel\nFailed to build ipykernel\nERROR: Failed to build one or more wheels\n```\n\nhttps://github.com/mkoeppe/sage/runs/3449969195",
    "created_at": "2021-08-28T17:09:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443441",
    "user": "mkoeppe"
}
```

Some dependencies need to be declared:

```
   File "/opt/sage-5e2cde910e349f3b257feb1bbcf1c5a3f83d122b/lib/python3.8/site-packages/jupyter_client/provisioning/factory.py", line 9, in <module>
      from entrypoints import EntryPoint  # type: ignore
  ModuleNotFoundError: No module named 'entrypoints'
  Building wheel for ipykernel (PEP 517): finished with status 'error'
  ERROR: Failed building wheel for ipykernel
Failed to build ipykernel
ERROR: Failed to build one or more wheels
```

https://github.com/mkoeppe/sage/runs/3449969195



---

archive/issue_comments_443442.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-08-28T17:21:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443442",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443443.json:
```json
{
    "body": "https://github.com/mkoeppe/sage/actions/runs/1177591365 still indicates dependency trouble\n\n```\n  [ipykernel-6.2.0] error installing, exit status 1. End of log file:\n  [ipykernel-6.2.0]       File \"/opt/sage-7bc14322e3a24f69b4bf3741c25d26d20a26f47c/lib/python3.8/site-packages/jupyter_client/provisioning/factory.py\", line 9, in <module>\n  [ipykernel-6.2.0]         from entrypoints import EntryPoint  # type: ignore\n  [ipykernel-6.2.0]     ModuleNotFoundError: No module named 'entrypoints'\n  [ipykernel-6.2.0]     Building wheel for ipykernel (PEP 517): finished with status 'error'\n  [ipykernel-6.2.0]     ERROR: Failed building wheel for ipykernel\n```\n",
    "created_at": "2021-09-06T22:36:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443443",
    "user": "mkoeppe"
}
```

https://github.com/mkoeppe/sage/actions/runs/1177591365 still indicates dependency trouble

```
  [ipykernel-6.2.0] error installing, exit status 1. End of log file:
  [ipykernel-6.2.0]       File "/opt/sage-7bc14322e3a24f69b4bf3741c25d26d20a26f47c/lib/python3.8/site-packages/jupyter_client/provisioning/factory.py", line 9, in <module>
  [ipykernel-6.2.0]         from entrypoints import EntryPoint  # type: ignore
  [ipykernel-6.2.0]     ModuleNotFoundError: No module named 'entrypoints'
  [ipykernel-6.2.0]     Building wheel for ipykernel (PEP 517): finished with status 'error'
  [ipykernel-6.2.0]     ERROR: Failed building wheel for ipykernel
```




---

archive/issue_comments_443444.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-06T22:47:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443444",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443445.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-06T23:07:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443445",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443446.json:
```json
{
    "body": "Replying to [comment:68 mkoeppe]:\n> Dropped parso update, which went outside the version range of another package\n\nNow `jedi` insisted on `parso<0.9.0,>=0.8.0`, so I upgraded to latest",
    "created_at": "2021-09-06T23:10:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443446",
    "user": "mkoeppe"
}
```

Replying to [comment:68 mkoeppe]:
> Dropped parso update, which went outside the version range of another package

Now `jedi` insisted on `parso<0.9.0,>=0.8.0`, so I upgraded to latest



---

archive/issue_comments_443447.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-06T23:41:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443447",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_443448.json:
```json
{
    "body": "OK, this  looks good. I see you're testing cygiwn on GH Actions. Feel free to flip to positive review if these make sense to you.",
    "created_at": "2021-09-07T12:52:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443448",
    "user": "dimpase"
}
```

OK, this  looks good. I see you're testing cygiwn on GH Actions. Feel free to flip to positive review if these make sense to you.



---

archive/issue_comments_443449.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-09-07T18:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443449",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_443450.json:
```json
{
    "body": "Thank you! Yes, the Cygwin test looks fine (in previous runs, the multi-stage CI for Cygwin had revealed some of the missing dependencies).",
    "created_at": "2021-09-07T18:15:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443450",
    "user": "mkoeppe"
}
```

Thank you! Yes, the Cygwin test looks fine (in previous runs, the multi-stage CI for Cygwin had revealed some of the missing dependencies).



---

archive/issue_comments_443451.json:
```json
{
    "body": "`debugpy` is introduced here, but not listed as a dependency anywhere. Seems to be a bug.\n(I got an error importing debugpy while working on new matplotlib with this ticket merged).\n\nShould be a dependency of ipykernel as far as I can tell.",
    "created_at": "2021-09-08T13:30:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443451",
    "user": "dimpase"
}
```

`debugpy` is introduced here, but not listed as a dependency anywhere. Seems to be a bug.
(I got an error importing debugpy while working on new matplotlib with this ticket merged).

Should be a dependency of ipykernel as far as I can tell.



---

archive/issue_comments_443452.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2021-09-08T13:30:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443452",
    "user": "dimpase"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_443453.json:
```json
{
    "body": "It is only needed at runtime. Being a standard package, `debugpy` is installed whenever `make build` is used.\n\nSince this is already on Volker's branch, let's keep it on \"positive review\" and add the dependency in a follow-up ticket",
    "created_at": "2021-09-08T17:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443453",
    "user": "mkoeppe"
}
```

It is only needed at runtime. Being a standard package, `debugpy` is installed whenever `make build` is used.

Since this is already on Volker's branch, let's keep it on "positive review" and add the dependency in a follow-up ticket



---

archive/issue_comments_443454.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2021-09-08T17:36:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443454",
    "user": "mkoeppe"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_443455.json:
```json
{
    "body": "I think I got the error after I typed `make`, and it was building docs. So I am not 100% sure that it would be built without declared a dependency of sagelib.",
    "created_at": "2021-09-08T19:35:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443455",
    "user": "dimpase"
}
```

I think I got the error after I typed `make`, and it was building docs. So I am not 100% sure that it would be built without declared a dependency of sagelib.



---

archive/issue_comments_443456.json:
```json
{
    "body": "Let's do this in #32493",
    "created_at": "2021-09-08T19:42:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443456",
    "user": "mkoeppe"
}
```

Let's do this in #32493



---

archive/issue_comments_443457.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-09-13T22:22:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443457",
    "user": "vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_443458.json:
```json
{
    "body": "Changing keywords from \"\" to \"upgrade, jupyter\".",
    "created_at": "2021-11-13T15:24:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/31043",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/31043#issuecomment-443458",
    "user": "slelievre"
}
```

Changing keywords from "" to "upgrade, jupyter".
