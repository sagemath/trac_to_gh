# Issue 22719: p-adic completions/Henselizations backed by exact rings

Issue created by migration from https://trac.sagemath.org/ticket/22956

Original creator: saraedum

Original creation time: 2017-05-06 23:11:42

CC:  roed caruso

All p-adic rings currently available in Sage are backed by elements that consist of an approximation and a precision. It can sometimes be tedious to work with such elements since error propagation needs to be analyzed and many algorithms in Sage don't play nice with such inexact elements.

This ticket implements an exact alternative where p-adic rings are backed by absolute number fields. The idea is to use exact elements in number fields where possible and describe algebraic elements as limits of Mac Lane valuations (see #21869). Since computations in number fields (and in particular in relative extensions) are slow in Sage, extensions are always rewritten as isomorphic rings defined by an absolute number field with defining (Eisenstein) polynomials with small coefficients.

A prototype of this exists as a standalone project https://github.com/saraedum/completion. The idea of this ticket is not necessarily to get this prototype into Sage but to track the few things that need to change in Sage for it to work (fast).

One can of course not expect arithmetic to be as fast as in the inexact p-adic rings but the approach seems to have its merits. With a few tweaks in Sage, this implementation can compute the degree 384 splitting field (unramified of degree 2) of a degree 12 polynomial over Q2 in less than three minutes.

**Required changes to Sage** (that can not be monkey-patched, the ones in parentheses are for better performance):
1. Polynomials should not require coefficients to implement `__nonzero__` for printing.
1. `PolynomialQuotientRing` should be a unique parent.
1. (`is_irreducible` should be cached)
1. (`is_irreducible` should be able to call `_is_irreducible_univariate_polynomial` on the base ring.)
1. (`is_squarefree` should be able to call `_is_squarefree_univariate_polynomial` on the base ring.)
1. (Ideal generators should be more stable (i.e., the generator of a principal ideal should be exactly the element that was used to create that ideal))
1. (`gcd(a,a) is a` should be true for polynomials over number fields.)


---

Comment by saraedum created at 2017-06-07 15:59:51

Changing keywords from "" to "sd86.5".


---

Comment by roed created at 2017-07-17 17:35:54

Changing keywords from "sd86.5" to "sd86.5, sd87".


---

Comment by saraedum created at 2018-04-23 10:35:55

Last 10 new commits:


---

Comment by roed created at 2018-07-22 20:08:22

Changing keywords from "sd86.5, sd87" to "sd86.5, sd87, padicIMA".


---

Comment by roed created at 2018-07-22 20:08:22

Last 10 new commits:
