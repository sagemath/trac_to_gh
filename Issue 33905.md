# Issue 33905: modernize super in algebras/

Issue created by migration from https://trac.sagemath.org/ticket/34142

Original creator: chapoton

Original creation time: 2022-07-10 07:17:25

CC:  tscrim mkoeppe klee slelievre

using the short syntax `super()`


---

Comment by chapoton created at 2022-07-10 07:18:01

New commits:


---

Comment by chapoton created at 2022-07-10 07:18:01

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2022-07-10 14:08:08


```
sage -t --long --random-seed=121708683998142046159324749899220158873 src/sage/algebras/commutative_dga.py  # 220 doctests failed
sage -t --long --random-seed=121708683998142046159324749899220158873 src/sage/categories/chain_complexes.py  # 10 doctests failed
```



---

Comment by git created at 2022-07-10 14:08:15

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2022-07-13 19:00:08

bot seems to be now morally green, so please review


---

Comment by mkoeppe created at 2022-07-13 19:22:41

One change that I don't understand:

```
diff --git a/src/sage/algebras/quantum_groups/fock_space.py b/src/sage/algebras/quantum_groups/fock_space.py
index 978a996..dea28fd 100644
--- a/src/sage/algebras/quantum_groups/fock_space.py
+++ b/src/sage/algebras/quantum_groups/fock_space.py
@@ -331,17 +331,17 @@ class FockSpace(Parent, UniqueRepresentation):
         base_ring = FractionField(base_ring)
         q = base_ring(q)
         M = IntegerModRing(n)
         if multicharge in ZZ:
             multicharge = (multicharge,)
         multicharge = tuple(M(e) for e in multicharge)
         if truncated is not None:
             return FockSpaceTruncated(n, truncated, q, base_ring)
-        return super(FockSpace, cls).__classcall__(cls, n, multicharge, q, base_ring)
+        return super().__classcall__(cls, n, multicharge, q, base_ring)
 
     def __init__(self, n, multicharge, q, base_ring):
         r"""
         Initialize ``self``.
 
         EXAMPLES::
 
             sage: F = FockSpace(3, [0])
@@ -1671,17 +1671,17 @@ class FockSpaceTruncated(FockSpace):
         """
         if q is None:
             base_ring = PolynomialRing(ZZ, 'q')
             q = base_ring.gen(0)
         if base_ring is None:
             base_ring = q.parent()
         base_ring = FractionField(base_ring)
         q = base_ring(q)
-        return super(FockSpace, cls).__classcall__(cls, n, k, q, base_ring)
+        return super().__classcall__(cls, n, k, q, base_ring)
 
     def __init__(self, n, k, q, base_ring):
         r"""
         Initialize ``self``.
```


The second hunk is `FockSpaceTruncated.__classcall__`, but it was calling `super(FockSpace, cls)`.__class__. Was this a bug that is fixed here implicitly?


---

Comment by mkoeppe created at 2022-07-13 19:25:16

All other changes are straightforward.


---

Comment by tscrim created at 2022-07-14 00:04:26

It shouldn't make any difference because `FockSpace` does not have a `__classcall__`. So there is no bug. It might be a remnant of my initial implementation with `FockSpace` originally having a `__classcall__` (which we necessarily wanted to avoid).


---

Comment by mkoeppe created at 2022-07-14 00:22:22

Thanks, that makes sense


---

Comment by mkoeppe created at 2022-07-14 00:22:22

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2022-07-21 21:12:05

Resolution: fixed
