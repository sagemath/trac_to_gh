# Issue 18936: Get rid of random.pxi

Issue created by migration from https://trac.sagemath.org/ticket/19173

Original creator: jdemeyer

Original creation time: 2015-09-09 09:37:53

As part of the process of cleaning up .pxi files, we should move `sage/ext/random.pxi` to a proper `.pxd` file.


---

Comment by jdemeyer created at 2015-09-09 09:44:53

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2015-09-09 09:44:53

New commits:


---

Comment by tscrim created at 2015-09-09 17:33:57

From the Cython FAQ, since `randomize.pxd` contains Cython code (`mpq_randomize_entry` and `void mpq_randomize_entry_as_int`), shouldn't it be a `.pxi`?


---

Comment by jdemeyer created at 2015-09-09 18:37:14

The [FAQ entry](https://github.com/cython/cython/wiki/FAQ#what-is-the-difference-between-a-pxd-and-pxi-file-when-should-either-be-used) seems to imply that `.pxd` files cannot be used for code, which is simply wrong. So I am guessing this FAQ entry is obsolete.


---

Comment by tscrim created at 2015-09-09 18:42:54

Changing status from needs_review to positive_review.


---

Comment by tscrim created at 2015-09-09 18:42:54

Okay, LGTM then.

Could you quickly explain the different between `.pxd` and `.pxi` files then? Or should we just move everything over to `.pxd`? (I'm trying to learn more about Cython and the best practices.)


---

Comment by jdemeyer created at 2015-09-09 18:49:09

Cython certainly considers the use of `.pxd` files best practice. Essentially, `.pxi` files are almost deprecated but there are still some specialized use-cases for `.pxi` files.

As one example, Cython upstream recently rejected a patch of me which would add support for `# distutils` declarations in `.pxi` files. I guess they rejected this because they do not want to make `.pxi` files more useful.


---

Comment by tscrim created at 2015-09-09 18:50:25

Okay, thanks!


---

Comment by vbraun created at 2015-09-10 12:03:01

Resolution: fixed
