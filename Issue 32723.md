# Issue 32723: clean one file in quadratic forms

Issue created by migration from https://trac.sagemath.org/ticket/32960

Original creator: chapoton

Original creation time: 2021-12-02 13:38:42

CC:  tscrim. slelievre @kliem




---

Comment by chapoton created at 2021-12-02 13:39:43

Changing status from new to needs_review.


---

Comment by chapoton created at 2021-12-02 13:39:43

New commits:


---

Comment by chapoton created at 2021-12-02 16:00:18

green lights, so please review (sorry for the so many changes, this file was a mess)


---

Comment by @kliem created at 2021-12-02 16:19:32

- This

```diff
     OUTPUT:
 
-        an integer >= 0
+    an integer >= 0
```

  doesn't look like any of the options on
  https://doc.sagemath.org/html/en/developer/coding_basics.html#python-code-style
  I would just write this as

```
    OUTPUT: an integer >= 0
```

- What good do those comments do? (You did not introduce them, but I'm just wondering.

```diff
+    if NZvec is None:
+        if m % p:
+            total = Q_Unit_minus_Zvec.count_modp_solutions__by_Gauss_sum(p, m) * p**len(NonUnitVec_minus_Zvec)          # m != 0 (mod p)
         else:
-            total = (Q_Unit_minus_Zvec.count_modp_solutions__by_Gauss_sum(p, m) - 1) * p**len(NonUnitVec_minus_Zvec)    ## m == 0 (mod p)
+            total = (Q_Unit_minus_Zvec.count_modp_solutions__by_Gauss_sum(p, m) - 1) * p**len(NonUnitVec_minus_Zvec)    # m == 0 (mod p)
```

- While this is better style wise, one doesn't see anymore what is going on.
  This check was commented out.

```diff
-    ## Check that Q is in local normal form -- should replace this with a diagonalization check?
-    ##   (it often may not be since the reduction procedure
-    ##   often mixes up the order of the valuations...)
+    # Check that Q is in local normal form -- should replace this with a diagonalization check?
+    # (it often may not be since the reduction procedure
+    # often mixes up the order of the valuations...)
     #
-    #if (self != self.local_normal_form(p))
+    # if (self != self.local_normal_form(p))
```

  Maybe just remove this entirely? Or start with something as

```
# The following check was commented out:
```


Feel free to do something about what I wrote or just put it on positive review.


---

Comment by git created at 2021-12-02 16:38:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by chapoton created at 2021-12-02 16:38:55

thanks for the comments. I have fixed them, hopefully.


---

Comment by @kliem created at 2021-12-02 16:40:18

Changing status from needs_review to positive_review.


---

Comment by @kliem created at 2021-12-02 16:40:18

LGTM.


---

Comment by vbraun created at 2021-12-23 20:25:29

Resolution: fixed
