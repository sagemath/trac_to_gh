# Issue 25138: One-off doctest failures with matplotlib again

Issue created by migration from Trac.

Original creator: jhpalmieri

Original creation time: 2018-05-16 18:28:14

With Sage 8.3.beta1, I have seen the same failures as reported in #20222:

```
sage -t --long --warn-long 224.1 src/sage/plot/hyperbolic_regular_polygon.py  # 1 doctest failed
sage -t --long --warn-long 224.1 src/sage/repl/rich_output/backend_sagenb.py  # 1 doctest failed
sage -t --long --warn-long 224.1 src/sage/combinat/crystals/crystals.py  # 1 doctest failed
sage -t --long --warn-long 224.1 src/sage/game_theory/matching_game.py  # 1 doctest failed
```

where a typical example is

```
File "src/sage/plot/hyperbolic_regular_polygon.py", line 244, in sage.plot.hyperbolic_regular_polygon.hyperbolic_regular_polygon
Failed example:
    g.plot()
Expected:
    Graphics object consisting of 1 graphics primitive
Got:
    doctest:warning
      File "/Users/jpalmier/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.3.beta1/local/lib/python2.7/threading.py", line 774, in __bootstrap
        self.__bootstrap_inner()
      File "/Users/jpalmier/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.3.beta1/local/lib/python2.7/threading.py", line 801, in __bootstrap_inner
        self.run()
      File "/Users/jpalmier/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.3.beta1/local/lib/python2.7/threading.py", line 1073, in run
        self.function(*self.args, **self.kwargs)
      File "/Users/jpalmier/Desktop/Sage_stuff/sage_builds/VANILLA/sage-8.3.beta1/local/lib/python2.7/site-packages/matplotlib/font_manager.py", line 279, in <lambda>
        'Matplotlib is building the font cache using fc-list. '
    :
    UserWarning: Matplotlib is building the font cache using fc-list. This may take a moment.
    Graphics object consisting of 1 graphics primitive
```



---

Comment by jhpalmieri created at 2018-05-17 20:59:48

Naturally I can't figure out how to reproduce this. The only time it happened, I built from a fresh 8.3.beta1 tarball on a machine on which I have built and run Sage many times. The file `.sage/matplotlib-1.5.1/fontList.json` has a recent modification time. I tried rebuilding from scratch and I tried deleting the directory `./sage/matplotlib-1.5.1/`, but I can not reproduce the error.


---

Comment by vdelecroix created at 2018-08-03 19:20:18

update milestone 8.3 -> 8.4


---

Comment by jdemeyer created at 2018-08-07 10:41:11

Not sure what went wrong. I haven't seen this error since then, so I rather close this as "cosmic ray" or whatever.


---

Comment by jhpalmieri created at 2018-08-07 15:25:58

Sure, let's close it, since I can't reproduce it, either.


---

Comment by jhpalmieri created at 2018-08-07 15:25:58

Changing priority from major to trivial.


---

Comment by jhpalmieri created at 2018-08-07 15:26:14

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-09-04 18:45:45

Resolution: worksforme
