# Issue 31969: Register number field element as numbers.Number

Issue created by migration from https://trac.sagemath.org/ticket/32206

Original creator: @kliem

Original creation time: 2021-07-16 07:58:21

We register number field elements to `numbers.number` such that


```
sage: import numbers
sage: K.<a> = QuadraticField(2)
sage: isinstance(a, numbers.Number)
```


will evaluate to true.

One usage of this is that typing can be simplified. In the `geometry/polyhedron` module many times the input will be of the form `numbers.Number` or `Iterable[numbers.Number]`.


---

Comment by @kliem created at 2021-07-16 07:59:03

Changing status from new to needs_review.


---

Comment by @kliem created at 2021-07-16 07:59:03

New commits:


---

Comment by chapoton created at 2021-07-16 08:38:39

see https://www.python.org/dev/peps/pep-0484/#the-numeric-tower

If I understand correctly, the numbers ABC should not be used in typing annotations !

see also the discussion here :

https://github.com/python/mypy/issues/3186


---

Comment by @kliem created at 2021-07-16 09:19:36

I see, so maybe the other solution I had in mind, makes more sense:

We declare some common sage types (with intuitively clear meaning) for typing. So that you can do something as:


```
from typing import Iterable
from sage.typing import Number
```


The name `Number` needs to be improved of course, so that it is immediately clear, what is meant according to the context. For polyhedra we want something that can be interpreted as real algebraic extension of `QQ`. E.g. `QQ, ZZ, RDF, float, int, rational, AA`. But also things as `NumberField` (and here the class does not imply that this is real). Maybe the name `Real` or `RealType` would work.


---

Comment by @kliem created at 2021-07-16 09:19:43

Changing status from needs_review to needs_info.


---

Comment by @kliem created at 2021-07-16 18:15:40

Actually, I think, I shouldn't take the typing too seriously:

If I denote a type of a vertex as `Iterable` it should be clear to any user what I expect. I expect something iterable with entries something that can be interpreted as some sort of a real number. The last part should be clear to anyone using this anyway. The first part might not be clear: Do I expect a vector, a tuple, a list? So specifying `Iterable` might be meaningful and anything more might just make the signature hard to read and won't help anyone.

What do you think?


---

Comment by @kliem created at 2021-07-17 06:42:21

Changing status from needs_info to needs_review.


---

Comment by nbruin created at 2021-07-17 18:53:31

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-08-26 02:08:43

Resolution: invalid
