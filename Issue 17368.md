# Issue 17368: "How to call C code from Sage" thematic tutorial

archive/issues_017368.json:
```json
{
    "body": "CC:  azi @jm58660 @vbraun @kcrisman @anneschilling\n\nA short thing, that I have been asked several times. If you know how to link with a library from outside of Sage (no modules_list.py), I am interested !\n\nNathann\n\nIssue created by migration from https://trac.sagemath.org/ticket/17605\n\n",
    "created_at": "2015-01-08T16:37:25Z",
    "labels": [
        "component: documentation"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-6.5",
    "title": "\"How to call C code from Sage\" thematic tutorial",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17368",
    "user": "https://github.com/nathanncohen"
}
```
CC:  azi @jm58660 @vbraun @kcrisman @anneschilling

A short thing, that I have been asked several times. If you know how to link with a library from outside of Sage (no modules_list.py), I am interested !

Nathann

Issue created by migration from https://trac.sagemath.org/ticket/17605





---

archive/issue_comments_231186.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2015-01-08T16:38:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231186",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_231187.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-08T16:38:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231187",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_231188.json:
```json
{
    "body": "I don't know enough about this to say whether it is all correct, but it looks very helpful (at least, to me!).  Did you stop early, though?\n\n```\n+Calling a function defined in a library\n+---------------------------------------\n+\n+  ~/a$ gcc -c -fPIC double_vector.c -o libdoublevector.o\n```\n\nI guess you have compiled the library file, but where is the calling part?",
    "created_at": "2015-01-08T16:41:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231188",
    "user": "https://github.com/kcrisman"
}
```

I don't know enough about this to say whether it is all correct, but it looks very helpful (at least, to me!).  Did you stop early, though?

```
+Calling a function defined in a library
+---------------------------------------
+
+  ~/a$ gcc -c -fPIC double_vector.c -o libdoublevector.o
```

I guess you have compiled the library file, but where is the calling part?



---

archive/issue_comments_231189.json:
```json
{
    "body": "I am an idiot. I made many attempts to link this .pyx file with a compiled library and failed, and this is just the beginning of the section that I do not know how to write. I will update my patch in a second to remove that.\n\nI would love to write it, but I just don't know how. There are quite some things that I know how to do by modifying sage, but not without that `:-P`\n\nNathann",
    "created_at": "2015-01-08T16:44:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231189",
    "user": "https://github.com/nathanncohen"
}
```

I am an idiot. I made many attempts to link this .pyx file with a compiled library and failed, and this is just the beginning of the section that I do not know how to write. I will update my patch in a second to remove that.

I would love to write it, but I just don't know how. There are quite some things that I know how to do by modifying sage, but not without that `:-P`

Nathann



---

archive/issue_comments_231190.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-01-08T16:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231190",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_231191.json:
```json
{
    "body": "> I don't know enough about this to say whether it is all correct, but it looks very helpful (at least, to me!).\n\nWell, the point is actually that with this you can give it a try and witness that it does work `;-)`\n\nVolker? Do you know how to link to a compiled library while outside of Sage? Can you teach me? And I'll write the doc!\n\nNathann",
    "created_at": "2015-01-08T18:14:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231191",
    "user": "https://github.com/nathanncohen"
}
```

> I don't know enough about this to say whether it is all correct, but it looks very helpful (at least, to me!).

Well, the point is actually that with this you can give it a try and witness that it does work `;-)`

Volker? Do you know how to link to a compiled library while outside of Sage? Can you teach me? And I'll write the doc!

Nathann



---

archive/issue_comments_231192.json:
```json
{
    "body": "Note: An object file (.o) is not a library (.a / .so). \n\nYou can link compiled C/C++ code with a stand-alone Cython project like in https://github.com/vbraun/lattice_phi4. Then just import as module in Sage.",
    "created_at": "2015-01-08T21:16:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231192",
    "user": "https://github.com/vbraun"
}
```

Note: An object file (.o) is not a library (.a / .so). 

You can link compiled C/C++ code with a stand-alone Cython project like in https://github.com/vbraun/lattice_phi4. Then just import as module in Sage.



---

archive/issue_comments_231193.json:
```json
{
    "body": "Hello Volker,\n\n> You can link compiled C/C++ code with a stand-alone Cython project like in https://github.com/vbraun/lattice_phi4. Then just import as module in Sage.  \n\nI tried it but I was not able to compile it. It seems that I am missing some headers.\n\nI kept on whipping my test files and go to something new, though: I was able to make it work provided that I copied libdoublevector.so to SAGE_ROOT/local/lib/.\n\nNow, I am trying to make it all run from my working directory but I meet the following problem:\n- When calling \"%runfile double_vector_sage.pyx\" there are two calls to GCC\n- The one which contains -ldoublevector is not the one that contains -L/home/ncohen/a\n\nAs a result the second call always fails, because the library is not found.\n\n\n```\nsage: %runfile double_vector_sage.pyx\nCompiling ./double_vector_sage.pyx...\n...\nRuntimeError: Error compiling ./double_vector_sage.pyx:\nrunning build\nrunning build_ext\nbuilding '_home_ncohen_a_double_vector_sage_pyx_5' extension\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC\n -I/home/ncohen/.Sage/local/include/csage -I/home/ncohen/.Sage/local/include\n -I/home/ncohen/.Sage/local/include/python2.7 \n -I/home/ncohen/.Sage/local/lib/python/site-packages/numpy/core/include \n -I/home/ncohen/.Sage/src/sage/ext -I/home/ncohen/.Sage/src \n -I/home/ncohen/.Sage/src/sage/gsl -I. -I/home/ncohen/.Sage/local/include/python2.7 \n -c _home_ncohen_a_double_vector_sage_pyx_5.c \n -o build/temp.linux-x86_64-2.7/_home_ncohen_a_double_vector_sage_pyx_5.o \n -w -O2 -L/home/ncohen/a/\ngcc -pthread -shared -L/home/ncohen/.Sage/local/lib build/temp.linux-x86_64-2.7/_home_ncohen_a_double_vector_sage_pyx_5.o \n -L/home/ncohen/.Sage/local/lib/ -L/home/ncohen/.Sage/local/lib -ldoublevector \n -lmpfr -lgmp -lgmpxx -lstdc++ -lpari -lm -lec -lgsl -lgslcblas -latlas -lntl \n -lcsage -lpython2.7 -o build/lib.linux-x86_64-2.7/_home_ncohen_a_double_vector_sage_pyx_5.so \n -L/home/ncohen/.Sage/local/lib\n```\n\n\nThe header of my .pyx file is:\n\n```\n#clib doublevector\n#cargs -L/home/ncohen/a/\n```\n\n\nThanks to you if you can give me some hint. In the meantime I'll be trying again to make it work.\n\nNathann",
    "created_at": "2015-01-09T05:07:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231193",
    "user": "https://github.com/nathanncohen"
}
```

Hello Volker,

> You can link compiled C/C++ code with a stand-alone Cython project like in https://github.com/vbraun/lattice_phi4. Then just import as module in Sage.  

I tried it but I was not able to compile it. It seems that I am missing some headers.

I kept on whipping my test files and go to something new, though: I was able to make it work provided that I copied libdoublevector.so to SAGE_ROOT/local/lib/.

Now, I am trying to make it all run from my working directory but I meet the following problem:
- When calling "%runfile double_vector_sage.pyx" there are two calls to GCC
- The one which contains -ldoublevector is not the one that contains -L/home/ncohen/a

As a result the second call always fails, because the library is not found.


```
sage: %runfile double_vector_sage.pyx
Compiling ./double_vector_sage.pyx...
...
RuntimeError: Error compiling ./double_vector_sage.pyx:
running build
running build_ext
building '_home_ncohen_a_double_vector_sage_pyx_5' extension
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -fPIC
 -I/home/ncohen/.Sage/local/include/csage -I/home/ncohen/.Sage/local/include
 -I/home/ncohen/.Sage/local/include/python2.7 
 -I/home/ncohen/.Sage/local/lib/python/site-packages/numpy/core/include 
 -I/home/ncohen/.Sage/src/sage/ext -I/home/ncohen/.Sage/src 
 -I/home/ncohen/.Sage/src/sage/gsl -I. -I/home/ncohen/.Sage/local/include/python2.7 
 -c _home_ncohen_a_double_vector_sage_pyx_5.c 
 -o build/temp.linux-x86_64-2.7/_home_ncohen_a_double_vector_sage_pyx_5.o 
 -w -O2 -L/home/ncohen/a/
gcc -pthread -shared -L/home/ncohen/.Sage/local/lib build/temp.linux-x86_64-2.7/_home_ncohen_a_double_vector_sage_pyx_5.o 
 -L/home/ncohen/.Sage/local/lib/ -L/home/ncohen/.Sage/local/lib -ldoublevector 
 -lmpfr -lgmp -lgmpxx -lstdc++ -lpari -lm -lec -lgsl -lgslcblas -latlas -lntl 
 -lcsage -lpython2.7 -o build/lib.linux-x86_64-2.7/_home_ncohen_a_double_vector_sage_pyx_5.so 
 -L/home/ncohen/.Sage/local/lib
```


The header of my .pyx file is:

```
#clib doublevector
#cargs -L/home/ncohen/a/
```


Thanks to you if you can give me some hint. In the meantime I'll be trying again to make it work.

Nathann



---

archive/issue_comments_231194.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-09T05:50:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231194",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_231195.json:
```json
{
    "body": "Okay found a way `;-)`\n\nNeeds review again !\n\nNathann",
    "created_at": "2015-01-09T05:51:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231195",
    "user": "https://github.com/nathanncohen"
}
```

Okay found a way `;-)`

Needs review again !

Nathann



---

archive/issue_comments_231196.json:
```json
{
    "body": "There is probably some alternate reality where the new description is useful for others to read/search, I just lack the imagination for it.\n\nOnce you install the shared library into Sage you might just as well go through `module_list.py` as well.",
    "created_at": "2015-01-09T11:04:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231196",
    "user": "https://github.com/vbraun"
}
```

There is probably some alternate reality where the new description is useful for others to read/search, I just lack the imagination for it.

Once you install the shared library into Sage you might just as well go through `module_list.py` as well.



---

archive/issue_comments_231197.json:
```json
{
    "body": "> There is probably some alternate reality where the new description is useful for others to read/search, I just lack the imagination for it.\n\nThere is probably one in which comments like that don't make people uselessly angry. Are we in the reality in which you also review the branch ?\n\n> Once you install the shared library into Sage you might just as well go through `module_list.py` as well. \n\nI do not understand this comment.\n\nNathann",
    "created_at": "2015-01-09T11:10:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231197",
    "user": "https://github.com/nathanncohen"
}
```

> There is probably some alternate reality where the new description is useful for others to read/search, I just lack the imagination for it.

There is probably one in which comments like that don't make people uselessly angry. Are we in the reality in which you also review the branch ?

> Once you install the shared library into Sage you might just as well go through `module_list.py` as well. 

I do not understand this comment.

Nathann



---

archive/issue_comments_231198.json:
```json
{
    "body": "Replying to [comment:14 ncohen]:\n> > Once you install the shared library into Sage you might just as well go through `module_list.py` as well. \n> \n> I do not understand this comment.\n\nPresumably you want to build a stand-alone C/C++ and Cython project without having to install stuff into Sage. By definition, this should exclude steps that modify Sage directly. I mentioned the code in my github repo, this is the only way to do this currently: Write Makefile that calls gcc and cython directly. \n\nAlso, you shouldn't build shared libraries the way you describe. Its very platform dependent and your steps won't work under OSX, say.",
    "created_at": "2015-01-09T11:32:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231198",
    "user": "https://github.com/vbraun"
}
```

Replying to [comment:14 ncohen]:
> > Once you install the shared library into Sage you might just as well go through `module_list.py` as well. 
> 
> I do not understand this comment.

Presumably you want to build a stand-alone C/C++ and Cython project without having to install stuff into Sage. By definition, this should exclude steps that modify Sage directly. I mentioned the code in my github repo, this is the only way to do this currently: Write Makefile that calls gcc and cython directly. 

Also, you shouldn't build shared libraries the way you describe. Its very platform dependent and your steps won't work under OSX, say.



---

archive/issue_comments_231199.json:
```json
{
    "body": "> Presumably you want to build a stand-alone C/C++ and Cython project without having to install stuff into Sage. By definition, this should exclude steps that modify Sage directly.\n\nI do not understand. In the tutorial no instruction advises the user to change anything inside of Sage. What did you see that I missed?\n\n> I mentioned the code in my github repo, this is the only way to do this currently: Write Makefile that calls gcc and cython directly. \n\nI want to make it as simple as possible, and the current instructions avoid that.\n\n> Also, you shouldn't build shared libraries the way you describe. Its very platform dependent and your steps won't work under OSX, say.\n\nOh. Could you tell me how to build this library under OSX ? I will update the tutorial to explain both situations.\n\nNathann",
    "created_at": "2015-01-09T11:39:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231199",
    "user": "https://github.com/nathanncohen"
}
```

> Presumably you want to build a stand-alone C/C++ and Cython project without having to install stuff into Sage. By definition, this should exclude steps that modify Sage directly.

I do not understand. In the tutorial no instruction advises the user to change anything inside of Sage. What did you see that I missed?

> I mentioned the code in my github repo, this is the only way to do this currently: Write Makefile that calls gcc and cython directly. 

I want to make it as simple as possible, and the current instructions avoid that.

> Also, you shouldn't build shared libraries the way you describe. Its very platform dependent and your steps won't work under OSX, say.

Oh. Could you tell me how to build this library under OSX ? I will update the tutorial to explain both situations.

Nathann



---

archive/issue_comments_231200.json:
```json
{
    "body": "Copying files to SAGE_ROOT/local/lib/ is modifying Sage in my book. E.g. on a global installation (like SMC) you just don't have permissions to do that.",
    "created_at": "2015-01-09T11:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231200",
    "user": "https://github.com/vbraun"
}
```

Copying files to SAGE_ROOT/local/lib/ is modifying Sage in my book. E.g. on a global installation (like SMC) you just don't have permissions to do that.



---

archive/issue_comments_231201.json:
```json
{
    "body": "> Copying files to SAGE_ROOT/local/lib/ is modifying Sage in my book. E.g. on a global installation (like SMC) you just don't have permissions to do that. \n\nThe tutorial does not do that.\n\nNathann",
    "created_at": "2015-01-09T12:01:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231201",
    "user": "https://github.com/nathanncohen"
}
```

> Copying files to SAGE_ROOT/local/lib/ is modifying Sage in my book. E.g. on a global installation (like SMC) you just don't have permissions to do that. 

The tutorial does not do that.

Nathann



---

archive/issue_comments_231202.json:
```json
{
    "body": "> Well, the point is actually that with this you can give it a try and witness that it does work \nSadly, not today :( though it would be more fun than what I have to do.  Though I would recommend removing the `ncohen` references to something more generic, no doubt an oversight.\n> > Copying files to SAGE_ROOT/local/lib/ is modifying Sage in my book.\n> The tutorial does not do that.\nI think Volker is referring to the earlier comment\n> I kept on whipping my test files and go to something new, though: I was able to make it work provided that I copied libdoublevector.so to SAGE_ROOT/local/lib/.\nwhich however I think you are right is not in the tutorial, you seem to have taken a different approach.\n\nAs for the OS X, I think the `.so` files are called `.dylib` (at least sometimes) and on Cygwin `.dll`... but I am not an expert in such things.  Good luck!  This would indeed be a good tutorial to have.",
    "created_at": "2015-01-09T13:09:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231202",
    "user": "https://github.com/kcrisman"
}
```

> Well, the point is actually that with this you can give it a try and witness that it does work 
Sadly, not today :( though it would be more fun than what I have to do.  Though I would recommend removing the `ncohen` references to something more generic, no doubt an oversight.
> > Copying files to SAGE_ROOT/local/lib/ is modifying Sage in my book.
> The tutorial does not do that.
I think Volker is referring to the earlier comment
> I kept on whipping my test files and go to something new, though: I was able to make it work provided that I copied libdoublevector.so to SAGE_ROOT/local/lib/.
which however I think you are right is not in the tutorial, you seem to have taken a different approach.

As for the OS X, I think the `.so` files are called `.dylib` (at least sometimes) and on Cygwin `.dll`... but I am not an expert in such things.  Good luck!  This would indeed be a good tutorial to have.



---

archive/issue_comments_231203.json:
```json
{
    "body": "Hello,\n\n> Sadly, not today :( though it would be more fun than what I have to do.  Though I would recommend removing the `ncohen` references to something more generic, no doubt an oversight.\n\nOkay I can do that... I saw Jeroen's home path in several documents of the developer's manual, so I thought it did not matter.\n\n> I think Volker is referring to the earlier comment\n\nYes, probably.\n\n> As for the OS X, I think the `.so` files are called `.dylib` (at least sometimes) and on Cygwin `.dll`... but I am not an expert in such things.  Good luck!  This would indeed be a good tutorial to have.\n\nHMmm.. Yep, but I need help to write that. I never used those architectures.\n\nNathann",
    "created_at": "2015-01-09T13:32:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231203",
    "user": "https://github.com/nathanncohen"
}
```

Hello,

> Sadly, not today :( though it would be more fun than what I have to do.  Though I would recommend removing the `ncohen` references to something more generic, no doubt an oversight.

Okay I can do that... I saw Jeroen's home path in several documents of the developer's manual, so I thought it did not matter.

> I think Volker is referring to the earlier comment

Yes, probably.

> As for the OS X, I think the `.so` files are called `.dylib` (at least sometimes) and on Cygwin `.dll`... but I am not an expert in such things.  Good luck!  This would indeed be a good tutorial to have.

HMmm.. Yep, but I need help to write that. I never used those architectures.

Nathann



---

archive/issue_comments_231204.json:
```json
{
    "body": "> I saw Jeroen's home path in several documents of the developer's manual, so I thought it did not matter.\n\nProbably not that much, but might as well make it more generic if you have the opportunity.",
    "created_at": "2015-01-09T13:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231204",
    "user": "https://github.com/kcrisman"
}
```

> I saw Jeroen's home path in several documents of the developer's manual, so I thought it did not matter.

Probably not that much, but might as well make it more generic if you have the opportunity.



---

archive/issue_comments_231205.json:
```json
{
    "body": "> Probably not that much, but might as well make it more generic if you have the opportunity.\nhttp://www.sagemath.org/doc/developer/doctesting.html\n\nI'll fix them all...\n\nNathann",
    "created_at": "2015-01-09T13:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231205",
    "user": "https://github.com/nathanncohen"
}
```

> Probably not that much, but might as well make it more generic if you have the opportunity.
http://www.sagemath.org/doc/developer/doctesting.html

I'll fix them all...

Nathann



---

archive/issue_comments_231206.json:
```json
{
    "body": "> I'll fix them all...\n\nWell, I'd make that a separate ticket, to be on the safe side.  Because it could be that several other people, including yourself, disagree with me about this, and I don't feel strongly enough about it to complain that hard - should have the opportunity to shoot me down without making this ticket's review process too long.  My personal feeling is that usually it's best to say something early on, as we do in some tutorials, like \"Here we assume that your home directory and username are `username/` or something analogous to that.",
    "created_at": "2015-01-09T13:44:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231206",
    "user": "https://github.com/kcrisman"
}
```

> I'll fix them all...

Well, I'd make that a separate ticket, to be on the safe side.  Because it could be that several other people, including yourself, disagree with me about this, and I don't feel strongly enough about it to complain that hard - should have the opportunity to shoot me down without making this ticket's review process too long.  My personal feeling is that usually it's best to say something early on, as we do in some tutorials, like "Here we assume that your home directory and username are `username/` or something analogous to that.



---

archive/issue_comments_231207.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-09T13:48:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231207",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_231208.json:
```json
{
    "body": "Replying to [comment:23 kcrisman]:\n> > I'll fix them all...\n> \n> Well, I'd make that a separate ticket\n\nI changed those introduced by this branch.\n\n> Because it could be that several other people, including yourself, disagree with me about this\n\nFor this kind of stuff, let's say that I prefer to make the changes and get my ticket reviewed.\n\n> My personal feeling is that usually it's best to say something early on, as we do in some tutorials, like \"Here we assume that your home directory and username are `username/` or something analogous to that.\n\nI hope that just changing the prompt will make it (more) obvious in this case.\n\nNathann",
    "created_at": "2015-01-09T13:50:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231208",
    "user": "https://github.com/nathanncohen"
}
```

Replying to [comment:23 kcrisman]:
> > I'll fix them all...
> 
> Well, I'd make that a separate ticket

I changed those introduced by this branch.

> Because it could be that several other people, including yourself, disagree with me about this

For this kind of stuff, let's say that I prefer to make the changes and get my ticket reviewed.

> My personal feeling is that usually it's best to say something early on, as we do in some tutorials, like "Here we assume that your home directory and username are `username/` or something analogous to that.

I hope that just changing the prompt will make it (more) obvious in this case.

Nathann



---

archive/issue_comments_231209.json:
```json
{
    "body": "> I hope that just changing the prompt will make it (more) obvious in this case.\nYes, this does a good job.",
    "created_at": "2015-01-09T14:04:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231209",
    "user": "https://github.com/kcrisman"
}
```

> I hope that just changing the prompt will make it (more) obvious in this case.
Yes, this does a good job.



---

archive/issue_comments_231210.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2015-01-09T14:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231210",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_231211.json:
```json
{
    "body": "Issues I found.\n* My compiler gives this.\n\n```\n$ gcc hello.c -o hello; ./hello\nhello.c: In function \u2018main\u2019:\nhello.c:7: warning: return type of \u2018main\u2019 is not \u2018int\u2019\nHello World\n```\n\n* Inconsistent names here:\n\n```\n+  def my_interface_function():\n+      hello_world() # This is the C function from hello.c\n...\n+  sage: my_bridge_function()\n+  Hello World\n```\n\n* Compiler error:\n\n```\n\nsage: %runfile hello_sage.pyx\nCompiling ./hello_sage.pyx...\nError compiling cython file:\nError converting ./hello_sage.pyx to C:\n\n\nError compiling Cython file:\n------------------------------------------------------------\n...\ninclude \"interrupt.pxi\"  # ctrl-c interrupt block support\ninclude \"stdsage.pxi\"  # ctrl-c interrupt block support\n\ninclude \"cdefs.pxi\"\ncdef extern from \"hello.c\":\nvoid hello_world()\n^\n------------------------------------------------------------\n\n_Users_..._hello_sage_pyx_0.pyx:7:0: Expected an increase in indentation level\n\n```\n\n* Even after fixing this:\n\n```\n\nsage: %runfile hello_sage.pyx\nCompiling ./hello_sage.pyx...\nError compiling cython file:\nError compiling ./hello_sage.pyx:\nrunning build\n...\n_Users_..._hello_sage_pyx_0.c:349:19: fatal error: hello.c: No such file or directory\ncompilation terminated.\nerror: command 'gcc' failed with exit status 1\n```\n\n  Maybe my file needs to be in my `PATH`?  But that didn't seem to help.\n* And since presumably I needed to compile `double_vector.c` first, I tried that, but...\n\n```\n\n$ gcc double_vector.c -o double_vector\ndouble_vector.c: In function \u2018sum_of_two_vectors\u2019:\ndouble_vector.c:4: warning: incompatible implicit declaration of built-in function \u2018malloc\u2019\nUndefined symbols for architecture x86_64:\n  \"_main\", referenced from:\n      start in crt1.10.6.o\nld: symbol(s) not found for architecture x86_64\ncollect2: ld returned 1 exit status\n```\n\n  SO tells me there are two errors - need to include stdio.h and then compile with `-c` or provide a main function.  Still get the weird error about it not existing when I try to `%runfile`, though.\n* Similar problems with the final library example.",
    "created_at": "2015-01-09T14:51:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231211",
    "user": "https://github.com/kcrisman"
}
```

Issues I found.
* My compiler gives this.

```
$ gcc hello.c -o hello; ./hello
hello.c: In function ‘main’:
hello.c:7: warning: return type of ‘main’ is not ‘int’
Hello World
```

* Inconsistent names here:

```
+  def my_interface_function():
+      hello_world() # This is the C function from hello.c
...
+  sage: my_bridge_function()
+  Hello World
```

* Compiler error:

```

sage: %runfile hello_sage.pyx
Compiling ./hello_sage.pyx...
Error compiling cython file:
Error converting ./hello_sage.pyx to C:


Error compiling Cython file:
------------------------------------------------------------
...
include "interrupt.pxi"  # ctrl-c interrupt block support
include "stdsage.pxi"  # ctrl-c interrupt block support

include "cdefs.pxi"
cdef extern from "hello.c":
void hello_world()
^
------------------------------------------------------------

_Users_..._hello_sage_pyx_0.pyx:7:0: Expected an increase in indentation level

```

* Even after fixing this:

```

sage: %runfile hello_sage.pyx
Compiling ./hello_sage.pyx...
Error compiling cython file:
Error compiling ./hello_sage.pyx:
running build
...
_Users_..._hello_sage_pyx_0.c:349:19: fatal error: hello.c: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1
```

  Maybe my file needs to be in my `PATH`?  But that didn't seem to help.
* And since presumably I needed to compile `double_vector.c` first, I tried that, but...

```

$ gcc double_vector.c -o double_vector
double_vector.c: In function ‘sum_of_two_vectors’:
double_vector.c:4: warning: incompatible implicit declaration of built-in function ‘malloc’
Undefined symbols for architecture x86_64:
  "_main", referenced from:
      start in crt1.10.6.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
```

  SO tells me there are two errors - need to include stdio.h and then compile with `-c` or provide a main function.  Still get the weird error about it not existing when I try to `%runfile`, though.
* Similar problems with the final library example.



---

archive/issue_comments_231212.json:
```json
{
    "body": "Yo ! Thank you for looking at this.\n\n> * My compiler gives this.\n> {{{\n> $ gcc hello.c -o hello; ./hello\n> hello.c: In function \u2018main\u2019:\n> hello.c:7: warning: return type of \u2018main\u2019 is not \u2018int\u2019\n> Hello World\n> }}}\n\nMy compiler does not say a word. I changed the return type of main to int and added a 'return 0'. I would prefer to remove this `return 0` (my compiler does not complain either if I do) for that is irrelevant information to what I want to illustrate. Can you tell me what it gives for you ?\n\n> * Inconsistent names here:\n\nFixed.\n\n> * Compiler error:\n\nI fixed the indentation level.\n\n> * Even after fixing this:\n> {{{\n> \n> sage: %runfile hello_sage.pyx\n> Compiling ./hello_sage.pyx...\n> Error compiling cython file:\n> Error compiling ./hello_sage.pyx:\n> running build\n> ...\n> _Users_..._hello_sage_pyx_0.c:349:19: fatal error: hello.c: No such file or directory\n> compilation terminated.\n> error: command 'gcc' failed with exit status 1\n> }}}\n\nThis I do not understand. Is hello_sage is in the same folder as hello.c ? `O_o` I really do not understand that.\n\n>   Maybe my file needs to be in my `PATH`?  But that didn't seem to help.\n\nNo no, you should not have to. And I would prefer to avoid asking the user to change the PATH anyway `O_o`\n\n> * And since presumably I needed to compile `double_vector.c` first, I tried that, but...\n\nNono, you do not need to compile it by itself (and when you do it complains because no 'main' function is defined, which is correct). It gets compiled when you call \"runfile\". Actually, you do not need to compile 'hello.c' at first. It is just to give an example. If it gets complicated we can remove this compilation of \"hello world\", actually. It is not necessary.\n\n> * Similar problems with the final library example.\n\nWhen you say \"similar problem\", is it also about 'main' ? `O_o`\n\nNathann",
    "created_at": "2015-01-09T15:04:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231212",
    "user": "https://github.com/nathanncohen"
}
```

Yo ! Thank you for looking at this.

> * My compiler gives this.
> {{{
> $ gcc hello.c -o hello; ./hello
> hello.c: In function ‘main’:
> hello.c:7: warning: return type of ‘main’ is not ‘int’
> Hello World
> }}}

My compiler does not say a word. I changed the return type of main to int and added a 'return 0'. I would prefer to remove this `return 0` (my compiler does not complain either if I do) for that is irrelevant information to what I want to illustrate. Can you tell me what it gives for you ?

> * Inconsistent names here:

Fixed.

> * Compiler error:

I fixed the indentation level.

> * Even after fixing this:
> {{{
> 
> sage: %runfile hello_sage.pyx
> Compiling ./hello_sage.pyx...
> Error compiling cython file:
> Error compiling ./hello_sage.pyx:
> running build
> ...
> _Users_..._hello_sage_pyx_0.c:349:19: fatal error: hello.c: No such file or directory
> compilation terminated.
> error: command 'gcc' failed with exit status 1
> }}}

This I do not understand. Is hello_sage is in the same folder as hello.c ? `O_o` I really do not understand that.

>   Maybe my file needs to be in my `PATH`?  But that didn't seem to help.

No no, you should not have to. And I would prefer to avoid asking the user to change the PATH anyway `O_o`

> * And since presumably I needed to compile `double_vector.c` first, I tried that, but...

Nono, you do not need to compile it by itself (and when you do it complains because no 'main' function is defined, which is correct). It gets compiled when you call "runfile". Actually, you do not need to compile 'hello.c' at first. It is just to give an example. If it gets complicated we can remove this compilation of "hello world", actually. It is not necessary.

> * Similar problems with the final library example.

When you say "similar problem", is it also about 'main' ? `O_o`

Nathann



---

archive/issue_comments_231213.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-09T15:05:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231213",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_231214.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-10T05:11:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231214",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_231215.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2015-01-10T05:28:02Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231215",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_231216.json:
```json
{
    "body": "Changing status from needs_work to needs_info.",
    "created_at": "2015-01-10T06:06:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231216",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_work to needs_info.



---

archive/issue_comments_231217.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2015-01-11T06:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231217",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_231218.json:
```json
{
    "body": "Changing status from needs_info to needs_review.",
    "created_at": "2015-01-12T17:27:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231218",
    "user": "https://github.com/nathanncohen"
}
```

Changing status from needs_info to needs_review.



---

archive/issue_comments_231219.json:
```json
{
    "body": "Hello,\n\nI tried with my MBA/OSX Yosemite.\nThe documentation is clear and useful.\nI'm able to reproduce all examples without error/warning.\n\nUnless others have difficulties on other systems, I vote for positive review.\nLet me know if I can change the status.\n\nDavid.",
    "created_at": "2015-01-17T09:06:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231219",
    "user": "https://github.com/dcoudert"
}
```

Hello,

I tried with my MBA/OSX Yosemite.
The documentation is clear and useful.
I'm able to reproduce all examples without error/warning.

Unless others have difficulties on other systems, I vote for positive review.
Let me know if I can change the status.

David.



---

archive/issue_comments_231220.json:
```json
{
    "body": "Yo,\n\n> I tried with my MBA/OSX Yosemite.\n> The documentation is clear and useful.\n> I'm able to reproduce all examples without error/warning.\n\nOh, so it works on Mac too ? Cool !\n\n> Unless others have difficulties on other systems, I vote for positive review.\n> Let me know if I can change the status.\n\nWell I'd vote for that.. And if there is something wrong with some distribution, we can add a note later. And hopefully in the meantime the guy will figure out how to make it work.\n\nNathann",
    "created_at": "2015-01-17T10:30:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231220",
    "user": "https://github.com/nathanncohen"
}
```

Yo,

> I tried with my MBA/OSX Yosemite.
> The documentation is clear and useful.
> I'm able to reproduce all examples without error/warning.

Oh, so it works on Mac too ? Cool !

> Unless others have difficulties on other systems, I vote for positive review.
> Let me know if I can change the status.

Well I'd vote for that.. And if there is something wrong with some distribution, we can add a note later. And hopefully in the meantime the guy will figure out how to make it work.

Nathann



---

archive/issue_comments_231221.json:
```json
{
    "body": "So let's go ;)",
    "created_at": "2015-01-17T10:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231221",
    "user": "https://github.com/dcoudert"
}
```

So let's go ;)



---

archive/issue_comments_231222.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2015-01-17T10:34:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231222",
    "user": "https://github.com/dcoudert"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_231223.json:
```json
{
    "body": "This also works for me now, though I have no idea why.  Maybe because we removed the original compilation and Sage compiled it wherever Sage compiles things.",
    "created_at": "2015-01-17T20:01:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231223",
    "user": "https://github.com/kcrisman"
}
```

This also works for me now, though I have no idea why.  Maybe because we removed the original compilation and Sage compiled it wherever Sage compiles things.



---

archive/issue_comments_231224.json:
```json
{
    "body": "> This also works for me now, though I have no idea why.  Maybe because we removed the original compilation and Sage compiled it wherever Sage compiles things.\n\nAhahah. Well, remember? \"Theory is when you know everything but nothing works, practice is when everything works but nobody knows why\" `:-P`\n\nNathann",
    "created_at": "2015-01-17T23:03:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231224",
    "user": "https://github.com/nathanncohen"
}
```

> This also works for me now, though I have no idea why.  Maybe because we removed the original compilation and Sage compiled it wherever Sage compiles things.

Ahahah. Well, remember? "Theory is when you know everything but nothing works, practice is when everything works but nobody knows why" `:-P`

Nathann



---

archive/issue_comments_231225.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2015-01-24T13:19:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17368#issuecomment-231225",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_016753.json:
```json
{
    "actor": "@vbraun",
    "created_at": "2015-01-24T13:19:04Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/17368",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/17368#event-16753"
}
```
