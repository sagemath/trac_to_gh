# Issue 10630: Hermitian inner product

Issue created by migration from Trac.

Original creator: rbeezer

Original creation time: 2011-01-24 22:43:26

Assignee: jason, was

One patch adds the Hermitian inner product, by that name, for use with vectors over the complex numbers.

Second patch is totally doctests, no code changes.  Explains, expands, and cross-references the dot product, inner product, Hermitian inner product and vector norm.


---

Attachment


---

Comment by rbeezer created at 2011-01-24 22:50:46

Apply patches in order given here:

Apply: trac_10683-hermitian_inner_product.patch

Apply: trac_10683-vector-products-docs.patch


---

Comment by rbeezer created at 2011-01-24 22:50:46

Changing status from new to needs_review.


---

Comment by rbeezer created at 2011-01-24 22:59:42

Forgot: this depends on several patches, assuming 4.6.2.alpha0 or better (for #10364).

#10537, #10536 in that order, plus independently #10541


---

Attachment

Apply first


---

Attachment

Apply second


---

Comment by rbeezer created at 2011-02-17 19:13:45

After working with this for a while, I though it better to build off the dot product, rather than the inner product with its custom inner product matrices, due to the havoc that could result by specifying a matrix without the necessary properties for certain algorithms to run properly.

v2 series reflects this change.  On 4.6.2.alpha4 depends only on #10536 now.


---

Comment by kcrisman created at 2011-03-18 01:12:28

This is really good.  Docs are fine, excellent examples.  I could barely think of anything to test. 

```
sage: k.<b> = FiniteField(9); k
Finite Field in b of size 3^2
sage: vector([1,1]).hermitian_inner_product(vector(k,[1,b]))
b + 1
sage: vector([1,i]).hermitian_inner_product(vector(k,[1,b]))
---------------------------------------------------------------------------
ArithmeticError: 
```

Which is a little obscure, especially if this were buried in other code.  Of course, 

```
sage: vector([1,i]).dot_product(vector(k,[1,b]))
---------------------------------------------------------------------------
ArithmeticError: 
```

So I don't know whether this is a reason to deny positive review.  What do you think?  Separate ticket, or fix here?


---

Comment by kcrisman created at 2011-03-18 01:12:28

Changing status from needs_review to needs_info.


---

Comment by rbeezer created at 2011-03-18 05:53:49

Changing status from needs_info to needs_review.


---

Comment by rbeezer created at 2011-03-18 05:53:49

Replying to [comment:5 kcrisman]:
> So I don't know whether this is a reason to deny positive review.  What do you think?  Separate ticket, or fix here?  

This routine is an extension of the idea of a dot product.  So I'd say the dot product is broken and needs to be more careful about mixing the two base rings.  Maybe it should check compatibility, and if there is no conflict, then go on its way.  If there is a conflict, the vectors should be converted to a common base ring, then do the dot product.  If that does not work, then the routine should fail gracefully.

So I'd like that to be on another ticket.  If you make the ticket and cc me, then I'll put it on my list for SD 29 next week, and coordinate with this ticket, if necessary.  But I'd like to see this go in pretty much as-is and let improvements to the "plain" dot product improve this routine from outside.

Thanks,
Rob


---

Comment by kcrisman created at 2011-03-18 14:46:34

Changing status from needs_review to positive_review.


---

Comment by kcrisman created at 2011-03-18 14:46:34

See #10960 - it's really a problem for multiplication in general, not the dot or Hermitian product, as it turns out, so definitely a different ticket is needed.

Positive review!


---

Comment by jdemeyer created at 2011-04-04 09:17:28

Changing status from positive_review to needs_work.


---

Comment by jdemeyer created at 2011-04-04 09:17:28

This needs to be rebased to sage-4.7.alpha3:

```
applying /scratch/jdemeyer/merger/downloads/trac_10683-hermitian_inner_product-v2.patch
patching file sage/modules/free_module_element.pyx
Hunk #1 FAILED at 2126
1 out of 1 hunks FAILED -- saving rejects to file sage/modules/free_module_element.pyx.rej
abort: patch failed to apply
```



---

Attachment

v3 patch is a trivial rebase, no changes.  Just didn't match up with surrounding routines.  So I have sent this back to positive review (and made the depends/apply block look really pretty).


---

Comment by rbeezer created at 2011-04-04 22:00:41

Changing status from needs_work to positive_review.


---

Comment by jdemeyer created at 2011-04-07 19:57:41

Resolution: fixed


---

Comment by rbeezer created at 2011-04-19 00:25:03

Feeding the patchbot:

Depends on #10536 

Apply: trac_10683-hermitian_inner_product-v3.patch, trac_10683-vector-products-docs-v2.patch
