# Issue 26186: Move some references from combinat to master reference file

archive/issues_026186.json:
```json
{
    "body": "CC:  chapoton\n\nIdeally, we would put all references into the master reference file. This handles some of the references in `sage/combinat`, enough so that a Python 3 build has a chance to succeed in building the documentation.\n\nIssue created by migration from https://trac.sagemath.org/ticket/26423\n\n",
    "created_at": "2018-10-06T21:18:12Z",
    "labels": [
        "documentation",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-8.5",
    "title": "Move some references from combinat to master reference file",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/26186",
    "user": "jhpalmieri"
}
```
CC:  chapoton

Ideally, we would put all references into the master reference file. This handles some of the references in `sage/combinat`, enough so that a Python 3 build has a chance to succeed in building the documentation.

Issue created by migration from https://trac.sagemath.org/ticket/26423





---

archive/issue_comments_368968.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-06T21:21:54Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368968",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_368969.json:
```json
{
    "body": "Regarding building the documentation with Python 3: if I also delete the `sagenb` documentation from the reference manual, then I run into this error:\n\n```\n[reference]   File \"/Users/palmieri/Desktop/Sage_stuff/sage_builds/PYTHON3/sage-8.4.beta7/local/lib/python3.6/site-packages/sphinx/search/__init__.py\", line 174, in loads\n[reference]     if not data or not s.startswith(self.PREFIX.encode()) or not \\\n[reference] TypeError: startswith first arg must be str or a tuple of str, not bytes\n```\n\nIf I fix this by modifying Sphinx (probably not the right choice), the documentation builds in Python 3.\n\nIt would be good to track down where this bytes/str problem is coming from: it's probably some information that we're passing incorrectly to Sphinx.",
    "created_at": "2018-10-06T21:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368969",
    "user": "jhpalmieri"
}
```

Regarding building the documentation with Python 3: if I also delete the `sagenb` documentation from the reference manual, then I run into this error:

```
[reference]   File "/Users/palmieri/Desktop/Sage_stuff/sage_builds/PYTHON3/sage-8.4.beta7/local/lib/python3.6/site-packages/sphinx/search/__init__.py", line 174, in loads
[reference]     if not data or not s.startswith(self.PREFIX.encode()) or not \
[reference] TypeError: startswith first arg must be str or a tuple of str, not bytes
```

If I fix this by modifying Sphinx (probably not the right choice), the documentation builds in Python 3.

It would be good to track down where this bytes/str problem is coming from: it's probably some information that we're passing incorrectly to Sphinx.



---

archive/issue_comments_368970.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2018-10-06T21:24:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368970",
    "user": "jhpalmieri"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_368971.json:
```json
{
    "body": "branch is red...",
    "created_at": "2018-10-07T10:02:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368971",
    "user": "chapoton"
}
```

branch is red...



---

archive/issue_comments_368972.json:
```json
{
    "body": "I'll try again after #26422 is merged, I think.",
    "created_at": "2018-10-07T19:48:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368972",
    "user": "jhpalmieri"
}
```

I'll try again after #26422 is merged, I think.



---

archive/issue_comments_368973.json:
```json
{
    "body": "To make the docs build, I removed a reference to `<facade-sets>`. I shouldn't have done this, so I should restore it once #26422 is merged and this ticket is ready to be worked on again. (So this paragraph is a reminder to myself to do this, and a reminder to anyone else to make sure that I did this.)\n\nI removed it because it produces an error, and I believe that the reason for the error is that in the file `sage/categories/sets_cat.py`, the top-level class is included in the documentation, but the `SubcategoryMethods` are omitted, and those include the location to which `<facade-sets>` is a reference. I don't know why the behavior is different with Python 3 vs. Python 2, but we need a proper fix, and in particular, we don't want to be omitting large chunks of the documentation. (I am guessing that `ElementMethods` are also omitted, etc.)\n\nWe should open a new ticket for that.",
    "created_at": "2018-10-09T17:10:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368973",
    "user": "jhpalmieri"
}
```

To make the docs build, I removed a reference to `<facade-sets>`. I shouldn't have done this, so I should restore it once #26422 is merged and this ticket is ready to be worked on again. (So this paragraph is a reminder to myself to do this, and a reminder to anyone else to make sure that I did this.)

I removed it because it produces an error, and I believe that the reason for the error is that in the file `sage/categories/sets_cat.py`, the top-level class is included in the documentation, but the `SubcategoryMethods` are omitted, and those include the location to which `<facade-sets>` is a reference. I don't know why the behavior is different with Python 3 vs. Python 2, but we need a proper fix, and in particular, we don't want to be omitting large chunks of the documentation. (I am guessing that `ElementMethods` are also omitted, etc.)

We should open a new ticket for that.



---

archive/issue_comments_368974.json:
```json
{
    "body": "See #26449 for Sphinx issues.",
    "created_at": "2018-10-09T22:12:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368974",
    "user": "jhpalmieri"
}
```

See #26449 for Sphinx issues.



---

archive/issue_comments_368975.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-27T20:35:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368975",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_368976.json:
```json
{
    "body": "This is now rebased on top of 8.5.beta1.",
    "created_at": "2018-10-27T20:36:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368976",
    "user": "jhpalmieri"
}
```

This is now rebased on top of 8.5.beta1.



---

archive/issue_comments_368977.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2018-10-27T20:38:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368977",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_368978.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2018-10-27T23:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368978",
    "user": "tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_368979.json:
```json
{
    "body": "Hopefully this will not have any conflicts...",
    "created_at": "2018-10-27T23:35:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368979",
    "user": "tscrim"
}
```

Hopefully this will not have any conflicts...



---

archive/issue_comments_368980.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2018-10-29T22:46:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/26186",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/26186#issuecomment-368980",
    "user": "vbraun"
}
```

Resolution: fixed
