# Issue 20649: Upgrade lrslib to version 6.2

Issue created by migration from https://trac.sagemath.org/ticket/20886

Original creator: mkoeppe

Original creation time: 2016-06-27 05:15:04

CC:  dimpase vdelecroix mkoeppe chapoton fbissey tscrim vinceknight campbell vbraun jdemeyer

http://cgm.cs.mcgill.ca/~avis/C/lrs.html


---

Comment by mkoeppe created at 2016-06-28 04:44:47

Thanks for the tarball location. I think I made the patch for last version from here: https://github.com/mkoeppe/lrslib


---

Comment by kcrisman created at 2016-06-28 14:20:50

Though `lrs` would still be an optional package (I think it is currently)?


---

Comment by mkoeppe created at 2016-06-28 19:58:45

The 'lrs' package was renamed to 'lrslib' while transitioning to new-style packages (#18127).
'lrslib' installs both the library and the executables.


---

Comment by mkoeppe created at 2016-06-28 20:38:53

New commits:


---

Comment by mkoeppe created at 2016-06-28 20:38:53

Changing status from new to needs_review.


---

Comment by kcrisman created at 2016-06-28 22:45:04

When you do this, be sure to test all the game theory stuff with the optional package.  Do they need renaming?  I don't think I even knew about this renaming to lib.


---

Comment by mkoeppe created at 2016-06-28 22:47:23

The renaming was done in #18127, and at that time some "#optional" tests had to be adjusted.


---

Comment by kcrisman created at 2016-06-28 22:50:22

Awesome.


---

Comment by git created at 2016-06-28 23:16:10

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2016-06-28 23:34:17

Needs testing (especially on non-Mac OS X).


---

Comment by tscrim created at 2016-06-29 17:14:52

I tried to use the link on the ticket for the upstream tarball, and there seems to be a checksum difference (in addition to the file name being wrong).


---

Comment by tscrim created at 2016-06-29 17:14:52

Changing status from needs_review to needs_work.


---

Comment by mkoeppe created at 2016-06-29 17:18:18

Sorry, I had forgotten to update the link.


---

Comment by mkoeppe created at 2016-06-29 17:18:26

Changing status from needs_work to needs_review.


---

Comment by tscrim created at 2016-06-29 18:17:30

Changing status from needs_review to needs_work.


---

Comment by tscrim created at 2016-06-29 18:17:30

Thanks (though the tarball have a `.` instead of a `+` in the name). However, this failed to build for me with Ubuntu 14.04 LTS due to it not finding boost:

```
[lrslib-062+autotools-2016-06-28a] /usr/bin/ld: cannot find -lboost_thread
[lrslib-062+autotools-2016-06-28a] /usr/bin/ld: cannot find -lboost_system
```

Does this need the full version of boost or is Sage's stripped down version sufficient? FYI - I don't have a system-wide install of boost.


---

Comment by tscrim created at 2016-06-29 18:20:42

Also, to that effect, we should add a `dependencies` file.


---

Comment by mkoeppe created at 2016-06-29 18:21:30

It looks like I need to improve the configure script to detect that boost_thread and boost_system are missing.

Please try with the full boost package, this is what I installed.
I'll add it to dependencies.


---

Comment by git created at 2016-06-29 19:10:35

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2016-06-29 19:11:23

Changing status from needs_work to needs_review.


---

Comment by kcrisman created at 2016-06-30 01:35:43

Replying to [comment:27 mkoeppe]:
> It looks like I need to improve the configure script to detect that boost_thread and boost_system are missing.
> 
> Please try with the full boost package, this is what I installed.

That's annoying, considering we didn't need that before.  Is there any possibility of an lrs which doesn't require the full boost?


---

Comment by tscrim created at 2016-06-30 04:28:45

I would somewhat hope there could be a way to link it to the cropped version of boost we ship with Sage. I could not test if this would link to the systemwide boost or would just force an install of the full Sage spkg boost. However, this worked without any trouble for me on my Ubuntu machine (which also installed boost).


---

Comment by tscrim created at 2016-07-01 06:23:56

Changing keywords from "" to "days78".


---

Comment by git created at 2016-07-06 12:59:11

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2016-07-06 13:12:53

I've updated the package's configure script so it detects whether the full boost is available. 
If so, it builds one additional binary, `plrs`, which is not used by current Sage.


---

Comment by tscrim created at 2016-07-06 21:16:08

Thank you. I think, which is why I've cc-ed Jeroen and Volker if one of them could confirm, that the correct way to do the dependencies file is to use `$(MP_LIBRARY)`. Once that is done, I think we can set this to a positive review.


---

Comment by vbraun created at 2016-07-06 21:59:45

Make it so


---

Comment by git created at 2016-07-06 22:13:54

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by tscrim created at 2016-07-07 03:39:27

This looks good to me now; thanks.

Note to Volker, you will have to rename the tarball when you put it on the server.


---

Comment by tscrim created at 2016-07-07 03:39:27

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2016-07-07 03:44:27

Thanks for reviewing, Travis!


---

Comment by mkoeppe created at 2016-07-07 05:26:26

Follow-up: 
 - #20969: Expose new lrslib features: `lrsnash`, `2nash`
 - #18199: sage.geometry.polyhedron should have an lrs (lrslib) backend


---

Comment by vbraun created at 2016-07-08 07:09:57

Resolution: fixed
