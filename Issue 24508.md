# Issue 24508: leaking in the symbolic ring

Issue created by migration from https://trac.sagemath.org/ticket/24745

Original creator: vdelecroix

Original creation time: 2018-02-16 08:57:58

CC:  rws

The following operation creates a leak

```
pi * I * RR.one()
```


This can be tested with

```
import gc

def num_complex():
    gc.collect()
    return sum(1 for t in gc.get_objects() if type(t) is sage.rings.complex_number.ComplexNumber)

for _ in range(10):
    print num_complex()
    for _ in range(10):
        a = pi * I * RR.one()
```


Original report on [sage-devel](https://groups.google.com/forum/#!topic/sage-devel/pRXccDmXkIE).


---

Comment by rws created at 2018-02-16 13:54:04

Thanks for the excellent diagnostics. I will commit a Pynac patch which depends on #24668 (0.7.16). There was a superfluous `Py_INCREF` in the in-place multiplication code.


---

Comment by rws created at 2018-02-16 14:29:20

Note you need beta6 (or a copy of pynac-0.7.16 in upstream/) to test this.
----
New commits:


---

Comment by rws created at 2018-02-16 14:29:20

Changing status from new to needs_review.


---

Comment by jdemeyer created at 2018-02-16 19:02:07

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2018-02-18 12:52:35

Resolution: fixed
