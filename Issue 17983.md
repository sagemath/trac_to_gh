# Issue 17983: Bug when creating a polyhedron with coefficients in RR

archive/issues_017983.json:
```json
{
    "body": "CC:  @fchapoton @jplab @mkoeppe\n\n\n```\nsage: omega = 2*RR.pi() / 5\nsage: verts = [((i*omega).sin(), (i*omega).cos()) for i in range(5)]\nsage: verts\nsage: Polyhedron(vertices=verts, base_ring=RR)\nTraceback (most recent call last):\n...\n/sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/double_description_inhomogeneous.pyc in _extract_Vrep(self, DD)\n    309         vertices = []\n    310         for v in R1 + L1:\n--> 311             assert v[0] == 1\n    312             vertices.append(v[1:])\n    313         self.vertices = vertices\nAssertionError: \n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/18220\n\n",
    "created_at": "2015-04-16T09:25:44Z",
    "labels": [
        "geometry",
        "major",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-7.4",
    "title": "Bug when creating a polyhedron with coefficients in RR",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/17983",
    "user": "@videlec"
}
```
CC:  @fchapoton @jplab @mkoeppe


```
sage: omega = 2*RR.pi() / 5
sage: verts = [((i*omega).sin(), (i*omega).cos()) for i in range(5)]
sage: verts
sage: Polyhedron(vertices=verts, base_ring=RR)
Traceback (most recent call last):
...
/sage/local/lib/python2.7/site-packages/sage/geometry/polyhedron/double_description_inhomogeneous.pyc in _extract_Vrep(self, DD)
    309         vertices = []
    310         for v in R1 + L1:
--> 311             assert v[0] == 1
    312             vertices.append(v[1:])
    313         self.vertices = vertices
AssertionError: 
```


Issue created by migration from https://trac.sagemath.org/ticket/18220





---

archive/issue_comments_241716.json:
```json
{
    "body": "Changing keywords from \"\" to \"bug\".",
    "created_at": "2015-04-16T14:45:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241716",
    "user": "@videlec"
}
```

Changing keywords from "" to "bug".



---

archive/issue_comments_241717.json:
```json
{
    "body": "Another bug for RDF polyhedra: #21270",
    "created_at": "2016-06-27T04:48:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241717",
    "user": "@mkoeppe"
}
```

Another bug for RDF polyhedra: #21270



---

archive/issue_comments_241718.json:
```json
{
    "body": "New commits:",
    "created_at": "2017-03-06T01:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241718",
    "user": "@videlec"
}
```

New commits:



---

archive/issue_comments_241719.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2017-03-06T01:12:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241719",
    "user": "@videlec"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_241720.json:
```json
{
    "body": "Changing keywords from \"bug\" to \"bug, days84\".",
    "created_at": "2017-03-06T01:13:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241720",
    "user": "@videlec"
}
```

Changing keywords from "bug" to "bug, days84".



---

archive/issue_comments_241721.json:
```json
{
    "body": "The tests pass on my machine with 7.6.beta6. The documentation looks fine as well. No idea what the quasar bot is up to.\n\nThe I believe it is a good idea to raise an error for such a behaviour.\n\nMatthias, any thoughts? Does that look good for you?",
    "created_at": "2017-03-06T18:00:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241721",
    "user": "@jplab"
}
```

The tests pass on my machine with 7.6.beta6. The documentation looks fine as well. No idea what the quasar bot is up to.

The I believe it is a good idea to raise an error for such a behaviour.

Matthias, any thoughts? Does that look good for you?



---

archive/issue_comments_241722.json:
```json
{
    "body": "I agree with disabling it for floating point,\nbut I'm not sure about disabling it for the SR as well. Maybe there are some people who want to work with polytopes with transcendental coordinates?",
    "created_at": "2017-03-07T22:38:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241722",
    "user": "@mkoeppe"
}
```

I agree with disabling it for floating point,
but I'm not sure about disabling it for the SR as well. Maybe there are some people who want to work with polytopes with transcendental coordinates?



---

archive/issue_comments_241723.json:
```json
{
    "body": "**I** would like to make computations with trascendental coordinates. However, the symbolic ring is not the proper way to do it. I am very much against special casing SR anywhere. SR has its own logic that does not fit at all with the Sage logic of parents and coercion. Moreover, comparison is completely broken\n\n```\nsage: bool(pi == 245850922/78256779)\nTrue\n```\n",
    "created_at": "2017-03-07T22:57:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241723",
    "user": "@videlec"
}
```

**I** would like to make computations with trascendental coordinates. However, the symbolic ring is not the proper way to do it. I am very much against special casing SR anywhere. SR has its own logic that does not fit at all with the Sage logic of parents and coercion. Moreover, comparison is completely broken

```
sage: bool(pi == 245850922/78256779)
True
```




---

archive/issue_comments_241724.json:
```json
{
    "body": "Then, let's restrict the usage of the symbolic ring with polyhedron.\n\nIf it ever happens that there is a use case of the symbolic ring, we may consider adapting it properly then.",
    "created_at": "2017-03-08T21:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241724",
    "user": "@jplab"
}
```

Then, let's restrict the usage of the symbolic ring with polyhedron.

If it ever happens that there is a use case of the symbolic ring, we may consider adapting it properly then.



---

archive/issue_comments_241725.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2017-03-08T21:26:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241725",
    "user": "@jplab"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_241726.json:
```json
{
    "body": "WAIT!!! Are you proposing to drop support for RR/RDF and other floating points?! With all the bugs it is still useful to be able to operate with them, if you think it is too dangerous, how about throwing a warning?",
    "created_at": "2017-03-09T04:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241726",
    "user": "@novoselt"
}
```

WAIT!!! Are you proposing to drop support for RR/RDF and other floating points?! With all the bugs it is still useful to be able to operate with them, if you think it is too dangerous, how about throwing a warning?



---

archive/issue_comments_241727.json:
```json
{
    "body": "Changing status from positive_review to needs_info.",
    "created_at": "2017-03-09T04:02:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241727",
    "user": "@novoselt"
}
```

Changing status from positive_review to needs_info.



---

archive/issue_comments_241728.json:
```json
{
    "body": "As mentioned in the title description, it only concerns the \"field\" backend that is **very much** broken for non exact fields. Other backends still support `RDF` as it used to be.",
    "created_at": "2017-03-09T12:44:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241728",
    "user": "@videlec"
}
```

As mentioned in the title description, it only concerns the "field" backend that is **very much** broken for non exact fields. Other backends still support `RDF` as it used to be.



---

archive/issue_comments_241729.json:
```json
{
    "body": "OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...",
    "created_at": "2017-03-10T05:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241729",
    "user": "@novoselt"
}
```

OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...



---

archive/issue_comments_241730.json:
```json
{
    "body": "Changing status from needs_info to positive_review.",
    "created_at": "2017-03-10T05:26:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241730",
    "user": "@novoselt"
}
```

Changing status from needs_info to positive_review.



---

archive/issue_comments_241731.json:
```json
{
    "body": "> OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...\n\nNo worries!\n\nIt is true that the name 'field' is confusing...",
    "created_at": "2017-03-10T08:07:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241731",
    "user": "@jplab"
}
```

> OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...

No worries!

It is true that the name 'field' is confusing...



---

archive/issue_comments_241732.json:
```json
{
    "body": "Replying to [comment:15 jipilab]:\n> > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...\n> \n> No worries!\n> \n> It is true that the name 'field' is confusing...\n\nWhat about changing it to 'generic'?",
    "created_at": "2017-03-10T08:18:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241732",
    "user": "@videlec"
}
```

Replying to [comment:15 jipilab]:
> > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...
> 
> No worries!
> 
> It is true that the name 'field' is confusing...

What about changing it to 'generic'?



---

archive/issue_comments_241733.json:
```json
{
    "body": "Replying to [comment:16 vdelecroix]:\n> Replying to [comment:15 jipilab]:\n> > > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...\n> > \n> > No worries!\n> > \n> > It is true that the name 'field' is confusing...\n> \n> What about changing it to 'generic'?\n\nor 'generic_exact', or 'sage_toy', or ...",
    "created_at": "2017-03-10T08:19:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241733",
    "user": "@videlec"
}
```

Replying to [comment:16 vdelecroix]:
> Replying to [comment:15 jipilab]:
> > > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...
> > 
> > No worries!
> > 
> > It is true that the name 'field' is confusing...
> 
> What about changing it to 'generic'?

or 'generic_exact', or 'sage_toy', or ...



---

archive/issue_comments_241734.json:
```json
{
    "body": "Replying to [comment:17 vdelecroix]:\n> Replying to [comment:16 vdelecroix]:\n> > Replying to [comment:15 jipilab]:\n> > > > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...\n> > > \n> > > No worries!\n> > > \n> > > It is true that the name 'field' is confusing...\n> > \n> > What about changing it to 'generic'?\n> \n> or 'generic_exact', or 'sage_toy', or ...\n\nIn this setup I would not call the backend generic, because it does not provide the principal reason to use it: irrational exact values.\n\nWhat about `irrational_exact` ?",
    "created_at": "2017-03-10T08:37:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241734",
    "user": "@jplab"
}
```

Replying to [comment:17 vdelecroix]:
> Replying to [comment:16 vdelecroix]:
> > Replying to [comment:15 jipilab]:
> > > > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...
> > > 
> > > No worries!
> > > 
> > > It is true that the name 'field' is confusing...
> > 
> > What about changing it to 'generic'?
> 
> or 'generic_exact', or 'sage_toy', or ...

In this setup I would not call the backend generic, because it does not provide the principal reason to use it: irrational exact values.

What about `irrational_exact` ?



---

archive/issue_comments_241735.json:
```json
{
    "body": "Replying to [comment:18 jipilab]:\n> Replying to [comment:17 vdelecroix]:\n> > Replying to [comment:16 vdelecroix]:\n> > > Replying to [comment:15 jipilab]:\n> > > > > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...\n> > > > \n> > > > No worries!\n> > > > \n> > > > It is true that the name 'field' is confusing...\n> > > \n> > > What about changing it to 'generic'?\n> > \n> > or 'generic_exact', or 'sage_toy', or ...\n> \n> In this setup I would not call the backend generic, because it does not provide the principal reason to use it: irrational exact values.\n> \n> What about `irrational_exact` ?\n\nIt is even more confusing since this backend can deal with rationals... `generic_exact`?",
    "created_at": "2017-03-10T08:41:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241735",
    "user": "@videlec"
}
```

Replying to [comment:18 jipilab]:
> Replying to [comment:17 vdelecroix]:
> > Replying to [comment:16 vdelecroix]:
> > > Replying to [comment:15 jipilab]:
> > > > > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...
> > > > 
> > > > No worries!
> > > > 
> > > > It is true that the name 'field' is confusing...
> > > 
> > > What about changing it to 'generic'?
> > 
> > or 'generic_exact', or 'sage_toy', or ...
> 
> In this setup I would not call the backend generic, because it does not provide the principal reason to use it: irrational exact values.
> 
> What about `irrational_exact` ?

It is even more confusing since this backend can deal with rationals... `generic_exact`?



---

archive/issue_comments_241736.json:
```json
{
    "body": "Replying to [comment:19 vdelecroix]:\n> Replying to [comment:18 jipilab]:\n> > Replying to [comment:17 vdelecroix]:\n> > > Replying to [comment:16 vdelecroix]:\n> > > > Replying to [comment:15 jipilab]:\n> > > > > > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...\n> > > > > \n> > > > > No worries!\n> > > > > \n> > > > > It is true that the name 'field' is confusing...\n> > > > \n> > > > What about changing it to 'generic'?\n> > > \n> > > or 'generic_exact', or 'sage_toy', or ...\n> > \n> > In this setup I would not call the backend generic, because it does not provide the principal reason to use it: irrational exact values.\n> > \n> > What about `irrational_exact` ?\n> \n> It is even more confusing since this backend can deal with rationals... `generic_exact`?\n\nRight... hmm.\n\n+1 for `generic_exact`.\n\n;-)",
    "created_at": "2017-03-10T08:48:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241736",
    "user": "@jplab"
}
```

Replying to [comment:19 vdelecroix]:
> Replying to [comment:18 jipilab]:
> > Replying to [comment:17 vdelecroix]:
> > > Replying to [comment:16 vdelecroix]:
> > > > Replying to [comment:15 jipilab]:
> > > > > > OK, sorry for the false alarm (it was an end of a tough day yesterday ;-)). I guess I got confused by the strange name for a backend as well...
> > > > > 
> > > > > No worries!
> > > > > 
> > > > > It is true that the name 'field' is confusing...
> > > > 
> > > > What about changing it to 'generic'?
> > > 
> > > or 'generic_exact', or 'sage_toy', or ...
> > 
> > In this setup I would not call the backend generic, because it does not provide the principal reason to use it: irrational exact values.
> > 
> > What about `irrational_exact` ?
> 
> It is even more confusing since this backend can deal with rationals... `generic_exact`?

Right... hmm.

+1 for `generic_exact`.

;-)



---

archive/issue_comments_241737.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2017-03-11T10:20:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241737",
    "user": "@vbraun"
}
```

Resolution: fixed



---

archive/issue_comments_241738.json:
```json
{
    "body": "I just saw that in the documentation of version 7.6.rc0, the doc file of the backend `field` is called \"the python backend\".\n\nMaybe we should create a ticket about renaming the backend.",
    "created_at": "2017-03-15T07:41:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/17983",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/17983#issuecomment-241738",
    "user": "@jplab"
}
```

I just saw that in the documentation of version 7.6.rc0, the doc file of the backend `field` is called "the python backend".

Maybe we should create a ticket about renaming the backend.
