# Issue 32355: sage.geometry.polyhedron: Split out backend_cdd_rdf from backend_cdd

archive/issues_032355.json:
```json
{
    "body": "CC:  @kliem\n\n(cherry-picked from #32432)\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/32592\n\n",
    "created_at": "2021-09-30T03:56:27Z",
    "labels": [
        "geometry",
        "major",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.5",
    "title": "sage.geometry.polyhedron: Split out backend_cdd_rdf from backend_cdd",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/32355",
    "user": "mkoeppe"
}
```
CC:  @kliem

(cherry-picked from #32432)


Issue created by migration from https://trac.sagemath.org/ticket/32592





---

archive/issue_comments_461659.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2021-09-30T03:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461659",
    "user": "mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_461660.json:
```json
{
    "body": "New commits:",
    "created_at": "2021-09-30T03:57:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461660",
    "user": "mkoeppe"
}
```

New commits:



---

archive/issue_comments_461661.json:
```json
{
    "body": "Do I get this right that `RDF` will not be a \"dependency\" of `sagemath-polyhedra`?",
    "created_at": "2021-09-30T07:06:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461661",
    "user": "@kliem"
}
```

Do I get this right that `RDF` will not be a "dependency" of `sagemath-polyhedra`?



---

archive/issue_comments_461662.json:
```json
{
    "body": "The final design of the `sagemath-polyhedra` is not set in stone. But yes, for now I excluded `RDF` because of the compile time dependency on `gsl` and `cypari2`.",
    "created_at": "2021-09-30T17:57:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461662",
    "user": "mkoeppe"
}
```

The final design of the `sagemath-polyhedra` is not set in stone. But yes, for now I excluded `RDF` because of the compile time dependency on `gsl` and `cypari2`.



---

archive/issue_comments_461663.json:
```json
{
    "body": "I find it confusing that the import is at the end of the file `backend_cdd.py`.",
    "created_at": "2021-09-30T20:24:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461663",
    "user": "@kliem"
}
```

I find it confusing that the import is at the end of the file `backend_cdd.py`.



---

archive/issue_comments_461664.json:
```json
{
    "body": "I've now changed it to a standard \"lazy import with deprecation\"",
    "created_at": "2021-09-30T22:22:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461664",
    "user": "mkoeppe"
}
```

I've now changed it to a standard "lazy import with deprecation"



---

archive/issue_comments_461665.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-30T22:23:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461665",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461666.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-09-30T22:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461666",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461667.json:
```json
{
    "body": "Docbuild fails\n\n```\n[dochtml] Build finished. The built documents can be found in /home/sagemath/sage-9.1/local/share/doc/sage/inventory/en/reference/tensor_free_modules\n[dochtml] cd /home/sagemath/sage-9.1 && ./sage --docbuild --no-pdf-links reference/combinat inventory --no-prune-empty-dirs\n[dochtml] Error building the documentation.\n[dochtml] Traceback (most recent call last):\n[dochtml]   File \"/usr/lib/python3.7/runpy.py\", line 193, in _run_module_as_main\n[dochtml]     \"__main__\", mod_spec)\n[dochtml]   File \"/usr/lib/python3.7/runpy.py\", line 85, in _run_code\n[dochtml]     exec(code, run_globals)\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__main__.py\", line 2, in <module>\n[dochtml]     main()\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py\", line 1814, in main\n[dochtml]     builder()\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py\", line 810, in _wrapper\n[dochtml]     self.write_auto_rest_file(module_name)\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py\", line 1105, in write_auto_rest_file\n[dochtml]     title = self.get_module_docstring_title(module_name)\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py\", line 1066, in get_module_docstring_title\n[dochtml]     __import__(module_name)\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/combinat/root_system/associahedron.py\", line 27, in <module>\n[dochtml]     from sage.geometry.polyhedron.parent import Polyhedra, Polyhedra_base, Polyhedra_QQ_ppl, Polyhedra_QQ_normaliz, Polyhedra_QQ_cdd, Polyhedra_polymake, Polyhedra_field\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/geometry/polyhedron/parent.py\", line 1131, in <module>\n[dochtml]     lazy_import('sage.geometry.polyhedron.backend_cdd_rdf', Polyhedron_RDF_cdd)\n[dochtml] NameError: name 'lazy_import' is not defined\n[dochtml] \n[dochtml]     Note: incremental documentation builds sometimes cause spurious\n[dochtml]     error messages. To be certain that these are real errors, run\n[dochtml]     \"make doc-clean\" first and try again.\n```\n",
    "created_at": "2021-10-01T06:35:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461667",
    "user": "@kliem"
}
```

Docbuild fails

```
[dochtml] Build finished. The built documents can be found in /home/sagemath/sage-9.1/local/share/doc/sage/inventory/en/reference/tensor_free_modules
[dochtml] cd /home/sagemath/sage-9.1 && ./sage --docbuild --no-pdf-links reference/combinat inventory --no-prune-empty-dirs
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[dochtml]     "__main__", mod_spec)
[dochtml]   File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 1814, in main
[dochtml]     builder()
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 810, in _wrapper
[dochtml]     self.write_auto_rest_file(module_name)
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 1105, in write_auto_rest_file
[dochtml]     title = self.get_module_docstring_title(module_name)
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 1066, in get_module_docstring_title
[dochtml]     __import__(module_name)
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/combinat/root_system/associahedron.py", line 27, in <module>
[dochtml]     from sage.geometry.polyhedron.parent import Polyhedra, Polyhedra_base, Polyhedra_QQ_ppl, Polyhedra_QQ_normaliz, Polyhedra_QQ_cdd, Polyhedra_polymake, Polyhedra_field
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/geometry/polyhedron/parent.py", line 1131, in <module>
[dochtml]     lazy_import('sage.geometry.polyhedron.backend_cdd_rdf', Polyhedron_RDF_cdd)
[dochtml] NameError: name 'lazy_import' is not defined
[dochtml] 
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
```




---

archive/issue_comments_461668.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-01T16:05:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461668",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461669.json:
```json
{
    "body": "Still fails:\n\n\n```\n[dochtml]   File \"/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/geometry/polyhedron/parent.py\", line 1132, in <module>\n[dochtml]     lazy_import('sage.geometry.polyhedron.backend_cdd_rdf', Polyhedron_RDF_cdd)\n[dochtml] NameError: name 'Polyhedron_RDF_cdd' is not defined\n```\n",
    "created_at": "2021-10-01T18:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461669",
    "user": "@kliem"
}
```

Still fails:


```
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/geometry/polyhedron/parent.py", line 1132, in <module>
[dochtml]     lazy_import('sage.geometry.polyhedron.backend_cdd_rdf', Polyhedron_RDF_cdd)
[dochtml] NameError: name 'Polyhedron_RDF_cdd' is not defined
```




---

archive/issue_comments_461670.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2021-10-01T19:07:59Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461670",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_461671.json:
```json
{
    "body": "Now there's a green checkmark",
    "created_at": "2021-10-01T22:34:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461671",
    "user": "mkoeppe"
}
```

Now there's a green checkmark



---

archive/issue_comments_461672.json:
```json
{
    "body": "LGTM.",
    "created_at": "2021-10-02T05:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461672",
    "user": "@kliem"
}
```

LGTM.



---

archive/issue_comments_461673.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-02T05:10:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461673",
    "user": "@kliem"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_461674.json:
```json
{
    "body": "Thank you!",
    "created_at": "2021-10-02T05:13:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461674",
    "user": "mkoeppe"
}
```

Thank you!



---

archive/issue_comments_461675.json:
```json
{
    "body": "Changing status from positive_review to needs_review.",
    "created_at": "2021-10-11T22:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461675",
    "user": "git"
}
```

Changing status from positive_review to needs_review.



---

archive/issue_comments_461676.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:",
    "created_at": "2021-10-11T22:09:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461676",
    "user": "git"
}
```

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:



---

archive/issue_comments_461677.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2021-10-11T22:10:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461677",
    "user": "mkoeppe"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_461678.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2021-10-13T22:50:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/32355",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/32355#issuecomment-461678",
    "user": "vbraun"
}
```

Resolution: fixed
