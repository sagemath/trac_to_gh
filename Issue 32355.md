# Issue 32355: sage.geometry.polyhedron: Split out backend_cdd_rdf from backend_cdd

Issue created by migration from https://trac.sagemath.org/ticket/32592

Original creator: mkoeppe

Original creation time: 2021-09-30 03:56:27

CC:  @kliem

(cherry-picked from #32432)



---

Comment by mkoeppe created at 2021-09-30 03:57:52

Changing status from new to needs_review.


---

Comment by mkoeppe created at 2021-09-30 03:57:52

New commits:


---

Comment by @kliem created at 2021-09-30 07:06:34

Do I get this right that `RDF` will not be a "dependency" of `sagemath-polyhedra`?


---

Comment by mkoeppe created at 2021-09-30 17:57:22

The final design of the `sagemath-polyhedra` is not set in stone. But yes, for now I excluded `RDF` because of the compile time dependency on `gsl` and `cypari2`.


---

Comment by @kliem created at 2021-09-30 20:24:16

I find it confusing that the import is at the end of the file `backend_cdd.py`.


---

Comment by mkoeppe created at 2021-09-30 22:22:50

I've now changed it to a standard "lazy import with deprecation"


---

Comment by git created at 2021-09-30 22:23:25

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by git created at 2021-09-30 22:24:32

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2021-10-01 06:35:40

Docbuild fails

```
[dochtml] Build finished. The built documents can be found in /home/sagemath/sage-9.1/local/share/doc/sage/inventory/en/reference/tensor_free_modules
[dochtml] cd /home/sagemath/sage-9.1 && ./sage --docbuild --no-pdf-links reference/combinat inventory --no-prune-empty-dirs
[dochtml] Error building the documentation.
[dochtml] Traceback (most recent call last):
[dochtml]   File "/usr/lib/python3.7/runpy.py", line 193, in _run_module_as_main
[dochtml]     "__main__", mod_spec)
[dochtml]   File "/usr/lib/python3.7/runpy.py", line 85, in _run_code
[dochtml]     exec(code, run_globals)
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__main__.py", line 2, in <module>
[dochtml]     main()
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 1814, in main
[dochtml]     builder()
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 810, in _wrapper
[dochtml]     self.write_auto_rest_file(module_name)
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 1105, in write_auto_rest_file
[dochtml]     title = self.get_module_docstring_title(module_name)
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage_docbuild/__init__.py", line 1066, in get_module_docstring_title
[dochtml]     __import__(module_name)
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/combinat/root_system/associahedron.py", line 27, in <module>
[dochtml]     from sage.geometry.polyhedron.parent import Polyhedra, Polyhedra_base, Polyhedra_QQ_ppl, Polyhedra_QQ_normaliz, Polyhedra_QQ_cdd, Polyhedra_polymake, Polyhedra_field
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/geometry/polyhedron/parent.py", line 1131, in <module>
[dochtml]     lazy_import('sage.geometry.polyhedron.backend_cdd_rdf', Polyhedron_RDF_cdd)
[dochtml] NameError: name 'lazy_import' is not defined
[dochtml] 
[dochtml]     Note: incremental documentation builds sometimes cause spurious
[dochtml]     error messages. To be certain that these are real errors, run
[dochtml]     "make doc-clean" first and try again.
```



---

Comment by git created at 2021-10-01 16:05:07

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by @kliem created at 2021-10-01 18:56:24

Still fails:


```
[dochtml]   File "/home/sagemath/sage-9.1/local/lib/python3.7/site-packages/sage/geometry/polyhedron/parent.py", line 1132, in <module>
[dochtml]     lazy_import('sage.geometry.polyhedron.backend_cdd_rdf', Polyhedron_RDF_cdd)
[dochtml] NameError: name 'Polyhedron_RDF_cdd' is not defined
```



---

Comment by git created at 2021-10-01 19:07:59

Branch pushed to git repo; I updated commit sha1. New commits:


---

Comment by mkoeppe created at 2021-10-01 22:34:45

Now there's a green checkmark


---

Comment by @kliem created at 2021-10-02 05:10:41

LGTM.


---

Comment by @kliem created at 2021-10-02 05:10:41

Changing status from needs_review to positive_review.


---

Comment by mkoeppe created at 2021-10-02 05:13:26

Thank you!


---

Comment by git created at 2021-10-11 22:09:47

Changing status from positive_review to needs_review.


---

Comment by git created at 2021-10-11 22:09:47

Branch pushed to git repo; I updated commit sha1 and set ticket back to needs_review. New commits:


---

Comment by mkoeppe created at 2021-10-11 22:10:01

Changing status from needs_review to positive_review.


---

Comment by vbraun created at 2021-10-13 22:50:44

Resolution: fixed
