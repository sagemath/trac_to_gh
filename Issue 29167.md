# Issue 29167: Fix build failures of pplpy on macos with system python3

archive/issues_029167.json:
```json
{
    "body": "CC:  @dimpase @kiwifb @videlec @saraedum @isuruf @embray\n\nhttps://github.com/mkoeppe/sage/runs/531095486\n\npplpy:\n\n```\n    g++ -sdk macosx clang -bundle -undefined dynamic_lookup -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/lib -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/include -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/include build/temp.macosx-10.14-x86_64-3.7/ppl/linear_algebra.o build/temp.macosx-10.14-x86_64-3.7/ppl/ppl_shim.o -lgmp -lgmpxx -lppl -lm -o build/lib.macosx-10.14-x86_64-3.7/ppl/linear_algebra.cpython-37m-darwin.so\n    clang: error: unknown argument: '-sdk'\n    clang: error: no such file or directory: 'macosx'\n    clang: error: no such file or directory: 'clang'\n    error: command 'g++' failed with exit status 1\n    Running setup.py install for pplpy: finished with status 'error'\nCleaning up...\n```\n\n\npynac:\n\n```\nchecking whether sage-python23 version is >= 2.7... yes\nchecking for sage-python23 version... 3.7\nchecking for sage-python23 platform... darwin\nchecking for sage-python23 script directory... ${prefix}/lib/python3.7/site-packages\nchecking for sage-python23 extension module directory... ${exec_prefix}/lib/python3.7/site-packages\nchecking for style of include used by make... GNU\nchecking for gcc... gcc\nchecking whether the C compiler works... yes\nchecking for C compiler default output file name... a.out\nchecking for suffix of executables... \nchecking whether we are cross compiling... no\nchecking for suffix of object files... o\nchecking whether we are using the GNU C compiler... yes\nchecking whether gcc accepts -g... yes\nchecking for gcc option to accept ISO C89... none needed\nchecking whether gcc understands -c and -o together... yes\nchecking dependency style of gcc... none\nchecking for python3.7... no\nconfigure: error: Cannot find python3.7 in your system path\n```\n\n\nIssue created by migration from https://trac.sagemath.org/ticket/29404\n\n",
    "created_at": "2020-03-25T02:58:16Z",
    "labels": [
        "component: packages: standard",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-9.1",
    "title": "Fix build failures of pplpy on macos with system python3",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/29167",
    "user": "https://github.com/mkoeppe"
}
```
CC:  @dimpase @kiwifb @videlec @saraedum @isuruf @embray

https://github.com/mkoeppe/sage/runs/531095486

pplpy:

```
    g++ -sdk macosx clang -bundle -undefined dynamic_lookup -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/lib -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/include -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/include build/temp.macosx-10.14-x86_64-3.7/ppl/linear_algebra.o build/temp.macosx-10.14-x86_64-3.7/ppl/ppl_shim.o -lgmp -lgmpxx -lppl -lm -o build/lib.macosx-10.14-x86_64-3.7/ppl/linear_algebra.cpython-37m-darwin.so
    clang: error: unknown argument: '-sdk'
    clang: error: no such file or directory: 'macosx'
    clang: error: no such file or directory: 'clang'
    error: command 'g++' failed with exit status 1
    Running setup.py install for pplpy: finished with status 'error'
Cleaning up...
```


pynac:

```
checking whether sage-python23 version is >= 2.7... yes
checking for sage-python23 version... 3.7
checking for sage-python23 platform... darwin
checking for sage-python23 script directory... ${prefix}/lib/python3.7/site-packages
checking for sage-python23 extension module directory... ${exec_prefix}/lib/python3.7/site-packages
checking for style of include used by make... GNU
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking whether gcc understands -c and -o together... yes
checking dependency style of gcc... none
checking for python3.7... no
configure: error: Cannot find python3.7 in your system path
```


Issue created by migration from https://trac.sagemath.org/ticket/29404





---

archive/issue_comments_412563.json:
```json
{
    "body": "pynac's python discovery should be fixed, this looks completely broken",
    "created_at": "2020-03-25T03:27:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412563",
    "user": "https://github.com/mkoeppe"
}
```

pynac's python discovery should be fixed, this looks completely broken



---

archive/issue_comments_412564.json:
```json
{
    "body": "This should be probably split into two tickets.\n\npplpy upstream is https://gitlab.com/videlec/pplpy - also in CC:",
    "created_at": "2020-03-25T03:48:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412564",
    "user": "https://github.com/dimpase"
}
```

This should be probably split into two tickets.

pplpy upstream is https://gitlab.com/videlec/pplpy - also in CC:



---

archive/issue_comments_412565.json:
```json
{
    "body": "Yes for the split. I am surprised that problem shows now in pynac. I would have expected it to happen much earlier. The AX_PYTHON_DEVEL macro is 5 years old - which probably doesn't help.",
    "created_at": "2020-03-25T03:51:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412565",
    "user": "https://github.com/kiwifb"
}
```

Yes for the split. I am surprised that problem shows now in pynac. I would have expected it to happen much earlier. The AX_PYTHON_DEVEL macro is 5 years old - which probably doesn't help.



---

archive/issue_comments_412566.json:
```json
{
    "body": "Note that I don't think the problem is in the macro, but something in there may trigger. I suspect the problem is in `AM_PATH_PYTHON` and that `PYTHON` needs to be defined when calling configure in `spkg-install`.",
    "created_at": "2020-03-25T03:54:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412566",
    "user": "https://github.com/kiwifb"
}
```

Note that I don't think the problem is in the macro, but something in there may trigger. I suspect the problem is in `AM_PATH_PYTHON` and that `PYTHON` needs to be defined when calling configure in `spkg-install`.



---

archive/issue_comments_412567.json:
```json
{
    "body": "Which is already done. So I am not sure what happens to override it. Access to config.log would be helpful.",
    "created_at": "2020-03-25T03:58:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412567",
    "user": "https://github.com/kiwifb"
}
```

Which is already done. So I am not sure what happens to override it. Access to config.log would be helpful.



---

archive/issue_comments_412568.json:
```json
{
    "body": "Yes, please go ahead with splitting the ticket.",
    "created_at": "2020-03-25T04:02:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412568",
    "user": "https://github.com/mkoeppe"
}
```

Yes, please go ahead with splitting the ticket.



---

archive/issue_comments_412569.json:
```json
{
    "body": "It looks from the log as here could be some mixing up happening between system python3 and Homebrew's python3 (unless Homebrew's python3 is using system's python3 headers by design).",
    "created_at": "2020-03-25T06:22:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412569",
    "user": "https://github.com/dimpase"
}
```

It looks from the log as here could be some mixing up happening between system python3 and Homebrew's python3 (unless Homebrew's python3 is using system's python3 headers by design).



---

archive/issue_comments_412570.json:
```json
{
    "body": "Replying to [comment:8 dimpase]:\n> It looks from the log as here could be some mixing up happening between system python3 and Homebrew's python3 (unless Homebrew's python3 is using system's python3 headers by design).\n\nShouldn't happen. We pass `PYTHON=sage-python23` explicitly to configure. That's what should be tested.\nhttps://github.com/sagemath/sage/blob/develop/build/pkgs/pynac/spkg-install.in#L14\n\nMy gut feeling is that something funny happened to that line during processing. But I need config.log to establish it.",
    "created_at": "2020-03-25T06:44:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412570",
    "user": "https://github.com/kiwifb"
}
```

Replying to [comment:8 dimpase]:
> It looks from the log as here could be some mixing up happening between system python3 and Homebrew's python3 (unless Homebrew's python3 is using system's python3 headers by design).

Shouldn't happen. We pass `PYTHON=sage-python23` explicitly to configure. That's what should be tested.
https://github.com/sagemath/sage/blob/develop/build/pkgs/pynac/spkg-install.in#L14

My gut feeling is that something funny happened to that line during processing. But I need config.log to establish it.



---

archive/issue_comments_412571.json:
```json
{
    "body": "I don't have MacOS machine, but anyone with it may install Homebrew and try.",
    "created_at": "2020-03-25T07:05:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412571",
    "user": "https://github.com/dimpase"
}
```

I don't have MacOS machine, but anyone with it may install Homebrew and try.



---

archive/issue_comments_412572.json:
```json
{
    "body": "It is more subtle than my implied gut feeling. The macro AX_PYTHON_DEVEL gets the right value for PYTHON and does its stuff based on that. I think `AM_PATH_PYTHON` doesn't like python with exotic names because it looks like it goes through a pre-defined list.",
    "created_at": "2020-03-25T07:23:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412572",
    "user": "https://github.com/kiwifb"
}
```

It is more subtle than my implied gut feeling. The macro AX_PYTHON_DEVEL gets the right value for PYTHON and does its stuff based on that. I think `AM_PATH_PYTHON` doesn't like python with exotic names because it looks like it goes through a pre-defined list.



---

archive/issue_comments_412573.json:
```json
{
    "body": "isn't the location of Sage's Python exotic enough to choke it, if it were the case?",
    "created_at": "2020-03-25T07:27:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412573",
    "user": "https://github.com/dimpase"
}
```

isn't the location of Sage's Python exotic enough to choke it, if it were the case?



---

archive/issue_comments_412574.json:
```json
{
    "body": "It would be :) \n\nCode inspection says I have it backwards. `AM_PATH_PYTHON` works and `AX_PYTHON_DEVEL` is the one failing.",
    "created_at": "2020-03-25T07:43:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412574",
    "user": "https://github.com/kiwifb"
}
```

It would be :) 

Code inspection says I have it backwards. `AM_PATH_PYTHON` works and `AX_PYTHON_DEVEL` is the one failing.



---

archive/issue_comments_412575.json:
```json
{
    "body": "Toxic. This is with an old sage I have around\n\n```\n[pynac-0.7.14] checking whether sage-python23 version is >= 2.7... yes\n[pynac-0.7.14] checking for sage-python23 version... 2.7\n[pynac-0.7.14] checking for sage-python23 platform... linux2\n[pynac-0.7.14] checking for sage-python23 script directory... ${prefix}/lib/python2.7/site-packages\n[pynac-0.7.14] checking for sage-python23 extension module directory... ${exec_prefix}/lib/python2.7/site-packages\n[pynac-0.7.14] checking for style of include used by make... GNU\n[pynac-0.7.14] checking for gcc... gcc\n[pynac-0.7.14] checking whether the C compiler works... yes\n[pynac-0.7.14] checking for C compiler default output file name... a.out\n[pynac-0.7.14] checking for suffix of executables... \n[pynac-0.7.14] checking whether we are cross compiling... no\n[pynac-0.7.14] checking for suffix of object files... o\n[pynac-0.7.14] checking whether we are using the GNU C compiler... yes\n[pynac-0.7.14] checking whether gcc accepts -g... yes\n[pynac-0.7.14] checking for gcc option to accept ISO C89... none needed\n[pynac-0.7.14] checking whether gcc understands -c and -o together... yes\n[pynac-0.7.14] checking dependency style of gcc... gcc3\n[pynac-0.7.14] checking for python2.7... /home/fbissey/sagemath/sage/local/bin/python2.7\n[pynac-0.7.14] checking for a version of Python >= '2.1.0'... yes\n[pynac-0.7.14] checking for the distutils Python package... yes\n[pynac-0.7.14] checking for Python include path... -I/home/fbissey/sagemath/sage/local/include/python2.7\n[pynac-0.7.14] checking for Python library path... -L/home/fbissey/sagemath/sage/local/lib -lpython2.7\n[pynac-0.7.14] checking for Python site-packages path... /home/fbissey/sagemath/sage/local/lib/python2.7/site-packages\n```\n\nAs you can see, the first test (`AM_PATH_PYTHON`) use `sage-python23` properly. But not the second that goes directly for `pythonX.Y`. Worse, that's by design of the macro.\n\n```\n\tAC_PATH_PROG([PYTHON],[python[$PYTHON_VERSION]])\n\tif test -z \"$PYTHON\"; then\n\t   AC_MSG_ERROR([Cannot find python$PYTHON_VERSION in your system path])\n\t   PYTHON_VERSION=\"\"\n\tfi\n```\n\nAnd for the cherry on the top of the cake, I believe `PYTHON_VERSION` is set by `AM_PATH_PYTHON`. Conclusion `AX_PYTHON_DEVEL` doesn't do exotic python name, and you better have a regular python executable in the PATH. Now, I'd like to know more about that setup that has `sage-python23` in the PATH but not the matching `pythonX.Y`. Did something happen while I wasn't looking?",
    "created_at": "2020-03-25T08:04:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412575",
    "user": "https://github.com/kiwifb"
}
```

Toxic. This is with an old sage I have around

```
[pynac-0.7.14] checking whether sage-python23 version is >= 2.7... yes
[pynac-0.7.14] checking for sage-python23 version... 2.7
[pynac-0.7.14] checking for sage-python23 platform... linux2
[pynac-0.7.14] checking for sage-python23 script directory... ${prefix}/lib/python2.7/site-packages
[pynac-0.7.14] checking for sage-python23 extension module directory... ${exec_prefix}/lib/python2.7/site-packages
[pynac-0.7.14] checking for style of include used by make... GNU
[pynac-0.7.14] checking for gcc... gcc
[pynac-0.7.14] checking whether the C compiler works... yes
[pynac-0.7.14] checking for C compiler default output file name... a.out
[pynac-0.7.14] checking for suffix of executables... 
[pynac-0.7.14] checking whether we are cross compiling... no
[pynac-0.7.14] checking for suffix of object files... o
[pynac-0.7.14] checking whether we are using the GNU C compiler... yes
[pynac-0.7.14] checking whether gcc accepts -g... yes
[pynac-0.7.14] checking for gcc option to accept ISO C89... none needed
[pynac-0.7.14] checking whether gcc understands -c and -o together... yes
[pynac-0.7.14] checking dependency style of gcc... gcc3
[pynac-0.7.14] checking for python2.7... /home/fbissey/sagemath/sage/local/bin/python2.7
[pynac-0.7.14] checking for a version of Python >= '2.1.0'... yes
[pynac-0.7.14] checking for the distutils Python package... yes
[pynac-0.7.14] checking for Python include path... -I/home/fbissey/sagemath/sage/local/include/python2.7
[pynac-0.7.14] checking for Python library path... -L/home/fbissey/sagemath/sage/local/lib -lpython2.7
[pynac-0.7.14] checking for Python site-packages path... /home/fbissey/sagemath/sage/local/lib/python2.7/site-packages
```

As you can see, the first test (`AM_PATH_PYTHON`) use `sage-python23` properly. But not the second that goes directly for `pythonX.Y`. Worse, that's by design of the macro.

```
	AC_PATH_PROG([PYTHON],[python[$PYTHON_VERSION]])
	if test -z "$PYTHON"; then
	   AC_MSG_ERROR([Cannot find python$PYTHON_VERSION in your system path])
	   PYTHON_VERSION=""
	fi
```

And for the cherry on the top of the cake, I believe `PYTHON_VERSION` is set by `AM_PATH_PYTHON`. Conclusion `AX_PYTHON_DEVEL` doesn't do exotic python name, and you better have a regular python executable in the PATH. Now, I'd like to know more about that setup that has `sage-python23` in the PATH but not the matching `pythonX.Y`. Did something happen while I wasn't looking?



---

archive/issue_comments_412576.json:
```json
{
    "body": "Updating `AX_PYTHON_DEVEL` would still give the same result. There is probably something smarter to do.",
    "created_at": "2020-03-25T08:07:44Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412576",
    "user": "https://github.com/kiwifb"
}
```

Updating `AX_PYTHON_DEVEL` would still give the same result. There is probably something smarter to do.



---

archive/issue_comments_412577.json:
```json
{
    "body": "All the stuff found by `AX_PYTHON_DEVEL` could be found by snipping bits of it and using the results from `AM_PATH_PYTHON`. This is a substantial rewrite of upstream's `configure.ac` that we are looking at. We only need to lift the bits that figure `PYTHON_CPPFLAGS` and `PYTHON_LDFLAGS`  (`PYTHON_LIBS` if lifted from the latest version of `AX_PYTHON_DEVEL`). The rest is provided by `AM_PATH_PYTHON`.",
    "created_at": "2020-03-25T09:06:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412577",
    "user": "https://github.com/kiwifb"
}
```

All the stuff found by `AX_PYTHON_DEVEL` could be found by snipping bits of it and using the results from `AM_PATH_PYTHON`. This is a substantial rewrite of upstream's `configure.ac` that we are looking at. We only need to lift the bits that figure `PYTHON_CPPFLAGS` and `PYTHON_LDFLAGS`  (`PYTHON_LIBS` if lifted from the latest version of `AX_PYTHON_DEVEL`). The rest is provided by `AM_PATH_PYTHON`.



---

archive/issue_comments_412578.json:
```json
{
    "body": "Replying to [comment:4 fbissey]:\n> Yes for the split. I am surprised that problem shows now in pynac. I would have expected it to happen much earlier. The AX_PYTHON_DEVEL macro is 5 years old - which probably doesn't help.\nIt shows now because this is a test with system python3 (#27824) instead of building sage's own python3. On macOS, there is `/usr/bin/python3` (which is Python 3.7) but no `/usr/bin/python3.7`.",
    "created_at": "2020-03-25T11:53:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412578",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:4 fbissey]:
> Yes for the split. I am surprised that problem shows now in pynac. I would have expected it to happen much earlier. The AX_PYTHON_DEVEL macro is 5 years old - which probably doesn't help.
It shows now because this is a test with system python3 (#27824) instead of building sage's own python3. On macOS, there is `/usr/bin/python3` (which is Python 3.7) but no `/usr/bin/python3.7`.



---

archive/issue_comments_412579.json:
```json
{
    "body": "would it work with Homebrew's python3 ?\nhttps://formulae.brew.sh/formula/python\n\n\nPython shipped with MacOS is dodgy, IMHO.",
    "created_at": "2020-03-25T14:58:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412579",
    "user": "https://github.com/dimpase"
}
```

would it work with Homebrew's python3 ?
https://formulae.brew.sh/formula/python


Python shipped with MacOS is dodgy, IMHO.



---

archive/issue_comments_412580.json:
```json
{
    "body": "Replying to [comment:16 fbissey]:\n> All the stuff found by `AX_PYTHON_DEVEL` could be found by snipping bits of it and using the results from `AM_PATH_PYTHON`. This is a substantial rewrite of upstream's `configure.ac` that we are looking at. We only need to lift the bits that figure `PYTHON_CPPFLAGS` and `PYTHON_LDFLAGS`  (`PYTHON_LIBS` if lifted from the latest version of `AX_PYTHON_DEVEL`). The rest is provided by `AM_PATH_PYTHON`.\n\nYes, this sounds like the correct approach.",
    "created_at": "2020-03-25T17:29:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412580",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:16 fbissey]:
> All the stuff found by `AX_PYTHON_DEVEL` could be found by snipping bits of it and using the results from `AM_PATH_PYTHON`. This is a substantial rewrite of upstream's `configure.ac` that we are looking at. We only need to lift the bits that figure `PYTHON_CPPFLAGS` and `PYTHON_LDFLAGS`  (`PYTHON_LIBS` if lifted from the latest version of `AX_PYTHON_DEVEL`). The rest is provided by `AM_PATH_PYTHON`.

Yes, this sounds like the correct approach.



---

archive/issue_comments_412581.json:
```json
{
    "body": "Replying to [comment:3 dimpase]:\n> This should be probably split into two tickets.\n> \n> pplpy upstream is https://gitlab.com/videlec/pplpy - also in CC:\n\npplpy is now #29408",
    "created_at": "2020-03-26T02:12:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412581",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:3 dimpase]:
> This should be probably split into two tickets.
> 
> pplpy upstream is https://gitlab.com/videlec/pplpy - also in CC:

pplpy is now #29408



---

archive/issue_comments_412582.json:
```json
{
    "body": "Some links for `AX_PYTHON_DEVEL`:\n- current version https://github.com/autoconf-archive/autoconf-archive/blob/master/m4/ax_python_devel.m4\n- some patch for it https://0xacab.org/schleuder/rpm-gpgme/blob/epel7-schleuder/0001-fix-stupid-ax_python_devel.patch\n- replacement using python-config https://trac.macports.org/attachment/ticket/39223/python.m4",
    "created_at": "2020-03-26T02:15:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412582",
    "user": "https://github.com/mkoeppe"
}
```

Some links for `AX_PYTHON_DEVEL`:
- current version https://github.com/autoconf-archive/autoconf-archive/blob/master/m4/ax_python_devel.m4
- some patch for it https://0xacab.org/schleuder/rpm-gpgme/blob/epel7-schleuder/0001-fix-stupid-ax_python_devel.patch
- replacement using python-config https://trac.macports.org/attachment/ticket/39223/python.m4



---

archive/issue_comments_412583.json:
```json
{
    "body": "probably we should try `replacement using python-config`- except that the name should not start with `AC_`...",
    "created_at": "2020-03-26T02:17:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412583",
    "user": "https://github.com/dimpase"
}
```

probably we should try `replacement using python-config`- except that the name should not start with `AC_`...



---

archive/issue_comments_412584.json:
```json
{
    "body": "... and except that we do not have `sage-python23-config`",
    "created_at": "2020-03-26T02:53:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412584",
    "user": "https://github.com/mkoeppe"
}
```

... and except that we do not have `sage-python23-config`



---

archive/issue_comments_412585.json:
```json
{
    "body": "In the same bag, you could be tempted to use `python-X.Y.pc`, `AM_PATH_PYTHON` identifies the python version correctly. I eliminated it from my solutions yesterday but that may be viable if it is shipped consistently. If not, the `AX_PYTHON_DEVEL` macro just runs python commands to get at sysconfig. It is a fairly valid strategy.",
    "created_at": "2020-03-26T03:10:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412585",
    "user": "https://github.com/kiwifb"
}
```

In the same bag, you could be tempted to use `python-X.Y.pc`, `AM_PATH_PYTHON` identifies the python version correctly. I eliminated it from my solutions yesterday but that may be viable if it is shipped consistently. If not, the `AX_PYTHON_DEVEL` macro just runs python commands to get at sysconfig. It is a fairly valid strategy.



---

archive/issue_comments_412586.json:
```json
{
    "body": "No python pkgconfig on macOS without homebrew",
    "created_at": "2020-03-26T03:12:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412586",
    "user": "https://github.com/mkoeppe"
}
```

No python pkgconfig on macOS without homebrew



---

archive/issue_comments_412587.json:
```json
{
    "body": "Keep forgetting about that.",
    "created_at": "2020-03-26T03:14:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412587",
    "user": "https://github.com/kiwifb"
}
```

Keep forgetting about that.



---

archive/issue_comments_412588.json:
```json
{
    "body": "And on my mac I have python3  but not python-config for it, just python 2.7. So Mac support (without homebrew) needs to probe the python interpreter directly - at the time of writing.",
    "created_at": "2020-03-26T03:21:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412588",
    "user": "https://github.com/kiwifb"
}
```

And on my mac I have python3  but not python-config for it, just python 2.7. So Mac support (without homebrew) needs to probe the python interpreter directly - at the time of writing.



---

archive/issue_comments_412589.json:
```json
{
    "body": "let us try with Homebrew Python first. One can always add moar insanity later",
    "created_at": "2020-03-26T03:28:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412589",
    "user": "https://github.com/dimpase"
}
```

let us try with Homebrew Python first. One can always add moar insanity later



---

archive/issue_comments_412590.json:
```json
{
    "body": "That's the path of less resistance but I consider `AX_PYTHON_DEVEL` broken (including the latest one) and in need of replacement.",
    "created_at": "2020-03-26T03:35:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412590",
    "user": "https://github.com/kiwifb"
}
```

That's the path of less resistance but I consider `AX_PYTHON_DEVEL` broken (including the latest one) and in need of replacement.



---

archive/issue_comments_412591.json:
```json
{
    "body": "Replying to [comment:29 dimpase]:\n> let us try with Homebrew Python first. One can always add moar insanity later\nNothing try here. We already know precisely how it fails and what needs fixing: the use of that macro.",
    "created_at": "2020-03-26T03:41:26Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412591",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:29 dimpase]:
> let us try with Homebrew Python first. One can always add moar insanity later
Nothing try here. We already know precisely how it fails and what needs fixing: the use of that macro.



---

archive/issue_comments_412592.json:
```json
{
    "body": "I have a first version of a patch for pynac at https://github.com/pynac/pynac/pull/351",
    "created_at": "2020-03-28T04:58:38Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412592",
    "user": "https://github.com/mkoeppe"
}
```

I have a first version of a patch for pynac at https://github.com/pynac/pynac/pull/351



---

archive/issue_comments_412593.json:
```json
{
    "body": "New commits:",
    "created_at": "2020-03-28T15:12:51Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412593",
    "user": "https://github.com/mkoeppe"
}
```

New commits:



---

archive/issue_comments_412594.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2020-03-28T15:16:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412594",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_412595.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-28T15:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412595",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_412596.json:
```json
{
    "body": "You shouldn't link to the shared python library. If you do, you'll run into https://github.com/pynac/pynac/issues/337",
    "created_at": "2020-03-28T15:30:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412596",
    "user": "https://github.com/isuruf"
}
```

You shouldn't link to the shared python library. If you do, you'll run into https://github.com/pynac/pynac/issues/337



---

archive/issue_comments_412597.json:
```json
{
    "body": "Help with this is very welcome! I have to work on something else this weekend",
    "created_at": "2020-03-28T15:53:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412597",
    "user": "https://github.com/mkoeppe"
}
```

Help with this is very welcome! I have to work on something else this weekend



---

archive/issue_comments_412598.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-03-29T00:05:03Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412598",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412599.json:
```json
{
    "body": "Found a moment for this after all",
    "created_at": "2020-03-29T00:05:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412599",
    "user": "https://github.com/mkoeppe"
}
```

Found a moment for this after all



---

archive/issue_comments_412600.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-29T00:33:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412600",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_412601.json:
```json
{
    "body": "Tests ran at https://github.com/mkoeppe/sage/actions/runs/65556636",
    "created_at": "2020-03-29T13:47:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412601",
    "user": "https://github.com/mkoeppe"
}
```

Tests ran at https://github.com/mkoeppe/sage/actions/runs/65556636



---

archive/issue_comments_412602.json:
```json
{
    "body": "Changing priority from major to critical.",
    "created_at": "2020-03-29T13:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412602",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from major to critical.



---

archive/issue_comments_412603.json:
```json
{
    "body": "This seems to work well according to the tests. Needs review!",
    "created_at": "2020-03-29T13:51:23Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412603",
    "user": "https://github.com/mkoeppe"
}
```

This seems to work well according to the tests. Needs review!



---

archive/issue_comments_412604.json:
```json
{
    "body": "scipy build in macos-homebrew-standard fails with a similar error:\n\n```\n2020-03-29T03:07:22.1134510Z     g++ -sdk macosx clang -bundle -undefined dynamic_lookup -bundle -undefined dynamic_lookup -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/lib -D__ACCELERATE__ -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/include -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/include build/temp.macosx-10.14-x86_64-3.7/scipy/interpolate/src/_interpolate.o -Lbuild/temp.macosx-10.14-x86_64-3.7 -o build/lib.macosx-10.14-x86_64-3.7/scipy/interpolate/_interpolate.cpython-37m-darwin.so\n2020-03-29T03:07:22.1135020Z     clang: error: unknown argument: '-sdk'\n2020-03-29T03:07:22.1135400Z     clang: error: no such file or directory: 'macosx'\n2020-03-29T03:07:22.1135790Z     clang: error: no such file or directory: 'clang'\n2020-03-29T03:07:22.1137100Z     error: Command \"g++ -sdk macosx clang -bundle -undefined dynamic_lookup -bundle -undefined dynamic_lookup -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/lib -D__ACCELERATE__ -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/include -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/include build/temp.macosx-10.14-x86_64-3.7/scipy/interpolate/src/_interpolate.o -Lbuild/temp.macosx-10.14-x86_64-3.7 -o build/lib.macosx-10.14-x86_64-3.7/scipy/interpolate/_interpolate.cpython-37m-darwin.so\" failed with exit status 1\n2020-03-29T03:07:22.1137680Z     Running setup.py install for scipy: finished with status 'error'\n```\n",
    "created_at": "2020-03-30T15:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412604",
    "user": "https://github.com/dimpase"
}
```

scipy build in macos-homebrew-standard fails with a similar error:

```
2020-03-29T03:07:22.1134510Z     g++ -sdk macosx clang -bundle -undefined dynamic_lookup -bundle -undefined dynamic_lookup -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/lib -D__ACCELERATE__ -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/include -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/include build/temp.macosx-10.14-x86_64-3.7/scipy/interpolate/src/_interpolate.o -Lbuild/temp.macosx-10.14-x86_64-3.7 -o build/lib.macosx-10.14-x86_64-3.7/scipy/interpolate/_interpolate.cpython-37m-darwin.so
2020-03-29T03:07:22.1135020Z     clang: error: unknown argument: '-sdk'
2020-03-29T03:07:22.1135400Z     clang: error: no such file or directory: 'macosx'
2020-03-29T03:07:22.1135790Z     clang: error: no such file or directory: 'clang'
2020-03-29T03:07:22.1137100Z     error: Command "g++ -sdk macosx clang -bundle -undefined dynamic_lookup -bundle -undefined dynamic_lookup -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/local/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/lib -D__ACCELERATE__ -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/opt/readline/include -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-homebrew-macos-standard/homebrew/include build/temp.macosx-10.14-x86_64-3.7/scipy/interpolate/src/_interpolate.o -Lbuild/temp.macosx-10.14-x86_64-3.7 -o build/lib.macosx-10.14-x86_64-3.7/scipy/interpolate/_interpolate.cpython-37m-darwin.so" failed with exit status 1
2020-03-29T03:07:22.1137680Z     Running setup.py install for scipy: finished with status 'error'
```




---

archive/issue_comments_412605.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-03-30T15:22:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412605",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_412606.json:
```json
{
    "body": "Replying to [comment:44 dimpase]:\n> scipy build in macos-homebrew-standard fails with a similar error\n\nWrong ticket, that's #29408.",
    "created_at": "2020-03-30T15:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412606",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:44 dimpase]:
> scipy build in macos-homebrew-standard fails with a similar error

Wrong ticket, that's #29408.



---

archive/issue_comments_412607.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-03-30T15:41:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412607",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_412608.json:
```json
{
    "body": "what do you mean, wrong ticket? I looked at the test results at comment:42\nabove (https://github.com/mkoeppe/sage/actions/runs/65556636)",
    "created_at": "2020-03-30T15:55:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412608",
    "user": "https://github.com/dimpase"
}
```

what do you mean, wrong ticket? I looked at the test results at comment:42
above (https://github.com/mkoeppe/sage/actions/runs/65556636)



---

archive/issue_comments_412609.json:
```json
{
    "body": "This ticket is about pynac failing with `configure: error: Cannot find python3.7 in your system path`.",
    "created_at": "2020-03-30T15:56:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412609",
    "user": "https://github.com/mkoeppe"
}
```

This ticket is about pynac failing with `configure: error: Cannot find python3.7 in your system path`.



---

archive/issue_comments_412610.json:
```json
{
    "body": "OK, this looks good. Sorry for confusion.",
    "created_at": "2020-03-30T16:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412610",
    "user": "https://github.com/dimpase"
}
```

OK, this looks good. Sorry for confusion.



---

archive/issue_comments_412611.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-03-30T16:38:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412611",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412612.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-03-30T16:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412612",
    "user": "https://github.com/isuruf"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_412613.json:
```json
{
    "body": "Thanks for looking into this. This needs more work due to https://github.com/pynac/pynac/pull/351#discussion_r399846249.",
    "created_at": "2020-03-30T16:44:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412613",
    "user": "https://github.com/isuruf"
}
```

Thanks for looking into this. This needs more work due to https://github.com/pynac/pynac/pull/351#discussion_r399846249.



---

archive/issue_comments_412614.json:
```json
{
    "body": "Whether this is good enough for upstream is another question - and one that will not be answered soon.\nBut the fix works for us.",
    "created_at": "2020-03-30T16:46:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412614",
    "user": "https://github.com/mkoeppe"
}
```

Whether this is good enough for upstream is another question - and one that will not be answered soon.
But the fix works for us.



---

archive/issue_comments_412615.json:
```json
{
    "body": "Does it though? I assume that warning gets triggered in osx system python.",
    "created_at": "2020-03-30T16:47:53Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412615",
    "user": "https://github.com/isuruf"
}
```

Does it though? I assume that warning gets triggered in osx system python.



---

archive/issue_comments_412616.json:
```json
{
    "body": "This is using the version with assert, and it's not failing. See logs above.",
    "created_at": "2020-03-30T16:49:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412616",
    "user": "https://github.com/mkoeppe"
}
```

This is using the version with assert, and it's not failing. See logs above.



---

archive/issue_comments_412617.json:
```json
{
    "body": "Changing status from needs_work to positive_review.",
    "created_at": "2020-03-30T16:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412617",
    "user": "https://github.com/isuruf"
}
```

Changing status from needs_work to positive_review.



---

archive/issue_comments_412618.json:
```json
{
    "body": "I don't understand how it's going to work, but not going to hold up this ticket.",
    "created_at": "2020-03-30T16:56:15Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412618",
    "user": "https://github.com/isuruf"
}
```

I don't understand how it's going to work, but not going to hold up this ticket.



---

archive/issue_comments_412619.json:
```json
{
    "body": "Replying to [comment:53 isuruf]:\n> I don't understand how it's going to work\n\nJust in case you'd like another look, here's the log from https://github.com/mkoeppe/sage/actions/runs/66127777, logs-commit-3fc71b184bd15f5b10e48334eccb73be63dd3033-tox-local-homebrew-macos-standard.zip .\nNote that this is NOT using the change from #29408.\n\n```\npynac-0.7.26.sage-2020-03-28a\n====================================================\nSetting up build directory for pynac-0.7.26.sage-2020-03-28a\nFinished extraction\nNo patch files found in ../patches\n****************************************************\nHost system:\nDarwin Mac-1306.local 19.3.0 Darwin Kernel Version 19.3.0: Thu Jan  9 20:58:23 PST 2020; root:xnu-6153.81.5~1/RELEASE_X86_64 x86_64\n****************************************************\nC compiler: x86_64-apple-darwin13.4.0-clang\nC compiler version:\nclang version 9.0.1 \nTarget: x86_64-apple-darwin13.4.0\nThread model: posix\nInstalledDir: /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/bin\n****************************************************\nPackage 'pynac' is currently not installed\nNo legacy uninstaller found for 'pynac'; nothing to do\nStarting build...\nRunning build_pynac...\nConfiguring pynac-0.7.26.sage-2020-03-28a\n...\nchecking whether sage-python23 version is >= 2.7... yes\nchecking for sage-python23 version... 3.7\nchecking for sage-python23 platform... darwin\nchecking for sage-python23 script directory... ${prefix}/lib/python3.7/site-packages\nchecking for sage-python23 extension module directory... ${exec_prefix}/lib/python3.7/site-packages\nchecking for Python preprocessor flags... -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/include/python3.7m -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/include/python3.7m -fno-strict-aliasing -Wsign-compare -Wunreachable-code -DNDEBUG -fwrapv -O3 -Wall -Wstrict-prototypes -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O3 -pipe -fdebug-prefix-map=${SRC_DIR}=/usr/local/src/conda/${PKG_NAME}-${PKG_VERSION} -fdebug-prefix-map=/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda=/usr/local/src/conda-prefix -flto -Wl,-export_dynamic -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O3\nchecking for Python library flags... -bundle -undefined dynamic_lookup -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -flto -Wl,-export_dynamic -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -isystem /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/include -D_FORTIFY_SOURCE=2 -mmacosx-version-min=10.9 -isystem /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/include\nchecking build system type... x86_64-apple-darwin19.3.0\n```\n",
    "created_at": "2020-03-30T17:42:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412619",
    "user": "https://github.com/mkoeppe"
}
```

Replying to [comment:53 isuruf]:
> I don't understand how it's going to work

Just in case you'd like another look, here's the log from https://github.com/mkoeppe/sage/actions/runs/66127777, logs-commit-3fc71b184bd15f5b10e48334eccb73be63dd3033-tox-local-homebrew-macos-standard.zip .
Note that this is NOT using the change from #29408.

```
pynac-0.7.26.sage-2020-03-28a
====================================================
Setting up build directory for pynac-0.7.26.sage-2020-03-28a
Finished extraction
No patch files found in ../patches
****************************************************
Host system:
Darwin Mac-1306.local 19.3.0 Darwin Kernel Version 19.3.0: Thu Jan  9 20:58:23 PST 2020; root:xnu-6153.81.5~1/RELEASE_X86_64 x86_64
****************************************************
C compiler: x86_64-apple-darwin13.4.0-clang
C compiler version:
clang version 9.0.1 
Target: x86_64-apple-darwin13.4.0
Thread model: posix
InstalledDir: /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/bin
****************************************************
Package 'pynac' is currently not installed
No legacy uninstaller found for 'pynac'; nothing to do
Starting build...
Running build_pynac...
Configuring pynac-0.7.26.sage-2020-03-28a
...
checking whether sage-python23 version is >= 2.7... yes
checking for sage-python23 version... 3.7
checking for sage-python23 platform... darwin
checking for sage-python23 script directory... ${prefix}/lib/python3.7/site-packages
checking for sage-python23 extension module directory... ${exec_prefix}/lib/python3.7/site-packages
checking for Python preprocessor flags... -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/include/python3.7m -I/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/include/python3.7m -fno-strict-aliasing -Wsign-compare -Wunreachable-code -DNDEBUG -fwrapv -O3 -Wall -Wstrict-prototypes -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O3 -pipe -fdebug-prefix-map=${SRC_DIR}=/usr/local/src/conda/${PKG_NAME}-${PKG_VERSION} -fdebug-prefix-map=/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda=/usr/local/src/conda-prefix -flto -Wl,-export_dynamic -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O3
checking for Python library flags... -bundle -undefined dynamic_lookup -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -flto -Wl,-export_dynamic -Wl,-pie -Wl,-headerpad_max_install_names -Wl,-dead_strip_dylibs -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/local/lib -Wl,-rpath,/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -L/Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/lib -march=core2 -mtune=haswell -mssse3 -ftree-vectorize -fPIC -fPIE -fstack-protector-strong -O2 -pipe -isystem /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/include -D_FORTIFY_SOURCE=2 -mmacosx-version-min=10.9 -isystem /Users/runner/runners/2.165.2/work/sage/sage/.tox/local-conda-forge-macos-standard/conda/include
checking build system type... x86_64-apple-darwin19.3.0
```




---

archive/issue_comments_412620.json:
```json
{
    "body": "Fails on cygwin (https://github.com/mkoeppe/sage/runs/548082943):\n\n\n```\n  [pynac-0.7.26.sage-2020-03-28a]   /cygdrive/d/a/sage/sage/local/var/tmp/sage/build/pynac-0.7.26.sage-2020-03-28a/src/ginac/numeric.cpp:175: undefined reference to `PyErr_Occurred'\n  [pynac-0.7.26.sage-2020-03-28a]   /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: .libs/libpynac_la-numeric.o:/cygdrive/d/a/sage/sage/local/var/tmp/sage/build/pynac-0.7.26.sage-2020-03-28a/src/ginac/numeric.cpp:502: undefined reference to `PyLong_FromLong'\n  [pynac-0.7.26.sage-2020-03-28a]   /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: .libs/libpynac_la-numeric.o: in function `__static_initialization_and_destruction_0':\n  [pynac-0.7.26.sage-2020-03-28a]   /cygdrive/d/a/sage/sage/local/var/tmp/sage/build/pynac-0.7.26.sage-2020-03-28a/src/ginac/numeric.cpp:503: undefined reference to `PyLong_FromLong'\n  [pynac-0.7.26.sage-2020-03-28a]   /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: /cygdrive/d/a/sage/sage/local/var/tmp/sage/build/pynac-0.7.26.sage-2020-03-28a/src/ginac/numeric.cpp:504: undefined reference to `PyLong_FromLong'\n  [pynac-0.7.26.sage-2020-03-28a]   collect2: error: ld returned 1 exit status\n  [pynac-0.7.26.sage-2020-03-28a]   make[6]: *** [Makefile:558: libpynac.la] Error 1\n```\n",
    "created_at": "2020-03-31T14:09:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412620",
    "user": "https://github.com/mkoeppe"
}
```

Fails on cygwin (https://github.com/mkoeppe/sage/runs/548082943):


```
  [pynac-0.7.26.sage-2020-03-28a]   /cygdrive/d/a/sage/sage/local/var/tmp/sage/build/pynac-0.7.26.sage-2020-03-28a/src/ginac/numeric.cpp:175: undefined reference to `PyErr_Occurred'
  [pynac-0.7.26.sage-2020-03-28a]   /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: .libs/libpynac_la-numeric.o:/cygdrive/d/a/sage/sage/local/var/tmp/sage/build/pynac-0.7.26.sage-2020-03-28a/src/ginac/numeric.cpp:502: undefined reference to `PyLong_FromLong'
  [pynac-0.7.26.sage-2020-03-28a]   /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: .libs/libpynac_la-numeric.o: in function `__static_initialization_and_destruction_0':
  [pynac-0.7.26.sage-2020-03-28a]   /cygdrive/d/a/sage/sage/local/var/tmp/sage/build/pynac-0.7.26.sage-2020-03-28a/src/ginac/numeric.cpp:503: undefined reference to `PyLong_FromLong'
  [pynac-0.7.26.sage-2020-03-28a]   /usr/lib/gcc/x86_64-pc-cygwin/9.3.0/../../../../x86_64-pc-cygwin/bin/ld: /cygdrive/d/a/sage/sage/local/var/tmp/sage/build/pynac-0.7.26.sage-2020-03-28a/src/ginac/numeric.cpp:504: undefined reference to `PyLong_FromLong'
  [pynac-0.7.26.sage-2020-03-28a]   collect2: error: ld returned 1 exit status
  [pynac-0.7.26.sage-2020-03-28a]   make[6]: *** [Makefile:558: libpynac.la] Error 1
```




---

archive/issue_comments_412621.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2020-03-31T14:14:09Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412621",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_412622.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-01T03:10:31Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412622",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412623.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-04-01T04:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412623",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_412624.json:
```json
{
    "body": "New tests at https://github.com/mkoeppe/sage/runs/550765335 and https://github.com/mkoeppe/sage/actions/runs/67915244",
    "created_at": "2020-04-01T04:14:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412624",
    "user": "https://github.com/mkoeppe"
}
```

New tests at https://github.com/mkoeppe/sage/runs/550765335 and https://github.com/mkoeppe/sage/actions/runs/67915244



---

archive/issue_comments_412625.json:
```json
{
    "body": "Changing status from needs_review to needs_work.",
    "created_at": "2020-04-03T00:19:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412625",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_review to needs_work.



---

archive/issue_comments_412626.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. New commits:",
    "created_at": "2020-04-03T19:49:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412626",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. New commits:



---

archive/issue_comments_412627.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2020-04-03T20:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412627",
    "user": "https://github.com/mkoeppe"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_412628.json:
```json
{
    "body": "This fixes the build on cygwin.",
    "created_at": "2020-04-03T20:24:32Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412628",
    "user": "https://github.com/mkoeppe"
}
```

This fixes the build on cygwin.



---

archive/issue_comments_412629.json:
```json
{
    "body": "please squash the commits",
    "created_at": "2020-04-04T01:01:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412629",
    "user": "https://github.com/dimpase"
}
```

please squash the commits



---

archive/issue_comments_412630.json:
```json
{
    "body": "Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:",
    "created_at": "2020-04-04T01:48:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412630",
    "user": "https://trac.sagemath.org/admin/accounts/users/git"
}
```

Branch pushed to git repo; I updated commit sha1. This was a forced push. New commits:



---

archive/issue_comments_412631.json:
```json
{
    "body": "squashed, needs review",
    "created_at": "2020-04-05T17:18:41Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412631",
    "user": "https://github.com/mkoeppe"
}
```

squashed, needs review



---

archive/issue_comments_412632.json:
```json
{
    "body": "Correct builds can be seen at https://github.com/mkoeppe/sage/actions/runs/74117913",
    "created_at": "2020-04-10T04:27:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412632",
    "user": "https://github.com/mkoeppe"
}
```

Correct builds can be seen at https://github.com/mkoeppe/sage/actions/runs/74117913



---

archive/issue_comments_412633.json:
```json
{
    "body": "It's good on OS X, built with various different Pythons (homebrew, system, Sage).",
    "created_at": "2020-04-10T18:41:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412633",
    "user": "https://github.com/jhpalmieri"
}
```

It's good on OS X, built with various different Pythons (homebrew, system, Sage).



---

archive/issue_comments_412634.json:
```json
{
    "body": "Let's get this one into the next beta please",
    "created_at": "2020-04-12T00:41:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412634",
    "user": "https://github.com/mkoeppe"
}
```

Let's get this one into the next beta please



---

archive/issue_comments_412635.json:
```json
{
    "body": "looks good.",
    "created_at": "2020-04-12T00:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412635",
    "user": "https://github.com/dimpase"
}
```

looks good.



---

archive/issue_comments_412636.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2020-04-12T00:47:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412636",
    "user": "https://github.com/dimpase"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_412637.json:
```json
{
    "body": "Thanks!",
    "created_at": "2020-04-12T00:55:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412637",
    "user": "https://github.com/mkoeppe"
}
```

Thanks!



---

archive/issue_comments_412638.json:
```json
{
    "body": "Changing priority from critical to blocker.",
    "created_at": "2020-04-15T03:16:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412638",
    "user": "https://github.com/mkoeppe"
}
```

Changing priority from critical to blocker.



---

archive/issue_comments_412639.json:
```json
{
    "body": "Attachment [pynac-0.7.26.sage-2020-04-03.log](tarball://root/attachments/some-uuid/ticket29404/pynac-0.7.26.sage-2020-04-03.log) by @DaveWitteMorris created at 2020-04-15 06:24:46\n\npynac did not download on Mac OS 10.15.3",
    "created_at": "2020-04-15T06:24:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412639",
    "user": "https://github.com/DaveWitteMorris"
}
```

Attachment [pynac-0.7.26.sage-2020-04-03.log](tarball://root/attachments/some-uuid/ticket29404/pynac-0.7.26.sage-2020-04-03.log) by @DaveWitteMorris created at 2020-04-15 06:24:46

pynac did not download on Mac OS 10.15.3



---

archive/issue_comments_412640.json:
```json
{
    "body": "I apologize if this is noise (I may have messed up my installation somehow), but I thought I should report that I had trouble building pynac in 9.1rc0 on Mac OS 10.15.3, even with this ticket:\n\n```\nAttempting to download from https://github.com/mkoeppe/pynac/releases/download/pynac-0.7.26.sage-2020-04-03/pynac-0.7.26.sage-2020-04-03.tar.bz2\n[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]\nERROR [transfer|run:135]: [Errno socket error] [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1056)\n************************************************************************\n```\n\nI merged #29408 and this ticket, and ran `make build`, then realized that the description of this ticket has a different make command, so I tried that, too. But pynac did not download. I am attaching the `pynac-0.7.26.sage-2020-04-03.log` log file from the more complicated build command, in case it is of use.\n\nThe build went smoothly after I manually downloaded pynac and put it in the upstream directory, so I want to say thanks for these patches! I never would have figured out how to fix the build errors on my own.",
    "created_at": "2020-04-15T06:35:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412640",
    "user": "https://github.com/DaveWitteMorris"
}
```

I apologize if this is noise (I may have messed up my installation somehow), but I thought I should report that I had trouble building pynac in 9.1rc0 on Mac OS 10.15.3, even with this ticket:

```
Attempting to download from https://github.com/mkoeppe/pynac/releases/download/pynac-0.7.26.sage-2020-04-03/pynac-0.7.26.sage-2020-04-03.tar.bz2
[xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx]
ERROR [transfer|run:135]: [Errno socket error] [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: unable to get local issuer certificate (_ssl.c:1056)
************************************************************************
```

I merged #29408 and this ticket, and ran `make build`, then realized that the description of this ticket has a different make command, so I tried that, too. But pynac did not download. I am attaching the `pynac-0.7.26.sage-2020-04-03.log` log file from the more complicated build command, in case it is of use.

The build went smoothly after I manually downloaded pynac and put it in the upstream directory, so I want to say thanks for these patches! I never would have figured out how to fix the build errors on my own.



---

archive/issue_comments_412641.json:
```json
{
    "body": "this might be due to (system) python, more precisely its urllib module, being unable to provide correct certs...\n\ndoes installing python 3.7 from python.org and also making sure it installs certs (there is a 2nd step in installation, iirc) fixes this?",
    "created_at": "2020-04-15T06:41:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412641",
    "user": "https://github.com/dimpase"
}
```

this might be due to (system) python, more precisely its urllib module, being unable to provide correct certs...

does installing python 3.7 from python.org and also making sure it installs certs (there is a 2nd step in installation, iirc) fixes this?



---

archive/issue_comments_412642.json:
```json
{
    "body": "Yes, that solved the problem. After installing python and certifi, pynac downloaded from mkoeppe's directory (and the build succeeded) when I used `make SAGE_SPKG=\"sage-spkg -o\" pynac-clean pynac`. Thanks!",
    "created_at": "2020-04-15T07:53:43Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412642",
    "user": "https://github.com/DaveWitteMorris"
}
```

Yes, that solved the problem. After installing python and certifi, pynac downloaded from mkoeppe's directory (and the build succeeded) when I used `make SAGE_SPKG="sage-spkg -o" pynac-clean pynac`. Thanks!



---

archive/issue_comments_412643.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2020-04-16T22:33:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412643",
    "user": "https://github.com/vbraun"
}
```

Resolution: fixed



---

archive/issue_events_026953.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2020-04-16T22:33:49Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/29167#event-26953"
}
```



---

archive/issue_comments_412644.json:
```json
{
    "body": "Follow up: #29872",
    "created_at": "2020-06-16T11:41:30Z",
    "issue": "https://github.com/sagemath/sagetest/issues/29167",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/29167#issuecomment-412644",
    "user": "https://github.com/mkoeppe"
}
```

Follow up: #29872
