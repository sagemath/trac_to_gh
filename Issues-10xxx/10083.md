# Issue 10083: Python fails to build the 'math' module on AIX 5.3 - plus several other modules

archive/issues_010082.json:
```json
{
    "body": "## Hardware and software\n* IBM [RS/6000 7025 F50](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.pseries.doc/hardware_docs/rs6000_7025f50series.htm)\n* 4 x 332 MHz 32-bit PowerPC CPUs\n* 3 GB RAM\n* A fairly wide mixture of disks sizes (3 x 9 GB, 1 x 18 GB, 1 x 36 GB and 1 x 73 GB)\n* DDS-4 tape drive \n* AIX 5.3 (A POSIX certified operating system)\n* gcc 4.2.4 downloaded from [pware](http://pware.hvcc.edu/)\n* sage-4.6.alpha1 with a patched python package to get around #9995\n\n## The problem\n\nAs reported at #9995, the python package initially failed to build at all, as Python's configure script thought the compiler was broken. Once that was sorted out, Python built, but failed to install due to this error:\n\n\n```\nSleeping for three seconds before testing python\nTraceback (most recent call last):\n  File \"<string>\", line 1, in <module>\nImportError: No module named math\nmath module failed to import\n\nreal    37m23.968s\nuser    34m46.809s\nsys     6m19.683s\nsage: An error occurred while installing python-2.6.4.p10\n```\n\nWhen I look at build log for Python (attached), I see a rather large number of modules actually failed to build, so `math` is not the only one, but it is one which causes Sage to fail to build. \n\n```\nFailed to find the necessary bits to build these modules:\n_bsddb             _curses_panel      _hashlib\n_ssl               bsddb185           gdbm\nlinuxaudiodev      ossaudiodev        spwd\nsunaudiodev\nTo find the necessary bits, look in setup.py in detect_modules() for the module's name.\n\n\nFailed to build these modules:\n_bisect            _bytesio           _codecs_cn\n_codecs_hk         _codecs_iso2022    _codecs_jp\n_codecs_kr         _codecs_tw         _collections\n_csv               _ctypes            _ctypes_test\n_curses            _elementtree       _fileio\n_functools         _heapq             _hotshot\n_json              _locale            _lsprof\n_md5               _multibytecodec    _multiprocessing\n_random            _sha               _sha256\n_sha512            _socket            _sqlite3\n_struct            _testcapi          _tkinter\n_weakref           array              audioop\nbinascii           bz2                cmath\ncPickle            crypt              cStringIO\ndatetime           dbm                dl\nfcntl              future_builtins    grp\nimageop            itertools          math\nmmap               nis                operator\nparser             pyexpat            readline\nresource           select             strop\nsyslog             termios            time\nunicodedata        zlib\n```\n\nStrangely enough, despite these modules not building, a large number of packages in Sage that require python would actually build on AIX. \n\nSince AIX is low on the priority list, I will not spend much time on this yet, until the 64-bit Solaris and OpenSolaris ports are complete. \n\nI will investigate this more later, and report any problems upstream if they are needed. It might be something quite simple that's causing a lot of modules to fail to build on AIX.  \n\n\n**Assignee:** drkirkby\n\n**Upstream:** None of the above - read trac for reasoning.\n\nIssue created by migration from https://trac.sagemath.org/ticket/10083\n\n",
    "closed_at": "2019-11-23T19:39:30Z",
    "created_at": "2010-10-06T07:30:59Z",
    "labels": [
        "component: porting: aix or hp-ux",
        "bug",
        "invalid"
    ],
    "title": "Python fails to build the 'math' module on AIX 5.3 - plus several other modules",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10083",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```
## Hardware and software
* IBM [RS/6000 7025 F50](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.pseries.doc/hardware_docs/rs6000_7025f50series.htm)
* 4 x 332 MHz 32-bit PowerPC CPUs
* 3 GB RAM
* A fairly wide mixture of disks sizes (3 x 9 GB, 1 x 18 GB, 1 x 36 GB and 1 x 73 GB)
* DDS-4 tape drive 
* AIX 5.3 (A POSIX certified operating system)
* gcc 4.2.4 downloaded from [pware](http://pware.hvcc.edu/)
* sage-4.6.alpha1 with a patched python package to get around #9995

## The problem

As reported at #9995, the python package initially failed to build at all, as Python's configure script thought the compiler was broken. Once that was sorted out, Python built, but failed to install due to this error:


```
Sleeping for three seconds before testing python
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named math
math module failed to import

real    37m23.968s
user    34m46.809s
sys     6m19.683s
sage: An error occurred while installing python-2.6.4.p10
```

When I look at build log for Python (attached), I see a rather large number of modules actually failed to build, so `math` is not the only one, but it is one which causes Sage to fail to build. 

```
Failed to find the necessary bits to build these modules:
_bsddb             _curses_panel      _hashlib
_ssl               bsddb185           gdbm
linuxaudiodev      ossaudiodev        spwd
sunaudiodev
To find the necessary bits, look in setup.py in detect_modules() for the module's name.


Failed to build these modules:
_bisect            _bytesio           _codecs_cn
_codecs_hk         _codecs_iso2022    _codecs_jp
_codecs_kr         _codecs_tw         _collections
_csv               _ctypes            _ctypes_test
_curses            _elementtree       _fileio
_functools         _heapq             _hotshot
_json              _locale            _lsprof
_md5               _multibytecodec    _multiprocessing
_random            _sha               _sha256
_sha512            _socket            _sqlite3
_struct            _testcapi          _tkinter
_weakref           array              audioop
binascii           bz2                cmath
cPickle            crypt              cStringIO
datetime           dbm                dl
fcntl              future_builtins    grp
imageop            itertools          math
mmap               nis                operator
parser             pyexpat            readline
resource           select             strop
syslog             termios            time
unicodedata        zlib
```

Strangely enough, despite these modules not building, a large number of packages in Sage that require python would actually build on AIX. 

Since AIX is low on the priority list, I will not spend much time on this yet, until the 64-bit Solaris and OpenSolaris ports are complete. 

I will investigate this more later, and report any problems upstream if they are needed. It might be something quite simple that's causing a lot of modules to fail to build on AIX.  


**Assignee:** drkirkby

**Upstream:** None of the above - read trac for reasoning.

Issue created by migration from https://trac.sagemath.org/ticket/10083





---

archive/attachments_013146.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "python-2.6.4.p10.log",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10083/python-2.6.4.p10.log",
    "created_at": "2010-10-06T07:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.log",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```



---

archive/issue_comments_096142.json:
```json
{
    "body": "Install log for Python. This is based on a patched python package, which gets around the problem at #9995. This package is not yet part of Sage.",
    "created_at": "2010-10-06T07:35:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10083#issuecomment-96142",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

Install log for Python. This is based on a patched python package, which gets around the problem at #9995. This package is not yet part of Sage.



---

archive/issue_comments_096143.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,15 @@\n+## Hardware and software\n+* IBM [RS/6000 7025 F50](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.pseries.doc/hardware_docs/rs6000_7025f50series.htm)\n+* 4 x 332 MHz 32-bit PowerPC CPUs\n+* 3 GB RAM\n+* A fairly wide mixture of disks sizes (3 x 9 GB, 1 x 18 GB, 1 x 36 GB and 1 x 73 GB)\n+* DDS-4 tape drive \n+* AIX 5.3 (A POSIX certified operating system)\n+* gcc 4.2.4 downloaded from [pware](http://pware.hvcc.edu/)\n+* sage-4.6.alpha1 with a patched python package to get around #9995\n+\n+## The problem\n+\n As reported at #9995, the python package initially failed to build at all, as Python's configure script thought the compiler was broken. Once that was sorted out, Python built, but failed to install due to this error:\n \n \n@@ -54,5 +66,5 @@\n \n Since AIX is low on the priority list, I will not spend much time on this yet, until the 64-bit Solaris and OpenSolaris ports are complete. \n \n-I will investigate this more later, and report any problems upstream if they are needed. It might be something quite simple. \n+I will investigate this more later, and report any problems upstream if they are needed. It might be something quite simple that's causing a lot of modules to fail to build on AIX.  \n \n``````\n",
    "created_at": "2010-10-06T07:40:18Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10083#issuecomment-96143",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,15 @@
+## Hardware and software
+* IBM [RS/6000 7025 F50](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.pseries.doc/hardware_docs/rs6000_7025f50series.htm)
+* 4 x 332 MHz 32-bit PowerPC CPUs
+* 3 GB RAM
+* A fairly wide mixture of disks sizes (3 x 9 GB, 1 x 18 GB, 1 x 36 GB and 1 x 73 GB)
+* DDS-4 tape drive 
+* AIX 5.3 (A POSIX certified operating system)
+* gcc 4.2.4 downloaded from [pware](http://pware.hvcc.edu/)
+* sage-4.6.alpha1 with a patched python package to get around #9995
+
+## The problem
+
 As reported at #9995, the python package initially failed to build at all, as Python's configure script thought the compiler was broken. Once that was sorted out, Python built, but failed to install due to this error:
 
 
@@ -54,5 +66,5 @@
 
 Since AIX is low on the priority list, I will not spend much time on this yet, until the 64-bit Solaris and OpenSolaris ports are complete. 
 
-I will investigate this more later, and report any problems upstream if they are needed. It might be something quite simple. 
+I will investigate this more later, and report any problems upstream if they are needed. It might be something quite simple that's causing a lot of modules to fail to build on AIX.  
 
``````




---

archive/issue_comments_096144.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -26,7 +26,7 @@\n sage: An error occurred while installing python-2.6.4.p10\n ```\n \n-When I look at config.log for Python, I see a rather large number of modules actually failed to build, so `math` is not the only one, but it is one which causes Sage to fail to build. \n+When I look at build log for Python (attached), I see a rather large number of modules actually failed to build, so `math` is not the only one, but it is one which causes Sage to fail to build. \n \n ```\n Failed to find the necessary bits to build these modules:\n``````\n",
    "created_at": "2010-10-06T07:55:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10083#issuecomment-96144",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -26,7 +26,7 @@
 sage: An error occurred while installing python-2.6.4.p10
 ```
 
-When I look at config.log for Python, I see a rather large number of modules actually failed to build, so `math` is not the only one, but it is one which causes Sage to fail to build. 
+When I look at build log for Python (attached), I see a rather large number of modules actually failed to build, so `math` is not the only one, but it is one which causes Sage to fail to build. 
 
 ```
 Failed to find the necessary bits to build these modules:
``````




---

archive/issue_events_078078.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-5.11",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78078"
}
```



---

archive/issue_events_078079.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-08-13T15:35:53Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-5.12",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78079"
}
```



---

archive/issue_events_078080.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78080"
}
```



---

archive/issue_events_078081.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-01-30T21:20:52Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78081"
}
```



---

archive/issue_events_078082.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78082"
}
```



---

archive/issue_events_078083.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-05-06T15:20:58Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78083"
}
```



---

archive/issue_events_078084.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-6.3",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78084"
}
```



---

archive/issue_events_078085.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/vbraun_spam",
    "created_at": "2014-08-10T16:51:03Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78085"
}
```



---

archive/issue_events_078086.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:39:07Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "milestone": "sage-6.4",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78086"
}
```



---

archive/issue_events_078087.json:
```json
{
    "actor": "https://github.com/embray",
    "created_at": "2019-01-15T18:39:07Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "label": "wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78087"
}
```



---

archive/issue_comments_096145.json:
```json
{
    "body": "<a id='comment:7'></a>\nI don't believe anyone's been maintaining support for AIX or HP-UX for some time.  Putting in sage-wishlist for now in case there is still a desire for it out there, otherwise these tickets should be closed (most of them are probably no longer relevant in any case but I have no obvious way to check this).",
    "created_at": "2019-01-15T18:39:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10083#issuecomment-96145",
    "user": "https://github.com/embray"
}
```

<a id='comment:7'></a>
I don't believe anyone's been maintaining support for AIX or HP-UX for some time.  Putting in sage-wishlist for now in case there is still a desire for it out there, otherwise these tickets should be closed (most of them are probably no longer relevant in any case but I have no obvious way to check this).



---

archive/issue_events_078088.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-11-23T16:28:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78088"
}
```



---

archive/issue_comments_096146.json:
```json
{
    "body": "<a id='comment:8'></a>\nThis is outdated and should be closed.",
    "created_at": "2019-11-23T16:28:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10083#issuecomment-96146",
    "user": "https://github.com/mkoeppe"
}
```

<a id='comment:8'></a>
This is outdated and should be closed.



---

archive/issue_events_078089.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-11-23T16:28:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "label": "wishlist",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78089"
}
```



---

archive/issue_events_078090.json:
```json
{
    "actor": "https://github.com/mkoeppe",
    "created_at": "2019-11-23T16:28:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "label": "duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78090"
}
```



---

archive/issue_events_078091.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-23T19:39:30Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78091"
}
```



---

archive/issue_events_078092.json:
```json
{
    "actor": "https://github.com/fchapoton",
    "created_at": "2019-11-23T19:39:30Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10083",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10083#event-78092"
}
```
