# Issue 10743: Add iterator protocol to EclObject

archive/issues_010680.json:
```json
{
    "body": "Experience teaches that EclObjects wrapping LISP lists would often be convenient to iterate over in list comprehensions and for loops. Pythonizing the EclObject would work recursively, which is often not what is required: you just want to work with EclObjects wrapping the members of the list. The iterator protocol seems to yield a convenient and well-defined interface. Examples:\n\n```\nsage: from sage.libs.ecl import *\nsage: [i for i in EclObject(\"(1 2 3)\")]\n[<ECL: 1>, <ECL: 2>, <ECL: 3>]\nsage: [i for i in EclObject(\"(1 2 . 3)\")]\n[<ECL: 1>, <ECL: 2>, <ECL: 3>]\nsage: [i for i in EclObject(\"NIL\")]\n[]\nsage: [i for i in EclObject(\"T\")]\nTraceback (most recent call last):\n...\nTypeError: ECL object is not iterable\n```\n\n---\nDepends on #10766.\n\nApply [attachment:trac_10743-ecl-iter_p1.patch] and [attachment:trac_10743-reviewer.patch]\n\nSee also #7377.\n\nAssignee: @nbruin\n\nKeywords: ECL lisp ecllib\n\nResolution: fixed\n\nAuthor: Nils Bruin\n\nReviewer: Karl-Dieter Crisman, Jean-Pierre Flori\n\nMerged: sage-4.7.alpha3\n\nIssue created by migration from https://trac.sagemath.org/ticket/10743\n\n",
    "closed_at": "2011-03-28T19:25:14Z",
    "created_at": "2011-02-04T20:36:50Z",
    "labels": [
        "component: interfaces"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "Add iterator protocol to EclObject",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10743",
    "user": "https://github.com/nbruin"
}
```
Experience teaches that EclObjects wrapping LISP lists would often be convenient to iterate over in list comprehensions and for loops. Pythonizing the EclObject would work recursively, which is often not what is required: you just want to work with EclObjects wrapping the members of the list. The iterator protocol seems to yield a convenient and well-defined interface. Examples:

```
sage: from sage.libs.ecl import *
sage: [i for i in EclObject("(1 2 3)")]
[<ECL: 1>, <ECL: 2>, <ECL: 3>]
sage: [i for i in EclObject("(1 2 . 3)")]
[<ECL: 1>, <ECL: 2>, <ECL: 3>]
sage: [i for i in EclObject("NIL")]
[]
sage: [i for i in EclObject("T")]
Traceback (most recent call last):
...
TypeError: ECL object is not iterable
```

---
Depends on #10766.

Apply [attachment:trac_10743-ecl-iter_p1.patch] and [attachment:trac_10743-reviewer.patch]

See also #7377.

Assignee: @nbruin

Keywords: ECL lisp ecllib

Resolution: fixed

Author: Nils Bruin

Reviewer: Karl-Dieter Crisman, Jean-Pierre Flori

Merged: sage-4.7.alpha3

Issue created by migration from https://trac.sagemath.org/ticket/10743





---

archive/issue_comments_117668.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2011-02-04T20:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117668",
    "user": "https://github.com/nbruin"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_117669.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -2,20 +2,18 @@\n \n ```\n sage: from sage.libs.ecl import *\n-sage: I=EclListIterator(EclObject(\"(1 2 3)\"))\n-sage: type(I)\n-<type 'sage.libs.ecl.EclListIterator'>\n-sage: [i for i in I]\n-[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n sage: [i for i in EclObject(\"(1 2 3)\")]\n [<ECL: 1>, <ECL: 2>, <ECL: 3>]\n-sage: EclListIterator(EclObject(\"1\"))\n+sage: [i for i in EclObject(\"(1 2 . 3)\")]\n+[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n+sage: [i for i in EclObject(\"NIL\")]\n+[]\n+sage: [i for i in EclObject(\"T\")]\n Traceback (most recent call last):\n ...\n TypeError: ECL object is not iterable\n ```\n \n-Assignee: @williamstein\n \n Author: Nils Bruin\n \n```\n",
    "created_at": "2011-02-04T20:40:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117669",
    "user": "https://github.com/nbruin"
}
```

Description changed:
```diff
--- 
+++ 
@@ -2,20 +2,18 @@
 
 ```
 sage: from sage.libs.ecl import *
-sage: I=EclListIterator(EclObject("(1 2 3)"))
-sage: type(I)
-<type 'sage.libs.ecl.EclListIterator'>
-sage: [i for i in I]
-[<ECL: 1>, <ECL: 2>, <ECL: 3>]
 sage: [i for i in EclObject("(1 2 3)")]
 [<ECL: 1>, <ECL: 2>, <ECL: 3>]
-sage: EclListIterator(EclObject("1"))
+sage: [i for i in EclObject("(1 2 . 3)")]
+[<ECL: 1>, <ECL: 2>, <ECL: 3>]
+sage: [i for i in EclObject("NIL")]
+[]
+sage: [i for i in EclObject("T")]
 Traceback (most recent call last):
 ...
 TypeError: ECL object is not iterable
 ```
 
-Assignee: @williamstein
 
 Author: Nils Bruin
 
```




---

archive/issue_comments_117670.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [ecl_iter.patch](tarball://root/attachments/some-uuid/ticket10743/ecl_iter.patch) by @nbruin created at 2011-02-04 22:29:00\n\nPatch also fixes a documentation issue: printing of floats in LISP is dependent on an environment setting, and Maxima changes that setting when loaded (sets doubles to be the default rather than single precision floats). Since #7377 preloads Maxima in sage.libs.ecl, it changes the printing of floats and breaks a doctest in EclObject. This patch also changes the doctest so that the environment is fixed, which means the result of the doctest is not dependent on preloading Maxima anymore.",
    "created_at": "2011-02-04T22:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117670",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:2'></a>Attachment [ecl_iter.patch](tarball://root/attachments/some-uuid/ticket10743/ecl_iter.patch) by @nbruin created at 2011-02-04 22:29:00

Patch also fixes a documentation issue: printing of floats in LISP is dependent on an environment setting, and Maxima changes that setting when loaded (sets doubles to be the default rather than single precision floats). Since #7377 preloads Maxima in sage.libs.ecl, it changes the printing of floats and breaks a doctest in EclObject. This patch also changes the doctest so that the environment is fixed, which means the result of the doctest is not dependent on preloading Maxima anymore.



---

archive/issue_comments_117671.json:
```json
{
    "body": "Changing assignee from @williamstein to @nbruin.",
    "created_at": "2011-02-04T22:29:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117671",
    "user": "https://github.com/nbruin"
}
```

Changing assignee from @williamstein to @nbruin.



---

archive/issue_comments_117672.json:
```json
{
    "body": "<a id='comment:3'></a>That's strange, in that patch everything seems to be moved one column to the right compared to the original sources. Just plain patch didn't like it. I haven't tried with mercurial patch but I would be surprised if it worked.",
    "created_at": "2011-02-15T00:49:25Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117672",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:3'></a>That's strange, in that patch everything seems to be moved one column to the right compared to the original sources. Just plain patch didn't like it. I haven't tried with mercurial patch but I would be surprised if it worked.



---

archive/issue_comments_117673.json:
```json
{
    "body": "<a id='comment:4'></a>Replying to [comment:3 fbissey]:\n>  I haven't tried with mercurial patch but I would be surprised if it worked.\n\nIt does apply cleanly to 4.6.1 and the patchbot was happy with the patch too (although the patchbot seems to be down at the moment)\n\n```\nsonny devel/sage$ ../../sage -hg log | head\nchangeset:   15205:f24ce048fa66\ntag:         tip\nuser:        Jeroen Demeyer <jdemeyer@cage.ugent.be>\ndate:        Tue Jan 11 08:10:26 2011 +0100\nsummary:     4.6.1\n\nchangeset:   15204:173ae89d6291\nuser:        Jeroen Demeyer <jdemeyer@cage.ugent.be>\ndate:        Tue Jan 11 04:51:03 2011 +0100\nsummary:     Added tag 4.6.1 for changeset a05facfc3390\nsonny devel/sage$ ../../sage -hg diff\nsonny devel/sage$ ../../sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10743/ecl_iter.patch\nadding ecl_iter.patch to series file\nsonny devel/sage$ ../../sage -hg qpush\napplying ecl_iter.patch\nnow at: ecl_iter.patch\nsonny devel/sage$ ../../sage -hg log | head\nchangeset:   15206:d3554f7e41db\ntag:         ecl_iter.patch\ntag:         qbase\ntag:         qtip\ntag:         tip\nuser:        Nils Bruin <nbruin@sfu.ca>\ndate:        Fri Feb 04 14:19:57 2011 -0800\nsummary:     Add iterator protocol to EclObject\n\nchangeset:   15205:f24ce048fa66\nsonny devel/sage$ ../../sage -bt sage/libs/ecl.pyx\n\n----------------------------------------------------------\nsage: Building and installing modified Sage library files.\n\n\nInstalling c_lib\nscons: `install' is up to date.\nUpdating Cython code....\nBuilding modified file sage/libs/ecl.pyx.\npython `which cython`  --embed-positions --directive cdivision=True,autotestdict=False -I/usr/local/sage/4.6.1/devel/sage-test -o sage/libs/ecl.c sage/libs/ecl.pyx\nsage/libs/ecl.pyx --> /usr/local/sage/4.6.1/local//lib/python/site-packages//sage/libs/ecl.pyx\nTime to execute 1 commands: 3.12507390976 seconds\nFinished compiling Cython code (time = 3.74062800407 seconds)\nrunning install\nrunning build\nrunning build_py\nrunning build_ext\nbuilding 'sage.libs.ecl' extension\ngcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/sage/4.6.1/local/include/ecl/ -I/usr/local/sage/4.6.1/local//include -I/usr/local/sage/4.6.1/local//include/csage -I/usr/local/sage/4.6.1/devel//sage/sage/ext -I/usr/local/sage/4.6.1/local/include/python2.6 -c sage/libs/ecl.c -o build/temp.linux-i686-2.6/sage/libs/ecl.o -w\ngcc -pthread -shared build/temp.linux-i686-2.6/sage/libs/ecl.o -L/usr/local/sage/4.6.1/local//lib -L/usr/local/sage/4.6.1/local/lib -lcsage -lecl -lstdc++ -lntl -lpython2.6 -o build/lib.linux-i686-2.6/sage/libs/ecl.so\nTime to execute 1 commands: 0.438040018082 seconds\nTotal time spent compiling C/C++ extensions:  0.49472618103 seconds.\nrunning install_lib\ncopying build/lib.linux-i686-2.6/sage/libs/ecl.so -> /usr/local/sage/4.6.1/local/lib/python2.6/site-packages/sage/libs\nrunning install_egg_info\nRemoving /usr/local/sage/4.6.1/local/lib/python2.6/site-packages/sage-0.0.0-py2.6.egg-info\nWriting /usr/local/sage/4.6.1/local/lib/python2.6/site-packages/sage-0.0.0-py2.6.egg-info\nsage -t  \"devel/sage-test/sage/libs/ecl.pyx\"                \n\t [2.3 s]\n \n----------------------------------------------------------------------\nAll tests passed!\nTotal time for all tests: 2.3 seconds\n```",
    "created_at": "2011-02-15T02:24:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117673",
    "user": "https://github.com/nbruin"
}
```

<a id='comment:4'></a>Replying to [comment:3 fbissey]:
>  I haven't tried with mercurial patch but I would be surprised if it worked.

It does apply cleanly to 4.6.1 and the patchbot was happy with the patch too (although the patchbot seems to be down at the moment)

```
sonny devel/sage$ ../../sage -hg log | head
changeset:   15205:f24ce048fa66
tag:         tip
user:        Jeroen Demeyer <jdemeyer@cage.ugent.be>
date:        Tue Jan 11 08:10:26 2011 +0100
summary:     4.6.1

changeset:   15204:173ae89d6291
user:        Jeroen Demeyer <jdemeyer@cage.ugent.be>
date:        Tue Jan 11 04:51:03 2011 +0100
summary:     Added tag 4.6.1 for changeset a05facfc3390
sonny devel/sage$ ../../sage -hg diff
sonny devel/sage$ ../../sage -hg qimport http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10743/ecl_iter.patch
adding ecl_iter.patch to series file
sonny devel/sage$ ../../sage -hg qpush
applying ecl_iter.patch
now at: ecl_iter.patch
sonny devel/sage$ ../../sage -hg log | head
changeset:   15206:d3554f7e41db
tag:         ecl_iter.patch
tag:         qbase
tag:         qtip
tag:         tip
user:        Nils Bruin <nbruin@sfu.ca>
date:        Fri Feb 04 14:19:57 2011 -0800
summary:     Add iterator protocol to EclObject

changeset:   15205:f24ce048fa66
sonny devel/sage$ ../../sage -bt sage/libs/ecl.pyx

----------------------------------------------------------
sage: Building and installing modified Sage library files.


Installing c_lib
scons: `install' is up to date.
Updating Cython code....
Building modified file sage/libs/ecl.pyx.
python `which cython`  --embed-positions --directive cdivision=True,autotestdict=False -I/usr/local/sage/4.6.1/devel/sage-test -o sage/libs/ecl.c sage/libs/ecl.pyx
sage/libs/ecl.pyx --> /usr/local/sage/4.6.1/local//lib/python/site-packages//sage/libs/ecl.pyx
Time to execute 1 commands: 3.12507390976 seconds
Finished compiling Cython code (time = 3.74062800407 seconds)
running install
running build
running build_py
running build_ext
building 'sage.libs.ecl' extension
gcc -fno-strict-aliasing -g -O2 -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -fPIC -I/usr/local/sage/4.6.1/local/include/ecl/ -I/usr/local/sage/4.6.1/local//include -I/usr/local/sage/4.6.1/local//include/csage -I/usr/local/sage/4.6.1/devel//sage/sage/ext -I/usr/local/sage/4.6.1/local/include/python2.6 -c sage/libs/ecl.c -o build/temp.linux-i686-2.6/sage/libs/ecl.o -w
gcc -pthread -shared build/temp.linux-i686-2.6/sage/libs/ecl.o -L/usr/local/sage/4.6.1/local//lib -L/usr/local/sage/4.6.1/local/lib -lcsage -lecl -lstdc++ -lntl -lpython2.6 -o build/lib.linux-i686-2.6/sage/libs/ecl.so
Time to execute 1 commands: 0.438040018082 seconds
Total time spent compiling C/C++ extensions:  0.49472618103 seconds.
running install_lib
copying build/lib.linux-i686-2.6/sage/libs/ecl.so -> /usr/local/sage/4.6.1/local/lib/python2.6/site-packages/sage/libs
running install_egg_info
Removing /usr/local/sage/4.6.1/local/lib/python2.6/site-packages/sage-0.0.0-py2.6.egg-info
Writing /usr/local/sage/4.6.1/local/lib/python2.6/site-packages/sage-0.0.0-py2.6.egg-info
sage -t  "devel/sage-test/sage/libs/ecl.pyx"                
	 [2.3 s]
 
----------------------------------------------------------------------
All tests passed!
Total time for all tests: 2.3 seconds
```



---

archive/issue_comments_117674.json:
```json
{
    "body": "<a id='comment:5'></a>ok, that's still quite weird, I have never had a patch like that before. I wonder if google chromium did something to it at download time. In any case sorry for the noise.",
    "created_at": "2011-02-15T02:29:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117674",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:5'></a>ok, that's still quite weird, I have never had a patch like that before. I wonder if google chromium did something to it at download time. In any case sorry for the noise.



---

archive/issue_comments_117675.json:
```json
{
    "body": "<a id='comment:6'></a>The patch applied cleanly on 4.6.2alpha4.\n\nI got one minor doctest failure running \"make ptest\" (I'm using the new ECL 11.1 and Maxima 5.23 packages, maybe something changed with the new ECL):\n\n```\nThe following tests failed:\n\n\tsage -t  -force_lib devel/sage/sage/libs/ecl.pyx # 1 doctests failed\n----------------------------------------------------------------------\nTotal time for all tests: 2519.8 seconds\nmake: *** [ptest] Erreur 128\n[jp@napoleon]% sage -t  -force_lib devel/sage/sage/libs/ecl.pyx                              ~/sage/sage-4.6.2.alpha4\nzsh: command not found: sage\n[jp@napoleon]% ./sage -t  -force_lib devel/sage/sage/libs/ecl.pyx                            ~/sage/sage-4.6.2.alpha4\nsage -t -force_lib \"devel/sage/sage/libs/ecl.pyx\"           \n**********************************************************************\nFile \"/home/jp/sage/sage-4.6.2.alpha4/devel/sage/sage/libs/ecl.pyx\", line 415:\n    sage: a\nExpected:\n    <ECL: 9.999999999999999E39>\nGot:\n    <ECL: 9.999999999999999e39>\n```",
    "created_at": "2011-02-15T11:51:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117675",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:6'></a>The patch applied cleanly on 4.6.2alpha4.

I got one minor doctest failure running "make ptest" (I'm using the new ECL 11.1 and Maxima 5.23 packages, maybe something changed with the new ECL):

```
The following tests failed:

	sage -t  -force_lib devel/sage/sage/libs/ecl.pyx # 1 doctests failed
----------------------------------------------------------------------
Total time for all tests: 2519.8 seconds
make: *** [ptest] Erreur 128
[jp@napoleon]% sage -t  -force_lib devel/sage/sage/libs/ecl.pyx                              ~/sage/sage-4.6.2.alpha4
zsh: command not found: sage
[jp@napoleon]% ./sage -t  -force_lib devel/sage/sage/libs/ecl.pyx                            ~/sage/sage-4.6.2.alpha4
sage -t -force_lib "devel/sage/sage/libs/ecl.pyx"           
**********************************************************************
File "/home/jp/sage/sage-4.6.2.alpha4/devel/sage/sage/libs/ecl.pyx", line 415:
    sage: a
Expected:
    <ECL: 9.999999999999999E39>
Got:
    <ECL: 9.999999999999999e39>
```



---

archive/issue_comments_117676.json:
```json
{
    "body": "<a id='comment:7'></a>You should probably be aware of #10766 (an update of ECL), which has positive review. Also perhaps #10773 (an update of Maxima) which also has positive review. \n\nDave",
    "created_at": "2011-02-17T18:36:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117676",
    "user": "https://trac.sagemath.org/admin/accounts/users/drkirkby"
}
```

<a id='comment:7'></a>You should probably be aware of #10766 (an update of ECL), which has positive review. Also perhaps #10773 (an update of Maxima) which also has positive review. 

Dave



---

archive/issue_comments_117677.json:
```json
{
    "body": "<a id='comment:8'></a>I have been on this one and the maxima as ecl lib for a while Dave.\nThey apply cleanly against #10766 and #10773. I imagine other people on these bugs are getting sick of the reminders.",
    "created_at": "2011-02-17T19:53:11Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117677",
    "user": "https://github.com/kiwifb"
}
```

<a id='comment:8'></a>I have been on this one and the maxima as ecl lib for a while Dave.
They apply cleanly against #10766 and #10773. I imagine other people on these bugs are getting sick of the reminders.



---

archive/issue_comments_117678.json:
```json
{
    "body": "<a id='comment:9'></a>Somewhat surprisingly, I could understand all of this code, and it makes perfect sense.  Tests work out fine, obviously, though I don't know if any edge cases have been tried, since I am not sure what the edge cases would be. My guess is that this is used fairly heavily in #7377, is that correct?  \n\nMy only request is that there might be a doctest to show the list and tuples working directly, like so:\n\n```\nsage: [i for i in EclObject([1,2,3])]\n[<ECL: 1>, <ECL: 2>, <ECL: 3>]\nsage: [i for i in EclObject((1,2,3))]\n[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n```\nI realize that combining the doctests from EclObject and this module amount to the same thing, but it would be very helpful for someone wanting to understand the Ecl interface better.  \n\nI'm going to attach a reviewer patch for this, with the understanding that if for some reason this causes #7377 patches to not apply correctly, the positive review for the current patch would remain (and I'd open a separate ticket for this).",
    "created_at": "2011-03-15T18:18:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117678",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:9'></a>Somewhat surprisingly, I could understand all of this code, and it makes perfect sense.  Tests work out fine, obviously, though I don't know if any edge cases have been tried, since I am not sure what the edge cases would be. My guess is that this is used fairly heavily in #7377, is that correct?  

My only request is that there might be a doctest to show the list and tuples working directly, like so:

```
sage: [i for i in EclObject([1,2,3])]
[<ECL: 1>, <ECL: 2>, <ECL: 3>]
sage: [i for i in EclObject((1,2,3))]
[<ECL: 1>, <ECL: 2>, <ECL: 3>]
```
I realize that combining the doctests from EclObject and this module amount to the same thing, but it would be very helpful for someone wanting to understand the Ecl interface better.  

I'm going to attach a reviewer patch for this, with the understanding that if for some reason this causes #7377 patches to not apply correctly, the positive review for the current patch would remain (and I'd open a separate ticket for this).



---

archive/issue_comments_117679.json:
```json
{
    "body": "Apply after original patch",
    "created_at": "2011-03-15T19:03:00Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117679",
    "user": "https://github.com/kcrisman"
}
```

Apply after original patch



---

archive/issue_comments_117680.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2011-03-15T19:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117680",
    "user": "https://github.com/kcrisman"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_117681.json:
```json
{
    "body": "<a id='comment:10'></a>Attachment [trac_10743-reviewer.patch](tarball://root/attachments/some-uuid/ticket10743/trac_10743-reviewer.patch) by @kcrisman created at 2011-03-15 19:05:46\n\nApply attachment:trac_10743-ecl-iter_p1.patch\n\nIf it doesn't screw up #7377 applying properly (which it shouldn't, as #7377 only touches ecl.pyx in one small place far from here), also apply attachment:trac_10743-reviewer.patch\n\nIf for some reason it does cause problems, please open a new ticket for this minor improvement.",
    "created_at": "2011-03-15T19:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117681",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:10'></a>Attachment [trac_10743-reviewer.patch](tarball://root/attachments/some-uuid/ticket10743/trac_10743-reviewer.patch) by @kcrisman created at 2011-03-15 19:05:46

Apply attachment:trac_10743-ecl-iter_p1.patch

If it doesn't screw up #7377 applying properly (which it shouldn't, as #7377 only touches ecl.pyx in one small place far from here), also apply attachment:trac_10743-reviewer.patch

If for some reason it does cause problems, please open a new ticket for this minor improvement.



---

archive/issue_comments_117682.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,25 @@\n+Experience teaches that EclObjects wrapping LISP lists would often be convenient to iterate over in list comprehensions and for loops. Pythonizing the EclObject would work recursively, which is often not what is required: you just want to work with EclObjects wrapping the members of the list. The iterator protocol seems to yield a convenient and well-defined interface. Examples:\n \n+```\n+sage: from sage.libs.ecl import *\n+sage: [i for i in EclObject(\"(1 2 3)\")]\n+[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n+sage: [i for i in EclObject(\"(1 2 . 3)\")]\n+[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n+sage: [i for i in EclObject(\"NIL\")]\n+[]\n+sage: [i for i in EclObject(\"T\")]\n+Traceback (most recent call last):\n+...\n+TypeError: ECL object is not iterable\n+```\n+\n+\n+---\n+\n+Apply attachment:trac_10743-ecl-iter_p1.patch\n+\n+If it doesn't screw up #7377 applying properly (which it shouldn't, as #7377 only touches ecl.pyx in one small place far from here), also apply attachment:trac_10743-reviewer.patch\n \n Author: Nils Bruin\n \n```\n",
    "created_at": "2011-03-15T19:05:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117682",
    "user": "https://github.com/kcrisman"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,25 @@
+Experience teaches that EclObjects wrapping LISP lists would often be convenient to iterate over in list comprehensions and for loops. Pythonizing the EclObject would work recursively, which is often not what is required: you just want to work with EclObjects wrapping the members of the list. The iterator protocol seems to yield a convenient and well-defined interface. Examples:
 
+```
+sage: from sage.libs.ecl import *
+sage: [i for i in EclObject("(1 2 3)")]
+[<ECL: 1>, <ECL: 2>, <ECL: 3>]
+sage: [i for i in EclObject("(1 2 . 3)")]
+[<ECL: 1>, <ECL: 2>, <ECL: 3>]
+sage: [i for i in EclObject("NIL")]
+[]
+sage: [i for i in EclObject("T")]
+Traceback (most recent call last):
+...
+TypeError: ECL object is not iterable
+```
+
+
+---
+
+Apply attachment:trac_10743-ecl-iter_p1.patch
+
+If it doesn't screw up #7377 applying properly (which it shouldn't, as #7377 only touches ecl.pyx in one small place far from here), also apply attachment:trac_10743-reviewer.patch
 
 Author: Nils Bruin
 
```




---

archive/issue_comments_117683.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,25 @@\n+Experience teaches that EclObjects wrapping LISP lists would often be convenient to iterate over in list comprehensions and for loops. Pythonizing the EclObject would work recursively, which is often not what is required: you just want to work with EclObjects wrapping the members of the list. The iterator protocol seems to yield a convenient and well-defined interface. Examples:\n \n+```\n+sage: from sage.libs.ecl import *\n+sage: [i for i in EclObject(\"(1 2 3)\")]\n+[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n+sage: [i for i in EclObject(\"(1 2 . 3)\")]\n+[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n+sage: [i for i in EclObject(\"NIL\")]\n+[]\n+sage: [i for i in EclObject(\"T\")]\n+Traceback (most recent call last):\n+...\n+TypeError: ECL object is not iterable\n+```\n+\n+---\n+Depends on [#10766](http://trac.sagemath.org/sage_trac/ticket/10766).\n+\n+Apply attachment:trac_10743-ecl-iter_p1.patch\n+\n+If it doesn't screw up #7377 applying properly (which it shouldn't, as #7377 only touches ecl.pyx in one small place far from here), also apply attachment:trac_10743-reviewer.patch\n \n Author: Nils Bruin\n \n```\n",
    "created_at": "2011-03-17T08:28:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117683",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,25 @@
+Experience teaches that EclObjects wrapping LISP lists would often be convenient to iterate over in list comprehensions and for loops. Pythonizing the EclObject would work recursively, which is often not what is required: you just want to work with EclObjects wrapping the members of the list. The iterator protocol seems to yield a convenient and well-defined interface. Examples:
 
+```
+sage: from sage.libs.ecl import *
+sage: [i for i in EclObject("(1 2 3)")]
+[<ECL: 1>, <ECL: 2>, <ECL: 3>]
+sage: [i for i in EclObject("(1 2 . 3)")]
+[<ECL: 1>, <ECL: 2>, <ECL: 3>]
+sage: [i for i in EclObject("NIL")]
+[]
+sage: [i for i in EclObject("T")]
+Traceback (most recent call last):
+...
+TypeError: ECL object is not iterable
+```
+
+---
+Depends on [#10766](http://trac.sagemath.org/sage_trac/ticket/10766).
+
+Apply attachment:trac_10743-ecl-iter_p1.patch
+
+If it doesn't screw up #7377 applying properly (which it shouldn't, as #7377 only touches ecl.pyx in one small place far from here), also apply attachment:trac_10743-reviewer.patch
 
 Author: Nils Bruin
 
```




---

archive/issue_comments_117684.json:
```json
{
    "body": "<a id='comment:11'></a>Just wanted to add that the minor change in the p1 patch has been introduced by the new ECL package so this should depend on [#10766](http://trac.sagemath.org/sage_trac/ticket/10766) to pass doctests.",
    "created_at": "2011-03-17T08:28:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117684",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

<a id='comment:11'></a>Just wanted to add that the minor change in the p1 patch has been introduced by the new ECL package so this should depend on [#10766](http://trac.sagemath.org/sage_trac/ticket/10766) to pass doctests.



---

archive/issue_comments_117685.json:
```json
{
    "body": "<a id='comment:12'></a>Adding JP (if Trac will let me!  third try) as reviewer due to the p1.\n\n`@`JP: Just FYI, you can just do #10766 instead of [#10766](http://trac.sagemath...10766) to get the link automatically on Trac. Much easier!",
    "created_at": "2011-03-17T12:25:33Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117685",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:12'></a>Adding JP (if Trac will let me!  third try) as reviewer due to the p1.

`@`JP: Just FYI, you can just do #10766 instead of [#10766](http://trac.sagemath...10766) to get the link automatically on Trac. Much easier!



---

archive/issue_comments_117686.json:
```json
{
    "body": "<a id='comment:13'></a>\n```\n#10766\n```\ninstead of \n\n```\n[http://trac.sagemath...10766 #10766\n```\nIt was too smart in that last comment.",
    "created_at": "2011-03-17T12:26:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117686",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:13'></a>
```
#10766
```
instead of 

```
[http://trac.sagemath...10766 #10766
```
It was too smart in that last comment.



---

archive/issue_comments_117687.json:
```json
{
    "body": "Changing status from positive_review to needs_work.",
    "created_at": "2011-03-28T09:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117687",
    "user": "https://github.com/jdemeyer"
}
```

Changing status from positive_review to needs_work.



---

archive/issue_comments_117688.json:
```json
{
    "body": "<a id='comment:14'></a>Change the commit message of the first patch such that it contains the ticket number.",
    "created_at": "2011-03-28T09:24:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117688",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:14'></a>Change the commit message of the first patch such that it contains the ticket number.



---

archive/issue_comments_117689.json:
```json
{
    "body": "Attachment [trac_10743-ecl-iter_p1.patch](tarball://root/attachments/some-uuid/ticket10743/trac_10743-ecl-iter_p1.patch) by jpflori created at 2011-03-28 09:33:55\n\nJust corrected the small typo for double-float test and added ticket trac number to commit message; apply instead of original patch",
    "created_at": "2011-03-28T09:33:55Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117689",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Attachment [trac_10743-ecl-iter_p1.patch](tarball://root/attachments/some-uuid/ticket10743/trac_10743-ecl-iter_p1.patch) by jpflori created at 2011-03-28 09:33:55

Just corrected the small typo for double-float test and added ticket trac number to commit message; apply instead of original patch



---

archive/issue_comments_117690.json:
```json
{
    "body": "Changing status from needs_work to needs_review.",
    "created_at": "2011-03-28T09:40:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117690",
    "user": "https://trac.sagemath.org/admin/accounts/users/jpflori"
}
```

Changing status from needs_work to needs_review.



---

archive/issue_comments_117691.json:
```json
{
    "body": "Resolution: fixed",
    "created_at": "2011-03-28T19:25:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117691",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: fixed



---

archive/issue_events_027687.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-28T19:25:14Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10743#event-27687"
}
```



---

archive/issue_comments_117692.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,25 @@\n+Experience teaches that EclObjects wrapping LISP lists would often be convenient to iterate over in list comprehensions and for loops. Pythonizing the EclObject would work recursively, which is often not what is required: you just want to work with EclObjects wrapping the members of the list. The iterator protocol seems to yield a convenient and well-defined interface. Examples:\n \n+```\n+sage: from sage.libs.ecl import *\n+sage: [i for i in EclObject(\"(1 2 3)\")]\n+[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n+sage: [i for i in EclObject(\"(1 2 . 3)\")]\n+[<ECL: 1>, <ECL: 2>, <ECL: 3>]\n+sage: [i for i in EclObject(\"NIL\")]\n+[]\n+sage: [i for i in EclObject(\"T\")]\n+Traceback (most recent call last):\n+...\n+TypeError: ECL object is not iterable\n+```\n+\n+---\n+Depends on #10766.\n+\n+Apply [attachment:trac_10743-ecl-iter_p1.patch] and [attachment:trac_10743-reviewer.patch]\n+\n+See also #7377.\n \n Author: Nils Bruin\n \n```\n",
    "created_at": "2011-03-28T19:34:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10743",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10743#issuecomment-117692",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,25 @@
+Experience teaches that EclObjects wrapping LISP lists would often be convenient to iterate over in list comprehensions and for loops. Pythonizing the EclObject would work recursively, which is often not what is required: you just want to work with EclObjects wrapping the members of the list. The iterator protocol seems to yield a convenient and well-defined interface. Examples:
 
+```
+sage: from sage.libs.ecl import *
+sage: [i for i in EclObject("(1 2 3)")]
+[<ECL: 1>, <ECL: 2>, <ECL: 3>]
+sage: [i for i in EclObject("(1 2 . 3)")]
+[<ECL: 1>, <ECL: 2>, <ECL: 3>]
+sage: [i for i in EclObject("NIL")]
+[]
+sage: [i for i in EclObject("T")]
+Traceback (most recent call last):
+...
+TypeError: ECL object is not iterable
+```
+
+---
+Depends on #10766.
+
+Apply [attachment:trac_10743-ecl-iter_p1.patch] and [attachment:trac_10743-reviewer.patch]
+
+See also #7377.
 
 Author: Nils Bruin
 
```

