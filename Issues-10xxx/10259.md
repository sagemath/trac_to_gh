# Issue 10259: success error code returned when spkg install fails

archive/issues_010258.json:
```json
{
    "body": "For example, try out the (failing) attached spkg whose spkg-install is just \"exit 1\"\n\nAssignee: GeorgSWeber\n\nReviewer: Karl-Dieter Crisman\n\nResolution: worksforme\n\nIssue created by migration from https://trac.sagemath.org/ticket/10259\n\n",
    "closed_at": "2013-04-28T12:46:56Z",
    "created_at": "2010-11-13T21:37:21Z",
    "labels": [
        "component: build",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "success error code returned when spkg install fails",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10259",
    "user": "https://github.com/robertwb"
}
```
For example, try out the (failing) attached spkg whose spkg-install is just "exit 1"

Assignee: GeorgSWeber

Reviewer: Karl-Dieter Crisman

Resolution: worksforme

Issue created by migration from https://trac.sagemath.org/ticket/10259





---

archive/issue_comments_109498.json:
```json
{
    "body": "Description changed:\n```diff\n--- \n+++ \n@@ -1,4 +1,4 @@\n-For example, try out the (failing) spkg at https://sage.math.washington.edu:8091/hudson/job/sage-build/303/artifact/cython-devel.spkg\n+For example, try out the (failing) attached spkg whose spkg-install is just \"exit 1\"\n \n Comment: 1\n \n```\n",
    "created_at": "2010-11-13T21:40:22Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109498",
    "user": "https://github.com/robertwb"
}
```

Description changed:
```diff
--- 
+++ 
@@ -1,4 +1,4 @@
-For example, try out the (failing) spkg at https://sage.math.washington.edu:8091/hudson/job/sage-build/303/artifact/cython-devel.spkg
+For example, try out the (failing) attached spkg whose spkg-install is just "exit 1"
 
 Comment: 1
 
```




---

archive/issue_comments_109499.json:
```json
{
    "body": "Spkg failing to install.",
    "created_at": "2010-11-13T21:40:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109499",
    "user": "https://github.com/robertwb"
}
```

Spkg failing to install.



---

archive/issue_comments_109500.json:
```json
{
    "body": "<a id='comment:2'></a>Attachment [bad.spkg](tarball://root/attachments/some-uuid/ticket10259/bad.spkg) by @kcrisman created at 2013-04-26 01:41:06\n\n```\n$ ./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg\nAttempting to download package bad\n>>> Downloading bad.spkg.\n[.]\nbad\n====================================================\nExtracting package /Users/karl.crisman/Downloads/sage-5.9.rc0/spkg/optional/bad.spkg\n<snip>\nThread model: posix\ngcc version 4.7.2 (GCC) \n****************************************************\n\nreal\t0m0.001s\nuser\t0m0.000s\nsys\t0m0.000s\n************************************************************************\nError installing package bad\n************************************************************************\nPlease email sage-devel (http://groups.google.com/group/sage-devel)\n<snip>\n```\nThis was on OS X.  Same result on boxes.math.  And if I write a script that checks the exit code\n\n```\necho \"Trying stuff\"\n./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg\nif [ $? -ne 0 ]; then\n    echo \"it failed\"\nfi\n```\nworks as expected.  I believe we can close this, then?",
    "created_at": "2013-04-26T01:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109500",
    "user": "https://github.com/kcrisman"
}
```

<a id='comment:2'></a>Attachment [bad.spkg](tarball://root/attachments/some-uuid/ticket10259/bad.spkg) by @kcrisman created at 2013-04-26 01:41:06

```
$ ./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg
Attempting to download package bad
>>> Downloading bad.spkg.
[.]
bad
====================================================
Extracting package /Users/karl.crisman/Downloads/sage-5.9.rc0/spkg/optional/bad.spkg
<snip>
Thread model: posix
gcc version 4.7.2 (GCC) 
****************************************************

real	0m0.001s
user	0m0.000s
sys	0m0.000s
************************************************************************
Error installing package bad
************************************************************************
Please email sage-devel (http://groups.google.com/group/sage-devel)
<snip>
```
This was on OS X.  Same result on boxes.math.  And if I write a script that checks the exit code

```
echo "Trying stuff"
./sage -i http://trac.sagemath.org/sage_trac/raw-attachment/ticket/10259/bad.spkg
if [ $? -ne 0 ]; then
    echo "it failed"
fi
```
works as expected.  I believe we can close this, then?



---

archive/issue_events_026371.json:
```json
{
    "actor": "https://github.com/kcrisman",
    "created_at": "2013-04-26T01:41:06Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10259#event-26371"
}
```



---

archive/issue_comments_109501.json:
```json
{
    "body": "Changing status from new to needs_review.",
    "created_at": "2013-04-26T01:41:06Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109501",
    "user": "https://github.com/kcrisman"
}
```

Changing status from new to needs_review.



---

archive/issue_comments_109502.json:
```json
{
    "body": "Changing status from needs_review to positive_review.",
    "created_at": "2013-04-26T12:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109502",
    "user": "https://github.com/tscrim"
}
```

Changing status from needs_review to positive_review.



---

archive/issue_comments_109503.json:
```json
{
    "body": "<a id='comment:3'></a>Worked for me on Ubuntu as well. I think this can be closed.",
    "created_at": "2013-04-26T12:40:05Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109503",
    "user": "https://github.com/tscrim"
}
```

<a id='comment:3'></a>Worked for me on Ubuntu as well. I think this can be closed.



---

archive/issue_events_026372.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-04-28T12:46:56Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10259#event-26372"
}
```



---

archive/issue_comments_109504.json:
```json
{
    "body": "Resolution: worksforme",
    "created_at": "2013-04-28T12:46:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109504",
    "user": "https://github.com/jdemeyer"
}
```

Resolution: worksforme



---

archive/issue_comments_109505.json:
```json
{
    "body": "<a id='comment:5'></a>See #14492: I still observe those wrong success reports. This is on an `openSuse` laptop,\n\n```\n> uname -a\nLinux linux-sqwp.site 3.1.10-1.19-desktop #1 SMP PREEMPT Mon Feb 25 10:32:50 UTC 2013 (f0b13a3) x86_64 x86_64 x86_64 GNU/Linux\n> cat /etc/issue\nWelcome to openSUSE 12.1 \"Asparagus\" - Kernel \\r (\\l).\n```",
    "created_at": "2013-04-29T11:48:01Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109505",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:5'></a>See #14492: I still observe those wrong success reports. This is on an `openSuse` laptop,

```
> uname -a
Linux linux-sqwp.site 3.1.10-1.19-desktop #1 SMP PREEMPT Mon Feb 25 10:32:50 UTC 2013 (f0b13a3) x86_64 x86_64 x86_64 GNU/Linux
> cat /etc/issue
Welcome to openSUSE 12.1 "Asparagus" - Kernel \r (\l).
```



---

archive/issue_comments_109506.json:
```json
{
    "body": "<a id='comment:6'></a>The spkg from here fails to install (as it should). But when I insert an unknown identifier into some Cython file in my group cohomology spkg, then sage-5.9.rc0 reports success, even though of course compilation fails.\n\nSo, shall one re-open this ticket?",
    "created_at": "2013-04-29T11:51:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109506",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:6'></a>The spkg from here fails to install (as it should). But when I insert an unknown identifier into some Cython file in my group cohomology spkg, then sage-5.9.rc0 reports success, even though of course compilation fails.

So, shall one re-open this ticket?



---

archive/issue_comments_109507.json:
```json
{
    "body": "<a id='comment:7'></a>This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.",
    "created_at": "2013-04-29T11:53:39Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109507",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:7'></a>This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.



---

archive/issue_comments_109508.json:
```json
{
    "body": "<a id='comment:8'></a>Replying to [comment:7 jdemeyer]:\n> This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.\n\n\nVolker, for one, says that my spkg-install is fine. So, I'd rather assume that it is a problem with building Cython code in an spkg.\n\nSo, I'll try to create a new bad.spkg.",
    "created_at": "2013-04-29T11:57:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10259",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10259#issuecomment-109508",
    "user": "https://github.com/simon-king-jena"
}
```

<a id='comment:8'></a>Replying to [comment:7 jdemeyer]:
> This ticket is about the general `spkg/bin` scripts. What you're observing in #14492 must be a problem with your particular package.


Volker, for one, says that my spkg-install is fine. So, I'd rather assume that it is a problem with building Cython code in an spkg.

So, I'll try to create a new bad.spkg.
