# Issue 10745: bug in elliptic curve gens()

archive/issues_010682.json:
```json
{
    "assignees": [
        "https://github.com/JohnCremona"
    ],
    "body": "[See #15608 for a list of open simon_two_descent tickets]\n\n```\nsage: a = [1, 0, 1, -1751, -31352]\nsage: F = EllipticCurve(a)\nsage: K.<d> = QuadraticField(5)\nsage: FK = EllipticCurve(K, a)\nsage: F.gens()\n[(52 : 111 : 1)]\nsage: FK.gens()\n[]\n```\nThis isn't very good, because the default in Sage is proof=True, so one would expect this to be a provable result (until reading the docs of course).\n\nOver Q, if the result is not provable an error is raised or a warning is printed, depending on the `proof` flag. This should be the same here.\n\nDepends on #10735\n\nCC:  @adeines @JohnCremona @sagetrac-gagansekhon @sagetrac-weigandt @williamstein @categorie @robertwb\n\nBranch/Commit: **[`42c563c`](https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372)**\n\nReviewer: **Chris Wuthrich**\n\nAuthor: **Peter Bruin**\n\nComponent: **elliptic curves**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10745_\n\n",
    "closed_at": "2014-04-01T00:11:43Z",
    "created_at": "2011-02-05T00:40:23Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "bug in elliptic curve gens()",
    "type": "issue",
    "updated_at": "2014-04-01T00:11:43Z",
    "url": "https://github.com/sagemath/sage/issues/10745",
    "user": "https://github.com/rlmill"
}
```
[See #15608 for a list of open simon_two_descent tickets]

```
sage: a = [1, 0, 1, -1751, -31352]
sage: F = EllipticCurve(a)
sage: K.<d> = QuadraticField(5)
sage: FK = EllipticCurve(K, a)
sage: F.gens()
[(52 : 111 : 1)]
sage: FK.gens()
[]
```
This isn't very good, because the default in Sage is proof=True, so one would expect this to be a provable result (until reading the docs of course).

Over Q, if the result is not provable an error is raised or a warning is printed, depending on the `proof` flag. This should be the same here.

Depends on #10735

CC:  @adeines @JohnCremona @sagetrac-gagansekhon @sagetrac-weigandt @williamstein @categorie @robertwb

Branch/Commit: **[`42c563c`](https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372)**

Reviewer: **Chris Wuthrich**

Author: **Peter Bruin**

Component: **elliptic curves**

_Issue created by migration from https://trac.sagemath.org/ticket/10745_





---

archive/issue_events_140473.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-02-05T00:40:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20elliptic%20curves",
    "label_color": "0000ff",
    "label_name": "c: elliptic curves",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140473"
}
```



---

archive/issue_events_140474.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-02-05T00:40:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140474"
}
```



---

archive/issue_events_140475.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-02-05T00:40:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140475"
}
```



---

archive/issue_events_140476.json:
```json
{
    "actor": "https://github.com/JohnCremona",
    "created_at": "2011-02-05T00:40:23Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "subject": "https://github.com/rlmill",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140476"
}
```



---

archive/issue_comments_103267.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nI'm not sure that, when the gens() function was added over number fields at SD22, we thought it through very well.  In particular, I don't think that Simon's code necessarily passes the \"proof=True\" criteria (but cannot be more specific).  Except that the points it returns are points on the curve...",
    "created_at": "2011-02-05T02:13:37Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103267",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:1" align="right">comment:1</div>

I'm not sure that, when the gens() function was added over number fields at SD22, we thought it through very well.  In particular, I don't think that Simon's code necessarily passes the "proof=True" criteria (but cannot be more specific).  Except that the points it returns are points on the curve...



---

archive/issue_comments_103268.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nThe output of simon_two_descent() for EK is\n\n```\nsage: FK.simon_two_descent()\n(1, 1, [])\n```\nwhich can be interpreted as follows:  he computes the 2-Selmer rank is 1, which gives a valid upper bound for the rank (=1).  He fails to find points on 2-coverings, so there are no points returned.  *But* he uses the parity conjecture to increase the lower bound from 0 to 1.\n\nSo when we decide (in the simon_two_descent()) method) that the output is certain, we need to take this into account.\n\nSecondly, the gens() function for curves over number fields is completely reckless:\n\n```\n        lower,upper,gens = self.simon_two_descent(verbose=verbose,lim1=lim1,lim3=\\\nlim3,limtriv=limtriv,maxprob=maxprob,limbigprime=limbigprime)\n        return gens\n```\nThere is no caching, no checking of Proof, and worst of all, the gens which are returned have not been looked at at all.  Just about all you can say about them is that they are points on the curve.\n\nWho let that in?  This function needs changing urgently.",
    "created_at": "2011-02-22T22:46:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103268",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:2" align="right">comment:2</div>

The output of simon_two_descent() for EK is

```
sage: FK.simon_two_descent()
(1, 1, [])
```
which can be interpreted as follows:  he computes the 2-Selmer rank is 1, which gives a valid upper bound for the rank (=1).  He fails to find points on 2-coverings, so there are no points returned.  *But* he uses the parity conjecture to increase the lower bound from 0 to 1.

So when we decide (in the simon_two_descent()) method) that the output is certain, we need to take this into account.

Secondly, the gens() function for curves over number fields is completely reckless:

```
        lower,upper,gens = self.simon_two_descent(verbose=verbose,lim1=lim1,lim3=\
lim3,limtriv=limtriv,maxprob=maxprob,limbigprime=limbigprime)
        return gens
```
There is no caching, no checking of Proof, and worst of all, the gens which are returned have not been looked at at all.  Just about all you can say about them is that they are points on the curve.

Who let that in?  This function needs changing urgently.



---

archive/issue_comments_103269.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nIf we want to keep a gens() function for elliptic curves over number fields. We're going to need some functionality to check saturation of points over number fields. I'm ccing Robert Bradshaw because he's thought about this.",
    "created_at": "2011-03-22T19:25:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103269",
    "user": "https://github.com/sagetrac-weigandt"
}
```

<div id="comment:4" align="right">comment:4</div>

If we want to keep a gens() function for elliptic curves over number fields. We're going to need some functionality to check saturation of points over number fields. I'm ccing Robert Bradshaw because he's thought about this.



---

archive/issue_comments_103270.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIt seems that the second problem has disappeared in 6.0. I get now \n\n```\nsage: FK.gens(lim1=6)\n[]\n```\nThat still leaves 1).\n\nSomehow, one should think that it would be best, if the curve remembered that it was defined over a smaller field and that it had found some points of infinite order already. In general, I think it is best if the algorithm would run through all subfield and search for points in there. ... But now I am dreaming.",
    "created_at": "2013-12-22T22:46:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103270",
    "user": "https://github.com/categorie"
}
```

<div id="comment:5" align="right">comment:5</div>

It seems that the second problem has disappeared in 6.0. I get now 

```
sage: FK.gens(lim1=6)
[]
```
That still leaves 1).

Somehow, one should think that it would be best, if the curve remembered that it was defined over a smaller field and that it had found some points of infinite order already. In general, I think it is best if the algorithm would run through all subfield and search for points in there. ... But now I am dreaming.



---

archive/issue_comments_103271.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nI modified the docstring of gens in #13593 . It now says there that the function returns some points of infinite order. In fact Simon's script just gives back what it came across during the various ways to search for points. They are not lin. indep. for instance. And of course there is no guarantee it finds any.\n\nMaybe this ticket should now be rewritten as:\n\nImplement `gens` correctly for elliptic curves over number fields. Extract from the points given by 2-descent (in case it determines the rank) a set of linearly indep. point and then saturate the Mordell-Weil group.",
    "created_at": "2013-12-28T01:39:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103271",
    "user": "https://github.com/categorie"
}
```

<div id="comment:6" align="right">comment:6</div>

I modified the docstring of gens in #13593 . It now says there that the function returns some points of infinite order. In fact Simon's script just gives back what it came across during the various ways to search for points. They are not lin. indep. for instance. And of course there is no guarantee it finds any.

Maybe this ticket should now be rewritten as:

Implement `gens` correctly for elliptic curves over number fields. Extract from the points given by 2-descent (in case it determines the rank) a set of linearly indep. point and then saturate the Mordell-Weil group.



---

archive/issue_comments_103272.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n+[See #15608 for a list of open simon_two_descent tickets]\n \n ```\n sage: a = [1, 0, 1, -1751, -31352]\n``````\n",
    "created_at": "2013-12-30T16:05:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103272",
    "user": "https://github.com/JohnCremona"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
+[See #15608 for a list of open simon_two_descent tickets]
 
 ```
 sage: a = [1, 0, 1, -1751, -31352]
``````




---

archive/issue_comments_103273.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nI propose to close this after #13593 and #5153 as these two overlap a lot with the ticket here. Once they are closed. Then we open a new ticket enhancement for the saturation over number field (unless that exists already).",
    "created_at": "2013-12-30T16:16:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103273",
    "user": "https://github.com/categorie"
}
```

<div id="comment:8" align="right">comment:8</div>

I propose to close this after #13593 and #5153 as these two overlap a lot with the ticket here. Once they are closed. Then we open a new ticket enhancement for the saturation over number field (unless that exists already).



---

archive/issue_comments_103274.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nGiven that the documentation no longer says that the points returned by `gens()` are linearly independent or span a subgroup of full rank, this is technically not a bug anymore, but there is still the inconsistency with the similar function over **Q**.  There seem to be three options:\n1. close this ticket as invalid or wontfix;\n2. use this ticket to print a warning or raise an error if `gens()` returns something other than a basis for a subgroup of full rank in the Mordell-Weil group;\n3. rewrite this ticket with a more ambitious goal as in [comment:6](#comment%3A6).\nAny ideas?",
    "created_at": "2014-02-12T15:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103274",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:9" align="right">comment:9</div>

Given that the documentation no longer says that the points returned by `gens()` are linearly independent or span a subgroup of full rank, this is technically not a bug anymore, but there is still the inconsistency with the similar function over **Q**.  There seem to be three options:
1. close this ticket as invalid or wontfix;
2. use this ticket to print a warning or raise an error if `gens()` returns something other than a basis for a subgroup of full rank in the Mordell-Weil group;
3. rewrite this ticket with a more ambitious goal as in [comment:6](#comment%3A6).
Any ideas?



---

archive/issue_events_140477.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-02-12T15:59:12Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140477"
}
```



---

archive/issue_comments_103275.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -10,31 +10,16 @@\n sage: FK.gens()\n []\n ```\n+This isn't very good, because the default in Sage is proof=True, so one would expect this to be a provable result (until reading the docs of course).\n \n-This isn't very good, because the default in Sage is proof=True, so one would expect this to be a provable result (until reading the docs of course. But if we try to look harder for the point, we run into a bug with caching:\n+Over Q, if the result is not provable an error is raised or a warning is printed, depending on the `proof` flag. This should be the same here.\n+\n+In earlier versions of Sage (< 6.0), there was also a bug with caching:\n \n ```\n sage: FK.gens(lim1=6)\n----------------------------------------------------------------------------\n-KeyError                                  Traceback (most recent call last)\n-\n-/home/rlmill/<ipython console> in <module>()\n-\n-/home/rlmill/sage-4.6.2.alpha2/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_number_field.pyc in gens(self, verbose, lim1, lim3, limtriv, maxprob, limbigprime)\n-   1772         \"\"\"\n-   1773 \n--> 1774         lower,upper,gens = self.simon_two_descent(verbose=verbose,lim1=lim1,lim3=lim3,limtriv=limtriv,maxprob=maxprob,limbigprime=limbigprime)\n-   1775         return gens\n-   1776 \n-\n-/home/rlmill/sage-4.6.2.alpha2/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_number_field.pyc in simon_two_descent(self, verbose, lim1, lim3, limtriv, maxprob, limbigprime)\n-    265         \n-    266         try:\n---> 267             result = self._simon_two_descent_data[lim1,lim3,limtriv,maxprob,limbigprime]\n-    268             if verbose == 0:\n-    269                 return result\n-\n+Traceback (most recent call last):\n+...\n KeyError: (6, 50, 10, 20, 30)\n ```\n \n-So two problems: 1) Over Q, if the result is not provable a RuntimeError is raised. This should be the same here. 2) One can't change parameters due to the way the output is being cached.\n``````\n",
    "created_at": "2014-02-12T15:59:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103275",
    "user": "https://github.com/pjbruin"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -10,31 +10,16 @@
 sage: FK.gens()
 []
 ```
+This isn't very good, because the default in Sage is proof=True, so one would expect this to be a provable result (until reading the docs of course).
 
-This isn't very good, because the default in Sage is proof=True, so one would expect this to be a provable result (until reading the docs of course. But if we try to look harder for the point, we run into a bug with caching:
+Over Q, if the result is not provable an error is raised or a warning is printed, depending on the `proof` flag. This should be the same here.
+
+In earlier versions of Sage (< 6.0), there was also a bug with caching:
 
 ```
 sage: FK.gens(lim1=6)
----------------------------------------------------------------------------
-KeyError                                  Traceback (most recent call last)
-
-/home/rlmill/<ipython console> in <module>()
-
-/home/rlmill/sage-4.6.2.alpha2/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_number_field.pyc in gens(self, verbose, lim1, lim3, limtriv, maxprob, limbigprime)
-   1772         """
-   1773 
--> 1774         lower,upper,gens = self.simon_two_descent(verbose=verbose,lim1=lim1,lim3=lim3,limtriv=limtriv,maxprob=maxprob,limbigprime=limbigprime)
-   1775         return gens
-   1776 
-
-/home/rlmill/sage-4.6.2.alpha2/local/lib/python2.6/site-packages/sage/schemes/elliptic_curves/ell_number_field.pyc in simon_two_descent(self, verbose, lim1, lim3, limtriv, maxprob, limbigprime)
-    265         
-    266         try:
---> 267             result = self._simon_two_descent_data[lim1,lim3,limtriv,maxprob,limbigprime]
-    268             if verbose == 0:
-    269                 return result
-
+Traceback (most recent call last):
+...
 KeyError: (6, 50, 10, 20, 30)
 ```
 
-So two problems: 1) Over Q, if the result is not provable a RuntimeError is raised. This should be the same here. 2) One can't change parameters due to the way the output is being cached.
``````




---

archive/issue_comments_103276.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -13,13 +13,3 @@\n This isn't very good, because the default in Sage is proof=True, so one would expect this to be a provable result (until reading the docs of course).\n \n Over Q, if the result is not provable an error is raised or a warning is printed, depending on the `proof` flag. This should be the same here.\n-\n-In earlier versions of Sage (< 6.0), there was also a bug with caching:\n-\n-```\n-sage: FK.gens(lim1=6)\n-Traceback (most recent call last):\n-...\n-KeyError: (6, 50, 10, 20, 30)\n-```\n-\n``````\n",
    "created_at": "2014-02-13T08:21:05Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103276",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -13,13 +13,3 @@
 This isn't very good, because the default in Sage is proof=True, so one would expect this to be a provable result (until reading the docs of course).
 
 Over Q, if the result is not provable an error is raised or a warning is printed, depending on the `proof` flag. This should be the same here.
-
-In earlier versions of Sage (< 6.0), there was also a bug with caching:
-
-```
-sage: FK.gens(lim1=6)
-Traceback (most recent call last):
-...
-KeyError: (6, 50, 10, 20, 30)
-```
-
``````




---

archive/issue_comments_103277.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nI think 3) is covered in ticket #8829. So it does not really make sense to do duplicate it here. \nI don't think we should raise an error or a warning for a documented behaviour as in 2). So I would say:\n\neither this ticket can be closed as in 1) in case the documentation is clear enough about the current behaviour or otherwise it should improve it.\n\nor it is a suggestion to improve the gens function. It should run gens first in subfields (where it is much easier to run) and then put the resulting sets cleverly together.",
    "created_at": "2014-02-28T13:44:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103277",
    "user": "https://github.com/categorie"
}
```

<div id="comment:11" align="right">comment:11</div>

I think 3) is covered in ticket #8829. So it does not really make sense to do duplicate it here. 
I don't think we should raise an error or a warning for a documented behaviour as in 2). So I would say:

either this ticket can be closed as in 1) in case the documentation is clear enough about the current behaviour or otherwise it should improve it.

or it is a suggestion to improve the gens function. It should run gens first in subfields (where it is much easier to run) and then put the resulting sets cleverly together.



---

archive/issue_comments_103278.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nReplying to [@categorie](#comment%3A11):\n> I think 3) is covered in ticket #8829. So it does not really make sense to do duplicate it here.\n\nOK, I agree (I hadn't seen #8829).\n> I don't think we should raise an error or a warning for a documented behaviour as in 2).\n\nIn that case I think it would be good to explicitly say that this is different from the function `gens()` for elliptic curves over **Q**.  The documentation currently also says \"Check `rank()` or `rank_bounds()` to verify the number of generators\", which is somewhat misleading because even if `E.rank() == len(E.gens())` nothing is guaranteed except that the points have infinite order, so you don't really verify anything by just comparing the two numbers.\n> So I would say:\n> \n> either this ticket can be closed as in 1) in case the documentation is clear enough about the current behaviour or otherwise it should improve it.\n\nThe documentation can be improved in any case; even if we can do better in `gens()` for some curves, we are certainly far away from always returning a basis for the Mordell-Weil group modulo torsion, so documentation improvements will not be made redundant by the other option:\n> or it is a suggestion to improve the gens function. It should run gens first in subfields (where it is much easier to run) and then put the resulting sets cleverly together. \n\nThere are quite a few things one could try, e.g.\n- to find a suitable base field, start with the field generated by the coefficients of the Weierstrass model, and then possibly try to descend to a smaller field\n- try to reduce the base field even more by finding an *isogeny* to an elliptic curve defined over a smaller field\n- for a quadratic extension *L*/*K* and a curve *E*/*L* already defined over *K*, compute M-W generators of *E*/*K* and of its twist by the extension *L*/*K*\nHow about just clarifying the documentation in this ticket and opening a new ticket for these actual improvements to `gens()`?",
    "created_at": "2014-02-28T14:48:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103278",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:12" align="right">comment:12</div>

Replying to [@categorie](#comment%3A11):
> I think 3) is covered in ticket #8829. So it does not really make sense to do duplicate it here.

OK, I agree (I hadn't seen #8829).
> I don't think we should raise an error or a warning for a documented behaviour as in 2).

In that case I think it would be good to explicitly say that this is different from the function `gens()` for elliptic curves over **Q**.  The documentation currently also says "Check `rank()` or `rank_bounds()` to verify the number of generators", which is somewhat misleading because even if `E.rank() == len(E.gens())` nothing is guaranteed except that the points have infinite order, so you don't really verify anything by just comparing the two numbers.
> So I would say:
> 
> either this ticket can be closed as in 1) in case the documentation is clear enough about the current behaviour or otherwise it should improve it.

The documentation can be improved in any case; even if we can do better in `gens()` for some curves, we are certainly far away from always returning a basis for the Mordell-Weil group modulo torsion, so documentation improvements will not be made redundant by the other option:
> or it is a suggestion to improve the gens function. It should run gens first in subfields (where it is much easier to run) and then put the resulting sets cleverly together. 

There are quite a few things one could try, e.g.
- to find a suitable base field, start with the field generated by the coefficients of the Weierstrass model, and then possibly try to descend to a smaller field
- try to reduce the base field even more by finding an *isogeny* to an elliptic curve defined over a smaller field
- for a quadratic extension *L*/*K* and a curve *E*/*L* already defined over *K*, compute M-W generators of *E*/*K* and of its twist by the extension *L*/*K*
How about just clarifying the documentation in this ticket and opening a new ticket for these actual improvements to `gens()`?



---

archive/issue_comments_103279.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\n> How about just clarifying the documentation in this ticket and opening a new ticket for these actual improvements to `gens()`?\n\nYes, I agree that is the best to do. We can also make `simon_two_descent` return only points of infinite order in the number field case, too. As it was noted in #10735.",
    "created_at": "2014-03-28T17:56:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103279",
    "user": "https://github.com/categorie"
}
```

<div id="comment:13" align="right">comment:13</div>

> How about just clarifying the documentation in this ticket and opening a new ticket for these actual improvements to `gens()`?

Yes, I agree that is the best to do. We can also make `simon_two_descent` return only points of infinite order in the number field case, too. As it was noted in #10735.



---

archive/issue_comments_103280.json:
```json
{
    "body": "Dependencies: **#10735**",
    "created_at": "2014-03-28T20:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103280",
    "user": "https://github.com/pjbruin"
}
```

Dependencies: **#10735**



---

archive/issue_events_140478.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-03-28T20:35:15Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140478"
}
```



---

archive/issue_events_140479.json:
```json
{
    "actor": "https://github.com/pjbruin",
    "created_at": "2014-03-28T20:35:15Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140479"
}
```



---

archive/issue_comments_103281.json:
```json
{
    "body": "Author: **Peter Bruin**",
    "created_at": "2014-03-28T20:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103281",
    "user": "https://github.com/pjbruin"
}
```

Author: **Peter Bruin**



---

archive/issue_comments_103282.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nOK, I made a branch doing what you suggested.  The documentation is now hopefully clearer.  Filtering out points of finite order is now always done directly after calling Simon's GP program.  While I was at it, I removed the change to an integral model since this is not necessary (anymore?).",
    "created_at": "2014-03-28T20:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103282",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:14" align="right">comment:14</div>

OK, I made a branch doing what you suggested.  The documentation is now hopefully clearer.  Filtering out points of finite order is now always done directly after calling Simon's GP program.  While I was at it, I removed the change to an integral model since this is not necessary (anymore?).



---

archive/issue_comments_103283.json:
```json
{
    "body": "Commit: **[`318230a`](https://github.com/sagemath/sagetrac-mirror/commit/318230a2b970faf0abcc81729046061f01392dc1)**",
    "created_at": "2014-03-28T20:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103283",
    "user": "https://github.com/pjbruin"
}
```

Commit: **[`318230a`](https://github.com/sagemath/sagetrac-mirror/commit/318230a2b970faf0abcc81729046061f01392dc1)**



---

archive/issue_comments_103284.json:
```json
{
    "body": "Branch: **[u/pbruin/10745-elliptic_curve_gens](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10745-elliptic_curve_gens)**",
    "created_at": "2014-03-28T20:35:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103284",
    "user": "https://github.com/pjbruin"
}
```

Branch: **[u/pbruin/10745-elliptic_curve_gens](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10745-elliptic_curve_gens)**



---

archive/issue_comments_103285.json:
```json
{
    "body": "Changed commit from **[`318230a`](https://github.com/sagemath/sagetrac-mirror/commit/318230a2b970faf0abcc81729046061f01392dc1)** to **[`42c563c`](https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372)**",
    "created_at": "2014-03-28T21:58:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103285",
    "user": "https://github.com/sagetrac-git"
}
```

Changed commit from **[`318230a`](https://github.com/sagemath/sagetrac-mirror/commit/318230a2b970faf0abcc81729046061f01392dc1)** to **[`42c563c`](https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372)**



---

archive/issue_comments_103286.json:
```json
{
    "body": "<div id=\"comment:15\"></div>\n\nBranch pushed to git repo; I updated commit sha1. New commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372\"><code>42c563c</code></a></td><td><code>cache result of simon_two_descent over QQ</code></td></tr></table>\n",
    "created_at": "2014-03-28T21:58:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103286",
    "user": "https://github.com/sagetrac-git"
}
```

<div id="comment:15"></div>

Branch pushed to git repo; I updated commit sha1. New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372"><code>42c563c</code></a></td><td><code>cache result of simon_two_descent over QQ</code></td></tr></table>




---

archive/issue_comments_103287.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAlso implement caching of the result of `simon_two_descent` over QQ by sharing more code between the various functions.\n\n---\nNew commits:\n<table><tr><td><a href=\"https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372\"><code>42c563c</code></a></td><td><code>cache result of simon_two_descent over QQ</code></td></tr></table>\n",
    "created_at": "2014-03-28T22:00:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103287",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:16" align="right">comment:16</div>

Also implement caching of the result of `simon_two_descent` over QQ by sharing more code between the various functions.

---
New commits:
<table><tr><td><a href="https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372"><code>42c563c</code></a></td><td><code>cache result of simon_two_descent over QQ</code></td></tr></table>




---

archive/issue_comments_103288.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nMy first comment when looking at the modifications above is that I see that you changed ell.gp. Is this good ? It is very very likely that the next update of simon's scripts will forget to make this patch-fix of a upstream file. Would it not be better to tell the author to change this in his version and we update our file ? This is a genuine question as I am not sure what is better. One thing to bear in mind is that it seems that Denis has not been very active on the bugs in his script recently.",
    "created_at": "2014-03-30T15:29:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103288",
    "user": "https://github.com/categorie"
}
```

<div id="comment:17" align="right">comment:17</div>

My first comment when looking at the modifications above is that I see that you changed ell.gp. Is this good ? It is very very likely that the next update of simon's scripts will forget to make this patch-fix of a upstream file. Would it not be better to tell the author to change this in his version and we update our file ? This is a genuine question as I am not sure what is better. One thing to bear in mind is that it seems that Denis has not been very active on the bugs in his script recently.



---

archive/issue_comments_103289.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nIf I understand correctly the old ell.gp returns 0 for the rank of the example in ell_number_field.py at line 2086, while the point in there is of infinite order. We should certainly report this upstream as a bug.",
    "created_at": "2014-03-30T15:47:11Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103289",
    "user": "https://github.com/categorie"
}
```

<div id="comment:18" align="right">comment:18</div>

If I understand correctly the old ell.gp returns 0 for the rank of the example in ell_number_field.py at line 2086, while the point in there is of infinite order. We should certainly report this upstream as a bug.



---

archive/issue_comments_103290.json:
```json
{
    "body": "<div id=\"comment:19\" align=\"right\">comment:19</div>\n\nReplying to [@categorie](#comment%3A18):\n> If I understand correctly the old ell.gp returns 0 for the rank of the example in ell_number_field.py at line 2086, while the point in there is of infinite order. We should certainly report this upstream as a bug.\n\nThis is #16022, on which this ticket indirectly depends (explaining the edit of `ell.gp` showing up in the branch).",
    "created_at": "2014-03-30T16:04:30Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103290",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:19" align="right">comment:19</div>

Replying to [@categorie](#comment%3A18):
> If I understand correctly the old ell.gp returns 0 for the rank of the example in ell_number_field.py at line 2086, while the point in there is of infinite order. We should certainly report this upstream as a bug.

This is #16022, on which this ticket indirectly depends (explaining the edit of `ell.gp` showing up in the branch).



---

archive/issue_comments_103291.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nThat is not mentioned as dependency on the ticket though. How do I get to know quickly what the modifications to approve in this ticket are ? I always though that commit messages starting with the trac number were useful for that.",
    "created_at": "2014-03-30T16:13:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103291",
    "user": "https://github.com/categorie"
}
```

<div id="comment:20" align="right">comment:20</div>

That is not mentioned as dependency on the ticket though. How do I get to know quickly what the modifications to approve in this ticket are ? I always though that commit messages starting with the trac number were useful for that.



---

archive/issue_comments_103292.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nReplying to [@categorie](#comment%3A20):\n> That is not mentioned as dependency on the ticket though.\n\nIt is quite a long chain of dependencies: #10745 <- #10735 <- #9322 <- #16009 <- #16022 (plus #9322 <- #16011).  I'm not sure if explicitly listing all of these makes it clearer.\n> How do I get to know quickly what the modifications to approve in this ticket are ?\n\nAll dependencies get in via #10735, so one way to do it is to create a local branch for #10735 and type `git diff --color ticket/10735 ticket/10745` (replace `ticket/10735` and `ticket/10745` with the branch names you use).\n> I always though that commit messages starting with the trac number were useful for that.\n\nGood point; usually I number the branch name, but it could indeed be useful to put the ticket number in the commit message as well.",
    "created_at": "2014-03-30T21:45:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103292",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:21" align="right">comment:21</div>

Replying to [@categorie](#comment%3A20):
> That is not mentioned as dependency on the ticket though.

It is quite a long chain of dependencies: #10745 <- #10735 <- #9322 <- #16009 <- #16022 (plus #9322 <- #16011).  I'm not sure if explicitly listing all of these makes it clearer.
> How do I get to know quickly what the modifications to approve in this ticket are ?

All dependencies get in via #10735, so one way to do it is to create a local branch for #10735 and type `git diff --color ticket/10735 ticket/10745` (replace `ticket/10735` and `ticket/10745` with the branch names you use).
> I always though that commit messages starting with the trac number were useful for that.

Good point; usually I number the branch name, but it could indeed be useful to put the ticket number in the commit message as well.



---

archive/issue_events_140480.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2014-03-31T12:01:39Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140480"
}
```



---

archive/issue_events_140481.json:
```json
{
    "actor": "https://github.com/categorie",
    "created_at": "2014-03-31T12:01:39Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140481"
}
```



---

archive/issue_comments_103293.json:
```json
{
    "body": "Reviewer: **Chris Wuthrich**",
    "created_at": "2014-03-31T12:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103293",
    "user": "https://github.com/categorie"
}
```

Reviewer: **Chris Wuthrich**



---

archive/issue_comments_103294.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nOK, that was helpful. \n\nAll tests pass and I am happy with all modifications. Except there is one I am not certain about. You changed in gp_simon that the model is not necessarily changed to an integral model. I tried a few example and it seems to work even with non-integral models. Why are you certain this will never cause a problem ?\n\nCan I leave you to open a ticket for the other issue on gens ? I believe there is one for saturation, but I think we should open another one for the original problem posted in the question here.",
    "created_at": "2014-03-31T12:01:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103294",
    "user": "https://github.com/categorie"
}
```

<div id="comment:22" align="right">comment:22</div>

OK, that was helpful. 

All tests pass and I am happy with all modifications. Except there is one I am not certain about. You changed in gp_simon that the model is not necessarily changed to an integral model. I tried a few example and it seems to work even with non-integral models. Why are you certain this will never cause a problem ?

Can I leave you to open a ticket for the other issue on gens ? I believe there is one for saturation, but I think we should open another one for the original problem posted in the question here.



---

archive/issue_comments_103295.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nReplying to [@categorie](#comment%3A22): \n> All tests pass and I am happy with all modifications.\n\nThanks for the review!\n>Except there is one I am not certain about. You changed in gp_simon that the model is not necessarily changed to an integral model. I tried a few example and it seems to work even with non-integral models. Why are you certain this will never cause a problem ?\n\nDenis Simon writes this in the documentation of `ell.gp`:\n\n```\n  La fonction bnfellrank() accepte toutes les courbes sous la forme\n  [a1,a2,a3,a4,a6]\n  Les coefficients peuvent etre entiers ou non.\n```\nOne of the first things that the GP function `bnfellrank()` does is indeed clearing denominators.  (The specialised functions for the three possible 2-torsion structures do require an integral model, but we don't call those directly.)\n> Can I leave you to open a ticket for the other issue on gens ? I believe there is one for saturation, but I think we should open another one for the original problem posted in the question here.\n\nYou mean for extracting a set of linearly independent points, or for the trick of looking over smaller fields first?  I can open a ticket for each of those.  The one for saturation is #8829.",
    "created_at": "2014-03-31T13:50:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103295",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:23" align="right">comment:23</div>

Replying to [@categorie](#comment%3A22): 
> All tests pass and I am happy with all modifications.

Thanks for the review!
>Except there is one I am not certain about. You changed in gp_simon that the model is not necessarily changed to an integral model. I tried a few example and it seems to work even with non-integral models. Why are you certain this will never cause a problem ?

Denis Simon writes this in the documentation of `ell.gp`:

```
  La fonction bnfellrank() accepte toutes les courbes sous la forme
  [a1,a2,a3,a4,a6]
  Les coefficients peuvent etre entiers ou non.
```
One of the first things that the GP function `bnfellrank()` does is indeed clearing denominators.  (The specialised functions for the three possible 2-torsion structures do require an integral model, but we don't call those directly.)
> Can I leave you to open a ticket for the other issue on gens ? I believe there is one for saturation, but I think we should open another one for the original problem posted in the question here.

You mean for extracting a set of linearly independent points, or for the trick of looking over smaller fields first?  I can open a ticket for each of those.  The one for saturation is #8829.



---

archive/issue_comments_103296.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nWell, I guess saturation (using the height pairing anyway) should filter out the linearly dependent points too. I was rather thinking of the other issue. Maybe a simple thing would be to pass on the gens when using `base_extend`. The more advanced \"looking over smaller fields\" seems too utopian.",
    "created_at": "2014-03-31T14:07:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103296",
    "user": "https://github.com/categorie"
}
```

<div id="comment:24" align="right">comment:24</div>

Well, I guess saturation (using the height pairing anyway) should filter out the linearly dependent points too. I was rather thinking of the other issue. Maybe a simple thing would be to pass on the gens when using `base_extend`. The more advanced "looking over smaller fields" seems too utopian.



---

archive/issue_comments_103297.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nReplying to [@categorie](#comment%3A24):\n> Well, I guess saturation (using the height pairing anyway) should filter out the linearly dependent points too.\n\nActually the current patch at #8829 requires the initial points to be linearly independent; it even has a doctest showing that it fails for linearly dependent points...  It is probably better to fix this *after* #8829, though.\n> I was rather thinking of the other issue. Maybe a simple thing would be to pass on the gens when using `base_extend`. The more advanced \"looking over smaller fields\" seems too utopian.\n\nOK, then I will open a ticket to fix at least the following (inspired by the original problem):\n\n```\nsage: E = EllipticCurve([1,0,1,-1751,-31352])\nsage: K.<d>=QuadraticField(5)\nsage: E.gens()\n[(52 : 111 : 1)]\nsage: E.base_extend(K).gens()\n[]\n```",
    "created_at": "2014-03-31T14:17:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103297",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:25" align="right">comment:25</div>

Replying to [@categorie](#comment%3A24):
> Well, I guess saturation (using the height pairing anyway) should filter out the linearly dependent points too.

Actually the current patch at #8829 requires the initial points to be linearly independent; it even has a doctest showing that it fails for linearly dependent points...  It is probably better to fix this *after* #8829, though.
> I was rather thinking of the other issue. Maybe a simple thing would be to pass on the gens when using `base_extend`. The more advanced "looking over smaller fields" seems too utopian.

OK, then I will open a ticket to fix at least the following (inspired by the original problem):

```
sage: E = EllipticCurve([1,0,1,-1751,-31352])
sage: K.<d>=QuadraticField(5)
sage: E.gens()
[(52 : 111 : 1)]
sage: E.base_extend(K).gens()
[]
```



---

archive/issue_comments_103298.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nWell, whatever the documentation says about gens over number fields, users will assume that we are miracle-workers and hence that the gens are complete over the extension.  The only situation where this is probably do-able is for quadratic extensions, assuming that we can find gens for the twist.  Somewhere there is code which, on given an elliptic curve over a quadratic fields when evaluating its gens function, tries to see if the curve is a base-change and if so uses this trick.  I cannot remember of anyone implemented this well enough to have been let in...",
    "created_at": "2014-03-31T14:21:50Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103298",
    "user": "https://github.com/JohnCremona"
}
```

<div id="comment:26" align="right">comment:26</div>

Well, whatever the documentation says about gens over number fields, users will assume that we are miracle-workers and hence that the gens are complete over the extension.  The only situation where this is probably do-able is for quadratic extensions, assuming that we can find gens for the twist.  Somewhere there is code which, on given an elliptic curve over a quadratic fields when evaluating its gens function, tries to see if the curve is a base-change and if so uses this trick.  I cannot remember of anyone implemented this well enough to have been let in...



---

archive/issue_comments_103299.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nReplying to [@pjbruin](#comment%3A25):\n> Replying to [@categorie](#comment%3A24):\n> > I was rather thinking of the other issue. Maybe a simple thing would be to pass on the gens when using `base_extend`. The more advanced \"looking over smaller fields\" seems too utopian.\n\n> OK, then I will open a ticket\n\nThis is now #16034.",
    "created_at": "2014-03-31T14:29:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103299",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:27" align="right">comment:27</div>

Replying to [@pjbruin](#comment%3A25):
> Replying to [@categorie](#comment%3A24):
> > I was rather thinking of the other issue. Maybe a simple thing would be to pass on the gens when using `base_extend`. The more advanced "looking over smaller fields" seems too utopian.

> OK, then I will open a ticket

This is now #16034.



---

archive/issue_comments_103300.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nReplying to [@JohnCremona](#comment%3A26):\n> Somewhere there is code which, on given an elliptic curve over a quadratic fields when evaluating its gens function, tries to see if the curve is a base-change and if so uses this trick.  I cannot remember of anyone implemented this well enough to have been let in...\n\nI think this is part of the patch at #8829.",
    "created_at": "2014-03-31T14:30:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103300",
    "user": "https://github.com/pjbruin"
}
```

<div id="comment:28" align="right">comment:28</div>

Replying to [@JohnCremona](#comment%3A26):
> Somewhere there is code which, on given an elliptic curve over a quadratic fields when evaluating its gens function, tries to see if the curve is a base-change and if so uses this trick.  I cannot remember of anyone implemented this well enough to have been let in...

I think this is part of the patch at #8829.



---

archive/issue_comments_103301.json:
```json
{
    "body": "Changed branch from **[u/pbruin/10745-elliptic_curve_gens](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10745-elliptic_curve_gens)** to **[`42c563c`](https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372)**",
    "created_at": "2014-04-01T00:11:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10745#issuecomment-103301",
    "user": "https://github.com/vbraun"
}
```

Changed branch from **[u/pbruin/10745-elliptic_curve_gens](https://github.com/sagemath/sagetrac-mirror/tree/u/pbruin/10745-elliptic_curve_gens)** to **[`42c563c`](https://github.com/sagemath/sagetrac-mirror/commit/42c563c4b4e834adb39d75b3b02e21ab1c3da372)**



---

archive/issue_events_140482.json:
```json
{
    "actor": "https://github.com/vbraun",
    "created_at": "2014-04-01T00:11:43Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140482"
}
```



---

archive/issue_events_140483.json:
```json
{
    "actor": "https://github.com/vbraun",
    "commit_id": "416f22b13f7b69c7f01d396938b64461883710c6",
    "commit_repository": "https://github.com/sagemath/sage",
    "created_at": "2014-04-01T00:11:43Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10745",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10745#event-140483"
}
```
