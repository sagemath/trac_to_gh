# Issue 10776: poset top() function breaks when top element has boolean value False

archive/issues_010711.json:
```json
{
    "body": "Posets determine whether there is a top element by converting the element returned by `._hasse_diagram.top()` to a boolean.  Instead, the function should check whether the returned value is `None`.\n\nHere is the current definition of `.top()`:\n\n```\n    def top(self):\n        \"\"\"\n        Returns the top element of the poset, if it exists.\n        \n        EXAMPLES::\n        \n            sage: P = Poset({0:[3],1:[3],2:[3],3:[4,5],4:[],5:[]})\n            sage: P.top() is None\n            True\n            sage: Q = Poset({0:[1],1:[]})\n            sage: Q.top()\n            1\n        \"\"\"\n        hasse_top = self._hasse_diagram.top()\n        if hasse_top:\n            return self._vertex_to_element(hasse_top)\n        else:\n            return None\n```\n\nAnd here is an example showing how it fails:\n\n```\nsage: p = Poset([[0],[]]); p\nFinite poset containing 1 elements\nsage: p.list()\n[0]\nsage: p.top()\nsage: p.top() is None\nTrue\nsage: p._hasse_diagram.top()\n0\nsage: p._hasse_diagram.top() is None\nFalse\n```\n\n**Assignee:** sage-combinat\n\n**CC:**  @nilesjohnson @novoselt\n\n**Keywords:** poset, top\n\n**Author:** Niles Johnson\n\n**Reviewer:** Andrey Novoseltsev\n\n**Merged:** sage-4.7.alpha4\n\nIssue created by migration from https://trac.sagemath.org/ticket/10776\n\n",
    "closed_at": "2011-04-07T19:57:36Z",
    "created_at": "2011-02-13T18:28:34Z",
    "labels": [
        "component: combinatorics",
        "bug",
        "good first issue"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7",
    "title": "poset top() function breaks when top element has boolean value False",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10776",
    "user": "https://github.com/nilesjohnson"
}
```
Posets determine whether there is a top element by converting the element returned by `._hasse_diagram.top()` to a boolean.  Instead, the function should check whether the returned value is `None`.

Here is the current definition of `.top()`:

```
    def top(self):
        """
        Returns the top element of the poset, if it exists.
        
        EXAMPLES::
        
            sage: P = Poset({0:[3],1:[3],2:[3],3:[4,5],4:[],5:[]})
            sage: P.top() is None
            True
            sage: Q = Poset({0:[1],1:[]})
            sage: Q.top()
            1
        """
        hasse_top = self._hasse_diagram.top()
        if hasse_top:
            return self._vertex_to_element(hasse_top)
        else:
            return None
```

And here is an example showing how it fails:

```
sage: p = Poset([[0],[]]); p
Finite poset containing 1 elements
sage: p.list()
[0]
sage: p.top()
sage: p.top() is None
True
sage: p._hasse_diagram.top()
0
sage: p._hasse_diagram.top() is None
False
```

**Assignee:** sage-combinat

**CC:**  @nilesjohnson @novoselt

**Keywords:** poset, top

**Author:** Niles Johnson

**Reviewer:** Andrey Novoseltsev

**Merged:** sage-4.7.alpha4

Issue created by migration from https://trac.sagemath.org/ticket/10776





---

archive/issue_events_032788.json:
```json
{
    "actor": "https://github.com/novoselt",
    "created_at": "2011-03-08T04:23:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "milestone": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10776#event-32788"
}
```



---

archive/issue_comments_132193.json:
```json
{
    "body": "**Author:** Niles Johnson",
    "created_at": "2011-03-17T20:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132193",
    "user": "https://github.com/nilesjohnson"
}
```

**Author:** Niles Johnson



---

archive/issue_comments_132194.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-03-17T20:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132194",
    "user": "https://github.com/nilesjohnson"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_132195.json:
```json
{
    "body": "<a id='comment:2'></a>\npatched; written to parallel the code for `.bottom()`.",
    "created_at": "2011-03-17T20:20:13Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132195",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:2'></a>
patched; written to parallel the code for `.bottom()`.



---

archive/issue_comments_132196.json:
```json
{
    "body": "<a id='comment:3'></a>\nLooks good, but it would be nice to mention ticket number in the TESTS ;-)",
    "created_at": "2011-03-17T20:52:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132196",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:3'></a>
Looks good, but it would be nice to mention ticket number in the TESTS ;-)



---

archive/issue_comments_132197.json:
```json
{
    "body": "<a id='comment:4'></a>\nReplying to [novoselt](#comment%3A3):\n> Looks good, but it would be nice to mention ticket number in the TESTS ;-)\n\n\nWell, actually I've thought about this before -- I think there was a time when the developer guide recommended it.  But when I looked into this a few months ago, I couldn't find the recommendation any more, and someone convinced me to drop it with something like the following:  Wouldn't it be strange and pointless if, many years from now, the Sage source code were filled with references to ticket numbers that are meaningless to most users?\n\nDo you really think there's a compelling reason to mention the ticket?",
    "created_at": "2011-03-18T13:49:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132197",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:4'></a>
Replying to [novoselt](#comment%3A3):
> Looks good, but it would be nice to mention ticket number in the TESTS ;-)


Well, actually I've thought about this before -- I think there was a time when the developer guide recommended it.  But when I looked into this a few months ago, I couldn't find the recommendation any more, and someone convinced me to drop it with something like the following:  Wouldn't it be strange and pointless if, many years from now, the Sage source code were filled with references to ticket numbers that are meaningless to most users?

Do you really think there's a compelling reason to mention the ticket?



---

archive/issue_comments_132198.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe fifth bullet in\nhttp://sagemath.org/doc/developer/trac.html#section-review-patches\n\nI don't have a strong opinion on it and was only mentioning it since it is required. (I have also realized that I never marked such doctests with the **inline comment** and I am pretty sure not all bugs that I have reviewed used them...)\n\nAs for meaningless references, perhaps it isn't very relevant since most of such \"marked\" tests should go into TESTS section and not EXAMPLES, so only developers will look at them. On the other hand, I didn't ever have a need to follow these references. But that may be because I am not a sufficiently active developer ;-)",
    "created_at": "2011-03-18T14:14:46Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132198",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:5'></a>
The fifth bullet in
http://sagemath.org/doc/developer/trac.html#section-review-patches

I don't have a strong opinion on it and was only mentioning it since it is required. (I have also realized that I never marked such doctests with the **inline comment** and I am pretty sure not all bugs that I have reviewed used them...)

As for meaningless references, perhaps it isn't very relevant since most of such "marked" tests should go into TESTS section and not EXAMPLES, so only developers will look at them. On the other hand, I didn't ever have a need to follow these references. But that may be because I am not a sufficiently active developer ;-)



---

archive/issue_comments_132199.json:
```json
{
    "body": "add ticket number in test",
    "created_at": "2011-03-18T14:21:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132199",
    "user": "https://github.com/nilesjohnson"
}
```

add ticket number in test



---

archive/attachments_014108.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10776_poset_top.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10776/trac_10776_poset_top.patch",
    "created_at": "2011-03-18T14:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/nilesjohnson"
}
```



---

archive/issue_comments_132200.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [novoselt](#comment%3A5):\n> The fifth bullet in\n> http://sagemath.org/doc/developer/trac.html#section-review-patches\n> \n\n\nWell, I stand corrected -- somehow I can't find that list when I'm looking for it; probably because I associate it with reviewing patches rather than creating them.\n\n\n...\n\nOh, how embarrassing: checking back, it seems that I *wrote* that line ([#9771](http://trac.sagemath.org/sage_trac/ticket/9771)).  So the new patch adds the ticket number :)\n\nthanks for keeping me honest,\n\nNiles",
    "created_at": "2011-03-18T14:32:52Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132200",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:6'></a>
Replying to [novoselt](#comment%3A5):
> The fifth bullet in
> http://sagemath.org/doc/developer/trac.html#section-review-patches
> 


Well, I stand corrected -- somehow I can't find that list when I'm looking for it; probably because I associate it with reviewing patches rather than creating them.


...

Oh, how embarrassing: checking back, it seems that I *wrote* that line ([#9771](http://trac.sagemath.org/sage_trac/ticket/9771)).  So the new patch adds the ticket number :)

thanks for keeping me honest,

Niles



---

archive/issue_comments_132201.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-03-18T16:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132201",
    "user": "https://github.com/novoselt"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_132202.json:
```json
{
    "body": "<a id='comment:7'></a>\nWell, that was a long time ago ;-) Positive review!",
    "created_at": "2011-03-18T16:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132202",
    "user": "https://github.com/novoselt"
}
```

<a id='comment:7'></a>
Well, that was a long time ago ;-) Positive review!



---

archive/issue_comments_132203.json:
```json
{
    "body": "**Reviewer:** Andrey Novoseltsev",
    "created_at": "2011-03-18T16:24:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132203",
    "user": "https://github.com/novoselt"
}
```

**Reviewer:** Andrey Novoseltsev



---

archive/issue_comments_132204.json:
```json
{
    "body": "<a id='comment:8'></a>\n:) thanks!",
    "created_at": "2011-03-18T16:32:47Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132204",
    "user": "https://github.com/nilesjohnson"
}
```

<a id='comment:8'></a>
:) thanks!



---

archive/issue_events_032789.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-04-07T19:57:36Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10776#event-32789"
}
```



---

archive/issue_comments_132205.json:
```json
{
    "body": "**Merged:** sage-4.7.alpha4",
    "created_at": "2011-04-07T19:57:36Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10776",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10776#issuecomment-132205",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.alpha4
