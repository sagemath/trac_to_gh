# Issue 10852: CombinatorialFreeModule contains bug in latex method and is missing a latex_prefix

archive/issues_010786.json:
```json
{
    "body": "This patch provides a bugfix for the latex method for `CombinatorialFreeModule` as discussed here:\n\nhttp://groups.google.com/group/sage-combinat-devel/browse_thread/thread/c2f3ca216ea88a96\n\nThe bug looked like this:\n\n```\nsage: X = CombinatorialFreeModule(QQ,ZZ) \nsage: x = X.an_element() \nsage: x \n3*B[-1] + B[0] + 3*B[1] \nsage: latex(x) \n------------------------------------------------------------ \n...   \nmons = [ prefix + '_{' + \",\".join(map(str, m)) + '}' for (m, _) in v ] \nTypeError: argument 2 to map() must support iteration \n```\n\nNow, this is fixed:\n\n```\nsage: X = CombinatorialFreeModule(QQ,ZZ) \nsage: x = X.an_element() \nsage: x \n3*B[-1] + B[0] + 3*B[1] \nsage: latex(x)\n3B_{-1} + B_{0} + 3B_{1}\n```\n\nIt also provides a new optional argument latex_prefix for `CombinatorialFreeModule` in order to be able to get a latex symbol as output:\n\n```\nsage: X = CombinatorialFreeModule(QQ,ZZ,prefix='beta',latex_prefix='\\\\beta') \nsage: x = X.an_element()\nsage: x\n3*beta[-1] + beta[0] + 3*beta[1]\nsage: latex(x)\n3\\beta_{-1} + \\beta_{0} + 3\\beta_{1}\n```\n\nAlso, this new feature is applied for the root space for root systems:\n\n```\nsage: L = RootSystem(['A',3]).root_lattice()\nsage: Lvee = L.coroot_lattice()\n\nsage: L.simple_root(1)\nalpha[1]\nsage: latex(L.simple_root(1))\n\\alpha_{1}\n\nsage: Lvee.simple_root(1)\nalphacheck[1]\nsage: latex(Lvee.simple_root(1))\n\\alpha^\\vee_{1}\n```\n\n**Assignee:** sage-combinat\n\n**Keywords:** latex, CombinatorialFreeModule\n\n**Resolution:** duplicate\n\n**Author:** Christian Stump\n\nIssue created by migration from https://trac.sagemath.org/ticket/10852\n\n",
    "closed_at": "2011-03-12T12:28:57Z",
    "created_at": "2011-02-25T21:25:21Z",
    "labels": [
        "component: combinatorics",
        "bug"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-duplicate/invalid/wontfix",
    "title": "CombinatorialFreeModule contains bug in latex method and is missing a latex_prefix",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10852",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```
This patch provides a bugfix for the latex method for `CombinatorialFreeModule` as discussed here:

http://groups.google.com/group/sage-combinat-devel/browse_thread/thread/c2f3ca216ea88a96

The bug looked like this:

```
sage: X = CombinatorialFreeModule(QQ,ZZ) 
sage: x = X.an_element() 
sage: x 
3*B[-1] + B[0] + 3*B[1] 
sage: latex(x) 
------------------------------------------------------------ 
...   
mons = [ prefix + '_{' + ",".join(map(str, m)) + '}' for (m, _) in v ] 
TypeError: argument 2 to map() must support iteration 
```

Now, this is fixed:

```
sage: X = CombinatorialFreeModule(QQ,ZZ) 
sage: x = X.an_element() 
sage: x 
3*B[-1] + B[0] + 3*B[1] 
sage: latex(x)
3B_{-1} + B_{0} + 3B_{1}
```

It also provides a new optional argument latex_prefix for `CombinatorialFreeModule` in order to be able to get a latex symbol as output:

```
sage: X = CombinatorialFreeModule(QQ,ZZ,prefix='beta',latex_prefix='\\beta') 
sage: x = X.an_element()
sage: x
3*beta[-1] + beta[0] + 3*beta[1]
sage: latex(x)
3\beta_{-1} + \beta_{0} + 3\beta_{1}
```

Also, this new feature is applied for the root space for root systems:

```
sage: L = RootSystem(['A',3]).root_lattice()
sage: Lvee = L.coroot_lattice()

sage: L.simple_root(1)
alpha[1]
sage: latex(L.simple_root(1))
\alpha_{1}

sage: Lvee.simple_root(1)
alphacheck[1]
sage: latex(Lvee.simple_root(1))
\alpha^\vee_{1}
```

**Assignee:** sage-combinat

**Keywords:** latex, CombinatorialFreeModule

**Resolution:** duplicate

**Author:** Christian Stump

Issue created by migration from https://trac.sagemath.org/ticket/10852





---

archive/issue_comments_144202.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-02-25T21:26:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-144202",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_144203.json:
```json
{
    "body": "Attachment [trac_10852-combinatorial_free_module_latex-cs.patch](tarball://root/attachments/some-uuid/ticket10852/trac_10852-combinatorial_free_module_latex-cs.patch) by stumpc5 created at 2011-02-25 21:40:28",
    "created_at": "2011-02-25T21:40:28Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-144203",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

Attachment [trac_10852-combinatorial_free_module_latex-cs.patch](tarball://root/attachments/some-uuid/ticket10852/trac_10852-combinatorial_free_module_latex-cs.patch) by stumpc5 created at 2011-02-25 21:40:28



---

archive/issue_comments_144204.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -37,3 +37,20 @@\n sage: latex(x)\n 3\\beta_{-1} + \\beta_{0} + 3\\beta_{1}\n ```\n+\n+Also, this new feature is applied for the root space for root systems:\n+\n+```\n+sage: L = RootSystem(['A',3]).root_lattice()\n+sage: Lvee = L.coroot_lattice()\n+\n+sage: L.simple_root(1)\n+alpha[1]\n+sage: latex(L.simple_root(1))\n+\\alpha_{1}\n+\n+sage: Lvee.simple_root(1)\n+alphacheck[1]\n+sage: latex(Lvee.simple_root(1))\n+\\alpha^\\vee_{1}\n+```\n``````\n",
    "created_at": "2011-02-25T21:44:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-144204",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -37,3 +37,20 @@
 sage: latex(x)
 3\beta_{-1} + \beta_{0} + 3\beta_{1}
 ```
+
+Also, this new feature is applied for the root space for root systems:
+
+```
+sage: L = RootSystem(['A',3]).root_lattice()
+sage: Lvee = L.coroot_lattice()
+
+sage: L.simple_root(1)
+alpha[1]
+sage: latex(L.simple_root(1))
+\alpha_{1}
+
+sage: Lvee.simple_root(1)
+alphacheck[1]
+sage: latex(Lvee.simple_root(1))
+\alpha^\vee_{1}
+```
``````




---

archive/issue_comments_144205.json:
```json
{
    "body": "<a id='comment:3'></a>\nPlease document the `latex_prefix` argument to `CombinatorialFreeModule`.  See #9370 for one suggestion.  (If you could merge this ticket with #9370, that would be great, too.)",
    "created_at": "2011-02-25T23:56:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-144205",
    "user": "https://github.com/jhpalmieri"
}
```

<a id='comment:3'></a>
Please document the `latex_prefix` argument to `CombinatorialFreeModule`.  See #9370 for one suggestion.  (If you could merge this ticket with #9370, that would be great, too.)



---

archive/issue_comments_144206.json:
```json
{
    "body": "**Resolution:** fixed",
    "created_at": "2011-03-12T12:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-144206",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

**Resolution:** fixed



---

archive/issue_events_033543.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/stumpc5",
    "created_at": "2011-03-12T12:28:57Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10852#event-33543"
}
```



---

archive/issue_comments_144207.json:
```json
{
    "body": "<a id='comment:4'></a>\nThe patch is folded into #9370, so this ticket is obsolete.\n\nChristian",
    "created_at": "2011-03-12T12:28:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-144207",
    "user": "https://trac.sagemath.org/admin/accounts/users/stumpc5"
}
```

<a id='comment:4'></a>
The patch is folded into #9370, so this ticket is obsolete.

Christian



---

archive/issue_comments_144208.json:
```json
{
    "body": "**Resolution changed** from fixed to duplicate.",
    "created_at": "2011-03-13T02:07:37Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10852#issuecomment-144208",
    "user": "https://trac.sagemath.org/admin/accounts/users/mvngu"
}
```

**Resolution changed** from fixed to duplicate.



---

archive/issue_events_033544.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mvngu",
    "created_at": "2011-03-13T02:07:37Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10852",
    "milestone": "sage-duplicate/invalid/wontfix",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10852#event-33544"
}
```
