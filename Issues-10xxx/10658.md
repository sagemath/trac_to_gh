# Issue 10658: Compute local components of modular forms

archive/issues_010605.json:
```json
{
    "assignees": [],
    "body": "This ticket is to introduce a new feature for computing with modular forms in Sage: the explicit computation of the local component of the automorphic representation attached to a newform.\n\nThis is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).\n\n**Apply:**\n1. [attachment: trac_10658-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch.gz)\n\n\nAssignee: **@craigcitro**\n\nCC:  GeorgSWeber\n\nKeywords: **sd35**\n\nAuthor: **David Loeffler**\n\nReviewer: **Martin Raum**\n\nMerged: **sage-5.0.beta1**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10658_\n\n",
    "closed_at": "2012-01-21T23:37:38Z",
    "created_at": "2011-01-19T12:31:34Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/component%3A%20modular%20forms",
        "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Compute local components of modular forms",
    "type": "issue",
    "updated_at": "2012-01-21T23:37:38Z",
    "url": "https://github.com/sagemath/sage/issues/10658",
    "user": "https://github.com/loefflerd"
}
```
This ticket is to introduce a new feature for computing with modular forms in Sage: the explicit computation of the local component of the automorphic representation attached to a newform.

This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).

**Apply:**
1. [attachment: trac_10658-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch.gz)


Assignee: **@craigcitro**

CC:  GeorgSWeber

Keywords: **sd35**

Author: **David Loeffler**

Reviewer: **Martin Raum**

Merged: **sage-5.0.beta1**

_Issue created by migration from https://trac.sagemath.org/ticket/10658_





---

archive/issue_events_124026.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-19T12:31:34Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124026"
}
```



---

archive/issue_events_124027.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-19T12:31:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/component%3A%20modular%20forms",
    "label_color": "0000ff",
    "label_name": "component: modular forms",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124027"
}
```



---

archive/issue_events_124028.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-19T12:31:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/p3%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124028"
}
```



---

archive/issue_events_124029.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-19T12:31:34Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124029"
}
```



---

archive/issue_events_124030.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-19T12:34:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124030"
}
```



---

archive/issue_comments_104138.json:
```json
{
    "body": "<a id='comment:1'>Comment 1:</a>\nAttachment: **[trac_10658-local_components.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch.gz)**\n\nDepends on #8716, #10443, #10451",
    "created_at": "2011-01-19T12:34:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104138",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:1'>Comment 1:</a>
Attachment: **[trac_10658-local_components.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch.gz)**

Depends on #8716, #10443, #10451



---

archive/issue_comments_104139.json:
```json
{
    "body": "<a id='comment:2'>Comment 2:</a>\nHere's a \"first cut\". Lots of cases aren't implemented and it needs a bit more general polishing, but it works!",
    "created_at": "2011-01-19T12:36:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104139",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:2'>Comment 2:</a>
Here's a "first cut". Lots of cases aren't implemented and it needs a bit more general polishing, but it works!



---

archive/issue_comments_104140.json:
```json
{
    "body": "<a id='comment:3'>Comment 3:</a>\nDepends on #10443, #10451\n\n(Patchbot's confused: it's trying to apply #8716 twice, because it's in the dependencies of this patch and of #10451.)",
    "created_at": "2011-01-19T13:03:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104140",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:3'>Comment 3:</a>
Depends on #10443, #10451

(Patchbot's confused: it's trying to apply #8716 twice, because it's in the dependencies of this patch and of #10451.)



---

archive/issue_comments_104141.json:
```json
{
    "body": "Attachment: **[trac_10658-local_components_review.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.patch.gz)**",
    "created_at": "2011-12-18T20:13:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104141",
    "user": "https://github.com/sagetrac-mraum"
}
```

Attachment: **[trac_10658-local_components_review.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.patch.gz)**



---

archive/issue_events_124031.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-12-18T20:16:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124031"
}
```



---

archive/issue_events_124032.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-12-18T20:16:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124032"
}
```



---

archive/issue_comments_104142.json:
```json
{
    "body": "Reviewer: **Martin Raum**",
    "created_at": "2011-12-18T20:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104142",
    "user": "https://github.com/sagetrac-mraum"
}
```

Reviewer: **Martin Raum**



---

archive/issue_comments_104143.json:
```json
{
    "body": "<a id='comment:5'>Comment 5:</a>\nThe review patch contains some doctest that I made fail on purpose; They are (minor) TODOs that, if completed, I would say are sufficient for giving the patch a positive review.\n\nI needed to move the definition of smooth characters (elements) to the top of the file, but the code itself is mainly untouched.",
    "created_at": "2011-12-18T20:16:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104143",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:5'>Comment 5:</a>
The review patch contains some doctest that I made fail on purpose; They are (minor) TODOs that, if completed, I would say are sufficient for giving the patch a positive review.

I needed to move the definition of smooth characters (elements) to the top of the file, but the code itself is mainly untouched.



---

archive/issue_comments_104144.json:
```json
{
    "body": "Apply over previous patches",
    "created_at": "2011-12-20T16:53:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104144",
    "user": "https://github.com/loefflerd"
}
```

Apply over previous patches



---

archive/issue_comments_104145.json:
```json
{
    "body": "<a id='comment:6'>Comment 6:</a>\nAttachment: **[trac_10658-edits.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch.gz)**\n\nHi Martin,\n\nI've made the changes you suggested. I've also fixed one or two other silly errors (e.g. the code stub for ramified supercuspidals always assumed p was 3 in its return strings) and added TestSuite doctests. Thanks again for reviewing this!",
    "created_at": "2011-12-20T16:55:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104145",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:6'>Comment 6:</a>
Attachment: **[trac_10658-edits.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch.gz)**

Hi Martin,

I've made the changes you suggested. I've also fixed one or two other silly errors (e.g. the code stub for ramified supercuspidals always assumed p was 3 in its return strings) and added TestSuite doctests. Thanks again for reviewing this!



---

archive/issue_events_124033.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-20T16:55:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124033"
}
```



---

archive/issue_events_124034.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-20T16:55:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124034"
}
```



---

archive/issue_events_124035.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-12-20T22:42:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124035"
}
```



---

archive/issue_events_124036.json:
```json
{
    "actor": "https://github.com/sagetrac-mraum",
    "created_at": "2011-12-20T22:42:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124036"
}
```



---

archive/issue_comments_104146.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n This ticket is to introduce a new feature for computing with modular forms in Sage: the explicit computation of the local component of the automorphic representation attached to a newform.\n \n This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).\n+\n+**Apply:**\n+1. [attachment: trac_10658-local_components.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch.gz)\n+2. [attachment: trac_10658-local_components_review.2.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch.gz)\n+3. [attachment: trac_10658-edits.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch.gz)\n+\n+\n``````\n",
    "created_at": "2011-12-20T22:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104146",
    "user": "https://github.com/sagetrac-mraum"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
 This ticket is to introduce a new feature for computing with modular forms in Sage: the explicit computation of the local component of the automorphic representation attached to a newform.
 
 This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).
+
+**Apply:**
+1. [attachment: trac_10658-local_components.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch.gz)
+2. [attachment: trac_10658-local_components_review.2.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch.gz)
+3. [attachment: trac_10658-edits.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch.gz)
+
+
``````




---

archive/issue_comments_104147.json:
```json
{
    "body": "<a id='comment:7'>Comment 7:</a>\nAttachment: **[trac_10658-local_components_review.2.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch.gz)**\n\nThe new version of the review patch only differs by the commit message, which was missing before.",
    "created_at": "2011-12-20T22:42:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104147",
    "user": "https://github.com/sagetrac-mraum"
}
```

<a id='comment:7'>Comment 7:</a>
Attachment: **[trac_10658-local_components_review.2.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch.gz)**

The new version of the review patch only differs by the commit message, which was missing before.



---

archive/issue_events_124037.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-21T09:31:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "milestone_number": null,
    "milestone_title": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124037"
}
```



---

archive/issue_comments_104148.json:
```json
{
    "body": "Attachment: **[trac_10658-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch.gz)**\n\nApply only this patch",
    "created_at": "2011-12-23T19:25:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104148",
    "user": "https://github.com/loefflerd"
}
```

Attachment: **[trac_10658-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch.gz)**

Apply only this patch



---

archive/issue_comments_104149.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -3,8 +3,5 @@\n This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).\n \n **Apply:**\n-1. [attachment: trac_10658-local_components.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch.gz)\n-2. [attachment: trac_10658-local_components_review.2.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch.gz)\n-3. [attachment: trac_10658-edits.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch.gz)\n+1. [attachment: trac_10658-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch.gz)\n \n-\n``````\n",
    "created_at": "2011-12-23T19:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104149",
    "user": "https://github.com/loefflerd"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -3,8 +3,5 @@
 This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).
 
 **Apply:**
-1. [attachment: trac_10658-local_components.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch.gz)
-2. [attachment: trac_10658-local_components_review.2.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch.gz)
-3. [attachment: trac_10658-edits.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch.gz)
+1. [attachment: trac_10658-folded.patch.gz](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch.gz)
 
-
``````




---

archive/issue_comments_104150.json:
```json
{
    "body": "<a id='comment:9'>Comment 9:</a>\nRather than immortalizing the details of the review process in Sage's revision history, here's a single qfolded patch combining the three above.",
    "created_at": "2011-12-23T19:26:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104150",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:9'>Comment 9:</a>
Rather than immortalizing the details of the review process in Sage's revision history, here's a single qfolded patch combining the three above.



---

archive/issue_comments_104151.json:
```json
{
    "body": "Changed keywords from **** to **sd35**",
    "created_at": "2012-01-05T11:47:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104151",
    "user": "https://github.com/loefflerd"
}
```

Changed keywords from **** to **sd35**



---

archive/issue_events_124038.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-21T23:37:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124038"
}
```



---

archive/issue_events_124039.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-21T23:37:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-124039"
}
```



---

archive/issue_comments_104152.json:
```json
{
    "body": "Merged: **sage-5.0.beta1**",
    "created_at": "2012-01-21T23:37:38Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104152",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.0.beta1**
