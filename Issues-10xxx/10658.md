# Issue 10658: Compute local components of modular forms

archive/issues_010605.json:
```json
{
    "body": "This ticket is to introduce a new feature for computing with modular forms in Sage: the explicit computation of the local component of the automorphic representation attached to a newform.\n\nThis is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).\n\n**Apply:**\n1. [attachment:trac_10658-folded.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch)\n\n\n**Assignee:** @craigcitro\n\n**CC:**  GeorgSWeber\n\n**Keywords:** sd35\n\n**Author:** David Loeffler\n\n**Reviewer:** Martin Raum\n\n**Merged:** sage-5.0.beta1\n\nIssue created by migration from https://trac.sagemath.org/ticket/10658\n\n",
    "closed_at": "2012-01-21T23:37:38Z",
    "created_at": "2011-01-19T12:31:34Z",
    "labels": [
        "component: modular forms",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.0",
    "title": "Compute local components of modular forms",
    "type": "issue",
    "url": "https://github.com/sagemath/sage/issues/10658",
    "user": "https://github.com/loefflerd"
}
```
This ticket is to introduce a new feature for computing with modular forms in Sage: the explicit computation of the local component of the automorphic representation attached to a newform.

This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).

**Apply:**
1. [attachment:trac_10658-folded.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch)


**Assignee:** @craigcitro

**CC:**  GeorgSWeber

**Keywords:** sd35

**Author:** David Loeffler

**Reviewer:** Martin Raum

**Merged:** sage-5.0.beta1

Issue created by migration from https://trac.sagemath.org/ticket/10658





---

archive/issue_events_082178.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-01-19T12:34:09Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82178"
}
```



---

archive/attachments_013968.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10658-local_components.patch",
    "asset_url": "tarball://root/attachments/ticket10658/trac_10658-local_components.patch",
    "created_at": "2011-01-19T12:34:09Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_104092.json:
```json
{
    "body": "<a id='comment:1'></a>\nAttachment [trac_10658-local_components.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch) by @loefflerd created at 2011-01-19 12:34:09\n\nDepends on #8716, #10443, #10451",
    "created_at": "2011-01-19T12:34:09Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104092",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:1'></a>
Attachment [trac_10658-local_components.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch) by @loefflerd created at 2011-01-19 12:34:09

Depends on #8716, #10443, #10451



---

archive/issue_comments_104093.json:
```json
{
    "body": "<a id='comment:2'></a>\nHere's a \"first cut\". Lots of cases aren't implemented and it needs a bit more general polishing, but it works!",
    "created_at": "2011-01-19T12:36:45Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104093",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:2'></a>
Here's a "first cut". Lots of cases aren't implemented and it needs a bit more general polishing, but it works!



---

archive/issue_comments_104094.json:
```json
{
    "body": "<a id='comment:3'></a>\nDepends on #10443, #10451\n\n(Patchbot's confused: it's trying to apply #8716 twice, because it's in the dependencies of this patch and of #10451.)",
    "created_at": "2011-01-19T13:03:41Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104094",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:3'></a>
Depends on #10443, #10451

(Patchbot's confused: it's trying to apply #8716 twice, because it's in the dependencies of this patch and of #10451.)



---

archive/attachments_013969.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10658-local_components_review.patch",
    "asset_url": "tarball://root/attachments/ticket10658/trac_10658-local_components_review.patch",
    "created_at": "2011-12-18T20:13:32Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```



---

archive/issue_comments_104095.json:
```json
{
    "body": "Attachment [trac_10658-local_components_review.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.patch) by mraum created at 2011-12-18 20:13:32",
    "created_at": "2011-12-18T20:13:32Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104095",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

Attachment [trac_10658-local_components_review.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.patch) by mraum created at 2011-12-18 20:13:32



---

archive/issue_events_082179.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mraum",
    "created_at": "2011-12-18T20:16:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82179"
}
```



---

archive/issue_events_082180.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mraum",
    "created_at": "2011-12-18T20:16:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82180"
}
```



---

archive/issue_comments_104096.json:
```json
{
    "body": "**Reviewer:** Martin Raum",
    "created_at": "2011-12-18T20:16:13Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104096",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

**Reviewer:** Martin Raum



---

archive/issue_comments_104097.json:
```json
{
    "body": "<a id='comment:5'></a>\nThe review patch contains some doctest that I made fail on purpose; They are (minor) TODOs that, if completed, I would say are sufficient for giving the patch a positive review.\n\nI needed to move the definition of smooth characters (elements) to the top of the file, but the code itself is mainly untouched.",
    "created_at": "2011-12-18T20:16:13Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104097",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

<a id='comment:5'></a>
The review patch contains some doctest that I made fail on purpose; They are (minor) TODOs that, if completed, I would say are sufficient for giving the patch a positive review.

I needed to move the definition of smooth characters (elements) to the top of the file, but the code itself is mainly untouched.



---

archive/issue_comments_104098.json:
```json
{
    "body": "Apply over previous patches",
    "created_at": "2011-12-20T16:53:41Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104098",
    "user": "https://github.com/loefflerd"
}
```

Apply over previous patches



---

archive/attachments_013970.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10658-edits.patch",
    "asset_url": "tarball://root/attachments/ticket10658/trac_10658-edits.patch",
    "created_at": "2011-12-20T16:55:10Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_104099.json:
```json
{
    "body": "<a id='comment:6'></a>\nAttachment [trac_10658-edits.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch) by @loefflerd created at 2011-12-20 16:55:10\n\nHi Martin,\n\nI've made the changes you suggested. I've also fixed one or two other silly errors (e.g. the code stub for ramified supercuspidals always assumed p was 3 in its return strings) and added TestSuite doctests. Thanks again for reviewing this!",
    "created_at": "2011-12-20T16:55:10Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104099",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:6'></a>
Attachment [trac_10658-edits.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch) by @loefflerd created at 2011-12-20 16:55:10

Hi Martin,

I've made the changes you suggested. I've also fixed one or two other silly errors (e.g. the code stub for ramified supercuspidals always assumed p was 3 in its return strings) and added TestSuite doctests. Thanks again for reviewing this!



---

archive/issue_events_082181.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-20T16:55:10Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "needs work",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82181"
}
```



---

archive/issue_events_082182.json:
```json
{
    "actor": "https://github.com/loefflerd",
    "created_at": "2011-12-20T16:55:10Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82182"
}
```



---

archive/issue_events_082183.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mraum",
    "created_at": "2011-12-20T22:42:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "needs review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82183"
}
```



---

archive/issue_events_082184.json:
```json
{
    "actor": "https://trac.sagemath.org/admin/accounts/users/mraum",
    "created_at": "2011-12-20T22:42:17Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82184"
}
```



---

archive/issue_comments_104100.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,10 @@\n This ticket is to introduce a new feature for computing with modular forms in Sage: the explicit computation of the local component of the automorphic representation attached to a newform.\n \n This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).\n+\n+**Apply:**\n+1. [attachment:trac_10658-local_components.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch)\n+2. [attachment:trac_10658-local_components_review.2.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch)\n+3. [attachment:trac_10658-edits.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch)\n+\n+\n``````\n",
    "created_at": "2011-12-20T22:42:17Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104100",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,10 @@
 This ticket is to introduce a new feature for computing with modular forms in Sage: the explicit computation of the local component of the automorphic representation attached to a newform.
 
 This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).
+
+**Apply:**
+1. [attachment:trac_10658-local_components.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch)
+2. [attachment:trac_10658-local_components_review.2.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch)
+3. [attachment:trac_10658-edits.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch)
+
+
``````




---

archive/attachments_013971.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10658-local_components_review.2.patch",
    "asset_url": "tarball://root/attachments/ticket10658/trac_10658-local_components_review.2.patch",
    "created_at": "2011-12-20T22:42:17Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```



---

archive/issue_comments_104101.json:
```json
{
    "body": "<a id='comment:7'></a>\nAttachment [trac_10658-local_components_review.2.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch) by mraum created at 2011-12-20 22:42:17\n\nThe new version of the review patch only differs by the commit message, which was missing before.",
    "created_at": "2011-12-20T22:42:17Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104101",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

<a id='comment:7'></a>
Attachment [trac_10658-local_components_review.2.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch) by mraum created at 2011-12-20 22:42:17

The new version of the review patch only differs by the commit message, which was missing before.



---

archive/issue_events_082185.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-12-21T09:31:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "milestone": "sage-5.0",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82185"
}
```



---

archive/attachments_013972.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10658-folded.patch",
    "asset_url": "tarball://root/attachments/ticket10658/trac_10658-folded.patch",
    "created_at": "2011-12-23T19:25:23Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "attachment",
    "url": "https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch",
    "user": "https://github.com/loefflerd"
}
```



---

archive/issue_comments_104102.json:
```json
{
    "body": "Attachment [trac_10658-folded.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch) by @loefflerd created at 2011-12-23 19:25:23\n\nApply only this patch",
    "created_at": "2011-12-23T19:25:23Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104102",
    "user": "https://github.com/loefflerd"
}
```

Attachment [trac_10658-folded.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch) by @loefflerd created at 2011-12-23 19:25:23

Apply only this patch



---

archive/issue_comments_104103.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -3,8 +3,5 @@\n This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).\n \n **Apply:**\n-1. [attachment:trac_10658-local_components.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch)\n-2. [attachment:trac_10658-local_components_review.2.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch)\n-3. [attachment:trac_10658-edits.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch)\n+1. [attachment:trac_10658-folded.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch)\n \n-\n``````\n",
    "created_at": "2011-12-23T19:26:55Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104103",
    "user": "https://github.com/loefflerd"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -3,8 +3,5 @@
 This is based on the algorithms developed by Jared Weinstein and myself. Magma also has this, but this code is an independent implementation and covers some cases the Magma code doesn't (e.g. the Magma code can't distinguish between a newform and its quadratic twist in certain cases).
 
 **Apply:**
-1. [attachment:trac_10658-local_components.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components.patch)
-2. [attachment:trac_10658-local_components_review.2.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-local_components_review.2.patch)
-3. [attachment:trac_10658-edits.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-edits.patch)
+1. [attachment:trac_10658-folded.patch](https://github.com/sagemath/sage/files/ticket10658/trac_10658-folded.patch)
 
-
``````




---

archive/issue_comments_104104.json:
```json
{
    "body": "<a id='comment:9'></a>\nRather than immortalizing the details of the review process in Sage's revision history, here's a single qfolded patch combining the three above.",
    "created_at": "2011-12-23T19:26:55Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104104",
    "user": "https://github.com/loefflerd"
}
```

<a id='comment:9'></a>
Rather than immortalizing the details of the review process in Sage's revision history, here's a single qfolded patch combining the three above.



---

archive/issue_comments_104105.json:
```json
{
    "body": "**Changing keywords** from \"\" to \"sd35\".",
    "created_at": "2012-01-05T11:47:46Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104105",
    "user": "https://github.com/loefflerd"
}
```

**Changing keywords** from "" to "sd35".



---

archive/issue_events_082186.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-21T23:37:38Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "label": "positive review",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82186"
}
```



---

archive/issue_events_082187.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2012-01-21T23:37:38Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10658#event-82187"
}
```



---

archive/issue_comments_104106.json:
```json
{
    "body": "**Merged:** sage-5.0.beta1",
    "created_at": "2012-01-21T23:37:38Z",
    "issue": "https://github.com/sagemath/sage/issues/10658",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10658#issuecomment-104106",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-5.0.beta1
