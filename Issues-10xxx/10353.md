# Issue 10353: Remove zodb from sage

archive/issues_010352.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout"
    ],
    "body": "zodb only use the pickle protocol version 1. It is also not used in sage apart from one package that has been migrated away from it in #12205.\n\nThere is a zodb mailing list discussion related to the pickle protocol here:  http://www.mail-archive.com/zodb-dev@zope.org/msg04628.html\n\nIn particular, pickle protocol 1 is hardcoded.  But SageObjects/Cython objects must use protocol 2 in many cases:\n\n```\nsage: import cPickle\nsage: F = factor(12)\nsage: cPickle.dumps(F, protocol=0)\nTypeError: can't pickle SageObject objects\nsage: cPickle.dumps(F, protocol=1)\nTypeError: can't pickle SageObject objects\nsage: cPickle.dumps(F, protocol=2)\n'\\x80\\x02csage.structure.factorization\\nFactorization\\nq\\x01)\\x81q\\x02}q\\x03(U\\x12_Factorization__crq\\x04\\x89U\\x14_Factorization__unitq\\x05csage.rings.integer\\nmake_integer\\nq\\x06U\\x011\\x85Rq\\x07U\\x18_Factorization__universeq\\x08csage.rings.integer_ring\\nIntegerRing\\nq\\t)Rq\\nU\\x11_Factorization__xq\\x0b]q\\x0c(h\\x06U\\x012\\x85Rq\\rK\\x02\\x86q\\x0eh\\x06U\\x013\\x85Rq\\x0fK\\x01\\x86q\\x10eub.'\n```\n\nSee also the related ticket #10352.\n\nThe suggested option for this ticket is to remove zodb from sage.\n\n---\n* Apply [attachment: trac10353-db-removal.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-db-removal.patch.gz) to the sage library\n* Apply [attachment: trac10353-sage_root.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-sage_root.patch.gz) to the sage root repository\n* Remove the zodb package.\n\n\nDepends on #12205\nDepends on #13717\nDepends on #13963\n\nCC:  @kini\n\nReviewer: **Jeroen Demeyer**\n\nAuthor: **Fran\u00e7ois Bissey**\n\nMerged: **sage-5.7.beta1**\n\nComponent: **misc**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10353_\n\n",
    "closed_at": "2013-01-25T16:16:32Z",
    "created_at": "2010-11-29T01:25:48Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-5.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Remove zodb from sage",
    "type": "issue",
    "updated_at": "2013-01-25T16:16:32Z",
    "url": "https://github.com/sagemath/sage/issues/10353",
    "user": "https://github.com/williamstein"
}
```
zodb only use the pickle protocol version 1. It is also not used in sage apart from one package that has been migrated away from it in #12205.

There is a zodb mailing list discussion related to the pickle protocol here:  http://www.mail-archive.com/zodb-dev@zope.org/msg04628.html

In particular, pickle protocol 1 is hardcoded.  But SageObjects/Cython objects must use protocol 2 in many cases:

```
sage: import cPickle
sage: F = factor(12)
sage: cPickle.dumps(F, protocol=0)
TypeError: can't pickle SageObject objects
sage: cPickle.dumps(F, protocol=1)
TypeError: can't pickle SageObject objects
sage: cPickle.dumps(F, protocol=2)
'\x80\x02csage.structure.factorization\nFactorization\nq\x01)\x81q\x02}q\x03(U\x12_Factorization__crq\x04\x89U\x14_Factorization__unitq\x05csage.rings.integer\nmake_integer\nq\x06U\x011\x85Rq\x07U\x18_Factorization__universeq\x08csage.rings.integer_ring\nIntegerRing\nq\t)Rq\nU\x11_Factorization__xq\x0b]q\x0c(h\x06U\x012\x85Rq\rK\x02\x86q\x0eh\x06U\x013\x85Rq\x0fK\x01\x86q\x10eub.'
```

See also the related ticket #10352.

The suggested option for this ticket is to remove zodb from sage.

---
* Apply [attachment: trac10353-db-removal.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-db-removal.patch.gz) to the sage library
* Apply [attachment: trac10353-sage_root.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-sage_root.patch.gz) to the sage root repository
* Remove the zodb package.


Depends on #12205
Depends on #13717
Depends on #13963

CC:  @kini

Reviewer: **Jeroen Demeyer**

Author: **François Bissey**

Merged: **sage-5.7.beta1**

Component: **misc**

_Issue created by migration from https://trac.sagemath.org/ticket/10353_





---

archive/issue_events_136298.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-11-29T01:25:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136298"
}
```



---

archive/issue_events_136299.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-11-29T01:25:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136299"
}
```



---

archive/issue_events_136300.json:
```json
{
    "actor": "https://github.com/williamstein",
    "created_at": "2010-11-29T01:25:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136300"
}
```



---

archive/issue_events_136301.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2010-11-29T01:25:48Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "subject": "https://github.com/williamstein",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136301"
}
```



---

archive/issue_comments_097351.json:
```json
{
    "body": "<div id=\"comment:1\" align=\"right\">comment:1</div>\n\nPlease do not feel offended of my naive question, but what do you think of completely removing ZODB? As far as I understand (by looking at the failing doctests when removing ZODB), only Cremona's database and the Conway polynomials database use it. Ticket #11587 migrates the Cremona's DB to SQLite, so would it not be possible to the same with the Polynomial DB? Are there any optional SPKGs which do depend on ZODB?",
    "created_at": "2011-10-03T10:26:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97351",
    "user": "https://github.com/sagetrac-cschwan"
}
```

<div id="comment:1" align="right">comment:1</div>

Please do not feel offended of my naive question, but what do you think of completely removing ZODB? As far as I understand (by looking at the failing doctests when removing ZODB), only Cremona's database and the Conway polynomials database use it. Ticket #11587 migrates the Cremona's DB to SQLite, so would it not be possible to the same with the Polynomial DB? Are there any optional SPKGs which do depend on ZODB?



---

archive/issue_comments_097352.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI added ZODB to Sage (long ago), and I am definitely +1 to removing it from Sage, if we can figure out how.  I think it is a technology whose value (for Sage!) has come and gone.  One can do better with SQLite these days.",
    "created_at": "2011-10-03T17:10:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97352",
    "user": "https://github.com/williamstein"
}
```

<div id="comment:2" align="right">comment:2</div>

I added ZODB to Sage (long ago), and I am definitely +1 to removing it from Sage, if we can figure out how.  I think it is a technology whose value (for Sage!) has come and gone.  One can do better with SQLite these days.



---

archive/issue_comments_097353.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nOK it is really a pain on sage-on-gentoo side and will become worse in a few months (removal from the main tree, zope maintenance is apparently hard that it will be put in its own repo for people who are interested in it).\n\nSo I am putting my hand up to remove zodb from sage. Anything else apart from conway polynomial database needs to be cleaned and converted to sqlite?",
    "created_at": "2011-10-03T21:22:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97353",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:3" align="right">comment:3</div>

OK it is really a pain on sage-on-gentoo side and will become worse in a few months (removal from the main tree, zope maintenance is apparently hard that it will be put in its own repo for people who are interested in it).

So I am putting my hand up to remove zodb from sage. Anything else apart from conway polynomial database needs to be cleaned and converted to sqlite?



---

archive/issue_comments_097354.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIt looks like stein-watkins-ecdb also use zodb.",
    "created_at": "2012-12-31T00:09:09Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97354",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

It looks like stein-watkins-ecdb also use zodb.



---

archive/issue_comments_097355.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHum it looks like sage/databases/stein-watkins-ecdb.py imports sage.databases.db but it is not actually using any of it as far as I can see. So it will be a simple patch to get rid of db.py and compressed_storage.py.",
    "created_at": "2013-01-03T10:50:53Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97355",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:6" align="right">comment:6</div>

Hum it looks like sage/databases/stein-watkins-ecdb.py imports sage.databases.db but it is not actually using any of it as far as I can see. So it will be a simple patch to get rid of db.py and compressed_storage.py.



---

archive/issue_comments_097356.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nIf I'm not wrong, sagenb uses some Python packages which are currently included in zodb spkg (I think zope.interface or stg like that, see #10352).",
    "created_at": "2013-01-04T10:08:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97356",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:7" align="right">comment:7</div>

If I'm not wrong, sagenb uses some Python packages which are currently included in zodb spkg (I think zope.interface or stg like that, see #10352).



---

archive/issue_comments_097357.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nIf I remember the discussion correctly the dependency on zope.interface will be included in a future version of sagenb. My quick check on the current version of sagenb show no import from zope.\nIt was suggested that it should be included in the sagenb bundle, I personally agree with the idea. In any case that would mean replacing the current zodb spkg with a new one cotaining only zope.interface if we want to keep it in main line.",
    "created_at": "2013-01-04T10:14:33Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97357",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:8" align="right">comment:8</div>

If I remember the discussion correctly the dependency on zope.interface will be included in a future version of sagenb. My quick check on the current version of sagenb show no import from zope.
It was suggested that it should be included in the sagenb bundle, I personally agree with the idea. In any case that would mean replacing the current zodb spkg with a new one cotaining only zope.interface if we want to keep it in main line.



---

archive/issue_comments_097358.json:
```json
{
    "body": "Attachment: **[trac10353-db-removal.patch.gz](https://github.com/sagemath/sage/files/ticket10353/trac10353-db-removal.patch.gz)**\n\nthis patch remove reference to zodb from the sage library",
    "created_at": "2013-01-04T10:16:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97358",
    "user": "https://github.com/kiwifb"
}
```

Attachment: **[trac10353-db-removal.patch.gz](https://github.com/sagemath/sage/files/ticket10353/trac10353-db-removal.patch.gz)**

this patch remove reference to zodb from the sage library



---

archive/issue_comments_097359.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI just attached a patch to remove zodb references from the sage library. I haven't done the patch for sage-root yet.",
    "created_at": "2013-01-04T10:18:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97359",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:9" align="right">comment:9</div>

I just attached a patch to remove zodb references from the sage library. I haven't done the patch for sage-root yet.



---

archive/issue_comments_097360.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,16 +1,4 @@\n-\n-```\n-wstein@sage:~$ /usr/local/bin/sage\n-----------------------------------------------------------------------\n-| Sage Version 4.6, Release Date: 2010-10-30                         |\n-| Type notebook() for the GUI, and license() for information.        |\n-----------------------------------------------------------------------\n-sage: d = sage.databases.db.Database('sage_zodb', read_only=False)\n-sage: d[12] = factor(12)\n-sage: d.commit()\n-...\n-TypeError: can't pickle SageObject objects\n-```\n+zodb only use the pickle protocol version 1. It is also not used in sage apart from one package that has been migrated away from it in #12205.\n \n There is a zodb mailing list discussion related to the pickle protocol here:  http://www.mail-archive.com/zodb-dev@zope.org/msg04628.html\n \n@@ -27,16 +15,11 @@\n '\\x80\\x02csage.structure.factorization\\nFactorization\\nq\\x01)\\x81q\\x02}q\\x03(U\\x12_Factorization__crq\\x04\\x89U\\x14_Factorization__unitq\\x05csage.rings.integer\\nmake_integer\\nq\\x06U\\x011\\x85Rq\\x07U\\x18_Factorization__universeq\\x08csage.rings.integer_ring\\nIntegerRing\\nq\\t)Rq\\nU\\x11_Factorization__xq\\x0b]q\\x0c(h\\x06U\\x012\\x85Rq\\rK\\x02\\x86q\\x0eh\\x06U\\x013\\x85Rq\\x0fK\\x01\\x86q\\x10eub.'\n ```\n \n-There is some code in Sage that uses ZODB (e.g, Cremona database), but I think it uses only pure python objects, so the above isn't a problem. \n-\n See also the related ticket #10352.\n \n-Some ideas for how to fix this:\n+The suggested option for this ticket is to remove zodb from sage.\n \n-- Modify ZODB itself, e.g., by changing: ZODB.serialiize.ObjectWriter as suggested here: http://www.mail-archive.com/zodb-dev@zope.org/msg04766.html\n- \n-- Figure out how to monkeypatch ODB.serialiize.ObjectWriter at runtime, then document this hack\n+---\n+* Apply [attachment: trac10353-db-removal.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-db-removal.patch.gz) to the sage library\n+* Apply [attachment: trac10353-sage_root.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-sage_root.patch.gz) to the sage root repository\n \n-- \"Fix\" SageObject and/or Cython, so Sage objects can serialize using Pickle protocol 1 instead of requiring 2.  I don't personally understand exactly why SageObject can't be pickled using protocol 1. \n-\n-\n``````\n",
    "created_at": "2013-01-05T08:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97360",
    "user": "https://github.com/kiwifb"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,16 +1,4 @@
-
-```
-wstein@sage:~$ /usr/local/bin/sage
-----------------------------------------------------------------------
-| Sage Version 4.6, Release Date: 2010-10-30                         |
-| Type notebook() for the GUI, and license() for information.        |
-----------------------------------------------------------------------
-sage: d = sage.databases.db.Database('sage_zodb', read_only=False)
-sage: d[12] = factor(12)
-sage: d.commit()
-...
-TypeError: can't pickle SageObject objects
-```
+zodb only use the pickle protocol version 1. It is also not used in sage apart from one package that has been migrated away from it in #12205.
 
 There is a zodb mailing list discussion related to the pickle protocol here:  http://www.mail-archive.com/zodb-dev@zope.org/msg04628.html
 
@@ -27,16 +15,11 @@
 '\x80\x02csage.structure.factorization\nFactorization\nq\x01)\x81q\x02}q\x03(U\x12_Factorization__crq\x04\x89U\x14_Factorization__unitq\x05csage.rings.integer\nmake_integer\nq\x06U\x011\x85Rq\x07U\x18_Factorization__universeq\x08csage.rings.integer_ring\nIntegerRing\nq\t)Rq\nU\x11_Factorization__xq\x0b]q\x0c(h\x06U\x012\x85Rq\rK\x02\x86q\x0eh\x06U\x013\x85Rq\x0fK\x01\x86q\x10eub.'
 ```
 
-There is some code in Sage that uses ZODB (e.g, Cremona database), but I think it uses only pure python objects, so the above isn't a problem. 
-
 See also the related ticket #10352.
 
-Some ideas for how to fix this:
+The suggested option for this ticket is to remove zodb from sage.
 
-- Modify ZODB itself, e.g., by changing: ZODB.serialiize.ObjectWriter as suggested here: http://www.mail-archive.com/zodb-dev@zope.org/msg04766.html
- 
-- Figure out how to monkeypatch ODB.serialiize.ObjectWriter at runtime, then document this hack
+---
+* Apply [attachment: trac10353-db-removal.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-db-removal.patch.gz) to the sage library
+* Apply [attachment: trac10353-sage_root.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-sage_root.patch.gz) to the sage root repository
 
-- "Fix" SageObject and/or Cython, so Sage objects can serialize using Pickle protocol 1 instead of requiring 2.  I don't personally understand exactly why SageObject can't be pickled using protocol 1. 
-
-
``````




---

archive/issue_comments_097361.json:
```json
{
    "body": "Author: **Fran\u00e7ois Bissey**",
    "created_at": "2013-01-05T08:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97361",
    "user": "https://github.com/kiwifb"
}
```

Author: **François Bissey**



---

archive/issue_comments_097362.json:
```json
{
    "body": "Dependencies: **12205**",
    "created_at": "2013-01-05T08:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97362",
    "user": "https://github.com/kiwifb"
}
```

Dependencies: **12205**



---

archive/issue_events_136302.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2013-01-05T08:52:24Z",
    "event": "renamed",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "title_is": "Remove zodb from sage",
    "title_was": "ZODB is basically useless in Sage, since it uses pickle protocol 1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136302"
}
```



---

archive/issue_events_136303.json:
```json
{
    "actor": "https://github.com/kiwifb",
    "created_at": "2013-01-05T08:52:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136303"
}
```



---

archive/issue_comments_097363.json:
```json
{
    "body": "Changed dependencies from **12205** to **#12205**",
    "created_at": "2013-01-05T09:10:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97363",
    "user": "https://github.com/kini"
}
```

Changed dependencies from **12205** to **#12205**



---

archive/issue_comments_097364.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nI believe the line in `spkg/standard/deps`\n\n```\n$(INST)/$(SQLALCHEMY): $(INST)/$(ZODB)\n```\nshould be removed completely.",
    "created_at": "2013-01-07T09:48:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97364",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:12" align="right">comment:12</div>

I believe the line in `spkg/standard/deps`

```
$(INST)/$(SQLALCHEMY): $(INST)/$(ZODB)
```
should be removed completely.



---

archive/issue_comments_097365.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nYou are right! I probably produced this a bit too close to midnight. I will up a corrected patch shortly.",
    "created_at": "2013-01-07T10:00:25Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97365",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:13" align="right">comment:13</div>

You are right! I probably produced this a bit too close to midnight. I will up a corrected patch shortly.



---

archive/issue_comments_097366.json:
```json
{
    "body": "remeve reference to zodb in sage_root",
    "created_at": "2013-01-07T10:07:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97366",
    "user": "https://github.com/kiwifb"
}
```

remeve reference to zodb in sage_root



---

archive/issue_comments_097367.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nAttachment: **[trac10353-sage_root.patch.gz](https://github.com/sagemath/sage/files/ticket10353/trac10353-sage_root.patch.gz)**\n\nPatch updated.",
    "created_at": "2013-01-07T10:07:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97367",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:14" align="right">comment:14</div>

Attachment: **[trac10353-sage_root.patch.gz](https://github.com/sagemath/sage/files/ticket10353/trac10353-sage_root.patch.gz)**

Patch updated.



---

archive/issue_comments_097368.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -22,4 +22,5 @@\n ---\n * Apply [attachment: trac10353-db-removal.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-db-removal.patch.gz) to the sage library\n * Apply [attachment: trac10353-sage_root.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-sage_root.patch.gz) to the sage root repository\n+* Remove the zodb package.\n \n``````\n",
    "created_at": "2013-01-14T15:04:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97368",
    "user": "https://github.com/jdemeyer"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -22,4 +22,5 @@
 ---
 * Apply [attachment: trac10353-db-removal.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-db-removal.patch.gz) to the sage library
 * Apply [attachment: trac10353-sage_root.patch](https://github.com/sagemath/sage/files/ticket10353/trac10353-sage_root.patch.gz) to the sage root repository
+* Remove the zodb package.
 
``````




---

archive/issue_comments_097369.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nThis causes build problems for sagenb:\n\n```\nProcessing dependencies for Twisted==12.1.0\nSearching for zope.interface\n\nLink to http://pypi.python.org/simple/zope.interface/ ***BLOCKED*** by --allow-hosts\n\nCouldn't find index page for 'zope.interface' (maybe misspelled?)\nScanning index of all packages (this may take a while)\n\nLink to http://pypi.python.org/simple/ ***BLOCKED*** by --allow-hosts\n\nNo local packages or download links found for zope.interface\nerror: Could not find suitable distribution for Requirement.parse('zope.interface')\nError installing Twisted-12.1.0.tar.bz2 !\n```",
    "created_at": "2013-01-15T10:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97369",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:16" align="right">comment:16</div>

This causes build problems for sagenb:

```
Processing dependencies for Twisted==12.1.0
Searching for zope.interface

Link to http://pypi.python.org/simple/zope.interface/ ***BLOCKED*** by --allow-hosts

Couldn't find index page for 'zope.interface' (maybe misspelled?)
Scanning index of all packages (this may take a while)

Link to http://pypi.python.org/simple/ ***BLOCKED*** by --allow-hosts

No local packages or download links found for zope.interface
error: Could not find suitable distribution for Requirement.parse('zope.interface')
Error installing Twisted-12.1.0.tar.bz2 !
```



---

archive/issue_events_136304.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-15T10:46:16Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136304"
}
```



---

archive/issue_events_136305.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-15T10:46:16Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136305"
}
```



---

archive/issue_comments_097370.json:
```json
{
    "body": "Work Issues: **sagenb**",
    "created_at": "2013-01-15T10:46:16Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97370",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **sagenb**



---

archive/issue_comments_097371.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nI think this was expected and is https://github.com/sagemath/sagenb/issues/126.\nSo we should open a ticket on Sage's trac and put it as a dependency here I guess.",
    "created_at": "2013-01-15T10:53:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97371",
    "user": "https://github.com/jpflori"
}
```

<div id="comment:17" align="right">comment:17</div>

I think this was expected and is https://github.com/sagemath/sagenb/issues/126.
So we should open a ticket on Sage's trac and put it as a dependency here I guess.



---

archive/issue_events_136306.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-15T11:01:47Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136306"
}
```



---

archive/issue_events_136307.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-15T11:01:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136307"
}
```



---

archive/issue_comments_097372.json:
```json
{
    "body": "Changed dependencies from **#12205** to **#12205, sagenb-???**",
    "created_at": "2013-01-15T11:01:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97372",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#12205** to **#12205, sagenb-???**



---

archive/issue_events_136308.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-15T11:01:47Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "milestone_number": null,
    "milestone_title": "sage-5.6",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136308"
}
```



---

archive/issue_events_136309.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-15T11:01:47Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136309"
}
```



---

archive/issue_comments_097373.json:
```json
{
    "body": "Changed dependencies from **#12205, sagenb-???** to **#12205, #13717**",
    "created_at": "2013-01-15T14:27:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97373",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#12205, sagenb-???** to **#12205, #13717**



---

archive/issue_comments_097374.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nI think this is already fixed, we just need to make a new sagenb tarball. (The only thing sagenb needs to do is package zope.interface, right?)",
    "created_at": "2013-01-16T08:47:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97374",
    "user": "https://github.com/kini"
}
```

<div id="comment:20" align="right">comment:20</div>

I think this is already fixed, we just need to make a new sagenb tarball. (The only thing sagenb needs to do is package zope.interface, right?)



---

archive/issue_comments_097375.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAh, looks like this is already fixed in sagenb 0.10.3 (#13717), and the zope.interface problem was noticed in #12719 a couple months ago because IPython has also stopped using zope.",
    "created_at": "2013-01-16T08:49:57Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97375",
    "user": "https://github.com/kini"
}
```

<div id="comment:21" align="right">comment:21</div>

Ah, looks like this is already fixed in sagenb 0.10.3 (#13717), and the zope.interface problem was noticed in #12719 a couple months ago because IPython has also stopped using zope.



---

archive/issue_comments_097376.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAnd now that I look more closely at this ticket's dependencies, Jeroen seems to have already noticed that... sorry for the noise :)",
    "created_at": "2013-01-16T08:51:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97376",
    "user": "https://github.com/kini"
}
```

<div id="comment:22" align="right">comment:22</div>

And now that I look more closely at this ticket's dependencies, Jeroen seems to have already noticed that... sorry for the noise :)



---

archive/issue_comments_097377.json:
```json
{
    "body": "Changed work issues from **sagenb** to none",
    "created_at": "2013-01-17T10:22:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97377",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **sagenb** to none



---

archive/issue_comments_097378.json:
```json
{
    "body": "Changed dependencies from **#12205, #13717** to **#12205, #13717, #13963**",
    "created_at": "2013-01-17T13:41:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97378",
    "user": "https://github.com/jdemeyer"
}
```

Changed dependencies from **#12205, #13717** to **#12205, #13717, #13963**



---

archive/issue_comments_097379.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nI don't feel like reviewing the Sage library patch, but it builds and works fine now.",
    "created_at": "2013-01-19T09:53:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97379",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:25" align="right">comment:25</div>

I don't feel like reviewing the Sage library patch, but it builds and works fine now.



---

archive/issue_comments_097380.json:
```json
{
    "body": "<div id=\"comment:26\" align=\"right\">comment:26</div>\n\nIt's just removing files and one line that is useless. Christopher, could you give a review to this?",
    "created_at": "2013-01-19T09:56:47Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97380",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:26" align="right">comment:26</div>

It's just removing files and one line that is useless. Christopher, could you give a review to this?



---

archive/issue_events_136310.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T15:34:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136310"
}
```



---

archive/issue_events_136311.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T15:34:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136311"
}
```



---

archive/issue_events_136312.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T15:34:49Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "milestone_number": null,
    "milestone_title": "sage-5.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136312"
}
```



---

archive/issue_events_136313.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T15:34:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/pending",
    "label_color": "008080",
    "label_name": "pending",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136313"
}
```



---

archive/issue_comments_097381.json:
```json
{
    "body": "Reviewer: **Jeroen Demeyer**",
    "created_at": "2013-01-25T15:34:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97381",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **Jeroen Demeyer**



---

archive/issue_comments_097382.json:
```json
{
    "body": "Merged: **sage-5.7.beta1**",
    "created_at": "2013-01-25T16:16:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10353#issuecomment-97382",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-5.7.beta1**



---

archive/issue_events_136314.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T16:16:32Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136314"
}
```



---

archive/issue_events_136315.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2013-01-25T16:16:32Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10353",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10353#event-136315"
}
```
