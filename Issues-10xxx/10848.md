# Issue 10848: Checks for Hermitian matrices

archive/issues_010782.json:
```json
{
    "body": "Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.\n\n**Apply**:\n1. [attachment:trac_10848-hermitian-matrices-v7.patch]\n\n**Assignee:** @jasongrout, @williamstein\n\n**Reviewer:** Mike Hansen\n\n**Author:** Rob Beezer\n\n**Merged:** sage-4.7.2.alpha1\n\n**Dependencies:** #11027\n\nIssue created by migration from https://trac.sagemath.org/ticket/10848\n\n",
    "closed_at": "2011-08-03T14:36:24Z",
    "created_at": "2011-02-24T19:05:21Z",
    "labels": [
        "component: linear algebra",
        "minor",
        "enhancement"
    ],
    "milestone": "https://github.com/sagemath/sagetest/milestones/sage-4.7.2",
    "title": "Checks for Hermitian matrices",
    "type": "issue",
    "url": "https://github.com/sagemath/sagetest/issues/10848",
    "user": "https://github.com/rbeezer"
}
```
Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.

**Apply**:
1. [attachment:trac_10848-hermitian-matrices-v7.patch]

**Assignee:** @jasongrout, @williamstein

**Reviewer:** Mike Hansen

**Author:** Rob Beezer

**Merged:** sage-4.7.2.alpha1

**Dependencies:** #11027

Issue created by migration from https://trac.sagemath.org/ticket/10848





---

archive/issue_comments_133177.json:
```json
{
    "body": "**Author:** Rob Beezer",
    "created_at": "2011-02-24T19:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133177",
    "user": "https://github.com/rbeezer"
}
```

**Author:** Rob Beezer



---

archive/attachments_014226.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10848-hermitian-matrices.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10848/trac_10848-hermitian-matrices.patch",
    "created_at": "2011-02-24T19:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_133178.json:
```json
{
    "body": "<a id='comment:1'></a>\n",
    "created_at": "2011-02-24T19:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133178",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:1'></a>




---

archive/issue_comments_133179.json:
```json
{
    "body": "**Changing status** from new to needs_review.",
    "created_at": "2011-02-24T19:13:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133179",
    "user": "https://github.com/rbeezer"
}
```

**Changing status** from new to needs_review.



---

archive/issue_comments_133180.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1 +1,3 @@\n Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.\n+\n+Apply trac_10848-hermitian-matrices-v2.patch\n``````\n",
    "created_at": "2011-03-01T06:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133180",
    "user": "https://github.com/rbeezer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1 +1,3 @@
 Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.
+
+Apply trac_10848-hermitian-matrices-v2.patch
``````




---

archive/attachments_014227.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10848-hermitian-matrices-v2.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10848/trac_10848-hermitian-matrices-v2.patch",
    "created_at": "2011-03-01T06:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_133181.json:
```json
{
    "body": "<a id='comment:2'></a>\nHad an off-by-one error and was not checking the diagonal elements.  Fixed now in the v2 patch, and added a doctest that would have caught the mistake.",
    "created_at": "2011-03-01T06:06:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133181",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:2'></a>
Had an off-by-one error and was not checking the diagonal elements.  Fixed now in the v2 patch, and added a doctest that would have caught the mistake.



---

archive/issue_comments_133182.json:
```json
{
    "body": "<a id='comment:3'></a>\ntypo: tranpose.",
    "created_at": "2011-03-03T17:04:40Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133182",
    "user": "https://trac.sagemath.org/admin/accounts/users/dsm"
}
```

<a id='comment:3'></a>
typo: tranpose.



---

archive/issue_comments_133183.json:
```json
{
    "body": "<a id='comment:4'></a>\nCan you clarify this statement? \"For numerical matrices a specialized routine available over ``RDF`` and ``CDF`` is a good choice. \"  When I read it, I'm not sure what it means---should I program my own routine?\n\nMaybe you could change it to: \"For numerical matrices over ``RDF`` or ``CDF``, the tolerance for comparison can also be specified (see ~REFERENCE).\"",
    "created_at": "2011-03-03T17:58:42Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133183",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:4'></a>
Can you clarify this statement? "For numerical matrices a specialized routine available over ``RDF`` and ``CDF`` is a good choice. "  When I read it, I'm not sure what it means---should I program my own routine?

Maybe you could change it to: "For numerical matrices over ``RDF`` or ``CDF``, the tolerance for comparison can also be specified (see ~REFERENCE)."



---

archive/issue_comments_133184.json:
```json
{
    "body": "<a id='comment:5'></a>\nReplying to [jason](#comment%3A4):\n> Can you clarify this statement? \"For numerical matrices a specialized routine available over ``RDF`` and ``CDF`` is a good choice. \"  When I read it, I'm not sure what it means---should I program my own routine?\n\n\nYes, that could be improved (and I used the same thing on some other ticket).  What I was trying to convey was the idea that RDF/CDF are better for numerical work than RR/CC.  There are many methods designed for exact rings that get applied to RDF/CDF/RR/CC, and I am hoping to improve the situation for RDF/CDF, thus an effort to steer folks there.  Maybe I should just say that outright, plus mention the tolerance option as you have suggested.\n\nI'll have a new patch up later today.\n\n> Maybe you could change it to: \"For numerical matrices over ``RDF`` or ``CDF``, the tolerance for comparison can also be specified (see ~REFERENCE).\"\n",
    "created_at": "2011-03-03T18:39:10Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133184",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:5'></a>
Replying to [jason](#comment%3A4):
> Can you clarify this statement? "For numerical matrices a specialized routine available over ``RDF`` and ``CDF`` is a good choice. "  When I read it, I'm not sure what it means---should I program my own routine?


Yes, that could be improved (and I used the same thing on some other ticket).  What I was trying to convey was the idea that RDF/CDF are better for numerical work than RR/CC.  There are many methods designed for exact rings that get applied to RDF/CDF/RR/CC, and I am hoping to improve the situation for RDF/CDF, thus an effort to steer folks there.  Maybe I should just say that outright, plus mention the tolerance option as you have suggested.

I'll have a new patch up later today.

> Maybe you could change it to: "For numerical matrices over ``RDF`` or ``CDF``, the tolerance for comparison can also be specified (see ~REFERENCE)."




---

archive/issue_comments_133185.json:
```json
{
    "body": "<a id='comment:6'></a>\nReplying to [dsm](#comment%3A3):\n> typo: tranpose.\n\n\nThanks, got *both* of them fixed in latest patch.",
    "created_at": "2011-03-03T23:21:56Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133185",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:6'></a>
Replying to [dsm](#comment%3A3):
> typo: tranpose.


Thanks, got *both* of them fixed in latest patch.



---

archive/issue_comments_133186.json:
```json
{
    "body": "<a id='comment:7'></a>\nReplying to [jason](#comment%3A4):\n> Can you clarify this statement?\n\n\nDoes this sound better?  Let me know and I'll replicate into `is_unitary`.\n\n```\n        This routine is for matrices over exact rings and so may not\n        work properly for matrices over ``RR`` or ``CC``.  For matrices with\n        approximate entries, the rings of double-precision floating-point\n        numbers, ``RDF`` and ``CDF``, are a better choice since the\n        :meth:`sage.matrix.matrix_double_dense.Matrix_double_dense.is_hermitian`\n        method has a tolerance parameter.  This provides control over\n        allowing for minor discrepancies between entries when checking\n        equality.\n```",
    "created_at": "2011-03-03T23:24:45Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133186",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:7'></a>
Replying to [jason](#comment%3A4):
> Can you clarify this statement?


Does this sound better?  Let me know and I'll replicate into `is_unitary`.

```
        This routine is for matrices over exact rings and so may not
        work properly for matrices over ``RR`` or ``CC``.  For matrices with
        approximate entries, the rings of double-precision floating-point
        numbers, ``RDF`` and ``CDF``, are a better choice since the
        :meth:`sage.matrix.matrix_double_dense.Matrix_double_dense.is_hermitian`
        method has a tolerance parameter.  This provides control over
        allowing for minor discrepancies between entries when checking
        equality.
```



---

archive/attachments_014228.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10848-hermitian-matrices-v3.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10848/trac_10848-hermitian-matrices-v3.patch",
    "created_at": "2011-03-05T07:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://trac.sagemath.org/admin/accounts/users/flawrence"
}
```



---

archive/issue_comments_133187.json:
```json
{
    "body": "<a id='comment:8'></a>\nReplying to [rbeezer](#comment%3A7):\n> \n> ```\n>         This routine is for matrices over exact rings and so may not\n>         work properly for matrices over ``RR`` or ``CC``.  For matrices with\n>         approximate entries, the rings of double-precision floating-point\n>         numbers, ``RDF`` and ``CDF``, are a better choice since the\n>         :meth:`sage.matrix.matrix_double_dense.Matrix_double_dense.is_hermitian`\n>         method has a tolerance parameter.  This provides control over\n>         allowing for minor discrepancies between entries when checking\n>         equality.\n> ```\n\n\nWould it be possible to copy the `matrix_double_dense.pyx` `is_hermitian` into `matrix_dense.pyx` (adjusting the default tolerance and doctests, of course) and thus remove the quirk that makes this warning necessary?",
    "created_at": "2011-03-05T07:40:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133187",
    "user": "https://trac.sagemath.org/admin/accounts/users/flawrence"
}
```

<a id='comment:8'></a>
Replying to [rbeezer](#comment%3A7):
> 
> ```
>         This routine is for matrices over exact rings and so may not
>         work properly for matrices over ``RR`` or ``CC``.  For matrices with
>         approximate entries, the rings of double-precision floating-point
>         numbers, ``RDF`` and ``CDF``, are a better choice since the
>         :meth:`sage.matrix.matrix_double_dense.Matrix_double_dense.is_hermitian`
>         method has a tolerance parameter.  This provides control over
>         allowing for minor discrepancies between entries when checking
>         equality.
> ```


Would it be possible to copy the `matrix_double_dense.pyx` `is_hermitian` into `matrix_dense.pyx` (adjusting the default tolerance and doctests, of course) and thus remove the quirk that makes this warning necessary?



---

archive/issue_comments_133188.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2011-03-05T19:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133188",
    "user": "https://github.com/rbeezer"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_133189.json:
```json
{
    "body": "<a id='comment:9'></a>\nReplying to [flawrence](#comment%3A8):\n> Would it be possible to copy the `matrix_double_dense.pyx` `is_hermitian` into `matrix_dense.pyx` (adjusting the default tolerance and doctests, of course) and thus remove the quirk that makes this warning necessary?\n\n\nHi Felix,\n\nThis sounds like a good idea.\n\n* I'd imagine the code in matrix2 branching for exact vs. inexact rings.  Any tolerance would be ignored for exact rings.\n\n* Are RDF/CDF/RR/CC the only inexact rings in Sage?  They need to be amenable to an absolute value in order to do the comparison.  As organized in the patch, we at least know just which ring we are dealing with.\n\n* Same idea would apply to `is_symmetric` and `is_unitary`.\n\n* I'm guessing this will change some behavior if applied to is_symmetric.  In other words, I bet the exact version gets called for some inexact rings.  I may test this later.\n\nBTW, I saw your post on sage-devel asking for greater `SciPY/NumPy` integration.  I'm hoping to (slowly) make more of the matrix algebra available, so maybe that will help.\n\nJason - any comments on the above?\n\nRob",
    "created_at": "2011-03-05T19:05:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133189",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:9'></a>
Replying to [flawrence](#comment%3A8):
> Would it be possible to copy the `matrix_double_dense.pyx` `is_hermitian` into `matrix_dense.pyx` (adjusting the default tolerance and doctests, of course) and thus remove the quirk that makes this warning necessary?


Hi Felix,

This sounds like a good idea.

* I'd imagine the code in matrix2 branching for exact vs. inexact rings.  Any tolerance would be ignored for exact rings.

* Are RDF/CDF/RR/CC the only inexact rings in Sage?  They need to be amenable to an absolute value in order to do the comparison.  As organized in the patch, we at least know just which ring we are dealing with.

* Same idea would apply to `is_symmetric` and `is_unitary`.

* I'm guessing this will change some behavior if applied to is_symmetric.  In other words, I bet the exact version gets called for some inexact rings.  I may test this later.

BTW, I saw your post on sage-devel asking for greater `SciPY/NumPy` integration.  I'm hoping to (slowly) make more of the matrix algebra available, so maybe that will help.

Jason - any comments on the above?

Rob



---

archive/issue_comments_133190.json:
```json
{
    "body": "<a id='comment:10'></a>\nReplying to [rbeezer](#comment%3A9):\n> Replying to [flawrence](#comment%3A8):\n> > Would it be possible to copy the `matrix_double_dense.pyx` `is_hermitian` into `matrix_dense.pyx` (adjusting the default tolerance and doctests, of course) and thus remove the quirk that makes this warning necessary?\n\n> \n> Hi Felix,\n> \n> This sounds like a good idea.\n> \n> * I'd imagine the code in matrix2 branching for exact vs. inexact rings.  Any tolerance would be ignored for exact rings.\n\n\nIf the parameter is there, don't ignore it.  That would be really confusing.\n\n\n> \n> * Are RDF/CDF/RR/CC the only inexact rings in Sage?  They need to be amenable to an absolute value in order to do the comparison.  As organized in the patch, we at least know just which ring we are dealing with.\n\n\n\n```\nsage: SR.is_exact()\nFalse\n```\n\n\nIn fact, there are an infinite number of inexact rings:\n\n```\nsage: RealField(100).is_exact()\nFalse\nsage: S.<s> = LaurentSeriesRing(GF(5))\nsage: T.<t> = PowerSeriesRing(pAdicRing(5))\nsage: T.is_exact()\nFalse\n```\n\n\nThere probably many, many more.",
    "created_at": "2011-03-05T19:10:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133190",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:10'></a>
Replying to [rbeezer](#comment%3A9):
> Replying to [flawrence](#comment%3A8):
> > Would it be possible to copy the `matrix_double_dense.pyx` `is_hermitian` into `matrix_dense.pyx` (adjusting the default tolerance and doctests, of course) and thus remove the quirk that makes this warning necessary?

> 
> Hi Felix,
> 
> This sounds like a good idea.
> 
> * I'd imagine the code in matrix2 branching for exact vs. inexact rings.  Any tolerance would be ignored for exact rings.


If the parameter is there, don't ignore it.  That would be really confusing.


> 
> * Are RDF/CDF/RR/CC the only inexact rings in Sage?  They need to be amenable to an absolute value in order to do the comparison.  As organized in the patch, we at least know just which ring we are dealing with.



```
sage: SR.is_exact()
False
```


In fact, there are an infinite number of inexact rings:

```
sage: RealField(100).is_exact()
False
sage: S.<s> = LaurentSeriesRing(GF(5))
sage: T.<t> = PowerSeriesRing(pAdicRing(5))
sage: T.is_exact()
False
```


There probably many, many more.



---

archive/issue_comments_133191.json:
```json
{
    "body": "<a id='comment:11'></a>\nReplying to [jason](#comment%3A10):\n> If the parameter is there, don't ignore it.  That would be really confusing.\n\n\nI wouldn't *totally* ignore it, but I'd not honor it either, I think.  Throw an error, since it would exhibit a basic misunderstanding/misapplication.\n> \n> ```\n> sage: SR.is_exact()\n> False\n> ```\n\n\nThat's the one that would bite me.  I knew there was one oddball one.\n\n> In fact, there are an infinite number of inexact rings:\n> \n> ```\n> sage: RealField(100).is_exact()\n> False\n> sage: S.<s> = LaurentSeriesRing(GF(5))\n> sage: T.<t> = PowerSeriesRing(pAdicRing(5))\n> sage: T.is_exact()\n> False\n> ```\n\n\nThanks, that's what I needed to know.  (I use RR/CC as stand-ins for all the `RealField()`'s.)\n\nSo this will be a problem:\n\n```\nsage: T.<t> = PowerSeriesRing(pAdicRing(5))\nsage: a=T.an_element()\nsage: a\n(1 + O(5^20))*t\nsage: abs(a)\n---------------------------------------------------------------------------\nTypeError                                 Traceback (most recent call last)\n\n/sage/dev/devel/sage-main/<ipython console> in <module>()\n\nTypeError: bad operand type for abs(): 'sage.rings.power_series_poly.PowerSeries_poly'\n```\n\nWhich is making me think it would be better to make the annoying message go away by \"somebody\" implementing matrices over RR/CC/RealField()/ComplexField() properly.",
    "created_at": "2011-03-05T19:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133191",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:11'></a>
Replying to [jason](#comment%3A10):
> If the parameter is there, don't ignore it.  That would be really confusing.


I wouldn't *totally* ignore it, but I'd not honor it either, I think.  Throw an error, since it would exhibit a basic misunderstanding/misapplication.
> 
> ```
> sage: SR.is_exact()
> False
> ```


That's the one that would bite me.  I knew there was one oddball one.

> In fact, there are an infinite number of inexact rings:
> 
> ```
> sage: RealField(100).is_exact()
> False
> sage: S.<s> = LaurentSeriesRing(GF(5))
> sage: T.<t> = PowerSeriesRing(pAdicRing(5))
> sage: T.is_exact()
> False
> ```


Thanks, that's what I needed to know.  (I use RR/CC as stand-ins for all the `RealField()`'s.)

So this will be a problem:

```
sage: T.<t> = PowerSeriesRing(pAdicRing(5))
sage: a=T.an_element()
sage: a
(1 + O(5^20))*t
sage: abs(a)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/sage/dev/devel/sage-main/<ipython console> in <module>()

TypeError: bad operand type for abs(): 'sage.rings.power_series_poly.PowerSeries_poly'
```

Which is making me think it would be better to make the annoying message go away by "somebody" implementing matrices over RR/CC/RealField()/ComplexField() properly.



---

archive/issue_comments_133192.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-03-05T19:25:20Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133192",
    "user": "https://github.com/rbeezer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_133193.json:
```json
{
    "body": "<a id='comment:12'></a>\nYep, I'm really looking forward to an alglib interface, which seems like the best contender right now for a good RealField/ComplexField matrix class backend.",
    "created_at": "2011-03-05T19:27:16Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133193",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:12'></a>
Yep, I'm really looking forward to an alglib interface, which seems like the best contender right now for a good RealField/ComplexField matrix class backend.



---

archive/issue_comments_133194.json:
```json
{
    "body": "<a id='comment:13'></a>\nReplying to [jason](#comment%3A12):\n> Yep, I'm really looking forward to an alglib interface, which seems like the best contender right now for a good RealField/ComplexField matrix class backend.\n\n\nAah, that looks nice.",
    "created_at": "2011-03-05T19:33:35Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133194",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:13'></a>
Replying to [jason](#comment%3A12):
> Yep, I'm really looking forward to an alglib interface, which seems like the best contender right now for a good RealField/ComplexField matrix class backend.


Aah, that looks nice.



---

archive/issue_comments_133195.json:
```json
{
    "body": "<a id='comment:14'></a>\nAlglib interface: #10880",
    "created_at": "2011-03-05T19:40:58Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133195",
    "user": "https://github.com/jasongrout"
}
```

<a id='comment:14'></a>
Alglib interface: #10880



---

archive/issue_comments_133196.json:
```json
{
    "body": "<a id='comment:15'></a>\nfix patchbot comment",
    "created_at": "2011-03-23T22:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133196",
    "user": "https://github.com/kini"
}
```

<a id='comment:15'></a>
fix patchbot comment



---

archive/issue_comments_133197.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,3 +1,4 @@\n Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.\n \n Apply trac_10848-hermitian-matrices-v2.patch\n+Depends on #10536\n``````\n",
    "created_at": "2011-03-23T22:34:07Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133197",
    "user": "https://github.com/kini"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,3 +1,4 @@
 Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.
 
 Apply trac_10848-hermitian-matrices-v2.patch
+Depends on #10536
``````




---

archive/issue_comments_133198.json:
```json
{
    "body": "**Changing status** from needs_review to needs_work.",
    "created_at": "2011-03-25T03:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133198",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

**Changing status** from needs_review to needs_work.



---

archive/issue_comments_133199.json:
```json
{
    "body": "<a id='comment:16'></a>\nI suggest to reword line 2945 like \"A matrix that is nearly Hermitian, but for one non-real\" and I would introduce one keyword for the RDF implementation deciding whether the entries are naively compared (quick and what students might assume) or the svd is applied and the imaginary values considered (numerically much better conditioned).",
    "created_at": "2011-03-25T03:16:12Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133199",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

<a id='comment:16'></a>
I suggest to reword line 2945 like "A matrix that is nearly Hermitian, but for one non-real" and I would introduce one keyword for the RDF implementation deciding whether the entries are naively compared (quick and what students might assume) or the svd is applied and the imaginary values considered (numerically much better conditioned).



---

archive/issue_comments_133200.json:
```json
{
    "body": "<a id='comment:17'></a>\nReplying to [mraum](#comment%3A16):\n> I suggest to reword line 2945 like \"A matrix that is nearly Hermitian, but for one non-real\"\n\n\nThanks, Martin.  I'll make that change.\n\nSo a check based on the Schur decomposition at #11027 will be a good high-reliability test, while the naive cut-off comparison can be a high-speed crude check.",
    "created_at": "2011-03-25T17:18:19Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133200",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:17'></a>
Replying to [mraum](#comment%3A16):
> I suggest to reword line 2945 like "A matrix that is nearly Hermitian, but for one non-real"


Thanks, Martin.  I'll make that change.

So a check based on the Schur decomposition at #11027 will be a good high-reliability test, while the naive cut-off comparison can be a high-speed crude check.



---

archive/attachments_014229.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10848-hermitian-matrices-v4.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10848/trac_10848-hermitian-matrices-v4.patch",
    "created_at": "2011-03-25T19:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_133201.json:
```json
{
    "body": "<a id='comment:18'></a>\nVersion 4 patch is a rebase to allow this to depend on #11027 for Schur decompositions.",
    "created_at": "2011-03-25T19:56:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133201",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:18'></a>
Version 4 patch is a rebase to allow this to depend on #11027 for Schur decompositions.



---

archive/attachments_014230.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10848-hermitian-two-speed.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10848/trac_10848-hermitian-two-speed.patch",
    "created_at": "2011-03-25T22:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_133202.json:
```json
{
    "body": "",
    "created_at": "2011-03-25T22:21:04Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133202",
    "user": "https://github.com/rbeezer"
}
```





---

archive/issue_comments_133203.json:
```json
{
    "body": "<a id='comment:19'></a>\nNow depends on #11027, then apply v4 patch, then \"two-speed\" patch.\n\nThis is *not* ready, mostly posted for safe-keeping.  Needs more docs, maybe some timing tests.  But it should work and only one test fails (needs tolerance adjustment, I'd guess).  More soon.",
    "created_at": "2011-03-25T22:23:17Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133203",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:19'></a>
Now depends on #11027, then apply v4 patch, then "two-speed" patch.

This is *not* ready, mostly posted for safe-keeping.  Needs more docs, maybe some timing tests.  But it should work and only one test fails (needs tolerance adjustment, I'd guess).  More soon.



---

archive/attachments_014231.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10848-hermitian-matrices-v5.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10848/trac_10848-hermitian-matrices-v5.patch",
    "created_at": "2011-03-30T23:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_133204.json:
```json
{
    "body": "",
    "created_at": "2011-03-30T23:35:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133204",
    "user": "https://github.com/rbeezer"
}
```





---

archive/issue_comments_133205.json:
```json
{
    "body": "<a id='comment:20'></a>\nv5 patch is self-contained, apply only this one.\n\nTwo options for the check, the naive one, or one based on the Schur decomposition (#11027).\n\nThis needs to check that the upper half of a matrix is zero, so I broke out a helper method for that, since I'll use it in a future `is_normal()` method.  I might pair it with an upper-triangular check at some point and make them both visible.  But not as part of this.",
    "created_at": "2011-03-30T23:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133205",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:20'></a>
v5 patch is self-contained, apply only this one.

Two options for the check, the naive one, or one based on the Schur decomposition (#11027).

This needs to check that the upper half of a matrix is zero, so I broke out a helper method for that, since I'll use it in a future `is_normal()` method.  I might pair it with an upper-triangular check at some point and make them both visible.  But not as part of this.



---

archive/issue_comments_133206.json:
```json
{
    "body": "**Changing status** from needs_work to needs_review.",
    "created_at": "2011-03-30T23:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133206",
    "user": "https://github.com/rbeezer"
}
```

**Changing status** from needs_work to needs_review.



---

archive/issue_comments_133207.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,4 +1,5 @@\n Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.\n \n-Apply trac_10848-hermitian-matrices-v2.patch\n-Depends on #10536\n+Apply trac_10848-hermitian-matrices-v5.patch\n+\n+Depends on #10536, #11027\n``````\n",
    "created_at": "2011-03-30T23:37:57Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133207",
    "user": "https://github.com/rbeezer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,4 +1,5 @@
 Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.
 
-Apply trac_10848-hermitian-matrices-v2.patch
-Depends on #10536
+Apply trac_10848-hermitian-matrices-v5.patch
+
+Depends on #10536, #11027
``````




---

archive/attachments_014232.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10848-hermitian-matrices-v6.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10848/trac_10848-hermitian-matrices-v6.patch",
    "created_at": "2011-04-01T01:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_133208.json:
```json
{
    "body": "",
    "created_at": "2011-04-01T01:11:21Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133208",
    "user": "https://github.com/rbeezer"
}
```





---

archive/issue_comments_133209.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,5 @@\n Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.\n \n-Apply trac_10848-hermitian-matrices-v5.patch\n+Apply trac_10848-hermitian-matrices-v6.patch\n \n Depends on #10536, #11027\n``````\n",
    "created_at": "2011-04-01T01:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133209",
    "user": "https://github.com/rbeezer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,5 @@
 Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.
 
-Apply trac_10848-hermitian-matrices-v5.patch
+Apply trac_10848-hermitian-matrices-v6.patch
 
 Depends on #10536, #11027
``````




---

archive/issue_comments_133210.json:
```json
{
    "body": "<a id='comment:21'></a>\nv6 adds caching the exact version's result, and fixes some (more) off-by-one problems with the old-style loops.  Cython now efficiently translates `range`s so I just went with those.  I think I am done.  Really.",
    "created_at": "2011-04-01T01:14:14Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133210",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:21'></a>
v6 adds caching the exact version's result, and fixes some (more) off-by-one problems with the old-style loops.  Cython now efficiently translates `range`s so I just went with those.  I think I am done.  Really.



---

archive/issue_comments_133211.json:
```json
{
    "body": "<a id='comment:22'></a>\nFor some reason the patchbot does not apply this correctly. The changes to the description should fix this. If so I will come back to this.",
    "created_at": "2011-04-18T10:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133211",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

<a id='comment:22'></a>
For some reason the patchbot does not apply this correctly. The changes to the description should fix this. If so I will come back to this.



---

archive/issue_comments_133212.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,5 +1,8 @@\n Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.\n \n-Apply trac_10848-hermitian-matrices-v6.patch\n+**Apply**:\n+1. [attachment:trac_10848-hermitian-matrices-v6.patch]\n \n-Depends on #10536, #11027\n+**Depends on**:\n+1. #10536\n+2. #11027\n``````\n",
    "created_at": "2011-04-18T10:58:29Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133212",
    "user": "https://trac.sagemath.org/admin/accounts/users/mraum"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,5 +1,8 @@
 Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.
 
-Apply trac_10848-hermitian-matrices-v6.patch
+**Apply**:
+1. [attachment:trac_10848-hermitian-matrices-v6.patch]
 
-Depends on #10536, #11027
+**Depends on**:
+1. #10536
+2. #11027
``````




---

archive/issue_comments_133213.json:
```json
{
    "body": "<a id='comment:23'></a>\nReplying to [mraum](#comment%3A22):\n> For some reason the patchbot does not apply this correctly. The changes to the description should fix this. If so I will come back to this.\n\n\nI think the description may be for the release manager, and the buildbot reads comments.\n\nhttp://wiki.sagemath.org/buildbot\n\nAlso, the buildbot is \"stuck\" back at 4.6.2.  Maybe the following will help.\n\nDepends on #10536, #11027 \n\nApply: trac_10848-hermitian-matrices-v6.patch",
    "created_at": "2011-04-19T00:17:27Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133213",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:23'></a>
Replying to [mraum](#comment%3A22):
> For some reason the patchbot does not apply this correctly. The changes to the description should fix this. If so I will come back to this.


I think the description may be for the release manager, and the buildbot reads comments.

http://wiki.sagemath.org/buildbot

Also, the buildbot is "stuck" back at 4.6.2.  Maybe the following will help.

Depends on #10536, #11027 

Apply: trac_10848-hermitian-matrices-v6.patch



---

archive/issue_comments_133214.json:
```json
{
    "body": "**Dependencies:** #11027",
    "created_at": "2011-06-11T20:10:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133214",
    "user": "https://github.com/fchapoton"
}
```

**Dependencies:** #11027



---

archive/issue_comments_133215.json:
```json
{
    "body": "**Reviewer:** Mike Hansen",
    "created_at": "2011-07-20T03:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133215",
    "user": "https://github.com/mwhansen"
}
```

**Reviewer:** Mike Hansen



---

archive/issue_comments_133216.json:
```json
{
    "body": "**Changing status** from needs_review to positive_review.",
    "created_at": "2011-07-20T03:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133216",
    "user": "https://github.com/mwhansen"
}
```

**Changing status** from needs_review to positive_review.



---

archive/issue_comments_133217.json:
```json
{
    "body": "<a id='comment:25'></a>\nLooks good to me.",
    "created_at": "2011-07-20T03:09:49Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133217",
    "user": "https://github.com/mwhansen"
}
```

<a id='comment:25'></a>
Looks good to me.



---

archive/issue_comments_133218.json:
```json
{
    "body": "<a id='comment:26'></a>\nReplying to [mhansen](#comment%3A25):\n> Looks good to me.\n\n\nThanks for the review, Mike!",
    "created_at": "2011-07-20T17:38:34Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133218",
    "user": "https://github.com/rbeezer"
}
```

<a id='comment:26'></a>
Replying to [mhansen](#comment%3A25):
> Looks good to me.


Thanks for the review, Mike!



---

archive/issue_events_033731.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-07-21T12:42:48Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "milestone": "sage-4.7.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10848#event-33731"
}
```



---

archive/attachments_014233.json:
```json
{
    "asset_content_type": "application/octet-stream",
    "asset_name": "trac_10848-hermitian-matrices-v7.patch",
    "asset_url": "tarball://root/attachments/some-uuid/ticket10848/trac_10848-hermitian-matrices-v7.patch",
    "created_at": "2011-07-22T19:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "attachment",
    "url": "https://github.com/assets/some-id/some-uuid.patch",
    "user": "https://github.com/rbeezer"
}
```



---

archive/issue_comments_133219.json:
```json
{
    "body": "Fixed commit message, rebased to 4.7.1.alpha4",
    "created_at": "2011-07-22T19:42:08Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133219",
    "user": "https://github.com/rbeezer"
}
```

Fixed commit message, rebased to 4.7.1.alpha4



---

archive/issue_comments_133220.json:
```json
{
    "body": "**Description changed:**\n``````diff\n--- \n+++ \n@@ -1,8 +1,4 @@\n Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.\n \n **Apply**:\n-1. [attachment:trac_10848-hermitian-matrices-v6.patch]\n-\n-**Depends on**:\n-1. #10536\n-2. #11027\n+1. [attachment:trac_10848-hermitian-matrices-v7.patch]\n``````\n",
    "created_at": "2011-08-02T21:23:48Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133220",
    "user": "https://github.com/jdemeyer"
}
```

**Description changed:**
``````diff
--- 
+++ 
@@ -1,8 +1,4 @@
 Adds an exact routine, and a numerical routine, to determine if a matrix is Hermitian.
 
 **Apply**:
-1. [attachment:trac_10848-hermitian-matrices-v6.patch]
-
-**Depends on**:
-1. #10536
-2. #11027
+1. [attachment:trac_10848-hermitian-matrices-v7.patch]
``````




---

archive/issue_events_033732.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-08-03T14:36:24Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sagetest/issues/10848#event-33732"
}
```



---

archive/issue_comments_133221.json:
```json
{
    "body": "**Merged:** sage-4.7.2.alpha1",
    "created_at": "2011-08-03T14:36:24Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133221",
    "user": "https://github.com/jdemeyer"
}
```

**Merged:** sage-4.7.2.alpha1



---

archive/issue_comments_133222.json:
```json
{
    "body": "<a id='comment:30'></a>\nDoes anybody here remember why `numpy.absolute(numpy.imag(z))` is called on a `CDF` element `z` instead of simply `abs(z.imag())`? The former breaks with numpy 1.13 and I'm changing the code to the latter on #24063.",
    "created_at": "2017-10-18T12:52:50Z",
    "issue": "https://github.com/sagemath/sagetest/issues/10848",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sagetest/issues/10848#issuecomment-133222",
    "user": "https://github.com/jdemeyer"
}
```

<a id='comment:30'></a>
Does anybody here remember why `numpy.absolute(numpy.imag(z))` is called on a `CDF` element `z` instead of simply `abs(z.imag())`? The former breaks with numpy 1.13 and I'm changing the code to the latter on #24063.
