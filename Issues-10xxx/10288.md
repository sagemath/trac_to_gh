# Issue 10288: Experimental package 'CHomP' fails to install on OpenSolaris x86

archive/issues_010287.json:
```json
{
    "assignees": [
        "https://github.com/sagetrac-drkirkby"
    ],
    "body": "Trying to install this experiemental package on a Sun Ultra 27 (3.33 GHz Intel Xeon) running OpenSolaris 06/2009, it fails as it can't reconise the system. \n\nI've not tried it, but I would also expect it to fail on a Solaris 10 machine with an x86 processor such as 'fulvia' on Skynet. \n\nI've not tried a 64-bit build (i.e. with `SAGE64=yes`). \n\n```\ng++ -O2 -ansi -pedantic -Wall -I../include  -o ../obj/capd-homengin/engines.o -c \\\n        ../src/capd-homengin/engines.cpp\nIn file included from ../include/capd/auxil/clock.h:18:0,\n                 from ../include/capd/auxil/Stopwatch.h:19,\n                 from ../include/capd/homologicalAlgebra/homAlgFunctors.hpp:27,\n                 from ../include/capd/homologicalAlgebra/cubSetFunctors.hpp:22,\n                 from ../include/capd/multiEngHom/MultiEngHomT.h:30,\n                 from ../src/capd-homengin/engines.cpp:35:\n../include/capd/capd/operatingSystemSetting.h:73:2: error: #error Your system cannot be determined automatically by the KRAK package.Please edit the configuration file appropriately.\nIn file included from ../include/capd/auxil/Stopwatch.h:19:0,\n                 from ../include/capd/homologicalAlgebra/homAlgFunctors.hpp:27,\n                 from ../include/capd/homologicalAlgebra/cubSetFunctors.hpp:22,\n                 from ../include/capd/multiEngHom/MultiEngHomT.h:30,\n                 from ../src/capd-homengin/engines.cpp:35:\n../include/capd/auxil/clock.h: In function 'long double getWorldSeconds()':\n../include/capd/auxil/clock.h:54:32: error: aggregate 'getWorldSeconds()::_timeb timebuffer' has incomplete type and cannot be defined\nIn file included from ../include/capd/auxil/Stopwatch.h:19:0,\n                 from ../include/capd/homologicalAlgebra/homAlgFunctors.hpp:27,\n                 from ../include/capd/homologicalAlgebra/cubSetFunctors.hpp:22,\n                 from ../include/capd/multiEngHom/MultiEngHomT.h:30,\n                 from ../src/capd-homengin/engines.cpp:35:\n../include/capd/auxil/clock.h:55:31: error: '_ftime' was not declared in this scope\n../include/capd/auxil/clock.h:57:5: warning: control reaches end of non-void function\nmake[2]: *** [../obj/capd-homengin/engines.o] Error 1\nmake[2]: Leaving directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p1/src/make'\n:\n```\n\nThere is an spkg available at\n\n[http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg)\n\n(Note that this is an \"experimental\" spkg: don't merge it into Sage.  Please merge the scripts patch, trac_10288-scripts-hgignore.patch, though.)\n\nCC:  @jhpalmieri @sagetrac-mhampton @kiwifb\n\nComponent: **porting: Solaris**\n\nAuthor: **John Palmieri**\n\nReviewer: **David Kirkby**\n\nMerged: **sage-4.6.1.alpha3**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10288_\n\n",
    "closed_at": "2010-12-02T16:08:17Z",
    "created_at": "2010-11-18T09:15:57Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20solaris",
        "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
        "https://github.com/sagemath/sage/labels/bug"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.6.1",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Experimental package 'CHomP' fails to install on OpenSolaris x86",
    "type": "issue",
    "updated_at": "2010-12-02T16:08:17Z",
    "url": "https://github.com/sagemath/sage/issues/10288",
    "user": "https://github.com/sagetrac-drkirkby"
}
```
Trying to install this experiemental package on a Sun Ultra 27 (3.33 GHz Intel Xeon) running OpenSolaris 06/2009, it fails as it can't reconise the system. 

I've not tried it, but I would also expect it to fail on a Solaris 10 machine with an x86 processor such as 'fulvia' on Skynet. 

I've not tried a 64-bit build (i.e. with `SAGE64=yes`). 

```
g++ -O2 -ansi -pedantic -Wall -I../include  -o ../obj/capd-homengin/engines.o -c \
        ../src/capd-homengin/engines.cpp
In file included from ../include/capd/auxil/clock.h:18:0,
                 from ../include/capd/auxil/Stopwatch.h:19,
                 from ../include/capd/homologicalAlgebra/homAlgFunctors.hpp:27,
                 from ../include/capd/homologicalAlgebra/cubSetFunctors.hpp:22,
                 from ../include/capd/multiEngHom/MultiEngHomT.h:30,
                 from ../src/capd-homengin/engines.cpp:35:
../include/capd/capd/operatingSystemSetting.h:73:2: error: #error Your system cannot be determined automatically by the KRAK package.Please edit the configuration file appropriately.
In file included from ../include/capd/auxil/Stopwatch.h:19:0,
                 from ../include/capd/homologicalAlgebra/homAlgFunctors.hpp:27,
                 from ../include/capd/homologicalAlgebra/cubSetFunctors.hpp:22,
                 from ../include/capd/multiEngHom/MultiEngHomT.h:30,
                 from ../src/capd-homengin/engines.cpp:35:
../include/capd/auxil/clock.h: In function 'long double getWorldSeconds()':
../include/capd/auxil/clock.h:54:32: error: aggregate 'getWorldSeconds()::_timeb timebuffer' has incomplete type and cannot be defined
In file included from ../include/capd/auxil/Stopwatch.h:19:0,
                 from ../include/capd/homologicalAlgebra/homAlgFunctors.hpp:27,
                 from ../include/capd/homologicalAlgebra/cubSetFunctors.hpp:22,
                 from ../include/capd/multiEngHom/MultiEngHomT.h:30,
                 from ../src/capd-homengin/engines.cpp:35:
../include/capd/auxil/clock.h:55:31: error: '_ftime' was not declared in this scope
../include/capd/auxil/clock.h:57:5: warning: control reaches end of non-void function
make[2]: *** [../obj/capd-homengin/engines.o] Error 1
make[2]: Leaving directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p1/src/make'
:
```

There is an spkg available at

[http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg)

(Note that this is an "experimental" spkg: don't merge it into Sage.  Please merge the scripts patch, trac_10288-scripts-hgignore.patch, though.)

CC:  @jhpalmieri @sagetrac-mhampton @kiwifb

Component: **porting: Solaris**

Author: **John Palmieri**

Reviewer: **David Kirkby**

Merged: **sage-4.6.1.alpha3**

_Issue created by migration from https://trac.sagemath.org/ticket/10288_





---

archive/issue_events_133805.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-18T09:15:57Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "milestone_number": null,
    "milestone_title": "sage-4.6.1",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133805"
}
```



---

archive/issue_events_133806.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-18T09:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20porting%3A%20solaris",
    "label_color": "0000b0",
    "label_name": "c: porting: solaris",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133806"
}
```



---

archive/issue_events_133807.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-18T09:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/p%3A%20major%20/%203",
    "label_color": "ffbb00",
    "label_name": "p: major / 3",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133807"
}
```



---

archive/issue_events_133808.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-18T09:15:57Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/bug",
    "label_color": "d73a4a",
    "label_name": "bug",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133808"
}
```



---

archive/issue_events_133809.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-18T09:15:57Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "subject": "https://github.com/sagetrac-drkirkby",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133809"
}
```



---

archive/issue_events_133810.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-11-19T01:20:23Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133810"
}
```



---

archive/issue_comments_096004.json:
```json
{
    "body": "<div id=\"comment:2\" align=\"right\">comment:2</div>\n\nI have a new spkg available at [http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg).  It builds on hawk, and since the only changes are SunOS-specific, it should still wherever it built before, but I haven't tested it yet.  I'll try to test on various skynet machines soon.  I'm also attaching a patch showing the changes; this is for reference only, don't apply it anywhere.",
    "created_at": "2010-11-19T01:20:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96004",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:2" align="right">comment:2</div>

I have a new spkg available at [http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg).  It builds on hawk, and since the only changes are SunOS-specific, it should still wherever it built before, but I haven't tested it yet.  I'll try to test on various skynet machines soon.  I'm also attaching a patch showing the changes; this is for reference only, don't apply it anywhere.



---

archive/issue_events_133811.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-19T04:18:13Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133811"
}
```



---

archive/issue_events_133812.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-19T04:18:13Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133812"
}
```



---

archive/issue_comments_096005.json:
```json
{
    "body": "<div id=\"comment:3\" align=\"right\">comment:3</div>\n\nJohh, \n\nyour patch clearly works for a 32-bit build on OpenSolaris, though I'm not sure its the best solution to the problem. I think it would be better to make the automatic operating-system detection work, which means the problem can be reported upstream, and get fixed. \n\nThat's easily done by checking if `sun` is defined, rather than checking if `__sparc__` is defined. \n\n```\n--- ./src/include/capd/capd/operatingSystemSetting.h    Wed Jul  2 12:50:10 2008\n+++ ./patches/operatingSystemSetting.h  Fri Nov 19 02:24:23 2010\n@@ -59,8 +59,8 @@\n #    error The Interval library does not work on the Linux/Sparc combination.\n #  endif\n \n-// Is the target processor a Sparc one? If so, assume the system is Sun OS.\n-#elif defined (__sparc__)\n+// If 'sun' is defined, which it is by both Sun Studio and gcc, then assume Solaris. \n+#elif defined (sun)\n #  define SUN_OS\n #endif\n```\n\nThis can then remove the Solaris operating system specific patch in spkg-install. \n\nAnother problem is that there's no code to handle 64-bit on any Solaris platform, or probably on OS X too, as the variable SAGE64 is never used. I tried fixing that by exporting CXXFLAGS, with the following code:\n\n```\nif [ \"x$CXXFLAG64\" = x ] ; then\n   CXXFLAG64=-m64\nfi\n\nif [ \"x$SAGE64\" = xyes ] ; then\n   CXX=\"$CXXFLAGS CXXFLAG64\"\n   export CXXFLAGS\nfi\n```\n\nUnfortunately, the compiler g++ is hard-coded in most of the Makefiles and CXXFLAGS is ignored. Although I've not checked it, I think editing src/make/config/sun from its previous version: \n\n```\nCXX = g++\nCOMPILE = $(CXX) -O2 -ansi -pedantic -Wall\nLINK    = $(CXX) -s\nLINKGUI = $(CXX) -s\n```\n\nwith\n\n```\nCOMPILE = $(CXX) $(CXXFLAGS) -O2 -ansi -pedantic -Wall\nLINK    = $(CXX) $(CXXFLAGS) -s\nLINKGUI = $(CXX) $(CXXFLAGS) -s\n```\n\nThen it should use the -m64 option when building all objects if `SAGE64=yes`\n\nReading the web site, it would appear on Macs one needs to use:\n\n```\ncase `uname` in \n    \"Darwin\")\n        target='mac';;\n```\n\nI can't find any reference to 'mac' in any makefile, or anywhere else for that matter. (I used the -R option to GNU grep). It seems to me setting 'target=mac' is doing absolutely nothing. \n\nI've late here and I need some sleep, but there were a few things I found that were wrong. \nDave",
    "created_at": "2010-11-19T04:18:13Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96005",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:3" align="right">comment:3</div>

Johh, 

your patch clearly works for a 32-bit build on OpenSolaris, though I'm not sure its the best solution to the problem. I think it would be better to make the automatic operating-system detection work, which means the problem can be reported upstream, and get fixed. 

That's easily done by checking if `sun` is defined, rather than checking if `__sparc__` is defined. 

```
--- ./src/include/capd/capd/operatingSystemSetting.h    Wed Jul  2 12:50:10 2008
+++ ./patches/operatingSystemSetting.h  Fri Nov 19 02:24:23 2010
@@ -59,8 +59,8 @@
 #    error The Interval library does not work on the Linux/Sparc combination.
 #  endif
 
-// Is the target processor a Sparc one? If so, assume the system is Sun OS.
-#elif defined (__sparc__)
+// If 'sun' is defined, which it is by both Sun Studio and gcc, then assume Solaris. 
+#elif defined (sun)
 #  define SUN_OS
 #endif
```

This can then remove the Solaris operating system specific patch in spkg-install. 

Another problem is that there's no code to handle 64-bit on any Solaris platform, or probably on OS X too, as the variable SAGE64 is never used. I tried fixing that by exporting CXXFLAGS, with the following code:

```
if [ "x$CXXFLAG64" = x ] ; then
   CXXFLAG64=-m64
fi

if [ "x$SAGE64" = xyes ] ; then
   CXX="$CXXFLAGS CXXFLAG64"
   export CXXFLAGS
fi
```

Unfortunately, the compiler g++ is hard-coded in most of the Makefiles and CXXFLAGS is ignored. Although I've not checked it, I think editing src/make/config/sun from its previous version: 

```
CXX = g++
COMPILE = $(CXX) -O2 -ansi -pedantic -Wall
LINK    = $(CXX) -s
LINKGUI = $(CXX) -s
```

with

```
COMPILE = $(CXX) $(CXXFLAGS) -O2 -ansi -pedantic -Wall
LINK    = $(CXX) $(CXXFLAGS) -s
LINKGUI = $(CXX) $(CXXFLAGS) -s
```

Then it should use the -m64 option when building all objects if `SAGE64=yes`

Reading the web site, it would appear on Macs one needs to use:

```
case `uname` in 
    "Darwin")
        target='mac';;
```

I can't find any reference to 'mac' in any makefile, or anywhere else for that matter. (I used the -R option to GNU grep). It seems to me setting 'target=mac' is doing absolutely nothing. 

I've late here and I need some sleep, but there were a few things I found that were wrong. 
Dave



---

archive/issue_comments_096006.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A3):\n\n> Reading the web site, it would appear on Macs one needs to use:\n> \n\n```\ncase `uname` in \n    \"Darwin\")\n        target='mac';;\n```\n\nRight, this is what is (and has been) in spkg-install.\n \n> I can't find any reference to 'mac' in any makefile, or anywhere else for that matter. (I used the -R option to GNU grep). It seems to me setting 'target=mac' is doing absolutely nothing. \n\nI think it uses the file src/make/config/mac for configuration.  Maybe the string \"mac\" isn't in any file, but there is a file called \"mac\", which your grep may not have found.\n\nI'll look at your other comments later.",
    "created_at": "2010-11-19T06:08:39Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96006",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:4" align="right">comment:4</div>

Replying to [@sagetrac-drkirkby](#comment%3A3):

> Reading the web site, it would appear on Macs one needs to use:
> 

```
case `uname` in 
    "Darwin")
        target='mac';;
```

Right, this is what is (and has been) in spkg-install.
 
> I can't find any reference to 'mac' in any makefile, or anywhere else for that matter. (I used the -R option to GNU grep). It seems to me setting 'target=mac' is doing absolutely nothing. 

I think it uses the file src/make/config/mac for configuration.  Maybe the string "mac" isn't in any file, but there is a file called "mac", which your grep may not have found.

I'll look at your other comments later.



---

archive/issue_comments_096007.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nIn the gentoo ebuild cooked initially by Christopher, we pass CXX, COMPILE, LINK and LINKGUI to make. So we have a make invocation that looks like this:\n\n```\nmake -j1 CXX=${cxxcompiler) COMPILE=\"${cxxcompiler) ${CXXFLAGS}\" \\\n         LINK=\"$(cxxcompiler) ${LDFLAGS}\" LINKGUI=\"$(cxxcompiler) ${LDFLAGS}\"\n```\nOf course you need to add the target on specific platform. Finally I am not sure\nwe need LINKGUI since it is for producing a wxwidget apps and it has its own target\naccording to the compilation instructions. That is you need target=wxunx on unix like systems.",
    "created_at": "2010-11-19T08:28:34Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96007",
    "user": "https://github.com/kiwifb"
}
```

<div id="comment:5" align="right">comment:5</div>

In the gentoo ebuild cooked initially by Christopher, we pass CXX, COMPILE, LINK and LINKGUI to make. So we have a make invocation that looks like this:

```
make -j1 CXX=${cxxcompiler) COMPILE="${cxxcompiler) ${CXXFLAGS}" \
         LINK="$(cxxcompiler) ${LDFLAGS}" LINKGUI="$(cxxcompiler) ${LDFLAGS}"
```
Of course you need to add the target on specific platform. Finally I am not sure
we need LINKGUI since it is for producing a wxwidget apps and it has its own target
according to the compilation instructions. That is you need target=wxunx on unix like systems.



---

archive/issue_comments_096008.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nHi all\nThe fact there is a mac file no doubt means I was wrong, and so that is needed.\n\nI was not aware that the arguments to make would solve the problem. In which case it's even easier to fix than I thought. Thank you Francois. \n\n```\nif [ \"x$CXXFLAG64\" = x ] ; then\n   CXXFLAG64=-m64\nfi\n\nif [ \"x$SAGE64\" = xyes ] ; then\n   CXX=\"$CXXFLAGS CXXFLAG64\"\nfi\n```\n\nthen $MAKE CXX=$CXX CXXFLAGS=$CXXFLAGS etc should solve it. \n\nDo we know for sure the package can't be built in parallel, so one must set j=1, or was that just a safe choice? \n\nOne other point i forgot to make. The 'prereq' script checks that the version of make is GNU, so arguably this does not need repeating. But I guess this being optional, the hardware/software might have changed, so recheking is not a bad idea. \n\n\nHowever, despite what spkg-install says, the version number of gnu make is not checked. \n\nI think im going to be stuck to using someone elses Windows machine for the rest of the afternoon, so wil have no Unix access. \n\nDave",
    "created_at": "2010-11-19T15:10:43Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96008",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:6" align="right">comment:6</div>

Hi all
The fact there is a mac file no doubt means I was wrong, and so that is needed.

I was not aware that the arguments to make would solve the problem. In which case it's even easier to fix than I thought. Thank you Francois. 

```
if [ "x$CXXFLAG64" = x ] ; then
   CXXFLAG64=-m64
fi

if [ "x$SAGE64" = xyes ] ; then
   CXX="$CXXFLAGS CXXFLAG64"
fi
```

then $MAKE CXX=$CXX CXXFLAGS=$CXXFLAGS etc should solve it. 

Do we know for sure the package can't be built in parallel, so one must set j=1, or was that just a safe choice? 

One other point i forgot to make. The 'prereq' script checks that the version of make is GNU, so arguably this does not need repeating. But I guess this being optional, the hardware/software might have changed, so recheking is not a bad idea. 


However, despite what spkg-install says, the version number of gnu make is not checked. 

I think im going to be stuck to using someone elses Windows machine for the rest of the afternoon, so wil have no Unix access. 

Dave



---

archive/issue_comments_096009.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nOops, that bit of code needs to be:\n\n```\nif [ \"x$SAGE64\" = xyes ] ; then\n   CXXFLAGS=\"$CXXFLAGS CXXFLAG64\"\nfi\n```\n\n\nwhich will addend -m64 (or another flag if needed) to CXXFLAGS on 64-bit builds.",
    "created_at": "2010-11-19T15:13:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96009",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:7" align="right">comment:7</div>

Oops, that bit of code needs to be:

```
if [ "x$SAGE64" = xyes ] ; then
   CXXFLAGS="$CXXFLAGS CXXFLAG64"
fi
```


which will addend -m64 (or another flag if needed) to CXXFLAGS on 64-bit builds.



---

archive/issue_events_133813.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-11-19T17:07:51Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133813"
}
```



---

archive/issue_events_133814.json:
```json
{
    "actor": "https://github.com/jhpalmieri",
    "created_at": "2010-11-19T17:07:51Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133814"
}
```



---

archive/issue_comments_096010.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A6):\n\n> then $MAKE CXX=$CXX CXXFLAGS=$CXXFLAGS etc should solve it. \n\nI can't get this to work on my Mac; instead I'm using\n\n```\n$MAKE target=$target COMPILE=\"${CXX} ${CXXFLAGS}\"\n```\n\n> Do we know for sure the package can't be built in parallel, so one must set j=1, or was that just a safe choice? \n\nIt actually says not to use \"make -j...\" on one of the web pages.  I've added a citation to spkg-install and to SPKG.txt.\n\n> One other point i forgot to make. The 'prereq' script checks that the version of make is GNU, so arguably this does not need repeating. But I guess this being optional, the hardware/software might have changed, so recheking is not a bad idea. \n\nOkay.\n\n> However, despite what spkg-install says, the version number of gnu make is not checked. \n\nYou're right.  Version 3.77 of make was released in 1998, so I'm inclined to remove the check altogether.\n\nI've updating the spkg and the patch.  This is still pretty experimental, but I'll mark it as \"needs review\" anyway.",
    "created_at": "2010-11-19T17:07:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96010",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:8" align="right">comment:8</div>

Replying to [@sagetrac-drkirkby](#comment%3A6):

> then $MAKE CXX=$CXX CXXFLAGS=$CXXFLAGS etc should solve it. 

I can't get this to work on my Mac; instead I'm using

```
$MAKE target=$target COMPILE="${CXX} ${CXXFLAGS}"
```

> Do we know for sure the package can't be built in parallel, so one must set j=1, or was that just a safe choice? 

It actually says not to use "make -j..." on one of the web pages.  I've added a citation to spkg-install and to SPKG.txt.

> One other point i forgot to make. The 'prereq' script checks that the version of make is GNU, so arguably this does not need repeating. But I guess this being optional, the hardware/software might have changed, so recheking is not a bad idea. 

Okay.

> However, despite what spkg-install says, the version number of gnu make is not checked. 

You're right.  Version 3.77 of make was released in 1998, so I'm inclined to remove the check altogether.

I've updating the spkg and the patch.  This is still pretty experimental, but I'll mark it as "needs review" anyway.



---

archive/issue_comments_096011.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -32,3 +32,7 @@\n make[2]: Leaving directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p1/src/make'\n :\n ```\n+\n+There is an spkg available at\n+\n+[http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg)\n``````\n",
    "created_at": "2010-11-19T17:07:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96011",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -32,3 +32,7 @@
 make[2]: Leaving directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p1/src/make'
 :
 ```
+
+There is an spkg available at
+
+[http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg)
``````




---

archive/issue_comments_096012.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nI've posted an updated spkg and accompanying patch.  This may not be done as efficiently as possible, but it builds for me on OS X 10.6, OpenSolaris on x86 (hawk), and sage.math, all of which with SAGE64 unset and then again SAGE64 set.  I have yet to test it on the skynet machines.",
    "created_at": "2010-11-19T22:22:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96012",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:9" align="right">comment:9</div>

I've posted an updated spkg and accompanying patch.  This may not be done as efficiently as possible, but it builds for me on OS X 10.6, OpenSolaris on x86 (hawk), and sage.math, all of which with SAGE64 unset and then again SAGE64 set.  I have yet to test it on the skynet machines.



---

archive/issue_comments_096013.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nBy the way, if you want to install and test it, if the spkg seems to install okay, you can execute the following commands in Sage.  The first homology computation should be a lot faster than the second; I'm showing timings on my 2-year-old iMac:\n\n```\nsage: S3 = simplicial_complexes.Sphere(3)\nsage: X = S3.product(S3)\nsage: time X.homology()\nCPU times: user 0.03 s, sys: 0.02 s, total: 0.05 s\nWall time: 0.48 s\n{0: 0, 1: 0, 2: 0, 3: Z x Z, 4: 0, 5: 0, 6: Z}\nsage: time X.homology(algorithm='no_chomp')\nCPU times: user 15.71 s, sys: 0.17 s, total: 15.87 s\nWall time: 16.31 s\n{0: 0, 1: 0, 2: 0, 3: Z x Z, 4: 0, 5: 0, 6: Z}\n```",
    "created_at": "2010-11-20T00:54:29Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96013",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:10" align="right">comment:10</div>

By the way, if you want to install and test it, if the spkg seems to install okay, you can execute the following commands in Sage.  The first homology computation should be a lot faster than the second; I'm showing timings on my 2-year-old iMac:

```
sage: S3 = simplicial_complexes.Sphere(3)
sage: X = S3.product(S3)
sage: time X.homology()
CPU times: user 0.03 s, sys: 0.02 s, total: 0.05 s
Wall time: 0.48 s
{0: 0, 1: 0, 2: 0, 3: Z x Z, 4: 0, 5: 0, 6: Z}
sage: time X.homology(algorithm='no_chomp')
CPU times: user 15.71 s, sys: 0.17 s, total: 15.87 s
Wall time: 16.31 s
{0: 0, 1: 0, 2: 0, 3: Z x Z, 4: 0, 5: 0, 6: Z}
```



---

archive/issue_comments_096014.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThe new patch for the scripts repo adds the CHomP binaries \"homsimpl\", \"homchain\", and \"homcubes\" to SAGE_ROOT/local/bin/.hgignore.",
    "created_at": "2010-11-20T19:36:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96014",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:11" align="right">comment:11</div>

The new patch for the scripts repo adds the CHomP binaries "homsimpl", "homchain", and "homcubes" to SAGE_ROOT/local/bin/.hgignore.



---

archive/issue_comments_096015.json:
```json
{
    "body": "scripts repo",
    "created_at": "2010-11-20T19:37:00Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96015",
    "user": "https://github.com/jhpalmieri"
}
```

scripts repo



---

archive/issue_comments_096016.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nAttachment: **[trac_10288-scripts-hgignore.patch.gz](https://github.com/sagemath/sage/files/ticket10288/trac_10288-scripts-hgignore.patch.gz)**\n\nIs there a new .spkg to test? The one in the link given in the description lack anything to handle the SAGE64=yes case.",
    "created_at": "2010-11-21T00:34:23Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96016",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:12" align="right">comment:12</div>

Attachment: **[trac_10288-scripts-hgignore.patch.gz](https://github.com/sagemath/sage/files/ticket10288/trac_10288-scripts-hgignore.patch.gz)**

Is there a new .spkg to test? The one in the link given in the description lack anything to handle the SAGE64=yes case.



---

archive/issue_comments_096017.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nI'd also be tempted to change SPKG.txt a bit from \n\n*\"doesn't seem to expect Solaris on anything except a sparc\"*\n\nWe now now more precisely the problem - the original code assumed Solaris only if the processor was SPARC, where now it assumes Solaris is 'sun' is defined. But I don't mind making that as a review patch. But an spkg to test would be nice. \n\n\nDave",
    "created_at": "2010-11-21T00:38:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96017",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:13" align="right">comment:13</div>

I'd also be tempted to change SPKG.txt a bit from 

*"doesn't seem to expect Solaris on anything except a sparc"*

We now now more precisely the problem - the original code assumed Solaris only if the processor was SPARC, where now it assumes Solaris is 'sun' is defined. But I don't mind making that as a review patch. But an spkg to test would be nice. 


Dave



---

archive/issue_comments_096018.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nSorry about the grammar in my last comment. There are too many spelling/grammatical errors to even start to address them individually!",
    "created_at": "2010-11-21T00:39:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96018",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:14" align="right">comment:14</div>

Sorry about the grammar in my last comment. There are too many spelling/grammatical errors to even start to address them individually!



---

archive/issue_comments_096019.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nI updated the spkg when I posted the new patch, so it does deal with 64-bit issues.  (In general, if I update the patch here, I should also have updated the spkg.)  I can also make the change to SPKG.txt.",
    "created_at": "2010-11-21T00:59:42Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96019",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:15" align="right">comment:15</div>

I updated the spkg when I posted the new patch, so it does deal with 64-bit issues.  (In general, if I update the patch here, I should also have updated the spkg.)  I can also make the change to SPKG.txt.



---

archive/issue_comments_096020.json:
```json
{
    "body": "for reference only; do not apply",
    "created_at": "2010-11-21T01:10:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96020",
    "user": "https://github.com/jhpalmieri"
}
```

for reference only; do not apply



---

archive/issue_comments_096021.json:
```json
{
    "body": "<div id=\"comment:16\" align=\"right\">comment:16</div>\n\nAttachment: **[trac_10288.patch.gz](https://github.com/sagemath/sage/files/ticket10288/trac_10288.patch.gz)**\n\nOkay, I've changed SPKG.txt a little, as Dave suggested.",
    "created_at": "2010-11-21T01:10:59Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96021",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:16" align="right">comment:16</div>

Attachment: **[trac_10288.patch.gz](https://github.com/sagemath/sage/files/ticket10288/trac_10288.patch.gz)**

Okay, I've changed SPKG.txt a little, as Dave suggested.



---

archive/issue_events_133815.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-21T01:52:46Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133815"
}
```



---

archive/issue_events_133816.json:
```json
{
    "actor": "https://github.com/sagetrac-drkirkby",
    "created_at": "2010-11-21T01:52:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133816"
}
```



---

archive/issue_comments_096022.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nSorry John. \n\nThis is odd. When I try to install with 'sage -i', the variable SAGE64 was ignored, which concluded me to believe you had not updated the .spkg. \n\n```\ndrkirkby@hawk:~/sage-4.6.1.alpha2$ export SAGE64=yes\ndrkirkby@hawk:~/sage-4.6.1.alpha2$ ./sage -i http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg\nBuilding Sage on Solaris in 64-bit mode\nCreating SAGE_LOCAL/lib/sage-64.txt since it does not exist\nDetected SAGE64 flag\nBuilding Sage on Solaris in 64-bit mode\nInstalling http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg\nCalling sage-spkg on http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg\nWarning: Attempted to overwrite SAGE_ROOT environment variable\nBuilding Sage on Solaris in 64-bit mode\nCreating SAGE_LOCAL/lib/sage-64.txt since it does not exist\nDetected SAGE64 flag\nBuilding Sage on Solaris in 64-bit mode\nchomp-20100213.p2\nMachine:\nSunOS hawk 5.11 snv_134 i86pc i386 i86pc\nDeleting directories from past builds of previous/current versions of chomp-20100213.p2\nExtracting package /export/home/drkirkby/sage-4.6.1.alpha2/spkg/optional/chomp-20100213.p2.spkg ...\n-rw-r--r--   1 drkirkby staff     804047 Nov 19 01:23 /export/home/drkirkby/sage-4.6.1.alpha2/spkg/optional/chomp-20100213.p2.spkg\nFinished extraction\n****************************************************\nHost system\nuname -a:\nSunOS hawk 5.11 snv_134 i86pc i386 i86pc\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nCOLLECT_GCC=/usr/local/gcc-4.5.0/bin/gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/libexec/gcc/i386-pc-solaris2.10/4.5.0/lto-wrapper\nTarget: i386-pc-solaris2.10\nConfigured with: ../gcc-4.5.0/configure --prefix=/usr/local/gcc-4.5.0 --build=i386-pc-solaris2.10 --enable-languages=c,c++,fortran --with-gmp=/usr/local/gcc-4.5.0 --with-mpfr=/usr/local/gcc-4.5.0 --disable-nls --enable-checking=release --enable-werror=no --enable-multilib -with-system-zlib --enable-bootstrap --with-gnu-as --with-as=/usr/local/binutils-2.20/bin/as --without-gnu-ld --with-ld=/usr/ccs/bin/ld\nThread model: posix\ngcc version 4.5.0 (GCC) \n****************************************************\nmake -C make target=sun\nmake[1]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'\nmake -f makemain target=sun module=bitmaps\nmake[2]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'\ng++ -O2 -ansi -pedantic -Wall -I../include  -o ../obj/bitmaps/bitmaps.o -c \\\n\t../src/bitmaps/bitmaps.cpp\nar cru ../lib/libchompbitmaps.a ../obj/bitmaps/bitmaps.o\nranlib ../lib/libchompbitmaps.a\nmake[2]: Leaving directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'\nmake -f makemain target=sun module=capd-auxil\nmake[2]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'\ng++ -O2 -ansi -pedantic -Wall -I../include  -o ../obj/capd-auxil/memSize.o -c \\\n\t../src/capd-auxil/memSize.cpp\n```\n\n**i.e. there are not -m64's anywhere**\n\nNow having copied the spkg to /tmp\n\n\n```\ndrkirkby@hawk:~/sage-4.6.1.alpha2$ ./sage -f /tmp/chomp-20100213.p2.spkg\nBuilding Sage on Solaris in 64-bit mode\nCreating SAGE_LOCAL/lib/sage-64.txt since it does not exist\nDetected SAGE64 flag\nBuilding Sage on Solaris in 64-bit mode\nForce installing /tmp/chomp-20100213.p2.spkg\nCalling sage-spkg on /tmp/chomp-20100213.p2.spkg\nWarning: Attempted to overwrite SAGE_ROOT environment variable\nBuilding Sage on Solaris in 64-bit mode\nCreating SAGE_LOCAL/lib/sage-64.txt since it does not exist\nDetected SAGE64 flag\nBuilding Sage on Solaris in 64-bit mode\nchomp-20100213.p2\nMachine:\nSunOS hawk 5.11 snv_134 i86pc i386 i86pc\nDeleting directories from past builds of previous/current versions of chomp-20100213.p2\nExtracting package /tmp/chomp-20100213.p2.spkg ...\n-rw-r--r--   1 drkirkby staff     803975 Nov 21 01:08 /tmp/chomp-20100213.p2.spkg\nFinished extraction\n****************************************************\nHost system\nuname -a:\nSunOS hawk 5.11 snv_134 i86pc i386 i86pc\n****************************************************\n****************************************************\nCC Version\ngcc -v\nUsing built-in specs.\nCOLLECT_GCC=/usr/local/gcc-4.5.0/bin/gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/libexec/gcc/i386-pc-solaris2.10/4.5.0/lto-wrapper\nTarget: i386-pc-solaris2.10\nConfigured with: ../gcc-4.5.0/configure --prefix=/usr/local/gcc-4.5.0 --build=i386-pc-solaris2.10 --enable-languages=c,c++,fortran --with-gmp=/usr/local/gcc-4.5.0 --with-mpfr=/usr/local/gcc-4.5.0 --disable-nls --enable-checking=release --enable-werror=no --enable-multilib -with-system-zlib --enable-bootstrap --with-gnu-as --with-as=/usr/local/binutils-2.20/bin/as --without-gnu-ld --with-ld=/usr/ccs/bin/ld\nThread model: posix\ngcc version 4.5.0 (GCC) \n****************************************************\nmake -C make target=sun\nmake[1]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'\nmake -f makemain target=sun module=bitmaps\nmake[2]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'\ng++  -m64 -O2 -pedantic -Wall -I../include  -o ../obj/bitmaps/bitmaps.o -c \\\n\t../src/bitmaps/bitmaps.cpp\nar cru ../lib/libchompbitmaps.a ../obj/bitmaps/bitmaps.o\nranlib ../lib/libchompbitmaps.a\nmake[2]: Leaving directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'\nmake -f makemain target=sun module=capd-auxil\nmake[2]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'\ng++  -m64 -O2 -pedantic -Wall -I../include  -o ../obj/capd-auxil/memSize.o -c \\\n\t../src/capd-auxil/memSize.cpp\ng++  -m64 -O2 -pedantic -Wall -I../include  -o ../obj/capd-auxil/ofstreamcout.o -c \\\n\t../src/capd-auxil/ofstreamcout.cpp\n\n```\n\nVery odd. But positive review. \n\nThank you for fixing this.",
    "created_at": "2010-11-21T01:52:46Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96022",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:17" align="right">comment:17</div>

Sorry John. 

This is odd. When I try to install with 'sage -i', the variable SAGE64 was ignored, which concluded me to believe you had not updated the .spkg. 

```
drkirkby@hawk:~/sage-4.6.1.alpha2$ export SAGE64=yes
drkirkby@hawk:~/sage-4.6.1.alpha2$ ./sage -i http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg
Building Sage on Solaris in 64-bit mode
Creating SAGE_LOCAL/lib/sage-64.txt since it does not exist
Detected SAGE64 flag
Building Sage on Solaris in 64-bit mode
Installing http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg
Calling sage-spkg on http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg
Warning: Attempted to overwrite SAGE_ROOT environment variable
Building Sage on Solaris in 64-bit mode
Creating SAGE_LOCAL/lib/sage-64.txt since it does not exist
Detected SAGE64 flag
Building Sage on Solaris in 64-bit mode
chomp-20100213.p2
Machine:
SunOS hawk 5.11 snv_134 i86pc i386 i86pc
Deleting directories from past builds of previous/current versions of chomp-20100213.p2
Extracting package /export/home/drkirkby/sage-4.6.1.alpha2/spkg/optional/chomp-20100213.p2.spkg ...
-rw-r--r--   1 drkirkby staff     804047 Nov 19 01:23 /export/home/drkirkby/sage-4.6.1.alpha2/spkg/optional/chomp-20100213.p2.spkg
Finished extraction
****************************************************
Host system
uname -a:
SunOS hawk 5.11 snv_134 i86pc i386 i86pc
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
COLLECT_GCC=/usr/local/gcc-4.5.0/bin/gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/libexec/gcc/i386-pc-solaris2.10/4.5.0/lto-wrapper
Target: i386-pc-solaris2.10
Configured with: ../gcc-4.5.0/configure --prefix=/usr/local/gcc-4.5.0 --build=i386-pc-solaris2.10 --enable-languages=c,c++,fortran --with-gmp=/usr/local/gcc-4.5.0 --with-mpfr=/usr/local/gcc-4.5.0 --disable-nls --enable-checking=release --enable-werror=no --enable-multilib -with-system-zlib --enable-bootstrap --with-gnu-as --with-as=/usr/local/binutils-2.20/bin/as --without-gnu-ld --with-ld=/usr/ccs/bin/ld
Thread model: posix
gcc version 4.5.0 (GCC) 
****************************************************
make -C make target=sun
make[1]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'
make -f makemain target=sun module=bitmaps
make[2]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'
g++ -O2 -ansi -pedantic -Wall -I../include  -o ../obj/bitmaps/bitmaps.o -c \
	../src/bitmaps/bitmaps.cpp
ar cru ../lib/libchompbitmaps.a ../obj/bitmaps/bitmaps.o
ranlib ../lib/libchompbitmaps.a
make[2]: Leaving directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'
make -f makemain target=sun module=capd-auxil
make[2]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'
g++ -O2 -ansi -pedantic -Wall -I../include  -o ../obj/capd-auxil/memSize.o -c \
	../src/capd-auxil/memSize.cpp
```

**i.e. there are not -m64's anywhere**

Now having copied the spkg to /tmp


```
drkirkby@hawk:~/sage-4.6.1.alpha2$ ./sage -f /tmp/chomp-20100213.p2.spkg
Building Sage on Solaris in 64-bit mode
Creating SAGE_LOCAL/lib/sage-64.txt since it does not exist
Detected SAGE64 flag
Building Sage on Solaris in 64-bit mode
Force installing /tmp/chomp-20100213.p2.spkg
Calling sage-spkg on /tmp/chomp-20100213.p2.spkg
Warning: Attempted to overwrite SAGE_ROOT environment variable
Building Sage on Solaris in 64-bit mode
Creating SAGE_LOCAL/lib/sage-64.txt since it does not exist
Detected SAGE64 flag
Building Sage on Solaris in 64-bit mode
chomp-20100213.p2
Machine:
SunOS hawk 5.11 snv_134 i86pc i386 i86pc
Deleting directories from past builds of previous/current versions of chomp-20100213.p2
Extracting package /tmp/chomp-20100213.p2.spkg ...
-rw-r--r--   1 drkirkby staff     803975 Nov 21 01:08 /tmp/chomp-20100213.p2.spkg
Finished extraction
****************************************************
Host system
uname -a:
SunOS hawk 5.11 snv_134 i86pc i386 i86pc
****************************************************
****************************************************
CC Version
gcc -v
Using built-in specs.
COLLECT_GCC=/usr/local/gcc-4.5.0/bin/gcc
COLLECT_LTO_WRAPPER=/usr/local/gcc-4.5.0/libexec/gcc/i386-pc-solaris2.10/4.5.0/lto-wrapper
Target: i386-pc-solaris2.10
Configured with: ../gcc-4.5.0/configure --prefix=/usr/local/gcc-4.5.0 --build=i386-pc-solaris2.10 --enable-languages=c,c++,fortran --with-gmp=/usr/local/gcc-4.5.0 --with-mpfr=/usr/local/gcc-4.5.0 --disable-nls --enable-checking=release --enable-werror=no --enable-multilib -with-system-zlib --enable-bootstrap --with-gnu-as --with-as=/usr/local/binutils-2.20/bin/as --without-gnu-ld --with-ld=/usr/ccs/bin/ld
Thread model: posix
gcc version 4.5.0 (GCC) 
****************************************************
make -C make target=sun
make[1]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'
make -f makemain target=sun module=bitmaps
make[2]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'
g++  -m64 -O2 -pedantic -Wall -I../include  -o ../obj/bitmaps/bitmaps.o -c \
	../src/bitmaps/bitmaps.cpp
ar cru ../lib/libchompbitmaps.a ../obj/bitmaps/bitmaps.o
ranlib ../lib/libchompbitmaps.a
make[2]: Leaving directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'
make -f makemain target=sun module=capd-auxil
make[2]: Entering directory `/export/home/drkirkby/sage-4.6.1.alpha2/spkg/build/chomp-20100213.p2/src/make'
g++  -m64 -O2 -pedantic -Wall -I../include  -o ../obj/capd-auxil/memSize.o -c \
	../src/capd-auxil/memSize.cpp
g++  -m64 -O2 -pedantic -Wall -I../include  -o ../obj/capd-auxil/ofstreamcout.o -c \
	../src/capd-auxil/ofstreamcout.cpp

```

Very odd. But positive review. 

Thank you for fixing this.



---

archive/issue_comments_096023.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nReplying to [@sagetrac-drkirkby](#comment%3A17):\n> Sorry John. \n> \n> This is odd. When I try to install with 'sage -i', the variable SAGE64 was ignored, which concluded me to believe you had not updated the .spkg. \n\nI *think* that when you run \"sage -i\", if you give it a URL, it sees if it has saved a copy somewhere local, and if so, it uses that instead of downloading it again.  If you give it a path, it uses the file.  If I'm right, that would explain it.",
    "created_at": "2010-11-21T02:37:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96023",
    "user": "https://github.com/jhpalmieri"
}
```

<div id="comment:18" align="right">comment:18</div>

Replying to [@sagetrac-drkirkby](#comment%3A17):
> Sorry John. 
> 
> This is odd. When I try to install with 'sage -i', the variable SAGE64 was ignored, which concluded me to believe you had not updated the .spkg. 

I *think* that when you run "sage -i", if you give it a URL, it sees if it has saved a copy somewhere local, and if so, it uses that instead of downloading it again.  If you give it a path, it uses the file.  If I'm right, that would explain it.



---

archive/issue_comments_096024.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -36,3 +36,5 @@\n There is an spkg available at\n \n [http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg)\n+\n+(Note that this is an \"experimental\" spkg: don't merge it into Sage.  Please merge the scripts patch, trac_10288-scripts-hgignore.patch, though.)\n``````\n",
    "created_at": "2010-11-21T02:39:01Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96024",
    "user": "https://github.com/jhpalmieri"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -36,3 +36,5 @@
 There is an spkg available at
 
 [http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg](http://sage.math.washington.edu/home/palmieri/SPKG/chomp-20100213.p2.spkg)
+
+(Note that this is an "experimental" spkg: don't merge it into Sage.  Please merge the scripts patch, trac_10288-scripts-hgignore.patch, though.)
``````




---

archive/issue_comments_096025.json:
```json
{
    "body": "<div id=\"comment:20\" align=\"right\">comment:20</div>\n\nReplying to [@jhpalmieri](#comment%3A18):\n> Replying to [@sagetrac-drkirkby](#comment%3A17):\n> > Sorry John. \n> > \n> > This is odd. When I try to install with 'sage -i', the variable SAGE64 was ignored, which concluded me to believe you had not updated the .spkg. \n\n> \n> I *think* that when you run \"sage -i\", if you give it a URL, it sees if it has saved a copy somewhere local, and if so, it uses that instead of downloading it again.  If you give it a path, it uses the file.  If I'm right, that would explain it.\n\nThanks John, you are right. \n\nAlthough this experiemental package is not going to be merged into Sage, someone needs to take care that the version on the Sage web site is updated. I don't know if that's something the release manager can do, or if someone else has to do it. \n\nDave",
    "created_at": "2010-11-21T08:50:07Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96025",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:20" align="right">comment:20</div>

Replying to [@jhpalmieri](#comment%3A18):
> Replying to [@sagetrac-drkirkby](#comment%3A17):
> > Sorry John. 
> > 
> > This is odd. When I try to install with 'sage -i', the variable SAGE64 was ignored, which concluded me to believe you had not updated the .spkg. 

> 
> I *think* that when you run "sage -i", if you give it a URL, it sees if it has saved a copy somewhere local, and if so, it uses that instead of downloading it again.  If you give it a path, it uses the file.  If I'm right, that would explain it.

Thanks John, you are right. 

Although this experiemental package is not going to be merged into Sage, someone needs to take care that the version on the Sage web site is updated. I don't know if that's something the release manager can do, or if someone else has to do it. 

Dave



---

archive/issue_comments_096026.json:
```json
{
    "body": "Author: **John Palmieri**",
    "created_at": "2010-11-21T08:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96026",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Author: **John Palmieri**



---

archive/issue_comments_096027.json:
```json
{
    "body": "Reviewer: **David Kirkby**",
    "created_at": "2010-11-21T08:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96027",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

Reviewer: **David Kirkby**



---

archive/issue_comments_096028.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nAlthough experimental packages don't need a review, I filled in the author and reviewer fields, since this has undergone a review. \n\nDave",
    "created_at": "2010-11-21T08:53:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96028",
    "user": "https://github.com/sagetrac-drkirkby"
}
```

<div id="comment:21" align="right">comment:21</div>

Although experimental packages don't need a review, I filled in the author and reviewer fields, since this has undergone a review. 

Dave



---

archive/issue_comments_096029.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\n.hgignore patch will be merged",
    "created_at": "2010-12-02T16:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96029",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

.hgignore patch will be merged



---

archive/issue_events_133817.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-02T16:08:17Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133817"
}
```



---

archive/issue_events_133818.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2010-12-02T16:08:17Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10288#event-133818"
}
```



---

archive/issue_comments_096030.json:
```json
{
    "body": "Merged: **sage-4.6.1.alpha3**",
    "created_at": "2010-12-02T16:08:17Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10288",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10288#issuecomment-96030",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.6.1.alpha3**
