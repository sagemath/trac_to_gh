# Issue 10618: Include David Perkinson's sandpile module in the sage library

archive/issues_010565.json:
```json
{
    "assignees": [
        "https://github.com/jasongrout",
        "https://github.com/nathanncohen",
        "https://github.com/rlmill"
    ],
    "body": "Since David Perkinson's sandpile module (for studying the Abelian Sandpile Model; see for example: [http://en.wikipedia.org/wiki/Bak-Tang-Wiesenfeld_sandpile](http://en.wikipedia.org/wiki/Bak-Tang-Wiesenfeld_sandpile) or [http://people.reed.edu/~davidp/sand/](http://people.reed.edu/~davidp/sand/)) is already written as a properly formatted Sage module it makes sense to include it in the Sage library.\n\nThis module involves a variety of mathematics so it is added in its own module.\n\nSome parts of the module require 4ti2, currently an experimental package (but there is no reason it can't be at least an optional package), but this can be explained in the relevant docstrings.  Currently the 4ti2 package at:\n[http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg](http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg)\nis best to use.\n\nIn case any mathematical justification is needed, this model is of considerable and rising interest.  For example, at the joint math meetings in 2011 there was a talk by Yuval Peres of Microsoft Research surveying it: [http://www.ams.org/amsmtgs/2125_abstracts/1067-a0-38.pdf](http://www.ams.org/amsmtgs/2125_abstracts/1067-a0-38.pdf).\n\nOnly apply:\ntrac_10618_sandpiles.3.patch\n\nCC:  @sagetrac-dperkinson @wdjoyner @dandrake\n\nKeywords: **abelian sandpile model**\n\nComponent: **graph theory**\n\nAuthor: **David Perkinson, Marshall Hampton**\n\nReviewer: **David Joyner**\n\nMerged: **sage-4.7.alpha2**\n\n_Issue created by migration from https://trac.sagemath.org/ticket/10618_\n\n",
    "closed_at": "2011-03-21T09:42:48Z",
    "created_at": "2011-01-13T04:35:42Z",
    "labels": [
        "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
        "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
        "https://github.com/sagemath/sage/labels/enhancement"
    ],
    "milestone": "https://github.com/sagemath/sage/milestones/sage-4.7",
    "reactions": [],
    "repository": "https://github.com/sagemath/sage",
    "title": "Include David Perkinson's sandpile module in the sage library",
    "type": "issue",
    "updated_at": "2011-04-18T16:45:22Z",
    "url": "https://github.com/sagemath/sage/issues/10618",
    "user": "https://github.com/sagetrac-mhampton"
}
```
Since David Perkinson's sandpile module (for studying the Abelian Sandpile Model; see for example: [http://en.wikipedia.org/wiki/Bak-Tang-Wiesenfeld_sandpile](http://en.wikipedia.org/wiki/Bak-Tang-Wiesenfeld_sandpile) or [http://people.reed.edu/~davidp/sand/](http://people.reed.edu/~davidp/sand/)) is already written as a properly formatted Sage module it makes sense to include it in the Sage library.

This module involves a variety of mathematics so it is added in its own module.

Some parts of the module require 4ti2, currently an experimental package (but there is no reason it can't be at least an optional package), but this can be explained in the relevant docstrings.  Currently the 4ti2 package at:
[http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg](http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg)
is best to use.

In case any mathematical justification is needed, this model is of considerable and rising interest.  For example, at the joint math meetings in 2011 there was a talk by Yuval Peres of Microsoft Research surveying it: [http://www.ams.org/amsmtgs/2125_abstracts/1067-a0-38.pdf](http://www.ams.org/amsmtgs/2125_abstracts/1067-a0-38.pdf).

Only apply:
trac_10618_sandpiles.3.patch

CC:  @sagetrac-dperkinson @wdjoyner @dandrake

Keywords: **abelian sandpile model**

Component: **graph theory**

Author: **David Perkinson, Marshall Hampton**

Reviewer: **David Joyner**

Merged: **sage-4.7.alpha2**

_Issue created by migration from https://trac.sagemath.org/ticket/10618_





---

archive/issue_events_139970.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:35:42Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139970"
}
```



---

archive/issue_events_139971.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:35:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/c%3A%20graph%20theory",
    "label_color": "0000ff",
    "label_name": "c: graph theory",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139971"
}
```



---

archive/issue_events_139972.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:35:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/p%3A%203%20%E2%80%93%20major",
    "label_color": "ffbb00",
    "label_name": "p: 3 \u2013 major",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139972"
}
```



---

archive/issue_events_139973.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:35:42Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/enhancement",
    "label_color": "696969",
    "label_name": "enhancement",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139973"
}
```



---

archive/issue_events_139974.json:
```json
{
    "actor": "https://github.com/jasongrout",
    "created_at": "2011-01-13T04:35:42Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139974"
}
```



---

archive/issue_events_139975.json:
```json
{
    "actor": "https://github.com/nathanncohen",
    "created_at": "2011-01-13T04:35:42Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139975"
}
```



---

archive/issue_events_139976.json:
```json
{
    "actor": "https://github.com/rlmill",
    "created_at": "2011-01-13T04:35:42Z",
    "event": "assigned",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "subject": "https://github.com/sagetrac-mhampton",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139976"
}
```



---

archive/issue_comments_101445.json:
```json
{
    "body": "Attachment: **[sandpile-2.3.patch.gz](https://github.com/sagemath/sage/files/ticket10618/sandpile-2.3.patch.gz)**\n\nadds module to graphs folder and the all.py in graphs",
    "created_at": "2011-01-13T04:36:19Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101445",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Attachment: **[sandpile-2.3.patch.gz](https://github.com/sagemath/sage/files/ticket10618/sandpile-2.3.patch.gz)**

adds module to graphs folder and the all.py in graphs



---

archive/issue_events_139977.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-13T04:36:46Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139977"
}
```



---

archive/issue_events_139978.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-01-14T19:56:52Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139978"
}
```



---

archive/issue_events_139979.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-01-14T19:56:52Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139979"
}
```



---

archive/issue_comments_101446.json:
```json
{
    "body": "<div id=\"comment:4\" align=\"right\">comment:4</div>\n\nThis applies fine to a clone of sage-4.6.1.rc1. However, it fails a ton of doctests. These might pass if the (optional/experimanetal) spkgs were installed. The point is, it should pass if nothing is installed. However, there were also these:\n\n```\n\n    sage: D.__dict__\nExpected:\n    {'_sandpile': Digraph on 3 vertices, '_effective_div': [{0: 2, 1: 0, 2: 0}, {0: 0, 1: 1, 2: 1}], '_linear_system': {'inhomog': [[1, 0, 0], [0, -1, -1], [0, 0, 0]], 'num_inhomog': 3, 'num_homog': 2, 'homog': [[-1, -1, -1], [1, 1, 1]]}, '_vertices': [0, 1, 2]}\nGot:\n    {'_sandpile': Digraph on 3 vertices, '_vertices': [0, 1, 2]}\n```\nand\n\n```\n\n    sage: D._set_linear_system()\nExpected nothing\nGot:\n    <BLANKLINE>\n                     **********************************\n                     *** This method requires 4ti2. ***\n                     **********************************\n    <BLANKLINE>\n                Read the beginning of sandpile.sage or see the Sage Sandpiles\n                documentation for installation instructions.\n    <BLANKLINE>\n}}\nfor example.\n\nThis occurred on both an ubuntu machine and a 10.6.6 mac.",
    "created_at": "2011-01-14T19:56:52Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101446",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:4" align="right">comment:4</div>

This applies fine to a clone of sage-4.6.1.rc1. However, it fails a ton of doctests. These might pass if the (optional/experimanetal) spkgs were installed. The point is, it should pass if nothing is installed. However, there were also these:

```

    sage: D.__dict__
Expected:
    {'_sandpile': Digraph on 3 vertices, '_effective_div': [{0: 2, 1: 0, 2: 0}, {0: 0, 1: 1, 2: 1}], '_linear_system': {'inhomog': [[1, 0, 0], [0, -1, -1], [0, 0, 0]], 'num_inhomog': 3, 'num_homog': 2, 'homog': [[-1, -1, -1], [1, 1, 1]]}, '_vertices': [0, 1, 2]}
Got:
    {'_sandpile': Digraph on 3 vertices, '_vertices': [0, 1, 2]}
```
and

```

    sage: D._set_linear_system()
Expected nothing
Got:
    <BLANKLINE>
                     **********************************
                     *** This method requires 4ti2. ***
                     **********************************
    <BLANKLINE>
                Read the beginning of sandpile.sage or see the Sage Sandpiles
                documentation for installation instructions.
    <BLANKLINE>
}}
for example.

This occurred on both an ubuntu machine and a 10.6.6 mac.



---

archive/issue_comments_101447.json:
```json
{
    "body": "<div id=\"comment:5\" align=\"right\">comment:5</div>\n\nThanks for taking a look.  I'll try to fix this up.  I think the 4ti2 functions can be flagged \"optional\".",
    "created_at": "2011-01-15T18:40:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101447",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:5" align="right">comment:5</div>

Thanks for taking a look.  I'll try to fix this up.  I think the 4ti2 functions can be flagged "optional".



---

archive/issue_comments_101448.json:
```json
{
    "body": "<div id=\"comment:6\" align=\"right\">comment:6</div>\n\nOK, all tests pass for me now and the coverage is 100%.\n\nThe only problem that I see now is how to deal with namespace issues.  I think classes like \"Divisor\" have too general a name to get imported into Sage at the top level, which is what this patch currently does.  I see three alternatives at least:\n\n1) Rename functions and classes to be clearly sandpile specific.  E.g., rename the Divisor class to something like SandpileDivisor.  \n\n2) Don't import this module into the namespace at all, so users would have to do: \n\n```\nsage: from sage.sandpiles import * \n```\nthemselves.\n\n3) Import the module in its own namespace, so for instance you would have to do:\n\n```\nsage: S = sandpiles.complete_sandpile(4)\n```\n\nI would rank these as 1 > 2 > 3, but this is an important decision since it will be a pain to change later.",
    "created_at": "2011-01-16T10:51:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101448",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:6" align="right">comment:6</div>

OK, all tests pass for me now and the coverage is 100%.

The only problem that I see now is how to deal with namespace issues.  I think classes like "Divisor" have too general a name to get imported into Sage at the top level, which is what this patch currently does.  I see three alternatives at least:

1) Rename functions and classes to be clearly sandpile specific.  E.g., rename the Divisor class to something like SandpileDivisor.  

2) Don't import this module into the namespace at all, so users would have to do: 

```
sage: from sage.sandpiles import * 
```
themselves.

3) Import the module in its own namespace, so for instance you would have to do:

```
sage: S = sandpiles.complete_sandpile(4)
```

I would rank these as 1 > 2 > 3, but this is an important decision since it will be a pain to change later.



---

archive/issue_comments_101449.json:
```json
{
    "body": "<div id=\"comment:7\" align=\"right\">comment:7</div>\n\nReplying to [@sagetrac-mhampton](#comment:6):\n> OK, all tests pass for me now and the coverage is 100%.\n> \n\n\nNot for me:\n\n```\nsage -t -force_lib \"devel/sage/sage/sandpiles/sandpile.py\"  \n**********************************************************************\nFile \"/Users/wdj/sagefiles/sage-4.6.1.rc1/devel/sage/sage/sandpiles/sandpile.py\", line 5173:\n    sage: for p in P:\n       sum([partition_sandpile(S, i).betti(verbose=False)[-Integer(1)] for i in p])\nException raised:\n    Traceback (most recent call last):\n      File \"/Users/wdj/sagefiles/sage-4.6.1.rc1/local/bin/ncadoctest.py\", line 1231, in run_one_test\n        self.run_one_example(test, example, filename, compileflags)\n      File \"/Users/wdj/sagefiles/sage-4.6.1.rc1/local/bin/sagedoctest.py\", line 38, in run_one_example\n        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)\n      File \"/Users/wdj/sagefiles/sage-4.6.1.rc1/local/bin/ncadoctest.py\", line 1172, in run_one_example\n        compileflags, 1) in test.globs\n      File \"<doctest __main__.example_160[3]>\", line 1, in <module>\n        for p in P:###line 5173:\n    sage: for p in P:\n    NameError: name 'P' is not defined\n**********************************************************************\n1 items had failures:\n   1 of   5 in __main__.example_160\n***Test Failed*** 1 failures.\n```\nThis sort of failure occurs on both a 10.6.6 imac and an ubuntu machine.\n\n\n> The only problem that I see now is how to deal with namespace issues.  \n> I think classes like \"Divisor\" have too general a name to get imported into \n> Sage at the top level, which is what this patch currently does.  \n> I see three alternatives at least:\n> \n> 1) Rename functions and classes to be clearly sandpile specific.  \n> E.g., rename the Divisor class to something like SandpileDivisor.  \n> \n\n\nI agree. I actually suggested this when David P was asking for suggestions\nyears ago in reply to his post asking for comments on a first version.",
    "created_at": "2011-01-16T17:10:10Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101449",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:7" align="right">comment:7</div>

Replying to [@sagetrac-mhampton](#comment:6):
> OK, all tests pass for me now and the coverage is 100%.
> 


Not for me:

```
sage -t -force_lib "devel/sage/sage/sandpiles/sandpile.py"  
**********************************************************************
File "/Users/wdj/sagefiles/sage-4.6.1.rc1/devel/sage/sage/sandpiles/sandpile.py", line 5173:
    sage: for p in P:
       sum([partition_sandpile(S, i).betti(verbose=False)[-Integer(1)] for i in p])
Exception raised:
    Traceback (most recent call last):
      File "/Users/wdj/sagefiles/sage-4.6.1.rc1/local/bin/ncadoctest.py", line 1231, in run_one_test
        self.run_one_example(test, example, filename, compileflags)
      File "/Users/wdj/sagefiles/sage-4.6.1.rc1/local/bin/sagedoctest.py", line 38, in run_one_example
        OrigDocTestRunner.run_one_example(self, test, example, filename, compileflags)
      File "/Users/wdj/sagefiles/sage-4.6.1.rc1/local/bin/ncadoctest.py", line 1172, in run_one_example
        compileflags, 1) in test.globs
      File "<doctest __main__.example_160[3]>", line 1, in <module>
        for p in P:###line 5173:
    sage: for p in P:
    NameError: name 'P' is not defined
**********************************************************************
1 items had failures:
   1 of   5 in __main__.example_160
***Test Failed*** 1 failures.
```
This sort of failure occurs on both a 10.6.6 imac and an ubuntu machine.


> The only problem that I see now is how to deal with namespace issues.  
> I think classes like "Divisor" have too general a name to get imported into 
> Sage at the top level, which is what this patch currently does.  
> I see three alternatives at least:
> 
> 1) Rename functions and classes to be clearly sandpile specific.  
> E.g., rename the Divisor class to something like SandpileDivisor.  
> 


I agree. I actually suggested this when David P was asking for suggestions
years ago in reply to his post asking for comments on a first version.



---

archive/issue_comments_101450.json:
```json
{
    "body": "Supersedes previous patch.",
    "created_at": "2011-01-16T23:38:41Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101450",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Supersedes previous patch.



---

archive/issue_comments_101451.json:
```json
{
    "body": "<div id=\"comment:8\" align=\"right\">comment:8</div>\n\nAttachment: **[trac_10618_sandpiles.patch.gz](https://github.com/sagemath/sage/files/ticket10618/trac_10618_sandpiles.patch.gz)**\n\nSorry about that, I'm not sure how I missed that.  I have tried once again, new patch has same name as the last one.",
    "created_at": "2011-01-16T23:39:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101451",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:8" align="right">comment:8</div>

Attachment: **[trac_10618_sandpiles.patch.gz](https://github.com/sagemath/sage/files/ticket10618/trac_10618_sandpiles.patch.gz)**

Sorry about that, I'm not sure how I missed that.  I have tried once again, new patch has same name as the last one.



---

archive/issue_comments_101452.json:
```json
{
    "body": "<div id=\"comment:9\" align=\"right\">comment:9</div>\n\nThis installed and pases sage -testall on imac running 10.6.6 and sage-4.6.1.rc1. However, the instll of 4ti2 failed. I'll try it on a linux machine.",
    "created_at": "2011-01-17T14:41:20Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101452",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:9" align="right">comment:9</div>

This installed and pases sage -testall on imac running 10.6.6 and sage-4.6.1.rc1. However, the instll of 4ti2 failed. I'll try it on a linux machine.



---

archive/issue_events_139980.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-01-17T17:27:28Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139980"
}
```



---

archive/issue_events_139981.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-01-17T17:27:28Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139981"
}
```



---

archive/issue_comments_101453.json:
```json
{
    "body": "<div id=\"comment:10\" align=\"right\">comment:10</div>\n\nReplying to [@wdjoyner](#comment:9):\n> This installed and passes sage -testall on imac running 10.6.6 and \n> sage-4.6.1.rc1. However, the install of 4ti2 failed. I'll try it on a linux machine.\n\nTo be more precise, the instuctions on installing 4ti2 given in the\ndocstrings to this module fail. If you instead use the instructions \ngiven in https://github.com/sagemath/sage/issues/8217#comment:5\nthen 4ti2 does install fine.\n\nI'll report back on the results of running sage -testall -optional ASAP.",
    "created_at": "2011-01-17T17:27:28Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101453",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:10" align="right">comment:10</div>

Replying to [@wdjoyner](#comment:9):
> This installed and passes sage -testall on imac running 10.6.6 and 
> sage-4.6.1.rc1. However, the install of 4ti2 failed. I'll try it on a linux machine.

To be more precise, the instuctions on installing 4ti2 given in the
docstrings to this module fail. If you instead use the instructions 
given in https://github.com/sagemath/sage/issues/8217#comment:5
then 4ti2 does install fine.

I'll report back on the results of running sage -testall -optional ASAP.



---

archive/issue_events_139982.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-01-17T22:31:03Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139982"
}
```



---

archive/issue_events_139983.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-01-17T22:31:03Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139983"
}
```



---

archive/issue_comments_101454.json:
```json
{
    "body": "<div id=\"comment:11\" align=\"right\">comment:11</div>\n\nThis looks good in the sense that the docstrings do not fail after 4ti2 (and glpk) is added.\n\nI am willing to give this a positive review. However, there are still some problems with the docstrings - (a) the naming issue mentioned above, (b) one date in the AUTHOR field has the wrong year, (c) the instructions on installing 4ti2 lead to the old package which does not install. \n\nShould these be fixed in a separate ticket?",
    "created_at": "2011-01-17T22:31:03Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101454",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:11" align="right">comment:11</div>

This looks good in the sense that the docstrings do not fail after 4ti2 (and glpk) is added.

I am willing to give this a positive review. However, there are still some problems with the docstrings - (a) the naming issue mentioned above, (b) one date in the AUTHOR field has the wrong year, (c) the instructions on installing 4ti2 lead to the old package which does not install. 

Should these be fixed in a separate ticket?



---

archive/issue_events_139984.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-18T02:04:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20info",
    "label_color": "ffff00",
    "label_name": "needs info",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139984"
}
```



---

archive/issue_events_139985.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-01-18T02:04:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139985"
}
```



---

archive/issue_comments_101455.json:
```json
{
    "body": "<div id=\"comment:12\" align=\"right\">comment:12</div>\n\nNo, I think we should get this pretty much right before it officially goes in - it would be annoying to change names later since we'd have to formally deprecate everything.  I'll ask David Perkinson directly what he thinks about the namespace issues.",
    "created_at": "2011-01-18T02:04:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101455",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:12" align="right">comment:12</div>

No, I think we should get this pretty much right before it officially goes in - it would be annoying to change names later since we'd have to formally deprecate everything.  I'll ask David Perkinson directly what he thinks about the namespace issues.



---

archive/issue_comments_101456.json:
```json
{
    "body": "Attachment: **[trac_10618_sandpiles.2.patch.gz](https://github.com/sagemath/sage/files/ticket10618/trac_10618_sandpiles.2.patch.gz)**",
    "created_at": "2011-01-27T04:51:32Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101456",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Attachment: **[trac_10618_sandpiles.2.patch.gz](https://github.com/sagemath/sage/files/ticket10618/trac_10618_sandpiles.2.patch.gz)**



---

archive/issue_comments_101457.json:
```json
{
    "body": "<div id=\"comment:13\" align=\"right\">comment:13</div>\n\nDavid Perkinson is OK with the idea of renaming some functions and classes to avoid confusion in the top namespace.  The attached patch - trac_10618_sandpiles.2.patch - is a first attempt at resolving this aspect of the module.",
    "created_at": "2011-01-27T04:58:45Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101457",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:13" align="right">comment:13</div>

David Perkinson is OK with the idea of renaming some functions and classes to avoid confusion in the top namespace.  The attached patch - trac_10618_sandpiles.2.patch - is a first attempt at resolving this aspect of the module.



---

archive/issue_comments_101458.json:
```json
{
    "body": "<div id=\"comment:14\" align=\"right\">comment:14</div>\n\nApplying only trac_10618_sandpiles.2.patch to 4.6.1.rc0 on an ubuntu machine resulted in all tests passed in sage -testall. This is without 4ti2.\n\nI think you still need\nhttp://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg\nas opposed to the version on the sage webpage.\nI will test this next.\n\nAlso, I think you need to add to the intro of this ticket that only the last patch need be applied.",
    "created_at": "2011-02-01T12:47:54Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101458",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:14" align="right">comment:14</div>

Applying only trac_10618_sandpiles.2.patch to 4.6.1.rc0 on an ubuntu machine resulted in all tests passed in sage -testall. This is without 4ti2.

I think you still need
http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg
as opposed to the version on the sage webpage.
I will test this next.

Also, I think you need to add to the intro of this ticket that only the last patch need be applied.



---

archive/issue_events_139986.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-02-01T12:47:54Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139986"
}
```



---

archive/issue_events_139987.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-02-01T12:47:54Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139987"
}
```



---

archive/issue_comments_101459.json:
```json
{
    "body": "<div id=\"comment:15\" align=\"right\">comment:15</div>\n\nReplying to [@wdjoyner](#comment:14):\n> Applying only trac_10618_sandpiles.2.patch to 4.6.1.rc0 on an ubuntu machine resulted in all tests passed in sage -testall. This is without 4ti2.\n> \n> I think you still need\n> http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg\n> as opposed to the version on the sage webpage.\n> I will test this next.\n\nAll tests passed! Positive review, though the ticket\nhttps://github.com/sagemath/sage/issues/8217 is related...\n\nThanks Marshall!\n\n\n> \n> Also, I think you need to add to the intro of this ticket that only the last patch need be applied.",
    "created_at": "2011-02-02T14:28:35Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101459",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:15" align="right">comment:15</div>

Replying to [@wdjoyner](#comment:14):
> Applying only trac_10618_sandpiles.2.patch to 4.6.1.rc0 on an ubuntu machine resulted in all tests passed in sage -testall. This is without 4ti2.
> 
> I think you still need
> http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg
> as opposed to the version on the sage webpage.
> I will test this next.

All tests passed! Positive review, though the ticket
https://github.com/sagemath/sage/issues/8217 is related...

Thanks Marshall!


> 
> Also, I think you need to add to the intro of this ticket that only the last patch need be applied.



---

archive/issue_events_139988.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-02-02T14:28:35Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139988"
}
```



---

archive/issue_events_139989.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-02-02T14:28:35Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139989"
}
```



---

archive/issue_events_139990.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-07T08:17:30Z",
    "event": "demilestoned",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "milestone_number": null,
    "milestone_title": "sage-4.6.2",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139990"
}
```



---

archive/issue_events_139991.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-07T08:17:30Z",
    "event": "milestoned",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "milestone_number": null,
    "milestone_title": "sage-4.7",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139991"
}
```



---

archive/issue_comments_101460.json:
```json
{
    "body": "Reviewer: **David Joyner**",
    "created_at": "2011-02-22T17:04:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101460",
    "user": "https://github.com/jdemeyer"
}
```

Reviewer: **David Joyner**



---

archive/issue_events_139992.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-22T17:04:49Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139992"
}
```



---

archive/issue_events_139993.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-02-22T17:04:49Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139993"
}
```



---

archive/issue_comments_101461.json:
```json
{
    "body": "<div id=\"comment:17\" align=\"right\">comment:17</div>\n\nThe commit message of the patch should contain the ticket number.",
    "created_at": "2011-02-22T17:04:49Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101461",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:17" align="right">comment:17</div>

The commit message of the patch should contain the ticket number.



---

archive/issue_comments_101462.json:
```json
{
    "body": "<div id=\"comment:18\" align=\"right\">comment:18</div>\n\nI get various doctest failures:\n\n```\nsage -t  -force_lib devel/sage/sage/sandpiles/sandpile.py\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/devel/sage-main/sage/sandpiles/sandpile.py\", line 1815:\n    sage: S.unsaturated_ideal().gens()\nExpected:\n    (x1^3 - x4*x3*x0, x2^3 - x5*x3*x0, x3^2 - x5*x2, x4^2 - x3*x1, x5^2 - x3*x2)\nGot:\n    [x1^3 - x4*x3*x0, x2^3 - x5*x3*x0, x3^2 - x5*x2, x4^2 - x3*x1, x5^2 - x3*x2]\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/devel/sage-main/sage/sandpiles/sandpile.py\", line 1817:\n    sage: S.ideal().gens()\nExpected:\n    (x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2)\nGot:\n    [x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2]\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/devel/sage-main/sage/sandpiles/sandpile.py\", line 1840:\n    sage: S.ideal(True)\nExpected:\n    (x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2)\nGot:\n    [x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2]\n**********************************************************************\nFile \"/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/devel/sage-main/sage/sandpiles/sandpile.py\", line 1842:\n    sage: S.ideal().gens()  # another way to get the generators\nExpected:\n    (x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2)\nGot:\n    [x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2]\n**********************************************************************\n```",
    "created_at": "2011-03-04T13:27:51Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101462",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:18" align="right">comment:18</div>

I get various doctest failures:

```
sage -t  -force_lib devel/sage/sage/sandpiles/sandpile.py
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/devel/sage-main/sage/sandpiles/sandpile.py", line 1815:
    sage: S.unsaturated_ideal().gens()
Expected:
    (x1^3 - x4*x3*x0, x2^3 - x5*x3*x0, x3^2 - x5*x2, x4^2 - x3*x1, x5^2 - x3*x2)
Got:
    [x1^3 - x4*x3*x0, x2^3 - x5*x3*x0, x3^2 - x5*x2, x4^2 - x3*x1, x5^2 - x3*x2]
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/devel/sage-main/sage/sandpiles/sandpile.py", line 1817:
    sage: S.ideal().gens()
Expected:
    (x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2)
Got:
    [x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2]
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/devel/sage-main/sage/sandpiles/sandpile.py", line 1840:
    sage: S.ideal(True)
Expected:
    (x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2)
Got:
    [x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2]
**********************************************************************
File "/mnt/usb1/scratch/jdemeyer/merger/sage-4.7.alpha2/devel/sage-main/sage/sandpiles/sandpile.py", line 1842:
    sage: S.ideal().gens()  # another way to get the generators
Expected:
    (x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2)
Got:
    [x2 - x0, x3^2 - x5*x0, x5*x3 - x0^2, x4^2 - x3*x1, x5^2 - x3*x0, x1^3 - x4*x3*x0, x4*x1^2 - x5*x0^2]
**********************************************************************
```



---

archive/issue_comments_101463.json:
```json
{
    "body": "Description changed:\n``````diff\n--- \n+++ \n@@ -1,7 +1,12 @@\n Since David Perkinson's sandpile module (for studying the Abelian Sandpile Model; see for example: [http://en.wikipedia.org/wiki/Bak-Tang-Wiesenfeld_sandpile](http://en.wikipedia.org/wiki/Bak-Tang-Wiesenfeld_sandpile) or [http://people.reed.edu/~davidp/sand/](http://people.reed.edu/~davidp/sand/)) is already written as a properly formatted Sage module it makes sense to include it in the Sage library.\n \n-This module involves a variety of mathematics but it seems to make the most sense in the graphs module.\n+This module involves a variety of mathematics so it is added in its own module.\n \n-Some parts of the module require 4ti2, currently an experimental package (but there is no reason it can't be at least an optional package), but this can be explained in the relevant docstrings.\n+Some parts of the module require 4ti2, currently an experimental package (but there is no reason it can't be at least an optional package), but this can be explained in the relevant docstrings.  Currently the 4ti2 package at:\n+[http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg](http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg)\n+is best to use.\n \n In case any mathematical justification is needed, this model is of considerable and rising interest.  For example, at the joint math meetings in 2011 there was a talk by Yuval Peres of Microsoft Research surveying it: [http://www.ams.org/amsmtgs/2125_abstracts/1067-a0-38.pdf](http://www.ams.org/amsmtgs/2125_abstracts/1067-a0-38.pdf).\n+\n+Only apply:\n+trac_10618_sandpiles.3.patch\n``````\n",
    "created_at": "2011-03-14T12:20:40Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101463",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Description changed:
``````diff
--- 
+++ 
@@ -1,7 +1,12 @@
 Since David Perkinson's sandpile module (for studying the Abelian Sandpile Model; see for example: [http://en.wikipedia.org/wiki/Bak-Tang-Wiesenfeld_sandpile](http://en.wikipedia.org/wiki/Bak-Tang-Wiesenfeld_sandpile) or [http://people.reed.edu/~davidp/sand/](http://people.reed.edu/~davidp/sand/)) is already written as a properly formatted Sage module it makes sense to include it in the Sage library.
 
-This module involves a variety of mathematics but it seems to make the most sense in the graphs module.
+This module involves a variety of mathematics so it is added in its own module.
 
-Some parts of the module require 4ti2, currently an experimental package (but there is no reason it can't be at least an optional package), but this can be explained in the relevant docstrings.
+Some parts of the module require 4ti2, currently an experimental package (but there is no reason it can't be at least an optional package), but this can be explained in the relevant docstrings.  Currently the 4ti2 package at:
+[http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg](http://sage.math.washington.edu/home/mhampton/4ti2-1.3.2.p1.spkg)
+is best to use.
 
 In case any mathematical justification is needed, this model is of considerable and rising interest.  For example, at the joint math meetings in 2011 there was a talk by Yuval Peres of Microsoft Research surveying it: [http://www.ams.org/amsmtgs/2125_abstracts/1067-a0-38.pdf](http://www.ams.org/amsmtgs/2125_abstracts/1067-a0-38.pdf).
+
+Only apply:
+trac_10618_sandpiles.3.patch
``````




---

archive/issue_events_139994.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-03-14T12:20:58Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139994"
}
```



---

archive/issue_events_139995.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-03-14T12:20:58Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139995"
}
```



---

archive/issue_comments_101464.json:
```json
{
    "body": "<div id=\"comment:21\" align=\"right\">comment:21</div>\n\nInstalls fine to 4.7.a1 and passes sage -testall.",
    "created_at": "2011-03-14T14:32:55Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101464",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:21" align="right">comment:21</div>

Installs fine to 4.7.a1 and passes sage -testall.



---

archive/issue_events_139996.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-03-14T14:32:55Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139996"
}
```



---

archive/issue_events_139997.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-03-14T14:32:55Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139997"
}
```



---

archive/issue_comments_101465.json:
```json
{
    "body": "<div id=\"comment:22\" align=\"right\">comment:22</div>\n\nAgain: you should change the commit message of the patch such that the first line mentions the ticket number.  Use `hg qrefresh -e` for that.",
    "created_at": "2011-03-16T11:28:27Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101465",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:22" align="right">comment:22</div>

Again: you should change the commit message of the patch such that the first line mentions the ticket number.  Use `hg qrefresh -e` for that.



---

archive/issue_events_139998.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-16T11:28:27Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139998"
}
```



---

archive/issue_events_139999.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-16T11:28:27Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-139999"
}
```



---

archive/issue_comments_101466.json:
```json
{
    "body": "Work Issues: **check \"long time\"**",
    "created_at": "2011-03-19T17:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101466",
    "user": "https://github.com/jdemeyer"
}
```

Work Issues: **check "long time"**



---

archive/issue_comments_101467.json:
```json
{
    "body": "<div id=\"comment:23\" align=\"right\">comment:23</div>\n\nOn which machine did you check where to write \"# long time\"?  It seems that most of these \"long time\" doctests take less than 1 second on `sage.math.washington.edu`, which means that they should not be marked \"long time\".\n\nFor example, this doctest on line 196::\n\n```\nsage: from sage.sandpiles import *\nsage: g = {0: {},                    \\\n               1: {0: 1, 2: 1, 3: 1},    \\\n               2: {1: 1, 3: 1, 4: 1},    \\\n               3: {1: 1, 2: 1, 4: 1},    \\\n               4: {2: 1, 3: 1}}\nsage: S = Sandpile(g,0)\nsage: S.resolution() # long time (minutes)\n'R^1 <-- R^7 <-- R^15 <-- R^13 <-- R^4'\n```\n\nEven though the test claims \"minutes\", in reality it takes about half a second.",
    "created_at": "2011-03-19T17:37:15Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101467",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:23" align="right">comment:23</div>

On which machine did you check where to write "# long time"?  It seems that most of these "long time" doctests take less than 1 second on `sage.math.washington.edu`, which means that they should not be marked "long time".

For example, this doctest on line 196::

```
sage: from sage.sandpiles import *
sage: g = {0: {},                    \
               1: {0: 1, 2: 1, 3: 1},    \
               2: {1: 1, 3: 1, 4: 1},    \
               3: {1: 1, 2: 1, 4: 1},    \
               4: {2: 1, 3: 1}}
sage: S = Sandpile(g,0)
sage: S.resolution() # long time (minutes)
'R^1 <-- R^7 <-- R^15 <-- R^13 <-- R^4'
```

Even though the test claims "minutes", in reality it takes about half a second.



---

archive/issue_comments_101468.json:
```json
{
    "body": "Apply only this patch.",
    "created_at": "2011-03-19T19:53:44Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101468",
    "user": "https://github.com/sagetrac-mhampton"
}
```

Apply only this patch.



---

archive/issue_comments_101469.json:
```json
{
    "body": "<div id=\"comment:24\" align=\"right\">comment:24</div>\n\nAttachment: **[trac_10618_sandpiles.3.patch.gz](https://github.com/sagemath/sage/files/ticket10618/trac_10618_sandpiles.3.patch.gz)**\n\nI'm not sure why those used to take so much longer.  Its possible that some changes in the Singular interface since then sped things up.  Anyway, now testing everything without the 4ti2 dependencies takes abour 24 seconds on my laptop, and including the 4ti2 stuff it takes about 30 seconds.  So I removed all the \"long time\" flags.\n\nI also put the ticket number on the commit message.",
    "created_at": "2011-03-19T19:55:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101469",
    "user": "https://github.com/sagetrac-mhampton"
}
```

<div id="comment:24" align="right">comment:24</div>

Attachment: **[trac_10618_sandpiles.3.patch.gz](https://github.com/sagemath/sage/files/ticket10618/trac_10618_sandpiles.3.patch.gz)**

I'm not sure why those used to take so much longer.  Its possible that some changes in the Singular interface since then sped things up.  Anyway, now testing everything without the 4ti2 dependencies takes abour 24 seconds on my laptop, and including the 4ti2 stuff it takes about 30 seconds.  So I removed all the "long time" flags.

I also put the ticket number on the commit message.



---

archive/issue_events_140000.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-03-19T19:55:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20work",
    "label_color": "ffff00",
    "label_name": "needs work",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-140000"
}
```



---

archive/issue_events_140001.json:
```json
{
    "actor": "https://github.com/sagetrac-mhampton",
    "created_at": "2011-03-19T19:55:48Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-140001"
}
```



---

archive/issue_events_140002.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-03-19T22:52:24Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/needs%20review",
    "label_color": "7fff00",
    "label_name": "needs review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-140002"
}
```



---

archive/issue_events_140003.json:
```json
{
    "actor": "https://github.com/wdjoyner",
    "created_at": "2011-03-19T22:52:24Z",
    "event": "labeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-140003"
}
```



---

archive/issue_comments_101470.json:
```json
{
    "body": "<div id=\"comment:25\" align=\"right\">comment:25</div>\n\nInstalls fine to 4.7.a1 and passes sage -testall.\n\nHope this stays as a positive review this time.\n\nThanks again Marshall for creating this.",
    "created_at": "2011-03-19T22:52:24Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101470",
    "user": "https://github.com/wdjoyner"
}
```

<div id="comment:25" align="right">comment:25</div>

Installs fine to 4.7.a1 and passes sage -testall.

Hope this stays as a positive review this time.

Thanks again Marshall for creating this.



---

archive/issue_events_140004.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-21T09:42:48Z",
    "event": "unlabeled",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "label": "https://github.com/sagemath/sage/labels/positive%20review",
    "label_color": "dfffc0",
    "label_name": "positive review",
    "label_text_color": "ffffff",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-140004"
}
```



---

archive/issue_events_140005.json:
```json
{
    "actor": "https://github.com/jdemeyer",
    "created_at": "2011-03-21T09:42:48Z",
    "event": "closed",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_event",
    "url": "https://github.com/sagemath/sage/issues/10618#event-140005"
}
```



---

archive/issue_comments_101471.json:
```json
{
    "body": "Merged: **sage-4.7.alpha2**",
    "created_at": "2011-03-21T09:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101471",
    "user": "https://github.com/jdemeyer"
}
```

Merged: **sage-4.7.alpha2**



---

archive/issue_comments_101472.json:
```json
{
    "body": "Changed work issues from **check \"long time\"** to none",
    "created_at": "2011-03-21T09:42:48Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101472",
    "user": "https://github.com/jdemeyer"
}
```

Changed work issues from **check "long time"** to none



---

archive/issue_comments_101473.json:
```json
{
    "body": "<div id=\"comment:27\" align=\"right\">comment:27</div>\n\nIt seems that testing this module can give enormously different timings depending on the machine.  Any clue why?\n\nOn `sage.math.washington.edu`:\n\n```\n$ ./sage -t \"devel/sage/sage/sandpiles/sandpile.py\"\n[...]\nTotal time for all tests: 23.7 seconds\n```\n\nBut on my laptop (Gentoo Linux, Intel Core 2 Duo, gcc 4.4.3):\n\n```\n$ ./sage -t \"devel/sage/sage/sandpiles/sandpile.py\"\nsage -t  \"devel/sage/sage/sandpiles/sandpile.py\"\n*** *** Error: TIMED OUT! PROCESS KILLED! *** ***\n```\n(i.e. it takes more than 360 seconds)",
    "created_at": "2011-04-18T16:02:12Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101473",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:27" align="right">comment:27</div>

It seems that testing this module can give enormously different timings depending on the machine.  Any clue why?

On `sage.math.washington.edu`:

```
$ ./sage -t "devel/sage/sage/sandpiles/sandpile.py"
[...]
Total time for all tests: 23.7 seconds
```

But on my laptop (Gentoo Linux, Intel Core 2 Duo, gcc 4.4.3):

```
$ ./sage -t "devel/sage/sage/sandpiles/sandpile.py"
sage -t  "devel/sage/sage/sandpiles/sandpile.py"
*** *** Error: TIMED OUT! PROCESS KILLED! *** ***
```
(i.e. it takes more than 360 seconds)



---

archive/issue_comments_101474.json:
```json
{
    "body": "<div id=\"comment:28\" align=\"right\">comment:28</div>\n\nPlease check the thread\n[http://groups.google.com/group/sage-devel/browse_thread/thread/5db90b3681e7dbcb](http://groups.google.com/group/sage-devel/browse_thread/thread/5db90b3681e7dbcb)\n\nSomething fishy with the `sandpile.py` timings...",
    "created_at": "2011-04-18T16:45:22Z",
    "formatter": "markdown",
    "issue": "https://github.com/sagemath/sage/issues/10618",
    "type": "issue_comment",
    "url": "https://github.com/sagemath/sage/issues/10618#issuecomment-101474",
    "user": "https://github.com/jdemeyer"
}
```

<div id="comment:28" align="right">comment:28</div>

Please check the thread
[http://groups.google.com/group/sage-devel/browse_thread/thread/5db90b3681e7dbcb](http://groups.google.com/group/sage-devel/browse_thread/thread/5db90b3681e7dbcb)

Something fishy with the `sandpile.py` timings...
